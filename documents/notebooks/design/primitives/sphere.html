<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../../genindex.html" /><link rel="search" title="Search" href="../../../../search.html" /><link rel="next" title="Cylinder" href="cylinder.html" /><link rel="prev" title="Box" href="box.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Sphere - ADA - Assembly for Design &amp; Analysis</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../../index.html"><div class="brand">ADA - Assembly for Design & Analysis</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../../index.html">
  
  
  <span class="sidebar-brand-text">ADA - Assembly for Design & Analysis</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../steel_detailing.html">Steel detailing as a method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../path_to_software_agnosticism.html">Path to Software Agnosticism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../meshing.html">Build mesh recipes, not meshes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Primitives</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="box.html">Box</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Sphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="cylinder.html">Cylinder</a></li>
<li class="toctree-l1"><a class="reference internal" href="cone.html">Cone</a></li>
<li class="toctree-l1"><a class="reference internal" href="extrusion.html">Extrusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="revolve.html">Revolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="sweeps.html">Sweeps</a></li>
<li class="toctree-l1"><a class="reference internal" href="beams.html">Beams</a></li>
<li class="toctree-l1"><a class="reference internal" href="plates.html">Plates</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipe.html">Pipe</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modelling</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../boolean_operations.html">Boolean Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts_and_assemblies.html">Parts and Assemblies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../placement.html">Placement of parts and objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sections.html">Sections in ADA</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Simulation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../analysis/simply_supported_beam_eigenvalue.html">Eigenvalue Analysis of Simply Supported Beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../analysis/simply_supported_beam_static_gravity.html">Static Analysis of Simply Supported Beam</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FEA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../fea/fea_software.html">FEA Software</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ongoing Work</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ifc_database.html">IFC Database</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../code.html">Code Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/Krande/adapy/blob/main/docs/documents/notebooks/design/primitives/sphere.ipynb?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/Krande/adapy/edit/main/docs/documents/notebooks/design/primitives/sphere.ipynb" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <div class="admonition note">
  This page was generated from
  <a class="reference external" href="https://github.com/Krande/adapy/blob/v0.7.7/docs/documents/notebooks/design/primitives/sphere.ipynb">docs/documents/notebooks/design/primitives/sphere.ipynb</a>.<br>
  Interactive online version:
  <span style="white-space: nowrap;"><a href="https://mybinder.org/v2/gh/Krande/adapy/v0.7.7?filepath=docs/documents/notebooks/design/primitives/sphere.ipynb"><img alt="Binder badge" src="https://mybinder.org/badge_logo.svg" style="vertical-align:text-bottom"></a> - </span>
  <a href="sphere.ipynb" class="reference download internal" download>Download notebook</a> -
  <script>
    if (document.location.host) {
      let nbviewer_link = document.createElement('a');
      nbviewer_link.setAttribute('href',
        'https://nbviewer.org/url' +
        (window.location.protocol == 'https:' ? 's/' : '/') +
        window.location.host +
        window.location.pathname.slice(0, -4) +
        'ipynb');
      nbviewer_link.innerHTML = 'Or view it on <em>nbviewer</em>';
      nbviewer_link.classList.add('reference');
      nbviewer_link.classList.add('external');
      document.currentScript.replaceWith(nbviewer_link, '.');
    }
  </script>
</div><section id="Sphere">
<h1>Sphere<a class="headerlink" href="#Sphere" title="Link to this heading">Â¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">ada</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sphere</span>  <span class="o">=</span> <span class="n">ada</span><span class="o">.</span><span class="n">PrimSphere</span><span class="p">(</span><span class="s1">&#39;sphere1&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">sphere</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
        &lt;title&gt;ADA-PY Viewer&lt;/title&gt;
      &lt;script type=&quot;module&quot; crossorigin&gt;
var Dk=Object.defineProperty;var Ik=(n,e,t)=&gt;e in n?Dk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Qe=(n,e,t)=&gt;Ik(n,typeof e!=&quot;symbol&quot;?e+&quot;&quot;:e,t);(function(){const e=document.createElement(&quot;link&quot;).relList;if(e&amp;&amp;e.supports&amp;&amp;e.supports(&quot;modulepreload&quot;))return;for(const r of document.querySelectorAll(&#x27;link[rel=&quot;modulepreload&quot;]&#x27;))i(r);new MutationObserver(r=&gt;{for(const s of r)if(s.type===&quot;childList&quot;)for(const o of s.addedNodes)o.tagName===&quot;LINK&quot;&amp;&amp;o.rel===&quot;modulepreload&quot;&amp;&amp;i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&amp;&amp;(s.integrity=r.integrity),r.referrerPolicy&amp;&amp;(s.referrerPolicy=r.referrerPolicy),r.crossOrigin===&quot;use-credentials&quot;?s.credentials=&quot;include&quot;:r.crossOrigin===&quot;anonymous&quot;?s.credentials=&quot;omit&quot;:s.credentials=&quot;same-origin&quot;,s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function iy(n){return n&amp;&amp;n.__esModule&amp;&amp;Object.prototype.hasOwnProperty.call(n,&quot;default&quot;)?n.default:n}function Pk(n){if(Object.prototype.hasOwnProperty.call(n,&quot;__esModule&quot;))return n;var e=n.default;if(typeof e==&quot;function&quot;){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var hb={exports:{}},Mf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HM;function Lk(){if(HM)return Mf;HM=1;var n=Symbol.for(&quot;react.transitional.element&quot;),e=Symbol.for(&quot;react.fragment&quot;);function t(i,r,s){var o=null;if(s!==void 0&amp;&amp;(o=&quot;&quot;+s),r.key!==void 0&amp;&amp;(o=&quot;&quot;+r.key),&quot;key&quot;in r){s={};for(var l in r)l!==&quot;key&quot;&amp;&amp;(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:o,ref:r!==void 0?r:null,props:s}}return Mf.Fragment=e,Mf.jsx=t,Mf.jsxs=t,Mf}var VM;function Uk(){return VM||(VM=1,hb.exports=Lk()),hb.exports}var I=Uk(),fb={exports:{}},Af={},db={exports:{}},pb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function kk(){return GM||(GM=1,function(n){function e(P,j){var G=P.length;P.push(j);e:for(;0&lt;G;){var ee=G-1&gt;&gt;&gt;1,F=P[ee];if(0&lt;r(F,j))P[ee]=j,P[G]=F,G=ee;else break e}}function t(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var j=P[0],G=P.pop();if(G!==j){P[0]=G;e:for(var ee=0,F=P.length,ne=F&gt;&gt;&gt;1;ee&lt;ne;){var le=2*(ee+1)-1,ce=P[le],ie=le+1,oe=P[ie];if(0&gt;r(ce,G))ie&lt;F&amp;&amp;0&gt;r(oe,ce)?(P[ee]=oe,P[ie]=G,ee=ie):(P[ee]=ce,P[le]=G,ee=le);else if(ie&lt;F&amp;&amp;0&gt;r(oe,G))P[ee]=oe,P[ie]=G,ee=ie;else break e}}return j}function r(P,j){var G=P.sortIndex-j.sortIndex;return G!==0?G:P.id-j.id}if(n.unstable_now=void 0,typeof performance==&quot;object&quot;&amp;&amp;typeof performance.now==&quot;function&quot;){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,m=3,g=!1,v=!1,x=!1,b=!1,_=typeof setTimeout==&quot;function&quot;?setTimeout:null,T=typeof clearTimeout==&quot;function&quot;?clearTimeout:null,w=typeof setImmediate&lt;&quot;u&quot;?setImmediate:null;function S(P){for(var j=t(h);j!==null;){if(j.callback===null)i(h);else if(j.startTime&lt;=P)i(h),j.sortIndex=j.expirationTime,e(u,j);else break;j=t(h)}}function C(P){if(x=!1,S(P),!v)if(t(u)!==null)v=!0,O||(O=!0,H());else{var j=t(h);j!==null&amp;&amp;$(C,j.startTime-P)}}var O=!1,M=-1,N=5,R=-1;function D(){return b?!0:!(n.unstable_now()-R&lt;N)}function L(){if(b=!1,O){var P=n.unstable_now();R=P;var j=!0;try{e:{v=!1,x&amp;&amp;(x=!1,T(M),M=-1),g=!0;var G=m;try{t:{for(S(P),p=t(u);p!==null&amp;&amp;!(p.expirationTime&gt;P&amp;&amp;D());){var ee=p.callback;if(typeof ee==&quot;function&quot;){p.callback=null,m=p.priorityLevel;var F=ee(p.expirationTime&lt;=P);if(P=n.unstable_now(),typeof F==&quot;function&quot;){p.callback=F,S(P),j=!0;break t}p===t(u)&amp;&amp;i(u),S(P)}else i(u);p=t(u)}if(p!==null)j=!0;else{var ne=t(h);ne!==null&amp;&amp;$(C,ne.startTime-P),j=!1}}break e}finally{p=null,m=G,g=!1}j=void 0}}finally{j?H():O=!1}}}var H;if(typeof w==&quot;function&quot;)H=function(){w(L)};else if(typeof MessageChannel&lt;&quot;u&quot;){var q=new MessageChannel,z=q.port2;q.port1.onmessage=L,H=function(){z.postMessage(null)}}else H=function(){_(L,0)};function $(P,j){M=_(function(){P(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0&gt;P||125&lt;P?console.error(&quot;forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported&quot;):N=0&lt;P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(P){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var G=m;m=j;try{return P()}finally{m=G}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(P,j){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var G=m;m=P;try{return j()}finally{m=G}},n.unstable_scheduleCallback=function(P,j,G){var ee=n.unstable_now();switch(typeof G==&quot;object&quot;&amp;&amp;G!==null?(G=G.delay,G=typeof G==&quot;number&quot;&amp;&amp;0&lt;G?ee+G:ee):G=ee,P){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=G+F,P={id:f++,callback:j,priorityLevel:P,startTime:G,expirationTime:F,sortIndex:-1},G&gt;ee?(P.sortIndex=G,e(h,P),t(u)===null&amp;&amp;P===t(h)&amp;&amp;(x?(T(M),M=-1):x=!0,$(C,G-ee))):(P.sortIndex=F,e(u,P),v||g||(v=!0,O||(O=!0,H()))),P},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(P){var j=m;return function(){var G=m;m=j;try{return P.apply(this,arguments)}finally{m=G}}}}(pb)),pb}var jM;function Fk(){return jM||(jM=1,db.exports=kk()),db.exports}var mb={exports:{}},Yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WM;function zk(){if(WM)return Yt;WM=1;var n=Symbol.for(&quot;react.transitional.element&quot;),e=Symbol.for(&quot;react.portal&quot;),t=Symbol.for(&quot;react.fragment&quot;),i=Symbol.for(&quot;react.strict_mode&quot;),r=Symbol.for(&quot;react.profiler&quot;),s=Symbol.for(&quot;react.consumer&quot;),o=Symbol.for(&quot;react.context&quot;),l=Symbol.for(&quot;react.forward_ref&quot;),u=Symbol.for(&quot;react.suspense&quot;),h=Symbol.for(&quot;react.memo&quot;),f=Symbol.for(&quot;react.lazy&quot;),p=Symbol.iterator;function m(F){return F===null||typeof F!=&quot;object&quot;?null:(F=p&amp;&amp;F[p]||F[&quot;@@iterator&quot;],typeof F==&quot;function&quot;?F:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function b(F,ne,le){this.props=F,this.context=ne,this.refs=x,this.updater=le||g}b.prototype.isReactComponent={},b.prototype.setState=function(F,ne){if(typeof F!=&quot;object&quot;&amp;&amp;typeof F!=&quot;function&quot;&amp;&amp;F!=null)throw Error(&quot;takes an object of state variables to update or a function which returns an object of state variables.&quot;);this.updater.enqueueSetState(this,F,ne,&quot;setState&quot;)},b.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,&quot;forceUpdate&quot;)};function _(){}_.prototype=b.prototype;function T(F,ne,le){this.props=F,this.context=ne,this.refs=x,this.updater=le||g}var w=T.prototype=new _;w.constructor=T,v(w,b.prototype),w.isPureReactComponent=!0;var S=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function M(F,ne,le,ce,ie,oe){return le=oe.ref,{$$typeof:n,type:F,key:ne,ref:le!==void 0?le:null,props:oe}}function N(F,ne){return M(F.type,ne,void 0,void 0,void 0,F.props)}function R(F){return typeof F==&quot;object&quot;&amp;&amp;F!==null&amp;&amp;F.$$typeof===n}function D(F){var ne={&quot;=&quot;:&quot;=0&quot;,&quot;:&quot;:&quot;=2&quot;};return&quot;$&quot;+F.replace(/[=:]/g,function(le){return ne[le]})}var L=/\/+/g;function H(F,ne){return typeof F==&quot;object&quot;&amp;&amp;F!==null&amp;&amp;F.key!=null?D(&quot;&quot;+F.key):ne.toString(36)}function q(){}function z(F){switch(F.status){case&quot;fulfilled&quot;:return F.value;case&quot;rejected&quot;:throw F.reason;default:switch(typeof F.status==&quot;string&quot;?F.then(q,q):(F.status=&quot;pending&quot;,F.then(function(ne){F.status===&quot;pending&quot;&amp;&amp;(F.status=&quot;fulfilled&quot;,F.value=ne)},function(ne){F.status===&quot;pending&quot;&amp;&amp;(F.status=&quot;rejected&quot;,F.reason=ne)})),F.status){case&quot;fulfilled&quot;:return F.value;case&quot;rejected&quot;:throw F.reason}}throw F}function $(F,ne,le,ce,ie){var oe=typeof F;(oe===&quot;undefined&quot;||oe===&quot;boolean&quot;)&amp;&amp;(F=null);var ae=!1;if(F===null)ae=!0;else switch(oe){case&quot;bigint&quot;:case&quot;string&quot;:case&quot;number&quot;:ae=!0;break;case&quot;object&quot;:switch(F.$$typeof){case n:case e:ae=!0;break;case f:return ae=F._init,$(ae(F._payload),ne,le,ce,ie)}}if(ae)return ie=ie(F),ae=ce===&quot;&quot;?&quot;.&quot;+H(F,0):ce,S(ie)?(le=&quot;&quot;,ae!=null&amp;&amp;(le=ae.replace(L,&quot;$&amp;/&quot;)+&quot;/&quot;),$(ie,ne,le,&quot;&quot;,function(He){return He})):ie!=null&amp;&amp;(R(ie)&amp;&amp;(ie=N(ie,le+(ie.key==null||F&amp;&amp;F.key===ie.key?&quot;&quot;:(&quot;&quot;+ie.key).replace(L,&quot;$&amp;/&quot;)+&quot;/&quot;)+ae)),ne.push(ie)),1;ae=0;var ue=ce===&quot;&quot;?&quot;.&quot;:ce+&quot;:&quot;;if(S(F))for(var ve=0;ve&lt;F.length;ve++)ce=F[ve],oe=ue+H(ce,ve),ae+=$(ce,ne,le,oe,ie);else if(ve=m(F),typeof ve==&quot;function&quot;)for(F=ve.call(F),ve=0;!(ce=F.next()).done;)ce=ce.value,oe=ue+H(ce,ve++),ae+=$(ce,ne,le,oe,ie);else if(oe===&quot;object&quot;){if(typeof F.then==&quot;function&quot;)return $(z(F),ne,le,ce,ie);throw ne=String(F),Error(&quot;Objects are not valid as a React child (found: &quot;+(ne===&quot;[object Object]&quot;?&quot;object with keys {&quot;+Object.keys(F).join(&quot;, &quot;)+&quot;}&quot;:ne)+&quot;). If you meant to render a collection of children, use an array instead.&quot;)}return ae}function P(F,ne,le){if(F==null)return F;var ce=[],ie=0;return $(F,ce,&quot;&quot;,&quot;&quot;,function(oe){return ne.call(le,oe,ie++)}),ce}function j(F){if(F._status===-1){var ne=F._result;ne=ne(),ne.then(function(le){(F._status===0||F._status===-1)&amp;&amp;(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&amp;&amp;(F._status=2,F._result=le)}),F._status===-1&amp;&amp;(F._status=0,F._result=ne)}if(F._status===1)return F._result.default;throw F._result}var G=typeof reportError==&quot;function&quot;?reportError:function(F){if(typeof window==&quot;object&quot;&amp;&amp;typeof window.ErrorEvent==&quot;function&quot;){var ne=new window.ErrorEvent(&quot;error&quot;,{bubbles:!0,cancelable:!0,message:typeof F==&quot;object&quot;&amp;&amp;F!==null&amp;&amp;typeof F.message==&quot;string&quot;?String(F.message):String(F),error:F});if(!window.dispatchEvent(ne))return}else if(typeof process==&quot;object&quot;&amp;&amp;typeof process.emit==&quot;function&quot;){process.emit(&quot;uncaughtException&quot;,F);return}console.error(F)};function ee(){}return Yt.Children={map:P,forEach:function(F,ne,le){P(F,function(){ne.apply(this,arguments)},le)},count:function(F){var ne=0;return P(F,function(){ne++}),ne},toArray:function(F){return P(F,function(ne){return ne})||[]},only:function(F){if(!R(F))throw Error(&quot;React.Children.only expected to receive a single React element child.&quot;);return F}},Yt.Component=b,Yt.Fragment=t,Yt.Profiler=r,Yt.PureComponent=T,Yt.StrictMode=i,Yt.Suspense=u,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return C.H.useMemoCache(F)}},Yt.cache=function(F){return function(){return F.apply(null,arguments)}},Yt.cloneElement=function(F,ne,le){if(F==null)throw Error(&quot;The argument must be a React element, but you passed &quot;+F+&quot;.&quot;);var ce=v({},F.props),ie=F.key,oe=void 0;if(ne!=null)for(ae in ne.ref!==void 0&amp;&amp;(oe=void 0),ne.key!==void 0&amp;&amp;(ie=&quot;&quot;+ne.key),ne)!O.call(ne,ae)||ae===&quot;key&quot;||ae===&quot;__self&quot;||ae===&quot;__source&quot;||ae===&quot;ref&quot;&amp;&amp;ne.ref===void 0||(ce[ae]=ne[ae]);var ae=arguments.length-2;if(ae===1)ce.children=le;else if(1&lt;ae){for(var ue=Array(ae),ve=0;ve&lt;ae;ve++)ue[ve]=arguments[ve+2];ce.children=ue}return M(F.type,ie,void 0,void 0,oe,ce)},Yt.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:s,_context:F},F},Yt.createElement=function(F,ne,le){var ce,ie={},oe=null;if(ne!=null)for(ce in ne.key!==void 0&amp;&amp;(oe=&quot;&quot;+ne.key),ne)O.call(ne,ce)&amp;&amp;ce!==&quot;key&quot;&amp;&amp;ce!==&quot;__self&quot;&amp;&amp;ce!==&quot;__source&quot;&amp;&amp;(ie[ce]=ne[ce]);var ae=arguments.length-2;if(ae===1)ie.children=le;else if(1&lt;ae){for(var ue=Array(ae),ve=0;ve&lt;ae;ve++)ue[ve]=arguments[ve+2];ie.children=ue}if(F&amp;&amp;F.defaultProps)for(ce in ae=F.defaultProps,ae)ie[ce]===void 0&amp;&amp;(ie[ce]=ae[ce]);return M(F,oe,void 0,void 0,null,ie)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(F){return{$$typeof:l,render:F}},Yt.isValidElement=R,Yt.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:j}},Yt.memo=function(F,ne){return{$$typeof:h,type:F,compare:ne===void 0?null:ne}},Yt.startTransition=function(F){var ne=C.T,le={};C.T=le;try{var ce=F(),ie=C.S;ie!==null&amp;&amp;ie(le,ce),typeof ce==&quot;object&quot;&amp;&amp;ce!==null&amp;&amp;typeof ce.then==&quot;function&quot;&amp;&amp;ce.then(ee,G)}catch(oe){G(oe)}finally{C.T=ne}},Yt.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Yt.use=function(F){return C.H.use(F)},Yt.useActionState=function(F,ne,le){return C.H.useActionState(F,ne,le)},Yt.useCallback=function(F,ne){return C.H.useCallback(F,ne)},Yt.useContext=function(F){return C.H.useContext(F)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(F,ne){return C.H.useDeferredValue(F,ne)},Yt.useEffect=function(F,ne,le){var ce=C.H;if(typeof le==&quot;function&quot;)throw Error(&quot;useEffect CRUD overload is not enabled in this build of React.&quot;);return ce.useEffect(F,ne)},Yt.useId=function(){return C.H.useId()},Yt.useImperativeHandle=function(F,ne,le){return C.H.useImperativeHandle(F,ne,le)},Yt.useInsertionEffect=function(F,ne){return C.H.useInsertionEffect(F,ne)},Yt.useLayoutEffect=function(F,ne){return C.H.useLayoutEffect(F,ne)},Yt.useMemo=function(F,ne){return C.H.useMemo(F,ne)},Yt.useOptimistic=function(F,ne){return C.H.useOptimistic(F,ne)},Yt.useReducer=function(F,ne,le){return C.H.useReducer(F,ne,le)},Yt.useRef=function(F){return C.H.useRef(F)},Yt.useState=function(F){return C.H.useState(F)},Yt.useSyncExternalStore=function(F,ne,le){return C.H.useSyncExternalStore(F,ne,le)},Yt.useTransition=function(){return C.H.useTransition()},Yt.version=&quot;19.1.0&quot;,Yt}var XM;function zc(){return XM||(XM=1,mb.exports=zk()),mb.exports}var gb={exports:{}},ar={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM;function Bk(){if(qM)return ar;qM=1;var n=zc();function e(u){var h=&quot;https://react.dev/errors/&quot;+u;if(1&lt;arguments.length){h+=&quot;?args[]=&quot;+encodeURIComponent(arguments[1]);for(var f=2;f&lt;arguments.length;f++)h+=&quot;&amp;args[]=&quot;+encodeURIComponent(arguments[f])}return&quot;Minified React error #&quot;+u+&quot;; visit &quot;+h+&quot; for the full message or use the non-minified dev environment for full errors and additional helpful warnings.&quot;}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for(&quot;react.portal&quot;);function s(u,h,f){var p=3&lt;arguments.length&amp;&amp;arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:&quot;&quot;+p,children:u,containerInfo:h,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u===&quot;font&quot;)return&quot;&quot;;if(typeof h==&quot;string&quot;)return h===&quot;use-credentials&quot;?h:&quot;&quot;}return ar.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ar.createPortal=function(u,h){var f=2&lt;arguments.length&amp;&amp;arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&amp;&amp;h.nodeType!==9&amp;&amp;h.nodeType!==11)throw Error(e(299));return s(u,h,null,f)},ar.flushSync=function(u){var h=o.T,f=i.p;try{if(o.T=null,i.p=2,u)return u()}finally{o.T=h,i.p=f,i.d.f()}},ar.preconnect=function(u,h){typeof u==&quot;string&quot;&amp;&amp;(h?(h=h.crossOrigin,h=typeof h==&quot;string&quot;?h===&quot;use-credentials&quot;?h:&quot;&quot;:void 0):h=null,i.d.C(u,h))},ar.prefetchDNS=function(u){typeof u==&quot;string&quot;&amp;&amp;i.d.D(u)},ar.preinit=function(u,h){if(typeof u==&quot;string&quot;&amp;&amp;h&amp;&amp;typeof h.as==&quot;string&quot;){var f=h.as,p=l(f,h.crossOrigin),m=typeof h.integrity==&quot;string&quot;?h.integrity:void 0,g=typeof h.fetchPriority==&quot;string&quot;?h.fetchPriority:void 0;f===&quot;style&quot;?i.d.S(u,typeof h.precedence==&quot;string&quot;?h.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:g}):f===&quot;script&quot;&amp;&amp;i.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:g,nonce:typeof h.nonce==&quot;string&quot;?h.nonce:void 0})}},ar.preinitModule=function(u,h){if(typeof u==&quot;string&quot;)if(typeof h==&quot;object&quot;&amp;&amp;h!==null){if(h.as==null||h.as===&quot;script&quot;){var f=l(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:f,integrity:typeof h.integrity==&quot;string&quot;?h.integrity:void 0,nonce:typeof h.nonce==&quot;string&quot;?h.nonce:void 0})}}else h==null&amp;&amp;i.d.M(u)},ar.preload=function(u,h){if(typeof u==&quot;string&quot;&amp;&amp;typeof h==&quot;object&quot;&amp;&amp;h!==null&amp;&amp;typeof h.as==&quot;string&quot;){var f=h.as,p=l(f,h.crossOrigin);i.d.L(u,f,{crossOrigin:p,integrity:typeof h.integrity==&quot;string&quot;?h.integrity:void 0,nonce:typeof h.nonce==&quot;string&quot;?h.nonce:void 0,type:typeof h.type==&quot;string&quot;?h.type:void 0,fetchPriority:typeof h.fetchPriority==&quot;string&quot;?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy==&quot;string&quot;?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet==&quot;string&quot;?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes==&quot;string&quot;?h.imageSizes:void 0,media:typeof h.media==&quot;string&quot;?h.media:void 0})}},ar.preloadModule=function(u,h){if(typeof u==&quot;string&quot;)if(h){var f=l(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as==&quot;string&quot;&amp;&amp;h.as!==&quot;script&quot;?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity==&quot;string&quot;?h.integrity:void 0})}else i.d.m(u)},ar.requestFormReset=function(u){i.d.r(u)},ar.unstable_batchedUpdates=function(u,h){return u(h)},ar.useFormState=function(u,h,f){return o.H.useFormState(u,h,f)},ar.useFormStatus=function(){return o.H.useHostTransitionStatus()},ar.version=&quot;19.1.0&quot;,ar}var YM;function ry(){if(YM)return gb.exports;YM=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&gt;&quot;u&quot;||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=&quot;function&quot;))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gb.exports=Bk(),gb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM;function Hk(){if(KM)return Af;KM=1;var n=Fk(),e=zc(),t=ry();function i(a){var c=&quot;https://react.dev/errors/&quot;+a;if(1&lt;arguments.length){c+=&quot;?args[]=&quot;+encodeURIComponent(arguments[1]);for(var d=2;d&lt;arguments.length;d++)c+=&quot;&amp;args[]=&quot;+encodeURIComponent(arguments[d])}return&quot;Minified React error #&quot;+a+&quot;; visit &quot;+c+&quot; for the full message or use the non-minified dev environment for full errors and additional helpful warnings.&quot;}function r(a){return!(!a||a.nodeType!==1&amp;&amp;a.nodeType!==9&amp;&amp;a.nodeType!==11)}function s(a){var c=a,d=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&amp;4098)!==0&amp;&amp;(d=c.return),a=c.return;while(a)}return c.tag===3?d:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&amp;&amp;(a=a.alternate,a!==null&amp;&amp;(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(i(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(i(188));return c!==a?null:a}for(var d=a,y=c;;){var E=d.return;if(E===null)break;var A=E.alternate;if(A===null){if(y=E.return,y!==null){d=y;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===d)return l(E),a;if(A===y)return l(E),c;A=A.sibling}throw Error(i(188))}if(d.return!==y.return)d=E,y=A;else{for(var U=!1,W=E.child;W;){if(W===d){U=!0,d=E,y=A;break}if(W===y){U=!0,y=E,d=A;break}W=W.sibling}if(!U){for(W=A.child;W;){if(W===d){U=!0,d=A,y=E;break}if(W===y){U=!0,y=A,d=E;break}W=W.sibling}if(!U)throw Error(i(189))}}if(d.alternate!==y)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?a:c}function h(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=h(a),c!==null)return c;a=a.sibling}return null}var f=Object.assign,p=Symbol.for(&quot;react.element&quot;),m=Symbol.for(&quot;react.transitional.element&quot;),g=Symbol.for(&quot;react.portal&quot;),v=Symbol.for(&quot;react.fragment&quot;),x=Symbol.for(&quot;react.strict_mode&quot;),b=Symbol.for(&quot;react.profiler&quot;),_=Symbol.for(&quot;react.provider&quot;),T=Symbol.for(&quot;react.consumer&quot;),w=Symbol.for(&quot;react.context&quot;),S=Symbol.for(&quot;react.forward_ref&quot;),C=Symbol.for(&quot;react.suspense&quot;),O=Symbol.for(&quot;react.suspense_list&quot;),M=Symbol.for(&quot;react.memo&quot;),N=Symbol.for(&quot;react.lazy&quot;),R=Symbol.for(&quot;react.activity&quot;),D=Symbol.for(&quot;react.memo_cache_sentinel&quot;),L=Symbol.iterator;function H(a){return a===null||typeof a!=&quot;object&quot;?null:(a=L&amp;&amp;a[L]||a[&quot;@@iterator&quot;],typeof a==&quot;function&quot;?a:null)}var q=Symbol.for(&quot;react.client.reference&quot;);function z(a){if(a==null)return null;if(typeof a==&quot;function&quot;)return a.$$typeof===q?null:a.displayName||a.name||null;if(typeof a==&quot;string&quot;)return a;switch(a){case v:return&quot;Fragment&quot;;case b:return&quot;Profiler&quot;;case x:return&quot;StrictMode&quot;;case C:return&quot;Suspense&quot;;case O:return&quot;SuspenseList&quot;;case R:return&quot;Activity&quot;}if(typeof a==&quot;object&quot;)switch(a.$$typeof){case g:return&quot;Portal&quot;;case w:return(a.displayName||&quot;Context&quot;)+&quot;.Provider&quot;;case T:return(a._context.displayName||&quot;Context&quot;)+&quot;.Consumer&quot;;case S:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||&quot;&quot;,a=a!==&quot;&quot;?&quot;ForwardRef(&quot;+a+&quot;)&quot;:&quot;ForwardRef&quot;),a;case M:return c=a.displayName||null,c!==null?c:z(a.type)||&quot;Memo&quot;;case N:c=a._payload,a=a._init;try{return z(a(c))}catch{}}return null}var $=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},ee=[],F=-1;function ne(a){return{current:a}}function le(a){0&gt;F||(a.current=ee[F],ee[F]=null,F--)}function ce(a,c){F++,ee[F]=a.current,a.current=c}var ie=ne(null),oe=ne(null),ae=ne(null),ue=ne(null);function ve(a,c){switch(ce(ae,c),ce(oe,a),ce(ie,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&amp;&amp;(a=a.namespaceURI)?mM(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=mM(c),a=gM(c,a);else switch(a){case&quot;svg&quot;:a=1;break;case&quot;math&quot;:a=2;break;default:a=0}}le(ie),ce(ie,a)}function He(){le(ie),le(oe),le(ae)}function Xe(a){a.memoizedState!==null&amp;&amp;ce(ue,a);var c=ie.current,d=gM(c,a.type);c!==d&amp;&amp;(ce(oe,a),ce(ie,d))}function ct(a){oe.current===a&amp;&amp;(le(ie),le(oe)),ue.current===a&amp;&amp;(le(ue),xf._currentValue=G)}var We=Object.prototype.hasOwnProperty,Ke=n.unstable_scheduleCallback,Q=n.unstable_cancelCallback,Ve=n.unstable_shouldYield,Le=n.unstable_requestPaint,Fe=n.unstable_now,De=n.unstable_getCurrentPriorityLevel,mt=n.unstable_ImmediatePriority,ze=n.unstable_UserBlockingPriority,te=n.unstable_NormalPriority,V=n.unstable_LowPriority,pe=n.unstable_IdlePriority,Ce=n.log,Ue=n.unstable_setDisableYieldValue,Me=null,Ze=null;function qe(a){if(typeof Ce==&quot;function&quot;&amp;&amp;Ue(a),Ze&amp;&amp;typeof Ze.setStrictMode==&quot;function&quot;)try{Ze.setStrictMode(Me,a)}catch{}}var ht=Math.clz32?Math.clz32:ft,Ct=Math.log,je=Math.LN2;function ft(a){return a&gt;&gt;&gt;=0,a===0?32:31-(Ct(a)/je|0)|0}var St=256,Rt=4194304;function st(a){var c=a&amp;42;if(c!==0)return c;switch(a&amp;-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&amp;4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&amp;62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function jt(a,c,d){var y=a.pendingLanes;if(y===0)return 0;var E=0,A=a.suspendedLanes,U=a.pingedLanes;a=a.warmLanes;var W=y&amp;134217727;return W!==0?(y=W&amp;~A,y!==0?E=st(y):(U&amp;=W,U!==0?E=st(U):d||(d=W&amp;~a,d!==0&amp;&amp;(E=st(d))))):(W=y&amp;~A,W!==0?E=st(W):U!==0?E=st(U):d||(d=y&amp;~a,d!==0&amp;&amp;(E=st(d)))),E===0?0:c!==0&amp;&amp;c!==E&amp;&amp;(c&amp;A)===0&amp;&amp;(A=E&amp;-E,d=c&amp;-c,A&gt;=d||A===32&amp;&amp;(d&amp;4194048)!==0)?c:E}function Pt(a,c){return(a.pendingLanes&amp;~(a.suspendedLanes&amp;~a.pingedLanes)&amp;c)===0}function yn(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function de(){var a=St;return St&lt;&lt;=1,(St&amp;4194048)===0&amp;&amp;(St=256),a}function nt(){var a=Rt;return Rt&lt;&lt;=1,(Rt&amp;62914560)===0&amp;&amp;(Rt=4194304),a}function Ae(a){for(var c=[],d=0;31&gt;d;d++)c.push(a);return c}function Pe(a,c){a.pendingLanes|=c,c!==268435456&amp;&amp;(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ot(a,c,d,y,E,A){var U=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&amp;=d,a.entangledLanes&amp;=d,a.errorRecoveryDisabledLanes&amp;=d,a.shellSuspendCounter=0;var W=a.entanglements,se=a.expirationTimes,_e=a.hiddenUpdates;for(d=U&amp;~d;0&lt;d;){var Ne=31-ht(d),ke=1&lt;&lt;Ne;W[Ne]=0,se[Ne]=-1;var xe=_e[Ne];if(xe!==null)for(_e[Ne]=null,Ne=0;Ne&lt;xe.length;Ne++){var Ee=xe[Ne];Ee!==null&amp;&amp;(Ee.lane&amp;=-536870913)}d&amp;=~ke}y!==0&amp;&amp;et(a,y,0),A!==0&amp;&amp;E===0&amp;&amp;a.tag!==0&amp;&amp;(a.suspendedLanes|=A&amp;~(U&amp;~c))}function et(a,c,d){a.pendingLanes|=c,a.suspendedLanes&amp;=~c;var y=31-ht(c);a.entangledLanes|=c,a.entanglements[y]=a.entanglements[y]|1073741824|d&amp;4194090}function Ut(a,c){var d=a.entangledLanes|=c;for(a=a.entanglements;d;){var y=31-ht(d),E=1&lt;&lt;y;E&amp;c|a[y]&amp;c&amp;&amp;(a[y]|=c),d&amp;=~E}}function wn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function jn(a){return a&amp;=-a,2&lt;a?8&lt;a?(a&amp;134217727)!==0?32:268435456:8:2}function zt(){var a=j.p;return a!==0?a:(a=window.event,a===void 0?32:LM(a.type))}function Gi(a,c){var d=j.p;try{return j.p=a,c()}finally{j.p=d}}var oi=Math.random().toString(36).slice(2),Zn=&quot;__reactFiber$&quot;+oi,gi=&quot;__reactProps$&quot;+oi,ji=&quot;__reactContainer$&quot;+oi,Ns=&quot;__reactEvents$&quot;+oi,Ea=&quot;__reactListeners$&quot;+oi,Oo=&quot;__reactHandles$&quot;+oi,Ds=&quot;__reactResources$&quot;+oi,Hr=&quot;__reactMarker$&quot;+oi;function cs(a){delete a[Zn],delete a[gi],delete a[Ns],delete a[Ea],delete a[Oo]}function Mr(a){var c=a[Zn];if(c)return c;for(var d=a.parentNode;d;){if(c=d[ji]||d[Zn]){if(d=c.alternate,c.child!==null||d!==null&amp;&amp;d.child!==null)for(a=bM(a);a!==null;){if(d=a[Zn])return d;a=bM(a)}return c}a=d,d=a.parentNode}return null}function Ar(a){if(a=a[Zn]||a[ji]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Is(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(i(33))}function us(a){var c=a[Ds];return c||(c=a[Ds]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Wn(a){a[Hr]=!0}var Ta=new Set,Ma={};function Vr(a,c){Y(a,c),Y(a+&quot;Capture&quot;,c)}function Y(a,c){for(Ma[a]=c,a=0;a&lt;c.length;a++)Ta.add(c[a])}var fe=RegExp(&quot;^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$&quot;),be={},we={};function me(a){return We.call(we,a)?!0:We.call(be,a)?!1:fe.test(a)?we[a]=!0:(be[a]=!0,!1)}function Ge(a,c,d){if(me(c))if(d===null)a.removeAttribute(c);else{switch(typeof d){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:a.removeAttribute(c);return;case&quot;boolean&quot;:var y=c.toLowerCase().slice(0,5);if(y!==&quot;data-&quot;&amp;&amp;y!==&quot;aria-&quot;){a.removeAttribute(c);return}}a.setAttribute(c,&quot;&quot;+d)}}function Je(a,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:case&quot;boolean&quot;:a.removeAttribute(c);return}a.setAttribute(c,&quot;&quot;+d)}}function tt(a,c,d,y){if(y===null)a.removeAttribute(d);else{switch(typeof y){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:case&quot;boolean&quot;:a.removeAttribute(d);return}a.setAttributeNS(c,d,&quot;&quot;+y)}}var dt,Ot;function Et(a){if(dt===void 0)try{throw Error()}catch(d){var c=d.stack.trim().match(/\n( *(at )?)/);dt=c&amp;&amp;c[1]||&quot;&quot;,Ot=-1&lt;d.stack.indexOf(`
    at`)?&quot; (&lt;anonymous&gt;)&quot;:-1&lt;d.stack.indexOf(&quot;@&quot;)?&quot;@unknown:0:0&quot;:&quot;&quot;}return`
`+dt+a+Ot}var bt=!1;function Bt(a,c){if(!a||bt)return&quot;&quot;;bt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,&quot;props&quot;,{set:function(){throw Error()}}),typeof Reflect==&quot;object&quot;&amp;&amp;Reflect.construct){try{Reflect.construct(ke,[])}catch(Ee){var xe=Ee}Reflect.construct(a,[],ke)}else{try{ke.call()}catch(Ee){xe=Ee}a.call(ke.prototype)}}else{try{throw Error()}catch(Ee){xe=Ee}(ke=a())&amp;&amp;typeof ke.catch==&quot;function&quot;&amp;&amp;ke.catch(function(){})}}catch(Ee){if(Ee&amp;&amp;xe&amp;&amp;typeof Ee.stack==&quot;string&quot;)return[Ee.stack,xe.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName=&quot;DetermineComponentFrameRoot&quot;;var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,&quot;name&quot;);E&amp;&amp;E.configurable&amp;&amp;Object.defineProperty(y.DetermineComponentFrameRoot,&quot;name&quot;,{value:&quot;DetermineComponentFrameRoot&quot;});var A=y.DetermineComponentFrameRoot(),U=A[0],W=A[1];if(U&amp;&amp;W){var se=U.split(`
`),_e=W.split(`
`);for(E=y=0;y&lt;se.length&amp;&amp;!se[y].includes(&quot;DetermineComponentFrameRoot&quot;);)y++;for(;E&lt;_e.length&amp;&amp;!_e[E].includes(&quot;DetermineComponentFrameRoot&quot;);)E++;if(y===se.length||E===_e.length)for(y=se.length-1,E=_e.length-1;1&lt;=y&amp;&amp;0&lt;=E&amp;&amp;se[y]!==_e[E];)E--;for(;1&lt;=y&amp;&amp;0&lt;=E;y--,E--)if(se[y]!==_e[E]){if(y!==1||E!==1)do if(y--,E--,0&gt;E||se[y]!==_e[E]){var Ne=`
`+se[y].replace(&quot; at new &quot;,&quot; at &quot;);return a.displayName&amp;&amp;Ne.includes(&quot;&lt;anonymous&gt;&quot;)&amp;&amp;(Ne=Ne.replace(&quot;&lt;anonymous&gt;&quot;,a.displayName)),Ne}while(1&lt;=y&amp;&amp;0&lt;=E);break}}}finally{bt=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:&quot;&quot;)?Et(d):&quot;&quot;}function un(a){switch(a.tag){case 26:case 27:case 5:return Et(a.type);case 16:return Et(&quot;Lazy&quot;);case 13:return Et(&quot;Suspense&quot;);case 19:return Et(&quot;SuspenseList&quot;);case 0:case 15:return Bt(a.type,!1);case 11:return Bt(a.type.render,!1);case 1:return Bt(a.type,!0);case 31:return Et(&quot;Activity&quot;);default:return&quot;&quot;}}function In(a){try{var c=&quot;&quot;;do c+=un(a),a=a.return;while(a);return c}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Qt(a){switch(typeof a){case&quot;bigint&quot;:case&quot;boolean&quot;:case&quot;number&quot;:case&quot;string&quot;:case&quot;undefined&quot;:return a;case&quot;object&quot;:return a;default:return&quot;&quot;}}function Zt(a){var c=a.type;return(a=a.nodeName)&amp;&amp;a.toLowerCase()===&quot;input&quot;&amp;&amp;(c===&quot;checkbox&quot;||c===&quot;radio&quot;)}function wt(a){var c=Zt(a)?&quot;checked&quot;:&quot;value&quot;,d=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=&quot;&quot;+a[c];if(!a.hasOwnProperty(c)&amp;&amp;typeof d&lt;&quot;u&quot;&amp;&amp;typeof d.get==&quot;function&quot;&amp;&amp;typeof d.set==&quot;function&quot;){var E=d.get,A=d.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return E.call(this)},set:function(U){y=&quot;&quot;+U,A.call(this,U)}}),Object.defineProperty(a,c,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(U){y=&quot;&quot;+U},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Hn(a){a._valueTracker||(a._valueTracker=wt(a))}function rn(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var d=c.getValue(),y=&quot;&quot;;return a&amp;&amp;(y=Zt(a)?a.checked?&quot;true&quot;:&quot;false&quot;:a.value),a=y,a!==d?(c.setValue(a),!0):!1}function Jn(a){if(a=a||(typeof document&lt;&quot;u&quot;?document:void 0),typeof a&gt;&quot;u&quot;)return null;try{return a.activeElement||a.body}catch{return a.body}}var Tn=/[\n&quot;\\]/g;function bn(a){return a.replace(Tn,function(c){return&quot;\\&quot;+c.charCodeAt(0).toString(16)+&quot; &quot;})}function Cr(a,c,d,y,E,A,U,W){a.name=&quot;&quot;,U!=null&amp;&amp;typeof U!=&quot;function&quot;&amp;&amp;typeof U!=&quot;symbol&quot;&amp;&amp;typeof U!=&quot;boolean&quot;?a.type=U:a.removeAttribute(&quot;type&quot;),c!=null?U===&quot;number&quot;?(c===0&amp;&amp;a.value===&quot;&quot;||a.value!=c)&amp;&amp;(a.value=&quot;&quot;+Qt(c)):a.value!==&quot;&quot;+Qt(c)&amp;&amp;(a.value=&quot;&quot;+Qt(c)):U!==&quot;submit&quot;&amp;&amp;U!==&quot;reset&quot;||a.removeAttribute(&quot;value&quot;),c!=null?Pi(a,U,Qt(c)):d!=null?Pi(a,U,Qt(d)):y!=null&amp;&amp;a.removeAttribute(&quot;value&quot;),E==null&amp;&amp;A!=null&amp;&amp;(a.defaultChecked=!!A),E!=null&amp;&amp;(a.checked=E&amp;&amp;typeof E!=&quot;function&quot;&amp;&amp;typeof E!=&quot;symbol&quot;),W!=null&amp;&amp;typeof W!=&quot;function&quot;&amp;&amp;typeof W!=&quot;symbol&quot;&amp;&amp;typeof W!=&quot;boolean&quot;?a.name=&quot;&quot;+Qt(W):a.removeAttribute(&quot;name&quot;)}function Mn(a,c,d,y,E,A,U,W){if(A!=null&amp;&amp;typeof A!=&quot;function&quot;&amp;&amp;typeof A!=&quot;symbol&quot;&amp;&amp;typeof A!=&quot;boolean&quot;&amp;&amp;(a.type=A),c!=null||d!=null){if(!(A!==&quot;submit&quot;&amp;&amp;A!==&quot;reset&quot;||c!=null))return;d=d!=null?&quot;&quot;+Qt(d):&quot;&quot;,c=c!=null?&quot;&quot;+Qt(c):d,W||c===a.value||(a.value=c),a.defaultValue=c}y=y??E,y=typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;&amp;&amp;!!y,a.checked=W?a.checked:!!y,a.defaultChecked=!!y,U!=null&amp;&amp;typeof U!=&quot;function&quot;&amp;&amp;typeof U!=&quot;symbol&quot;&amp;&amp;typeof U!=&quot;boolean&quot;&amp;&amp;(a.name=U)}function Pi(a,c,d){c===&quot;number&quot;&amp;&amp;Jn(a.ownerDocument)===a||a.defaultValue===&quot;&quot;+d||(a.defaultValue=&quot;&quot;+d)}function Qn(a,c,d,y){if(a=a.options,c){c={};for(var E=0;E&lt;d.length;E++)c[&quot;$&quot;+d[E]]=!0;for(d=0;d&lt;a.length;d++)E=c.hasOwnProperty(&quot;$&quot;+a[d].value),a[d].selected!==E&amp;&amp;(a[d].selected=E),E&amp;&amp;y&amp;&amp;(a[d].defaultSelected=!0)}else{for(d=&quot;&quot;+Qt(d),c=null,E=0;E&lt;a.length;E++){if(a[E].value===d){a[E].selected=!0,y&amp;&amp;(a[E].defaultSelected=!0);return}c!==null||a[E].disabled||(c=a[E])}c!==null&amp;&amp;(c.selected=!0)}}function ei(a,c,d){if(c!=null&amp;&amp;(c=&quot;&quot;+Qt(c),c!==a.value&amp;&amp;(a.value=c),d==null)){a.defaultValue!==c&amp;&amp;(a.defaultValue=c);return}a.defaultValue=d!=null?&quot;&quot;+Qt(d):&quot;&quot;}function ai(a,c,d,y){if(c==null){if(y!=null){if(d!=null)throw Error(i(92));if($(y)){if(1&lt;y.length)throw Error(i(93));y=y[0]}d=y}d==null&amp;&amp;(d=&quot;&quot;),c=d}d=Qt(c),a.defaultValue=d,y=a.textContent,y===d&amp;&amp;y!==&quot;&quot;&amp;&amp;y!==null&amp;&amp;(a.value=y)}function Gr(a,c){if(c){var d=a.firstChild;if(d&amp;&amp;d===a.lastChild&amp;&amp;d.nodeType===3){d.nodeValue=c;return}}a.textContent=c}var Ps=new Set(&quot;animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp&quot;.split(&quot; &quot;));function Nt(a,c,d){var y=c.indexOf(&quot;--&quot;)===0;d==null||typeof d==&quot;boolean&quot;||d===&quot;&quot;?y?a.setProperty(c,&quot;&quot;):c===&quot;float&quot;?a.cssFloat=&quot;&quot;:a[c]=&quot;&quot;:y?a.setProperty(c,d):typeof d!=&quot;number&quot;||d===0||Ps.has(c)?c===&quot;float&quot;?a.cssFloat=d:a[c]=(&quot;&quot;+d).trim():a[c]=d+&quot;px&quot;}function Dl(a,c,d){if(c!=null&amp;&amp;typeof c!=&quot;object&quot;)throw Error(i(62));if(a=a.style,d!=null){for(var y in d)!d.hasOwnProperty(y)||c!=null&amp;&amp;c.hasOwnProperty(y)||(y.indexOf(&quot;--&quot;)===0?a.setProperty(y,&quot;&quot;):y===&quot;float&quot;?a.cssFloat=&quot;&quot;:a[y]=&quot;&quot;);for(var E in c)y=c[E],c.hasOwnProperty(E)&amp;&amp;d[E]!==y&amp;&amp;Nt(a,E,y)}else for(var A in c)c.hasOwnProperty(A)&amp;&amp;Nt(a,A,c[A])}function B(a){if(a.indexOf(&quot;-&quot;)===-1)return!1;switch(a){case&quot;annotation-xml&quot;:case&quot;color-profile&quot;:case&quot;font-face&quot;:case&quot;font-face-src&quot;:case&quot;font-face-uri&quot;:case&quot;font-face-format&quot;:case&quot;font-face-name&quot;:case&quot;missing-glyph&quot;:return!1;default:return!0}}var k=new Map([[&quot;acceptCharset&quot;,&quot;accept-charset&quot;],[&quot;htmlFor&quot;,&quot;for&quot;],[&quot;httpEquiv&quot;,&quot;http-equiv&quot;],[&quot;crossOrigin&quot;,&quot;crossorigin&quot;],[&quot;accentHeight&quot;,&quot;accent-height&quot;],[&quot;alignmentBaseline&quot;,&quot;alignment-baseline&quot;],[&quot;arabicForm&quot;,&quot;arabic-form&quot;],[&quot;baselineShift&quot;,&quot;baseline-shift&quot;],[&quot;capHeight&quot;,&quot;cap-height&quot;],[&quot;clipPath&quot;,&quot;clip-path&quot;],[&quot;clipRule&quot;,&quot;clip-rule&quot;],[&quot;colorInterpolation&quot;,&quot;color-interpolation&quot;],[&quot;colorInterpolationFilters&quot;,&quot;color-interpolation-filters&quot;],[&quot;colorProfile&quot;,&quot;color-profile&quot;],[&quot;colorRendering&quot;,&quot;color-rendering&quot;],[&quot;dominantBaseline&quot;,&quot;dominant-baseline&quot;],[&quot;enableBackground&quot;,&quot;enable-background&quot;],[&quot;fillOpacity&quot;,&quot;fill-opacity&quot;],[&quot;fillRule&quot;,&quot;fill-rule&quot;],[&quot;floodColor&quot;,&quot;flood-color&quot;],[&quot;floodOpacity&quot;,&quot;flood-opacity&quot;],[&quot;fontFamily&quot;,&quot;font-family&quot;],[&quot;fontSize&quot;,&quot;font-size&quot;],[&quot;fontSizeAdjust&quot;,&quot;font-size-adjust&quot;],[&quot;fontStretch&quot;,&quot;font-stretch&quot;],[&quot;fontStyle&quot;,&quot;font-style&quot;],[&quot;fontVariant&quot;,&quot;font-variant&quot;],[&quot;fontWeight&quot;,&quot;font-weight&quot;],[&quot;glyphName&quot;,&quot;glyph-name&quot;],[&quot;glyphOrientationHorizontal&quot;,&quot;glyph-orientation-horizontal&quot;],[&quot;glyphOrientationVertical&quot;,&quot;glyph-orientation-vertical&quot;],[&quot;horizAdvX&quot;,&quot;horiz-adv-x&quot;],[&quot;horizOriginX&quot;,&quot;horiz-origin-x&quot;],[&quot;imageRendering&quot;,&quot;image-rendering&quot;],[&quot;letterSpacing&quot;,&quot;letter-spacing&quot;],[&quot;lightingColor&quot;,&quot;lighting-color&quot;],[&quot;markerEnd&quot;,&quot;marker-end&quot;],[&quot;markerMid&quot;,&quot;marker-mid&quot;],[&quot;markerStart&quot;,&quot;marker-start&quot;],[&quot;overlinePosition&quot;,&quot;overline-position&quot;],[&quot;overlineThickness&quot;,&quot;overline-thickness&quot;],[&quot;paintOrder&quot;,&quot;paint-order&quot;],[&quot;panose-1&quot;,&quot;panose-1&quot;],[&quot;pointerEvents&quot;,&quot;pointer-events&quot;],[&quot;renderingIntent&quot;,&quot;rendering-intent&quot;],[&quot;shapeRendering&quot;,&quot;shape-rendering&quot;],[&quot;stopColor&quot;,&quot;stop-color&quot;],[&quot;stopOpacity&quot;,&quot;stop-opacity&quot;],[&quot;strikethroughPosition&quot;,&quot;strikethrough-position&quot;],[&quot;strikethroughThickness&quot;,&quot;strikethrough-thickness&quot;],[&quot;strokeDasharray&quot;,&quot;stroke-dasharray&quot;],[&quot;strokeDashoffset&quot;,&quot;stroke-dashoffset&quot;],[&quot;strokeLinecap&quot;,&quot;stroke-linecap&quot;],[&quot;strokeLinejoin&quot;,&quot;stroke-linejoin&quot;],[&quot;strokeMiterlimit&quot;,&quot;stroke-miterlimit&quot;],[&quot;strokeOpacity&quot;,&quot;stroke-opacity&quot;],[&quot;strokeWidth&quot;,&quot;stroke-width&quot;],[&quot;textAnchor&quot;,&quot;text-anchor&quot;],[&quot;textDecoration&quot;,&quot;text-decoration&quot;],[&quot;textRendering&quot;,&quot;text-rendering&quot;],[&quot;transformOrigin&quot;,&quot;transform-origin&quot;],[&quot;underlinePosition&quot;,&quot;underline-position&quot;],[&quot;underlineThickness&quot;,&quot;underline-thickness&quot;],[&quot;unicodeBidi&quot;,&quot;unicode-bidi&quot;],[&quot;unicodeRange&quot;,&quot;unicode-range&quot;],[&quot;unitsPerEm&quot;,&quot;units-per-em&quot;],[&quot;vAlphabetic&quot;,&quot;v-alphabetic&quot;],[&quot;vHanging&quot;,&quot;v-hanging&quot;],[&quot;vIdeographic&quot;,&quot;v-ideographic&quot;],[&quot;vMathematical&quot;,&quot;v-mathematical&quot;],[&quot;vectorEffect&quot;,&quot;vector-effect&quot;],[&quot;vertAdvY&quot;,&quot;vert-adv-y&quot;],[&quot;vertOriginX&quot;,&quot;vert-origin-x&quot;],[&quot;vertOriginY&quot;,&quot;vert-origin-y&quot;],[&quot;wordSpacing&quot;,&quot;word-spacing&quot;],[&quot;writingMode&quot;,&quot;writing-mode&quot;],[&quot;xmlnsXlink&quot;,&quot;xmlns:xlink&quot;],[&quot;xHeight&quot;,&quot;x-height&quot;]]),Z=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function X(a){return Z.test(&quot;&quot;+a)?&quot;javascript:throw new Error(&#x27;React has blocked a javascript: URL as a security precaution.&#x27;)&quot;:a}var J=null;function Te(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&amp;&amp;(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Oe=null,at=null;function $e(a){var c=Ar(a);if(c&amp;&amp;(a=c.stateNode)){var d=a[gi]||null;e:switch(a=c.stateNode,c.type){case&quot;input&quot;:if(Cr(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),c=d.name,d.type===&quot;radio&quot;&amp;&amp;c!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll(&#x27;input[name=&quot;&#x27;+bn(&quot;&quot;+c)+&#x27;&quot;][type=&quot;radio&quot;]&#x27;),c=0;c&lt;d.length;c++){var y=d[c];if(y!==a&amp;&amp;y.form===a.form){var E=y[gi]||null;if(!E)throw Error(i(90));Cr(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c&lt;d.length;c++)y=d[c],y.form===a.form&amp;&amp;rn(y)}break e;case&quot;textarea&quot;:ei(a,d.value,d.defaultValue);break e;case&quot;select&quot;:c=d.value,c!=null&amp;&amp;Qn(a,!!d.multiple,c,!1)}}}var it=!1;function xt(a,c,d){if(it)return a(c,d);it=!0;try{var y=a(c);return y}finally{if(it=!1,(Oe!==null||at!==null)&amp;&amp;(Bp(),Oe&amp;&amp;(c=Oe,a=at,at=Oe=null,$e(c),a)))for(c=0;c&lt;a.length;c++)$e(a[c])}}function Be(a,c){var d=a.stateNode;if(d===null)return null;var y=d[gi]||null;if(y===null)return null;d=y[c];e:switch(c){case&quot;onClick&quot;:case&quot;onClickCapture&quot;:case&quot;onDoubleClick&quot;:case&quot;onDoubleClickCapture&quot;:case&quot;onMouseDown&quot;:case&quot;onMouseDownCapture&quot;:case&quot;onMouseMove&quot;:case&quot;onMouseMoveCapture&quot;:case&quot;onMouseUp&quot;:case&quot;onMouseUpCapture&quot;:case&quot;onMouseEnter&quot;:(y=!y.disabled)||(a=a.type,y=!(a===&quot;button&quot;||a===&quot;input&quot;||a===&quot;select&quot;||a===&quot;textarea&quot;)),a=!y;break e;default:a=!1}if(a)return null;if(d&amp;&amp;typeof d!=&quot;function&quot;)throw Error(i(231,c,typeof d));return d}var pt=!(typeof window&gt;&quot;u&quot;||typeof window.document&gt;&quot;u&quot;||typeof window.document.createElement&gt;&quot;u&quot;),gt=!1;if(pt)try{var Tt={};Object.defineProperty(Tt,&quot;passive&quot;,{get:function(){gt=!0}}),window.addEventListener(&quot;test&quot;,Tt,Tt),window.removeEventListener(&quot;test&quot;,Tt,Tt)}catch{gt=!1}var _t=null,Fn=null,dn=null;function hn(){if(dn)return dn;var a,c=Fn,d=c.length,y,E=&quot;value&quot;in _t?_t.value:_t.textContent,A=E.length;for(a=0;a&lt;d&amp;&amp;c[a]===E[a];a++);var U=d-a;for(y=1;y&lt;=U&amp;&amp;c[d-y]===E[A-y];y++);return dn=E.slice(a,1&lt;y?1-y:void 0)}function sn(a){var c=a.keyCode;return&quot;charCode&quot;in a?(a=a.charCode,a===0&amp;&amp;c===13&amp;&amp;(a=13)):a=c,a===10&amp;&amp;(a=13),32&lt;=a||a===13?a:0}function Rr(){return!0}function er(){return!1}function yi(a){function c(d,y,E,A,U){this._reactName=d,this._targetInst=E,this.type=y,this.nativeEvent=A,this.target=U,this.currentTarget=null;for(var W in a)a.hasOwnProperty(W)&amp;&amp;(d=a[W],this[W]=d?d(A):A[W]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Rr:er,this.isPropagationStopped=er,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&amp;&amp;(d.preventDefault?d.preventDefault():typeof d.returnValue!=&quot;unknown&quot;&amp;&amp;(d.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var d=this.nativeEvent;d&amp;&amp;(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!=&quot;unknown&quot;&amp;&amp;(d.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),c}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=yi(No),Lh=f({},No,{view:0,detail:0}),D3=yi(Lh),g_,y_,Uh,op=f({},Lh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:v_,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return&quot;movementX&quot;in a?a.movementX:(a!==Uh&amp;&amp;(Uh&amp;&amp;a.type===&quot;mousemove&quot;?(g_=a.screenX-Uh.screenX,y_=a.screenY-Uh.screenY):y_=g_=0,Uh=a),g_)},movementY:function(a){return&quot;movementY&quot;in a?a.movementY:y_}}),x1=yi(op),I3=f({},op,{dataTransfer:0}),P3=yi(I3),L3=f({},Lh,{relatedTarget:0}),__=yi(L3),U3=f({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),k3=yi(U3),F3=f({},No,{clipboardData:function(a){return&quot;clipboardData&quot;in a?a.clipboardData:window.clipboardData}}),z3=yi(F3),B3=f({},No,{data:0}),S1=yi(B3),H3={Esc:&quot;Escape&quot;,Spacebar:&quot; &quot;,Left:&quot;ArrowLeft&quot;,Up:&quot;ArrowUp&quot;,Right:&quot;ArrowRight&quot;,Down:&quot;ArrowDown&quot;,Del:&quot;Delete&quot;,Win:&quot;OS&quot;,Menu:&quot;ContextMenu&quot;,Apps:&quot;ContextMenu&quot;,Scroll:&quot;ScrollLock&quot;,MozPrintableKey:&quot;Unidentified&quot;},V3={8:&quot;Backspace&quot;,9:&quot;Tab&quot;,12:&quot;Clear&quot;,13:&quot;Enter&quot;,16:&quot;Shift&quot;,17:&quot;Control&quot;,18:&quot;Alt&quot;,19:&quot;Pause&quot;,20:&quot;CapsLock&quot;,27:&quot;Escape&quot;,32:&quot; &quot;,33:&quot;PageUp&quot;,34:&quot;PageDown&quot;,35:&quot;End&quot;,36:&quot;Home&quot;,37:&quot;ArrowLeft&quot;,38:&quot;ArrowUp&quot;,39:&quot;ArrowRight&quot;,40:&quot;ArrowDown&quot;,45:&quot;Insert&quot;,46:&quot;Delete&quot;,112:&quot;F1&quot;,113:&quot;F2&quot;,114:&quot;F3&quot;,115:&quot;F4&quot;,116:&quot;F5&quot;,117:&quot;F6&quot;,118:&quot;F7&quot;,119:&quot;F8&quot;,120:&quot;F9&quot;,121:&quot;F10&quot;,122:&quot;F11&quot;,123:&quot;F12&quot;,144:&quot;NumLock&quot;,145:&quot;ScrollLock&quot;,224:&quot;Meta&quot;},G3={Alt:&quot;altKey&quot;,Control:&quot;ctrlKey&quot;,Meta:&quot;metaKey&quot;,Shift:&quot;shiftKey&quot;};function j3(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=G3[a])?!!c[a]:!1}function v_(){return j3}var W3=f({},Lh,{key:function(a){if(a.key){var c=H3[a.key]||a.key;if(c!==&quot;Unidentified&quot;)return c}return a.type===&quot;keypress&quot;?(a=sn(a),a===13?&quot;Enter&quot;:String.fromCharCode(a)):a.type===&quot;keydown&quot;||a.type===&quot;keyup&quot;?V3[a.keyCode]||&quot;Unidentified&quot;:&quot;&quot;},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:v_,charCode:function(a){return a.type===&quot;keypress&quot;?sn(a):0},keyCode:function(a){return a.type===&quot;keydown&quot;||a.type===&quot;keyup&quot;?a.keyCode:0},which:function(a){return a.type===&quot;keypress&quot;?sn(a):a.type===&quot;keydown&quot;||a.type===&quot;keyup&quot;?a.keyCode:0}}),X3=yi(W3),q3=f({},op,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w1=yi(q3),Y3=f({},Lh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:v_}),K3=yi(Y3),$3=f({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z3=yi($3),J3=f({},op,{deltaX:function(a){return&quot;deltaX&quot;in a?a.deltaX:&quot;wheelDeltaX&quot;in a?-a.wheelDeltaX:0},deltaY:function(a){return&quot;deltaY&quot;in a?a.deltaY:&quot;wheelDeltaY&quot;in a?-a.wheelDeltaY:&quot;wheelDelta&quot;in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Q3=yi(J3),eU=f({},No,{newState:0,oldState:0}),tU=yi(eU),nU=[9,13,27,32],b_=pt&amp;&amp;&quot;CompositionEvent&quot;in window,kh=null;pt&amp;&amp;&quot;documentMode&quot;in document&amp;&amp;(kh=document.documentMode);var iU=pt&amp;&amp;&quot;TextEvent&quot;in window&amp;&amp;!kh,E1=pt&amp;&amp;(!b_||kh&amp;&amp;8&lt;kh&amp;&amp;11&gt;=kh),T1=&quot; &quot;,M1=!1;function A1(a,c){switch(a){case&quot;keyup&quot;:return nU.indexOf(c.keyCode)!==-1;case&quot;keydown&quot;:return c.keyCode!==229;case&quot;keypress&quot;:case&quot;mousedown&quot;:case&quot;focusout&quot;:return!0;default:return!1}}function C1(a){return a=a.detail,typeof a==&quot;object&quot;&amp;&amp;&quot;data&quot;in a?a.data:null}var Wc=!1;function rU(a,c){switch(a){case&quot;compositionend&quot;:return C1(c);case&quot;keypress&quot;:return c.which!==32?null:(M1=!0,T1);case&quot;textInput&quot;:return a=c.data,a===T1&amp;&amp;M1?null:a;default:return null}}function sU(a,c){if(Wc)return a===&quot;compositionend&quot;||!b_&amp;&amp;A1(a,c)?(a=hn(),dn=Fn=_t=null,Wc=!1,a):null;switch(a){case&quot;paste&quot;:return null;case&quot;keypress&quot;:if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&amp;&amp;c.altKey){if(c.char&amp;&amp;1&lt;c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case&quot;compositionend&quot;:return E1&amp;&amp;c.locale!==&quot;ko&quot;?null:c.data;default:return null}}var oU={color:!0,date:!0,datetime:!0,&quot;datetime-local&quot;:!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R1(a){var c=a&amp;&amp;a.nodeName&amp;&amp;a.nodeName.toLowerCase();return c===&quot;input&quot;?!!oU[a.type]:c===&quot;textarea&quot;}function O1(a,c,d,y){Oe?at?at.push(y):at=[y]:Oe=y,c=Xp(c,&quot;onChange&quot;),0&lt;c.length&amp;&amp;(d=new Il(&quot;onChange&quot;,&quot;change&quot;,null,d,y),a.push({event:d,listeners:c}))}var Fh=null,zh=null;function aU(a){uM(a,0)}function ap(a){var c=Is(a);if(rn(c))return a}function N1(a,c){if(a===&quot;change&quot;)return c}var D1=!1;if(pt){var x_;if(pt){var S_=&quot;oninput&quot;in document;if(!S_){var I1=document.createElement(&quot;div&quot;);I1.setAttribute(&quot;oninput&quot;,&quot;return;&quot;),S_=typeof I1.oninput==&quot;function&quot;}x_=S_}else x_=!1;D1=x_&amp;&amp;(!document.documentMode||9&lt;document.documentMode)}function P1(){Fh&amp;&amp;(Fh.detachEvent(&quot;onpropertychange&quot;,L1),zh=Fh=null)}function L1(a){if(a.propertyName===&quot;value&quot;&amp;&amp;ap(zh)){var c=[];O1(c,zh,a,Te(a)),xt(aU,c)}}function lU(a,c,d){a===&quot;focusin&quot;?(P1(),Fh=c,zh=d,Fh.attachEvent(&quot;onpropertychange&quot;,L1)):a===&quot;focusout&quot;&amp;&amp;P1()}function cU(a){if(a===&quot;selectionchange&quot;||a===&quot;keyup&quot;||a===&quot;keydown&quot;)return ap(zh)}function uU(a,c){if(a===&quot;click&quot;)return ap(c)}function hU(a,c){if(a===&quot;input&quot;||a===&quot;change&quot;)return ap(c)}function fU(a,c){return a===c&amp;&amp;(a!==0||1/a===1/c)||a!==a&amp;&amp;c!==c}var jr=typeof Object.is==&quot;function&quot;?Object.is:fU;function Bh(a,c){if(jr(a,c))return!0;if(typeof a!=&quot;object&quot;||a===null||typeof c!=&quot;object&quot;||c===null)return!1;var d=Object.keys(a),y=Object.keys(c);if(d.length!==y.length)return!1;for(y=0;y&lt;d.length;y++){var E=d[y];if(!We.call(c,E)||!jr(a[E],c[E]))return!1}return!0}function U1(a){for(;a&amp;&amp;a.firstChild;)a=a.firstChild;return a}function k1(a,c){var d=U1(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a&lt;=c&amp;&amp;y&gt;=c)return{node:d,offset:c-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=U1(d)}}function F1(a,c){return a&amp;&amp;c?a===c?!0:a&amp;&amp;a.nodeType===3?!1:c&amp;&amp;c.nodeType===3?F1(a,c.parentNode):&quot;contains&quot;in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&amp;16):!1:!1}function z1(a){a=a!=null&amp;&amp;a.ownerDocument!=null&amp;&amp;a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=Jn(a.document);c instanceof a.HTMLIFrameElement;){try{var d=typeof c.contentWindow.location.href==&quot;string&quot;}catch{d=!1}if(d)a=c.contentWindow;else break;c=Jn(a.document)}return c}function w_(a){var c=a&amp;&amp;a.nodeName&amp;&amp;a.nodeName.toLowerCase();return c&amp;&amp;(c===&quot;input&quot;&amp;&amp;(a.type===&quot;text&quot;||a.type===&quot;search&quot;||a.type===&quot;tel&quot;||a.type===&quot;url&quot;||a.type===&quot;password&quot;)||c===&quot;textarea&quot;||a.contentEditable===&quot;true&quot;)}var dU=pt&amp;&amp;&quot;documentMode&quot;in document&amp;&amp;11&gt;=document.documentMode,Xc=null,E_=null,Hh=null,T_=!1;function B1(a,c,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;T_||Xc==null||Xc!==Jn(y)||(y=Xc,&quot;selectionStart&quot;in y&amp;&amp;w_(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&amp;&amp;y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Hh&amp;&amp;Bh(Hh,y)||(Hh=y,y=Xp(E_,&quot;onSelect&quot;),0&lt;y.length&amp;&amp;(c=new Il(&quot;onSelect&quot;,&quot;select&quot;,null,c,d),a.push({event:c,listeners:y}),c.target=Xc)))}function Pl(a,c){var d={};return d[a.toLowerCase()]=c.toLowerCase(),d[&quot;Webkit&quot;+a]=&quot;webkit&quot;+c,d[&quot;Moz&quot;+a]=&quot;moz&quot;+c,d}var qc={animationend:Pl(&quot;Animation&quot;,&quot;AnimationEnd&quot;),animationiteration:Pl(&quot;Animation&quot;,&quot;AnimationIteration&quot;),animationstart:Pl(&quot;Animation&quot;,&quot;AnimationStart&quot;),transitionrun:Pl(&quot;Transition&quot;,&quot;TransitionRun&quot;),transitionstart:Pl(&quot;Transition&quot;,&quot;TransitionStart&quot;),transitioncancel:Pl(&quot;Transition&quot;,&quot;TransitionCancel&quot;),transitionend:Pl(&quot;Transition&quot;,&quot;TransitionEnd&quot;)},M_={},H1={};pt&amp;&amp;(H1=document.createElement(&quot;div&quot;).style,&quot;AnimationEvent&quot;in window||(delete qc.animationend.animation,delete qc.animationiteration.animation,delete qc.animationstart.animation),&quot;TransitionEvent&quot;in window||delete qc.transitionend.transition);function Ll(a){if(M_[a])return M_[a];if(!qc[a])return a;var c=qc[a],d;for(d in c)if(c.hasOwnProperty(d)&amp;&amp;d in H1)return M_[a]=c[d];return a}var V1=Ll(&quot;animationend&quot;),G1=Ll(&quot;animationiteration&quot;),j1=Ll(&quot;animationstart&quot;),pU=Ll(&quot;transitionrun&quot;),mU=Ll(&quot;transitionstart&quot;),gU=Ll(&quot;transitioncancel&quot;),W1=Ll(&quot;transitionend&quot;),X1=new Map,A_=&quot;abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel&quot;.split(&quot; &quot;);A_.push(&quot;scrollEnd&quot;);function Ls(a,c){X1.set(a,c),Vr(c,[a])}var q1=new WeakMap;function hs(a,c){if(typeof a==&quot;object&quot;&amp;&amp;a!==null){var d=q1.get(a);return d!==void 0?d:(c={value:a,source:c,stack:In(c)},q1.set(a,c),c)}return{value:a,source:c,stack:In(c)}}var fs=[],Yc=0,C_=0;function lp(){for(var a=Yc,c=C_=Yc=0;c&lt;a;){var d=fs[c];fs[c++]=null;var y=fs[c];fs[c++]=null;var E=fs[c];fs[c++]=null;var A=fs[c];if(fs[c++]=null,y!==null&amp;&amp;E!==null){var U=y.pending;U===null?E.next=E:(E.next=U.next,U.next=E),y.pending=E}A!==0&amp;&amp;Y1(d,E,A)}}function cp(a,c,d,y){fs[Yc++]=a,fs[Yc++]=c,fs[Yc++]=d,fs[Yc++]=y,C_|=y,a.lanes|=y,a=a.alternate,a!==null&amp;&amp;(a.lanes|=y)}function R_(a,c,d,y){return cp(a,c,d,y),up(a)}function Kc(a,c){return cp(a,null,null,c),up(a)}function Y1(a,c,d){a.lanes|=d;var y=a.alternate;y!==null&amp;&amp;(y.lanes|=d);for(var E=!1,A=a.return;A!==null;)A.childLanes|=d,y=A.alternate,y!==null&amp;&amp;(y.childLanes|=d),A.tag===22&amp;&amp;(a=A.stateNode,a===null||a._visibility&amp;1||(E=!0)),a=A,A=A.return;return a.tag===3?(A=a.stateNode,E&amp;&amp;c!==null&amp;&amp;(E=31-ht(d),a=A.hiddenUpdates,y=a[E],y===null?a[E]=[c]:y.push(c),c.lane=d|536870912),A):null}function up(a){if(50&lt;df)throw df=0,Lv=null,Error(i(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var $c={};function yU(a,c,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(a,c,d,y){return new yU(a,c,d,y)}function O_(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Do(a,c){var d=a.alternate;return d===null?(d=Wr(a.tag,c,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=c,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&amp;65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,c=a.dependencies,d.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function K1(a,c){a.flags&amp;=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,c=d.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function hp(a,c,d,y,E,A){var U=0;if(y=a,typeof a==&quot;function&quot;)O_(a)&amp;&amp;(U=1);else if(typeof a==&quot;string&quot;)U=vk(a,d,ie.current)?26:a===&quot;html&quot;||a===&quot;head&quot;||a===&quot;body&quot;?27:5;else e:switch(a){case R:return a=Wr(31,d,c,E),a.elementType=R,a.lanes=A,a;case v:return Ul(d.children,E,A,c);case x:U=8,E|=24;break;case b:return a=Wr(12,d,c,E|2),a.elementType=b,a.lanes=A,a;case C:return a=Wr(13,d,c,E),a.elementType=C,a.lanes=A,a;case O:return a=Wr(19,d,c,E),a.elementType=O,a.lanes=A,a;default:if(typeof a==&quot;object&quot;&amp;&amp;a!==null)switch(a.$$typeof){case _:case w:U=10;break e;case T:U=9;break e;case S:U=11;break e;case M:U=14;break e;case N:U=16,y=null;break e}U=29,d=Error(i(130,a===null?&quot;null&quot;:typeof a,&quot;&quot;)),y=null}return c=Wr(U,d,c,E),c.elementType=a,c.type=y,c.lanes=A,c}function Ul(a,c,d,y){return a=Wr(7,a,y,c),a.lanes=d,a}function N_(a,c,d){return a=Wr(6,a,null,c),a.lanes=d,a}function D_(a,c,d){return c=Wr(4,a.children!==null?a.children:[],a.key,c),c.lanes=d,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Zc=[],Jc=0,fp=null,dp=0,ds=[],ps=0,kl=null,Io=1,Po=&quot;&quot;;function Fl(a,c){Zc[Jc++]=dp,Zc[Jc++]=fp,fp=a,dp=c}function $1(a,c,d){ds[ps++]=Io,ds[ps++]=Po,ds[ps++]=kl,kl=a;var y=Io;a=Po;var E=32-ht(y)-1;y&amp;=~(1&lt;&lt;E),d+=1;var A=32-ht(c)+E;if(30&lt;A){var U=E-E%5;A=(y&amp;(1&lt;&lt;U)-1).toString(32),y&gt;&gt;=U,E-=U,Io=1&lt;&lt;32-ht(c)+E|d&lt;&lt;E|y,Po=A+a}else Io=1&lt;&lt;A|d&lt;&lt;E|y,Po=a}function I_(a){a.return!==null&amp;&amp;(Fl(a,1),$1(a,1,0))}function P_(a){for(;a===fp;)fp=Zc[--Jc],Zc[Jc]=null,dp=Zc[--Jc],Zc[Jc]=null;for(;a===kl;)kl=ds[--ps],ds[ps]=null,Po=ds[--ps],ds[ps]=null,Io=ds[--ps],ds[ps]=null}var mr=null,li=null,En=!1,zl=null,so=!1,L_=Error(i(519));function Bl(a){var c=Error(i(418,&quot;&quot;));throw jh(hs(c,a)),L_}function Z1(a){var c=a.stateNode,d=a.type,y=a.memoizedProps;switch(c[Zn]=a,c[gi]=y,d){case&quot;dialog&quot;:an(&quot;cancel&quot;,c),an(&quot;close&quot;,c);break;case&quot;iframe&quot;:case&quot;object&quot;:case&quot;embed&quot;:an(&quot;load&quot;,c);break;case&quot;video&quot;:case&quot;audio&quot;:for(d=0;d&lt;mf.length;d++)an(mf[d],c);break;case&quot;source&quot;:an(&quot;error&quot;,c);break;case&quot;img&quot;:case&quot;image&quot;:case&quot;link&quot;:an(&quot;error&quot;,c),an(&quot;load&quot;,c);break;case&quot;details&quot;:an(&quot;toggle&quot;,c);break;case&quot;input&quot;:an(&quot;invalid&quot;,c),Mn(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Hn(c);break;case&quot;select&quot;:an(&quot;invalid&quot;,c);break;case&quot;textarea&quot;:an(&quot;invalid&quot;,c),ai(c,y.value,y.defaultValue,y.children),Hn(c)}d=y.children,typeof d!=&quot;string&quot;&amp;&amp;typeof d!=&quot;number&quot;&amp;&amp;typeof d!=&quot;bigint&quot;||c.textContent===&quot;&quot;+d||y.suppressHydrationWarning===!0||pM(c.textContent,d)?(y.popover!=null&amp;&amp;(an(&quot;beforetoggle&quot;,c),an(&quot;toggle&quot;,c)),y.onScroll!=null&amp;&amp;an(&quot;scroll&quot;,c),y.onScrollEnd!=null&amp;&amp;an(&quot;scrollend&quot;,c),y.onClick!=null&amp;&amp;(c.onclick=qp),c=!0):c=!1,c||Bl(a)}function J1(a){for(mr=a.return;mr;)switch(mr.tag){case 5:case 13:so=!1;return;case 27:case 3:so=!0;return;default:mr=mr.return}}function Vh(a){if(a!==mr)return!1;if(!En)return J1(a),En=!0,!1;var c=a.tag,d;if((d=c!==3&amp;&amp;c!==27)&amp;&amp;((d=c===5)&amp;&amp;(d=a.type,d=!(d!==&quot;form&quot;&amp;&amp;d!==&quot;button&quot;)||Zv(a.type,a.memoizedProps)),d=!d),d&amp;&amp;li&amp;&amp;Bl(a),J1(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(d=a.data,d===&quot;/$&quot;){if(c===0){li=ks(a.nextSibling);break e}c--}else d!==&quot;$&quot;&amp;&amp;d!==&quot;$!&quot;&amp;&amp;d!==&quot;$?&quot;||c++;a=a.nextSibling}li=null}}else c===27?(c=li,Va(a.type)?(a=tb,tb=null,li=a):li=c):li=mr?ks(a.stateNode.nextSibling):null;return!0}function Gh(){li=mr=null,En=!1}function Q1(){var a=zl;return a!==null&amp;&amp;(Dr===null?Dr=a:Dr.push.apply(Dr,a),zl=null),a}function jh(a){zl===null?zl=[a]:zl.push(a)}var U_=ne(null),Hl=null,Lo=null;function Aa(a,c,d){ce(U_,c._currentValue),c._currentValue=d}function Uo(a){a._currentValue=U_.current,le(U_)}function k_(a,c,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&amp;c)!==c?(a.childLanes|=c,y!==null&amp;&amp;(y.childLanes|=c)):y!==null&amp;&amp;(y.childLanes&amp;c)!==c&amp;&amp;(y.childLanes|=c),a===d)break;a=a.return}}function F_(a,c,d,y){var E=a.child;for(E!==null&amp;&amp;(E.return=a);E!==null;){var A=E.dependencies;if(A!==null){var U=E.child;A=A.firstContext;e:for(;A!==null;){var W=A;A=E;for(var se=0;se&lt;c.length;se++)if(W.context===c[se]){A.lanes|=d,W=A.alternate,W!==null&amp;&amp;(W.lanes|=d),k_(A.return,d,a),y||(U=null);break e}A=W.next}}else if(E.tag===18){if(U=E.return,U===null)throw Error(i(341));U.lanes|=d,A=U.alternate,A!==null&amp;&amp;(A.lanes|=d),k_(U,d,a),U=null}else U=E.child;if(U!==null)U.return=E;else for(U=E;U!==null;){if(U===a){U=null;break}if(E=U.sibling,E!==null){E.return=U.return,U=E;break}U=U.return}E=U}}function Wh(a,c,d,y){a=null;for(var E=c,A=!1;E!==null;){if(!A){if((E.flags&amp;524288)!==0)A=!0;else if((E.flags&amp;262144)!==0)break}if(E.tag===10){var U=E.alternate;if(U===null)throw Error(i(387));if(U=U.memoizedProps,U!==null){var W=E.type;jr(E.pendingProps.value,U.value)||(a!==null?a.push(W):a=[W])}}else if(E===ue.current){if(U=E.alternate,U===null)throw Error(i(387));U.memoizedState.memoizedState!==E.memoizedState.memoizedState&amp;&amp;(a!==null?a.push(xf):a=[xf])}E=E.return}a!==null&amp;&amp;F_(c,a,d,y),c.flags|=262144}function pp(a){for(a=a.firstContext;a!==null;){if(!jr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Vl(a){Hl=a,Lo=null,a=a.dependencies,a!==null&amp;&amp;(a.firstContext=null)}function or(a){return eE(Hl,a)}function mp(a,c){return Hl===null&amp;&amp;Vl(a),eE(a,c)}function eE(a,c){var d=c._currentValue;if(c={context:c,memoizedValue:d,next:null},Lo===null){if(a===null)throw Error(i(308));Lo=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Lo=Lo.next=c;return d}var _U=typeof AbortController&lt;&quot;u&quot;?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(d,y){a.push(y)}};this.abort=function(){c.aborted=!0,a.forEach(function(d){return d()})}},vU=n.unstable_scheduleCallback,bU=n.unstable_NormalPriority,Li={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function z_(){return{controller:new _U,data:new Map,refCount:0}}function Xh(a){a.refCount--,a.refCount===0&amp;&amp;vU(bU,function(){a.controller.abort()})}var qh=null,B_=0,Qc=0,eu=null;function xU(a,c){if(qh===null){var d=qh=[];B_=0,Qc=Vv(),eu={status:&quot;pending&quot;,value:void 0,then:function(y){d.push(y)}}}return B_++,c.then(tE,tE),c}function tE(){if(--B_===0&amp;&amp;qh!==null){eu!==null&amp;&amp;(eu.status=&quot;fulfilled&quot;);var a=qh;qh=null,Qc=0,eu=null;for(var c=0;c&lt;a.length;c++)(0,a[c])()}}function SU(a,c){var d=[],y={status:&quot;pending&quot;,value:null,reason:null,then:function(E){d.push(E)}};return a.then(function(){y.status=&quot;fulfilled&quot;,y.value=c;for(var E=0;E&lt;d.length;E++)(0,d[E])(c)},function(E){for(y.status=&quot;rejected&quot;,y.reason=E,E=0;E&lt;d.length;E++)(0,d[E])(void 0)}),y}var nE=P.S;P.S=function(a,c){typeof c==&quot;object&quot;&amp;&amp;c!==null&amp;&amp;typeof c.then==&quot;function&quot;&amp;&amp;xU(a,c),nE!==null&amp;&amp;nE(a,c)};var Gl=ne(null);function H_(){var a=Gl.current;return a!==null?a:Vn.pooledCache}function gp(a,c){c===null?ce(Gl,Gl.current):ce(Gl,c.pool)}function iE(){var a=H_();return a===null?null:{parent:Li._currentValue,pool:a}}var Yh=Error(i(460)),rE=Error(i(474)),yp=Error(i(542)),V_={then:function(){}};function sE(a){return a=a.status,a===&quot;fulfilled&quot;||a===&quot;rejected&quot;}function _p(){}function oE(a,c,d){switch(d=a[d],d===void 0?a.push(c):d!==c&amp;&amp;(c.then(_p,_p),c=d),c.status){case&quot;fulfilled&quot;:return c.value;case&quot;rejected&quot;:throw a=c.reason,lE(a),a;default:if(typeof c.status==&quot;string&quot;)c.then(_p,_p);else{if(a=Vn,a!==null&amp;&amp;100&lt;a.shellSuspendCounter)throw Error(i(482));a=c,a.status=&quot;pending&quot;,a.then(function(y){if(c.status===&quot;pending&quot;){var E=c;E.status=&quot;fulfilled&quot;,E.value=y}},function(y){if(c.status===&quot;pending&quot;){var E=c;E.status=&quot;rejected&quot;,E.reason=y}})}switch(c.status){case&quot;fulfilled&quot;:return c.value;case&quot;rejected&quot;:throw a=c.reason,lE(a),a}throw Kh=c,Yh}}var Kh=null;function aE(){if(Kh===null)throw Error(i(459));var a=Kh;return Kh=null,a}function lE(a){if(a===Yh||a===yp)throw Error(i(483))}var Ca=!1;function G_(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function j_(a,c){a=a.updateQueue,c.updateQueue===a&amp;&amp;(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ra(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Oa(a,c,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Cn&amp;2)!==0){var E=y.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),y.pending=c,c=up(a),Y1(a,null,d),c}return cp(a,y,c,d),up(a)}function $h(a,c,d){if(c=c.updateQueue,c!==null&amp;&amp;(c=c.shared,(d&amp;4194048)!==0)){var y=c.lanes;y&amp;=a.pendingLanes,d|=y,c.lanes=d,Ut(a,d)}}function W_(a,c){var d=a.updateQueue,y=a.alternate;if(y!==null&amp;&amp;(y=y.updateQueue,d===y)){var E=null,A=null;if(d=d.firstBaseUpdate,d!==null){do{var U={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};A===null?E=A=U:A=A.next=U,d=d.next}while(d!==null);A===null?E=A=c:A=A.next=c}else E=A=c;d={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:y.shared,callbacks:y.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=c}var X_=!1;function Zh(){if(X_){var a=eu;if(a!==null)throw a}}function Jh(a,c,d,y){X_=!1;var E=a.updateQueue;Ca=!1;var A=E.firstBaseUpdate,U=E.lastBaseUpdate,W=E.shared.pending;if(W!==null){E.shared.pending=null;var se=W,_e=se.next;se.next=null,U===null?A=_e:U.next=_e,U=se;var Ne=a.alternate;Ne!==null&amp;&amp;(Ne=Ne.updateQueue,W=Ne.lastBaseUpdate,W!==U&amp;&amp;(W===null?Ne.firstBaseUpdate=_e:W.next=_e,Ne.lastBaseUpdate=se))}if(A!==null){var ke=E.baseState;U=0,Ne=_e=se=null,W=A;do{var xe=W.lane&amp;-536870913,Ee=xe!==W.lane;if(Ee?(pn&amp;xe)===xe:(y&amp;xe)===xe){xe!==0&amp;&amp;xe===Qc&amp;&amp;(X_=!0),Ne!==null&amp;&amp;(Ne=Ne.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var kt=a,Dt=W;xe=c;var Un=d;switch(Dt.tag){case 1:if(kt=Dt.payload,typeof kt==&quot;function&quot;){ke=kt.call(Un,ke,xe);break e}ke=kt;break e;case 3:kt.flags=kt.flags&amp;-65537|128;case 0:if(kt=Dt.payload,xe=typeof kt==&quot;function&quot;?kt.call(Un,ke,xe):kt,xe==null)break e;ke=f({},ke,xe);break e;case 2:Ca=!0}}xe=W.callback,xe!==null&amp;&amp;(a.flags|=64,Ee&amp;&amp;(a.flags|=8192),Ee=E.callbacks,Ee===null?E.callbacks=[xe]:Ee.push(xe))}else Ee={lane:xe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Ne===null?(_e=Ne=Ee,se=ke):Ne=Ne.next=Ee,U|=xe;if(W=W.next,W===null){if(W=E.shared.pending,W===null)break;Ee=W,W=Ee.next,Ee.next=null,E.lastBaseUpdate=Ee,E.shared.pending=null}}while(!0);Ne===null&amp;&amp;(se=ke),E.baseState=se,E.firstBaseUpdate=_e,E.lastBaseUpdate=Ne,A===null&amp;&amp;(E.shared.lanes=0),Fa|=U,a.lanes=U,a.memoizedState=ke}}function cE(a,c){if(typeof a!=&quot;function&quot;)throw Error(i(191,a));a.call(c)}function uE(a,c){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a&lt;d.length;a++)cE(d[a],c)}var tu=ne(null),vp=ne(0);function hE(a,c){a=Go,ce(vp,a),ce(tu,c),Go=a|c.baseLanes}function q_(){ce(vp,Go),ce(tu,tu.current)}function Y_(){Go=vp.current,le(tu),le(vp)}var Na=0,en=null,Pn=null,Ai=null,bp=!1,nu=!1,jl=!1,xp=0,Qh=0,iu=null,wU=0;function _i(){throw Error(i(321))}function K_(a,c){if(c===null)return!1;for(var d=0;d&lt;c.length&amp;&amp;d&lt;a.length;d++)if(!jr(a[d],c[d]))return!1;return!0}function $_(a,c,d,y,E,A){return Na=A,en=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,P.H=a===null||a.memoizedState===null?YE:KE,jl=!1,A=d(y,E),jl=!1,nu&amp;&amp;(A=dE(c,d,y,E)),fE(a),A}function fE(a){P.H=Ap;var c=Pn!==null&amp;&amp;Pn.next!==null;if(Na=0,Ai=Pn=en=null,bp=!1,Qh=0,iu=null,c)throw Error(i(300));a===null||Wi||(a=a.dependencies,a!==null&amp;&amp;pp(a)&amp;&amp;(Wi=!0))}function dE(a,c,d,y){en=a;var E=0;do{if(nu&amp;&amp;(iu=null),Qh=0,nu=!1,25&lt;=E)throw Error(i(301));if(E+=1,Ai=Pn=null,a.updateQueue!=null){var A=a.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&amp;&amp;(A.memoCache.index=0)}P.H=OU,A=c(d,y)}while(nu);return A}function EU(){var a=P.H,c=a.useState()[0];return c=typeof c.then==&quot;function&quot;?ef(c):c,a=a.useState()[0],(Pn!==null?Pn.memoizedState:null)!==a&amp;&amp;(en.flags|=1024),c}function Z_(){var a=xp!==0;return xp=0,a}function J_(a,c,d){c.updateQueue=a.updateQueue,c.flags&amp;=-2053,a.lanes&amp;=~d}function Q_(a){if(bp){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&amp;&amp;(c.pending=null),a=a.next}bp=!1}Na=0,Ai=Pn=en=null,nu=!1,Qh=xp=0,iu=null}function Or(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?en.memoizedState=Ai=a:Ai=Ai.next=a,Ai}function Ci(){if(Pn===null){var a=en.alternate;a=a!==null?a.memoizedState:null}else a=Pn.next;var c=Ai===null?en.memoizedState:Ai.next;if(c!==null)Ai=c,Pn=a;else{if(a===null)throw en.alternate===null?Error(i(467)):Error(i(310));Pn=a,a={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Ai===null?en.memoizedState=Ai=a:Ai=Ai.next=a}return Ai}function ev(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ef(a){var c=Qh;return Qh+=1,iu===null&amp;&amp;(iu=[]),a=oE(iu,a,c),c=en,(Ai===null?c.memoizedState:Ai.next)===null&amp;&amp;(c=c.alternate,P.H=c===null||c.memoizedState===null?YE:KE),a}function Sp(a){if(a!==null&amp;&amp;typeof a==&quot;object&quot;){if(typeof a.then==&quot;function&quot;)return ef(a);if(a.$$typeof===w)return or(a)}throw Error(i(438,String(a)))}function tv(a){var c=null,d=en.updateQueue;if(d!==null&amp;&amp;(c=d.memoCache),c==null){var y=en.alternate;y!==null&amp;&amp;(y=y.updateQueue,y!==null&amp;&amp;(y=y.memoCache,y!=null&amp;&amp;(c={data:y.data.map(function(E){return E.slice()}),index:0})))}if(c==null&amp;&amp;(c={data:[],index:0}),d===null&amp;&amp;(d=ev(),en.updateQueue=d),d.memoCache=c,d=c.data[c.index],d===void 0)for(d=c.data[c.index]=Array(a),y=0;y&lt;a;y++)d[y]=D;return c.index++,d}function ko(a,c){return typeof c==&quot;function&quot;?c(a):c}function wp(a){var c=Ci();return nv(c,Pn,a)}function nv(a,c,d){var y=a.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=d;var E=a.baseQueue,A=y.pending;if(A!==null){if(E!==null){var U=E.next;E.next=A.next,A.next=U}c.baseQueue=E=A,y.pending=null}if(A=a.baseState,E===null)a.memoizedState=A;else{c=E.next;var W=U=null,se=null,_e=c,Ne=!1;do{var ke=_e.lane&amp;-536870913;if(ke!==_e.lane?(pn&amp;ke)===ke:(Na&amp;ke)===ke){var xe=_e.revertLane;if(xe===0)se!==null&amp;&amp;(se=se.next={lane:0,revertLane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),ke===Qc&amp;&amp;(Ne=!0);else if((Na&amp;xe)===xe){_e=_e.next,xe===Qc&amp;&amp;(Ne=!0);continue}else ke={lane:0,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},se===null?(W=se=ke,U=A):se=se.next=ke,en.lanes|=xe,Fa|=xe;ke=_e.action,jl&amp;&amp;d(A,ke),A=_e.hasEagerState?_e.eagerState:d(A,ke)}else xe={lane:ke,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},se===null?(W=se=xe,U=A):se=se.next=xe,en.lanes|=ke,Fa|=ke;_e=_e.next}while(_e!==null&amp;&amp;_e!==c);if(se===null?U=A:se.next=W,!jr(A,a.memoizedState)&amp;&amp;(Wi=!0,Ne&amp;&amp;(d=eu,d!==null)))throw d;a.memoizedState=A,a.baseState=U,a.baseQueue=se,y.lastRenderedState=A}return E===null&amp;&amp;(y.lanes=0),[a.memoizedState,y.dispatch]}function iv(a){var c=Ci(),d=c.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=a;var y=d.dispatch,E=d.pending,A=c.memoizedState;if(E!==null){d.pending=null;var U=E=E.next;do A=a(A,U.action),U=U.next;while(U!==E);jr(A,c.memoizedState)||(Wi=!0),c.memoizedState=A,c.baseQueue===null&amp;&amp;(c.baseState=A),d.lastRenderedState=A}return[A,y]}function pE(a,c,d){var y=en,E=Ci(),A=En;if(A){if(d===void 0)throw Error(i(407));d=d()}else d=c();var U=!jr((Pn||E).memoizedState,d);U&amp;&amp;(E.memoizedState=d,Wi=!0),E=E.queue;var W=yE.bind(null,y,E,a);if(tf(2048,8,W,[a]),E.getSnapshot!==c||U||Ai!==null&amp;&amp;Ai.memoizedState.tag&amp;1){if(y.flags|=2048,ru(9,Ep(),gE.bind(null,y,E,d,c),null),Vn===null)throw Error(i(349));A||(Na&amp;124)!==0||mE(y,c,d)}return d}function mE(a,c,d){a.flags|=16384,a={getSnapshot:c,value:d},c=en.updateQueue,c===null?(c=ev(),en.updateQueue=c,c.stores=[a]):(d=c.stores,d===null?c.stores=[a]:d.push(a))}function gE(a,c,d,y){c.value=d,c.getSnapshot=y,_E(c)&amp;&amp;vE(a)}function yE(a,c,d){return d(function(){_E(c)&amp;&amp;vE(a)})}function _E(a){var c=a.getSnapshot;a=a.value;try{var d=c();return!jr(a,d)}catch{return!0}}function vE(a){var c=Kc(a,2);c!==null&amp;&amp;$r(c,a,2)}function rv(a){var c=Or();if(typeof a==&quot;function&quot;){var d=a;if(a=d(),jl){qe(!0);try{d()}finally{qe(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:a},c}function bE(a,c,d,y){return a.baseState=d,nv(a,Pn,typeof y==&quot;function&quot;?y:ko)}function TU(a,c,d,y,E){if(Mp(a))throw Error(i(485));if(a=c.action,a!==null){var A={payload:E,action:a,next:null,isTransition:!0,status:&quot;pending&quot;,value:null,reason:null,listeners:[],then:function(U){A.listeners.push(U)}};P.T!==null?d(!0):A.isTransition=!1,y(A),d=c.pending,d===null?(A.next=c.pending=A,xE(c,A)):(A.next=d.next,c.pending=d.next=A)}}function xE(a,c){var d=c.action,y=c.payload,E=a.state;if(c.isTransition){var A=P.T,U={};P.T=U;try{var W=d(E,y),se=P.S;se!==null&amp;&amp;se(U,W),SE(a,c,W)}catch(_e){sv(a,c,_e)}finally{P.T=A}}else try{A=d(E,y),SE(a,c,A)}catch(_e){sv(a,c,_e)}}function SE(a,c,d){d!==null&amp;&amp;typeof d==&quot;object&quot;&amp;&amp;typeof d.then==&quot;function&quot;?d.then(function(y){wE(a,c,y)},function(y){return sv(a,c,y)}):wE(a,c,d)}function wE(a,c,d){c.status=&quot;fulfilled&quot;,c.value=d,EE(c),a.state=d,c=a.pending,c!==null&amp;&amp;(d=c.next,d===c?a.pending=null:(d=d.next,c.next=d,xE(a,d)))}function sv(a,c,d){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do c.status=&quot;rejected&quot;,c.reason=d,EE(c),c=c.next;while(c!==y)}a.action=null}function EE(a){a=a.listeners;for(var c=0;c&lt;a.length;c++)(0,a[c])()}function TE(a,c){return c}function ME(a,c){if(En){var d=Vn.formState;if(d!==null){e:{var y=en;if(En){if(li){t:{for(var E=li,A=so;E.nodeType!==8;){if(!A){E=null;break t}if(E=ks(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A===&quot;F!&quot;||A===&quot;F&quot;?E:null}if(E){li=ks(E.nextSibling),y=E.data===&quot;F!&quot;;break e}}Bl(y)}y=!1}y&amp;&amp;(c=d[0])}}return d=Or(),d.memoizedState=d.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:TE,lastRenderedState:c},d.queue=y,d=WE.bind(null,en,y),y.dispatch=d,y=rv(!1),A=uv.bind(null,en,!1,y.queue),y=Or(),E={state:c,dispatch:null,action:a,pending:null},y.queue=E,d=TU.bind(null,en,E,A,d),E.dispatch=d,y.memoizedState=a,[c,d,!1]}function AE(a){var c=Ci();return CE(c,Pn,a)}function CE(a,c,d){if(c=nv(a,c,TE)[0],a=wp(ko)[0],typeof c==&quot;object&quot;&amp;&amp;c!==null&amp;&amp;typeof c.then==&quot;function&quot;)try{var y=ef(c)}catch(U){throw U===Yh?yp:U}else y=c;c=Ci();var E=c.queue,A=E.dispatch;return d!==c.memoizedState&amp;&amp;(en.flags|=2048,ru(9,Ep(),MU.bind(null,E,d),null)),[y,A,a]}function MU(a,c){a.action=c}function RE(a){var c=Ci(),d=Pn;if(d!==null)return CE(c,d,a);Ci(),c=c.memoizedState,d=Ci();var y=d.queue.dispatch;return d.memoizedState=a,[c,y,!1]}function ru(a,c,d,y){return a={tag:a,create:d,deps:y,inst:c,next:null},c=en.updateQueue,c===null&amp;&amp;(c=ev(),en.updateQueue=c),d=c.lastEffect,d===null?c.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,c.lastEffect=a),a}function Ep(){return{destroy:void 0,resource:void 0}}function OE(){return Ci().memoizedState}function Tp(a,c,d,y){var E=Or();y=y===void 0?null:y,en.flags|=a,E.memoizedState=ru(1|c,Ep(),d,y)}function tf(a,c,d,y){var E=Ci();y=y===void 0?null:y;var A=E.memoizedState.inst;Pn!==null&amp;&amp;y!==null&amp;&amp;K_(y,Pn.memoizedState.deps)?E.memoizedState=ru(c,A,d,y):(en.flags|=a,E.memoizedState=ru(1|c,A,d,y))}function NE(a,c){Tp(8390656,8,a,c)}function DE(a,c){tf(2048,8,a,c)}function IE(a,c){return tf(4,2,a,c)}function PE(a,c){return tf(4,4,a,c)}function LE(a,c){if(typeof c==&quot;function&quot;){a=a();var d=c(a);return function(){typeof d==&quot;function&quot;?d():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function UE(a,c,d){d=d!=null?d.concat([a]):null,tf(4,4,LE.bind(null,c,a),d)}function ov(){}function kE(a,c){var d=Ci();c=c===void 0?null:c;var y=d.memoizedState;return c!==null&amp;&amp;K_(c,y[1])?y[0]:(d.memoizedState=[a,c],a)}function FE(a,c){var d=Ci();c=c===void 0?null:c;var y=d.memoizedState;if(c!==null&amp;&amp;K_(c,y[1]))return y[0];if(y=a(),jl){qe(!0);try{a()}finally{qe(!1)}}return d.memoizedState=[y,c],y}function av(a,c,d){return d===void 0||(Na&amp;1073741824)!==0?a.memoizedState=c:(a.memoizedState=d,a=HT(),en.lanes|=a,Fa|=a,d)}function zE(a,c,d,y){return jr(d,c)?d:tu.current!==null?(a=av(a,d,y),jr(a,c)||(Wi=!0),a):(Na&amp;42)===0?(Wi=!0,a.memoizedState=d):(a=HT(),en.lanes|=a,Fa|=a,c)}function BE(a,c,d,y,E){var A=j.p;j.p=A!==0&amp;&amp;8&gt;A?A:8;var U=P.T,W={};P.T=W,uv(a,!1,c,d);try{var se=E(),_e=P.S;if(_e!==null&amp;&amp;_e(W,se),se!==null&amp;&amp;typeof se==&quot;object&quot;&amp;&amp;typeof se.then==&quot;function&quot;){var Ne=SU(se,y);nf(a,c,Ne,Kr(a))}else nf(a,c,y,Kr(a))}catch(ke){nf(a,c,{then:function(){},status:&quot;rejected&quot;,reason:ke},Kr())}finally{j.p=A,P.T=U}}function AU(){}function lv(a,c,d,y){if(a.tag!==5)throw Error(i(476));var E=HE(a).queue;BE(a,E,c,G,d===null?AU:function(){return VE(a),d(y)})}function HE(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:G},next:null};var d={};return c.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:d},next:null},a.memoizedState=c,a=a.alternate,a!==null&amp;&amp;(a.memoizedState=c),c}function VE(a){var c=HE(a).next.queue;nf(a,c,{},Kr())}function cv(){return or(xf)}function GE(){return Ci().memoizedState}function jE(){return Ci().memoizedState}function CU(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var d=Kr();a=Ra(d);var y=Oa(c,a,d);y!==null&amp;&amp;($r(y,c,d),$h(y,c,d)),c={cache:z_()},a.payload=c;return}c=c.return}}function RU(a,c,d){var y=Kr();d={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Mp(a)?XE(c,d):(d=R_(a,c,d,y),d!==null&amp;&amp;($r(d,a,y),qE(d,c,y)))}function WE(a,c,d){var y=Kr();nf(a,c,d,y)}function nf(a,c,d,y){var E={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Mp(a))XE(c,E);else{var A=a.alternate;if(a.lanes===0&amp;&amp;(A===null||A.lanes===0)&amp;&amp;(A=c.lastRenderedReducer,A!==null))try{var U=c.lastRenderedState,W=A(U,d);if(E.hasEagerState=!0,E.eagerState=W,jr(W,U))return cp(a,c,E,0),Vn===null&amp;&amp;lp(),!1}catch{}finally{}if(d=R_(a,c,E,y),d!==null)return $r(d,a,y),qE(d,c,y),!0}return!1}function uv(a,c,d,y){if(y={lane:2,revertLane:Vv(),action:y,hasEagerState:!1,eagerState:null,next:null},Mp(a)){if(c)throw Error(i(479))}else c=R_(a,d,y,2),c!==null&amp;&amp;$r(c,a,2)}function Mp(a){var c=a.alternate;return a===en||c!==null&amp;&amp;c===en}function XE(a,c){nu=bp=!0;var d=a.pending;d===null?c.next=c:(c.next=d.next,d.next=c),a.pending=c}function qE(a,c,d){if((d&amp;4194048)!==0){var y=c.lanes;y&amp;=a.pendingLanes,d|=y,c.lanes=d,Ut(a,d)}}var Ap={readContext:or,use:Sp,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useLayoutEffect:_i,useInsertionEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useSyncExternalStore:_i,useId:_i,useHostTransitionStatus:_i,useFormState:_i,useActionState:_i,useOptimistic:_i,useMemoCache:_i,useCacheRefresh:_i},YE={readContext:or,use:Sp,useCallback:function(a,c){return Or().memoizedState=[a,c===void 0?null:c],a},useContext:or,useEffect:NE,useImperativeHandle:function(a,c,d){d=d!=null?d.concat([a]):null,Tp(4194308,4,LE.bind(null,c,a),d)},useLayoutEffect:function(a,c){return Tp(4194308,4,a,c)},useInsertionEffect:function(a,c){Tp(4,2,a,c)},useMemo:function(a,c){var d=Or();c=c===void 0?null:c;var y=a();if(jl){qe(!0);try{a()}finally{qe(!1)}}return d.memoizedState=[y,c],y},useReducer:function(a,c,d){var y=Or();if(d!==void 0){var E=d(c);if(jl){qe(!0);try{d(c)}finally{qe(!1)}}}else E=c;return y.memoizedState=y.baseState=E,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:E},y.queue=a,a=a.dispatch=RU.bind(null,en,a),[y.memoizedState,a]},useRef:function(a){var c=Or();return a={current:a},c.memoizedState=a},useState:function(a){a=rv(a);var c=a.queue,d=WE.bind(null,en,c);return c.dispatch=d,[a.memoizedState,d]},useDebugValue:ov,useDeferredValue:function(a,c){var d=Or();return av(d,a,c)},useTransition:function(){var a=rv(!1);return a=BE.bind(null,en,a.queue,!0,!1),Or().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,d){var y=en,E=Or();if(En){if(d===void 0)throw Error(i(407));d=d()}else{if(d=c(),Vn===null)throw Error(i(349));(pn&amp;124)!==0||mE(y,c,d)}E.memoizedState=d;var A={value:d,getSnapshot:c};return E.queue=A,NE(yE.bind(null,y,A,a),[a]),y.flags|=2048,ru(9,Ep(),gE.bind(null,y,A,d,c),null),d},useId:function(){var a=Or(),c=Vn.identifierPrefix;if(En){var d=Po,y=Io;d=(y&amp;~(1&lt;&lt;32-ht(y)-1)).toString(32)+d,c=&quot;Â«&quot;+c+&quot;R&quot;+d,d=xp++,0&lt;d&amp;&amp;(c+=&quot;H&quot;+d.toString(32)),c+=&quot;Â»&quot;}else d=wU++,c=&quot;Â«&quot;+c+&quot;r&quot;+d.toString(32)+&quot;Â»&quot;;return a.memoizedState=c},useHostTransitionStatus:cv,useFormState:ME,useActionState:ME,useOptimistic:function(a){var c=Or();c.memoizedState=c.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=d,c=uv.bind(null,en,!0,d),d.dispatch=c,[a,c]},useMemoCache:tv,useCacheRefresh:function(){return Or().memoizedState=CU.bind(null,en)}},KE={readContext:or,use:Sp,useCallback:kE,useContext:or,useEffect:DE,useImperativeHandle:UE,useInsertionEffect:IE,useLayoutEffect:PE,useMemo:FE,useReducer:wp,useRef:OE,useState:function(){return wp(ko)},useDebugValue:ov,useDeferredValue:function(a,c){var d=Ci();return zE(d,Pn.memoizedState,a,c)},useTransition:function(){var a=wp(ko)[0],c=Ci().memoizedState;return[typeof a==&quot;boolean&quot;?a:ef(a),c]},useSyncExternalStore:pE,useId:GE,useHostTransitionStatus:cv,useFormState:AE,useActionState:AE,useOptimistic:function(a,c){var d=Ci();return bE(d,Pn,a,c)},useMemoCache:tv,useCacheRefresh:jE},OU={readContext:or,use:Sp,useCallback:kE,useContext:or,useEffect:DE,useImperativeHandle:UE,useInsertionEffect:IE,useLayoutEffect:PE,useMemo:FE,useReducer:iv,useRef:OE,useState:function(){return iv(ko)},useDebugValue:ov,useDeferredValue:function(a,c){var d=Ci();return Pn===null?av(d,a,c):zE(d,Pn.memoizedState,a,c)},useTransition:function(){var a=iv(ko)[0],c=Ci().memoizedState;return[typeof a==&quot;boolean&quot;?a:ef(a),c]},useSyncExternalStore:pE,useId:GE,useHostTransitionStatus:cv,useFormState:RE,useActionState:RE,useOptimistic:function(a,c){var d=Ci();return Pn!==null?bE(d,Pn,a,c):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:tv,useCacheRefresh:jE},su=null,rf=0;function Cp(a){var c=rf;return rf+=1,su===null&amp;&amp;(su=[]),oE(su,a,c)}function sf(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function Rp(a,c){throw c.$$typeof===p?Error(i(525)):(a=Object.prototype.toString.call(c),Error(i(31,a===&quot;[object Object]&quot;?&quot;object with keys {&quot;+Object.keys(c).join(&quot;, &quot;)+&quot;}&quot;:a)))}function $E(a){var c=a._init;return c(a._payload)}function ZE(a){function c(ge,he){if(a){var ye=ge.deletions;ye===null?(ge.deletions=[he],ge.flags|=16):ye.push(he)}}function d(ge,he){if(!a)return null;for(;he!==null;)c(ge,he),he=he.sibling;return null}function y(ge){for(var he=new Map;ge!==null;)ge.key!==null?he.set(ge.key,ge):he.set(ge.index,ge),ge=ge.sibling;return he}function E(ge,he){return ge=Do(ge,he),ge.index=0,ge.sibling=null,ge}function A(ge,he,ye){return ge.index=ye,a?(ye=ge.alternate,ye!==null?(ye=ye.index,ye&lt;he?(ge.flags|=67108866,he):ye):(ge.flags|=67108866,he)):(ge.flags|=1048576,he)}function U(ge){return a&amp;&amp;ge.alternate===null&amp;&amp;(ge.flags|=67108866),ge}function W(ge,he,ye,Ie){return he===null||he.tag!==6?(he=N_(ye,ge.mode,Ie),he.return=ge,he):(he=E(he,ye),he.return=ge,he)}function se(ge,he,ye,Ie){var vt=ye.type;return vt===v?Ne(ge,he,ye.props.children,Ie,ye.key):he!==null&amp;&amp;(he.elementType===vt||typeof vt==&quot;object&quot;&amp;&amp;vt!==null&amp;&amp;vt.$$typeof===N&amp;&amp;$E(vt)===he.type)?(he=E(he,ye.props),sf(he,ye),he.return=ge,he):(he=hp(ye.type,ye.key,ye.props,null,ge.mode,Ie),sf(he,ye),he.return=ge,he)}function _e(ge,he,ye,Ie){return he===null||he.tag!==4||he.stateNode.containerInfo!==ye.containerInfo||he.stateNode.implementation!==ye.implementation?(he=D_(ye,ge.mode,Ie),he.return=ge,he):(he=E(he,ye.children||[]),he.return=ge,he)}function Ne(ge,he,ye,Ie,vt){return he===null||he.tag!==7?(he=Ul(ye,ge.mode,Ie,vt),he.return=ge,he):(he=E(he,ye),he.return=ge,he)}function ke(ge,he,ye){if(typeof he==&quot;string&quot;&amp;&amp;he!==&quot;&quot;||typeof he==&quot;number&quot;||typeof he==&quot;bigint&quot;)return he=N_(&quot;&quot;+he,ge.mode,ye),he.return=ge,he;if(typeof he==&quot;object&quot;&amp;&amp;he!==null){switch(he.$$typeof){case m:return ye=hp(he.type,he.key,he.props,null,ge.mode,ye),sf(ye,he),ye.return=ge,ye;case g:return he=D_(he,ge.mode,ye),he.return=ge,he;case N:var Ie=he._init;return he=Ie(he._payload),ke(ge,he,ye)}if($(he)||H(he))return he=Ul(he,ge.mode,ye,null),he.return=ge,he;if(typeof he.then==&quot;function&quot;)return ke(ge,Cp(he),ye);if(he.$$typeof===w)return ke(ge,mp(ge,he),ye);Rp(ge,he)}return null}function xe(ge,he,ye,Ie){var vt=he!==null?he.key:null;if(typeof ye==&quot;string&quot;&amp;&amp;ye!==&quot;&quot;||typeof ye==&quot;number&quot;||typeof ye==&quot;bigint&quot;)return vt!==null?null:W(ge,he,&quot;&quot;+ye,Ie);if(typeof ye==&quot;object&quot;&amp;&amp;ye!==null){switch(ye.$$typeof){case m:return ye.key===vt?se(ge,he,ye,Ie):null;case g:return ye.key===vt?_e(ge,he,ye,Ie):null;case N:return vt=ye._init,ye=vt(ye._payload),xe(ge,he,ye,Ie)}if($(ye)||H(ye))return vt!==null?null:Ne(ge,he,ye,Ie,null);if(typeof ye.then==&quot;function&quot;)return xe(ge,he,Cp(ye),Ie);if(ye.$$typeof===w)return xe(ge,he,mp(ge,ye),Ie);Rp(ge,ye)}return null}function Ee(ge,he,ye,Ie,vt){if(typeof Ie==&quot;string&quot;&amp;&amp;Ie!==&quot;&quot;||typeof Ie==&quot;number&quot;||typeof Ie==&quot;bigint&quot;)return ge=ge.get(ye)||null,W(he,ge,&quot;&quot;+Ie,vt);if(typeof Ie==&quot;object&quot;&amp;&amp;Ie!==null){switch(Ie.$$typeof){case m:return ge=ge.get(Ie.key===null?ye:Ie.key)||null,se(he,ge,Ie,vt);case g:return ge=ge.get(Ie.key===null?ye:Ie.key)||null,_e(he,ge,Ie,vt);case N:var tn=Ie._init;return Ie=tn(Ie._payload),Ee(ge,he,ye,Ie,vt)}if($(Ie)||H(Ie))return ge=ge.get(ye)||null,Ne(he,ge,Ie,vt,null);if(typeof Ie.then==&quot;function&quot;)return Ee(ge,he,ye,Cp(Ie),vt);if(Ie.$$typeof===w)return Ee(ge,he,ye,mp(he,Ie),vt);Rp(he,Ie)}return null}function kt(ge,he,ye,Ie){for(var vt=null,tn=null,At=he,Lt=he=0,qi=null;At!==null&amp;&amp;Lt&lt;ye.length;Lt++){At.index&gt;Lt?(qi=At,At=null):qi=At.sibling;var xn=xe(ge,At,ye[Lt],Ie);if(xn===null){At===null&amp;&amp;(At=qi);break}a&amp;&amp;At&amp;&amp;xn.alternate===null&amp;&amp;c(ge,At),he=A(xn,he,Lt),tn===null?vt=xn:tn.sibling=xn,tn=xn,At=qi}if(Lt===ye.length)return d(ge,At),En&amp;&amp;Fl(ge,Lt),vt;if(At===null){for(;Lt&lt;ye.length;Lt++)At=ke(ge,ye[Lt],Ie),At!==null&amp;&amp;(he=A(At,he,Lt),tn===null?vt=At:tn.sibling=At,tn=At);return En&amp;&amp;Fl(ge,Lt),vt}for(At=y(At);Lt&lt;ye.length;Lt++)qi=Ee(At,ge,Lt,ye[Lt],Ie),qi!==null&amp;&amp;(a&amp;&amp;qi.alternate!==null&amp;&amp;At.delete(qi.key===null?Lt:qi.key),he=A(qi,he,Lt),tn===null?vt=qi:tn.sibling=qi,tn=qi);return a&amp;&amp;At.forEach(function(qa){return c(ge,qa)}),En&amp;&amp;Fl(ge,Lt),vt}function Dt(ge,he,ye,Ie){if(ye==null)throw Error(i(151));for(var vt=null,tn=null,At=he,Lt=he=0,qi=null,xn=ye.next();At!==null&amp;&amp;!xn.done;Lt++,xn=ye.next()){At.index&gt;Lt?(qi=At,At=null):qi=At.sibling;var qa=xe(ge,At,xn.value,Ie);if(qa===null){At===null&amp;&amp;(At=qi);break}a&amp;&amp;At&amp;&amp;qa.alternate===null&amp;&amp;c(ge,At),he=A(qa,he,Lt),tn===null?vt=qa:tn.sibling=qa,tn=qa,At=qi}if(xn.done)return d(ge,At),En&amp;&amp;Fl(ge,Lt),vt;if(At===null){for(;!xn.done;Lt++,xn=ye.next())xn=ke(ge,xn.value,Ie),xn!==null&amp;&amp;(he=A(xn,he,Lt),tn===null?vt=xn:tn.sibling=xn,tn=xn);return En&amp;&amp;Fl(ge,Lt),vt}for(At=y(At);!xn.done;Lt++,xn=ye.next())xn=Ee(At,ge,Lt,xn.value,Ie),xn!==null&amp;&amp;(a&amp;&amp;xn.alternate!==null&amp;&amp;At.delete(xn.key===null?Lt:xn.key),he=A(xn,he,Lt),tn===null?vt=xn:tn.sibling=xn,tn=xn);return a&amp;&amp;At.forEach(function(Nk){return c(ge,Nk)}),En&amp;&amp;Fl(ge,Lt),vt}function Un(ge,he,ye,Ie){if(typeof ye==&quot;object&quot;&amp;&amp;ye!==null&amp;&amp;ye.type===v&amp;&amp;ye.key===null&amp;&amp;(ye=ye.props.children),typeof ye==&quot;object&quot;&amp;&amp;ye!==null){switch(ye.$$typeof){case m:e:{for(var vt=ye.key;he!==null;){if(he.key===vt){if(vt=ye.type,vt===v){if(he.tag===7){d(ge,he.sibling),Ie=E(he,ye.props.children),Ie.return=ge,ge=Ie;break e}}else if(he.elementType===vt||typeof vt==&quot;object&quot;&amp;&amp;vt!==null&amp;&amp;vt.$$typeof===N&amp;&amp;$E(vt)===he.type){d(ge,he.sibling),Ie=E(he,ye.props),sf(Ie,ye),Ie.return=ge,ge=Ie;break e}d(ge,he);break}else c(ge,he);he=he.sibling}ye.type===v?(Ie=Ul(ye.props.children,ge.mode,Ie,ye.key),Ie.return=ge,ge=Ie):(Ie=hp(ye.type,ye.key,ye.props,null,ge.mode,Ie),sf(Ie,ye),Ie.return=ge,ge=Ie)}return U(ge);case g:e:{for(vt=ye.key;he!==null;){if(he.key===vt)if(he.tag===4&amp;&amp;he.stateNode.containerInfo===ye.containerInfo&amp;&amp;he.stateNode.implementation===ye.implementation){d(ge,he.sibling),Ie=E(he,ye.children||[]),Ie.return=ge,ge=Ie;break e}else{d(ge,he);break}else c(ge,he);he=he.sibling}Ie=D_(ye,ge.mode,Ie),Ie.return=ge,ge=Ie}return U(ge);case N:return vt=ye._init,ye=vt(ye._payload),Un(ge,he,ye,Ie)}if($(ye))return kt(ge,he,ye,Ie);if(H(ye)){if(vt=H(ye),typeof vt!=&quot;function&quot;)throw Error(i(150));return ye=vt.call(ye),Dt(ge,he,ye,Ie)}if(typeof ye.then==&quot;function&quot;)return Un(ge,he,Cp(ye),Ie);if(ye.$$typeof===w)return Un(ge,he,mp(ge,ye),Ie);Rp(ge,ye)}return typeof ye==&quot;string&quot;&amp;&amp;ye!==&quot;&quot;||typeof ye==&quot;number&quot;||typeof ye==&quot;bigint&quot;?(ye=&quot;&quot;+ye,he!==null&amp;&amp;he.tag===6?(d(ge,he.sibling),Ie=E(he,ye),Ie.return=ge,ge=Ie):(d(ge,he),Ie=N_(ye,ge.mode,Ie),Ie.return=ge,ge=Ie),U(ge)):d(ge,he)}return function(ge,he,ye,Ie){try{rf=0;var vt=Un(ge,he,ye,Ie);return su=null,vt}catch(At){if(At===Yh||At===yp)throw At;var tn=Wr(29,At,null,ge.mode);return tn.lanes=Ie,tn.return=ge,tn}finally{}}}var ou=ZE(!0),JE=ZE(!1),ms=ne(null),oo=null;function Da(a){var c=a.alternate;ce(Ui,Ui.current&amp;1),ce(ms,a),oo===null&amp;&amp;(c===null||tu.current!==null||c.memoizedState!==null)&amp;&amp;(oo=a)}function QE(a){if(a.tag===22){if(ce(Ui,Ui.current),ce(ms,a),oo===null){var c=a.alternate;c!==null&amp;&amp;c.memoizedState!==null&amp;&amp;(oo=a)}}else Ia()}function Ia(){ce(Ui,Ui.current),ce(ms,ms.current)}function Fo(a){le(ms),oo===a&amp;&amp;(oo=null),le(Ui)}var Ui=ne(0);function Op(a){for(var c=a;c!==null;){if(c.tag===13){var d=c.memoizedState;if(d!==null&amp;&amp;(d=d.dehydrated,d===null||d.data===&quot;$?&quot;||eb(d)))return c}else if(c.tag===19&amp;&amp;c.memoizedProps.revealOrder!==void 0){if((c.flags&amp;128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function hv(a,c,d,y){c=a.memoizedState,d=d(y,c),d=d==null?c:f({},c,d),a.memoizedState=d,a.lanes===0&amp;&amp;(a.updateQueue.baseState=d)}var fv={enqueueSetState:function(a,c,d){a=a._reactInternals;var y=Kr(),E=Ra(y);E.payload=c,d!=null&amp;&amp;(E.callback=d),c=Oa(a,E,y),c!==null&amp;&amp;($r(c,a,y),$h(c,a,y))},enqueueReplaceState:function(a,c,d){a=a._reactInternals;var y=Kr(),E=Ra(y);E.tag=1,E.payload=c,d!=null&amp;&amp;(E.callback=d),c=Oa(a,E,y),c!==null&amp;&amp;($r(c,a,y),$h(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var d=Kr(),y=Ra(d);y.tag=2,c!=null&amp;&amp;(y.callback=c),c=Oa(a,y,d),c!==null&amp;&amp;($r(c,a,d),$h(c,a,d))}};function eT(a,c,d,y,E,A,U){return a=a.stateNode,typeof a.shouldComponentUpdate==&quot;function&quot;?a.shouldComponentUpdate(y,A,U):c.prototype&amp;&amp;c.prototype.isPureReactComponent?!Bh(d,y)||!Bh(E,A):!0}function tT(a,c,d,y){a=c.state,typeof c.componentWillReceiveProps==&quot;function&quot;&amp;&amp;c.componentWillReceiveProps(d,y),typeof c.UNSAFE_componentWillReceiveProps==&quot;function&quot;&amp;&amp;c.UNSAFE_componentWillReceiveProps(d,y),c.state!==a&amp;&amp;fv.enqueueReplaceState(c,c.state,null)}function Wl(a,c){var d=c;if(&quot;ref&quot;in c){d={};for(var y in c)y!==&quot;ref&quot;&amp;&amp;(d[y]=c[y])}if(a=a.defaultProps){d===c&amp;&amp;(d=f({},d));for(var E in a)d[E]===void 0&amp;&amp;(d[E]=a[E])}return d}var Np=typeof reportError==&quot;function&quot;?reportError:function(a){if(typeof window==&quot;object&quot;&amp;&amp;typeof window.ErrorEvent==&quot;function&quot;){var c=new window.ErrorEvent(&quot;error&quot;,{bubbles:!0,cancelable:!0,message:typeof a==&quot;object&quot;&amp;&amp;a!==null&amp;&amp;typeof a.message==&quot;string&quot;?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process==&quot;object&quot;&amp;&amp;typeof process.emit==&quot;function&quot;){process.emit(&quot;uncaughtException&quot;,a);return}console.error(a)};function nT(a){Np(a)}function iT(a){console.error(a)}function rT(a){Np(a)}function Dp(a,c){try{var d=a.onUncaughtError;d(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function sT(a,c,d){try{var y=a.onCaughtError;y(d.value,{componentStack:d.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function dv(a,c,d){return d=Ra(d),d.tag=3,d.payload={element:null},d.callback=function(){Dp(a,c)},d}function oT(a){return a=Ra(a),a.tag=3,a}function aT(a,c,d,y){var E=d.type.getDerivedStateFromError;if(typeof E==&quot;function&quot;){var A=y.value;a.payload=function(){return E(A)},a.callback=function(){sT(c,d,y)}}var U=d.stateNode;U!==null&amp;&amp;typeof U.componentDidCatch==&quot;function&quot;&amp;&amp;(a.callback=function(){sT(c,d,y),typeof E!=&quot;function&quot;&amp;&amp;(za===null?za=new Set([this]):za.add(this));var W=y.stack;this.componentDidCatch(y.value,{componentStack:W!==null?W:&quot;&quot;})})}function NU(a,c,d,y,E){if(d.flags|=32768,y!==null&amp;&amp;typeof y==&quot;object&quot;&amp;&amp;typeof y.then==&quot;function&quot;){if(c=d.alternate,c!==null&amp;&amp;Wh(c,d,E,!0),d=ms.current,d!==null){switch(d.tag){case 13:return oo===null?kv():d.alternate===null&amp;&amp;ci===0&amp;&amp;(ci=3),d.flags&amp;=-257,d.flags|=65536,d.lanes=E,y===V_?d.flags|=16384:(c=d.updateQueue,c===null?d.updateQueue=new Set([y]):c.add(y),zv(a,y,E)),!1;case 22:return d.flags|=65536,y===V_?d.flags|=16384:(c=d.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},d.updateQueue=c):(d=c.retryQueue,d===null?c.retryQueue=new Set([y]):d.add(y)),zv(a,y,E)),!1}throw Error(i(435,d.tag))}return zv(a,y,E),kv(),!1}if(En)return c=ms.current,c!==null?((c.flags&amp;65536)===0&amp;&amp;(c.flags|=256),c.flags|=65536,c.lanes=E,y!==L_&amp;&amp;(a=Error(i(422),{cause:y}),jh(hs(a,d)))):(y!==L_&amp;&amp;(c=Error(i(423),{cause:y}),jh(hs(c,d))),a=a.current.alternate,a.flags|=65536,E&amp;=-E,a.lanes|=E,y=hs(y,d),E=dv(a.stateNode,y,E),W_(a,E),ci!==4&amp;&amp;(ci=2)),!1;var A=Error(i(520),{cause:y});if(A=hs(A,d),ff===null?ff=[A]:ff.push(A),ci!==4&amp;&amp;(ci=2),c===null)return!0;y=hs(y,d),d=c;do{switch(d.tag){case 3:return d.flags|=65536,a=E&amp;-E,d.lanes|=a,a=dv(d.stateNode,y,a),W_(d,a),!1;case 1:if(c=d.type,A=d.stateNode,(d.flags&amp;128)===0&amp;&amp;(typeof c.getDerivedStateFromError==&quot;function&quot;||A!==null&amp;&amp;typeof A.componentDidCatch==&quot;function&quot;&amp;&amp;(za===null||!za.has(A))))return d.flags|=65536,E&amp;=-E,d.lanes|=E,E=oT(E),aT(E,a,d,y),W_(d,E),!1}d=d.return}while(d!==null);return!1}var lT=Error(i(461)),Wi=!1;function tr(a,c,d,y){c.child=a===null?JE(c,null,d,y):ou(c,a.child,d,y)}function cT(a,c,d,y,E){d=d.render;var A=c.ref;if(&quot;ref&quot;in y){var U={};for(var W in y)W!==&quot;ref&quot;&amp;&amp;(U[W]=y[W])}else U=y;return Vl(c),y=$_(a,c,d,U,A,E),W=Z_(),a!==null&amp;&amp;!Wi?(J_(a,c,E),zo(a,c,E)):(En&amp;&amp;W&amp;&amp;I_(c),c.flags|=1,tr(a,c,y,E),c.child)}function uT(a,c,d,y,E){if(a===null){var A=d.type;return typeof A==&quot;function&quot;&amp;&amp;!O_(A)&amp;&amp;A.defaultProps===void 0&amp;&amp;d.compare===null?(c.tag=15,c.type=A,hT(a,c,A,y,E)):(a=hp(d.type,null,y,c,c.mode,E),a.ref=c.ref,a.return=c,c.child=a)}if(A=a.child,!xv(a,E)){var U=A.memoizedProps;if(d=d.compare,d=d!==null?d:Bh,d(U,y)&amp;&amp;a.ref===c.ref)return zo(a,c,E)}return c.flags|=1,a=Do(A,y),a.ref=c.ref,a.return=c,c.child=a}function hT(a,c,d,y,E){if(a!==null){var A=a.memoizedProps;if(Bh(A,y)&amp;&amp;a.ref===c.ref)if(Wi=!1,c.pendingProps=y=A,xv(a,E))(a.flags&amp;131072)!==0&amp;&amp;(Wi=!0);else return c.lanes=a.lanes,zo(a,c,E)}return pv(a,c,d,y,E)}function fT(a,c,d){var y=c.pendingProps,E=y.children,A=a!==null?a.memoizedState:null;if(y.mode===&quot;hidden&quot;){if((c.flags&amp;128)!==0){if(y=A!==null?A.baseLanes|d:d,a!==null){for(E=c.child=a.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;c.childLanes=A&amp;~y}else c.childLanes=0,c.child=null;return dT(a,c,y,d)}if((d&amp;536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&amp;&amp;gp(c,A!==null?A.cachePool:null),A!==null?hE(c,A):q_(),QE(c);else return c.lanes=c.childLanes=536870912,dT(a,c,A!==null?A.baseLanes|d:d,d)}else A!==null?(gp(c,A.cachePool),hE(c,A),Ia(),c.memoizedState=null):(a!==null&amp;&amp;gp(c,null),q_(),Ia());return tr(a,c,E,d),c.child}function dT(a,c,d,y){var E=H_();return E=E===null?null:{parent:Li._currentValue,pool:E},c.memoizedState={baseLanes:d,cachePool:E},a!==null&amp;&amp;gp(c,null),q_(),QE(c),a!==null&amp;&amp;Wh(a,c,y,!0),null}function Ip(a,c){var d=c.ref;if(d===null)a!==null&amp;&amp;a.ref!==null&amp;&amp;(c.flags|=4194816);else{if(typeof d!=&quot;function&quot;&amp;&amp;typeof d!=&quot;object&quot;)throw Error(i(284));(a===null||a.ref!==d)&amp;&amp;(c.flags|=4194816)}}function pv(a,c,d,y,E){return Vl(c),d=$_(a,c,d,y,void 0,E),y=Z_(),a!==null&amp;&amp;!Wi?(J_(a,c,E),zo(a,c,E)):(En&amp;&amp;y&amp;&amp;I_(c),c.flags|=1,tr(a,c,d,E),c.child)}function pT(a,c,d,y,E,A){return Vl(c),c.updateQueue=null,d=dE(c,y,d,E),fE(a),y=Z_(),a!==null&amp;&amp;!Wi?(J_(a,c,A),zo(a,c,A)):(En&amp;&amp;y&amp;&amp;I_(c),c.flags|=1,tr(a,c,d,A),c.child)}function mT(a,c,d,y,E){if(Vl(c),c.stateNode===null){var A=$c,U=d.contextType;typeof U==&quot;object&quot;&amp;&amp;U!==null&amp;&amp;(A=or(U)),A=new d(y,A),c.memoizedState=A.state!==null&amp;&amp;A.state!==void 0?A.state:null,A.updater=fv,c.stateNode=A,A._reactInternals=c,A=c.stateNode,A.props=y,A.state=c.memoizedState,A.refs={},G_(c),U=d.contextType,A.context=typeof U==&quot;object&quot;&amp;&amp;U!==null?or(U):$c,A.state=c.memoizedState,U=d.getDerivedStateFromProps,typeof U==&quot;function&quot;&amp;&amp;(hv(c,d,U,y),A.state=c.memoizedState),typeof d.getDerivedStateFromProps==&quot;function&quot;||typeof A.getSnapshotBeforeUpdate==&quot;function&quot;||typeof A.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof A.componentWillMount!=&quot;function&quot;||(U=A.state,typeof A.componentWillMount==&quot;function&quot;&amp;&amp;A.componentWillMount(),typeof A.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;A.UNSAFE_componentWillMount(),U!==A.state&amp;&amp;fv.enqueueReplaceState(A,A.state,null),Jh(c,y,A,E),Zh(),A.state=c.memoizedState),typeof A.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308),y=!0}else if(a===null){A=c.stateNode;var W=c.memoizedProps,se=Wl(d,W);A.props=se;var _e=A.context,Ne=d.contextType;U=$c,typeof Ne==&quot;object&quot;&amp;&amp;Ne!==null&amp;&amp;(U=or(Ne));var ke=d.getDerivedStateFromProps;Ne=typeof ke==&quot;function&quot;||typeof A.getSnapshotBeforeUpdate==&quot;function&quot;,W=c.pendingProps!==W,Ne||typeof A.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof A.componentWillReceiveProps!=&quot;function&quot;||(W||_e!==U)&amp;&amp;tT(c,A,y,U),Ca=!1;var xe=c.memoizedState;A.state=xe,Jh(c,y,A,E),Zh(),_e=c.memoizedState,W||xe!==_e||Ca?(typeof ke==&quot;function&quot;&amp;&amp;(hv(c,d,ke,y),_e=c.memoizedState),(se=Ca||eT(c,d,se,y,xe,_e,U))?(Ne||typeof A.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof A.componentWillMount!=&quot;function&quot;||(typeof A.componentWillMount==&quot;function&quot;&amp;&amp;A.componentWillMount(),typeof A.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;A.UNSAFE_componentWillMount()),typeof A.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308)):(typeof A.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=_e),A.props=y,A.state=_e,A.context=U,y=se):(typeof A.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308),y=!1)}else{A=c.stateNode,j_(a,c),U=c.memoizedProps,Ne=Wl(d,U),A.props=Ne,ke=c.pendingProps,xe=A.context,_e=d.contextType,se=$c,typeof _e==&quot;object&quot;&amp;&amp;_e!==null&amp;&amp;(se=or(_e)),W=d.getDerivedStateFromProps,(_e=typeof W==&quot;function&quot;||typeof A.getSnapshotBeforeUpdate==&quot;function&quot;)||typeof A.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof A.componentWillReceiveProps!=&quot;function&quot;||(U!==ke||xe!==se)&amp;&amp;tT(c,A,y,se),Ca=!1,xe=c.memoizedState,A.state=xe,Jh(c,y,A,E),Zh();var Ee=c.memoizedState;U!==ke||xe!==Ee||Ca||a!==null&amp;&amp;a.dependencies!==null&amp;&amp;pp(a.dependencies)?(typeof W==&quot;function&quot;&amp;&amp;(hv(c,d,W,y),Ee=c.memoizedState),(Ne=Ca||eT(c,d,Ne,y,xe,Ee,se)||a!==null&amp;&amp;a.dependencies!==null&amp;&amp;pp(a.dependencies))?(_e||typeof A.UNSAFE_componentWillUpdate!=&quot;function&quot;&amp;&amp;typeof A.componentWillUpdate!=&quot;function&quot;||(typeof A.componentWillUpdate==&quot;function&quot;&amp;&amp;A.componentWillUpdate(y,Ee,se),typeof A.UNSAFE_componentWillUpdate==&quot;function&quot;&amp;&amp;A.UNSAFE_componentWillUpdate(y,Ee,se)),typeof A.componentDidUpdate==&quot;function&quot;&amp;&amp;(c.flags|=4),typeof A.getSnapshotBeforeUpdate==&quot;function&quot;&amp;&amp;(c.flags|=1024)):(typeof A.componentDidUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Ee),A.props=y,A.state=Ee,A.context=se,y=Ne):(typeof A.componentDidUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=1024),y=!1)}return A=y,Ip(a,c),y=(c.flags&amp;128)!==0,A||y?(A=c.stateNode,d=y&amp;&amp;typeof d.getDerivedStateFromError!=&quot;function&quot;?null:A.render(),c.flags|=1,a!==null&amp;&amp;y?(c.child=ou(c,a.child,null,E),c.child=ou(c,null,d,E)):tr(a,c,d,E),c.memoizedState=A.state,a=c.child):a=zo(a,c,E),a}function gT(a,c,d,y){return Gh(),c.flags|=256,tr(a,c,d,y),c.child}var mv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gv(a){return{baseLanes:a,cachePool:iE()}}function yv(a,c,d){return a=a!==null?a.childLanes&amp;~d:0,c&amp;&amp;(a|=gs),a}function yT(a,c,d){var y=c.pendingProps,E=!1,A=(c.flags&amp;128)!==0,U;if((U=A)||(U=a!==null&amp;&amp;a.memoizedState===null?!1:(Ui.current&amp;2)!==0),U&amp;&amp;(E=!0,c.flags&amp;=-129),U=(c.flags&amp;32)!==0,c.flags&amp;=-33,a===null){if(En){if(E?Da(c):Ia(),En){var W=li,se;if(se=W){e:{for(se=W,W=so;se.nodeType!==8;){if(!W){W=null;break e}if(se=ks(se.nextSibling),se===null){W=null;break e}}W=se}W!==null?(c.memoizedState={dehydrated:W,treeContext:kl!==null?{id:Io,overflow:Po}:null,retryLane:536870912,hydrationErrors:null},se=Wr(18,null,null,0),se.stateNode=W,se.return=c,c.child=se,mr=c,li=null,se=!0):se=!1}se||Bl(c)}if(W=c.memoizedState,W!==null&amp;&amp;(W=W.dehydrated,W!==null))return eb(W)?c.lanes=32:c.lanes=536870912,null;Fo(c)}return W=y.children,y=y.fallback,E?(Ia(),E=c.mode,W=Pp({mode:&quot;hidden&quot;,children:W},E),y=Ul(y,E,d,null),W.return=c,y.return=c,W.sibling=y,c.child=W,E=c.child,E.memoizedState=gv(d),E.childLanes=yv(a,U,d),c.memoizedState=mv,y):(Da(c),_v(c,W))}if(se=a.memoizedState,se!==null&amp;&amp;(W=se.dehydrated,W!==null)){if(A)c.flags&amp;256?(Da(c),c.flags&amp;=-257,c=vv(a,c,d)):c.memoizedState!==null?(Ia(),c.child=a.child,c.flags|=128,c=null):(Ia(),E=y.fallback,W=c.mode,y=Pp({mode:&quot;visible&quot;,children:y.children},W),E=Ul(E,W,d,null),E.flags|=2,y.return=c,E.return=c,y.sibling=E,c.child=y,ou(c,a.child,null,d),y=c.child,y.memoizedState=gv(d),y.childLanes=yv(a,U,d),c.memoizedState=mv,c=E);else if(Da(c),eb(W)){if(U=W.nextSibling&amp;&amp;W.nextSibling.dataset,U)var _e=U.dgst;U=_e,y=Error(i(419)),y.stack=&quot;&quot;,y.digest=U,jh({value:y,source:null,stack:null}),c=vv(a,c,d)}else if(Wi||Wh(a,c,d,!1),U=(d&amp;a.childLanes)!==0,Wi||U){if(U=Vn,U!==null&amp;&amp;(y=d&amp;-d,y=(y&amp;42)!==0?1:wn(y),y=(y&amp;(U.suspendedLanes|d))!==0?0:y,y!==0&amp;&amp;y!==se.retryLane))throw se.retryLane=y,Kc(a,y),$r(U,a,y),lT;W.data===&quot;$?&quot;||kv(),c=vv(a,c,d)}else W.data===&quot;$?&quot;?(c.flags|=192,c.child=a.child,c=null):(a=se.treeContext,li=ks(W.nextSibling),mr=c,En=!0,zl=null,so=!1,a!==null&amp;&amp;(ds[ps++]=Io,ds[ps++]=Po,ds[ps++]=kl,Io=a.id,Po=a.overflow,kl=c),c=_v(c,y.children),c.flags|=4096);return c}return E?(Ia(),E=y.fallback,W=c.mode,se=a.child,_e=se.sibling,y=Do(se,{mode:&quot;hidden&quot;,children:y.children}),y.subtreeFlags=se.subtreeFlags&amp;65011712,_e!==null?E=Do(_e,E):(E=Ul(E,W,d,null),E.flags|=2),E.return=c,y.return=c,y.sibling=E,c.child=y,y=E,E=c.child,W=a.child.memoizedState,W===null?W=gv(d):(se=W.cachePool,se!==null?(_e=Li._currentValue,se=se.parent!==_e?{parent:_e,pool:_e}:se):se=iE(),W={baseLanes:W.baseLanes|d,cachePool:se}),E.memoizedState=W,E.childLanes=yv(a,U,d),c.memoizedState=mv,y):(Da(c),d=a.child,a=d.sibling,d=Do(d,{mode:&quot;visible&quot;,children:y.children}),d.return=c,d.sibling=null,a!==null&amp;&amp;(U=c.deletions,U===null?(c.deletions=[a],c.flags|=16):U.push(a)),c.child=d,c.memoizedState=null,d)}function _v(a,c){return c=Pp({mode:&quot;visible&quot;,children:c},a.mode),c.return=a,a.child=c}function Pp(a,c){return a=Wr(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function vv(a,c,d){return ou(c,a.child,null,d),a=_v(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function _T(a,c,d){a.lanes|=c;var y=a.alternate;y!==null&amp;&amp;(y.lanes|=c),k_(a.return,c,d)}function bv(a,c,d,y,E){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:E}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=y,A.tail=d,A.tailMode=E)}function vT(a,c,d){var y=c.pendingProps,E=y.revealOrder,A=y.tail;if(tr(a,c,y.children,d),y=Ui.current,(y&amp;2)!==0)y=y&amp;1|2,c.flags|=128;else{if(a!==null&amp;&amp;(a.flags&amp;128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&amp;&amp;_T(a,d,c);else if(a.tag===19)_T(a,d,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&amp;=1}switch(ce(Ui,y),E){case&quot;forwards&quot;:for(d=c.child,E=null;d!==null;)a=d.alternate,a!==null&amp;&amp;Op(a)===null&amp;&amp;(E=d),d=d.sibling;d=E,d===null?(E=c.child,c.child=null):(E=d.sibling,d.sibling=null),bv(c,!1,E,d,A);break;case&quot;backwards&quot;:for(d=null,E=c.child,c.child=null;E!==null;){if(a=E.alternate,a!==null&amp;&amp;Op(a)===null){c.child=E;break}a=E.sibling,E.sibling=d,d=E,E=a}bv(c,!0,d,null,A);break;case&quot;together&quot;:bv(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function zo(a,c,d){if(a!==null&amp;&amp;(c.dependencies=a.dependencies),Fa|=c.lanes,(d&amp;c.childLanes)===0)if(a!==null){if(Wh(a,c,d,!1),(d&amp;c.childLanes)===0)return null}else return null;if(a!==null&amp;&amp;c.child!==a.child)throw Error(i(153));if(c.child!==null){for(a=c.child,d=Do(a,a.pendingProps),c.child=d,d.return=c;a.sibling!==null;)a=a.sibling,d=d.sibling=Do(a,a.pendingProps),d.return=c;d.sibling=null}return c.child}function xv(a,c){return(a.lanes&amp;c)!==0?!0:(a=a.dependencies,!!(a!==null&amp;&amp;pp(a)))}function DU(a,c,d){switch(c.tag){case 3:ve(c,c.stateNode.containerInfo),Aa(c,Li,a.memoizedState.cache),Gh();break;case 27:case 5:Xe(c);break;case 4:ve(c,c.stateNode.containerInfo);break;case 10:Aa(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(Da(c),c.flags|=128,null):(d&amp;c.child.childLanes)!==0?yT(a,c,d):(Da(c),a=zo(a,c,d),a!==null?a.sibling:null);Da(c);break;case 19:var E=(a.flags&amp;128)!==0;if(y=(d&amp;c.childLanes)!==0,y||(Wh(a,c,d,!1),y=(d&amp;c.childLanes)!==0),E){if(y)return vT(a,c,d);c.flags|=128}if(E=c.memoizedState,E!==null&amp;&amp;(E.rendering=null,E.tail=null,E.lastEffect=null),ce(Ui,Ui.current),y)break;return null;case 22:case 23:return c.lanes=0,fT(a,c,d);case 24:Aa(c,Li,a.memoizedState.cache)}return zo(a,c,d)}function bT(a,c,d){if(a!==null)if(a.memoizedProps!==c.pendingProps)Wi=!0;else{if(!xv(a,d)&amp;&amp;(c.flags&amp;128)===0)return Wi=!1,DU(a,c,d);Wi=(a.flags&amp;131072)!==0}else Wi=!1,En&amp;&amp;(c.flags&amp;1048576)!==0&amp;&amp;$1(c,dp,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var y=c.elementType,E=y._init;if(y=E(y._payload),c.type=y,typeof y==&quot;function&quot;)O_(y)?(a=Wl(y,a),c.tag=1,c=mT(null,c,y,a,d)):(c.tag=0,c=pv(null,c,y,a,d));else{if(y!=null){if(E=y.$$typeof,E===S){c.tag=11,c=cT(null,c,y,a,d);break e}else if(E===M){c.tag=14,c=uT(null,c,y,a,d);break e}}throw c=z(y)||y,Error(i(306,c,&quot;&quot;))}}return c;case 0:return pv(a,c,c.type,c.pendingProps,d);case 1:return y=c.type,E=Wl(y,c.pendingProps),mT(a,c,y,E,d);case 3:e:{if(ve(c,c.stateNode.containerInfo),a===null)throw Error(i(387));y=c.pendingProps;var A=c.memoizedState;E=A.element,j_(a,c),Jh(c,y,null,d);var U=c.memoizedState;if(y=U.cache,Aa(c,Li,y),y!==A.cache&amp;&amp;F_(c,[Li],d,!0),Zh(),y=U.element,A.isDehydrated)if(A={element:y,isDehydrated:!1,cache:U.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&amp;256){c=gT(a,c,y,d);break e}else if(y!==E){E=hs(Error(i(424)),c),jh(E),c=gT(a,c,y,d);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName===&quot;HTML&quot;?a.ownerDocument.body:a}for(li=ks(a.firstChild),mr=c,En=!0,zl=null,so=!0,d=JE(c,null,y,d),c.child=d;d;)d.flags=d.flags&amp;-3|4096,d=d.sibling}else{if(Gh(),y===E){c=zo(a,c,d);break e}tr(a,c,y,d)}c=c.child}return c;case 26:return Ip(a,c),a===null?(d=EM(c.type,null,c.pendingProps,null))?c.memoizedState=d:En||(d=c.type,a=c.pendingProps,y=Yp(ae.current).createElement(d),y[Zn]=c,y[gi]=a,ir(y,d,a),Wn(y),c.stateNode=y):c.memoizedState=EM(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Xe(c),a===null&amp;&amp;En&amp;&amp;(y=c.stateNode=xM(c.type,c.pendingProps,ae.current),mr=c,so=!0,E=li,Va(c.type)?(tb=E,li=ks(y.firstChild)):li=E),tr(a,c,c.pendingProps.children,d),Ip(a,c),a===null&amp;&amp;(c.flags|=4194304),c.child;case 5:return a===null&amp;&amp;En&amp;&amp;((E=y=li)&amp;&amp;(y=ok(y,c.type,c.pendingProps,so),y!==null?(c.stateNode=y,mr=c,li=ks(y.firstChild),so=!1,E=!0):E=!1),E||Bl(c)),Xe(c),E=c.type,A=c.pendingProps,U=a!==null?a.memoizedProps:null,y=A.children,Zv(E,A)?y=null:U!==null&amp;&amp;Zv(E,U)&amp;&amp;(c.flags|=32),c.memoizedState!==null&amp;&amp;(E=$_(a,c,EU,null,null,d),xf._currentValue=E),Ip(a,c),tr(a,c,y,d),c.child;case 6:return a===null&amp;&amp;En&amp;&amp;((a=d=li)&amp;&amp;(d=ak(d,c.pendingProps,so),d!==null?(c.stateNode=d,mr=c,li=null,a=!0):a=!1),a||Bl(c)),null;case 13:return yT(a,c,d);case 4:return ve(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=ou(c,null,y,d):tr(a,c,y,d),c.child;case 11:return cT(a,c,c.type,c.pendingProps,d);case 7:return tr(a,c,c.pendingProps,d),c.child;case 8:return tr(a,c,c.pendingProps.children,d),c.child;case 12:return tr(a,c,c.pendingProps.children,d),c.child;case 10:return y=c.pendingProps,Aa(c,c.type,y.value),tr(a,c,y.children,d),c.child;case 9:return E=c.type._context,y=c.pendingProps.children,Vl(c),E=or(E),y=y(E),c.flags|=1,tr(a,c,y,d),c.child;case 14:return uT(a,c,c.type,c.pendingProps,d);case 15:return hT(a,c,c.type,c.pendingProps,d);case 19:return vT(a,c,d);case 31:return y=c.pendingProps,d=c.mode,y={mode:y.mode,children:y.children},a===null?(d=Pp(y,d),d.ref=c.ref,c.child=d,d.return=c,c=d):(d=Do(a.child,y),d.ref=c.ref,c.child=d,d.return=c,c=d),c;case 22:return fT(a,c,d);case 24:return Vl(c),y=or(Li),a===null?(E=H_(),E===null&amp;&amp;(E=Vn,A=z_(),E.pooledCache=A,A.refCount++,A!==null&amp;&amp;(E.pooledCacheLanes|=d),E=A),c.memoizedState={parent:y,cache:E},G_(c),Aa(c,Li,E)):((a.lanes&amp;d)!==0&amp;&amp;(j_(a,c),Jh(c,null,null,d),Zh()),E=a.memoizedState,A=c.memoizedState,E.parent!==y?(E={parent:y,cache:y},c.memoizedState=E,c.lanes===0&amp;&amp;(c.memoizedState=c.updateQueue.baseState=E),Aa(c,Li,y)):(y=A.cache,Aa(c,Li,y),y!==E.cache&amp;&amp;F_(c,[Li],d,!0))),tr(a,c,c.pendingProps.children,d),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Bo(a){a.flags|=4}function xT(a,c){if(c.type!==&quot;stylesheet&quot;||(c.state.loading&amp;4)!==0)a.flags&amp;=-16777217;else if(a.flags|=16777216,!RM(c)){if(c=ms.current,c!==null&amp;&amp;((pn&amp;4194048)===pn?oo!==null:(pn&amp;62914560)!==pn&amp;&amp;(pn&amp;536870912)===0||c!==oo))throw Kh=V_,rE;a.flags|=8192}}function Lp(a,c){c!==null&amp;&amp;(a.flags|=4),a.flags&amp;16384&amp;&amp;(c=a.tag!==22?nt():536870912,a.lanes|=c,uu|=c)}function of(a,c){if(!En)switch(a.tailMode){case&quot;hidden&quot;:c=a.tail;for(var d=null;c!==null;)c.alternate!==null&amp;&amp;(d=c),c=c.sibling;d===null?a.tail=null:d.sibling=null;break;case&quot;collapsed&quot;:d=a.tail;for(var y=null;d!==null;)d.alternate!==null&amp;&amp;(y=d),d=d.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function ti(a){var c=a.alternate!==null&amp;&amp;a.alternate.child===a.child,d=0,y=0;if(c)for(var E=a.child;E!==null;)d|=E.lanes|E.childLanes,y|=E.subtreeFlags&amp;65011712,y|=E.flags&amp;65011712,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)d|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=y,a.childLanes=d,c}function IU(a,c,d){var y=c.pendingProps;switch(P_(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(c),null;case 1:return ti(c),null;case 3:return d=c.stateNode,y=null,a!==null&amp;&amp;(y=a.memoizedState.cache),c.memoizedState.cache!==y&amp;&amp;(c.flags|=2048),Uo(Li),He(),d.pendingContext&amp;&amp;(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&amp;&amp;(Vh(c)?Bo(c):a===null||a.memoizedState.isDehydrated&amp;&amp;(c.flags&amp;256)===0||(c.flags|=1024,Q1())),ti(c),null;case 26:return d=c.memoizedState,a===null?(Bo(c),d!==null?(ti(c),xT(c,d)):(ti(c),c.flags&amp;=-16777217)):d?d!==a.memoizedState?(Bo(c),ti(c),xT(c,d)):(ti(c),c.flags&amp;=-16777217):(a.memoizedProps!==y&amp;&amp;Bo(c),ti(c),c.flags&amp;=-16777217),null;case 27:ct(c),d=ae.current;var E=c.type;if(a!==null&amp;&amp;c.stateNode!=null)a.memoizedProps!==y&amp;&amp;Bo(c);else{if(!y){if(c.stateNode===null)throw Error(i(166));return ti(c),null}a=ie.current,Vh(c)?Z1(c):(a=xM(E,y,d),c.stateNode=a,Bo(c))}return ti(c),null;case 5:if(ct(c),d=c.type,a!==null&amp;&amp;c.stateNode!=null)a.memoizedProps!==y&amp;&amp;Bo(c);else{if(!y){if(c.stateNode===null)throw Error(i(166));return ti(c),null}if(a=ie.current,Vh(c))Z1(c);else{switch(E=Yp(ae.current),a){case 1:a=E.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,d);break;case 2:a=E.createElementNS(&quot;http://www.w3.org/1998/Math/MathML&quot;,d);break;default:switch(d){case&quot;svg&quot;:a=E.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,d);break;case&quot;math&quot;:a=E.createElementNS(&quot;http://www.w3.org/1998/Math/MathML&quot;,d);break;case&quot;script&quot;:a=E.createElement(&quot;div&quot;),a.innerHTML=&quot;&lt;script&gt;&lt;\/script&gt;&quot;,a=a.removeChild(a.firstChild);break;case&quot;select&quot;:a=typeof y.is==&quot;string&quot;?E.createElement(&quot;select&quot;,{is:y.is}):E.createElement(&quot;select&quot;),y.multiple?a.multiple=!0:y.size&amp;&amp;(a.size=y.size);break;default:a=typeof y.is==&quot;string&quot;?E.createElement(d,{is:y.is}):E.createElement(d)}}a[Zn]=c,a[gi]=y;e:for(E=c.child;E!==null;){if(E.tag===5||E.tag===6)a.appendChild(E.stateNode);else if(E.tag!==4&amp;&amp;E.tag!==27&amp;&amp;E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break e;for(;E.sibling===null;){if(E.return===null||E.return===c)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}c.stateNode=a;e:switch(ir(a,d,y),d){case&quot;button&quot;:case&quot;input&quot;:case&quot;select&quot;:case&quot;textarea&quot;:a=!!y.autoFocus;break e;case&quot;img&quot;:a=!0;break e;default:a=!1}a&amp;&amp;Bo(c)}}return ti(c),c.flags&amp;=-16777217,null;case 6:if(a&amp;&amp;c.stateNode!=null)a.memoizedProps!==y&amp;&amp;Bo(c);else{if(typeof y!=&quot;string&quot;&amp;&amp;c.stateNode===null)throw Error(i(166));if(a=ae.current,Vh(c)){if(a=c.stateNode,d=c.memoizedProps,y=null,E=mr,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}a[Zn]=c,a=!!(a.nodeValue===d||y!==null&amp;&amp;y.suppressHydrationWarning===!0||pM(a.nodeValue,d)),a||Bl(c)}else a=Yp(a).createTextNode(y),a[Zn]=c,c.stateNode=a}return ti(c),null;case 13:if(y=c.memoizedState,a===null||a.memoizedState!==null&amp;&amp;a.memoizedState.dehydrated!==null){if(E=Vh(c),y!==null&amp;&amp;y.dehydrated!==null){if(a===null){if(!E)throw Error(i(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[Zn]=c}else Gh(),(c.flags&amp;128)===0&amp;&amp;(c.memoizedState=null),c.flags|=4;ti(c),E=!1}else E=Q1(),a!==null&amp;&amp;a.memoizedState!==null&amp;&amp;(a.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&amp;256?(Fo(c),c):(Fo(c),null)}if(Fo(c),(c.flags&amp;128)!==0)return c.lanes=d,c;if(d=y!==null,a=a!==null&amp;&amp;a.memoizedState!==null,d){y=c.child,E=null,y.alternate!==null&amp;&amp;y.alternate.memoizedState!==null&amp;&amp;y.alternate.memoizedState.cachePool!==null&amp;&amp;(E=y.alternate.memoizedState.cachePool.pool);var A=null;y.memoizedState!==null&amp;&amp;y.memoizedState.cachePool!==null&amp;&amp;(A=y.memoizedState.cachePool.pool),A!==E&amp;&amp;(y.flags|=2048)}return d!==a&amp;&amp;d&amp;&amp;(c.child.flags|=8192),Lp(c,c.updateQueue),ti(c),null;case 4:return He(),a===null&amp;&amp;Xv(c.stateNode.containerInfo),ti(c),null;case 10:return Uo(c.type),ti(c),null;case 19:if(le(Ui),E=c.memoizedState,E===null)return ti(c),null;if(y=(c.flags&amp;128)!==0,A=E.rendering,A===null)if(y)of(E,!1);else{if(ci!==0||a!==null&amp;&amp;(a.flags&amp;128)!==0)for(a=c.child;a!==null;){if(A=Op(a),A!==null){for(c.flags|=128,of(E,!1),a=A.updateQueue,c.updateQueue=a,Lp(c,a),c.subtreeFlags=0,a=d,d=c.child;d!==null;)K1(d,a),d=d.sibling;return ce(Ui,Ui.current&amp;1|2),c.child}a=a.sibling}E.tail!==null&amp;&amp;Fe()&gt;Fp&amp;&amp;(c.flags|=128,y=!0,of(E,!1),c.lanes=4194304)}else{if(!y)if(a=Op(A),a!==null){if(c.flags|=128,y=!0,a=a.updateQueue,c.updateQueue=a,Lp(c,a),of(E,!0),E.tail===null&amp;&amp;E.tailMode===&quot;hidden&quot;&amp;&amp;!A.alternate&amp;&amp;!En)return ti(c),null}else 2*Fe()-E.renderingStartTime&gt;Fp&amp;&amp;d!==536870912&amp;&amp;(c.flags|=128,y=!0,of(E,!1),c.lanes=4194304);E.isBackwards?(A.sibling=c.child,c.child=A):(a=E.last,a!==null?a.sibling=A:c.child=A,E.last=A)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=Fe(),c.sibling=null,a=Ui.current,ce(Ui,y?a&amp;1|2:a&amp;1),c):(ti(c),null);case 22:case 23:return Fo(c),Y_(),y=c.memoizedState!==null,a!==null?a.memoizedState!==null!==y&amp;&amp;(c.flags|=8192):y&amp;&amp;(c.flags|=8192),y?(d&amp;536870912)!==0&amp;&amp;(c.flags&amp;128)===0&amp;&amp;(ti(c),c.subtreeFlags&amp;6&amp;&amp;(c.flags|=8192)):ti(c),d=c.updateQueue,d!==null&amp;&amp;Lp(c,d.retryQueue),d=null,a!==null&amp;&amp;a.memoizedState!==null&amp;&amp;a.memoizedState.cachePool!==null&amp;&amp;(d=a.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&amp;&amp;c.memoizedState.cachePool!==null&amp;&amp;(y=c.memoizedState.cachePool.pool),y!==d&amp;&amp;(c.flags|=2048),a!==null&amp;&amp;le(Gl),null;case 24:return d=null,a!==null&amp;&amp;(d=a.memoizedState.cache),c.memoizedState.cache!==d&amp;&amp;(c.flags|=2048),Uo(Li),ti(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function PU(a,c){switch(P_(c),c.tag){case 1:return a=c.flags,a&amp;65536?(c.flags=a&amp;-65537|128,c):null;case 3:return Uo(Li),He(),a=c.flags,(a&amp;65536)!==0&amp;&amp;(a&amp;128)===0?(c.flags=a&amp;-65537|128,c):null;case 26:case 27:case 5:return ct(c),null;case 13:if(Fo(c),a=c.memoizedState,a!==null&amp;&amp;a.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Gh()}return a=c.flags,a&amp;65536?(c.flags=a&amp;-65537|128,c):null;case 19:return le(Ui),null;case 4:return He(),null;case 10:return Uo(c.type),null;case 22:case 23:return Fo(c),Y_(),a!==null&amp;&amp;le(Gl),a=c.flags,a&amp;65536?(c.flags=a&amp;-65537|128,c):null;case 24:return Uo(Li),null;case 25:return null;default:return null}}function ST(a,c){switch(P_(c),c.tag){case 3:Uo(Li),He();break;case 26:case 27:case 5:ct(c);break;case 4:He();break;case 13:Fo(c);break;case 19:le(Ui);break;case 10:Uo(c.type);break;case 22:case 23:Fo(c),Y_(),a!==null&amp;&amp;le(Gl);break;case 24:Uo(Li)}}function af(a,c){try{var d=c.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var E=y.next;d=E;do{if((d.tag&amp;a)===a){y=void 0;var A=d.create,U=d.inst;y=A(),U.destroy=y}d=d.next}while(d!==E)}}catch(W){zn(c,c.return,W)}}function Pa(a,c,d){try{var y=c.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var A=E.next;y=A;do{if((y.tag&amp;a)===a){var U=y.inst,W=U.destroy;if(W!==void 0){U.destroy=void 0,E=c;var se=d,_e=W;try{_e()}catch(Ne){zn(E,se,Ne)}}}y=y.next}while(y!==A)}}catch(Ne){zn(c,c.return,Ne)}}function wT(a){var c=a.updateQueue;if(c!==null){var d=a.stateNode;try{uE(c,d)}catch(y){zn(a,a.return,y)}}}function ET(a,c,d){d.props=Wl(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(y){zn(a,c,y)}}function lf(a,c){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof d==&quot;function&quot;?a.refCleanup=d(y):d.current=y}}catch(E){zn(a,c,E)}}function ao(a,c){var d=a.ref,y=a.refCleanup;if(d!==null)if(typeof y==&quot;function&quot;)try{y()}catch(E){zn(a,c,E)}finally{a.refCleanup=null,a=a.alternate,a!=null&amp;&amp;(a.refCleanup=null)}else if(typeof d==&quot;function&quot;)try{d(null)}catch(E){zn(a,c,E)}else d.current=null}function TT(a){var c=a.type,d=a.memoizedProps,y=a.stateNode;try{e:switch(c){case&quot;button&quot;:case&quot;input&quot;:case&quot;select&quot;:case&quot;textarea&quot;:d.autoFocus&amp;&amp;y.focus();break e;case&quot;img&quot;:d.src?y.src=d.src:d.srcSet&amp;&amp;(y.srcset=d.srcSet)}}catch(E){zn(a,a.return,E)}}function Sv(a,c,d){try{var y=a.stateNode;tk(y,a.type,d,c),y[gi]=c}catch(E){zn(a,a.return,E)}}function MT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&amp;&amp;Va(a.type)||a.tag===4}function wv(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||MT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&amp;&amp;a.tag!==6&amp;&amp;a.tag!==18;){if(a.tag===27&amp;&amp;Va(a.type)||a.flags&amp;2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&amp;2))return a.stateNode}}function Ev(a,c,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?(d.nodeType===9?d.body:d.nodeName===&quot;HTML&quot;?d.ownerDocument.body:d).insertBefore(a,c):(c=d.nodeType===9?d.body:d.nodeName===&quot;HTML&quot;?d.ownerDocument.body:d,c.appendChild(a),d=d._reactRootContainer,d!=null||c.onclick!==null||(c.onclick=qp));else if(y!==4&amp;&amp;(y===27&amp;&amp;Va(a.type)&amp;&amp;(d=a.stateNode,c=null),a=a.child,a!==null))for(Ev(a,c,d),a=a.sibling;a!==null;)Ev(a,c,d),a=a.sibling}function Up(a,c,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?d.insertBefore(a,c):d.appendChild(a);else if(y!==4&amp;&amp;(y===27&amp;&amp;Va(a.type)&amp;&amp;(d=a.stateNode),a=a.child,a!==null))for(Up(a,c,d),a=a.sibling;a!==null;)Up(a,c,d),a=a.sibling}function AT(a){var c=a.stateNode,d=a.memoizedProps;try{for(var y=a.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);ir(c,y,d),c[Zn]=a,c[gi]=d}catch(A){zn(a,a.return,A)}}var Ho=!1,vi=!1,Tv=!1,CT=typeof WeakSet==&quot;function&quot;?WeakSet:Set,Xi=null;function LU(a,c){if(a=a.containerInfo,Kv=em,a=z1(a),w_(a)){if(&quot;selectionStart&quot;in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&amp;&amp;d.defaultView||window;var y=d.getSelection&amp;&amp;d.getSelection();if(y&amp;&amp;y.rangeCount!==0){d=y.anchorNode;var E=y.anchorOffset,A=y.focusNode;y=y.focusOffset;try{d.nodeType,A.nodeType}catch{d=null;break e}var U=0,W=-1,se=-1,_e=0,Ne=0,ke=a,xe=null;t:for(;;){for(var Ee;ke!==d||E!==0&amp;&amp;ke.nodeType!==3||(W=U+E),ke!==A||y!==0&amp;&amp;ke.nodeType!==3||(se=U+y),ke.nodeType===3&amp;&amp;(U+=ke.nodeValue.length),(Ee=ke.firstChild)!==null;)xe=ke,ke=Ee;for(;;){if(ke===a)break t;if(xe===d&amp;&amp;++_e===E&amp;&amp;(W=U),xe===A&amp;&amp;++Ne===y&amp;&amp;(se=U),(Ee=ke.nextSibling)!==null)break;ke=xe,xe=ke.parentNode}ke=Ee}d=W===-1||se===-1?null:{start:W,end:se}}else d=null}d=d||{start:0,end:0}}else d=null;for($v={focusedElem:a,selectionRange:d},em=!1,Xi=c;Xi!==null;)if(c=Xi,a=c.child,(c.subtreeFlags&amp;1024)!==0&amp;&amp;a!==null)a.return=c,Xi=a;else for(;Xi!==null;){switch(c=Xi,A=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&amp;1024)!==0&amp;&amp;A!==null){a=void 0,d=c,E=A.memoizedProps,A=A.memoizedState,y=d.stateNode;try{var kt=Wl(d.type,E,d.elementType===d.type);a=y.getSnapshotBeforeUpdate(kt,A),y.__reactInternalSnapshotBeforeUpdate=a}catch(Dt){zn(d,d.return,Dt)}}break;case 3:if((a&amp;1024)!==0){if(a=c.stateNode.containerInfo,d=a.nodeType,d===9)Qv(a);else if(d===1)switch(a.nodeName){case&quot;HEAD&quot;:case&quot;HTML&quot;:case&quot;BODY&quot;:Qv(a);break;default:a.textContent=&quot;&quot;}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&amp;1024)!==0)throw Error(i(163))}if(a=c.sibling,a!==null){a.return=c.return,Xi=a;break}Xi=c.return}}function RT(a,c,d){var y=d.flags;switch(d.tag){case 0:case 11:case 15:La(a,d),y&amp;4&amp;&amp;af(5,d);break;case 1:if(La(a,d),y&amp;4)if(a=d.stateNode,c===null)try{a.componentDidMount()}catch(U){zn(d,d.return,U)}else{var E=Wl(d.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(E,c,a.__reactInternalSnapshotBeforeUpdate)}catch(U){zn(d,d.return,U)}}y&amp;64&amp;&amp;wT(d),y&amp;512&amp;&amp;lf(d,d.return);break;case 3:if(La(a,d),y&amp;64&amp;&amp;(a=d.updateQueue,a!==null)){if(c=null,d.child!==null)switch(d.child.tag){case 27:case 5:c=d.child.stateNode;break;case 1:c=d.child.stateNode}try{uE(a,c)}catch(U){zn(d,d.return,U)}}break;case 27:c===null&amp;&amp;y&amp;4&amp;&amp;AT(d);case 26:case 5:La(a,d),c===null&amp;&amp;y&amp;4&amp;&amp;TT(d),y&amp;512&amp;&amp;lf(d,d.return);break;case 12:La(a,d);break;case 13:La(a,d),y&amp;4&amp;&amp;DT(a,d),y&amp;64&amp;&amp;(a=d.memoizedState,a!==null&amp;&amp;(a=a.dehydrated,a!==null&amp;&amp;(d=jU.bind(null,d),lk(a,d))));break;case 22:if(y=d.memoizedState!==null||Ho,!y){c=c!==null&amp;&amp;c.memoizedState!==null||vi,E=Ho;var A=vi;Ho=y,(vi=c)&amp;&amp;!A?Ua(a,d,(d.subtreeFlags&amp;8772)!==0):La(a,d),Ho=E,vi=A}break;case 30:break;default:La(a,d)}}function OT(a){var c=a.alternate;c!==null&amp;&amp;(a.alternate=null,OT(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&amp;&amp;(c=a.stateNode,c!==null&amp;&amp;cs(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Xn=null,Nr=!1;function Vo(a,c,d){for(d=d.child;d!==null;)NT(a,c,d),d=d.sibling}function NT(a,c,d){if(Ze&amp;&amp;typeof Ze.onCommitFiberUnmount==&quot;function&quot;)try{Ze.onCommitFiberUnmount(Me,d)}catch{}switch(d.tag){case 26:vi||ao(d,c),Vo(a,c,d),d.memoizedState?d.memoizedState.count--:d.stateNode&amp;&amp;(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:vi||ao(d,c);var y=Xn,E=Nr;Va(d.type)&amp;&amp;(Xn=d.stateNode,Nr=!1),Vo(a,c,d),yf(d.stateNode),Xn=y,Nr=E;break;case 5:vi||ao(d,c);case 6:if(y=Xn,E=Nr,Xn=null,Vo(a,c,d),Xn=y,Nr=E,Xn!==null)if(Nr)try{(Xn.nodeType===9?Xn.body:Xn.nodeName===&quot;HTML&quot;?Xn.ownerDocument.body:Xn).removeChild(d.stateNode)}catch(A){zn(d,c,A)}else try{Xn.removeChild(d.stateNode)}catch(A){zn(d,c,A)}break;case 18:Xn!==null&amp;&amp;(Nr?(a=Xn,vM(a.nodeType===9?a.body:a.nodeName===&quot;HTML&quot;?a.ownerDocument.body:a,d.stateNode),Tf(a)):vM(Xn,d.stateNode));break;case 4:y=Xn,E=Nr,Xn=d.stateNode.containerInfo,Nr=!0,Vo(a,c,d),Xn=y,Nr=E;break;case 0:case 11:case 14:case 15:vi||Pa(2,d,c),vi||Pa(4,d,c),Vo(a,c,d);break;case 1:vi||(ao(d,c),y=d.stateNode,typeof y.componentWillUnmount==&quot;function&quot;&amp;&amp;ET(d,c,y)),Vo(a,c,d);break;case 21:Vo(a,c,d);break;case 22:vi=(y=vi)||d.memoizedState!==null,Vo(a,c,d),vi=y;break;default:Vo(a,c,d)}}function DT(a,c){if(c.memoizedState===null&amp;&amp;(a=c.alternate,a!==null&amp;&amp;(a=a.memoizedState,a!==null&amp;&amp;(a=a.dehydrated,a!==null))))try{Tf(a)}catch(d){zn(c,c.return,d)}}function UU(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&amp;&amp;(c=a.stateNode=new CT),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&amp;&amp;(c=a._retryCache=new CT),c;default:throw Error(i(435,a.tag))}}function Mv(a,c){var d=UU(a);c.forEach(function(y){var E=WU.bind(null,a,y);d.has(y)||(d.add(y),y.then(E,E))})}function Xr(a,c){var d=c.deletions;if(d!==null)for(var y=0;y&lt;d.length;y++){var E=d[y],A=a,U=c,W=U;e:for(;W!==null;){switch(W.tag){case 27:if(Va(W.type)){Xn=W.stateNode,Nr=!1;break e}break;case 5:Xn=W.stateNode,Nr=!1;break e;case 3:case 4:Xn=W.stateNode.containerInfo,Nr=!0;break e}W=W.return}if(Xn===null)throw Error(i(160));NT(A,U,E),Xn=null,Nr=!1,A=E.alternate,A!==null&amp;&amp;(A.return=null),E.return=null}if(c.subtreeFlags&amp;13878)for(c=c.child;c!==null;)IT(c,a),c=c.sibling}var Us=null;function IT(a,c){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Xr(c,a),qr(a),y&amp;4&amp;&amp;(Pa(3,a,a.return),af(3,a),Pa(5,a,a.return));break;case 1:Xr(c,a),qr(a),y&amp;512&amp;&amp;(vi||d===null||ao(d,d.return)),y&amp;64&amp;&amp;Ho&amp;&amp;(a=a.updateQueue,a!==null&amp;&amp;(y=a.callbacks,y!==null&amp;&amp;(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?y:d.concat(y))));break;case 26:var E=Us;if(Xr(c,a),qr(a),y&amp;512&amp;&amp;(vi||d===null||ao(d,d.return)),y&amp;4){var A=d!==null?d.memoizedState:null;if(y=a.memoizedState,d===null)if(y===null)if(a.stateNode===null){e:{y=a.type,d=a.memoizedProps,E=E.ownerDocument||E;t:switch(y){case&quot;title&quot;:A=E.getElementsByTagName(&quot;title&quot;)[0],(!A||A[Hr]||A[Zn]||A.namespaceURI===&quot;http://www.w3.org/2000/svg&quot;||A.hasAttribute(&quot;itemprop&quot;))&amp;&amp;(A=E.createElement(y),E.head.insertBefore(A,E.querySelector(&quot;head &gt; title&quot;))),ir(A,y,d),A[Zn]=a,Wn(A),y=A;break e;case&quot;link&quot;:var U=AM(&quot;link&quot;,&quot;href&quot;,E).get(y+(d.href||&quot;&quot;));if(U){for(var W=0;W&lt;U.length;W++)if(A=U[W],A.getAttribute(&quot;href&quot;)===(d.href==null||d.href===&quot;&quot;?null:d.href)&amp;&amp;A.getAttribute(&quot;rel&quot;)===(d.rel==null?null:d.rel)&amp;&amp;A.getAttribute(&quot;title&quot;)===(d.title==null?null:d.title)&amp;&amp;A.getAttribute(&quot;crossorigin&quot;)===(d.crossOrigin==null?null:d.crossOrigin)){U.splice(W,1);break t}}A=E.createElement(y),ir(A,y,d),E.head.appendChild(A);break;case&quot;meta&quot;:if(U=AM(&quot;meta&quot;,&quot;content&quot;,E).get(y+(d.content||&quot;&quot;))){for(W=0;W&lt;U.length;W++)if(A=U[W],A.getAttribute(&quot;content&quot;)===(d.content==null?null:&quot;&quot;+d.content)&amp;&amp;A.getAttribute(&quot;name&quot;)===(d.name==null?null:d.name)&amp;&amp;A.getAttribute(&quot;property&quot;)===(d.property==null?null:d.property)&amp;&amp;A.getAttribute(&quot;http-equiv&quot;)===(d.httpEquiv==null?null:d.httpEquiv)&amp;&amp;A.getAttribute(&quot;charset&quot;)===(d.charSet==null?null:d.charSet)){U.splice(W,1);break t}}A=E.createElement(y),ir(A,y,d),E.head.appendChild(A);break;default:throw Error(i(468,y))}A[Zn]=a,Wn(A),y=A}a.stateNode=y}else CM(E,a.type,a.stateNode);else a.stateNode=MM(E,y,a.memoizedProps);else A!==y?(A===null?d.stateNode!==null&amp;&amp;(d=d.stateNode,d.parentNode.removeChild(d)):A.count--,y===null?CM(E,a.type,a.stateNode):MM(E,y,a.memoizedProps)):y===null&amp;&amp;a.stateNode!==null&amp;&amp;Sv(a,a.memoizedProps,d.memoizedProps)}break;case 27:Xr(c,a),qr(a),y&amp;512&amp;&amp;(vi||d===null||ao(d,d.return)),d!==null&amp;&amp;y&amp;4&amp;&amp;Sv(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Xr(c,a),qr(a),y&amp;512&amp;&amp;(vi||d===null||ao(d,d.return)),a.flags&amp;32){E=a.stateNode;try{Gr(E,&quot;&quot;)}catch(Ee){zn(a,a.return,Ee)}}y&amp;4&amp;&amp;a.stateNode!=null&amp;&amp;(E=a.memoizedProps,Sv(a,E,d!==null?d.memoizedProps:E)),y&amp;1024&amp;&amp;(Tv=!0);break;case 6:if(Xr(c,a),qr(a),y&amp;4){if(a.stateNode===null)throw Error(i(162));y=a.memoizedProps,d=a.stateNode;try{d.nodeValue=y}catch(Ee){zn(a,a.return,Ee)}}break;case 3:if(Zp=null,E=Us,Us=Kp(c.containerInfo),Xr(c,a),Us=E,qr(a),y&amp;4&amp;&amp;d!==null&amp;&amp;d.memoizedState.isDehydrated)try{Tf(c.containerInfo)}catch(Ee){zn(a,a.return,Ee)}Tv&amp;&amp;(Tv=!1,PT(a));break;case 4:y=Us,Us=Kp(a.stateNode.containerInfo),Xr(c,a),qr(a),Us=y;break;case 12:Xr(c,a),qr(a);break;case 13:Xr(c,a),qr(a),a.child.flags&amp;8192&amp;&amp;a.memoizedState!==null!=(d!==null&amp;&amp;d.memoizedState!==null)&amp;&amp;(Dv=Fe()),y&amp;4&amp;&amp;(y=a.updateQueue,y!==null&amp;&amp;(a.updateQueue=null,Mv(a,y)));break;case 22:E=a.memoizedState!==null;var se=d!==null&amp;&amp;d.memoizedState!==null,_e=Ho,Ne=vi;if(Ho=_e||E,vi=Ne||se,Xr(c,a),vi=Ne,Ho=_e,qr(a),y&amp;8192)e:for(c=a.stateNode,c._visibility=E?c._visibility&amp;-2:c._visibility|1,E&amp;&amp;(d===null||se||Ho||vi||Xl(a)),d=null,c=a;;){if(c.tag===5||c.tag===26){if(d===null){se=d=c;try{if(A=se.stateNode,E)U=A.style,typeof U.setProperty==&quot;function&quot;?U.setProperty(&quot;display&quot;,&quot;none&quot;,&quot;important&quot;):U.display=&quot;none&quot;;else{W=se.stateNode;var ke=se.memoizedProps.style,xe=ke!=null&amp;&amp;ke.hasOwnProperty(&quot;display&quot;)?ke.display:null;W.style.display=xe==null||typeof xe==&quot;boolean&quot;?&quot;&quot;:(&quot;&quot;+xe).trim()}}catch(Ee){zn(se,se.return,Ee)}}}else if(c.tag===6){if(d===null){se=c;try{se.stateNode.nodeValue=E?&quot;&quot;:se.memoizedProps}catch(Ee){zn(se,se.return,Ee)}}}else if((c.tag!==22&amp;&amp;c.tag!==23||c.memoizedState===null||c===a)&amp;&amp;c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;d===c&amp;&amp;(d=null),c=c.return}d===c&amp;&amp;(d=null),c.sibling.return=c.return,c=c.sibling}y&amp;4&amp;&amp;(y=a.updateQueue,y!==null&amp;&amp;(d=y.retryQueue,d!==null&amp;&amp;(y.retryQueue=null,Mv(a,d))));break;case 19:Xr(c,a),qr(a),y&amp;4&amp;&amp;(y=a.updateQueue,y!==null&amp;&amp;(a.updateQueue=null,Mv(a,y)));break;case 30:break;case 21:break;default:Xr(c,a),qr(a)}}function qr(a){var c=a.flags;if(c&amp;2){try{for(var d,y=a.return;y!==null;){if(MT(y)){d=y;break}y=y.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var E=d.stateNode,A=wv(a);Up(a,A,E);break;case 5:var U=d.stateNode;d.flags&amp;32&amp;&amp;(Gr(U,&quot;&quot;),d.flags&amp;=-33);var W=wv(a);Up(a,W,U);break;case 3:case 4:var se=d.stateNode.containerInfo,_e=wv(a);Ev(a,_e,se);break;default:throw Error(i(161))}}catch(Ne){zn(a,a.return,Ne)}a.flags&amp;=-3}c&amp;4096&amp;&amp;(a.flags&amp;=-4097)}function PT(a){if(a.subtreeFlags&amp;1024)for(a=a.child;a!==null;){var c=a;PT(c),c.tag===5&amp;&amp;c.flags&amp;1024&amp;&amp;c.stateNode.reset(),a=a.sibling}}function La(a,c){if(c.subtreeFlags&amp;8772)for(c=c.child;c!==null;)RT(a,c.alternate,c),c=c.sibling}function Xl(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Pa(4,c,c.return),Xl(c);break;case 1:ao(c,c.return);var d=c.stateNode;typeof d.componentWillUnmount==&quot;function&quot;&amp;&amp;ET(c,c.return,d),Xl(c);break;case 27:yf(c.stateNode);case 26:case 5:ao(c,c.return),Xl(c);break;case 22:c.memoizedState===null&amp;&amp;Xl(c);break;case 30:Xl(c);break;default:Xl(c)}a=a.sibling}}function Ua(a,c,d){for(d=d&amp;&amp;(c.subtreeFlags&amp;8772)!==0,c=c.child;c!==null;){var y=c.alternate,E=a,A=c,U=A.flags;switch(A.tag){case 0:case 11:case 15:Ua(E,A,d),af(4,A);break;case 1:if(Ua(E,A,d),y=A,E=y.stateNode,typeof E.componentDidMount==&quot;function&quot;)try{E.componentDidMount()}catch(_e){zn(y,y.return,_e)}if(y=A,E=y.updateQueue,E!==null){var W=y.stateNode;try{var se=E.shared.hiddenCallbacks;if(se!==null)for(E.shared.hiddenCallbacks=null,E=0;E&lt;se.length;E++)cE(se[E],W)}catch(_e){zn(y,y.return,_e)}}d&amp;&amp;U&amp;64&amp;&amp;wT(A),lf(A,A.return);break;case 27:AT(A);case 26:case 5:Ua(E,A,d),d&amp;&amp;y===null&amp;&amp;U&amp;4&amp;&amp;TT(A),lf(A,A.return);break;case 12:Ua(E,A,d);break;case 13:Ua(E,A,d),d&amp;&amp;U&amp;4&amp;&amp;DT(E,A);break;case 22:A.memoizedState===null&amp;&amp;Ua(E,A,d),lf(A,A.return);break;case 30:break;default:Ua(E,A,d)}c=c.sibling}}function Av(a,c){var d=null;a!==null&amp;&amp;a.memoizedState!==null&amp;&amp;a.memoizedState.cachePool!==null&amp;&amp;(d=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&amp;&amp;c.memoizedState.cachePool!==null&amp;&amp;(a=c.memoizedState.cachePool.pool),a!==d&amp;&amp;(a!=null&amp;&amp;a.refCount++,d!=null&amp;&amp;Xh(d))}function Cv(a,c){a=null,c.alternate!==null&amp;&amp;(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&amp;&amp;(c.refCount++,a!=null&amp;&amp;Xh(a))}function lo(a,c,d,y){if(c.subtreeFlags&amp;10256)for(c=c.child;c!==null;)LT(a,c,d,y),c=c.sibling}function LT(a,c,d,y){var E=c.flags;switch(c.tag){case 0:case 11:case 15:lo(a,c,d,y),E&amp;2048&amp;&amp;af(9,c);break;case 1:lo(a,c,d,y);break;case 3:lo(a,c,d,y),E&amp;2048&amp;&amp;(a=null,c.alternate!==null&amp;&amp;(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&amp;&amp;(c.refCount++,a!=null&amp;&amp;Xh(a)));break;case 12:if(E&amp;2048){lo(a,c,d,y),a=c.stateNode;try{var A=c.memoizedProps,U=A.id,W=A.onPostCommit;typeof W==&quot;function&quot;&amp;&amp;W(U,c.alternate===null?&quot;mount&quot;:&quot;update&quot;,a.passiveEffectDuration,-0)}catch(se){zn(c,c.return,se)}}else lo(a,c,d,y);break;case 13:lo(a,c,d,y);break;case 23:break;case 22:A=c.stateNode,U=c.alternate,c.memoizedState!==null?A._visibility&amp;2?lo(a,c,d,y):cf(a,c):A._visibility&amp;2?lo(a,c,d,y):(A._visibility|=2,au(a,c,d,y,(c.subtreeFlags&amp;10256)!==0)),E&amp;2048&amp;&amp;Av(U,c);break;case 24:lo(a,c,d,y),E&amp;2048&amp;&amp;Cv(c.alternate,c);break;default:lo(a,c,d,y)}}function au(a,c,d,y,E){for(E=E&amp;&amp;(c.subtreeFlags&amp;10256)!==0,c=c.child;c!==null;){var A=a,U=c,W=d,se=y,_e=U.flags;switch(U.tag){case 0:case 11:case 15:au(A,U,W,se,E),af(8,U);break;case 23:break;case 22:var Ne=U.stateNode;U.memoizedState!==null?Ne._visibility&amp;2?au(A,U,W,se,E):cf(A,U):(Ne._visibility|=2,au(A,U,W,se,E)),E&amp;&amp;_e&amp;2048&amp;&amp;Av(U.alternate,U);break;case 24:au(A,U,W,se,E),E&amp;&amp;_e&amp;2048&amp;&amp;Cv(U.alternate,U);break;default:au(A,U,W,se,E)}c=c.sibling}}function cf(a,c){if(c.subtreeFlags&amp;10256)for(c=c.child;c!==null;){var d=a,y=c,E=y.flags;switch(y.tag){case 22:cf(d,y),E&amp;2048&amp;&amp;Av(y.alternate,y);break;case 24:cf(d,y),E&amp;2048&amp;&amp;Cv(y.alternate,y);break;default:cf(d,y)}c=c.sibling}}var uf=8192;function lu(a){if(a.subtreeFlags&amp;uf)for(a=a.child;a!==null;)UT(a),a=a.sibling}function UT(a){switch(a.tag){case 26:lu(a),a.flags&amp;uf&amp;&amp;a.memoizedState!==null&amp;&amp;xk(Us,a.memoizedState,a.memoizedProps);break;case 5:lu(a);break;case 3:case 4:var c=Us;Us=Kp(a.stateNode.containerInfo),lu(a),Us=c;break;case 22:a.memoizedState===null&amp;&amp;(c=a.alternate,c!==null&amp;&amp;c.memoizedState!==null?(c=uf,uf=16777216,lu(a),uf=c):lu(a));break;default:lu(a)}}function kT(a){var c=a.alternate;if(c!==null&amp;&amp;(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function hf(a){var c=a.deletions;if((a.flags&amp;16)!==0){if(c!==null)for(var d=0;d&lt;c.length;d++){var y=c[d];Xi=y,zT(y,a)}kT(a)}if(a.subtreeFlags&amp;10256)for(a=a.child;a!==null;)FT(a),a=a.sibling}function FT(a){switch(a.tag){case 0:case 11:case 15:hf(a),a.flags&amp;2048&amp;&amp;Pa(9,a,a.return);break;case 3:hf(a);break;case 12:hf(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&amp;&amp;c._visibility&amp;2&amp;&amp;(a.return===null||a.return.tag!==13)?(c._visibility&amp;=-3,kp(a)):hf(a);break;default:hf(a)}}function kp(a){var c=a.deletions;if((a.flags&amp;16)!==0){if(c!==null)for(var d=0;d&lt;c.length;d++){var y=c[d];Xi=y,zT(y,a)}kT(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Pa(8,c,c.return),kp(c);break;case 22:d=c.stateNode,d._visibility&amp;2&amp;&amp;(d._visibility&amp;=-3,kp(c));break;default:kp(c)}a=a.sibling}}function zT(a,c){for(;Xi!==null;){var d=Xi;switch(d.tag){case 0:case 11:case 15:Pa(8,d,c);break;case 23:case 22:if(d.memoizedState!==null&amp;&amp;d.memoizedState.cachePool!==null){var y=d.memoizedState.cachePool.pool;y!=null&amp;&amp;y.refCount++}break;case 24:Xh(d.memoizedState.cache)}if(y=d.child,y!==null)y.return=d,Xi=y;else e:for(d=a;Xi!==null;){y=Xi;var E=y.sibling,A=y.return;if(OT(y),y===d){Xi=null;break e}if(E!==null){E.return=A,Xi=E;break e}Xi=A}}}var kU={getCacheForType:function(a){var c=or(Li),d=c.data.get(a);return d===void 0&amp;&amp;(d=a(),c.data.set(a,d)),d}},FU=typeof WeakMap==&quot;function&quot;?WeakMap:Map,Cn=0,Vn=null,on=null,pn=0,Rn=0,Yr=null,ka=!1,cu=!1,Rv=!1,Go=0,ci=0,Fa=0,ql=0,Ov=0,gs=0,uu=0,ff=null,Dr=null,Nv=!1,Dv=0,Fp=1/0,zp=null,za=null,nr=0,Ba=null,hu=null,fu=0,Iv=0,Pv=null,BT=null,df=0,Lv=null;function Kr(){if((Cn&amp;2)!==0&amp;&amp;pn!==0)return pn&amp;-pn;if(P.T!==null){var a=Qc;return a!==0?a:Vv()}return zt()}function HT(){gs===0&amp;&amp;(gs=(pn&amp;536870912)===0||En?de():536870912);var a=ms.current;return a!==null&amp;&amp;(a.flags|=32),gs}function $r(a,c,d){(a===Vn&amp;&amp;(Rn===2||Rn===9)||a.cancelPendingCommit!==null)&amp;&amp;(du(a,0),Ha(a,pn,gs,!1)),Pe(a,d),((Cn&amp;2)===0||a!==Vn)&amp;&amp;(a===Vn&amp;&amp;((Cn&amp;2)===0&amp;&amp;(ql|=d),ci===4&amp;&amp;Ha(a,pn,gs,!1)),co(a))}function VT(a,c,d){if((Cn&amp;6)!==0)throw Error(i(327));var y=!d&amp;&amp;(c&amp;124)===0&amp;&amp;(c&amp;a.expiredLanes)===0||Pt(a,c),E=y?HU(a,c):Fv(a,c,!0),A=y;do{if(E===0){cu&amp;&amp;!y&amp;&amp;Ha(a,c,0,!1);break}else{if(d=a.current.alternate,A&amp;&amp;!zU(d)){E=Fv(a,c,!1),A=!1;continue}if(E===2){if(A=c,a.errorRecoveryDisabledLanes&amp;A)var U=0;else U=a.pendingLanes&amp;-536870913,U=U!==0?U:U&amp;536870912?536870912:0;if(U!==0){c=U;e:{var W=a;E=ff;var se=W.current.memoizedState.isDehydrated;if(se&amp;&amp;(du(W,U).flags|=256),U=Fv(W,U,!1),U!==2){if(Rv&amp;&amp;!se){W.errorRecoveryDisabledLanes|=A,ql|=A,E=4;break e}A=Dr,Dr=E,A!==null&amp;&amp;(Dr===null?Dr=A:Dr.push.apply(Dr,A))}E=U}if(A=!1,E!==2)continue}}if(E===1){du(a,0),Ha(a,c,0,!0);break}e:{switch(y=a,A=E,A){case 0:case 1:throw Error(i(345));case 4:if((c&amp;4194048)!==c)break;case 6:Ha(y,c,gs,!ka);break e;case 2:Dr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&amp;62914560)===c&amp;&amp;(E=Dv+300-Fe(),10&lt;E)){if(Ha(y,c,gs,!ka),jt(y,0,!0)!==0)break e;y.timeoutHandle=yM(GT.bind(null,y,d,Dr,zp,Nv,c,gs,ql,uu,ka,A,2,-0,0),E);break e}GT(y,d,Dr,zp,Nv,c,gs,ql,uu,ka,A,0,-0,0)}}break}while(!0);co(a)}function GT(a,c,d,y,E,A,U,W,se,_e,Ne,ke,xe,Ee){if(a.timeoutHandle=-1,ke=c.subtreeFlags,(ke&amp;8192||(ke&amp;16785408)===16785408)&amp;&amp;(bf={stylesheets:null,count:0,unsuspend:bk},UT(c),ke=Sk(),ke!==null)){a.cancelPendingCommit=ke($T.bind(null,a,c,A,d,y,E,U,W,se,Ne,1,xe,Ee)),Ha(a,A,U,!_e);return}$T(a,c,A,d,y,E,U,W,se)}function zU(a){for(var c=a;;){var d=c.tag;if((d===0||d===11||d===15)&amp;&amp;c.flags&amp;16384&amp;&amp;(d=c.updateQueue,d!==null&amp;&amp;(d=d.stores,d!==null)))for(var y=0;y&lt;d.length;y++){var E=d[y],A=E.getSnapshot;E=E.value;try{if(!jr(A(),E))return!1}catch{return!1}}if(d=c.child,c.subtreeFlags&amp;16384&amp;&amp;d!==null)d.return=c,c=d;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ha(a,c,d,y){c&amp;=~Ov,c&amp;=~ql,a.suspendedLanes|=c,a.pingedLanes&amp;=~c,y&amp;&amp;(a.warmLanes|=c),y=a.expirationTimes;for(var E=c;0&lt;E;){var A=31-ht(E),U=1&lt;&lt;A;y[A]=-1,E&amp;=~U}d!==0&amp;&amp;et(a,d,c)}function Bp(){return(Cn&amp;6)===0?(pf(0),!1):!0}function Uv(){if(on!==null){if(Rn===0)var a=on.return;else a=on,Lo=Hl=null,Q_(a),su=null,rf=0,a=on;for(;a!==null;)ST(a.alternate,a),a=a.return;on=null}}function du(a,c){var d=a.timeoutHandle;d!==-1&amp;&amp;(a.timeoutHandle=-1,ik(d)),d=a.cancelPendingCommit,d!==null&amp;&amp;(a.cancelPendingCommit=null,d()),Uv(),Vn=a,on=d=Do(a.current,null),pn=c,Rn=0,Yr=null,ka=!1,cu=Pt(a,c),Rv=!1,uu=gs=Ov=ql=Fa=ci=0,Dr=ff=null,Nv=!1,(c&amp;8)!==0&amp;&amp;(c|=c&amp;32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&amp;=c;0&lt;y;){var E=31-ht(y),A=1&lt;&lt;E;c|=a[E],y&amp;=~A}return Go=c,lp(),d}function jT(a,c){en=null,P.H=Ap,c===Yh||c===yp?(c=aE(),Rn=3):c===rE?(c=aE(),Rn=4):Rn=c===lT?8:c!==null&amp;&amp;typeof c==&quot;object&quot;&amp;&amp;typeof c.then==&quot;function&quot;?6:1,Yr=c,on===null&amp;&amp;(ci=1,Dp(a,hs(c,a.current)))}function WT(){var a=P.H;return P.H=Ap,a===null?Ap:a}function XT(){var a=P.A;return P.A=kU,a}function kv(){ci=4,ka||(pn&amp;4194048)!==pn&amp;&amp;ms.current!==null||(cu=!0),(Fa&amp;134217727)===0&amp;&amp;(ql&amp;134217727)===0||Vn===null||Ha(Vn,pn,gs,!1)}function Fv(a,c,d){var y=Cn;Cn|=2;var E=WT(),A=XT();(Vn!==a||pn!==c)&amp;&amp;(zp=null,du(a,c)),c=!1;var U=ci;e:do try{if(Rn!==0&amp;&amp;on!==null){var W=on,se=Yr;switch(Rn){case 8:Uv(),U=6;break e;case 3:case 2:case 9:case 6:ms.current===null&amp;&amp;(c=!0);var _e=Rn;if(Rn=0,Yr=null,pu(a,W,se,_e),d&amp;&amp;cu){U=0;break e}break;default:_e=Rn,Rn=0,Yr=null,pu(a,W,se,_e)}}BU(),U=ci;break}catch(Ne){jT(a,Ne)}while(!0);return c&amp;&amp;a.shellSuspendCounter++,Lo=Hl=null,Cn=y,P.H=E,P.A=A,on===null&amp;&amp;(Vn=null,pn=0,lp()),U}function BU(){for(;on!==null;)qT(on)}function HU(a,c){var d=Cn;Cn|=2;var y=WT(),E=XT();Vn!==a||pn!==c?(zp=null,Fp=Fe()+500,du(a,c)):cu=Pt(a,c);e:do try{if(Rn!==0&amp;&amp;on!==null){c=on;var A=Yr;t:switch(Rn){case 1:Rn=0,Yr=null,pu(a,c,A,1);break;case 2:case 9:if(sE(A)){Rn=0,Yr=null,YT(c);break}c=function(){Rn!==2&amp;&amp;Rn!==9||Vn!==a||(Rn=7),co(a)},A.then(c,c);break e;case 3:Rn=7;break e;case 4:Rn=5;break e;case 7:sE(A)?(Rn=0,Yr=null,YT(c)):(Rn=0,Yr=null,pu(a,c,A,7));break;case 5:var U=null;switch(on.tag){case 26:U=on.memoizedState;case 5:case 27:var W=on;if(!U||RM(U)){Rn=0,Yr=null;var se=W.sibling;if(se!==null)on=se;else{var _e=W.return;_e!==null?(on=_e,Hp(_e)):on=null}break t}}Rn=0,Yr=null,pu(a,c,A,5);break;case 6:Rn=0,Yr=null,pu(a,c,A,6);break;case 8:Uv(),ci=6;break e;default:throw Error(i(462))}}VU();break}catch(Ne){jT(a,Ne)}while(!0);return Lo=Hl=null,P.H=y,P.A=E,Cn=d,on!==null?0:(Vn=null,pn=0,lp(),ci)}function VU(){for(;on!==null&amp;&amp;!Ve();)qT(on)}function qT(a){var c=bT(a.alternate,a,Go);a.memoizedProps=a.pendingProps,c===null?Hp(a):on=c}function YT(a){var c=a,d=c.alternate;switch(c.tag){case 15:case 0:c=pT(d,c,c.pendingProps,c.type,void 0,pn);break;case 11:c=pT(d,c,c.pendingProps,c.type.render,c.ref,pn);break;case 5:Q_(c);default:ST(d,c),c=on=K1(c,Go),c=bT(d,c,Go)}a.memoizedProps=a.pendingProps,c===null?Hp(a):on=c}function pu(a,c,d,y){Lo=Hl=null,Q_(c),su=null,rf=0;var E=c.return;try{if(NU(a,E,c,d,pn)){ci=1,Dp(a,hs(d,a.current)),on=null;return}}catch(A){if(E!==null)throw on=E,A;ci=1,Dp(a,hs(d,a.current)),on=null;return}c.flags&amp;32768?(En||y===1?a=!0:cu||(pn&amp;536870912)!==0?a=!1:(ka=a=!0,(y===2||y===9||y===3||y===6)&amp;&amp;(y=ms.current,y!==null&amp;&amp;y.tag===13&amp;&amp;(y.flags|=16384))),KT(c,a)):Hp(c)}function Hp(a){var c=a;do{if((c.flags&amp;32768)!==0){KT(c,ka);return}a=c.return;var d=IU(c.alternate,c,Go);if(d!==null){on=d;return}if(c=c.sibling,c!==null){on=c;return}on=c=a}while(c!==null);ci===0&amp;&amp;(ci=5)}function KT(a,c){do{var d=PU(a.alternate,a);if(d!==null){d.flags&amp;=32767,on=d;return}if(d=a.return,d!==null&amp;&amp;(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!c&amp;&amp;(a=a.sibling,a!==null)){on=a;return}on=a=d}while(a!==null);ci=6,on=null}function $T(a,c,d,y,E,A,U,W,se){a.cancelPendingCommit=null;do Vp();while(nr!==0);if((Cn&amp;6)!==0)throw Error(i(327));if(c!==null){if(c===a.current)throw Error(i(177));if(A=c.lanes|c.childLanes,A|=C_,ot(a,d,A,U,W,se),a===Vn&amp;&amp;(on=Vn=null,pn=0),hu=c,Ba=a,fu=d,Iv=A,Pv=E,BT=y,(c.subtreeFlags&amp;10256)!==0||(c.flags&amp;10256)!==0?(a.callbackNode=null,a.callbackPriority=0,XU(te,function(){return tM(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(c.flags&amp;13878)!==0,(c.subtreeFlags&amp;13878)!==0||y){y=P.T,P.T=null,E=j.p,j.p=2,U=Cn,Cn|=4;try{LU(a,c,d)}finally{Cn=U,j.p=E,P.T=y}}nr=1,ZT(),JT(),QT()}}function ZT(){if(nr===1){nr=0;var a=Ba,c=hu,d=(c.flags&amp;13878)!==0;if((c.subtreeFlags&amp;13878)!==0||d){d=P.T,P.T=null;var y=j.p;j.p=2;var E=Cn;Cn|=4;try{IT(c,a);var A=$v,U=z1(a.containerInfo),W=A.focusedElem,se=A.selectionRange;if(U!==W&amp;&amp;W&amp;&amp;W.ownerDocument&amp;&amp;F1(W.ownerDocument.documentElement,W)){if(se!==null&amp;&amp;w_(W)){var _e=se.start,Ne=se.end;if(Ne===void 0&amp;&amp;(Ne=_e),&quot;selectionStart&quot;in W)W.selectionStart=_e,W.selectionEnd=Math.min(Ne,W.value.length);else{var ke=W.ownerDocument||document,xe=ke&amp;&amp;ke.defaultView||window;if(xe.getSelection){var Ee=xe.getSelection(),kt=W.textContent.length,Dt=Math.min(se.start,kt),Un=se.end===void 0?Dt:Math.min(se.end,kt);!Ee.extend&amp;&amp;Dt&gt;Un&amp;&amp;(U=Un,Un=Dt,Dt=U);var ge=k1(W,Dt),he=k1(W,Un);if(ge&amp;&amp;he&amp;&amp;(Ee.rangeCount!==1||Ee.anchorNode!==ge.node||Ee.anchorOffset!==ge.offset||Ee.focusNode!==he.node||Ee.focusOffset!==he.offset)){var ye=ke.createRange();ye.setStart(ge.node,ge.offset),Ee.removeAllRanges(),Dt&gt;Un?(Ee.addRange(ye),Ee.extend(he.node,he.offset)):(ye.setEnd(he.node,he.offset),Ee.addRange(ye))}}}}for(ke=[],Ee=W;Ee=Ee.parentNode;)Ee.nodeType===1&amp;&amp;ke.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof W.focus==&quot;function&quot;&amp;&amp;W.focus(),W=0;W&lt;ke.length;W++){var Ie=ke[W];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}em=!!Kv,$v=Kv=null}finally{Cn=E,j.p=y,P.T=d}}a.current=c,nr=2}}function JT(){if(nr===2){nr=0;var a=Ba,c=hu,d=(c.flags&amp;8772)!==0;if((c.subtreeFlags&amp;8772)!==0||d){d=P.T,P.T=null;var y=j.p;j.p=2;var E=Cn;Cn|=4;try{RT(a,c.alternate,c)}finally{Cn=E,j.p=y,P.T=d}}nr=3}}function QT(){if(nr===4||nr===3){nr=0,Le();var a=Ba,c=hu,d=fu,y=BT;(c.subtreeFlags&amp;10256)!==0||(c.flags&amp;10256)!==0?nr=5:(nr=0,hu=Ba=null,eM(a,a.pendingLanes));var E=a.pendingLanes;if(E===0&amp;&amp;(za=null),jn(d),c=c.stateNode,Ze&amp;&amp;typeof Ze.onCommitFiberRoot==&quot;function&quot;)try{Ze.onCommitFiberRoot(Me,c,void 0,(c.current.flags&amp;128)===128)}catch{}if(y!==null){c=P.T,E=j.p,j.p=2,P.T=null;try{for(var A=a.onRecoverableError,U=0;U&lt;y.length;U++){var W=y[U];A(W.value,{componentStack:W.stack})}}finally{P.T=c,j.p=E}}(fu&amp;3)!==0&amp;&amp;Vp(),co(a),E=a.pendingLanes,(d&amp;4194090)!==0&amp;&amp;(E&amp;42)!==0?a===Lv?df++:(df=0,Lv=a):df=0,pf(0)}}function eM(a,c){(a.pooledCacheLanes&amp;=c)===0&amp;&amp;(c=a.pooledCache,c!=null&amp;&amp;(a.pooledCache=null,Xh(c)))}function Vp(a){return ZT(),JT(),QT(),tM()}function tM(){if(nr!==5)return!1;var a=Ba,c=Iv;Iv=0;var d=jn(fu),y=P.T,E=j.p;try{j.p=32&gt;d?32:d,P.T=null,d=Pv,Pv=null;var A=Ba,U=fu;if(nr=0,hu=Ba=null,fu=0,(Cn&amp;6)!==0)throw Error(i(331));var W=Cn;if(Cn|=4,FT(A.current),LT(A,A.current,U,d),Cn=W,pf(0,!1),Ze&amp;&amp;typeof Ze.onPostCommitFiberRoot==&quot;function&quot;)try{Ze.onPostCommitFiberRoot(Me,A)}catch{}return!0}finally{j.p=E,P.T=y,eM(a,c)}}function nM(a,c,d){c=hs(d,c),c=dv(a.stateNode,c,2),a=Oa(a,c,2),a!==null&amp;&amp;(Pe(a,2),co(a))}function zn(a,c,d){if(a.tag===3)nM(a,a,d);else for(;c!==null;){if(c.tag===3){nM(c,a,d);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError==&quot;function&quot;||typeof y.componentDidCatch==&quot;function&quot;&amp;&amp;(za===null||!za.has(y))){a=hs(d,a),d=oT(2),y=Oa(c,d,2),y!==null&amp;&amp;(aT(d,y,c,a),Pe(y,2),co(y));break}}c=c.return}}function zv(a,c,d){var y=a.pingCache;if(y===null){y=a.pingCache=new FU;var E=new Set;y.set(c,E)}else E=y.get(c),E===void 0&amp;&amp;(E=new Set,y.set(c,E));E.has(d)||(Rv=!0,E.add(d),a=GU.bind(null,a,c,d),c.then(a,a))}function GU(a,c,d){var y=a.pingCache;y!==null&amp;&amp;y.delete(c),a.pingedLanes|=a.suspendedLanes&amp;d,a.warmLanes&amp;=~d,Vn===a&amp;&amp;(pn&amp;d)===d&amp;&amp;(ci===4||ci===3&amp;&amp;(pn&amp;62914560)===pn&amp;&amp;300&gt;Fe()-Dv?(Cn&amp;2)===0&amp;&amp;du(a,0):Ov|=d,uu===pn&amp;&amp;(uu=0)),co(a)}function iM(a,c){c===0&amp;&amp;(c=nt()),a=Kc(a,c),a!==null&amp;&amp;(Pe(a,c),co(a))}function jU(a){var c=a.memoizedState,d=0;c!==null&amp;&amp;(d=c.retryLane),iM(a,d)}function WU(a,c){var d=0;switch(a.tag){case 13:var y=a.stateNode,E=a.memoizedState;E!==null&amp;&amp;(d=E.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&amp;&amp;y.delete(c),iM(a,d)}function XU(a,c){return Ke(a,c)}var Gp=null,mu=null,Bv=!1,jp=!1,Hv=!1,Yl=0;function co(a){a!==mu&amp;&amp;a.next===null&amp;&amp;(mu===null?Gp=mu=a:mu=mu.next=a),jp=!0,Bv||(Bv=!0,YU())}function pf(a,c){if(!Hv&amp;&amp;jp){Hv=!0;do for(var d=!1,y=Gp;y!==null;){if(a!==0){var E=y.pendingLanes;if(E===0)var A=0;else{var U=y.suspendedLanes,W=y.pingedLanes;A=(1&lt;&lt;31-ht(42|a)+1)-1,A&amp;=E&amp;~(U&amp;~W),A=A&amp;201326741?A&amp;201326741|1:A?A|2:0}A!==0&amp;&amp;(d=!0,aM(y,A))}else A=pn,A=jt(y,y===Vn?A:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(A&amp;3)===0||Pt(y,A)||(d=!0,aM(y,A));y=y.next}while(d);Hv=!1}}function qU(){rM()}function rM(){jp=Bv=!1;var a=0;Yl!==0&amp;&amp;(nk()&amp;&amp;(a=Yl),Yl=0);for(var c=Fe(),d=null,y=Gp;y!==null;){var E=y.next,A=sM(y,c);A===0?(y.next=null,d===null?Gp=E:d.next=E,E===null&amp;&amp;(mu=d)):(d=y,(a!==0||(A&amp;3)!==0)&amp;&amp;(jp=!0)),y=E}pf(a)}function sM(a,c){for(var d=a.suspendedLanes,y=a.pingedLanes,E=a.expirationTimes,A=a.pendingLanes&amp;-62914561;0&lt;A;){var U=31-ht(A),W=1&lt;&lt;U,se=E[U];se===-1?((W&amp;d)===0||(W&amp;y)!==0)&amp;&amp;(E[U]=yn(W,c)):se&lt;=c&amp;&amp;(a.expiredLanes|=W),A&amp;=~W}if(c=Vn,d=pn,d=jt(a,a===c?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,d===0||a===c&amp;&amp;(Rn===2||Rn===9)||a.cancelPendingCommit!==null)return y!==null&amp;&amp;y!==null&amp;&amp;Q(y),a.callbackNode=null,a.callbackPriority=0;if((d&amp;3)===0||Pt(a,d)){if(c=d&amp;-d,c===a.callbackPriority)return c;switch(y!==null&amp;&amp;Q(y),jn(d)){case 2:case 8:d=ze;break;case 32:d=te;break;case 268435456:d=pe;break;default:d=te}return y=oM.bind(null,a),d=Ke(d,y),a.callbackPriority=c,a.callbackNode=d,c}return y!==null&amp;&amp;y!==null&amp;&amp;Q(y),a.callbackPriority=2,a.callbackNode=null,2}function oM(a,c){if(nr!==0&amp;&amp;nr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(Vp()&amp;&amp;a.callbackNode!==d)return null;var y=pn;return y=jt(a,a===Vn?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(VT(a,y,c),sM(a,Fe()),a.callbackNode!=null&amp;&amp;a.callbackNode===d?oM.bind(null,a):null)}function aM(a,c){if(Vp())return null;VT(a,c,!0)}function YU(){rk(function(){(Cn&amp;6)!==0?Ke(mt,qU):rM()})}function Vv(){return Yl===0&amp;&amp;(Yl=de()),Yl}function lM(a){return a==null||typeof a==&quot;symbol&quot;||typeof a==&quot;boolean&quot;?null:typeof a==&quot;function&quot;?a:X(&quot;&quot;+a)}function cM(a,c){var d=c.ownerDocument.createElement(&quot;input&quot;);return d.name=c.name,d.value=c.value,a.id&amp;&amp;d.setAttribute(&quot;form&quot;,a.id),c.parentNode.insertBefore(d,c),a=new FormData(a),d.parentNode.removeChild(d),a}function KU(a,c,d,y,E){if(c===&quot;submit&quot;&amp;&amp;d&amp;&amp;d.stateNode===E){var A=lM((E[gi]||null).action),U=y.submitter;U&amp;&amp;(c=(c=U[gi]||null)?lM(c.formAction):U.getAttribute(&quot;formAction&quot;),c!==null&amp;&amp;(A=c,U=null));var W=new Il(&quot;action&quot;,&quot;action&quot;,null,y,E);a.push({event:W,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Yl!==0){var se=U?cM(E,U):new FormData(E);lv(d,{pending:!0,data:se,method:E.method,action:A},null,se)}}else typeof A==&quot;function&quot;&amp;&amp;(W.preventDefault(),se=U?cM(E,U):new FormData(E),lv(d,{pending:!0,data:se,method:E.method,action:A},A,se))},currentTarget:E}]})}}for(var Gv=0;Gv&lt;A_.length;Gv++){var jv=A_[Gv],$U=jv.toLowerCase(),ZU=jv[0].toUpperCase()+jv.slice(1);Ls($U,&quot;on&quot;+ZU)}Ls(V1,&quot;onAnimationEnd&quot;),Ls(G1,&quot;onAnimationIteration&quot;),Ls(j1,&quot;onAnimationStart&quot;),Ls(&quot;dblclick&quot;,&quot;onDoubleClick&quot;),Ls(&quot;focusin&quot;,&quot;onFocus&quot;),Ls(&quot;focusout&quot;,&quot;onBlur&quot;),Ls(pU,&quot;onTransitionRun&quot;),Ls(mU,&quot;onTransitionStart&quot;),Ls(gU,&quot;onTransitionCancel&quot;),Ls(W1,&quot;onTransitionEnd&quot;),Y(&quot;onMouseEnter&quot;,[&quot;mouseout&quot;,&quot;mouseover&quot;]),Y(&quot;onMouseLeave&quot;,[&quot;mouseout&quot;,&quot;mouseover&quot;]),Y(&quot;onPointerEnter&quot;,[&quot;pointerout&quot;,&quot;pointerover&quot;]),Y(&quot;onPointerLeave&quot;,[&quot;pointerout&quot;,&quot;pointerover&quot;]),Vr(&quot;onChange&quot;,&quot;change click focusin focusout input keydown keyup selectionchange&quot;.split(&quot; &quot;)),Vr(&quot;onSelect&quot;,&quot;focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange&quot;.split(&quot; &quot;)),Vr(&quot;onBeforeInput&quot;,[&quot;compositionend&quot;,&quot;keypress&quot;,&quot;textInput&quot;,&quot;paste&quot;]),Vr(&quot;onCompositionEnd&quot;,&quot;compositionend focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;)),Vr(&quot;onCompositionStart&quot;,&quot;compositionstart focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;)),Vr(&quot;onCompositionUpdate&quot;,&quot;compositionupdate focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;));var mf=&quot;abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting&quot;.split(&quot; &quot;),JU=new Set(&quot;beforetoggle cancel close invalid load scroll scrollend toggle&quot;.split(&quot; &quot;).concat(mf));function uM(a,c){c=(c&amp;4)!==0;for(var d=0;d&lt;a.length;d++){var y=a[d],E=y.event;y=y.listeners;e:{var A=void 0;if(c)for(var U=y.length-1;0&lt;=U;U--){var W=y[U],se=W.instance,_e=W.currentTarget;if(W=W.listener,se!==A&amp;&amp;E.isPropagationStopped())break e;A=W,E.currentTarget=_e;try{A(E)}catch(Ne){Np(Ne)}E.currentTarget=null,A=se}else for(U=0;U&lt;y.length;U++){if(W=y[U],se=W.instance,_e=W.currentTarget,W=W.listener,se!==A&amp;&amp;E.isPropagationStopped())break e;A=W,E.currentTarget=_e;try{A(E)}catch(Ne){Np(Ne)}E.currentTarget=null,A=se}}}}function an(a,c){var d=c[Ns];d===void 0&amp;&amp;(d=c[Ns]=new Set);var y=a+&quot;__bubble&quot;;d.has(y)||(hM(c,a,2,!1),d.add(y))}function Wv(a,c,d){var y=0;c&amp;&amp;(y|=4),hM(d,a,y,c)}var Wp=&quot;_reactListening&quot;+Math.random().toString(36).slice(2);function Xv(a){if(!a[Wp]){a[Wp]=!0,Ta.forEach(function(d){d!==&quot;selectionchange&quot;&amp;&amp;(JU.has(d)||Wv(d,!1,a),Wv(d,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Wp]||(c[Wp]=!0,Wv(&quot;selectionchange&quot;,!1,c))}}function hM(a,c,d,y){switch(LM(c)){case 2:var E=Tk;break;case 8:E=Mk;break;default:E=ob}d=E.bind(null,c,d,a),E=void 0,!gt||c!==&quot;touchstart&quot;&amp;&amp;c!==&quot;touchmove&quot;&amp;&amp;c!==&quot;wheel&quot;||(E=!0),y?E!==void 0?a.addEventListener(c,d,{capture:!0,passive:E}):a.addEventListener(c,d,!0):E!==void 0?a.addEventListener(c,d,{passive:E}):a.addEventListener(c,d,!1)}function qv(a,c,d,y,E){var A=y;if((c&amp;1)===0&amp;&amp;(c&amp;2)===0&amp;&amp;y!==null)e:for(;;){if(y===null)return;var U=y.tag;if(U===3||U===4){var W=y.stateNode.containerInfo;if(W===E)break;if(U===4)for(U=y.return;U!==null;){var se=U.tag;if((se===3||se===4)&amp;&amp;U.stateNode.containerInfo===E)return;U=U.return}for(;W!==null;){if(U=Mr(W),U===null)return;if(se=U.tag,se===5||se===6||se===26||se===27){y=A=U;continue e}W=W.parentNode}}y=y.return}xt(function(){var _e=A,Ne=Te(d),ke=[];e:{var xe=X1.get(a);if(xe!==void 0){var Ee=Il,kt=a;switch(a){case&quot;keypress&quot;:if(sn(d)===0)break e;case&quot;keydown&quot;:case&quot;keyup&quot;:Ee=X3;break;case&quot;focusin&quot;:kt=&quot;focus&quot;,Ee=__;break;case&quot;focusout&quot;:kt=&quot;blur&quot;,Ee=__;break;case&quot;beforeblur&quot;:case&quot;afterblur&quot;:Ee=__;break;case&quot;click&quot;:if(d.button===2)break e;case&quot;auxclick&quot;:case&quot;dblclick&quot;:case&quot;mousedown&quot;:case&quot;mousemove&quot;:case&quot;mouseup&quot;:case&quot;mouseout&quot;:case&quot;mouseover&quot;:case&quot;contextmenu&quot;:Ee=x1;break;case&quot;drag&quot;:case&quot;dragend&quot;:case&quot;dragenter&quot;:case&quot;dragexit&quot;:case&quot;dragleave&quot;:case&quot;dragover&quot;:case&quot;dragstart&quot;:case&quot;drop&quot;:Ee=P3;break;case&quot;touchcancel&quot;:case&quot;touchend&quot;:case&quot;touchmove&quot;:case&quot;touchstart&quot;:Ee=K3;break;case V1:case G1:case j1:Ee=k3;break;case W1:Ee=Z3;break;case&quot;scroll&quot;:case&quot;scrollend&quot;:Ee=D3;break;case&quot;wheel&quot;:Ee=Q3;break;case&quot;copy&quot;:case&quot;cut&quot;:case&quot;paste&quot;:Ee=z3;break;case&quot;gotpointercapture&quot;:case&quot;lostpointercapture&quot;:case&quot;pointercancel&quot;:case&quot;pointerdown&quot;:case&quot;pointermove&quot;:case&quot;pointerout&quot;:case&quot;pointerover&quot;:case&quot;pointerup&quot;:Ee=w1;break;case&quot;toggle&quot;:case&quot;beforetoggle&quot;:Ee=tU}var Dt=(c&amp;4)!==0,Un=!Dt&amp;&amp;(a===&quot;scroll&quot;||a===&quot;scrollend&quot;),ge=Dt?xe!==null?xe+&quot;Capture&quot;:null:xe;Dt=[];for(var he=_e,ye;he!==null;){var Ie=he;if(ye=Ie.stateNode,Ie=Ie.tag,Ie!==5&amp;&amp;Ie!==26&amp;&amp;Ie!==27||ye===null||ge===null||(Ie=Be(he,ge),Ie!=null&amp;&amp;Dt.push(gf(he,Ie,ye))),Un)break;he=he.return}0&lt;Dt.length&amp;&amp;(xe=new Ee(xe,kt,null,d,Ne),ke.push({event:xe,listeners:Dt}))}}if((c&amp;7)===0){e:{if(xe=a===&quot;mouseover&quot;||a===&quot;pointerover&quot;,Ee=a===&quot;mouseout&quot;||a===&quot;pointerout&quot;,xe&amp;&amp;d!==J&amp;&amp;(kt=d.relatedTarget||d.fromElement)&amp;&amp;(Mr(kt)||kt[ji]))break e;if((Ee||xe)&amp;&amp;(xe=Ne.window===Ne?Ne:(xe=Ne.ownerDocument)?xe.defaultView||xe.parentWindow:window,Ee?(kt=d.relatedTarget||d.toElement,Ee=_e,kt=kt?Mr(kt):null,kt!==null&amp;&amp;(Un=s(kt),Dt=kt.tag,kt!==Un||Dt!==5&amp;&amp;Dt!==27&amp;&amp;Dt!==6)&amp;&amp;(kt=null)):(Ee=null,kt=_e),Ee!==kt)){if(Dt=x1,Ie=&quot;onMouseLeave&quot;,ge=&quot;onMouseEnter&quot;,he=&quot;mouse&quot;,(a===&quot;pointerout&quot;||a===&quot;pointerover&quot;)&amp;&amp;(Dt=w1,Ie=&quot;onPointerLeave&quot;,ge=&quot;onPointerEnter&quot;,he=&quot;pointer&quot;),Un=Ee==null?xe:Is(Ee),ye=kt==null?xe:Is(kt),xe=new Dt(Ie,he+&quot;leave&quot;,Ee,d,Ne),xe.target=Un,xe.relatedTarget=ye,Ie=null,Mr(Ne)===_e&amp;&amp;(Dt=new Dt(ge,he+&quot;enter&quot;,kt,d,Ne),Dt.target=ye,Dt.relatedTarget=Un,Ie=Dt),Un=Ie,Ee&amp;&amp;kt)t:{for(Dt=Ee,ge=kt,he=0,ye=Dt;ye;ye=gu(ye))he++;for(ye=0,Ie=ge;Ie;Ie=gu(Ie))ye++;for(;0&lt;he-ye;)Dt=gu(Dt),he--;for(;0&lt;ye-he;)ge=gu(ge),ye--;for(;he--;){if(Dt===ge||ge!==null&amp;&amp;Dt===ge.alternate)break t;Dt=gu(Dt),ge=gu(ge)}Dt=null}else Dt=null;Ee!==null&amp;&amp;fM(ke,xe,Ee,Dt,!1),kt!==null&amp;&amp;Un!==null&amp;&amp;fM(ke,Un,kt,Dt,!0)}}e:{if(xe=_e?Is(_e):window,Ee=xe.nodeName&amp;&amp;xe.nodeName.toLowerCase(),Ee===&quot;select&quot;||Ee===&quot;input&quot;&amp;&amp;xe.type===&quot;file&quot;)var vt=N1;else if(R1(xe))if(D1)vt=hU;else{vt=cU;var tn=lU}else Ee=xe.nodeName,!Ee||Ee.toLowerCase()!==&quot;input&quot;||xe.type!==&quot;checkbox&quot;&amp;&amp;xe.type!==&quot;radio&quot;?_e&amp;&amp;B(_e.elementType)&amp;&amp;(vt=N1):vt=uU;if(vt&amp;&amp;(vt=vt(a,_e))){O1(ke,vt,d,Ne);break e}tn&amp;&amp;tn(a,xe,_e),a===&quot;focusout&quot;&amp;&amp;_e&amp;&amp;xe.type===&quot;number&quot;&amp;&amp;_e.memoizedProps.value!=null&amp;&amp;Pi(xe,&quot;number&quot;,xe.value)}switch(tn=_e?Is(_e):window,a){case&quot;focusin&quot;:(R1(tn)||tn.contentEditable===&quot;true&quot;)&amp;&amp;(Xc=tn,E_=_e,Hh=null);break;case&quot;focusout&quot;:Hh=E_=Xc=null;break;case&quot;mousedown&quot;:T_=!0;break;case&quot;contextmenu&quot;:case&quot;mouseup&quot;:case&quot;dragend&quot;:T_=!1,B1(ke,d,Ne);break;case&quot;selectionchange&quot;:if(dU)break;case&quot;keydown&quot;:case&quot;keyup&quot;:B1(ke,d,Ne)}var At;if(b_)e:{switch(a){case&quot;compositionstart&quot;:var Lt=&quot;onCompositionStart&quot;;break e;case&quot;compositionend&quot;:Lt=&quot;onCompositionEnd&quot;;break e;case&quot;compositionupdate&quot;:Lt=&quot;onCompositionUpdate&quot;;break e}Lt=void 0}else Wc?A1(a,d)&amp;&amp;(Lt=&quot;onCompositionEnd&quot;):a===&quot;keydown&quot;&amp;&amp;d.keyCode===229&amp;&amp;(Lt=&quot;onCompositionStart&quot;);Lt&amp;&amp;(E1&amp;&amp;d.locale!==&quot;ko&quot;&amp;&amp;(Wc||Lt!==&quot;onCompositionStart&quot;?Lt===&quot;onCompositionEnd&quot;&amp;&amp;Wc&amp;&amp;(At=hn()):(_t=Ne,Fn=&quot;value&quot;in _t?_t.value:_t.textContent,Wc=!0)),tn=Xp(_e,Lt),0&lt;tn.length&amp;&amp;(Lt=new S1(Lt,a,null,d,Ne),ke.push({event:Lt,listeners:tn}),At?Lt.data=At:(At=C1(d),At!==null&amp;&amp;(Lt.data=At)))),(At=iU?rU(a,d):sU(a,d))&amp;&amp;(Lt=Xp(_e,&quot;onBeforeInput&quot;),0&lt;Lt.length&amp;&amp;(tn=new S1(&quot;onBeforeInput&quot;,&quot;beforeinput&quot;,null,d,Ne),ke.push({event:tn,listeners:Lt}),tn.data=At)),KU(ke,a,_e,d,Ne)}uM(ke,c)})}function gf(a,c,d){return{instance:a,listener:c,currentTarget:d}}function Xp(a,c){for(var d=c+&quot;Capture&quot;,y=[];a!==null;){var E=a,A=E.stateNode;if(E=E.tag,E!==5&amp;&amp;E!==26&amp;&amp;E!==27||A===null||(E=Be(a,d),E!=null&amp;&amp;y.unshift(gf(a,E,A)),E=Be(a,c),E!=null&amp;&amp;y.push(gf(a,E,A))),a.tag===3)return y;a=a.return}return[]}function gu(a){if(a===null)return null;do a=a.return;while(a&amp;&amp;a.tag!==5&amp;&amp;a.tag!==27);return a||null}function fM(a,c,d,y,E){for(var A=c._reactName,U=[];d!==null&amp;&amp;d!==y;){var W=d,se=W.alternate,_e=W.stateNode;if(W=W.tag,se!==null&amp;&amp;se===y)break;W!==5&amp;&amp;W!==26&amp;&amp;W!==27||_e===null||(se=_e,E?(_e=Be(d,A),_e!=null&amp;&amp;U.unshift(gf(d,_e,se))):E||(_e=Be(d,A),_e!=null&amp;&amp;U.push(gf(d,_e,se)))),d=d.return}U.length!==0&amp;&amp;a.push({event:c,listeners:U})}var QU=/\r\n?/g,ek=/\u0000|\uFFFD/g;function dM(a){return(typeof a==&quot;string&quot;?a:&quot;&quot;+a).replace(QU,`
`).replace(ek,&quot;&quot;)}function pM(a,c){return c=dM(c),dM(a)===c}function qp(){}function Ln(a,c,d,y,E,A){switch(d){case&quot;children&quot;:typeof y==&quot;string&quot;?c===&quot;body&quot;||c===&quot;textarea&quot;&amp;&amp;y===&quot;&quot;||Gr(a,y):(typeof y==&quot;number&quot;||typeof y==&quot;bigint&quot;)&amp;&amp;c!==&quot;body&quot;&amp;&amp;Gr(a,&quot;&quot;+y);break;case&quot;className&quot;:Je(a,&quot;class&quot;,y);break;case&quot;tabIndex&quot;:Je(a,&quot;tabindex&quot;,y);break;case&quot;dir&quot;:case&quot;role&quot;:case&quot;viewBox&quot;:case&quot;width&quot;:case&quot;height&quot;:Je(a,d,y);break;case&quot;style&quot;:Dl(a,y,A);break;case&quot;data&quot;:if(c!==&quot;object&quot;){Je(a,&quot;data&quot;,y);break}case&quot;src&quot;:case&quot;href&quot;:if(y===&quot;&quot;&amp;&amp;(c!==&quot;a&quot;||d!==&quot;href&quot;)){a.removeAttribute(d);break}if(y==null||typeof y==&quot;function&quot;||typeof y==&quot;symbol&quot;||typeof y==&quot;boolean&quot;){a.removeAttribute(d);break}y=X(&quot;&quot;+y),a.setAttribute(d,y);break;case&quot;action&quot;:case&quot;formAction&quot;:if(typeof y==&quot;function&quot;){a.setAttribute(d,&quot;javascript:throw new Error(&#x27;A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\&#x27;re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().&#x27;)&quot;);break}else typeof A==&quot;function&quot;&amp;&amp;(d===&quot;formAction&quot;?(c!==&quot;input&quot;&amp;&amp;Ln(a,c,&quot;name&quot;,E.name,E,null),Ln(a,c,&quot;formEncType&quot;,E.formEncType,E,null),Ln(a,c,&quot;formMethod&quot;,E.formMethod,E,null),Ln(a,c,&quot;formTarget&quot;,E.formTarget,E,null)):(Ln(a,c,&quot;encType&quot;,E.encType,E,null),Ln(a,c,&quot;method&quot;,E.method,E,null),Ln(a,c,&quot;target&quot;,E.target,E,null)));if(y==null||typeof y==&quot;symbol&quot;||typeof y==&quot;boolean&quot;){a.removeAttribute(d);break}y=X(&quot;&quot;+y),a.setAttribute(d,y);break;case&quot;onClick&quot;:y!=null&amp;&amp;(a.onclick=qp);break;case&quot;onScroll&quot;:y!=null&amp;&amp;an(&quot;scroll&quot;,a);break;case&quot;onScrollEnd&quot;:y!=null&amp;&amp;an(&quot;scrollend&quot;,a);break;case&quot;dangerouslySetInnerHTML&quot;:if(y!=null){if(typeof y!=&quot;object&quot;||!(&quot;__html&quot;in y))throw Error(i(61));if(d=y.__html,d!=null){if(E.children!=null)throw Error(i(60));a.innerHTML=d}}break;case&quot;multiple&quot;:a.multiple=y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;;break;case&quot;muted&quot;:a.muted=y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;;break;case&quot;suppressContentEditableWarning&quot;:case&quot;suppressHydrationWarning&quot;:case&quot;defaultValue&quot;:case&quot;defaultChecked&quot;:case&quot;innerHTML&quot;:case&quot;ref&quot;:break;case&quot;autoFocus&quot;:break;case&quot;xlinkHref&quot;:if(y==null||typeof y==&quot;function&quot;||typeof y==&quot;boolean&quot;||typeof y==&quot;symbol&quot;){a.removeAttribute(&quot;xlink:href&quot;);break}d=X(&quot;&quot;+y),a.setAttributeNS(&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:href&quot;,d);break;case&quot;contentEditable&quot;:case&quot;spellCheck&quot;:case&quot;draggable&quot;:case&quot;value&quot;:case&quot;autoReverse&quot;:case&quot;externalResourcesRequired&quot;:case&quot;focusable&quot;:case&quot;preserveAlpha&quot;:y!=null&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;?a.setAttribute(d,&quot;&quot;+y):a.removeAttribute(d);break;case&quot;inert&quot;:case&quot;allowFullScreen&quot;:case&quot;async&quot;:case&quot;autoPlay&quot;:case&quot;controls&quot;:case&quot;default&quot;:case&quot;defer&quot;:case&quot;disabled&quot;:case&quot;disablePictureInPicture&quot;:case&quot;disableRemotePlayback&quot;:case&quot;formNoValidate&quot;:case&quot;hidden&quot;:case&quot;loop&quot;:case&quot;noModule&quot;:case&quot;noValidate&quot;:case&quot;open&quot;:case&quot;playsInline&quot;:case&quot;readOnly&quot;:case&quot;required&quot;:case&quot;reversed&quot;:case&quot;scoped&quot;:case&quot;seamless&quot;:case&quot;itemScope&quot;:y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;?a.setAttribute(d,&quot;&quot;):a.removeAttribute(d);break;case&quot;capture&quot;:case&quot;download&quot;:y===!0?a.setAttribute(d,&quot;&quot;):y!==!1&amp;&amp;y!=null&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;?a.setAttribute(d,y):a.removeAttribute(d);break;case&quot;cols&quot;:case&quot;rows&quot;:case&quot;size&quot;:case&quot;span&quot;:y!=null&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;&amp;&amp;!isNaN(y)&amp;&amp;1&lt;=y?a.setAttribute(d,y):a.removeAttribute(d);break;case&quot;rowSpan&quot;:case&quot;start&quot;:y==null||typeof y==&quot;function&quot;||typeof y==&quot;symbol&quot;||isNaN(y)?a.removeAttribute(d):a.setAttribute(d,y);break;case&quot;popover&quot;:an(&quot;beforetoggle&quot;,a),an(&quot;toggle&quot;,a),Ge(a,&quot;popover&quot;,y);break;case&quot;xlinkActuate&quot;:tt(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:actuate&quot;,y);break;case&quot;xlinkArcrole&quot;:tt(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:arcrole&quot;,y);break;case&quot;xlinkRole&quot;:tt(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:role&quot;,y);break;case&quot;xlinkShow&quot;:tt(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:show&quot;,y);break;case&quot;xlinkTitle&quot;:tt(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:title&quot;,y);break;case&quot;xlinkType&quot;:tt(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:type&quot;,y);break;case&quot;xmlBase&quot;:tt(a,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:base&quot;,y);break;case&quot;xmlLang&quot;:tt(a,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:lang&quot;,y);break;case&quot;xmlSpace&quot;:tt(a,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:space&quot;,y);break;case&quot;is&quot;:Ge(a,&quot;is&quot;,y);break;case&quot;innerText&quot;:case&quot;textContent&quot;:break;default:(!(2&lt;d.length)||d[0]!==&quot;o&quot;&amp;&amp;d[0]!==&quot;O&quot;||d[1]!==&quot;n&quot;&amp;&amp;d[1]!==&quot;N&quot;)&amp;&amp;(d=k.get(d)||d,Ge(a,d,y))}}function Yv(a,c,d,y,E,A){switch(d){case&quot;style&quot;:Dl(a,y,A);break;case&quot;dangerouslySetInnerHTML&quot;:if(y!=null){if(typeof y!=&quot;object&quot;||!(&quot;__html&quot;in y))throw Error(i(61));if(d=y.__html,d!=null){if(E.children!=null)throw Error(i(60));a.innerHTML=d}}break;case&quot;children&quot;:typeof y==&quot;string&quot;?Gr(a,y):(typeof y==&quot;number&quot;||typeof y==&quot;bigint&quot;)&amp;&amp;Gr(a,&quot;&quot;+y);break;case&quot;onScroll&quot;:y!=null&amp;&amp;an(&quot;scroll&quot;,a);break;case&quot;onScrollEnd&quot;:y!=null&amp;&amp;an(&quot;scrollend&quot;,a);break;case&quot;onClick&quot;:y!=null&amp;&amp;(a.onclick=qp);break;case&quot;suppressContentEditableWarning&quot;:case&quot;suppressHydrationWarning&quot;:case&quot;innerHTML&quot;:case&quot;ref&quot;:break;case&quot;innerText&quot;:case&quot;textContent&quot;:break;default:if(!Ma.hasOwnProperty(d))e:{if(d[0]===&quot;o&quot;&amp;&amp;d[1]===&quot;n&quot;&amp;&amp;(E=d.endsWith(&quot;Capture&quot;),c=d.slice(2,E?d.length-7:void 0),A=a[gi]||null,A=A!=null?A[d]:null,typeof A==&quot;function&quot;&amp;&amp;a.removeEventListener(c,A,E),typeof y==&quot;function&quot;)){typeof A!=&quot;function&quot;&amp;&amp;A!==null&amp;&amp;(d in a?a[d]=null:a.hasAttribute(d)&amp;&amp;a.removeAttribute(d)),a.addEventListener(c,y,E);break e}d in a?a[d]=y:y===!0?a.setAttribute(d,&quot;&quot;):Ge(a,d,y)}}}function ir(a,c,d){switch(c){case&quot;div&quot;:case&quot;span&quot;:case&quot;svg&quot;:case&quot;path&quot;:case&quot;a&quot;:case&quot;g&quot;:case&quot;p&quot;:case&quot;li&quot;:break;case&quot;img&quot;:an(&quot;error&quot;,a),an(&quot;load&quot;,a);var y=!1,E=!1,A;for(A in d)if(d.hasOwnProperty(A)){var U=d[A];if(U!=null)switch(A){case&quot;src&quot;:y=!0;break;case&quot;srcSet&quot;:E=!0;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:throw Error(i(137,c));default:Ln(a,c,A,U,d,null)}}E&amp;&amp;Ln(a,c,&quot;srcSet&quot;,d.srcSet,d,null),y&amp;&amp;Ln(a,c,&quot;src&quot;,d.src,d,null);return;case&quot;input&quot;:an(&quot;invalid&quot;,a);var W=A=U=E=null,se=null,_e=null;for(y in d)if(d.hasOwnProperty(y)){var Ne=d[y];if(Ne!=null)switch(y){case&quot;name&quot;:E=Ne;break;case&quot;type&quot;:U=Ne;break;case&quot;checked&quot;:se=Ne;break;case&quot;defaultChecked&quot;:_e=Ne;break;case&quot;value&quot;:A=Ne;break;case&quot;defaultValue&quot;:W=Ne;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(Ne!=null)throw Error(i(137,c));break;default:Ln(a,c,y,Ne,d,null)}}Mn(a,A,W,se,_e,U,E,!1),Hn(a);return;case&quot;select&quot;:an(&quot;invalid&quot;,a),y=U=A=null;for(E in d)if(d.hasOwnProperty(E)&amp;&amp;(W=d[E],W!=null))switch(E){case&quot;value&quot;:A=W;break;case&quot;defaultValue&quot;:U=W;break;case&quot;multiple&quot;:y=W;default:Ln(a,c,E,W,d,null)}c=A,d=U,a.multiple=!!y,c!=null?Qn(a,!!y,c,!1):d!=null&amp;&amp;Qn(a,!!y,d,!0);return;case&quot;textarea&quot;:an(&quot;invalid&quot;,a),A=E=y=null;for(U in d)if(d.hasOwnProperty(U)&amp;&amp;(W=d[U],W!=null))switch(U){case&quot;value&quot;:y=W;break;case&quot;defaultValue&quot;:E=W;break;case&quot;children&quot;:A=W;break;case&quot;dangerouslySetInnerHTML&quot;:if(W!=null)throw Error(i(91));break;default:Ln(a,c,U,W,d,null)}ai(a,y,E,A),Hn(a);return;case&quot;option&quot;:for(se in d)if(d.hasOwnProperty(se)&amp;&amp;(y=d[se],y!=null))switch(se){case&quot;selected&quot;:a.selected=y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;;break;default:Ln(a,c,se,y,d,null)}return;case&quot;dialog&quot;:an(&quot;beforetoggle&quot;,a),an(&quot;toggle&quot;,a),an(&quot;cancel&quot;,a),an(&quot;close&quot;,a);break;case&quot;iframe&quot;:case&quot;object&quot;:an(&quot;load&quot;,a);break;case&quot;video&quot;:case&quot;audio&quot;:for(y=0;y&lt;mf.length;y++)an(mf[y],a);break;case&quot;image&quot;:an(&quot;error&quot;,a),an(&quot;load&quot;,a);break;case&quot;details&quot;:an(&quot;toggle&quot;,a);break;case&quot;embed&quot;:case&quot;source&quot;:case&quot;link&quot;:an(&quot;error&quot;,a),an(&quot;load&quot;,a);case&quot;area&quot;:case&quot;base&quot;:case&quot;br&quot;:case&quot;col&quot;:case&quot;hr&quot;:case&quot;keygen&quot;:case&quot;meta&quot;:case&quot;param&quot;:case&quot;track&quot;:case&quot;wbr&quot;:case&quot;menuitem&quot;:for(_e in d)if(d.hasOwnProperty(_e)&amp;&amp;(y=d[_e],y!=null))switch(_e){case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:throw Error(i(137,c));default:Ln(a,c,_e,y,d,null)}return;default:if(B(c)){for(Ne in d)d.hasOwnProperty(Ne)&amp;&amp;(y=d[Ne],y!==void 0&amp;&amp;Yv(a,c,Ne,y,d,void 0));return}}for(W in d)d.hasOwnProperty(W)&amp;&amp;(y=d[W],y!=null&amp;&amp;Ln(a,c,W,y,d,null))}function tk(a,c,d,y){switch(c){case&quot;div&quot;:case&quot;span&quot;:case&quot;svg&quot;:case&quot;path&quot;:case&quot;a&quot;:case&quot;g&quot;:case&quot;p&quot;:case&quot;li&quot;:break;case&quot;input&quot;:var E=null,A=null,U=null,W=null,se=null,_e=null,Ne=null;for(Ee in d){var ke=d[Ee];if(d.hasOwnProperty(Ee)&amp;&amp;ke!=null)switch(Ee){case&quot;checked&quot;:break;case&quot;value&quot;:break;case&quot;defaultValue&quot;:se=ke;default:y.hasOwnProperty(Ee)||Ln(a,c,Ee,null,y,ke)}}for(var xe in y){var Ee=y[xe];if(ke=d[xe],y.hasOwnProperty(xe)&amp;&amp;(Ee!=null||ke!=null))switch(xe){case&quot;type&quot;:A=Ee;break;case&quot;name&quot;:E=Ee;break;case&quot;checked&quot;:_e=Ee;break;case&quot;defaultChecked&quot;:Ne=Ee;break;case&quot;value&quot;:U=Ee;break;case&quot;defaultValue&quot;:W=Ee;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(Ee!=null)throw Error(i(137,c));break;default:Ee!==ke&amp;&amp;Ln(a,c,xe,Ee,y,ke)}}Cr(a,U,W,se,_e,Ne,A,E);return;case&quot;select&quot;:Ee=U=W=xe=null;for(A in d)if(se=d[A],d.hasOwnProperty(A)&amp;&amp;se!=null)switch(A){case&quot;value&quot;:break;case&quot;multiple&quot;:Ee=se;default:y.hasOwnProperty(A)||Ln(a,c,A,null,y,se)}for(E in y)if(A=y[E],se=d[E],y.hasOwnProperty(E)&amp;&amp;(A!=null||se!=null))switch(E){case&quot;value&quot;:xe=A;break;case&quot;defaultValue&quot;:W=A;break;case&quot;multiple&quot;:U=A;default:A!==se&amp;&amp;Ln(a,c,E,A,y,se)}c=W,d=U,y=Ee,xe!=null?Qn(a,!!d,xe,!1):!!y!=!!d&amp;&amp;(c!=null?Qn(a,!!d,c,!0):Qn(a,!!d,d?[]:&quot;&quot;,!1));return;case&quot;textarea&quot;:Ee=xe=null;for(W in d)if(E=d[W],d.hasOwnProperty(W)&amp;&amp;E!=null&amp;&amp;!y.hasOwnProperty(W))switch(W){case&quot;value&quot;:break;case&quot;children&quot;:break;default:Ln(a,c,W,null,y,E)}for(U in y)if(E=y[U],A=d[U],y.hasOwnProperty(U)&amp;&amp;(E!=null||A!=null))switch(U){case&quot;value&quot;:xe=E;break;case&quot;defaultValue&quot;:Ee=E;break;case&quot;children&quot;:break;case&quot;dangerouslySetInnerHTML&quot;:if(E!=null)throw Error(i(91));break;default:E!==A&amp;&amp;Ln(a,c,U,E,y,A)}ei(a,xe,Ee);return;case&quot;option&quot;:for(var kt in d)if(xe=d[kt],d.hasOwnProperty(kt)&amp;&amp;xe!=null&amp;&amp;!y.hasOwnProperty(kt))switch(kt){case&quot;selected&quot;:a.selected=!1;break;default:Ln(a,c,kt,null,y,xe)}for(se in y)if(xe=y[se],Ee=d[se],y.hasOwnProperty(se)&amp;&amp;xe!==Ee&amp;&amp;(xe!=null||Ee!=null))switch(se){case&quot;selected&quot;:a.selected=xe&amp;&amp;typeof xe!=&quot;function&quot;&amp;&amp;typeof xe!=&quot;symbol&quot;;break;default:Ln(a,c,se,xe,y,Ee)}return;case&quot;img&quot;:case&quot;link&quot;:case&quot;area&quot;:case&quot;base&quot;:case&quot;br&quot;:case&quot;col&quot;:case&quot;embed&quot;:case&quot;hr&quot;:case&quot;keygen&quot;:case&quot;meta&quot;:case&quot;param&quot;:case&quot;source&quot;:case&quot;track&quot;:case&quot;wbr&quot;:case&quot;menuitem&quot;:for(var Dt in d)xe=d[Dt],d.hasOwnProperty(Dt)&amp;&amp;xe!=null&amp;&amp;!y.hasOwnProperty(Dt)&amp;&amp;Ln(a,c,Dt,null,y,xe);for(_e in y)if(xe=y[_e],Ee=d[_e],y.hasOwnProperty(_e)&amp;&amp;xe!==Ee&amp;&amp;(xe!=null||Ee!=null))switch(_e){case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(xe!=null)throw Error(i(137,c));break;default:Ln(a,c,_e,xe,y,Ee)}return;default:if(B(c)){for(var Un in d)xe=d[Un],d.hasOwnProperty(Un)&amp;&amp;xe!==void 0&amp;&amp;!y.hasOwnProperty(Un)&amp;&amp;Yv(a,c,Un,void 0,y,xe);for(Ne in y)xe=y[Ne],Ee=d[Ne],!y.hasOwnProperty(Ne)||xe===Ee||xe===void 0&amp;&amp;Ee===void 0||Yv(a,c,Ne,xe,y,Ee);return}}for(var ge in d)xe=d[ge],d.hasOwnProperty(ge)&amp;&amp;xe!=null&amp;&amp;!y.hasOwnProperty(ge)&amp;&amp;Ln(a,c,ge,null,y,xe);for(ke in y)xe=y[ke],Ee=d[ke],!y.hasOwnProperty(ke)||xe===Ee||xe==null&amp;&amp;Ee==null||Ln(a,c,ke,xe,y,Ee)}var Kv=null,$v=null;function Yp(a){return a.nodeType===9?a:a.ownerDocument}function mM(a){switch(a){case&quot;http://www.w3.org/2000/svg&quot;:return 1;case&quot;http://www.w3.org/1998/Math/MathML&quot;:return 2;default:return 0}}function gM(a,c){if(a===0)switch(c){case&quot;svg&quot;:return 1;case&quot;math&quot;:return 2;default:return 0}return a===1&amp;&amp;c===&quot;foreignObject&quot;?0:a}function Zv(a,c){return a===&quot;textarea&quot;||a===&quot;noscript&quot;||typeof c.children==&quot;string&quot;||typeof c.children==&quot;number&quot;||typeof c.children==&quot;bigint&quot;||typeof c.dangerouslySetInnerHTML==&quot;object&quot;&amp;&amp;c.dangerouslySetInnerHTML!==null&amp;&amp;c.dangerouslySetInnerHTML.__html!=null}var Jv=null;function nk(){var a=window.event;return a&amp;&amp;a.type===&quot;popstate&quot;?a===Jv?!1:(Jv=a,!0):(Jv=null,!1)}var yM=typeof setTimeout==&quot;function&quot;?setTimeout:void 0,ik=typeof clearTimeout==&quot;function&quot;?clearTimeout:void 0,_M=typeof Promise==&quot;function&quot;?Promise:void 0,rk=typeof queueMicrotask==&quot;function&quot;?queueMicrotask:typeof _M&lt;&quot;u&quot;?function(a){return _M.resolve(null).then(a).catch(sk)}:yM;function sk(a){setTimeout(function(){throw a})}function Va(a){return a===&quot;head&quot;}function vM(a,c){var d=c,y=0,E=0;do{var A=d.nextSibling;if(a.removeChild(d),A&amp;&amp;A.nodeType===8)if(d=A.data,d===&quot;/$&quot;){if(0&lt;y&amp;&amp;8&gt;y){d=y;var U=a.ownerDocument;if(d&amp;1&amp;&amp;yf(U.documentElement),d&amp;2&amp;&amp;yf(U.body),d&amp;4)for(d=U.head,yf(d),U=d.firstChild;U;){var W=U.nextSibling,se=U.nodeName;U[Hr]||se===&quot;SCRIPT&quot;||se===&quot;STYLE&quot;||se===&quot;LINK&quot;&amp;&amp;U.rel.toLowerCase()===&quot;stylesheet&quot;||d.removeChild(U),U=W}}if(E===0){a.removeChild(A),Tf(c);return}E--}else d===&quot;$&quot;||d===&quot;$?&quot;||d===&quot;$!&quot;?E++:y=d.charCodeAt(0)-48;else y=0;d=A}while(d);Tf(c)}function Qv(a){var c=a.firstChild;for(c&amp;&amp;c.nodeType===10&amp;&amp;(c=c.nextSibling);c;){var d=c;switch(c=c.nextSibling,d.nodeName){case&quot;HTML&quot;:case&quot;HEAD&quot;:case&quot;BODY&quot;:Qv(d),cs(d);continue;case&quot;SCRIPT&quot;:case&quot;STYLE&quot;:continue;case&quot;LINK&quot;:if(d.rel.toLowerCase()===&quot;stylesheet&quot;)continue}a.removeChild(d)}}function ok(a,c,d,y){for(;a.nodeType===1;){var E=d;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&amp;&amp;(a.nodeName!==&quot;INPUT&quot;||a.type!==&quot;hidden&quot;))break}else if(y){if(!a[Hr])switch(c){case&quot;meta&quot;:if(!a.hasAttribute(&quot;itemprop&quot;))break;return a;case&quot;link&quot;:if(A=a.getAttribute(&quot;rel&quot;),A===&quot;stylesheet&quot;&amp;&amp;a.hasAttribute(&quot;data-precedence&quot;))break;if(A!==E.rel||a.getAttribute(&quot;href&quot;)!==(E.href==null||E.href===&quot;&quot;?null:E.href)||a.getAttribute(&quot;crossorigin&quot;)!==(E.crossOrigin==null?null:E.crossOrigin)||a.getAttribute(&quot;title&quot;)!==(E.title==null?null:E.title))break;return a;case&quot;style&quot;:if(a.hasAttribute(&quot;data-precedence&quot;))break;return a;case&quot;script&quot;:if(A=a.getAttribute(&quot;src&quot;),(A!==(E.src==null?null:E.src)||a.getAttribute(&quot;type&quot;)!==(E.type==null?null:E.type)||a.getAttribute(&quot;crossorigin&quot;)!==(E.crossOrigin==null?null:E.crossOrigin))&amp;&amp;A&amp;&amp;a.hasAttribute(&quot;async&quot;)&amp;&amp;!a.hasAttribute(&quot;itemprop&quot;))break;return a;default:return a}}else if(c===&quot;input&quot;&amp;&amp;a.type===&quot;hidden&quot;){var A=E.name==null?null:&quot;&quot;+E.name;if(E.type===&quot;hidden&quot;&amp;&amp;a.getAttribute(&quot;name&quot;)===A)return a}else return a;if(a=ks(a.nextSibling),a===null)break}return null}function ak(a,c,d){if(c===&quot;&quot;)return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!==&quot;INPUT&quot;||a.type!==&quot;hidden&quot;)&amp;&amp;!d||(a=ks(a.nextSibling),a===null))return null;return a}function eb(a){return a.data===&quot;$!&quot;||a.data===&quot;$?&quot;&amp;&amp;a.ownerDocument.readyState===&quot;complete&quot;}function lk(a,c){var d=a.ownerDocument;if(a.data!==&quot;$?&quot;||d.readyState===&quot;complete&quot;)c();else{var y=function(){c(),d.removeEventListener(&quot;DOMContentLoaded&quot;,y)};d.addEventListener(&quot;DOMContentLoaded&quot;,y),a._reactRetry=y}}function ks(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c===&quot;$&quot;||c===&quot;$!&quot;||c===&quot;$?&quot;||c===&quot;F!&quot;||c===&quot;F&quot;)break;if(c===&quot;/$&quot;)return null}}return a}var tb=null;function bM(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var d=a.data;if(d===&quot;$&quot;||d===&quot;$!&quot;||d===&quot;$?&quot;){if(c===0)return a;c--}else d===&quot;/$&quot;&amp;&amp;c++}a=a.previousSibling}return null}function xM(a,c,d){switch(c=Yp(d),a){case&quot;html&quot;:if(a=c.documentElement,!a)throw Error(i(452));return a;case&quot;head&quot;:if(a=c.head,!a)throw Error(i(453));return a;case&quot;body&quot;:if(a=c.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function yf(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);cs(a)}var ys=new Map,SM=new Set;function Kp(a){return typeof a.getRootNode==&quot;function&quot;?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var jo=j.d;j.d={f:ck,r:uk,D:hk,C:fk,L:dk,m:pk,X:gk,S:mk,M:yk};function ck(){var a=jo.f(),c=Bp();return a||c}function uk(a){var c=Ar(a);c!==null&amp;&amp;c.tag===5&amp;&amp;c.type===&quot;form&quot;?VE(c):jo.r(a)}var yu=typeof document&gt;&quot;u&quot;?null:document;function wM(a,c,d){var y=yu;if(y&amp;&amp;typeof c==&quot;string&quot;&amp;&amp;c){var E=bn(c);E=&#x27;link[rel=&quot;&#x27;+a+&#x27;&quot;][href=&quot;&#x27;+E+&#x27;&quot;]&#x27;,typeof d==&quot;string&quot;&amp;&amp;(E+=&#x27;[crossorigin=&quot;&#x27;+d+&#x27;&quot;]&#x27;),SM.has(E)||(SM.add(E),a={rel:a,crossOrigin:d,href:c},y.querySelector(E)===null&amp;&amp;(c=y.createElement(&quot;link&quot;),ir(c,&quot;link&quot;,a),Wn(c),y.head.appendChild(c)))}}function hk(a){jo.D(a),wM(&quot;dns-prefetch&quot;,a,null)}function fk(a,c){jo.C(a,c),wM(&quot;preconnect&quot;,a,c)}function dk(a,c,d){jo.L(a,c,d);var y=yu;if(y&amp;&amp;a&amp;&amp;c){var E=&#x27;link[rel=&quot;preload&quot;][as=&quot;&#x27;+bn(c)+&#x27;&quot;]&#x27;;c===&quot;image&quot;&amp;&amp;d&amp;&amp;d.imageSrcSet?(E+=&#x27;[imagesrcset=&quot;&#x27;+bn(d.imageSrcSet)+&#x27;&quot;]&#x27;,typeof d.imageSizes==&quot;string&quot;&amp;&amp;(E+=&#x27;[imagesizes=&quot;&#x27;+bn(d.imageSizes)+&#x27;&quot;]&#x27;)):E+=&#x27;[href=&quot;&#x27;+bn(a)+&#x27;&quot;]&#x27;;var A=E;switch(c){case&quot;style&quot;:A=_u(a);break;case&quot;script&quot;:A=vu(a)}ys.has(A)||(a=f({rel:&quot;preload&quot;,href:c===&quot;image&quot;&amp;&amp;d&amp;&amp;d.imageSrcSet?void 0:a,as:c},d),ys.set(A,a),y.querySelector(E)!==null||c===&quot;style&quot;&amp;&amp;y.querySelector(_f(A))||c===&quot;script&quot;&amp;&amp;y.querySelector(vf(A))||(c=y.createElement(&quot;link&quot;),ir(c,&quot;link&quot;,a),Wn(c),y.head.appendChild(c)))}}function pk(a,c){jo.m(a,c);var d=yu;if(d&amp;&amp;a){var y=c&amp;&amp;typeof c.as==&quot;string&quot;?c.as:&quot;script&quot;,E=&#x27;link[rel=&quot;modulepreload&quot;][as=&quot;&#x27;+bn(y)+&#x27;&quot;][href=&quot;&#x27;+bn(a)+&#x27;&quot;]&#x27;,A=E;switch(y){case&quot;audioworklet&quot;:case&quot;paintworklet&quot;:case&quot;serviceworker&quot;:case&quot;sharedworker&quot;:case&quot;worker&quot;:case&quot;script&quot;:A=vu(a)}if(!ys.has(A)&amp;&amp;(a=f({rel:&quot;modulepreload&quot;,href:a},c),ys.set(A,a),d.querySelector(E)===null)){switch(y){case&quot;audioworklet&quot;:case&quot;paintworklet&quot;:case&quot;serviceworker&quot;:case&quot;sharedworker&quot;:case&quot;worker&quot;:case&quot;script&quot;:if(d.querySelector(vf(A)))return}y=d.createElement(&quot;link&quot;),ir(y,&quot;link&quot;,a),Wn(y),d.head.appendChild(y)}}}function mk(a,c,d){jo.S(a,c,d);var y=yu;if(y&amp;&amp;a){var E=us(y).hoistableStyles,A=_u(a);c=c||&quot;default&quot;;var U=E.get(A);if(!U){var W={loading:0,preload:null};if(U=y.querySelector(_f(A)))W.loading=5;else{a=f({rel:&quot;stylesheet&quot;,href:a,&quot;data-precedence&quot;:c},d),(d=ys.get(A))&amp;&amp;nb(a,d);var se=U=y.createElement(&quot;link&quot;);Wn(se),ir(se,&quot;link&quot;,a),se._p=new Promise(function(_e,Ne){se.onload=_e,se.onerror=Ne}),se.addEventListener(&quot;load&quot;,function(){W.loading|=1}),se.addEventListener(&quot;error&quot;,function(){W.loading|=2}),W.loading|=4,$p(U,c,y)}U={type:&quot;stylesheet&quot;,instance:U,count:1,state:W},E.set(A,U)}}}function gk(a,c){jo.X(a,c);var d=yu;if(d&amp;&amp;a){var y=us(d).hoistableScripts,E=vu(a),A=y.get(E);A||(A=d.querySelector(vf(E)),A||(a=f({src:a,async:!0},c),(c=ys.get(E))&amp;&amp;ib(a,c),A=d.createElement(&quot;script&quot;),Wn(A),ir(A,&quot;link&quot;,a),d.head.appendChild(A)),A={type:&quot;script&quot;,instance:A,count:1,state:null},y.set(E,A))}}function yk(a,c){jo.M(a,c);var d=yu;if(d&amp;&amp;a){var y=us(d).hoistableScripts,E=vu(a),A=y.get(E);A||(A=d.querySelector(vf(E)),A||(a=f({src:a,async:!0,type:&quot;module&quot;},c),(c=ys.get(E))&amp;&amp;ib(a,c),A=d.createElement(&quot;script&quot;),Wn(A),ir(A,&quot;link&quot;,a),d.head.appendChild(A)),A={type:&quot;script&quot;,instance:A,count:1,state:null},y.set(E,A))}}function EM(a,c,d,y){var E=(E=ae.current)?Kp(E):null;if(!E)throw Error(i(446));switch(a){case&quot;meta&quot;:case&quot;title&quot;:return null;case&quot;style&quot;:return typeof d.precedence==&quot;string&quot;&amp;&amp;typeof d.href==&quot;string&quot;?(c=_u(d.href),d=us(E).hoistableStyles,y=d.get(c),y||(y={type:&quot;style&quot;,instance:null,count:0,state:null},d.set(c,y)),y):{type:&quot;void&quot;,instance:null,count:0,state:null};case&quot;link&quot;:if(d.rel===&quot;stylesheet&quot;&amp;&amp;typeof d.href==&quot;string&quot;&amp;&amp;typeof d.precedence==&quot;string&quot;){a=_u(d.href);var A=us(E).hoistableStyles,U=A.get(a);if(U||(E=E.ownerDocument||E,U={type:&quot;stylesheet&quot;,instance:null,count:0,state:{loading:0,preload:null}},A.set(a,U),(A=E.querySelector(_f(a)))&amp;&amp;!A._p&amp;&amp;(U.instance=A,U.state.loading=5),ys.has(a)||(d={rel:&quot;preload&quot;,as:&quot;style&quot;,href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ys.set(a,d),A||_k(E,a,d,U.state))),c&amp;&amp;y===null)throw Error(i(528,&quot;&quot;));return U}if(c&amp;&amp;y!==null)throw Error(i(529,&quot;&quot;));return null;case&quot;script&quot;:return c=d.async,d=d.src,typeof d==&quot;string&quot;&amp;&amp;c&amp;&amp;typeof c!=&quot;function&quot;&amp;&amp;typeof c!=&quot;symbol&quot;?(c=vu(d),d=us(E).hoistableScripts,y=d.get(c),y||(y={type:&quot;script&quot;,instance:null,count:0,state:null},d.set(c,y)),y):{type:&quot;void&quot;,instance:null,count:0,state:null};default:throw Error(i(444,a))}}function _u(a){return&#x27;href=&quot;&#x27;+bn(a)+&#x27;&quot;&#x27;}function _f(a){return&#x27;link[rel=&quot;stylesheet&quot;][&#x27;+a+&quot;]&quot;}function TM(a){return f({},a,{&quot;data-precedence&quot;:a.precedence,precedence:null})}function _k(a,c,d,y){a.querySelector(&#x27;link[rel=&quot;preload&quot;][as=&quot;style&quot;][&#x27;+c+&quot;]&quot;)?y.loading=1:(c=a.createElement(&quot;link&quot;),y.preload=c,c.addEventListener(&quot;load&quot;,function(){return y.loading|=1}),c.addEventListener(&quot;error&quot;,function(){return y.loading|=2}),ir(c,&quot;link&quot;,d),Wn(c),a.head.appendChild(c))}function vu(a){return&#x27;[src=&quot;&#x27;+bn(a)+&#x27;&quot;]&#x27;}function vf(a){return&quot;script[async]&quot;+a}function MM(a,c,d){if(c.count++,c.instance===null)switch(c.type){case&quot;style&quot;:var y=a.querySelector(&#x27;style[data-href~=&quot;&#x27;+bn(d.href)+&#x27;&quot;]&#x27;);if(y)return c.instance=y,Wn(y),y;var E=f({},d,{&quot;data-href&quot;:d.href,&quot;data-precedence&quot;:d.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement(&quot;style&quot;),Wn(y),ir(y,&quot;style&quot;,E),$p(y,d.precedence,a),c.instance=y;case&quot;stylesheet&quot;:E=_u(d.href);var A=a.querySelector(_f(E));if(A)return c.state.loading|=4,c.instance=A,Wn(A),A;y=TM(d),(E=ys.get(E))&amp;&amp;nb(y,E),A=(a.ownerDocument||a).createElement(&quot;link&quot;),Wn(A);var U=A;return U._p=new Promise(function(W,se){U.onload=W,U.onerror=se}),ir(A,&quot;link&quot;,y),c.state.loading|=4,$p(A,d.precedence,a),c.instance=A;case&quot;script&quot;:return A=vu(d.src),(E=a.querySelector(vf(A)))?(c.instance=E,Wn(E),E):(y=d,(E=ys.get(A))&amp;&amp;(y=f({},d),ib(y,E)),a=a.ownerDocument||a,E=a.createElement(&quot;script&quot;),Wn(E),ir(E,&quot;link&quot;,y),a.head.appendChild(E),c.instance=E);case&quot;void&quot;:return null;default:throw Error(i(443,c.type))}else c.type===&quot;stylesheet&quot;&amp;&amp;(c.state.loading&amp;4)===0&amp;&amp;(y=c.instance,c.state.loading|=4,$p(y,d.precedence,a));return c.instance}function $p(a,c,d){for(var y=d.querySelectorAll(&#x27;link[rel=&quot;stylesheet&quot;][data-precedence],style[data-precedence]&#x27;),E=y.length?y[y.length-1]:null,A=E,U=0;U&lt;y.length;U++){var W=y[U];if(W.dataset.precedence===c)A=W;else if(A!==E)break}A?A.parentNode.insertBefore(a,A.nextSibling):(c=d.nodeType===9?d.head:d,c.insertBefore(a,c.firstChild))}function nb(a,c){a.crossOrigin==null&amp;&amp;(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&amp;&amp;(a.referrerPolicy=c.referrerPolicy),a.title==null&amp;&amp;(a.title=c.title)}function ib(a,c){a.crossOrigin==null&amp;&amp;(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&amp;&amp;(a.referrerPolicy=c.referrerPolicy),a.integrity==null&amp;&amp;(a.integrity=c.integrity)}var Zp=null;function AM(a,c,d){if(Zp===null){var y=new Map,E=Zp=new Map;E.set(d,y)}else E=Zp,y=E.get(d),y||(y=new Map,E.set(d,y));if(y.has(a))return y;for(y.set(a,null),d=d.getElementsByTagName(a),E=0;E&lt;d.length;E++){var A=d[E];if(!(A[Hr]||A[Zn]||a===&quot;link&quot;&amp;&amp;A.getAttribute(&quot;rel&quot;)===&quot;stylesheet&quot;)&amp;&amp;A.namespaceURI!==&quot;http://www.w3.org/2000/svg&quot;){var U=A.getAttribute(c)||&quot;&quot;;U=a+U;var W=y.get(U);W?W.push(A):y.set(U,[A])}}return y}function CM(a,c,d){a=a.ownerDocument||a,a.head.insertBefore(d,c===&quot;title&quot;?a.querySelector(&quot;head &gt; title&quot;):null)}function vk(a,c,d){if(d===1||c.itemProp!=null)return!1;switch(a){case&quot;meta&quot;:case&quot;title&quot;:return!0;case&quot;style&quot;:if(typeof c.precedence!=&quot;string&quot;||typeof c.href!=&quot;string&quot;||c.href===&quot;&quot;)break;return!0;case&quot;link&quot;:if(typeof c.rel!=&quot;string&quot;||typeof c.href!=&quot;string&quot;||c.href===&quot;&quot;||c.onLoad||c.onError)break;switch(c.rel){case&quot;stylesheet&quot;:return a=c.disabled,typeof c.precedence==&quot;string&quot;&amp;&amp;a==null;default:return!0}case&quot;script&quot;:if(c.async&amp;&amp;typeof c.async!=&quot;function&quot;&amp;&amp;typeof c.async!=&quot;symbol&quot;&amp;&amp;!c.onLoad&amp;&amp;!c.onError&amp;&amp;c.src&amp;&amp;typeof c.src==&quot;string&quot;)return!0}return!1}function RM(a){return!(a.type===&quot;stylesheet&quot;&amp;&amp;(a.state.loading&amp;3)===0)}var bf=null;function bk(){}function xk(a,c,d){if(bf===null)throw Error(i(475));var y=bf;if(c.type===&quot;stylesheet&quot;&amp;&amp;(typeof d.media!=&quot;string&quot;||matchMedia(d.media).matches!==!1)&amp;&amp;(c.state.loading&amp;4)===0){if(c.instance===null){var E=_u(d.href),A=a.querySelector(_f(E));if(A){a=A._p,a!==null&amp;&amp;typeof a==&quot;object&quot;&amp;&amp;typeof a.then==&quot;function&quot;&amp;&amp;(y.count++,y=Jp.bind(y),a.then(y,y)),c.state.loading|=4,c.instance=A,Wn(A);return}A=a.ownerDocument||a,d=TM(d),(E=ys.get(E))&amp;&amp;nb(d,E),A=A.createElement(&quot;link&quot;),Wn(A);var U=A;U._p=new Promise(function(W,se){U.onload=W,U.onerror=se}),ir(A,&quot;link&quot;,d),c.instance=A}y.stylesheets===null&amp;&amp;(y.stylesheets=new Map),y.stylesheets.set(c,a),(a=c.state.preload)&amp;&amp;(c.state.loading&amp;3)===0&amp;&amp;(y.count++,c=Jp.bind(y),a.addEventListener(&quot;load&quot;,c),a.addEventListener(&quot;error&quot;,c))}}function Sk(){if(bf===null)throw Error(i(475));var a=bf;return a.stylesheets&amp;&amp;a.count===0&amp;&amp;rb(a,a.stylesheets),0&lt;a.count?function(c){var d=setTimeout(function(){if(a.stylesheets&amp;&amp;rb(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(d)}}:null}function Jp(){if(this.count--,this.count===0){if(this.stylesheets)rb(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Qp=null;function rb(a,c){a.stylesheets=null,a.unsuspend!==null&amp;&amp;(a.count++,Qp=new Map,c.forEach(wk,a),Qp=null,Jp.call(a))}function wk(a,c){if(!(c.state.loading&amp;4)){var d=Qp.get(a);if(d)var y=d.get(null);else{d=new Map,Qp.set(a,d);for(var E=a.querySelectorAll(&quot;link[data-precedence],style[data-precedence]&quot;),A=0;A&lt;E.length;A++){var U=E[A];(U.nodeName===&quot;LINK&quot;||U.getAttribute(&quot;media&quot;)!==&quot;not all&quot;)&amp;&amp;(d.set(U.dataset.precedence,U),y=U)}y&amp;&amp;d.set(null,y)}E=c.instance,U=E.getAttribute(&quot;data-precedence&quot;),A=d.get(U)||y,A===y&amp;&amp;d.set(null,E),d.set(U,E),this.count++,y=Jp.bind(this),E.addEventListener(&quot;load&quot;,y),E.addEventListener(&quot;error&quot;,y),A?A.parentNode.insertBefore(E,A.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(E,a.firstChild)),c.state.loading|=4}}var xf={$$typeof:w,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Ek(a,c,d,y,E,A,U,W){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function OM(a,c,d,y,E,A,U,W,se,_e,Ne,ke){return a=new Ek(a,c,d,U,W,se,_e,ke),c=1,A===!0&amp;&amp;(c|=24),A=Wr(3,null,null,c),a.current=A,A.stateNode=a,c=z_(),c.refCount++,a.pooledCache=c,c.refCount++,A.memoizedState={element:y,isDehydrated:d,cache:c},G_(A),a}function NM(a){return a?(a=$c,a):$c}function DM(a,c,d,y,E,A){E=NM(E),y.context===null?y.context=E:y.pendingContext=E,y=Ra(c),y.payload={element:d},A=A===void 0?null:A,A!==null&amp;&amp;(y.callback=A),d=Oa(a,y,c),d!==null&amp;&amp;($r(d,a,c),$h(d,a,c))}function IM(a,c){if(a=a.memoizedState,a!==null&amp;&amp;a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&amp;&amp;d&lt;c?d:c}}function sb(a,c){IM(a,c),(a=a.alternate)&amp;&amp;IM(a,c)}function PM(a){if(a.tag===13){var c=Kc(a,67108864);c!==null&amp;&amp;$r(c,a,67108864),sb(a,67108864)}}var em=!0;function Tk(a,c,d,y){var E=P.T;P.T=null;var A=j.p;try{j.p=2,ob(a,c,d,y)}finally{j.p=A,P.T=E}}function Mk(a,c,d,y){var E=P.T;P.T=null;var A=j.p;try{j.p=8,ob(a,c,d,y)}finally{j.p=A,P.T=E}}function ob(a,c,d,y){if(em){var E=ab(y);if(E===null)qv(a,c,y,tm,d),UM(a,y);else if(Ck(E,a,c,d,y))y.stopPropagation();else if(UM(a,y),c&amp;4&amp;&amp;-1&lt;Ak.indexOf(a)){for(;E!==null;){var A=Ar(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var U=st(A.pendingLanes);if(U!==0){var W=A;for(W.pendingLanes|=2,W.entangledLanes|=2;U;){var se=1&lt;&lt;31-ht(U);W.entanglements[1]|=se,U&amp;=~se}co(A),(Cn&amp;6)===0&amp;&amp;(Fp=Fe()+500,pf(0))}}break;case 13:W=Kc(A,2),W!==null&amp;&amp;$r(W,A,2),Bp(),sb(A,2)}if(A=ab(y),A===null&amp;&amp;qv(a,c,y,tm,d),A===E)break;E=A}E!==null&amp;&amp;y.stopPropagation()}else qv(a,c,y,null,d)}}function ab(a){return a=Te(a),lb(a)}var tm=null;function lb(a){if(tm=null,a=Mr(a),a!==null){var c=s(a);if(c===null)a=null;else{var d=c.tag;if(d===13){if(a=o(c),a!==null)return a;a=null}else if(d===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&amp;&amp;(a=null)}}return tm=a,null}function LM(a){switch(a){case&quot;beforetoggle&quot;:case&quot;cancel&quot;:case&quot;click&quot;:case&quot;close&quot;:case&quot;contextmenu&quot;:case&quot;copy&quot;:case&quot;cut&quot;:case&quot;auxclick&quot;:case&quot;dblclick&quot;:case&quot;dragend&quot;:case&quot;dragstart&quot;:case&quot;drop&quot;:case&quot;focusin&quot;:case&quot;focusout&quot;:case&quot;input&quot;:case&quot;invalid&quot;:case&quot;keydown&quot;:case&quot;keypress&quot;:case&quot;keyup&quot;:case&quot;mousedown&quot;:case&quot;mouseup&quot;:case&quot;paste&quot;:case&quot;pause&quot;:case&quot;play&quot;:case&quot;pointercancel&quot;:case&quot;pointerdown&quot;:case&quot;pointerup&quot;:case&quot;ratechange&quot;:case&quot;reset&quot;:case&quot;resize&quot;:case&quot;seeked&quot;:case&quot;submit&quot;:case&quot;toggle&quot;:case&quot;touchcancel&quot;:case&quot;touchend&quot;:case&quot;touchstart&quot;:case&quot;volumechange&quot;:case&quot;change&quot;:case&quot;selectionchange&quot;:case&quot;textInput&quot;:case&quot;compositionstart&quot;:case&quot;compositionend&quot;:case&quot;compositionupdate&quot;:case&quot;beforeblur&quot;:case&quot;afterblur&quot;:case&quot;beforeinput&quot;:case&quot;blur&quot;:case&quot;fullscreenchange&quot;:case&quot;focus&quot;:case&quot;hashchange&quot;:case&quot;popstate&quot;:case&quot;select&quot;:case&quot;selectstart&quot;:return 2;case&quot;drag&quot;:case&quot;dragenter&quot;:case&quot;dragexit&quot;:case&quot;dragleave&quot;:case&quot;dragover&quot;:case&quot;mousemove&quot;:case&quot;mouseout&quot;:case&quot;mouseover&quot;:case&quot;pointermove&quot;:case&quot;pointerout&quot;:case&quot;pointerover&quot;:case&quot;scroll&quot;:case&quot;touchmove&quot;:case&quot;wheel&quot;:case&quot;mouseenter&quot;:case&quot;mouseleave&quot;:case&quot;pointerenter&quot;:case&quot;pointerleave&quot;:return 8;case&quot;message&quot;:switch(De()){case mt:return 2;case ze:return 8;case te:case V:return 32;case pe:return 268435456;default:return 32}default:return 32}}var cb=!1,Ga=null,ja=null,Wa=null,Sf=new Map,wf=new Map,Xa=[],Ak=&quot;mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset&quot;.split(&quot; &quot;);function UM(a,c){switch(a){case&quot;focusin&quot;:case&quot;focusout&quot;:Ga=null;break;case&quot;dragenter&quot;:case&quot;dragleave&quot;:ja=null;break;case&quot;mouseover&quot;:case&quot;mouseout&quot;:Wa=null;break;case&quot;pointerover&quot;:case&quot;pointerout&quot;:Sf.delete(c.pointerId);break;case&quot;gotpointercapture&quot;:case&quot;lostpointercapture&quot;:wf.delete(c.pointerId)}}function Ef(a,c,d,y,E,A){return a===null||a.nativeEvent!==A?(a={blockedOn:c,domEventName:d,eventSystemFlags:y,nativeEvent:A,targetContainers:[E]},c!==null&amp;&amp;(c=Ar(c),c!==null&amp;&amp;PM(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,E!==null&amp;&amp;c.indexOf(E)===-1&amp;&amp;c.push(E),a)}function Ck(a,c,d,y,E){switch(c){case&quot;focusin&quot;:return Ga=Ef(Ga,a,c,d,y,E),!0;case&quot;dragenter&quot;:return ja=Ef(ja,a,c,d,y,E),!0;case&quot;mouseover&quot;:return Wa=Ef(Wa,a,c,d,y,E),!0;case&quot;pointerover&quot;:var A=E.pointerId;return Sf.set(A,Ef(Sf.get(A)||null,a,c,d,y,E)),!0;case&quot;gotpointercapture&quot;:return A=E.pointerId,wf.set(A,Ef(wf.get(A)||null,a,c,d,y,E)),!0}return!1}function kM(a){var c=Mr(a.target);if(c!==null){var d=s(c);if(d!==null){if(c=d.tag,c===13){if(c=o(d),c!==null){a.blockedOn=c,Gi(a.priority,function(){if(d.tag===13){var y=Kr();y=wn(y);var E=Kc(d,y);E!==null&amp;&amp;$r(E,d,y),sb(d,y)}});return}}else if(c===3&amp;&amp;d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function nm(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0&lt;c.length;){var d=ab(a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);J=y,d.target.dispatchEvent(y),J=null}else return c=Ar(d),c!==null&amp;&amp;PM(c),a.blockedOn=d,!1;c.shift()}return!0}function FM(a,c,d){nm(a)&amp;&amp;d.delete(c)}function Rk(){cb=!1,Ga!==null&amp;&amp;nm(Ga)&amp;&amp;(Ga=null),ja!==null&amp;&amp;nm(ja)&amp;&amp;(ja=null),Wa!==null&amp;&amp;nm(Wa)&amp;&amp;(Wa=null),Sf.forEach(FM),wf.forEach(FM)}function im(a,c){a.blockedOn===c&amp;&amp;(a.blockedOn=null,cb||(cb=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Rk)))}var rm=null;function zM(a){rm!==a&amp;&amp;(rm=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){rm===a&amp;&amp;(rm=null);for(var c=0;c&lt;a.length;c+=3){var d=a[c],y=a[c+1],E=a[c+2];if(typeof y!=&quot;function&quot;){if(lb(y||d)===null)continue;break}var A=Ar(d);A!==null&amp;&amp;(a.splice(c,3),c-=3,lv(A,{pending:!0,data:E,method:d.method,action:y},y,E))}}))}function Tf(a){function c(se){return im(se,a)}Ga!==null&amp;&amp;im(Ga,a),ja!==null&amp;&amp;im(ja,a),Wa!==null&amp;&amp;im(Wa,a),Sf.forEach(c),wf.forEach(c);for(var d=0;d&lt;Xa.length;d++){var y=Xa[d];y.blockedOn===a&amp;&amp;(y.blockedOn=null)}for(;0&lt;Xa.length&amp;&amp;(d=Xa[0],d.blockedOn===null);)kM(d),d.blockedOn===null&amp;&amp;Xa.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(y=0;y&lt;d.length;y+=3){var E=d[y],A=d[y+1],U=E[gi]||null;if(typeof A==&quot;function&quot;)U||zM(d);else if(U){var W=null;if(A&amp;&amp;A.hasAttribute(&quot;formAction&quot;)){if(E=A,U=A[gi]||null)W=U.formAction;else if(lb(E)!==null)continue}else W=U.action;typeof W==&quot;function&quot;?d[y+1]=W:(d.splice(y,3),y-=3),zM(d)}}}function ub(a){this._internalRoot=a}sm.prototype.render=ub.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(i(409));var d=c.current,y=Kr();DM(d,y,a,c,null,null)},sm.prototype.unmount=ub.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;DM(a.current,2,null,a,null,null),Bp(),c[ji]=null}};function sm(a){this._internalRoot=a}sm.prototype.unstable_scheduleHydration=function(a){if(a){var c=zt();a={blockedOn:null,target:a,priority:c};for(var d=0;d&lt;Xa.length&amp;&amp;c!==0&amp;&amp;c&lt;Xa[d].priority;d++);Xa.splice(d,0,a),d===0&amp;&amp;kM(a)}};var BM=e.version;if(BM!==&quot;19.1.0&quot;)throw Error(i(527,BM,&quot;19.1.0&quot;));j.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render==&quot;function&quot;?Error(i(188)):(a=Object.keys(a).join(&quot;,&quot;),Error(i(268,a)));return a=u(c),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var Ok={bundleType:0,version:&quot;19.1.0&quot;,rendererPackageName:&quot;react-dom&quot;,currentDispatcherRef:P,reconcilerVersion:&quot;19.1.0&quot;};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&lt;&quot;u&quot;){var om=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!om.isDisabled&amp;&amp;om.supportsFiber)try{Me=om.inject(Ok),Ze=om}catch{}}return Af.createRoot=function(a,c){if(!r(a))throw Error(i(299));var d=!1,y=&quot;&quot;,E=nT,A=iT,U=rT,W=null;return c!=null&amp;&amp;(c.unstable_strictMode===!0&amp;&amp;(d=!0),c.identifierPrefix!==void 0&amp;&amp;(y=c.identifierPrefix),c.onUncaughtError!==void 0&amp;&amp;(E=c.onUncaughtError),c.onCaughtError!==void 0&amp;&amp;(A=c.onCaughtError),c.onRecoverableError!==void 0&amp;&amp;(U=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&amp;&amp;(W=c.unstable_transitionCallbacks)),c=OM(a,1,!1,null,null,d,y,E,A,U,W,null),a[ji]=c.current,Xv(a),new ub(c)},Af.hydrateRoot=function(a,c,d){if(!r(a))throw Error(i(299));var y=!1,E=&quot;&quot;,A=nT,U=iT,W=rT,se=null,_e=null;return d!=null&amp;&amp;(d.unstable_strictMode===!0&amp;&amp;(y=!0),d.identifierPrefix!==void 0&amp;&amp;(E=d.identifierPrefix),d.onUncaughtError!==void 0&amp;&amp;(A=d.onUncaughtError),d.onCaughtError!==void 0&amp;&amp;(U=d.onCaughtError),d.onRecoverableError!==void 0&amp;&amp;(W=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&amp;&amp;(se=d.unstable_transitionCallbacks),d.formState!==void 0&amp;&amp;(_e=d.formState)),c=OM(a,1,!0,c,d??null,y,E,A,U,W,se,_e),c.context=NM(null),d=c.current,y=Kr(),y=wn(y),E=Ra(y),E.callback=null,Oa(d,E,y),d=y,c.current.lanes=d,Pe(c,d),co(c),a[ji]=c.current,Xv(a),new sm(c)},Af.version=&quot;19.1.0&quot;,Af}var $M;function Vk(){if($M)return fb.exports;$M=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&gt;&quot;u&quot;||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=&quot;function&quot;))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fb.exports=Hk(),fb.exports}var Gk=Vk(),re=zc();const _d=iy(re),ZM=n=&gt;{let e;const t=new Set,i=(h,f)=&gt;{const p=typeof h==&quot;function&quot;?h(e):h;if(!Object.is(p,e)){const m=e;e=f??(typeof p!=&quot;object&quot;||p===null)?p:Object.assign({},e,p),t.forEach(g=&gt;g(e,m))}},r=()=&gt;e,l={setState:i,getState:r,getInitialState:()=&gt;u,subscribe:h=&gt;(t.add(h),()=&gt;t.delete(h))},u=e=n(i,r,l);return l},jk=n=&gt;n?ZM(n):ZM,Wk=n=&gt;n;function Xk(n,e=Wk){const t=_d.useSyncExternalStore(n.subscribe,()=&gt;e(n.getState()),()=&gt;e(n.getInitialState()));return _d.useDebugValue(t),t}const JM=n=&gt;{const e=jk(n),t=i=&gt;Xk(e,i);return Object.assign(t,e),t},to=n=&gt;n?JM(n):JM,ow=to(n=&gt;({min:0,max:100,step:10,minColor:&quot;rgb(255, 0, 0)&quot;,maxColor:&quot;rgb(0, 255, 0)&quot;,setMin:e=&gt;n({min:e}),setMax:e=&gt;n({max:e}),setStep:e=&gt;n({step:e}),setMinColor:e=&gt;n({minColor:e}),setMaxColor:e=&gt;n({maxColor:e}),colorPalette:[[0,149/255,239/255],[1,0,0]],setColorPalette:e=&gt;n({colorPalette:e}),showLegend:!1,setShowLegend:e=&gt;n({showLegend:e})})),qk=()=&gt;{const{min:n,max:e,step:t,colorPalette:i,showLegend:r}=ow(),s=`rgb(${i[0].map(u=&gt;u*255).join(&quot;, &quot;)})`,o=`rgb(${i[1].map(u=&gt;u*255).join(&quot;, &quot;)})`,l={backgroundImage:`linear-gradient(to top, ${s}, ${o})`};return I.jsx(&quot;div&quot;,{className:r?&quot;w-20 h-80&quot;:&quot;w-0&quot;,children:I.jsx(&quot;div&quot;,{className:&quot;w-full h-full&quot;,style:l})})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const sy=&quot;176&quot;,Ec={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},_c={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},aN=0,oS=1,lN=2,Yk=3,Kk=0,aw=1,cN=2,_o=3,is=0,Sr=1,wi=2,da=0,Tc=1,aS=2,lS=3,cS=4,uN=5,ul=100,hN=101,fN=102,dN=103,pN=104,mN=200,gN=201,yN=202,_N=203,Xg=204,qg=205,vN=206,bN=207,xN=208,SN=209,wN=210,EN=211,TN=212,MN=213,AN=214,Yg=0,Kg=1,$g=2,Oc=3,Zg=4,Jg=5,Qg=6,e0=7,Wd=0,CN=1,RN=2,pa=0,ON=1,NN=2,DN=3,IN=4,PN=5,LN=6,UN=7,uS=&quot;attached&quot;,kN=&quot;detached&quot;,oy=300,_a=301,vl=302,vd=303,bd=304,Th=306,Ts=1e3,sr=1001,oh=1002,Ei=1003,ay=1004,$k=1004,vc=1005,Zk=1005,fi=1006,th=1007,Jk=1007,ts=1008,Qk=1008,zr=1009,lw=1010,cw=1011,ah=1012,ly=1013,va=1014,kr=1015,Mh=1016,cy=1017,uy=1018,lh=1020,uw=35902,hw=1021,fw=1022,dr=1023,ch=1026,uh=1027,Xd=1028,qd=1029,dw=1030,hy=1031,eF=1032,fy=1033,sd=33776,od=33777,ad=33778,ld=33779,t0=35840,n0=35841,i0=35842,r0=35843,s0=36196,o0=37492,a0=37496,l0=37808,c0=37809,u0=37810,h0=37811,f0=37812,d0=37813,p0=37814,m0=37815,g0=37816,y0=37817,_0=37818,v0=37819,b0=37820,x0=37821,cd=36492,S0=36494,w0=36495,pw=36283,E0=36284,T0=36285,M0=36286,FN=2200,zN=2201,BN=2202,hh=2300,fh=2301,Ng=2302,bc=2400,xc=2401,xd=2402,dy=2500,mw=2501,HN=0,gw=1,A0=2,VN=3200,GN=3201,tF=3202,nF=3203,Al=0,jN=1,ia=&quot;&quot;,Dn=&quot;srgb&quot;,pr=&quot;srgb-linear&quot;,Sd=&quot;linear&quot;,On=&quot;srgb&quot;,iF=0,hc=7680,rF=7681,sF=7682,oF=7683,aF=34055,lF=34056,cF=5386,uF=512,hF=513,fF=514,dF=515,pF=516,mF=517,gF=518,hS=519,WN=512,XN=513,qN=514,yw=515,YN=516,KN=517,$N=518,ZN=519,wd=35044,yF=35048,_F=35040,vF=35045,bF=35049,xF=35041,SF=35046,wF=35050,EF=35042,TF=&quot;100&quot;,fS=&quot;300 es&quot;,Ms=2e3,Ed=2001,MF={COMPUTE:&quot;compute&quot;,RENDER:&quot;render&quot;},AF={PERSPECTIVE:&quot;perspective&quot;,LINEAR:&quot;linear&quot;,FLAT:&quot;flat&quot;},CF={NORMAL:&quot;normal&quot;,CENTROID:&quot;centroid&quot;,SAMPLE:&quot;sample&quot;,FLAT_FIRST:&quot;flat first&quot;,FLAT_EITHER:&quot;flat either&quot;};let Ao=class{addEventListener(e,t){this._listeners===void 0&amp;&amp;(this._listeners={});const i=this._listeners;i[e]===void 0&amp;&amp;(i[e]=[]),i[e].indexOf(t)===-1&amp;&amp;i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&amp;&amp;i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&amp;&amp;r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s&lt;o;s++)r[s].call(this,e);e.target=null}}};const lr=[&quot;00&quot;,&quot;01&quot;,&quot;02&quot;,&quot;03&quot;,&quot;04&quot;,&quot;05&quot;,&quot;06&quot;,&quot;07&quot;,&quot;08&quot;,&quot;09&quot;,&quot;0a&quot;,&quot;0b&quot;,&quot;0c&quot;,&quot;0d&quot;,&quot;0e&quot;,&quot;0f&quot;,&quot;10&quot;,&quot;11&quot;,&quot;12&quot;,&quot;13&quot;,&quot;14&quot;,&quot;15&quot;,&quot;16&quot;,&quot;17&quot;,&quot;18&quot;,&quot;19&quot;,&quot;1a&quot;,&quot;1b&quot;,&quot;1c&quot;,&quot;1d&quot;,&quot;1e&quot;,&quot;1f&quot;,&quot;20&quot;,&quot;21&quot;,&quot;22&quot;,&quot;23&quot;,&quot;24&quot;,&quot;25&quot;,&quot;26&quot;,&quot;27&quot;,&quot;28&quot;,&quot;29&quot;,&quot;2a&quot;,&quot;2b&quot;,&quot;2c&quot;,&quot;2d&quot;,&quot;2e&quot;,&quot;2f&quot;,&quot;30&quot;,&quot;31&quot;,&quot;32&quot;,&quot;33&quot;,&quot;34&quot;,&quot;35&quot;,&quot;36&quot;,&quot;37&quot;,&quot;38&quot;,&quot;39&quot;,&quot;3a&quot;,&quot;3b&quot;,&quot;3c&quot;,&quot;3d&quot;,&quot;3e&quot;,&quot;3f&quot;,&quot;40&quot;,&quot;41&quot;,&quot;42&quot;,&quot;43&quot;,&quot;44&quot;,&quot;45&quot;,&quot;46&quot;,&quot;47&quot;,&quot;48&quot;,&quot;49&quot;,&quot;4a&quot;,&quot;4b&quot;,&quot;4c&quot;,&quot;4d&quot;,&quot;4e&quot;,&quot;4f&quot;,&quot;50&quot;,&quot;51&quot;,&quot;52&quot;,&quot;53&quot;,&quot;54&quot;,&quot;55&quot;,&quot;56&quot;,&quot;57&quot;,&quot;58&quot;,&quot;59&quot;,&quot;5a&quot;,&quot;5b&quot;,&quot;5c&quot;,&quot;5d&quot;,&quot;5e&quot;,&quot;5f&quot;,&quot;60&quot;,&quot;61&quot;,&quot;62&quot;,&quot;63&quot;,&quot;64&quot;,&quot;65&quot;,&quot;66&quot;,&quot;67&quot;,&quot;68&quot;,&quot;69&quot;,&quot;6a&quot;,&quot;6b&quot;,&quot;6c&quot;,&quot;6d&quot;,&quot;6e&quot;,&quot;6f&quot;,&quot;70&quot;,&quot;71&quot;,&quot;72&quot;,&quot;73&quot;,&quot;74&quot;,&quot;75&quot;,&quot;76&quot;,&quot;77&quot;,&quot;78&quot;,&quot;79&quot;,&quot;7a&quot;,&quot;7b&quot;,&quot;7c&quot;,&quot;7d&quot;,&quot;7e&quot;,&quot;7f&quot;,&quot;80&quot;,&quot;81&quot;,&quot;82&quot;,&quot;83&quot;,&quot;84&quot;,&quot;85&quot;,&quot;86&quot;,&quot;87&quot;,&quot;88&quot;,&quot;89&quot;,&quot;8a&quot;,&quot;8b&quot;,&quot;8c&quot;,&quot;8d&quot;,&quot;8e&quot;,&quot;8f&quot;,&quot;90&quot;,&quot;91&quot;,&quot;92&quot;,&quot;93&quot;,&quot;94&quot;,&quot;95&quot;,&quot;96&quot;,&quot;97&quot;,&quot;98&quot;,&quot;99&quot;,&quot;9a&quot;,&quot;9b&quot;,&quot;9c&quot;,&quot;9d&quot;,&quot;9e&quot;,&quot;9f&quot;,&quot;a0&quot;,&quot;a1&quot;,&quot;a2&quot;,&quot;a3&quot;,&quot;a4&quot;,&quot;a5&quot;,&quot;a6&quot;,&quot;a7&quot;,&quot;a8&quot;,&quot;a9&quot;,&quot;aa&quot;,&quot;ab&quot;,&quot;ac&quot;,&quot;ad&quot;,&quot;ae&quot;,&quot;af&quot;,&quot;b0&quot;,&quot;b1&quot;,&quot;b2&quot;,&quot;b3&quot;,&quot;b4&quot;,&quot;b5&quot;,&quot;b6&quot;,&quot;b7&quot;,&quot;b8&quot;,&quot;b9&quot;,&quot;ba&quot;,&quot;bb&quot;,&quot;bc&quot;,&quot;bd&quot;,&quot;be&quot;,&quot;bf&quot;,&quot;c0&quot;,&quot;c1&quot;,&quot;c2&quot;,&quot;c3&quot;,&quot;c4&quot;,&quot;c5&quot;,&quot;c6&quot;,&quot;c7&quot;,&quot;c8&quot;,&quot;c9&quot;,&quot;ca&quot;,&quot;cb&quot;,&quot;cc&quot;,&quot;cd&quot;,&quot;ce&quot;,&quot;cf&quot;,&quot;d0&quot;,&quot;d1&quot;,&quot;d2&quot;,&quot;d3&quot;,&quot;d4&quot;,&quot;d5&quot;,&quot;d6&quot;,&quot;d7&quot;,&quot;d8&quot;,&quot;d9&quot;,&quot;da&quot;,&quot;db&quot;,&quot;dc&quot;,&quot;dd&quot;,&quot;de&quot;,&quot;df&quot;,&quot;e0&quot;,&quot;e1&quot;,&quot;e2&quot;,&quot;e3&quot;,&quot;e4&quot;,&quot;e5&quot;,&quot;e6&quot;,&quot;e7&quot;,&quot;e8&quot;,&quot;e9&quot;,&quot;ea&quot;,&quot;eb&quot;,&quot;ec&quot;,&quot;ed&quot;,&quot;ee&quot;,&quot;ef&quot;,&quot;f0&quot;,&quot;f1&quot;,&quot;f2&quot;,&quot;f3&quot;,&quot;f4&quot;,&quot;f5&quot;,&quot;f6&quot;,&quot;f7&quot;,&quot;f8&quot;,&quot;f9&quot;,&quot;fa&quot;,&quot;fb&quot;,&quot;fc&quot;,&quot;fd&quot;,&quot;fe&quot;,&quot;ff&quot;];let QM=1234567;const Mc=Math.PI/180,dh=180/Math.PI;function ns(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(lr[n&amp;255]+lr[n&gt;&gt;8&amp;255]+lr[n&gt;&gt;16&amp;255]+lr[n&gt;&gt;24&amp;255]+&quot;-&quot;+lr[e&amp;255]+lr[e&gt;&gt;8&amp;255]+&quot;-&quot;+lr[e&gt;&gt;16&amp;15|64]+lr[e&gt;&gt;24&amp;255]+&quot;-&quot;+lr[t&amp;63|128]+lr[t&gt;&gt;8&amp;255]+&quot;-&quot;+lr[t&gt;&gt;16&amp;255]+lr[t&gt;&gt;24&amp;255]+lr[i&amp;255]+lr[i&gt;&gt;8&amp;255]+lr[i&gt;&gt;16&amp;255]+lr[i&gt;&gt;24&amp;255]).toLowerCase()}function Gt(n,e,t){return Math.max(e,Math.min(t,n))}function _w(n,e){return(n%e+e)%e}function RF(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function OF(n,e,t){return n!==e?(t-n)/(e-n):0}function ud(n,e,t){return(1-t)*n+t*e}function NF(n,e,t,i){return ud(n,e,1-Math.exp(-t*i))}function DF(n,e=1){return e-Math.abs(_w(n,e*2)-e)}function IF(n,e,t){return n&lt;=e?0:n&gt;=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function PF(n,e,t){return n&lt;=e?0:n&gt;=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function LF(n,e){return n+Math.floor(Math.random()*(e-n+1))}function UF(n,e){return n+Math.random()*(e-n)}function kF(n){return n*(.5-Math.random())}function FF(n){n!==void 0&amp;&amp;(QM=n);let e=QM+=1831565813;return e=Math.imul(e^e&gt;&gt;&gt;15,e|1),e^=e+Math.imul(e^e&gt;&gt;&gt;7,e|61),((e^e&gt;&gt;&gt;14)&gt;&gt;&gt;0)/4294967296}function zF(n){return n*Mc}function BF(n){return n*dh}function HF(n){return(n&amp;n-1)===0&amp;&amp;n!==0}function VF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function GF(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function jF(n,e,t,i,r){const s=Math.cos,o=Math.sin,l=s(t/2),u=o(t/2),h=s((e+i)/2),f=o((e+i)/2),p=s((e-i)/2),m=o((e-i)/2),g=s((i-e)/2),v=o((i-e)/2);switch(r){case&quot;XYX&quot;:n.set(l*f,u*p,u*m,l*h);break;case&quot;YZY&quot;:n.set(u*m,l*f,u*p,l*h);break;case&quot;ZXZ&quot;:n.set(u*p,u*m,l*f,l*h);break;case&quot;XZX&quot;:n.set(l*f,u*v,u*g,l*h);break;case&quot;YXY&quot;:n.set(u*g,l*f,u*v,l*h);break;case&quot;ZYZ&quot;:n.set(u*v,u*g,l*f,l*h);break;default:console.warn(&quot;THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: &quot;+r)}}function vr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error(&quot;Invalid component type.&quot;)}}function qt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error(&quot;Invalid component type.&quot;)}}const ra={DEG2RAD:Mc,RAD2DEG:dh,generateUUID:ns,clamp:Gt,euclideanModulo:_w,mapLinear:RF,inverseLerp:OF,lerp:ud,damp:NF,pingpong:DF,smoothstep:IF,smootherstep:PF,randInt:LF,randFloat:UF,randFloatSpread:kF,seededRandom:FF,degToRad:zF,radToDeg:BF,isPowerOfTwo:HF,ceilPowerOfTwo:VF,floorPowerOfTwo:GF,setQuaternionFromProperEuler:jF,normalize:qt,denormalize:vr};class Re{constructor(e=0,t=0){Re.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error(&quot;index is out of range: &quot;+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error(&quot;index is out of range: &quot;+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Gt(this.x,e.x,t.x),this.y=Gt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Gt(this.x,e,t),this.y=Gt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Gt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Gt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&amp;&amp;e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wt{constructor(e,t,i,r,s,o,l,u,h){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&amp;&amp;this.set(e,t,i,r,s,o,l,u,h)}set(e,t,i,r,s,o,l,u,h){const f=this.elements;return f[0]=e,f[1]=r,f[2]=l,f[3]=t,f[4]=s,f[5]=u,f[6]=i,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[3],u=i[6],h=i[1],f=i[4],p=i[7],m=i[2],g=i[5],v=i[8],x=r[0],b=r[3],_=r[6],T=r[1],w=r[4],S=r[7],C=r[2],O=r[5],M=r[8];return s[0]=o*x+l*T+u*C,s[3]=o*b+l*w+u*O,s[6]=o*_+l*S+u*M,s[1]=h*x+f*T+p*C,s[4]=h*b+f*w+p*O,s[7]=h*_+f*S+p*M,s[2]=m*x+g*T+v*C,s[5]=m*b+g*w+v*O,s[8]=m*_+g*S+v*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8];return t*o*f-t*l*h-i*s*f+i*l*u+r*s*h-r*o*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8],p=f*o-l*h,m=l*u-f*s,g=h*s-o*u,v=t*p+i*m+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=p*x,e[1]=(r*h-f*i)*x,e[2]=(l*i-r*o)*x,e[3]=m*x,e[4]=(f*t-r*u)*x,e[5]=(r*s-l*t)*x,e[6]=g*x,e[7]=(i*u-h*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,l){const u=Math.cos(s),h=Math.sin(s);return this.set(i*u,i*h,-i*(u*o+h*l)+o+e,-r*h,r*u,-r*(-h*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(yb.makeScale(e,t)),this}rotate(e){return this.premultiply(yb.makeRotation(-e)),this}translate(e,t){return this.premultiply(yb.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r&lt;9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i&lt;9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const yb=new Wt;function JN(n){for(let e=n.length-1;e&gt;=0;--e)if(n[e]&gt;=65535)return!0;return!1}const WF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Zu(n,e){return new WF[n](e)}function Td(n){return document.createElementNS(&quot;http://www.w3.org/1999/xhtml&quot;,n)}function QN(){const n=Td(&quot;canvas&quot;);return n.style.display=&quot;block&quot;,n}const eA={};function Dg(n){n in eA||(eA[n]=!0,console.warn(n))}function XF(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function qF(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function YF(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const tA=new Wt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),nA=new Wt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function KF(){const n={enabled:!0,workingColorSpace:pr,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===On&amp;&amp;(r.r=ma(r.r),r.g=ma(r.g),r.b=ma(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&amp;&amp;(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===On&amp;&amp;(r.r=nh(r.r),r.g=nh(r.g),r.b=nh(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===ia?Sd:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[pr]:{primaries:e,whitePoint:i,transfer:Sd,toXYZ:tA,fromXYZ:nA,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Dn},outputColorSpaceConfig:{drawingBufferColorSpace:Dn}},[Dn]:{primaries:e,whitePoint:i,transfer:On,toXYZ:tA,fromXYZ:nA,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Dn}}}),n}const Jt=KF();function ma(n){return n&lt;.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function nh(n){return n&lt;.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let bu;class eD{static getDataURL(e,t=&quot;image/png&quot;){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement&gt;&quot;u&quot;)return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{bu===void 0&amp;&amp;(bu=Td(&quot;canvas&quot;)),bu.width=e.width,bu.height=e.height;const r=bu.getContext(&quot;2d&quot;);e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=bu}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;e instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;e instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;e instanceof ImageBitmap){const t=Td(&quot;canvas&quot;);t.width=e.width,t.height=e.height;const i=t.getContext(&quot;2d&quot;);i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o&lt;s.length;o++)s[o]=ma(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i&lt;t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(ma(t[i]/255)*255):t[i]=ma(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn(&quot;THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.&quot;),e}}let $F=0;class pl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,&quot;id&quot;,{value:$F++}),this.uuid=ns(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&amp;&amp;this.version++}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;;if(!t&amp;&amp;e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:&quot;&quot;},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o&lt;l;o++)r[o].isDataTexture?s.push(_b(r[o].image)):s.push(_b(r[o]))}else s=_b(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function _b(n){return typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;n instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;n instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;n instanceof ImageBitmap?eD.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn(&quot;THREE.Texture: Unable to serialize Texture.&quot;),{})}let ZF=0;class Kn extends Ao{constructor(e=Kn.DEFAULT_IMAGE,t=Kn.DEFAULT_MAPPING,i=sr,r=sr,s=fi,o=ts,l=dr,u=zr,h=Kn.DEFAULT_ANISOTROPY,f=ia){super(),this.isTexture=!0,Object.defineProperty(this,&quot;id&quot;,{value:ZF++}),this.uuid=ns(),this.name=&quot;&quot;,this.source=new pl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Re(0,0),this.repeat=new Re(1,1),this.center=new Re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;;if(!t&amp;&amp;e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:&quot;Texture&quot;,generator:&quot;Texture.toJSON&quot;},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length&gt;0&amp;&amp;(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}transformUv(e){if(this.mapping!==oy)return e;if(e.applyMatrix3(this.matrix),e.x&lt;0||e.x&gt;1)switch(this.wrapS){case Ts:e.x=e.x-Math.floor(e.x);break;case sr:e.x=e.x&lt;0?0:1;break;case oh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y&lt;0||e.y&gt;1)switch(this.wrapT){case Ts:e.y=e.y-Math.floor(e.y);break;case sr:e.y=e.y&lt;0?0:1;break;case oh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&amp;&amp;(e.y=1-e.y),e}set needsUpdate(e){e===!0&amp;&amp;(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&amp;&amp;this.pmremVersion++}}Kn.DEFAULT_IMAGE=null;Kn.DEFAULT_MAPPING=oy;Kn.DEFAULT_ANISOTROPY=1;class _n{constructor(e=0,t=0,i=0,r=1){_n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error(&quot;index is out of range: &quot;+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(&quot;index is out of range: &quot;+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t&lt;1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const u=e.elements,h=u[0],f=u[4],p=u[8],m=u[1],g=u[5],v=u[9],x=u[2],b=u[6],_=u[10];if(Math.abs(f-m)&lt;.01&amp;&amp;Math.abs(p-x)&lt;.01&amp;&amp;Math.abs(v-b)&lt;.01){if(Math.abs(f+m)&lt;.1&amp;&amp;Math.abs(p+x)&lt;.1&amp;&amp;Math.abs(v+b)&lt;.1&amp;&amp;Math.abs(h+g+_-3)&lt;.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(h+1)/2,S=(g+1)/2,C=(_+1)/2,O=(f+m)/4,M=(p+x)/4,N=(v+b)/4;return w&gt;S&amp;&amp;w&gt;C?w&lt;.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=O/i,s=M/i):S&gt;C?S&lt;.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),i=O/r,s=N/r):C&lt;.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=M/s,r=N/s),this.set(i,r,s,t),this}let T=Math.sqrt((b-v)*(b-v)+(p-x)*(p-x)+(m-f)*(m-f));return Math.abs(T)&lt;.001&amp;&amp;(T=1),this.x=(b-v)/T,this.y=(p-x)/T,this.z=(m-f)/T,this.w=Math.acos((h+g+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Gt(this.x,e.x,t.x),this.y=Gt(this.y,e.y,t.y),this.z=Gt(this.z,e.z,t.z),this.w=Gt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Gt(this.x,e,t),this.y=Gt(this.y,e,t),this.z=Gt(this.z,e,t),this.w=Gt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Gt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&amp;&amp;e.y===this.y&amp;&amp;e.z===this.z&amp;&amp;e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class py extends Ao{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new _n(0,0,e,t),this.scissorTest=!1,this.viewport=new _n(0,0,e,t);const r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:fi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);const s=new Kn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let l=0;l&lt;o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&amp;&amp;(this._depthTexture.renderTarget=null),e!==null&amp;&amp;(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r&lt;s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t&lt;i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new pl(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&amp;&amp;(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}}class As extends py{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Yd extends Kn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ei,this.minFilter=Ei,this.wrapR=sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class JF extends As{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Yd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class my extends Kn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ei,this.minFilter=Ei,this.wrapR=sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class QF extends As{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new my(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ti{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,l){let u=i[r+0],h=i[r+1],f=i[r+2],p=i[r+3];const m=s[o+0],g=s[o+1],v=s[o+2],x=s[o+3];if(l===0){e[t+0]=u,e[t+1]=h,e[t+2]=f,e[t+3]=p;return}if(l===1){e[t+0]=m,e[t+1]=g,e[t+2]=v,e[t+3]=x;return}if(p!==x||u!==m||h!==g||f!==v){let b=1-l;const _=u*m+h*g+f*v+p*x,T=_&gt;=0?1:-1,w=1-_*_;if(w&gt;Number.EPSILON){const C=Math.sqrt(w),O=Math.atan2(C,_*T);b=Math.sin(b*O)/C,l=Math.sin(l*O)/C}const S=l*T;if(u=u*b+m*S,h=h*b+g*S,f=f*b+v*S,p=p*b+x*S,b===1-l){const C=1/Math.sqrt(u*u+h*h+f*f+p*p);u*=C,h*=C,f*=C,p*=C}}e[t]=u,e[t+1]=h,e[t+2]=f,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const l=i[r],u=i[r+1],h=i[r+2],f=i[r+3],p=s[o],m=s[o+1],g=s[o+2],v=s[o+3];return e[t]=l*v+f*p+u*g-h*m,e[t+1]=u*v+f*m+h*p-l*g,e[t+2]=h*v+f*g+l*m-u*p,e[t+3]=f*v-l*p-u*m-h*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,u=Math.sin,h=l(i/2),f=l(r/2),p=l(s/2),m=u(i/2),g=u(r/2),v=u(s/2);switch(o){case&quot;XYZ&quot;:this._x=m*f*p+h*g*v,this._y=h*g*p-m*f*v,this._z=h*f*v+m*g*p,this._w=h*f*p-m*g*v;break;case&quot;YXZ&quot;:this._x=m*f*p+h*g*v,this._y=h*g*p-m*f*v,this._z=h*f*v-m*g*p,this._w=h*f*p+m*g*v;break;case&quot;ZXY&quot;:this._x=m*f*p-h*g*v,this._y=h*g*p+m*f*v,this._z=h*f*v+m*g*p,this._w=h*f*p-m*g*v;break;case&quot;ZYX&quot;:this._x=m*f*p-h*g*v,this._y=h*g*p+m*f*v,this._z=h*f*v-m*g*p,this._w=h*f*p+m*g*v;break;case&quot;YZX&quot;:this._x=m*f*p+h*g*v,this._y=h*g*p+m*f*v,this._z=h*f*v-m*g*p,this._w=h*f*p-m*g*v;break;case&quot;XZY&quot;:this._x=m*f*p-h*g*v,this._y=h*g*p-m*f*v,this._z=h*f*v+m*g*p,this._w=h*f*p+m*g*v;break;default:console.warn(&quot;THREE.Quaternion: .setFromEuler() encountered an unknown order: &quot;+o)}return t===!0&amp;&amp;this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],l=t[5],u=t[9],h=t[2],f=t[6],p=t[10],m=i+l+p;if(m&gt;0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(f-u)*g,this._y=(s-h)*g,this._z=(o-r)*g}else if(i&gt;l&amp;&amp;i&gt;p){const g=2*Math.sqrt(1+i-l-p);this._w=(f-u)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+h)/g}else if(l&gt;p){const g=2*Math.sqrt(1+l-i-p);this._w=(s-h)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(u+f)/g}else{const g=2*Math.sqrt(1+p-i-l);this._w=(o-r)/g,this._x=(s+h)/g,this._y=(u+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i&lt;Number.EPSILON?(i=0,Math.abs(e.x)&gt;Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,l=t._x,u=t._y,h=t._z,f=t._w;return this._x=i*f+o*l+r*h-s*u,this._y=r*f+o*u+s*l-i*h,this._z=s*f+o*h+i*u-r*l,this._w=o*f-i*l-r*u-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+i*e._x+r*e._y+s*e._z;if(l&lt;0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l&gt;=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const u=1-l*l;if(u&lt;=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const h=Math.sqrt(u),f=Math.atan2(h,l),p=Math.sin((1-t)*f)/h,m=Math.sin(t*f)/h;return this._w=o*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&amp;&amp;e._y===this._y&amp;&amp;e._z===this._z&amp;&amp;e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,i=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&amp;&amp;(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error(&quot;index is out of range: &quot;+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(&quot;index is out of range: &quot;+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(iA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(iA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,l=e.z,u=e.w,h=2*(o*r-l*i),f=2*(l*t-s*r),p=2*(s*i-o*t);return this.x=t+u*h+o*p-l*f,this.y=i+u*f+l*h-s*p,this.z=r+u*p+s*f-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Gt(this.x,e.x,t.x),this.y=Gt(this.y,e.y,t.y),this.z=Gt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Gt(this.x,e,t),this.y=Gt(this.y,e,t),this.z=Gt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Gt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*o-i*u,this.z=i*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return vb.copy(this).projectOnVector(e),this.sub(vb)}reflect(e){return this.sub(vb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Gt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&amp;&amp;e.y===this.y&amp;&amp;e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vb=new K,iA=new Ti;class di{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t&lt;i;t+=3)this.expandByPoint(Fs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t&lt;i;t++)this.expandByPoint(Fs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t&lt;i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Fs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x&lt;this.min.x||this.max.y&lt;this.min.y||this.max.z&lt;this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute(&quot;position&quot;);if(t===!0&amp;&amp;s!==void 0&amp;&amp;e.isInstancedMesh!==!0)for(let o=0,l=s.count;o&lt;l;o++)e.isMesh===!0?e.getVertexPosition(o,Fs):Fs.fromBufferAttribute(s,o),Fs.applyMatrix4(e.matrixWorld),this.expandByPoint(Fs);else e.boundingBox!==void 0?(e.boundingBox===null&amp;&amp;e.computeBoundingBox(),am.copy(e.boundingBox)):(i.boundingBox===null&amp;&amp;i.computeBoundingBox(),am.copy(i.boundingBox)),am.applyMatrix4(e.matrixWorld),this.union(am)}const r=e.children;for(let s=0,o=r.length;s&lt;o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x&gt;=this.min.x&amp;&amp;e.x&lt;=this.max.x&amp;&amp;e.y&gt;=this.min.y&amp;&amp;e.y&lt;=this.max.y&amp;&amp;e.z&gt;=this.min.z&amp;&amp;e.z&lt;=this.max.z}containsBox(e){return this.min.x&lt;=e.min.x&amp;&amp;e.max.x&lt;=this.max.x&amp;&amp;this.min.y&lt;=e.min.y&amp;&amp;e.max.y&lt;=this.max.y&amp;&amp;this.min.z&lt;=e.min.z&amp;&amp;e.max.z&lt;=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x&gt;=this.min.x&amp;&amp;e.min.x&lt;=this.max.x&amp;&amp;e.max.y&gt;=this.min.y&amp;&amp;e.min.y&lt;=this.max.y&amp;&amp;e.max.z&gt;=this.min.z&amp;&amp;e.min.z&lt;=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Fs),Fs.distanceToSquared(e.center)&lt;=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x&gt;0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y&gt;0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z&gt;0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t&lt;=-e.constant&amp;&amp;i&gt;=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Cf),lm.subVectors(this.max,Cf),xu.subVectors(e.a,Cf),Su.subVectors(e.b,Cf),wu.subVectors(e.c,Cf),Ya.subVectors(Su,xu),Ka.subVectors(wu,Su),Kl.subVectors(xu,wu);let t=[0,-Ya.z,Ya.y,0,-Ka.z,Ka.y,0,-Kl.z,Kl.y,Ya.z,0,-Ya.x,Ka.z,0,-Ka.x,Kl.z,0,-Kl.x,-Ya.y,Ya.x,0,-Ka.y,Ka.x,0,-Kl.y,Kl.x,0];return!bb(t,xu,Su,wu,lm)||(t=[1,0,0,0,1,0,0,0,1],!bb(t,xu,Su,wu,lm))?!1:(cm.crossVectors(Ya,Ka),t=[cm.x,cm.y,cm.z],bb(t,xu,Su,wu,lm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Fs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Fs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&amp;&amp;this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Wo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Wo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Wo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Wo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Wo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Wo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Wo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Wo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Wo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&amp;&amp;e.max.equals(this.max)}}const Wo=[new K,new K,new K,new K,new K,new K,new K,new K],Fs=new K,am=new di,xu=new K,Su=new K,wu=new K,Ya=new K,Ka=new K,Kl=new K,Cf=new K,lm=new K,cm=new K,$l=new K;function bb(n,e,t,i,r){for(let s=0,o=n.length-3;s&lt;=o;s+=3){$l.fromArray(n,s);const l=r.x*Math.abs($l.x)+r.y*Math.abs($l.y)+r.z*Math.abs($l.z),u=e.dot($l),h=t.dot($l),f=i.dot($l);if(Math.max(-Math.max(u,h,f),Math.min(u,h,f))&gt;l)return!1}return!0}const ez=new di,Rf=new K,xb=new K;class pi{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):ez.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s&lt;o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius&lt;0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)&lt;=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)&lt;=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))&lt;=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i&gt;this.radius*this.radius&amp;&amp;(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rf.subVectors(e,this.center);const t=Rf.lengthSq();if(t&gt;this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Rf,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rf.copy(e.center).add(xb)),this.expandByPoint(Rf.copy(e.center).sub(xb))),this)}equals(e){return e.center.equals(this.center)&amp;&amp;e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Xo=new K,Sb=new K,um=new K,$a=new K,wb=new K,hm=new K,Eb=new K;class Cl{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Xo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i&lt;0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Xo.subVectors(e,this.origin).dot(this.direction);return t&lt;0?this.origin.distanceToSquared(e):(Xo.copy(this.origin).addScaledVector(this.direction,t),Xo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Sb.copy(e).add(t).multiplyScalar(.5),um.copy(t).sub(e).normalize(),$a.copy(this.origin).sub(Sb);const s=e.distanceTo(t)*.5,o=-this.direction.dot(um),l=$a.dot(this.direction),u=-$a.dot(um),h=$a.lengthSq(),f=Math.abs(1-o*o);let p,m,g,v;if(f&gt;0)if(p=o*u-l,m=o*l-u,v=s*f,p&gt;=0)if(m&gt;=-v)if(m&lt;=v){const x=1/f;p*=x,m*=x,g=p*(p+o*m+2*l)+m*(o*p+m+2*u)+h}else m=s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*u)+h;else m=-s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*u)+h;else m&lt;=-v?(p=Math.max(0,-(-o*s+l)),m=p&gt;0?-s:Math.min(Math.max(-s,-u),s),g=-p*p+m*(m+2*u)+h):m&lt;=v?(p=0,m=Math.min(Math.max(-s,-u),s),g=m*(m+2*u)+h):(p=Math.max(0,-(o*s+l)),m=p&gt;0?s:Math.min(Math.max(-s,-u),s),g=-p*p+m*(m+2*u)+h);else m=o&gt;0?-s:s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*u)+h;return i&amp;&amp;i.copy(this.origin).addScaledVector(this.direction,p),r&amp;&amp;r.copy(Sb).addScaledVector(um,m),g}intersectSphere(e,t){Xo.subVectors(e.center,this.origin);const i=Xo.dot(this.direction),r=Xo.dot(Xo)-i*i,s=e.radius*e.radius;if(r&gt;s)return null;const o=Math.sqrt(s-r),l=i-o,u=i+o;return u&lt;0?null:l&lt;0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)&lt;=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i&gt;=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t&lt;0}intersectBox(e,t){let i,r,s,o,l,u;const h=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,m=this.origin;return h&gt;=0?(i=(e.min.x-m.x)*h,r=(e.max.x-m.x)*h):(i=(e.max.x-m.x)*h,r=(e.min.x-m.x)*h),f&gt;=0?(s=(e.min.y-m.y)*f,o=(e.max.y-m.y)*f):(s=(e.max.y-m.y)*f,o=(e.min.y-m.y)*f),i&gt;o||s&gt;r||((s&gt;i||isNaN(i))&amp;&amp;(i=s),(o&lt;r||isNaN(r))&amp;&amp;(r=o),p&gt;=0?(l=(e.min.z-m.z)*p,u=(e.max.z-m.z)*p):(l=(e.max.z-m.z)*p,u=(e.min.z-m.z)*p),i&gt;u||l&gt;r)||((l&gt;i||i!==i)&amp;&amp;(i=l),(u&lt;r||r!==r)&amp;&amp;(r=u),r&lt;0)?null:this.at(i&gt;=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Xo)!==null}intersectTriangle(e,t,i,r,s){wb.subVectors(t,e),hm.subVectors(i,e),Eb.crossVectors(wb,hm);let o=this.direction.dot(Eb),l;if(o&gt;0){if(r)return null;l=1}else if(o&lt;0)l=-1,o=-o;else return null;$a.subVectors(this.origin,e);const u=l*this.direction.dot(hm.crossVectors($a,hm));if(u&lt;0)return null;const h=l*this.direction.dot(wb.cross($a));if(h&lt;0||u+h&gt;o)return null;const f=-l*$a.dot(Eb);return f&lt;0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&amp;&amp;e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yt{constructor(e,t,i,r,s,o,l,u,h,f,p,m,g,v,x,b){yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&amp;&amp;this.set(e,t,i,r,s,o,l,u,h,f,p,m,g,v,x,b)}set(e,t,i,r,s,o,l,u,h,f,p,m,g,v,x,b){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=l,_[13]=u,_[2]=h,_[6]=f,_[10]=p,_[14]=m,_[3]=g,_[7]=v,_[11]=x,_[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Eu.setFromMatrixColumn(e,0).length(),s=1/Eu.setFromMatrixColumn(e,1).length(),o=1/Eu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),l=Math.sin(i),u=Math.cos(r),h=Math.sin(r),f=Math.cos(s),p=Math.sin(s);if(e.order===&quot;XYZ&quot;){const m=o*f,g=o*p,v=l*f,x=l*p;t[0]=u*f,t[4]=-u*p,t[8]=h,t[1]=g+v*h,t[5]=m-x*h,t[9]=-l*u,t[2]=x-m*h,t[6]=v+g*h,t[10]=o*u}else if(e.order===&quot;YXZ&quot;){const m=u*f,g=u*p,v=h*f,x=h*p;t[0]=m+x*l,t[4]=v*l-g,t[8]=o*h,t[1]=o*p,t[5]=o*f,t[9]=-l,t[2]=g*l-v,t[6]=x+m*l,t[10]=o*u}else if(e.order===&quot;ZXY&quot;){const m=u*f,g=u*p,v=h*f,x=h*p;t[0]=m-x*l,t[4]=-o*p,t[8]=v+g*l,t[1]=g+v*l,t[5]=o*f,t[9]=x-m*l,t[2]=-o*h,t[6]=l,t[10]=o*u}else if(e.order===&quot;ZYX&quot;){const m=o*f,g=o*p,v=l*f,x=l*p;t[0]=u*f,t[4]=v*h-g,t[8]=m*h+x,t[1]=u*p,t[5]=x*h+m,t[9]=g*h-v,t[2]=-h,t[6]=l*u,t[10]=o*u}else if(e.order===&quot;YZX&quot;){const m=o*u,g=o*h,v=l*u,x=l*h;t[0]=u*f,t[4]=x-m*p,t[8]=v*p+g,t[1]=p,t[5]=o*f,t[9]=-l*f,t[2]=-h*f,t[6]=g*p+v,t[10]=m-x*p}else if(e.order===&quot;XZY&quot;){const m=o*u,g=o*h,v=l*u,x=l*h;t[0]=u*f,t[4]=-p,t[8]=h*f,t[1]=m*p+x,t[5]=o*f,t[9]=g*p-v,t[2]=v*p-g,t[6]=l*f,t[10]=x*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tz,e,nz)}lookAt(e,t,i){const r=this.elements;return Zr.subVectors(e,t),Zr.lengthSq()===0&amp;&amp;(Zr.z=1),Zr.normalize(),Za.crossVectors(i,Zr),Za.lengthSq()===0&amp;&amp;(Math.abs(i.z)===1?Zr.x+=1e-4:Zr.z+=1e-4,Zr.normalize(),Za.crossVectors(i,Zr)),Za.normalize(),fm.crossVectors(Zr,Za),r[0]=Za.x,r[4]=fm.x,r[8]=Zr.x,r[1]=Za.y,r[5]=fm.y,r[9]=Zr.y,r[2]=Za.z,r[6]=fm.z,r[10]=Zr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[4],u=i[8],h=i[12],f=i[1],p=i[5],m=i[9],g=i[13],v=i[2],x=i[6],b=i[10],_=i[14],T=i[3],w=i[7],S=i[11],C=i[15],O=r[0],M=r[4],N=r[8],R=r[12],D=r[1],L=r[5],H=r[9],q=r[13],z=r[2],$=r[6],P=r[10],j=r[14],G=r[3],ee=r[7],F=r[11],ne=r[15];return s[0]=o*O+l*D+u*z+h*G,s[4]=o*M+l*L+u*$+h*ee,s[8]=o*N+l*H+u*P+h*F,s[12]=o*R+l*q+u*j+h*ne,s[1]=f*O+p*D+m*z+g*G,s[5]=f*M+p*L+m*$+g*ee,s[9]=f*N+p*H+m*P+g*F,s[13]=f*R+p*q+m*j+g*ne,s[2]=v*O+x*D+b*z+_*G,s[6]=v*M+x*L+b*$+_*ee,s[10]=v*N+x*H+b*P+_*F,s[14]=v*R+x*q+b*j+_*ne,s[3]=T*O+w*D+S*z+C*G,s[7]=T*M+w*L+S*$+C*ee,s[11]=T*N+w*H+S*P+C*F,s[15]=T*R+w*q+S*j+C*ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],l=e[5],u=e[9],h=e[13],f=e[2],p=e[6],m=e[10],g=e[14],v=e[3],x=e[7],b=e[11],_=e[15];return v*(+s*u*p-r*h*p-s*l*m+i*h*m+r*l*g-i*u*g)+x*(+t*u*g-t*h*m+s*o*m-r*o*g+r*h*f-s*u*f)+b*(+t*h*p-t*l*g-s*o*p+i*o*g+s*l*f-i*h*f)+_*(-r*l*f-t*u*p+t*l*m+r*o*p-i*o*m+i*u*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8],p=e[9],m=e[10],g=e[11],v=e[12],x=e[13],b=e[14],_=e[15],T=p*b*h-x*m*h+x*u*g-l*b*g-p*u*_+l*m*_,w=v*m*h-f*b*h-v*u*g+o*b*g+f*u*_-o*m*_,S=f*x*h-v*p*h+v*l*g-o*x*g-f*l*_+o*p*_,C=v*p*u-f*x*u-v*l*m+o*x*m+f*l*b-o*p*b,O=t*T+i*w+r*S+s*C;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/O;return e[0]=T*M,e[1]=(x*m*s-p*b*s-x*r*g+i*b*g+p*r*_-i*m*_)*M,e[2]=(l*b*s-x*u*s+x*r*h-i*b*h-l*r*_+i*u*_)*M,e[3]=(p*u*s-l*m*s-p*r*h+i*m*h+l*r*g-i*u*g)*M,e[4]=w*M,e[5]=(f*b*s-v*m*s+v*r*g-t*b*g-f*r*_+t*m*_)*M,e[6]=(v*u*s-o*b*s-v*r*h+t*b*h+o*r*_-t*u*_)*M,e[7]=(o*m*s-f*u*s+f*r*h-t*m*h-o*r*g+t*u*g)*M,e[8]=S*M,e[9]=(v*p*s-f*x*s-v*i*g+t*x*g+f*i*_-t*p*_)*M,e[10]=(o*x*s-v*l*s+v*i*h-t*x*h-o*i*_+t*l*_)*M,e[11]=(f*l*s-o*p*s-f*i*h+t*p*h+o*i*g-t*l*g)*M,e[12]=C*M,e[13]=(f*x*r-v*p*r+v*i*m-t*x*m-f*i*b+t*p*b)*M,e[14]=(v*l*r-o*x*r-v*i*u+t*x*u+o*i*b-t*l*b)*M,e[15]=(o*p*r-f*l*r+f*i*u-t*p*u-o*i*m+t*l*m)*M,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,l=e.y,u=e.z,h=s*o,f=s*l;return this.set(h*o+i,h*l-r*u,h*u+r*l,0,h*l+r*u,f*l+i,f*u-r*o,0,h*u-r*l,f*u+r*o,s*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,l=t._z,u=t._w,h=s+s,f=o+o,p=l+l,m=s*h,g=s*f,v=s*p,x=o*f,b=o*p,_=l*p,T=u*h,w=u*f,S=u*p,C=i.x,O=i.y,M=i.z;return r[0]=(1-(x+_))*C,r[1]=(g+S)*C,r[2]=(v-w)*C,r[3]=0,r[4]=(g-S)*O,r[5]=(1-(m+_))*O,r[6]=(b+T)*O,r[7]=0,r[8]=(v+w)*M,r[9]=(b-T)*M,r[10]=(1-(m+x))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Eu.set(r[0],r[1],r[2]).length();const o=Eu.set(r[4],r[5],r[6]).length(),l=Eu.set(r[8],r[9],r[10]).length();this.determinant()&lt;0&amp;&amp;(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],zs.copy(this);const h=1/s,f=1/o,p=1/l;return zs.elements[0]*=h,zs.elements[1]*=h,zs.elements[2]*=h,zs.elements[4]*=f,zs.elements[5]*=f,zs.elements[6]*=f,zs.elements[8]*=p,zs.elements[9]*=p,zs.elements[10]*=p,t.setFromRotationMatrix(zs),i.x=s,i.y=o,i.z=l,this}makePerspective(e,t,i,r,s,o,l=Ms){const u=this.elements,h=2*s/(t-e),f=2*s/(i-r),p=(t+e)/(t-e),m=(i+r)/(i-r);let g,v;if(l===Ms)g=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(l===Ed)g=-o/(o-s),v=-o*s/(o-s);else throw new Error(&quot;THREE.Matrix4.makePerspective(): Invalid coordinate system: &quot;+l);return u[0]=h,u[4]=0,u[8]=p,u[12]=0,u[1]=0,u[5]=f,u[9]=m,u[13]=0,u[2]=0,u[6]=0,u[10]=g,u[14]=v,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,s,o,l=Ms){const u=this.elements,h=1/(t-e),f=1/(i-r),p=1/(o-s),m=(t+e)*h,g=(i+r)*f;let v,x;if(l===Ms)v=(o+s)*p,x=-2*p;else if(l===Ed)v=s*p,x=-1*p;else throw new Error(&quot;THREE.Matrix4.makeOrthographic(): Invalid coordinate system: &quot;+l);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-m,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-g,u[2]=0,u[6]=0,u[10]=x,u[14]=-v,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r&lt;16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i&lt;16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Eu=new K,zs=new yt,tz=new K(0,0,0),nz=new K(1,1,1),Za=new K,fm=new K,Zr=new K,rA=new yt,sA=new Ti;class Er{constructor(e=0,t=0,i=0,r=Er.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],u=r[1],h=r[5],f=r[9],p=r[2],m=r[6],g=r[10];switch(t){case&quot;XYZ&quot;:this._y=Math.asin(Gt(l,-1,1)),Math.abs(l)&lt;.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,h),this._z=0);break;case&quot;YXZ&quot;:this._x=Math.asin(-Gt(f,-1,1)),Math.abs(f)&lt;.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-p,s),this._z=0);break;case&quot;ZXY&quot;:this._x=Math.asin(Gt(m,-1,1)),Math.abs(m)&lt;.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(u,s));break;case&quot;ZYX&quot;:this._y=Math.asin(-Gt(p,-1,1)),Math.abs(p)&lt;.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case&quot;YZX&quot;:this._z=Math.asin(Gt(u,-1,1)),Math.abs(u)&lt;.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,g));break;case&quot;XZY&quot;:this._z=Math.asin(-Gt(o,-1,1)),Math.abs(o)&lt;.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn(&quot;THREE.Euler: .setFromRotationMatrix() encountered an unknown order: &quot;+t)}return this._order=t,i===!0&amp;&amp;this._onChangeCallback(),this}setFromQuaternion(e,t,i){return rA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return sA.setFromEuler(this),this.setFromQuaternion(sA,e)}equals(e){return e._x===this._x&amp;&amp;e._y===this._y&amp;&amp;e._z===this._z&amp;&amp;e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&amp;&amp;(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Er.DEFAULT_ORDER=&quot;XYZ&quot;;class gy{constructor(){this.mask=1}set(e){this.mask=(1&lt;&lt;e|0)&gt;&gt;&gt;0}enable(e){this.mask|=1&lt;&lt;e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1&lt;&lt;e|0}disable(e){this.mask&amp;=~(1&lt;&lt;e|0)}disableAll(){this.mask=0}test(e){return(this.mask&amp;e.mask)!==0}isEnabled(e){return(this.mask&amp;(1&lt;&lt;e|0))!==0}}let iz=0;const oA=new K,Tu=new Ti,qo=new yt,dm=new K,Of=new K,rz=new K,sz=new Ti,aA=new K(1,0,0),lA=new K(0,1,0),cA=new K(0,0,1),uA={type:&quot;added&quot;},oz={type:&quot;removed&quot;},Mu={type:&quot;childadded&quot;,child:null},Tb={type:&quot;childremoved&quot;,child:null};class nn extends Ao{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,&quot;id&quot;,{value:iz++}),this.uuid=ns(),this.name=&quot;&quot;,this.type=&quot;Object3D&quot;,this.parent=null,this.children=[],this.up=nn.DEFAULT_UP.clone();const e=new K,t=new Er,i=new Ti,r=new K(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new yt},normalMatrix:{value:new Wt}}),this.matrix=new yt,this.matrixWorld=new yt,this.matrixAutoUpdate=nn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new gy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tu.setFromAxisAngle(e,t),this.quaternion.multiply(Tu),this}rotateOnWorldAxis(e,t){return Tu.setFromAxisAngle(e,t),this.quaternion.premultiply(Tu),this}rotateX(e){return this.rotateOnAxis(aA,e)}rotateY(e){return this.rotateOnAxis(lA,e)}rotateZ(e){return this.rotateOnAxis(cA,e)}translateOnAxis(e,t){return oA.copy(e).applyQuaternion(this.quaternion),this.position.add(oA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(aA,e)}translateY(e){return this.translateOnAxis(lA,e)}translateZ(e){return this.translateOnAxis(cA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(qo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?dm.copy(e):dm.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Of.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qo.lookAt(Of,dm,this.up):qo.lookAt(dm,Of,this.up),this.quaternion.setFromRotationMatrix(qo),r&amp;&amp;(qo.extractRotation(r.matrixWorld),Tu.setFromRotationMatrix(qo),this.quaternion.premultiply(Tu.invert()))}add(e){if(arguments.length&gt;1){for(let t=0;t&lt;arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error(&quot;THREE.Object3D.add: object can&#x27;t be added as a child of itself.&quot;,e),this):(e&amp;&amp;e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(uA),Mu.child=e,this.dispatchEvent(Mu),Mu.child=null):console.error(&quot;THREE.Object3D.add: object not an instance of THREE.Object3D.&quot;,e),this)}remove(e){if(arguments.length&gt;1){for(let i=0;i&lt;arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&amp;&amp;(e.parent=null,this.children.splice(t,1),e.dispatchEvent(oz),Tb.child=e,this.dispatchEvent(Tb),Tb.child=null),this}removeFromParent(){const e=this.parent;return e!==null&amp;&amp;e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),qo.copy(this.matrixWorld).invert(),e.parent!==null&amp;&amp;(e.parent.updateWorldMatrix(!0,!1),qo.multiply(e.parent.matrixWorld)),e.applyMatrix4(qo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(uA),Mu.child=e,this.dispatchEvent(Mu),Mu.child=null,this}getObjectById(e){return this.getObjectByProperty(&quot;id&quot;,e)}getObjectByName(e){return this.getObjectByProperty(&quot;name&quot;,e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i&lt;r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&amp;&amp;i.push(this);const r=this.children;for(let s=0,o=r.length;s&lt;o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Of,e,rz),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Of,sz,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i&lt;r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i&lt;r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&amp;&amp;(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&amp;&amp;(this.matrixWorldAutoUpdate===!0&amp;&amp;(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i&lt;r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&amp;&amp;i!==null&amp;&amp;i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),this.matrixWorldAutoUpdate===!0&amp;&amp;(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s&lt;o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;,i={};t&amp;&amp;(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:&quot;Object&quot;,generator:&quot;Object3D.toJSON&quot;});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==&quot;&quot;&amp;&amp;(r.name=this.name),this.castShadow===!0&amp;&amp;(r.castShadow=!0),this.receiveShadow===!0&amp;&amp;(r.receiveShadow=!0),this.visible===!1&amp;&amp;(r.visible=!1),this.frustumCulled===!1&amp;&amp;(r.frustumCulled=!1),this.renderOrder!==0&amp;&amp;(r.renderOrder=this.renderOrder),Object.keys(this.userData).length&gt;0&amp;&amp;(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&amp;&amp;(r.matrixAutoUpdate=!1),this.isInstancedMesh&amp;&amp;(r.type=&quot;InstancedMesh&quot;,r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&amp;&amp;(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&amp;&amp;(r.type=&quot;BatchedMesh&quot;,r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(l=&gt;({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),r.instanceInfo=this._instanceInfo.map(l=&gt;({...l})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&amp;&amp;(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&amp;&amp;(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&amp;&amp;(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&amp;&amp;(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&amp;&amp;(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&amp;&amp;(r.background=this.background.toJSON(e).uuid)),this.environment&amp;&amp;this.environment.isTexture&amp;&amp;this.environment.isRenderTargetTexture!==!0&amp;&amp;(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&amp;&amp;l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let h=0,f=u.length;h&lt;f;h++){const p=u[h];s(e.shapes,p)}else s(e.shapes,u)}}if(this.isSkinnedMesh&amp;&amp;(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&amp;&amp;(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,h=this.material.length;u&lt;h;u++)l.push(s(e.materials,this.material[u]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length&gt;0){r.children=[];for(let l=0;l&lt;this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length&gt;0){r.animations=[];for(let l=0;l&lt;this.animations.length;l++){const u=this.animations[l];r.animations.push(s(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),h=o(e.textures),f=o(e.images),p=o(e.shapes),m=o(e.skeletons),g=o(e.animations),v=o(e.nodes);l.length&gt;0&amp;&amp;(i.geometries=l),u.length&gt;0&amp;&amp;(i.materials=u),h.length&gt;0&amp;&amp;(i.textures=h),f.length&gt;0&amp;&amp;(i.images=f),p.length&gt;0&amp;&amp;(i.shapes=p),m.length&gt;0&amp;&amp;(i.skeletons=m),g.length&gt;0&amp;&amp;(i.animations=g),v.length&gt;0&amp;&amp;(i.nodes=v)}return i.object=r,i;function o(l){const u=[];for(const h in l){const f=l[h];delete f.metadata,u.push(f)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i&lt;e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}nn.DEFAULT_UP=new K(0,1,0);nn.DEFAULT_MATRIX_AUTO_UPDATE=!0;nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Bs=new K,Yo=new K,Mb=new K,Ko=new K,Au=new K,Cu=new K,hA=new K,Ab=new K,Cb=new K,Rb=new K,Ob=new _n,Nb=new _n,Db=new _n;class br{constructor(e=new K,t=new K,i=new K){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Bs.subVectors(e,t),r.cross(Bs);const s=r.lengthSq();return s&gt;0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Bs.subVectors(r,t),Yo.subVectors(i,t),Mb.subVectors(e,t);const o=Bs.dot(Bs),l=Bs.dot(Yo),u=Bs.dot(Mb),h=Yo.dot(Yo),f=Yo.dot(Mb),p=o*h-l*l;if(p===0)return s.set(0,0,0),null;const m=1/p,g=(h*u-l*f)*m,v=(o*f-l*u)*m;return s.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ko)===null?!1:Ko.x&gt;=0&amp;&amp;Ko.y&gt;=0&amp;&amp;Ko.x+Ko.y&lt;=1}static getInterpolation(e,t,i,r,s,o,l,u){return this.getBarycoord(e,t,i,r,Ko)===null?(u.x=0,u.y=0,&quot;z&quot;in u&amp;&amp;(u.z=0),&quot;w&quot;in u&amp;&amp;(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,Ko.x),u.addScaledVector(o,Ko.y),u.addScaledVector(l,Ko.z),u)}static getInterpolatedAttribute(e,t,i,r,s,o){return Ob.setScalar(0),Nb.setScalar(0),Db.setScalar(0),Ob.fromBufferAttribute(e,t),Nb.fromBufferAttribute(e,i),Db.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Ob,s.x),o.addScaledVector(Nb,s.y),o.addScaledVector(Db,s.z),o}static isFrontFacing(e,t,i,r){return Bs.subVectors(i,t),Yo.subVectors(e,t),Bs.cross(Yo).dot(r)&lt;0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Bs.subVectors(this.c,this.b),Yo.subVectors(this.a,this.b),Bs.cross(Yo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return br.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return br.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return br.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return br.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return br.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,l;Au.subVectors(r,i),Cu.subVectors(s,i),Ab.subVectors(e,i);const u=Au.dot(Ab),h=Cu.dot(Ab);if(u&lt;=0&amp;&amp;h&lt;=0)return t.copy(i);Cb.subVectors(e,r);const f=Au.dot(Cb),p=Cu.dot(Cb);if(f&gt;=0&amp;&amp;p&lt;=f)return t.copy(r);const m=u*p-f*h;if(m&lt;=0&amp;&amp;u&gt;=0&amp;&amp;f&lt;=0)return o=u/(u-f),t.copy(i).addScaledVector(Au,o);Rb.subVectors(e,s);const g=Au.dot(Rb),v=Cu.dot(Rb);if(v&gt;=0&amp;&amp;g&lt;=v)return t.copy(s);const x=g*h-u*v;if(x&lt;=0&amp;&amp;h&gt;=0&amp;&amp;v&lt;=0)return l=h/(h-v),t.copy(i).addScaledVector(Cu,l);const b=f*v-g*p;if(b&lt;=0&amp;&amp;p-f&gt;=0&amp;&amp;g-v&gt;=0)return hA.subVectors(s,r),l=(p-f)/(p-f+(g-v)),t.copy(r).addScaledVector(hA,l);const _=1/(b+x+m);return o=x*_,l=m*_,t.copy(i).addScaledVector(Au,o).addScaledVector(Cu,l)}equals(e){return e.a.equals(this.a)&amp;&amp;e.b.equals(this.b)&amp;&amp;e.c.equals(this.c)}}const tD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ja={h:0,s:0,l:0},pm={h:0,s:0,l:0};function Ib(n,e,t){return t&lt;0&amp;&amp;(t+=1),t&gt;1&amp;&amp;(t-=1),t&lt;1/6?n+(e-n)*6*t:t&lt;1/2?e:t&lt;2/3?n+(e-n)*6*(2/3-t):n}let Ye=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&amp;&amp;i===void 0){const r=e;r&amp;&amp;r.isColor?this.copy(r):typeof r==&quot;number&quot;?this.setHex(r):typeof r==&quot;string&quot;&amp;&amp;this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Dn){return e=Math.floor(e),this.r=(e&gt;&gt;16&amp;255)/255,this.g=(e&gt;&gt;8&amp;255)/255,this.b=(e&amp;255)/255,Jt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Jt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Jt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Jt.workingColorSpace){if(e=_w(e,1),t=Gt(t,0,1),i=Gt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i&lt;=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Ib(o,s,e+1/3),this.g=Ib(o,s,e),this.b=Ib(o,s,e-1/3)}return Jt.toWorkingColorSpace(this,r),this}setStyle(e,t=Dn){function i(s){s!==void 0&amp;&amp;parseFloat(s)&lt;1&amp;&amp;console.warn(&quot;THREE.Color: Alpha component of &quot;+e+&quot; will be ignored.&quot;)}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case&quot;rgb&quot;:case&quot;rgba&quot;:if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case&quot;hsl&quot;:case&quot;hsla&quot;:if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn(&quot;THREE.Color: Unknown color model &quot;+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn(&quot;THREE.Color: Invalid hex color &quot;+e)}else if(e&amp;&amp;e.length&gt;0)return this.setColorName(e,t);return this}setColorName(e,t=Dn){const i=tD[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn(&quot;THREE.Color: Unknown color &quot;+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ma(e.r),this.g=ma(e.g),this.b=ma(e.b),this}copyLinearToSRGB(e){return this.r=nh(e.r),this.g=nh(e.g),this.b=nh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Dn){return Jt.fromWorkingColorSpace(cr.copy(this),e),Math.round(Gt(cr.r*255,0,255))*65536+Math.round(Gt(cr.g*255,0,255))*256+Math.round(Gt(cr.b*255,0,255))}getHexString(e=Dn){return(&quot;000000&quot;+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Jt.workingColorSpace){Jt.fromWorkingColorSpace(cr.copy(this),t);const i=cr.r,r=cr.g,s=cr.b,o=Math.max(i,r,s),l=Math.min(i,r,s);let u,h;const f=(l+o)/2;if(l===o)u=0,h=0;else{const p=o-l;switch(h=f&lt;=.5?p/(o+l):p/(2-o-l),o){case i:u=(r-s)/p+(r&lt;s?6:0);break;case r:u=(s-i)/p+2;break;case s:u=(i-r)/p+4;break}u/=6}return e.h=u,e.s=h,e.l=f,e}getRGB(e,t=Jt.workingColorSpace){return Jt.fromWorkingColorSpace(cr.copy(this),t),e.r=cr.r,e.g=cr.g,e.b=cr.b,e}getStyle(e=Dn){Jt.fromWorkingColorSpace(cr.copy(this),e);const t=cr.r,i=cr.g,r=cr.b;return e!==Dn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ja),this.setHSL(Ja.h+e,Ja.s+t,Ja.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ja),e.getHSL(pm);const i=ud(Ja.h,pm.h,t),r=ud(Ja.s,pm.s,t),s=ud(Ja.l,pm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&amp;&amp;e.g===this.g&amp;&amp;e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const cr=new Ye;Ye.NAMES=tD;let az=0;class Di extends Ao{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,&quot;id&quot;,{value:az++}),this.uuid=ns(),this.name=&quot;&quot;,this.type=&quot;Material&quot;,this.blending=Tc,this.side=is,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Xg,this.blendDst=qg,this.blendEquation=ul,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ye(0,0,0),this.blendAlpha=0,this.depthFunc=Oc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=hS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hc,this.stencilZFail=hc,this.stencilZPass=hc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest&gt;0!=e&gt;0&amp;&amp;this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter &#x27;${t}&#x27; has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: &#x27;${t}&#x27; is not a property of THREE.${this.type}.`);continue}r&amp;&amp;r.isColor?r.set(i):r&amp;&amp;r.isVector3&amp;&amp;i&amp;&amp;i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;;t&amp;&amp;(e={textures:{},images:{}});const i={metadata:{version:4.6,type:&quot;Material&quot;,generator:&quot;Material.toJSON&quot;}};i.uuid=this.uuid,i.type=this.type,this.name!==&quot;&quot;&amp;&amp;(i.name=this.name),this.color&amp;&amp;this.color.isColor&amp;&amp;(i.color=this.color.getHex()),this.roughness!==void 0&amp;&amp;(i.roughness=this.roughness),this.metalness!==void 0&amp;&amp;(i.metalness=this.metalness),this.sheen!==void 0&amp;&amp;(i.sheen=this.sheen),this.sheenColor&amp;&amp;this.sheenColor.isColor&amp;&amp;(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&amp;&amp;(i.sheenRoughness=this.sheenRoughness),this.emissive&amp;&amp;this.emissive.isColor&amp;&amp;(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&amp;&amp;this.emissiveIntensity!==1&amp;&amp;(i.emissiveIntensity=this.emissiveIntensity),this.specular&amp;&amp;this.specular.isColor&amp;&amp;(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&amp;&amp;(i.specularIntensity=this.specularIntensity),this.specularColor&amp;&amp;this.specularColor.isColor&amp;&amp;(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&amp;&amp;(i.shininess=this.shininess),this.clearcoat!==void 0&amp;&amp;(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&amp;&amp;(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&amp;&amp;this.clearcoatMap.isTexture&amp;&amp;(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&amp;&amp;this.clearcoatRoughnessMap.isTexture&amp;&amp;(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&amp;&amp;this.clearcoatNormalMap.isTexture&amp;&amp;(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&amp;&amp;(i.dispersion=this.dispersion),this.iridescence!==void 0&amp;&amp;(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&amp;&amp;(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&amp;&amp;(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&amp;&amp;this.iridescenceMap.isTexture&amp;&amp;(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&amp;&amp;this.iridescenceThicknessMap.isTexture&amp;&amp;(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&amp;&amp;(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&amp;&amp;(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&amp;&amp;this.anisotropyMap.isTexture&amp;&amp;(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&amp;&amp;this.map.isTexture&amp;&amp;(i.map=this.map.toJSON(e).uuid),this.matcap&amp;&amp;this.matcap.isTexture&amp;&amp;(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&amp;&amp;this.alphaMap.isTexture&amp;&amp;(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&amp;&amp;this.lightMap.isTexture&amp;&amp;(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&amp;&amp;this.aoMap.isTexture&amp;&amp;(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&amp;&amp;this.bumpMap.isTexture&amp;&amp;(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&amp;&amp;this.normalMap.isTexture&amp;&amp;(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&amp;&amp;this.displacementMap.isTexture&amp;&amp;(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&amp;&amp;this.roughnessMap.isTexture&amp;&amp;(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&amp;&amp;this.metalnessMap.isTexture&amp;&amp;(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&amp;&amp;this.emissiveMap.isTexture&amp;&amp;(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&amp;&amp;this.specularMap.isTexture&amp;&amp;(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&amp;&amp;this.specularIntensityMap.isTexture&amp;&amp;(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&amp;&amp;this.specularColorMap.isTexture&amp;&amp;(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&amp;&amp;this.envMap.isTexture&amp;&amp;(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&amp;&amp;(i.combine=this.combine)),this.envMapRotation!==void 0&amp;&amp;(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&amp;&amp;(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&amp;&amp;(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&amp;&amp;(i.refractionRatio=this.refractionRatio),this.gradientMap&amp;&amp;this.gradientMap.isTexture&amp;&amp;(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&amp;&amp;(i.transmission=this.transmission),this.transmissionMap&amp;&amp;this.transmissionMap.isTexture&amp;&amp;(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&amp;&amp;(i.thickness=this.thickness),this.thicknessMap&amp;&amp;this.thicknessMap.isTexture&amp;&amp;(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&amp;&amp;this.attenuationDistance!==1/0&amp;&amp;(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&amp;&amp;(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&amp;&amp;(i.size=this.size),this.shadowSide!==null&amp;&amp;(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&amp;&amp;(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Tc&amp;&amp;(i.blending=this.blending),this.side!==is&amp;&amp;(i.side=this.side),this.vertexColors===!0&amp;&amp;(i.vertexColors=!0),this.opacity&lt;1&amp;&amp;(i.opacity=this.opacity),this.transparent===!0&amp;&amp;(i.transparent=!0),this.blendSrc!==Xg&amp;&amp;(i.blendSrc=this.blendSrc),this.blendDst!==qg&amp;&amp;(i.blendDst=this.blendDst),this.blendEquation!==ul&amp;&amp;(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&amp;&amp;(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&amp;&amp;(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&amp;&amp;(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&amp;&amp;this.blendColor.isColor&amp;&amp;(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&amp;&amp;(i.blendAlpha=this.blendAlpha),this.depthFunc!==Oc&amp;&amp;(i.depthFunc=this.depthFunc),this.depthTest===!1&amp;&amp;(i.depthTest=this.depthTest),this.depthWrite===!1&amp;&amp;(i.depthWrite=this.depthWrite),this.colorWrite===!1&amp;&amp;(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&amp;&amp;(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==hS&amp;&amp;(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&amp;&amp;(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&amp;&amp;(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==hc&amp;&amp;(i.stencilFail=this.stencilFail),this.stencilZFail!==hc&amp;&amp;(i.stencilZFail=this.stencilZFail),this.stencilZPass!==hc&amp;&amp;(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&amp;&amp;(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&amp;&amp;this.rotation!==0&amp;&amp;(i.rotation=this.rotation),this.polygonOffset===!0&amp;&amp;(i.polygonOffset=!0),this.polygonOffsetFactor!==0&amp;&amp;(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&amp;&amp;(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&amp;&amp;this.linewidth!==1&amp;&amp;(i.linewidth=this.linewidth),this.dashSize!==void 0&amp;&amp;(i.dashSize=this.dashSize),this.gapSize!==void 0&amp;&amp;(i.gapSize=this.gapSize),this.scale!==void 0&amp;&amp;(i.scale=this.scale),this.dithering===!0&amp;&amp;(i.dithering=!0),this.alphaTest&gt;0&amp;&amp;(i.alphaTest=this.alphaTest),this.alphaHash===!0&amp;&amp;(i.alphaHash=!0),this.alphaToCoverage===!0&amp;&amp;(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&amp;&amp;(i.premultipliedAlpha=!0),this.forceSinglePass===!0&amp;&amp;(i.forceSinglePass=!0),this.wireframe===!0&amp;&amp;(i.wireframe=!0),this.wireframeLinewidth&gt;1&amp;&amp;(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!==&quot;round&quot;&amp;&amp;(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!==&quot;round&quot;&amp;&amp;(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&amp;&amp;(i.flatShading=!0),this.visible===!1&amp;&amp;(i.visible=!1),this.toneMapped===!1&amp;&amp;(i.toneMapped=!1),this.fog===!1&amp;&amp;(i.fog=!1),Object.keys(this.userData).length&gt;0&amp;&amp;(i.userData=this.userData);function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length&gt;0&amp;&amp;(i.textures=s),o.length&gt;0&amp;&amp;(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}set needsUpdate(e){e===!0&amp;&amp;this.version++}}class zi extends Di{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type=&quot;MeshBasicMaterial&quot;,this.color=new Ye(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=Wd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const sa=lz();function lz(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u&lt;256;++u){const h=u-127;h&lt;-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):h&lt;-14?(i[u]=1024&gt;&gt;-h-14,i[u|256]=1024&gt;&gt;-h-14|32768,r[u]=-h-1,r[u|256]=-h-1):h&lt;=15?(i[u]=h+15&lt;&lt;10,i[u|256]=h+15&lt;&lt;10|32768,r[u]=13,r[u|256]=13):h&lt;128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u&lt;1024;++u){let h=u&lt;&lt;13,f=0;for(;(h&amp;8388608)===0;)h&lt;&lt;=1,f-=8388608;h&amp;=-8388609,f+=947912704,s[u]=h|f}for(let u=1024;u&lt;2048;++u)s[u]=939524096+(u-1024&lt;&lt;13);for(let u=1;u&lt;31;++u)o[u]=u&lt;&lt;23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u&lt;63;++u)o[u]=2147483648+(u-32&lt;&lt;23);o[63]=3347054592;for(let u=1;u&lt;64;++u)u!==32&amp;&amp;(l[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function Ur(n){Math.abs(n)&gt;65504&amp;&amp;console.warn(&quot;THREE.DataUtils.toHalfFloat(): Value out of range.&quot;),n=Gt(n,-65504,65504),sa.floatView[0]=n;const e=sa.uint32View[0],t=e&gt;&gt;23&amp;511;return sa.baseTable[t]+((e&amp;8388607)&gt;&gt;sa.shiftTable[t])}function Jf(n){const e=n&gt;&gt;10;return sa.uint32View[0]=sa.mantissaTable[sa.offsetTable[e]+(n&amp;1023)]+sa.exponentTable[e],sa.floatView[0]}class cz{static toHalfFloat(e){return Ur(e)}static fromHalfFloat(e){return Jf(e)}}const Ri=new K,mm=new Re;let uz=0;class Vt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError(&quot;THREE.BufferAttribute: array should be a Typed Array.&quot;);this.isBufferAttribute=!0,Object.defineProperty(this,&quot;id&quot;,{value:uz++}),this.name=&quot;&quot;,this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=wd,this.updateRanges=[],this.gpuType=kr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&amp;&amp;this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r&lt;s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t&lt;i;t++)mm.fromBufferAttribute(this,t),mm.applyMatrix3(e),this.setXY(t,mm.x,mm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t&lt;i;t++)Ri.fromBufferAttribute(this,t),Ri.applyMatrix3(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t&lt;i;t++)Ri.fromBufferAttribute(this,t),Ri.applyMatrix4(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t&lt;i;t++)Ri.fromBufferAttribute(this,t),Ri.applyNormalMatrix(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}transformDirection(e){for(let t=0,i=this.count;t&lt;i;t++)Ri.fromBufferAttribute(this,t),Ri.transformDirection(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&amp;&amp;(i=vr(i,this.array)),i}setComponent(e,t,i){return this.normalized&amp;&amp;(i=qt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&amp;&amp;(t=vr(t,this.array)),t}setX(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&amp;&amp;(t=vr(t,this.array)),t}setY(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&amp;&amp;(t=vr(t,this.array)),t}setZ(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&amp;&amp;(t=vr(t,this.array)),t}setW(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&amp;&amp;(t=qt(t,this.array),i=qt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&amp;&amp;(t=qt(t,this.array),i=qt(i,this.array),r=qt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&amp;&amp;(t=qt(t,this.array),i=qt(i,this.array),r=qt(r,this.array),s=qt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==&quot;&quot;&amp;&amp;(e.name=this.name),this.usage!==wd&amp;&amp;(e.usage=this.usage),e}}class hz extends Vt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class fz extends Vt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class dz extends Vt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class pz extends Vt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class vw extends Vt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class mz extends Vt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class bw extends Vt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class gz extends Vt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Jf(this.array[e*this.itemSize]);return this.normalized&amp;&amp;(t=vr(t,this.array)),t}setX(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.array[e*this.itemSize]=Ur(t),this}getY(e){let t=Jf(this.array[e*this.itemSize+1]);return this.normalized&amp;&amp;(t=vr(t,this.array)),t}setY(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.array[e*this.itemSize+1]=Ur(t),this}getZ(e){let t=Jf(this.array[e*this.itemSize+2]);return this.normalized&amp;&amp;(t=vr(t,this.array)),t}setZ(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.array[e*this.itemSize+2]=Ur(t),this}getW(e){let t=Jf(this.array[e*this.itemSize+3]);return this.normalized&amp;&amp;(t=vr(t,this.array)),t}setW(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.array[e*this.itemSize+3]=Ur(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&amp;&amp;(t=qt(t,this.array),i=qt(i,this.array)),this.array[e+0]=Ur(t),this.array[e+1]=Ur(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&amp;&amp;(t=qt(t,this.array),i=qt(i,this.array),r=qt(r,this.array)),this.array[e+0]=Ur(t),this.array[e+1]=Ur(i),this.array[e+2]=Ur(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&amp;&amp;(t=qt(t,this.array),i=qt(i,this.array),r=qt(r,this.array),s=qt(s,this.array)),this.array[e+0]=Ur(t),this.array[e+1]=Ur(i),this.array[e+2]=Ur(r),this.array[e+3]=Ur(s),this}}class ut extends Vt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let yz=0;const _s=new yt,Pb=new nn,Ru=new K,Jr=new di,Nf=new di,Yi=new K;class It extends Ao{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,&quot;id&quot;,{value:yz++}),this.uuid=ns(),this.name=&quot;&quot;,this.type=&quot;BufferGeometry&quot;,this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(JN(e)?bw:vw)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&amp;&amp;(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Wt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&amp;&amp;(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&amp;&amp;this.computeBoundingBox(),this.boundingSphere!==null&amp;&amp;this.computeBoundingSphere(),this}applyQuaternion(e){return _s.makeRotationFromQuaternion(e),this.applyMatrix4(_s),this}rotateX(e){return _s.makeRotationX(e),this.applyMatrix4(_s),this}rotateY(e){return _s.makeRotationY(e),this.applyMatrix4(_s),this}rotateZ(e){return _s.makeRotationZ(e),this.applyMatrix4(_s),this}translate(e,t,i){return _s.makeTranslation(e,t,i),this.applyMatrix4(_s),this}scale(e,t,i){return _s.makeScale(e,t,i),this.applyMatrix4(_s),this}lookAt(e){return Pb.lookAt(e),Pb.updateMatrix(),this.applyMatrix4(Pb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ru).negate(),this.translate(Ru.x,Ru.y,Ru.z),this}setFromPoints(e){const t=this.getAttribute(&quot;position&quot;);if(t===void 0){const i=[];for(let r=0,s=e.length;r&lt;s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute(&quot;position&quot;,new ut(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r&lt;i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length&gt;t.count&amp;&amp;console.warn(&quot;THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry.&quot;),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&amp;&amp;(this.boundingBox=new di);const e=this.attributes.position,t=this.morphAttributes.position;if(e&amp;&amp;e.isGLBufferAttribute){console.error(&quot;THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.&quot;,this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i&lt;r;i++){const s=t[i];Jr.setFromBufferAttribute(s),this.morphTargetsRelative?(Yi.addVectors(this.boundingBox.min,Jr.min),this.boundingBox.expandByPoint(Yi),Yi.addVectors(this.boundingBox.max,Jr.max),this.boundingBox.expandByPoint(Yi)):(this.boundingBox.expandByPoint(Jr.min),this.boundingBox.expandByPoint(Jr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&amp;&amp;console.error(&#x27;THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The &quot;position&quot; attribute is likely to have NaN values.&#x27;,this)}computeBoundingSphere(){this.boundingSphere===null&amp;&amp;(this.boundingSphere=new pi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&amp;&amp;e.isGLBufferAttribute){console.error(&quot;THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.&quot;,this),this.boundingSphere.set(new K,1/0);return}if(e){const i=this.boundingSphere.center;if(Jr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s&lt;o;s++){const l=t[s];Nf.setFromBufferAttribute(l),this.morphTargetsRelative?(Yi.addVectors(Jr.min,Nf.min),Jr.expandByPoint(Yi),Yi.addVectors(Jr.max,Nf.max),Jr.expandByPoint(Yi)):(Jr.expandByPoint(Nf.min),Jr.expandByPoint(Nf.max))}Jr.getCenter(i);let r=0;for(let s=0,o=e.count;s&lt;o;s++)Yi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Yi));if(t)for(let s=0,o=t.length;s&lt;o;s++){const l=t[s],u=this.morphTargetsRelative;for(let h=0,f=l.count;h&lt;f;h++)Yi.fromBufferAttribute(l,h),u&amp;&amp;(Ru.fromBufferAttribute(e,h),Yi.add(Ru)),r=Math.max(r,i.distanceToSquared(Yi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&amp;&amp;console.error(&#x27;THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The &quot;position&quot; attribute is likely to have NaN values.&#x27;,this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error(&quot;THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)&quot;);return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute(&quot;tangent&quot;)===!1&amp;&amp;this.setAttribute(&quot;tangent&quot;,new Vt(new Float32Array(4*i.count),4));const o=this.getAttribute(&quot;tangent&quot;),l=[],u=[];for(let N=0;N&lt;i.count;N++)l[N]=new K,u[N]=new K;const h=new K,f=new K,p=new K,m=new Re,g=new Re,v=new Re,x=new K,b=new K;function _(N,R,D){h.fromBufferAttribute(i,N),f.fromBufferAttribute(i,R),p.fromBufferAttribute(i,D),m.fromBufferAttribute(s,N),g.fromBufferAttribute(s,R),v.fromBufferAttribute(s,D),f.sub(h),p.sub(h),g.sub(m),v.sub(m);const L=1/(g.x*v.y-v.x*g.y);isFinite(L)&amp;&amp;(x.copy(f).multiplyScalar(v.y).addScaledVector(p,-g.y).multiplyScalar(L),b.copy(p).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(L),l[N].add(x),l[R].add(x),l[D].add(x),u[N].add(b),u[R].add(b),u[D].add(b))}let T=this.groups;T.length===0&amp;&amp;(T=[{start:0,count:e.count}]);for(let N=0,R=T.length;N&lt;R;++N){const D=T[N],L=D.start,H=D.count;for(let q=L,z=L+H;q&lt;z;q+=3)_(e.getX(q+0),e.getX(q+1),e.getX(q+2))}const w=new K,S=new K,C=new K,O=new K;function M(N){C.fromBufferAttribute(r,N),O.copy(C);const R=l[N];w.copy(R),w.sub(C.multiplyScalar(C.dot(R))).normalize(),S.crossVectors(O,R);const L=S.dot(u[N])&lt;0?-1:1;o.setXYZW(N,w.x,w.y,w.z,L)}for(let N=0,R=T.length;N&lt;R;++N){const D=T[N],L=D.start,H=D.count;for(let q=L,z=L+H;q&lt;z;q+=3)M(e.getX(q+0)),M(e.getX(q+1)),M(e.getX(q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute(&quot;position&quot;);if(t!==void 0){let i=this.getAttribute(&quot;normal&quot;);if(i===void 0)i=new Vt(new Float32Array(t.count*3),3),this.setAttribute(&quot;normal&quot;,i);else for(let m=0,g=i.count;m&lt;g;m++)i.setXYZ(m,0,0,0);const r=new K,s=new K,o=new K,l=new K,u=new K,h=new K,f=new K,p=new K;if(e)for(let m=0,g=e.count;m&lt;g;m+=3){const v=e.getX(m+0),x=e.getX(m+1),b=e.getX(m+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,b),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),l.fromBufferAttribute(i,v),u.fromBufferAttribute(i,x),h.fromBufferAttribute(i,b),l.add(f),u.add(f),h.add(f),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z),i.setXYZ(b,h.x,h.y,h.z)}else for(let m=0,g=t.count;m&lt;g;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t&lt;i;t++)Yi.fromBufferAttribute(e,t),Yi.normalize(),e.setXYZ(t,Yi.x,Yi.y,Yi.z)}toNonIndexed(){function e(l,u){const h=l.array,f=l.itemSize,p=l.normalized,m=new h.constructor(u.length*f);let g=0,v=0;for(let x=0,b=u.length;x&lt;b;x++){l.isInterleavedBufferAttribute?g=u[x]*l.data.stride+l.offset:g=u[x]*f;for(let _=0;_&lt;f;_++)m[v++]=h[g++]}return new Vt(m,f,p)}if(this.index===null)return console.warn(&quot;THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.&quot;),this;const t=new It,i=this.index.array,r=this.attributes;for(const l in r){const u=r[l],h=e(u,i);t.setAttribute(l,h)}const s=this.morphAttributes;for(const l in s){const u=[],h=s[l];for(let f=0,p=h.length;f&lt;p;f++){const m=h[f],g=e(m,i);u.push(g)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l&lt;u;l++){const h=o[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:&quot;BufferGeometry&quot;,generator:&quot;BufferGeometry.toJSON&quot;}};if(e.uuid=this.uuid,e.type=this.type,this.name!==&quot;&quot;&amp;&amp;(e.name=this.name),Object.keys(this.userData).length&gt;0&amp;&amp;(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&amp;&amp;(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&amp;&amp;(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const h=i[u];e.data.attributes[u]=h.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],f=[];for(let p=0,m=h.length;p&lt;m;p++){const g=h[p];f.push(g.toJSON(e.data))}f.length&gt;0&amp;&amp;(r[u]=f,s=!0)}s&amp;&amp;(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length&gt;0&amp;&amp;(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&amp;&amp;(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&amp;&amp;this.setIndex(i.clone());const r=e.attributes;for(const h in r){const f=r[h];this.setAttribute(h,f.clone(t))}const s=e.morphAttributes;for(const h in s){const f=[],p=s[h];for(let m=0,g=p.length;m&lt;g;m++)f.push(p[m].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h&lt;f;h++){const p=o[h];this.addGroup(p.start,p.count,p.materialIndex)}const l=e.boundingBox;l!==null&amp;&amp;(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&amp;&amp;(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}}const fA=new yt,Zl=new Cl,gm=new pi,dA=new K,ym=new K,_m=new K,vm=new K,Lb=new K,bm=new K,pA=new K,xm=new K;let gn=class extends nn{constructor(e=new It,t=new zi){super(),this.isMesh=!0,this.type=&quot;Mesh&quot;,this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&amp;&amp;(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&amp;&amp;(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length&gt;0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s&lt;o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&amp;&amp;l){bm.set(0,0,0);for(let u=0,h=s.length;u&lt;h;u++){const f=l[u],p=s[u];f!==0&amp;&amp;(Lb.fromBufferAttribute(p,e),o?bm.addScaledVector(Lb,f):bm.addScaledVector(Lb.sub(t),f))}t.add(bm)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&amp;&amp;(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),gm.copy(i.boundingSphere),gm.applyMatrix4(s),Zl.copy(e.ray).recast(e.near),!(gm.containsPoint(Zl.origin)===!1&amp;&amp;(Zl.intersectSphere(gm,dA)===null||Zl.origin.distanceToSquared(dA)&gt;(e.far-e.near)**2))&amp;&amp;(fA.copy(s).invert(),Zl.copy(e.ray).applyMatrix4(fA),!(i.boundingBox!==null&amp;&amp;Zl.intersectsBox(i.boundingBox)===!1)&amp;&amp;this._computeIntersections(e,t,Zl)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,l=s.index,u=s.attributes.position,h=s.attributes.uv,f=s.attributes.uv1,p=s.attributes.normal,m=s.groups,g=s.drawRange;if(l!==null)if(Array.isArray(o))for(let v=0,x=m.length;v&lt;x;v++){const b=m[v],_=o[b.materialIndex],T=Math.max(b.start,g.start),w=Math.min(l.count,Math.min(b.start+b.count,g.start+g.count));for(let S=T,C=w;S&lt;C;S+=3){const O=l.getX(S),M=l.getX(S+1),N=l.getX(S+2);r=Sm(this,_,e,i,h,f,p,O,M,N),r&amp;&amp;(r.faceIndex=Math.floor(S/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),x=Math.min(l.count,g.start+g.count);for(let b=v,_=x;b&lt;_;b+=3){const T=l.getX(b),w=l.getX(b+1),S=l.getX(b+2);r=Sm(this,o,e,i,h,f,p,T,w,S),r&amp;&amp;(r.faceIndex=Math.floor(b/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let v=0,x=m.length;v&lt;x;v++){const b=m[v],_=o[b.materialIndex],T=Math.max(b.start,g.start),w=Math.min(u.count,Math.min(b.start+b.count,g.start+g.count));for(let S=T,C=w;S&lt;C;S+=3){const O=S,M=S+1,N=S+2;r=Sm(this,_,e,i,h,f,p,O,M,N),r&amp;&amp;(r.faceIndex=Math.floor(S/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),x=Math.min(u.count,g.start+g.count);for(let b=v,_=x;b&lt;_;b+=3){const T=b,w=b+1,S=b+2;r=Sm(this,o,e,i,h,f,p,T,w,S),r&amp;&amp;(r.faceIndex=Math.floor(b/3),t.push(r))}}}};function _z(n,e,t,i,r,s,o,l){let u;if(e.side===Sr?u=i.intersectTriangle(o,s,r,!0,l):u=i.intersectTriangle(r,s,o,e.side===is,l),u===null)return null;xm.copy(l),xm.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(xm);return h&lt;t.near||h&gt;t.far?null:{distance:h,point:xm.clone(),object:n}}function Sm(n,e,t,i,r,s,o,l,u,h){n.getVertexPosition(l,ym),n.getVertexPosition(u,_m),n.getVertexPosition(h,vm);const f=_z(n,e,t,i,ym,_m,vm,pA);if(f){const p=new K;br.getBarycoord(pA,ym,_m,vm,p),r&amp;&amp;(f.uv=br.getInterpolatedAttribute(r,l,u,h,p,new Re)),s&amp;&amp;(f.uv1=br.getInterpolatedAttribute(s,l,u,h,p,new Re)),o&amp;&amp;(f.normal=br.getInterpolatedAttribute(o,l,u,h,p,new K),f.normal.dot(i.direction)&gt;0&amp;&amp;f.normal.multiplyScalar(-1));const m={a:l,b:u,c:h,normal:new K,materialIndex:0};br.getNormal(ym,_m,vm,m.normal),f.face=m,f.barycoord=p}return f}class Rl extends It{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type=&quot;BoxGeometry&quot;,this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],h=[],f=[],p=[];let m=0,g=0;v(&quot;z&quot;,&quot;y&quot;,&quot;x&quot;,-1,-1,i,t,e,o,s,0),v(&quot;z&quot;,&quot;y&quot;,&quot;x&quot;,1,-1,i,t,-e,o,s,1),v(&quot;x&quot;,&quot;z&quot;,&quot;y&quot;,1,1,e,i,t,r,o,2),v(&quot;x&quot;,&quot;z&quot;,&quot;y&quot;,1,-1,e,i,-t,r,o,3),v(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,1,-1,e,t,i,r,s,4),v(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,-1,-1,e,t,-i,r,s,5),this.setIndex(u),this.setAttribute(&quot;position&quot;,new ut(h,3)),this.setAttribute(&quot;normal&quot;,new ut(f,3)),this.setAttribute(&quot;uv&quot;,new ut(p,2));function v(x,b,_,T,w,S,C,O,M,N,R){const D=S/M,L=C/N,H=S/2,q=C/2,z=O/2,$=M+1,P=N+1;let j=0,G=0;const ee=new K;for(let F=0;F&lt;P;F++){const ne=F*L-q;for(let le=0;le&lt;$;le++){const ce=le*D-H;ee[x]=ce*T,ee[b]=ne*w,ee[_]=z,h.push(ee.x,ee.y,ee.z),ee[x]=0,ee[b]=0,ee[_]=O&gt;0?1:-1,f.push(ee.x,ee.y,ee.z),p.push(le/M),p.push(1-F/N),j+=1}}for(let F=0;F&lt;N;F++)for(let ne=0;ne&lt;M;ne++){const le=m+ne+$*F,ce=m+ne+$*(F+1),ie=m+(ne+1)+$*(F+1),oe=m+(ne+1)+$*F;u.push(le,ce,oe),u.push(ce,ie,oe),G+=6}l.addGroup(g,G,R),g+=G,m+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ph(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&amp;&amp;(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn(&quot;UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms().&quot;),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function _r(n){const e={};for(let t=0;t&lt;n.length;t++){const i=ph(n[t]);for(const r in i)e[r]=i[r]}return e}function vz(n){const e=[];for(let t=0;t&lt;n.length;t++)e.push(n[t].clone());return e}function nD(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Jt.workingColorSpace}const iD={clone:ph,merge:_r};var bz=`void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,xz=`void main() {
    gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Br extends Di{constructor(e){super(),this.isShaderMaterial=!0,this.type=&quot;ShaderMaterial&quot;,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=bz,this.fragmentShader=xz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&amp;&amp;this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ph(e.uniforms),this.uniformsGroups=vz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&amp;&amp;o.isTexture?t.uniforms[r]={type:&quot;t&quot;,value:o.toJSON(e).uuid}:o&amp;&amp;o.isColor?t.uniforms[r]={type:&quot;c&quot;,value:o.getHex()}:o&amp;&amp;o.isVector2?t.uniforms[r]={type:&quot;v2&quot;,value:o.toArray()}:o&amp;&amp;o.isVector3?t.uniforms[r]={type:&quot;v3&quot;,value:o.toArray()}:o&amp;&amp;o.isVector4?t.uniforms[r]={type:&quot;v4&quot;,value:o.toArray()}:o&amp;&amp;o.isMatrix3?t.uniforms[r]={type:&quot;m3&quot;,value:o.toArray()}:o&amp;&amp;o.isMatrix4?t.uniforms[r]={type:&quot;m4&quot;,value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length&gt;0&amp;&amp;(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&amp;&amp;(i[r]=!0);return Object.keys(i).length&gt;0&amp;&amp;(t.extensions=i),t}}class yy extends nn{constructor(){super(),this.isCamera=!0,this.type=&quot;Camera&quot;,this.matrixWorldInverse=new yt,this.projectionMatrix=new yt,this.projectionMatrixInverse=new yt,this.coordinateSystem=Ms}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Qa=new K,mA=new Re,gA=new Re;class Yn extends yy{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type=&quot;PerspectiveCamera&quot;,this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=dh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Mc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return dh*2*Math.atan(Math.tan(Mc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Qa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Qa.x,Qa.y).multiplyScalar(-e/Qa.z),Qa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Qa.x,Qa.y).multiplyScalar(-e/Qa.z)}getViewSize(e,t){return this.getViewBounds(e,mA,gA),t.subVectors(gA,mA)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&amp;&amp;(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&amp;&amp;(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Mc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&amp;&amp;this.view.enabled){const u=o.fullWidth,h=o.fullHeight;s+=o.offsetX*r/u,t-=o.offsetY*i/h,r*=o.width/u,i*=o.height/h}const l=this.filmOffset;l!==0&amp;&amp;(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&amp;&amp;(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ou=-90,Nu=1;class rD extends nn{constructor(e,t,i){super(),this.type=&quot;CubeCamera&quot;,this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Yn(Ou,Nu,e,t);r.layers=this.layers,this.add(r);const s=new Yn(Ou,Nu,e,t);s.layers=this.layers,this.add(s);const o=new Yn(Ou,Nu,e,t);o.layers=this.layers,this.add(o);const l=new Yn(Ou,Nu,e,t);l.layers=this.layers,this.add(l);const u=new Yn(Ou,Nu,e,t);u.layers=this.layers,this.add(u);const h=new Yn(Ou,Nu,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,l,u]=t;for(const h of t)this.remove(h);if(e===Ms)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===Ed)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error(&quot;THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: &quot;+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&amp;&amp;this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&amp;&amp;(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,u,h,f]=this.children,p=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,u),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(p,m,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Kd extends Kn{constructor(e=[],t=_a,i,r,s,o,l,u,h,f){super(e,t,i,r,s,o,l,u,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class sD extends As{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Kd(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:fi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

                            varying vec3 vWorldDirection;

                            vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

                                    return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

                            }

                            void main() {

                                    vWorldDirection = transformDirection( position, modelMatrix );

                                    #include &lt;begin_vertex&gt;
                                    #include &lt;project_vertex&gt;

                            }
                    `,fragmentShader:`

                            uniform sampler2D tEquirect;

                            varying vec3 vWorldDirection;

                            #include &lt;common&gt;

                            void main() {

                                    vec3 direction = normalize( vWorldDirection );

                                    vec2 sampleUV = equirectUv( direction );

                                    gl_FragColor = texture2D( tEquirect, sampleUV );

                            }
                    `},r=new Rl(5,5,5),s=new Br({name:&quot;CubemapFromEquirect&quot;,uniforms:ph(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Sr,blending:da});s.uniforms.tEquirect.value=t;const o=new gn(r,s),l=t.minFilter;return t.minFilter===ts&amp;&amp;(t.minFilter=fi),new rD(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o&lt;6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class xr extends nn{constructor(){super(),this.isGroup=!0,this.type=&quot;Group&quot;}}const Sz={type:&quot;move&quot;};class Ig{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&amp;&amp;(this._hand=new xr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&amp;&amp;(this._targetRay=new xr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&amp;&amp;(this._grip=new xr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&amp;&amp;this._targetRay.dispatchEvent(e),this._grip!==null&amp;&amp;this._grip.dispatchEvent(e),this._hand!==null&amp;&amp;this._hand.dispatchEvent(e),this}connect(e){if(e&amp;&amp;e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:&quot;connected&quot;,data:e}),this}disconnect(e){return this.dispatchEvent({type:&quot;disconnected&quot;,data:e}),this._targetRay!==null&amp;&amp;(this._targetRay.visible=!1),this._grip!==null&amp;&amp;(this._grip.visible=!1),this._hand!==null&amp;&amp;(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,h=this._hand;if(e&amp;&amp;t.session.visibilityState!==&quot;visible-blurred&quot;){if(h&amp;&amp;e.hand){o=!0;for(const x of e.hand.values()){const b=t.getJointPose(x,i),_=this._getHandJoint(h,x);b!==null&amp;&amp;(_.matrix.fromArray(b.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=b.radius),_.visible=b!==null}const f=h.joints[&quot;index-finger-tip&quot;],p=h.joints[&quot;thumb-tip&quot;],m=f.position.distanceTo(p.position),g=.02,v=.005;h.inputState.pinching&amp;&amp;m&gt;g+v?(h.inputState.pinching=!1,this.dispatchEvent({type:&quot;pinchend&quot;,handedness:e.handedness,target:this})):!h.inputState.pinching&amp;&amp;m&lt;=g-v&amp;&amp;(h.inputState.pinching=!0,this.dispatchEvent({type:&quot;pinchstart&quot;,handedness:e.handedness,target:this}))}else u!==null&amp;&amp;e.gripSpace&amp;&amp;(s=t.getPose(e.gripSpace,i),s!==null&amp;&amp;(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&amp;&amp;(r=t.getPose(e.targetRaySpace,i),r===null&amp;&amp;s!==null&amp;&amp;(r=s),r!==null&amp;&amp;(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(Sz)))}return l!==null&amp;&amp;(l.visible=r!==null),u!==null&amp;&amp;(u.visible=s!==null),h!==null&amp;&amp;(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new xr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class _y{constructor(e,t=25e-5){this.isFogExp2=!0,this.name=&quot;&quot;,this.color=new Ye(e),this.density=t}clone(){return new _y(this.color,this.density)}toJSON(){return{type:&quot;FogExp2&quot;,name:this.name,color:this.color.getHex(),density:this.density}}}class vy{constructor(e,t=1,i=1e3){this.isFog=!0,this.name=&quot;&quot;,this.color=new Ye(e),this.near=t,this.far=i}clone(){return new vy(this.color,this.near,this.far)}toJSON(){return{type:&quot;Fog&quot;,name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let by=class extends nn{constructor(){super(),this.isScene=!0,this.type=&quot;Scene&quot;,this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Er,this.environmentIntensity=1,this.environmentRotation=new Er,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;observe&quot;,{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&amp;&amp;(this.background=e.background.clone()),e.environment!==null&amp;&amp;(this.environment=e.environment.clone()),e.fog!==null&amp;&amp;(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&amp;&amp;(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&amp;&amp;(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness&gt;0&amp;&amp;(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&amp;&amp;(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&amp;&amp;(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class $d{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=wd,this.updateRanges=[],this.version=0,this.uuid=ns()}onUploadCallback(){}set needsUpdate(e){e===!0&amp;&amp;this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r&lt;s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&amp;&amp;(e.arrayBuffers={}),this.array.buffer._uuid===void 0&amp;&amp;(this.array.buffer._uuid=ns()),e.arrayBuffers[this.array.buffer._uuid]===void 0&amp;&amp;(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&amp;&amp;(e.arrayBuffers={}),this.array.buffer._uuid===void 0&amp;&amp;(this.array.buffer._uuid=ns()),e.arrayBuffers[this.array.buffer._uuid]===void 0&amp;&amp;(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const gr=new K;class bl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name=&quot;&quot;,this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t&lt;i;t++)gr.fromBufferAttribute(this,t),gr.applyMatrix4(e),this.setXYZ(t,gr.x,gr.y,gr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t&lt;i;t++)gr.fromBufferAttribute(this,t),gr.applyNormalMatrix(e),this.setXYZ(t,gr.x,gr.y,gr.z);return this}transformDirection(e){for(let t=0,i=this.count;t&lt;i;t++)gr.fromBufferAttribute(this,t),gr.transformDirection(e),this.setXYZ(t,gr.x,gr.y,gr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&amp;&amp;(i=vr(i,this.array)),i}setComponent(e,t,i){return this.normalized&amp;&amp;(i=qt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&amp;&amp;(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&amp;&amp;(t=vr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&amp;&amp;(t=vr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&amp;&amp;(t=vr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&amp;&amp;(t=vr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&amp;&amp;(t=qt(t,this.array),i=qt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&amp;&amp;(t=qt(t,this.array),i=qt(i,this.array),r=qt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&amp;&amp;(t=qt(t,this.array),i=qt(i,this.array),r=qt(r,this.array),s=qt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log(&quot;THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.&quot;);const t=[];for(let i=0;i&lt;this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s&lt;this.itemSize;s++)t.push(this.data.array[r+s])}return new Vt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&amp;&amp;(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&amp;&amp;(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new bl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log(&quot;THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.&quot;);const t=[];for(let i=0;i&lt;this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s&lt;this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&amp;&amp;(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&amp;&amp;(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class xw extends Di{constructor(e){super(),this.isSpriteMaterial=!0,this.type=&quot;SpriteMaterial&quot;,this.color=new Ye(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Du;const Df=new K,Iu=new K,Pu=new K,Lu=new Re,If=new Re,oD=new yt,wm=new K,Pf=new K,Em=new K,yA=new Re,Ub=new Re,_A=new Re;class aD extends nn{constructor(e=new xw){if(super(),this.isSprite=!0,this.type=&quot;Sprite&quot;,Du===void 0){Du=new It;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new $d(t,5);Du.setIndex([0,1,2,0,2,3]),Du.setAttribute(&quot;position&quot;,new bl(i,3,0,!1)),Du.setAttribute(&quot;uv&quot;,new bl(i,2,3,!1))}this.geometry=Du,this.material=e,this.center=new Re(.5,.5)}raycast(e,t){e.camera===null&amp;&amp;console.error(&#x27;THREE.Sprite: &quot;Raycaster.camera&quot; needs to be set in order to raycast against sprites.&#x27;),Iu.setFromMatrixScale(this.matrixWorld),oD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Pu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&amp;&amp;this.material.sizeAttenuation===!1&amp;&amp;Iu.multiplyScalar(-Pu.z);const i=this.material.rotation;let r,s;i!==0&amp;&amp;(s=Math.cos(i),r=Math.sin(i));const o=this.center;Tm(wm.set(-.5,-.5,0),Pu,o,Iu,r,s),Tm(Pf.set(.5,-.5,0),Pu,o,Iu,r,s),Tm(Em.set(.5,.5,0),Pu,o,Iu,r,s),yA.set(0,0),Ub.set(1,0),_A.set(1,1);let l=e.ray.intersectTriangle(wm,Pf,Em,!1,Df);if(l===null&amp;&amp;(Tm(Pf.set(-.5,.5,0),Pu,o,Iu,r,s),Ub.set(0,1),l=e.ray.intersectTriangle(wm,Em,Pf,!1,Df),l===null))return;const u=e.ray.origin.distanceTo(Df);u&lt;e.near||u&gt;e.far||t.push({distance:u,point:Df.clone(),uv:br.getInterpolation(Df,wm,Pf,Em,yA,Ub,_A,new Re),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&amp;&amp;this.center.copy(e.center),this.material=e.material,this}}function Tm(n,e,t,i,r,s){Lu.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(If.x=s*Lu.x-r*Lu.y,If.y=r*Lu.x+s*Lu.y):If.copy(Lu),n.copy(e),n.x+=If.x,n.y+=If.y,n.applyMatrix4(oD)}const Mm=new K,vA=new K;class lD extends nn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type=&quot;LOD&quot;,Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i&lt;r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s&lt;r.length&amp;&amp;!(t&lt;r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i&lt;t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length&gt;0){let i,r;for(i=1,r=t.length;i&lt;r;i++){let s=t[i].distance;if(t[i].object.visible&amp;&amp;(s-=s*t[i].hysteresis),e&lt;s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length&gt;0){Mm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Mm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length&gt;1){Mm.setFromMatrixPosition(e.matrixWorld),vA.setFromMatrixPosition(this.matrixWorld);const i=Mm.distanceTo(vA)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r&lt;s;r++){let o=t[r].distance;if(t[r].object.visible&amp;&amp;(o-=o*t[r].hysteresis),i&gt;=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r&lt;s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&amp;&amp;(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r&lt;s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const bA=new K,xA=new _n,SA=new _n,wz=new K,wA=new yt,Am=new K,kb=new pi,EA=new yt,Fb=new Cl;class xy extends gn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type=&quot;SkinnedMesh&quot;,this.bindMode=uS,this.bindMatrix=new yt,this.bindMatrixInverse=new yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&amp;&amp;(this.boundingBox=new di),this.boundingBox.makeEmpty();const t=e.getAttribute(&quot;position&quot;);for(let i=0;i&lt;t.count;i++)this.getVertexPosition(i,Am),this.boundingBox.expandByPoint(Am)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&amp;&amp;(this.boundingSphere=new pi),this.boundingSphere.makeEmpty();const t=e.getAttribute(&quot;position&quot;);for(let i=0;i&lt;t.count;i++)this.getVertexPosition(i,Am),this.boundingSphere.expandByPoint(Am)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&amp;&amp;(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&amp;&amp;(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&amp;&amp;(this.boundingSphere===null&amp;&amp;this.computeBoundingSphere(),kb.copy(this.boundingSphere),kb.applyMatrix4(r),e.ray.intersectsSphere(kb)!==!1&amp;&amp;(EA.copy(r).invert(),Fb.copy(e.ray).applyMatrix4(EA),!(this.boundingBox!==null&amp;&amp;Fb.intersectsBox(this.boundingBox)===!1)&amp;&amp;this._computeIntersections(e,t,Fb)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&amp;&amp;(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new _n,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i&lt;r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===uS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===kN?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn(&quot;THREE.SkinnedMesh: Unrecognized bindMode: &quot;+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;xA.fromBufferAttribute(r.attributes.skinIndex,e),SA.fromBufferAttribute(r.attributes.skinWeight,e),bA.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s&lt;4;s++){const o=SA.getComponent(s);if(o!==0){const l=xA.getComponent(s);wA.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(wz.copy(bA).applyMatrix4(wA),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Zd extends nn{constructor(){super(),this.isBone=!0,this.type=&quot;Bone&quot;}}class Qs extends Kn{constructor(e=null,t=1,i=1,r,s,o,l,u,h=Ei,f=Ei,p,m){super(null,o,l,u,h,f,r,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const TA=new yt,Ez=new yt;class Ah{constructor(e=[],t=[]){this.uuid=ns(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn(&quot;THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.&quot;),this.boneInverses=[];for(let i=0,r=this.bones.length;i&lt;r;i++)this.boneInverses.push(new yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e&lt;t;e++){const i=new yt;this.bones[e]&amp;&amp;i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e&lt;t;e++){const i=this.bones[e];i&amp;&amp;i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e&lt;t;e++){const i=this.bones[e];i&amp;&amp;(i.parent&amp;&amp;i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s&lt;o;s++){const l=e[s]?e[s].matrixWorld:Ez;TA.multiplyMatrices(l,t[s]),TA.toArray(i,s*16)}r!==null&amp;&amp;(r.needsUpdate=!0)}clone(){return new Ah(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Qs(t,e,e,dr,kr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t&lt;i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&amp;&amp;(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i&lt;r;i++){const s=e.bones[i];let o=t[s];o===void 0&amp;&amp;(console.warn(&quot;THREE.Skeleton: No bone found with UUID:&quot;,s),o=new Zd),this.bones.push(o),this.boneInverses.push(new yt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:&quot;Skeleton&quot;,generator:&quot;Skeleton.toJSON&quot;},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r&lt;s;r++){const o=t[r];e.bones.push(o.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Nc extends Vt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Uu=new yt,MA=new yt,Cm=[],AA=new di,Tz=new yt,Lf=new gn,Uf=new pi;class Sw extends gn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Nc(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r&lt;i;r++)this.setMatrixAt(r,Tz)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&amp;&amp;(this.boundingBox=new di),e.boundingBox===null&amp;&amp;e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i&lt;t;i++)this.getMatrixAt(i,Uu),AA.copy(e.boundingBox).applyMatrix4(Uu),this.boundingBox.union(AA)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&amp;&amp;(this.boundingSphere=new pi),e.boundingSphere===null&amp;&amp;e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i&lt;t;i++)this.getMatrixAt(i,Uu),Uf.copy(e.boundingSphere).applyMatrix4(Uu),this.boundingSphere.union(Uf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&amp;&amp;(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&amp;&amp;(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&amp;&amp;(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&amp;&amp;(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let l=0;l&lt;i.length;l++)i[l]=r[o+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Lf.geometry=this.geometry,Lf.material=this.material,Lf.material!==void 0&amp;&amp;(this.boundingSphere===null&amp;&amp;this.computeBoundingSphere(),Uf.copy(this.boundingSphere),Uf.applyMatrix4(i),e.ray.intersectsSphere(Uf)!==!1))for(let s=0;s&lt;r;s++){this.getMatrixAt(s,Uu),MA.multiplyMatrices(i,Uu),Lf.matrixWorld=MA,Lf.raycast(e,Cm);for(let o=0,l=Cm.length;o&lt;l;o++){const u=Cm[o];u.instanceId=s,u.object=this,t.push(u)}Cm.length=0}}setColorAt(e,t){this.instanceColor===null&amp;&amp;(this.instanceColor=new Nc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&amp;&amp;(this.morphTexture=new Qs(new Float32Array(r*this.count),r,this.count,Xd,kr));const s=this.morphTexture.source.data.data;let o=0;for(let h=0;h&lt;i.length;h++)o+=i[h];const l=this.geometry.morphTargetsRelative?1:1-o,u=r*e;s[u]=l,s.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:&quot;dispose&quot;}),this.morphTexture!==null&amp;&amp;(this.morphTexture.dispose(),this.morphTexture=null)}}const zb=new K,Mz=new K,Az=new Wt;class ta{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=zb.subVectors(i,t).cross(Mz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(zb),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s&lt;0||s&gt;1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t&lt;0&amp;&amp;i&gt;0||i&lt;0&amp;&amp;t&gt;0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Az.getNormalMatrix(e),r=this.coplanarPoint(zb).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&amp;&amp;e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Jl=new pi,Rm=new K;class Ch{constructor(e=new ta,t=new ta,i=new ta,r=new ta,s=new ta,o=new ta){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i&lt;6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ms){const i=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],u=r[3],h=r[4],f=r[5],p=r[6],m=r[7],g=r[8],v=r[9],x=r[10],b=r[11],_=r[12],T=r[13],w=r[14],S=r[15];if(i[0].setComponents(u-s,m-h,b-g,S-_).normalize(),i[1].setComponents(u+s,m+h,b+g,S+_).normalize(),i[2].setComponents(u+o,m+f,b+v,S+T).normalize(),i[3].setComponents(u-o,m-f,b-v,S-T).normalize(),i[4].setComponents(u-l,m-p,b-x,S-w).normalize(),t===Ms)i[5].setComponents(u+l,m+p,b+x,S+w).normalize();else if(t===Ed)i[5].setComponents(l,p,x,w).normalize();else throw new Error(&quot;THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: &quot;+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&amp;&amp;e.computeBoundingSphere(),Jl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&amp;&amp;t.computeBoundingSphere(),Jl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Jl)}intersectsSprite(e){return Jl.center.set(0,0,0),Jl.radius=.7071067811865476,Jl.applyMatrix4(e.matrixWorld),this.intersectsSphere(Jl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s&lt;6;s++)if(t[s].distanceToPoint(i)&lt;r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i&lt;6;i++){const r=t[i];if(Rm.x=r.normal.x&gt;0?e.max.x:e.min.x,Rm.y=r.normal.y&gt;0?e.max.y:e.min.y,Rm.z=r.normal.z&gt;0?e.max.z:e.min.z,r.distanceToPoint(Rm)&lt;0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i&lt;6;i++)if(t[i].distanceToPoint(e)&lt;0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const uo=new yt,ho=new Ch;class Sy{constructor(){this.coordinateSystem=Ms}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ho.setFromProjectionMatrix(uo,this.coordinateSystem),ho.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ho.setFromProjectionMatrix(uo,this.coordinateSystem),ho.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ho.setFromProjectionMatrix(uo,this.coordinateSystem),ho.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ho.setFromProjectionMatrix(uo,this.coordinateSystem),ho.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(uo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ho.setFromProjectionMatrix(uo,this.coordinateSystem),ho.containsPoint(e))return!0}return!1}clone(){return new Sy}}function Bb(n,e){return n-e}function Cz(n,e){return n.z-e.z}function Rz(n,e){return e.z-n.z}class Oz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index&gt;=s.length&amp;&amp;s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];o.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const Ir=new yt,Nz=new Ye(1,1,1),CA=new Ch,Dz=new Sy,Om=new di,Ql=new pi,kf=new K,RA=new K,Iz=new K,Hb=new Oz,ur=new gn,Nm=[];function Pz(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s&lt;r;s++)for(let o=0;o&lt;i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function ec(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i&lt;t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class cD extends gn{constructor(e,t,i=t*2,r){super(new It,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Qs(t,e,e,dr,kr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Qs(t,e,e,qd,va);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Qs(t,e,e,dr,kr);i.colorSpace=Jt.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:u,normalized:h}=o,f=new l.constructor(i*u),p=new Vt(f,u,h);t.setAttribute(s,p)}if(e.getIndex()!==null){const s=i&gt;65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Vt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error(&#x27;THREE.BatchedMesh: All geometries must consistently have &quot;index&quot;.&#x27;);for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing &quot;${i}&quot;. All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error(&quot;THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.&quot;)}}validateInstanceId(e){const t=this._instanceInfo;if(e&lt;0||e&gt;=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e&lt;0||e&gt;=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&amp;&amp;(this.boundingBox=new di);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i&lt;r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Ir),this.getBoundingBoxAt(s,Om).applyMatrix4(Ir),e.union(Om)}}computeBoundingSphere(){this.boundingSphere===null&amp;&amp;(this.boundingSphere=new pi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i&lt;r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Ir),this.getBoundingSphereAt(s,Ql).applyMatrix4(Ir),e.union(Ql)}}addInstance(e){if(this._instanceInfo.length&gt;=this.maxInstanceCount&amp;&amp;this._availableInstanceIds.length===0)throw new Error(&quot;THREE.BatchedMesh: Maximum item count reached.&quot;);const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length&gt;0?(this._availableInstanceIds.sort(Bb),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Ir.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&amp;&amp;(Nz.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute(&quot;position&quot;).count:t;const o=e.getIndex();if(o!==null&amp;&amp;(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&amp;&amp;r.indexStart+r.reservedIndexCount&gt;this._maxIndexCount||r.vertexStart+r.reservedVertexCount&gt;this._maxVertexCount)throw new Error(&quot;THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.&quot;);let u;return this._availableGeometryIds.length&gt;0?(this._availableGeometryIds.sort(Bb),u=this._availableGeometryIds.shift(),s[u]=r):(u=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(u,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(e,t){if(e&gt;=this._geometryCount)throw new Error(&quot;THREE.BatchedMesh: Maximum geometry count reached.&quot;);this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),l=this._geometryInfo[e];if(r&amp;&amp;o.count&gt;l.reservedIndexCount||t.attributes.position.count&gt;l.reservedVertexCount)throw new Error(&quot;THREE.BatchedMesh: Reserved space not large enough for provided geometry.&quot;);const u=l.vertexStart,h=l.reservedVertexCount;l.vertexCount=t.getAttribute(&quot;position&quot;).count;for(const f in i.attributes){const p=t.getAttribute(f),m=i.getAttribute(f);Pz(p,m,u);const g=p.itemSize;for(let v=p.count,x=h;v&lt;x;v++){const b=u+v;for(let _=0;_&lt;g;_++)m.setComponent(b,_,0)}m.needsUpdate=!0,m.addUpdateRange(u*g,h*g)}if(r){const f=l.indexStart,p=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let m=0;m&lt;o.count;m++)s.setX(f+m,u+o.getX(m));for(let m=o.count,g=p;m&lt;g;m++)s.setX(f+m,u);s.needsUpdate=!0,s.addUpdateRange(f,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&amp;&amp;(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&amp;&amp;(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e&gt;=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r&lt;s;r++)i[r].active&amp;&amp;i[r].geometryIndex===e&amp;&amp;this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,l)=&gt;l).sort((o,l)=&gt;i[o].vertexStart-i[l].vertexStart),s=this.geometry;for(let o=0,l=i.length;o&lt;l;o++){const u=r[o],h=i[u];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:f,vertexStart:p,reservedIndexCount:m}=h,g=s.index,v=g.array,x=e-p;for(let b=f;b&lt;f+m;b++)v[b]=v[b]+x;g.array.copyWithin(t,f,f+m),g.addUpdateRange(t,m),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:f,reservedVertexCount:p}=h,m=s.attributes;for(const g in m){const v=m[g],{array:x,itemSize:b}=v;x.copyWithin(e*b,f*b,(f+p)*b),v.addUpdateRange(e*b,p*b)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e&gt;=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new di,o=i.index,l=i.attributes.position;for(let u=r.start,h=r.start+r.count;u&lt;h;u++){let f=u;o&amp;&amp;(f=o.getX(f)),s.expandByPoint(kf.fromBufferAttribute(l,f))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e&gt;=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new pi;this.getBoundingBoxAt(e,Om),Om.getCenter(s.center);const o=i.index,l=i.attributes.position;let u=0;for(let h=r.start,f=r.start+r.count;h&lt;f;h++){let p=h;o&amp;&amp;(p=o.getX(p)),kf.fromBufferAttribute(l,p),u=Math.max(u,s.center.distanceToSquared(kf))}s.radius=Math.sqrt(u),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&amp;&amp;this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(Bb);t[t.length-1]===i.length;)i.pop(),t.pop();if(e&lt;i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);ec(this._multiDrawCounts,r),ec(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;o.dispose(),this._initIndirectTexture(),ec(o.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),ec(l.image.data,this._matricesTexture.image.data),u&amp;&amp;(u.dispose(),this._initColorsTexture(),ec(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=&gt;l.active);if(Math.max(...i.map(l=&gt;l.vertexStart+l.reservedVertexCount))&gt;e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&amp;&amp;Math.max(...i.map(u=&gt;u.indexStart+u.reservedIndexCount))&gt;t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&amp;&amp;(this._geometryInitialized=!1,this.geometry=new It,this._initializeGeometry(s));const o=this.geometry;s.index&amp;&amp;ec(s.index.array,o.index.array);for(const l in s.attributes)ec(s.attributes[l].array,o.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;ur.material=this.material,ur.geometry.index=o.index,ur.geometry.attributes=o.attributes,ur.geometry.boundingBox===null&amp;&amp;(ur.geometry.boundingBox=new di),ur.geometry.boundingSphere===null&amp;&amp;(ur.geometry.boundingSphere=new pi);for(let l=0,u=i.length;l&lt;u;l++){if(!i[l].visible||!i[l].active)continue;const h=i[l].geometryIndex,f=r[h];ur.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(l,ur.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,ur.geometry.boundingBox),this.getBoundingSphereAt(h,ur.geometry.boundingSphere),ur.raycast(e,Nm);for(let p=0,m=Nm.length;p&lt;m;p++){const g=Nm[p];g.object=this,g.batchId=l,t.push(g)}Nm.length=0}ur.material=null,ur.geometry.index=null,ur.geometry.attributes={},ur.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=&gt;({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=&gt;({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&amp;&amp;(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&amp;&amp;(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&amp;&amp;!this.perObjectFrustumCulled&amp;&amp;!this.sortObjects)return;const o=r.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,u=this._instanceInfo,h=this._multiDrawStarts,f=this._multiDrawCounts,p=this._geometryInfo,m=this.perObjectFrustumCulled,g=this._indirectTexture,v=g.image.data,x=i.isArrayCamera?Dz:CA;m&amp;&amp;!i.isArrayCamera&amp;&amp;(Ir.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),CA.setFromProjectionMatrix(Ir,e.coordinateSystem));let b=0;if(this.sortObjects){Ir.copy(this.matrixWorld).invert(),kf.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ir),RA.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ir);for(let w=0,S=u.length;w&lt;S;w++)if(u[w].visible&amp;&amp;u[w].active){const C=u[w].geometryIndex;this.getMatrixAt(w,Ir),this.getBoundingSphereAt(C,Ql).applyMatrix4(Ir);let O=!1;if(m&amp;&amp;(O=!x.intersectsSphere(Ql,i)),!O){const M=p[C],N=Iz.subVectors(Ql.center,kf).dot(RA);Hb.push(M.start,M.count,N,w)}}const _=Hb.list,T=this.customSort;T===null?_.sort(s.transparent?Rz:Cz):T.call(this,_,i);for(let w=0,S=_.length;w&lt;S;w++){const C=_[w];h[b]=C.start*l,f[b]=C.count,v[b]=C.index,b++}Hb.reset()}else for(let _=0,T=u.length;_&lt;T;_++)if(u[_].visible&amp;&amp;u[_].active){const w=u[_].geometryIndex;let S=!1;if(m&amp;&amp;(this.getMatrixAt(_,Ir),this.getBoundingSphereAt(w,Ql).applyMatrix4(Ir),S=!x.intersectsSphere(Ql,i)),!S){const C=p[w];h[b]=C.start*l,f[b]=C.count,v[b]=_,b++}}g.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Ji extends Di{constructor(e){super(),this.isLineBasicMaterial=!0,this.type=&quot;LineBasicMaterial&quot;,this.color=new Ye(16777215),this.map=null,this.linewidth=1,this.linecap=&quot;round&quot;,this.linejoin=&quot;round&quot;,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const C0=new K,R0=new K,OA=new yt,Ff=new Cl,Dm=new pi,Vb=new K,NA=new K;class Eo extends nn{constructor(e=new It,t=new Ji){super(),this.isLine=!0,this.type=&quot;Line&quot;,this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r&lt;s;r++)C0.fromBufferAttribute(t,r-1),R0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=C0.distanceTo(R0);e.setAttribute(&quot;lineDistance&quot;,new ut(i,1))}else console.warn(&quot;THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.&quot;);return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),Dm.copy(i.boundingSphere),Dm.applyMatrix4(r),Dm.radius+=s,e.ray.intersectsSphere(Dm)===!1)return;OA.copy(r).invert(),Ff.copy(e.ray).applyMatrix4(OA);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){const g=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let x=g,b=v-1;x&lt;b;x+=h){const _=f.getX(x),T=f.getX(x+1),w=Im(this,e,Ff,u,_,T,x);w&amp;&amp;t.push(w)}if(this.isLineLoop){const x=f.getX(v-1),b=f.getX(g),_=Im(this,e,Ff,u,x,b,v-1);_&amp;&amp;t.push(_)}}else{const g=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let x=g,b=v-1;x&lt;b;x+=h){const _=Im(this,e,Ff,u,x,x+1,x);_&amp;&amp;t.push(_)}if(this.isLineLoop){const x=Im(this,e,Ff,u,v-1,g,v-1);x&amp;&amp;t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length&gt;0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s&lt;o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Im(n,e,t,i,r,s,o){const l=n.geometry.attributes.position;if(C0.fromBufferAttribute(l,r),R0.fromBufferAttribute(l,s),t.distanceSqToSegment(C0,R0,Vb,NA)&gt;i)return;Vb.applyMatrix4(n.matrixWorld);const h=e.ray.origin.distanceTo(Vb);if(!(h&lt;e.near||h&gt;e.far))return{distance:h,point:NA.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const DA=new K,IA=new K;class Tr extends Eo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type=&quot;LineSegments&quot;}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r&lt;s;r+=2)DA.fromBufferAttribute(t,r),IA.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+DA.distanceTo(IA);e.setAttribute(&quot;lineDistance&quot;,new ut(i,1))}else console.warn(&quot;THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.&quot;);return this}}class ww extends Eo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type=&quot;LineLoop&quot;}}class wy extends Di{constructor(e){super(),this.isPointsMaterial=!0,this.type=&quot;PointsMaterial&quot;,this.color=new Ye(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const PA=new yt,dS=new Cl,Pm=new pi,Lm=new K;class ga extends nn{constructor(e=new It,t=new wy){super(),this.isPoints=!0,this.type=&quot;Points&quot;,this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),Pm.copy(i.boundingSphere),Pm.applyMatrix4(r),Pm.radius+=s,e.ray.intersectsSphere(Pm)===!1)return;PA.copy(r).invert(),dS.copy(e.ray).applyMatrix4(PA);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let v=m,x=g;v&lt;x;v++){const b=h.getX(v);Lm.fromBufferAttribute(p,b),LA(Lm,b,u,r,e,t,this)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let v=m,x=g;v&lt;x;v++)Lm.fromBufferAttribute(p,v),LA(Lm,v,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length&gt;0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s&lt;o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function LA(n,e,t,i,r,s,o){const l=dS.distanceSqToPoint(n);if(l&lt;t){const u=new K;dS.closestPointToPoint(n,u),u.applyMatrix4(i);const h=r.ray.origin.distanceTo(u);if(h&lt;r.near||h&gt;r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class uD extends Kn{constructor(e,t,i,r,s=fi,o=fi,l,u,h){super(e,t,i,r,s,o,l,u,h),this.isVideoTexture=!0,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}&quot;requestVideoFrameCallback&quot;in e&amp;&amp;e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;&quot;requestVideoFrameCallback&quot;in e===!1&amp;&amp;e.readyState&gt;=e.HAVE_CURRENT_DATA&amp;&amp;(this.needsUpdate=!0)}}class Lz extends uD{constructor(e,t,i,r,s,o,l,u){super({},e,t,i,r,s,o,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class Uz extends Kn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ei,this.minFilter=Ei,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ey extends Kn{constructor(e,t,i,r,s,o,l,u,h,f,p,m){super(null,o,l,u,h,f,r,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class kz extends Ey{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=sr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Fz extends Ey{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,_a),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class zz extends Kn{constructor(e,t,i,r,s,o,l,u,h){super(e,t,i,r,s,o,l,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ty extends Kn{constructor(e,t,i=va,r,s,o,l=Ei,u=Ei,h,f=ch){if(f!==ch&amp;&amp;f!==uh)throw new Error(&quot;DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat&quot;);super(null,r,s,o,l,u,f,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new pl(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&amp;&amp;(t.compareFunction=this.compareFunction),t}}class Bz extends Ty{constructor(e=1,t=1,i=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:i},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class My extends It{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type=&quot;CapsuleGeometry&quot;,this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],l=[],u=[],h=[],f=t/2,p=Math.PI/2*e,m=t,g=2*p+m,v=i*2+s,x=r+1,b=new K,_=new K;for(let T=0;T&lt;=v;T++){let w=0,S=0,C=0,O=0;if(T&lt;=i){const R=T/i,D=R*Math.PI/2;S=-f-e*Math.cos(D),C=e*Math.sin(D),O=-e*Math.cos(D),w=R*p}else if(T&lt;=i+s){const R=(T-i)/s;S=-f+R*t,C=e,O=0,w=p+R*m}else{const R=(T-i-s)/i,D=R*Math.PI/2;S=f+e*Math.sin(D),C=e*Math.cos(D),O=e*Math.sin(D),w=p+m+R*p}const M=Math.max(0,Math.min(1,w/g));let N=0;T===0?N=.5/r:T===v&amp;&amp;(N=-.5/r);for(let R=0;R&lt;=r;R++){const D=R/r,L=D*Math.PI*2,H=Math.sin(L),q=Math.cos(L);_.x=-C*q,_.y=S,_.z=C*H,l.push(_.x,_.y,_.z),b.set(-C*q,O,C*H),b.normalize(),u.push(b.x,b.y,b.z),h.push(D+N,M)}if(T&gt;0){const R=(T-1)*x;for(let D=0;D&lt;r;D++){const L=R+D,H=R+D+1,q=T*x+D,z=T*x+D+1;o.push(L,H,q),o.push(H,z,q)}}}this.setIndex(o),this.setAttribute(&quot;position&quot;,new ut(l,3)),this.setAttribute(&quot;normal&quot;,new ut(u,3)),this.setAttribute(&quot;uv&quot;,new ut(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new My(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Ay extends It{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type=&quot;CircleGeometry&quot;,this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],u=[],h=new K,f=new Re;o.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let p=0,m=3;p&lt;=t;p++,m+=3){const g=i+p/t*r;h.x=e*Math.cos(g),h.y=e*Math.sin(g),o.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(o[m]/e+1)/2,f.y=(o[m+1]/e+1)/2,u.push(f.x,f.y)}for(let p=1;p&lt;=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute(&quot;position&quot;,new ut(o,3)),this.setAttribute(&quot;normal&quot;,new ut(l,3)),this.setAttribute(&quot;uv&quot;,new ut(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ay(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Rh extends It{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,l=0,u=Math.PI*2){super(),this.type=&quot;CylinderGeometry&quot;,this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u};const h=this;r=Math.floor(r),s=Math.floor(s);const f=[],p=[],m=[],g=[];let v=0;const x=[],b=i/2;let _=0;T(),o===!1&amp;&amp;(e&gt;0&amp;&amp;w(!0),t&gt;0&amp;&amp;w(!1)),this.setIndex(f),this.setAttribute(&quot;position&quot;,new ut(p,3)),this.setAttribute(&quot;normal&quot;,new ut(m,3)),this.setAttribute(&quot;uv&quot;,new ut(g,2));function T(){const S=new K,C=new K;let O=0;const M=(t-e)/i;for(let N=0;N&lt;=s;N++){const R=[],D=N/s,L=D*(t-e)+e;for(let H=0;H&lt;=r;H++){const q=H/r,z=q*u+l,$=Math.sin(z),P=Math.cos(z);C.x=L*$,C.y=-D*i+b,C.z=L*P,p.push(C.x,C.y,C.z),S.set($,M,P).normalize(),m.push(S.x,S.y,S.z),g.push(q,1-D),R.push(v++)}x.push(R)}for(let N=0;N&lt;r;N++)for(let R=0;R&lt;s;R++){const D=x[R][N],L=x[R+1][N],H=x[R+1][N+1],q=x[R][N+1];(e&gt;0||R!==0)&amp;&amp;(f.push(D,L,q),O+=3),(t&gt;0||R!==s-1)&amp;&amp;(f.push(L,H,q),O+=3)}h.addGroup(_,O,0),_+=O}function w(S){const C=v,O=new Re,M=new K;let N=0;const R=S===!0?e:t,D=S===!0?1:-1;for(let H=1;H&lt;=r;H++)p.push(0,b*D,0),m.push(0,D,0),g.push(.5,.5),v++;const L=v;for(let H=0;H&lt;=r;H++){const z=H/r*u+l,$=Math.cos(z),P=Math.sin(z);M.x=R*P,M.y=b*D,M.z=R*$,p.push(M.x,M.y,M.z),m.push(0,D,0),O.x=$*.5+.5,O.y=P*.5*D+.5,g.push(O.x,O.y),v++}for(let H=0;H&lt;r;H++){const q=C+H,z=L+H;S===!0?f.push(z,z+1,q):f.push(z+1,z,q),N+=3}h.addGroup(_,N,S===!0?1:2),_+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Jd extends Rh{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,i,r,s,o,l),this.type=&quot;ConeGeometry&quot;,this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Jd(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ol extends It{constructor(e=[],t=[],i=1,r=0){super(),this.type=&quot;PolyhedronGeometry&quot;,this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];l(r),h(i),f(),this.setAttribute(&quot;position&quot;,new ut(s,3)),this.setAttribute(&quot;normal&quot;,new ut(s.slice(),3)),this.setAttribute(&quot;uv&quot;,new ut(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(T){const w=new K,S=new K,C=new K;for(let O=0;O&lt;t.length;O+=3)g(t[O+0],w),g(t[O+1],S),g(t[O+2],C),u(w,S,C,T)}function u(T,w,S,C){const O=C+1,M=[];for(let N=0;N&lt;=O;N++){M[N]=[];const R=T.clone().lerp(S,N/O),D=w.clone().lerp(S,N/O),L=O-N;for(let H=0;H&lt;=L;H++)H===0&amp;&amp;N===O?M[N][H]=R:M[N][H]=R.clone().lerp(D,H/L)}for(let N=0;N&lt;O;N++)for(let R=0;R&lt;2*(O-N)-1;R++){const D=Math.floor(R/2);R%2===0?(m(M[N][D+1]),m(M[N+1][D]),m(M[N][D])):(m(M[N][D+1]),m(M[N+1][D+1]),m(M[N+1][D]))}}function h(T){const w=new K;for(let S=0;S&lt;s.length;S+=3)w.x=s[S+0],w.y=s[S+1],w.z=s[S+2],w.normalize().multiplyScalar(T),s[S+0]=w.x,s[S+1]=w.y,s[S+2]=w.z}function f(){const T=new K;for(let w=0;w&lt;s.length;w+=3){T.x=s[w+0],T.y=s[w+1],T.z=s[w+2];const S=b(T)/2/Math.PI+.5,C=_(T)/Math.PI+.5;o.push(S,1-C)}v(),p()}function p(){for(let T=0;T&lt;o.length;T+=6){const w=o[T+0],S=o[T+2],C=o[T+4],O=Math.max(w,S,C),M=Math.min(w,S,C);O&gt;.9&amp;&amp;M&lt;.1&amp;&amp;(w&lt;.2&amp;&amp;(o[T+0]+=1),S&lt;.2&amp;&amp;(o[T+2]+=1),C&lt;.2&amp;&amp;(o[T+4]+=1))}}function m(T){s.push(T.x,T.y,T.z)}function g(T,w){const S=T*3;w.x=e[S+0],w.y=e[S+1],w.z=e[S+2]}function v(){const T=new K,w=new K,S=new K,C=new K,O=new Re,M=new Re,N=new Re;for(let R=0,D=0;R&lt;s.length;R+=9,D+=6){T.set(s[R+0],s[R+1],s[R+2]),w.set(s[R+3],s[R+4],s[R+5]),S.set(s[R+6],s[R+7],s[R+8]),O.set(o[D+0],o[D+1]),M.set(o[D+2],o[D+3]),N.set(o[D+4],o[D+5]),C.copy(T).add(w).add(S).divideScalar(3);const L=b(C);x(O,D+0,T,L),x(M,D+2,w,L),x(N,D+4,S,L)}}function x(T,w,S,C){C&lt;0&amp;&amp;T.x===1&amp;&amp;(o[w]=T.x-1),S.x===0&amp;&amp;S.z===0&amp;&amp;(o[w]=C/2/Math.PI+.5)}function b(T){return Math.atan2(T.z,-T.x)}function _(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ol(e.vertices,e.indices,e.radius,e.details)}}class Cy extends Ol{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type=&quot;DodecahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cy(e.radius,e.detail)}}const Um=new K,km=new K,Gb=new K,Fm=new br;class Ew extends It{constructor(e=null,t=1){if(super(),this.type=&quot;EdgesGeometry&quot;,this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Mc*t),o=e.getIndex(),l=e.getAttribute(&quot;position&quot;),u=o?o.count:l.count,h=[0,0,0],f=[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;],p=new Array(3),m={},g=[];for(let v=0;v&lt;u;v+=3){o?(h[0]=o.getX(v),h[1]=o.getX(v+1),h[2]=o.getX(v+2)):(h[0]=v,h[1]=v+1,h[2]=v+2);const{a:x,b,c:_}=Fm;if(x.fromBufferAttribute(l,h[0]),b.fromBufferAttribute(l,h[1]),_.fromBufferAttribute(l,h[2]),Fm.getNormal(Gb),p[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,p[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,p[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let T=0;T&lt;3;T++){const w=(T+1)%3,S=p[T],C=p[w],O=Fm[f[T]],M=Fm[f[w]],N=`${S}_${C}`,R=`${C}_${S}`;R in m&amp;&amp;m[R]?(Gb.dot(m[R].normal)&lt;=s&amp;&amp;(g.push(O.x,O.y,O.z),g.push(M.x,M.y,M.z)),m[R]=null):N in m||(m[N]={index0:h[T],index1:h[w],normal:Gb.clone()})}}for(const v in m)if(m[v]){const{index0:x,index1:b}=m[v];Um.fromBufferAttribute(l,x),km.fromBufferAttribute(l,b),g.push(Um.x,Um.y,Um.z),g.push(km.x,km.y,km.z)}this.setAttribute(&quot;position&quot;,new ut(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class no{constructor(){this.type=&quot;Curve&quot;,this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn(&quot;THREE.Curve: .getPoint() not implemented.&quot;)}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i&lt;=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i&lt;=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&amp;&amp;this.cacheArcLengths.length===e+1&amp;&amp;!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o&lt;=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let l=0,u=s-1,h;for(;l&lt;=u;)if(r=Math.floor(l+(u-l)/2),h=i[r]-o,h&lt;0)l=r+1;else if(h&gt;0)u=r-1;else{u=r;break}if(r=u,i[r]===o)return r/(s-1);const f=i[r],m=i[r+1]-f,g=(o-f)/m;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r&lt;0&amp;&amp;(r=0),s&gt;1&amp;&amp;(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=t||(o.isVector2?new Re:new K);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new K,r=[],s=[],o=[],l=new K,u=new yt;for(let g=0;g&lt;=e;g++){const v=g/e;r[g]=this.getTangentAt(v,new K)}s[0]=new K,o[0]=new K;let h=Number.MAX_VALUE;const f=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);f&lt;=h&amp;&amp;(h=f,i.set(1,0,0)),p&lt;=h&amp;&amp;(h=p,i.set(0,1,0)),m&lt;=h&amp;&amp;i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let g=1;g&lt;=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),l.crossVectors(r[g-1],r[g]),l.length()&gt;Number.EPSILON){l.normalize();const v=Math.acos(Gt(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(u.makeRotationAxis(l,v))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(Gt(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(l.crossVectors(s[0],s[e]))&gt;0&amp;&amp;(g=-g);for(let v=1;v&lt;=e;v++)s[v].applyMatrix4(u.makeRotationAxis(r[v],g*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:&quot;Curve&quot;,generator:&quot;Curve.toJSON&quot;}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ry extends no{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type=&quot;EllipseCurve&quot;,this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new Re){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)&lt;Number.EPSILON;for(;s&lt;0;)s+=r;for(;s&gt;r;)s-=r;s&lt;Number.EPSILON&amp;&amp;(o?s=0:s=r),this.aClockwise===!0&amp;&amp;!o&amp;&amp;(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=u-this.aX,g=h-this.aY;u=m*f-g*p+this.aX,h=m*p+g*f+this.aY}return i.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class hD extends Ry{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type=&quot;ArcCurve&quot;}}function Tw(){let n=0,e=0,t=0,i=0;function r(s,o,l,u){n=s,e=l,t=-3*s+3*o-2*l-u,i=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,h){r(o,l,h*(l-s),h*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,h,f,p){let m=(o-s)/h-(l-s)/(h+f)+(l-o)/f,g=(l-o)/f-(u-o)/(f+p)+(u-l)/p;m*=f,g*=f,r(o,l,m,g)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+i*l}}}const zm=new K,jb=new Tw,Wb=new Tw,Xb=new Tw;class fD extends no{constructor(e=[],t=!1,i=&quot;centripetal&quot;,r=.5){super(),this.isCatmullRomCurve3=!0,this.type=&quot;CatmullRomCurve3&quot;,this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new K){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),u=o-l;this.closed?l+=l&gt;0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&amp;&amp;l===s-1&amp;&amp;(l=s-2,u=1);let h,f;this.closed||l&gt;0?h=r[(l-1)%s]:(zm.subVectors(r[0],r[1]).add(r[0]),h=zm);const p=r[l%s],m=r[(l+1)%s];if(this.closed||l+2&lt;s?f=r[(l+2)%s]:(zm.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=zm),this.curveType===&quot;centripetal&quot;||this.curveType===&quot;chordal&quot;){const g=this.curveType===&quot;chordal&quot;?.5:.25;let v=Math.pow(h.distanceToSquared(p),g),x=Math.pow(p.distanceToSquared(m),g),b=Math.pow(m.distanceToSquared(f),g);x&lt;1e-4&amp;&amp;(x=1),v&lt;1e-4&amp;&amp;(v=x),b&lt;1e-4&amp;&amp;(b=x),jb.initNonuniformCatmullRom(h.x,p.x,m.x,f.x,v,x,b),Wb.initNonuniformCatmullRom(h.y,p.y,m.y,f.y,v,x,b),Xb.initNonuniformCatmullRom(h.z,p.z,m.z,f.z,v,x,b)}else this.curveType===&quot;catmullrom&quot;&amp;&amp;(jb.initCatmullRom(h.x,p.x,m.x,f.x,this.tension),Wb.initCatmullRom(h.y,p.y,m.y,f.y,this.tension),Xb.initCatmullRom(h.z,p.z,m.z,f.z,this.tension));return i.set(jb.calc(u),Wb.calc(u),Xb.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t&lt;i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(new K().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function UA(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,l=n*n,u=n*l;return(2*t-2*i+s+o)*u+(-3*t+3*i-2*s-o)*l+s*n+t}function Hz(n,e){const t=1-n;return t*t*e}function Vz(n,e){return 2*(1-n)*n*e}function Gz(n,e){return n*n*e}function hd(n,e,t,i){return Hz(n,e)+Vz(n,t)+Gz(n,i)}function jz(n,e){const t=1-n;return t*t*t*e}function Wz(n,e){const t=1-n;return 3*t*t*n*e}function Xz(n,e){return 3*(1-n)*n*n*e}function qz(n,e){return n*n*n*e}function fd(n,e,t,i,r){return jz(n,e)+Wz(n,t)+Xz(n,i)+qz(n,r)}class Mw extends no{constructor(e=new Re,t=new Re,i=new Re,r=new Re){super(),this.isCubicBezierCurve=!0,this.type=&quot;CubicBezierCurve&quot;,this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Re){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(fd(e,r.x,s.x,o.x,l.x),fd(e,r.y,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dD extends no{constructor(e=new K,t=new K,i=new K,r=new K){super(),this.isCubicBezierCurve3=!0,this.type=&quot;CubicBezierCurve3&quot;,this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(fd(e,r.x,s.x,o.x,l.x),fd(e,r.y,s.y,o.y,l.y),fd(e,r.z,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Aw extends no{constructor(e=new Re,t=new Re){super(),this.isLineCurve=!0,this.type=&quot;LineCurve&quot;,this.v1=e,this.v2=t}getPoint(e,t=new Re){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pD extends no{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type=&quot;LineCurve3&quot;,this.v1=e,this.v2=t}getPoint(e,t=new K){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Cw extends no{constructor(e=new Re,t=new Re,i=new Re){super(),this.isQuadraticBezierCurve=!0,this.type=&quot;QuadraticBezierCurve&quot;,this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Re){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(hd(e,r.x,s.x,o.x),hd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Rw extends no{constructor(e=new K,t=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type=&quot;QuadraticBezierCurve3&quot;,this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(hd(e,r.x,s.x,o.x),hd(e,r.y,s.y,o.y),hd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ow extends no{constructor(e=[]){super(),this.isSplineCurve=!0,this.type=&quot;SplineCurve&quot;,this.points=e}getPoint(e,t=new Re){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,u=r[o===0?o:o-1],h=r[o],f=r[o&gt;r.length-2?r.length-1:o+1],p=r[o&gt;r.length-3?r.length-1:o+2];return i.set(UA(l,u.x,h.x,f.x,p.x),UA(l,u.y,h.y,f.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t&lt;i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(new Re().fromArray(r))}return this}}var O0=Object.freeze({__proto__:null,ArcCurve:hD,CatmullRomCurve3:fD,CubicBezierCurve:Mw,CubicBezierCurve3:dD,EllipseCurve:Ry,LineCurve:Aw,LineCurve3:pD,QuadraticBezierCurve:Cw,QuadraticBezierCurve3:Rw,SplineCurve:Ow});class mD extends no{constructor(){super(),this.type=&quot;CurvePath&quot;,this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?&quot;LineCurve&quot;:&quot;LineCurve3&quot;;this.curves.push(new O0[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s&lt;r.length;){if(r[s]&gt;=i){const o=r[s]-i,l=this.curves[s],u=l.getLength(),h=u===0?0:1-o/u;return l.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&amp;&amp;this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i&lt;r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i&lt;=e;i++)t.push(this.getPoint(i/e));return this.autoClose&amp;&amp;t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r&lt;s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(l);for(let h=0;h&lt;u.length;h++){const f=u[h];i&amp;&amp;i.equals(f)||(t.push(f),i=f)}}return this.autoClose&amp;&amp;t.length&gt;1&amp;&amp;!t[t.length-1].equals(t[0])&amp;&amp;t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t&lt;i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t&lt;i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t&lt;i;t++){const r=e.curves[t];this.curves.push(new O0[r.type]().fromJSON(r))}return this}}class N0 extends mD{constructor(e){super(),this.type=&quot;Path&quot;,this.currentPoint=new Re,e&amp;&amp;this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t&lt;i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Aw(this.currentPoint.clone(),new Re(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Cw(this.currentPoint.clone(),new Re(e,t),new Re(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const l=new Mw(this.currentPoint.clone(),new Re(e,t),new Re(i,r),new Re(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Ow(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,l,u){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,i,r,s,o,l,u),this}absellipse(e,t,i,r,s,o,l,u){const h=new Ry(e,t,i,r,s,o,l,u);if(this.curves.length&gt;0){const p=h.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ac extends N0{constructor(e){super(e),this.uuid=ns(),this.type=&quot;Shape&quot;,this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i&lt;r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t&lt;i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t&lt;i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t&lt;i;t++){const r=e.holes[t];this.holes.push(new N0().fromJSON(r))}return this}}function Yz(n,e,t=2){const i=e&amp;&amp;e.length,r=i?e[0]*t:n.length;let s=gD(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,h;if(i&amp;&amp;(s=Qz(n,e,s,t)),n.length&gt;80*t){l=1/0,u=1/0;let f=-1/0,p=-1/0;for(let m=t;m&lt;r;m+=t){const g=n[m],v=n[m+1];g&lt;l&amp;&amp;(l=g),v&lt;u&amp;&amp;(u=v),g&gt;f&amp;&amp;(f=g),v&gt;p&amp;&amp;(p=v)}h=Math.max(f-l,p-u),h=h!==0?32767/h:0}return Md(s,o,t,l,u,h,0),o}function gD(n,e,t,i,r){let s;if(r===uB(n,e,t,i)&gt;0)for(let o=e;o&lt;t;o+=i)s=kA(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o&gt;=e;o-=i)s=kA(o/i|0,n[o],n[o+1],s);return s&amp;&amp;mh(s,s.next)&amp;&amp;(Cd(s),s=s.next),s}function Dc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&amp;&amp;(mh(t,t.next)||ri(t.prev,t,t.next)===0)){if(Cd(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Md(n,e,t,i,r,s,o){if(!n)return;!o&amp;&amp;s&amp;&amp;rB(n,i,r,s);let l=n;for(;n.prev!==n.next;){const u=n.prev,h=n.next;if(s?$z(n,i,r,s):Kz(n)){e.push(u.i,n.i,h.i),Cd(n),n=h.next,l=h.next;continue}if(n=h,n===l){o?o===1?(n=Zz(Dc(n),e),Md(n,e,t,i,r,s,2)):o===2&amp;&amp;Jz(n,e,t,i,r,s):Md(Dc(n),e,t,i,r,s,1);break}}}function Kz(n){const e=n.prev,t=n,i=n.next;if(ri(e,t,i)&gt;=0)return!1;const r=e.x,s=t.x,o=i.x,l=e.y,u=t.y,h=i.y,f=Math.min(r,s,o),p=Math.min(l,u,h),m=Math.max(r,s,o),g=Math.max(l,u,h);let v=i.next;for(;v!==e;){if(v.x&gt;=f&amp;&amp;v.x&lt;=m&amp;&amp;v.y&gt;=p&amp;&amp;v.y&lt;=g&amp;&amp;Qf(r,l,s,u,o,h,v.x,v.y)&amp;&amp;ri(v.prev,v,v.next)&gt;=0)return!1;v=v.next}return!0}function $z(n,e,t,i){const r=n.prev,s=n,o=n.next;if(ri(r,s,o)&gt;=0)return!1;const l=r.x,u=s.x,h=o.x,f=r.y,p=s.y,m=o.y,g=Math.min(l,u,h),v=Math.min(f,p,m),x=Math.max(l,u,h),b=Math.max(f,p,m),_=pS(g,v,e,t,i),T=pS(x,b,e,t,i);let w=n.prevZ,S=n.nextZ;for(;w&amp;&amp;w.z&gt;=_&amp;&amp;S&amp;&amp;S.z&lt;=T;){if(w.x&gt;=g&amp;&amp;w.x&lt;=x&amp;&amp;w.y&gt;=v&amp;&amp;w.y&lt;=b&amp;&amp;w!==r&amp;&amp;w!==o&amp;&amp;Qf(l,f,u,p,h,m,w.x,w.y)&amp;&amp;ri(w.prev,w,w.next)&gt;=0||(w=w.prevZ,S.x&gt;=g&amp;&amp;S.x&lt;=x&amp;&amp;S.y&gt;=v&amp;&amp;S.y&lt;=b&amp;&amp;S!==r&amp;&amp;S!==o&amp;&amp;Qf(l,f,u,p,h,m,S.x,S.y)&amp;&amp;ri(S.prev,S,S.next)&gt;=0))return!1;S=S.nextZ}for(;w&amp;&amp;w.z&gt;=_;){if(w.x&gt;=g&amp;&amp;w.x&lt;=x&amp;&amp;w.y&gt;=v&amp;&amp;w.y&lt;=b&amp;&amp;w!==r&amp;&amp;w!==o&amp;&amp;Qf(l,f,u,p,h,m,w.x,w.y)&amp;&amp;ri(w.prev,w,w.next)&gt;=0)return!1;w=w.prevZ}for(;S&amp;&amp;S.z&lt;=T;){if(S.x&gt;=g&amp;&amp;S.x&lt;=x&amp;&amp;S.y&gt;=v&amp;&amp;S.y&lt;=b&amp;&amp;S!==r&amp;&amp;S!==o&amp;&amp;Qf(l,f,u,p,h,m,S.x,S.y)&amp;&amp;ri(S.prev,S,S.next)&gt;=0)return!1;S=S.nextZ}return!0}function Zz(n,e){let t=n;do{const i=t.prev,r=t.next.next;!mh(i,r)&amp;&amp;_D(i,t,t.next,r)&amp;&amp;Ad(i,r)&amp;&amp;Ad(r,i)&amp;&amp;(e.push(i.i,t.i,r.i),Cd(t),Cd(t.next),t=n=r),t=t.next}while(t!==n);return Dc(t)}function Jz(n,e,t,i,r,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&amp;&amp;aB(o,l)){let u=vD(o,l);o=Dc(o,o.next),u=Dc(u,u.next),Md(o,e,t,i,r,s,0),Md(u,e,t,i,r,s,0);return}l=l.next}o=o.next}while(o!==n)}function Qz(n,e,t,i){const r=[];for(let s=0,o=e.length;s&lt;o;s++){const l=e[s]*i,u=s&lt;o-1?e[s+1]*i:n.length,h=gD(n,l,u,i,!1);h===h.next&amp;&amp;(h.steiner=!0),r.push(oB(h))}r.sort(eB);for(let s=0;s&lt;r.length;s++)t=tB(r[s],t);return t}function eB(n,e){let t=n.x-e.x;if(t===0&amp;&amp;(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function tB(n,e){const t=nB(n,e);if(!t)return e;const i=vD(t,n);return Dc(i,i.next),Dc(t,t.next)}function nB(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;if(mh(n,t))return t;do{if(mh(n,t.next))return t.next;if(r&lt;=t.y&amp;&amp;r&gt;=t.next.y&amp;&amp;t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p&lt;=i&amp;&amp;p&gt;s&amp;&amp;(s=p,o=t.x&lt;t.next.x?t:t.next,p===i))return o}t=t.next}while(t!==e);if(!o)return null;const l=o,u=o.x,h=o.y;let f=1/0;t=o;do{if(i&gt;=t.x&amp;&amp;t.x&gt;=u&amp;&amp;i!==t.x&amp;&amp;yD(r&lt;h?i:s,r,u,h,r&lt;h?s:i,r,t.x,t.y)){const p=Math.abs(r-t.y)/(i-t.x);Ad(t,n)&amp;&amp;(p&lt;f||p===f&amp;&amp;(t.x&gt;o.x||t.x===o.x&amp;&amp;iB(o,t)))&amp;&amp;(o=t,f=p)}t=t.next}while(t!==l);return o}function iB(n,e){return ri(n.prev,n,e.prev)&lt;0&amp;&amp;ri(e.next,n,n.next)&lt;0}function rB(n,e,t,i){let r=n;do r.z===0&amp;&amp;(r.z=pS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,sB(r)}function sB(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,l=0;for(let h=0;h&lt;t&amp;&amp;(l++,o=o.nextZ,!!o);h++);let u=t;for(;l&gt;0||u&gt;0&amp;&amp;o;)l!==0&amp;&amp;(u===0||!o||i.z&lt;=o.z)?(r=i,i=i.nextZ,l--):(r=o,o=o.nextZ,u--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e&gt;1);return n}function pS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n&lt;&lt;8)&amp;16711935,n=(n|n&lt;&lt;4)&amp;252645135,n=(n|n&lt;&lt;2)&amp;858993459,n=(n|n&lt;&lt;1)&amp;1431655765,e=(e|e&lt;&lt;8)&amp;16711935,e=(e|e&lt;&lt;4)&amp;252645135,e=(e|e&lt;&lt;2)&amp;858993459,e=(e|e&lt;&lt;1)&amp;1431655765,n|e&lt;&lt;1}function oB(n){let e=n,t=n;do(e.x&lt;t.x||e.x===t.x&amp;&amp;e.y&lt;t.y)&amp;&amp;(t=e),e=e.next;while(e!==n);return t}function yD(n,e,t,i,r,s,o,l){return(r-o)*(e-l)&gt;=(n-o)*(s-l)&amp;&amp;(n-o)*(i-l)&gt;=(t-o)*(e-l)&amp;&amp;(t-o)*(s-l)&gt;=(r-o)*(i-l)}function Qf(n,e,t,i,r,s,o,l){return!(n===o&amp;&amp;e===l)&amp;&amp;yD(n,e,t,i,r,s,o,l)}function aB(n,e){return n.next.i!==e.i&amp;&amp;n.prev.i!==e.i&amp;&amp;!lB(n,e)&amp;&amp;(Ad(n,e)&amp;&amp;Ad(e,n)&amp;&amp;cB(n,e)&amp;&amp;(ri(n.prev,n,e.prev)||ri(n,e.prev,e))||mh(n,e)&amp;&amp;ri(n.prev,n,n.next)&gt;0&amp;&amp;ri(e.prev,e,e.next)&gt;0)}function ri(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function mh(n,e){return n.x===e.x&amp;&amp;n.y===e.y}function _D(n,e,t,i){const r=Hm(ri(n,e,t)),s=Hm(ri(n,e,i)),o=Hm(ri(t,i,n)),l=Hm(ri(t,i,e));return!!(r!==s&amp;&amp;o!==l||r===0&amp;&amp;Bm(n,t,e)||s===0&amp;&amp;Bm(n,i,e)||o===0&amp;&amp;Bm(t,n,i)||l===0&amp;&amp;Bm(t,e,i))}function Bm(n,e,t){return e.x&lt;=Math.max(n.x,t.x)&amp;&amp;e.x&gt;=Math.min(n.x,t.x)&amp;&amp;e.y&lt;=Math.max(n.y,t.y)&amp;&amp;e.y&gt;=Math.min(n.y,t.y)}function Hm(n){return n&gt;0?1:n&lt;0?-1:0}function lB(n,e){let t=n;do{if(t.i!==n.i&amp;&amp;t.next.i!==n.i&amp;&amp;t.i!==e.i&amp;&amp;t.next.i!==e.i&amp;&amp;_D(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ad(n,e){return ri(n.prev,n,n.next)&lt;0?ri(n,e,n.next)&gt;=0&amp;&amp;ri(n,n.prev,e)&gt;=0:ri(n,e,n.prev)&lt;0||ri(n,n.next,e)&lt;0}function cB(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y&gt;s!=t.next.y&gt;s&amp;&amp;t.next.y!==t.y&amp;&amp;r&lt;(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&amp;&amp;(i=!i),t=t.next;while(t!==n);return i}function vD(n,e){const t=mS(n.i,n.x,n.y),i=mS(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function kA(n,e,t,i){const r=mS(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Cd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&amp;&amp;(n.prevZ.nextZ=n.nextZ),n.nextZ&amp;&amp;(n.nextZ.prevZ=n.prevZ)}function mS(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function uB(n,e,t,i){let r=0;for(let s=e,o=t-i;s&lt;t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class hB{static triangulate(e,t,i=2){return Yz(e,t,i)}}class $s{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s&lt;t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return $s.area(e)&lt;0}static triangulateShape(e,t){const i=[],r=[],s=[];FA(e),zA(i,e);let o=e.length;t.forEach(FA);for(let u=0;u&lt;t.length;u++)r.push(o),o+=t[u].length,zA(i,t[u]);const l=hB.triangulate(i,r);for(let u=0;u&lt;l.length;u+=3)s.push(l.slice(u,u+3));return s}}function FA(n){const e=n.length;e&gt;2&amp;&amp;n[e-1].equals(n[0])&amp;&amp;n.pop()}function zA(n,e){for(let t=0;t&lt;e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Oy extends It{constructor(e=new Ac([new Re(.5,.5),new Re(-.5,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t={}){super(),this.type=&quot;ExtrudeGeometry&quot;,this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,u=e.length;l&lt;u;l++){const h=e[l];o(h)}this.setAttribute(&quot;position&quot;,new ut(r,3)),this.setAttribute(&quot;uv&quot;,new ut(s,2)),this.computeVertexNormals();function o(l){const u=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:fB;let w,S=!1,C,O,M,N;_&amp;&amp;(w=_.getSpacedPoints(f),S=!0,m=!1,C=_.computeFrenetFrames(f,!1),O=new K,M=new K,N=new K),m||(b=0,g=0,v=0,x=0);const R=l.extractPoints(h);let D=R.shape;const L=R.holes;if(!$s.isClockWise(D)){D=D.reverse();for(let Q=0,Ve=L.length;Q&lt;Ve;Q++){const Le=L[Q];$s.isClockWise(Le)&amp;&amp;(L[Q]=Le.reverse())}}function q(Q){const Le=10000000000000001e-36;let Fe=Q[0];for(let De=1;De&lt;=Q.length;De++){const mt=De%Q.length,ze=Q[mt],te=ze.x-Fe.x,V=ze.y-Fe.y,pe=te*te+V*V,Ce=Math.max(Math.abs(ze.x),Math.abs(ze.y),Math.abs(Fe.x),Math.abs(Fe.y)),Ue=Le*Ce*Ce;if(pe&lt;=Ue){Q.splice(mt,1),De--;continue}Fe=ze}}q(D),L.forEach(q);const z=L.length,$=D;for(let Q=0;Q&lt;z;Q++){const Ve=L[Q];D=D.concat(Ve)}function P(Q,Ve,Le){return Ve||console.error(&quot;THREE.ExtrudeGeometry: vec does not exist&quot;),Q.clone().addScaledVector(Ve,Le)}const j=D.length;function G(Q,Ve,Le){let Fe,De,mt;const ze=Q.x-Ve.x,te=Q.y-Ve.y,V=Le.x-Q.x,pe=Le.y-Q.y,Ce=ze*ze+te*te,Ue=ze*pe-te*V;if(Math.abs(Ue)&gt;Number.EPSILON){const Me=Math.sqrt(Ce),Ze=Math.sqrt(V*V+pe*pe),qe=Ve.x-te/Me,ht=Ve.y+ze/Me,Ct=Le.x-pe/Ze,je=Le.y+V/Ze,ft=((Ct-qe)*pe-(je-ht)*V)/(ze*pe-te*V);Fe=qe+ze*ft-Q.x,De=ht+te*ft-Q.y;const St=Fe*Fe+De*De;if(St&lt;=2)return new Re(Fe,De);mt=Math.sqrt(St/2)}else{let Me=!1;ze&gt;Number.EPSILON?V&gt;Number.EPSILON&amp;&amp;(Me=!0):ze&lt;-Number.EPSILON?V&lt;-Number.EPSILON&amp;&amp;(Me=!0):Math.sign(te)===Math.sign(pe)&amp;&amp;(Me=!0),Me?(Fe=-te,De=ze,mt=Math.sqrt(Ce)):(Fe=ze,De=te,mt=Math.sqrt(Ce/2))}return new Re(Fe/mt,De/mt)}const ee=[];for(let Q=0,Ve=$.length,Le=Ve-1,Fe=Q+1;Q&lt;Ve;Q++,Le++,Fe++)Le===Ve&amp;&amp;(Le=0),Fe===Ve&amp;&amp;(Fe=0),ee[Q]=G($[Q],$[Le],$[Fe]);const F=[];let ne,le=ee.concat();for(let Q=0,Ve=z;Q&lt;Ve;Q++){const Le=L[Q];ne=[];for(let Fe=0,De=Le.length,mt=De-1,ze=Fe+1;Fe&lt;De;Fe++,mt++,ze++)mt===De&amp;&amp;(mt=0),ze===De&amp;&amp;(ze=0),ne[Fe]=G(Le[Fe],Le[mt],Le[ze]);F.push(ne),le=le.concat(ne)}let ce;if(b===0)ce=$s.triangulateShape($,L);else{const Q=[],Ve=[];for(let Le=0;Le&lt;b;Le++){const Fe=Le/b,De=g*Math.cos(Fe*Math.PI/2),mt=v*Math.sin(Fe*Math.PI/2)+x;for(let ze=0,te=$.length;ze&lt;te;ze++){const V=P($[ze],ee[ze],mt);He(V.x,V.y,-De),Fe===0&amp;&amp;Q.push(V)}for(let ze=0,te=z;ze&lt;te;ze++){const V=L[ze];ne=F[ze];const pe=[];for(let Ce=0,Ue=V.length;Ce&lt;Ue;Ce++){const Me=P(V[Ce],ne[Ce],mt);He(Me.x,Me.y,-De),Fe===0&amp;&amp;pe.push(Me)}Fe===0&amp;&amp;Ve.push(pe)}}ce=$s.triangulateShape(Q,Ve)}const ie=ce.length,oe=v+x;for(let Q=0;Q&lt;j;Q++){const Ve=m?P(D[Q],le[Q],oe):D[Q];S?(M.copy(C.normals[0]).multiplyScalar(Ve.x),O.copy(C.binormals[0]).multiplyScalar(Ve.y),N.copy(w[0]).add(M).add(O),He(N.x,N.y,N.z)):He(Ve.x,Ve.y,0)}for(let Q=1;Q&lt;=f;Q++)for(let Ve=0;Ve&lt;j;Ve++){const Le=m?P(D[Ve],le[Ve],oe):D[Ve];S?(M.copy(C.normals[Q]).multiplyScalar(Le.x),O.copy(C.binormals[Q]).multiplyScalar(Le.y),N.copy(w[Q]).add(M).add(O),He(N.x,N.y,N.z)):He(Le.x,Le.y,p/f*Q)}for(let Q=b-1;Q&gt;=0;Q--){const Ve=Q/b,Le=g*Math.cos(Ve*Math.PI/2),Fe=v*Math.sin(Ve*Math.PI/2)+x;for(let De=0,mt=$.length;De&lt;mt;De++){const ze=P($[De],ee[De],Fe);He(ze.x,ze.y,p+Le)}for(let De=0,mt=L.length;De&lt;mt;De++){const ze=L[De];ne=F[De];for(let te=0,V=ze.length;te&lt;V;te++){const pe=P(ze[te],ne[te],Fe);S?He(pe.x,pe.y+w[f-1].y,w[f-1].x+Le):He(pe.x,pe.y,p+Le)}}}ae(),ue();function ae(){const Q=r.length/3;if(m){let Ve=0,Le=j*Ve;for(let Fe=0;Fe&lt;ie;Fe++){const De=ce[Fe];Xe(De[2]+Le,De[1]+Le,De[0]+Le)}Ve=f+b*2,Le=j*Ve;for(let Fe=0;Fe&lt;ie;Fe++){const De=ce[Fe];Xe(De[0]+Le,De[1]+Le,De[2]+Le)}}else{for(let Ve=0;Ve&lt;ie;Ve++){const Le=ce[Ve];Xe(Le[2],Le[1],Le[0])}for(let Ve=0;Ve&lt;ie;Ve++){const Le=ce[Ve];Xe(Le[0]+j*f,Le[1]+j*f,Le[2]+j*f)}}i.addGroup(Q,r.length/3-Q,0)}function ue(){const Q=r.length/3;let Ve=0;ve($,Ve),Ve+=$.length;for(let Le=0,Fe=L.length;Le&lt;Fe;Le++){const De=L[Le];ve(De,Ve),Ve+=De.length}i.addGroup(Q,r.length/3-Q,1)}function ve(Q,Ve){let Le=Q.length;for(;--Le&gt;=0;){const Fe=Le;let De=Le-1;De&lt;0&amp;&amp;(De=Q.length-1);for(let mt=0,ze=f+b*2;mt&lt;ze;mt++){const te=j*mt,V=j*(mt+1),pe=Ve+Fe+te,Ce=Ve+De+te,Ue=Ve+De+V,Me=Ve+Fe+V;ct(pe,Ce,Ue,Me)}}}function He(Q,Ve,Le){u.push(Q),u.push(Ve),u.push(Le)}function Xe(Q,Ve,Le){We(Q),We(Ve),We(Le);const Fe=r.length/3,De=T.generateTopUV(i,r,Fe-3,Fe-2,Fe-1);Ke(De[0]),Ke(De[1]),Ke(De[2])}function ct(Q,Ve,Le,Fe){We(Q),We(Ve),We(Fe),We(Ve),We(Le),We(Fe);const De=r.length/3,mt=T.generateSideWallUV(i,r,De-6,De-3,De-2,De-1);Ke(mt[0]),Ke(mt[1]),Ke(mt[3]),Ke(mt[1]),Ke(mt[2]),Ke(mt[3])}function We(Q){r.push(u[Q*3+0]),r.push(u[Q*3+1]),r.push(u[Q*3+2])}function Ke(Q){s.push(Q.x),s.push(Q.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return dB(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s&lt;o;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&amp;&amp;(e.options.extrudePath=new O0[r.type]().fromJSON(r)),new Oy(i,e.options)}}const fB={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],l=e[i*3],u=e[i*3+1],h=e[r*3],f=e[r*3+1];return[new Re(s,o),new Re(l,u),new Re(h,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],l=e[t*3+1],u=e[t*3+2],h=e[i*3],f=e[i*3+1],p=e[i*3+2],m=e[r*3],g=e[r*3+1],v=e[r*3+2],x=e[s*3],b=e[s*3+1],_=e[s*3+2];return Math.abs(l-f)&lt;Math.abs(o-h)?[new Re(o,1-u),new Re(h,1-p),new Re(m,1-v),new Re(x,1-_)]:[new Re(l,1-u),new Re(f,1-p),new Re(g,1-v),new Re(b,1-_)]}};function dB(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i&lt;r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&amp;&amp;(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ny extends Ol{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type=&quot;IcosahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ny(e.radius,e.detail)}}class Dy extends It{constructor(e=[new Re(0,-.5),new Re(.5,0),new Re(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type=&quot;LatheGeometry&quot;,this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Gt(r,0,Math.PI*2);const s=[],o=[],l=[],u=[],h=[],f=1/t,p=new K,m=new Re,g=new K,v=new K,x=new K;let b=0,_=0;for(let T=0;T&lt;=e.length-1;T++)switch(T){case 0:b=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,g.x=_*1,g.y=-b,g.z=_*0,x.copy(g),g.normalize(),u.push(g.x,g.y,g.z);break;case e.length-1:u.push(x.x,x.y,x.z);break;default:b=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,g.x=_*1,g.y=-b,g.z=_*0,v.copy(g),g.x+=x.x,g.y+=x.y,g.z+=x.z,g.normalize(),u.push(g.x,g.y,g.z),x.copy(v)}for(let T=0;T&lt;=t;T++){const w=i+T*f*r,S=Math.sin(w),C=Math.cos(w);for(let O=0;O&lt;=e.length-1;O++){p.x=e[O].x*S,p.y=e[O].y,p.z=e[O].x*C,o.push(p.x,p.y,p.z),m.x=T/t,m.y=O/(e.length-1),l.push(m.x,m.y);const M=u[3*O+0]*S,N=u[3*O+1],R=u[3*O+0]*C;h.push(M,N,R)}}for(let T=0;T&lt;t;T++)for(let w=0;w&lt;e.length-1;w++){const S=w+T*e.length,C=S,O=S+e.length,M=S+e.length+1,N=S+1;s.push(C,O,N),s.push(M,N,O)}this.setIndex(s),this.setAttribute(&quot;position&quot;,new ut(o,3)),this.setAttribute(&quot;uv&quot;,new ut(l,2)),this.setAttribute(&quot;normal&quot;,new ut(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dy(e.points,e.segments,e.phiStart,e.phiLength)}}class Qd extends Ol{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type=&quot;OctahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qd(e.radius,e.detail)}}class Oh extends It{constructor(e=1,t=1,i=1,r=1){super(),this.type=&quot;PlaneGeometry&quot;,this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(i),u=Math.floor(r),h=l+1,f=u+1,p=e/l,m=t/u,g=[],v=[],x=[],b=[];for(let _=0;_&lt;f;_++){const T=_*m-o;for(let w=0;w&lt;h;w++){const S=w*p-s;v.push(S,-T,0),x.push(0,0,1),b.push(w/l),b.push(1-_/u)}}for(let _=0;_&lt;u;_++)for(let T=0;T&lt;l;T++){const w=T+h*_,S=T+h*(_+1),C=T+1+h*(_+1),O=T+1+h*_;g.push(w,S,O),g.push(S,C,O)}this.setIndex(g),this.setAttribute(&quot;position&quot;,new ut(v,3)),this.setAttribute(&quot;normal&quot;,new ut(x,3)),this.setAttribute(&quot;uv&quot;,new ut(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oh(e.width,e.height,e.widthSegments,e.heightSegments)}}class Iy extends It{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type=&quot;RingGeometry&quot;,this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const l=[],u=[],h=[],f=[];let p=e;const m=(t-e)/r,g=new K,v=new Re;for(let x=0;x&lt;=r;x++){for(let b=0;b&lt;=i;b++){const _=s+b/i*o;g.x=p*Math.cos(_),g.y=p*Math.sin(_),u.push(g.x,g.y,g.z),h.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,f.push(v.x,v.y)}p+=m}for(let x=0;x&lt;r;x++){const b=x*(i+1);for(let _=0;_&lt;i;_++){const T=_+b,w=T,S=T+i+1,C=T+i+2,O=T+1;l.push(w,S,O),l.push(S,C,O)}}this.setIndex(l),this.setAttribute(&quot;position&quot;,new ut(u,3)),this.setAttribute(&quot;normal&quot;,new ut(h,3)),this.setAttribute(&quot;uv&quot;,new ut(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Iy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Py extends It{constructor(e=new Ac([new Re(0,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t=12){super(),this.type=&quot;ShapeGeometry&quot;,this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let l=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f&lt;e.length;f++)h(e[f]),this.addGroup(l,u,f),l+=u,u=0;this.setIndex(i),this.setAttribute(&quot;position&quot;,new ut(r,3)),this.setAttribute(&quot;normal&quot;,new ut(s,3)),this.setAttribute(&quot;uv&quot;,new ut(o,2));function h(f){const p=r.length/3,m=f.extractPoints(t);let g=m.shape;const v=m.holes;$s.isClockWise(g)===!1&amp;&amp;(g=g.reverse());for(let b=0,_=v.length;b&lt;_;b++){const T=v[b];$s.isClockWise(T)===!0&amp;&amp;(v[b]=T.reverse())}const x=$s.triangulateShape(g,v);for(let b=0,_=v.length;b&lt;_;b++){const T=v[b];g=g.concat(T)}for(let b=0,_=g.length;b&lt;_;b++){const T=g[b];r.push(T.x,T.y,0),s.push(0,0,1),o.push(T.x,T.y)}for(let b=0,_=x.length;b&lt;_;b++){const T=x[b],w=T[0]+p,S=T[1]+p,C=T[2]+p;i.push(w,S,C),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return pB(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r&lt;s;r++){const o=t[e.shapes[r]];i.push(o)}return new Py(i,e.curveSegments)}}function pB(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t&lt;i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Nh extends It{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type=&quot;SphereGeometry&quot;,this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(o+l,Math.PI);let h=0;const f=[],p=new K,m=new K,g=[],v=[],x=[],b=[];for(let _=0;_&lt;=i;_++){const T=[],w=_/i;let S=0;_===0&amp;&amp;o===0?S=.5/t:_===i&amp;&amp;u===Math.PI&amp;&amp;(S=-.5/t);for(let C=0;C&lt;=t;C++){const O=C/t;p.x=-e*Math.cos(r+O*s)*Math.sin(o+w*l),p.y=e*Math.cos(o+w*l),p.z=e*Math.sin(r+O*s)*Math.sin(o+w*l),v.push(p.x,p.y,p.z),m.copy(p).normalize(),x.push(m.x,m.y,m.z),b.push(O+S,1-w),T.push(h++)}f.push(T)}for(let _=0;_&lt;i;_++)for(let T=0;T&lt;t;T++){const w=f[_][T+1],S=f[_][T],C=f[_+1][T],O=f[_+1][T+1];(_!==0||o&gt;0)&amp;&amp;g.push(w,S,O),(_!==i-1||u&lt;Math.PI)&amp;&amp;g.push(S,C,O)}this.setIndex(g),this.setAttribute(&quot;position&quot;,new ut(v,3)),this.setAttribute(&quot;normal&quot;,new ut(x,3)),this.setAttribute(&quot;uv&quot;,new ut(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Ly extends Ol{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type=&quot;TetrahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ly(e.radius,e.detail)}}class Uy extends It{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type=&quot;TorusGeometry&quot;,this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],u=[],h=[],f=new K,p=new K,m=new K;for(let g=0;g&lt;=i;g++)for(let v=0;v&lt;=r;v++){const x=v/r*s,b=g/i*Math.PI*2;p.x=(e+t*Math.cos(b))*Math.cos(x),p.y=(e+t*Math.cos(b))*Math.sin(x),p.z=t*Math.sin(b),l.push(p.x,p.y,p.z),f.x=e*Math.cos(x),f.y=e*Math.sin(x),m.subVectors(p,f).normalize(),u.push(m.x,m.y,m.z),h.push(v/r),h.push(g/i)}for(let g=1;g&lt;=i;g++)for(let v=1;v&lt;=r;v++){const x=(r+1)*g+v-1,b=(r+1)*(g-1)+v-1,_=(r+1)*(g-1)+v,T=(r+1)*g+v;o.push(x,b,T),o.push(b,_,T)}this.setIndex(o),this.setAttribute(&quot;position&quot;,new ut(l,3)),this.setAttribute(&quot;normal&quot;,new ut(u,3)),this.setAttribute(&quot;uv&quot;,new ut(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Uy(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ky extends It{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type=&quot;TorusKnotGeometry&quot;,this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const l=[],u=[],h=[],f=[],p=new K,m=new K,g=new K,v=new K,x=new K,b=new K,_=new K;for(let w=0;w&lt;=i;++w){const S=w/i*s*Math.PI*2;T(S,s,o,e,g),T(S+.01,s,o,e,v),b.subVectors(v,g),_.addVectors(v,g),x.crossVectors(b,_),_.crossVectors(x,b),x.normalize(),_.normalize();for(let C=0;C&lt;=r;++C){const O=C/r*Math.PI*2,M=-t*Math.cos(O),N=t*Math.sin(O);p.x=g.x+(M*_.x+N*x.x),p.y=g.y+(M*_.y+N*x.y),p.z=g.z+(M*_.z+N*x.z),u.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),h.push(m.x,m.y,m.z),f.push(w/i),f.push(C/r)}}for(let w=1;w&lt;=i;w++)for(let S=1;S&lt;=r;S++){const C=(r+1)*(w-1)+(S-1),O=(r+1)*w+(S-1),M=(r+1)*w+S,N=(r+1)*(w-1)+S;l.push(C,O,N),l.push(O,M,N)}this.setIndex(l),this.setAttribute(&quot;position&quot;,new ut(u,3)),this.setAttribute(&quot;normal&quot;,new ut(h,3)),this.setAttribute(&quot;uv&quot;,new ut(f,2));function T(w,S,C,O,M){const N=Math.cos(w),R=Math.sin(w),D=C/S*w,L=Math.cos(D);M.x=O*(2+L)*.5*N,M.y=O*(2+L)*R*.5,M.z=O*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ky(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Fy extends It{constructor(e=new Rw(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type=&quot;TubeGeometry&quot;,this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new K,u=new K,h=new Re;let f=new K;const p=[],m=[],g=[],v=[];x(),this.setIndex(v),this.setAttribute(&quot;position&quot;,new ut(p,3)),this.setAttribute(&quot;normal&quot;,new ut(m,3)),this.setAttribute(&quot;uv&quot;,new ut(g,2));function x(){for(let w=0;w&lt;t;w++)b(w);b(s===!1?t:0),T(),_()}function b(w){f=e.getPointAt(w/t,f);const S=o.normals[w],C=o.binormals[w];for(let O=0;O&lt;=r;O++){const M=O/r*Math.PI*2,N=Math.sin(M),R=-Math.cos(M);u.x=R*S.x+N*C.x,u.y=R*S.y+N*C.y,u.z=R*S.z+N*C.z,u.normalize(),m.push(u.x,u.y,u.z),l.x=f.x+i*u.x,l.y=f.y+i*u.y,l.z=f.z+i*u.z,p.push(l.x,l.y,l.z)}}function _(){for(let w=1;w&lt;=t;w++)for(let S=1;S&lt;=r;S++){const C=(r+1)*(w-1)+(S-1),O=(r+1)*w+(S-1),M=(r+1)*w+S,N=(r+1)*(w-1)+S;v.push(C,O,N),v.push(O,M,N)}}function T(){for(let w=0;w&lt;=t;w++)for(let S=0;S&lt;=r;S++)h.x=w/t,h.y=S/r,g.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Fy(new O0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class bD extends It{constructor(e=null){if(super(),this.type=&quot;WireframeGeometry&quot;,this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new K,s=new K;if(e.index!==null){const o=e.attributes.position,l=e.index;let u=e.groups;u.length===0&amp;&amp;(u=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,f=u.length;h&lt;f;++h){const p=u[h],m=p.start,g=p.count;for(let v=m,x=m+g;v&lt;x;v+=3)for(let b=0;b&lt;3;b++){const _=l.getX(v+b),T=l.getX(v+(b+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,T),BA(r,s,i)===!0&amp;&amp;(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,u=o.count/3;l&lt;u;l++)for(let h=0;h&lt;3;h++){const f=3*l+h,p=3*l+(h+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,p),BA(r,s,i)===!0&amp;&amp;(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute(&quot;position&quot;,new ut(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function BA(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var HA=Object.freeze({__proto__:null,BoxGeometry:Rl,CapsuleGeometry:My,CircleGeometry:Ay,ConeGeometry:Jd,CylinderGeometry:Rh,DodecahedronGeometry:Cy,EdgesGeometry:Ew,ExtrudeGeometry:Oy,IcosahedronGeometry:Ny,LatheGeometry:Dy,OctahedronGeometry:Qd,PlaneGeometry:Oh,PolyhedronGeometry:Ol,RingGeometry:Iy,ShapeGeometry:Py,SphereGeometry:Nh,TetrahedronGeometry:Ly,TorusGeometry:Uy,TorusKnotGeometry:ky,TubeGeometry:Fy,WireframeGeometry:bD});class xD extends Di{constructor(e){super(),this.isShadowMaterial=!0,this.type=&quot;ShadowMaterial&quot;,this.color=new Ye(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class SD extends Br{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type=&quot;RawShaderMaterial&quot;}}class rs extends Di{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type=&quot;MeshStandardMaterial&quot;,this.defines={STANDARD:&quot;&quot;},this.color=new Ye(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:&quot;&quot;},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class as extends rs{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:&quot;&quot;,PHYSICAL:&quot;&quot;},this.type=&quot;MeshPhysicalMaterial&quot;,this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Re(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,&quot;reflectivity&quot;,{get:function(){return Gt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ye(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ye(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ye(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy&gt;0!=e&gt;0&amp;&amp;this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat&gt;0!=e&gt;0&amp;&amp;this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence&gt;0!=e&gt;0&amp;&amp;this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion&gt;0!=e&gt;0&amp;&amp;this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen&gt;0!=e&gt;0&amp;&amp;this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission&gt;0!=e&gt;0&amp;&amp;this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:&quot;&quot;,PHYSICAL:&quot;&quot;},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ml extends Di{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type=&quot;MeshPhongMaterial&quot;,this.color=new Ye(16777215),this.specular=new Ye(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=Wd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Nw extends Di{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:&quot;&quot;},this.type=&quot;MeshToonMaterial&quot;,this.color=new Ye(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class wD extends Di{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type=&quot;MeshNormalMaterial&quot;,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class zy extends Di{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type=&quot;MeshLambertMaterial&quot;,this.color=new Ye(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Er,this.combine=Wd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Dw extends Di{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type=&quot;MeshDepthMaterial&quot;,this.depthPacking=VN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Iw extends Di{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type=&quot;MeshDistanceMaterial&quot;,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class ED extends Di{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:&quot;&quot;},this.type=&quot;MeshMatcapMaterial&quot;,this.color=new Ye(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Al,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:&quot;&quot;},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TD extends Ji{constructor(e){super(),this.isLineDashedMaterial=!0,this.type=&quot;LineDashedMaterial&quot;,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Sc(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT==&quot;number&quot;?new e(n):Array.prototype.slice.call(n)}function MD(n){return ArrayBuffer.isView(n)&amp;&amp;!(n instanceof DataView)}function AD(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function gS(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const l=t[s]*e;for(let u=0;u!==e;++u)r[o++]=n[l+u]}return r}function Pw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&amp;&amp;s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&amp;&amp;(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&amp;&amp;(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&amp;&amp;(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function mB(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let u=0;u&lt;s.tracks.length;++u){const h=s.tracks[u],f=h.getValueSize(),p=[],m=[];for(let g=0;g&lt;h.times.length;++g){const v=h.times[g]*r;if(!(v&lt;t||v&gt;=i)){p.push(h.times[g]);for(let x=0;x&lt;f;++x)m.push(h.values[g*f+x])}}p.length!==0&amp;&amp;(h.times=Sc(p,h.times.constructor),h.values=Sc(m,h.values.constructor),o.push(h))}s.tracks=o;let l=1/0;for(let u=0;u&lt;s.tracks.length;++u)l&gt;s.tracks[u].times[0]&amp;&amp;(l=s.tracks[u].times[0]);for(let u=0;u&lt;s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function gB(n,e=0,t=n,i=30){i&lt;=0&amp;&amp;(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o&lt;r;++o){const l=t.tracks[o],u=l.ValueTypeName;if(u===&quot;bool&quot;||u===&quot;string&quot;)continue;const h=n.tracks.find(function(_){return _.name===l.name&amp;&amp;_.ValueTypeName===u});if(h===void 0)continue;let f=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&amp;&amp;(f=p/3);let m=0;const g=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&amp;&amp;(m=g/3);const v=l.times.length-1;let x;if(s&lt;=l.times[0]){const _=f,T=p-f;x=l.values.slice(_,T)}else if(s&gt;=l.times[v]){const _=v*p+f,T=_+p-f;x=l.values.slice(_,T)}else{const _=l.createInterpolant(),T=f,w=p-f;_.evaluate(s),x=_.resultBuffer.slice(T,w)}u===&quot;quaternion&quot;&amp;&amp;new Ti().fromArray(x).normalize().conjugate().toArray(x);const b=h.times.length;for(let _=0;_&lt;b;++_){const T=_*g+m;if(u===&quot;quaternion&quot;)Ti.multiplyQuaternionsFlat(h.values,T,x,0,h.values,T);else{const w=g-m*2;for(let S=0;S&lt;w;++S)h.values[T+S]-=x[S]}}}return n.blendMode=mw,n}class yB{static convertArray(e,t){return Sc(e,t)}static isTypedArray(e){return MD(e)}static getKeyframeOrder(e){return AD(e)}static sortedArray(e,t,i){return gS(e,t,i)}static flattenJSON(e,t,i,r){Pw(e,t,i,r)}static subclip(e,t,i,r,s=30){return mB(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return gB(e,t,i,r)}}class Dh{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e&lt;r)){for(let l=i+2;;){if(r===void 0){if(e&lt;s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e&lt;r)break t}o=t.length;break n}if(!(e&gt;=s)){const l=t[1];e&lt;l&amp;&amp;(i=2,s=l);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=s,s=t[--i-1],e&gt;=s)break t}o=i,i=0;break n}break e}for(;i&lt;o;){const l=i+o&gt;&gt;&gt;1;e&lt;t[l]?o=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error(&quot;call to abstract method&quot;)}intervalChanged_(){}}class CD extends Dh{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bc,endingEnd:bc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],u=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case xc:s=e,l=2*t-i;break;case xd:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(u===void 0)switch(this.getSettings_().endingEnd){case xc:o=e,u=2*i-t;break;case xd:o=1,u=i+r[1]-r[0];break;default:o=e-1,u=t}const h=(i-t)*.5,f=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(u-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,f=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),x=v*v,b=x*v,_=-m*b+2*m*x-m*v,T=(1+m)*b+(-1.5-2*m)*x+(-.5+m)*v+1,w=(-1-g)*b+(1.5+g)*x+.5*v,S=g*b-g*x;for(let C=0;C!==l;++C)s[C]=_*o[f+C]+T*o[h+C]+w*o[u+C]+S*o[p+C];return s}}class Lw extends Dh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,f=(i-t)/(r-t),p=1-f;for(let m=0;m!==l;++m)s[m]=o[h+m]*p+o[u+m]*f;return s}}class RD extends Dh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Os{constructor(e,t,i,r){if(e===void 0)throw new Error(&quot;THREE.KeyframeTrack: track name is undefined&quot;);if(t===void 0||t.length===0)throw new Error(&quot;THREE.KeyframeTrack: no keyframes in track named &quot;+e);this.name=e,this.times=Sc(t,this.TimeBufferType),this.values=Sc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Sc(e.times,Array),values:Sc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&amp;&amp;(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new RD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Lw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case hh:t=this.InterpolantFactoryMethodDiscrete;break;case fh:t=this.InterpolantFactoryMethodLinear;break;case Ng:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i=&quot;unsupported interpolation for &quot;+this.ValueTypeName+&quot; keyframe track named &quot;+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn(&quot;THREE.KeyframeTrack:&quot;,i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return hh;case this.InterpolantFactoryMethodLinear:return fh;case this.InterpolantFactoryMethodSmooth:return Ng}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&amp;&amp;i[s]&lt;e;)++s;for(;o!==-1&amp;&amp;i[o]&gt;t;)--o;if(++o,s!==0||o!==r){s&gt;=o&amp;&amp;(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&amp;&amp;(console.error(&quot;THREE.KeyframeTrack: Invalid value size in track.&quot;,this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&amp;&amp;(console.error(&quot;THREE.KeyframeTrack: Track is empty.&quot;,this),e=!1);let o=null;for(let l=0;l!==s;l++){const u=i[l];if(typeof u==&quot;number&quot;&amp;&amp;isNaN(u)){console.error(&quot;THREE.KeyframeTrack: Time is not a valid number.&quot;,this,l,u),e=!1;break}if(o!==null&amp;&amp;o&gt;u){console.error(&quot;THREE.KeyframeTrack: Out of order keys.&quot;,this,l,u,o),e=!1;break}o=u}if(r!==void 0&amp;&amp;MD(r))for(let l=0,u=r.length;l!==u;++l){const h=r[l];if(isNaN(h)){console.error(&quot;THREE.KeyframeTrack: Value is not a valid number.&quot;,this,l,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Ng,s=e.length-1;let o=1;for(let l=1;l&lt;s;++l){let u=!1;const h=e[l],f=e[l+1];if(h!==f&amp;&amp;(l!==1||h!==e[0]))if(r)u=!0;else{const p=l*i,m=p-i,g=p+i;for(let v=0;v!==i;++v){const x=t[p+v];if(x!==t[m+v]||x!==t[g+v]){u=!0;break}}}if(u){if(l!==o){e[o]=e[l];const p=l*i,m=o*i;for(let g=0;g!==i;++g)t[m+g]=t[p+g]}++o}}if(s&gt;0){e[o]=e[s];for(let l=s*i,u=o*i,h=0;h!==i;++h)t[u+h]=t[l+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Os.prototype.ValueTypeName=&quot;&quot;;Os.prototype.TimeBufferType=Float32Array;Os.prototype.ValueBufferType=Float32Array;Os.prototype.DefaultInterpolation=fh;class Bc extends Os{constructor(e,t,i){super(e,t,i)}}Bc.prototype.ValueTypeName=&quot;bool&quot;;Bc.prototype.ValueBufferType=Array;Bc.prototype.DefaultInterpolation=hh;Bc.prototype.InterpolantFactoryMethodLinear=void 0;Bc.prototype.InterpolantFactoryMethodSmooth=void 0;class Uw extends Os{constructor(e,t,i,r){super(e,t,i,r)}}Uw.prototype.ValueTypeName=&quot;color&quot;;class Ic extends Os{constructor(e,t,i,r){super(e,t,i,r)}}Ic.prototype.ValueTypeName=&quot;number&quot;;class OD extends Dh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(i-t)/(r-t);let h=e*l;for(let f=h+l;h!==f;h+=4)Ti.slerpFlat(s,0,o,h-l,o,h,u);return s}}class xl extends Os{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new OD(this.times,this.values,this.getValueSize(),e)}}xl.prototype.ValueTypeName=&quot;quaternion&quot;;xl.prototype.InterpolantFactoryMethodSmooth=void 0;class Hc extends Os{constructor(e,t,i){super(e,t,i)}}Hc.prototype.ValueTypeName=&quot;string&quot;;Hc.prototype.ValueBufferType=Array;Hc.prototype.DefaultInterpolation=hh;Hc.prototype.InterpolantFactoryMethodLinear=void 0;Hc.prototype.InterpolantFactoryMethodSmooth=void 0;class ba extends Os{constructor(e,t,i,r){super(e,t,i,r)}}ba.prototype.ValueTypeName=&quot;vector&quot;;class Sl{constructor(e=&quot;&quot;,t=-1,i=[],r=dy){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ns(),this.duration&lt;0&amp;&amp;this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,l=i.length;o!==l;++o)t.push(vB(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Os.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let l=0;l&lt;s;l++){let u=[],h=[];u.push((l+s-1)%s,l,(l+1)%s),h.push(0,1,0);const f=AD(u);u=gS(u,1,f),h=gS(h,1,f),!r&amp;&amp;u[0]===0&amp;&amp;(u.push(s),h.push(h[0])),o.push(new Ic(&quot;.morphTargetInfluences[&quot;+t[l].name+&quot;]&quot;,u,h).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&amp;&amp;r.geometry.animations||r.animations}for(let r=0;r&lt;i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l&lt;u;l++){const h=e[l],f=h.name.match(s);if(f&amp;&amp;f.length&gt;1){const p=f[1];let m=r[p];m||(r[p]=m=[]),m.push(h)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return o}static parseAnimation(e,t){if(console.warn(&quot;THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185&quot;),!e)return console.error(&quot;THREE.AnimationClip: No animation in JSONLoader data.&quot;),null;const i=function(p,m,g,v,x){if(g.length!==0){const b=[],_=[];Pw(g,b,_,v),b.length!==0&amp;&amp;x.push(new p(m,b,_))}},r=[],s=e.name||&quot;default&quot;,o=e.fps||30,l=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let p=0;p&lt;h.length;p++){const m=h[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let v;for(v=0;v&lt;m.length;v++)if(m[v].morphTargets)for(let x=0;x&lt;m[v].morphTargets.length;x++)g[m[v].morphTargets[x]]=-1;for(const x in g){const b=[],_=[];for(let T=0;T!==m[v].morphTargets.length;++T){const w=m[v];b.push(w.time),_.push(w.morphTarget===x?1:0)}r.push(new Ic(&quot;.morphTargetInfluence[&quot;+x+&quot;]&quot;,b,_))}u=g.length*o}else{const g=&quot;.bones[&quot;+t[p].name+&quot;]&quot;;i(ba,g+&quot;.position&quot;,m,&quot;pos&quot;,r),i(xl,g+&quot;.quaternion&quot;,m,&quot;rot&quot;,r),i(ba,g+&quot;.scale&quot;,m,&quot;scl&quot;,r)}}return r.length===0?null:new this(s,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e&lt;this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t&lt;this.tracks.length;t++)e=e&amp;&amp;this.tracks[t].validate();return e}optimize(){for(let e=0;e&lt;this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t&lt;this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function _B(n){switch(n.toLowerCase()){case&quot;scalar&quot;:case&quot;double&quot;:case&quot;float&quot;:case&quot;number&quot;:case&quot;integer&quot;:return Ic;case&quot;vector&quot;:case&quot;vector2&quot;:case&quot;vector3&quot;:case&quot;vector4&quot;:return ba;case&quot;color&quot;:return Uw;case&quot;quaternion&quot;:return xl;case&quot;bool&quot;:case&quot;boolean&quot;:return Bc;case&quot;string&quot;:return Hc}throw new Error(&quot;THREE.KeyframeTrack: Unsupported typeName: &quot;+n)}function vB(n){if(n.type===void 0)throw new Error(&quot;THREE.KeyframeTrack: track type undefined, can not parse&quot;);const e=_B(n.type);if(n.times===void 0){const t=[],i=[];Pw(n.keys,t,i,&quot;value&quot;),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ca={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&amp;&amp;(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class kw{constructor(e,t,i){const r=this;let s=!1,o=0,l=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){l++,s===!1&amp;&amp;r.onStart!==void 0&amp;&amp;r.onStart(f,o,l),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&amp;&amp;r.onProgress(f,o,l),o===l&amp;&amp;(s=!1,r.onLoad!==void 0&amp;&amp;r.onLoad())},this.itemError=function(f){r.onError!==void 0&amp;&amp;r.onError(f)},this.resolveURL=function(f){return u?u(f):f},this.setURLModifier=function(f){return u=f,this},this.addHandler=function(f,p){return h.push(f,p),this},this.removeHandler=function(f){const p=h.indexOf(f);return p!==-1&amp;&amp;h.splice(p,2),this},this.getHandler=function(f){for(let p=0,m=h.length;p&lt;m;p+=2){const g=h[p],v=h[p+1];if(g.global&amp;&amp;(g.lastIndex=0),g.test(f))return v}return null}}}const Fw=new kw;class Qi{constructor(e){this.manager=e!==void 0?e:Fw,this.crossOrigin=&quot;anonymous&quot;,this.withCredentials=!1,this.path=&quot;&quot;,this.resourcePath=&quot;&quot;,this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Qi.DEFAULT_MATERIAL_NAME=&quot;__DEFAULT&quot;;const $o={};class bB extends Error{constructor(e,t){super(e),this.response=t}}class ss extends Qi{constructor(e){super(e),this.mimeType=&quot;&quot;,this.responseType=&quot;&quot;}load(e,t,i,r){e===void 0&amp;&amp;(e=&quot;&quot;),this.path!==void 0&amp;&amp;(e=this.path+e),e=this.manager.resolveURL(e);const s=ca.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=&gt;{t&amp;&amp;t(s),this.manager.itemEnd(e)},0),s;if($o[e]!==void 0){$o[e].push({onLoad:t,onProgress:i,onError:r});return}$o[e]=[],$o[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?&quot;include&quot;:&quot;same-origin&quot;}),l=this.mimeType,u=this.responseType;fetch(o).then(h=&gt;{if(h.status===200||h.status===0){if(h.status===0&amp;&amp;console.warn(&quot;THREE.FileLoader: HTTP Status 0 received.&quot;),typeof ReadableStream&gt;&quot;u&quot;||h.body===void 0||h.body.getReader===void 0)return h;const f=$o[e],p=h.body.getReader(),m=h.headers.get(&quot;X-File-Size&quot;)||h.headers.get(&quot;Content-Length&quot;),g=m?parseInt(m):0,v=g!==0;let x=0;const b=new ReadableStream({start(_){T();function T(){p.read().then(({done:w,value:S})=&gt;{if(w)_.close();else{x+=S.byteLength;const C=new ProgressEvent(&quot;progress&quot;,{lengthComputable:v,loaded:x,total:g});for(let O=0,M=f.length;O&lt;M;O++){const N=f[O];N.onProgress&amp;&amp;N.onProgress(C)}_.enqueue(S),T()}},w=&gt;{_.error(w)})}}});return new Response(b)}else throw new bB(`fetch for &quot;${h.url}&quot; responded with ${h.status}: ${h.statusText}`,h)}).then(h=&gt;{switch(u){case&quot;arraybuffer&quot;:return h.arrayBuffer();case&quot;blob&quot;:return h.blob();case&quot;document&quot;:return h.text().then(f=&gt;new DOMParser().parseFromString(f,l));case&quot;json&quot;:return h.json();default:if(l===&quot;&quot;)return h.text();{const p=/charset=&quot;?([^;&quot;\s]*)&quot;?/i.exec(l),m=p&amp;&amp;p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return h.arrayBuffer().then(v=&gt;g.decode(v))}}}).then(h=&gt;{ca.add(e,h);const f=$o[e];delete $o[e];for(let p=0,m=f.length;p&lt;m;p++){const g=f[p];g.onLoad&amp;&amp;g.onLoad(h)}}).catch(h=&gt;{const f=$o[e];if(f===void 0)throw this.manager.itemError(e),h;delete $o[e];for(let p=0,m=f.length;p&lt;m;p++){const g=f[p];g.onError&amp;&amp;g.onError(h)}this.manager.itemError(e)}).finally(()=&gt;{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class xB extends Qi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ss(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i&lt;e.length;i++){const r=Sl.parse(e[i]);t.push(r)}return t}}class SB extends Qi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],l=new Ey,u=new ss(this.manager);u.setPath(this.path),u.setResponseType(&quot;arraybuffer&quot;),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let h=0;function f(p){u.load(e[p],function(m){const g=s.parse(m,!0);o[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},h+=1,h===6&amp;&amp;(g.mipmapCount===1&amp;&amp;(l.minFilter=fi),l.image=o,l.format=g.format,l.needsUpdate=!0,t&amp;&amp;t(l))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p&lt;m;++p)f(p);else u.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let v=0;v&lt;g;v++){o[v]={mipmaps:[]};for(let x=0;x&lt;m.mipmapCount;x++)o[v].mipmaps.push(m.mipmaps[v*m.mipmapCount+x]),o[v].format=m.format,o[v].width=m.width,o[v].height=m.height}l.image=o}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&amp;&amp;(l.minFilter=fi),l.format=m.format,l.needsUpdate=!0,t&amp;&amp;t(l)},i,r);return l}}class Rd extends Qi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&amp;&amp;(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ca.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&amp;&amp;t(o),s.manager.itemEnd(e)},0),o;const l=Td(&quot;img&quot;);function u(){f(),ca.add(e,this),t&amp;&amp;t(this),s.manager.itemEnd(e)}function h(p){f(),r&amp;&amp;r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){l.removeEventListener(&quot;load&quot;,u,!1),l.removeEventListener(&quot;error&quot;,h,!1)}return l.addEventListener(&quot;load&quot;,u,!1),l.addEventListener(&quot;error&quot;,h,!1),e.slice(0,5)!==&quot;data:&quot;&amp;&amp;this.crossOrigin!==void 0&amp;&amp;(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class wB extends Qi{constructor(e){super(e)}load(e,t,i,r){const s=new Kd;s.colorSpace=Dn;const o=new Rd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function u(h){o.load(e[h],function(f){s.images[h]=f,l++,l===6&amp;&amp;(s.needsUpdate=!0,t&amp;&amp;t(s))},void 0,r)}for(let h=0;h&lt;e.length;++h)u(h);return s}}class ND extends Qi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Qs,l=new ss(this.manager);return l.setResponseType(&quot;arraybuffer&quot;),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let h;try{h=s.parse(u)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&amp;&amp;(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:sr,o.wrapT=h.wrapT!==void 0?h.wrapT:sr,o.magFilter=h.magFilter!==void 0?h.magFilter:fi,o.minFilter=h.minFilter!==void 0?h.minFilter:fi,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&amp;&amp;(o.colorSpace=h.colorSpace),h.flipY!==void 0&amp;&amp;(o.flipY=h.flipY),h.format!==void 0&amp;&amp;(o.format=h.format),h.type!==void 0&amp;&amp;(o.type=h.type),h.mipmaps!==void 0&amp;&amp;(o.mipmaps=h.mipmaps,o.minFilter=ts),h.mipmapCount===1&amp;&amp;(o.minFilter=fi),h.generateMipmaps!==void 0&amp;&amp;(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,t&amp;&amp;t(o,h)},i,r),o}}class By extends Qi{constructor(e){super(e)}load(e,t,i,r){const s=new Kn,o=new Rd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&amp;&amp;t(s)},i,r),s}}class Nl extends nn{constructor(e,t=1){super(),this.isLight=!0,this.type=&quot;Light&quot;,this.color=new Ye(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&amp;&amp;(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&amp;&amp;(t.object.distance=this.distance),this.angle!==void 0&amp;&amp;(t.object.angle=this.angle),this.decay!==void 0&amp;&amp;(t.object.decay=this.decay),this.penumbra!==void 0&amp;&amp;(t.object.penumbra=this.penumbra),this.shadow!==void 0&amp;&amp;(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&amp;&amp;(t.object.target=this.target.uuid),t}}class DD extends Nl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type=&quot;HemisphereLight&quot;,this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ye(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const qb=new yt,VA=new K,GA=new K;class zw{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Re(512,512),this.mapType=zr,this.map=null,this.mapPass=null,this.matrix=new yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ch,this._frameExtents=new Re(1,1),this._viewportCount=1,this._viewports=[new _n(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;VA.setFromMatrixPosition(e.matrixWorld),t.position.copy(VA),GA.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(GA),t.updateMatrixWorld(),qb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qb),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(qb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&amp;&amp;this.map.dispose(),this.mapPass&amp;&amp;this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&amp;&amp;(e.intensity=this.intensity),this.bias!==0&amp;&amp;(e.bias=this.bias),this.normalBias!==0&amp;&amp;(e.normalBias=this.normalBias),this.radius!==1&amp;&amp;(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&amp;&amp;(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class EB extends zw{constructor(){super(new Yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=dh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&amp;&amp;(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Hy extends Nl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type=&quot;SpotLight&quot;,this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new EB}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const jA=new yt,zf=new K,Yb=new K;class TB extends zw{constructor(){super(new Yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Re(4,2),this._viewportCount=6,this._viewports=[new _n(2,1,1,1),new _n(0,1,1,1),new _n(3,1,1,1),new _n(1,1,1,1),new _n(3,0,1,1),new _n(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&amp;&amp;(i.far=s,i.updateProjectionMatrix()),zf.setFromMatrixPosition(e.matrixWorld),i.position.copy(zf),Yb.copy(i.position),Yb.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Yb),i.updateMatrixWorld(),r.makeTranslation(-zf.x,-zf.y,-zf.z),jA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jA)}}class Vy extends Nl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type=&quot;PointLight&quot;,this.distance=i,this.decay=r,this.shadow=new TB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Vc extends yy{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type=&quot;OrthographicCamera&quot;,this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&amp;&amp;(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&amp;&amp;(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,l=r+t,u=r-t;if(this.view!==null&amp;&amp;this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,l-=f*this.view.offsetY,u=l-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&amp;&amp;(t.object.view=Object.assign({},this.view)),t}}class MB extends zw{constructor(){super(new Vc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ep extends Nl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type=&quot;DirectionalLight&quot;,this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.shadow=new MB}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Gy extends Nl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type=&quot;AmbientLight&quot;}}class ID extends Nl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type=&quot;RectAreaLight&quot;,this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class PD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e&lt;9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t&lt;9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e&lt;9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t&lt;9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i&lt;9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t&lt;9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i&lt;9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t&lt;9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r&lt;9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r&lt;9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class LD extends Nl{constructor(e=new PD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class jy extends Qi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ss(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&amp;&amp;console.warn(&quot;THREE.MaterialLoader: Undefined texture&quot;,s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&amp;&amp;(r.uuid=e.uuid),e.name!==void 0&amp;&amp;(r.name=e.name),e.color!==void 0&amp;&amp;r.color!==void 0&amp;&amp;r.color.setHex(e.color),e.roughness!==void 0&amp;&amp;(r.roughness=e.roughness),e.metalness!==void 0&amp;&amp;(r.metalness=e.metalness),e.sheen!==void 0&amp;&amp;(r.sheen=e.sheen),e.sheenColor!==void 0&amp;&amp;(r.sheenColor=new Ye().setHex(e.sheenColor)),e.sheenRoughness!==void 0&amp;&amp;(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&amp;&amp;r.emissive!==void 0&amp;&amp;r.emissive.setHex(e.emissive),e.specular!==void 0&amp;&amp;r.specular!==void 0&amp;&amp;r.specular.setHex(e.specular),e.specularIntensity!==void 0&amp;&amp;(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&amp;&amp;r.specularColor!==void 0&amp;&amp;r.specularColor.setHex(e.specularColor),e.shininess!==void 0&amp;&amp;(r.shininess=e.shininess),e.clearcoat!==void 0&amp;&amp;(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&amp;&amp;(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&amp;&amp;(r.dispersion=e.dispersion),e.iridescence!==void 0&amp;&amp;(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&amp;&amp;(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&amp;&amp;(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&amp;&amp;(r.transmission=e.transmission),e.thickness!==void 0&amp;&amp;(r.thickness=e.thickness),e.attenuationDistance!==void 0&amp;&amp;(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&amp;&amp;r.attenuationColor!==void 0&amp;&amp;r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&amp;&amp;(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&amp;&amp;(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&amp;&amp;(r.fog=e.fog),e.flatShading!==void 0&amp;&amp;(r.flatShading=e.flatShading),e.blending!==void 0&amp;&amp;(r.blending=e.blending),e.combine!==void 0&amp;&amp;(r.combine=e.combine),e.side!==void 0&amp;&amp;(r.side=e.side),e.shadowSide!==void 0&amp;&amp;(r.shadowSide=e.shadowSide),e.opacity!==void 0&amp;&amp;(r.opacity=e.opacity),e.transparent!==void 0&amp;&amp;(r.transparent=e.transparent),e.alphaTest!==void 0&amp;&amp;(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&amp;&amp;(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&amp;&amp;(r.depthFunc=e.depthFunc),e.depthTest!==void 0&amp;&amp;(r.depthTest=e.depthTest),e.depthWrite!==void 0&amp;&amp;(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&amp;&amp;(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&amp;&amp;(r.blendSrc=e.blendSrc),e.blendDst!==void 0&amp;&amp;(r.blendDst=e.blendDst),e.blendEquation!==void 0&amp;&amp;(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&amp;&amp;(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&amp;&amp;(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&amp;&amp;(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&amp;&amp;r.blendColor!==void 0&amp;&amp;r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&amp;&amp;(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&amp;&amp;(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&amp;&amp;(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&amp;&amp;(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&amp;&amp;(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&amp;&amp;(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&amp;&amp;(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&amp;&amp;(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&amp;&amp;(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&amp;&amp;(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&amp;&amp;(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&amp;&amp;(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&amp;&amp;(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&amp;&amp;(r.rotation=e.rotation),e.linewidth!==void 0&amp;&amp;(r.linewidth=e.linewidth),e.dashSize!==void 0&amp;&amp;(r.dashSize=e.dashSize),e.gapSize!==void 0&amp;&amp;(r.gapSize=e.gapSize),e.scale!==void 0&amp;&amp;(r.scale=e.scale),e.polygonOffset!==void 0&amp;&amp;(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&amp;&amp;(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&amp;&amp;(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&amp;&amp;(r.dithering=e.dithering),e.alphaToCoverage!==void 0&amp;&amp;(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&amp;&amp;(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&amp;&amp;(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&amp;&amp;(r.visible=e.visible),e.toneMapped!==void 0&amp;&amp;(r.toneMapped=e.toneMapped),e.userData!==void 0&amp;&amp;(r.userData=e.userData),e.vertexColors!==void 0&amp;&amp;(typeof e.vertexColors==&quot;number&quot;?r.vertexColors=e.vertexColors&gt;0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case&quot;t&quot;:r.uniforms[s].value=i(o.value);break;case&quot;c&quot;:r.uniforms[s].value=new Ye().setHex(o.value);break;case&quot;v2&quot;:r.uniforms[s].value=new Re().fromArray(o.value);break;case&quot;v3&quot;:r.uniforms[s].value=new K().fromArray(o.value);break;case&quot;v4&quot;:r.uniforms[s].value=new _n().fromArray(o.value);break;case&quot;m3&quot;:r.uniforms[s].value=new Wt().fromArray(o.value);break;case&quot;m4&quot;:r.uniforms[s].value=new yt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&amp;&amp;(r.defines=e.defines),e.vertexShader!==void 0&amp;&amp;(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&amp;&amp;(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&amp;&amp;(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&amp;&amp;(r.lights=e.lights),e.clipping!==void 0&amp;&amp;(r.clipping=e.clipping),e.size!==void 0&amp;&amp;(r.size=e.size),e.sizeAttenuation!==void 0&amp;&amp;(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&amp;&amp;(r.map=i(e.map)),e.matcap!==void 0&amp;&amp;(r.matcap=i(e.matcap)),e.alphaMap!==void 0&amp;&amp;(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&amp;&amp;(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&amp;&amp;(r.bumpScale=e.bumpScale),e.normalMap!==void 0&amp;&amp;(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&amp;&amp;(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&amp;&amp;(s=[s,s]),r.normalScale=new Re().fromArray(s)}return e.displacementMap!==void 0&amp;&amp;(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&amp;&amp;(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&amp;&amp;(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&amp;&amp;(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&amp;&amp;(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&amp;&amp;(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&amp;&amp;(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&amp;&amp;(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&amp;&amp;(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&amp;&amp;(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&amp;&amp;(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&amp;&amp;r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&amp;&amp;(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&amp;&amp;(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&amp;&amp;(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&amp;&amp;(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&amp;&amp;(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&amp;&amp;(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&amp;&amp;(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&amp;&amp;(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&amp;&amp;(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&amp;&amp;(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&amp;&amp;(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&amp;&amp;(r.clearcoatNormalScale=new Re().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&amp;&amp;(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&amp;&amp;(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&amp;&amp;(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&amp;&amp;(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&amp;&amp;(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&amp;&amp;(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&amp;&amp;(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return jy.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:xD,SpriteMaterial:xw,RawShaderMaterial:SD,ShaderMaterial:Br,PointsMaterial:wy,MeshPhysicalMaterial:as,MeshStandardMaterial:rs,MeshPhongMaterial:ml,MeshToonMaterial:Nw,MeshNormalMaterial:wD,MeshLambertMaterial:zy,MeshDepthMaterial:Dw,MeshDistanceMaterial:Iw,MeshBasicMaterial:zi,MeshMatcapMaterial:ED,LineDashedMaterial:TD,LineBasicMaterial:Ji,Material:Di};return new t[e]}}class So{static extractUrlBase(e){const t=e.lastIndexOf(&quot;/&quot;);return t===-1?&quot;./&quot;:e.slice(0,t+1)}static resolveURL(e,t){return typeof e!=&quot;string&quot;||e===&quot;&quot;?&quot;&quot;:(/^https?:\/\//i.test(t)&amp;&amp;/^\//.test(e)&amp;&amp;(t=t.replace(/(^https?:\/\/[^\/]+).*/i,&quot;$1&quot;)),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class UD extends It{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type=&quot;InstancedBufferGeometry&quot;,this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class kD extends Qi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ss(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,v){if(t[v]!==void 0)return t[v];const b=g.interleavedBuffers[v],_=s(g,b.buffer),T=Zu(b.type,_),w=new $d(T,b.stride);return w.uuid=b.uuid,t[v]=w,w}function s(g,v){if(i[v]!==void 0)return i[v];const b=g.arrayBuffers[v],_=new Uint32Array(b).buffer;return i[v]=_,_}const o=e.isInstancedBufferGeometry?new UD:new It,l=e.data.index;if(l!==void 0){const g=Zu(l.type,l.array);o.setIndex(new Vt(g,1))}const u=e.data.attributes;for(const g in u){const v=u[g];let x;if(v.isInterleavedBufferAttribute){const b=r(e.data,v.data);x=new bl(b,v.itemSize,v.offset,v.normalized)}else{const b=Zu(v.type,v.array),_=v.isInstancedBufferAttribute?Nc:Vt;x=new _(b,v.itemSize,v.normalized)}v.name!==void 0&amp;&amp;(x.name=v.name),v.usage!==void 0&amp;&amp;x.setUsage(v.usage),o.setAttribute(g,x)}const h=e.data.morphAttributes;if(h)for(const g in h){const v=h[g],x=[];for(let b=0,_=v.length;b&lt;_;b++){const T=v[b];let w;if(T.isInterleavedBufferAttribute){const S=r(e.data,T.data);w=new bl(S,T.itemSize,T.offset,T.normalized)}else{const S=Zu(T.type,T.array);w=new Vt(S,T.itemSize,T.normalized)}T.name!==void 0&amp;&amp;(w.name=T.name),x.push(w)}o.morphAttributes[g]=x}e.data.morphTargetsRelative&amp;&amp;(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let g=0,v=p.length;g!==v;++g){const x=p[g];o.addGroup(x.start,x.count,x.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new K;m.center!==void 0&amp;&amp;g.fromArray(m.center),o.boundingSphere=new pi(g,m.radius)}return e.name&amp;&amp;(o.name=e.name),e.userData&amp;&amp;(o.userData=e.userData),o}}class AB extends Qi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===&quot;&quot;?So.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new ss(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(p){r!==void 0&amp;&amp;r(p),console.error(&quot;THREE:ObjectLoader: Can&#x27;t parse &quot;+e+&quot;.&quot;,p.message);return}const f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()===&quot;geometry&quot;){r!==void 0&amp;&amp;r(new Error(&quot;THREE.ObjectLoader: Can&#x27;t load &quot;+e)),console.error(&quot;THREE.ObjectLoader: Can&#x27;t load &quot;+e);return}s.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===&quot;&quot;?So.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ss(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()===&quot;geometry&quot;)throw new Error(&quot;THREE.ObjectLoader: Can&#x27;t load &quot;+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&amp;&amp;t(h)}),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,i),f=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,f),this.bindLightTargets(h),t!==void 0){let p=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){p=!0;break}p===!1&amp;&amp;t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,r,l,o,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i&lt;r;i++){const s=new Ac().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&amp;&amp;(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s&lt;o;s++){const l=new Ah().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new kD;for(let s=0,o=e.length;s&lt;o;s++){let l;const u=e[s];switch(u.type){case&quot;BufferGeometry&quot;:case&quot;InstancedBufferGeometry&quot;:l=r.parse(u);break;default:u.type in HA?l=HA[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type &quot;${u.type}&quot;`)}l.uuid=u.uuid,u.name!==void 0&amp;&amp;(l.name=u.name),u.userData!==void 0&amp;&amp;(l.userData=u.userData),i[u.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new jy;s.setTextures(t);for(let o=0,l=e.length;o&lt;l;o++){const u=e[o];i[u.uuid]===void 0&amp;&amp;(i[u.uuid]=s.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i&lt;e.length;i++){const r=e[i],s=Sl.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(u){return i.manager.itemStart(u),s.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function l(u){if(typeof u==&quot;string&quot;){const h=u,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return o(f)}else return u.data?{data:Zu(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&amp;&amp;e.length&gt;0){const u=new kw(t);s=new Rd(u),s.setCrossOrigin(this.crossOrigin);for(let h=0,f=e.length;h&lt;f;h++){const p=e[h],m=p.url;if(Array.isArray(m)){const g=[];for(let v=0,x=m.length;v&lt;x;v++){const b=m[v],_=l(b);_!==null&amp;&amp;(_ instanceof HTMLImageElement?g.push(_):g.push(new Qs(_.data,_.width,_.height)))}r[p.uuid]=new pl(g)}else{const g=l(p.url);r[p.uuid]=new pl(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o==&quot;string&quot;){const l=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(u)}else return o.data?{data:Zu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&amp;&amp;e.length&gt;0){r=new Rd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o&lt;l;o++){const u=e[o],h=u.url;if(Array.isArray(h)){const f=[];for(let p=0,m=h.length;p&lt;m;p++){const g=h[p],v=await s(g);v!==null&amp;&amp;(v instanceof HTMLImageElement?f.push(v):f.push(new Qs(v.data,v.width,v.height)))}i[u.uuid]=new pl(f)}else{const f=await s(u.url);i[u.uuid]=new pl(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s==&quot;number&quot;?s:(console.warn(&quot;THREE.ObjectLoader.parseTexture: Constant should be in numeric form.&quot;,s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s&lt;o;s++){const l=e[s];l.image===void 0&amp;&amp;console.warn(&#x27;THREE.ObjectLoader: No &quot;image&quot; specified for&#x27;,l.uuid),t[l.image]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined image&quot;,l.image);const u=t[l.image],h=u.data;let f;Array.isArray(h)?(f=new Kd,h.length===6&amp;&amp;(f.needsUpdate=!0)):(h&amp;&amp;h.data?f=new Qs:f=new Kn,h&amp;&amp;(f.needsUpdate=!0)),f.source=u,f.uuid=l.uuid,l.name!==void 0&amp;&amp;(f.name=l.name),l.mapping!==void 0&amp;&amp;(f.mapping=i(l.mapping,CB)),l.channel!==void 0&amp;&amp;(f.channel=l.channel),l.offset!==void 0&amp;&amp;f.offset.fromArray(l.offset),l.repeat!==void 0&amp;&amp;f.repeat.fromArray(l.repeat),l.center!==void 0&amp;&amp;f.center.fromArray(l.center),l.rotation!==void 0&amp;&amp;(f.rotation=l.rotation),l.wrap!==void 0&amp;&amp;(f.wrapS=i(l.wrap[0],WA),f.wrapT=i(l.wrap[1],WA)),l.format!==void 0&amp;&amp;(f.format=l.format),l.internalFormat!==void 0&amp;&amp;(f.internalFormat=l.internalFormat),l.type!==void 0&amp;&amp;(f.type=l.type),l.colorSpace!==void 0&amp;&amp;(f.colorSpace=l.colorSpace),l.minFilter!==void 0&amp;&amp;(f.minFilter=i(l.minFilter,XA)),l.magFilter!==void 0&amp;&amp;(f.magFilter=i(l.magFilter,XA)),l.anisotropy!==void 0&amp;&amp;(f.anisotropy=l.anisotropy),l.flipY!==void 0&amp;&amp;(f.flipY=l.flipY),l.generateMipmaps!==void 0&amp;&amp;(f.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&amp;&amp;(f.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&amp;&amp;(f.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&amp;&amp;(f.compareFunction=l.compareFunction),l.userData!==void 0&amp;&amp;(f.userData=l.userData),r[l.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function l(m){return t[m]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined geometry&quot;,m),t[m]}function u(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let v=0,x=m.length;v&lt;x;v++){const b=m[v];i[b]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined material&quot;,b),g.push(i[b])}return g}return i[m]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined material&quot;,m),i[m]}}function h(m){return r[m]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined texture&quot;,m),r[m]}let f,p;switch(e.type){case&quot;Scene&quot;:o=new by,e.background!==void 0&amp;&amp;(Number.isInteger(e.background)?o.background=new Ye(e.background):o.background=h(e.background)),e.environment!==void 0&amp;&amp;(o.environment=h(e.environment)),e.fog!==void 0&amp;&amp;(e.fog.type===&quot;Fog&quot;?o.fog=new vy(e.fog.color,e.fog.near,e.fog.far):e.fog.type===&quot;FogExp2&quot;&amp;&amp;(o.fog=new _y(e.fog.color,e.fog.density)),e.fog.name!==&quot;&quot;&amp;&amp;(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&amp;&amp;(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&amp;&amp;(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&amp;&amp;o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&amp;&amp;(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&amp;&amp;o.environmentRotation.fromArray(e.environmentRotation);break;case&quot;PerspectiveCamera&quot;:o=new Yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&amp;&amp;(o.focus=e.focus),e.zoom!==void 0&amp;&amp;(o.zoom=e.zoom),e.filmGauge!==void 0&amp;&amp;(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&amp;&amp;(o.filmOffset=e.filmOffset),e.view!==void 0&amp;&amp;(o.view=Object.assign({},e.view));break;case&quot;OrthographicCamera&quot;:o=new Vc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&amp;&amp;(o.zoom=e.zoom),e.view!==void 0&amp;&amp;(o.view=Object.assign({},e.view));break;case&quot;AmbientLight&quot;:o=new Gy(e.color,e.intensity);break;case&quot;DirectionalLight&quot;:o=new ep(e.color,e.intensity),o.target=e.target||&quot;&quot;;break;case&quot;PointLight&quot;:o=new Vy(e.color,e.intensity,e.distance,e.decay);break;case&quot;RectAreaLight&quot;:o=new ID(e.color,e.intensity,e.width,e.height);break;case&quot;SpotLight&quot;:o=new Hy(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||&quot;&quot;;break;case&quot;HemisphereLight&quot;:o=new DD(e.color,e.groundColor,e.intensity);break;case&quot;LightProbe&quot;:o=new LD().fromJSON(e);break;case&quot;SkinnedMesh&quot;:f=l(e.geometry),p=u(e.material),o=new xy(f,p),e.bindMode!==void 0&amp;&amp;(o.bindMode=e.bindMode),e.bindMatrix!==void 0&amp;&amp;o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&amp;&amp;(o.skeleton=e.skeleton);break;case&quot;Mesh&quot;:f=l(e.geometry),p=u(e.material),o=new gn(f,p);break;case&quot;InstancedMesh&quot;:f=l(e.geometry),p=u(e.material);const m=e.count,g=e.instanceMatrix,v=e.instanceColor;o=new Sw(f,p,m),o.instanceMatrix=new Nc(new Float32Array(g.array),16),v!==void 0&amp;&amp;(o.instanceColor=new Nc(new Float32Array(v.array),v.itemSize));break;case&quot;BatchedMesh&quot;:f=l(e.geometry),p=u(e.material),o=new cD(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(x=&gt;{let b=null,_=null;return x.boundingBox!==void 0&amp;&amp;(b=new di,b.min.fromArray(x.boundingBox.min),b.max.fromArray(x.boundingBox.max)),x.boundingSphere!==void 0&amp;&amp;(_=new pi,_.radius=x.boundingSphere.radius,_.center.fromArray(x.boundingSphere.center)),{...x,boundingBox:b,boundingSphere:_}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=h(e.matricesTexture.uuid),o._indirectTexture=h(e.indirectTexture.uuid),e.colorsTexture!==void 0&amp;&amp;(o._colorsTexture=h(e.colorsTexture.uuid)),e.boundingSphere!==void 0&amp;&amp;(o.boundingSphere=new pi,o.boundingSphere.center.fromArray(e.boundingSphere.center),o.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&amp;&amp;(o.boundingBox=new di,o.boundingBox.min.fromArray(e.boundingBox.min),o.boundingBox.max.fromArray(e.boundingBox.max));break;case&quot;LOD&quot;:o=new lD;break;case&quot;Line&quot;:o=new Eo(l(e.geometry),u(e.material));break;case&quot;LineLoop&quot;:o=new ww(l(e.geometry),u(e.material));break;case&quot;LineSegments&quot;:o=new Tr(l(e.geometry),u(e.material));break;case&quot;PointCloud&quot;:case&quot;Points&quot;:o=new ga(l(e.geometry),u(e.material));break;case&quot;Sprite&quot;:o=new aD(u(e.material));break;case&quot;Group&quot;:o=new xr;break;case&quot;Bone&quot;:o=new Zd;break;default:o=new nn}if(o.uuid=e.uuid,e.name!==void 0&amp;&amp;(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&amp;&amp;(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&amp;&amp;o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&amp;&amp;o.position.fromArray(e.position),e.rotation!==void 0&amp;&amp;o.rotation.fromArray(e.rotation),e.quaternion!==void 0&amp;&amp;o.quaternion.fromArray(e.quaternion),e.scale!==void 0&amp;&amp;o.scale.fromArray(e.scale)),e.up!==void 0&amp;&amp;o.up.fromArray(e.up),e.castShadow!==void 0&amp;&amp;(o.castShadow=e.castShadow),e.receiveShadow!==void 0&amp;&amp;(o.receiveShadow=e.receiveShadow),e.shadow&amp;&amp;(e.shadow.intensity!==void 0&amp;&amp;(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&amp;&amp;(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&amp;&amp;(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&amp;&amp;(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&amp;&amp;o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&amp;&amp;(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&amp;&amp;(o.visible=e.visible),e.frustumCulled!==void 0&amp;&amp;(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&amp;&amp;(o.renderOrder=e.renderOrder),e.userData!==void 0&amp;&amp;(o.userData=e.userData),e.layers!==void 0&amp;&amp;(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g&lt;m.length;g++)o.add(this.parseObject(m[g],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g&lt;m.length;g++){const v=m[g];o.animations.push(s[v])}}if(e.type===&quot;LOD&quot;){e.autoUpdate!==void 0&amp;&amp;(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g&lt;m.length;g++){const v=m[g],x=o.getObjectByProperty(&quot;uuid&quot;,v.object);x!==void 0&amp;&amp;o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&amp;&amp;e.traverse(function(i){if(i.isSkinnedMesh===!0&amp;&amp;i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn(&quot;THREE.ObjectLoader: No skeleton found with UUID:&quot;,i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty(&quot;uuid&quot;,i);r!==void 0?t.target=r:t.target=new nn}})}}const CB={UVMapping:oy,CubeReflectionMapping:_a,CubeRefractionMapping:vl,EquirectangularReflectionMapping:vd,EquirectangularRefractionMapping:bd,CubeUVReflectionMapping:Th},WA={RepeatWrapping:Ts,ClampToEdgeWrapping:sr,MirroredRepeatWrapping:oh},XA={NearestFilter:Ei,NearestMipmapNearestFilter:ay,NearestMipmapLinearFilter:vc,LinearFilter:fi,LinearMipmapNearestFilter:th,LinearMipmapLinearFilter:ts};class FD extends Qi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap&gt;&quot;u&quot;&amp;&amp;console.warn(&quot;THREE.ImageBitmapLoader: createImageBitmap() not supported.&quot;),typeof fetch&gt;&quot;u&quot;&amp;&amp;console.warn(&quot;THREE.ImageBitmapLoader: fetch() not supported.&quot;),this.options={premultiplyAlpha:&quot;none&quot;}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&amp;&amp;(e=&quot;&quot;),this.path!==void 0&amp;&amp;(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ca.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(h=&gt;{t&amp;&amp;t(h),s.manager.itemEnd(e)}).catch(h=&gt;{r&amp;&amp;r(h)});return}return setTimeout(function(){t&amp;&amp;t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin===&quot;anonymous&quot;?&quot;same-origin&quot;:&quot;include&quot;,l.headers=this.requestHeader;const u=fetch(e,l).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:&quot;none&quot;}))}).then(function(h){return ca.add(e,h),t&amp;&amp;t(h),s.manager.itemEnd(e),h}).catch(function(h){r&amp;&amp;r(h),ca.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ca.add(e,u),s.manager.itemStart(e)}}let Vm;class Bw{static getContext(){return Vm===void 0&amp;&amp;(Vm=new(window.AudioContext||window.webkitAudioContext)),Vm}static setContext(e){Vm=e}}class RB extends Qi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ss(this.manager);o.setResponseType(&quot;arraybuffer&quot;),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const h=u.slice(0);Bw.getContext().decodeAudioData(h,function(p){t(p)}).catch(l)}catch(h){l(h)}},i,r);function l(u){r?r(u):console.error(u),s.manager.itemError(e)}}}const qA=new yt,YA=new yt,tc=new yt;class OB{constructor(){this.type=&quot;StereoCamera&quot;,this.aspect=1,this.eyeSep=.064,this.cameraL=new Yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,tc.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Mc*t.fov*.5)/t.zoom;let l,u;YA.elements[12]=-r,qA.elements[12]=r,l=-o*t.aspect+s,u=o*t.aspect+s,tc.elements[0]=2*t.near/(u-l),tc.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(tc),l=-o*t.aspect-s,u=o*t.aspect-s,tc.elements[0]=2*t.near/(u-l),tc.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(tc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(YA),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qA)}}class zD extends Yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Hw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=KA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&amp;&amp;!this.running)return this.start(),0;if(this.running){const t=KA();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function KA(){return performance.now()}const nc=new K,$A=new Ti,NB=new K,ic=new K;class DB extends nn{constructor(){super(),this.type=&quot;AudioListener&quot;,this.context=Bw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Hw}getInput(){return this.gain}removeFilter(){return this.filter!==null&amp;&amp;(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(nc,$A,NB),ic.set(0,0,-1).applyQuaternion($A),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(nc.x,r),t.positionY.linearRampToValueAtTime(nc.y,r),t.positionZ.linearRampToValueAtTime(nc.z,r),t.forwardX.linearRampToValueAtTime(ic.x,r),t.forwardY.linearRampToValueAtTime(ic.y,r),t.forwardZ.linearRampToValueAtTime(ic.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(nc.x,nc.y,nc.z),t.setOrientation(ic.x,ic.y,ic.z,i.x,i.y,i.z)}}class BD extends nn{constructor(e){super(),this.type=&quot;Audio&quot;,this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType=&quot;empty&quot;,this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType=&quot;audioNode&quot;,this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType=&quot;mediaNode&quot;,this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType=&quot;mediaStreamNode&quot;,this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType=&quot;buffer&quot;,this.autoplay&amp;&amp;this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn(&quot;THREE.Audio: Audio is already playing.&quot;);return}if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.isPlaying===!0&amp;&amp;(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&amp;&amp;(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this._progress=0,this.source!==null&amp;&amp;(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length&gt;0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e&lt;t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length&gt;0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e&lt;t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&amp;&amp;this.source.detune!==void 0&amp;&amp;this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.playbackRate=e,this.isPlaying===!0&amp;&amp;this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.loop=e,this.isPlaying===!0&amp;&amp;(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!==&quot;buffer&quot;?(console.warn(&quot;THREE.Audio: Audio source type cannot be copied.&quot;),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const rc=new K,ZA=new Ti,IB=new K,sc=new K;class PB extends BD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel=&quot;HRTF&quot;,this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&amp;&amp;this.isPlaying===!1)return;this.matrixWorld.decompose(rc,ZA,IB),sc.set(0,0,1).applyQuaternion(ZA);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(rc.x,i),t.positionY.linearRampToValueAtTime(rc.y,i),t.positionZ.linearRampToValueAtTime(rc.z,i),t.orientationX.linearRampToValueAtTime(sc.x,i),t.orientationY.linearRampToValueAtTime(sc.y,i),t.orientationZ.linearRampToValueAtTime(sc.z,i)}else t.setPosition(rc.x,rc.y,rc.z),t.setOrientation(sc.x,sc.y,sc.z)}}class LB{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i&lt;t.length;i++)e+=t[i];return e/t.length}}class HD{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case&quot;quaternion&quot;:r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case&quot;string&quot;:case&quot;bool&quot;:r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)i[s+l]=i[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&amp;&amp;this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s&lt;1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-s,t)}o&gt;0&amp;&amp;this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(i[u]!==i[u+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i&lt;t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i&lt;this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r&gt;=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Ti.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Ti.multiplyQuaternionsFlat(e,o,e,t,e,i),Ti.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*o+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[i+o]*r}}}const Vw=&quot;\\[\\]\\.:\\/&quot;,UB=new RegExp(&quot;[&quot;+Vw+&quot;]&quot;,&quot;g&quot;),Gw=&quot;[^&quot;+Vw+&quot;]&quot;,kB=&quot;[^&quot;+Vw.replace(&quot;\\.&quot;,&quot;&quot;)+&quot;]&quot;,FB=/((?:WC+[\/:])*)/.source.replace(&quot;WC&quot;,Gw),zB=/(WCOD+)?/.source.replace(&quot;WCOD&quot;,kB),BB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace(&quot;WC&quot;,Gw),HB=/\.(WC+)(?:\[(.+)\])?/.source.replace(&quot;WC&quot;,Gw),VB=new RegExp(&quot;^&quot;+FB+zB+BB+HB+&quot;$&quot;),GB=[&quot;material&quot;,&quot;materials&quot;,&quot;bones&quot;,&quot;map&quot;];class jB{constructor(e,t,i){const r=i||mn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&amp;&amp;r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class mn{constructor(e,t,i){this.path=t,this.parsedPath=i||mn.parseTrackName(t),this.node=mn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&amp;&amp;e.isAnimationObjectGroup?new mn.Composite(e,t,i):new mn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,&quot;_&quot;).replace(UB,&quot;&quot;)}static parseTrackName(e){const t=VB.exec(e);if(t===null)throw new Error(&quot;PropertyBinding: Cannot parse trackName: &quot;+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&amp;&amp;i.nodeName.lastIndexOf(&quot;.&quot;);if(r!==void 0&amp;&amp;r!==-1){const s=i.nodeName.substring(r+1);GB.indexOf(s)!==-1&amp;&amp;(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error(&quot;PropertyBinding: can not parse propertyName from trackName: &quot;+e);return i}static findNode(e,t){if(t===void 0||t===&quot;&quot;||t===&quot;.&quot;||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o&lt;s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const u=i(l.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=mn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn(&quot;THREE.PropertyBinding: No target node found for track: &quot;+this.path+&quot;.&quot;);return}if(i){let h=t.objectIndex;switch(i){case&quot;materials&quot;:if(!e.material){console.error(&quot;THREE.PropertyBinding: Can not bind to material as node does not have a material.&quot;,this);return}if(!e.material.materials){console.error(&quot;THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.&quot;,this);return}e=e.material.materials;break;case&quot;bones&quot;:if(!e.skeleton){console.error(&quot;THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.&quot;,this);return}e=e.skeleton.bones;for(let f=0;f&lt;e.length;f++)if(e[f].name===h){h=f;break}break;case&quot;map&quot;:if(&quot;map&quot;in e){e=e.map;break}if(!e.material){console.error(&quot;THREE.PropertyBinding: Can not bind to material as node does not have a material.&quot;,this);return}if(!e.material.map){console.error(&quot;THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.&quot;,this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error(&quot;THREE.PropertyBinding: Can not bind to objectName of node undefined.&quot;,this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error(&quot;THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.&quot;,this,e);return}e=e[h]}}const o=e[r];if(o===void 0){const h=t.nodeName;console.error(&quot;THREE.PropertyBinding: Trying to update property for track: &quot;+h+&quot;.&quot;+r+&quot; but it wasn&#x27;t found.&quot;,e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&amp;&amp;(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r===&quot;morphTargetInfluences&quot;){if(!e.geometry){console.error(&quot;THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.&quot;,this);return}if(!e.geometry.morphAttributes){console.error(&quot;THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.&quot;,this);return}e.morphTargetDictionary[s]!==void 0&amp;&amp;(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&amp;&amp;o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mn.Composite=jB;mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mn.prototype.GetterByBindingType=[mn.prototype._getValue_direct,mn.prototype._getValue_array,mn.prototype._getValue_arrayElement,mn.prototype._getValue_toArray];mn.prototype.SetterByBindingTypeAndVersioning=[[mn.prototype._setValue_direct,mn.prototype._setValue_direct_setNeedsUpdate,mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_array,mn.prototype._setValue_array_setNeedsUpdate,mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_arrayElement,mn.prototype._setValue_arrayElement_setNeedsUpdate,mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_fromArray,mn.prototype._setValue_fromArray_setNeedsUpdate,mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class WB{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ns(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,u=e.length,h=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const m=arguments[f],g=m.uuid;let v=t[g];if(v===void 0){v=u++,t[g]=v,e.push(m);for(let x=0,b=o;x!==b;++x)s[x].push(new mn(m,i[x],r[x]))}else if(v&lt;h){l=e[v];const x=--h,b=e[x];t[b.uuid]=v,e[v]=b,t[g]=x,e[x]=m;for(let _=0,T=o;_!==T;++_){const w=s[_],S=w[x];let C=w[v];w[v]=S,C===void 0&amp;&amp;(C=new mn(m,i[_],r[_])),w[x]=C}}else e[v]!==l&amp;&amp;console.error(&quot;THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.&quot;)}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],h=u.uuid,f=t[h];if(f!==void 0&amp;&amp;f&gt;=s){const p=s++,m=e[p];t[m.uuid]=f,e[f]=m,t[h]=p,e[p]=u;for(let g=0,v=r;g!==v;++g){const x=i[g],b=x[p],_=x[f];x[f]=b,x[p]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],f=h.uuid,p=t[f];if(p!==void 0)if(delete t[f],p&lt;s){const m=--s,g=e[m],v=--o,x=e[v];t[g.uuid]=p,e[p]=g,t[x.uuid]=m,e[m]=x,e.pop();for(let b=0,_=r;b!==_;++b){const T=i[b],w=T[m],S=T[v];T[p]=w,T[m]=S,T.pop()}}else{const m=--o,g=e[m];m&gt;0&amp;&amp;(t[g.uuid]=p),e[p]=g,e.pop();for(let v=0,x=r;v!==x;++v){const b=i[v];b[p]=b[m],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,u=this._objects,h=u.length,f=this.nCachedObjects_,p=new Array(h);r=s.length,i[e]=r,o.push(e),l.push(t),s.push(p);for(let m=f,g=u.length;m!==g;++m){const v=u[m];p[m]=new mn(v,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,u=o[l],h=e[l];t[h]=i,o[i]=u,o.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class VD{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),u={endingStart:bc,endingEnd:bc};for(let h=0;h!==o;++h){const f=s[h].createInterpolant(null);l[h]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&amp;&amp;!this.paused&amp;&amp;this.timeScale!==0&amp;&amp;this._startTime===null&amp;&amp;this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&amp;&amp;(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&amp;&amp;(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=s,u[1]=s+i,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&amp;&amp;(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*i;u&lt;0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l&gt;0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case mw:for(let f=0,p=u.length;f!==p;++f)u[f].evaluate(o),h[f].accumulateAdditive(l);break;case dy:default:for(let f=0,p=u.length;f!==p;++f)u[f].evaluate(o),h[f].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e&gt;i.parameterPositions[1]&amp;&amp;(this.stopFading(),r===0&amp;&amp;(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e&gt;i.parameterPositions[1]&amp;&amp;(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===BN;if(e===0)return s===-1?r:o&amp;&amp;(s&amp;1)===1?t-r:r;if(i===FN){s===-1&amp;&amp;(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r&gt;=t)r=t;else if(r&lt;0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:&quot;finished&quot;,action:this,direction:e&lt;0?-1:1})}}else{if(s===-1&amp;&amp;(e&gt;=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r&gt;=t||r&lt;0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u&lt;=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e&gt;0?t:0,this.time=r,this._mixer.dispatchEvent({type:&quot;finished&quot;,action:this,direction:e&gt;0?1:-1});else{if(u===1){const h=e&lt;0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:&quot;loop&quot;,action:this,loopDelta:l})}}else this.time=r;if(o&amp;&amp;(s&amp;1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=xc,r.endingEnd=xc):(e?r.endingStart=this.zeroSlopeAtStart?xc:bc:r.endingStart=xd,t?r.endingEnd=this.zeroSlopeAtEnd?xc:bc:r.endingEnd=xd)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&amp;&amp;(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=i,this}}const XB=new Float32Array(1);class GD extends Ao{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,u=i.uuid,h=this._bindingsByRootAndName;let f=h[u];f===void 0&amp;&amp;(f={},h[u]=f);for(let p=0;p!==s;++p){const m=r[p],g=m.name;let v=f[g];if(v!==void 0)++v.referenceCount,o[p]=v;else{if(v=o[p],v!==void 0){v._cacheIndex===null&amp;&amp;(++v.referenceCount,this._addInactiveBinding(v,u,g));continue}const x=t&amp;&amp;t._propertyBindings[p].binding.parsedPath;v=new HD(mn.create(i,g,x),m.ValueTypeName,m.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,u,g),o[p]=v}l[p].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&amp;&amp;s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&amp;&amp;(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&amp;&amp;(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&amp;&amp;t&lt;this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],u=l.knownActions,h=u[u.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,u[f]=h,u.pop(),e._byClipCacheIndex=null;const p=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],u.length===0&amp;&amp;delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&amp;&amp;this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&amp;&amp;(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,l=o[r],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete l[s],Object.keys(l).length===0&amp;&amp;delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&amp;&amp;(i=new Lw(new Float32Array(2),new Float32Array(2),1,XB),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e==&quot;string&quot;?Sl.findByName(r,e):e;const l=o!==null?o.uuid:e,u=this._actionsByClip[l];let h=null;if(i===void 0&amp;&amp;(o!==null?i=o.blendMode:i=dy),u!==void 0){const p=u.actionByRoot[s];if(p!==void 0&amp;&amp;p.blendMode===i)return p;h=u.knownActions[0],o===null&amp;&amp;(o=h._clip)}if(o===null)return null;const f=new VD(this,o,t,i);return this._bindAction(f,h),this._addInactiveAction(f,l,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e==&quot;string&quot;?Sl.findByName(i,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&amp;&amp;l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i&gt;=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,s,o);const l=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)l[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t&lt;this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let l=0,u=o.length;l!==u;++l){const h=o[l];this._deactivateAction(h);const f=h._cacheIndex,p=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=f,t[f]=p,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot,u=l[t];u!==void 0&amp;&amp;(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&amp;&amp;(this._deactivateAction(i),this._removeInactiveAction(i))}}class qB extends py{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new my(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class YB extends py{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Yd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class jw{constructor(e){this.value=e}clone(){return new jw(this.value.clone===void 0?this.value:this.value.clone())}}let KB=0;class $B extends Ao{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,&quot;id&quot;,{value:KB++}),this.name=&quot;&quot;,this.usage=wd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&amp;&amp;this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i&lt;r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o&lt;s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class ZB extends $d{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class JB{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name=&quot;&quot;,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&amp;&amp;this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const JA=new yt;class jD{constructor(e,t,i=0,r=1/0){this.ray=new Cl(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new gy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error(&quot;THREE.Raycaster: Unsupported camera type: &quot;+t.type)}setFromXRController(e){return JA.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(JA),this}intersectObject(e,t=!0,i=[]){return yS(e,this,i,t),i.sort(QA),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r&lt;s;r++)yS(e[r],this,i,t);return i.sort(QA),i}}function QA(n,e){return n.distance-e.distance}function yS(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&amp;&amp;n.raycast(e,t)===!1&amp;&amp;(r=!1),r===!0&amp;&amp;i===!0){const s=n.children;for(let o=0,l=s.length;o&lt;l;o++)yS(s[o],e,t,!0)}}class _S{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Gt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Gt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class QB{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Ww{constructor(e,t,i,r){Ww.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&amp;&amp;this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i&lt;4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const eC=new Re;class e4{constructor(e=new Re(1/0,1/0),t=new Re(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t&lt;i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=eC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x&lt;this.min.x||this.max.y&lt;this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x&gt;=this.min.x&amp;&amp;e.x&lt;=this.max.x&amp;&amp;e.y&gt;=this.min.y&amp;&amp;e.y&lt;=this.max.y}containsBox(e){return this.min.x&lt;=e.min.x&amp;&amp;e.max.x&lt;=this.max.x&amp;&amp;this.min.y&lt;=e.min.y&amp;&amp;e.max.y&lt;=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x&gt;=this.min.x&amp;&amp;e.min.x&lt;=this.max.x&amp;&amp;e.max.y&gt;=this.min.y&amp;&amp;e.min.y&lt;=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,eC).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&amp;&amp;this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&amp;&amp;e.max.equals(this.max)}}const tC=new K,Gm=new K;class t4{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){tC.subVectors(e,this.start),Gm.subVectors(this.end,this.start);const i=Gm.dot(Gm);let s=Gm.dot(tC)/i;return t&amp;&amp;(s=Gt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&amp;&amp;e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const nC=new K;class n4 extends nn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type=&quot;SpotLightHelper&quot;;const i=new It,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,u=32;o&lt;u;o++,l++){const h=o/u*Math.PI*2,f=l/u*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}i.setAttribute(&quot;position&quot;,new ut(r,3));const s=new Ji({fog:!1,toneMapped:!1});this.cone=new Tr(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),nC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(nC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const el=new K,jm=new yt,Kb=new yt;class i4 extends Tr{constructor(e){const t=WD(e),i=new It,r=[],s=[],o=new Ye(0,0,1),l=new Ye(0,1,0);for(let h=0;h&lt;t.length;h++){const f=t[h];f.parent&amp;&amp;f.parent.isBone&amp;&amp;(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}i.setAttribute(&quot;position&quot;,new ut(r,3)),i.setAttribute(&quot;color&quot;,new ut(s,3));const u=new Ji({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type=&quot;SkeletonHelper&quot;,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute(&quot;position&quot;);Kb.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s&lt;t.length;s++){const l=t[s];l.parent&amp;&amp;l.parent.isBone&amp;&amp;(jm.multiplyMatrices(Kb,l.matrixWorld),el.setFromMatrixPosition(jm),r.setXYZ(o,el.x,el.y,el.z),jm.multiplyMatrices(Kb,l.parent.matrixWorld),el.setFromMatrixPosition(jm),r.setXYZ(o+1,el.x,el.y,el.z),o+=2)}i.getAttribute(&quot;position&quot;).needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function WD(n){const e=[];n.isBone===!0&amp;&amp;e.push(n);for(let t=0;t&lt;n.children.length;t++)e.push(...WD(n.children[t]));return e}class r4 extends gn{constructor(e,t,i){const r=new Nh(t,4,2),s=new zi({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type=&quot;PointLightHelper&quot;,this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const s4=new K,iC=new Ye,rC=new Ye;class o4 extends nn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type=&quot;HemisphereLightHelper&quot;;const r=new Qd(t);r.rotateY(Math.PI*.5),this.material=new zi({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&amp;&amp;(this.material.vertexColors=!0);const s=r.getAttribute(&quot;position&quot;),o=new Float32Array(s.count*3);r.setAttribute(&quot;color&quot;,new Vt(o,3)),this.add(new gn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute(&quot;color&quot;);iC.copy(this.light.color),rC.copy(this.light.groundColor);for(let i=0,r=t.count;i&lt;r;i++){const s=i&lt;r/2?iC:rC;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(s4.setFromMatrixPosition(this.light.matrixWorld).negate())}}class XD extends Tr{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ye(i),r=new Ye(r);const s=t/2,o=e/t,l=e/2,u=[],h=[];for(let m=0,g=0,v=-l;m&lt;=t;m++,v+=o){u.push(-l,0,v,l,0,v),u.push(v,0,-l,v,0,l);const x=m===s?i:r;x.toArray(h,g),g+=3,x.toArray(h,g),g+=3,x.toArray(h,g),g+=3,x.toArray(h,g),g+=3}const f=new It;f.setAttribute(&quot;position&quot;,new ut(u,3)),f.setAttribute(&quot;color&quot;,new ut(h,3));const p=new Ji({vertexColors:!0,toneMapped:!1});super(f,p),this.type=&quot;GridHelper&quot;}dispose(){this.geometry.dispose(),this.material.dispose()}}class a4 extends Tr{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ye(s),o=new Ye(o);const l=[],u=[];if(t&gt;1)for(let p=0;p&lt;t;p++){const m=p/t*(Math.PI*2),g=Math.sin(m)*e,v=Math.cos(m)*e;l.push(0,0,0),l.push(g,0,v);const x=p&amp;1?s:o;u.push(x.r,x.g,x.b),u.push(x.r,x.g,x.b)}for(let p=0;p&lt;i;p++){const m=p&amp;1?s:o,g=e-e/i*p;for(let v=0;v&lt;r;v++){let x=v/r*(Math.PI*2),b=Math.sin(x)*g,_=Math.cos(x)*g;l.push(b,0,_),u.push(m.r,m.g,m.b),x=(v+1)/r*(Math.PI*2),b=Math.sin(x)*g,_=Math.cos(x)*g,l.push(b,0,_),u.push(m.r,m.g,m.b)}}const h=new It;h.setAttribute(&quot;position&quot;,new ut(l,3)),h.setAttribute(&quot;color&quot;,new ut(u,3));const f=new Ji({vertexColors:!0,toneMapped:!1});super(h,f),this.type=&quot;PolarGridHelper&quot;}dispose(){this.geometry.dispose(),this.material.dispose()}}const sC=new K,Wm=new K,oC=new K;class l4 extends nn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type=&quot;DirectionalLightHelper&quot;,t===void 0&amp;&amp;(t=1);let r=new It;r.setAttribute(&quot;position&quot;,new ut([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ji({fog:!1,toneMapped:!1});this.lightPlane=new Eo(r,s),this.add(this.lightPlane),r=new It,r.setAttribute(&quot;position&quot;,new ut([0,0,0,0,0,1],3)),this.targetLine=new Eo(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sC.setFromMatrixPosition(this.light.matrixWorld),Wm.setFromMatrixPosition(this.light.target.matrixWorld),oC.subVectors(Wm,sC),this.lightPlane.lookAt(Wm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Wm),this.targetLine.scale.z=oC.length()}}const Xm=new K,ui=new yy;class c4 extends Tr{constructor(e){const t=new It,i=new Ji({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l(&quot;n1&quot;,&quot;n2&quot;),l(&quot;n2&quot;,&quot;n4&quot;),l(&quot;n4&quot;,&quot;n3&quot;),l(&quot;n3&quot;,&quot;n1&quot;),l(&quot;f1&quot;,&quot;f2&quot;),l(&quot;f2&quot;,&quot;f4&quot;),l(&quot;f4&quot;,&quot;f3&quot;),l(&quot;f3&quot;,&quot;f1&quot;),l(&quot;n1&quot;,&quot;f1&quot;),l(&quot;n2&quot;,&quot;f2&quot;),l(&quot;n3&quot;,&quot;f3&quot;),l(&quot;n4&quot;,&quot;f4&quot;),l(&quot;p&quot;,&quot;n1&quot;),l(&quot;p&quot;,&quot;n2&quot;),l(&quot;p&quot;,&quot;n3&quot;),l(&quot;p&quot;,&quot;n4&quot;),l(&quot;u1&quot;,&quot;u2&quot;),l(&quot;u2&quot;,&quot;u3&quot;),l(&quot;u3&quot;,&quot;u1&quot;),l(&quot;c&quot;,&quot;t&quot;),l(&quot;p&quot;,&quot;c&quot;),l(&quot;cn1&quot;,&quot;cn2&quot;),l(&quot;cn3&quot;,&quot;cn4&quot;),l(&quot;cf1&quot;,&quot;cf2&quot;),l(&quot;cf3&quot;,&quot;cf4&quot;);function l(v,x){u(v),u(x)}function u(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&amp;&amp;(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute(&quot;position&quot;,new ut(r,3)),t.setAttribute(&quot;color&quot;,new ut(s,3)),super(t,i),this.type=&quot;CameraHelper&quot;,this.camera=e,this.camera.updateProjectionMatrix&amp;&amp;this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new Ye(16755200),f=new Ye(16711680),p=new Ye(43775),m=new Ye(16777215),g=new Ye(3355443);this.setColors(h,f,p,m,g)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute(&quot;color&quot;);l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;ui.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Ms?-1:0;bi(&quot;c&quot;,t,e,ui,0,0,s),bi(&quot;t&quot;,t,e,ui,0,0,1),bi(&quot;n1&quot;,t,e,ui,-1,-1,s),bi(&quot;n2&quot;,t,e,ui,i,-1,s),bi(&quot;n3&quot;,t,e,ui,-1,r,s),bi(&quot;n4&quot;,t,e,ui,i,r,s),bi(&quot;f1&quot;,t,e,ui,-1,-1,1),bi(&quot;f2&quot;,t,e,ui,i,-1,1),bi(&quot;f3&quot;,t,e,ui,-1,r,1),bi(&quot;f4&quot;,t,e,ui,i,r,1),bi(&quot;u1&quot;,t,e,ui,i*.7,r*1.1,s),bi(&quot;u2&quot;,t,e,ui,-1*.7,r*1.1,s),bi(&quot;u3&quot;,t,e,ui,0,r*2,s),bi(&quot;cf1&quot;,t,e,ui,-1,0,1),bi(&quot;cf2&quot;,t,e,ui,i,0,1),bi(&quot;cf3&quot;,t,e,ui,0,-1,1),bi(&quot;cf4&quot;,t,e,ui,0,r,1),bi(&quot;cn1&quot;,t,e,ui,-1,0,s),bi(&quot;cn2&quot;,t,e,ui,i,0,s),bi(&quot;cn3&quot;,t,e,ui,0,-1,s),bi(&quot;cn4&quot;,t,e,ui,0,r,s),e.getAttribute(&quot;position&quot;).needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function bi(n,e,t,i,r,s,o){Xm.set(r,s,o).unproject(i);const l=e[n];if(l!==void 0){const u=t.getAttribute(&quot;position&quot;);for(let h=0,f=l.length;h&lt;f;h++)u.setXYZ(l[h],Xm.x,Xm.y,Xm.z)}}const qm=new di;class u4 extends Tr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new It;s.setIndex(new Vt(i,1)),s.setAttribute(&quot;position&quot;,new Vt(r,3)),super(s,new Ji({color:t,toneMapped:!1})),this.object=e,this.type=&quot;BoxHelper&quot;,this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&amp;&amp;qm.setFromObject(this.object),qm.isEmpty())return;const e=qm.min,t=qm.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class h4 extends Tr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new It;s.setIndex(new Vt(i,1)),s.setAttribute(&quot;position&quot;,new ut(r,3)),super(s,new Ji({color:t,toneMapped:!1})),this.box=e,this.type=&quot;Box3Helper&quot;,this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class f4 extends Eo{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new It;o.setAttribute(&quot;position&quot;,new ut(s,3)),o.computeBoundingSphere(),super(o,new Ji({color:r,toneMapped:!1})),this.type=&quot;PlaneHelper&quot;,this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new It;u.setAttribute(&quot;position&quot;,new ut(l,3)),u.computeBoundingSphere(),this.add(new gn(u,new zi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const aC=new K;let Ym,$b;class d4 extends nn{constructor(e=new K(0,0,1),t=new K(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type=&quot;ArrowHelper&quot;,Ym===void 0&amp;&amp;(Ym=new It,Ym.setAttribute(&quot;position&quot;,new ut([0,0,0,0,1,0],3)),$b=new Jd(.5,1,5,1),$b.translate(0,-.5,0)),this.position.copy(t),this.line=new Eo(Ym,new Ji({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new gn($b,new zi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y&gt;.99999)this.quaternion.set(0,0,0,1);else if(e.y&lt;-.99999)this.quaternion.set(1,0,0,0);else{aC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(aC,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class p4 extends Tr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new It;r.setAttribute(&quot;position&quot;,new ut(t,3)),r.setAttribute(&quot;color&quot;,new ut(i,3));const s=new Ji({vertexColors:!0,toneMapped:!1});super(r,s),this.type=&quot;AxesHelper&quot;}setColors(e,t,i){const r=new Ye,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class m4{constructor(){this.type=&quot;ShapePath&quot;,this.color=new Ye,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new N0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const T=[];for(let w=0,S=_.length;w&lt;S;w++){const C=_[w],O=new Ac;O.curves=C.curves,T.push(O)}return T}function i(_,T){const w=T.length;let S=!1;for(let C=w-1,O=0;O&lt;w;C=O++){let M=T[C],N=T[O],R=N.x-M.x,D=N.y-M.y;if(Math.abs(D)&gt;Number.EPSILON){if(D&lt;0&amp;&amp;(M=T[O],R=-R,N=T[C],D=-D),_.y&lt;M.y||_.y&gt;N.y)continue;if(_.y===M.y){if(_.x===M.x)return!0}else{const L=D*(_.x-M.x)-R*(_.y-M.y);if(L===0)return!0;if(L&lt;0)continue;S=!S}}else{if(_.y!==M.y)continue;if(N.x&lt;=_.x&amp;&amp;_.x&lt;=M.x||M.x&lt;=_.x&amp;&amp;_.x&lt;=N.x)return!0}}return S}const r=$s.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,u;const h=[];if(s.length===1)return l=s[0],u=new Ac,u.curves=l.curves,h.push(u),h;let f=!r(s[0].getPoints());f=e?!f:f;const p=[],m=[];let g=[],v=0,x;m[v]=void 0,g[v]=[];for(let _=0,T=s.length;_&lt;T;_++)l=s[_],x=l.getPoints(),o=r(x),o=e?!o:o,o?(!f&amp;&amp;m[v]&amp;&amp;v++,m[v]={s:new Ac,p:x},m[v].s.curves=l.curves,f&amp;&amp;v++,g[v]=[]):g[v].push({h:l,p:x[0]});if(!m[0])return t(s);if(m.length&gt;1){let _=!1,T=0;for(let w=0,S=m.length;w&lt;S;w++)p[w]=[];for(let w=0,S=m.length;w&lt;S;w++){const C=g[w];for(let O=0;O&lt;C.length;O++){const M=C[O];let N=!0;for(let R=0;R&lt;m.length;R++)i(M.p,m[R].p)&amp;&amp;(w!==R&amp;&amp;T++,N?(N=!1,p[R].push(M)):_=!0);N&amp;&amp;p[w].push(M)}}T&gt;0&amp;&amp;_===!1&amp;&amp;(g=p)}let b;for(let _=0,T=m.length;_&lt;T;_++){u=m[_].s,h.push(u),b=g[_];for(let w=0,S=b.length;w&lt;S;w++)u.holes.push(b[w].h)}return h}}let qD=class extends Ao{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn(&quot;THREE.Controls: connect() now requires an element.&quot;);return}this.domElement!==null&amp;&amp;this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function g4(n,e){const t=n.image&amp;&amp;n.image.width?n.image.width/n.image.height:1;return t&gt;e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function y4(n,e){const t=n.image&amp;&amp;n.image.width?n.image.width/n.image.height:1;return t&gt;e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function _4(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function vS(n,e,t,i){const r=v4(i);switch(t){case hw:return n*e;case Xd:return n*e/r.components*r.byteLength;case qd:return n*e/r.components*r.byteLength;case dw:return n*e*2/r.components*r.byteLength;case hy:return n*e*2/r.components*r.byteLength;case fw:return n*e*3/r.components*r.byteLength;case dr:return n*e*4/r.components*r.byteLength;case fy:return n*e*4/r.components*r.byteLength;case sd:case od:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case ad:case ld:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case n0:case r0:return Math.max(n,16)*Math.max(e,8)/4;case t0:case i0:return Math.max(n,8)*Math.max(e,8)/2;case s0:case o0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case a0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case l0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case c0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case u0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case h0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case f0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case d0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case p0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case m0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case g0:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case y0:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case _0:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case v0:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case b0:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case x0:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case cd:case S0:case w0:return Math.ceil(n/4)*Math.ceil(e/4)*16;case pw:case E0:return Math.ceil(n/4)*Math.ceil(e/4)*8;case T0:case M0:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function v4(n){switch(n){case zr:case lw:return{byteLength:1,components:1};case ah:case cw:case Mh:return{byteLength:2,components:1};case cy:case uy:return{byteLength:2,components:4};case va:case ly:case kr:return{byteLength:4,components:1};case uw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class b4{static contain(e,t){return g4(e,t)}static cover(e,t){return y4(e,t)}static fill(e){return _4(e)}static getByteLength(e,t,i,r){return vS(e,t,i,r)}}typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;register&quot;,{detail:{revision:sy}}));typeof window&lt;&quot;u&quot;&amp;&amp;(window.__THREE__?console.warn(&quot;WARNING: Multiple instances of Three.js being imported.&quot;):window.__THREE__=sy);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function YD(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&amp;&amp;t!==null&amp;&amp;(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function x4(n){const e=new WeakMap;function t(l,u){const h=l.array,f=l.usage,p=h.byteLength,m=n.createBuffer();n.bindBuffer(u,m),n.bufferData(u,h,f),l.onUploadCallback();let g;if(h instanceof Float32Array)g=n.FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)g=n.SHORT;else if(h instanceof Uint32Array)g=n.UNSIGNED_INT;else if(h instanceof Int32Array)g=n.INT;else if(h instanceof Int8Array)g=n.BYTE;else if(h instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error(&quot;THREE.WebGLAttributes: Unsupported buffer data format: &quot;+h);return{buffer:m,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:p}}function i(l,u,h){const f=u.array,p=u.updateRanges;if(n.bindBuffer(h,l),p.length===0)n.bufferSubData(h,0,f);else{p.sort((g,v)=&gt;g.start-v.start);let m=0;for(let g=1;g&lt;p.length;g++){const v=p[m],x=p[g];x.start&lt;=v.start+v.count+1?v.count=Math.max(v.count,x.start+x.count-v.start):(++m,p[m]=x)}p.length=m+1;for(let g=0,v=p.length;g&lt;v;g++){const x=p[g];n.bufferSubData(h,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&amp;&amp;(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&amp;&amp;(l=l.data);const u=e.get(l);u&amp;&amp;(n.deleteBuffer(u.buffer),e.delete(l))}function o(l,u){if(l.isInterleavedBufferAttribute&amp;&amp;(l=l.data),l.isGLBufferAttribute){const f=e.get(l);(!f||f.version&lt;l.version)&amp;&amp;e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const h=e.get(l);if(h===void 0)e.set(l,t(l,u));else if(h.version&lt;l.version){if(h.size!==l.array.byteLength)throw new Error(&quot;THREE.WebGLAttributes: The size of the buffer attribute&#x27;s array buffer does not match the original size. Resizing buffer attributes is not supported.&quot;);i(h.buffer,l,u),h.version=l.version}}return{get:r,remove:s,update:o}}var S4=`#ifdef USE_ALPHAHASH
    if ( diffuseColor.a &lt; getAlphaHashThreshold( vPosition ) ) discard;
#endif`,w4=`#ifdef USE_ALPHAHASH
    const float ALPHA_HASH_SCALE = 0.05;
    float hash2D( vec2 value ) {
            return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
    }
    float hash3D( vec3 value ) {
            return hash2D( vec2( hash2D( value.xy ), value.z ) );
    }
    float getAlphaHashThreshold( vec3 position ) {
            float maxDeriv = max(
                    length( dFdx( position.xyz ) ),
                    length( dFdy( position.xyz ) )
            );
            float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
            vec2 pixScales = vec2(
                    exp2( floor( log2( pixScale ) ) ),
                    exp2( ceil( log2( pixScale ) ) )
            );
            vec2 alpha = vec2(
                    hash3D( floor( pixScales.x * position.xyz ) ),
                    hash3D( floor( pixScales.y * position.xyz ) )
            );
            float lerpFactor = fract( log2( pixScale ) );
            float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
            float a = min( lerpFactor, 1.0 - lerpFactor );
            vec3 cases = vec3(
                    x * x / ( 2.0 * a * ( 1.0 - a ) ),
                    ( x - 0.5 * a ) / ( 1.0 - a ),
                    1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
            );
            float threshold = ( x &lt; ( 1.0 - a ) )
                    ? ( ( x &lt; a ) ? cases.x : cases.y )
                    : cases.z;
            return clamp( threshold , 1.0e-6, 1.0 );
    }
#endif`,E4=`#ifdef USE_ALPHAMAP
    diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,T4=`#ifdef USE_ALPHAMAP
    uniform sampler2D alphaMap;
#endif`,M4=`#ifdef USE_ALPHATEST
    #ifdef ALPHA_TO_COVERAGE
    diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
    if ( diffuseColor.a == 0.0 ) discard;
    #else
    if ( diffuseColor.a &lt; alphaTest ) discard;
    #endif
#endif`,A4=`#ifdef USE_ALPHATEST
    uniform float alphaTest;
#endif`,C4=`#ifdef USE_AOMAP
    float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
    reflectedLight.indirectDiffuse *= ambientOcclusion;
    #if defined( USE_CLEARCOAT )
            clearcoatSpecularIndirect *= ambientOcclusion;
    #endif
    #if defined( USE_SHEEN )
            sheenSpecularIndirect *= ambientOcclusion;
    #endif
    #if defined( USE_ENVMAP ) &amp;&amp; defined( STANDARD )
            float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
            reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
    #endif
#endif`,R4=`#ifdef USE_AOMAP
    uniform sampler2D aoMap;
    uniform float aoMapIntensity;
#endif`,O4=`#ifdef USE_BATCHING
    #if ! defined( GL_ANGLE_multi_draw )
    #define gl_DrawID _gl_DrawID
    uniform int _gl_DrawID;
    #endif
    uniform highp sampler2D batchingTexture;
    uniform highp usampler2D batchingIdTexture;
    mat4 getBatchingMatrix( const in float i ) {
            int size = textureSize( batchingTexture, 0 ).x;
            int j = int( i ) * 4;
            int x = j % size;
            int y = j / size;
            vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
            vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
            vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
            vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
            return mat4( v1, v2, v3, v4 );
    }
    float getIndirectIndex( const in int i ) {
            int size = textureSize( batchingIdTexture, 0 ).x;
            int x = i % size;
            int y = i / size;
            return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
    }
#endif
#ifdef USE_BATCHING_COLOR
    uniform sampler2D batchingColorTexture;
    vec3 getBatchingColor( const in float i ) {
            int size = textureSize( batchingColorTexture, 0 ).x;
            int j = int( i );
            int x = j % size;
            int y = j / size;
            return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
    }
#endif`,N4=`#ifdef USE_BATCHING
    mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,D4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
    vPosition = vec3( position );
#endif`,I4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
    vec3 objectTangent = vec3( tangent.xyz );
#endif`,P4=`float G_BlinnPhong_Implicit( ) {
    return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
    return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
    vec3 halfDir = normalize( lightDir + viewDir );
    float dotNH = saturate( dot( normal, halfDir ) );
    float dotVH = saturate( dot( viewDir, halfDir ) );
    vec3 F = F_Schlick( specularColor, 1.0, dotVH );
    float G = G_BlinnPhong_Implicit( );
    float D = D_BlinnPhong( shininess, dotNH );
    return F * ( G * D );
} // validated`,L4=`#ifdef USE_IRIDESCENCE
    const mat3 XYZ_TO_REC709 = mat3(
             3.2404542, -0.9692660,  0.0556434,
            -1.5371385,  1.8760108, -0.2040259,
            -0.4985314,  0.0415560,  1.0572252
    );
    vec3 Fresnel0ToIor( vec3 fresnel0 ) {
            vec3 sqrtF0 = sqrt( fresnel0 );
            return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
    }
    vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
            return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
    }
    float IorToFresnel0( float transmittedIor, float incidentIor ) {
            return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
    }
    vec3 evalSensitivity( float OPD, vec3 shift ) {
            float phase = 2.0 * PI * OPD * 1.0e-9;
            vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
            vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
            vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
            vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
            xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
            xyz /= 1.0685e-7;
            vec3 rgb = XYZ_TO_REC709 * xyz;
            return rgb;
    }
    vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
            vec3 I;
            float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
            float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
            float cosTheta2Sq = 1.0 - sinTheta2Sq;
            if ( cosTheta2Sq &lt; 0.0 ) {
                    return vec3( 1.0 );
            }
            float cosTheta2 = sqrt( cosTheta2Sq );
            float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
            float R12 = F_Schlick( R0, 1.0, cosTheta1 );
            float T121 = 1.0 - R12;
            float phi12 = 0.0;
            if ( iridescenceIOR &lt; outsideIOR ) phi12 = PI;
            float phi21 = PI - phi12;
            vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );           vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
            vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
            vec3 phi23 = vec3( 0.0 );
            if ( baseIOR[ 0 ] &lt; iridescenceIOR ) phi23[ 0 ] = PI;
            if ( baseIOR[ 1 ] &lt; iridescenceIOR ) phi23[ 1 ] = PI;
            if ( baseIOR[ 2 ] &lt; iridescenceIOR ) phi23[ 2 ] = PI;
            float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
            vec3 phi = vec3( phi21 ) + phi23;
            vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
            vec3 r123 = sqrt( R123 );
            vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
            vec3 C0 = R12 + Rs;
            I = C0;
            vec3 Cm = Rs - T121;
            for ( int m = 1; m &lt;= 2; ++ m ) {
                    Cm *= r123;
                    vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
                    I += Cm * Sm;
            }
            return max( I, vec3( 0.0 ) );
    }
#endif`,U4=`#ifdef USE_BUMPMAP
    uniform sampler2D bumpMap;
    uniform float bumpScale;
    vec2 dHdxy_fwd() {
            vec2 dSTdx = dFdx( vBumpMapUv );
            vec2 dSTdy = dFdy( vBumpMapUv );
            float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
            float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
            float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
            return vec2( dBx, dBy );
    }
    vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
            vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
            vec3 vN = surf_norm;
            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * surf_norm - vGrad );
    }
#endif`,k4=`#if NUM_CLIPPING_PLANES &gt; 0
    vec4 plane;
    #ifdef ALPHA_TO_COVERAGE
            float distanceToPlane, distanceGradient;
            float clipOpacity = 1.0;
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; UNION_CLIPPING_PLANES; i ++ ) {
                    plane = clippingPlanes[ i ];
                    distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
                    distanceGradient = fwidth( distanceToPlane ) / 2.0;
                    clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
                    if ( clipOpacity == 0.0 ) discard;
            }
            #pragma unroll_loop_end
            #if UNION_CLIPPING_PLANES &lt; NUM_CLIPPING_PLANES
                    float unionClipOpacity = 1.0;
                    #pragma unroll_loop_start
                    for ( int i = UNION_CLIPPING_PLANES; i &lt; NUM_CLIPPING_PLANES; i ++ ) {
                            plane = clippingPlanes[ i ];
                            distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
                            distanceGradient = fwidth( distanceToPlane ) / 2.0;
                            unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
                    }
                    #pragma unroll_loop_end
                    clipOpacity *= 1.0 - unionClipOpacity;
            #endif
            diffuseColor.a *= clipOpacity;
            if ( diffuseColor.a == 0.0 ) discard;
    #else
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; UNION_CLIPPING_PLANES; i ++ ) {
                    plane = clippingPlanes[ i ];
                    if ( dot( vClipPosition, plane.xyz ) &gt; plane.w ) discard;
            }
            #pragma unroll_loop_end
            #if UNION_CLIPPING_PLANES &lt; NUM_CLIPPING_PLANES
                    bool clipped = true;
                    #pragma unroll_loop_start
                    for ( int i = UNION_CLIPPING_PLANES; i &lt; NUM_CLIPPING_PLANES; i ++ ) {
                            plane = clippingPlanes[ i ];
                            clipped = ( dot( vClipPosition, plane.xyz ) &gt; plane.w ) &amp;&amp; clipped;
                    }
                    #pragma unroll_loop_end
                    if ( clipped ) discard;
            #endif
    #endif
#endif`,F4=`#if NUM_CLIPPING_PLANES &gt; 0
    varying vec3 vClipPosition;
    uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,z4=`#if NUM_CLIPPING_PLANES &gt; 0
    varying vec3 vClipPosition;
#endif`,B4=`#if NUM_CLIPPING_PLANES &gt; 0
    vClipPosition = - mvPosition.xyz;
#endif`,H4=`#if defined( USE_COLOR_ALPHA )
    diffuseColor *= vColor;
#elif defined( USE_COLOR )
    diffuseColor.rgb *= vColor;
#endif`,V4=`#if defined( USE_COLOR_ALPHA )
    varying vec4 vColor;
#elif defined( USE_COLOR )
    varying vec3 vColor;
#endif`,G4=`#if defined( USE_COLOR_ALPHA )
    varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
    varying vec3 vColor;
#endif`,j4=`#if defined( USE_COLOR_ALPHA )
    vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
    vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
    vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
    vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
    vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
    vColor.xyz *= batchingColor.xyz;
#endif`,W4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
    return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
    float precisionSafeLength( vec3 v ) { return length( v ); }
#else
    float precisionSafeLength( vec3 v ) {
            float maxComponent = max3( abs( v ) );
            return length( v / maxComponent ) * maxComponent;
    }
#endif
struct IncidentLight {
    vec3 color;
    vec3 direction;
    bool visible;
};
struct ReflectedLight {
    vec3 directDiffuse;
    vec3 directSpecular;
    vec3 indirectDiffuse;
    vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
    varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
    return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
    return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
    mat3 tmp;
    tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
    tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
    tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
    return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
    return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
    float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
    float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
    return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
    return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
    float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
    return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
    float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
    return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,X4=`#ifdef ENVMAP_TYPE_CUBE_UV
    #define cubeUV_minMipLevel 4.0
    #define cubeUV_minTileSize 16.0
    float getFace( vec3 direction ) {
            vec3 absDirection = abs( direction );
            float face = - 1.0;
            if ( absDirection.x &gt; absDirection.z ) {
                    if ( absDirection.x &gt; absDirection.y )
                            face = direction.x &gt; 0.0 ? 0.0 : 3.0;
                    else
                            face = direction.y &gt; 0.0 ? 1.0 : 4.0;
            } else {
                    if ( absDirection.z &gt; absDirection.y )
                            face = direction.z &gt; 0.0 ? 2.0 : 5.0;
                    else
                            face = direction.y &gt; 0.0 ? 1.0 : 4.0;
            }
            return face;
    }
    vec2 getUV( vec3 direction, float face ) {
            vec2 uv;
            if ( face == 0.0 ) {
                    uv = vec2( direction.z, direction.y ) / abs( direction.x );
            } else if ( face == 1.0 ) {
                    uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
            } else if ( face == 2.0 ) {
                    uv = vec2( - direction.x, direction.y ) / abs( direction.z );
            } else if ( face == 3.0 ) {
                    uv = vec2( - direction.z, direction.y ) / abs( direction.x );
            } else if ( face == 4.0 ) {
                    uv = vec2( - direction.x, direction.z ) / abs( direction.y );
            } else {
                    uv = vec2( direction.x, direction.y ) / abs( direction.z );
            }
            return 0.5 * ( uv + 1.0 );
    }
    vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
            float face = getFace( direction );
            float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
            mipInt = max( mipInt, cubeUV_minMipLevel );
            float faceSize = exp2( mipInt );
            highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
            if ( face &gt; 2.0 ) {
                    uv.y += faceSize;
                    face -= 3.0;
            }
            uv.x += face * faceSize;
            uv.x += filterInt * 3.0 * cubeUV_minTileSize;
            uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
            uv.x *= CUBEUV_TEXEL_WIDTH;
            uv.y *= CUBEUV_TEXEL_HEIGHT;
            #ifdef texture2DGradEXT
                    return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
            #else
                    return texture2D( envMap, uv ).rgb;
            #endif
    }
    #define cubeUV_r0 1.0
    #define cubeUV_m0 - 2.0
    #define cubeUV_r1 0.8
    #define cubeUV_m1 - 1.0
    #define cubeUV_r4 0.4
    #define cubeUV_m4 2.0
    #define cubeUV_r5 0.305
    #define cubeUV_m5 3.0
    #define cubeUV_r6 0.21
    #define cubeUV_m6 4.0
    float roughnessToMip( float roughness ) {
            float mip = 0.0;
            if ( roughness &gt;= cubeUV_r1 ) {
                    mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
            } else if ( roughness &gt;= cubeUV_r4 ) {
                    mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
            } else if ( roughness &gt;= cubeUV_r5 ) {
                    mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
            } else if ( roughness &gt;= cubeUV_r6 ) {
                    mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
            } else {
                    mip = - 2.0 * log2( 1.16 * roughness );         }
            return mip;
    }
    vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
            float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
            float mipF = fract( mip );
            float mipInt = floor( mip );
            vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
            if ( mipF == 0.0 ) {
                    return vec4( color0, 1.0 );
            } else {
                    vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
                    return vec4( mix( color0, color1, mipF ), 1.0 );
            }
    }
#endif`,q4=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
    vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
    mat3 bm = mat3( batchingMatrix );
    transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
    transformedNormal = bm * transformedNormal;
    #ifdef USE_TANGENT
            transformedTangent = bm * transformedTangent;
    #endif
#endif
#ifdef USE_INSTANCING
    mat3 im = mat3( instanceMatrix );
    transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
    transformedNormal = im * transformedNormal;
    #ifdef USE_TANGENT
            transformedTangent = im * transformedTangent;
    #endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
    transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
    transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
    #ifdef FLIP_SIDED
            transformedTangent = - transformedTangent;
    #endif
#endif`,Y4=`#ifdef USE_DISPLACEMENTMAP
    uniform sampler2D displacementMap;
    uniform float displacementScale;
    uniform float displacementBias;
#endif`,K4=`#ifdef USE_DISPLACEMENTMAP
    transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,$4=`#ifdef USE_EMISSIVEMAP
    vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
    #ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
            emissiveColor = sRGBTransferEOTF( emissiveColor );
    #endif
    totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Z4=`#ifdef USE_EMISSIVEMAP
    uniform sampler2D emissiveMap;
#endif`,J4=&quot;gl_FragColor = linearToOutputTexel( gl_FragColor );&quot;,Q4=`vec4 LinearTransferOETF( in vec4 value ) {
    return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
    return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
    return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,eH=`#ifdef USE_ENVMAP
    #ifdef ENV_WORLDPOS
            vec3 cameraToFrag;
            if ( isOrthographic ) {
                    cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
            } else {
                    cameraToFrag = normalize( vWorldPosition - cameraPosition );
            }
            vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
            #ifdef ENVMAP_MODE_REFLECTION
                    vec3 reflectVec = reflect( cameraToFrag, worldNormal );
            #else
                    vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
            #endif
    #else
            vec3 reflectVec = vReflect;
    #endif
    #ifdef ENVMAP_TYPE_CUBE
            vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
    #else
            vec4 envColor = vec4( 0.0 );
    #endif
    #ifdef ENVMAP_BLENDING_MULTIPLY
            outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
    #elif defined( ENVMAP_BLENDING_MIX )
            outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
    #elif defined( ENVMAP_BLENDING_ADD )
            outgoingLight += envColor.xyz * specularStrength * reflectivity;
    #endif
#endif`,tH=`#ifdef USE_ENVMAP
    uniform float envMapIntensity;
    uniform float flipEnvMap;
    uniform mat3 envMapRotation;
    #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube envMap;
    #else
            uniform sampler2D envMap;
    #endif

#endif`,nH=`#ifdef USE_ENVMAP
    uniform float reflectivity;
    #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
            #define ENV_WORLDPOS
    #endif
    #ifdef ENV_WORLDPOS
            varying vec3 vWorldPosition;
            uniform float refractionRatio;
    #else
            varying vec3 vReflect;
    #endif
#endif`,iH=`#ifdef USE_ENVMAP
    #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
            #define ENV_WORLDPOS
    #endif
    #ifdef ENV_WORLDPOS

            varying vec3 vWorldPosition;
    #else
            varying vec3 vReflect;
            uniform float refractionRatio;
    #endif
#endif`,rH=`#ifdef USE_ENVMAP
    #ifdef ENV_WORLDPOS
            vWorldPosition = worldPosition.xyz;
    #else
            vec3 cameraToVertex;
            if ( isOrthographic ) {
                    cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
            } else {
                    cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
            }
            vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
            #ifdef ENVMAP_MODE_REFLECTION
                    vReflect = reflect( cameraToVertex, worldNormal );
            #else
                    vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
            #endif
    #endif
#endif`,sH=`#ifdef USE_FOG
    vFogDepth = - mvPosition.z;
#endif`,oH=`#ifdef USE_FOG
    varying float vFogDepth;
#endif`,aH=`#ifdef USE_FOG
    #ifdef FOG_EXP2
            float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
    #else
            float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
    #endif
    gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,lH=`#ifdef USE_FOG
    uniform vec3 fogColor;
    varying float vFogDepth;
    #ifdef FOG_EXP2
            uniform float fogDensity;
    #else
            uniform float fogNear;
            uniform float fogFar;
    #endif
#endif`,cH=`#ifdef USE_GRADIENTMAP
    uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
    float dotNL = dot( normal, lightDirection );
    vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
    #ifdef USE_GRADIENTMAP
            return vec3( texture2D( gradientMap, coord ).r );
    #else
            vec2 fw = fwidth( coord ) * 0.5;
            return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
    #endif
}`,uH=`#ifdef USE_LIGHTMAP
    uniform sampler2D lightMap;
    uniform float lightMapIntensity;
#endif`,hH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,fH=`varying vec3 vViewPosition;
struct LambertMaterial {
    vec3 diffuseColor;
    float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
    float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
    vec3 irradiance = dotNL * directLight.color;
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct                           RE_Direct_Lambert
#define RE_IndirectDiffuse          RE_IndirectDiffuse_Lambert`,dH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
    uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
    float x = normal.x, y = normal.y, z = normal.z;
    vec3 result = shCoefficients[ 0 ] * 0.886227;
    result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
    result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
    result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
    result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
    result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
    result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
    result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
    result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
    return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
    vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
    vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
    return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
    vec3 irradiance = ambientLightColor;
    return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
    float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
    if ( cutoffDistance &gt; 0.0 ) {
            distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
    }
    return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
    return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS &gt; 0
    struct DirectionalLight {
            vec3 direction;
            vec3 color;
    };
    uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
    void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
            light.color = directionalLight.color;
            light.direction = directionalLight.direction;
            light.visible = true;
    }
#endif
#if NUM_POINT_LIGHTS &gt; 0
    struct PointLight {
            vec3 position;
            vec3 color;
            float distance;
            float decay;
    };
    uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
    void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
            vec3 lVector = pointLight.position - geometryPosition;
            light.direction = normalize( lVector );
            float lightDistance = length( lVector );
            light.color = pointLight.color;
            light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
            light.visible = ( light.color != vec3( 0.0 ) );
    }
#endif
#if NUM_SPOT_LIGHTS &gt; 0
    struct SpotLight {
            vec3 position;
            vec3 direction;
            vec3 color;
            float distance;
            float decay;
            float coneCos;
            float penumbraCos;
    };
    uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
    void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
            vec3 lVector = spotLight.position - geometryPosition;
            light.direction = normalize( lVector );
            float angleCos = dot( light.direction, spotLight.direction );
            float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
            if ( spotAttenuation &gt; 0.0 ) {
                    float lightDistance = length( lVector );
                    light.color = spotLight.color * spotAttenuation;
                    light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
                    light.visible = ( light.color != vec3( 0.0 ) );
            } else {
                    light.color = vec3( 0.0 );
                    light.visible = false;
            }
    }
#endif
#if NUM_RECT_AREA_LIGHTS &gt; 0
    struct RectAreaLight {
            vec3 color;
            vec3 position;
            vec3 halfWidth;
            vec3 halfHeight;
    };
    uniform sampler2D ltc_1;        uniform sampler2D ltc_2;
    uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS &gt; 0
    struct HemisphereLight {
            vec3 direction;
            vec3 skyColor;
            vec3 groundColor;
    };
    uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
    vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
            float dotNL = dot( normal, hemiLight.direction );
            float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
            vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
            return irradiance;
    }
#endif`,pH=`#ifdef USE_ENVMAP
    vec3 getIBLIrradiance( const in vec3 normal ) {
            #ifdef ENVMAP_TYPE_CUBE_UV
                    vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
                    vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
                    return PI * envMapColor.rgb * envMapIntensity;
            #else
                    return vec3( 0.0 );
            #endif
    }
    vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
            #ifdef ENVMAP_TYPE_CUBE_UV
                    vec3 reflectVec = reflect( - viewDir, normal );
                    reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
                    reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
                    vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
                    return envMapColor.rgb * envMapIntensity;
            #else
                    return vec3( 0.0 );
            #endif
    }
    #ifdef USE_ANISOTROPY
            vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
                    #ifdef ENVMAP_TYPE_CUBE_UV
                            vec3 bentNormal = cross( bitangent, viewDir );
                            bentNormal = normalize( cross( bentNormal, bitangent ) );
                            bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
                            return getIBLRadiance( viewDir, bentNormal, roughness );
                    #else
                            return vec3( 0.0 );
                    #endif
            }
    #endif
#endif`,mH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,gH=`varying vec3 vViewPosition;
struct ToonMaterial {
    vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
    vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct                           RE_Direct_Toon
#define RE_IndirectDiffuse          RE_IndirectDiffuse_Toon`,yH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_H=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
    vec3 diffuseColor;
    vec3 specularColor;
    float specularShininess;
    float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
    float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
    vec3 irradiance = dotNL * directLight.color;
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
    reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct                           RE_Direct_BlinnPhong
#define RE_IndirectDiffuse          RE_IndirectDiffuse_BlinnPhong`,vH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
    material.ior = ior;
    #ifdef USE_SPECULAR
            float specularIntensityFactor = specularIntensity;
            vec3 specularColorFactor = specularColor;
            #ifdef USE_SPECULAR_COLORMAP
                    specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
            #endif
            #ifdef USE_SPECULAR_INTENSITYMAP
                    specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
            #endif
            material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
    #else
            float specularIntensityFactor = 1.0;
            vec3 specularColorFactor = vec3( 1.0 );
            material.specularF90 = 1.0;
    #endif
    material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
    material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
    material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
    material.clearcoat = clearcoat;
    material.clearcoatRoughness = clearcoatRoughness;
    material.clearcoatF0 = vec3( 0.04 );
    material.clearcoatF90 = 1.0;
    #ifdef USE_CLEARCOATMAP
            material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
    #endif
    #ifdef USE_CLEARCOAT_ROUGHNESSMAP
            material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
    #endif
    material.clearcoat = saturate( material.clearcoat );    material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
    material.clearcoatRoughness += geometryRoughness;
    material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
    material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
    material.iridescence = iridescence;
    material.iridescenceIOR = iridescenceIOR;
    #ifdef USE_IRIDESCENCEMAP
            material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
    #endif
    #ifdef USE_IRIDESCENCE_THICKNESSMAP
            material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
    #else
            material.iridescenceThickness = iridescenceThicknessMaximum;
    #endif
#endif
#ifdef USE_SHEEN
    material.sheenColor = sheenColor;
    #ifdef USE_SHEEN_COLORMAP
            material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
    #endif
    material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
    #ifdef USE_SHEEN_ROUGHNESSMAP
            material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
    #endif
#endif
#ifdef USE_ANISOTROPY
    #ifdef USE_ANISOTROPYMAP
            mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
            vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
            vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
    #else
            vec2 anisotropyV = anisotropyVector;
    #endif
    material.anisotropy = length( anisotropyV );
    if( material.anisotropy == 0.0 ) {
            anisotropyV = vec2( 1.0, 0.0 );
    } else {
            anisotropyV /= material.anisotropy;
            material.anisotropy = saturate( material.anisotropy );
    }
    material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
    material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
    material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,bH=`struct PhysicalMaterial {
    vec3 diffuseColor;
    float roughness;
    vec3 specularColor;
    float specularF90;
    float dispersion;
    #ifdef USE_CLEARCOAT
            float clearcoat;
            float clearcoatRoughness;
            vec3 clearcoatF0;
            float clearcoatF90;
    #endif
    #ifdef USE_IRIDESCENCE
            float iridescence;
            float iridescenceIOR;
            float iridescenceThickness;
            vec3 iridescenceFresnel;
            vec3 iridescenceF0;
    #endif
    #ifdef USE_SHEEN
            vec3 sheenColor;
            float sheenRoughness;
    #endif
    #ifdef IOR
            float ior;
    #endif
    #ifdef USE_TRANSMISSION
            float transmission;
            float transmissionAlpha;
            float thickness;
            float attenuationDistance;
            vec3 attenuationColor;
    #endif
    #ifdef USE_ANISOTROPY
            float anisotropy;
            float alphaT;
            vec3 anisotropyT;
            vec3 anisotropyB;
    #endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
    float a2 = pow2( alpha );
    float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
    float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
    return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
    float a2 = pow2( alpha );
    float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
    return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
    float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
            float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
            float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
            float v = 0.5 / ( gv + gl );
            return saturate(v);
    }
    float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
            float a2 = alphaT * alphaB;
            highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
            highp float v2 = dot( v, v );
            float w2 = a2 / v2;
            return RECIPROCAL_PI * a2 * pow2 ( w2 );
    }
#endif
#ifdef USE_CLEARCOAT
    vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
            vec3 f0 = material.clearcoatF0;
            float f90 = material.clearcoatF90;
            float roughness = material.clearcoatRoughness;
            float alpha = pow2( roughness );
            vec3 halfDir = normalize( lightDir + viewDir );
            float dotNL = saturate( dot( normal, lightDir ) );
            float dotNV = saturate( dot( normal, viewDir ) );
            float dotNH = saturate( dot( normal, halfDir ) );
            float dotVH = saturate( dot( viewDir, halfDir ) );
            vec3 F = F_Schlick( f0, f90, dotVH );
            float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
            float D = D_GGX( alpha, dotNH );
            return F * ( V * D );
    }
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
    vec3 f0 = material.specularColor;
    float f90 = material.specularF90;
    float roughness = material.roughness;
    float alpha = pow2( roughness );
    vec3 halfDir = normalize( lightDir + viewDir );
    float dotNL = saturate( dot( normal, lightDir ) );
    float dotNV = saturate( dot( normal, viewDir ) );
    float dotNH = saturate( dot( normal, halfDir ) );
    float dotVH = saturate( dot( viewDir, halfDir ) );
    vec3 F = F_Schlick( f0, f90, dotVH );
    #ifdef USE_IRIDESCENCE
            F = mix( F, material.iridescenceFresnel, material.iridescence );
    #endif
    #ifdef USE_ANISOTROPY
            float dotTL = dot( material.anisotropyT, lightDir );
            float dotTV = dot( material.anisotropyT, viewDir );
            float dotTH = dot( material.anisotropyT, halfDir );
            float dotBL = dot( material.anisotropyB, lightDir );
            float dotBV = dot( material.anisotropyB, viewDir );
            float dotBH = dot( material.anisotropyB, halfDir );
            float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
            float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
    #else
            float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
            float D = D_GGX( alpha, dotNH );
    #endif
    return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
    const float LUT_SIZE = 64.0;
    const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
    const float LUT_BIAS = 0.5 / LUT_SIZE;
    float dotNV = saturate( dot( N, V ) );
    vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
    uv = uv * LUT_SCALE + LUT_BIAS;
    return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
    float l = length( f );
    return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
    float x = dot( v1, v2 );
    float y = abs( x );
    float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
    float b = 3.4175940 + ( 4.1616724 + y ) * y;
    float v = a / b;
    float theta_sintheta = ( x &gt; 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
    return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
    vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
    vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
    vec3 lightNormal = cross( v1, v2 );
    if( dot( lightNormal, P - rectCoords[ 0 ] ) &lt; 0.0 ) return vec3( 0.0 );
    vec3 T1, T2;
    T1 = normalize( V - N * dot( V, N ) );
    T2 = - cross( N, T1 );
    mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
    vec3 coords[ 4 ];
    coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
    coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
    coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
    coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
    coords[ 0 ] = normalize( coords[ 0 ] );
    coords[ 1 ] = normalize( coords[ 1 ] );
    coords[ 2 ] = normalize( coords[ 2 ] );
    coords[ 3 ] = normalize( coords[ 3 ] );
    vec3 vectorFormFactor = vec3( 0.0 );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
    float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
    return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
    float alpha = pow2( roughness );
    float invAlpha = 1.0 / alpha;
    float cos2h = dotNH * dotNH;
    float sin2h = max( 1.0 - cos2h, 0.0078125 );
    return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
    return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
    vec3 halfDir = normalize( lightDir + viewDir );
    float dotNL = saturate( dot( normal, lightDir ) );
    float dotNV = saturate( dot( normal, viewDir ) );
    float dotNH = saturate( dot( normal, halfDir ) );
    float D = D_Charlie( sheenRoughness, dotNH );
    float V = V_Neubelt( dotNV, dotNL );
    return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
    float dotNV = saturate( dot( normal, viewDir ) );
    float r2 = roughness * roughness;
    float a = roughness &lt; 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
    float b = roughness &lt; 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
    float DG = exp( a * dotNV + b ) + ( roughness &lt; 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
    return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
    float dotNV = saturate( dot( normal, viewDir ) );
    const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
    const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
    vec4 r = roughness * c0 + c1;
    float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
    vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
    return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
    vec2 fab = DFGApprox( normal, viewDir, roughness );
    return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
    vec2 fab = DFGApprox( normal, viewDir, roughness );
    #ifdef USE_IRIDESCENCE
            vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
    #else
            vec3 Fr = specularColor;
    #endif
    vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
    float Ess = fab.x + fab.y;
    float Ems = 1.0 - Ess;
    vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;       vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
    singleScatter += FssEss;
    multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS &gt; 0
    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
            vec3 normal = geometryNormal;
            vec3 viewDir = geometryViewDir;
            vec3 position = geometryPosition;
            vec3 lightPos = rectAreaLight.position;
            vec3 halfWidth = rectAreaLight.halfWidth;
            vec3 halfHeight = rectAreaLight.halfHeight;
            vec3 lightColor = rectAreaLight.color;
            float roughness = material.roughness;
            vec3 rectCoords[ 4 ];
            rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;            rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
            rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
            rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
            vec2 uv = LTC_Uv( normal, viewDir, roughness );
            vec4 t1 = texture2D( ltc_1, uv );
            vec4 t2 = texture2D( ltc_2, uv );
            mat3 mInv = mat3(
                    vec3( t1.x, 0, t1.y ),
                    vec3(    0, 1,    0 ),
                    vec3( t1.z, 0, t1.w )
            );
            vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
            reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
            reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
    }
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
    float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
    vec3 irradiance = dotNL * directLight.color;
    #ifdef USE_CLEARCOAT
            float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
            vec3 ccIrradiance = dotNLcc * directLight.color;
            clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
    #endif
    #ifdef USE_SHEEN
            sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
    #endif
    reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
    #ifdef USE_CLEARCOAT
            clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
    #endif
    #ifdef USE_SHEEN
            sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
    #endif
    vec3 singleScattering = vec3( 0.0 );
    vec3 multiScattering = vec3( 0.0 );
    vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
    #ifdef USE_IRIDESCENCE
            computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
    #else
            computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
    #endif
    vec3 totalScattering = singleScattering + multiScattering;
    vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
    reflectedLight.indirectSpecular += radiance * singleScattering;
    reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
    reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct                           RE_Direct_Physical
#define RE_Direct_RectArea          RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse          RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular         RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
    return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
    geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
    float dotNVi = saturate( dot( normal, geometryViewDir ) );
    if ( material.iridescenceThickness == 0.0 ) {
            material.iridescence = 0.0;
    } else {
            material.iridescence = saturate( material.iridescence );
    }
    if ( material.iridescence &gt; 0.0 ) {
            material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
            material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
    }
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) &amp;&amp; NUM_POINT_LIGHT_SHADOWS &gt; 0
    PointLightShadow pointLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_POINT_LIGHTS; i ++ ) {
            pointLight = pointLights[ i ];
            getPointLightInfo( pointLight, geometryPosition, directLight );
            #if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_POINT_LIGHT_SHADOWS )
            pointLightShadow = pointLightShadows[ i ];
            directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
            #endif
            RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
    SpotLight spotLight;
    vec4 spotColor;
    vec3 spotLightCoord;
    bool inSpotLightMap;
    #if defined( USE_SHADOWMAP ) &amp;&amp; NUM_SPOT_LIGHT_SHADOWS &gt; 0
    SpotLightShadow spotLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_SPOT_LIGHTS; i ++ ) {
            spotLight = spotLights[ i ];
            getSpotLightInfo( spotLight, geometryPosition, directLight );
            #if ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
            #define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
            #elif ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
            #define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
            #else
            #define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
            #endif
            #if ( SPOT_LIGHT_MAP_INDEX &lt; NUM_SPOT_LIGHT_MAPS )
                    spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
                    inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
                    spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
                    directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
            #endif
            #undef SPOT_LIGHT_MAP_INDEX
            #if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
            spotLightShadow = spotLightShadows[ i ];
            directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
            #endif
            RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) &amp;&amp; NUM_DIR_LIGHT_SHADOWS &gt; 0
    DirectionalLightShadow directionalLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_DIR_LIGHTS; i ++ ) {
            directionalLight = directionalLights[ i ];
            getDirectionalLightInfo( directionalLight, directLight );
            #if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_DIR_LIGHT_SHADOWS )
            directionalLightShadow = directionalLightShadows[ i ];
            directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
            #endif
            RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct_RectArea )
    RectAreaLight rectAreaLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_RECT_AREA_LIGHTS; i ++ ) {
            rectAreaLight = rectAreaLights[ i ];
            RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
    vec3 iblIrradiance = vec3( 0.0 );
    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
    #if defined( USE_LIGHT_PROBES )
            irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
    #endif
    #if ( NUM_HEMI_LIGHTS &gt; 0 )
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; NUM_HEMI_LIGHTS; i ++ ) {
                    irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
            }
            #pragma unroll_loop_end
    #endif
#endif
#if defined( RE_IndirectSpecular )
    vec3 radiance = vec3( 0.0 );
    vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,SH=`#if defined( RE_IndirectDiffuse )
    #ifdef USE_LIGHTMAP
            vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
            vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
            irradiance += lightMapIrradiance;
    #endif
    #if defined( USE_ENVMAP ) &amp;&amp; defined( STANDARD ) &amp;&amp; defined( ENVMAP_TYPE_CUBE_UV )
            iblIrradiance += getIBLIrradiance( geometryNormal );
    #endif
#endif
#if defined( USE_ENVMAP ) &amp;&amp; defined( RE_IndirectSpecular )
    #ifdef USE_ANISOTROPY
            radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
    #else
            radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
    #endif
    #ifdef USE_CLEARCOAT
            clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
    #endif
#endif`,wH=`#if defined( RE_IndirectDiffuse )
    RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
    RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,EH=`#if defined( USE_LOGDEPTHBUF )
    gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,TH=`#if defined( USE_LOGDEPTHBUF )
    uniform float logDepthBufFC;
    varying float vFragDepth;
    varying float vIsPerspective;
#endif`,MH=`#ifdef USE_LOGDEPTHBUF
    varying float vFragDepth;
    varying float vIsPerspective;
#endif`,AH=`#ifdef USE_LOGDEPTHBUF
    vFragDepth = 1.0 + gl_Position.w;
    vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,CH=`#ifdef USE_MAP
    vec4 sampledDiffuseColor = texture2D( map, vMapUv );
    #ifdef DECODE_VIDEO_TEXTURE
            sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
    #endif
    diffuseColor *= sampledDiffuseColor;
#endif`,RH=`#ifdef USE_MAP
    uniform sampler2D map;
#endif`,OH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
    #if defined( USE_POINTS_UV )
            vec2 uv = vUv;
    #else
            vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
    #endif
#endif
#ifdef USE_MAP
    diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
    diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,NH=`#if defined( USE_POINTS_UV )
    varying vec2 vUv;
#else
    #if defined( USE_MAP ) || defined( USE_ALPHAMAP )
            uniform mat3 uvTransform;
    #endif
#endif
#ifdef USE_MAP
    uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
    uniform sampler2D alphaMap;
#endif`,DH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
    vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
    metalnessFactor *= texelMetalness.b;
#endif`,IH=`#ifdef USE_METALNESSMAP
    uniform sampler2D metalnessMap;
#endif`,PH=`#ifdef USE_INSTANCING_MORPH
    float morphTargetInfluences[ MORPHTARGETS_COUNT ];
    float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
    }
#endif`,LH=`#if defined( USE_MORPHCOLORS )
    vColor *= morphTargetBaseInfluence;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            #if defined( USE_COLOR_ALPHA )
                    if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
            #elif defined( USE_COLOR )
                    if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
            #endif
    }
#endif`,UH=`#ifdef USE_MORPHNORMALS
    objectNormal *= morphTargetBaseInfluence;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
    }
#endif`,kH=`#ifdef USE_MORPHTARGETS
    #ifndef USE_INSTANCING_MORPH
            uniform float morphTargetBaseInfluence;
            uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
    #endif
    uniform sampler2DArray morphTargetsTexture;
    uniform ivec2 morphTargetsTextureSize;
    vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
            int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
            int y = texelIndex / morphTargetsTextureSize.x;
            int x = texelIndex - y * morphTargetsTextureSize.x;
            ivec3 morphUV = ivec3( x, y, morphTargetIndex );
            return texelFetch( morphTargetsTexture, morphUV, 0 );
    }
#endif`,FH=`#ifdef USE_MORPHTARGETS
    transformed *= morphTargetBaseInfluence;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
    }
#endif`,zH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
    vec3 fdx = dFdx( vViewPosition );
    vec3 fdy = dFdy( vViewPosition );
    vec3 normal = normalize( cross( fdx, fdy ) );
#else
    vec3 normal = normalize( vNormal );
    #ifdef DOUBLE_SIDED
            normal *= faceDirection;
    #endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
    #ifdef USE_TANGENT
            mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
    #else
            mat3 tbn = getTangentFrame( - vViewPosition, normal,
            #if defined( USE_NORMALMAP )
                    vNormalMapUv
            #elif defined( USE_CLEARCOAT_NORMALMAP )
                    vClearcoatNormalMapUv
            #else
                    vUv
            #endif
            );
    #endif
    #if defined( DOUBLE_SIDED ) &amp;&amp; ! defined( FLAT_SHADED )
            tbn[0] *= faceDirection;
            tbn[1] *= faceDirection;
    #endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    #ifdef USE_TANGENT
            mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
    #else
            mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
    #endif
    #if defined( DOUBLE_SIDED ) &amp;&amp; ! defined( FLAT_SHADED )
            tbn2[0] *= faceDirection;
            tbn2[1] *= faceDirection;
    #endif
#endif
vec3 nonPerturbedNormal = normal;`,BH=`#ifdef USE_NORMALMAP_OBJECTSPACE
    normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
    #ifdef FLIP_SIDED
            normal = - normal;
    #endif
    #ifdef DOUBLE_SIDED
            normal = normal * faceDirection;
    #endif
    normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
    vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;
    normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
    normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,HH=`#ifndef FLAT_SHADED
    varying vec3 vNormal;
    #ifdef USE_TANGENT
            varying vec3 vTangent;
            varying vec3 vBitangent;
    #endif
#endif`,VH=`#ifndef FLAT_SHADED
    varying vec3 vNormal;
    #ifdef USE_TANGENT
            varying vec3 vTangent;
            varying vec3 vBitangent;
    #endif
#endif`,GH=`#ifndef FLAT_SHADED
    vNormal = normalize( transformedNormal );
    #ifdef USE_TANGENT
            vTangent = normalize( transformedTangent );
            vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
    #endif
#endif`,jH=`#ifdef USE_NORMALMAP
    uniform sampler2D normalMap;
    uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
    uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) &amp;&amp; ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
    mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
            vec3 q0 = dFdx( eye_pos.xyz );
            vec3 q1 = dFdy( eye_pos.xyz );
            vec2 st0 = dFdx( uv.st );
            vec2 st1 = dFdy( uv.st );
            vec3 N = surf_norm;
            vec3 q1perp = cross( q1, N );
            vec3 q0perp = cross( N, q0 );
            vec3 T = q1perp * st0.x + q0perp * st1.x;
            vec3 B = q1perp * st0.y + q0perp * st1.y;
            float det = max( dot( T, T ), dot( B, B ) );
            float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
            return mat3( T * scale, B * scale, N );
    }
#endif`,WH=`#ifdef USE_CLEARCOAT
    vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,XH=`#ifdef USE_CLEARCOAT_NORMALMAP
    vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
    clearcoatMapN.xy *= clearcoatNormalScale;
    clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,qH=`#ifdef USE_CLEARCOATMAP
    uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    uniform sampler2D clearcoatNormalMap;
    uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    uniform sampler2D clearcoatRoughnessMap;
#endif`,YH=`#ifdef USE_IRIDESCENCEMAP
    uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    uniform sampler2D iridescenceThicknessMap;
#endif`,KH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,$H=`vec3 packNormalToRGB( const in vec3 normal ) {
    return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
    return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
    if( v &lt;= 0.0 )
            return vec4( 0., 0., 0., 0. );
    if( v &gt;= 1.0 )
            return vec4( 1., 1., 1., 1. );
    float vuf;
    float af = modf( v * PackFactors.a, vuf );
    float bf = modf( vuf * ShiftRight8, vuf );
    float gf = modf( vuf * ShiftRight8, vuf );
    return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
    if( v &lt;= 0.0 )
            return vec3( 0., 0., 0. );
    if( v &gt;= 1.0 )
            return vec3( 1., 1., 1. );
    float vuf;
    float bf = modf( v * PackFactors.b, vuf );
    float gf = modf( vuf * ShiftRight8, vuf );
    return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
    if( v &lt;= 0.0 )
            return vec2( 0., 0. );
    if( v &gt;= 1.0 )
            return vec2( 1., 1. );
    float vuf;
    float gf = modf( v * 256., vuf );
    return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
    return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
    return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
    return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
    vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
    return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
    return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
    return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
    return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
    return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
    return ( near * far ) / ( ( far - near ) * depth - far );
}`,ZH=`#ifdef PREMULTIPLIED_ALPHA
    gl_FragColor.rgb *= gl_FragColor.a;
#endif`,JH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
    mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
    mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,QH=`#ifdef DITHERING
    gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eV=`#ifdef DITHERING
    vec3 dithering( vec3 color ) {
            float grid_position = rand( gl_FragCoord.xy );
            vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
            dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
            return color + dither_shift_RGB;
    }
#endif`,tV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
    vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
    roughnessFactor *= texelRoughness.g;
#endif`,nV=`#ifdef USE_ROUGHNESSMAP
    uniform sampler2D roughnessMap;
#endif`,iV=`#if NUM_SPOT_LIGHT_COORDS &gt; 0
    varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS &gt; 0
    uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
            uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
            varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
            struct DirectionalLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
    #endif
    #if NUM_SPOT_LIGHT_SHADOWS &gt; 0
            uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
            struct SpotLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
            uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
            varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
            struct PointLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
                    float shadowCameraNear;
                    float shadowCameraFar;
            };
            uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
    #endif
    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
            return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
    }
    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
            return unpackRGBATo2Half( texture2D( shadow, uv ) );
    }
    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
            float occlusion = 1.0;
            vec2 distribution = texture2DDistribution( shadow, uv );
            float hard_shadow = step( compare , distribution.x );
            if (hard_shadow != 1.0 ) {
                    float distance = compare - distribution.x ;
                    float variance = max( 0.00000, distribution.y * distribution.y );
                    float softness_probability = variance / (variance + distance * distance );                      softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );                      occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
            }
            return occlusion;
    }
    float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
            float shadow = 1.0;
            shadowCoord.xyz /= shadowCoord.w;
            shadowCoord.z += shadowBias;
            bool inFrustum = shadowCoord.x &gt;= 0.0 &amp;&amp; shadowCoord.x &lt;= 1.0 &amp;&amp; shadowCoord.y &gt;= 0.0 &amp;&amp; shadowCoord.y &lt;= 1.0;
            bool frustumTest = inFrustum &amp;&amp; shadowCoord.z &lt;= 1.0;
            if ( frustumTest ) {
            #if defined( SHADOWMAP_TYPE_PCF )
                    vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
                    float dx0 = - texelSize.x * shadowRadius;
                    float dy0 = - texelSize.y * shadowRadius;
                    float dx1 = + texelSize.x * shadowRadius;
                    float dy1 = + texelSize.y * shadowRadius;
                    float dx2 = dx0 / 2.0;
                    float dy2 = dy0 / 2.0;
                    float dx3 = dx1 / 2.0;
                    float dy3 = dy1 / 2.0;
                    shadow = (
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
                    ) * ( 1.0 / 17.0 );
            #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
                    vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
                    float dx = texelSize.x;
                    float dy = texelSize.y;
                    vec2 uv = shadowCoord.xy;
                    vec2 f = fract( uv * shadowMapSize + 0.5 );
                    uv -= f * texelSize;
                    shadow = (
                            texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                            texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                                     f.x ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                                     f.x ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                                     f.y ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                                     f.y ) +
                            mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                                              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                                              f.x ),
                                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                                              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                                              f.x ),
                                     f.y )
                    ) * ( 1.0 / 9.0 );
            #elif defined( SHADOWMAP_TYPE_VSM )
                    shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
            #else
                    shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
            #endif
            }
            return mix( 1.0, shadow, shadowIntensity );
    }
    vec2 cubeToUV( vec3 v, float texelSizeY ) {
            vec3 absV = abs( v );
            float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
            absV *= scaleToCube;
            v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
            vec2 planar = v.xy;
            float almostATexel = 1.5 * texelSizeY;
            float almostOne = 1.0 - almostATexel;
            if ( absV.z &gt;= almostOne ) {
                    if ( v.z &gt; 0.0 )
                            planar.x = 4.0 - v.x;
            } else if ( absV.x &gt;= almostOne ) {
                    float signX = sign( v.x );
                    planar.x = v.z * signX + 2.0 * signX;
            } else if ( absV.y &gt;= almostOne ) {
                    float signY = sign( v.y );
                    planar.x = v.x + 2.0 * signY + 2.0;
                    planar.y = v.z * signY - 2.0;
            }
            return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
    }
    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
            float shadow = 1.0;
            vec3 lightToPosition = shadowCoord.xyz;

            float lightToPositionLength = length( lightToPosition );
            if ( lightToPositionLength - shadowCameraFar &lt;= 0.0 &amp;&amp; lightToPositionLength - shadowCameraNear &gt;= 0.0 ) {
                    float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );                       dp += shadowBias;
                    vec3 bd3D = normalize( lightToPosition );
                    vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
                    #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
                            vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
                            shadow = (
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
                            ) * ( 1.0 / 9.0 );
                    #else
                            shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
                    #endif
            }
            return mix( 1.0, shadow, shadowIntensity );
    }
#endif`,rV=`#if NUM_SPOT_LIGHT_COORDS &gt; 0
    uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
    varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
            uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
            varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
            struct DirectionalLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
    #endif
    #if NUM_SPOT_LIGHT_SHADOWS &gt; 0
            struct SpotLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
            uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
            varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
            struct PointLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
                    float shadowCameraNear;
                    float shadowCameraFar;
            };
            uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
    #endif
#endif`,sV=`#if ( defined( USE_SHADOWMAP ) &amp;&amp; ( NUM_DIR_LIGHT_SHADOWS &gt; 0 || NUM_POINT_LIGHT_SHADOWS &gt; 0 ) ) || ( NUM_SPOT_LIGHT_COORDS &gt; 0 )
    vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
    vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; NUM_DIR_LIGHT_SHADOWS; i ++ ) {
                    shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
                    vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
            }
            #pragma unroll_loop_end
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; NUM_POINT_LIGHT_SHADOWS; i ++ ) {
                    shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
                    vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
            }
            #pragma unroll_loop_end
    #endif
#endif
#if NUM_SPOT_LIGHT_COORDS &gt; 0
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_SPOT_LIGHT_COORDS; i ++ ) {
            shadowWorldPosition = worldPosition;
            #if ( defined( USE_SHADOWMAP ) &amp;&amp; UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
                    shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
            #endif
            vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
    }
    #pragma unroll_loop_end
#endif`,oV=`float getShadowMask() {
    float shadow = 1.0;
    #ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
    DirectionalLightShadow directionalLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_DIR_LIGHT_SHADOWS; i ++ ) {
            directionalLight = directionalLightShadows[ i ];
            shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
    }
    #pragma unroll_loop_end
    #endif
    #if NUM_SPOT_LIGHT_SHADOWS &gt; 0
    SpotLightShadow spotLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
            spotLight = spotLightShadows[ i ];
            shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
    }
    #pragma unroll_loop_end
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
    PointLightShadow pointLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_POINT_LIGHT_SHADOWS; i ++ ) {
            pointLight = pointLightShadows[ i ];
            shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
    }
    #pragma unroll_loop_end
    #endif
    #endif
    return shadow;
}`,aV=`#ifdef USE_SKINNING
    mat4 boneMatX = getBoneMatrix( skinIndex.x );
    mat4 boneMatY = getBoneMatrix( skinIndex.y );
    mat4 boneMatZ = getBoneMatrix( skinIndex.z );
    mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lV=`#ifdef USE_SKINNING
    uniform mat4 bindMatrix;
    uniform mat4 bindMatrixInverse;
    uniform highp sampler2D boneTexture;
    mat4 getBoneMatrix( const in float i ) {
            int size = textureSize( boneTexture, 0 ).x;
            int j = int( i ) * 4;
            int x = j % size;
            int y = j / size;
            vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
            vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
            vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
            vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
            return mat4( v1, v2, v3, v4 );
    }
#endif`,cV=`#ifdef USE_SKINNING
    vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
    vec4 skinned = vec4( 0.0 );
    skinned += boneMatX * skinVertex * skinWeight.x;
    skinned += boneMatY * skinVertex * skinWeight.y;
    skinned += boneMatZ * skinVertex * skinWeight.z;
    skinned += boneMatW * skinVertex * skinWeight.w;
    transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,uV=`#ifdef USE_SKINNING
    mat4 skinMatrix = mat4( 0.0 );
    skinMatrix += skinWeight.x * boneMatX;
    skinMatrix += skinWeight.y * boneMatY;
    skinMatrix += skinWeight.z * boneMatZ;
    skinMatrix += skinWeight.w * boneMatW;
    skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
    objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
    #ifdef USE_TANGENT
            objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
    #endif
#endif`,hV=`float specularStrength;
#ifdef USE_SPECULARMAP
    vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
    specularStrength = texelSpecular.r;
#else
    specularStrength = 1.0;
#endif`,fV=`#ifdef USE_SPECULARMAP
    uniform sampler2D specularMap;
#endif`,dV=`#if defined( TONE_MAPPING )
    gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
    return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
    color *= toneMappingExposure;
    return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
    color *= toneMappingExposure;
    color = max( vec3( 0.0 ), color - 0.004 );
    return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
    vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
    vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
    return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
    const mat3 ACESInputMat = mat3(
            vec3( 0.59719, 0.07600, 0.02840 ),              vec3( 0.35458, 0.90834, 0.13383 ),
            vec3( 0.04823, 0.01566, 0.83777 )
    );
    const mat3 ACESOutputMat = mat3(
            vec3(  1.60475, -0.10208, -0.00327 ),           vec3( -0.53108,  1.10813, -0.07276 ),
            vec3( -0.07367, -0.00605,  1.07602 )
    );
    color *= toneMappingExposure / 0.6;
    color = ACESInputMat * color;
    color = RRTAndODTFit( color );
    color = ACESOutputMat * color;
    return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
    vec3( 1.6605, - 0.1246, - 0.0182 ),
    vec3( - 0.5876, 1.1329, - 0.1006 ),
    vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
    vec3( 0.6274, 0.0691, 0.0164 ),
    vec3( 0.3293, 0.9195, 0.0880 ),
    vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
    vec3 x2 = x * x;
    vec3 x4 = x2 * x2;
    return + 15.5 * x4 * x2
            - 40.14 * x4 * x
            + 31.96 * x4
            - 6.868 * x2 * x
            + 0.4298 * x2
            + 0.1191 * x
            - 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
    const mat3 AgXInsetMatrix = mat3(
            vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
            vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
            vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
    );
    const mat3 AgXOutsetMatrix = mat3(
            vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
            vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
            vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
    );
    const float AgxMinEv = - 12.47393;      const float AgxMaxEv = 4.026069;
    color *= toneMappingExposure;
    color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
    color = AgXInsetMatrix * color;
    color = max( color, 1e-10 );    color = log2( color );
    color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
    color = clamp( color, 0.0, 1.0 );
    color = agxDefaultContrastApprox( color );
    color = AgXOutsetMatrix * color;
    color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
    color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
    color = clamp( color, 0.0, 1.0 );
    return color;
}
vec3 NeutralToneMapping( vec3 color ) {
    const float StartCompression = 0.8 - 0.04;
    const float Desaturation = 0.15;
    color *= toneMappingExposure;
    float x = min( color.r, min( color.g, color.b ) );
    float offset = x &lt; 0.08 ? x - 6.25 * x * x : 0.04;
    color -= offset;
    float peak = max( color.r, max( color.g, color.b ) );
    if ( peak &lt; StartCompression ) return color;
    float d = 1. - StartCompression;
    float newPeak = 1. - d * d / ( peak + d - StartCompression );
    color *= newPeak / peak;
    float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
    return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mV=`#ifdef USE_TRANSMISSION
    material.transmission = transmission;
    material.transmissionAlpha = 1.0;
    material.thickness = thickness;
    material.attenuationDistance = attenuationDistance;
    material.attenuationColor = attenuationColor;
    #ifdef USE_TRANSMISSIONMAP
            material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
    #endif
    #ifdef USE_THICKNESSMAP
            material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
    #endif
    vec3 pos = vWorldPosition;
    vec3 v = normalize( cameraPosition - pos );
    vec3 n = inverseTransformDirection( normal, viewMatrix );
    vec4 transmitted = getIBLVolumeRefraction(
            n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
            material.attenuationColor, material.attenuationDistance );
    material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
    totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,gV=`#ifdef USE_TRANSMISSION
    uniform float transmission;
    uniform float thickness;
    uniform float attenuationDistance;
    uniform vec3 attenuationColor;
    #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
    #endif
    #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
    #endif
    uniform vec2 transmissionSamplerSize;
    uniform sampler2D transmissionSamplerMap;
    uniform mat4 modelMatrix;
    uniform mat4 projectionMatrix;
    varying vec3 vWorldPosition;
    float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
    }
    float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
    }
    float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
    }
    float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
    }
    float g0( float a ) {
            return w0( a ) + w1( a );
    }
    float g1( float a ) {
            return w2( a ) + w3( a );
    }
    float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
    }
    float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
    }
    vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
                    g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
    }
    vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
    }
    vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            return normalize( refractionVector ) * thickness * modelScale;
    }
    float applyIorToRoughness( const in float roughness, const in float ior ) {
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
    }
    vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
            return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
    }
    vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
                    return vec3( 1.0 );
            } else {
                    vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
                    vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );                    return transmittance;
            }
    }
    vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec4 transmittedLight;
            vec3 transmittance;
            #ifdef USE_DISPERSION
                    float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
                    vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
                    for ( int i = 0; i &lt; 3; i ++ ) {
                            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
                            vec3 refractedRayExit = position + transmissionRay;
                            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
                            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
                            refractionCoords += 1.0;
                            refractionCoords /= 2.0;
                            vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
                            transmittedLight[ i ] = transmissionSample[ i ];
                            transmittedLight.a += transmissionSample.a;
                            transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
                    }
                    transmittedLight.a /= 3.0;
            #else
                    vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
                    vec3 refractedRayExit = position + transmissionRay;
                    vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
                    vec2 refractionCoords = ndcPos.xy / ndcPos.w;
                    refractionCoords += 1.0;
                    refractionCoords /= 2.0;
                    transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
                    transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
            #endif
            vec3 attenuatedColor = transmittance * transmittedLight.rgb;
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
            return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
    }
#endif`,yV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
    varying vec2 vUv;
#endif
#ifdef USE_MAP
    varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
    varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
    varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
    varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
    varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
    varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
    varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
    varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
    varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
    varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
    varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
    varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
    varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
    varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
    varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
    varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
    varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
    uniform mat3 transmissionMapTransform;
    varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
    uniform mat3 thicknessMapTransform;
    varying vec2 vThicknessMapUv;
#endif`,_V=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
    varying vec2 vUv;
#endif
#ifdef USE_MAP
    uniform mat3 mapTransform;
    varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
    uniform mat3 alphaMapTransform;
    varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
    uniform mat3 lightMapTransform;
    varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
    uniform mat3 aoMapTransform;
    varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
    uniform mat3 bumpMapTransform;
    varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
    uniform mat3 normalMapTransform;
    varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
    uniform mat3 displacementMapTransform;
    varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
    uniform mat3 emissiveMapTransform;
    varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
    uniform mat3 metalnessMapTransform;
    varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
    uniform mat3 roughnessMapTransform;
    varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
    uniform mat3 anisotropyMapTransform;
    varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
    uniform mat3 clearcoatMapTransform;
    varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    uniform mat3 clearcoatNormalMapTransform;
    varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    uniform mat3 clearcoatRoughnessMapTransform;
    varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
    uniform mat3 sheenColorMapTransform;
    varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
    uniform mat3 sheenRoughnessMapTransform;
    varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
    uniform mat3 iridescenceMapTransform;
    varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    uniform mat3 iridescenceThicknessMapTransform;
    varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
    uniform mat3 specularMapTransform;
    varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
    uniform mat3 specularColorMapTransform;
    varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
    uniform mat3 specularIntensityMapTransform;
    varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
    uniform mat3 transmissionMapTransform;
    varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
    uniform mat3 thicknessMapTransform;
    varying vec2 vThicknessMapUv;
#endif`,vV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
    vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
    vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
    vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
    vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
    vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
    vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
    vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
    vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
    vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
    vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
    vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
    vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
    vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
    vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
    vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
    vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
    vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
    vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
    vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
    vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
    vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,bV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS &gt; 0
    vec4 worldPosition = vec4( transformed, 1.0 );
    #ifdef USE_BATCHING
            worldPosition = batchingMatrix * worldPosition;
    #endif
    #ifdef USE_INSTANCING
            worldPosition = instanceMatrix * worldPosition;
    #endif
    worldPosition = modelMatrix * worldPosition;
#endif`;const xV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,SV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
    vec4 texColor = texture2D( t2D, vUv );
    #ifdef DECODE_VIDEO_TEXTURE
            texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
    #endif
    texColor.rgb *= backgroundIntensity;
    gl_FragColor = texColor;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,wV=`varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vWorldDirection = transformDirection( position, modelMatrix );
    #include &lt;begin_vertex&gt;
    #include &lt;project_vertex&gt;
    gl_Position.z = gl_Position.w;
}`,EV=`#ifdef ENVMAP_TYPE_CUBE
    uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
    uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include &lt;cube_uv_reflection_fragment&gt;
void main() {
    #ifdef ENVMAP_TYPE_CUBE
            vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
    #elif defined( ENVMAP_TYPE_CUBE_UV )
            vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
    #else
            vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #endif
    texColor.rgb *= backgroundIntensity;
    gl_FragColor = texColor;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,TV=`varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vWorldDirection = transformDirection( position, modelMatrix );
    #include &lt;begin_vertex&gt;
    #include &lt;project_vertex&gt;
    gl_Position.z = gl_Position.w;
}`,MV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
    vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
    gl_FragColor = texColor;
    gl_FragColor.a *= opacity;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,AV=`#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
varying vec2 vHighPrecisionZW;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #ifdef USE_DISPLACEMENTMAP
            #include &lt;beginnormal_vertex&gt;
            #include &lt;morphnormal_vertex&gt;
            #include &lt;skinnormal_vertex&gt;
    #endif
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vHighPrecisionZW = gl_Position.zw;
}`,CV=`#if DEPTH_PACKING == 3200
    uniform float opacity;
#endif
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
varying vec2 vHighPrecisionZW;
void main() {
    vec4 diffuseColor = vec4( 1.0 );
    #include &lt;clipping_planes_fragment&gt;
    #if DEPTH_PACKING == 3200
            diffuseColor.a = opacity;
    #endif
    #include &lt;map_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
    #if DEPTH_PACKING == 3200
            gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
    #elif DEPTH_PACKING == 3201
            gl_FragColor = packDepthToRGBA( fragCoordZ );
    #elif DEPTH_PACKING == 3202
            gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
    #elif DEPTH_PACKING == 3203
            gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
    #endif
}`,RV=`#define DISTANCE
varying vec3 vWorldPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #ifdef USE_DISPLACEMENTMAP
            #include &lt;beginnormal_vertex&gt;
            #include &lt;morphnormal_vertex&gt;
            #include &lt;skinnormal_vertex&gt;
    #endif
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vWorldPosition = worldPosition.xyz;
}`,OV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main () {
    vec4 diffuseColor = vec4( 1.0 );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    float dist = length( vWorldPosition - referencePosition );
    dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
    dist = saturate( dist );
    gl_FragColor = packDepthToRGBA( dist );
}`,NV=`varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vWorldDirection = transformDirection( position, modelMatrix );
    #include &lt;begin_vertex&gt;
    #include &lt;project_vertex&gt;
}`,DV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vec3 direction = normalize( vWorldDirection );
    vec2 sampleUV = equirectUv( direction );
    gl_FragColor = texture2D( tEquirect, sampleUV );
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,IV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include &lt;common&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    vLineDistance = scale * lineDistance;
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,PV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include &lt;common&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    if ( mod( vLineDistance, totalSize ) &gt; dashSize ) {
            discard;
    }
    vec3 outgoingLight = vec3( 0.0 );
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    outgoingLight = diffuseColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
}`,LV=`#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;envmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
            #include &lt;beginnormal_vertex&gt;
            #include &lt;morphnormal_vertex&gt;
            #include &lt;skinbase_vertex&gt;
            #include &lt;skinnormal_vertex&gt;
            #include &lt;defaultnormal_vertex&gt;
    #endif
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;envmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,UV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
    varying vec3 vNormal;
#endif
#include &lt;common&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;specularmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;specularmap_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    #ifdef USE_LIGHTMAP
            vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
            reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
    #else
            reflectedLight.indirectDiffuse += vec3( 1.0 );
    #endif
    #include &lt;aomap_fragment&gt;
    reflectedLight.indirectDiffuse *= diffuseColor.rgb;
    vec3 outgoingLight = reflectedLight.indirectDiffuse;
    #include &lt;envmap_fragment&gt;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,kV=`#define LAMBERT
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;envmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;envmap_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,FV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_lambert_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;specularmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;specularmap_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_lambert_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
    #include &lt;envmap_fragment&gt;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,zV=`#define MATCAP
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;fog_vertex&gt;
    vViewPosition = - mvPosition.xyz;
}`,BV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    vec3 viewDir = normalize( vViewPosition );
    vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
    vec3 y = cross( viewDir, x );
    vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
    #ifdef USE_MATCAP
            vec4 matcapColor = texture2D( matcap, uv );
    #else
            vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
    #endif
    vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,HV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
    varying vec3 vViewPosition;
#endif
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
    vViewPosition = - mvPosition.xyz;
#endif
}`,VV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
    varying vec3 vViewPosition;
#endif
#include &lt;packing&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
    #ifdef OPAQUE
            gl_FragColor.a = 1.0;
    #endif
}`,GV=`#define PHONG
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;envmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;envmap_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,jV=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_phong_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;specularmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;specularmap_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_phong_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
    #include &lt;envmap_fragment&gt;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,WV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
    varying vec3 vWorldPosition;
#endif
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
#ifdef USE_TRANSMISSION
    vWorldPosition = worldPosition.xyz;
#endif
}`,XV=`#define STANDARD
#ifdef PHYSICAL
    #define IOR
    #define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
    uniform float ior;
#endif
#ifdef USE_SPECULAR
    uniform float specularIntensity;
    uniform vec3 specularColor;
    #ifdef USE_SPECULAR_COLORMAP
            uniform sampler2D specularColorMap;
    #endif
    #ifdef USE_SPECULAR_INTENSITYMAP
            uniform sampler2D specularIntensityMap;
    #endif
#endif
#ifdef USE_CLEARCOAT
    uniform float clearcoat;
    uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
    uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
    uniform float iridescence;
    uniform float iridescenceIOR;
    uniform float iridescenceThicknessMinimum;
    uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
    uniform vec3 sheenColor;
    uniform float sheenRoughness;
    #ifdef USE_SHEEN_COLORMAP
            uniform sampler2D sheenColorMap;
    #endif
    #ifdef USE_SHEEN_ROUGHNESSMAP
            uniform sampler2D sheenRoughnessMap;
    #endif
#endif
#ifdef USE_ANISOTROPY
    uniform vec2 anisotropyVector;
    #ifdef USE_ANISOTROPYMAP
            uniform sampler2D anisotropyMap;
    #endif
#endif
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;iridescence_fragment&gt;
#include &lt;cube_uv_reflection_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_physical_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_physical_pars_fragment&gt;
#include &lt;transmission_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;clearcoat_pars_fragment&gt;
#include &lt;iridescence_pars_fragment&gt;
#include &lt;roughnessmap_pars_fragment&gt;
#include &lt;metalnessmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;roughnessmap_fragment&gt;
    #include &lt;metalnessmap_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;clearcoat_normal_fragment_begin&gt;
    #include &lt;clearcoat_normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_physical_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
    vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
    #include &lt;transmission_fragment&gt;
    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
    #ifdef USE_SHEEN
            float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
            outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
    #endif
    #ifdef USE_CLEARCOAT
            float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
            vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
            outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
    #endif
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,qV=`#define TOON
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,YV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;gradientmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_toon_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_toon_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,KV=`uniform float size;
uniform float scale;
#include &lt;common&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
#ifdef USE_POINTS_UV
    varying vec2 vUv;
    uniform mat3 uvTransform;
#endif
void main() {
    #ifdef USE_POINTS_UV
            vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    #endif
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;project_vertex&gt;
    gl_PointSize = size;
    #ifdef USE_SIZEATTENUATION
            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
    #endif
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,$V=`uniform vec3 diffuse;
uniform float opacity;
#include &lt;common&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;map_particle_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    vec3 outgoingLight = vec3( 0.0 );
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_particle_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    outgoingLight = diffuseColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
}`,ZV=`#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
void main() {
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,JV=`uniform vec3 color;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;shadowmask_pars_fragment&gt;
void main() {
    #include &lt;logdepthbuf_fragment&gt;
    gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
}`,QV=`uniform float rotation;
uniform vec2 center;
#include &lt;common&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    vec4 mvPosition = modelViewMatrix[ 3 ];
    vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
    #ifndef USE_SIZEATTENUATION
            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;
    #endif
    vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
    vec2 rotatedPosition;
    rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
    rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
    mvPosition.xy += rotatedPosition;
    gl_Position = projectionMatrix * mvPosition;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,e5=`uniform vec3 diffuse;
uniform float opacity;
#include &lt;common&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    vec3 outgoingLight = vec3( 0.0 );
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    outgoingLight = diffuseColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
}`,$t={alphahash_fragment:S4,alphahash_pars_fragment:w4,alphamap_fragment:E4,alphamap_pars_fragment:T4,alphatest_fragment:M4,alphatest_pars_fragment:A4,aomap_fragment:C4,aomap_pars_fragment:R4,batching_pars_vertex:O4,batching_vertex:N4,begin_vertex:D4,beginnormal_vertex:I4,bsdfs:P4,iridescence_fragment:L4,bumpmap_pars_fragment:U4,clipping_planes_fragment:k4,clipping_planes_pars_fragment:F4,clipping_planes_pars_vertex:z4,clipping_planes_vertex:B4,color_fragment:H4,color_pars_fragment:V4,color_pars_vertex:G4,color_vertex:j4,common:W4,cube_uv_reflection_fragment:X4,defaultnormal_vertex:q4,displacementmap_pars_vertex:Y4,displacementmap_vertex:K4,emissivemap_fragment:$4,emissivemap_pars_fragment:Z4,colorspace_fragment:J4,colorspace_pars_fragment:Q4,envmap_fragment:eH,envmap_common_pars_fragment:tH,envmap_pars_fragment:nH,envmap_pars_vertex:iH,envmap_physical_pars_fragment:pH,envmap_vertex:rH,fog_vertex:sH,fog_pars_vertex:oH,fog_fragment:aH,fog_pars_fragment:lH,gradientmap_pars_fragment:cH,lightmap_pars_fragment:uH,lights_lambert_fragment:hH,lights_lambert_pars_fragment:fH,lights_pars_begin:dH,lights_toon_fragment:mH,lights_toon_pars_fragment:gH,lights_phong_fragment:yH,lights_phong_pars_fragment:_H,lights_physical_fragment:vH,lights_physical_pars_fragment:bH,lights_fragment_begin:xH,lights_fragment_maps:SH,lights_fragment_end:wH,logdepthbuf_fragment:EH,logdepthbuf_pars_fragment:TH,logdepthbuf_pars_vertex:MH,logdepthbuf_vertex:AH,map_fragment:CH,map_pars_fragment:RH,map_particle_fragment:OH,map_particle_pars_fragment:NH,metalnessmap_fragment:DH,metalnessmap_pars_fragment:IH,morphinstance_vertex:PH,morphcolor_vertex:LH,morphnormal_vertex:UH,morphtarget_pars_vertex:kH,morphtarget_vertex:FH,normal_fragment_begin:zH,normal_fragment_maps:BH,normal_pars_fragment:HH,normal_pars_vertex:VH,normal_vertex:GH,normalmap_pars_fragment:jH,clearcoat_normal_fragment_begin:WH,clearcoat_normal_fragment_maps:XH,clearcoat_pars_fragment:qH,iridescence_pars_fragment:YH,opaque_fragment:KH,packing:$H,premultiplied_alpha_fragment:ZH,project_vertex:JH,dithering_fragment:QH,dithering_pars_fragment:eV,roughnessmap_fragment:tV,roughnessmap_pars_fragment:nV,shadowmap_pars_fragment:iV,shadowmap_pars_vertex:rV,shadowmap_vertex:sV,shadowmask_pars_fragment:oV,skinbase_vertex:aV,skinning_pars_vertex:lV,skinning_vertex:cV,skinnormal_vertex:uV,specularmap_fragment:hV,specularmap_pars_fragment:fV,tonemapping_fragment:dV,tonemapping_pars_fragment:pV,transmission_fragment:mV,transmission_pars_fragment:gV,uv_pars_fragment:yV,uv_pars_vertex:_V,uv_vertex:vV,worldpos_vertex:bV,background_vert:xV,background_frag:SV,backgroundCube_vert:wV,backgroundCube_frag:EV,cube_vert:TV,cube_frag:MV,depth_vert:AV,depth_frag:CV,distanceRGBA_vert:RV,distanceRGBA_frag:OV,equirect_vert:NV,equirect_frag:DV,linedashed_vert:IV,linedashed_frag:PV,meshbasic_vert:LV,meshbasic_frag:UV,meshlambert_vert:kV,meshlambert_frag:FV,meshmatcap_vert:zV,meshmatcap_frag:BV,meshnormal_vert:HV,meshnormal_frag:VV,meshphong_vert:GV,meshphong_frag:jV,meshphysical_vert:WV,meshphysical_frag:XV,meshtoon_vert:qV,meshtoon_frag:YV,points_vert:KV,points_frag:$V,shadow_vert:ZV,shadow_frag:JV,sprite_vert:QV,sprite_frag:e5},rt={common:{diffuse:{value:new Ye(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},envMapRotation:{value:new Wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new Re(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ye(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ye(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new Ye(16777215)},opacity:{value:1},center:{value:new Re(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}}},Ys={basic:{uniforms:_r([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.fog]),vertexShader:$t.meshbasic_vert,fragmentShader:$t.meshbasic_frag},lambert:{uniforms:_r([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new Ye(0)}}]),vertexShader:$t.meshlambert_vert,fragmentShader:$t.meshlambert_frag},phong:{uniforms:_r([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new Ye(0)},specular:{value:new Ye(1118481)},shininess:{value:30}}]),vertexShader:$t.meshphong_vert,fragmentShader:$t.meshphong_frag},standard:{uniforms:_r([rt.common,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.roughnessmap,rt.metalnessmap,rt.fog,rt.lights,{emissive:{value:new Ye(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag},toon:{uniforms:_r([rt.common,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.gradientmap,rt.fog,rt.lights,{emissive:{value:new Ye(0)}}]),vertexShader:$t.meshtoon_vert,fragmentShader:$t.meshtoon_frag},matcap:{uniforms:_r([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,{matcap:{value:null}}]),vertexShader:$t.meshmatcap_vert,fragmentShader:$t.meshmatcap_frag},points:{uniforms:_r([rt.points,rt.fog]),vertexShader:$t.points_vert,fragmentShader:$t.points_frag},dashed:{uniforms:_r([rt.common,rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$t.linedashed_vert,fragmentShader:$t.linedashed_frag},depth:{uniforms:_r([rt.common,rt.displacementmap]),vertexShader:$t.depth_vert,fragmentShader:$t.depth_frag},normal:{uniforms:_r([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,{opacity:{value:1}}]),vertexShader:$t.meshnormal_vert,fragmentShader:$t.meshnormal_frag},sprite:{uniforms:_r([rt.sprite,rt.fog]),vertexShader:$t.sprite_vert,fragmentShader:$t.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$t.background_vert,fragmentShader:$t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wt}},vertexShader:$t.backgroundCube_vert,fragmentShader:$t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$t.cube_vert,fragmentShader:$t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$t.equirect_vert,fragmentShader:$t.equirect_frag},distanceRGBA:{uniforms:_r([rt.common,rt.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$t.distanceRGBA_vert,fragmentShader:$t.distanceRGBA_frag},shadow:{uniforms:_r([rt.lights,rt.fog,{color:{value:new Ye(0)},opacity:{value:1}}]),vertexShader:$t.shadow_vert,fragmentShader:$t.shadow_frag}};Ys.physical={uniforms:_r([Ys.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new Re(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wt},sheen:{value:0},sheenColor:{value:new Ye(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new Re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new Ye(0)},specularColor:{value:new Ye(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wt},anisotropyVector:{value:new Re},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wt}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag};const Km={r:0,b:0,g:0},oc=new Er,t5=new yt;function n5(n,e,t,i,r,s,o){const l=new Ye(0);let u=s===!0?0:1,h,f,p=null,m=0,g=null;function v(w){let S=w.isScene===!0?w.background:null;return S&amp;&amp;S.isTexture&amp;&amp;(S=(w.backgroundBlurriness&gt;0?t:e).get(S)),S}function x(w){let S=!1;const C=v(w);C===null?_(l,u):C&amp;&amp;C.isColor&amp;&amp;(_(C,1),S=!0);const O=n.xr.getEnvironmentBlendMode();O===&quot;additive&quot;?i.buffers.color.setClear(0,0,0,1,o):O===&quot;alpha-blend&quot;&amp;&amp;i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&amp;&amp;(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(w,S){const C=v(S);C&amp;&amp;(C.isCubeTexture||C.mapping===Th)?(f===void 0&amp;&amp;(f=new gn(new Rl(1,1,1),new Br({name:&quot;BackgroundCubeMaterial&quot;,uniforms:ph(Ys.backgroundCube.uniforms),vertexShader:Ys.backgroundCube.vertexShader,fragmentShader:Ys.backgroundCube.fragmentShader,side:Sr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute(&quot;normal&quot;),f.geometry.deleteAttribute(&quot;uv&quot;),f.onBeforeRender=function(O,M,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(f.material,&quot;envMap&quot;,{get:function(){return this.uniforms.envMap.value}}),r.update(f)),oc.copy(S.backgroundRotation),oc.x*=-1,oc.y*=-1,oc.z*=-1,C.isCubeTexture&amp;&amp;C.isRenderTargetTexture===!1&amp;&amp;(oc.y*=-1,oc.z*=-1),f.material.uniforms.envMap.value=C,f.material.uniforms.flipEnvMap.value=C.isCubeTexture&amp;&amp;C.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(t5.makeRotationFromEuler(oc)),f.material.toneMapped=Jt.getTransfer(C.colorSpace)!==On,(p!==C||m!==C.version||g!==n.toneMapping)&amp;&amp;(f.material.needsUpdate=!0,p=C,m=C.version,g=n.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null)):C&amp;&amp;C.isTexture&amp;&amp;(h===void 0&amp;&amp;(h=new gn(new Oh(2,2),new Br({name:&quot;BackgroundMaterial&quot;,uniforms:ph(Ys.background.uniforms),vertexShader:Ys.background.vertexShader,fragmentShader:Ys.background.fragmentShader,side:is,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute(&quot;normal&quot;),Object.defineProperty(h.material,&quot;map&quot;,{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=C,h.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,h.material.toneMapped=Jt.getTransfer(C.colorSpace)!==On,C.matrixAutoUpdate===!0&amp;&amp;C.updateMatrix(),h.material.uniforms.uvTransform.value.copy(C.matrix),(p!==C||m!==C.version||g!==n.toneMapping)&amp;&amp;(h.material.needsUpdate=!0,p=C,m=C.version,g=n.toneMapping),h.layers.enableAll(),w.unshift(h,h.geometry,h.material,0,0,null))}function _(w,S){w.getRGB(Km,nD(n)),i.buffers.color.setClear(Km.r,Km.g,Km.b,S,o)}function T(){f!==void 0&amp;&amp;(f.geometry.dispose(),f.material.dispose(),f=void 0),h!==void 0&amp;&amp;(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return l},setClearColor:function(w,S=1){l.set(w),u=S,_(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(w){u=w,_(l,u)},render:x,addToRenderList:b,dispose:T}}function i5(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let s=r,o=!1;function l(D,L,H,q,z){let $=!1;const P=p(q,H,L);s!==P&amp;&amp;(s=P,h(s.object)),$=g(D,q,H,z),$&amp;&amp;v(D,q,H,z),z!==null&amp;&amp;e.update(z,n.ELEMENT_ARRAY_BUFFER),($||o)&amp;&amp;(o=!1,S(D,L,H,q),z!==null&amp;&amp;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(z).buffer))}function u(){return n.createVertexArray()}function h(D){return n.bindVertexArray(D)}function f(D){return n.deleteVertexArray(D)}function p(D,L,H){const q=H.wireframe===!0;let z=i[D.id];z===void 0&amp;&amp;(z={},i[D.id]=z);let $=z[L.id];$===void 0&amp;&amp;($={},z[L.id]=$);let P=$[q];return P===void 0&amp;&amp;(P=m(u()),$[q]=P),P}function m(D){const L=[],H=[],q=[];for(let z=0;z&lt;t;z++)L[z]=0,H[z]=0,q[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:H,attributeDivisors:q,object:D,attributes:{},index:null}}function g(D,L,H,q){const z=s.attributes,$=L.attributes;let P=0;const j=H.getAttributes();for(const G in j)if(j[G].location&gt;=0){const F=z[G];let ne=$[G];if(ne===void 0&amp;&amp;(G===&quot;instanceMatrix&quot;&amp;&amp;D.instanceMatrix&amp;&amp;(ne=D.instanceMatrix),G===&quot;instanceColor&quot;&amp;&amp;D.instanceColor&amp;&amp;(ne=D.instanceColor)),F===void 0||F.attribute!==ne||ne&amp;&amp;F.data!==ne.data)return!0;P++}return s.attributesNum!==P||s.index!==q}function v(D,L,H,q){const z={},$=L.attributes;let P=0;const j=H.getAttributes();for(const G in j)if(j[G].location&gt;=0){let F=$[G];F===void 0&amp;&amp;(G===&quot;instanceMatrix&quot;&amp;&amp;D.instanceMatrix&amp;&amp;(F=D.instanceMatrix),G===&quot;instanceColor&quot;&amp;&amp;D.instanceColor&amp;&amp;(F=D.instanceColor));const ne={};ne.attribute=F,F&amp;&amp;F.data&amp;&amp;(ne.data=F.data),z[G]=ne,P++}s.attributes=z,s.attributesNum=P,s.index=q}function x(){const D=s.newAttributes;for(let L=0,H=D.length;L&lt;H;L++)D[L]=0}function b(D){_(D,0)}function _(D,L){const H=s.newAttributes,q=s.enabledAttributes,z=s.attributeDivisors;H[D]=1,q[D]===0&amp;&amp;(n.enableVertexAttribArray(D),q[D]=1),z[D]!==L&amp;&amp;(n.vertexAttribDivisor(D,L),z[D]=L)}function T(){const D=s.newAttributes,L=s.enabledAttributes;for(let H=0,q=L.length;H&lt;q;H++)L[H]!==D[H]&amp;&amp;(n.disableVertexAttribArray(H),L[H]=0)}function w(D,L,H,q,z,$,P){P===!0?n.vertexAttribIPointer(D,L,H,z,$):n.vertexAttribPointer(D,L,H,q,z,$)}function S(D,L,H,q){x();const z=q.attributes,$=H.getAttributes(),P=L.defaultAttributeValues;for(const j in $){const G=$[j];if(G.location&gt;=0){let ee=z[j];if(ee===void 0&amp;&amp;(j===&quot;instanceMatrix&quot;&amp;&amp;D.instanceMatrix&amp;&amp;(ee=D.instanceMatrix),j===&quot;instanceColor&quot;&amp;&amp;D.instanceColor&amp;&amp;(ee=D.instanceColor)),ee!==void 0){const F=ee.normalized,ne=ee.itemSize,le=e.get(ee);if(le===void 0)continue;const ce=le.buffer,ie=le.type,oe=le.bytesPerElement,ae=ie===n.INT||ie===n.UNSIGNED_INT||ee.gpuType===ly;if(ee.isInterleavedBufferAttribute){const ue=ee.data,ve=ue.stride,He=ee.offset;if(ue.isInstancedInterleavedBuffer){for(let Xe=0;Xe&lt;G.locationSize;Xe++)_(G.location+Xe,ue.meshPerAttribute);D.isInstancedMesh!==!0&amp;&amp;q._maxInstanceCount===void 0&amp;&amp;(q._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let Xe=0;Xe&lt;G.locationSize;Xe++)b(G.location+Xe);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let Xe=0;Xe&lt;G.locationSize;Xe++)w(G.location+Xe,ne/G.locationSize,ie,F,ve*oe,(He+ne/G.locationSize*Xe)*oe,ae)}else{if(ee.isInstancedBufferAttribute){for(let ue=0;ue&lt;G.locationSize;ue++)_(G.location+ue,ee.meshPerAttribute);D.isInstancedMesh!==!0&amp;&amp;q._maxInstanceCount===void 0&amp;&amp;(q._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let ue=0;ue&lt;G.locationSize;ue++)b(G.location+ue);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let ue=0;ue&lt;G.locationSize;ue++)w(G.location+ue,ne/G.locationSize,ie,F,ne*oe,ne/G.locationSize*ue*oe,ae)}}else if(P!==void 0){const F=P[j];if(F!==void 0)switch(F.length){case 2:n.vertexAttrib2fv(G.location,F);break;case 3:n.vertexAttrib3fv(G.location,F);break;case 4:n.vertexAttrib4fv(G.location,F);break;default:n.vertexAttrib1fv(G.location,F)}}}}T()}function C(){N();for(const D in i){const L=i[D];for(const H in L){const q=L[H];for(const z in q)f(q[z].object),delete q[z];delete L[H]}delete i[D]}}function O(D){if(i[D.id]===void 0)return;const L=i[D.id];for(const H in L){const q=L[H];for(const z in q)f(q[z].object),delete q[z];delete L[H]}delete i[D.id]}function M(D){for(const L in i){const H=i[L];if(H[D.id]===void 0)continue;const q=H[D.id];for(const z in q)f(q[z].object),delete q[z];delete H[D.id]}}function N(){R(),o=!0,s!==r&amp;&amp;(s=r,h(s.object))}function R(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:N,resetDefaultState:R,dispose:C,releaseStatesOfGeometry:O,releaseStatesOfProgram:M,initAttributes:x,enableAttribute:b,disableUnusedAttributes:T}}function r5(n,e,t){let i;function r(h){i=h}function s(h,f){n.drawArrays(i,h,f),t.update(f,i,1)}function o(h,f,p){p!==0&amp;&amp;(n.drawArraysInstanced(i,h,f,p),t.update(f,i,p))}function l(h,f,p){if(p===0)return;e.get(&quot;WEBGL_multi_draw&quot;).multiDrawArraysWEBGL(i,h,0,f,0,p);let g=0;for(let v=0;v&lt;p;v++)g+=f[v];t.update(g,i,1)}function u(h,f,p,m){if(p===0)return;const g=e.get(&quot;WEBGL_multi_draw&quot;);if(g===null)for(let v=0;v&lt;h.length;v++)o(h[v],f[v],m[v]);else{g.multiDrawArraysInstancedWEBGL(i,h,0,f,0,m,0,p);let v=0;for(let x=0;x&lt;p;x++)v+=f[x]*m[x];t.update(v,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function s5(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has(&quot;EXT_texture_filter_anisotropic&quot;)===!0){const M=e.get(&quot;EXT_texture_filter_anisotropic&quot;);r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(M){return!(M!==dr&amp;&amp;i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(M){const N=M===Mh&amp;&amp;(e.has(&quot;EXT_color_buffer_half_float&quot;)||e.has(&quot;EXT_color_buffer_float&quot;));return!(M!==zr&amp;&amp;i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&amp;&amp;M!==kr&amp;&amp;!N)}function u(M){if(M===&quot;highp&quot;){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision&gt;0&amp;&amp;n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision&gt;0)return&quot;highp&quot;;M=&quot;mediump&quot;}return M===&quot;mediump&quot;&amp;&amp;n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision&gt;0&amp;&amp;n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision&gt;0?&quot;mediump&quot;:&quot;lowp&quot;}let h=t.precision!==void 0?t.precision:&quot;highp&quot;;const f=u(h);f!==h&amp;&amp;(console.warn(&quot;THREE.WebGLRenderer:&quot;,h,&quot;not supported, using&quot;,f,&quot;instead.&quot;),h=f);const p=t.logarithmicDepthBuffer===!0,m=t.reverseDepthBuffer===!0&amp;&amp;e.has(&quot;EXT_clip_control&quot;),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=v&gt;0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:p,reverseDepthBuffer:m,maxTextures:g,maxVertexTextures:v,maxTextureSize:x,maxCubemapSize:b,maxAttributes:_,maxVertexUniforms:T,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:C,maxSamples:O}}function o5(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ta,l=new Wt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const g=p.length!==0||m||i!==0||r;return r=m,i=p.length,g},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=f(p,m,0)},this.setState=function(p,m,g){const v=p.clippingPlanes,x=p.clipIntersection,b=p.clipShadows,_=n.get(p);if(!r||v===null||v.length===0||s&amp;&amp;!b)s?f(null):h();else{const T=s?0:i,w=T*4;let S=_.clippingState||null;u.value=S,S=f(v,m,w,g);for(let C=0;C!==w;++C)S[C]=t[C];_.clippingState=S,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=T}};function h(){u.value!==t&amp;&amp;(u.value=t,u.needsUpdate=i&gt;0),e.numPlanes=i,e.numIntersection=0}function f(p,m,g,v){const x=p!==null?p.length:0;let b=null;if(x!==0){if(b=u.value,v!==!0||b===null){const _=g+x*4,T=m.matrixWorldInverse;l.getNormalMatrix(T),(b===null||b.length&lt;_)&amp;&amp;(b=new Float32Array(_));for(let w=0,S=g;w!==x;++w,S+=4)o.copy(p[w]).applyMatrix4(T,l),o.normal.toArray(b,S),b[S+3]=o.constant}u.value=b,u.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,b}}function a5(n){let e=new WeakMap;function t(o,l){return l===vd?o.mapping=_a:l===bd&amp;&amp;(o.mapping=vl),o}function i(o){if(o&amp;&amp;o.isTexture){const l=o.mapping;if(l===vd||l===bd)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&amp;&amp;u.height&gt;0){const h=new sD(u.height);return h.fromEquirectangularTexture(n,o),e.set(o,h),o.addEventListener(&quot;dispose&quot;,r),t(h.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener(&quot;dispose&quot;,r);const u=e.get(l);u!==void 0&amp;&amp;(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Ju=4,lC=[.125,.215,.35,.446,.526,.582],mc=20,Zb=new Vc,cC=new Ye;let Jb=null,Qb=0,ex=0,tx=!1;const fc=(1+Math.sqrt(5))/2,ku=1/fc,uC=[new K(-fc,ku,0),new K(fc,ku,0),new K(-ku,0,fc),new K(ku,0,fc),new K(0,fc,-ku),new K(0,fc,ku),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],l5=new K;class bS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:l=l5}=s;Jb=this._renderer.getRenderTarget(),Qb=this._renderer.getActiveCubeFace(),ex=this._renderer.getActiveMipmapLevel(),tx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,i,r,u,l),t&gt;0&amp;&amp;this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&amp;&amp;(this._cubemapMaterial=dC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&amp;&amp;(this._equirectMaterial=fC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&amp;&amp;this._cubemapMaterial.dispose(),this._equirectMaterial!==null&amp;&amp;this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&amp;&amp;this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&amp;&amp;this._pingPongRenderTarget.dispose();for(let e=0;e&lt;this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Jb,Qb,ex),this._renderer.xr.enabled=tx,e.scissorTest=!1,$m(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_a||e.mapping===vl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Jb=this._renderer.getRenderTarget(),Qb=this._renderer.getActiveCubeFace(),ex=this._renderer.getActiveMipmapLevel(),tx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:fi,minFilter:fi,generateMipmaps:!1,type:Mh,format:dr,colorSpace:pr,depthBuffer:!1},r=hC(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&amp;&amp;this._dispose(),this._pingPongRenderTarget=hC(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=c5(s)),this._blurMaterial=u5(s,e,t)}return r}_compileMaterial(e){const t=new gn(this._lodPlanes[0],e);this._renderer.compile(t,Zb)}_sceneToCubeUV(e,t,i,r,s){const u=new Yn(90,1,t,i),h=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,g=p.toneMapping;p.getClearColor(cC),p.toneMapping=pa,p.autoClear=!1;const v=new zi({name:&quot;PMREM.Background&quot;,side:Sr,depthWrite:!1,depthTest:!1}),x=new gn(new Rl,v);let b=!1;const _=e.background;_?_.isColor&amp;&amp;(v.color.copy(_),e.background=null,b=!0):(v.color.copy(cC),b=!0);for(let T=0;T&lt;6;T++){const w=T%3;w===0?(u.up.set(0,h[T],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+f[T],s.y,s.z)):w===1?(u.up.set(0,0,h[T]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+f[T],s.z)):(u.up.set(0,h[T],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+f[T]));const S=this._cubeSize;$m(r,w*S,T&gt;2?S:0,S,S),p.setRenderTarget(r),b&amp;&amp;p.render(x,u),p.render(e,u)}x.geometry.dispose(),x.material.dispose(),p.toneMapping=g,p.autoClear=m,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===_a||e.mapping===vl;r?(this._cubemapMaterial===null&amp;&amp;(this._cubemapMaterial=dC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&amp;&amp;(this._equirectMaterial=fC());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new gn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;$m(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(o,Zb)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s&lt;r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=uC[(r-s-1)%uC.length];this._blur(e,s-1,s,o,l)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,&quot;latitudinal&quot;,s),this._halfBlur(o,e,i,i,r,&quot;longitudinal&quot;,s)}_halfBlur(e,t,i,r,s,o,l){const u=this._renderer,h=this._blurMaterial;o!==&quot;latitudinal&quot;&amp;&amp;o!==&quot;longitudinal&quot;&amp;&amp;console.error(&quot;blur direction must be either latitudinal or longitudinal!&quot;);const f=3,p=new gn(this._lodPlanes[r],h),m=h.uniforms,g=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*mc-1),x=s/v,b=isFinite(s)?1+Math.floor(f*x):mc;b&gt;mc&amp;&amp;console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${mc}`);const _=[];let T=0;for(let M=0;M&lt;mc;++M){const N=M/x,R=Math.exp(-N*N/2);_.push(R),M===0?T+=R:M&lt;b&amp;&amp;(T+=2*R)}for(let M=0;M&lt;_.length;M++)_[M]=_[M]/T;m.envMap.value=e.texture,m.samples.value=b,m.weights.value=_,m.latitudinal.value=o===&quot;latitudinal&quot;,l&amp;&amp;(m.poleAxis.value=l);const{_lodMax:w}=this;m.dTheta.value=v,m.mipInt.value=w-i;const S=this._sizeLods[r],C=3*S*(r&gt;w-Ju?r-w+Ju:0),O=4*(this._cubeSize-S);$m(t,C,O,3*S,2*S),u.setRenderTarget(t),u.render(p,Zb)}}function c5(n){const e=[],t=[],i=[];let r=n;const s=n-Ju+1+lC.length;for(let o=0;o&lt;s;o++){const l=Math.pow(2,r);t.push(l);let u=1/l;o&gt;n-Ju?u=lC[o-n+Ju-1]:o===0&amp;&amp;(u=0),i.push(u);const h=1/(l-2),f=-h,p=1+h,m=[f,f,p,f,p,p,f,f,p,p,f,p],g=6,v=6,x=3,b=2,_=1,T=new Float32Array(x*v*g),w=new Float32Array(b*v*g),S=new Float32Array(_*v*g);for(let O=0;O&lt;g;O++){const M=O%3*2/3-1,N=O&gt;2?0:-1,R=[M,N,0,M+2/3,N,0,M+2/3,N+1,0,M,N,0,M+2/3,N+1,0,M,N+1,0];T.set(R,x*v*O),w.set(m,b*v*O);const D=[O,O,O,O,O,O];S.set(D,_*v*O)}const C=new It;C.setAttribute(&quot;position&quot;,new Vt(T,x)),C.setAttribute(&quot;uv&quot;,new Vt(w,b)),C.setAttribute(&quot;faceIndex&quot;,new Vt(S,_)),e.push(C),r&gt;Ju&amp;&amp;r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function hC(n,e,t){const i=new As(n,e,t);return i.texture.mapping=Th,i.texture.name=&quot;PMREM.cubeUv&quot;,i.scissorTest=!0,i}function $m(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function u5(n,e,t){const i=new Float32Array(mc),r=new K(0,1,0);return new Br({name:&quot;SphericalGaussianBlur&quot;,defines:{n:mc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Xw(),fragmentShader:`

                    precision mediump float;
                    precision mediump int;

                    varying vec3 vOutputDirection;

                    uniform sampler2D envMap;
                    uniform int samples;
                    uniform float weights[ n ];
                    uniform bool latitudinal;
                    uniform float dTheta;
                    uniform float mipInt;
                    uniform vec3 poleAxis;

                    #define ENVMAP_TYPE_CUBE_UV
                    #include &lt;cube_uv_reflection_fragment&gt;

                    vec3 getSample( float theta, vec3 axis ) {

                            float cosTheta = cos( theta );
                            // Rodrigues&#x27; axis-angle rotation
                            vec3 sampleDirection = vOutputDirection * cosTheta
                                    + cross( axis, vOutputDirection ) * sin( theta )
                                    + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

                            return bilinearCubeUV( envMap, sampleDirection, mipInt );

                    }

                    void main() {

                            vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

                            if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

                                    axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

                            }

                            axis = normalize( axis );

                            gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
                            gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

                            for ( int i = 1; i &lt; n; i++ ) {

                                    if ( i &gt;= samples ) {

                                            break;

                                    }

                                    float theta = dTheta * float( i );
                                    gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
                                    gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

                            }

                    }
            `,blending:da,depthTest:!1,depthWrite:!1})}function fC(){return new Br({name:&quot;EquirectangularToCubeUV&quot;,uniforms:{envMap:{value:null}},vertexShader:Xw(),fragmentShader:`

                    precision mediump float;
                    precision mediump int;

                    varying vec3 vOutputDirection;

                    uniform sampler2D envMap;

                    #include &lt;common&gt;

                    void main() {

                            vec3 outputDirection = normalize( vOutputDirection );
                            vec2 uv = equirectUv( outputDirection );

                            gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

                    }
            `,blending:da,depthTest:!1,depthWrite:!1})}function dC(){return new Br({name:&quot;CubemapToCubeUV&quot;,uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Xw(),fragmentShader:`

                    precision mediump float;
                    precision mediump int;

                    uniform float flipEnvMap;

                    varying vec3 vOutputDirection;

                    uniform samplerCube envMap;

                    void main() {

                            gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

                    }
            `,blending:da,depthTest:!1,depthWrite:!1})}function Xw(){return`

            precision mediump float;
            precision mediump int;

            attribute float faceIndex;

            varying vec3 vOutputDirection;

            // RH coordinate system; PMREM face-indexing convention
            vec3 getDirection( vec2 uv, float face ) {

                    uv = 2.0 * uv - 1.0;

                    vec3 direction = vec3( uv, 1.0 );

                    if ( face == 0.0 ) {

                            direction = direction.zyx; // ( 1, v, u ) pos x

                    } else if ( face == 1.0 ) {

                            direction = direction.xzy;
                            direction.xz *= -1.0; // ( -u, 1, -v ) pos y

                    } else if ( face == 2.0 ) {

                            direction.x *= -1.0; // ( -u, v, 1 ) pos z

                    } else if ( face == 3.0 ) {

                            direction = direction.zyx;
                            direction.xz *= -1.0; // ( -1, v, -u ) neg x

                    } else if ( face == 4.0 ) {

                            direction = direction.xzy;
                            direction.xy *= -1.0; // ( -u, -1, v ) neg y

                    } else if ( face == 5.0 ) {

                            direction.z *= -1.0; // ( u, v, -1 ) neg z

                    }

                    return direction;

            }

            void main() {

                    vOutputDirection = getDirection( uv, faceIndex );
                    gl_Position = vec4( position, 1.0 );

            }
    `}function h5(n){let e=new WeakMap,t=null;function i(l){if(l&amp;&amp;l.isTexture){const u=l.mapping,h=u===vd||u===bd,f=u===_a||u===vl;if(h||f){let p=e.get(l);const m=p!==void 0?p.texture.pmremVersion:0;if(l.isRenderTargetTexture&amp;&amp;l.pmremVersion!==m)return t===null&amp;&amp;(t=new bS(n)),p=h?t.fromEquirectangular(l,p):t.fromCubemap(l,p),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),p.texture;if(p!==void 0)return p.texture;{const g=l.image;return h&amp;&amp;g&amp;&amp;g.height&gt;0||f&amp;&amp;g&amp;&amp;r(g)?(t===null&amp;&amp;(t=new bS(n)),p=h?t.fromEquirectangular(l):t.fromCubemap(l),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),l.addEventListener(&quot;dispose&quot;,s),p.texture):null}}}return l}function r(l){let u=0;const h=6;for(let f=0;f&lt;h;f++)l[f]!==void 0&amp;&amp;u++;return u===h}function s(l){const u=l.target;u.removeEventListener(&quot;dispose&quot;,s);const h=e.get(u);h!==void 0&amp;&amp;(e.delete(u),h.dispose())}function o(){e=new WeakMap,t!==null&amp;&amp;(t.dispose(),t=null)}return{get:i,dispose:o}}function f5(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case&quot;WEBGL_depth_texture&quot;:r=n.getExtension(&quot;WEBGL_depth_texture&quot;)||n.getExtension(&quot;MOZ_WEBGL_depth_texture&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_depth_texture&quot;);break;case&quot;EXT_texture_filter_anisotropic&quot;:r=n.getExtension(&quot;EXT_texture_filter_anisotropic&quot;)||n.getExtension(&quot;MOZ_EXT_texture_filter_anisotropic&quot;)||n.getExtension(&quot;WEBKIT_EXT_texture_filter_anisotropic&quot;);break;case&quot;WEBGL_compressed_texture_s3tc&quot;:r=n.getExtension(&quot;WEBGL_compressed_texture_s3tc&quot;)||n.getExtension(&quot;MOZ_WEBGL_compressed_texture_s3tc&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_compressed_texture_s3tc&quot;);break;case&quot;WEBGL_compressed_texture_pvrtc&quot;:r=n.getExtension(&quot;WEBGL_compressed_texture_pvrtc&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_compressed_texture_pvrtc&quot;);break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t(&quot;EXT_color_buffer_float&quot;),t(&quot;WEBGL_clip_cull_distance&quot;),t(&quot;OES_texture_float_linear&quot;),t(&quot;EXT_color_buffer_half_float&quot;),t(&quot;WEBGL_multisampled_render_to_texture&quot;),t(&quot;WEBGL_render_shared_exponent&quot;)},get:function(i){const r=t(i);return r===null&amp;&amp;Dg(&quot;THREE.WebGLRenderer: &quot;+i+&quot; extension not supported.&quot;),r}}}function d5(n,e,t,i){const r={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&amp;&amp;e.remove(m.index);for(const v in m.attributes)e.remove(m.attributes[v]);m.removeEventListener(&quot;dispose&quot;,o),delete r[m.id];const g=s.get(m);g&amp;&amp;(e.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&amp;&amp;delete m._maxInstanceCount,t.memory.geometries--}function l(p,m){return r[m.id]===!0||(m.addEventListener(&quot;dispose&quot;,o),r[m.id]=!0,t.memory.geometries++),m}function u(p){const m=p.attributes;for(const g in m)e.update(m[g],n.ARRAY_BUFFER)}function h(p){const m=[],g=p.index,v=p.attributes.position;let x=0;if(g!==null){const T=g.array;x=g.version;for(let w=0,S=T.length;w&lt;S;w+=3){const C=T[w+0],O=T[w+1],M=T[w+2];m.push(C,O,O,M,M,C)}}else if(v!==void 0){const T=v.array;x=v.version;for(let w=0,S=T.length/3-1;w&lt;S;w+=3){const C=w+0,O=w+1,M=w+2;m.push(C,O,O,M,M,C)}}else return;const b=new(JN(m)?bw:vw)(m,1);b.version=x;const _=s.get(p);_&amp;&amp;e.remove(_),s.set(p,b)}function f(p){const m=s.get(p);if(m){const g=p.index;g!==null&amp;&amp;m.version&lt;g.version&amp;&amp;h(p)}else h(p);return s.get(p)}return{get:l,update:u,getWireframeAttribute:f}}function p5(n,e,t){let i;function r(m){i=m}let s,o;function l(m){s=m.type,o=m.bytesPerElement}function u(m,g){n.drawElements(i,g,s,m*o),t.update(g,i,1)}function h(m,g,v){v!==0&amp;&amp;(n.drawElementsInstanced(i,g,s,m*o,v),t.update(g,i,v))}function f(m,g,v){if(v===0)return;e.get(&quot;WEBGL_multi_draw&quot;).multiDrawElementsWEBGL(i,g,0,s,m,0,v);let b=0;for(let _=0;_&lt;v;_++)b+=g[_];t.update(b,i,1)}function p(m,g,v,x){if(v===0)return;const b=e.get(&quot;WEBGL_multi_draw&quot;);if(b===null)for(let _=0;_&lt;m.length;_++)h(m[_]/o,g[_],x[_]);else{b.multiDrawElementsInstancedWEBGL(i,g,0,s,m,0,x,0,v);let _=0;for(let T=0;T&lt;v;T++)_+=g[T]*x[T];t.update(_,i,1)}}this.setMode=r,this.setIndex=l,this.render=u,this.renderInstances=h,this.renderMultiDraw=f,this.renderMultiDrawInstances=p}function m5(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,l){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error(&quot;THREE.WebGLInfo: Unknown draw mode:&quot;,o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function g5(n,e,t){const i=new WeakMap,r=new _n;function s(o,l,u){const h=o.morphTargetInfluences,f=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,p=f!==void 0?f.length:0;let m=i.get(l);if(m===void 0||m.count!==p){let D=function(){N.dispose(),i.delete(l),l.removeEventListener(&quot;dispose&quot;,D)};var g=D;m!==void 0&amp;&amp;m.texture.dispose();const v=l.morphAttributes.position!==void 0,x=l.morphAttributes.normal!==void 0,b=l.morphAttributes.color!==void 0,_=l.morphAttributes.position||[],T=l.morphAttributes.normal||[],w=l.morphAttributes.color||[];let S=0;v===!0&amp;&amp;(S=1),x===!0&amp;&amp;(S=2),b===!0&amp;&amp;(S=3);let C=l.attributes.position.count*S,O=1;C&gt;e.maxTextureSize&amp;&amp;(O=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const M=new Float32Array(C*O*4*p),N=new Yd(M,C,O,p);N.type=kr,N.needsUpdate=!0;const R=S*4;for(let L=0;L&lt;p;L++){const H=_[L],q=T[L],z=w[L],$=C*O*4*L;for(let P=0;P&lt;H.count;P++){const j=P*R;v===!0&amp;&amp;(r.fromBufferAttribute(H,P),M[$+j+0]=r.x,M[$+j+1]=r.y,M[$+j+2]=r.z,M[$+j+3]=0),x===!0&amp;&amp;(r.fromBufferAttribute(q,P),M[$+j+4]=r.x,M[$+j+5]=r.y,M[$+j+6]=r.z,M[$+j+7]=0),b===!0&amp;&amp;(r.fromBufferAttribute(z,P),M[$+j+8]=r.x,M[$+j+9]=r.y,M[$+j+10]=r.z,M[$+j+11]=z.itemSize===4?r.w:1)}}m={count:p,texture:N,size:new Re(C,O)},i.set(l,m),l.addEventListener(&quot;dispose&quot;,D)}if(o.isInstancedMesh===!0&amp;&amp;o.morphTexture!==null)u.getUniforms().setValue(n,&quot;morphTexture&quot;,o.morphTexture,t);else{let v=0;for(let b=0;b&lt;h.length;b++)v+=h[b];const x=l.morphTargetsRelative?1:1-v;u.getUniforms().setValue(n,&quot;morphTargetBaseInfluence&quot;,x),u.getUniforms().setValue(n,&quot;morphTargetInfluences&quot;,h)}u.getUniforms().setValue(n,&quot;morphTargetsTexture&quot;,m.texture,t),u.getUniforms().setValue(n,&quot;morphTargetsTextureSize&quot;,m.size)}return{update:s}}function y5(n,e,t,i){let r=new WeakMap;function s(u){const h=i.render.frame,f=u.geometry,p=e.get(u,f);if(r.get(p)!==h&amp;&amp;(e.update(p),r.set(p,h)),u.isInstancedMesh&amp;&amp;(u.hasEventListener(&quot;dispose&quot;,l)===!1&amp;&amp;u.addEventListener(&quot;dispose&quot;,l),r.get(u)!==h&amp;&amp;(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&amp;&amp;t.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,h))),u.isSkinnedMesh){const m=u.skeleton;r.get(m)!==h&amp;&amp;(m.update(),r.set(m,h))}return p}function o(){r=new WeakMap}function l(u){const h=u.target;h.removeEventListener(&quot;dispose&quot;,l),t.remove(h.instanceMatrix),h.instanceColor!==null&amp;&amp;t.remove(h.instanceColor)}return{update:s,dispose:o}}const KD=new Kn,pC=new Ty(1,1),$D=new Yd,ZD=new my,JD=new Kd,mC=[],gC=[],yC=new Float32Array(16),_C=new Float32Array(9),vC=new Float32Array(4);function Ih(n,e,t){const i=n[0];if(i&lt;=0||i&gt;0)return n;const r=e*t;let s=mC[r];if(s===void 0&amp;&amp;(s=new Float32Array(r),mC[r]=s),e!==0){i.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function Bi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t&lt;i;t++)if(n[t]!==e[t])return!1;return!0}function Hi(n,e){for(let t=0,i=e.length;t&lt;i;t++)n[t]=e[t]}function Wy(n,e){let t=gC[e];t===void 0&amp;&amp;(t=new Int32Array(e),gC[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function _5(n,e){const t=this.cache;t[0]!==e&amp;&amp;(n.uniform1f(this.addr,e),t[0]=e)}function v5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&amp;&amp;(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bi(t,e))return;n.uniform2fv(this.addr,e),Hi(t,e)}}function b5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&amp;&amp;(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&amp;&amp;(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Bi(t,e))return;n.uniform3fv(this.addr,e),Hi(t,e)}}function x5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&amp;&amp;(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bi(t,e))return;n.uniform4fv(this.addr,e),Hi(t,e)}}function S5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Hi(t,e)}else{if(Bi(t,i))return;vC.set(i),n.uniformMatrix2fv(this.addr,!1,vC),Hi(t,i)}}function w5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Hi(t,e)}else{if(Bi(t,i))return;_C.set(i),n.uniformMatrix3fv(this.addr,!1,_C),Hi(t,i)}}function E5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Hi(t,e)}else{if(Bi(t,i))return;yC.set(i),n.uniformMatrix4fv(this.addr,!1,yC),Hi(t,i)}}function T5(n,e){const t=this.cache;t[0]!==e&amp;&amp;(n.uniform1i(this.addr,e),t[0]=e)}function M5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&amp;&amp;(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bi(t,e))return;n.uniform2iv(this.addr,e),Hi(t,e)}}function A5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&amp;&amp;(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bi(t,e))return;n.uniform3iv(this.addr,e),Hi(t,e)}}function C5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&amp;&amp;(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bi(t,e))return;n.uniform4iv(this.addr,e),Hi(t,e)}}function R5(n,e){const t=this.cache;t[0]!==e&amp;&amp;(n.uniform1ui(this.addr,e),t[0]=e)}function O5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&amp;&amp;(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bi(t,e))return;n.uniform2uiv(this.addr,e),Hi(t,e)}}function N5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&amp;&amp;(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Bi(t,e))return;n.uniform3uiv(this.addr,e),Hi(t,e)}}function D5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&amp;&amp;(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bi(t,e))return;n.uniform4uiv(this.addr,e),Hi(t,e)}}function I5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(pC.compareFunction=yw,s=pC):s=KD,t.setTexture2D(e||s,r)}function P5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||ZD,r)}function L5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||JD,r)}function U5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||$D,r)}function k5(n){switch(n){case 5126:return _5;case 35664:return v5;case 35665:return b5;case 35666:return x5;case 35674:return S5;case 35675:return w5;case 35676:return E5;case 5124:case 35670:return T5;case 35667:case 35671:return M5;case 35668:case 35672:return A5;case 35669:case 35673:return C5;case 5125:return R5;case 36294:return O5;case 36295:return N5;case 36296:return D5;case 35678:case 36198:case 36298:case 36306:case 35682:return I5;case 35679:case 36299:case 36307:return P5;case 35680:case 36300:case 36308:case 36293:return L5;case 36289:case 36303:case 36311:case 36292:return U5}}function F5(n,e){n.uniform1fv(this.addr,e)}function z5(n,e){const t=Ih(e,this.size,2);n.uniform2fv(this.addr,t)}function B5(n,e){const t=Ih(e,this.size,3);n.uniform3fv(this.addr,t)}function H5(n,e){const t=Ih(e,this.size,4);n.uniform4fv(this.addr,t)}function V5(n,e){const t=Ih(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function G5(n,e){const t=Ih(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function j5(n,e){const t=Ih(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function W5(n,e){n.uniform1iv(this.addr,e)}function X5(n,e){n.uniform2iv(this.addr,e)}function q5(n,e){n.uniform3iv(this.addr,e)}function Y5(n,e){n.uniform4iv(this.addr,e)}function K5(n,e){n.uniform1uiv(this.addr,e)}function $5(n,e){n.uniform2uiv(this.addr,e)}function Z5(n,e){n.uniform3uiv(this.addr,e)}function J5(n,e){n.uniform4uiv(this.addr,e)}function Q5(n,e,t){const i=this.cache,r=e.length,s=Wy(t,r);Bi(i,s)||(n.uniform1iv(this.addr,s),Hi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||KD,s[o])}function eG(n,e,t){const i=this.cache,r=e.length,s=Wy(t,r);Bi(i,s)||(n.uniform1iv(this.addr,s),Hi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||ZD,s[o])}function tG(n,e,t){const i=this.cache,r=e.length,s=Wy(t,r);Bi(i,s)||(n.uniform1iv(this.addr,s),Hi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||JD,s[o])}function nG(n,e,t){const i=this.cache,r=e.length,s=Wy(t,r);Bi(i,s)||(n.uniform1iv(this.addr,s),Hi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||$D,s[o])}function iG(n){switch(n){case 5126:return F5;case 35664:return z5;case 35665:return B5;case 35666:return H5;case 35674:return V5;case 35675:return G5;case 35676:return j5;case 5124:case 35670:return W5;case 35667:case 35671:return X5;case 35668:case 35672:return q5;case 35669:case 35673:return Y5;case 5125:return K5;case 36294:return $5;case 36295:return Z5;case 36296:return J5;case 35678:case 36198:case 36298:case 36306:case 35682:return Q5;case 35679:case 36299:case 36307:return eG;case 35680:case 36300:case 36308:case 36293:return tG;case 36289:case 36303:case 36311:case 36292:return nG}}class rG{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=k5(t.type)}}class sG{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=iG(t.type)}}class oG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const nx=/(\w+)(\])?(\[|\.)?/g;function bC(n,e){n.seq.push(e),n.map[e.id]=e}function aG(n,e,t){const i=n.name,r=i.length;for(nx.lastIndex=0;;){const s=nx.exec(i),o=nx.lastIndex;let l=s[1];const u=s[2]===&quot;]&quot;,h=s[3];if(u&amp;&amp;(l=l|0),h===void 0||h===&quot;[&quot;&amp;&amp;o+2===r){bC(t,h===void 0?new rG(l,n,e):new sG(l,n,e));break}else{let p=t.map[l];p===void 0&amp;&amp;(p=new oG(l),bC(t,p)),t=p}}}class Pg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r&lt;i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);aG(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&amp;&amp;s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&amp;&amp;this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],u=i[l.id];u.needsUpdate!==!1&amp;&amp;l.setValue(e,u.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&amp;&amp;i.push(o)}return i}}function xC(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const lG=37297;let cG=0;function uG(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o&lt;s;o++){const l=o+1;i.push(`${l===e?&quot;&gt;&quot;:&quot; &quot;} ${l}: ${t[o]}`)}return i.join(`
`)}const SC=new Wt;function hG(n){Jt._getMatrix(SC,Jt.workingColorSpace,n);const e=`mat3( ${SC.elements.map(t=&gt;t.toFixed(4))} )`;switch(Jt.getTransfer(n)){case Sd:return[e,&quot;LinearTransferOETF&quot;];case On:return[e,&quot;sRGBTransferOETF&quot;];default:return console.warn(&quot;THREE.WebGLProgram: Unsupported color space: &quot;,n),[e,&quot;LinearTransferOETF&quot;]}}function wC(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&amp;&amp;r===&quot;&quot;)return&quot;&quot;;const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+uG(n.getShaderSource(e),o)}else return r}function fG(n,e){const t=hG(e);return[`vec4 ${n}( vec4 value ) {`,`      return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,&quot;}&quot;].join(`
`)}function dG(n,e){let t;switch(e){case ON:t=&quot;Linear&quot;;break;case NN:t=&quot;Reinhard&quot;;break;case DN:t=&quot;Cineon&quot;;break;case IN:t=&quot;ACESFilmic&quot;;break;case LN:t=&quot;AgX&quot;;break;case UN:t=&quot;Neutral&quot;;break;case PN:t=&quot;Custom&quot;;break;default:console.warn(&quot;THREE.WebGLProgram: Unsupported toneMapping:&quot;,e),t=&quot;Linear&quot;}return&quot;vec3 &quot;+n+&quot;( vec3 color ) { return &quot;+t+&quot;ToneMapping( color ); }&quot;}const Zm=new K;function pG(){Jt.getLuminanceCoefficients(Zm);const n=Zm.x.toFixed(4),e=Zm.y.toFixed(4),t=Zm.z.toFixed(4);return[&quot;float luminance( const in vec3 rgb ) {&quot;,`        const vec3 weights = vec3( ${n}, ${e}, ${t} );`,&quot;  return dot( weights, rgb );&quot;,&quot;}&quot;].join(`
`)}function mG(n){return[n.extensionClipCullDistance?&quot;#extension GL_ANGLE_clip_cull_distance : require&quot;:&quot;&quot;,n.extensionMultiDraw?&quot;#extension GL_ANGLE_multi_draw : require&quot;:&quot;&quot;].filter(ed).join(`
`)}function gG(n){const e=[];for(const t in n){const i=n[t];i!==!1&amp;&amp;e.push(&quot;#define &quot;+t+&quot; &quot;+i)}return e.join(`
`)}function yG(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r&lt;i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let l=1;s.type===n.FLOAT_MAT2&amp;&amp;(l=2),s.type===n.FLOAT_MAT3&amp;&amp;(l=3),s.type===n.FLOAT_MAT4&amp;&amp;(l=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return t}function ed(n){return n!==&quot;&quot;}function EC(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TC(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const _G=/^[ \t]*#include +&lt;([\w\d./]+)&gt;/gm;function xS(n){return n.replace(_G,bG)}const vG=new Map;function bG(n,e){let t=$t[e];if(t===void 0){const i=vG.get(e);if(i!==void 0)t=$t[i],console.warn(&#x27;THREE.WebGLRenderer: Shader chunk &quot;%s&quot; has been deprecated. Use &quot;%s&quot; instead.&#x27;,e,i);else throw new Error(&quot;Can not resolve #include &lt;&quot;+e+&quot;&gt;&quot;)}return xS(t)}const xG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*&lt;\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function MC(n){return n.replace(xG,SG)}function SG(n,e,t,i){let r=&quot;&quot;;for(let s=parseInt(e);s&lt;parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,&quot;[ &quot;+s+&quot; ]&quot;).replace(/UNROLLED_LOOP_INDEX/g,s);return r}function AC(n){let e=`precision ${n.precision} float;
    precision ${n.precision} int;
    precision ${n.precision} sampler2D;
    precision ${n.precision} samplerCube;
    precision ${n.precision} sampler3D;
    precision ${n.precision} sampler2DArray;
    precision ${n.precision} sampler2DShadow;
    precision ${n.precision} samplerCubeShadow;
    precision ${n.precision} sampler2DArrayShadow;
    precision ${n.precision} isampler2D;
    precision ${n.precision} isampler3D;
    precision ${n.precision} isamplerCube;
    precision ${n.precision} isampler2DArray;
    precision ${n.precision} usampler2D;
    precision ${n.precision} usampler3D;
    precision ${n.precision} usamplerCube;
    precision ${n.precision} usampler2DArray;
    `;return n.precision===&quot;highp&quot;?e+=`
#define HIGH_PRECISION`:n.precision===&quot;mediump&quot;?e+=`
#define MEDIUM_PRECISION`:n.precision===&quot;lowp&quot;&amp;&amp;(e+=`
#define LOW_PRECISION`),e}function wG(n){let e=&quot;SHADOWMAP_TYPE_BASIC&quot;;return n.shadowMapType===aw?e=&quot;SHADOWMAP_TYPE_PCF&quot;:n.shadowMapType===cN?e=&quot;SHADOWMAP_TYPE_PCF_SOFT&quot;:n.shadowMapType===_o&amp;&amp;(e=&quot;SHADOWMAP_TYPE_VSM&quot;),e}function EG(n){let e=&quot;ENVMAP_TYPE_CUBE&quot;;if(n.envMap)switch(n.envMapMode){case _a:case vl:e=&quot;ENVMAP_TYPE_CUBE&quot;;break;case Th:e=&quot;ENVMAP_TYPE_CUBE_UV&quot;;break}return e}function TG(n){let e=&quot;ENVMAP_MODE_REFLECTION&quot;;if(n.envMap)switch(n.envMapMode){case vl:e=&quot;ENVMAP_MODE_REFRACTION&quot;;break}return e}function MG(n){let e=&quot;ENVMAP_BLENDING_NONE&quot;;if(n.envMap)switch(n.combine){case Wd:e=&quot;ENVMAP_BLENDING_MULTIPLY&quot;;break;case CN:e=&quot;ENVMAP_BLENDING_MIX&quot;;break;case RN:e=&quot;ENVMAP_BLENDING_ADD&quot;;break}return e}function AG(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function CG(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const u=wG(t),h=EG(t),f=TG(t),p=MG(t),m=AG(t),g=mG(t),v=gG(s),x=r.createProgram();let b,_,T=t.glslVersion?&quot;#version &quot;+t.glslVersion+`
`:&quot;&quot;;t.isRawShaderMaterial?(b=[&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v].filter(ed).join(`
`),b.length&gt;0&amp;&amp;(b+=`
`),_=[&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v].filter(ed).join(`
`),_.length&gt;0&amp;&amp;(_+=`
`)):(b=[AC(t),&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v,t.extensionClipCullDistance?&quot;#define USE_CLIP_DISTANCE&quot;:&quot;&quot;,t.batching?&quot;#define USE_BATCHING&quot;:&quot;&quot;,t.batchingColor?&quot;#define USE_BATCHING_COLOR&quot;:&quot;&quot;,t.instancing?&quot;#define USE_INSTANCING&quot;:&quot;&quot;,t.instancingColor?&quot;#define USE_INSTANCING_COLOR&quot;:&quot;&quot;,t.instancingMorph?&quot;#define USE_INSTANCING_MORPH&quot;:&quot;&quot;,t.useFog&amp;&amp;t.fog?&quot;#define USE_FOG&quot;:&quot;&quot;,t.useFog&amp;&amp;t.fogExp2?&quot;#define FOG_EXP2&quot;:&quot;&quot;,t.map?&quot;#define USE_MAP&quot;:&quot;&quot;,t.envMap?&quot;#define USE_ENVMAP&quot;:&quot;&quot;,t.envMap?&quot;#define &quot;+f:&quot;&quot;,t.lightMap?&quot;#define USE_LIGHTMAP&quot;:&quot;&quot;,t.aoMap?&quot;#define USE_AOMAP&quot;:&quot;&quot;,t.bumpMap?&quot;#define USE_BUMPMAP&quot;:&quot;&quot;,t.normalMap?&quot;#define USE_NORMALMAP&quot;:&quot;&quot;,t.normalMapObjectSpace?&quot;#define USE_NORMALMAP_OBJECTSPACE&quot;:&quot;&quot;,t.normalMapTangentSpace?&quot;#define USE_NORMALMAP_TANGENTSPACE&quot;:&quot;&quot;,t.displacementMap?&quot;#define USE_DISPLACEMENTMAP&quot;:&quot;&quot;,t.emissiveMap?&quot;#define USE_EMISSIVEMAP&quot;:&quot;&quot;,t.anisotropy?&quot;#define USE_ANISOTROPY&quot;:&quot;&quot;,t.anisotropyMap?&quot;#define USE_ANISOTROPYMAP&quot;:&quot;&quot;,t.clearcoatMap?&quot;#define USE_CLEARCOATMAP&quot;:&quot;&quot;,t.clearcoatRoughnessMap?&quot;#define USE_CLEARCOAT_ROUGHNESSMAP&quot;:&quot;&quot;,t.clearcoatNormalMap?&quot;#define USE_CLEARCOAT_NORMALMAP&quot;:&quot;&quot;,t.iridescenceMap?&quot;#define USE_IRIDESCENCEMAP&quot;:&quot;&quot;,t.iridescenceThicknessMap?&quot;#define USE_IRIDESCENCE_THICKNESSMAP&quot;:&quot;&quot;,t.specularMap?&quot;#define USE_SPECULARMAP&quot;:&quot;&quot;,t.specularColorMap?&quot;#define USE_SPECULAR_COLORMAP&quot;:&quot;&quot;,t.specularIntensityMap?&quot;#define USE_SPECULAR_INTENSITYMAP&quot;:&quot;&quot;,t.roughnessMap?&quot;#define USE_ROUGHNESSMAP&quot;:&quot;&quot;,t.metalnessMap?&quot;#define USE_METALNESSMAP&quot;:&quot;&quot;,t.alphaMap?&quot;#define USE_ALPHAMAP&quot;:&quot;&quot;,t.alphaHash?&quot;#define USE_ALPHAHASH&quot;:&quot;&quot;,t.transmission?&quot;#define USE_TRANSMISSION&quot;:&quot;&quot;,t.transmissionMap?&quot;#define USE_TRANSMISSIONMAP&quot;:&quot;&quot;,t.thicknessMap?&quot;#define USE_THICKNESSMAP&quot;:&quot;&quot;,t.sheenColorMap?&quot;#define USE_SHEEN_COLORMAP&quot;:&quot;&quot;,t.sheenRoughnessMap?&quot;#define USE_SHEEN_ROUGHNESSMAP&quot;:&quot;&quot;,t.mapUv?&quot;#define MAP_UV &quot;+t.mapUv:&quot;&quot;,t.alphaMapUv?&quot;#define ALPHAMAP_UV &quot;+t.alphaMapUv:&quot;&quot;,t.lightMapUv?&quot;#define LIGHTMAP_UV &quot;+t.lightMapUv:&quot;&quot;,t.aoMapUv?&quot;#define AOMAP_UV &quot;+t.aoMapUv:&quot;&quot;,t.emissiveMapUv?&quot;#define EMISSIVEMAP_UV &quot;+t.emissiveMapUv:&quot;&quot;,t.bumpMapUv?&quot;#define BUMPMAP_UV &quot;+t.bumpMapUv:&quot;&quot;,t.normalMapUv?&quot;#define NORMALMAP_UV &quot;+t.normalMapUv:&quot;&quot;,t.displacementMapUv?&quot;#define DISPLACEMENTMAP_UV &quot;+t.displacementMapUv:&quot;&quot;,t.metalnessMapUv?&quot;#define METALNESSMAP_UV &quot;+t.metalnessMapUv:&quot;&quot;,t.roughnessMapUv?&quot;#define ROUGHNESSMAP_UV &quot;+t.roughnessMapUv:&quot;&quot;,t.anisotropyMapUv?&quot;#define ANISOTROPYMAP_UV &quot;+t.anisotropyMapUv:&quot;&quot;,t.clearcoatMapUv?&quot;#define CLEARCOATMAP_UV &quot;+t.clearcoatMapUv:&quot;&quot;,t.clearcoatNormalMapUv?&quot;#define CLEARCOAT_NORMALMAP_UV &quot;+t.clearcoatNormalMapUv:&quot;&quot;,t.clearcoatRoughnessMapUv?&quot;#define CLEARCOAT_ROUGHNESSMAP_UV &quot;+t.clearcoatRoughnessMapUv:&quot;&quot;,t.iridescenceMapUv?&quot;#define IRIDESCENCEMAP_UV &quot;+t.iridescenceMapUv:&quot;&quot;,t.iridescenceThicknessMapUv?&quot;#define IRIDESCENCE_THICKNESSMAP_UV &quot;+t.iridescenceThicknessMapUv:&quot;&quot;,t.sheenColorMapUv?&quot;#define SHEEN_COLORMAP_UV &quot;+t.sheenColorMapUv:&quot;&quot;,t.sheenRoughnessMapUv?&quot;#define SHEEN_ROUGHNESSMAP_UV &quot;+t.sheenRoughnessMapUv:&quot;&quot;,t.specularMapUv?&quot;#define SPECULARMAP_UV &quot;+t.specularMapUv:&quot;&quot;,t.specularColorMapUv?&quot;#define SPECULAR_COLORMAP_UV &quot;+t.specularColorMapUv:&quot;&quot;,t.specularIntensityMapUv?&quot;#define SPECULAR_INTENSITYMAP_UV &quot;+t.specularIntensityMapUv:&quot;&quot;,t.transmissionMapUv?&quot;#define TRANSMISSIONMAP_UV &quot;+t.transmissionMapUv:&quot;&quot;,t.thicknessMapUv?&quot;#define THICKNESSMAP_UV &quot;+t.thicknessMapUv:&quot;&quot;,t.vertexTangents&amp;&amp;t.flatShading===!1?&quot;#define USE_TANGENT&quot;:&quot;&quot;,t.vertexColors?&quot;#define USE_COLOR&quot;:&quot;&quot;,t.vertexAlphas?&quot;#define USE_COLOR_ALPHA&quot;:&quot;&quot;,t.vertexUv1s?&quot;#define USE_UV1&quot;:&quot;&quot;,t.vertexUv2s?&quot;#define USE_UV2&quot;:&quot;&quot;,t.vertexUv3s?&quot;#define USE_UV3&quot;:&quot;&quot;,t.pointsUvs?&quot;#define USE_POINTS_UV&quot;:&quot;&quot;,t.flatShading?&quot;#define FLAT_SHADED&quot;:&quot;&quot;,t.skinning?&quot;#define USE_SKINNING&quot;:&quot;&quot;,t.morphTargets?&quot;#define USE_MORPHTARGETS&quot;:&quot;&quot;,t.morphNormals&amp;&amp;t.flatShading===!1?&quot;#define USE_MORPHNORMALS&quot;:&quot;&quot;,t.morphColors?&quot;#define USE_MORPHCOLORS&quot;:&quot;&quot;,t.morphTargetsCount&gt;0?&quot;#define MORPHTARGETS_TEXTURE_STRIDE &quot;+t.morphTextureStride:&quot;&quot;,t.morphTargetsCount&gt;0?&quot;#define MORPHTARGETS_COUNT &quot;+t.morphTargetsCount:&quot;&quot;,t.doubleSided?&quot;#define DOUBLE_SIDED&quot;:&quot;&quot;,t.flipSided?&quot;#define FLIP_SIDED&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define USE_SHADOWMAP&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define &quot;+u:&quot;&quot;,t.sizeAttenuation?&quot;#define USE_SIZEATTENUATION&quot;:&quot;&quot;,t.numLightProbes&gt;0?&quot;#define USE_LIGHT_PROBES&quot;:&quot;&quot;,t.logarithmicDepthBuffer?&quot;#define USE_LOGDEPTHBUF&quot;:&quot;&quot;,t.reverseDepthBuffer?&quot;#define USE_REVERSEDEPTHBUF&quot;:&quot;&quot;,&quot;uniform mat4 modelMatrix;&quot;,&quot;uniform mat4 modelViewMatrix;&quot;,&quot;uniform mat4 projectionMatrix;&quot;,&quot;uniform mat4 viewMatrix;&quot;,&quot;uniform mat3 normalMatrix;&quot;,&quot;uniform vec3 cameraPosition;&quot;,&quot;uniform bool isOrthographic;&quot;,&quot;#ifdef USE_INSTANCING&quot;,&quot;      attribute mat4 instanceMatrix;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_INSTANCING_COLOR&quot;,&quot;  attribute vec3 instanceColor;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_INSTANCING_MORPH&quot;,&quot;   uniform sampler2D morphTexture;&quot;,&quot;#endif&quot;,&quot;attribute vec3 position;&quot;,&quot;attribute vec3 normal;&quot;,&quot;attribute vec2 uv;&quot;,&quot;#ifdef USE_UV1&quot;,&quot;       attribute vec2 uv1;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_UV2&quot;,&quot;  attribute vec2 uv2;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_UV3&quot;,&quot;  attribute vec2 uv3;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_TANGENT&quot;,&quot;      attribute vec4 tangent;&quot;,&quot;#endif&quot;,&quot;#if defined( USE_COLOR_ALPHA )&quot;,&quot;      attribute vec4 color;&quot;,&quot;#elif defined( USE_COLOR )&quot;,&quot;       attribute vec3 color;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_SKINNING&quot;,&quot;   attribute vec4 skinIndex;&quot;,&quot;  attribute vec4 skinWeight;&quot;,&quot;#endif&quot;,`
`].filter(ed).join(`
`),_=[AC(t),&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v,t.useFog&amp;&amp;t.fog?&quot;#define USE_FOG&quot;:&quot;&quot;,t.useFog&amp;&amp;t.fogExp2?&quot;#define FOG_EXP2&quot;:&quot;&quot;,t.alphaToCoverage?&quot;#define ALPHA_TO_COVERAGE&quot;:&quot;&quot;,t.map?&quot;#define USE_MAP&quot;:&quot;&quot;,t.matcap?&quot;#define USE_MATCAP&quot;:&quot;&quot;,t.envMap?&quot;#define USE_ENVMAP&quot;:&quot;&quot;,t.envMap?&quot;#define &quot;+h:&quot;&quot;,t.envMap?&quot;#define &quot;+f:&quot;&quot;,t.envMap?&quot;#define &quot;+p:&quot;&quot;,m?&quot;#define CUBEUV_TEXEL_WIDTH &quot;+m.texelWidth:&quot;&quot;,m?&quot;#define CUBEUV_TEXEL_HEIGHT &quot;+m.texelHeight:&quot;&quot;,m?&quot;#define CUBEUV_MAX_MIP &quot;+m.maxMip+&quot;.0&quot;:&quot;&quot;,t.lightMap?&quot;#define USE_LIGHTMAP&quot;:&quot;&quot;,t.aoMap?&quot;#define USE_AOMAP&quot;:&quot;&quot;,t.bumpMap?&quot;#define USE_BUMPMAP&quot;:&quot;&quot;,t.normalMap?&quot;#define USE_NORMALMAP&quot;:&quot;&quot;,t.normalMapObjectSpace?&quot;#define USE_NORMALMAP_OBJECTSPACE&quot;:&quot;&quot;,t.normalMapTangentSpace?&quot;#define USE_NORMALMAP_TANGENTSPACE&quot;:&quot;&quot;,t.emissiveMap?&quot;#define USE_EMISSIVEMAP&quot;:&quot;&quot;,t.anisotropy?&quot;#define USE_ANISOTROPY&quot;:&quot;&quot;,t.anisotropyMap?&quot;#define USE_ANISOTROPYMAP&quot;:&quot;&quot;,t.clearcoat?&quot;#define USE_CLEARCOAT&quot;:&quot;&quot;,t.clearcoatMap?&quot;#define USE_CLEARCOATMAP&quot;:&quot;&quot;,t.clearcoatRoughnessMap?&quot;#define USE_CLEARCOAT_ROUGHNESSMAP&quot;:&quot;&quot;,t.clearcoatNormalMap?&quot;#define USE_CLEARCOAT_NORMALMAP&quot;:&quot;&quot;,t.dispersion?&quot;#define USE_DISPERSION&quot;:&quot;&quot;,t.iridescence?&quot;#define USE_IRIDESCENCE&quot;:&quot;&quot;,t.iridescenceMap?&quot;#define USE_IRIDESCENCEMAP&quot;:&quot;&quot;,t.iridescenceThicknessMap?&quot;#define USE_IRIDESCENCE_THICKNESSMAP&quot;:&quot;&quot;,t.specularMap?&quot;#define USE_SPECULARMAP&quot;:&quot;&quot;,t.specularColorMap?&quot;#define USE_SPECULAR_COLORMAP&quot;:&quot;&quot;,t.specularIntensityMap?&quot;#define USE_SPECULAR_INTENSITYMAP&quot;:&quot;&quot;,t.roughnessMap?&quot;#define USE_ROUGHNESSMAP&quot;:&quot;&quot;,t.metalnessMap?&quot;#define USE_METALNESSMAP&quot;:&quot;&quot;,t.alphaMap?&quot;#define USE_ALPHAMAP&quot;:&quot;&quot;,t.alphaTest?&quot;#define USE_ALPHATEST&quot;:&quot;&quot;,t.alphaHash?&quot;#define USE_ALPHAHASH&quot;:&quot;&quot;,t.sheen?&quot;#define USE_SHEEN&quot;:&quot;&quot;,t.sheenColorMap?&quot;#define USE_SHEEN_COLORMAP&quot;:&quot;&quot;,t.sheenRoughnessMap?&quot;#define USE_SHEEN_ROUGHNESSMAP&quot;:&quot;&quot;,t.transmission?&quot;#define USE_TRANSMISSION&quot;:&quot;&quot;,t.transmissionMap?&quot;#define USE_TRANSMISSIONMAP&quot;:&quot;&quot;,t.thicknessMap?&quot;#define USE_THICKNESSMAP&quot;:&quot;&quot;,t.vertexTangents&amp;&amp;t.flatShading===!1?&quot;#define USE_TANGENT&quot;:&quot;&quot;,t.vertexColors||t.instancingColor||t.batchingColor?&quot;#define USE_COLOR&quot;:&quot;&quot;,t.vertexAlphas?&quot;#define USE_COLOR_ALPHA&quot;:&quot;&quot;,t.vertexUv1s?&quot;#define USE_UV1&quot;:&quot;&quot;,t.vertexUv2s?&quot;#define USE_UV2&quot;:&quot;&quot;,t.vertexUv3s?&quot;#define USE_UV3&quot;:&quot;&quot;,t.pointsUvs?&quot;#define USE_POINTS_UV&quot;:&quot;&quot;,t.gradientMap?&quot;#define USE_GRADIENTMAP&quot;:&quot;&quot;,t.flatShading?&quot;#define FLAT_SHADED&quot;:&quot;&quot;,t.doubleSided?&quot;#define DOUBLE_SIDED&quot;:&quot;&quot;,t.flipSided?&quot;#define FLIP_SIDED&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define USE_SHADOWMAP&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define &quot;+u:&quot;&quot;,t.premultipliedAlpha?&quot;#define PREMULTIPLIED_ALPHA&quot;:&quot;&quot;,t.numLightProbes&gt;0?&quot;#define USE_LIGHT_PROBES&quot;:&quot;&quot;,t.decodeVideoTexture?&quot;#define DECODE_VIDEO_TEXTURE&quot;:&quot;&quot;,t.decodeVideoTextureEmissive?&quot;#define DECODE_VIDEO_TEXTURE_EMISSIVE&quot;:&quot;&quot;,t.logarithmicDepthBuffer?&quot;#define USE_LOGDEPTHBUF&quot;:&quot;&quot;,t.reverseDepthBuffer?&quot;#define USE_REVERSEDEPTHBUF&quot;:&quot;&quot;,&quot;uniform mat4 viewMatrix;&quot;,&quot;uniform vec3 cameraPosition;&quot;,&quot;uniform bool isOrthographic;&quot;,t.toneMapping!==pa?&quot;#define TONE_MAPPING&quot;:&quot;&quot;,t.toneMapping!==pa?$t.tonemapping_pars_fragment:&quot;&quot;,t.toneMapping!==pa?dG(&quot;toneMapping&quot;,t.toneMapping):&quot;&quot;,t.dithering?&quot;#define DITHERING&quot;:&quot;&quot;,t.opaque?&quot;#define OPAQUE&quot;:&quot;&quot;,$t.colorspace_pars_fragment,fG(&quot;linearToOutputTexel&quot;,t.outputColorSpace),pG(),t.useDepthPacking?&quot;#define DEPTH_PACKING &quot;+t.depthPacking:&quot;&quot;,`
`].filter(ed).join(`
`)),o=xS(o),o=EC(o,t),o=TC(o,t),l=xS(l),l=EC(l,t),l=TC(l,t),o=MC(o),l=MC(l),t.isRawShaderMaterial!==!0&amp;&amp;(T=`#version 300 es
`,b=[g,&quot;#define attribute in&quot;,&quot;#define varying out&quot;,&quot;#define texture2D texture&quot;].join(`
`)+`
`+b,_=[&quot;#define varying in&quot;,t.glslVersion===fS?&quot;&quot;:&quot;layout(location = 0) out highp vec4 pc_fragColor;&quot;,t.glslVersion===fS?&quot;&quot;:&quot;#define gl_FragColor pc_fragColor&quot;,&quot;#define gl_FragDepthEXT gl_FragDepth&quot;,&quot;#define texture2D texture&quot;,&quot;#define textureCube texture&quot;,&quot;#define texture2DProj textureProj&quot;,&quot;#define texture2DLodEXT textureLod&quot;,&quot;#define texture2DProjLodEXT textureProjLod&quot;,&quot;#define textureCubeLodEXT textureLod&quot;,&quot;#define texture2DGradEXT textureGrad&quot;,&quot;#define texture2DProjGradEXT textureProjGrad&quot;,&quot;#define textureCubeGradEXT textureGrad&quot;].join(`
`)+`
`+_);const w=T+b+o,S=T+_+l,C=xC(r,r.VERTEX_SHADER,w),O=xC(r,r.FRAGMENT_SHADER,S);r.attachShader(x,C),r.attachShader(x,O),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&amp;&amp;r.bindAttribLocation(x,0,&quot;position&quot;),r.linkProgram(x);function M(L){if(n.debug.checkShaderErrors){const H=r.getProgramInfoLog(x).trim(),q=r.getShaderInfoLog(C).trim(),z=r.getShaderInfoLog(O).trim();let $=!0,P=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if($=!1,typeof n.debug.onShaderError==&quot;function&quot;)n.debug.onShaderError(r,x,C,O);else{const j=wC(r,C,&quot;vertex&quot;),G=wC(r,O,&quot;fragment&quot;);console.error(&quot;THREE.WebGLProgram: Shader Error &quot;+r.getError()+&quot; - VALIDATE_STATUS &quot;+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+H+`
`+j+`
`+G)}else H!==&quot;&quot;?console.warn(&quot;THREE.WebGLProgram: Program Info Log:&quot;,H):(q===&quot;&quot;||z===&quot;&quot;)&amp;&amp;(P=!1);P&amp;&amp;(L.diagnostics={runnable:$,programLog:H,vertexShader:{log:q,prefix:b},fragmentShader:{log:z,prefix:_}})}r.deleteShader(C),r.deleteShader(O),N=new Pg(r,x),R=yG(r,x)}let N;this.getUniforms=function(){return N===void 0&amp;&amp;M(this),N};let R;this.getAttributes=function(){return R===void 0&amp;&amp;M(this),R};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&amp;&amp;(D=r.getProgramParameter(x,lG)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=cG++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=C,this.fragmentShader=O,this}let RG=0;class OG{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&amp;&amp;(o.add(r),r.usedTimes++),o.has(s)===!1&amp;&amp;(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&amp;&amp;this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&amp;&amp;(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&amp;&amp;(i=new NG(e),t.set(e,i)),i}}class NG{constructor(e){this.id=RG++,this.code=e,this.usedTimes=0}}function DG(n,e,t,i,r,s,o){const l=new gy,u=new OG,h=new Set,f=[],p=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:&quot;depth&quot;,MeshDistanceMaterial:&quot;distanceRGBA&quot;,MeshNormalMaterial:&quot;normal&quot;,MeshBasicMaterial:&quot;basic&quot;,MeshLambertMaterial:&quot;lambert&quot;,MeshPhongMaterial:&quot;phong&quot;,MeshToonMaterial:&quot;toon&quot;,MeshStandardMaterial:&quot;physical&quot;,MeshPhysicalMaterial:&quot;physical&quot;,MeshMatcapMaterial:&quot;matcap&quot;,LineBasicMaterial:&quot;basic&quot;,LineDashedMaterial:&quot;dashed&quot;,PointsMaterial:&quot;points&quot;,ShadowMaterial:&quot;shadow&quot;,SpriteMaterial:&quot;sprite&quot;};function x(R){return h.add(R),R===0?&quot;uv&quot;:`uv${R}`}function b(R,D,L,H,q){const z=H.fog,$=q.geometry,P=R.isMeshStandardMaterial?H.environment:null,j=(R.isMeshStandardMaterial?t:e).get(R.envMap||P),G=j&amp;&amp;j.mapping===Th?j.image.height:null,ee=v[R.type];R.precision!==null&amp;&amp;(g=r.getMaxPrecision(R.precision),g!==R.precision&amp;&amp;console.warn(&quot;THREE.WebGLProgram.getParameters:&quot;,R.precision,&quot;not supported, using&quot;,g,&quot;instead.&quot;));const F=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,ne=F!==void 0?F.length:0;let le=0;$.morphAttributes.position!==void 0&amp;&amp;(le=1),$.morphAttributes.normal!==void 0&amp;&amp;(le=2),$.morphAttributes.color!==void 0&amp;&amp;(le=3);let ce,ie,oe,ae;if(ee){const zt=Ys[ee];ce=zt.vertexShader,ie=zt.fragmentShader}else ce=R.vertexShader,ie=R.fragmentShader,u.update(R),oe=u.getVertexShaderID(R),ae=u.getFragmentShaderID(R);const ue=n.getRenderTarget(),ve=n.state.buffers.depth.getReversed(),He=q.isInstancedMesh===!0,Xe=q.isBatchedMesh===!0,ct=!!R.map,We=!!R.matcap,Ke=!!j,Q=!!R.aoMap,Ve=!!R.lightMap,Le=!!R.bumpMap,Fe=!!R.normalMap,De=!!R.displacementMap,mt=!!R.emissiveMap,ze=!!R.metalnessMap,te=!!R.roughnessMap,V=R.anisotropy&gt;0,pe=R.clearcoat&gt;0,Ce=R.dispersion&gt;0,Ue=R.iridescence&gt;0,Me=R.sheen&gt;0,Ze=R.transmission&gt;0,qe=V&amp;&amp;!!R.anisotropyMap,ht=pe&amp;&amp;!!R.clearcoatMap,Ct=pe&amp;&amp;!!R.clearcoatNormalMap,je=pe&amp;&amp;!!R.clearcoatRoughnessMap,ft=Ue&amp;&amp;!!R.iridescenceMap,St=Ue&amp;&amp;!!R.iridescenceThicknessMap,Rt=Me&amp;&amp;!!R.sheenColorMap,st=Me&amp;&amp;!!R.sheenRoughnessMap,jt=!!R.specularMap,Pt=!!R.specularColorMap,yn=!!R.specularIntensityMap,de=Ze&amp;&amp;!!R.transmissionMap,nt=Ze&amp;&amp;!!R.thicknessMap,Ae=!!R.gradientMap,Pe=!!R.alphaMap,ot=R.alphaTest&gt;0,et=!!R.alphaHash,Ut=!!R.extensions;let wn=pa;R.toneMapped&amp;&amp;(ue===null||ue.isXRRenderTarget===!0)&amp;&amp;(wn=n.toneMapping);const jn={shaderID:ee,shaderType:R.type,shaderName:R.name,vertexShader:ce,fragmentShader:ie,defines:R.defines,customVertexShaderID:oe,customFragmentShaderID:ae,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:g,batching:Xe,batchingColor:Xe&amp;&amp;q._colorsTexture!==null,instancing:He,instancingColor:He&amp;&amp;q.instanceColor!==null,instancingMorph:He&amp;&amp;q.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:ue===null?n.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:pr,alphaToCoverage:!!R.alphaToCoverage,map:ct,matcap:We,envMap:Ke,envMapMode:Ke&amp;&amp;j.mapping,envMapCubeUVHeight:G,aoMap:Q,lightMap:Ve,bumpMap:Le,normalMap:Fe,displacementMap:m&amp;&amp;De,emissiveMap:mt,normalMapObjectSpace:Fe&amp;&amp;R.normalMapType===jN,normalMapTangentSpace:Fe&amp;&amp;R.normalMapType===Al,metalnessMap:ze,roughnessMap:te,anisotropy:V,anisotropyMap:qe,clearcoat:pe,clearcoatMap:ht,clearcoatNormalMap:Ct,clearcoatRoughnessMap:je,dispersion:Ce,iridescence:Ue,iridescenceMap:ft,iridescenceThicknessMap:St,sheen:Me,sheenColorMap:Rt,sheenRoughnessMap:st,specularMap:jt,specularColorMap:Pt,specularIntensityMap:yn,transmission:Ze,transmissionMap:de,thicknessMap:nt,gradientMap:Ae,opaque:R.transparent===!1&amp;&amp;R.blending===Tc&amp;&amp;R.alphaToCoverage===!1,alphaMap:Pe,alphaTest:ot,alphaHash:et,combine:R.combine,mapUv:ct&amp;&amp;x(R.map.channel),aoMapUv:Q&amp;&amp;x(R.aoMap.channel),lightMapUv:Ve&amp;&amp;x(R.lightMap.channel),bumpMapUv:Le&amp;&amp;x(R.bumpMap.channel),normalMapUv:Fe&amp;&amp;x(R.normalMap.channel),displacementMapUv:De&amp;&amp;x(R.displacementMap.channel),emissiveMapUv:mt&amp;&amp;x(R.emissiveMap.channel),metalnessMapUv:ze&amp;&amp;x(R.metalnessMap.channel),roughnessMapUv:te&amp;&amp;x(R.roughnessMap.channel),anisotropyMapUv:qe&amp;&amp;x(R.anisotropyMap.channel),clearcoatMapUv:ht&amp;&amp;x(R.clearcoatMap.channel),clearcoatNormalMapUv:Ct&amp;&amp;x(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:je&amp;&amp;x(R.clearcoatRoughnessMap.channel),iridescenceMapUv:ft&amp;&amp;x(R.iridescenceMap.channel),iridescenceThicknessMapUv:St&amp;&amp;x(R.iridescenceThicknessMap.channel),sheenColorMapUv:Rt&amp;&amp;x(R.sheenColorMap.channel),sheenRoughnessMapUv:st&amp;&amp;x(R.sheenRoughnessMap.channel),specularMapUv:jt&amp;&amp;x(R.specularMap.channel),specularColorMapUv:Pt&amp;&amp;x(R.specularColorMap.channel),specularIntensityMapUv:yn&amp;&amp;x(R.specularIntensityMap.channel),transmissionMapUv:de&amp;&amp;x(R.transmissionMap.channel),thicknessMapUv:nt&amp;&amp;x(R.thicknessMap.channel),alphaMapUv:Pe&amp;&amp;x(R.alphaMap.channel),vertexTangents:!!$.attributes.tangent&amp;&amp;(Fe||V),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&amp;&amp;!!$.attributes.color&amp;&amp;$.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&amp;&amp;!!$.attributes.uv&amp;&amp;(ct||Pe),fog:!!z,useFog:R.fog===!0,fogExp2:!!z&amp;&amp;z.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:ve,skinning:q.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:le,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&amp;&amp;L.length&gt;0,shadowMapType:n.shadowMap.type,toneMapping:wn,decodeVideoTexture:ct&amp;&amp;R.map.isVideoTexture===!0&amp;&amp;Jt.getTransfer(R.map.colorSpace)===On,decodeVideoTextureEmissive:mt&amp;&amp;R.emissiveMap.isVideoTexture===!0&amp;&amp;Jt.getTransfer(R.emissiveMap.colorSpace)===On,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===wi,flipSided:R.side===Sr,useDepthPacking:R.depthPacking&gt;=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:Ut&amp;&amp;R.extensions.clipCullDistance===!0&amp;&amp;i.has(&quot;WEBGL_clip_cull_distance&quot;),extensionMultiDraw:(Ut&amp;&amp;R.extensions.multiDraw===!0||Xe)&amp;&amp;i.has(&quot;WEBGL_multi_draw&quot;),rendererExtensionParallelShaderCompile:i.has(&quot;KHR_parallel_shader_compile&quot;),customProgramCacheKey:R.customProgramCacheKey()};return jn.vertexUv1s=h.has(1),jn.vertexUv2s=h.has(2),jn.vertexUv3s=h.has(3),h.clear(),jn}function _(R){const D=[];if(R.shaderID?D.push(R.shaderID):(D.push(R.customVertexShaderID),D.push(R.customFragmentShaderID)),R.defines!==void 0)for(const L in R.defines)D.push(L),D.push(R.defines[L]);return R.isRawShaderMaterial===!1&amp;&amp;(T(D,R),w(D,R),D.push(n.outputColorSpace)),D.push(R.customProgramCacheKey),D.join()}function T(R,D){R.push(D.precision),R.push(D.outputColorSpace),R.push(D.envMapMode),R.push(D.envMapCubeUVHeight),R.push(D.mapUv),R.push(D.alphaMapUv),R.push(D.lightMapUv),R.push(D.aoMapUv),R.push(D.bumpMapUv),R.push(D.normalMapUv),R.push(D.displacementMapUv),R.push(D.emissiveMapUv),R.push(D.metalnessMapUv),R.push(D.roughnessMapUv),R.push(D.anisotropyMapUv),R.push(D.clearcoatMapUv),R.push(D.clearcoatNormalMapUv),R.push(D.clearcoatRoughnessMapUv),R.push(D.iridescenceMapUv),R.push(D.iridescenceThicknessMapUv),R.push(D.sheenColorMapUv),R.push(D.sheenRoughnessMapUv),R.push(D.specularMapUv),R.push(D.specularColorMapUv),R.push(D.specularIntensityMapUv),R.push(D.transmissionMapUv),R.push(D.thicknessMapUv),R.push(D.combine),R.push(D.fogExp2),R.push(D.sizeAttenuation),R.push(D.morphTargetsCount),R.push(D.morphAttributeCount),R.push(D.numDirLights),R.push(D.numPointLights),R.push(D.numSpotLights),R.push(D.numSpotLightMaps),R.push(D.numHemiLights),R.push(D.numRectAreaLights),R.push(D.numDirLightShadows),R.push(D.numPointLightShadows),R.push(D.numSpotLightShadows),R.push(D.numSpotLightShadowsWithMaps),R.push(D.numLightProbes),R.push(D.shadowMapType),R.push(D.toneMapping),R.push(D.numClippingPlanes),R.push(D.numClipIntersection),R.push(D.depthPacking)}function w(R,D){l.disableAll(),D.supportsVertexTextures&amp;&amp;l.enable(0),D.instancing&amp;&amp;l.enable(1),D.instancingColor&amp;&amp;l.enable(2),D.instancingMorph&amp;&amp;l.enable(3),D.matcap&amp;&amp;l.enable(4),D.envMap&amp;&amp;l.enable(5),D.normalMapObjectSpace&amp;&amp;l.enable(6),D.normalMapTangentSpace&amp;&amp;l.enable(7),D.clearcoat&amp;&amp;l.enable(8),D.iridescence&amp;&amp;l.enable(9),D.alphaTest&amp;&amp;l.enable(10),D.vertexColors&amp;&amp;l.enable(11),D.vertexAlphas&amp;&amp;l.enable(12),D.vertexUv1s&amp;&amp;l.enable(13),D.vertexUv2s&amp;&amp;l.enable(14),D.vertexUv3s&amp;&amp;l.enable(15),D.vertexTangents&amp;&amp;l.enable(16),D.anisotropy&amp;&amp;l.enable(17),D.alphaHash&amp;&amp;l.enable(18),D.batching&amp;&amp;l.enable(19),D.dispersion&amp;&amp;l.enable(20),D.batchingColor&amp;&amp;l.enable(21),R.push(l.mask),l.disableAll(),D.fog&amp;&amp;l.enable(0),D.useFog&amp;&amp;l.enable(1),D.flatShading&amp;&amp;l.enable(2),D.logarithmicDepthBuffer&amp;&amp;l.enable(3),D.reverseDepthBuffer&amp;&amp;l.enable(4),D.skinning&amp;&amp;l.enable(5),D.morphTargets&amp;&amp;l.enable(6),D.morphNormals&amp;&amp;l.enable(7),D.morphColors&amp;&amp;l.enable(8),D.premultipliedAlpha&amp;&amp;l.enable(9),D.shadowMapEnabled&amp;&amp;l.enable(10),D.doubleSided&amp;&amp;l.enable(11),D.flipSided&amp;&amp;l.enable(12),D.useDepthPacking&amp;&amp;l.enable(13),D.dithering&amp;&amp;l.enable(14),D.transmission&amp;&amp;l.enable(15),D.sheen&amp;&amp;l.enable(16),D.opaque&amp;&amp;l.enable(17),D.pointsUvs&amp;&amp;l.enable(18),D.decodeVideoTexture&amp;&amp;l.enable(19),D.decodeVideoTextureEmissive&amp;&amp;l.enable(20),D.alphaToCoverage&amp;&amp;l.enable(21),R.push(l.mask)}function S(R){const D=v[R.type];let L;if(D){const H=Ys[D];L=iD.clone(H.uniforms)}else L=R.uniforms;return L}function C(R,D){let L;for(let H=0,q=f.length;H&lt;q;H++){const z=f[H];if(z.cacheKey===D){L=z,++L.usedTimes;break}}return L===void 0&amp;&amp;(L=new CG(n,D,R,s),f.push(L)),L}function O(R){if(--R.usedTimes===0){const D=f.indexOf(R);f[D]=f[f.length-1],f.pop(),R.destroy()}}function M(R){u.remove(R)}function N(){u.dispose()}return{getParameters:b,getProgramCacheKey:_,getUniforms:S,acquireProgram:C,releaseProgram:O,releaseShaderCache:M,programs:f,dispose:N}}function IG(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let l=n.get(o);return l===void 0&amp;&amp;(l={},n.set(o,l)),l}function i(o){n.delete(o)}function r(o,l,u){n.get(o)[l]=u}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function PG(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function CC(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function RC(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(p,m,g,v,x,b){let _=n[e];return _===void 0?(_={id:p.id,object:p,geometry:m,material:g,groupOrder:v,renderOrder:p.renderOrder,z:x,group:b},n[e]=_):(_.id=p.id,_.object=p,_.geometry=m,_.material=g,_.groupOrder=v,_.renderOrder=p.renderOrder,_.z=x,_.group=b),e++,_}function l(p,m,g,v,x,b){const _=o(p,m,g,v,x,b);g.transmission&gt;0?i.push(_):g.transparent===!0?r.push(_):t.push(_)}function u(p,m,g,v,x,b){const _=o(p,m,g,v,x,b);g.transmission&gt;0?i.unshift(_):g.transparent===!0?r.unshift(_):t.unshift(_)}function h(p,m){t.length&gt;1&amp;&amp;t.sort(p||PG),i.length&gt;1&amp;&amp;i.sort(m||CC),r.length&gt;1&amp;&amp;r.sort(m||CC)}function f(){for(let p=e,m=n.length;p&lt;m;p++){const g=n[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:u,finish:f,sort:h}}function LG(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new RC,n.set(i,[o])):r&gt;=s.length?(o=new RC,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function UG(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case&quot;DirectionalLight&quot;:t={direction:new K,color:new Ye};break;case&quot;SpotLight&quot;:t={position:new K,direction:new K,color:new Ye,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case&quot;PointLight&quot;:t={position:new K,color:new Ye,distance:0,decay:0};break;case&quot;HemisphereLight&quot;:t={direction:new K,skyColor:new Ye,groundColor:new Ye};break;case&quot;RectAreaLight&quot;:t={color:new Ye,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=t,t}}}function kG(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case&quot;DirectionalLight&quot;:t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case&quot;SpotLight&quot;:t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case&quot;PointLight&quot;:t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let FG=0;function zG(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function BG(n){const e=new UG,t=kG(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h&lt;9;h++)i.probe.push(new K);const r=new K,s=new yt,o=new yt;function l(h){let f=0,p=0,m=0;for(let R=0;R&lt;9;R++)i.probe[R].set(0,0,0);let g=0,v=0,x=0,b=0,_=0,T=0,w=0,S=0,C=0,O=0,M=0;h.sort(zG);for(let R=0,D=h.length;R&lt;D;R++){const L=h[R],H=L.color,q=L.intensity,z=L.distance,$=L.shadow&amp;&amp;L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)f+=H.r*q,p+=H.g*q,m+=H.b*q;else if(L.isLightProbe){for(let P=0;P&lt;9;P++)i.probe[P].addScaledVector(L.sh.coefficients[P],q);M++}else if(L.isDirectionalLight){const P=e.get(L);if(P.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const j=L.shadow,G=t.get(L);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,i.directionalShadow[g]=G,i.directionalShadowMap[g]=$,i.directionalShadowMatrix[g]=L.shadow.matrix,T++}i.directional[g]=P,g++}else if(L.isSpotLight){const P=e.get(L);P.position.setFromMatrixPosition(L.matrixWorld),P.color.copy(H).multiplyScalar(q),P.distance=z,P.coneCos=Math.cos(L.angle),P.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),P.decay=L.decay,i.spot[x]=P;const j=L.shadow;if(L.map&amp;&amp;(i.spotLightMap[C]=L.map,C++,j.updateMatrices(L),L.castShadow&amp;&amp;O++),i.spotLightMatrix[x]=j.matrix,L.castShadow){const G=t.get(L);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,i.spotShadow[x]=G,i.spotShadowMap[x]=$,S++}x++}else if(L.isRectAreaLight){const P=e.get(L);P.color.copy(H).multiplyScalar(q),P.halfWidth.set(L.width*.5,0,0),P.halfHeight.set(0,L.height*.5,0),i.rectArea[b]=P,b++}else if(L.isPointLight){const P=e.get(L);if(P.color.copy(L.color).multiplyScalar(L.intensity),P.distance=L.distance,P.decay=L.decay,L.castShadow){const j=L.shadow,G=t.get(L);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,G.shadowCameraNear=j.camera.near,G.shadowCameraFar=j.camera.far,i.pointShadow[v]=G,i.pointShadowMap[v]=$,i.pointShadowMatrix[v]=L.shadow.matrix,w++}i.point[v]=P,v++}else if(L.isHemisphereLight){const P=e.get(L);P.skyColor.copy(L.color).multiplyScalar(q),P.groundColor.copy(L.groundColor).multiplyScalar(q),i.hemi[_]=P,_++}}b&gt;0&amp;&amp;(n.has(&quot;OES_texture_float_linear&quot;)===!0?(i.rectAreaLTC1=rt.LTC_FLOAT_1,i.rectAreaLTC2=rt.LTC_FLOAT_2):(i.rectAreaLTC1=rt.LTC_HALF_1,i.rectAreaLTC2=rt.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=p,i.ambient[2]=m;const N=i.hash;(N.directionalLength!==g||N.pointLength!==v||N.spotLength!==x||N.rectAreaLength!==b||N.hemiLength!==_||N.numDirectionalShadows!==T||N.numPointShadows!==w||N.numSpotShadows!==S||N.numSpotMaps!==C||N.numLightProbes!==M)&amp;&amp;(i.directional.length=g,i.spot.length=x,i.rectArea.length=b,i.point.length=v,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=S+C-O,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=O,i.numLightProbes=M,N.directionalLength=g,N.pointLength=v,N.spotLength=x,N.rectAreaLength=b,N.hemiLength=_,N.numDirectionalShadows=T,N.numPointShadows=w,N.numSpotShadows=S,N.numSpotMaps=C,N.numLightProbes=M,i.version=FG++)}function u(h,f){let p=0,m=0,g=0,v=0,x=0;const b=f.matrixWorldInverse;for(let _=0,T=h.length;_&lt;T;_++){const w=h[_];if(w.isDirectionalLight){const S=i.directional[p];S.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(b),p++}else if(w.isSpotLight){const S=i.spot[g];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(b),S.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(b),g++}else if(w.isRectAreaLight){const S=i.rectArea[v];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(b),o.identity(),s.copy(w.matrixWorld),s.premultiply(b),o.extractRotation(s),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),v++}else if(w.isPointLight){const S=i.point[m];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(b),m++}else if(w.isHemisphereLight){const S=i.hemi[x];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(b),x++}}}return{setup:l,setupView:u,state:i}}function OC(n){const e=new BG(n),t=[],i=[];function r(f){h.camera=f,t.length=0,i.length=0}function s(f){t.push(f)}function o(f){i.push(f)}function l(){e.setup(t)}function u(f){e.setupView(t,f)}const h={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function HG(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let l;return o===void 0?(l=new OC(n),e.set(r,[l])):s&gt;=o.length?(l=new OC(n),o.push(l)):l=o[s],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const VG=`void main() {
    gl_Position = vec4( position, 1.0 );
}`,GG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include &lt;packing&gt;
void main() {
    const float samples = float( VSM_SAMPLES );
    float mean = 0.0;
    float squared_mean = 0.0;
    float uvStride = samples &lt;= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
    float uvStart = samples &lt;= 1.0 ? 0.0 : - 1.0;
    for ( float i = 0.0; i &lt; samples; i ++ ) {
            float uvOffset = uvStart + i * uvStride;
            #ifdef HORIZONTAL_PASS
                    vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
                    mean += distribution.x;
                    squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
            #else
                    float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
                    mean += depth;
                    squared_mean += depth * depth;
            #endif
    }
    mean = mean / samples;
    squared_mean = squared_mean / samples;
    float std_dev = sqrt( squared_mean - mean * mean );
    gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jG(n,e,t){let i=new Ch;const r=new Re,s=new Re,o=new _n,l=new Dw({depthPacking:GN}),u=new Iw,h={},f=t.maxTextureSize,p={[is]:Sr,[Sr]:is,[wi]:wi},m=new Br({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Re},radius:{value:4}},vertexShader:VG,fragmentShader:GG}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const v=new It;v.setAttribute(&quot;position&quot;,new Vt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new gn(v,m),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=aw;let _=this.type;this.render=function(O,M,N){if(b.enabled===!1||b.autoUpdate===!1&amp;&amp;b.needsUpdate===!1||O.length===0)return;const R=n.getRenderTarget(),D=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),H=n.state;H.setBlending(da),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const q=_!==_o&amp;&amp;this.type===_o,z=_===_o&amp;&amp;this.type!==_o;for(let $=0,P=O.length;$&lt;P;$++){const j=O[$],G=j.shadow;if(G===void 0){console.warn(&quot;THREE.WebGLShadowMap:&quot;,j,&quot;has no shadow.&quot;);continue}if(G.autoUpdate===!1&amp;&amp;G.needsUpdate===!1)continue;r.copy(G.mapSize);const ee=G.getFrameExtents();if(r.multiply(ee),s.copy(G.mapSize),(r.x&gt;f||r.y&gt;f)&amp;&amp;(r.x&gt;f&amp;&amp;(s.x=Math.floor(f/ee.x),r.x=s.x*ee.x,G.mapSize.x=s.x),r.y&gt;f&amp;&amp;(s.y=Math.floor(f/ee.y),r.y=s.y*ee.y,G.mapSize.y=s.y)),G.map===null||q===!0||z===!0){const ne=this.type!==_o?{minFilter:Ei,magFilter:Ei}:{};G.map!==null&amp;&amp;G.map.dispose(),G.map=new As(r.x,r.y,ne),G.map.texture.name=j.name+&quot;.shadowMap&quot;,G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const F=G.getViewportCount();for(let ne=0;ne&lt;F;ne++){const le=G.getViewport(ne);o.set(s.x*le.x,s.y*le.y,s.x*le.z,s.y*le.w),H.viewport(o),G.updateMatrices(j,ne),i=G.getFrustum(),S(M,N,G.camera,j,this.type)}G.isPointLightShadow!==!0&amp;&amp;this.type===_o&amp;&amp;T(G,N),G.needsUpdate=!1}_=this.type,b.needsUpdate=!1,n.setRenderTarget(R,D,L)};function T(O,M){const N=e.update(x);m.defines.VSM_SAMPLES!==O.blurSamples&amp;&amp;(m.defines.VSM_SAMPLES=O.blurSamples,g.defines.VSM_SAMPLES=O.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),O.mapPass===null&amp;&amp;(O.mapPass=new As(r.x,r.y)),m.uniforms.shadow_pass.value=O.map.texture,m.uniforms.resolution.value=O.mapSize,m.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(M,null,N,m,x,null),g.uniforms.shadow_pass.value=O.mapPass.texture,g.uniforms.resolution.value=O.mapSize,g.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(M,null,N,g,x,null)}function w(O,M,N,R){let D=null;const L=N.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(L!==void 0)D=L;else if(D=N.isPointLight===!0?u:l,n.localClippingEnabled&amp;&amp;M.clipShadows===!0&amp;&amp;Array.isArray(M.clippingPlanes)&amp;&amp;M.clippingPlanes.length!==0||M.displacementMap&amp;&amp;M.displacementScale!==0||M.alphaMap&amp;&amp;M.alphaTest&gt;0||M.map&amp;&amp;M.alphaTest&gt;0||M.alphaToCoverage===!0){const H=D.uuid,q=M.uuid;let z=h[H];z===void 0&amp;&amp;(z={},h[H]=z);let $=z[q];$===void 0&amp;&amp;($=D.clone(),z[q]=$,M.addEventListener(&quot;dispose&quot;,C)),D=$}if(D.visible=M.visible,D.wireframe=M.wireframe,R===_o?D.side=M.shadowSide!==null?M.shadowSide:M.side:D.side=M.shadowSide!==null?M.shadowSide:p[M.side],D.alphaMap=M.alphaMap,D.alphaTest=M.alphaToCoverage===!0?.5:M.alphaTest,D.map=M.map,D.clipShadows=M.clipShadows,D.clippingPlanes=M.clippingPlanes,D.clipIntersection=M.clipIntersection,D.displacementMap=M.displacementMap,D.displacementScale=M.displacementScale,D.displacementBias=M.displacementBias,D.wireframeLinewidth=M.wireframeLinewidth,D.linewidth=M.linewidth,N.isPointLight===!0&amp;&amp;D.isMeshDistanceMaterial===!0){const H=n.properties.get(D);H.light=N}return D}function S(O,M,N,R,D){if(O.visible===!1)return;if(O.layers.test(M.layers)&amp;&amp;(O.isMesh||O.isLine||O.isPoints)&amp;&amp;(O.castShadow||O.receiveShadow&amp;&amp;D===_o)&amp;&amp;(!O.frustumCulled||i.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,O.matrixWorld);const q=e.update(O),z=O.material;if(Array.isArray(z)){const $=q.groups;for(let P=0,j=$.length;P&lt;j;P++){const G=$[P],ee=z[G.materialIndex];if(ee&amp;&amp;ee.visible){const F=w(O,ee,R,D);O.onBeforeShadow(n,O,M,N,q,F,G),n.renderBufferDirect(N,null,q,F,O,G),O.onAfterShadow(n,O,M,N,q,F,G)}}}else if(z.visible){const $=w(O,z,R,D);O.onBeforeShadow(n,O,M,N,q,$,null),n.renderBufferDirect(N,null,q,$,O,null),O.onAfterShadow(n,O,M,N,q,$,null)}}const H=O.children;for(let q=0,z=H.length;q&lt;z;q++)S(H[q],M,N,R,D)}function C(O){O.target.removeEventListener(&quot;dispose&quot;,C);for(const N in h){const R=h[N],D=O.target.uuid;D in R&amp;&amp;(R[D].dispose(),delete R[D])}}}const WG={[Yg]:Kg,[$g]:Qg,[Zg]:e0,[Oc]:Jg,[Kg]:Yg,[Qg]:$g,[e0]:Zg,[Jg]:Oc};function XG(n,e){function t(){let de=!1;const nt=new _n;let Ae=null;const Pe=new _n(0,0,0,0);return{setMask:function(ot){Ae!==ot&amp;&amp;!de&amp;&amp;(n.colorMask(ot,ot,ot,ot),Ae=ot)},setLocked:function(ot){de=ot},setClear:function(ot,et,Ut,wn,jn){jn===!0&amp;&amp;(ot*=wn,et*=wn,Ut*=wn),nt.set(ot,et,Ut,wn),Pe.equals(nt)===!1&amp;&amp;(n.clearColor(ot,et,Ut,wn),Pe.copy(nt))},reset:function(){de=!1,Ae=null,Pe.set(-1,0,0,0)}}}function i(){let de=!1,nt=!1,Ae=null,Pe=null,ot=null;return{setReversed:function(et){if(nt!==et){const Ut=e.get(&quot;EXT_clip_control&quot;);et?Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.ZERO_TO_ONE_EXT):Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.NEGATIVE_ONE_TO_ONE_EXT),nt=et;const wn=ot;ot=null,this.setClear(wn)}},getReversed:function(){return nt},setTest:function(et){et?ue(n.DEPTH_TEST):ve(n.DEPTH_TEST)},setMask:function(et){Ae!==et&amp;&amp;!de&amp;&amp;(n.depthMask(et),Ae=et)},setFunc:function(et){if(nt&amp;&amp;(et=WG[et]),Pe!==et){switch(et){case Yg:n.depthFunc(n.NEVER);break;case Kg:n.depthFunc(n.ALWAYS);break;case $g:n.depthFunc(n.LESS);break;case Oc:n.depthFunc(n.LEQUAL);break;case Zg:n.depthFunc(n.EQUAL);break;case Jg:n.depthFunc(n.GEQUAL);break;case Qg:n.depthFunc(n.GREATER);break;case e0:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Pe=et}},setLocked:function(et){de=et},setClear:function(et){ot!==et&amp;&amp;(nt&amp;&amp;(et=1-et),n.clearDepth(et),ot=et)},reset:function(){de=!1,Ae=null,Pe=null,ot=null,nt=!1}}}function r(){let de=!1,nt=null,Ae=null,Pe=null,ot=null,et=null,Ut=null,wn=null,jn=null;return{setTest:function(zt){de||(zt?ue(n.STENCIL_TEST):ve(n.STENCIL_TEST))},setMask:function(zt){nt!==zt&amp;&amp;!de&amp;&amp;(n.stencilMask(zt),nt=zt)},setFunc:function(zt,Gi,oi){(Ae!==zt||Pe!==Gi||ot!==oi)&amp;&amp;(n.stencilFunc(zt,Gi,oi),Ae=zt,Pe=Gi,ot=oi)},setOp:function(zt,Gi,oi){(et!==zt||Ut!==Gi||wn!==oi)&amp;&amp;(n.stencilOp(zt,Gi,oi),et=zt,Ut=Gi,wn=oi)},setLocked:function(zt){de=zt},setClear:function(zt){jn!==zt&amp;&amp;(n.clearStencil(zt),jn=zt)},reset:function(){de=!1,nt=null,Ae=null,Pe=null,ot=null,et=null,Ut=null,wn=null,jn=null}}}const s=new t,o=new i,l=new r,u=new WeakMap,h=new WeakMap;let f={},p={},m=new WeakMap,g=[],v=null,x=!1,b=null,_=null,T=null,w=null,S=null,C=null,O=null,M=new Ye(0,0,0),N=0,R=!1,D=null,L=null,H=null,q=null,z=null;const $=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,j=0;const G=n.getParameter(n.VERSION);G.indexOf(&quot;WebGL&quot;)!==-1?(j=parseFloat(/^WebGL (\d)/.exec(G)[1]),P=j&gt;=1):G.indexOf(&quot;OpenGL ES&quot;)!==-1&amp;&amp;(j=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),P=j&gt;=2);let ee=null,F={};const ne=n.getParameter(n.SCISSOR_BOX),le=n.getParameter(n.VIEWPORT),ce=new _n().fromArray(ne),ie=new _n().fromArray(le);function oe(de,nt,Ae,Pe){const ot=new Uint8Array(4),et=n.createTexture();n.bindTexture(de,et),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ut=0;Ut&lt;Ae;Ut++)de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?n.texImage3D(nt,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,ot):n.texImage2D(nt+Ut,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ot);return et}const ae={};ae[n.TEXTURE_2D]=oe(n.TEXTURE_2D,n.TEXTURE_2D,1),ae[n.TEXTURE_CUBE_MAP]=oe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ae[n.TEXTURE_2D_ARRAY]=oe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ae[n.TEXTURE_3D]=oe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),l.setClear(0),ue(n.DEPTH_TEST),o.setFunc(Oc),Le(!1),Fe(oS),ue(n.CULL_FACE),Q(da);function ue(de){f[de]!==!0&amp;&amp;(n.enable(de),f[de]=!0)}function ve(de){f[de]!==!1&amp;&amp;(n.disable(de),f[de]=!1)}function He(de,nt){return p[de]!==nt?(n.bindFramebuffer(de,nt),p[de]=nt,de===n.DRAW_FRAMEBUFFER&amp;&amp;(p[n.FRAMEBUFFER]=nt),de===n.FRAMEBUFFER&amp;&amp;(p[n.DRAW_FRAMEBUFFER]=nt),!0):!1}function Xe(de,nt){let Ae=g,Pe=!1;if(de){Ae=m.get(nt),Ae===void 0&amp;&amp;(Ae=[],m.set(nt,Ae));const ot=de.textures;if(Ae.length!==ot.length||Ae[0]!==n.COLOR_ATTACHMENT0){for(let et=0,Ut=ot.length;et&lt;Ut;et++)Ae[et]=n.COLOR_ATTACHMENT0+et;Ae.length=ot.length,Pe=!0}}else Ae[0]!==n.BACK&amp;&amp;(Ae[0]=n.BACK,Pe=!0);Pe&amp;&amp;n.drawBuffers(Ae)}function ct(de){return v!==de?(n.useProgram(de),v=de,!0):!1}const We={[ul]:n.FUNC_ADD,[hN]:n.FUNC_SUBTRACT,[fN]:n.FUNC_REVERSE_SUBTRACT};We[dN]=n.MIN,We[pN]=n.MAX;const Ke={[mN]:n.ZERO,[gN]:n.ONE,[yN]:n.SRC_COLOR,[Xg]:n.SRC_ALPHA,[wN]:n.SRC_ALPHA_SATURATE,[xN]:n.DST_COLOR,[vN]:n.DST_ALPHA,[_N]:n.ONE_MINUS_SRC_COLOR,[qg]:n.ONE_MINUS_SRC_ALPHA,[SN]:n.ONE_MINUS_DST_COLOR,[bN]:n.ONE_MINUS_DST_ALPHA,[EN]:n.CONSTANT_COLOR,[TN]:n.ONE_MINUS_CONSTANT_COLOR,[MN]:n.CONSTANT_ALPHA,[AN]:n.ONE_MINUS_CONSTANT_ALPHA};function Q(de,nt,Ae,Pe,ot,et,Ut,wn,jn,zt){if(de===da){x===!0&amp;&amp;(ve(n.BLEND),x=!1);return}if(x===!1&amp;&amp;(ue(n.BLEND),x=!0),de!==uN){if(de!==b||zt!==R){if((_!==ul||S!==ul)&amp;&amp;(n.blendEquation(n.FUNC_ADD),_=ul,S=ul),zt)switch(de){case Tc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case aS:n.blendFunc(n.ONE,n.ONE);break;case lS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case cS:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error(&quot;THREE.WebGLState: Invalid blending: &quot;,de);break}else switch(de){case Tc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case aS:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case lS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case cS:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error(&quot;THREE.WebGLState: Invalid blending: &quot;,de);break}T=null,w=null,C=null,O=null,M.set(0,0,0),N=0,b=de,R=zt}return}ot=ot||nt,et=et||Ae,Ut=Ut||Pe,(nt!==_||ot!==S)&amp;&amp;(n.blendEquationSeparate(We[nt],We[ot]),_=nt,S=ot),(Ae!==T||Pe!==w||et!==C||Ut!==O)&amp;&amp;(n.blendFuncSeparate(Ke[Ae],Ke[Pe],Ke[et],Ke[Ut]),T=Ae,w=Pe,C=et,O=Ut),(wn.equals(M)===!1||jn!==N)&amp;&amp;(n.blendColor(wn.r,wn.g,wn.b,jn),M.copy(wn),N=jn),b=de,R=!1}function Ve(de,nt){de.side===wi?ve(n.CULL_FACE):ue(n.CULL_FACE);let Ae=de.side===Sr;nt&amp;&amp;(Ae=!Ae),Le(Ae),de.blending===Tc&amp;&amp;de.transparent===!1?Q(da):Q(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),o.setFunc(de.depthFunc),o.setTest(de.depthTest),o.setMask(de.depthWrite),s.setMask(de.colorWrite);const Pe=de.stencilWrite;l.setTest(Pe),Pe&amp;&amp;(l.setMask(de.stencilWriteMask),l.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),l.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),mt(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?ue(n.SAMPLE_ALPHA_TO_COVERAGE):ve(n.SAMPLE_ALPHA_TO_COVERAGE)}function Le(de){D!==de&amp;&amp;(de?n.frontFace(n.CW):n.frontFace(n.CCW),D=de)}function Fe(de){de!==aN?(ue(n.CULL_FACE),de!==L&amp;&amp;(de===oS?n.cullFace(n.BACK):de===lN?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ve(n.CULL_FACE),L=de}function De(de){de!==H&amp;&amp;(P&amp;&amp;n.lineWidth(de),H=de)}function mt(de,nt,Ae){de?(ue(n.POLYGON_OFFSET_FILL),(q!==nt||z!==Ae)&amp;&amp;(n.polygonOffset(nt,Ae),q=nt,z=Ae)):ve(n.POLYGON_OFFSET_FILL)}function ze(de){de?ue(n.SCISSOR_TEST):ve(n.SCISSOR_TEST)}function te(de){de===void 0&amp;&amp;(de=n.TEXTURE0+$-1),ee!==de&amp;&amp;(n.activeTexture(de),ee=de)}function V(de,nt,Ae){Ae===void 0&amp;&amp;(ee===null?Ae=n.TEXTURE0+$-1:Ae=ee);let Pe=F[Ae];Pe===void 0&amp;&amp;(Pe={type:void 0,texture:void 0},F[Ae]=Pe),(Pe.type!==de||Pe.texture!==nt)&amp;&amp;(ee!==Ae&amp;&amp;(n.activeTexture(Ae),ee=Ae),n.bindTexture(de,nt||ae[de]),Pe.type=de,Pe.texture=nt)}function pe(){const de=F[ee];de!==void 0&amp;&amp;de.type!==void 0&amp;&amp;(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function Ce(){try{n.compressedTexImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Ue(){try{n.compressedTexImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Me(){try{n.texSubImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Ze(){try{n.texSubImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function qe(){try{n.compressedTexSubImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function ht(){try{n.compressedTexSubImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Ct(){try{n.texStorage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function je(){try{n.texStorage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function ft(){try{n.texImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function St(){try{n.texImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Rt(de){ce.equals(de)===!1&amp;&amp;(n.scissor(de.x,de.y,de.z,de.w),ce.copy(de))}function st(de){ie.equals(de)===!1&amp;&amp;(n.viewport(de.x,de.y,de.z,de.w),ie.copy(de))}function jt(de,nt){let Ae=h.get(nt);Ae===void 0&amp;&amp;(Ae=new WeakMap,h.set(nt,Ae));let Pe=Ae.get(de);Pe===void 0&amp;&amp;(Pe=n.getUniformBlockIndex(nt,de.name),Ae.set(de,Pe))}function Pt(de,nt){const Pe=h.get(nt).get(de);u.get(nt)!==Pe&amp;&amp;(n.uniformBlockBinding(nt,Pe,de.__bindingPointIndex),u.set(nt,Pe))}function yn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},ee=null,F={},p={},m=new WeakMap,g=[],v=null,x=!1,b=null,_=null,T=null,w=null,S=null,C=null,O=null,M=new Ye(0,0,0),N=0,R=!1,D=null,L=null,H=null,q=null,z=null,ce.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),l.reset()}return{buffers:{color:s,depth:o,stencil:l},enable:ue,disable:ve,bindFramebuffer:He,drawBuffers:Xe,useProgram:ct,setBlending:Q,setMaterial:Ve,setFlipSided:Le,setCullFace:Fe,setLineWidth:De,setPolygonOffset:mt,setScissorTest:ze,activeTexture:te,bindTexture:V,unbindTexture:pe,compressedTexImage2D:Ce,compressedTexImage3D:Ue,texImage2D:ft,texImage3D:St,updateUBOMapping:jt,uniformBlockBinding:Pt,texStorage2D:Ct,texStorage3D:je,texSubImage2D:Me,texSubImage3D:Ze,compressedTexSubImage2D:qe,compressedTexSubImage3D:ht,scissor:Rt,viewport:st,reset:yn}}function qG(n,e,t,i,r,s,o){const l=e.has(&quot;WEBGL_multisampled_render_to_texture&quot;)?e.get(&quot;WEBGL_multisampled_render_to_texture&quot;):null,u=typeof navigator&gt;&quot;u&quot;?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Re,f=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas&lt;&quot;u&quot;&amp;&amp;new OffscreenCanvas(1,1).getContext(&quot;2d&quot;)!==null}catch{}function v(te,V){return g?new OffscreenCanvas(te,V):Td(&quot;canvas&quot;)}function x(te,V,pe){let Ce=1;const Ue=ze(te);if((Ue.width&gt;pe||Ue.height&gt;pe)&amp;&amp;(Ce=pe/Math.max(Ue.width,Ue.height)),Ce&lt;1)if(typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;te instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;te instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;te instanceof ImageBitmap||typeof VideoFrame&lt;&quot;u&quot;&amp;&amp;te instanceof VideoFrame){const Me=Math.floor(Ce*Ue.width),Ze=Math.floor(Ce*Ue.height);p===void 0&amp;&amp;(p=v(Me,Ze));const qe=V?v(Me,Ze):p;return qe.width=Me,qe.height=Ze,qe.getContext(&quot;2d&quot;).drawImage(te,0,0,Me,Ze),console.warn(&quot;THREE.WebGLRenderer: Texture has been resized from (&quot;+Ue.width+&quot;x&quot;+Ue.height+&quot;) to (&quot;+Me+&quot;x&quot;+Ze+&quot;).&quot;),qe}else return&quot;data&quot;in te&amp;&amp;console.warn(&quot;THREE.WebGLRenderer: Image in DataTexture is too big (&quot;+Ue.width+&quot;x&quot;+Ue.height+&quot;).&quot;),te;return te}function b(te){return te.generateMipmaps}function _(te){n.generateMipmap(te)}function T(te){return te.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?n.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(te,V,pe,Ce,Ue=!1){if(te!==null){if(n[te]!==void 0)return n[te];console.warn(&quot;THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format &#x27;&quot;+te+&quot;&#x27;&quot;)}let Me=V;if(V===n.RED&amp;&amp;(pe===n.FLOAT&amp;&amp;(Me=n.R32F),pe===n.HALF_FLOAT&amp;&amp;(Me=n.R16F),pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.R8)),V===n.RED_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.R8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.R16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.R32UI),pe===n.BYTE&amp;&amp;(Me=n.R8I),pe===n.SHORT&amp;&amp;(Me=n.R16I),pe===n.INT&amp;&amp;(Me=n.R32I)),V===n.RG&amp;&amp;(pe===n.FLOAT&amp;&amp;(Me=n.RG32F),pe===n.HALF_FLOAT&amp;&amp;(Me=n.RG16F),pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RG8)),V===n.RG_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RG8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.RG16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.RG32UI),pe===n.BYTE&amp;&amp;(Me=n.RG8I),pe===n.SHORT&amp;&amp;(Me=n.RG16I),pe===n.INT&amp;&amp;(Me=n.RG32I)),V===n.RGB_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RGB8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.RGB16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.RGB32UI),pe===n.BYTE&amp;&amp;(Me=n.RGB8I),pe===n.SHORT&amp;&amp;(Me=n.RGB16I),pe===n.INT&amp;&amp;(Me=n.RGB32I)),V===n.RGBA_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RGBA8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.RGBA16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.RGBA32UI),pe===n.BYTE&amp;&amp;(Me=n.RGBA8I),pe===n.SHORT&amp;&amp;(Me=n.RGBA16I),pe===n.INT&amp;&amp;(Me=n.RGBA32I)),V===n.RGB&amp;&amp;pe===n.UNSIGNED_INT_5_9_9_9_REV&amp;&amp;(Me=n.RGB9_E5),V===n.RGBA){const Ze=Ue?Sd:Jt.getTransfer(Ce);pe===n.FLOAT&amp;&amp;(Me=n.RGBA32F),pe===n.HALF_FLOAT&amp;&amp;(Me=n.RGBA16F),pe===n.UNSIGNED_BYTE&amp;&amp;(Me=Ze===On?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&amp;&amp;(Me=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&amp;&amp;(Me=n.RGB5_A1)}return(Me===n.R16F||Me===n.R32F||Me===n.RG16F||Me===n.RG32F||Me===n.RGBA16F||Me===n.RGBA32F)&amp;&amp;e.get(&quot;EXT_color_buffer_float&quot;),Me}function S(te,V){let pe;return te?V===null||V===va||V===lh?pe=n.DEPTH24_STENCIL8:V===kr?pe=n.DEPTH32F_STENCIL8:V===ah&amp;&amp;(pe=n.DEPTH24_STENCIL8,console.warn(&quot;DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.&quot;)):V===null||V===va||V===lh?pe=n.DEPTH_COMPONENT24:V===kr?pe=n.DEPTH_COMPONENT32F:V===ah&amp;&amp;(pe=n.DEPTH_COMPONENT16),pe}function C(te,V){return b(te)===!0||te.isFramebufferTexture&amp;&amp;te.minFilter!==Ei&amp;&amp;te.minFilter!==fi?Math.log2(Math.max(V.width,V.height))+1:te.mipmaps!==void 0&amp;&amp;te.mipmaps.length&gt;0?te.mipmaps.length:te.isCompressedTexture&amp;&amp;Array.isArray(te.image)?V.mipmaps.length:1}function O(te){const V=te.target;V.removeEventListener(&quot;dispose&quot;,O),N(V),V.isVideoTexture&amp;&amp;f.delete(V)}function M(te){const V=te.target;V.removeEventListener(&quot;dispose&quot;,M),D(V)}function N(te){const V=i.get(te);if(V.__webglInit===void 0)return;const pe=te.source,Ce=m.get(pe);if(Ce){const Ue=Ce[V.__cacheKey];Ue.usedTimes--,Ue.usedTimes===0&amp;&amp;R(te),Object.keys(Ce).length===0&amp;&amp;m.delete(pe)}i.remove(te)}function R(te){const V=i.get(te);n.deleteTexture(V.__webglTexture);const pe=te.source,Ce=m.get(pe);delete Ce[V.__cacheKey],o.memory.textures--}function D(te){const V=i.get(te);if(te.depthTexture&amp;&amp;(te.depthTexture.dispose(),i.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let Ce=0;Ce&lt;6;Ce++){if(Array.isArray(V.__webglFramebuffer[Ce]))for(let Ue=0;Ue&lt;V.__webglFramebuffer[Ce].length;Ue++)n.deleteFramebuffer(V.__webglFramebuffer[Ce][Ue]);else n.deleteFramebuffer(V.__webglFramebuffer[Ce]);V.__webglDepthbuffer&amp;&amp;n.deleteRenderbuffer(V.__webglDepthbuffer[Ce])}else{if(Array.isArray(V.__webglFramebuffer))for(let Ce=0;Ce&lt;V.__webglFramebuffer.length;Ce++)n.deleteFramebuffer(V.__webglFramebuffer[Ce]);else n.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&amp;&amp;n.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&amp;&amp;n.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let Ce=0;Ce&lt;V.__webglColorRenderbuffer.length;Ce++)V.__webglColorRenderbuffer[Ce]&amp;&amp;n.deleteRenderbuffer(V.__webglColorRenderbuffer[Ce]);V.__webglDepthRenderbuffer&amp;&amp;n.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const pe=te.textures;for(let Ce=0,Ue=pe.length;Ce&lt;Ue;Ce++){const Me=i.get(pe[Ce]);Me.__webglTexture&amp;&amp;(n.deleteTexture(Me.__webglTexture),o.memory.textures--),i.remove(pe[Ce])}i.remove(te)}let L=0;function H(){L=0}function q(){const te=L;return te&gt;=r.maxTextures&amp;&amp;console.warn(&quot;THREE.WebGLTextures: Trying to use &quot;+te+&quot; texture units while this GPU supports only &quot;+r.maxTextures),L+=1,te}function z(te){const V=[];return V.push(te.wrapS),V.push(te.wrapT),V.push(te.wrapR||0),V.push(te.magFilter),V.push(te.minFilter),V.push(te.anisotropy),V.push(te.internalFormat),V.push(te.format),V.push(te.type),V.push(te.generateMipmaps),V.push(te.premultiplyAlpha),V.push(te.flipY),V.push(te.unpackAlignment),V.push(te.colorSpace),V.join()}function $(te,V){const pe=i.get(te);if(te.isVideoTexture&amp;&amp;De(te),te.isRenderTargetTexture===!1&amp;&amp;te.version&gt;0&amp;&amp;pe.__version!==te.version){const Ce=te.image;if(Ce===null)console.warn(&quot;THREE.WebGLRenderer: Texture marked for update but no image data found.&quot;);else if(Ce.complete===!1)console.warn(&quot;THREE.WebGLRenderer: Texture marked for update but image is incomplete&quot;);else{ie(pe,te,V);return}}t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+V)}function P(te,V){const pe=i.get(te);if(te.version&gt;0&amp;&amp;pe.__version!==te.version){ie(pe,te,V);return}t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+V)}function j(te,V){const pe=i.get(te);if(te.version&gt;0&amp;&amp;pe.__version!==te.version){ie(pe,te,V);return}t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+V)}function G(te,V){const pe=i.get(te);if(te.version&gt;0&amp;&amp;pe.__version!==te.version){oe(pe,te,V);return}t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+V)}const ee={[Ts]:n.REPEAT,[sr]:n.CLAMP_TO_EDGE,[oh]:n.MIRRORED_REPEAT},F={[Ei]:n.NEAREST,[ay]:n.NEAREST_MIPMAP_NEAREST,[vc]:n.NEAREST_MIPMAP_LINEAR,[fi]:n.LINEAR,[th]:n.LINEAR_MIPMAP_NEAREST,[ts]:n.LINEAR_MIPMAP_LINEAR},ne={[WN]:n.NEVER,[ZN]:n.ALWAYS,[XN]:n.LESS,[yw]:n.LEQUAL,[qN]:n.EQUAL,[$N]:n.GEQUAL,[YN]:n.GREATER,[KN]:n.NOTEQUAL};function le(te,V){if(V.type===kr&amp;&amp;e.has(&quot;OES_texture_float_linear&quot;)===!1&amp;&amp;(V.magFilter===fi||V.magFilter===th||V.magFilter===vc||V.magFilter===ts||V.minFilter===fi||V.minFilter===th||V.minFilter===vc||V.minFilter===ts)&amp;&amp;console.warn(&quot;THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.&quot;),n.texParameteri(te,n.TEXTURE_WRAP_S,ee[V.wrapS]),n.texParameteri(te,n.TEXTURE_WRAP_T,ee[V.wrapT]),(te===n.TEXTURE_3D||te===n.TEXTURE_2D_ARRAY)&amp;&amp;n.texParameteri(te,n.TEXTURE_WRAP_R,ee[V.wrapR]),n.texParameteri(te,n.TEXTURE_MAG_FILTER,F[V.magFilter]),n.texParameteri(te,n.TEXTURE_MIN_FILTER,F[V.minFilter]),V.compareFunction&amp;&amp;(n.texParameteri(te,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(te,n.TEXTURE_COMPARE_FUNC,ne[V.compareFunction])),e.has(&quot;EXT_texture_filter_anisotropic&quot;)===!0){if(V.magFilter===Ei||V.minFilter!==vc&amp;&amp;V.minFilter!==ts||V.type===kr&amp;&amp;e.has(&quot;OES_texture_float_linear&quot;)===!1)return;if(V.anisotropy&gt;1||i.get(V).__currentAnisotropy){const pe=e.get(&quot;EXT_texture_filter_anisotropic&quot;);n.texParameterf(te,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,r.getMaxAnisotropy())),i.get(V).__currentAnisotropy=V.anisotropy}}}function ce(te,V){let pe=!1;te.__webglInit===void 0&amp;&amp;(te.__webglInit=!0,V.addEventListener(&quot;dispose&quot;,O));const Ce=V.source;let Ue=m.get(Ce);Ue===void 0&amp;&amp;(Ue={},m.set(Ce,Ue));const Me=z(V);if(Me!==te.__cacheKey){Ue[Me]===void 0&amp;&amp;(Ue[Me]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),Ue[Me].usedTimes++;const Ze=Ue[te.__cacheKey];Ze!==void 0&amp;&amp;(Ue[te.__cacheKey].usedTimes--,Ze.usedTimes===0&amp;&amp;R(V)),te.__cacheKey=Me,te.__webglTexture=Ue[Me].texture}return pe}function ie(te,V,pe){let Ce=n.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&amp;&amp;(Ce=n.TEXTURE_2D_ARRAY),V.isData3DTexture&amp;&amp;(Ce=n.TEXTURE_3D);const Ue=ce(te,V),Me=V.source;t.bindTexture(Ce,te.__webglTexture,n.TEXTURE0+pe);const Ze=i.get(Me);if(Me.version!==Ze.__version||Ue===!0){t.activeTexture(n.TEXTURE0+pe);const qe=Jt.getPrimaries(Jt.workingColorSpace),ht=V.colorSpace===ia?null:Jt.getPrimaries(V.colorSpace),Ct=V.colorSpace===ia||qe===ht?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);let je=x(V.image,!1,r.maxTextureSize);je=mt(V,je);const ft=s.convert(V.format,V.colorSpace),St=s.convert(V.type);let Rt=w(V.internalFormat,ft,St,V.colorSpace,V.isVideoTexture);le(Ce,V);let st;const jt=V.mipmaps,Pt=V.isVideoTexture!==!0,yn=Ze.__version===void 0||Ue===!0,de=Me.dataReady,nt=C(V,je);if(V.isDepthTexture)Rt=S(V.format===uh,V.type),yn&amp;&amp;(Pt?t.texStorage2D(n.TEXTURE_2D,1,Rt,je.width,je.height):t.texImage2D(n.TEXTURE_2D,0,Rt,je.width,je.height,0,ft,St,null));else if(V.isDataTexture)if(jt.length&gt;0){Pt&amp;&amp;yn&amp;&amp;t.texStorage2D(n.TEXTURE_2D,nt,Rt,jt[0].width,jt[0].height);for(let Ae=0,Pe=jt.length;Ae&lt;Pe;Ae++)st=jt[Ae],Pt?de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,st.width,st.height,ft,St,st.data):t.texImage2D(n.TEXTURE_2D,Ae,Rt,st.width,st.height,0,ft,St,st.data);V.generateMipmaps=!1}else Pt?(yn&amp;&amp;t.texStorage2D(n.TEXTURE_2D,nt,Rt,je.width,je.height),de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,0,0,0,je.width,je.height,ft,St,je.data)):t.texImage2D(n.TEXTURE_2D,0,Rt,je.width,je.height,0,ft,St,je.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){Pt&amp;&amp;yn&amp;&amp;t.texStorage3D(n.TEXTURE_2D_ARRAY,nt,Rt,jt[0].width,jt[0].height,je.depth);for(let Ae=0,Pe=jt.length;Ae&lt;Pe;Ae++)if(st=jt[Ae],V.format!==dr)if(ft!==null)if(Pt){if(de)if(V.layerUpdates.size&gt;0){const ot=vS(st.width,st.height,V.format,V.type);for(const et of V.layerUpdates){const Ut=st.data.subarray(et*ot/st.data.BYTES_PER_ELEMENT,(et+1)*ot/st.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,et,st.width,st.height,1,ft,Ut)}V.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,st.width,st.height,je.depth,ft,st.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ae,Rt,st.width,st.height,je.depth,0,st.data,0,0);else console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()&quot;);else Pt?de&amp;&amp;t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,st.width,st.height,je.depth,ft,St,st.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ae,Rt,st.width,st.height,je.depth,0,ft,St,st.data)}else{Pt&amp;&amp;yn&amp;&amp;t.texStorage2D(n.TEXTURE_2D,nt,Rt,jt[0].width,jt[0].height);for(let Ae=0,Pe=jt.length;Ae&lt;Pe;Ae++)st=jt[Ae],V.format!==dr?ft!==null?Pt?de&amp;&amp;t.compressedTexSubImage2D(n.TEXTURE_2D,Ae,0,0,st.width,st.height,ft,st.data):t.compressedTexImage2D(n.TEXTURE_2D,Ae,Rt,st.width,st.height,0,st.data):console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()&quot;):Pt?de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,st.width,st.height,ft,St,st.data):t.texImage2D(n.TEXTURE_2D,Ae,Rt,st.width,st.height,0,ft,St,st.data)}else if(V.isDataArrayTexture)if(Pt){if(yn&amp;&amp;t.texStorage3D(n.TEXTURE_2D_ARRAY,nt,Rt,je.width,je.height,je.depth),de)if(V.layerUpdates.size&gt;0){const Ae=vS(je.width,je.height,V.format,V.type);for(const Pe of V.layerUpdates){const ot=je.data.subarray(Pe*Ae/je.data.BYTES_PER_ELEMENT,(Pe+1)*Ae/je.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Pe,je.width,je.height,1,ft,St,ot)}V.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,je.width,je.height,je.depth,ft,St,je.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Rt,je.width,je.height,je.depth,0,ft,St,je.data);else if(V.isData3DTexture)Pt?(yn&amp;&amp;t.texStorage3D(n.TEXTURE_3D,nt,Rt,je.width,je.height,je.depth),de&amp;&amp;t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,je.width,je.height,je.depth,ft,St,je.data)):t.texImage3D(n.TEXTURE_3D,0,Rt,je.width,je.height,je.depth,0,ft,St,je.data);else if(V.isFramebufferTexture){if(yn)if(Pt)t.texStorage2D(n.TEXTURE_2D,nt,Rt,je.width,je.height);else{let Ae=je.width,Pe=je.height;for(let ot=0;ot&lt;nt;ot++)t.texImage2D(n.TEXTURE_2D,ot,Rt,Ae,Pe,0,ft,St,null),Ae&gt;&gt;=1,Pe&gt;&gt;=1}}else if(jt.length&gt;0){if(Pt&amp;&amp;yn){const Ae=ze(jt[0]);t.texStorage2D(n.TEXTURE_2D,nt,Rt,Ae.width,Ae.height)}for(let Ae=0,Pe=jt.length;Ae&lt;Pe;Ae++)st=jt[Ae],Pt?de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,ft,St,st):t.texImage2D(n.TEXTURE_2D,Ae,Rt,ft,St,st);V.generateMipmaps=!1}else if(Pt){if(yn){const Ae=ze(je);t.texStorage2D(n.TEXTURE_2D,nt,Rt,Ae.width,Ae.height)}de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,0,0,0,ft,St,je)}else t.texImage2D(n.TEXTURE_2D,0,Rt,ft,St,je);b(V)&amp;&amp;_(Ce),Ze.__version=Me.version,V.onUpdate&amp;&amp;V.onUpdate(V)}te.__version=V.version}function oe(te,V,pe){if(V.image.length!==6)return;const Ce=ce(te,V),Ue=V.source;t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+pe);const Me=i.get(Ue);if(Ue.version!==Me.__version||Ce===!0){t.activeTexture(n.TEXTURE0+pe);const Ze=Jt.getPrimaries(Jt.workingColorSpace),qe=V.colorSpace===ia?null:Jt.getPrimaries(V.colorSpace),ht=V.colorSpace===ia||Ze===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);const Ct=V.isCompressedTexture||V.image[0].isCompressedTexture,je=V.image[0]&amp;&amp;V.image[0].isDataTexture,ft=[];for(let Pe=0;Pe&lt;6;Pe++)!Ct&amp;&amp;!je?ft[Pe]=x(V.image[Pe],!0,r.maxCubemapSize):ft[Pe]=je?V.image[Pe].image:V.image[Pe],ft[Pe]=mt(V,ft[Pe]);const St=ft[0],Rt=s.convert(V.format,V.colorSpace),st=s.convert(V.type),jt=w(V.internalFormat,Rt,st,V.colorSpace),Pt=V.isVideoTexture!==!0,yn=Me.__version===void 0||Ce===!0,de=Ue.dataReady;let nt=C(V,St);le(n.TEXTURE_CUBE_MAP,V);let Ae;if(Ct){Pt&amp;&amp;yn&amp;&amp;t.texStorage2D(n.TEXTURE_CUBE_MAP,nt,jt,St.width,St.height);for(let Pe=0;Pe&lt;6;Pe++){Ae=ft[Pe].mipmaps;for(let ot=0;ot&lt;Ae.length;ot++){const et=Ae[ot];V.format!==dr?Rt!==null?Pt?de&amp;&amp;t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ot,0,0,et.width,et.height,Rt,et.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ot,jt,et.width,et.height,0,et.data):console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()&quot;):Pt?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ot,0,0,et.width,et.height,Rt,st,et.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ot,jt,et.width,et.height,0,Rt,st,et.data)}}}else{if(Ae=V.mipmaps,Pt&amp;&amp;yn){Ae.length&gt;0&amp;&amp;nt++;const Pe=ze(ft[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,nt,jt,Pe.width,Pe.height)}for(let Pe=0;Pe&lt;6;Pe++)if(je){Pt?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,ft[Pe].width,ft[Pe].height,Rt,st,ft[Pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,jt,ft[Pe].width,ft[Pe].height,0,Rt,st,ft[Pe].data);for(let ot=0;ot&lt;Ae.length;ot++){const Ut=Ae[ot].image[Pe].image;Pt?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ot+1,0,0,Ut.width,Ut.height,Rt,st,Ut.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ot+1,jt,Ut.width,Ut.height,0,Rt,st,Ut.data)}}else{Pt?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,Rt,st,ft[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,jt,Rt,st,ft[Pe]);for(let ot=0;ot&lt;Ae.length;ot++){const et=Ae[ot];Pt?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ot+1,0,0,Rt,st,et.image[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,ot+1,jt,Rt,st,et.image[Pe])}}}b(V)&amp;&amp;_(n.TEXTURE_CUBE_MAP),Me.__version=Ue.version,V.onUpdate&amp;&amp;V.onUpdate(V)}te.__version=V.version}function ae(te,V,pe,Ce,Ue,Me){const Ze=s.convert(pe.format,pe.colorSpace),qe=s.convert(pe.type),ht=w(pe.internalFormat,Ze,qe,pe.colorSpace),Ct=i.get(V),je=i.get(pe);if(je.__renderTarget=V,!Ct.__hasExternalTextures){const ft=Math.max(1,V.width&gt;&gt;Me),St=Math.max(1,V.height&gt;&gt;Me);Ue===n.TEXTURE_3D||Ue===n.TEXTURE_2D_ARRAY?t.texImage3D(Ue,Me,ht,ft,St,V.depth,0,Ze,qe,null):t.texImage2D(Ue,Me,ht,ft,St,0,Ze,qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,te),Fe(V)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ce,Ue,je.__webglTexture,0,Le(V)):(Ue===n.TEXTURE_2D||Ue&gt;=n.TEXTURE_CUBE_MAP_POSITIVE_X&amp;&amp;Ue&lt;=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&amp;&amp;n.framebufferTexture2D(n.FRAMEBUFFER,Ce,Ue,je.__webglTexture,Me),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(te,V,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,te),V.depthBuffer){const Ce=V.depthTexture,Ue=Ce&amp;&amp;Ce.isDepthTexture?Ce.type:null,Me=S(V.stencilBuffer,Ue),Ze=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=Le(V);Fe(V)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,Me,V.width,V.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Me,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,Me,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,te)}else{const Ce=V.textures;for(let Ue=0;Ue&lt;Ce.length;Ue++){const Me=Ce[Ue],Ze=s.convert(Me.format,Me.colorSpace),qe=s.convert(Me.type),ht=w(Me.internalFormat,Ze,qe,Me.colorSpace),Ct=Le(V);pe&amp;&amp;Fe(V)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,ht,V.width,V.height):Fe(V)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ct,ht,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,ht,V.width,V.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ve(te,V){if(V&amp;&amp;V.isWebGLCubeRenderTarget)throw new Error(&quot;Depth Texture with cube render targets is not supported&quot;);if(t.bindFramebuffer(n.FRAMEBUFFER,te),!(V.depthTexture&amp;&amp;V.depthTexture.isDepthTexture))throw new Error(&quot;renderTarget.depthTexture must be an instance of THREE.DepthTexture&quot;);const Ce=i.get(V.depthTexture);Ce.__renderTarget=V,(!Ce.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&amp;&amp;(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),$(V.depthTexture,0);const Ue=Ce.__webglTexture,Me=Le(V);if(V.depthTexture.format===ch)Fe(V)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0);else if(V.depthTexture.format===uh)Fe(V)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0);else throw new Error(&quot;Unknown depthTexture format&quot;)}function He(te){const V=i.get(te),pe=te.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==te.depthTexture){const Ce=te.depthTexture;if(V.__depthDisposeCallback&amp;&amp;V.__depthDisposeCallback(),Ce){const Ue=()=&gt;{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,Ce.removeEventListener(&quot;dispose&quot;,Ue)};Ce.addEventListener(&quot;dispose&quot;,Ue),V.__depthDisposeCallback=Ue}V.__boundDepthTexture=Ce}if(te.depthTexture&amp;&amp;!V.__autoAllocateDepthBuffer){if(pe)throw new Error(&quot;target.depthTexture not supported in Cube render targets&quot;);const Ce=te.texture.mipmaps;Ce&amp;&amp;Ce.length&gt;0?ve(V.__webglFramebuffer[0],te):ve(V.__webglFramebuffer,te)}else if(pe){V.__webglDepthbuffer=[];for(let Ce=0;Ce&lt;6;Ce++)if(t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer[Ce]),V.__webglDepthbuffer[Ce]===void 0)V.__webglDepthbuffer[Ce]=n.createRenderbuffer(),ue(V.__webglDepthbuffer[Ce],te,!1);else{const Ue=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Me=V.__webglDepthbuffer[Ce];n.bindRenderbuffer(n.RENDERBUFFER,Me),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,Me)}}else{const Ce=te.texture.mipmaps;if(Ce&amp;&amp;Ce.length&gt;0?t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=n.createRenderbuffer(),ue(V.__webglDepthbuffer,te,!1);else{const Ue=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Me=V.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Me),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,Me)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Xe(te,V,pe){const Ce=i.get(te);V!==void 0&amp;&amp;ae(Ce.__webglFramebuffer,te,te.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),pe!==void 0&amp;&amp;He(te)}function ct(te){const V=te.texture,pe=i.get(te),Ce=i.get(V);te.addEventListener(&quot;dispose&quot;,M);const Ue=te.textures,Me=te.isWebGLCubeRenderTarget===!0,Ze=Ue.length&gt;1;if(Ze||(Ce.__webglTexture===void 0&amp;&amp;(Ce.__webglTexture=n.createTexture()),Ce.__version=V.version,o.memory.textures++),Me){pe.__webglFramebuffer=[];for(let qe=0;qe&lt;6;qe++)if(V.mipmaps&amp;&amp;V.mipmaps.length&gt;0){pe.__webglFramebuffer[qe]=[];for(let ht=0;ht&lt;V.mipmaps.length;ht++)pe.__webglFramebuffer[qe][ht]=n.createFramebuffer()}else pe.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(V.mipmaps&amp;&amp;V.mipmaps.length&gt;0){pe.__webglFramebuffer=[];for(let qe=0;qe&lt;V.mipmaps.length;qe++)pe.__webglFramebuffer[qe]=n.createFramebuffer()}else pe.__webglFramebuffer=n.createFramebuffer();if(Ze)for(let qe=0,ht=Ue.length;qe&lt;ht;qe++){const Ct=i.get(Ue[qe]);Ct.__webglTexture===void 0&amp;&amp;(Ct.__webglTexture=n.createTexture(),o.memory.textures++)}if(te.samples&gt;0&amp;&amp;Fe(te)===!1){pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let qe=0;qe&lt;Ue.length;qe++){const ht=Ue[qe];pe.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[qe]);const Ct=s.convert(ht.format,ht.colorSpace),je=s.convert(ht.type),ft=w(ht.internalFormat,Ct,je,ht.colorSpace,te.isXRRenderTarget===!0),St=Le(te);n.renderbufferStorageMultisample(n.RENDERBUFFER,St,ft,te.width,te.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,pe.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),te.depthBuffer&amp;&amp;(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),ue(pe.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Me){t.bindTexture(n.TEXTURE_CUBE_MAP,Ce.__webglTexture),le(n.TEXTURE_CUBE_MAP,V);for(let qe=0;qe&lt;6;qe++)if(V.mipmaps&amp;&amp;V.mipmaps.length&gt;0)for(let ht=0;ht&lt;V.mipmaps.length;ht++)ae(pe.__webglFramebuffer[qe][ht],te,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ht);else ae(pe.__webglFramebuffer[qe],te,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);b(V)&amp;&amp;_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ze){for(let qe=0,ht=Ue.length;qe&lt;ht;qe++){const Ct=Ue[qe],je=i.get(Ct);t.bindTexture(n.TEXTURE_2D,je.__webglTexture),le(n.TEXTURE_2D,Ct),ae(pe.__webglFramebuffer,te,Ct,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),b(Ct)&amp;&amp;_(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&amp;&amp;(qe=te.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,Ce.__webglTexture),le(qe,V),V.mipmaps&amp;&amp;V.mipmaps.length&gt;0)for(let ht=0;ht&lt;V.mipmaps.length;ht++)ae(pe.__webglFramebuffer[ht],te,V,n.COLOR_ATTACHMENT0,qe,ht);else ae(pe.__webglFramebuffer,te,V,n.COLOR_ATTACHMENT0,qe,0);b(V)&amp;&amp;_(qe),t.unbindTexture()}te.depthBuffer&amp;&amp;He(te)}function We(te){const V=te.textures;for(let pe=0,Ce=V.length;pe&lt;Ce;pe++){const Ue=V[pe];if(b(Ue)){const Me=T(te),Ze=i.get(Ue).__webglTexture;t.bindTexture(Me,Ze),_(Me),t.unbindTexture()}}}const Ke=[],Q=[];function Ve(te){if(te.samples&gt;0){if(Fe(te)===!1){const V=te.textures,pe=te.width,Ce=te.height;let Ue=n.COLOR_BUFFER_BIT;const Me=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=i.get(te),qe=V.length&gt;1;if(qe)for(let Ct=0;Ct&lt;V.length;Ct++)t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer);const ht=te.texture.mipmaps;ht&amp;&amp;ht.length&gt;0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let Ct=0;Ct&lt;V.length;Ct++){if(te.resolveDepthBuffer&amp;&amp;(te.depthBuffer&amp;&amp;(Ue|=n.DEPTH_BUFFER_BIT),te.stencilBuffer&amp;&amp;te.resolveStencilBuffer&amp;&amp;(Ue|=n.STENCIL_BUFFER_BIT)),qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[Ct]);const je=i.get(V[Ct]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,je,0)}n.blitFramebuffer(0,0,pe,Ce,0,0,pe,Ce,Ue,n.NEAREST),u===!0&amp;&amp;(Ke.length=0,Q.length=0,Ke.push(n.COLOR_ATTACHMENT0+Ct),te.depthBuffer&amp;&amp;te.resolveDepthBuffer===!1&amp;&amp;(Ke.push(Me),Q.push(Me),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ke))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let Ct=0;Ct&lt;V.length;Ct++){t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[Ct]);const je=i.get(V[Ct]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.TEXTURE_2D,je,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}else if(te.depthBuffer&amp;&amp;te.resolveDepthBuffer===!1&amp;&amp;u){const V=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[V])}}}function Le(te){return Math.min(r.maxSamples,te.samples)}function Fe(te){const V=i.get(te);return te.samples&gt;0&amp;&amp;e.has(&quot;WEBGL_multisampled_render_to_texture&quot;)===!0&amp;&amp;V.__useRenderToTexture!==!1}function De(te){const V=o.render.frame;f.get(te)!==V&amp;&amp;(f.set(te,V),te.update())}function mt(te,V){const pe=te.colorSpace,Ce=te.format,Ue=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||pe!==pr&amp;&amp;pe!==ia&amp;&amp;(Jt.getTransfer(pe)===On?(Ce!==dr||Ue!==zr)&amp;&amp;console.warn(&quot;THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.&quot;):console.error(&quot;THREE.WebGLTextures: Unsupported texture color space:&quot;,pe)),V}function ze(te){return typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;te instanceof HTMLImageElement?(h.width=te.naturalWidth||te.width,h.height=te.naturalHeight||te.height):typeof VideoFrame&lt;&quot;u&quot;&amp;&amp;te instanceof VideoFrame?(h.width=te.displayWidth,h.height=te.displayHeight):(h.width=te.width,h.height=te.height),h}this.allocateTextureUnit=q,this.resetTextureUnits=H,this.setTexture2D=$,this.setTexture2DArray=P,this.setTexture3D=j,this.setTextureCube=G,this.rebindTextures=Xe,this.setupRenderTarget=ct,this.updateRenderTargetMipmap=We,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=He,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=Fe}function QD(n,e){function t(i,r=ia){let s;const o=Jt.getTransfer(r);if(i===zr)return n.UNSIGNED_BYTE;if(i===cy)return n.UNSIGNED_SHORT_4_4_4_4;if(i===uy)return n.UNSIGNED_SHORT_5_5_5_1;if(i===uw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===lw)return n.BYTE;if(i===cw)return n.SHORT;if(i===ah)return n.UNSIGNED_SHORT;if(i===ly)return n.INT;if(i===va)return n.UNSIGNED_INT;if(i===kr)return n.FLOAT;if(i===Mh)return n.HALF_FLOAT;if(i===hw)return n.ALPHA;if(i===fw)return n.RGB;if(i===dr)return n.RGBA;if(i===ch)return n.DEPTH_COMPONENT;if(i===uh)return n.DEPTH_STENCIL;if(i===Xd)return n.RED;if(i===qd)return n.RED_INTEGER;if(i===dw)return n.RG;if(i===hy)return n.RG_INTEGER;if(i===fy)return n.RGBA_INTEGER;if(i===sd||i===od||i===ad||i===ld)if(o===On)if(s=e.get(&quot;WEBGL_compressed_texture_s3tc_srgb&quot;),s!==null){if(i===sd)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===od)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===ad)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===ld)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get(&quot;WEBGL_compressed_texture_s3tc&quot;),s!==null){if(i===sd)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===od)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===ad)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===ld)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===t0||i===n0||i===i0||i===r0)if(s=e.get(&quot;WEBGL_compressed_texture_pvrtc&quot;),s!==null){if(i===t0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===n0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===i0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===r0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===s0||i===o0||i===a0)if(s=e.get(&quot;WEBGL_compressed_texture_etc&quot;),s!==null){if(i===s0||i===o0)return o===On?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===a0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===l0||i===c0||i===u0||i===h0||i===f0||i===d0||i===p0||i===m0||i===g0||i===y0||i===_0||i===v0||i===b0||i===x0)if(s=e.get(&quot;WEBGL_compressed_texture_astc&quot;),s!==null){if(i===l0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===c0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===u0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===h0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===f0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===d0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===p0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===m0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===g0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===y0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===_0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===v0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===b0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===x0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===cd||i===S0||i===w0)if(s=e.get(&quot;EXT_texture_compression_bptc&quot;),s!==null){if(i===cd)return o===On?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===S0)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===w0)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===pw||i===E0||i===T0||i===M0)if(s=e.get(&quot;EXT_texture_compression_rgtc&quot;),s!==null){if(i===cd)return s.COMPRESSED_RED_RGTC1_EXT;if(i===E0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===T0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===M0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===lh?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const YG=`
void main() {

    gl_Position = vec4( position, 1.0 );

}`,KG=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

    vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

    if ( coord.x &gt;= 1.0 ) {

            gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

    } else {

            gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

    }

}`;class $G{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Kn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&amp;&amp;(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&amp;&amp;this.mesh===null){const t=e.cameras[0].viewport,i=new Br({vertexShader:YG,fragmentShader:KG,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new gn(new Oh(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ZG extends Ao{constructor(e,t){super();const i=this;let r=null,s=1,o=null,l=&quot;local-floor&quot;,u=1,h=null,f=null,p=null,m=null,g=null,v=null;const x=new $G,b=t.getContextAttributes();let _=null,T=null;const w=[],S=[],C=new Re;let O=null;const M=new Yn;M.viewport=new _n;const N=new Yn;N.viewport=new _n;const R=[M,N],D=new zD;let L=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let oe=w[ie];return oe===void 0&amp;&amp;(oe=new Ig,w[ie]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(ie){let oe=w[ie];return oe===void 0&amp;&amp;(oe=new Ig,w[ie]=oe),oe.getGripSpace()},this.getHand=function(ie){let oe=w[ie];return oe===void 0&amp;&amp;(oe=new Ig,w[ie]=oe),oe.getHandSpace()};function q(ie){const oe=S.indexOf(ie.inputSource);if(oe===-1)return;const ae=w[oe];ae!==void 0&amp;&amp;(ae.update(ie.inputSource,ie.frame,h||o),ae.dispatchEvent({type:ie.type,data:ie.inputSource}))}function z(){r.removeEventListener(&quot;select&quot;,q),r.removeEventListener(&quot;selectstart&quot;,q),r.removeEventListener(&quot;selectend&quot;,q),r.removeEventListener(&quot;squeeze&quot;,q),r.removeEventListener(&quot;squeezestart&quot;,q),r.removeEventListener(&quot;squeezeend&quot;,q),r.removeEventListener(&quot;end&quot;,z),r.removeEventListener(&quot;inputsourceschange&quot;,$);for(let ie=0;ie&lt;w.length;ie++){const oe=S[ie];oe!==null&amp;&amp;(S[ie]=null,w[ie].disconnect(oe))}L=null,H=null,x.reset(),e.setRenderTarget(_),g=null,m=null,p=null,r=null,T=null,ce.stop(),i.isPresenting=!1,e.setPixelRatio(O),e.setSize(C.width,C.height,!1),i.dispatchEvent({type:&quot;sessionend&quot;})}this.setFramebufferScaleFactor=function(ie){s=ie,i.isPresenting===!0&amp;&amp;console.warn(&quot;THREE.WebXRManager: Cannot change framebuffer scale while presenting.&quot;)},this.setReferenceSpaceType=function(ie){l=ie,i.isPresenting===!0&amp;&amp;console.warn(&quot;THREE.WebXRManager: Cannot change reference space type while presenting.&quot;)},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(ie){h=ie},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return p},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(ie){if(r=ie,r!==null){if(_=e.getRenderTarget(),r.addEventListener(&quot;select&quot;,q),r.addEventListener(&quot;selectstart&quot;,q),r.addEventListener(&quot;selectend&quot;,q),r.addEventListener(&quot;squeeze&quot;,q),r.addEventListener(&quot;squeezestart&quot;,q),r.addEventListener(&quot;squeezeend&quot;,q),r.addEventListener(&quot;end&quot;,z),r.addEventListener(&quot;inputsourceschange&quot;,$),b.xrCompatible!==!0&amp;&amp;await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(C),typeof XRWebGLBinding&lt;&quot;u&quot;&amp;&amp;&quot;createProjectionLayer&quot;in XRWebGLBinding.prototype){let ae=null,ue=null,ve=null;b.depth&amp;&amp;(ve=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ae=b.stencil?uh:ch,ue=b.stencil?lh:va);const He={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:s};p=new XRWebGLBinding(r,t),m=p.createProjectionLayer(He),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),T=new As(m.textureWidth,m.textureHeight,{format:dr,type:zr,depthTexture:new Ty(m.textureWidth,m.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const ae={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,ae),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),T=new As(g.framebufferWidth,g.framebufferHeight,{format:dr,type:zr,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(u),h=null,o=await r.requestReferenceSpace(l),ce.setContext(r),ce.start(),i.isPresenting=!0,i.dispatchEvent({type:&quot;sessionstart&quot;})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function $(ie){for(let oe=0;oe&lt;ie.removed.length;oe++){const ae=ie.removed[oe],ue=S.indexOf(ae);ue&gt;=0&amp;&amp;(S[ue]=null,w[ue].disconnect(ae))}for(let oe=0;oe&lt;ie.added.length;oe++){const ae=ie.added[oe];let ue=S.indexOf(ae);if(ue===-1){for(let He=0;He&lt;w.length;He++)if(He&gt;=S.length){S.push(ae),ue=He;break}else if(S[He]===null){S[He]=ae,ue=He;break}if(ue===-1)break}const ve=w[ue];ve&amp;&amp;ve.connect(ae)}}const P=new K,j=new K;function G(ie,oe,ae){P.setFromMatrixPosition(oe.matrixWorld),j.setFromMatrixPosition(ae.matrixWorld);const ue=P.distanceTo(j),ve=oe.projectionMatrix.elements,He=ae.projectionMatrix.elements,Xe=ve[14]/(ve[10]-1),ct=ve[14]/(ve[10]+1),We=(ve[9]+1)/ve[5],Ke=(ve[9]-1)/ve[5],Q=(ve[8]-1)/ve[0],Ve=(He[8]+1)/He[0],Le=Xe*Q,Fe=Xe*Ve,De=ue/(-Q+Ve),mt=De*-Q;if(oe.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(mt),ie.translateZ(De),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),ve[10]===-1)ie.projectionMatrix.copy(oe.projectionMatrix),ie.projectionMatrixInverse.copy(oe.projectionMatrixInverse);else{const ze=Xe+De,te=ct+De,V=Le-mt,pe=Fe+(ue-mt),Ce=We*ct/te*ze,Ue=Ke*ct/te*ze;ie.projectionMatrix.makePerspective(V,pe,Ce,Ue,ze,te),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function ee(ie,oe){oe===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(oe.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(r===null)return;let oe=ie.near,ae=ie.far;x.texture!==null&amp;&amp;(x.depthNear&gt;0&amp;&amp;(oe=x.depthNear),x.depthFar&gt;0&amp;&amp;(ae=x.depthFar)),D.near=N.near=M.near=oe,D.far=N.far=M.far=ae,(L!==D.near||H!==D.far)&amp;&amp;(r.updateRenderState({depthNear:D.near,depthFar:D.far}),L=D.near,H=D.far),M.layers.mask=ie.layers.mask|2,N.layers.mask=ie.layers.mask|4,D.layers.mask=M.layers.mask|N.layers.mask;const ue=ie.parent,ve=D.cameras;ee(D,ue);for(let He=0;He&lt;ve.length;He++)ee(ve[He],ue);ve.length===2?G(D,M,N):D.projectionMatrix.copy(M.projectionMatrix),F(ie,D,ue)};function F(ie,oe,ae){ae===null?ie.matrix.copy(oe.matrixWorld):(ie.matrix.copy(ae.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(oe.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(oe.projectionMatrix),ie.projectionMatrixInverse.copy(oe.projectionMatrixInverse),ie.isPerspectiveCamera&amp;&amp;(ie.fov=dh*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(m===null&amp;&amp;g===null))return u},this.setFoveation=function(ie){u=ie,m!==null&amp;&amp;(m.fixedFoveation=ie),g!==null&amp;&amp;g.fixedFoveation!==void 0&amp;&amp;(g.fixedFoveation=ie)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(D)};let ne=null;function le(ie,oe){if(f=oe.getViewerPose(h||o),v=oe,f!==null){const ae=f.views;g!==null&amp;&amp;(e.setRenderTargetFramebuffer(T,g.framebuffer),e.setRenderTarget(T));let ue=!1;ae.length!==D.cameras.length&amp;&amp;(D.cameras.length=0,ue=!0);for(let Xe=0;Xe&lt;ae.length;Xe++){const ct=ae[Xe];let We=null;if(g!==null)We=g.getViewport(ct);else{const Q=p.getViewSubImage(m,ct);We=Q.viewport,Xe===0&amp;&amp;(e.setRenderTargetTextures(T,Q.colorTexture,Q.depthStencilTexture),e.setRenderTarget(T))}let Ke=R[Xe];Ke===void 0&amp;&amp;(Ke=new Yn,Ke.layers.enable(Xe),Ke.viewport=new _n,R[Xe]=Ke),Ke.matrix.fromArray(ct.transform.matrix),Ke.matrix.decompose(Ke.position,Ke.quaternion,Ke.scale),Ke.projectionMatrix.fromArray(ct.projectionMatrix),Ke.projectionMatrixInverse.copy(Ke.projectionMatrix).invert(),Ke.viewport.set(We.x,We.y,We.width,We.height),Xe===0&amp;&amp;(D.matrix.copy(Ke.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),ue===!0&amp;&amp;D.cameras.push(Ke)}const ve=r.enabledFeatures;if(ve&amp;&amp;ve.includes(&quot;depth-sensing&quot;)&amp;&amp;r.depthUsage==&quot;gpu-optimized&quot;&amp;&amp;p){const Xe=p.getDepthInformation(ae[0]);Xe&amp;&amp;Xe.isValid&amp;&amp;Xe.texture&amp;&amp;x.init(e,Xe,r.renderState)}}for(let ae=0;ae&lt;w.length;ae++){const ue=S[ae],ve=w[ae];ue!==null&amp;&amp;ve!==void 0&amp;&amp;ve.update(ue,oe,h||o)}ne&amp;&amp;ne(ie,oe),oe.detectedPlanes&amp;&amp;i.dispatchEvent({type:&quot;planesdetected&quot;,data:oe}),v=null}const ce=new YD;ce.setAnimationLoop(le),this.setAnimationLoop=function(ie){ne=ie},this.dispose=function(){}}}const ac=new Er,JG=new yt;function QG(n,e){function t(b,_){b.matrixAutoUpdate===!0&amp;&amp;b.updateMatrix(),_.value.copy(b.matrix)}function i(b,_){_.color.getRGB(b.fogColor.value,nD(n)),_.isFog?(b.fogNear.value=_.near,b.fogFar.value=_.far):_.isFogExp2&amp;&amp;(b.fogDensity.value=_.density)}function r(b,_,T,w,S){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(b,_):_.isMeshToonMaterial?(s(b,_),p(b,_)):_.isMeshPhongMaterial?(s(b,_),f(b,_)):_.isMeshStandardMaterial?(s(b,_),m(b,_),_.isMeshPhysicalMaterial&amp;&amp;g(b,_,S)):_.isMeshMatcapMaterial?(s(b,_),v(b,_)):_.isMeshDepthMaterial?s(b,_):_.isMeshDistanceMaterial?(s(b,_),x(b,_)):_.isMeshNormalMaterial?s(b,_):_.isLineBasicMaterial?(o(b,_),_.isLineDashedMaterial&amp;&amp;l(b,_)):_.isPointsMaterial?u(b,_,T,w):_.isSpriteMaterial?h(b,_):_.isShadowMaterial?(b.color.value.copy(_.color),b.opacity.value=_.opacity):_.isShaderMaterial&amp;&amp;(_.uniformsNeedUpdate=!1)}function s(b,_){b.opacity.value=_.opacity,_.color&amp;&amp;b.diffuse.value.copy(_.color),_.emissive&amp;&amp;b.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&amp;&amp;(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.bumpMap&amp;&amp;(b.bumpMap.value=_.bumpMap,t(_.bumpMap,b.bumpMapTransform),b.bumpScale.value=_.bumpScale,_.side===Sr&amp;&amp;(b.bumpScale.value*=-1)),_.normalMap&amp;&amp;(b.normalMap.value=_.normalMap,t(_.normalMap,b.normalMapTransform),b.normalScale.value.copy(_.normalScale),_.side===Sr&amp;&amp;b.normalScale.value.negate()),_.displacementMap&amp;&amp;(b.displacementMap.value=_.displacementMap,t(_.displacementMap,b.displacementMapTransform),b.displacementScale.value=_.displacementScale,b.displacementBias.value=_.displacementBias),_.emissiveMap&amp;&amp;(b.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,b.emissiveMapTransform)),_.specularMap&amp;&amp;(b.specularMap.value=_.specularMap,t(_.specularMap,b.specularMapTransform)),_.alphaTest&gt;0&amp;&amp;(b.alphaTest.value=_.alphaTest);const T=e.get(_),w=T.envMap,S=T.envMapRotation;w&amp;&amp;(b.envMap.value=w,ac.copy(S),ac.x*=-1,ac.y*=-1,ac.z*=-1,w.isCubeTexture&amp;&amp;w.isRenderTargetTexture===!1&amp;&amp;(ac.y*=-1,ac.z*=-1),b.envMapRotation.value.setFromMatrix4(JG.makeRotationFromEuler(ac)),b.flipEnvMap.value=w.isCubeTexture&amp;&amp;w.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=_.reflectivity,b.ior.value=_.ior,b.refractionRatio.value=_.refractionRatio),_.lightMap&amp;&amp;(b.lightMap.value=_.lightMap,b.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,b.lightMapTransform)),_.aoMap&amp;&amp;(b.aoMap.value=_.aoMap,b.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,b.aoMapTransform))}function o(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.mapTransform))}function l(b,_){b.dashSize.value=_.dashSize,b.totalSize.value=_.dashSize+_.gapSize,b.scale.value=_.scale}function u(b,_,T,w){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.size.value=_.size*T,b.scale.value=w*.5,_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.uvTransform)),_.alphaMap&amp;&amp;(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest&gt;0&amp;&amp;(b.alphaTest.value=_.alphaTest)}function h(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.rotation.value=_.rotation,_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&amp;&amp;(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest&gt;0&amp;&amp;(b.alphaTest.value=_.alphaTest)}function f(b,_){b.specular.value.copy(_.specular),b.shininess.value=Math.max(_.shininess,1e-4)}function p(b,_){_.gradientMap&amp;&amp;(b.gradientMap.value=_.gradientMap)}function m(b,_){b.metalness.value=_.metalness,_.metalnessMap&amp;&amp;(b.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,b.metalnessMapTransform)),b.roughness.value=_.roughness,_.roughnessMap&amp;&amp;(b.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,b.roughnessMapTransform)),_.envMap&amp;&amp;(b.envMapIntensity.value=_.envMapIntensity)}function g(b,_,T){b.ior.value=_.ior,_.sheen&gt;0&amp;&amp;(b.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),b.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&amp;&amp;(b.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,b.sheenColorMapTransform)),_.sheenRoughnessMap&amp;&amp;(b.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,b.sheenRoughnessMapTransform))),_.clearcoat&gt;0&amp;&amp;(b.clearcoat.value=_.clearcoat,b.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&amp;&amp;(b.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,b.clearcoatMapTransform)),_.clearcoatRoughnessMap&amp;&amp;(b.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&amp;&amp;(b.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Sr&amp;&amp;b.clearcoatNormalScale.value.negate())),_.dispersion&gt;0&amp;&amp;(b.dispersion.value=_.dispersion),_.iridescence&gt;0&amp;&amp;(b.iridescence.value=_.iridescence,b.iridescenceIOR.value=_.iridescenceIOR,b.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&amp;&amp;(b.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,b.iridescenceMapTransform)),_.iridescenceThicknessMap&amp;&amp;(b.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),_.transmission&gt;0&amp;&amp;(b.transmission.value=_.transmission,b.transmissionSamplerMap.value=T.texture,b.transmissionSamplerSize.value.set(T.width,T.height),_.transmissionMap&amp;&amp;(b.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,b.transmissionMapTransform)),b.thickness.value=_.thickness,_.thicknessMap&amp;&amp;(b.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=_.attenuationDistance,b.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy&gt;0&amp;&amp;(b.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&amp;&amp;(b.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=_.specularIntensity,b.specularColor.value.copy(_.specularColor),_.specularColorMap&amp;&amp;(b.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,b.specularColorMapTransform)),_.specularIntensityMap&amp;&amp;(b.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,b.specularIntensityMapTransform))}function v(b,_){_.matcap&amp;&amp;(b.matcap.value=_.matcap)}function x(b,_){const T=e.get(_).light;b.referencePosition.value.setFromMatrixPosition(T.matrixWorld),b.nearDistance.value=T.shadow.camera.near,b.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function e8(n,e,t,i){let r={},s={},o=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(T,w){const S=w.program;i.uniformBlockBinding(T,S)}function h(T,w){let S=r[T.id];S===void 0&amp;&amp;(v(T),S=f(T),r[T.id]=S,T.addEventListener(&quot;dispose&quot;,b));const C=w.program;i.updateUBOMapping(T,C);const O=e.render.frame;s[T.id]!==O&amp;&amp;(m(T),s[T.id]=O)}function f(T){const w=p();T.__bindingPointIndex=w;const S=n.createBuffer(),C=T.__size,O=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,C,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,S),S}function p(){for(let T=0;T&lt;l;T++)if(o.indexOf(T)===-1)return o.push(T),T;return console.error(&quot;THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.&quot;),0}function m(T){const w=r[T.id],S=T.uniforms,C=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let O=0,M=S.length;O&lt;M;O++){const N=Array.isArray(S[O])?S[O]:[S[O]];for(let R=0,D=N.length;R&lt;D;R++){const L=N[R];if(g(L,O,R,C)===!0){const H=L.__offset,q=Array.isArray(L.value)?L.value:[L.value];let z=0;for(let $=0;$&lt;q.length;$++){const P=q[$],j=x(P);typeof P==&quot;number&quot;||typeof P==&quot;boolean&quot;?(L.__data[0]=P,n.bufferSubData(n.UNIFORM_BUFFER,H+z,L.__data)):P.isMatrix3?(L.__data[0]=P.elements[0],L.__data[1]=P.elements[1],L.__data[2]=P.elements[2],L.__data[3]=0,L.__data[4]=P.elements[3],L.__data[5]=P.elements[4],L.__data[6]=P.elements[5],L.__data[7]=0,L.__data[8]=P.elements[6],L.__data[9]=P.elements[7],L.__data[10]=P.elements[8],L.__data[11]=0):(P.toArray(L.__data,z),z+=j.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,L.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(T,w,S,C){const O=T.value,M=w+&quot;_&quot;+S;if(C[M]===void 0)return typeof O==&quot;number&quot;||typeof O==&quot;boolean&quot;?C[M]=O:C[M]=O.clone(),!0;{const N=C[M];if(typeof O==&quot;number&quot;||typeof O==&quot;boolean&quot;){if(N!==O)return C[M]=O,!0}else if(N.equals(O)===!1)return N.copy(O),!0}return!1}function v(T){const w=T.uniforms;let S=0;const C=16;for(let M=0,N=w.length;M&lt;N;M++){const R=Array.isArray(w[M])?w[M]:[w[M]];for(let D=0,L=R.length;D&lt;L;D++){const H=R[D],q=Array.isArray(H.value)?H.value:[H.value];for(let z=0,$=q.length;z&lt;$;z++){const P=q[z],j=x(P),G=S%C,ee=G%j.boundary,F=G+ee;S+=ee,F!==0&amp;&amp;C-F&lt;j.storage&amp;&amp;(S+=C-F),H.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=S,S+=j.storage}}}const O=S%C;return O&gt;0&amp;&amp;(S+=C-O),T.__size=S,T.__cache={},this}function x(T){const w={boundary:0,storage:0};return typeof T==&quot;number&quot;||typeof T==&quot;boolean&quot;?(w.boundary=4,w.storage=4):T.isVector2?(w.boundary=8,w.storage=8):T.isVector3||T.isColor?(w.boundary=16,w.storage=12):T.isVector4?(w.boundary=16,w.storage=16):T.isMatrix3?(w.boundary=48,w.storage=48):T.isMatrix4?(w.boundary=64,w.storage=64):T.isTexture?console.warn(&quot;THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.&quot;):console.warn(&quot;THREE.WebGLRenderer: Unsupported uniform value type.&quot;,T),w}function b(T){const w=T.target;w.removeEventListener(&quot;dispose&quot;,b);const S=o.indexOf(w.__bindingPointIndex);o.splice(S,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function _(){for(const T in r)n.deleteBuffer(r[T]);o=[],r={},s={}}return{bind:u,update:h,dispose:_}}class eI{constructor(e={}){const{canvas:t=QN(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:f=&quot;default&quot;,failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext&lt;&quot;u&quot;&amp;&amp;i instanceof WebGLRenderingContext)throw new Error(&quot;THREE.WebGLRenderer: WebGL 1 is not supported since r163.&quot;);g=i.getContextAttributes().alpha}else g=o;const v=new Uint32Array(4),x=new Int32Array(4);let b=null,_=null;const T=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=pa,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const S=this;let C=!1;this._outputColorSpace=Dn;let O=0,M=0,N=null,R=-1,D=null;const L=new _n,H=new _n;let q=null;const z=new Ye(0);let $=0,P=t.width,j=t.height,G=1,ee=null,F=null;const ne=new _n(0,0,P,j),le=new _n(0,0,P,j);let ce=!1;const ie=new Ch;let oe=!1,ae=!1;const ue=new yt,ve=new yt,He=new K,Xe=new _n,ct={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let We=!1;function Ke(){return N===null?G:1}let Q=i;function Ve(Y,fe){return t.getContext(Y,fe)}try{const Y={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:p};if(&quot;setAttribute&quot;in t&amp;&amp;t.setAttribute(&quot;data-engine&quot;,`three.js r${sy}`),t.addEventListener(&quot;webglcontextlost&quot;,Pe,!1),t.addEventListener(&quot;webglcontextrestored&quot;,ot,!1),t.addEventListener(&quot;webglcontextcreationerror&quot;,et,!1),Q===null){const fe=&quot;webgl2&quot;;if(Q=Ve(fe,Y),Q===null)throw Ve(fe)?new Error(&quot;Error creating WebGL context with your selected attributes.&quot;):new Error(&quot;Error creating WebGL context.&quot;)}}catch(Y){throw console.error(&quot;THREE.WebGLRenderer: &quot;+Y.message),Y}let Le,Fe,De,mt,ze,te,V,pe,Ce,Ue,Me,Ze,qe,ht,Ct,je,ft,St,Rt,st,jt,Pt,yn,de;function nt(){Le=new f5(Q),Le.init(),Pt=new QD(Q,Le),Fe=new s5(Q,Le,e,Pt),De=new XG(Q,Le),Fe.reverseDepthBuffer&amp;&amp;m&amp;&amp;De.buffers.depth.setReversed(!0),mt=new m5(Q),ze=new IG,te=new qG(Q,Le,De,ze,Fe,Pt,mt),V=new a5(S),pe=new h5(S),Ce=new x4(Q),yn=new i5(Q,Ce),Ue=new d5(Q,Ce,mt,yn),Me=new y5(Q,Ue,Ce,mt),Rt=new g5(Q,Fe,te),je=new o5(ze),Ze=new DG(S,V,pe,Le,Fe,yn,je),qe=new QG(S,ze),ht=new LG,Ct=new HG(Le),St=new n5(S,V,pe,De,Me,g,u),ft=new jG(S,Me,Fe),de=new e8(Q,mt,Fe,De),st=new r5(Q,Le,mt),jt=new p5(Q,Le,mt),mt.programs=Ze.programs,S.capabilities=Fe,S.extensions=Le,S.properties=ze,S.renderLists=ht,S.shadowMap=ft,S.state=De,S.info=mt}nt();const Ae=new ZG(S,Q);this.xr=Ae,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const Y=Le.get(&quot;WEBGL_lose_context&quot;);Y&amp;&amp;Y.loseContext()},this.forceContextRestore=function(){const Y=Le.get(&quot;WEBGL_lose_context&quot;);Y&amp;&amp;Y.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(Y){Y!==void 0&amp;&amp;(G=Y,this.setSize(P,j,!1))},this.getSize=function(Y){return Y.set(P,j)},this.setSize=function(Y,fe,be=!0){if(Ae.isPresenting){console.warn(&quot;THREE.WebGLRenderer: Can&#x27;t change size while VR device is presenting.&quot;);return}P=Y,j=fe,t.width=Math.floor(Y*G),t.height=Math.floor(fe*G),be===!0&amp;&amp;(t.style.width=Y+&quot;px&quot;,t.style.height=fe+&quot;px&quot;),this.setViewport(0,0,Y,fe)},this.getDrawingBufferSize=function(Y){return Y.set(P*G,j*G).floor()},this.setDrawingBufferSize=function(Y,fe,be){P=Y,j=fe,G=be,t.width=Math.floor(Y*be),t.height=Math.floor(fe*be),this.setViewport(0,0,Y,fe)},this.getCurrentViewport=function(Y){return Y.copy(L)},this.getViewport=function(Y){return Y.copy(ne)},this.setViewport=function(Y,fe,be,we){Y.isVector4?ne.set(Y.x,Y.y,Y.z,Y.w):ne.set(Y,fe,be,we),De.viewport(L.copy(ne).multiplyScalar(G).round())},this.getScissor=function(Y){return Y.copy(le)},this.setScissor=function(Y,fe,be,we){Y.isVector4?le.set(Y.x,Y.y,Y.z,Y.w):le.set(Y,fe,be,we),De.scissor(H.copy(le).multiplyScalar(G).round())},this.getScissorTest=function(){return ce},this.setScissorTest=function(Y){De.setScissorTest(ce=Y)},this.setOpaqueSort=function(Y){ee=Y},this.setTransparentSort=function(Y){F=Y},this.getClearColor=function(Y){return Y.copy(St.getClearColor())},this.setClearColor=function(){St.setClearColor(...arguments)},this.getClearAlpha=function(){return St.getClearAlpha()},this.setClearAlpha=function(){St.setClearAlpha(...arguments)},this.clear=function(Y=!0,fe=!0,be=!0){let we=0;if(Y){let me=!1;if(N!==null){const Ge=N.texture.format;me=Ge===fy||Ge===hy||Ge===qd}if(me){const Ge=N.texture.type,Je=Ge===zr||Ge===va||Ge===ah||Ge===lh||Ge===cy||Ge===uy,tt=St.getClearColor(),dt=St.getClearAlpha(),Ot=tt.r,Et=tt.g,bt=tt.b;Je?(v[0]=Ot,v[1]=Et,v[2]=bt,v[3]=dt,Q.clearBufferuiv(Q.COLOR,0,v)):(x[0]=Ot,x[1]=Et,x[2]=bt,x[3]=dt,Q.clearBufferiv(Q.COLOR,0,x))}else we|=Q.COLOR_BUFFER_BIT}fe&amp;&amp;(we|=Q.DEPTH_BUFFER_BIT),be&amp;&amp;(we|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener(&quot;webglcontextlost&quot;,Pe,!1),t.removeEventListener(&quot;webglcontextrestored&quot;,ot,!1),t.removeEventListener(&quot;webglcontextcreationerror&quot;,et,!1),St.dispose(),ht.dispose(),Ct.dispose(),ze.dispose(),V.dispose(),pe.dispose(),Me.dispose(),yn.dispose(),de.dispose(),Ze.dispose(),Ae.dispose(),Ae.removeEventListener(&quot;sessionstart&quot;,Zn),Ae.removeEventListener(&quot;sessionend&quot;,gi),ji.stop()};function Pe(Y){Y.preventDefault(),console.log(&quot;THREE.WebGLRenderer: Context Lost.&quot;),C=!0}function ot(){console.log(&quot;THREE.WebGLRenderer: Context Restored.&quot;),C=!1;const Y=mt.autoReset,fe=ft.enabled,be=ft.autoUpdate,we=ft.needsUpdate,me=ft.type;nt(),mt.autoReset=Y,ft.enabled=fe,ft.autoUpdate=be,ft.needsUpdate=we,ft.type=me}function et(Y){console.error(&quot;THREE.WebGLRenderer: A WebGL context could not be created. Reason: &quot;,Y.statusMessage)}function Ut(Y){const fe=Y.target;fe.removeEventListener(&quot;dispose&quot;,Ut),wn(fe)}function wn(Y){jn(Y),ze.remove(Y)}function jn(Y){const fe=ze.get(Y).programs;fe!==void 0&amp;&amp;(fe.forEach(function(be){Ze.releaseProgram(be)}),Y.isShaderMaterial&amp;&amp;Ze.releaseShaderCache(Y))}this.renderBufferDirect=function(Y,fe,be,we,me,Ge){fe===null&amp;&amp;(fe=ct);const Je=me.isMesh&amp;&amp;me.matrixWorld.determinant()&lt;0,tt=Is(Y,fe,be,we,me);De.setMaterial(we,Je);let dt=be.index,Ot=1;if(we.wireframe===!0){if(dt=Ue.getWireframeAttribute(be),dt===void 0)return;Ot=2}const Et=be.drawRange,bt=be.attributes.position;let Bt=Et.start*Ot,un=(Et.start+Et.count)*Ot;Ge!==null&amp;&amp;(Bt=Math.max(Bt,Ge.start*Ot),un=Math.min(un,(Ge.start+Ge.count)*Ot)),dt!==null?(Bt=Math.max(Bt,0),un=Math.min(un,dt.count)):bt!=null&amp;&amp;(Bt=Math.max(Bt,0),un=Math.min(un,bt.count));const In=un-Bt;if(In&lt;0||In===1/0)return;yn.setup(me,we,tt,be,dt);let Qt,Zt=st;if(dt!==null&amp;&amp;(Qt=Ce.get(dt),Zt=jt,Zt.setIndex(Qt)),me.isMesh)we.wireframe===!0?(De.setLineWidth(we.wireframeLinewidth*Ke()),Zt.setMode(Q.LINES)):Zt.setMode(Q.TRIANGLES);else if(me.isLine){let wt=we.linewidth;wt===void 0&amp;&amp;(wt=1),De.setLineWidth(wt*Ke()),me.isLineSegments?Zt.setMode(Q.LINES):me.isLineLoop?Zt.setMode(Q.LINE_LOOP):Zt.setMode(Q.LINE_STRIP)}else me.isPoints?Zt.setMode(Q.POINTS):me.isSprite&amp;&amp;Zt.setMode(Q.TRIANGLES);if(me.isBatchedMesh)if(me._multiDrawInstances!==null)Dg(&quot;THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.&quot;),Zt.renderMultiDrawInstances(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount,me._multiDrawInstances);else if(Le.get(&quot;WEBGL_multi_draw&quot;))Zt.renderMultiDraw(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount);else{const wt=me._multiDrawStarts,Hn=me._multiDrawCounts,rn=me._multiDrawCount,Jn=dt?Ce.get(dt).bytesPerElement:1,Tn=ze.get(we).currentProgram.getUniforms();for(let bn=0;bn&lt;rn;bn++)Tn.setValue(Q,&quot;_gl_DrawID&quot;,bn),Zt.render(wt[bn]/Jn,Hn[bn])}else if(me.isInstancedMesh)Zt.renderInstances(Bt,In,me.count);else if(be.isInstancedBufferGeometry){const wt=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,Hn=Math.min(be.instanceCount,wt);Zt.renderInstances(Bt,In,Hn)}else Zt.render(Bt,In)};function zt(Y,fe,be){Y.transparent===!0&amp;&amp;Y.side===wi&amp;&amp;Y.forceSinglePass===!1?(Y.side=Sr,Y.needsUpdate=!0,cs(Y,fe,be),Y.side=is,Y.needsUpdate=!0,cs(Y,fe,be),Y.side=wi):cs(Y,fe,be)}this.compile=function(Y,fe,be=null){be===null&amp;&amp;(be=Y),_=Ct.get(be),_.init(fe),w.push(_),be.traverseVisible(function(me){me.isLight&amp;&amp;me.layers.test(fe.layers)&amp;&amp;(_.pushLight(me),me.castShadow&amp;&amp;_.pushShadow(me))}),Y!==be&amp;&amp;Y.traverseVisible(function(me){me.isLight&amp;&amp;me.layers.test(fe.layers)&amp;&amp;(_.pushLight(me),me.castShadow&amp;&amp;_.pushShadow(me))}),_.setupLights();const we=new Set;return Y.traverse(function(me){if(!(me.isMesh||me.isPoints||me.isLine||me.isSprite))return;const Ge=me.material;if(Ge)if(Array.isArray(Ge))for(let Je=0;Je&lt;Ge.length;Je++){const tt=Ge[Je];zt(tt,be,me),we.add(tt)}else zt(Ge,be,me),we.add(Ge)}),_=w.pop(),we},this.compileAsync=function(Y,fe,be=null){const we=this.compile(Y,fe,be);return new Promise(me=&gt;{function Ge(){if(we.forEach(function(Je){ze.get(Je).currentProgram.isReady()&amp;&amp;we.delete(Je)}),we.size===0){me(Y);return}setTimeout(Ge,10)}Le.get(&quot;KHR_parallel_shader_compile&quot;)!==null?Ge():setTimeout(Ge,10)})};let Gi=null;function oi(Y){Gi&amp;&amp;Gi(Y)}function Zn(){ji.stop()}function gi(){ji.start()}const ji=new YD;ji.setAnimationLoop(oi),typeof self&lt;&quot;u&quot;&amp;&amp;ji.setContext(self),this.setAnimationLoop=function(Y){Gi=Y,Ae.setAnimationLoop(Y),Y===null?ji.stop():ji.start()},Ae.addEventListener(&quot;sessionstart&quot;,Zn),Ae.addEventListener(&quot;sessionend&quot;,gi),this.render=function(Y,fe){if(fe!==void 0&amp;&amp;fe.isCamera!==!0){console.error(&quot;THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.&quot;);return}if(C===!0)return;if(Y.matrixWorldAutoUpdate===!0&amp;&amp;Y.updateMatrixWorld(),fe.parent===null&amp;&amp;fe.matrixWorldAutoUpdate===!0&amp;&amp;fe.updateMatrixWorld(),Ae.enabled===!0&amp;&amp;Ae.isPresenting===!0&amp;&amp;(Ae.cameraAutoUpdate===!0&amp;&amp;Ae.updateCamera(fe),fe=Ae.getCamera()),Y.isScene===!0&amp;&amp;Y.onBeforeRender(S,Y,fe,N),_=Ct.get(Y,w.length),_.init(fe),w.push(_),ve.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse),ie.setFromProjectionMatrix(ve),ae=this.localClippingEnabled,oe=je.init(this.clippingPlanes,ae),b=ht.get(Y,T.length),b.init(),T.push(b),Ae.enabled===!0&amp;&amp;Ae.isPresenting===!0){const Ge=S.xr.getDepthSensingMesh();Ge!==null&amp;&amp;Ns(Ge,fe,-1/0,S.sortObjects)}Ns(Y,fe,0,S.sortObjects),b.finish(),S.sortObjects===!0&amp;&amp;b.sort(ee,F),We=Ae.enabled===!1||Ae.isPresenting===!1||Ae.hasDepthSensing()===!1,We&amp;&amp;St.addToRenderList(b,Y),this.info.render.frame++,oe===!0&amp;&amp;je.beginShadows();const be=_.state.shadowsArray;ft.render(be,Y,fe),oe===!0&amp;&amp;je.endShadows(),this.info.autoReset===!0&amp;&amp;this.info.reset();const we=b.opaque,me=b.transmissive;if(_.setupLights(),fe.isArrayCamera){const Ge=fe.cameras;if(me.length&gt;0)for(let Je=0,tt=Ge.length;Je&lt;tt;Je++){const dt=Ge[Je];Oo(we,me,Y,dt)}We&amp;&amp;St.render(Y);for(let Je=0,tt=Ge.length;Je&lt;tt;Je++){const dt=Ge[Je];Ea(b,Y,dt,dt.viewport)}}else me.length&gt;0&amp;&amp;Oo(we,me,Y,fe),We&amp;&amp;St.render(Y),Ea(b,Y,fe);N!==null&amp;&amp;M===0&amp;&amp;(te.updateMultisampleRenderTarget(N),te.updateRenderTargetMipmap(N)),Y.isScene===!0&amp;&amp;Y.onAfterRender(S,Y,fe),yn.resetDefaultState(),R=-1,D=null,w.pop(),w.length&gt;0?(_=w[w.length-1],oe===!0&amp;&amp;je.setGlobalState(S.clippingPlanes,_.state.camera)):_=null,T.pop(),T.length&gt;0?b=T[T.length-1]:b=null};function Ns(Y,fe,be,we){if(Y.visible===!1)return;if(Y.layers.test(fe.layers)){if(Y.isGroup)be=Y.renderOrder;else if(Y.isLOD)Y.autoUpdate===!0&amp;&amp;Y.update(fe);else if(Y.isLight)_.pushLight(Y),Y.castShadow&amp;&amp;_.pushShadow(Y);else if(Y.isSprite){if(!Y.frustumCulled||ie.intersectsSprite(Y)){we&amp;&amp;Xe.setFromMatrixPosition(Y.matrixWorld).applyMatrix4(ve);const Je=Me.update(Y),tt=Y.material;tt.visible&amp;&amp;b.push(Y,Je,tt,be,Xe.z,null)}}else if((Y.isMesh||Y.isLine||Y.isPoints)&amp;&amp;(!Y.frustumCulled||ie.intersectsObject(Y))){const Je=Me.update(Y),tt=Y.material;if(we&amp;&amp;(Y.boundingSphere!==void 0?(Y.boundingSphere===null&amp;&amp;Y.computeBoundingSphere(),Xe.copy(Y.boundingSphere.center)):(Je.boundingSphere===null&amp;&amp;Je.computeBoundingSphere(),Xe.copy(Je.boundingSphere.center)),Xe.applyMatrix4(Y.matrixWorld).applyMatrix4(ve)),Array.isArray(tt)){const dt=Je.groups;for(let Ot=0,Et=dt.length;Ot&lt;Et;Ot++){const bt=dt[Ot],Bt=tt[bt.materialIndex];Bt&amp;&amp;Bt.visible&amp;&amp;b.push(Y,Je,Bt,be,Xe.z,bt)}}else tt.visible&amp;&amp;b.push(Y,Je,tt,be,Xe.z,null)}}const Ge=Y.children;for(let Je=0,tt=Ge.length;Je&lt;tt;Je++)Ns(Ge[Je],fe,be,we)}function Ea(Y,fe,be,we){const me=Y.opaque,Ge=Y.transmissive,Je=Y.transparent;_.setupLightsView(be),oe===!0&amp;&amp;je.setGlobalState(S.clippingPlanes,be),we&amp;&amp;De.viewport(L.copy(we)),me.length&gt;0&amp;&amp;Ds(me,fe,be),Ge.length&gt;0&amp;&amp;Ds(Ge,fe,be),Je.length&gt;0&amp;&amp;Ds(Je,fe,be),De.buffers.depth.setTest(!0),De.buffers.depth.setMask(!0),De.buffers.color.setMask(!0),De.setPolygonOffset(!1)}function Oo(Y,fe,be,we){if((be.isScene===!0?be.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[we.id]===void 0&amp;&amp;(_.state.transmissionRenderTarget[we.id]=new As(1,1,{generateMipmaps:!0,type:Le.has(&quot;EXT_color_buffer_half_float&quot;)||Le.has(&quot;EXT_color_buffer_float&quot;)?Mh:zr,minFilter:ts,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Jt.workingColorSpace}));const Ge=_.state.transmissionRenderTarget[we.id],Je=we.viewport||L;Ge.setSize(Je.z*S.transmissionResolutionScale,Je.w*S.transmissionResolutionScale);const tt=S.getRenderTarget();S.setRenderTarget(Ge),S.getClearColor(z),$=S.getClearAlpha(),$&lt;1&amp;&amp;S.setClearColor(16777215,.5),S.clear(),We&amp;&amp;St.render(be);const dt=S.toneMapping;S.toneMapping=pa;const Ot=we.viewport;if(we.viewport!==void 0&amp;&amp;(we.viewport=void 0),_.setupLightsView(we),oe===!0&amp;&amp;je.setGlobalState(S.clippingPlanes,we),Ds(Y,be,we),te.updateMultisampleRenderTarget(Ge),te.updateRenderTargetMipmap(Ge),Le.has(&quot;WEBGL_multisampled_render_to_texture&quot;)===!1){let Et=!1;for(let bt=0,Bt=fe.length;bt&lt;Bt;bt++){const un=fe[bt],In=un.object,Qt=un.geometry,Zt=un.material,wt=un.group;if(Zt.side===wi&amp;&amp;In.layers.test(we.layers)){const Hn=Zt.side;Zt.side=Sr,Zt.needsUpdate=!0,Hr(In,be,we,Qt,Zt,wt),Zt.side=Hn,Zt.needsUpdate=!0,Et=!0}}Et===!0&amp;&amp;(te.updateMultisampleRenderTarget(Ge),te.updateRenderTargetMipmap(Ge))}S.setRenderTarget(tt),S.setClearColor(z,$),Ot!==void 0&amp;&amp;(we.viewport=Ot),S.toneMapping=dt}function Ds(Y,fe,be){const we=fe.isScene===!0?fe.overrideMaterial:null;for(let me=0,Ge=Y.length;me&lt;Ge;me++){const Je=Y[me],tt=Je.object,dt=Je.geometry,Ot=Je.group;let Et=Je.material;Et.allowOverride===!0&amp;&amp;we!==null&amp;&amp;(Et=we),tt.layers.test(be.layers)&amp;&amp;Hr(tt,fe,be,dt,Et,Ot)}}function Hr(Y,fe,be,we,me,Ge){Y.onBeforeRender(S,fe,be,we,me,Ge),Y.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,Y.matrixWorld),Y.normalMatrix.getNormalMatrix(Y.modelViewMatrix),me.onBeforeRender(S,fe,be,we,Y,Ge),me.transparent===!0&amp;&amp;me.side===wi&amp;&amp;me.forceSinglePass===!1?(me.side=Sr,me.needsUpdate=!0,S.renderBufferDirect(be,fe,we,me,Y,Ge),me.side=is,me.needsUpdate=!0,S.renderBufferDirect(be,fe,we,me,Y,Ge),me.side=wi):S.renderBufferDirect(be,fe,we,me,Y,Ge),Y.onAfterRender(S,fe,be,we,me,Ge)}function cs(Y,fe,be){fe.isScene!==!0&amp;&amp;(fe=ct);const we=ze.get(Y),me=_.state.lights,Ge=_.state.shadowsArray,Je=me.state.version,tt=Ze.getParameters(Y,me.state,Ge,fe,be),dt=Ze.getProgramCacheKey(tt);let Ot=we.programs;we.environment=Y.isMeshStandardMaterial?fe.environment:null,we.fog=fe.fog,we.envMap=(Y.isMeshStandardMaterial?pe:V).get(Y.envMap||we.environment),we.envMapRotation=we.environment!==null&amp;&amp;Y.envMap===null?fe.environmentRotation:Y.envMapRotation,Ot===void 0&amp;&amp;(Y.addEventListener(&quot;dispose&quot;,Ut),Ot=new Map,we.programs=Ot);let Et=Ot.get(dt);if(Et!==void 0){if(we.currentProgram===Et&amp;&amp;we.lightsStateVersion===Je)return Ar(Y,tt),Et}else tt.uniforms=Ze.getUniforms(Y),Y.onBeforeCompile(tt,S),Et=Ze.acquireProgram(tt,dt),Ot.set(dt,Et),we.uniforms=tt.uniforms;const bt=we.uniforms;return(!Y.isShaderMaterial&amp;&amp;!Y.isRawShaderMaterial||Y.clipping===!0)&amp;&amp;(bt.clippingPlanes=je.uniform),Ar(Y,tt),we.needsLights=Wn(Y),we.lightsStateVersion=Je,we.needsLights&amp;&amp;(bt.ambientLightColor.value=me.state.ambient,bt.lightProbe.value=me.state.probe,bt.directionalLights.value=me.state.directional,bt.directionalLightShadows.value=me.state.directionalShadow,bt.spotLights.value=me.state.spot,bt.spotLightShadows.value=me.state.spotShadow,bt.rectAreaLights.value=me.state.rectArea,bt.ltc_1.value=me.state.rectAreaLTC1,bt.ltc_2.value=me.state.rectAreaLTC2,bt.pointLights.value=me.state.point,bt.pointLightShadows.value=me.state.pointShadow,bt.hemisphereLights.value=me.state.hemi,bt.directionalShadowMap.value=me.state.directionalShadowMap,bt.directionalShadowMatrix.value=me.state.directionalShadowMatrix,bt.spotShadowMap.value=me.state.spotShadowMap,bt.spotLightMatrix.value=me.state.spotLightMatrix,bt.spotLightMap.value=me.state.spotLightMap,bt.pointShadowMap.value=me.state.pointShadowMap,bt.pointShadowMatrix.value=me.state.pointShadowMatrix),we.currentProgram=Et,we.uniformsList=null,Et}function Mr(Y){if(Y.uniformsList===null){const fe=Y.currentProgram.getUniforms();Y.uniformsList=Pg.seqWithValue(fe.seq,Y.uniforms)}return Y.uniformsList}function Ar(Y,fe){const be=ze.get(Y);be.outputColorSpace=fe.outputColorSpace,be.batching=fe.batching,be.batchingColor=fe.batchingColor,be.instancing=fe.instancing,be.instancingColor=fe.instancingColor,be.instancingMorph=fe.instancingMorph,be.skinning=fe.skinning,be.morphTargets=fe.morphTargets,be.morphNormals=fe.morphNormals,be.morphColors=fe.morphColors,be.morphTargetsCount=fe.morphTargetsCount,be.numClippingPlanes=fe.numClippingPlanes,be.numIntersection=fe.numClipIntersection,be.vertexAlphas=fe.vertexAlphas,be.vertexTangents=fe.vertexTangents,be.toneMapping=fe.toneMapping}function Is(Y,fe,be,we,me){fe.isScene!==!0&amp;&amp;(fe=ct),te.resetTextureUnits();const Ge=fe.fog,Je=we.isMeshStandardMaterial?fe.environment:null,tt=N===null?S.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:pr,dt=(we.isMeshStandardMaterial?pe:V).get(we.envMap||Je),Ot=we.vertexColors===!0&amp;&amp;!!be.attributes.color&amp;&amp;be.attributes.color.itemSize===4,Et=!!be.attributes.tangent&amp;&amp;(!!we.normalMap||we.anisotropy&gt;0),bt=!!be.morphAttributes.position,Bt=!!be.morphAttributes.normal,un=!!be.morphAttributes.color;let In=pa;we.toneMapped&amp;&amp;(N===null||N.isXRRenderTarget===!0)&amp;&amp;(In=S.toneMapping);const Qt=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,Zt=Qt!==void 0?Qt.length:0,wt=ze.get(we),Hn=_.state.lights;if(oe===!0&amp;&amp;(ae===!0||Y!==D)){const ei=Y===D&amp;&amp;we.id===R;je.setState(we,Y,ei)}let rn=!1;we.version===wt.__version?(wt.needsLights&amp;&amp;wt.lightsStateVersion!==Hn.state.version||wt.outputColorSpace!==tt||me.isBatchedMesh&amp;&amp;wt.batching===!1||!me.isBatchedMesh&amp;&amp;wt.batching===!0||me.isBatchedMesh&amp;&amp;wt.batchingColor===!0&amp;&amp;me.colorTexture===null||me.isBatchedMesh&amp;&amp;wt.batchingColor===!1&amp;&amp;me.colorTexture!==null||me.isInstancedMesh&amp;&amp;wt.instancing===!1||!me.isInstancedMesh&amp;&amp;wt.instancing===!0||me.isSkinnedMesh&amp;&amp;wt.skinning===!1||!me.isSkinnedMesh&amp;&amp;wt.skinning===!0||me.isInstancedMesh&amp;&amp;wt.instancingColor===!0&amp;&amp;me.instanceColor===null||me.isInstancedMesh&amp;&amp;wt.instancingColor===!1&amp;&amp;me.instanceColor!==null||me.isInstancedMesh&amp;&amp;wt.instancingMorph===!0&amp;&amp;me.morphTexture===null||me.isInstancedMesh&amp;&amp;wt.instancingMorph===!1&amp;&amp;me.morphTexture!==null||wt.envMap!==dt||we.fog===!0&amp;&amp;wt.fog!==Ge||wt.numClippingPlanes!==void 0&amp;&amp;(wt.numClippingPlanes!==je.numPlanes||wt.numIntersection!==je.numIntersection)||wt.vertexAlphas!==Ot||wt.vertexTangents!==Et||wt.morphTargets!==bt||wt.morphNormals!==Bt||wt.morphColors!==un||wt.toneMapping!==In||wt.morphTargetsCount!==Zt)&amp;&amp;(rn=!0):(rn=!0,wt.__version=we.version);let Jn=wt.currentProgram;rn===!0&amp;&amp;(Jn=cs(we,fe,me));let Tn=!1,bn=!1,Cr=!1;const Mn=Jn.getUniforms(),Pi=wt.uniforms;if(De.useProgram(Jn.program)&amp;&amp;(Tn=!0,bn=!0,Cr=!0),we.id!==R&amp;&amp;(R=we.id,bn=!0),Tn||D!==Y){De.buffers.depth.getReversed()?(ue.copy(Y.projectionMatrix),qF(ue),YF(ue),Mn.setValue(Q,&quot;projectionMatrix&quot;,ue)):Mn.setValue(Q,&quot;projectionMatrix&quot;,Y.projectionMatrix),Mn.setValue(Q,&quot;viewMatrix&quot;,Y.matrixWorldInverse);const ai=Mn.map.cameraPosition;ai!==void 0&amp;&amp;ai.setValue(Q,He.setFromMatrixPosition(Y.matrixWorld)),Fe.logarithmicDepthBuffer&amp;&amp;Mn.setValue(Q,&quot;logDepthBufFC&quot;,2/(Math.log(Y.far+1)/Math.LN2)),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&amp;&amp;Mn.setValue(Q,&quot;isOrthographic&quot;,Y.isOrthographicCamera===!0),D!==Y&amp;&amp;(D=Y,bn=!0,Cr=!0)}if(me.isSkinnedMesh){Mn.setOptional(Q,me,&quot;bindMatrix&quot;),Mn.setOptional(Q,me,&quot;bindMatrixInverse&quot;);const ei=me.skeleton;ei&amp;&amp;(ei.boneTexture===null&amp;&amp;ei.computeBoneTexture(),Mn.setValue(Q,&quot;boneTexture&quot;,ei.boneTexture,te))}me.isBatchedMesh&amp;&amp;(Mn.setOptional(Q,me,&quot;batchingTexture&quot;),Mn.setValue(Q,&quot;batchingTexture&quot;,me._matricesTexture,te),Mn.setOptional(Q,me,&quot;batchingIdTexture&quot;),Mn.setValue(Q,&quot;batchingIdTexture&quot;,me._indirectTexture,te),Mn.setOptional(Q,me,&quot;batchingColorTexture&quot;),me._colorsTexture!==null&amp;&amp;Mn.setValue(Q,&quot;batchingColorTexture&quot;,me._colorsTexture,te));const Qn=be.morphAttributes;if((Qn.position!==void 0||Qn.normal!==void 0||Qn.color!==void 0)&amp;&amp;Rt.update(me,be,Jn),(bn||wt.receiveShadow!==me.receiveShadow)&amp;&amp;(wt.receiveShadow=me.receiveShadow,Mn.setValue(Q,&quot;receiveShadow&quot;,me.receiveShadow)),we.isMeshGouraudMaterial&amp;&amp;we.envMap!==null&amp;&amp;(Pi.envMap.value=dt,Pi.flipEnvMap.value=dt.isCubeTexture&amp;&amp;dt.isRenderTargetTexture===!1?-1:1),we.isMeshStandardMaterial&amp;&amp;we.envMap===null&amp;&amp;fe.environment!==null&amp;&amp;(Pi.envMapIntensity.value=fe.environmentIntensity),bn&amp;&amp;(Mn.setValue(Q,&quot;toneMappingExposure&quot;,S.toneMappingExposure),wt.needsLights&amp;&amp;us(Pi,Cr),Ge&amp;&amp;we.fog===!0&amp;&amp;qe.refreshFogUniforms(Pi,Ge),qe.refreshMaterialUniforms(Pi,we,G,j,_.state.transmissionRenderTarget[Y.id]),Pg.upload(Q,Mr(wt),Pi,te)),we.isShaderMaterial&amp;&amp;we.uniformsNeedUpdate===!0&amp;&amp;(Pg.upload(Q,Mr(wt),Pi,te),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&amp;&amp;Mn.setValue(Q,&quot;center&quot;,me.center),Mn.setValue(Q,&quot;modelViewMatrix&quot;,me.modelViewMatrix),Mn.setValue(Q,&quot;normalMatrix&quot;,me.normalMatrix),Mn.setValue(Q,&quot;modelMatrix&quot;,me.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const ei=we.uniformsGroups;for(let ai=0,Gr=ei.length;ai&lt;Gr;ai++){const Ps=ei[ai];de.update(Ps,Jn),de.bind(Ps,Jn)}}return Jn}function us(Y,fe){Y.ambientLightColor.needsUpdate=fe,Y.lightProbe.needsUpdate=fe,Y.directionalLights.needsUpdate=fe,Y.directionalLightShadows.needsUpdate=fe,Y.pointLights.needsUpdate=fe,Y.pointLightShadows.needsUpdate=fe,Y.spotLights.needsUpdate=fe,Y.spotLightShadows.needsUpdate=fe,Y.rectAreaLights.needsUpdate=fe,Y.hemisphereLights.needsUpdate=fe}function Wn(Y){return Y.isMeshLambertMaterial||Y.isMeshToonMaterial||Y.isMeshPhongMaterial||Y.isMeshStandardMaterial||Y.isShadowMaterial||Y.isShaderMaterial&amp;&amp;Y.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(Y,fe,be){const we=ze.get(Y);we.__autoAllocateDepthBuffer=Y.resolveDepthBuffer===!1,we.__autoAllocateDepthBuffer===!1&amp;&amp;(we.__useRenderToTexture=!1),ze.get(Y.texture).__webglTexture=fe,ze.get(Y.depthTexture).__webglTexture=we.__autoAllocateDepthBuffer?void 0:be,we.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Y,fe){const be=ze.get(Y);be.__webglFramebuffer=fe,be.__useDefaultFramebuffer=fe===void 0};const Ta=Q.createFramebuffer();this.setRenderTarget=function(Y,fe=0,be=0){N=Y,O=fe,M=be;let we=!0,me=null,Ge=!1,Je=!1;if(Y){const dt=ze.get(Y);if(dt.__useDefaultFramebuffer!==void 0)De.bindFramebuffer(Q.FRAMEBUFFER,null),we=!1;else if(dt.__webglFramebuffer===void 0)te.setupRenderTarget(Y);else if(dt.__hasExternalTextures)te.rebindTextures(Y,ze.get(Y.texture).__webglTexture,ze.get(Y.depthTexture).__webglTexture);else if(Y.depthBuffer){const bt=Y.depthTexture;if(dt.__boundDepthTexture!==bt){if(bt!==null&amp;&amp;ze.has(bt)&amp;&amp;(Y.width!==bt.image.width||Y.height!==bt.image.height))throw new Error(&quot;WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.&quot;);te.setupDepthRenderbuffer(Y)}}const Ot=Y.texture;(Ot.isData3DTexture||Ot.isDataArrayTexture||Ot.isCompressedArrayTexture)&amp;&amp;(Je=!0);const Et=ze.get(Y).__webglFramebuffer;Y.isWebGLCubeRenderTarget?(Array.isArray(Et[fe])?me=Et[fe][be]:me=Et[fe],Ge=!0):Y.samples&gt;0&amp;&amp;te.useMultisampledRTT(Y)===!1?me=ze.get(Y).__webglMultisampledFramebuffer:Array.isArray(Et)?me=Et[be]:me=Et,L.copy(Y.viewport),H.copy(Y.scissor),q=Y.scissorTest}else L.copy(ne).multiplyScalar(G).floor(),H.copy(le).multiplyScalar(G).floor(),q=ce;if(be!==0&amp;&amp;(me=Ta),De.bindFramebuffer(Q.FRAMEBUFFER,me)&amp;&amp;we&amp;&amp;De.drawBuffers(Y,me),De.viewport(L),De.scissor(H),De.setScissorTest(q),Ge){const dt=ze.get(Y.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+fe,dt.__webglTexture,be)}else if(Je){const dt=ze.get(Y.texture),Ot=fe;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,dt.__webglTexture,be,Ot)}else if(Y!==null&amp;&amp;be!==0){const dt=ze.get(Y.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,dt.__webglTexture,be)}R=-1},this.readRenderTargetPixels=function(Y,fe,be,we,me,Ge,Je){if(!(Y&amp;&amp;Y.isWebGLRenderTarget)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.&quot;);return}let tt=ze.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&amp;&amp;Je!==void 0&amp;&amp;(tt=tt[Je]),tt){De.bindFramebuffer(Q.FRAMEBUFFER,tt);try{const dt=Y.texture,Ot=dt.format,Et=dt.type;if(!Fe.textureFormatReadable(Ot)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.&quot;);return}if(!Fe.textureTypeReadable(Et)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.&quot;);return}fe&gt;=0&amp;&amp;fe&lt;=Y.width-we&amp;&amp;be&gt;=0&amp;&amp;be&lt;=Y.height-me&amp;&amp;Q.readPixels(fe,be,we,me,Pt.convert(Ot),Pt.convert(Et),Ge)}finally{const dt=N!==null?ze.get(N).__webglFramebuffer:null;De.bindFramebuffer(Q.FRAMEBUFFER,dt)}}},this.readRenderTargetPixelsAsync=async function(Y,fe,be,we,me,Ge,Je){if(!(Y&amp;&amp;Y.isWebGLRenderTarget))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.&quot;);let tt=ze.get(Y).__webglFramebuffer;if(Y.isWebGLCubeRenderTarget&amp;&amp;Je!==void 0&amp;&amp;(tt=tt[Je]),tt)if(fe&gt;=0&amp;&amp;fe&lt;=Y.width-we&amp;&amp;be&gt;=0&amp;&amp;be&lt;=Y.height-me){De.bindFramebuffer(Q.FRAMEBUFFER,tt);const dt=Y.texture,Ot=dt.format,Et=dt.type;if(!Fe.textureFormatReadable(Ot))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.&quot;);if(!Fe.textureTypeReadable(Et))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.&quot;);const bt=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,bt),Q.bufferData(Q.PIXEL_PACK_BUFFER,Ge.byteLength,Q.STREAM_READ),Q.readPixels(fe,be,we,me,Pt.convert(Ot),Pt.convert(Et),0);const Bt=N!==null?ze.get(N).__webglFramebuffer:null;De.bindFramebuffer(Q.FRAMEBUFFER,Bt);const un=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),await XF(Q,un,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,bt),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,Ge),Q.deleteBuffer(bt),Q.deleteSync(un),Ge}else throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.&quot;)},this.copyFramebufferToTexture=function(Y,fe=null,be=0){const we=Math.pow(2,-be),me=Math.floor(Y.image.width*we),Ge=Math.floor(Y.image.height*we),Je=fe!==null?fe.x:0,tt=fe!==null?fe.y:0;te.setTexture2D(Y,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,be,0,0,Je,tt,me,Ge),De.unbindTexture()};const Ma=Q.createFramebuffer(),Vr=Q.createFramebuffer();this.copyTextureToTexture=function(Y,fe,be=null,we=null,me=0,Ge=null){Ge===null&amp;&amp;(me!==0?(Dg(&quot;WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels.&quot;),Ge=me,me=0):Ge=0);let Je,tt,dt,Ot,Et,bt,Bt,un,In;const Qt=Y.isCompressedTexture?Y.mipmaps[Ge]:Y.image;if(be!==null)Je=be.max.x-be.min.x,tt=be.max.y-be.min.y,dt=be.isBox3?be.max.z-be.min.z:1,Ot=be.min.x,Et=be.min.y,bt=be.isBox3?be.min.z:0;else{const Qn=Math.pow(2,-me);Je=Math.floor(Qt.width*Qn),tt=Math.floor(Qt.height*Qn),Y.isDataArrayTexture?dt=Qt.depth:Y.isData3DTexture?dt=Math.floor(Qt.depth*Qn):dt=1,Ot=0,Et=0,bt=0}we!==null?(Bt=we.x,un=we.y,In=we.z):(Bt=0,un=0,In=0);const Zt=Pt.convert(fe.format),wt=Pt.convert(fe.type);let Hn;fe.isData3DTexture?(te.setTexture3D(fe,0),Hn=Q.TEXTURE_3D):fe.isDataArrayTexture||fe.isCompressedArrayTexture?(te.setTexture2DArray(fe,0),Hn=Q.TEXTURE_2D_ARRAY):(te.setTexture2D(fe,0),Hn=Q.TEXTURE_2D),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,fe.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,fe.unpackAlignment);const rn=Q.getParameter(Q.UNPACK_ROW_LENGTH),Jn=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Tn=Q.getParameter(Q.UNPACK_SKIP_PIXELS),bn=Q.getParameter(Q.UNPACK_SKIP_ROWS),Cr=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Qt.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Qt.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Ot),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,Et),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,bt);const Mn=Y.isDataArrayTexture||Y.isData3DTexture,Pi=fe.isDataArrayTexture||fe.isData3DTexture;if(Y.isDepthTexture){const Qn=ze.get(Y),ei=ze.get(fe),ai=ze.get(Qn.__renderTarget),Gr=ze.get(ei.__renderTarget);De.bindFramebuffer(Q.READ_FRAMEBUFFER,ai.__webglFramebuffer),De.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Gr.__webglFramebuffer);for(let Ps=0;Ps&lt;dt;Ps++)Mn&amp;&amp;(Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ze.get(Y).__webglTexture,me,bt+Ps),Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ze.get(fe).__webglTexture,Ge,In+Ps)),Q.blitFramebuffer(Ot,Et,Je,tt,Bt,un,Je,tt,Q.DEPTH_BUFFER_BIT,Q.NEAREST);De.bindFramebuffer(Q.READ_FRAMEBUFFER,null),De.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else if(me!==0||Y.isRenderTargetTexture||ze.has(Y)){const Qn=ze.get(Y),ei=ze.get(fe);De.bindFramebuffer(Q.READ_FRAMEBUFFER,Ma),De.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Vr);for(let ai=0;ai&lt;dt;ai++)Mn?Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Qn.__webglTexture,me,bt+ai):Q.framebufferTexture2D(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,Qn.__webglTexture,me),Pi?Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ei.__webglTexture,Ge,In+ai):Q.framebufferTexture2D(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,ei.__webglTexture,Ge),me!==0?Q.blitFramebuffer(Ot,Et,Je,tt,Bt,un,Je,tt,Q.COLOR_BUFFER_BIT,Q.NEAREST):Pi?Q.copyTexSubImage3D(Hn,Ge,Bt,un,In+ai,Ot,Et,Je,tt):Q.copyTexSubImage2D(Hn,Ge,Bt,un,Ot,Et,Je,tt);De.bindFramebuffer(Q.READ_FRAMEBUFFER,null),De.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else Pi?Y.isDataTexture||Y.isData3DTexture?Q.texSubImage3D(Hn,Ge,Bt,un,In,Je,tt,dt,Zt,wt,Qt.data):fe.isCompressedArrayTexture?Q.compressedTexSubImage3D(Hn,Ge,Bt,un,In,Je,tt,dt,Zt,Qt.data):Q.texSubImage3D(Hn,Ge,Bt,un,In,Je,tt,dt,Zt,wt,Qt):Y.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,Ge,Bt,un,Je,tt,Zt,wt,Qt.data):Y.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,Ge,Bt,un,Qt.width,Qt.height,Zt,Qt.data):Q.texSubImage2D(Q.TEXTURE_2D,Ge,Bt,un,Je,tt,Zt,wt,Qt);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,rn),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Jn),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Tn),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,bn),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Cr),Ge===0&amp;&amp;fe.generateMipmaps&amp;&amp;Q.generateMipmap(Hn),De.unbindTexture()},this.copyTextureToTexture3D=function(Y,fe,be=null,we=null,me=0){return Dg(&#x27;WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use &quot;copyTextureToTexture&quot; instead.&#x27;),this.copyTextureToTexture(Y,fe,be,we,me)},this.initRenderTarget=function(Y){ze.get(Y).__webglFramebuffer===void 0&amp;&amp;te.setupRenderTarget(Y)},this.initTexture=function(Y){Y.isCubeTexture?te.setTextureCube(Y,0):Y.isData3DTexture?te.setTexture3D(Y,0):Y.isDataArrayTexture||Y.isCompressedArrayTexture?te.setTexture2DArray(Y,0):te.setTexture2D(Y,0),De.unbindTexture()},this.resetState=function(){O=0,M=0,N=null,De.reset(),yn.reset()},typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;observe&quot;,{detail:this}))}get coordinateSystem(){return Ms}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Jt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Jt._getUnpackColorSpace()}}const t8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:IN,AddEquation:ul,AddOperation:RN,AdditiveAnimationBlendMode:mw,AdditiveBlending:aS,AgXToneMapping:LN,AlphaFormat:hw,AlwaysCompare:ZN,AlwaysDepth:Kg,AlwaysStencilFunc:hS,AmbientLight:Gy,AnimationAction:VD,AnimationClip:Sl,AnimationLoader:xB,AnimationMixer:GD,AnimationObjectGroup:WB,AnimationUtils:yB,ArcCurve:hD,ArrayCamera:zD,ArrowHelper:d4,AttachedBindMode:uS,Audio:BD,AudioAnalyser:LB,AudioContext:Bw,AudioListener:DB,AudioLoader:RB,AxesHelper:p4,BackSide:Sr,BasicDepthPacking:VN,BasicShadowMap:Kk,BatchedMesh:cD,Bone:Zd,BooleanKeyframeTrack:Bc,Box2:e4,Box3:di,Box3Helper:h4,BoxGeometry:Rl,BoxHelper:u4,BufferAttribute:Vt,BufferGeometry:It,BufferGeometryLoader:kD,ByteType:lw,Cache:ca,Camera:yy,CameraHelper:c4,CanvasTexture:zz,CapsuleGeometry:My,CatmullRomCurve3:fD,CineonToneMapping:DN,CircleGeometry:Ay,ClampToEdgeWrapping:sr,Clock:Hw,Color:Ye,ColorKeyframeTrack:Uw,ColorManagement:Jt,CompressedArrayTexture:kz,CompressedCubeTexture:Fz,CompressedTexture:Ey,CompressedTextureLoader:SB,ConeGeometry:Jd,ConstantAlphaFactor:MN,ConstantColorFactor:EN,Controls:qD,CubeCamera:rD,CubeReflectionMapping:_a,CubeRefractionMapping:vl,CubeTexture:Kd,CubeTextureLoader:wB,CubeUVReflectionMapping:Th,CubicBezierCurve:Mw,CubicBezierCurve3:dD,CubicInterpolant:CD,CullFaceBack:oS,CullFaceFront:lN,CullFaceFrontBack:Yk,CullFaceNone:aN,Curve:no,CurvePath:mD,CustomBlending:uN,CustomToneMapping:PN,CylinderGeometry:Rh,Cylindrical:QB,Data3DTexture:my,DataArrayTexture:Yd,DataTexture:Qs,DataTextureLoader:ND,DataUtils:cz,DecrementStencilOp:oF,DecrementWrapStencilOp:lF,DefaultLoadingManager:Fw,DepthArrayTexture:Bz,DepthFormat:ch,DepthStencilFormat:uh,DepthTexture:Ty,DetachedBindMode:kN,DirectionalLight:ep,DirectionalLightHelper:l4,DiscreteInterpolant:RD,DodecahedronGeometry:Cy,DoubleSide:wi,DstAlphaFactor:vN,DstColorFactor:xN,DynamicCopyUsage:wF,DynamicDrawUsage:yF,DynamicReadUsage:bF,EdgesGeometry:Ew,EllipseCurve:Ry,EqualCompare:qN,EqualDepth:Zg,EqualStencilFunc:fF,EquirectangularReflectionMapping:vd,EquirectangularRefractionMapping:bd,Euler:Er,EventDispatcher:Ao,ExtrudeGeometry:Oy,FileLoader:ss,Float16BufferAttribute:gz,Float32BufferAttribute:ut,FloatType:kr,Fog:vy,FogExp2:_y,FramebufferTexture:Uz,FrontSide:is,Frustum:Ch,FrustumArray:Sy,GLBufferAttribute:JB,GLSL1:TF,GLSL3:fS,GreaterCompare:YN,GreaterDepth:Qg,GreaterEqualCompare:$N,GreaterEqualDepth:Jg,GreaterEqualStencilFunc:gF,GreaterStencilFunc:pF,GridHelper:XD,Group:xr,HalfFloatType:Mh,HemisphereLight:DD,HemisphereLightHelper:o4,IcosahedronGeometry:Ny,ImageBitmapLoader:FD,ImageLoader:Rd,ImageUtils:eD,IncrementStencilOp:sF,IncrementWrapStencilOp:aF,InstancedBufferAttribute:Nc,InstancedBufferGeometry:UD,InstancedInterleavedBuffer:ZB,InstancedMesh:Sw,Int16BufferAttribute:pz,Int32BufferAttribute:mz,Int8BufferAttribute:hz,IntType:ly,InterleavedBuffer:$d,InterleavedBufferAttribute:bl,Interpolant:Dh,InterpolateDiscrete:hh,InterpolateLinear:fh,InterpolateSmooth:Ng,InterpolationSamplingMode:CF,InterpolationSamplingType:AF,InvertStencilOp:cF,KeepStencilOp:hc,KeyframeTrack:Os,LOD:lD,LatheGeometry:Dy,Layers:gy,LessCompare:XN,LessDepth:$g,LessEqualCompare:yw,LessEqualDepth:Oc,LessEqualStencilFunc:dF,LessStencilFunc:hF,Light:Nl,LightProbe:LD,Line:Eo,Line3:t4,LineBasicMaterial:Ji,LineCurve:Aw,LineCurve3:pD,LineDashedMaterial:TD,LineLoop:ww,LineSegments:Tr,LinearFilter:fi,LinearInterpolant:Lw,LinearMipMapLinearFilter:Qk,LinearMipMapNearestFilter:Jk,LinearMipmapLinearFilter:ts,LinearMipmapNearestFilter:th,LinearSRGBColorSpace:pr,LinearToneMapping:ON,LinearTransfer:Sd,Loader:Qi,LoaderUtils:So,LoadingManager:kw,LoopOnce:FN,LoopPingPong:BN,LoopRepeat:zN,MOUSE:Ec,Material:Di,MaterialLoader:jy,MathUtils:ra,Matrix2:Ww,Matrix3:Wt,Matrix4:yt,MaxEquation:pN,Mesh:gn,MeshBasicMaterial:zi,MeshDepthMaterial:Dw,MeshDistanceMaterial:Iw,MeshLambertMaterial:zy,MeshMatcapMaterial:ED,MeshNormalMaterial:wD,MeshPhongMaterial:ml,MeshPhysicalMaterial:as,MeshStandardMaterial:rs,MeshToonMaterial:Nw,MinEquation:dN,MirroredRepeatWrapping:oh,MixOperation:CN,MultiplyBlending:cS,MultiplyOperation:Wd,NearestFilter:Ei,NearestMipMapLinearFilter:Zk,NearestMipMapNearestFilter:$k,NearestMipmapLinearFilter:vc,NearestMipmapNearestFilter:ay,NeutralToneMapping:UN,NeverCompare:WN,NeverDepth:Yg,NeverStencilFunc:uF,NoBlending:da,NoColorSpace:ia,NoToneMapping:pa,NormalAnimationBlendMode:dy,NormalBlending:Tc,NotEqualCompare:KN,NotEqualDepth:e0,NotEqualStencilFunc:mF,NumberKeyframeTrack:Ic,Object3D:nn,ObjectLoader:AB,ObjectSpaceNormalMap:jN,OctahedronGeometry:Qd,OneFactor:gN,OneMinusConstantAlphaFactor:AN,OneMinusConstantColorFactor:TN,OneMinusDstAlphaFactor:bN,OneMinusDstColorFactor:SN,OneMinusSrcAlphaFactor:qg,OneMinusSrcColorFactor:_N,OrthographicCamera:Vc,PCFShadowMap:aw,PCFSoftShadowMap:cN,PMREMGenerator:bS,Path:N0,PerspectiveCamera:Yn,Plane:ta,PlaneGeometry:Oh,PlaneHelper:f4,PointLight:Vy,PointLightHelper:r4,Points:ga,PointsMaterial:wy,PolarGridHelper:a4,PolyhedronGeometry:Ol,PositionalAudio:PB,PropertyBinding:mn,PropertyMixer:HD,QuadraticBezierCurve:Cw,QuadraticBezierCurve3:Rw,Quaternion:Ti,QuaternionKeyframeTrack:xl,QuaternionLinearInterpolant:OD,RED_GREEN_RGTC2_Format:T0,RED_RGTC1_Format:pw,REVISION:sy,RGBADepthPacking:GN,RGBAFormat:dr,RGBAIntegerFormat:fy,RGBA_ASTC_10x10_Format:v0,RGBA_ASTC_10x5_Format:g0,RGBA_ASTC_10x6_Format:y0,RGBA_ASTC_10x8_Format:_0,RGBA_ASTC_12x10_Format:b0,RGBA_ASTC_12x12_Format:x0,RGBA_ASTC_4x4_Format:l0,RGBA_ASTC_5x4_Format:c0,RGBA_ASTC_5x5_Format:u0,RGBA_ASTC_6x5_Format:h0,RGBA_ASTC_6x6_Format:f0,RGBA_ASTC_8x5_Format:d0,RGBA_ASTC_8x6_Format:p0,RGBA_ASTC_8x8_Format:m0,RGBA_BPTC_Format:cd,RGBA_ETC2_EAC_Format:a0,RGBA_PVRTC_2BPPV1_Format:r0,RGBA_PVRTC_4BPPV1_Format:i0,RGBA_S3TC_DXT1_Format:od,RGBA_S3TC_DXT3_Format:ad,RGBA_S3TC_DXT5_Format:ld,RGBDepthPacking:tF,RGBFormat:fw,RGBIntegerFormat:eF,RGB_BPTC_SIGNED_Format:S0,RGB_BPTC_UNSIGNED_Format:w0,RGB_ETC1_Format:s0,RGB_ETC2_Format:o0,RGB_PVRTC_2BPPV1_Format:n0,RGB_PVRTC_4BPPV1_Format:t0,RGB_S3TC_DXT1_Format:sd,RGDepthPacking:nF,RGFormat:dw,RGIntegerFormat:hy,RawShaderMaterial:SD,Ray:Cl,Raycaster:jD,RectAreaLight:ID,RedFormat:Xd,RedIntegerFormat:qd,ReinhardToneMapping:NN,RenderTarget:py,RenderTarget3D:qB,RenderTargetArray:YB,RepeatWrapping:Ts,ReplaceStencilOp:rF,ReverseSubtractEquation:fN,RingGeometry:Iy,SIGNED_RED_GREEN_RGTC2_Format:M0,SIGNED_RED_RGTC1_Format:E0,SRGBColorSpace:Dn,SRGBTransfer:On,Scene:by,ShaderChunk:$t,ShaderLib:Ys,ShaderMaterial:Br,ShadowMaterial:xD,Shape:Ac,ShapeGeometry:Py,ShapePath:m4,ShapeUtils:$s,ShortType:cw,Skeleton:Ah,SkeletonHelper:i4,SkinnedMesh:xy,Source:pl,Sphere:pi,SphereGeometry:Nh,Spherical:_S,SphericalHarmonics3:PD,SplineCurve:Ow,SpotLight:Hy,SpotLightHelper:n4,Sprite:aD,SpriteMaterial:xw,SrcAlphaFactor:Xg,SrcAlphaSaturateFactor:wN,SrcColorFactor:yN,StaticCopyUsage:SF,StaticDrawUsage:wd,StaticReadUsage:vF,StereoCamera:OB,StreamCopyUsage:EF,StreamDrawUsage:_F,StreamReadUsage:xF,StringKeyframeTrack:Hc,SubtractEquation:hN,SubtractiveBlending:lS,TOUCH:_c,TangentSpaceNormalMap:Al,TetrahedronGeometry:Ly,Texture:Kn,TextureLoader:By,TextureUtils:b4,TimestampQuery:MF,TorusGeometry:Uy,TorusKnotGeometry:ky,Triangle:br,TriangleFanDrawMode:A0,TriangleStripDrawMode:gw,TrianglesDrawMode:HN,TubeGeometry:Fy,UVMapping:oy,Uint16BufferAttribute:vw,Uint32BufferAttribute:bw,Uint8BufferAttribute:fz,Uint8ClampedBufferAttribute:dz,Uniform:jw,UniformsGroup:$B,UniformsLib:rt,UniformsUtils:iD,UnsignedByteType:zr,UnsignedInt248Type:lh,UnsignedInt5999Type:uw,UnsignedIntType:va,UnsignedShort4444Type:cy,UnsignedShort5551Type:uy,UnsignedShortType:ah,VSMShadowMap:_o,Vector2:Re,Vector3:K,Vector4:_n,VectorKeyframeTrack:ba,VideoFrameTexture:Lz,VideoTexture:uD,WebGL3DRenderTarget:QF,WebGLArrayRenderTarget:JF,WebGLCoordinateSystem:Ms,WebGLCubeRenderTarget:sD,WebGLRenderTarget:As,WebGLRenderer:eI,WebGLUtils:QD,WebGPUCoordinateSystem:Ed,WebXRController:Ig,WireframeGeometry:bD,WrapAroundEnding:xd,ZeroCurvatureEnding:bc,ZeroFactor:mN,ZeroSlopeEnding:xc,ZeroStencilOp:iF,createCanvasElement:QN},Symbol.toStringTag,{value:&quot;Module&quot;})),io=to(n=&gt;({modelUrl:null,scene_action:null,userdata:null,translation:null,boundingBox:null,zIsUp:!0,defaultOrbitController:!0,model_type:null,setModelUrl:(e,t)=&gt;n({modelUrl:e,scene_action:t}),setTranslation:e=&gt;n({translation:e}),setBoundingBox:e=&gt;n({boundingBox:e}),setUserData:e=&gt;n({userdata:e}),setZIsUp:e=&gt;n({zIsUp:e}),setDefaultOrbitController:e=&gt;n({defaultOrbitController:e})}));class n8{constructor(){Qe(this,&quot;socket&quot;,null);Qe(this,&quot;retryWait&quot;,1e3);Qe(this,&quot;instance_id&quot;,this.getRandomInt32());Qe(this,&quot;shouldReconnect&quot;,!0);Qe(this,&quot;messageQueue&quot;,[]);Qe(this,&quot;resolvers&quot;,[])}getRandomInt32(){return Math.floor(Math.random()*4294967296)+-2147483648}async connect(e){const t=window.WEBSOCKET_ID;t&amp;&amp;(console.log(&quot;WebSocket ID Override:&quot;,t),this.instance_id=t);const i=`${e}?client-type=web&amp;instance-id=${this.instance_id}`;this.shouldReconnect=!0;try{this.socket=new WebSocket(i),console.log(&quot;WebSocket connecting to:&quot;,i),this.socket.addEventListener(&quot;message&quot;,r=&gt;this.enqueue(r)),this.socket.addEventListener(&quot;close&quot;,()=&gt;{console.log(&quot;WebSocket connection closed.&quot;),this.shouldReconnect&amp;&amp;(console.log(`Retrying in ${this.retryWait/1e3}sâ¦`),setTimeout(()=&gt;this.connect(e),this.retryWait))}),this.socket.addEventListener(&quot;error&quot;,r=&gt;{}),await new Promise((r,s)=&gt;{this.socket.addEventListener(&quot;open&quot;,()=&gt;{console.log(&quot;WebSocket connected&quot;),r()}),this.socket.addEventListener(&quot;error&quot;,o=&gt;{s(o)})})}catch{}}enqueue(e){this.resolvers.length?this.resolvers.shift()(e):this.messageQueue.push(e)}nextMessage(){return new Promise(e=&gt;{this.messageQueue.length?e(this.messageQueue.shift()):this.resolvers.push(e)})}async*messages(){for(;;)yield await this.nextMessage()}async sendMessage(e){var t;if(((t=this.socket)==null?void 0:t.readyState)!==WebSocket.OPEN)throw new Error(&quot;WebSocket is not open&quot;);typeof e==&quot;string&quot;||e instanceof Uint8Array?this.socket.send(e):this.socket.send(JSON.stringify(e))}async disconnect(){this.shouldReconnect=!1,this.resolvers.forEach(e=&gt;e(new MessageEvent(&quot;close&quot;))),this.resolvers=[],this.messageQueue=[],this.socket&amp;&amp;(this.socket.close(),this.socket=null)}}const Mi=new n8,tI=to(n=&gt;({webSocketAddress:&quot;ws://localhost:&quot;+(window.WEBSOCKET_PORT||8765),sendData:i=&gt;{},setWebSocketAddress:i=&gt;n({webSocketAddress:i})})),ix=2,xo=4,oa=4,Vi=4,ll=new Int32Array(2),NC=new Float32Array(ll.buffer),DC=new Float64Array(ll.buffer),Jm=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var SS;(function(n){n[n.UTF8_BYTES=1]=&quot;UTF8_BYTES&quot;,n[n.UTF16_STRING=2]=&quot;UTF16_STRING&quot;})(SS||(SS={}));class Od{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Od(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)&lt;&lt;24&gt;&gt;24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)&lt;&lt;16&gt;&gt;16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]&lt;&lt;8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]&lt;&lt;8|this.bytes_[e+2]&lt;&lt;16|this.bytes_[e+3]&lt;&lt;24}readUint32(e){return this.readInt32(e)&gt;&gt;&gt;0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))&lt;&lt;BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))&lt;&lt;BigInt(32)))}readFloat32(e){return ll[0]=this.readInt32(e),NC[0]}readFloat64(e){return ll[Jm?0:1]=this.readInt32(e),ll[Jm?1:0]=this.readInt32(e+4),DC[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8,this.bytes_[e+2]=t&gt;&gt;16,this.bytes_[e+3]=t&gt;&gt;24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8,this.bytes_[e+2]=t&gt;&gt;16,this.bytes_[e+3]=t&gt;&gt;24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t&gt;&gt;BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t&gt;&gt;BigInt(32))))}writeFloat32(e,t){NC[0]=t,this.writeInt32(e,ll[0])}writeFloat64(e,t){DC[0]=t,this.writeInt32(e,ll[Jm?0:1]),this.writeInt32(e+4,ll[Jm?1:0])}getBufferIdentifier(){if(this.bytes_.length&lt;this.position_+xo+oa)throw new Error(&quot;FlatBuffers: ByteBuffer is too short to contain an identifier.&quot;);let e=&quot;&quot;;for(let t=0;t&lt;oa;t++)e+=String.fromCharCode(this.readInt8(this.position_+xo+t));return e}__offset(e,t){const i=e-this.readInt32(e);return t&lt;this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const i=this.readInt32(e);e+=xo;const r=this.bytes_.subarray(e,e+i);return t===SS.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return typeof e==&quot;string&quot;?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+xo}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=oa)throw new Error(&quot;FlatBuffers: file identifier must be length &quot;+oa);for(let t=0;t&lt;oa;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+xo+t))return!1;return!0}createScalarList(e,t){const i=[];for(let r=0;r&lt;t;++r){const s=e(r);s!==null&amp;&amp;i.push(s)}return i}createObjList(e,t){const i=[];for(let r=0;r&lt;t;++r){const s=e(r);s!==null&amp;&amp;i.push(s.unpack())}return i}}class Co{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let t;e?t=e:t=1024,this.bb=Od.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e&gt;this.minalign&amp;&amp;(this.minalign=e);const i=~(this.bb.capacity()-this.space+t)+1&amp;e-1;for(;this.space&lt;i+e+t;){const r=this.bb.capacity();this.bb=Co.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(e){for(let t=0;t&lt;e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){(this.force_defaults||t!==i)&amp;&amp;(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&amp;&amp;(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError(&quot;FlatBuffers: struct must be serialized inline.&quot;)}notNested(){if(this.isNested)throw new TypeError(&quot;FlatBuffers: object serialization must not be nested.&quot;)}slot(e){this.vtable!==null&amp;&amp;(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(t&amp;3221225472)throw new Error(&quot;FlatBuffers: cannot grow buffer beyond 2 gigabytes.&quot;);const i=t&lt;&lt;1,r=Od.allocate(i);return r.setPosition(i-t),r.bytes().set(e.bytes(),i-t),r}addOffset(e){this.prep(xo,0),this.writeInt32(this.offset()-e+xo)}startObject(e){this.notNested(),this.vtable==null&amp;&amp;(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t&lt;e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error(&quot;FlatBuffers: endObject called without startObject&quot;);this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t&gt;=0&amp;&amp;this.vtable[t]==0;t--);const i=t+1;for(;t&gt;=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);const r=2;this.addInt16(e-this.object_start);const s=(i+r)*ix;this.addInt16(s);let o=0;const l=this.space;e:for(t=0;t&lt;this.vtables.length;t++){const u=this.bb.capacity()-this.vtables[t];if(s==this.bb.readInt16(u)){for(let h=ix;h&lt;s;h+=ix)if(this.bb.readInt16(l+h)!=this.bb.readInt16(u+h))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){const r=i?Vi:0;if(t){const s=t;if(this.prep(this.minalign,xo+oa+r),s.length!=oa)throw new TypeError(&quot;FlatBuffers: file identifier must be length &quot;+oa);for(let o=oa-1;o&gt;=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,xo+r),this.addOffset(e),r&amp;&amp;this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(t&lt;this.bb.readInt16(r)&amp;&amp;this.bb.readInt16(r+t)!=0))throw new TypeError(&quot;FlatBuffers: field &quot;+t+&quot; must be set&quot;)}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(xo,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(e==null)return 0;let t;return e instanceof Uint8Array?t=e:t=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e==&quot;string&quot;?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let i=0;i&lt;e.length;++i){const r=e[i];if(r!==null)t.push(this.createObjectOffset(r));else throw new TypeError(&quot;FlatBuffers: Argument for createObjectOffsetList cannot contain null.&quot;)}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}var Bn=(n=&gt;(n[n.PING=0]=&quot;PING&quot;,n[n.PONG=1]=&quot;PONG&quot;,n[n.UPDATE_SCENE=2]=&quot;UPDATE_SCENE&quot;,n[n.UPDATE_SERVER=3]=&quot;UPDATE_SERVER&quot;,n[n.MESH_INFO_CALLBACK=4]=&quot;MESH_INFO_CALLBACK&quot;,n[n.MESH_INFO_REPLY=5]=&quot;MESH_INFO_REPLY&quot;,n[n.LIST_WEB_CLIENTS=6]=&quot;LIST_WEB_CLIENTS&quot;,n[n.LIST_FILE_OBJECTS=7]=&quot;LIST_FILE_OBJECTS&quot;,n[n.LIST_PROCEDURES=8]=&quot;LIST_PROCEDURES&quot;,n[n.RUN_PROCEDURE=9]=&quot;RUN_PROCEDURE&quot;,n[n.ERROR=10]=&quot;ERROR&quot;,n[n.SERVER_REPLY=11]=&quot;SERVER_REPLY&quot;,n[n.VIEW_FILE_OBJECT=12]=&quot;VIEW_FILE_OBJECT&quot;,n[n.DELETE_FILE_OBJECT=13]=&quot;DELETE_FILE_OBJECT&quot;,n[n.START_NEW_NODE_EDITOR=14]=&quot;START_NEW_NODE_EDITOR&quot;,n[n.START_FILE_IN_LOCAL_APP=15]=&quot;START_FILE_IN_LOCAL_APP&quot;,n[n.SCREENSHOT=16]=&quot;SCREENSHOT&quot;,n))(Bn||{}),si=(n=&gt;(n[n.WEB=0]=&quot;WEB&quot;,n[n.LOCAL=1]=&quot;LOCAL&quot;,n[n.SERVER=2]=&quot;SERVER&quot;,n))(si||{});class js{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsWebClient(e,t){return(t||new js).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsWebClient(e,t){return e.setPosition(e.position()+Vi),(t||new js).__init(e.readInt32(e.position())+e.position(),e)}instanceId(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}address(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}port(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0}static startWebClient(e){e.startObject(4)}static addInstanceId(e,t){e.addFieldInt32(0,t,0)}static addName(e,t){e.addFieldOffset(1,t,0)}static addAddress(e,t){e.addFieldOffset(2,t,0)}static addPort(e,t){e.addFieldInt32(3,t,0)}static endWebClient(e){return e.endObject()}static createWebClient(e,t,i,r,s){return js.startWebClient(e),js.addInstanceId(e,t),js.addName(e,i),js.addAddress(e,r),js.addPort(e,s),js.endWebClient(e)}unpack(){return new i8(this.instanceId(),this.name(),this.address(),this.port())}unpackTo(e){e.instanceId=this.instanceId(),e.name=this.name(),e.address=this.address(),e.port=this.port()}}class i8{constructor(e=0,t=null,i=null,r=0){this.instanceId=e,this.name=t,this.address=i,this.port=r}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.address!==null?e.createString(this.address):0;return js.createWebClient(e,this.instanceId,t,i,this.port)}}class Qr{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMesh(e,t){return(t||new Qr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMesh(e,t){return e.setPosition(e.position()+Vi),(t||new Qr).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}indices(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+e*4):0}indicesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}indicesArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}vertices(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}verticesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}verticesArray(){const e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}parentName(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}static startMesh(e){e.startObject(4)}static addName(e,t){e.addFieldOffset(0,t,0)}static addIndices(e,t){e.addFieldOffset(1,t,0)}static createIndicesVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addInt32(t[i]);return e.endVector()}static startIndicesVector(e,t){e.startVector(4,t,4)}static addVertices(e,t){e.addFieldOffset(2,t,0)}static createVerticesVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startVerticesVector(e,t){e.startVector(4,t,4)}static addParentName(e,t){e.addFieldOffset(3,t,0)}static endMesh(e){return e.endObject()}static createMesh(e,t,i,r,s){return Qr.startMesh(e),Qr.addName(e,t),Qr.addIndices(e,i),Qr.addVertices(e,r),Qr.addParentName(e,s),Qr.endMesh(e)}unpack(){return new r8(this.name(),this.bb.createScalarList(this.indices.bind(this),this.indicesLength()),this.bb.createScalarList(this.vertices.bind(this),this.verticesLength()),this.parentName())}unpackTo(e){e.name=this.name(),e.indices=this.bb.createScalarList(this.indices.bind(this),this.indicesLength()),e.vertices=this.bb.createScalarList(this.vertices.bind(this),this.verticesLength()),e.parentName=this.parentName()}}class r8{constructor(e=null,t=[],i=[],r=null){this.name=e,this.indices=t,this.vertices=i,this.parentName=r}pack(e){const t=this.name!==null?e.createString(this.name):0,i=Qr.createIndicesVector(e,this.indices),r=Qr.createVerticesVector(e,this.vertices),s=this.parentName!==null?e.createString(this.parentName):0;return Qr.createMesh(e,t,i,r,s)}}class hl{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsAppendMesh(e,t){return(t||new hl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsAppendMesh(e,t){return e.setPosition(e.position()+Vi),(t||new hl).__init(e.readInt32(e.position())+e.position(),e)}mesh(e){const t=this.bb.__offset(this.bb_pos,4);return t?(e||new Qr).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startAppendMesh(e){e.startObject(1)}static addMesh(e,t){e.addFieldOffset(0,t,0)}static endAppendMesh(e){return e.endObject()}static createAppendMesh(e,t){return hl.startAppendMesh(e),hl.addMesh(e,t),hl.endAppendMesh(e)}unpack(){return new s8(this.mesh()!==null?this.mesh().unpack():null)}unpackTo(e){e.mesh=this.mesh()!==null?this.mesh().unpack():null}}class s8{constructor(e=null){this.mesh=e}pack(e){const t=this.mesh!==null?this.mesh.pack(e):0;return hl.createAppendMesh(e,t)}}class Ws{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMeshInfo(e,t){return(t||new Ws).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMeshInfo(e,t){return e.setPosition(e.position()+Vi),(t||new Ws).__init(e.readInt32(e.position())+e.position(),e)}objectName(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}faceIndex(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}jsonData(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}fileName(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}static startMeshInfo(e){e.startObject(4)}static addObjectName(e,t){e.addFieldOffset(0,t,0)}static addFaceIndex(e,t){e.addFieldInt32(1,t,0)}static addJsonData(e,t){e.addFieldOffset(2,t,0)}static addFileName(e,t){e.addFieldOffset(3,t,0)}static endMeshInfo(e){return e.endObject()}static createMeshInfo(e,t,i,r,s){return Ws.startMeshInfo(e),Ws.addObjectName(e,t),Ws.addFaceIndex(e,i),Ws.addJsonData(e,r),Ws.addFileName(e,s),Ws.endMeshInfo(e)}unpack(){return new o8(this.objectName(),this.faceIndex(),this.jsonData(),this.fileName())}unpackTo(e){e.objectName=this.objectName(),e.faceIndex=this.faceIndex(),e.jsonData=this.jsonData(),e.fileName=this.fileName()}}class o8{constructor(e=null,t=0,i=null,r=null){this.objectName=e,this.faceIndex=t,this.jsonData=i,this.fileName=r}pack(e){const t=this.objectName!==null?e.createString(this.objectName):0,i=this.jsonData!==null?e.createString(this.jsonData):0,r=this.fileName!==null?e.createString(this.fileName):0;return Ws.createMeshInfo(e,t,this.faceIndex,i,r)}}var ii=(n=&gt;(n[n.UNKNOWN=0]=&quot;UNKNOWN&quot;,n[n.STRING=1]=&quot;STRING&quot;,n[n.FLOAT=2]=&quot;FLOAT&quot;,n[n.INTEGER=3]=&quot;INTEGER&quot;,n[n.BOOLEAN=4]=&quot;BOOLEAN&quot;,n[n.ARRAY=6]=&quot;ARRAY&quot;,n))(ii||{}),D0=(n=&gt;(n[n.TUPLE=0]=&quot;TUPLE&quot;,n[n.LIST=1]=&quot;LIST&quot;,n[n.SET=2]=&quot;SET&quot;,n))(D0||{});class Ht{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsValue(e,t){return(t||new Ht).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsValue(e,t){return e.setPosition(e.position()+Vi),(t||new Ht).__init(e.readInt32(e.position())+e.position(),e)}stringValue(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}floatValue(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0}integerValue(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0}booleanValue(){const e=this.bb.__offset(this.bb_pos,10);return e?!!this.bb.readInt8(this.bb_pos+e):!1}arrayValue(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}arrayValueLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}arrayValueType(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt8(this.bb_pos+e):ii.UNKNOWN}arrayLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):0}arrayType(){const e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt8(this.bb_pos+e):D0.TUPLE}arrayAnyLength(){const e=this.bb.__offset(this.bb_pos,20);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startValue(e){e.startObject(9)}static addStringValue(e,t){e.addFieldOffset(0,t,0)}static addFloatValue(e,t){e.addFieldFloat32(1,t,0)}static addIntegerValue(e,t){e.addFieldInt32(2,t,0)}static addBooleanValue(e,t){e.addFieldInt8(3,+t,0)}static addArrayValue(e,t){e.addFieldOffset(4,t,0)}static createArrayValueVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startArrayValueVector(e,t){e.startVector(4,t,4)}static addArrayValueType(e,t){e.addFieldInt8(5,t,ii.UNKNOWN)}static addArrayLength(e,t){e.addFieldInt32(6,t,0)}static addArrayType(e,t){e.addFieldInt8(7,t,D0.TUPLE)}static addArrayAnyLength(e,t){e.addFieldInt8(8,+t,0)}static endValue(e){return e.endObject()}static createValue(e,t,i,r,s,o,l,u,h,f){return Ht.startValue(e),Ht.addStringValue(e,t),Ht.addFloatValue(e,i),Ht.addIntegerValue(e,r),Ht.addBooleanValue(e,s),Ht.addArrayValue(e,o),Ht.addArrayValueType(e,l),Ht.addArrayLength(e,u),Ht.addArrayType(e,h),Ht.addArrayAnyLength(e,f),Ht.endValue(e)}unpack(){return new a8(this.stringValue(),this.floatValue(),this.integerValue(),this.booleanValue(),this.bb.createObjList(this.arrayValue.bind(this),this.arrayValueLength()),this.arrayValueType(),this.arrayLength(),this.arrayType(),this.arrayAnyLength())}unpackTo(e){e.stringValue=this.stringValue(),e.floatValue=this.floatValue(),e.integerValue=this.integerValue(),e.booleanValue=this.booleanValue(),e.arrayValue=this.bb.createObjList(this.arrayValue.bind(this),this.arrayValueLength()),e.arrayValueType=this.arrayValueType(),e.arrayLength=this.arrayLength(),e.arrayType=this.arrayType(),e.arrayAnyLength=this.arrayAnyLength()}}class a8{constructor(e=null,t=0,i=0,r=!1,s=[],o=ii.UNKNOWN,l=0,u=D0.TUPLE,h=!1){this.stringValue=e,this.floatValue=t,this.integerValue=i,this.booleanValue=r,this.arrayValue=s,this.arrayValueType=o,this.arrayLength=l,this.arrayType=u,this.arrayAnyLength=h}pack(e){const t=this.stringValue!==null?e.createString(this.stringValue):0,i=Ht.createArrayValueVector(e,e.createObjectOffsetList(this.arrayValue));return Ht.createValue(e,t,this.floatValue,this.integerValue,this.booleanValue,i,this.arrayValueType,this.arrayLength,this.arrayType,this.arrayAnyLength)}}class Nn{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsParameter(e,t){return(t||new Nn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsParameter(e,t){return e.setPosition(e.position()+Vi),(t||new Nn).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}type(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):ii.UNKNOWN}value(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new Ht).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}defaultValue(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new Ht).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}options(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}optionsLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startParameter(e){e.startObject(5)}static addName(e,t){e.addFieldOffset(0,t,0)}static addType(e,t){e.addFieldInt8(1,t,ii.UNKNOWN)}static addValue(e,t){e.addFieldOffset(2,t,0)}static addDefaultValue(e,t){e.addFieldOffset(3,t,0)}static addOptions(e,t){e.addFieldOffset(4,t,0)}static createOptionsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startOptionsVector(e,t){e.startVector(4,t,4)}static endParameter(e){return e.endObject()}unpack(){return new l8(this.name(),this.type(),this.value()!==null?this.value().unpack():null,this.defaultValue()!==null?this.defaultValue().unpack():null,this.bb.createObjList(this.options.bind(this),this.optionsLength()))}unpackTo(e){e.name=this.name(),e.type=this.type(),e.value=this.value()!==null?this.value().unpack():null,e.defaultValue=this.defaultValue()!==null?this.defaultValue().unpack():null,e.options=this.bb.createObjList(this.options.bind(this),this.optionsLength())}}class l8{constructor(e=null,t=ii.UNKNOWN,i=null,r=null,s=[]){this.name=e,this.type=t,this.value=i,this.defaultValue=r,this.options=s}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.value!==null?this.value.pack(e):0,r=this.defaultValue!==null?this.defaultValue.pack(e):0,s=Nn.createOptionsVector(e,e.createObjectOffsetList(this.options));return Nn.startParameter(e),Nn.addName(e,t),Nn.addType(e,this.type),Nn.addValue(e,i),Nn.addDefaultValue(e,r),Nn.addOptions(e,s),Nn.endParameter(e)}}class Zi{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsProcedureStart(e,t){return(t||new Zi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsProcedureStart(e,t){return e.setPosition(e.position()+Vi),(t||new Zi).__init(e.readInt32(e.position())+e.position(),e)}procedureName(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}procedureIdString(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}parameters(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new Nn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}parametersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startProcedureStart(e){e.startObject(3)}static addProcedureName(e,t){e.addFieldOffset(0,t,0)}static addProcedureIdString(e,t){e.addFieldOffset(1,t,0)}static addParameters(e,t){e.addFieldOffset(2,t,0)}static createParametersVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startParametersVector(e,t){e.startVector(4,t,4)}static endProcedureStart(e){return e.endObject()}static createProcedureStart(e,t,i,r){return Zi.startProcedureStart(e),Zi.addProcedureName(e,t),Zi.addProcedureIdString(e,i),Zi.addParameters(e,r),Zi.endProcedureStart(e)}unpack(){return new c8(this.procedureName(),this.procedureIdString(),this.bb.createObjList(this.parameters.bind(this),this.parametersLength()))}unpackTo(e){e.procedureName=this.procedureName(),e.procedureIdString=this.procedureIdString(),e.parameters=this.bb.createObjList(this.parameters.bind(this),this.parametersLength())}}class c8{constructor(e=null,t=null,i=[]){this.procedureName=e,this.procedureIdString=t,this.parameters=i}pack(e){const t=this.procedureName!==null?e.createString(this.procedureName):0,i=this.procedureIdString!==null?e.createString(this.procedureIdString):0,r=Zi.createParametersVector(e,e.createObjectOffsetList(this.parameters));return Zi.createProcedureStart(e,t,i,r)}}var To=(n=&gt;(n[n.IFC=0]=&quot;IFC&quot;,n[n.GLB=1]=&quot;GLB&quot;,n[n.SQLITE=2]=&quot;SQLITE&quot;,n[n.XLSX=3]=&quot;XLSX&quot;,n[n.CSV=4]=&quot;CSV&quot;,n))(To||{});class bo{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFileArg(e,t){return(t||new bo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFileArg(e,t){return e.setPosition(e.position()+Vi),(t||new bo).__init(e.readInt32(e.position())+e.position(),e)}argName(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fileType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):To.IFC}static startFileArg(e){e.startObject(2)}static addArgName(e,t){e.addFieldOffset(0,t,0)}static addFileType(e,t){e.addFieldInt8(1,t,To.IFC)}static endFileArg(e){return e.endObject()}static createFileArg(e,t,i){return bo.startFileArg(e),bo.addArgName(e,t),bo.addFileType(e,i),bo.endFileArg(e)}unpack(){return new u8(this.argName(),this.fileType())}unpackTo(e){e.argName=this.argName(),e.fileType=this.fileType()}}class u8{constructor(e=null,t=To.IFC){this.argName=e,this.fileType=t}pack(e){const t=this.argName!==null?e.createString(this.argName):0;return bo.createFileArg(e,t,this.fileType)}}var I0=(n=&gt;(n[n.IDLE=0]=&quot;IDLE&quot;,n[n.RUNNING=1]=&quot;RUNNING&quot;,n[n.FINISHED=2]=&quot;FINISHED&quot;,n[n.ERROR=3]=&quot;ERROR&quot;,n))(I0||{});class $i{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsProcedure(e,t){return(t||new $i).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsProcedure(e,t){return e.setPosition(e.position()+Vi),(t||new $i).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}scriptFileLocation(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}parameters(e,t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new Nn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}parametersLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}fileInputs(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new bo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fileInputsLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}fileOutputs(e,t){const i=this.bb.__offset(this.bb_pos,14);return i?(t||new bo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fileOutputsLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}state(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt8(this.bb_pos+e):I0.IDLE}isComponent(){const e=this.bb.__offset(this.bb_pos,18);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startProcedure(e){e.startObject(8)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDescription(e,t){e.addFieldOffset(1,t,0)}static addScriptFileLocation(e,t){e.addFieldOffset(2,t,0)}static addParameters(e,t){e.addFieldOffset(3,t,0)}static createParametersVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startParametersVector(e,t){e.startVector(4,t,4)}static addFileInputs(e,t){e.addFieldOffset(4,t,0)}static createFileInputsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startFileInputsVector(e,t){e.startVector(4,t,4)}static addFileOutputs(e,t){e.addFieldOffset(5,t,0)}static createFileOutputsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startFileOutputsVector(e,t){e.startVector(4,t,4)}static addState(e,t){e.addFieldInt8(6,t,I0.IDLE)}static addIsComponent(e,t){e.addFieldInt8(7,+t,0)}static endProcedure(e){return e.endObject()}static createProcedure(e,t,i,r,s,o,l,u,h){return $i.startProcedure(e),$i.addName(e,t),$i.addDescription(e,i),$i.addScriptFileLocation(e,r),$i.addParameters(e,s),$i.addFileInputs(e,o),$i.addFileOutputs(e,l),$i.addState(e,u),$i.addIsComponent(e,h),$i.endProcedure(e)}unpack(){return new h8(this.name(),this.description(),this.scriptFileLocation(),this.bb.createObjList(this.parameters.bind(this),this.parametersLength()),this.bb.createObjList(this.fileInputs.bind(this),this.fileInputsLength()),this.bb.createObjList(this.fileOutputs.bind(this),this.fileOutputsLength()),this.state(),this.isComponent())}unpackTo(e){e.name=this.name(),e.description=this.description(),e.scriptFileLocation=this.scriptFileLocation(),e.parameters=this.bb.createObjList(this.parameters.bind(this),this.parametersLength()),e.fileInputs=this.bb.createObjList(this.fileInputs.bind(this),this.fileInputsLength()),e.fileOutputs=this.bb.createObjList(this.fileOutputs.bind(this),this.fileOutputsLength()),e.state=this.state(),e.isComponent=this.isComponent()}}class h8{constructor(e=null,t=null,i=null,r=[],s=[],o=[],l=I0.IDLE,u=!1){this.name=e,this.description=t,this.scriptFileLocation=i,this.parameters=r,this.fileInputs=s,this.fileOutputs=o,this.state=l,this.isComponent=u}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.description!==null?e.createString(this.description):0,r=this.scriptFileLocation!==null?e.createString(this.scriptFileLocation):0,s=$i.createParametersVector(e,e.createObjectOffsetList(this.parameters)),o=$i.createFileInputsVector(e,e.createObjectOffsetList(this.fileInputs)),l=$i.createFileOutputsVector(e,e.createObjectOffsetList(this.fileOutputs));return $i.createProcedure(e,t,i,r,s,o,l,this.state,this.isComponent)}}class Es{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsProcedureStore(e,t){return(t||new Es).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsProcedureStore(e,t){return e.setPosition(e.position()+Vi),(t||new Es).__init(e.readInt32(e.position())+e.position(),e)}procedures(e,t){const i=this.bb.__offset(this.bb_pos,4);return i?(t||new $i).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}proceduresLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}startProcedure(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Zi).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startProcedureStore(e){e.startObject(2)}static addProcedures(e,t){e.addFieldOffset(0,t,0)}static createProceduresVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startProceduresVector(e,t){e.startVector(4,t,4)}static addStartProcedure(e,t){e.addFieldOffset(1,t,0)}static endProcedureStore(e){return e.endObject()}unpack(){return new f8(this.bb.createObjList(this.procedures.bind(this),this.proceduresLength()),this.startProcedure()!==null?this.startProcedure().unpack():null)}unpackTo(e){e.procedures=this.bb.createObjList(this.procedures.bind(this),this.proceduresLength()),e.startProcedure=this.startProcedure()!==null?this.startProcedure().unpack():null}}class f8{constructor(e=[],t=null){this.procedures=e,this.startProcedure=t}pack(e){const t=Es.createProceduresVector(e,e.createObjectOffsetList(this.procedures)),i=this.startProcedure!==null?this.startProcedure.pack(e):0;return Es.startProcedureStore(e),Es.addProcedures(e,t),Es.addStartProcedure(e,i),Es.endProcedureStore(e)}}var P0=(n=&gt;(n[n.DESIGN=0]=&quot;DESIGN&quot;,n[n.ANALYSIS=1]=&quot;ANALYSIS&quot;,n[n.FABRICATE=2]=&quot;FABRICATE&quot;,n))(P0||{});class fn{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFileObject(e,t){return(t||new fn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFileObject(e,t){return e.setPosition(e.position()+Vi),(t||new fn).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fileType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):To.IFC}purpose(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt8(this.bb_pos+e):P0.DESIGN}filepath(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}filedata(e){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}filedataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}filedataArray(){const e=this.bb.__offset(this.bb_pos,12);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}glbFile(e){const t=this.bb.__offset(this.bb_pos,14);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}ifcsqliteFile(e){const t=this.bb.__offset(this.bb_pos,16);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isProcedureOutput(){const e=this.bb.__offset(this.bb_pos,18);return e?!!this.bb.readInt8(this.bb_pos+e):!1}procedureParent(e){const t=this.bb.__offset(this.bb_pos,20);return t?(e||new Zi).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}compressed(){const e=this.bb.__offset(this.bb_pos,22);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startFileObject(e){e.startObject(10)}static addName(e,t){e.addFieldOffset(0,t,0)}static addFileType(e,t){e.addFieldInt8(1,t,To.IFC)}static addPurpose(e,t){e.addFieldInt8(2,t,P0.DESIGN)}static addFilepath(e,t){e.addFieldOffset(3,t,0)}static addFiledata(e,t){e.addFieldOffset(4,t,0)}static createFiledataVector(e,t){e.startVector(1,t.length,1);for(let i=t.length-1;i&gt;=0;i--)e.addInt8(t[i]);return e.endVector()}static startFiledataVector(e,t){e.startVector(1,t,1)}static addGlbFile(e,t){e.addFieldOffset(5,t,0)}static addIfcsqliteFile(e,t){e.addFieldOffset(6,t,0)}static addIsProcedureOutput(e,t){e.addFieldInt8(7,+t,0)}static addProcedureParent(e,t){e.addFieldOffset(8,t,0)}static addCompressed(e,t){e.addFieldInt8(9,+t,0)}static endFileObject(e){return e.endObject()}unpack(){return new d8(this.name(),this.fileType(),this.purpose(),this.filepath(),this.bb.createScalarList(this.filedata.bind(this),this.filedataLength()),this.glbFile()!==null?this.glbFile().unpack():null,this.ifcsqliteFile()!==null?this.ifcsqliteFile().unpack():null,this.isProcedureOutput(),this.procedureParent()!==null?this.procedureParent().unpack():null,this.compressed())}unpackTo(e){e.name=this.name(),e.fileType=this.fileType(),e.purpose=this.purpose(),e.filepath=this.filepath(),e.filedata=this.bb.createScalarList(this.filedata.bind(this),this.filedataLength()),e.glbFile=this.glbFile()!==null?this.glbFile().unpack():null,e.ifcsqliteFile=this.ifcsqliteFile()!==null?this.ifcsqliteFile().unpack():null,e.isProcedureOutput=this.isProcedureOutput(),e.procedureParent=this.procedureParent()!==null?this.procedureParent().unpack():null,e.compressed=this.compressed()}}class d8{constructor(e=null,t=To.IFC,i=P0.DESIGN,r=null,s=[],o=null,l=null,u=!1,h=null,f=!1){this.name=e,this.fileType=t,this.purpose=i,this.filepath=r,this.filedata=s,this.glbFile=o,this.ifcsqliteFile=l,this.isProcedureOutput=u,this.procedureParent=h,this.compressed=f}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.filepath!==null?e.createString(this.filepath):0,r=fn.createFiledataVector(e,this.filedata),s=this.glbFile!==null?this.glbFile.pack(e):0,o=this.ifcsqliteFile!==null?this.ifcsqliteFile.pack(e):0,l=this.procedureParent!==null?this.procedureParent.pack(e):0;return fn.startFileObject(e),fn.addName(e,t),fn.addFileType(e,this.fileType),fn.addPurpose(e,this.purpose),fn.addFilepath(e,i),fn.addFiledata(e,r),fn.addGlbFile(e,s),fn.addIfcsqliteFile(e,o),fn.addIsProcedureOutput(e,this.isProcedureOutput),fn.addProcedureParent(e,l),fn.addCompressed(e,this.compressed),fn.endFileObject(e)}}class rr{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsCameraParams(e,t){return(t||new rr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCameraParams(e,t){return e.setPosition(e.position()+Vi),(t||new rr).__init(e.readInt32(e.position())+e.position(),e)}position(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}positionLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}positionArray(){const e=this.bb.__offset(this.bb_pos,4);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}lookAt(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}lookAtLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}lookAtArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}up(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}upLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}upArray(){const e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}fov(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):60}near(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat32(this.bb_pos+e):.1}far(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readFloat32(this.bb_pos+e):1e3}forceCamera(){const e=this.bb.__offset(this.bb_pos,16);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startCameraParams(e){e.startObject(7)}static addPosition(e,t){e.addFieldOffset(0,t,0)}static createPositionVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startPositionVector(e,t){e.startVector(4,t,4)}static addLookAt(e,t){e.addFieldOffset(1,t,0)}static createLookAtVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startLookAtVector(e,t){e.startVector(4,t,4)}static addUp(e,t){e.addFieldOffset(2,t,0)}static createUpVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startUpVector(e,t){e.startVector(4,t,4)}static addFov(e,t){e.addFieldFloat32(3,t,60)}static addNear(e,t){e.addFieldFloat32(4,t,.1)}static addFar(e,t){e.addFieldFloat32(5,t,1e3)}static addForceCamera(e,t){e.addFieldInt8(6,+t,0)}static endCameraParams(e){return e.endObject()}static createCameraParams(e,t,i,r,s,o,l,u){return rr.startCameraParams(e),rr.addPosition(e,t),rr.addLookAt(e,i),rr.addUp(e,r),rr.addFov(e,s),rr.addNear(e,o),rr.addFar(e,l),rr.addForceCamera(e,u),rr.endCameraParams(e)}unpack(){return new p8(this.bb.createScalarList(this.position.bind(this),this.positionLength()),this.bb.createScalarList(this.lookAt.bind(this),this.lookAtLength()),this.bb.createScalarList(this.up.bind(this),this.upLength()),this.fov(),this.near(),this.far(),this.forceCamera())}unpackTo(e){e.position=this.bb.createScalarList(this.position.bind(this),this.positionLength()),e.lookAt=this.bb.createScalarList(this.lookAt.bind(this),this.lookAtLength()),e.up=this.bb.createScalarList(this.up.bind(this),this.upLength()),e.fov=this.fov(),e.near=this.near(),e.far=this.far(),e.forceCamera=this.forceCamera()}}class p8{constructor(e=[],t=[],i=[],r=60,s=.1,o=1e3,l=!1){this.position=e,this.lookAt=t,this.up=i,this.fov=r,this.near=s,this.far=o,this.forceCamera=l}pack(e){const t=rr.createPositionVector(e,this.position),i=rr.createLookAtVector(e,this.lookAt),r=rr.createUpVector(e,this.up);return rr.createCameraParams(e,t,i,r,this.fov,this.near,this.far,this.forceCamera)}}var gl=(n=&gt;(n[n.ADD=0]=&quot;ADD&quot;,n[n.REMOVE=1]=&quot;REMOVE&quot;,n[n.REPLACE=2]=&quot;REPLACE&quot;,n))(gl||{});class aa{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsScene(e,t){return(t||new aa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsScene(e,t){return e.setPosition(e.position()+Vi),(t||new aa).__init(e.readInt32(e.position())+e.position(),e)}operation(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):gl.ADD}cameraParams(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new rr).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}currentFile(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startScene(e){e.startObject(3)}static addOperation(e,t){e.addFieldInt8(0,t,gl.ADD)}static addCameraParams(e,t){e.addFieldOffset(1,t,0)}static addCurrentFile(e,t){e.addFieldOffset(2,t,0)}static endScene(e){return e.endObject()}unpack(){return new m8(this.operation(),this.cameraParams()!==null?this.cameraParams().unpack():null,this.currentFile()!==null?this.currentFile().unpack():null)}unpackTo(e){e.operation=this.operation(),e.cameraParams=this.cameraParams()!==null?this.cameraParams().unpack():null,e.currentFile=this.currentFile()!==null?this.currentFile().unpack():null}}class m8{constructor(e=gl.ADD,t=null,i=null){this.operation=e,this.cameraParams=t,this.currentFile=i}pack(e){const t=this.cameraParams!==null?this.cameraParams.pack(e):0,i=this.currentFile!==null?this.currentFile.pack(e):0;return aa.startScene(e),aa.addOperation(e,this.operation),aa.addCameraParams(e,t),aa.addCurrentFile(e,i),aa.endScene(e)}}class fl{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsScreenshot(e,t){return(t||new fl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsScreenshot(e,t){return e.setPosition(e.position()+Vi),(t||new fl).__init(e.readInt32(e.position())+e.position(),e)}pngFilePath(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}static startScreenshot(e){e.startObject(1)}static addPngFilePath(e,t){e.addFieldOffset(0,t,0)}static endScreenshot(e){return e.endObject()}static createScreenshot(e,t){return fl.startScreenshot(e),fl.addPngFilePath(e,t),fl.endScreenshot(e)}unpack(){return new g8(this.pngFilePath())}unpackTo(e){e.pngFilePath=this.pngFilePath()}}class g8{constructor(e=null){this.pngFilePath=e}pack(e){const t=this.pngFilePath!==null?e.createString(this.pngFilePath):0;return fl.createScreenshot(e,t)}}class hi{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsServer(e,t){return(t||new hi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsServer(e,t){return e.setPosition(e.position()+Vi),(t||new hi).__init(e.readInt32(e.position())+e.position(),e)}newFileObject(e){const t=this.bb.__offset(this.bb_pos,4);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}allFileObjects(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new fn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}allFileObjectsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}getFileObjectByName(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}getFileObjectByPath(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}deleteFileObject(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}startFileInLocalApp(e){const t=this.bb.__offset(this.bb_pos,14);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startServer(e){e.startObject(6)}static addNewFileObject(e,t){e.addFieldOffset(0,t,0)}static addAllFileObjects(e,t){e.addFieldOffset(1,t,0)}static createAllFileObjectsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startAllFileObjectsVector(e,t){e.startVector(4,t,4)}static addGetFileObjectByName(e,t){e.addFieldOffset(2,t,0)}static addGetFileObjectByPath(e,t){e.addFieldOffset(3,t,0)}static addDeleteFileObject(e,t){e.addFieldOffset(4,t,0)}static addStartFileInLocalApp(e,t){e.addFieldOffset(5,t,0)}static endServer(e){return e.endObject()}unpack(){return new y8(this.newFileObject()!==null?this.newFileObject().unpack():null,this.bb.createObjList(this.allFileObjects.bind(this),this.allFileObjectsLength()),this.getFileObjectByName(),this.getFileObjectByPath(),this.deleteFileObject()!==null?this.deleteFileObject().unpack():null,this.startFileInLocalApp()!==null?this.startFileInLocalApp().unpack():null)}unpackTo(e){e.newFileObject=this.newFileObject()!==null?this.newFileObject().unpack():null,e.allFileObjects=this.bb.createObjList(this.allFileObjects.bind(this),this.allFileObjectsLength()),e.getFileObjectByName=this.getFileObjectByName(),e.getFileObjectByPath=this.getFileObjectByPath(),e.deleteFileObject=this.deleteFileObject()!==null?this.deleteFileObject().unpack():null,e.startFileInLocalApp=this.startFileInLocalApp()!==null?this.startFileInLocalApp().unpack():null}}class y8{constructor(e=null,t=[],i=null,r=null,s=null,o=null){this.newFileObject=e,this.allFileObjects=t,this.getFileObjectByName=i,this.getFileObjectByPath=r,this.deleteFileObject=s,this.startFileInLocalApp=o}pack(e){const t=this.newFileObject!==null?this.newFileObject.pack(e):0,i=hi.createAllFileObjectsVector(e,e.createObjectOffsetList(this.allFileObjects)),r=this.getFileObjectByName!==null?e.createString(this.getFileObjectByName):0,s=this.getFileObjectByPath!==null?e.createString(this.getFileObjectByPath):0,o=this.deleteFileObject!==null?this.deleteFileObject.pack(e):0,l=this.startFileInLocalApp!==null?this.startFileInLocalApp.pack(e):0;return hi.startServer(e),hi.addNewFileObject(e,t),hi.addAllFileObjects(e,i),hi.addGetFileObjectByName(e,r),hi.addGetFileObjectByPath(e,s),hi.addDeleteFileObject(e,o),hi.addStartFileInLocalApp(e,l),hi.endServer(e)}}let nI=class dc{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsError(e,t){return(t||new dc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsError(e,t){return e.setPosition(e.position()+Vi),(t||new dc).__init(e.readInt32(e.position())+e.position(),e)}code(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}message(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startError(e){e.startObject(2)}static addCode(e,t){e.addFieldInt32(0,t,0)}static addMessage(e,t){e.addFieldOffset(1,t,0)}static endError(e){return e.endObject()}static createError(e,t,i){return dc.startError(e),dc.addCode(e,t),dc.addMessage(e,i),dc.endError(e)}unpack(){return new _8(this.code(),this.message())}unpackTo(e){e.code=this.code(),e.message=this.message()}};class _8{constructor(e=0,t=null){this.code=e,this.message=t}pack(e){const t=this.message!==null?e.createString(this.message):0;return nI.createError(e,this.code,t)}}class Xs{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsServerReply(e,t){return(t||new Xs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsServerReply(e,t){return e.setPosition(e.position()+Vi),(t||new Xs).__init(e.readInt32(e.position())+e.position(),e)}message(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fileObjects(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new fn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fileObjectsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}replyTo(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt8(this.bb_pos+e):Bn.PING}error(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new nI).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startServerReply(e){e.startObject(4)}static addMessage(e,t){e.addFieldOffset(0,t,0)}static addFileObjects(e,t){e.addFieldOffset(1,t,0)}static createFileObjectsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startFileObjectsVector(e,t){e.startVector(4,t,4)}static addReplyTo(e,t){e.addFieldInt8(2,t,Bn.PING)}static addError(e,t){e.addFieldOffset(3,t,0)}static endServerReply(e){return e.endObject()}unpack(){return new v8(this.message(),this.bb.createObjList(this.fileObjects.bind(this),this.fileObjectsLength()),this.replyTo(),this.error()!==null?this.error().unpack():null)}unpackTo(e){e.message=this.message(),e.fileObjects=this.bb.createObjList(this.fileObjects.bind(this),this.fileObjectsLength()),e.replyTo=this.replyTo(),e.error=this.error()!==null?this.error().unpack():null}}class v8{constructor(e=null,t=[],i=Bn.PING,r=null){this.message=e,this.fileObjects=t,this.replyTo=i,this.error=r}pack(e){const t=this.message!==null?e.createString(this.message):0,i=Xs.createFileObjectsVector(e,e.createObjectOffsetList(this.fileObjects)),r=this.error!==null?this.error.pack(e):0;return Xs.startServerReply(e),Xs.addMessage(e,t),Xs.addFileObjects(e,i),Xs.addReplyTo(e,this.replyTo),Xs.addError(e,r),Xs.endServerReply(e)}}class lt{constructor(){Qe(this,&quot;bb&quot;,null);Qe(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new lt).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+Vi),(t||new lt).__init(e.readInt32(e.position())+e.position(),e)}instanceId(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}commandType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Bn.PING}scene(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new aa).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}server(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new hi).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}meshInfo(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new Ws).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}targetGroup(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt8(this.bb_pos+e):si.WEB}clientType(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt8(this.bb_pos+e):si.WEB}targetId(){const e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt32(this.bb_pos+e):0}webClients(e,t){const i=this.bb.__offset(this.bb_pos,20);return i?(t||new js).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}webClientsLength(){const e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0}procedureStore(e){const t=this.bb.__offset(this.bb_pos,22);return t?(e||new Es).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}serverReply(e){const t=this.bb.__offset(this.bb_pos,24);return t?(e||new Xs).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}screenshot(e){const t=this.bb.__offset(this.bb_pos,26);return t?(e||new fl).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}package_(e){const t=this.bb.__offset(this.bb_pos,28);return t?(e||new hl).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startMessage(e){e.startObject(13)}static addInstanceId(e,t){e.addFieldInt32(0,t,0)}static addCommandType(e,t){e.addFieldInt8(1,t,Bn.PING)}static addScene(e,t){e.addFieldOffset(2,t,0)}static addServer(e,t){e.addFieldOffset(3,t,0)}static addMeshInfo(e,t){e.addFieldOffset(4,t,0)}static addTargetGroup(e,t){e.addFieldInt8(5,t,si.WEB)}static addClientType(e,t){e.addFieldInt8(6,t,si.WEB)}static addTargetId(e,t){e.addFieldInt32(7,t,0)}static addWebClients(e,t){e.addFieldOffset(8,t,0)}static createWebClientsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startWebClientsVector(e,t){e.startVector(4,t,4)}static addProcedureStore(e,t){e.addFieldOffset(9,t,0)}static addServerReply(e,t){e.addFieldOffset(10,t,0)}static addScreenshot(e,t){e.addFieldOffset(11,t,0)}static addPackage(e,t){e.addFieldOffset(12,t,0)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}unpack(){return new b8(this.instanceId(),this.commandType(),this.scene()!==null?this.scene().unpack():null,this.server()!==null?this.server().unpack():null,this.meshInfo()!==null?this.meshInfo().unpack():null,this.targetGroup(),this.clientType(),this.targetId(),this.bb.createObjList(this.webClients.bind(this),this.webClientsLength()),this.procedureStore()!==null?this.procedureStore().unpack():null,this.serverReply()!==null?this.serverReply().unpack():null,this.screenshot()!==null?this.screenshot().unpack():null,this.package_()!==null?this.package_().unpack():null)}unpackTo(e){e.instanceId=this.instanceId(),e.commandType=this.commandType(),e.scene=this.scene()!==null?this.scene().unpack():null,e.server=this.server()!==null?this.server().unpack():null,e.meshInfo=this.meshInfo()!==null?this.meshInfo().unpack():null,e.targetGroup=this.targetGroup(),e.clientType=this.clientType(),e.targetId=this.targetId(),e.webClients=this.bb.createObjList(this.webClients.bind(this),this.webClientsLength()),e.procedureStore=this.procedureStore()!==null?this.procedureStore().unpack():null,e.serverReply=this.serverReply()!==null?this.serverReply().unpack():null,e.screenshot=this.screenshot()!==null?this.screenshot().unpack():null,e.package_=this.package_()!==null?this.package_().unpack():null}}class b8{constructor(e=0,t=Bn.PING,i=null,r=null,s=null,o=si.WEB,l=si.WEB,u=0,h=[],f=null,p=null,m=null,g=null){this.instanceId=e,this.commandType=t,this.scene=i,this.server=r,this.meshInfo=s,this.targetGroup=o,this.clientType=l,this.targetId=u,this.webClients=h,this.procedureStore=f,this.serverReply=p,this.screenshot=m,this.package_=g}pack(e){const t=this.scene!==null?this.scene.pack(e):0,i=this.server!==null?this.server.pack(e):0,r=this.meshInfo!==null?this.meshInfo.pack(e):0,s=lt.createWebClientsVector(e,e.createObjectOffsetList(this.webClients)),o=this.procedureStore!==null?this.procedureStore.pack(e):0,l=this.serverReply!==null?this.serverReply.pack(e):0,u=this.screenshot!==null?this.screenshot.pack(e):0,h=this.package_!==null?this.package_.pack(e):0;return lt.startMessage(e),lt.addInstanceId(e,this.instanceId),lt.addCommandType(e,this.commandType),lt.addScene(e,t),lt.addServer(e,i),lt.addMeshInfo(e,r),lt.addTargetGroup(e,this.targetGroup),lt.addClientType(e,this.clientType),lt.addTargetId(e,this.targetId),lt.addWebClients(e,s),lt.addProcedureStore(e,o),lt.addServerReply(e,l),lt.addScreenshot(e,u),lt.addPackage(e,h),lt.endMessage(e)}}async function x8(n){try{console.log(&quot;Received ping from server. Replying with FlatBuffer message&quot;);const e=new Co(1024);lt.startMessage(e),lt.addInstanceId(e,Mi.instanceId),lt.addCommandType(e,Bn.PONG),lt.addTargetId(e,n.instanceId()),lt.addTargetGroup(e,si.LOCAL),lt.addClientType(e,si.WEB),e.finish(lt.endMessage(e));const t=e.asUint8Array();await Mi.sendMessage(t)}catch(e){console.error(&quot;Error replying to ping:&quot;,e)}}const ua=re.createRef(),wS=re.createRef(),ha=re.createRef(),wr=re.createRef(),ES=re.createRef(),Si=re.createRef(),qw=re.createRef(),Xy=re.createRef(),yl=re.createRef(),IC=re.createRef(),L0=new rs({color:&quot;blue&quot;,side:wi}),S8=new rs({color:8421504,metalness:.1,roughness:.5,flatShading:!0,side:wi});function w8(n,e=!1){const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),s={},o={},l=n[0].morphTargetsRelative,u=new It;let h=0;for(let f=0;f&lt;n.length;++f){const p=n[f];let m=0;if(t!==(p.index!==null))return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.&quot;),null;for(const g in p.attributes){if(!i.has(g))return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&#x27;. All geometries must have compatible attributes; make sure &quot;&#x27;+g+&#x27;&quot; attribute exists among all geometries, or in none of them.&#x27;),null;s[g]===void 0&amp;&amp;(s[g]=[]),s[g].push(p.attributes[g]),m++}if(m!==i.size)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. Make sure all geometries have the same number of attributes.&quot;),null;if(l!==p.morphTargetsRelative)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. .morphTargetsRelative must be consistent throughout all geometries.&quot;),null;for(const g in p.morphAttributes){if(!r.has(g))return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;.  .morphAttributes must be consistent throughout all geometries.&quot;),null;o[g]===void 0&amp;&amp;(o[g]=[]),o[g].push(p.morphAttributes[g])}if(e){let g;if(t)g=p.index.count;else if(p.attributes.position!==void 0)g=p.attributes.position.count;else return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. The geometry must have either an index or a position attribute&quot;),null;u.addGroup(h,g,f),h+=g}}if(t){let f=0;const p=[];for(let m=0;m&lt;n.length;++m){const g=n[m].index;for(let v=0;v&lt;g.count;++v)p.push(g.getX(v)+f);f+=n[m].attributes.position.count}u.setIndex(p)}for(const f in s){const p=PC(s[f]);if(!p)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the &quot;+f+&quot; attribute.&quot;),null;u.setAttribute(f,p)}for(const f in o){const p=o[f][0].length;if(p===0)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[f]=[];for(let m=0;m&lt;p;++m){const g=[];for(let x=0;x&lt;o[f].length;++x)g.push(o[f][x][m]);const v=PC(g);if(!v)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the &quot;+f+&quot; morphAttribute.&quot;),null;u.morphAttributes[f].push(v)}}return u}function PC(n){let e,t,i,r=-1,s=0;for(let h=0;h&lt;n.length;++h){const f=n[h];if(e===void 0&amp;&amp;(e=f.array.constructor),e!==f.array.constructor)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.&quot;),null;if(t===void 0&amp;&amp;(t=f.itemSize),t!==f.itemSize)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.&quot;),null;if(i===void 0&amp;&amp;(i=f.normalized),i!==f.normalized)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.&quot;),null;if(r===-1&amp;&amp;(r=f.gpuType),r!==f.gpuType)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.&quot;),null;s+=f.count*t}const o=new e(s),l=new Vt(o,t,i);let u=0;for(let h=0;h&lt;n.length;++h){const f=n[h];if(f.isInterleavedBufferAttribute){const p=u/t;for(let m=0,g=f.count;m&lt;g;m++)for(let v=0;v&lt;t;v++){const x=f.getComponent(m,v);l.setComponent(m+p,v,x)}}else o.set(f.array,u);u+=f.count*t}return r!==void 0&amp;&amp;(l.gpuType=r),l}function LC(n,e){if(e===HN)return console.warn(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.&quot;),n;if(e===A0||e===gw){let t=n.getIndex();if(t===null){const o=[],l=n.getAttribute(&quot;position&quot;);if(l!==void 0){for(let u=0;u&lt;l.count;u++)o.push(u);n.setIndex(o),t=n.getIndex()}else return console.error(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.&quot;),n}const i=t.count-2,r=[];if(e===A0)for(let o=1;o&lt;=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o&lt;i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&amp;&amp;console.error(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.&quot;);const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:&quot;,e),n}function E8(n,e){const t=[],i=new Map;let r=0;const s=n.attributes.position;return e.forEach(([l,u],h)=&gt;{const f=n.index.array.slice(l,l+u),p=new It;p.setAttribute(&quot;position&quot;,s),p.setIndex(Array.from(f));const m=new Ew(p),g=m.attributes.position.count,v=new Float32Array(g).fill(r);m.setAttribute(&quot;rangeId&quot;,new Vt(v,1)),t.push(m),i.set(h,r++)}),{geometry:w8(t,!1),rangeIdToIndex:i}}function T8(n,e){const t=n.capabilities.maxTextureSize,i=Math.min(e,t),r=Math.ceil(e/i),s=new Uint8Array(i*r).fill(255),o=new Qs(s,i,r,Xd,zr);o.minFilter=Ei,o.magFilter=Ei,o.wrapS=sr,o.wrapT=sr,o.needsUpdate=!0;const l={uVisibleTex:{value:o},uTexSize:{value:new Re(i,r)},uHighlighted:{value:-1}},u=`
    attribute float rangeId;
    varying float vRangeId;
    void main() {
      vRangeId = rangeId;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
    }
  `,h=`
    precision mediump float;
    varying float vRangeId;
    uniform sampler2D uVisibleTex;
    uniform vec2 uTexSize;
    uniform int uHighlighted;
    void main(){
      int rid = int(vRangeId + 0.5);
      int x = rid % int(uTexSize.x);
      int y = rid / int(uTexSize.x);
      vec2 uv = (vec2(float(x),float(y)) + 0.5) / uTexSize;
      float vis = texture2D(uVisibleTex,uv).r;
      if(vis &lt; 0.5) discard;
      if(rid == uHighlighted) gl_FragColor = vec4(0,0,1,1);
      else             gl_FragColor = vec4(0,0,0,1);
    }
  `;return new Br({uniforms:l,vertexShader:u,fragmentShader:h})}class Ni extends gn{constructor(t,i,r,s,o,l){super(t.clone(),i.clone());Qe(this,&quot;originalGeometry&quot;);Qe(this,&quot;originalMaterial&quot;);Qe(this,&quot;drawRanges&quot;);Qe(this,&quot;unique_key&quot;);Qe(this,&quot;is_design&quot;);Qe(this,&quot;ada_ext_data&quot;);Qe(this,&quot;selectedRanges&quot;,new Set);Qe(this,&quot;hiddenRanges&quot;,new Set);Qe(this,&quot;edgeMesh&quot;);Qe(this,&quot;rangeIdToIndex&quot;);Qe(this,&quot;edgeMaterial&quot;);Qe(this,&quot;_matSelected&quot;);Qe(this,&quot;_matInvisible&quot;);Qe(this,&quot;_usesVertexColorsFlag&quot;,!1);Qe(this,&quot;_baseColors&quot;);Qe(this,&quot;_selectionOverlay&quot;);Qe(this,&quot;_overlaySourceIndices&quot;);Qe(this,&quot;_raycast_inverseMatrix&quot;,new yt);Qe(this,&quot;_raycast_ray&quot;,new Cl);Qe(this,&quot;_raycast_sphere&quot;,new pi);Qe(this,&quot;_raycast_vA&quot;,new K);Qe(this,&quot;_raycast_vB&quot;,new K);Qe(this,&quot;_raycast_vC&quot;,new K);Qe(this,&quot;_raycast_uvA&quot;,new Re);Qe(this,&quot;_raycast_uvB&quot;,new Re);Qe(this,&quot;_raycast_uvC&quot;,new Re);Qe(this,&quot;_raycast_intersectionPoint&quot;,new K);Qe(this,&quot;_raycast_barycoord&quot;,new K);this.originalGeometry=t,this.originalMaterial=i.clone(),this.drawRanges=r,this.unique_key=s,this.is_design=o,this.ada_ext_data=l,this._matSelected=L0.clone(),this._matInvisible=new zi({visible:!1}),this._recomputeUsesVertexColorsFlag(),this.updateGroups()}updateGroups(){const t=this.geometry.index.count;this.geometry.clearGroups(),this._recomputeUsesVertexColorsFlag(),this._usesVertexColorsFlag||this._disposeSelectionOverlay(),this.material=[this.originalMaterial,this._matSelected,this._matInvisible];const i=Array.from(this.drawRanges.entries()).map(([s,[o,l]])=&gt;({id:s,s:o,c:l})).sort((s,o)=&gt;s.s-o.s);let r=0;for(const{id:s,s:o,c:l}of i){o&gt;r&amp;&amp;this.geometry.addGroup(r,o-r,0);let u=0;this.hiddenRanges.has(s)?u=2:this.selectedRanges.has(s)&amp;&amp;(u=this._usesVertexColorsFlag?0:1),this.geometry.addGroup(o,l,u),r=o+l}r&lt;t&amp;&amp;this.geometry.addGroup(r,t-r,0)}getEdgeOverlay(t){if(!this.edgeMesh){const{geometry:i,rangeIdToIndex:r}=E8(this.originalGeometry,this.drawRanges);this.rangeIdToIndex=r,this.updateWorldMatrix(!0,!1);const s=this.matrixWorld;this.edgeMaterial=T8(t,r.size),this.edgeMesh=new Tr(i,this.edgeMaterial),this.edgeMesh.layers.set(1),this.edgeMesh.applyMatrix4(s)}return this.edgeMesh}updateSelectionGroups(t){this.selectedRanges=new Set(t),this._usesVertexColorsFlag&amp;&amp;this._rebuildSelectionOverlay(t),this.updateGroups(),this.edgeMaterial&amp;&amp;this.rangeIdToIndex&amp;&amp;(this.edgeMaterial.uniforms.uHighlighted.value=t.length?this.rangeIdToIndex.get(t[0]):-1)}setBaseColorsFromCurrent(){const t=this.geometry.getAttribute(&quot;color&quot;);if(t){const i=t.array;this._baseColors=new Float32Array(i.length),this._baseColors.set(i),this._recomputeUsesVertexColorsFlag();const r=Array.isArray(this.material)?this.material[0]:this.originalMaterial;r&amp;&amp;&quot;vertexColors&quot;in r&amp;&amp;(r.vertexColors=!0,r.needsUpdate=!0)}}reapplySelectionHighlight(){this.updateSelectionGroups(Array.from(this.selectedRanges))}disableVertexColorsAndResetMaterial(){this.geometry.getAttribute(&quot;color&quot;)&amp;&amp;this.geometry.deleteAttribute(&quot;color&quot;),this._baseColors=void 0;const t=Array.isArray(this.material)?this.material[0]:this.originalMaterial;t&amp;&amp;&quot;vertexColors&quot;in t&amp;&amp;(t.vertexColors=!1,t.needsUpdate=!0),this._recomputeUsesVertexColorsFlag(),this._disposeSelectionOverlay(),this.updateGroups()}_recomputeUsesVertexColorsFlag(){const t=!!this.geometry.getAttribute(&quot;color&quot;);let i=!1;const r=Array.isArray(this.material)?this.material[0]:this.originalMaterial;t&amp;&amp;r&amp;&amp;&quot;vertexColors&quot;in r&amp;&amp;(i=!!r.vertexColors),this._usesVertexColorsFlag=i||!!this._baseColors}_disposeSelectionOverlay(){if(this._selectionOverlay){this.remove(this._selectionOverlay);const t=this._selectionOverlay.material;if(Array.isArray(t))for(const i of t)i.dispose();else t&amp;&amp;t.dispose();this._selectionOverlay=void 0}}_rebuildSelectionOverlay(t){var v;if(!t||t.length===0){this._disposeSelectionOverlay(),this._overlaySourceIndices=void 0;return}const i=this.geometry;if(!i.getAttribute(&quot;position&quot;)){this._disposeSelectionOverlay(),this._overlaySourceIndices=void 0;return}let s,o;if(this._selectionOverlay){if(s=this._selectionOverlay.geometry,o=this._selectionOverlay.material,!s.getAttribute(&quot;position&quot;)||s.getAttribute(&quot;position&quot;)!==i.getAttribute(&quot;position&quot;)){s=new It,i.index&amp;&amp;s.setIndex(i.index);for(const x of Object.keys(i.attributes))s.setAttribute(x,i.getAttribute(x));if(s.morphAttributes={},i.morphAttributes)for(const x of Object.keys(i.morphAttributes))s.morphAttributes[x]=i.morphAttributes[x];s.morphTargetsRelative=i.morphTargetsRelative===!0,this._selectionOverlay.geometry=s}o.morphTargets=!0,o.side=wi,o.polygonOffset=!0,o.polygonOffsetFactor=-1,o.polygonOffsetUnits=-1}else{s=new It,i.index&amp;&amp;s.setIndex(i.index);for(const x of Object.keys(i.attributes))s.setAttribute(x,i.getAttribute(x));if(s.morphAttributes={},i.morphAttributes)for(const x of Object.keys(i.morphAttributes))s.morphAttributes[x]=i.morphAttributes[x];s.morphTargetsRelative=i.morphTargetsRelative===!0,o=L0.clone(),o.morphTargets=!0,o.side=wi,o.polygonOffset=!0,o.polygonOffsetFactor=-1,o.polygonOffsetUnits=-1,this._selectionOverlay=new gn(s,o),this._selectionOverlay.matrixAutoUpdate=!0,this._selectionOverlay.layers.mask=this.layers.mask,this.add(this._selectionOverlay)}const l=o instanceof Array?o[0]:o,u=new zi({visible:!1});l.morphTargets=!0,u.morphTargets=!0,l.polygonOffset=!0,l.polygonOffsetFactor=-1,l.polygonOffsetUnits=-1,this._selectionOverlay.material=[l,u],this._selectionOverlay.morphTargetInfluences=this.morphTargetInfluences,this._selectionOverlay.morphTargetDictionary=this.morphTargetDictionary,s.clearGroups();const h=i.getIndex(),f=h?h.count:((v=i.attributes.position)==null?void 0:v.count)??0,p=Array.from(this.drawRanges.entries()).map(([x,[b,_]])=&gt;({id:x,s:b,c:_})).sort((x,b)=&gt;x.s-b.s);let m=0;const g=new Set(t);for(const{id:x,s:b,c:_}of p){b&gt;m&amp;&amp;s.addGroup(m,b-m,1);let T=1;!this.hiddenRanges.has(x)&amp;&amp;g.has(x)&amp;&amp;(T=0),s.addGroup(b,_,T),m=b+_}m&lt;f&amp;&amp;s.addGroup(m,f-m,1),this._overlaySourceIndices=void 0}_updateSelectionOverlayFromMorphs(){if(!this._selectionOverlay||!this._overlaySourceIndices)return;const t=this.geometry,i=t.getAttribute(&quot;position&quot;);if(!i)return;const r=t.morphAttributes&amp;&amp;t.morphAttributes.position,s=t.morphTargetsRelative===!0,o=this.morphTargetInfluences,u=this._selectionOverlay.geometry.getAttribute(&quot;position&quot;);if(!u)return;const h=u.array,f=this._overlaySourceIndices,p=new K;for(let m=0,g=0;m&lt;f.length;m++,g+=3){const v=f[m];if(p.set(i.getX(v),i.getY(v),i.getZ(v)),r&amp;&amp;o){let x=0;for(let b=0;b&lt;r.length;b++){const _=o[b]||0;if(_===0)continue;x+=_;const T=r[b],w=T.getX(v),S=T.getY(v),C=T.getZ(v);s?(p.x+=w*_,p.y+=S*_,p.z+=C*_):(p.x=p.x*(1-x)+w*_,p.y=p.y*(1-x)+S*_,p.z=p.z*(1-x)+C*_)}}h[g]=p.x,h[g+1]=p.y,h[g+2]=p.z}u.needsUpdate=!0}onBeforeRender(t,i,r,s,o,l){this._updateSelectionOverlayFromMorphs()}clearSelectionGroups(){this.updateSelectionGroups([])}hideBatchDrawRange(t){for(const i of t)this.hiddenRanges.add(i);if(this.updateGroups(),this.edgeMaterial&amp;&amp;this.rangeIdToIndex){const i=this.edgeMaterial.uniforms.uVisibleTex.value;for(const r of t){const s=this.rangeIdToIndex.get(r);s!==void 0&amp;&amp;(i.image.data[s]=0)}i.needsUpdate=!0}}unhideAllDrawRanges(){if(this.hiddenRanges.clear(),this.updateGroups(),this.edgeMaterial){const t=this.edgeMaterial.uniforms.uVisibleTex.value;t.image.data.fill(255),this.edgeMaterial.uniforms.uHighlighted.value=-1,t.needsUpdate=!0}}raycast(t,i){const r=this.material;if(r===void 0)return;this.geometry.boundingSphere===null&amp;&amp;this.geometry.computeBoundingSphere();const s=this._raycast_sphere.copy(this.geometry.boundingSphere);if(s.applyMatrix4(this.matrixWorld),t.ray.intersectsSphere(s)===!1)return;const o=this._raycast_inverseMatrix.copy(this.matrixWorld).invert(),l=this._raycast_ray.copy(t.ray).applyMatrix4(o),h=Array.isArray(r)?r:[r],f=this.geometry.groups;for(let p=0;p&lt;f.length;p++){const m=f[p],g=m.materialIndex!==void 0?h[m.materialIndex]:void 0;g!==void 0&amp;&amp;g.visible!==!1&amp;&amp;this.raycastGroup(l,t,m,g,i)}}raycastGroup(t,i,r,s,o){const l=this.geometry,u=l.index,h=l.attributes.position,f=l.morphAttributes&amp;&amp;l.morphAttributes.position,p=l.morphTargetsRelative===!0,m=this.morphTargetInfluences;if(h===void 0)return;const g=r.start,v=g+r.count,x=this._raycast_vA,b=this._raycast_vB,_=this._raycast_vC,T=(S,C)=&gt;{if(!f||!m)return;let O=0;for(let M=0;M&lt;f.length;M++){const N=m[M]||0;if(N===0)continue;O+=N;const R=f[M],D=R.getX(S),L=R.getY(S),H=R.getZ(S);p?(C.x+=D*N,C.y+=L*N,C.z+=H*N):(C.x=C.x*(1-O)+D*N,C.y=C.y*(1-O)+L*N,C.z=C.z*(1-O)+H*N)}};let w;if(u!==null){const S=u.array;for(let C=g;C&lt;v;C+=3){const O=S[C],M=S[C+1],N=S[C+2];x.fromBufferAttribute(h,O),b.fromBufferAttribute(h,M),_.fromBufferAttribute(h,N),T(O,x),T(M,b),T(N,_),w=this.checkBufferGeometryIntersection(this,s,i,t,x,b,_,O,M,N,r.materialIndex),w&amp;&amp;(w.faceIndex=Math.floor(C/3),o.push(w))}}else for(let S=g;S&lt;v;S+=3){const C=S,O=S+1,M=S+2;x.fromBufferAttribute(h,C),b.fromBufferAttribute(h,O),_.fromBufferAttribute(h,M),T(C,x),T(O,b),T(M,_),w=this.checkBufferGeometryIntersection(this,s,i,t,x,b,_,C,O,M,r.materialIndex),w&amp;&amp;(w.faceIndex=Math.floor(S/3),o.push(w))}}checkBufferGeometryIntersection(t,i,r,s,o,l,u,h,f,p,m){const g=o,v=l,x=u,b=this._raycast_intersectionPoint;let _=i.side;_===void 0&amp;&amp;(_=is);const T=_===is;if(s.intersectTriangle(x,v,g,T,b)===null)return null;b.applyMatrix4(this.matrixWorld);const S=r.ray.origin.distanceTo(b);if(S&lt;r.near||S&gt;r.far)return null;const C=this.geometry.attributes.uv;let O;if(C){const M=this._raycast_uvA.fromBufferAttribute(C,h),N=this._raycast_uvB.fromBufferAttribute(C,f),R=this._raycast_uvC.fromBufferAttribute(C,p);O=this._uvIntersection(g,v,x,M,N,R,b)}return{distance:S,point:b.clone(),object:t,uv:O,face:null,faceIndex:-1}}_uvIntersection(t,i,r,s,o,l,u){const h=br.getBarycoord(u,t,i,r,this._raycast_barycoord),f=new Re;return s.multiplyScalar(h.x),o.multiplyScalar(h.y),l.multiplyScalar(h.z),f.add(s).add(o).add(l),f}}function M8(n,e,t,i=!0,r=null){const s=new Ni(n.geometry,n.material,e,t,i,r);return s.position.copy(n.position),s.rotation.copy(n.rotation),s.scale.copy(n.scale),s.name=n.name,s.userData=n.userData,s.castShadow=n.castShadow,s.receiveShadow=n.receiveShadow,s.visible=n.visible,s.frustumCulled=n.frustumCulled,s.renderOrder=n.renderOrder,s.layers.mask=n.layers.mask,Array.isArray(s.material)?s.material.forEach(o=&gt;{o instanceof rs?(o.side=wi,o.flatShading=!0,o.needsUpdate=!0):console.warn(`Material is not an instance of MeshStandardMaterial. Type: ${typeof o}`)}):s.material instanceof rs?(s.material.side=wi,s.material.flatShading=!0,s.material.needsUpdate=!0):console.warn(`Material is not an instance of MeshStandardMaterial. Type: ${typeof s.material}`),s}function A8(n){n.traverse(e=&gt;{if(e instanceof gn){const t=e.material,i=Array.isArray(t)?t:[t];i.forEach((r,s)=&gt;{if(r instanceof Di){let o=!1;if(r instanceof zi||r instanceof rs||r instanceof zy||r instanceof ml||r instanceof as||r instanceof Nw){const l=r.color,u=r.emissive;l.equals(new Ye(0))&amp;&amp;u.equals(new Ye(0))&amp;&amp;(o=!0)}o&amp;&amp;(i[s]=S8),i[s].flatShading=!0}}),e.material=Array.isArray(t)?i:i[0]}})}const wl=to(n=&gt;({hasAnimation:!1,selectedAnimation:&quot;&quot;,currentKey:0,isPlaying:!1,isControlsVisible:!1,setCurrentKey:e=&gt;{n({currentKey:e})},setSelectedAnimation:e=&gt;{n({selectedAnimation:e})},setHasAnimation:e=&gt;{n({hasAnimation:e})},setIsPlaying:e=&gt;{n({isPlaying:e})},setIsControlsVisible:e=&gt;{n({isControlsVisible:e})}}));function C8(n,e){const t=n.geometry,i=t.attributes.position,r=t.morphAttributes.position,s=t.morphTargetsRelative,o=n.morphTargetInfluences,l=n.morphTargetDictionary,u=e.geometry;u.setAttribute(&quot;position&quot;,i),u.morphAttributes.position=r,u.morphTargetsRelative=s,e.morphTargetInfluences=o,e.morphTargetDictionary=l;const h=e.material;h&amp;&amp;(h.morphTargets=!0,h.needsUpdate=!0),i.needsUpdate=!0}function R8(n){const{pointSize:e,color:t=16777215,opacity:i=1,useVertexColors:r=!1,depthTest:s=!0,depthWrite:o=!0}=n,l=new Ye(t),u=`
        precision mediump float;
        #include &lt;common&gt;
        #ifdef USE_COLOR
        #include &lt;color_pars_vertex&gt;
        #endif
        #include &lt;morphtarget_pars_vertex&gt;
        #ifdef USE_SELECTION
        attribute float sel;
        varying float vSel;
        #endif
        uniform float pointSize; // screen-space size (pixels)
        uniform bool uWorldSize; // toggle for absolute sizing
        uniform float uWorldPointSize; // world-space diameter
        uniform float uFov; // degrees
        uniform float uViewportHeight; // pixels
        void main() {
            vec3 transformed = position;
            #include &lt;morphtarget_vertex&gt;
            vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);
            gl_Position = projectionMatrix * mvPosition;

            float pixelSize = pointSize;
            if (uWorldSize) {
                // Convert world diameter to pixel diameter: scale / -mvPosition.z
                float scale = uViewportHeight / (2.0 * tan(radians(uFov) * 0.5));
                pixelSize = uWorldPointSize * scale / max(-mvPosition.z, 0.1); // Prevent division by tiny numbers
                pixelSize = min(pixelSize, 1000.0); // Cap maximum point size
            }
            gl_PointSize = pixelSize;

            #ifdef USE_COLOR
            #include &lt;color_vertex&gt;
            #endif

            #ifdef USE_SELECTION
            vSel = sel;
            #endif
        }
    `,h=`
        precision mediump float;
        #include &lt;common&gt;
        #ifdef USE_COLOR
        #include &lt;color_pars_fragment&gt;
        #endif
        #ifdef USE_SELECTION
        varying float vSel;
        uniform vec3 uSelColor;
        #endif
        uniform vec3 uColor;
        uniform float uOpacity;
        void main() {
            // gl_PointCoord in [0,1]; remap to [-1,1] for a unit disk
            vec2 p = gl_PointCoord * 2.0 - 1.0;
            float r2 = dot(p, p);
            if (r2 &gt; 1.0) discard; // circular mask

            // Approximate a 3D sphere normal for simple lighting
            float z = sqrt(1.0 - r2);
            vec3 normal = normalize(vec3(p.x, p.y, z));

            // Simple directional light for spherical shading
            vec3 lightDir = normalize(vec3(0.3, 0.4, 1.0));
            float diff = clamp(dot(normal, lightDir), 0.0, 1.0);
            float ambient = 0.3;
            float lighting = ambient + 0.7 * diff;

            vec3 base =
            #ifdef USE_COLOR
                vColor;
            #else
                uColor;
            #endif

            #ifdef USE_SELECTION
            vec3 finalBase = mix(base, uSelColor, step(0.5, vSel));
            #else
            vec3 finalBase = base;
            #endif

            vec3 col = finalBase * lighting;
            gl_FragColor = vec4(col, uOpacity);
            #include &lt;tonemapping_fragment&gt;
            #include &lt;colorspace_fragment&gt;
        }
    `,f=new Br({vertexShader:u,fragmentShader:h,uniforms:{pointSize:{value:e},uWorldSize:{value:!1},uWorldPointSize:{value:1},uFov:{value:50},uViewportHeight:{value:800},uColor:{value:l},uOpacity:{value:i},uSelColor:{value:new Ye(1,1,1)}},transparent:i&lt;1,depthTest:s,depthWrite:o});return r&amp;&amp;(f.defines={...f.defines||{},USE_COLOR:1}),f}function iI(n,e){const t=n.geometry,i=n.material;if(!i||!i.isShaderMaterial)return;i.defines={...i.defines||{},USE_SELECTION:1},i.uniforms&amp;&amp;i.uniforms.uSelColor&amp;&amp;i.uniforms.uSelColor.value.copy(e),i.needsUpdate=!0;const r=t.getAttribute(&quot;position&quot;),s=r?r.count:0;let o=t.getAttribute(&quot;sel&quot;);if(!o||o.count!==s){const l=new Float32Array(s);o=new Vt(l,1),t.setAttribute(&quot;sel&quot;,o)}}function U0(n){const e=n.geometry,t=e.getAttribute(&quot;position&quot;);if(!t)return;let i=e.getAttribute(&quot;sel&quot;);!i||i.count!==t.count?(i=new Vt(new Float32Array(t.count),1),e.setAttribute(&quot;sel&quot;,i)):(i.array.fill(0),i.needsUpdate=!0)}function rx(n,e){const t=n.geometry,i=t.getAttribute(&quot;color&quot;);let r=!1;if(i){const m=i.array,g=i.itemSize*i.count,v=Math.max(1,Math.floor(g/i.itemSize/1e3));e:for(let x=0;x&lt;i.count;x+=v){const b=x*i.itemSize,_=m[b],T=m[b+1],w=m[b+2];if((_??0)&gt;0||(T??0)&gt;0||(w??0)&gt;0){r=!0;break e}}}let s=e,o=16777215,l=1;const u=n.material,h=m=&gt;{if(m.isPointsMaterial){const g=m;s=typeof g.size==&quot;number&quot;?g.size:s,o=g.color||o,l=typeof g.opacity==&quot;number&quot;?g.opacity:l}else if(m.isShaderMaterial){const g=m;g.uniforms&amp;&amp;(g.uniforms.pointSize&amp;&amp;typeof g.uniforms.pointSize.value==&quot;number&quot;&amp;&amp;(s=g.uniforms.pointSize.value),g.uniforms.uColor&amp;&amp;g.uniforms.uColor.value&amp;&amp;(o=g.uniforms.uColor.value),g.uniforms.uOpacity&amp;&amp;typeof g.uniforms.uOpacity.value==&quot;number&quot;&amp;&amp;(l=g.uniforms.uOpacity.value))}};Array.isArray(u)?u.forEach(h):u&amp;&amp;h(u);const f=R8({pointSize:s,color:o,opacity:l,useVertexColors:r,depthTest:!0,depthWrite:!0});!!t.morphAttributes&amp;&amp;Array.isArray(t.morphAttributes.position)&amp;&amp;t.morphAttributes.position.length&gt;0&amp;&amp;(f.morphTargets=!0,f.needsUpdate=!0),n.material=f}class O8{constructor(){Qe(this,&quot;rt&quot;,null);Qe(this,&quot;size&quot;,new Re(1,1));Qe(this,&quot;idCounter&quot;,1);Qe(this,&quot;idToEntry&quot;,new Map);Qe(this,&quot;pickMats&quot;,new WeakMap)}ensureRT(e){e.getSize(this.size);const t=Math.max(1,Math.floor(this.size.x)),i=Math.max(1,Math.floor(this.size.y));(!this.rt||this.rt.width!==t||this.rt.height!==i)&amp;&amp;(this.rt&amp;&amp;this.rt.dispose(),this.rt=new As(t,i,{depthBuffer:!0,stencilBuffer:!1,type:zr,format:dr}))}getPickingMaterial(e){let t=this.pickMats.get(e);if(t)return t;const i=`
            precision mediump float;
            #include &lt;common&gt;
            #include &lt;morphtarget_pars_vertex&gt;
            attribute vec3 pickColor; // 0..1 encoded color id
            varying vec3 vPick;
            uniform float pointSize; // pixels
            uniform bool uWorldSize;
            uniform float uWorldPointSize; // world diameter
            uniform float uFov; // degrees
            uniform float uViewportHeight; // pixels
            void main() {
                vPick = pickColor;
                vec3 transformed = position;
                #include &lt;morphtarget_vertex&gt;
                vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);
                gl_Position = projectionMatrix * mvPosition;
                float pixelSize = pointSize;
                if (uWorldSize) {
                    float scale = uViewportHeight / (2.0 * tan(radians(uFov) * 0.5));
                    pixelSize = uWorldPointSize * scale / -mvPosition.z;
                }
                gl_PointSize = pixelSize;
            }
        `,r=`
            precision mediump float;
            varying vec3 vPick;
            void main() {
                vec2 p = gl_PointCoord * 2.0 - 1.0;
                float r2 = dot(p, p);
                if (r2 &gt; 1.0) discard; // circular mask to match impostor
                gl_FragColor = vec4(vPick, 1.0);
            }
        `,s=new Br({vertexShader:i,fragmentShader:r,uniforms:{pointSize:{value:5},uWorldSize:{value:!1},uWorldPointSize:{value:1},uFov:{value:50},uViewportHeight:{value:800}},depthTest:!0,depthWrite:!0}),o=e.geometry;return!!o.morphAttributes&amp;&amp;Array.isArray(o.morphAttributes.position)&amp;&amp;o.morphAttributes.position.length&gt;0&amp;&amp;(s.morphTargets=!0),this.pickMats.set(e,s),s}registerPoints(e){const t=e.geometry,i=t.getAttribute(&quot;position&quot;).count,r=t.getAttribute(&quot;pickColor&quot;);if(r&amp;&amp;r.count===i)return;const s=new Float32Array(i*3);for(let l=0;l&lt;i;l++){const u=this.idCounter++;this.idToEntry.set(u,{obj:e,index:l});const h=(u&amp;255)/255,f=(u&gt;&gt;8&amp;255)/255,p=(u&gt;&gt;16&amp;255)/255,m=l*3;s[m]=h,s[m+1]=f,s[m+2]=p}const o=new Vt(s,3,!1);t.setAttribute(&quot;pickColor&quot;,o)}computeWorldPosition(e,t){const i=e.geometry,r=i.getAttribute(&quot;position&quot;),s=new K(r.getX(t),r.getY(t),r.getZ(t)),o=i.morphAttributes&amp;&amp;i.morphAttributes.position,l=i.morphTargetsRelative===!0,u=e.morphTargetInfluences;if(o&amp;&amp;u&amp;&amp;o.length===u.length){let h=0;for(let f=0;f&lt;o.length;f++){const p=u[f]||0;if(p===0)continue;h+=p;const m=o[f],g=m.getX(t),v=m.getY(t),x=m.getZ(t);l?(s.x+=g*p,s.y+=v*p,s.z+=x*p):(s.x=s.x*(1-h)+g*p,s.y=s.y*(1-h)+v*p,s.z=s.z*(1-h)+x*p)}}return s.applyMatrix4(e.matrixWorld)}pickAt(e,t){const i=ha.current,r=wr.current,s=ua.current;if(!i||!r||!s)return null;this.ensureRT(i);const o=s.fov,l=this.rt.height,u=w=&gt;{const S=this.getPickingMaterial(w),C=w.material;C&amp;&amp;C.uniforms?(C.uniforms.pointSize&amp;&amp;(S.uniforms.pointSize.value=C.uniforms.pointSize.value),C.uniforms.uWorldSize&amp;&amp;(S.uniforms.uWorldSize.value=!!C.uniforms.uWorldSize.value),C.uniforms.uWorldPointSize&amp;&amp;(S.uniforms.uWorldPointSize.value=C.uniforms.uWorldPointSize.value)):C.isPointsMaterial&amp;&amp;(S.uniforms.pointSize.value=C.size,S.uniforms.uWorldSize.value=!1),S.uniforms.uFov.value=o,S.uniforms.uViewportHeight.value=l},h=[];r.traverse(w=&gt;{if(w instanceof ga){if(!w.geometry.getAttribute(&quot;pickColor&quot;))return;u(w),h.push({obj:w,orig:w.material}),w.material=this.getPickingMaterial(w)}});const f=i.getRenderTarget(),p=i.getClearColor(new Ye),m=i.getClearAlpha(),v=i.domElement.getBoundingClientRect();if(e&lt;v.left||e&gt;v.right||t&lt;v.top||t&gt;v.bottom){for(const{obj:w,orig:S}of h)w.material=S;return i.setRenderTarget(f),i.setClearColor(p,m),null}let x=null;try{i.setRenderTarget(this.rt),i.setClearColor(0,0),i.clear(),i.render(r,s);const w=this.rt.width/Math.max(1,v.width),S=this.rt.height/Math.max(1,v.height);let C=Math.floor((e-v.left)*w),O=Math.floor((v.bottom-t)*S);C=Math.min(Math.max(0,C),this.rt.width-1),O=Math.min(Math.max(0,O),this.rt.height-1),x=new Uint8Array(4),i.readRenderTargetPixels(this.rt,C,O,1,1,x)}catch(w){console.warn(&quot;GPU point picking failed:&quot;,w),x=null}finally{for(const{obj:w,orig:S}of h)w.material=S;i.setRenderTarget(f),i.setClearColor(p,m)}if(!x)return null;const b=x[0]+(x[1]&lt;&lt;8)+(x[2]&lt;&lt;16);if(b===0)return null;const _=this.idToEntry.get(b);if(!_)return null;const T=this.computeWorldPosition(_.obj,_.index);return{object:_.obj,index:_.index,worldPosition:T}}}const dd=new O8;async function N8(n){var t,i;const e=Xy.current;if(!e)return null;if(e.simulation_objects)for(const r of e.simulation_objects){const s=(t=r.node_references)==null?void 0:t.faces;if(n.name==s||((i=n.userData)==null?void 0:i.name)==s)return r}return null}async function D8(n){var t,i;const e=Xy.current;if(!e)return null;if(e.design_objects)for(const r of e.design_objects){const s=(t=r.node_references)==null?void 0:t.faces;if(n.name==s||((i=n.userData)==null?void 0:i.name)==s)return r}return null}async function rI({gltf_scene:n,hash:e}){var r;const t=wa.getState(),i=[];n.traverse(s=&gt;{if(s instanceof gn)i.push({original:s,parent:s.parent});else if(s instanceof Tr)s.layers.set(1);else if(s instanceof ga){const o=t.pointSize??5;try{rx(s,o);try{dd.registerPoints(s)}catch{}}catch{const u=s.material,h=f=&gt;{if(f.isPointsMaterial){const p=f;p.size=o,p.sizeAttenuation=!0,p.needsUpdate=!0}else if(f.isShaderMaterial){const p=f;p.uniforms&amp;&amp;p.uniforms.pointSize&amp;&amp;(p.uniforms.pointSize.value=o,p.needsUpdate=!0)}};Array.isArray(u)?u.forEach(h):u&amp;&amp;h(u)}s.userData.unique_hash=e}});for(const{original:s,parent:o}of i){const l=s.name;let u=n.userData[`draw_ranges_${l}`];const h=(r=s.userData)==null?void 0:r.node_id;!u&amp;&amp;h&amp;&amp;(u=n.userData[`draw_ranges_node${h}`]),u||console.warn(`No draw ranges found for mesh: ${l}`);const f=new Map;if(u)for(const[b,[_,T]]of Object.entries(u))f.set(b,[_,T]);const p=await D8(s),m=await N8(s);let g=!1;m==null&amp;&amp;p==null?g=!0:m!=null?g=!1:p!=null&amp;&amp;(g=!0);const x=M8(s,f,e,g,g?p:m);if(t.showEdges&amp;&amp;f.size&amp;&amp;g&amp;&amp;ha.current&amp;&amp;o.add(x.getEdgeOverlay(ha.current)),o.add(x),wl.getState().hasAnimation&amp;&amp;!g){const b=x.geometry;if(!!b.morphAttributes&amp;&amp;Array.isArray(b.morphAttributes.position)&amp;&amp;b.morphAttributes.position.length&gt;0)if(x.morphTargetInfluences=s.morphTargetInfluences,x.morphTargetDictionary=s.morphTargetDictionary,Array.isArray(x.material))x.material.forEach(S=&gt;{S&amp;&amp;&quot;morphTargets&quot;in S&amp;&amp;(S.morphTargets=!0,S.needsUpdate=!0)});else{const S=x.material;S&amp;&amp;&quot;morphTargets&quot;in S&amp;&amp;(S.morphTargets=!0,S.needsUpdate=!0)}const T=s.children.filter(S=&gt;S instanceof Tr);for(const S of T)o.add(S);const w=s.children.filter(S=&gt;S instanceof ga);for(const S of w){try{const C=t.pointSize??5;rx(S,C)}catch{}try{dd.registerPoints(S)}catch{}try{C8(x,S)}catch(C){console.error(&quot;Error assigning morph to points:&quot;,C)}o.add(S)}}else{const b=s.children.filter(_=&gt;_ instanceof ga);for(const _ of b){try{const T=t.pointSize??5;rx(_,T)}catch{}try{dd.registerPoints(_)}catch{}o.add(_)}}o.remove(s)}A8(n)}async function I8(n){var _;if(!wr.current)return;let t=n.indices,i=n.vertices;if(!(t&amp;&amp;i)){console.warn(&quot;Invalid mesh data: missing vertices or indices&quot;);return}let r=new It,s=new Float32Array(i),o=new Uint16Array(t);r.setAttribute(&quot;position&quot;,new Vt(s,3)),r.setIndex(new Vt(o,1)),r.computeVertexNormals();let l=new rs({color:8421504,metalness:.5,roughness:.5}),u=new gn(r,l);n.name&amp;&amp;(u.name=n.name);let h=(_=u.geometry.index)==null?void 0:_.array.length;if(!h){console.warn(&quot;Unable to find mesh array length&quot;);return}let f=io.getState().userdata;f||(console.warn(&quot;No userdata found&quot;),f={id_hierarchy:{}});let p=f.id_hierarchy,g=(Math.max(...Object.keys(p).map(Number))+1).toString();f[`draw_ranges_${u.name}`]={[g]:[0,h]},f.id_hierarchy[g]=[u.name,0],new Map().set(g,[0,h]);const x=new xr;x.name=u.name,x.add(u);const b=x.name+&quot;_&quot;+x.uuid;await rI({gltf_scene:x,hash:b}),console.log(&quot;Mesh added to scene&quot;)}function Ph(n){let e=n.length;for(;--e&gt;=0;)n[e]=0}const P8=3,L8=258,sI=29,U8=256,k8=U8+1+sI,oI=30,F8=512,z8=new Array((k8+2)*2);Ph(z8);const B8=new Array(oI*2);Ph(B8);const H8=new Array(F8);Ph(H8);const V8=new Array(L8-P8+1);Ph(V8);const G8=new Array(sI);Ph(G8);const j8=new Array(oI);Ph(j8);const W8=(n,e,t,i)=&gt;{let r=n&amp;65535|0,s=n&gt;&gt;&gt;16&amp;65535|0,o=0;for(;t!==0;){o=t&gt;2e3?2e3:t,t-=o;do r=r+e[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s&lt;&lt;16|0};var TS=W8;const X8=()=&gt;{let n,e=[];for(var t=0;t&lt;256;t++){n=t;for(var i=0;i&lt;8;i++)n=n&amp;1?3988292384^n&gt;&gt;&gt;1:n&gt;&gt;&gt;1;e[t]=n}return e},q8=new Uint32Array(X8()),Y8=(n,e,t,i)=&gt;{const r=q8,s=i+t;n^=-1;for(let o=i;o&lt;s;o++)n=n&gt;&gt;&gt;8^r[(n^e[o])&amp;255];return n^-1};var fo=Y8,MS={2:&quot;need dictionary&quot;,1:&quot;stream end&quot;,0:&quot;&quot;,&quot;-1&quot;:&quot;file error&quot;,&quot;-2&quot;:&quot;stream error&quot;,&quot;-3&quot;:&quot;data error&quot;,&quot;-4&quot;:&quot;insufficient memory&quot;,&quot;-5&quot;:&quot;buffer error&quot;,&quot;-6&quot;:&quot;incompatible version&quot;},aI={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const K8=(n,e)=&gt;Object.prototype.hasOwnProperty.call(n,e);var $8=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!=&quot;object&quot;)throw new TypeError(t+&quot;must be non-object&quot;);for(const i in t)K8(t,i)&amp;&amp;(n[i]=t[i])}}return n},Z8=n=&gt;{let e=0;for(let i=0,r=n.length;i&lt;r;i++)e+=n[i].length;const t=new Uint8Array(e);for(let i=0,r=0,s=n.length;i&lt;s;i++){let o=n[i];t.set(o,r),r+=o.length}return t},lI={assign:$8,flattenChunks:Z8};let cI=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{cI=!1}const Nd=new Uint8Array(256);for(let n=0;n&lt;256;n++)Nd[n]=n&gt;=252?6:n&gt;=248?5:n&gt;=240?4:n&gt;=224?3:n&gt;=192?2:1;Nd[254]=Nd[254]=1;var J8=n=&gt;{if(typeof TextEncoder==&quot;function&quot;&amp;&amp;TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,i,r,s,o=n.length,l=0;for(r=0;r&lt;o;r++)t=n.charCodeAt(r),(t&amp;64512)===55296&amp;&amp;r+1&lt;o&amp;&amp;(i=n.charCodeAt(r+1),(i&amp;64512)===56320&amp;&amp;(t=65536+(t-55296&lt;&lt;10)+(i-56320),r++)),l+=t&lt;128?1:t&lt;2048?2:t&lt;65536?3:4;for(e=new Uint8Array(l),s=0,r=0;s&lt;l;r++)t=n.charCodeAt(r),(t&amp;64512)===55296&amp;&amp;r+1&lt;o&amp;&amp;(i=n.charCodeAt(r+1),(i&amp;64512)===56320&amp;&amp;(t=65536+(t-55296&lt;&lt;10)+(i-56320),r++)),t&lt;128?e[s++]=t:t&lt;2048?(e[s++]=192|t&gt;&gt;&gt;6,e[s++]=128|t&amp;63):t&lt;65536?(e[s++]=224|t&gt;&gt;&gt;12,e[s++]=128|t&gt;&gt;&gt;6&amp;63,e[s++]=128|t&amp;63):(e[s++]=240|t&gt;&gt;&gt;18,e[s++]=128|t&gt;&gt;&gt;12&amp;63,e[s++]=128|t&gt;&gt;&gt;6&amp;63,e[s++]=128|t&amp;63);return e};const Q8=(n,e)=&gt;{if(e&lt;65534&amp;&amp;n.subarray&amp;&amp;cI)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t=&quot;&quot;;for(let i=0;i&lt;e;i++)t+=String.fromCharCode(n[i]);return t};var ej=(n,e)=&gt;{const t=e||n.length;if(typeof TextDecoder==&quot;function&quot;&amp;&amp;TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let i,r;const s=new Array(t*2);for(r=0,i=0;i&lt;t;){let o=n[i++];if(o&lt;128){s[r++]=o;continue}let l=Nd[o];if(l&gt;4){s[r++]=65533,i+=l-1;continue}for(o&amp;=l===2?31:l===3?15:7;l&gt;1&amp;&amp;i&lt;t;)o=o&lt;&lt;6|n[i++]&amp;63,l--;if(l&gt;1){s[r++]=65533;continue}o&lt;65536?s[r++]=o:(o-=65536,s[r++]=55296|o&gt;&gt;10&amp;1023,s[r++]=56320|o&amp;1023)}return Q8(s,r)},tj=(n,e)=&gt;{e=e||n.length,e&gt;n.length&amp;&amp;(e=n.length);let t=e-1;for(;t&gt;=0&amp;&amp;(n[t]&amp;192)===128;)t--;return t&lt;0||t===0?e:t+Nd[n[t]]&gt;e?t:e},AS={string2buf:J8,buf2string:ej,utf8border:tj};function nj(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=&quot;&quot;,this.state=null,this.data_type=2,this.adler=0}var ij=nj;const Qm=16209,rj=16191;var sj=function(e,t){let i,r,s,o,l,u,h,f,p,m,g,v,x,b,_,T,w,S,C,O,M,N,R,D;const L=e.state;i=e.next_in,R=e.input,r=i+(e.avail_in-5),s=e.next_out,D=e.output,o=s-(t-e.avail_out),l=s+(e.avail_out-257),u=L.dmax,h=L.wsize,f=L.whave,p=L.wnext,m=L.window,g=L.hold,v=L.bits,x=L.lencode,b=L.distcode,_=(1&lt;&lt;L.lenbits)-1,T=(1&lt;&lt;L.distbits)-1;e:do{v&lt;15&amp;&amp;(g+=R[i++]&lt;&lt;v,v+=8,g+=R[i++]&lt;&lt;v,v+=8),w=x[g&amp;_];t:for(;;){if(S=w&gt;&gt;&gt;24,g&gt;&gt;&gt;=S,v-=S,S=w&gt;&gt;&gt;16&amp;255,S===0)D[s++]=w&amp;65535;else if(S&amp;16){C=w&amp;65535,S&amp;=15,S&amp;&amp;(v&lt;S&amp;&amp;(g+=R[i++]&lt;&lt;v,v+=8),C+=g&amp;(1&lt;&lt;S)-1,g&gt;&gt;&gt;=S,v-=S),v&lt;15&amp;&amp;(g+=R[i++]&lt;&lt;v,v+=8,g+=R[i++]&lt;&lt;v,v+=8),w=b[g&amp;T];n:for(;;){if(S=w&gt;&gt;&gt;24,g&gt;&gt;&gt;=S,v-=S,S=w&gt;&gt;&gt;16&amp;255,S&amp;16){if(O=w&amp;65535,S&amp;=15,v&lt;S&amp;&amp;(g+=R[i++]&lt;&lt;v,v+=8,v&lt;S&amp;&amp;(g+=R[i++]&lt;&lt;v,v+=8)),O+=g&amp;(1&lt;&lt;S)-1,O&gt;u){e.msg=&quot;invalid distance too far back&quot;,L.mode=Qm;break e}if(g&gt;&gt;&gt;=S,v-=S,S=s-o,O&gt;S){if(S=O-S,S&gt;f&amp;&amp;L.sane){e.msg=&quot;invalid distance too far back&quot;,L.mode=Qm;break e}if(M=0,N=m,p===0){if(M+=h-S,S&lt;C){C-=S;do D[s++]=m[M++];while(--S);M=s-O,N=D}}else if(p&lt;S){if(M+=h+p-S,S-=p,S&lt;C){C-=S;do D[s++]=m[M++];while(--S);if(M=0,p&lt;C){S=p,C-=S;do D[s++]=m[M++];while(--S);M=s-O,N=D}}}else if(M+=p-S,S&lt;C){C-=S;do D[s++]=m[M++];while(--S);M=s-O,N=D}for(;C&gt;2;)D[s++]=N[M++],D[s++]=N[M++],D[s++]=N[M++],C-=3;C&amp;&amp;(D[s++]=N[M++],C&gt;1&amp;&amp;(D[s++]=N[M++]))}else{M=s-O;do D[s++]=D[M++],D[s++]=D[M++],D[s++]=D[M++],C-=3;while(C&gt;2);C&amp;&amp;(D[s++]=D[M++],C&gt;1&amp;&amp;(D[s++]=D[M++]))}}else if((S&amp;64)===0){w=b[(w&amp;65535)+(g&amp;(1&lt;&lt;S)-1)];continue n}else{e.msg=&quot;invalid distance code&quot;,L.mode=Qm;break e}break}}else if((S&amp;64)===0){w=x[(w&amp;65535)+(g&amp;(1&lt;&lt;S)-1)];continue t}else if(S&amp;32){L.mode=rj;break e}else{e.msg=&quot;invalid literal/length code&quot;,L.mode=Qm;break e}break}}while(i&lt;r&amp;&amp;s&lt;l);C=v&gt;&gt;3,i-=C,v-=C&lt;&lt;3,g&amp;=(1&lt;&lt;v)-1,e.next_in=i,e.next_out=s,e.avail_in=i&lt;r?5+(r-i):5-(i-r),e.avail_out=s&lt;l?257+(l-s):257-(s-l),L.hold=g,L.bits=v};const Fu=15,UC=852,kC=592,FC=0,sx=1,zC=2,oj=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),aj=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lj=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cj=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),uj=(n,e,t,i,r,s,o,l)=&gt;{const u=l.bits;let h=0,f=0,p=0,m=0,g=0,v=0,x=0,b=0,_=0,T=0,w,S,C,O,M,N=null,R;const D=new Uint16Array(Fu+1),L=new Uint16Array(Fu+1);let H=null,q,z,$;for(h=0;h&lt;=Fu;h++)D[h]=0;for(f=0;f&lt;i;f++)D[e[t+f]]++;for(g=u,m=Fu;m&gt;=1&amp;&amp;D[m]===0;m--);if(g&gt;m&amp;&amp;(g=m),m===0)return r[s++]=1&lt;&lt;24|64&lt;&lt;16|0,r[s++]=1&lt;&lt;24|64&lt;&lt;16|0,l.bits=1,0;for(p=1;p&lt;m&amp;&amp;D[p]===0;p++);for(g&lt;p&amp;&amp;(g=p),b=1,h=1;h&lt;=Fu;h++)if(b&lt;&lt;=1,b-=D[h],b&lt;0)return-1;if(b&gt;0&amp;&amp;(n===FC||m!==1))return-1;for(L[1]=0,h=1;h&lt;Fu;h++)L[h+1]=L[h]+D[h];for(f=0;f&lt;i;f++)e[t+f]!==0&amp;&amp;(o[L[e[t+f]]++]=f);if(n===FC?(N=H=o,R=20):n===sx?(N=oj,H=aj,R=257):(N=lj,H=cj,R=0),T=0,f=0,h=p,M=s,v=g,x=0,C=-1,_=1&lt;&lt;g,O=_-1,n===sx&amp;&amp;_&gt;UC||n===zC&amp;&amp;_&gt;kC)return 1;for(;;){q=h-x,o[f]+1&lt;R?(z=0,$=o[f]):o[f]&gt;=R?(z=H[o[f]-R],$=N[o[f]-R]):(z=96,$=0),w=1&lt;&lt;h-x,S=1&lt;&lt;v,p=S;do S-=w,r[M+(T&gt;&gt;x)+S]=q&lt;&lt;24|z&lt;&lt;16|$|0;while(S!==0);for(w=1&lt;&lt;h-1;T&amp;w;)w&gt;&gt;=1;if(w!==0?(T&amp;=w-1,T+=w):T=0,f++,--D[h]===0){if(h===m)break;h=e[t+o[f]]}if(h&gt;g&amp;&amp;(T&amp;O)!==C){for(x===0&amp;&amp;(x=g),M+=p,v=h-x,b=1&lt;&lt;v;v+x&lt;m&amp;&amp;(b-=D[v+x],!(b&lt;=0));)v++,b&lt;&lt;=1;if(_+=1&lt;&lt;v,n===sx&amp;&amp;_&gt;UC||n===zC&amp;&amp;_&gt;kC)return 1;C=T&amp;O,r[C]=g&lt;&lt;24|v&lt;&lt;16|M-s|0}}return T!==0&amp;&amp;(r[M+T]=h-x&lt;&lt;24|64&lt;&lt;16|0),l.bits=g,0};var pd=uj;const hj=0,uI=1,hI=2,{Z_FINISH:BC,Z_BLOCK:fj,Z_TREES:eg,Z_OK:Pc,Z_STREAM_END:dj,Z_NEED_DICT:pj,Z_STREAM_ERROR:Cs,Z_DATA_ERROR:fI,Z_MEM_ERROR:dI,Z_BUF_ERROR:mj,Z_DEFLATED:HC}=aI,qy=16180,VC=16181,GC=16182,jC=16183,WC=16184,XC=16185,qC=16186,YC=16187,KC=16188,$C=16189,k0=16190,Zo=16191,ox=16192,ZC=16193,ax=16194,JC=16195,QC=16196,eR=16197,tR=16198,tg=16199,ng=16200,nR=16201,iR=16202,rR=16203,sR=16204,oR=16205,lx=16206,aR=16207,lR=16208,qn=16209,pI=16210,mI=16211,gj=852,yj=592,_j=15,vj=_j,cR=n=&gt;(n&gt;&gt;&gt;24&amp;255)+(n&gt;&gt;&gt;8&amp;65280)+((n&amp;65280)&lt;&lt;8)+((n&amp;255)&lt;&lt;24);function bj(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Gc=n=&gt;{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode&lt;qy||e.mode&gt;mI?1:0},gI=n=&gt;{if(Gc(n))return Cs;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg=&quot;&quot;,e.wrap&amp;&amp;(n.adler=e.wrap&amp;1),e.mode=qy,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(gj),e.distcode=e.distdyn=new Int32Array(yj),e.sane=1,e.back=-1,Pc},yI=n=&gt;{if(Gc(n))return Cs;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,gI(n)},_I=(n,e)=&gt;{let t;if(Gc(n))return Cs;const i=n.state;return e&lt;0?(t=0,e=-e):(t=(e&gt;&gt;4)+5,e&lt;48&amp;&amp;(e&amp;=15)),e&amp;&amp;(e&lt;8||e&gt;15)?Cs:(i.window!==null&amp;&amp;i.wbits!==e&amp;&amp;(i.window=null),i.wrap=t,i.wbits=e,yI(n))},vI=(n,e)=&gt;{if(!n)return Cs;const t=new bj;n.state=t,t.strm=n,t.window=null,t.mode=qy;const i=_I(n,e);return i!==Pc&amp;&amp;(n.state=null),i},xj=n=&gt;vI(n,vj);let uR=!0,cx,ux;const Sj=n=&gt;{if(uR){cx=new Int32Array(512),ux=new Int32Array(32);let e=0;for(;e&lt;144;)n.lens[e++]=8;for(;e&lt;256;)n.lens[e++]=9;for(;e&lt;280;)n.lens[e++]=7;for(;e&lt;288;)n.lens[e++]=8;for(pd(uI,n.lens,0,288,cx,0,n.work,{bits:9}),e=0;e&lt;32;)n.lens[e++]=5;pd(hI,n.lens,0,32,ux,0,n.work,{bits:5}),uR=!1}n.lencode=cx,n.lenbits=9,n.distcode=ux,n.distbits=5},bI=(n,e,t,i)=&gt;{let r;const s=n.state;return s.window===null&amp;&amp;(s.wsize=1&lt;&lt;s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i&gt;=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r&gt;i&amp;&amp;(r=i),s.window.set(e.subarray(t-i,t-i+r),s.wnext),i-=r,i?(s.window.set(e.subarray(t-i,t),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&amp;&amp;(s.wnext=0),s.whave&lt;s.wsize&amp;&amp;(s.whave+=r))),0},wj=(n,e)=&gt;{let t,i,r,s,o,l,u,h,f,p,m,g,v,x,b=0,_,T,w,S,C,O,M,N;const R=new Uint8Array(4);let D,L;const H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Gc(n)||!n.output||!n.input&amp;&amp;n.avail_in!==0)return Cs;t=n.state,t.mode===Zo&amp;&amp;(t.mode=ox),o=n.next_out,r=n.output,u=n.avail_out,s=n.next_in,i=n.input,l=n.avail_in,h=t.hold,f=t.bits,p=l,m=u,N=Pc;e:for(;;)switch(t.mode){case qy:if(t.wrap===0){t.mode=ox;break}for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.wrap&amp;2&amp;&amp;h===35615){t.wbits===0&amp;&amp;(t.wbits=15),t.check=0,R[0]=h&amp;255,R[1]=h&gt;&gt;&gt;8&amp;255,t.check=fo(t.check,R,2,0),h=0,f=0,t.mode=VC;break}if(t.head&amp;&amp;(t.head.done=!1),!(t.wrap&amp;1)||(((h&amp;255)&lt;&lt;8)+(h&gt;&gt;8))%31){n.msg=&quot;incorrect header check&quot;,t.mode=qn;break}if((h&amp;15)!==HC){n.msg=&quot;unknown compression method&quot;,t.mode=qn;break}if(h&gt;&gt;&gt;=4,f-=4,M=(h&amp;15)+8,t.wbits===0&amp;&amp;(t.wbits=M),M&gt;15||M&gt;t.wbits){n.msg=&quot;invalid window size&quot;,t.mode=qn;break}t.dmax=1&lt;&lt;t.wbits,t.flags=0,n.adler=t.check=1,t.mode=h&amp;512?$C:Zo,h=0,f=0;break;case VC:for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.flags=h,(t.flags&amp;255)!==HC){n.msg=&quot;unknown compression method&quot;,t.mode=qn;break}if(t.flags&amp;57344){n.msg=&quot;unknown header flags set&quot;,t.mode=qn;break}t.head&amp;&amp;(t.head.text=h&gt;&gt;8&amp;1),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(R[0]=h&amp;255,R[1]=h&gt;&gt;&gt;8&amp;255,t.check=fo(t.check,R,2,0)),h=0,f=0,t.mode=GC;case GC:for(;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.head&amp;&amp;(t.head.time=h),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(R[0]=h&amp;255,R[1]=h&gt;&gt;&gt;8&amp;255,R[2]=h&gt;&gt;&gt;16&amp;255,R[3]=h&gt;&gt;&gt;24&amp;255,t.check=fo(t.check,R,4,0)),h=0,f=0,t.mode=jC;case jC:for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.head&amp;&amp;(t.head.xflags=h&amp;255,t.head.os=h&gt;&gt;8),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(R[0]=h&amp;255,R[1]=h&gt;&gt;&gt;8&amp;255,t.check=fo(t.check,R,2,0)),h=0,f=0,t.mode=WC;case WC:if(t.flags&amp;1024){for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.length=h,t.head&amp;&amp;(t.head.extra_len=h),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(R[0]=h&amp;255,R[1]=h&gt;&gt;&gt;8&amp;255,t.check=fo(t.check,R,2,0)),h=0,f=0}else t.head&amp;&amp;(t.head.extra=null);t.mode=XC;case XC:if(t.flags&amp;1024&amp;&amp;(g=t.length,g&gt;l&amp;&amp;(g=l),g&amp;&amp;(t.head&amp;&amp;(M=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(s,s+g),M)),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(t.check=fo(t.check,i,g,s)),l-=g,s+=g,t.length-=g),t.length))break e;t.length=0,t.mode=qC;case qC:if(t.flags&amp;2048){if(l===0)break e;g=0;do M=i[s+g++],t.head&amp;&amp;M&amp;&amp;t.length&lt;65536&amp;&amp;(t.head.name+=String.fromCharCode(M));while(M&amp;&amp;g&lt;l);if(t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(t.check=fo(t.check,i,g,s)),l-=g,s+=g,M)break e}else t.head&amp;&amp;(t.head.name=null);t.length=0,t.mode=YC;case YC:if(t.flags&amp;4096){if(l===0)break e;g=0;do M=i[s+g++],t.head&amp;&amp;M&amp;&amp;t.length&lt;65536&amp;&amp;(t.head.comment+=String.fromCharCode(M));while(M&amp;&amp;g&lt;l);if(t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(t.check=fo(t.check,i,g,s)),l-=g,s+=g,M)break e}else t.head&amp;&amp;(t.head.comment=null);t.mode=KC;case KC:if(t.flags&amp;512){for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.wrap&amp;4&amp;&amp;h!==(t.check&amp;65535)){n.msg=&quot;header crc mismatch&quot;,t.mode=qn;break}h=0,f=0}t.head&amp;&amp;(t.head.hcrc=t.flags&gt;&gt;9&amp;1,t.head.done=!0),n.adler=t.check=0,t.mode=Zo;break;case $C:for(;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}n.adler=t.check=cR(h),h=0,f=0,t.mode=k0;case k0:if(t.havedict===0)return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=l,t.hold=h,t.bits=f,pj;n.adler=t.check=1,t.mode=Zo;case Zo:if(e===fj||e===eg)break e;case ox:if(t.last){h&gt;&gt;&gt;=f&amp;7,f-=f&amp;7,t.mode=lx;break}for(;f&lt;3;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}switch(t.last=h&amp;1,h&gt;&gt;&gt;=1,f-=1,h&amp;3){case 0:t.mode=ZC;break;case 1:if(Sj(t),t.mode=tg,e===eg){h&gt;&gt;&gt;=2,f-=2;break e}break;case 2:t.mode=QC;break;case 3:n.msg=&quot;invalid block type&quot;,t.mode=qn}h&gt;&gt;&gt;=2,f-=2;break;case ZC:for(h&gt;&gt;&gt;=f&amp;7,f-=f&amp;7;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if((h&amp;65535)!==(h&gt;&gt;&gt;16^65535)){n.msg=&quot;invalid stored block lengths&quot;,t.mode=qn;break}if(t.length=h&amp;65535,h=0,f=0,t.mode=ax,e===eg)break e;case ax:t.mode=JC;case JC:if(g=t.length,g){if(g&gt;l&amp;&amp;(g=l),g&gt;u&amp;&amp;(g=u),g===0)break e;r.set(i.subarray(s,s+g),o),l-=g,s+=g,u-=g,o+=g,t.length-=g;break}t.mode=Zo;break;case QC:for(;f&lt;14;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.nlen=(h&amp;31)+257,h&gt;&gt;&gt;=5,f-=5,t.ndist=(h&amp;31)+1,h&gt;&gt;&gt;=5,f-=5,t.ncode=(h&amp;15)+4,h&gt;&gt;&gt;=4,f-=4,t.nlen&gt;286||t.ndist&gt;30){n.msg=&quot;too many length or distance symbols&quot;,t.mode=qn;break}t.have=0,t.mode=eR;case eR:for(;t.have&lt;t.ncode;){for(;f&lt;3;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.lens[H[t.have++]]=h&amp;7,h&gt;&gt;&gt;=3,f-=3}for(;t.have&lt;19;)t.lens[H[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,D={bits:t.lenbits},N=pd(hj,t.lens,0,19,t.lencode,0,t.work,D),t.lenbits=D.bits,N){n.msg=&quot;invalid code lengths set&quot;,t.mode=qn;break}t.have=0,t.mode=tR;case tR:for(;t.have&lt;t.nlen+t.ndist;){for(;b=t.lencode[h&amp;(1&lt;&lt;t.lenbits)-1],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(w&lt;16)h&gt;&gt;&gt;=_,f-=_,t.lens[t.have++]=w;else{if(w===16){for(L=_+2;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(h&gt;&gt;&gt;=_,f-=_,t.have===0){n.msg=&quot;invalid bit length repeat&quot;,t.mode=qn;break}M=t.lens[t.have-1],g=3+(h&amp;3),h&gt;&gt;&gt;=2,f-=2}else if(w===17){for(L=_+3;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=_,f-=_,M=0,g=3+(h&amp;7),h&gt;&gt;&gt;=3,f-=3}else{for(L=_+7;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=_,f-=_,M=0,g=11+(h&amp;127),h&gt;&gt;&gt;=7,f-=7}if(t.have+g&gt;t.nlen+t.ndist){n.msg=&quot;invalid bit length repeat&quot;,t.mode=qn;break}for(;g--;)t.lens[t.have++]=M}}if(t.mode===qn)break;if(t.lens[256]===0){n.msg=&quot;invalid code -- missing end-of-block&quot;,t.mode=qn;break}if(t.lenbits=9,D={bits:t.lenbits},N=pd(uI,t.lens,0,t.nlen,t.lencode,0,t.work,D),t.lenbits=D.bits,N){n.msg=&quot;invalid literal/lengths set&quot;,t.mode=qn;break}if(t.distbits=6,t.distcode=t.distdyn,D={bits:t.distbits},N=pd(hI,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,D),t.distbits=D.bits,N){n.msg=&quot;invalid distances set&quot;,t.mode=qn;break}if(t.mode=tg,e===eg)break e;case tg:t.mode=ng;case ng:if(l&gt;=6&amp;&amp;u&gt;=258){n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=l,t.hold=h,t.bits=f,sj(n,m),o=n.next_out,r=n.output,u=n.avail_out,s=n.next_in,i=n.input,l=n.avail_in,h=t.hold,f=t.bits,t.mode===Zo&amp;&amp;(t.back=-1);break}for(t.back=0;b=t.lencode[h&amp;(1&lt;&lt;t.lenbits)-1],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(T&amp;&amp;(T&amp;240)===0){for(S=_,C=T,O=w;b=t.lencode[O+((h&amp;(1&lt;&lt;S+C)-1)&gt;&gt;S)],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(S+_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=S,f-=S,t.back+=S}if(h&gt;&gt;&gt;=_,f-=_,t.back+=_,t.length=w,T===0){t.mode=oR;break}if(T&amp;32){t.back=-1,t.mode=Zo;break}if(T&amp;64){n.msg=&quot;invalid literal/length code&quot;,t.mode=qn;break}t.extra=T&amp;15,t.mode=nR;case nR:if(t.extra){for(L=t.extra;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.length+=h&amp;(1&lt;&lt;t.extra)-1,h&gt;&gt;&gt;=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=iR;case iR:for(;b=t.distcode[h&amp;(1&lt;&lt;t.distbits)-1],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if((T&amp;240)===0){for(S=_,C=T,O=w;b=t.distcode[O+((h&amp;(1&lt;&lt;S+C)-1)&gt;&gt;S)],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(S+_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=S,f-=S,t.back+=S}if(h&gt;&gt;&gt;=_,f-=_,t.back+=_,T&amp;64){n.msg=&quot;invalid distance code&quot;,t.mode=qn;break}t.offset=w,t.extra=T&amp;15,t.mode=rR;case rR:if(t.extra){for(L=t.extra;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.offset+=h&amp;(1&lt;&lt;t.extra)-1,h&gt;&gt;&gt;=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset&gt;t.dmax){n.msg=&quot;invalid distance too far back&quot;,t.mode=qn;break}t.mode=sR;case sR:if(u===0)break e;if(g=m-u,t.offset&gt;g){if(g=t.offset-g,g&gt;t.whave&amp;&amp;t.sane){n.msg=&quot;invalid distance too far back&quot;,t.mode=qn;break}g&gt;t.wnext?(g-=t.wnext,v=t.wsize-g):v=t.wnext-g,g&gt;t.length&amp;&amp;(g=t.length),x=t.window}else x=r,v=o-t.offset,g=t.length;g&gt;u&amp;&amp;(g=u),u-=g,t.length-=g;do r[o++]=x[v++];while(--g);t.length===0&amp;&amp;(t.mode=ng);break;case oR:if(u===0)break e;r[o++]=t.length,u--,t.mode=ng;break;case lx:if(t.wrap){for(;f&lt;32;){if(l===0)break e;l--,h|=i[s++]&lt;&lt;f,f+=8}if(m-=u,n.total_out+=m,t.total+=m,t.wrap&amp;4&amp;&amp;m&amp;&amp;(n.adler=t.check=t.flags?fo(t.check,r,m,o-m):TS(t.check,r,m,o-m)),m=u,t.wrap&amp;4&amp;&amp;(t.flags?h:cR(h))!==t.check){n.msg=&quot;incorrect data check&quot;,t.mode=qn;break}h=0,f=0}t.mode=aR;case aR:if(t.wrap&amp;&amp;t.flags){for(;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.wrap&amp;4&amp;&amp;h!==(t.total&amp;4294967295)){n.msg=&quot;incorrect length check&quot;,t.mode=qn;break}h=0,f=0}t.mode=lR;case lR:N=dj;break e;case qn:N=fI;break e;case pI:return dI;case mI:default:return Cs}return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=l,t.hold=h,t.bits=f,(t.wsize||m!==n.avail_out&amp;&amp;t.mode&lt;qn&amp;&amp;(t.mode&lt;lx||e!==BC))&amp;&amp;bI(n,n.output,n.next_out,m-n.avail_out),p-=n.avail_in,m-=n.avail_out,n.total_in+=p,n.total_out+=m,t.total+=m,t.wrap&amp;4&amp;&amp;m&amp;&amp;(n.adler=t.check=t.flags?fo(t.check,r,m,n.next_out-m):TS(t.check,r,m,n.next_out-m)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Zo?128:0)+(t.mode===tg||t.mode===ax?256:0),(p===0&amp;&amp;m===0||e===BC)&amp;&amp;N===Pc&amp;&amp;(N=mj),N},Ej=n=&gt;{if(Gc(n))return Cs;let e=n.state;return e.window&amp;&amp;(e.window=null),n.state=null,Pc},Tj=(n,e)=&gt;{if(Gc(n))return Cs;const t=n.state;return(t.wrap&amp;2)===0?Cs:(t.head=e,e.done=!1,Pc)},Mj=(n,e)=&gt;{const t=e.length;let i,r,s;return Gc(n)||(i=n.state,i.wrap!==0&amp;&amp;i.mode!==k0)?Cs:i.mode===k0&amp;&amp;(r=1,r=TS(r,e,t,0),r!==i.check)?fI:(s=bI(n,e,t,t),s?(i.mode=pI,dI):(i.havedict=1,Pc))};var Aj=yI,Cj=_I,Rj=gI,Oj=xj,Nj=vI,Dj=wj,Ij=Ej,Pj=Tj,Lj=Mj,Uj=&quot;pako inflate (from Nodeca project)&quot;,na={inflateReset:Aj,inflateReset2:Cj,inflateResetKeep:Rj,inflateInit:Oj,inflateInit2:Nj,inflate:Dj,inflateEnd:Ij,inflateGetHeader:Pj,inflateSetDictionary:Lj,inflateInfo:Uj};function kj(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=&quot;&quot;,this.comment=&quot;&quot;,this.hcrc=0,this.done=!1}var Fj=kj;const xI=Object.prototype.toString,{Z_NO_FLUSH:zj,Z_FINISH:Bj,Z_OK:Dd,Z_STREAM_END:hx,Z_NEED_DICT:fx,Z_STREAM_ERROR:Hj,Z_DATA_ERROR:hR,Z_MEM_ERROR:Vj}=aI;function Yy(n){this.options=lI.assign({chunkSize:1024*64,windowBits:15,to:&quot;&quot;},n||{});const e=this.options;e.raw&amp;&amp;e.windowBits&gt;=0&amp;&amp;e.windowBits&lt;16&amp;&amp;(e.windowBits=-e.windowBits,e.windowBits===0&amp;&amp;(e.windowBits=-15)),e.windowBits&gt;=0&amp;&amp;e.windowBits&lt;16&amp;&amp;!(n&amp;&amp;n.windowBits)&amp;&amp;(e.windowBits+=32),e.windowBits&gt;15&amp;&amp;e.windowBits&lt;48&amp;&amp;(e.windowBits&amp;15)===0&amp;&amp;(e.windowBits|=15),this.err=0,this.msg=&quot;&quot;,this.ended=!1,this.chunks=[],this.strm=new ij,this.strm.avail_out=0;let t=na.inflateInit2(this.strm,e.windowBits);if(t!==Dd)throw new Error(MS[t]);if(this.header=new Fj,na.inflateGetHeader(this.strm,this.header),e.dictionary&amp;&amp;(typeof e.dictionary==&quot;string&quot;?e.dictionary=AS.string2buf(e.dictionary):xI.call(e.dictionary)===&quot;[object ArrayBuffer]&quot;&amp;&amp;(e.dictionary=new Uint8Array(e.dictionary)),e.raw&amp;&amp;(t=na.inflateSetDictionary(this.strm,e.dictionary),t!==Dd)))throw new Error(MS[t])}Yy.prototype.push=function(n,e){const t=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?Bj:zj,xI.call(n)===&quot;[object ArrayBuffer]&quot;?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&amp;&amp;(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),s=na.inflate(t,o),s===fx&amp;&amp;r&amp;&amp;(s=na.inflateSetDictionary(t,r),s===Dd?s=na.inflate(t,o):s===hR&amp;&amp;(s=fx));t.avail_in&gt;0&amp;&amp;s===hx&amp;&amp;t.state.wrap&gt;0&amp;&amp;n[t.next_in]!==0;)na.inflateReset(t),s=na.inflate(t,o);switch(s){case Hj:case hR:case fx:case Vj:return this.onEnd(s),this.ended=!0,!1}if(l=t.avail_out,t.next_out&amp;&amp;(t.avail_out===0||s===hx))if(this.options.to===&quot;string&quot;){let u=AS.utf8border(t.output,t.next_out),h=t.next_out-u,f=AS.buf2string(t.output,u);t.next_out=h,t.avail_out=i-h,h&amp;&amp;t.output.set(t.output.subarray(u,u+h),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Dd&amp;&amp;l===0)){if(s===hx)return s=na.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Yy.prototype.onData=function(n){this.chunks.push(n)};Yy.prototype.onEnd=function(n){n===Dd&amp;&amp;(this.options.to===&quot;string&quot;?this.result=this.chunks.join(&quot;&quot;):this.result=lI.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function Gj(n,e){const t=new Yy(e);if(t.push(n),t.err)throw t.msg||MS[t.err];return t.result}var jj=Gj,Wj={ungzip:jj};const{ungzip:Xj}=Wj;var qj=Xj;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SI=Symbol(&quot;Comlink.proxy&quot;),Yj=Symbol(&quot;Comlink.endpoint&quot;),Kj=Symbol(&quot;Comlink.releaseProxy&quot;),dx=Symbol(&quot;Comlink.finalizer&quot;),Lg=Symbol(&quot;Comlink.thrown&quot;),wI=n=&gt;typeof n==&quot;object&quot;&amp;&amp;n!==null||typeof n==&quot;function&quot;,$j={canHandle:n=&gt;wI(n)&amp;&amp;n[SI],serialize(n){const{port1:e,port2:t}=new MessageChannel;return TI(n,e),[t,[t]]},deserialize(n){return n.start(),AI(n)}},Zj={canHandle:n=&gt;wI(n)&amp;&amp;Lg in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},EI=new Map([[&quot;proxy&quot;,$j],[&quot;throw&quot;,Zj]]);function Jj(n,e){for(const t of n)if(e===t||t===&quot;*&quot;||t instanceof RegExp&amp;&amp;t.test(e))return!0;return!1}function TI(n,e=globalThis,t=[&quot;*&quot;]){e.addEventListener(&quot;message&quot;,function i(r){if(!r||!r.data)return;if(!Jj(t,r.origin)){console.warn(`Invalid origin &#x27;${r.origin}&#x27; for comlink proxy`);return}const{id:s,type:o,path:l}=Object.assign({path:[]},r.data),u=(r.data.argumentList||[]).map(gc);let h;try{const f=l.slice(0,-1).reduce((m,g)=&gt;m[g],n),p=l.reduce((m,g)=&gt;m[g],n);switch(o){case&quot;GET&quot;:h=p;break;case&quot;SET&quot;:f[l.slice(-1)[0]]=gc(r.data.value),h=!0;break;case&quot;APPLY&quot;:h=p.apply(f,u);break;case&quot;CONSTRUCT&quot;:{const m=new p(...u);h=r6(m)}break;case&quot;ENDPOINT&quot;:{const{port1:m,port2:g}=new MessageChannel;TI(n,g),h=i6(m,[m])}break;case&quot;RELEASE&quot;:h=void 0;break;default:return}}catch(f){h={value:f,[Lg]:0}}Promise.resolve(h).catch(f=&gt;({value:f,[Lg]:0})).then(f=&gt;{const[p,m]=B0(f);e.postMessage(Object.assign(Object.assign({},p),{id:s}),m),o===&quot;RELEASE&quot;&amp;&amp;(e.removeEventListener(&quot;message&quot;,i),MI(e),dx in n&amp;&amp;typeof n[dx]==&quot;function&quot;&amp;&amp;n[dx]())}).catch(f=&gt;{const[p,m]=B0({value:new TypeError(&quot;Unserializable return value&quot;),[Lg]:0});e.postMessage(Object.assign(Object.assign({},p),{id:s}),m)})}),e.start&amp;&amp;e.start()}function Qj(n){return n.constructor.name===&quot;MessagePort&quot;}function MI(n){Qj(n)&amp;&amp;n.close()}function AI(n,e){const t=new Map;return n.addEventListener(&quot;message&quot;,function(r){const{data:s}=r;if(!s||!s.id)return;const o=t.get(s.id);if(o)try{o(s)}finally{t.delete(s.id)}}),CS(n,t,[],e)}function ig(n){if(n)throw new Error(&quot;Proxy has been released and is not useable&quot;)}function CI(n){return $u(n,new Map,{type:&quot;RELEASE&quot;}).then(()=&gt;{MI(n)})}const F0=new WeakMap,z0=&quot;FinalizationRegistry&quot;in globalThis&amp;&amp;new FinalizationRegistry(n=&gt;{const e=(F0.get(n)||0)-1;F0.set(n,e),e===0&amp;&amp;CI(n)});function e6(n,e){const t=(F0.get(e)||0)+1;F0.set(e,t),z0&amp;&amp;z0.register(n,e,n)}function t6(n){z0&amp;&amp;z0.unregister(n)}function CS(n,e,t=[],i=function(){}){let r=!1;const s=new Proxy(i,{get(o,l){if(ig(r),l===Kj)return()=&gt;{t6(s),CI(n),e.clear(),r=!0};if(l===&quot;then&quot;){if(t.length===0)return{then:()=&gt;s};const u=$u(n,e,{type:&quot;GET&quot;,path:t.map(h=&gt;h.toString())}).then(gc);return u.then.bind(u)}return CS(n,e,[...t,l])},set(o,l,u){ig(r);const[h,f]=B0(u);return $u(n,e,{type:&quot;SET&quot;,path:[...t,l].map(p=&gt;p.toString()),value:h},f).then(gc)},apply(o,l,u){ig(r);const h=t[t.length-1];if(h===Yj)return $u(n,e,{type:&quot;ENDPOINT&quot;}).then(gc);if(h===&quot;bind&quot;)return CS(n,e,t.slice(0,-1));const[f,p]=fR(u);return $u(n,e,{type:&quot;APPLY&quot;,path:t.map(m=&gt;m.toString()),argumentList:f},p).then(gc)},construct(o,l){ig(r);const[u,h]=fR(l);return $u(n,e,{type:&quot;CONSTRUCT&quot;,path:t.map(f=&gt;f.toString()),argumentList:u},h).then(gc)}});return e6(s,n),s}function n6(n){return Array.prototype.concat.apply([],n)}function fR(n){const e=n.map(B0);return[e.map(t=&gt;t[0]),n6(e.map(t=&gt;t[1]))]}const RI=new WeakMap;function i6(n,e){return RI.set(n,e),n}function r6(n){return Object.assign(n,{[SI]:!0})}function B0(n){for(const[e,t]of EI)if(t.canHandle(n)){const[i,r]=t.serialize(n);return[{type:&quot;HANDLER&quot;,name:e,value:i},r]}return[{type:&quot;RAW&quot;,value:n},RI.get(n)||[]]}function gc(n){switch(n.type){case&quot;HANDLER&quot;:return EI.get(n.name).deserialize(n.value);case&quot;RAW&quot;:return n.value}}function $u(n,e,t,i){return new Promise(r=&gt;{const s=s6();e.set(s,r),n.start&amp;&amp;n.start(),n.postMessage(Object.assign({id:s},t),i)})}function s6(){return new Array(4).fill(0).map(()=&gt;Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join(&quot;-&quot;)}const OI=&#x27;var Lo=Object.defineProperty;var Uo=(Ce,me,ve)=&gt;me in Ce?Lo(Ce,me,{enumerable:!0,configurable:!0,writable:!0,value:ve}):Ce[me]=ve;var bn=(Ce,me,ve)=&gt;Uo(Ce,typeof me!=&quot;symbol&quot;?me+&quot;&quot;:me,ve);(function(){&quot;use strict&quot;;var Ce=typeof globalThis&lt;&quot;u&quot;?globalThis:typeof window&lt;&quot;u&quot;?window:typeof global&lt;&quot;u&quot;?global:typeof self&lt;&quot;u&quot;?self:{};function me(_){return _&amp;&amp;_.__esModule&amp;&amp;Object.prototype.hasOwnProperty.call(_,&quot;default&quot;)?_.default:_}var ve={exports:{}},Fr=ve.exports,Wt;function Lr(){return Wt||(Wt=1,function(_,K){(function(T,C){_.exports=C()})(Fr,function(){var T=function(e,n){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&amp;&amp;(t[o]=r[o])})(e,n)},C=function(){return(C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t&lt;r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&amp;&amp;(e[o]=n[o]);return e}).apply(this,arguments)};function q(e,n,t){for(var r,o=0,i=n.length;o&lt;i;o++)!r&amp;&amp;o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}var I=typeof globalThis&lt;&quot;u&quot;?globalThis:typeof self&lt;&quot;u&quot;?self:typeof window&lt;&quot;u&quot;?window:Ce,B=Object.keys,M=Array.isArray;function F(e,n){return typeof n!=&quot;object&quot;||B(n).forEach(function(t){e[t]=n[t]}),e}typeof Promise&gt;&quot;u&quot;||I.Promise||(I.Promise=Promise);var z=Object.getPrototypeOf,Q={}.hasOwnProperty;function W(e,n){return Q.call(e,n)}function H(e,n){typeof n==&quot;function&quot;&amp;&amp;(n=n(z(e))),(typeof Reflect&gt;&quot;u&quot;?B:Reflect.ownKeys)(n).forEach(function(t){he(e,t,n[t])})}var ue=Object.defineProperty;function he(e,n,t,r){ue(e,n,F(t&amp;&amp;W(t,&quot;get&quot;)&amp;&amp;typeof t.get==&quot;function&quot;?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function We(e){return{from:function(n){return e.prototype=Object.create(n.prototype),he(e.prototype,&quot;constructor&quot;,e),{extend:H.bind(null,e.prototype)}}}}var ro=Object.getOwnPropertyDescriptor,oo=[].slice;function En(e,n,t){return oo.call(e,n,t)}function er(e,n){return n(e)}function tn(e){if(!e)throw new Error(&quot;Assertion Failed&quot;)}function nr(e){I.setImmediate?setImmediate(e):setTimeout(e,0)}function ge(e,n){if(typeof n==&quot;string&quot;&amp;&amp;W(e,n))return e[n];if(!n)return e;if(typeof n!=&quot;string&quot;){for(var t=[],r=0,o=n.length;r&lt;o;++r){var i=ge(e,n[r]);t.push(i)}return t}var a=n.indexOf(&quot;.&quot;);if(a!==-1){var u=e[n.substr(0,a)];return u==null?void 0:ge(u,n.substr(a+1))}}function se(e,n,t){if(e&amp;&amp;n!==void 0&amp;&amp;!(&quot;isFrozen&quot;in Object&amp;&amp;Object.isFrozen(e)))if(typeof n!=&quot;string&quot;&amp;&amp;&quot;length&quot;in n){tn(typeof t!=&quot;string&quot;&amp;&amp;&quot;length&quot;in t);for(var r=0,o=n.length;r&lt;o;++r)se(e,n[r],t[r])}else{var i,a,u=n.indexOf(&quot;.&quot;);u!==-1?(i=n.substr(0,u),(a=n.substr(u+1))===&quot;&quot;?t===void 0?M(e)&amp;&amp;!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=t:se(u=!(u=e[i])||!W(e,i)?e[i]={}:u,a,t)):t===void 0?M(e)&amp;&amp;!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=t}}function tr(e){var n,t={};for(n in e)W(e,n)&amp;&amp;(t[n]=e[n]);return t}var io=[].concat;function rr(e){return io.apply([],e)}var De=&quot;BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey&quot;.split(&quot;,&quot;).concat(rr([8,16,32,64].map(function(e){return[&quot;Int&quot;,&quot;Uint&quot;,&quot;Float&quot;].map(function(n){return n+e+&quot;Array&quot;})}))).filter(function(e){return I[e]}),or=new Set(De.map(function(e){return I[e]})),rn=null;function je(e){return rn=new WeakMap,e=function n(t){if(!t||typeof t!=&quot;object&quot;)return t;var r=rn.get(t);if(r)return r;if(M(t)){r=[],rn.set(t,r);for(var o=0,i=t.length;o&lt;i;++o)r.push(n(t[o]))}else if(or.has(t.constructor))r=t;else{var a,u=z(t);for(a in r=u===Object.prototype?{}:Object.create(u),rn.set(t,r),t)W(t,a)&amp;&amp;(r[a]=n(t[a]))}return r}(e),rn=null,e}var ao={}.toString;function it(e){return ao.call(e).slice(8,-1)}var at=typeof Symbol&lt;&quot;u&quot;?Symbol.iterator:&quot;@@iterator&quot;,uo=typeof at==&quot;symbol&quot;?function(e){var n;return e!=null&amp;&amp;(n=e[at])&amp;&amp;n.apply(e)}:function(){return null};function Re(e,n){return n=e.indexOf(n),0&lt;=n&amp;&amp;e.splice(n,1),0&lt;=n}var $e={};function be(e){var n,t,r,o;if(arguments.length===1){if(M(e))return e.slice();if(this===$e&amp;&amp;typeof e==&quot;string&quot;)return[e];if(o=uo(e)){for(t=[];!(r=o.next()).done;)t.push(r.value);return t}if(e==null)return[e];if(typeof(n=e.length)!=&quot;number&quot;)return[e];for(t=new Array(n);n--;)t[n]=e[n];return t}for(n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];return t}var ut=typeof Symbol&lt;&quot;u&quot;?function(e){return e[Symbol.toStringTag]===&quot;AsyncFunction&quot;}:function(){return!1},un=[&quot;Unknown&quot;,&quot;Constraint&quot;,&quot;Data&quot;,&quot;TransactionInactive&quot;,&quot;ReadOnly&quot;,&quot;Version&quot;,&quot;NotFound&quot;,&quot;InvalidState&quot;,&quot;InvalidAccess&quot;,&quot;Abort&quot;,&quot;Timeout&quot;,&quot;QuotaExceeded&quot;,&quot;Syntax&quot;,&quot;DataClone&quot;],fe=[&quot;Modify&quot;,&quot;Bulk&quot;,&quot;OpenFailed&quot;,&quot;VersionChange&quot;,&quot;Schema&quot;,&quot;Upgrade&quot;,&quot;InvalidTable&quot;,&quot;MissingAPI&quot;,&quot;NoSuchDatabase&quot;,&quot;InvalidArgument&quot;,&quot;SubTransaction&quot;,&quot;Unsupported&quot;,&quot;Internal&quot;,&quot;DatabaseClosed&quot;,&quot;PrematureCommit&quot;,&quot;ForeignAwait&quot;].concat(un),so={VersionChanged:&quot;Database version changed by other database connection&quot;,DatabaseClosed:&quot;Database has been closed&quot;,Abort:&quot;Transaction aborted&quot;,TransactionInactive:&quot;Transaction has already completed or failed&quot;,MissingAPI:&quot;IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb&quot;};function He(e,n){this.name=e,this.message=n}function ir(e,n){return e+&quot;. Errors: &quot;+Object.keys(n).map(function(t){return n[t].toString()}).filter(function(t,r,o){return o.indexOf(t)===r}).join(`\n`)}function Sn(e,n,t,r){this.failures=n,this.failedKeys=r,this.successCount=t,this.message=ir(e,n)}function Ye(e,n){this.name=&quot;BulkError&quot;,this.failures=Object.keys(n).map(function(t){return n[t]}),this.failuresByPos=n,this.message=ir(e,this.failures)}We(He).from(Error).extend({toString:function(){return this.name+&quot;: &quot;+this.message}}),We(Sn).from(He),We(Ye).from(He);var st=fe.reduce(function(e,n){return e[n]=n+&quot;Error&quot;,e},{}),co=He,D=fe.reduce(function(e,n){var t=n+&quot;Error&quot;;function r(o,i){this.name=t,o?typeof o==&quot;string&quot;?(this.message=&quot;&quot;.concat(o).concat(i?`\n `+i:&quot;&quot;),this.inner=i||null):typeof o==&quot;object&quot;&amp;&amp;(this.message=&quot;&quot;.concat(o.name,&quot; &quot;).concat(o.message),this.inner=o):(this.message=so[n]||t,this.inner=null)}return We(r).from(co),e[n]=r,e},{});D.Syntax=SyntaxError,D.Type=TypeError,D.Range=RangeError;var ar=un.reduce(function(e,n){return e[n+&quot;Error&quot;]=D[n],e},{}),Kn=fe.reduce(function(e,n){return[&quot;Syntax&quot;,&quot;Type&quot;,&quot;Range&quot;].indexOf(n)===-1&amp;&amp;(e[n+&quot;Error&quot;]=D[n]),e},{});function G(){}function on(e){return e}function lo(e,n){return e==null||e===on?n:function(t){return n(e(t))}}function Te(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function fo(e,n){return e===G?n:function(){var t=e.apply(this,arguments);t!==void 0&amp;&amp;(arguments[0]=t);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=n.apply(this,arguments);return r&amp;&amp;(this.onsuccess=this.onsuccess?Te(r,this.onsuccess):r),o&amp;&amp;(this.onerror=this.onerror?Te(o,this.onerror):o),i!==void 0?i:t}}function ho(e,n){return e===G?n:function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&amp;&amp;(this.onsuccess=this.onsuccess?Te(t,this.onsuccess):t),r&amp;&amp;(this.onerror=this.onerror?Te(r,this.onerror):r)}}function po(e,n){return e===G?n:function(t){var r=e.apply(this,arguments);F(t,r);var o=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,t=n.apply(this,arguments),o&amp;&amp;(this.onsuccess=this.onsuccess?Te(o,this.onsuccess):o),i&amp;&amp;(this.onerror=this.onerror?Te(i,this.onerror):i),r===void 0?t===void 0?void 0:t:F(r,t)}}function yo(e,n){return e===G?n:function(){return n.apply(this,arguments)!==!1&amp;&amp;e.apply(this,arguments)}}function ct(e,n){return e===G?n:function(){var t=e.apply(this,arguments);if(t&amp;&amp;typeof t.then==&quot;function&quot;){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return t.then(function(){return n.apply(r,i)})}return n.apply(this,arguments)}}Kn.ModifyError=Sn,Kn.DexieError=He,Kn.BulkError=Ye;var de=typeof location&lt;&quot;u&quot;&amp;&amp;/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);function ur(e){de=e}var an={},sr=100,De=typeof Promise&gt;&quot;u&quot;?[]:function(){var e=Promise.resolve();if(typeof crypto&gt;&quot;u&quot;||!crypto.subtle)return[e,z(e),e];var n=crypto.subtle.digest(&quot;SHA-512&quot;,new Uint8Array([0]));return[n,z(n),e]}(),un=De[0],fe=De[1],De=De[2],fe=fe&amp;&amp;fe.then,Ie=un&amp;&amp;un.constructor,lt=!!De,sn=function(e,n){cn.push([e,n]),Cn&amp;&amp;(queueMicrotask(vo),Cn=!1)},ft=!0,Cn=!0,Me=[],An=[],ht=on,xe={id:&quot;global&quot;,global:!0,ref:0,unhandleds:[],onunhandled:G,pgp:!1,env:{},finalize:G},R=xe,cn=[],qe=0,jn=[];function A(e){if(typeof this!=&quot;object&quot;)throw new TypeError(&quot;Promises must be constructed via new&quot;);this._listeners=[],this._lib=!1;var n=this._PSD=R;if(typeof e!=&quot;function&quot;){if(e!==an)throw new TypeError(&quot;Not a function&quot;);return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&amp;&amp;pt(this,this._value))}this._state=null,this._value=null,++n.ref,function t(r,o){try{o(function(i){if(r._state===null){if(i===r)throw new TypeError(&quot;A promise cannot be resolved with itself.&quot;);var a=r._lib&amp;&amp;Ge();i&amp;&amp;typeof i.then==&quot;function&quot;?t(r,function(u,c){i instanceof A?i._then(u,c):i.then(u,c)}):(r._state=!0,r._value=i,lr(r)),a&amp;&amp;Qe()}},pt.bind(null,r))}catch(i){pt(r,i)}}(this,e)}var dt={get:function(){var e=R,n=In;function t(r,o){var i=this,a=!e.global&amp;&amp;(e!==R||n!==In),u=a&amp;&amp;!Oe(),c=new A(function(f,p){yt(i,new cr(hr(r,e,a,u),hr(o,e,a,u),f,p,e))});return this._consoleTask&amp;&amp;(c._consoleTask=this._consoleTask),c}return t.prototype=an,t},set:function(e){he(this,&quot;then&quot;,e&amp;&amp;e.prototype===an?dt:{get:function(){return e},set:dt.set})}};function cr(e,n,t,r,o){this.onFulfilled=typeof e==&quot;function&quot;?e:null,this.onRejected=typeof n==&quot;function&quot;?n:null,this.resolve=t,this.reject=r,this.psd=o}function pt(e,n){var t,r;An.push(n),e._state===null&amp;&amp;(t=e._lib&amp;&amp;Ge(),n=ht(n),e._state=!1,e._value=n,r=e,Me.some(function(o){return o._value===r._value})||Me.push(r),lr(e),t&amp;&amp;Qe())}function lr(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t&lt;r;++t)yt(e,n[t]);var o=e._PSD;--o.ref||o.finalize(),qe===0&amp;&amp;(++qe,sn(function(){--qe==0&amp;&amp;mt()},[]))}function yt(e,n){if(e._state!==null){var t=e._state?n.onFulfilled:n.onRejected;if(t===null)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++qe,sn(mo,[t,e,n])}else e._listeners.push(n)}function mo(e,n,t){try{var r,o=n._value;!n._state&amp;&amp;An.length&amp;&amp;(An=[]),r=de&amp;&amp;n._consoleTask?n._consoleTask.run(function(){return e(o)}):e(o),n._state||An.indexOf(o)!==-1||function(i){for(var a=Me.length;a;)if(Me[--a]._value===i._value)return Me.splice(a,1)}(n),t.resolve(r)}catch(i){t.reject(i)}finally{--qe==0&amp;&amp;mt(),--t.psd.ref||t.psd.finalize()}}function vo(){Be(xe,function(){Ge()&amp;&amp;Qe()})}function Ge(){var e=ft;return Cn=ft=!1,e}function Qe(){var e,n,t;do for(;0&lt;cn.length;)for(e=cn,cn=[],t=e.length,n=0;n&lt;t;++n){var r=e[n];r[0].apply(null,r[1])}while(0&lt;cn.length);Cn=ft=!0}function mt(){var e=Me;Me=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var n=jn.slice(0),t=n.length;t;)n[--t]()}function Rn(e){return new A(an,!1,e)}function J(e,n){var t=R;return function(){var r=Ge(),o=R;try{return Pe(t,!0),e.apply(this,arguments)}catch(i){n&amp;&amp;n(i)}finally{Pe(o,!1),r&amp;&amp;Qe()}}}H(A.prototype,{then:dt,_then:function(e,n){yt(this,new cr(null,null,e,n,R))},catch:function(e){if(arguments.length===1)return this.then(null,e);var n=e,t=arguments[1];return typeof n==&quot;function&quot;?this.then(null,function(r){return(r instanceof n?t:Rn)(r)}):this.then(null,function(r){return(r&amp;&amp;r.name===n?t:Rn)(r)})},finally:function(e){return this.then(function(n){return A.resolve(e()).then(function(){return n})},function(n){return A.resolve(e()).then(function(){return Rn(n)})})},timeout:function(e,n){var t=this;return e&lt;1/0?new A(function(r,o){var i=setTimeout(function(){return o(new D.Timeout(n))},e);t.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol&lt;&quot;u&quot;&amp;&amp;Symbol.toStringTag&amp;&amp;he(A.prototype,Symbol.toStringTag,&quot;Dexie.Promise&quot;),xe.env=fr(),H(A,{all:function(){var e=be.apply(null,arguments).map(Mn);return new A(function(n,t){e.length===0&amp;&amp;n([]);var r=e.length;e.forEach(function(o,i){return A.resolve(o).then(function(a){e[i]=a,--r||n(e)},t)})})},resolve:function(e){return e instanceof A?e:e&amp;&amp;typeof e.then==&quot;function&quot;?new A(function(n,t){e.then(n,t)}):new A(an,!0,e)},reject:Rn,race:function(){var e=be.apply(null,arguments).map(Mn);return new A(function(n,t){e.map(function(r){return A.resolve(r).then(n,t)})})},PSD:{get:function(){return R},set:function(e){return R=e}},totalEchoes:{get:function(){return In}},newPSD:ke,usePSD:Be,scheduler:{get:function(){return sn},set:function(e){sn=e}},rejectionMapper:{get:function(){return ht},set:function(e){ht=e}},follow:function(e,n){return new A(function(t,r){return ke(function(o,i){var a=R;a.unhandleds=[],a.onunhandled=i,a.finalize=Te(function(){var u,c=this;u=function(){c.unhandleds.length===0?o():i(c.unhandleds[0])},jn.push(function f(){u(),jn.splice(jn.indexOf(f),1)}),++qe,sn(function(){--qe==0&amp;&amp;mt()},[])},a.finalize),e()},n,t,r)})}}),Ie&amp;&amp;(Ie.allSettled&amp;&amp;he(A,&quot;allSettled&quot;,function(){var e=be.apply(null,arguments).map(Mn);return new A(function(n){e.length===0&amp;&amp;n([]);var t=e.length,r=new Array(t);e.forEach(function(o,i){return A.resolve(o).then(function(a){return r[i]={status:&quot;fulfilled&quot;,value:a}},function(a){return r[i]={status:&quot;rejected&quot;,reason:a}}).then(function(){return--t||n(r)})})})}),Ie.any&amp;&amp;typeof AggregateError&lt;&quot;u&quot;&amp;&amp;he(A,&quot;any&quot;,function(){var e=be.apply(null,arguments).map(Mn);return new A(function(n,t){e.length===0&amp;&amp;t(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(i,a){return A.resolve(i).then(function(u){return n(u)},function(u){o[a]=u,--r||t(new AggregateError(o))})})})}),Ie.withResolvers&amp;&amp;(A.withResolvers=Ie.withResolvers));var ne={awaits:0,echoes:0,id:0},go=0,Tn=[],Dn=0,In=0,bo=0;function ke(e,n,t,r){var o=R,i=Object.create(o);return i.parent=o,i.ref=0,i.global=!1,i.id=++bo,xe.env,i.env=lt?{Promise:A,PromiseProp:{value:A,configurable:!0,writable:!0},all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{},n&amp;&amp;F(i,n),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Be(i,e,t,r),i.ref===0&amp;&amp;i.finalize(),r}function Xe(){return ne.id||(ne.id=++go),++ne.awaits,ne.echoes+=sr,ne.id}function Oe(){return!!ne.awaits&amp;&amp;(--ne.awaits==0&amp;&amp;(ne.id=0),ne.echoes=ne.awaits*sr,!0)}function Mn(e){return ne.echoes&amp;&amp;e&amp;&amp;e.constructor===Ie?(Xe(),e.then(function(n){return Oe(),n},function(n){return Oe(),Z(n)})):e}function wo(){var e=Tn[Tn.length-1];Tn.pop(),Pe(e,!1)}function Pe(e,n){var t,r=R;(n?!ne.echoes||Dn++&amp;&amp;e===R:!Dn||--Dn&amp;&amp;e===R)||queueMicrotask(n?(function(o){++In,ne.echoes&amp;&amp;--ne.echoes!=0||(ne.echoes=ne.awaits=ne.id=0),Tn.push(R),Pe(o,!0)}).bind(null,e):wo),e!==R&amp;&amp;(R=e,r===xe&amp;&amp;(xe.env=fr()),lt&amp;&amp;(t=xe.env.Promise,n=e.env,(r.global||e.global)&amp;&amp;(Object.defineProperty(I,&quot;Promise&quot;,n.PromiseProp),t.all=n.all,t.race=n.race,t.resolve=n.resolve,t.reject=n.reject,n.allSettled&amp;&amp;(t.allSettled=n.allSettled),n.any&amp;&amp;(t.any=n.any))))}function fr(){var e=I.Promise;return lt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(I,&quot;Promise&quot;),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Be(e,n,t,r,o){var i=R;try{return Pe(e,!0),n(t,r,o)}finally{Pe(i,!1)}}function hr(e,n,t,r){return typeof e!=&quot;function&quot;?e:function(){var o=R;t&amp;&amp;Xe(),Pe(n,!0);try{return e.apply(this,arguments)}finally{Pe(o,!1),r&amp;&amp;queueMicrotask(Oe)}}}function vt(e){Promise===Ie&amp;&amp;ne.echoes===0?Dn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(&quot;&quot;+fe).indexOf(&quot;[native code]&quot;)===-1&amp;&amp;(Xe=Oe=G);var Z=A.reject,Ne=&quot;ï¿¿&quot;,we=&quot;Invalid key provided. Keys must be of type string, number, Date or Array&lt;string | number | Date&gt;.&quot;,dr=&quot;String expected.&quot;,Je=[],qn=&quot;__dbnames&quot;,gt=&quot;readonly&quot;,bt=&quot;readwrite&quot;;function Fe(e,n){return e?n?function(){return e.apply(this,arguments)&amp;&amp;n.apply(this,arguments)}:e:n}var pr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Bn(e){return typeof e!=&quot;string&quot;||/\\./.test(e)?function(n){return n}:function(n){return n[e]===void 0&amp;&amp;e in n&amp;&amp;delete(n=je(n))[e],n}}function yr(){throw D.Type()}function $(e,n){try{var t=mr(e),r=mr(n);if(t!==r)return t===&quot;Array&quot;?1:r===&quot;Array&quot;?-1:t===&quot;binary&quot;?1:r===&quot;binary&quot;?-1:t===&quot;string&quot;?1:r===&quot;string&quot;?-1:t===&quot;Date&quot;?1:r!==&quot;Date&quot;?NaN:-1;switch(t){case&quot;number&quot;:case&quot;Date&quot;:case&quot;string&quot;:return n&lt;e?1:e&lt;n?-1:0;case&quot;binary&quot;:return function(o,i){for(var a=o.length,u=i.length,c=a&lt;u?a:u,f=0;f&lt;c;++f)if(o[f]!==i[f])return o[f]&lt;i[f]?-1:1;return a===u?0:a&lt;u?-1:1}(vr(e),vr(n));case&quot;Array&quot;:return function(o,i){for(var a=o.length,u=i.length,c=a&lt;u?a:u,f=0;f&lt;c;++f){var p=$(o[f],i[f]);if(p!==0)return p}return a===u?0:a&lt;u?-1:1}(e,n)}}catch{}return NaN}function mr(e){var n=typeof e;return n!=&quot;object&quot;?n:ArrayBuffer.isView(e)?&quot;binary&quot;:(e=it(e),e===&quot;ArrayBuffer&quot;?&quot;binary&quot;:e)}function vr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var gr=(X.prototype._trans=function(e,n,t){var r=this._tx||R.trans,o=this.name,i=de&amp;&amp;typeof console&lt;&quot;u&quot;&amp;&amp;console.createTask&amp;&amp;console.createTask(&quot;Dexie: &quot;.concat(e===&quot;readonly&quot;?&quot;read&quot;:&quot;write&quot;,&quot; &quot;).concat(this.name));function a(f,p,s){if(!s.schema[o])throw new D.NotFound(&quot;Table &quot;+o+&quot; not part of transaction&quot;);return n(s.idbtrans,s)}var u=Ge();try{var c=r&amp;&amp;r.db._novip===this.db._novip?r===R.trans?r._promise(e,a,t):ke(function(){return r._promise(e,a,t)},{trans:r,transless:R.transless||R}):function f(p,s,m,l){if(p.idbdb&amp;&amp;(p._state.openComplete||R.letThrough||p._vip)){var d=p._createTransaction(s,m,p._dbSchema);try{d.create(),p._state.PR1398_maxLoop=3}catch(y){return y.name===st.InvalidState&amp;&amp;p.isOpen()&amp;&amp;0&lt;--p._state.PR1398_maxLoop?(console.warn(&quot;Dexie: Need to reopen db&quot;),p.close({disableAutoOpen:!1}),p.open().then(function(){return f(p,s,m,l)})):Z(y)}return d._promise(s,function(y,h){return ke(function(){return R.trans=d,l(y,h,d)})}).then(function(y){if(s===&quot;readwrite&quot;)try{d.idbtrans.commit()}catch{}return s===&quot;readonly&quot;?y:d._completion.then(function(){return y})})}if(p._state.openComplete)return Z(new D.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return Z(new D.DatabaseClosed);p.open().catch(G)}return p._state.dbReadyPromise.then(function(){return f(p,s,m,l)})}(this.db,e,[this.name],a);return i&amp;&amp;(c._consoleTask=i,c=c.catch(function(f){return console.trace(f),Z(f)})),c}finally{u&amp;&amp;Qe()}},X.prototype.get=function(e,n){var t=this;return e&amp;&amp;e.constructor===Object?this.where(e).first(n):e==null?Z(new D.Type(&quot;Invalid argument to Table.get()&quot;)):this._trans(&quot;readonly&quot;,function(r){return t.core.get({trans:r,key:e}).then(function(o){return t.hook.reading.fire(o)})}).then(n)},X.prototype.where=function(e){if(typeof e==&quot;string&quot;)return new this.db.WhereClause(this,e);if(M(e))return new this.db.WhereClause(this,&quot;[&quot;.concat(e.join(&quot;+&quot;),&quot;]&quot;));var n=B(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter(function(u){if(u.compound&amp;&amp;n.every(function(f){return 0&lt;=u.keyPath.indexOf(f)})){for(var c=0;c&lt;n.length;++c)if(n.indexOf(u.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(u,c){return u.keyPath.length-c.keyPath.length})[0];if(t&amp;&amp;this.db._maxKey!==Ne){var i=t.keyPath.slice(0,n.length);return this.where(i).equals(i.map(function(c){return e[c]}))}!t&amp;&amp;de&amp;&amp;console.warn(&quot;The query &quot;.concat(JSON.stringify(e),&quot; on &quot;).concat(this.name,&quot; would benefit from a &quot;)+&quot;compound index [&quot;.concat(n.join(&quot;+&quot;),&quot;]&quot;));var r=this.schema.idxByName;function o(u,c){return $(u,c)===0}var a=n.reduce(function(s,c){var f=s[0],p=s[1],s=r[c],m=e[c];return[f||s,f||!s?Fe(p,s&amp;&amp;s.multi?function(l){return l=ge(l,c),M(l)&amp;&amp;l.some(function(d){return o(m,d)})}:function(l){return o(m,ge(l,c))}):p]},[null,null]),i=a[0],a=a[1];return i?this.where(i.name).equals(e[i.keyPath]).filter(a):t?this.filter(a):this.where(n).equals(&quot;&quot;)},X.prototype.filter=function(e){return this.toCollection().and(e)},X.prototype.count=function(e){return this.toCollection().count(e)},X.prototype.offset=function(e){return this.toCollection().offset(e)},X.prototype.limit=function(e){return this.toCollection().limit(e)},X.prototype.each=function(e){return this.toCollection().each(e)},X.prototype.toArray=function(e){return this.toCollection().toArray(e)},X.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},X.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,M(e)?&quot;[&quot;.concat(e.join(&quot;+&quot;),&quot;]&quot;):e))},X.prototype.reverse=function(){return this.toCollection().reverse()},X.prototype.mapToClass=function(e){var n,t=this.db,r=this.name;function o(){return n!==null&amp;&amp;n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof yr&amp;&amp;(function(c,f){if(typeof f!=&quot;function&quot;&amp;&amp;f!==null)throw new TypeError(&quot;Class extends value &quot;+String(f)+&quot; is not a constructor or null&quot;);function p(){this.constructor=c}T(c,f),c.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}(o,n=e),Object.defineProperty(o.prototype,&quot;db&quot;,{get:function(){return t},enumerable:!1,configurable:!0}),o.prototype.table=function(){return r},e=o);for(var i=new Set,a=e.prototype;a;a=z(a))Object.getOwnPropertyNames(a).forEach(function(c){return i.add(c)});function u(c){if(!c)return c;var f,p=Object.create(e.prototype);for(f in c)if(!i.has(f))try{p[f]=c[f]}catch{}return p}return this.schema.readHook&amp;&amp;this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook(&quot;reading&quot;,u),e},X.prototype.defineClass=function(){return this.mapToClass(function(e){F(this,e)})},X.prototype.add=function(e,n){var t=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&amp;&amp;o&amp;&amp;(a=Bn(i)(e)),this._trans(&quot;readwrite&quot;,function(u){return t.core.mutate({trans:u,type:&quot;add&quot;,keys:n!=null?[n]:null,values:[a]})}).then(function(u){return u.numFailures?A.reject(u.failures[0]):u.lastResult}).then(function(u){if(i)try{se(e,i,u)}catch{}return u})},X.prototype.update=function(e,n){return typeof e!=&quot;object&quot;||M(e)?this.where(&quot;:id&quot;).equals(e).modify(n):(e=ge(e,this.schema.primKey.keyPath),e===void 0?Z(new D.InvalidArgument(&quot;Given object does not contain its primary key&quot;)):this.where(&quot;:id&quot;).equals(e).modify(n))},X.prototype.put=function(e,n){var t=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&amp;&amp;o&amp;&amp;(a=Bn(i)(e)),this._trans(&quot;readwrite&quot;,function(u){return t.core.mutate({trans:u,type:&quot;put&quot;,values:[a],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?A.reject(u.failures[0]):u.lastResult}).then(function(u){if(i)try{se(e,i,u)}catch{}return u})},X.prototype.delete=function(e){var n=this;return this._trans(&quot;readwrite&quot;,function(t){return n.core.mutate({trans:t,type:&quot;delete&quot;,keys:[e]})}).then(function(t){return t.numFailures?A.reject(t.failures[0]):void 0})},X.prototype.clear=function(){var e=this;return this._trans(&quot;readwrite&quot;,function(n){return e.core.mutate({trans:n,type:&quot;deleteRange&quot;,range:pr})}).then(function(n){return n.numFailures?A.reject(n.failures[0]):void 0})},X.prototype.bulkGet=function(e){var n=this;return this._trans(&quot;readonly&quot;,function(t){return n.core.getMany({keys:e,trans:t}).then(function(r){return r.map(function(o){return n.hook.reading.fire(o)})})})},X.prototype.bulkAdd=function(e,n,t){var r=this,o=Array.isArray(n)?n:void 0,i=(t=t||(o?void 0:n))?t.allKeys:void 0;return this._trans(&quot;readwrite&quot;,function(a){var f=r.schema.primKey,u=f.auto,f=f.keyPath;if(f&amp;&amp;o)throw new D.InvalidArgument(&quot;bulkAdd(): keys argument invalid on tables with inbound keys&quot;);if(o&amp;&amp;o.length!==e.length)throw new D.InvalidArgument(&quot;Arguments objects and keys must have the same length&quot;);var c=e.length,f=f&amp;&amp;u?e.map(Bn(f)):e;return r.core.mutate({trans:a,type:&quot;add&quot;,keys:o,values:f,wantResults:i}).then(function(d){var s=d.numFailures,m=d.results,l=d.lastResult,d=d.failures;if(s===0)return i?m:l;throw new Ye(&quot;&quot;.concat(r.name,&quot;.bulkAdd(): &quot;).concat(s,&quot; of &quot;).concat(c,&quot; operations failed&quot;),d)})})},X.prototype.bulkPut=function(e,n,t){var r=this,o=Array.isArray(n)?n:void 0,i=(t=t||(o?void 0:n))?t.allKeys:void 0;return this._trans(&quot;readwrite&quot;,function(a){var f=r.schema.primKey,u=f.auto,f=f.keyPath;if(f&amp;&amp;o)throw new D.InvalidArgument(&quot;bulkPut(): keys argument invalid on tables with inbound keys&quot;);if(o&amp;&amp;o.length!==e.length)throw new D.InvalidArgument(&quot;Arguments objects and keys must have the same length&quot;);var c=e.length,f=f&amp;&amp;u?e.map(Bn(f)):e;return r.core.mutate({trans:a,type:&quot;put&quot;,keys:o,values:f,wantResults:i}).then(function(d){var s=d.numFailures,m=d.results,l=d.lastResult,d=d.failures;if(s===0)return i?m:l;throw new Ye(&quot;&quot;.concat(r.name,&quot;.bulkPut(): &quot;).concat(s,&quot; of &quot;).concat(c,&quot; operations failed&quot;),d)})})},X.prototype.bulkUpdate=function(e){var n=this,t=this.core,r=e.map(function(a){return a.key}),o=e.map(function(a){return a.changes}),i=[];return this._trans(&quot;readwrite&quot;,function(a){return t.getMany({trans:a,keys:r,cache:&quot;clone&quot;}).then(function(u){var c=[],f=[];e.forEach(function(s,m){var l=s.key,d=s.changes,y=u[m];if(y){for(var h=0,v=Object.keys(d);h&lt;v.length;h++){var g=v[h],b=d[g];if(g===n.schema.primKey.keyPath){if($(b,l)!==0)throw new D.Constraint(&quot;Cannot update primary key in bulkUpdate()&quot;)}else se(y,g,b)}i.push(m),c.push(l),f.push(y)}});var p=c.length;return t.mutate({trans:a,type:&quot;put&quot;,keys:c,values:f,updates:{keys:r,changeSpecs:o}}).then(function(s){var m=s.numFailures,l=s.failures;if(m===0)return p;for(var d=0,y=Object.keys(l);d&lt;y.length;d++){var h,v=y[d],g=i[Number(v)];g!=null&amp;&amp;(h=l[v],delete l[v],l[g]=h)}throw new Ye(&quot;&quot;.concat(n.name,&quot;.bulkUpdate(): &quot;).concat(m,&quot; of &quot;).concat(p,&quot; operations failed&quot;),l)})})})},X.prototype.bulkDelete=function(e){var n=this,t=e.length;return this._trans(&quot;readwrite&quot;,function(r){return n.core.mutate({trans:r,type:&quot;delete&quot;,keys:e})}).then(function(a){var o=a.numFailures,i=a.lastResult,a=a.failures;if(o===0)return i;throw new Ye(&quot;&quot;.concat(n.name,&quot;.bulkDelete(): &quot;).concat(o,&quot; of &quot;).concat(t,&quot; operations failed&quot;),a)})},X);function X(){}function ln(e){function n(a,u){if(u){for(var c=arguments.length,f=new Array(c-1);--c;)f[c-1]=arguments[c];return t[a].subscribe.apply(null,f),e}if(typeof a==&quot;string&quot;)return t[a]}var t={};n.addEventType=i;for(var r=1,o=arguments.length;r&lt;o;++r)i(arguments[r]);return n;function i(a,u,c){if(typeof a!=&quot;object&quot;){var f;u=u||yo;var p={subscribers:[],fire:c=c||G,subscribe:function(s){p.subscribers.indexOf(s)===-1&amp;&amp;(p.subscribers.push(s),p.fire=u(p.fire,s))},unsubscribe:function(s){p.subscribers=p.subscribers.filter(function(m){return m!==s}),p.fire=p.subscribers.reduce(u,c)}};return t[a]=n[a]=p}B(f=a).forEach(function(s){var m=f[s];if(M(m))i(s,f[s][0],f[s][1]);else{if(m!==&quot;asap&quot;)throw new D.InvalidArgument(&quot;Invalid event config&quot;);var l=i(s,on,function(){for(var d=arguments.length,y=new Array(d);d--;)y[d]=arguments[d];l.subscribers.forEach(function(h){nr(function(){h.apply(null,y)})})})}})}}function fn(e,n){return We(n).from({prototype:e}),n}function Ze(e,n){return!(e.filter||e.algorithm||e.or)&amp;&amp;(n?e.justLimit:!e.replayFilter)}function wt(e,n){e.filter=Fe(e.filter,n)}function _t(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return Fe(r(),n())}:n,e.justLimit=t&amp;&amp;!r}function Nn(e,n){if(e.isPrimKey)return n.primaryKey;var t=n.getIndexByKeyPath(e.index);if(!t)throw new D.Schema(&quot;KeyPath &quot;+e.index+&quot; on object store &quot;+n.name+&quot; is not indexed&quot;);return t}function br(e,n,t){var r=Nn(e,n.schema);return n.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir===&quot;prev&quot;,unique:!!e.unique,query:{index:r,range:e.range}})}function Fn(e,n,t,r){var o=e.replayFilter?Fe(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},a=function(u,c,f){var p,s;o&amp;&amp;!o(c,f,function(m){return c.stop(m)},function(m){return c.fail(m)})||((s=&quot;&quot;+(p=c.primaryKey))==&quot;[object ArrayBuffer]&quot;&amp;&amp;(s=&quot;&quot;+new Uint8Array(p)),W(i,s)||(i[s]=!0,n(u,c,f)))};return Promise.all([e.or._iterate(a,t),wr(br(e,r,t),e.algorithm,a,!e.keysOnly&amp;&amp;e.valueMapper)])}return wr(br(e,r,t),Fe(e.algorithm,o),n,!e.keysOnly&amp;&amp;e.valueMapper)}function wr(e,n,t,r){var o=J(r?function(i,a,u){return t(r(i),a,u)}:t);return e.then(function(i){if(i)return i.start(function(){var a=function(){return i.continue()};n&amp;&amp;!n(i,function(u){return a=u},function(u){i.stop(u),a=G},function(u){i.fail(u),a=G})||o(i.value,i,function(u){return a=u}),a()})})}var hn=(_r.prototype.execute=function(e){var n=this[&quot;@@propmod&quot;];if(n.add!==void 0){var t=n.add;if(M(t))return q(q([],M(e)?e:[],!0),t).sort();if(typeof t==&quot;number&quot;)return(Number(e)||0)+t;if(typeof t==&quot;bigint&quot;)try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError(&quot;Invalid term &quot;.concat(t))}if(n.remove!==void 0){var r=n.remove;if(M(r))return M(e)?e.filter(function(o){return!r.includes(o)}).sort():[];if(typeof r==&quot;number&quot;)return Number(e)-r;if(typeof r==&quot;bigint&quot;)try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError(&quot;Invalid subtrahend &quot;.concat(r))}return t=(t=n.replacePrefix)===null||t===void 0?void 0:t[0],t&amp;&amp;typeof e==&quot;string&quot;&amp;&amp;e.startsWith(t)?n.replacePrefix[1]+e.substring(t.length):e},_r);function _r(e){this[&quot;@@propmod&quot;]=e}var _o=(Y.prototype._read=function(e,n){var t=this._ctx;return t.error?t.table._trans(null,Z.bind(null,t.error)):t.table._trans(&quot;readonly&quot;,e).then(n)},Y.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,Z.bind(null,n.error)):n.table._trans(&quot;readwrite&quot;,e,&quot;locked&quot;)},Y.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=Fe(n.algorithm,e)},Y.prototype._iterate=function(e,n){return Fn(this._ctx,e,n,this._ctx.table.core)},Y.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),t=Object.create(this._ctx);return e&amp;&amp;F(t,e),n._ctx=t,n},Y.prototype.raw=function(){return this._ctx.valueMapper=null,this},Y.prototype.each=function(e){var n=this._ctx;return this._read(function(t){return Fn(n,e,t,n.table.core)})},Y.prototype.count=function(e){var n=this;return this._read(function(t){var r=n._ctx,o=r.table.core;if(Ze(r,!0))return o.count({trans:t,query:{index:Nn(r,o.schema),range:r.range}}).then(function(a){return Math.min(a,r.limit)});var i=0;return Fn(r,function(){return++i,!1},t,o).then(function(){return i})}).then(e)},Y.prototype.sortBy=function(e,n){var t=e.split(&quot;.&quot;).reverse(),r=t[0],o=t.length-1;function i(c,f){return f?i(c[t[f]],f-1):c[r]}var a=this._ctx.dir===&quot;next&quot;?1:-1;function u(c,f){return $(i(c,o),i(f,o))*a}return this.toArray(function(c){return c.sort(u)}).then(n)},Y.prototype.toArray=function(e){var n=this;return this._read(function(t){var r=n._ctx;if(r.dir===&quot;next&quot;&amp;&amp;Ze(r,!0)&amp;&amp;0&lt;r.limit){var o=r.valueMapper,i=Nn(r,r.table.core.schema);return r.table.core.query({trans:t,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(function(u){return u=u.result,o?u.map(o):u})}var a=[];return Fn(r,function(u){return a.push(u)},t,r.table.core).then(function(){return a})},e)},Y.prototype.offset=function(e){var n=this._ctx;return e&lt;=0||(n.offset+=e,Ze(n)?_t(n,function(){var t=e;return function(r,o){return t===0||(t===1?--t:o(function(){r.advance(t),t=0}),!1)}}):_t(n,function(){var t=e;return function(){return--t&lt;0}})),this},Y.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_t(this._ctx,function(){var n=e;return function(t,r,o){return--n&lt;=0&amp;&amp;r(o),0&lt;=n}},!0),this},Y.prototype.until=function(e,n){return wt(this._ctx,function(t,r,o){return!e(t.value)||(r(o),n)}),this},Y.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},Y.prototype.last=function(e){return this.reverse().first(e)},Y.prototype.filter=function(e){var n;return wt(this._ctx,function(t){return e(t.value)}),(n=this._ctx).isMatch=Fe(n.isMatch,e),this},Y.prototype.and=function(e){return this.filter(e)},Y.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Y.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir===&quot;prev&quot;?&quot;next&quot;:&quot;prev&quot;,this._ondirectionchange&amp;&amp;this._ondirectionchange(this._ctx.dir),this},Y.prototype.desc=function(){return this.reverse()},Y.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(t,r){e(r.key,r)})},Y.prototype.eachUniqueKey=function(e){return this._ctx.unique=&quot;unique&quot;,this.eachKey(e)},Y.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},Y.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var t=[];return this.each(function(r,o){t.push(o.key)}).then(function(){return t}).then(e)},Y.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir===&quot;next&quot;&amp;&amp;Ze(n,!0)&amp;&amp;0&lt;n.limit)return this._read(function(r){var o=Nn(n,n.table.core.schema);return n.table.core.query({trans:r,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(r){return r.result}).then(e);n.keysOnly=!n.isMatch;var t=[];return this.each(function(r,o){t.push(o.primaryKey)}).then(function(){return t}).then(e)},Y.prototype.uniqueKeys=function(e){return this._ctx.unique=&quot;unique&quot;,this.keys(e)},Y.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},Y.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Y.prototype.distinct=function(){var e=this._ctx,e=e.index&amp;&amp;e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var n={};return wt(this._ctx,function(o){var r=o.primaryKey.toString(),o=W(n,r);return n[r]=!0,!o}),this},Y.prototype.modify=function(e){var n=this,t=this._ctx;return this._write(function(r){var o,i,a;a=typeof e==&quot;function&quot;?e:(o=B(e),i=o.length,function(h){for(var v=!1,g=0;g&lt;i;++g){var b=o[g],w=e[b],x=ge(h,b);w instanceof hn?(se(h,b,w.execute(x)),v=!0):x!==w&amp;&amp;(se(h,b,w),v=!0)}return v});var u=t.table.core,s=u.schema.primaryKey,c=s.outbound,f=s.extractKey,p=200,s=n.db._options.modifyChunkSize;s&amp;&amp;(p=typeof s==&quot;object&quot;?s[u.name]||s[&quot;*&quot;]||200:s);function m(h,b){var g=b.failures,b=b.numFailures;d+=h-b;for(var w=0,x=B(g);w&lt;x.length;w++){var E=x[w];l.push(g[E])}}var l=[],d=0,y=[];return n.clone().primaryKeys().then(function(h){function v(b){var w=Math.min(p,h.length-b);return u.getMany({trans:r,keys:h.slice(b,b+w),cache:&quot;immutable&quot;}).then(function(x){for(var E=[],k=[],O=c?[]:null,S=[],P=0;P&lt;w;++P){var j=x[P],L={value:je(j),primKey:h[b+P]};a.call(L,L.value,L)!==!1&amp;&amp;(L.value==null?S.push(h[b+P]):c||$(f(j),f(L.value))===0?(k.push(L.value),c&amp;&amp;O.push(h[b+P])):(S.push(h[b+P]),E.push(L.value)))}return Promise.resolve(0&lt;E.length&amp;&amp;u.mutate({trans:r,type:&quot;add&quot;,values:E}).then(function(U){for(var V in U.failures)S.splice(parseInt(V),1);m(E.length,U)})).then(function(){return(0&lt;k.length||g&amp;&amp;typeof e==&quot;object&quot;)&amp;&amp;u.mutate({trans:r,type:&quot;put&quot;,keys:O,values:k,criteria:g,changeSpec:typeof e!=&quot;function&quot;&amp;&amp;e,isAdditionalChunk:0&lt;b}).then(function(U){return m(k.length,U)})}).then(function(){return(0&lt;S.length||g&amp;&amp;e===xt)&amp;&amp;u.mutate({trans:r,type:&quot;delete&quot;,keys:S,criteria:g,isAdditionalChunk:0&lt;b}).then(function(U){return m(S.length,U)})}).then(function(){return h.length&gt;b+w&amp;&amp;v(b+p)})})}var g=Ze(t)&amp;&amp;t.limit===1/0&amp;&amp;(typeof e!=&quot;function&quot;||e===xt)&amp;&amp;{index:t.index,range:t.range};return v(0).then(function(){if(0&lt;l.length)throw new Sn(&quot;Error modifying one or more objects&quot;,l,d,y);return h.length})})})},Y.prototype.delete=function(){var e=this._ctx,n=e.range;return Ze(e)&amp;&amp;(e.isPrimKey||n.type===3)?this._write(function(t){var r=e.table.core.schema.primaryKey,o=n;return e.table.core.count({trans:t,query:{index:r,range:o}}).then(function(i){return e.table.core.mutate({trans:t,type:&quot;deleteRange&quot;,range:o}).then(function(a){var u=a.failures;if(a.lastResult,a.results,a=a.numFailures,a)throw new Sn(&quot;Could not delete some values&quot;,Object.keys(u).map(function(c){return u[c]}),i-a);return i-a})})}):this.modify(xt)},Y);function Y(){}var xt=function(e,n){return n.value=null};function xo(e,n){return e&lt;n?-1:e===n?0:1}function ko(e,n){return n&lt;e?-1:e===n?0:1}function ce(e,n,t){return e=e instanceof kr?new e.Collection(e):e,e._ctx.error=new(t||TypeError)(n),e}function en(e){return new e.Collection(e,function(){return xr(&quot;&quot;)}).limit(0)}function Ln(e,n,t,r){var o,i,a,u,c,f,p,s=t.length;if(!t.every(function(d){return typeof d==&quot;string&quot;}))return ce(e,dr);function m(d){o=d===&quot;next&quot;?function(h){return h.toUpperCase()}:function(h){return h.toLowerCase()},i=d===&quot;next&quot;?function(h){return h.toLowerCase()}:function(h){return h.toUpperCase()},a=d===&quot;next&quot;?xo:ko;var y=t.map(function(h){return{lower:i(h),upper:o(h)}}).sort(function(h,v){return a(h.lower,v.lower)});u=y.map(function(h){return h.upper}),c=y.map(function(h){return h.lower}),p=(f=d)===&quot;next&quot;?&quot;&quot;:r}m(&quot;next&quot;),e=new e.Collection(e,function(){return Ee(u[0],c[s-1]+r)}),e._ondirectionchange=function(d){m(d)};var l=0;return e._addAlgorithm(function(d,y,h){var v=d.key;if(typeof v!=&quot;string&quot;)return!1;var g=i(v);if(n(g,c,l))return!0;for(var b=null,w=l;w&lt;s;++w){var x=function(E,k,O,S,P,j){for(var L=Math.min(E.length,S.length),U=-1,V=0;V&lt;L;++V){var le=k[V];if(le!==S[V])return P(E[V],O[V])&lt;0?E.substr(0,V)+O[V]+O.substr(V+1):P(E[V],S[V])&lt;0?E.substr(0,V)+S[V]+O.substr(V+1):0&lt;=U?E.substr(0,U)+k[U]+O.substr(U+1):null;P(E[V],le)&lt;0&amp;&amp;(U=V)}return L&lt;S.length&amp;&amp;j===&quot;next&quot;?E+O.substr(E.length):L&lt;E.length&amp;&amp;j===&quot;prev&quot;?E.substr(0,O.length):U&lt;0?null:E.substr(0,U)+S[U]+O.substr(U+1)}(v,g,u[w],c[w],a,f);x===null&amp;&amp;b===null?l=w+1:(b===null||0&lt;a(b,x))&amp;&amp;(b=x)}return y(b!==null?function(){d.continue(b+p)}:h),!1}),e}function Ee(e,n,t,r){return{type:2,lower:e,upper:n,lowerOpen:t,upperOpen:r}}function xr(e){return{type:1,lower:e,upper:e}}var kr=(Object.defineProperty(te.prototype,&quot;Collection&quot;,{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),te.prototype.between=function(e,n,t,r){t=t!==!1,r=r===!0;try{return 0&lt;this._cmp(e,n)||this._cmp(e,n)===0&amp;&amp;(t||r)&amp;&amp;(!t||!r)?en(this):new this.Collection(this,function(){return Ee(e,n,!t,!r)})}catch{return ce(this,we)}},te.prototype.equals=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return xr(e)})},te.prototype.above=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(e,void 0,!0)})},te.prototype.aboveOrEqual=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(e,void 0,!1)})},te.prototype.below=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(void 0,e,!1,!0)})},te.prototype.belowOrEqual=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(void 0,e)})},te.prototype.startsWith=function(e){return typeof e!=&quot;string&quot;?ce(this,dr):this.between(e,e+Ne,!0,!0)},te.prototype.startsWithIgnoreCase=function(e){return e===&quot;&quot;?this.startsWith(e):Ln(this,function(n,t){return n.indexOf(t[0])===0},[e],Ne)},te.prototype.equalsIgnoreCase=function(e){return Ln(this,function(n,t){return n===t[0]},[e],&quot;&quot;)},te.prototype.anyOfIgnoreCase=function(){var e=be.apply($e,arguments);return e.length===0?en(this):Ln(this,function(n,t){return t.indexOf(n)!==-1},e,&quot;&quot;)},te.prototype.startsWithAnyOfIgnoreCase=function(){var e=be.apply($e,arguments);return e.length===0?en(this):Ln(this,function(n,t){return t.some(function(r){return n.indexOf(r)===0})},e,Ne)},te.prototype.anyOf=function(){var e=this,n=be.apply($e,arguments),t=this._cmp;try{n.sort(t)}catch{return ce(this,we)}if(n.length===0)return en(this);var r=new this.Collection(this,function(){return Ee(n[0],n[n.length-1])});r._ondirectionchange=function(i){t=i===&quot;next&quot;?e._ascending:e._descending,n.sort(t)};var o=0;return r._addAlgorithm(function(i,a,u){for(var c=i.key;0&lt;t(c,n[o]);)if(++o===n.length)return a(u),!1;return t(c,n[o])===0||(a(function(){i.continue(n[o])}),!1)}),r},te.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},te.prototype.noneOf=function(){var e=be.apply($e,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ce(this,we)}var n=e.reduce(function(t,r){return t?t.concat([[t[t.length-1][1],r]]):[[-1/0,r]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},te.prototype.inAnyRange=function(v,n){var t=this,r=this._cmp,o=this._ascending,i=this._descending,a=this._min,u=this._max;if(v.length===0)return en(this);if(!v.every(function(g){return g[0]!==void 0&amp;&amp;g[1]!==void 0&amp;&amp;o(g[0],g[1])&lt;=0}))return ce(this,&quot;First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower&quot;,D.InvalidArgument);var c=!n||n.includeLowers!==!1,f=n&amp;&amp;n.includeUppers===!0,p,s=o;function m(g,b){return s(g[0],b[0])}try{(p=v.reduce(function(g,b){for(var w=0,x=g.length;w&lt;x;++w){var E=g[w];if(r(b[0],E[1])&lt;0&amp;&amp;0&lt;r(b[1],E[0])){E[0]=a(E[0],b[0]),E[1]=u(E[1],b[1]);break}}return w===x&amp;&amp;g.push(b),g},[])).sort(m)}catch{return ce(this,we)}var l=0,d=f?function(g){return 0&lt;o(g,p[l][1])}:function(g){return 0&lt;=o(g,p[l][1])},y=c?function(g){return 0&lt;i(g,p[l][0])}:function(g){return 0&lt;=i(g,p[l][0])},h=d,v=new this.Collection(this,function(){return Ee(p[0][0],p[p.length-1][1],!c,!f)});return v._ondirectionchange=function(g){s=g===&quot;next&quot;?(h=d,o):(h=y,i),p.sort(m)},v._addAlgorithm(function(g,b,w){for(var x,E=g.key;h(E);)if(++l===p.length)return b(w),!1;return!d(x=E)&amp;&amp;!y(x)||(t._cmp(E,p[l][1])===0||t._cmp(E,p[l][0])===0||b(function(){s===o?g.continue(p[l][0]):g.continue(p[l][1])}),!1)}),v},te.prototype.startsWithAnyOf=function(){var e=be.apply($e,arguments);return e.every(function(n){return typeof n==&quot;string&quot;})?e.length===0?en(this):this.inAnyRange(e.map(function(n){return[n,n+Ne]})):ce(this,&quot;startsWithAnyOf() only works with strings&quot;)},te);function te(){}function pe(e){return J(function(n){return dn(n),e(n.target.error),!1})}function dn(e){e.stopPropagation&amp;&amp;e.stopPropagation(),e.preventDefault&amp;&amp;e.preventDefault()}var pn=&quot;storagemutated&quot;,kt=&quot;x-storagemutated-1&quot;,Se=ln(null,pn),Oo=(ye.prototype._lock=function(){return tn(!R.global),++this._reculock,this._reculock!==1||R.global||(R.lockOwnerFor=this),this},ye.prototype._unlock=function(){if(tn(!R.global),--this._reculock==0)for(R.global||(R.lockOwnerFor=null);0&lt;this._blockedFuncs.length&amp;&amp;!this._locked();){var e=this._blockedFuncs.shift();try{Be(e[1],e[0])}catch{}}return this},ye.prototype._locked=function(){return this._reculock&amp;&amp;R.lockOwnerFor!==this},ye.prototype.create=function(e){var n=this;if(!this.mode)return this;var t=this.db.idbdb,r=this.db._state.dbOpenError;if(tn(!this.idbtrans),!e&amp;&amp;!t)switch(r&amp;&amp;r.name){case&quot;DatabaseClosedError&quot;:throw new D.DatabaseClosed(r);case&quot;MissingAPIError&quot;:throw new D.MissingAPI(r.message,r);default:throw new D.OpenFailed(r)}if(!this.active)throw new D.TransactionInactive;return tn(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||t).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=J(function(o){dn(o),n._reject(e.error)}),e.onabort=J(function(o){dn(o),n.active&amp;&amp;n._reject(new D.Abort(e.error)),n.active=!1,n.on(&quot;abort&quot;).fire(o)}),e.oncomplete=J(function(){n.active=!1,n._resolve(),&quot;mutatedParts&quot;in e&amp;&amp;Se.storagemutated.fire(e.mutatedParts)}),this},ye.prototype._promise=function(e,n,t){var r=this;if(e===&quot;readwrite&quot;&amp;&amp;this.mode!==&quot;readwrite&quot;)return Z(new D.ReadOnly(&quot;Transaction is readonly&quot;));if(!this.active)return Z(new D.TransactionInactive);if(this._locked())return new A(function(i,a){r._blockedFuncs.push([function(){r._promise(e,n,t).then(i,a)},R])});if(t)return ke(function(){var i=new A(function(a,u){r._lock();var c=n(a,u,r);c&amp;&amp;c.then&amp;&amp;c.then(a,u)});return i.finally(function(){return r._unlock()}),i._lib=!0,i});var o=new A(function(i,a){var u=n(i,a,r);u&amp;&amp;u.then&amp;&amp;u.then(i,a)});return o._lib=!0,o},ye.prototype._root=function(){return this.parent?this.parent._root():this},ye.prototype.waitFor=function(e){var n,t=this._root(),r=A.resolve(e);t._waitingFor?t._waitingFor=t._waitingFor.then(function(){return r}):(t._waitingFor=r,t._waitingQueue=[],n=t.idbtrans.objectStore(t.storeNames[0]),function i(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&amp;&amp;(n.get(-1/0).onsuccess=i)}());var o=t._waitingFor;return new A(function(i,a){r.then(function(u){return t._waitingQueue.push(J(i.bind(null,u)))},function(u){return t._waitingQueue.push(J(a.bind(null,u)))}).finally(function(){t._waitingFor===o&amp;&amp;(t._waitingFor=null)})})},ye.prototype.abort=function(){this.active&amp;&amp;(this.active=!1,this.idbtrans&amp;&amp;this.idbtrans.abort(),this._reject(new D.Abort))},ye.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(W(n,e))return n[e];var t=this.schema[e];if(!t)throw new D.NotFound(&quot;Table &quot;+e+&quot; not part of transaction&quot;);return t=new this.db.Table(e,t,this),t.core=this.db.core.table(e),n[e]=t},ye);function ye(){}function Ot(e,n,t,r,o,i,a){return{name:e,keyPath:n,unique:t,multi:r,auto:o,compound:i,src:(t&amp;&amp;!a?&quot;&amp;&quot;:&quot;&quot;)+(r?&quot;*&quot;:&quot;&quot;)+(o?&quot;++&quot;:&quot;&quot;)+Or(n)}}function Or(e){return typeof e==&quot;string&quot;?e:e?&quot;[&quot;+[].join.call(e,&quot;+&quot;)+&quot;]&quot;:&quot;&quot;}function Pt(e,n,t){return{name:e,primKey:n,indexes:t,mappedClass:null,idxByName:(r=function(o){return[o.name,o]},t.reduce(function(o,i,a){return a=r(i,a),a&amp;&amp;(o[a[0]]=a[1]),o},{}))};var r}var yn=function(e){try{return e.only([[]]),yn=function(){return[[]]},[[]]}catch{return yn=function(){return Ne},Ne}};function Et(e){return e==null?function(){}:typeof e==&quot;string&quot;?(n=e).split(&quot;.&quot;).length===1?function(t){return t[n]}:function(t){return ge(t,n)}:function(t){return ge(t,e)};var n}function Pr(e){return[].slice.call(e)}var Po=0;function mn(e){return e==null?&quot;:id&quot;:typeof e==&quot;string&quot;?e:&quot;[&quot;.concat(e.join(&quot;+&quot;),&quot;]&quot;)}function Eo(e,n,c){function r(h){if(h.type===3)return null;if(h.type===4)throw new Error(&quot;Cannot convert never type to IDBKeyRange&quot;);var l=h.lower,d=h.upper,y=h.lowerOpen,h=h.upperOpen;return l===void 0?d===void 0?null:n.upperBound(d,!!h):d===void 0?n.lowerBound(l,!!y):n.bound(l,d,!!y,!!h)}function o(m){var l,d=m.name;return{name:d,schema:m,mutate:function(y){var h=y.trans,v=y.type,g=y.keys,b=y.values,w=y.range;return new Promise(function(x,E){x=J(x);var k=h.objectStore(d),O=k.keyPath==null,S=v===&quot;put&quot;||v===&quot;add&quot;;if(!S&amp;&amp;v!==&quot;delete&quot;&amp;&amp;v!==&quot;deleteRange&quot;)throw new Error(&quot;Invalid operation type: &quot;+v);var P,j=(g||b||{length:1}).length;if(g&amp;&amp;b&amp;&amp;g.length!==b.length)throw new Error(&quot;Given keys array must have same length as given values array.&quot;);if(j===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});function L(ae){++le,dn(ae)}var U=[],V=[],le=0;if(v===&quot;deleteRange&quot;){if(w.type===4)return x({numFailures:le,failures:V,results:[],lastResult:void 0});w.type===3?U.push(P=k.clear()):U.push(P=k.delete(r(w)))}else{var O=S?O?[b,g]:[b,null]:[g,null],N=O[0],oe=O[1];if(S)for(var ie=0;ie&lt;j;++ie)U.push(P=oe&amp;&amp;oe[ie]!==void 0?k[v](N[ie],oe[ie]):k[v](N[ie])),P.onerror=L;else for(ie=0;ie&lt;j;++ie)U.push(P=k[v](N[ie])),P.onerror=L}function et(ae){ae=ae.target.result,U.forEach(function(Ve,zt){return Ve.error!=null&amp;&amp;(V[zt]=Ve.error)}),x({numFailures:le,failures:V,results:v===&quot;delete&quot;?g:U.map(function(Ve){return Ve.result}),lastResult:ae})}P.onerror=function(ae){L(ae),et(ae)},P.onsuccess=et})},getMany:function(y){var h=y.trans,v=y.keys;return new Promise(function(g,b){g=J(g);for(var w,x=h.objectStore(d),E=v.length,k=new Array(E),O=0,S=0,P=function(U){U=U.target,k[U._pos]=U.result,++S===O&amp;&amp;g(k)},j=pe(b),L=0;L&lt;E;++L)v[L]!=null&amp;&amp;((w=x.get(v[L]))._pos=L,w.onsuccess=P,w.onerror=j,++O);O===0&amp;&amp;g(k)})},get:function(y){var h=y.trans,v=y.key;return new Promise(function(g,b){g=J(g);var w=h.objectStore(d).get(v);w.onsuccess=function(x){return g(x.target.result)},w.onerror=pe(b)})},query:(l=f,function(y){return new Promise(function(h,v){h=J(h);var g,b,w,O=y.trans,x=y.values,E=y.limit,P=y.query,k=E===1/0?void 0:E,S=P.index,P=P.range,O=O.objectStore(d),S=S.isPrimaryKey?O:O.index(S.name),P=r(P);if(E===0)return h({result:[]});l?((k=x?S.getAll(P,k):S.getAllKeys(P,k)).onsuccess=function(j){return h({result:j.target.result})},k.onerror=pe(v)):(g=0,b=!x&amp;&amp;&quot;openKeyCursor&quot;in S?S.openKeyCursor(P):S.openCursor(P),w=[],b.onsuccess=function(j){var L=b.result;return L?(w.push(x?L.value:L.primaryKey),++g===E?h({result:w}):void L.continue()):h({result:w})},b.onerror=pe(v))})}),openCursor:function(y){var h=y.trans,v=y.values,g=y.query,b=y.reverse,w=y.unique;return new Promise(function(x,E){x=J(x);var S=g.index,k=g.range,O=h.objectStore(d),O=S.isPrimaryKey?O:O.index(S.name),S=b?w?&quot;prevunique&quot;:&quot;prev&quot;:w?&quot;nextunique&quot;:&quot;next&quot;,P=!v&amp;&amp;&quot;openKeyCursor&quot;in O?O.openKeyCursor(r(k),S):O.openCursor(r(k),S);P.onerror=pe(E),P.onsuccess=J(function(j){var L,U,V,le,N=P.result;N?(N.___id=++Po,N.done=!1,L=N.continue.bind(N),U=(U=N.continuePrimaryKey)&amp;&amp;U.bind(N),V=N.advance.bind(N),le=function(){throw new Error(&quot;Cursor not stopped&quot;)},N.trans=h,N.stop=N.continue=N.continuePrimaryKey=N.advance=function(){throw new Error(&quot;Cursor not started&quot;)},N.fail=J(E),N.next=function(){var oe=this,ie=1;return this.start(function(){return ie--?oe.continue():oe.stop()}).then(function(){return oe})},N.start=function(oe){function ie(){if(P.result)try{oe()}catch(ae){N.fail(ae)}else N.done=!0,N.start=function(){throw new Error(&quot;Cursor behind last entry&quot;)},N.stop()}var et=new Promise(function(ae,Ve){ae=J(ae),P.onerror=pe(Ve),N.fail=Ve,N.stop=function(zt){N.stop=N.continue=N.continuePrimaryKey=N.advance=le,ae(zt)}});return P.onsuccess=J(function(ae){P.onsuccess=ie,ie()}),N.continue=L,N.continuePrimaryKey=U,N.advance=V,ie(),et},x(N)):x(null)},E)})},count:function(y){var h=y.query,v=y.trans,g=h.index,b=h.range;return new Promise(function(w,x){var E=v.objectStore(d),k=g.isPrimaryKey?E:E.index(g.name),E=r(b),k=E?k.count(E):k.count();k.onsuccess=J(function(O){return w(O.target.result)}),k.onerror=pe(x)})}}}var i,a,u,p=(a=c,u=Pr((i=e).objectStoreNames),{schema:{name:i.name,tables:u.map(function(m){return a.objectStore(m)}).map(function(m){var l=m.keyPath,h=m.autoIncrement,d=M(l),y={},h={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:l==null,compound:d,keyPath:l,autoIncrement:h,unique:!0,extractKey:Et(l)},indexes:Pr(m.indexNames).map(function(v){return m.index(v)}).map(function(w){var g=w.name,b=w.unique,x=w.multiEntry,w=w.keyPath,x={name:g,compound:M(w),keyPath:w,unique:b,multiEntry:x,extractKey:Et(w)};return y[mn(w)]=x}),getIndexByKeyPath:function(v){return y[mn(v)]}};return y[&quot;:id&quot;]=h.primaryKey,l!=null&amp;&amp;(y[mn(l)]=h.primaryKey),h})},hasGetAll:0&lt;u.length&amp;&amp;&quot;getAll&quot;in a.objectStore(u[0])&amp;&amp;!(typeof navigator&lt;&quot;u&quot;&amp;&amp;/Safari/.test(navigator.userAgent)&amp;&amp;!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&amp;&amp;[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]&lt;604)}),c=p.schema,f=p.hasGetAll,p=c.tables.map(o),s={};return p.forEach(function(m){return s[m.name]=m}),{stack:&quot;dbcore&quot;,transaction:e.transaction.bind(e),table:function(m){if(!s[m])throw new Error(&quot;Table \&#x27;&quot;.concat(m,&quot;\&#x27; not found&quot;));return s[m]},MIN_KEY:-1/0,MAX_KEY:yn(n),schema:c}}function So(e,n,t,r){var o=t.IDBKeyRange;return t.indexedDB,{dbcore:(r=Eo(n,o,r),e.dbcore.reduce(function(i,a){return a=a.create,C(C({},i),a(i))},r))}}function Un(e,r){var t=r.db,r=So(e._middlewares,t,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(o){var i=o.name;e.core.schema.tables.some(function(a){return a.name===i})&amp;&amp;(o.core=e.core.table(i),e[i]instanceof e.Table&amp;&amp;(e[i].core=o.core))})}function Vn(e,n,t,r){t.forEach(function(o){var i=r[o];n.forEach(function(a){var u=function c(f,p){return ro(f,p)||(f=z(f))&amp;&amp;c(f,p)}(a,o);(!u||&quot;value&quot;in u&amp;&amp;u.value===void 0)&amp;&amp;(a===e.Transaction.prototype||a instanceof e.Transaction?he(a,o,{get:function(){return this.table(o)},set:function(c){ue(this,o,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):a[o]=new e.Table(o,i))})})}function St(e,n){n.forEach(function(t){for(var r in t)t[r]instanceof e.Table&amp;&amp;delete t[r]})}function Ko(e,n){return e._cfg.version-n._cfg.version}function Co(e,n,t,r){var o=e._dbSchema;t.objectStoreNames.contains(&quot;$meta&quot;)&amp;&amp;!o.$meta&amp;&amp;(o.$meta=Pt(&quot;$meta&quot;,Sr(&quot;&quot;)[0],[]),e._storeNames.push(&quot;$meta&quot;));var i=e._createTransaction(&quot;readwrite&quot;,e._storeNames,o);i.create(t),i._completion.catch(r);var a=i._reject.bind(i),u=R.transless||R;ke(function(){return R.trans=i,R.transless=u,n!==0?(Un(e,t),f=n,((c=i).storeNames.includes(&quot;$meta&quot;)?c.table(&quot;$meta&quot;).get(&quot;version&quot;).then(function(p){return p??f}):A.resolve(f)).then(function(p){return m=p,l=i,d=t,y=[],p=(s=e)._versions,h=s._dbSchema=Wn(0,s.idbdb,d),(p=p.filter(function(v){return v._cfg.version&gt;=m})).length!==0?(p.forEach(function(v){y.push(function(){var g=h,b=v._cfg.dbschema;$n(s,g,d),$n(s,b,d),h=s._dbSchema=b;var w=Kt(g,b);w.add.forEach(function(S){Ct(d,S[0],S[1].primKey,S[1].indexes)}),w.change.forEach(function(S){if(S.recreate)throw new D.Upgrade(&quot;Not yet support for changing primary key&quot;);var P=d.objectStore(S.name);S.add.forEach(function(j){return zn(P,j)}),S.change.forEach(function(j){P.deleteIndex(j.name),zn(P,j)}),S.del.forEach(function(j){return P.deleteIndex(j)})});var x=v._cfg.contentUpgrade;if(x&amp;&amp;v._cfg.version&gt;m){Un(s,d),l._memoizedTables={};var E=tr(b);w.del.forEach(function(S){E[S]=g[S]}),St(s,[s.Transaction.prototype]),Vn(s,[s.Transaction.prototype],B(E),E),l.schema=E;var k,O=ut(x);return O&amp;&amp;Xe(),w=A.follow(function(){var S;(k=x(l))&amp;&amp;O&amp;&amp;(S=Oe.bind(null,null),k.then(S,S))}),k&amp;&amp;typeof k.then==&quot;function&quot;?A.resolve(k):w.then(function(){return k})}}),y.push(function(g){var b,w,x=v._cfg.dbschema;b=x,w=g,[].slice.call(w.db.objectStoreNames).forEach(function(E){return b[E]==null&amp;&amp;w.db.deleteObjectStore(E)}),St(s,[s.Transaction.prototype]),Vn(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),l.schema=s._dbSchema}),y.push(function(g){s.idbdb.objectStoreNames.contains(&quot;$meta&quot;)&amp;&amp;(Math.ceil(s.idbdb.version/10)===v._cfg.version?(s.idbdb.deleteObjectStore(&quot;$meta&quot;),delete s._dbSchema.$meta,s._storeNames=s._storeNames.filter(function(b){return b!==&quot;$meta&quot;})):g.objectStore(&quot;$meta&quot;).put(v._cfg.version,&quot;version&quot;))})}),function v(){return y.length?A.resolve(y.shift()(l.idbtrans)).then(v):A.resolve()}().then(function(){Er(h,d)})):A.resolve();var s,m,l,d,y,h}).catch(a)):(B(o).forEach(function(p){Ct(t,p,o[p].primKey,o[p].indexes)}),Un(e,t),void A.follow(function(){return e.on.populate.fire(i)}).catch(a));var c,f})}function Ao(e,n){Er(e._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains(&quot;$meta&quot;)||n.db.createObjectStore(&quot;$meta&quot;).add(Math.ceil(n.db.version/10-1),&quot;version&quot;);var t=Wn(0,e.idbdb,n);$n(e,e._dbSchema,n);for(var r=0,o=Kt(t,e._dbSchema).change;r&lt;o.length;r++){var i=function(a){if(a.change.length||a.recreate)return console.warn(&quot;Unable to patch indexes of table &quot;.concat(a.name,&quot; because it has changes on the type of index or primary key.&quot;)),{value:void 0};var u=n.objectStore(a.name);a.add.forEach(function(c){de&amp;&amp;console.debug(&quot;Dexie upgrade patch: Creating missing index &quot;.concat(a.name,&quot;.&quot;).concat(c.src)),zn(u,c)})}(o[r]);if(typeof i==&quot;object&quot;)return i.value}}function Kt(e,n){var t,r={del:[],add:[],change:[]};for(t in e)n[t]||r.del.push(t);for(t in n){var o=e[t],i=n[t];if(o){var a={name:t,def:i,recreate:!1,del:[],add:[],change:[]};if(&quot;&quot;+(o.primKey.keyPath||&quot;&quot;)!=&quot;&quot;+(i.primKey.keyPath||&quot;&quot;)||o.primKey.auto!==i.primKey.auto)a.recreate=!0,r.change.push(a);else{var u=o.idxByName,c=i.idxByName,f=void 0;for(f in u)c[f]||a.del.push(f);for(f in c){var p=u[f],s=c[f];p?p.src!==s.src&amp;&amp;a.change.push(s):a.add.push(s)}(0&lt;a.del.length||0&lt;a.add.length||0&lt;a.change.length)&amp;&amp;r.change.push(a)}}else r.add.push([t,i])}return r}function Ct(e,n,t,r){var o=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(function(i){return zn(o,i)}),o}function Er(e,n){B(e).forEach(function(t){n.db.objectStoreNames.contains(t)||(de&amp;&amp;console.debug(&quot;Dexie: Creating missing table&quot;,t),Ct(n,t,e[t].primKey,e[t].indexes))})}function zn(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Wn(e,n,t){var r={};return En(n.objectStoreNames,0).forEach(function(o){for(var i=t.objectStore(o),a=Ot(Or(f=i.keyPath),f||&quot;&quot;,!0,!1,!!i.autoIncrement,f&amp;&amp;typeof f!=&quot;string&quot;,!0),u=[],c=0;c&lt;i.indexNames.length;++c){var p=i.index(i.indexNames[c]),f=p.keyPath,p=Ot(p.name,f,!!p.unique,!!p.multiEntry,!1,f&amp;&amp;typeof f!=&quot;string&quot;,!1);u.push(p)}r[o]=Pt(o,a,u)}),r}function $n(e,n,t){for(var r=t.db.objectStoreNames,o=0;o&lt;r.length;++o){var i=r[o],a=t.objectStore(i);e._hasGetAll=&quot;getAll&quot;in a;for(var u=0;u&lt;a.indexNames.length;++u){var c=a.indexNames[u],f=a.index(c).keyPath,p=typeof f==&quot;string&quot;?f:&quot;[&quot;+En(f).join(&quot;+&quot;)+&quot;]&quot;;!n[i]||(f=n[i].idxByName[p])&amp;&amp;(f.name=c,delete n[i].idxByName[p],n[i].idxByName[c]=f)}}typeof navigator&lt;&quot;u&quot;&amp;&amp;/Safari/.test(navigator.userAgent)&amp;&amp;!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&amp;&amp;I.WorkerGlobalScope&amp;&amp;I instanceof I.WorkerGlobalScope&amp;&amp;[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]&lt;604&amp;&amp;(e._hasGetAll=!1)}function Sr(e){return e.split(&quot;,&quot;).map(function(n,t){var r=(n=n.trim()).replace(/([&amp;*]|\\+\\+)/g,&quot;&quot;),o=/^\\[/.test(r)?r.match(/^\\[(.*)\\]$/)[1].split(&quot;+&quot;):r;return Ot(r,o||null,/\\&amp;/.test(n),/\\*/.test(n),/\\+\\+/.test(n),M(o),t===0)})}var jo=(Hn.prototype._parseStoresSpec=function(e,n){B(e).forEach(function(t){if(e[t]!==null){var r=Sr(e[t]),o=r.shift();if(o.unique=!0,o.multi)throw new D.Schema(&quot;Primary key cannot be multi-valued&quot;);r.forEach(function(i){if(i.auto)throw new D.Schema(&quot;Only primary key can be marked as autoIncrement (++)&quot;);if(!i.keyPath)throw new D.Schema(&quot;Index must have a name and cannot be an empty string&quot;)}),n[t]=Pt(t,o,r)}})},Hn.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?F(this._cfg.storesSource,t):t;var t=n._versions,r={},o={};return t.forEach(function(i){F(r,i._cfg.storesSource),o=i._cfg.dbschema={},i._parseStoresSpec(r,o)}),n._dbSchema=o,St(n,[n._allTables,n,n.Transaction.prototype]),Vn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],B(o),o),n._storeNames=B(o),this},Hn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ct(this._cfg.contentUpgrade||G,e),this},Hn);function Hn(){}function At(e,n){var t=e._dbNamesDB;return t||(t=e._dbNamesDB=new _e(qn,{addons:[],indexedDB:e,IDBKeyRange:n})).version(1).stores({dbnames:&quot;name&quot;}),t.table(&quot;dbnames&quot;)}function jt(e){return e&amp;&amp;typeof e.databases==&quot;function&quot;}function Rt(e){return ke(function(){return R.letThrough=!0,e()})}function Tt(e){return!(&quot;from&quot;in e)}var re=function(e,n){if(!this){var t=new re;return e&amp;&amp;&quot;d&quot;in e&amp;&amp;F(t,e),t}F(this,arguments.length?{d:1,from:e,to:1&lt;arguments.length?n:e}:{d:0})};function vn(e,n,t){var r=$(n,t);if(!isNaN(r)){if(0&lt;r)throw RangeError();if(Tt(e))return F(e,{from:n,to:t,d:1});var o=e.l,r=e.r;if($(t,e.from)&lt;0)return o?vn(o,n,t):e.l={from:n,to:t,d:1,l:null,r:null},Cr(e);if(0&lt;$(n,e.to))return r?vn(r,n,t):e.r={from:n,to:t,d:1,l:null,r:null},Cr(e);$(n,e.from)&lt;0&amp;&amp;(e.from=n,e.l=null,e.d=r?r.d+1:1),0&lt;$(t,e.to)&amp;&amp;(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1),t=!e.r,o&amp;&amp;!e.l&amp;&amp;gn(e,o),r&amp;&amp;t&amp;&amp;gn(e,r)}}function gn(e,n){Tt(n)||function t(r,c){var i=c.from,a=c.to,u=c.l,c=c.r;vn(r,i,a),u&amp;&amp;t(r,u),c&amp;&amp;t(r,c)}(e,n)}function Kr(e,n){var t=Yn(n),r=t.next();if(r.done)return!1;for(var o=r.value,i=Yn(e),a=i.next(o.from),u=a.value;!r.done&amp;&amp;!a.done;){if($(u.from,o.to)&lt;=0&amp;&amp;0&lt;=$(u.to,o.from))return!0;$(o.from,u.from)&lt;0?o=(r=t.next(u.from)).value:u=(a=i.next(o.from)).value}return!1}function Yn(e){var n=Tt(e)?null:{s:0,n:e};return{next:function(t){for(var r=0&lt;arguments.length;n;)switch(n.s){case 0:if(n.s=1,r)for(;n.n.l&amp;&amp;$(t,n.n.from)&lt;0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!r||$(t,n.n.to)&lt;=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function Cr(e){var n,t,r=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),o=1&lt;r?&quot;r&quot;:r&lt;-1?&quot;l&quot;:&quot;&quot;;o&amp;&amp;(n=o==&quot;r&quot;?&quot;l&quot;:&quot;r&quot;,t=C({},e),r=e[o],e.from=r.from,e.to=r.to,e[o]=r[o],t[o]=r[n],(e[n]=t).d=Ar(t)),e.d=Ar(e)}function Ar(t){var n=t.r,t=t.l;return(n?t?Math.max(n.d,t.d):n.d:t?t.d:0)+1}function Gn(e,n){return B(n).forEach(function(t){e[t]?gn(e[t],n[t]):e[t]=function r(o){var i,a,u={};for(i in o)W(o,i)&amp;&amp;(a=o[i],u[i]=!a||typeof a!=&quot;object&quot;||or.has(a.constructor)?a:r(a));return u}(n[t])}),e}function Dt(e,n){return e.all||n.all||Object.keys(e).some(function(t){return n[t]&amp;&amp;Kr(n[t],e[t])})}H(re.prototype,((fe={add:function(e){return gn(this,e),this},addKey:function(e){return vn(this,e,e),this},addKeys:function(e){var n=this;return e.forEach(function(t){return vn(n,t,t)}),this},hasKey:function(e){var n=Yn(this).next(e).value;return n&amp;&amp;$(n.from,e)&lt;=0&amp;&amp;0&lt;=$(n.to,e)}})[at]=function(){return Yn(this)},fe));var Le={},It={},Mt=!1;function Qn(e){Gn(It,e),Mt||(Mt=!0,setTimeout(function(){Mt=!1,qt(It,!(It={}))},0))}function qt(e,n){n===void 0&amp;&amp;(n=!1);var t=new Set;if(e.all)for(var r=0,o=Object.values(Le);r&lt;o.length;r++)jr(a=o[r],e,t,n);else for(var i in e){var a,u=/^idb\\:\\/\\/(.*)\\/(.*)\\//.exec(i);u&amp;&amp;(i=u[1],u=u[2],(a=Le[&quot;idb://&quot;.concat(i,&quot;/&quot;).concat(u)])&amp;&amp;jr(a,e,t,n))}t.forEach(function(c){return c()})}function jr(e,n,t,r){for(var o=[],i=0,a=Object.entries(e.queries.query);i&lt;a.length;i++){for(var u=a[i],c=u[0],f=[],p=0,s=u[1];p&lt;s.length;p++){var m=s[p];Dt(n,m.obsSet)?m.subscribers.forEach(function(h){return t.add(h)}):r&amp;&amp;f.push(m)}r&amp;&amp;o.push([c,f])}if(r)for(var l=0,d=o;l&lt;d.length;l++){var y=d[l],c=y[0],f=y[1];e.queries.query[c]=f}}function Ro(e){var n=e._state,t=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?Z(n.dbOpenError):e});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var r=n.openCanceller,o=Math.round(10*e.verno),i=!1;function a(){if(n.openCanceller!==r)throw new D.DatabaseClosed(&quot;db.open() was cancelled&quot;)}function u(){return new A(function(m,l){if(a(),!t)throw new D.MissingAPI;var d=e.name,y=n.autoSchema||!o?t.open(d):t.open(d,o);if(!y)throw new D.MissingAPI;y.onerror=pe(l),y.onblocked=J(e._fireOnBlocked),y.onupgradeneeded=J(function(h){var v;p=y.transaction,n.autoSchema&amp;&amp;!e._options.allowEmptyDB?(y.onerror=dn,p.abort(),y.result.close(),(v=t.deleteDatabase(d)).onsuccess=v.onerror=J(function(){l(new D.NoSuchDatabase(&quot;Database &quot;.concat(d,&quot; doesnt exist&quot;)))})):(p.onerror=pe(l),h=h.oldVersion&gt;Math.pow(2,62)?0:h.oldVersion,s=h&lt;1,e.idbdb=y.result,i&amp;&amp;Ao(e,p),Co(e,h/10,p,l))},l),y.onsuccess=J(function(){p=null;var h,v,g,b,w,x=e.idbdb=y.result,E=En(x.objectStoreNames);if(0&lt;E.length)try{var k=x.transaction((b=E).length===1?b[0]:b,&quot;readonly&quot;);if(n.autoSchema)v=x,g=k,(h=e).verno=v.version/10,g=h._dbSchema=Wn(0,v,g),h._storeNames=En(v.objectStoreNames,0),Vn(h,[h._allTables],B(g),g);else if($n(e,e._dbSchema,k),((w=Kt(Wn(0,(w=e).idbdb,k),w._dbSchema)).add.length||w.change.some(function(O){return O.add.length||O.change.length}))&amp;&amp;!i)return console.warn(&quot;Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.&quot;),x.close(),o=x.version+1,i=!0,m(u());Un(e,k)}catch{}Je.push(e),x.onversionchange=J(function(O){n.vcFired=!0,e.on(&quot;versionchange&quot;).fire(O)}),x.onclose=J(function(O){e.on(&quot;close&quot;).fire(O)}),s&amp;&amp;(w=e._deps,k=d,x=w.indexedDB,w=w.IDBKeyRange,jt(x)||k===qn||At(x,w).put({name:k}).catch(G)),m()},l)}).catch(function(m){switch(m==null?void 0:m.name){case&quot;UnknownError&quot;:if(0&lt;n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn(&quot;Dexie: Workaround for Chrome UnknownError on open()&quot;),u();break;case&quot;VersionError&quot;:if(0&lt;o)return o=0,u()}return A.reject(m)})}var c,f=n.dbReadyResolve,p=null,s=!1;return A.race([r,(typeof navigator&gt;&quot;u&quot;?A.resolve():!navigator.userAgentData&amp;&amp;/Safari\\//.test(navigator.userAgent)&amp;&amp;!/Chrom(e|ium)\\//.test(navigator.userAgent)&amp;&amp;indexedDB.databases?new Promise(function(m){function l(){return indexedDB.databases().finally(m)}c=setInterval(l,100),l()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(u)]).then(function(){return a(),n.onReadyBeingFired=[],A.resolve(Rt(function(){return e.on.ready.fire(e.vip)})).then(function m(){if(0&lt;n.onReadyBeingFired.length){var l=n.onReadyBeingFired.reduce(ct,G);return n.onReadyBeingFired=[],A.resolve(Rt(function(){return l(e.vip)})).then(m)}})}).finally(function(){n.openCanceller===r&amp;&amp;(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(m){n.dbOpenError=m;try{p&amp;&amp;p.abort()}catch{}return r===n.openCanceller&amp;&amp;e._close(),Z(m)}).finally(function(){n.openComplete=!0,f()}).then(function(){var m;return s&amp;&amp;(m={},e.tables.forEach(function(l){l.schema.indexes.forEach(function(d){d.name&amp;&amp;(m[&quot;idb://&quot;.concat(e.name,&quot;/&quot;).concat(l.name,&quot;/&quot;).concat(d.name)]=new re(-1/0,[[[]]]))}),m[&quot;idb://&quot;.concat(e.name,&quot;/&quot;).concat(l.name,&quot;/&quot;)]=m[&quot;idb://&quot;.concat(e.name,&quot;/&quot;).concat(l.name,&quot;/:dels&quot;)]=new re(-1/0,[[[]]])}),Se(pn).fire(m),qt(m,!0)),e})}function Bt(e){function n(i){return e.next(i)}var t=o(n),r=o(function(i){return e.throw(i)});function o(i){return function(c){var u=i(c),c=u.value;return u.done?c:c&amp;&amp;typeof c.then==&quot;function&quot;?c.then(t,r):M(c)?Promise.all(c).then(t,r):t(c)}}return o(n)()}function Xn(e,n,t){for(var r=M(e)?e.slice():[e],o=0;o&lt;t;++o)r.push(n);return r}var To={stack:&quot;dbcore&quot;,name:&quot;VirtualIndexMiddleware&quot;,level:1,create:function(e){return C(C({},e),{table:function(n){var t=e.table(n),r=t.schema,o={},i=[];function a(s,m,l){var d=mn(s),y=o[d]=o[d]||[],h=s==null?0:typeof s==&quot;string&quot;?1:s.length,v=0&lt;m,v=C(C({},l),{name:v?&quot;&quot;.concat(d,&quot;(virtual-from:&quot;).concat(l.name,&quot;)&quot;):l.name,lowLevelIndex:l,isVirtual:v,keyTail:m,keyLength:h,extractKey:Et(s),unique:!v&amp;&amp;l.unique});return y.push(v),v.isPrimaryKey||i.push(v),1&lt;h&amp;&amp;a(h===2?s[0]:s.slice(0,h-1),m+1,l),y.sort(function(g,b){return g.keyTail-b.keyTail}),v}n=a(r.primaryKey.keyPath,0,r.primaryKey),o[&quot;:id&quot;]=[n];for(var u=0,c=r.indexes;u&lt;c.length;u++){var f=c[u];a(f.keyPath,0,f)}function p(s){var m,l=s.query.index;return l.isVirtual?C(C({},s),{query:{index:l.lowLevelIndex,range:(m=s.query.range,l=l.keyTail,{type:m.type===1?2:m.type,lower:Xn(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,l),lowerOpen:!0,upper:Xn(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,l),upperOpen:!0})}}):s}return C(C({},t),{schema:C(C({},r),{primaryKey:n,indexes:i,getIndexByKeyPath:function(s){return(s=o[mn(s)])&amp;&amp;s[0]}}),count:function(s){return t.count(p(s))},query:function(s){return t.query(p(s))},openCursor:function(s){var m=s.query.index,l=m.keyTail,d=m.isVirtual,y=m.keyLength;return d?t.openCursor(p(s)).then(function(v){return v&amp;&amp;h(v)}):t.openCursor(s);function h(v){return Object.create(v,{continue:{value:function(g){g!=null?v.continue(Xn(g,s.reverse?e.MAX_KEY:e.MIN_KEY,l)):s.unique?v.continue(v.key.slice(0,y).concat(s.reverse?e.MIN_KEY:e.MAX_KEY,l)):v.continue()}},continuePrimaryKey:{value:function(g,b){v.continuePrimaryKey(Xn(g,e.MAX_KEY,l),b)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var g=v.key;return y===1?g[0]:g.slice(0,y)}},value:{get:function(){return v.value}}})}}})}})}};function Nt(e,n,t,r){return t=t||{},r=r||&quot;&quot;,B(e).forEach(function(o){var i,a,u;W(n,o)?(i=e[o],a=n[o],typeof i==&quot;object&quot;&amp;&amp;typeof a==&quot;object&quot;&amp;&amp;i&amp;&amp;a?(u=it(i))!==it(a)?t[r+o]=n[o]:u===&quot;Object&quot;?Nt(i,a,t,r+o+&quot;.&quot;):i!==a&amp;&amp;(t[r+o]=n[o]):i!==a&amp;&amp;(t[r+o]=n[o])):t[r+o]=void 0}),B(n).forEach(function(o){W(e,o)||(t[r+o]=n[o])}),t}function Ft(e,n){return n.type===&quot;delete&quot;?n.keys:n.keys||n.values.map(e.extractKey)}var Do={stack:&quot;dbcore&quot;,name:&quot;HooksMiddleware&quot;,level:2,create:function(e){return C(C({},e),{table:function(n){var t=e.table(n),r=t.schema.primaryKey;return C(C({},t),{mutate:function(o){var i=R.trans,a=i.table(n).hook,u=a.deleting,c=a.creating,f=a.updating;switch(o.type){case&quot;add&quot;:if(c.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return p(o)},!0);case&quot;put&quot;:if(c.fire===G&amp;&amp;f.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return p(o)},!0);case&quot;delete&quot;:if(u.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return p(o)},!0);case&quot;deleteRange&quot;:if(u.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return function s(m,l,d){return t.query({trans:m,values:!1,query:{index:r,range:l},limit:d}).then(function(y){var h=y.result;return p({type:&quot;delete&quot;,keys:h,trans:m}).then(function(v){return 0&lt;v.numFailures?Promise.reject(v.failures[0]):h.length&lt;d?{failures:[],numFailures:0,lastResult:void 0}:s(m,C(C({},l),{lower:h[h.length-1],lowerOpen:!0}),d)})})}(o.trans,o.range,1e4)},!0)}return t.mutate(o);function p(s){var m,l,d,y=R.trans,h=s.keys||Ft(r,s);if(!h)throw new Error(&quot;Keys missing&quot;);return(s=s.type===&quot;add&quot;||s.type===&quot;put&quot;?C(C({},s),{keys:h}):C({},s)).type!==&quot;delete&quot;&amp;&amp;(s.values=q([],s.values)),s.keys&amp;&amp;(s.keys=q([],s.keys)),m=t,d=h,((l=s).type===&quot;add&quot;?Promise.resolve([]):m.getMany({trans:l.trans,keys:d,cache:&quot;immutable&quot;})).then(function(v){var g=h.map(function(b,w){var x,E,k,O=v[w],S={onerror:null,onsuccess:null};return s.type===&quot;delete&quot;?u.fire.call(S,b,O,y):s.type===&quot;add&quot;||O===void 0?(x=c.fire.call(S,b,s.values[w],y),b==null&amp;&amp;x!=null&amp;&amp;(s.keys[w]=b=x,r.outbound||se(s.values[w],r.keyPath,b))):(x=Nt(O,s.values[w]),(E=f.fire.call(S,x,b,O,y))&amp;&amp;(k=s.values[w],Object.keys(E).forEach(function(P){W(k,P)?k[P]=E[P]:se(k,P,E[P])}))),S});return t.mutate(s).then(function(b){for(var w=b.failures,x=b.results,E=b.numFailures,b=b.lastResult,k=0;k&lt;h.length;++k){var O=(x||h)[k],S=g[k];O==null?S.onerror&amp;&amp;S.onerror(w[k]):S.onsuccess&amp;&amp;S.onsuccess(s.type===&quot;put&quot;&amp;&amp;v[k]?s.values[k]:O)}return{failures:w,results:x,numFailures:E,lastResult:b}}).catch(function(b){return g.forEach(function(w){return w.onerror&amp;&amp;w.onerror(b)}),Promise.reject(b)})})}}})}})}};function Rr(e,n,t){try{if(!n||n.keys.length&lt;e.length)return null;for(var r=[],o=0,i=0;o&lt;n.keys.length&amp;&amp;i&lt;e.length;++o)$(n.keys[o],e[i])===0&amp;&amp;(r.push(t?je(n.values[o]):n.values[o]),++i);return r.length===e.length?r:null}catch{return null}}var Io={stack:&quot;dbcore&quot;,level:-1,create:function(e){return{table:function(n){var t=e.table(n);return C(C({},t),{getMany:function(r){if(!r.cache)return t.getMany(r);var o=Rr(r.keys,r.trans._cache,r.cache===&quot;clone&quot;);return o?A.resolve(o):t.getMany(r).then(function(i){return r.trans._cache={keys:r.keys,values:r.cache===&quot;clone&quot;?je(i):i},i})},mutate:function(r){return r.type!==&quot;add&quot;&amp;&amp;(r.trans._cache=null),t.mutate(r)}})}}}};function Tr(e,n){return e.trans.mode===&quot;readonly&quot;&amp;&amp;!!e.subscr&amp;&amp;!e.trans.explicit&amp;&amp;e.trans.db._options.cache!==&quot;disabled&quot;&amp;&amp;!n.schema.primaryKey.outbound}function Dr(e,n){switch(e){case&quot;query&quot;:return n.values&amp;&amp;!n.unique;case&quot;get&quot;:case&quot;getMany&quot;:case&quot;count&quot;:case&quot;openCursor&quot;:return!1}}var Mo={stack:&quot;dbcore&quot;,level:0,name:&quot;Observability&quot;,create:function(e){var n=e.schema.name,t=new re(e.MIN_KEY,e.MAX_KEY);return C(C({},e),{transaction:function(r,o,i){if(R.subscr&amp;&amp;o!==&quot;readonly&quot;)throw new D.ReadOnly(&quot;Readwrite transaction in liveQuery context. Querier source: &quot;.concat(R.querier));return e.transaction(r,o,i)},table:function(r){var o=e.table(r),i=o.schema,a=i.primaryKey,s=i.indexes,u=a.extractKey,c=a.outbound,f=a.autoIncrement&amp;&amp;s.filter(function(l){return l.compound&amp;&amp;l.keyPath.includes(a.keyPath)}),p=C(C({},o),{mutate:function(l){function d(P){return P=&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(r,&quot;/&quot;).concat(P),b[P]||(b[P]=new re)}var y,h,v,g=l.trans,b=l.mutatedParts||(l.mutatedParts={}),w=d(&quot;&quot;),x=d(&quot;:dels&quot;),E=l.type,S=l.type===&quot;deleteRange&quot;?[l.range]:l.type===&quot;delete&quot;?[l.keys]:l.values.length&lt;50?[Ft(a,l).filter(function(P){return P}),l.values]:[],k=S[0],O=S[1],S=l.trans._cache;return M(k)?(w.addKeys(k),(S=E===&quot;delete&quot;||k.length===O.length?Rr(k,S):null)||x.addKeys(k),(S||O)&amp;&amp;(y=d,h=S,v=O,i.indexes.forEach(function(P){var j=y(P.name||&quot;&quot;);function L(V){return V!=null?P.extractKey(V):null}function U(V){return P.multiEntry&amp;&amp;M(V)?V.forEach(function(le){return j.addKey(le)}):j.addKey(V)}(h||v).forEach(function(V,oe){var N=h&amp;&amp;L(h[oe]),oe=v&amp;&amp;L(v[oe]);$(N,oe)!==0&amp;&amp;(N!=null&amp;&amp;U(N),oe!=null&amp;&amp;U(oe))})}))):k?(O={from:(O=k.lower)!==null&amp;&amp;O!==void 0?O:e.MIN_KEY,to:(O=k.upper)!==null&amp;&amp;O!==void 0?O:e.MAX_KEY},x.add(O),w.add(O)):(w.add(t),x.add(t),i.indexes.forEach(function(P){return d(P.name).add(t)})),o.mutate(l).then(function(P){return!k||l.type!==&quot;add&quot;&amp;&amp;l.type!==&quot;put&quot;||(w.addKeys(P.results),f&amp;&amp;f.forEach(function(j){for(var L=l.values.map(function(N){return j.extractKey(N)}),U=j.keyPath.findIndex(function(N){return N===a.keyPath}),V=0,le=P.results.length;V&lt;le;++V)L[V][U]=P.results[V];d(j.name).addKeys(L)})),g.mutatedParts=Gn(g.mutatedParts||{},b),P})}}),s=function(d){var y=d.query,d=y.index,y=y.range;return[d,new re((d=y.lower)!==null&amp;&amp;d!==void 0?d:e.MIN_KEY,(y=y.upper)!==null&amp;&amp;y!==void 0?y:e.MAX_KEY)]},m={get:function(l){return[a,new re(l.key)]},getMany:function(l){return[a,new re().addKeys(l.keys)]},count:s,query:s,openCursor:s};return B(m).forEach(function(l){p[l]=function(d){var y=R.subscr,h=!!y,v=Tr(R,o)&amp;&amp;Dr(l,d)?d.obsSet={}:y;if(h){var g=function(O){return O=&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(r,&quot;/&quot;).concat(O),v[O]||(v[O]=new re)},b=g(&quot;&quot;),w=g(&quot;:dels&quot;),y=m[l](d),h=y[0],y=y[1];if((l===&quot;query&quot;&amp;&amp;h.isPrimaryKey&amp;&amp;!d.values?w:g(h.name||&quot;&quot;)).add(y),!h.isPrimaryKey){if(l!==&quot;count&quot;){var x=l===&quot;query&quot;&amp;&amp;c&amp;&amp;d.values&amp;&amp;o.query(C(C({},d),{values:!1}));return o[l].apply(this,arguments).then(function(O){if(l===&quot;query&quot;){if(c&amp;&amp;d.values)return x.then(function(L){return L=L.result,b.addKeys(L),O});var S=d.values?O.result.map(u):O.result;(d.values?b:w).addKeys(S)}else if(l===&quot;openCursor&quot;){var P=O,j=d.values;return P&amp;&amp;Object.create(P,{key:{get:function(){return w.addKey(P.primaryKey),P.key}},primaryKey:{get:function(){var L=P.primaryKey;return w.addKey(L),L}},value:{get:function(){return j&amp;&amp;b.addKey(P.primaryKey),P.value}}})}return O})}w.add(t)}}return o[l].apply(this,arguments)}}),p}})}};function Ir(e,n,t){if(t.numFailures===0)return n;if(n.type===&quot;deleteRange&quot;)return null;var r=n.keys?n.keys.length:&quot;values&quot;in n&amp;&amp;n.values?n.values.length:1;return t.numFailures===r?null:(n=C({},n),M(n.keys)&amp;&amp;(n.keys=n.keys.filter(function(o,i){return!(i in t.failures)})),&quot;values&quot;in n&amp;&amp;M(n.values)&amp;&amp;(n.values=n.values.filter(function(o,i){return!(i in t.failures)})),n)}function Lt(e,n){return t=e,((r=n).lower===void 0||(r.lowerOpen?0&lt;$(t,r.lower):0&lt;=$(t,r.lower)))&amp;&amp;(e=e,(n=n).upper===void 0||(n.upperOpen?$(e,n.upper)&lt;0:$(e,n.upper)&lt;=0));var t,r}function Mr(e,n,m,r,o,i){if(!m||m.length===0)return e;var a=n.query.index,u=a.multiEntry,c=n.query.range,f=r.schema.primaryKey.extractKey,p=a.extractKey,s=(a.lowLevelIndex||a).extractKey,m=m.reduce(function(l,d){var y=l,h=[];if(d.type===&quot;add&quot;||d.type===&quot;put&quot;)for(var v=new re,g=d.values.length-1;0&lt;=g;--g){var b,w=d.values[g],x=f(w);v.hasKey(x)||(b=p(w),(u&amp;&amp;M(b)?b.some(function(P){return Lt(P,c)}):Lt(b,c))&amp;&amp;(v.addKey(x),h.push(w)))}switch(d.type){case&quot;add&quot;:var E=new re().addKeys(n.values?l.map(function(j){return f(j)}):l),y=l.concat(n.values?h.filter(function(j){return j=f(j),!E.hasKey(j)&amp;&amp;(E.addKey(j),!0)}):h.map(function(j){return f(j)}).filter(function(j){return!E.hasKey(j)&amp;&amp;(E.addKey(j),!0)}));break;case&quot;put&quot;:var k=new re().addKeys(d.values.map(function(j){return f(j)}));y=l.filter(function(j){return!k.hasKey(n.values?f(j):j)}).concat(n.values?h:h.map(function(j){return f(j)}));break;case&quot;delete&quot;:var O=new re().addKeys(d.keys);y=l.filter(function(j){return!O.hasKey(n.values?f(j):j)});break;case&quot;deleteRange&quot;:var S=d.range;y=l.filter(function(j){return!Lt(f(j),S)})}return y},e);return m===e?e:(m.sort(function(l,d){return $(s(l),s(d))||$(f(l),f(d))}),n.limit&amp;&amp;n.limit&lt;1/0&amp;&amp;(m.length&gt;n.limit?m.length=n.limit:e.length===n.limit&amp;&amp;m.length&lt;n.limit&amp;&amp;(o.dirty=!0)),i?Object.freeze(m):m)}function qr(e,n){return $(e.lower,n.lower)===0&amp;&amp;$(e.upper,n.upper)===0&amp;&amp;!!e.lowerOpen==!!n.lowerOpen&amp;&amp;!!e.upperOpen==!!n.upperOpen}function qo(e,n){return function(t,r,o,i){if(t===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=$(t,r))===0){if(o&amp;&amp;i)return 0;if(o)return 1;if(i)return-1}return r}(e.lower,n.lower,e.lowerOpen,n.lowerOpen)&lt;=0&amp;&amp;0&lt;=function(t,r,o,i){if(t===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=$(t,r))===0){if(o&amp;&amp;i)return 0;if(o)return-1;if(i)return 1}return r}(e.upper,n.upper,e.upperOpen,n.upperOpen)}function Bo(e,n,t,r){e.subscribers.add(t),r.addEventListener(&quot;abort&quot;,function(){var o,i;e.subscribers.delete(t),e.subscribers.size===0&amp;&amp;(o=e,i=n,setTimeout(function(){o.subscribers.size===0&amp;&amp;Re(i,o)},3e3))})}var No={stack:&quot;dbcore&quot;,level:0,name:&quot;Cache&quot;,create:function(e){var n=e.schema.name;return C(C({},e),{transaction:function(t,r,o){var i,a,u=e.transaction(t,r,o);return r===&quot;readwrite&quot;&amp;&amp;(a=(i=new AbortController).signal,o=function(c){return function(){if(i.abort(),r===&quot;readwrite&quot;){for(var f=new Set,p=0,s=t;p&lt;s.length;p++){var m=s[p],l=Le[&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(m)];if(l){var d=e.table(m),y=l.optimisticOps.filter(function(j){return j.trans===u});if(u._explicit&amp;&amp;c&amp;&amp;u.mutatedParts)for(var h=0,v=Object.values(l.queries.query);h&lt;v.length;h++)for(var g=0,b=(E=v[h]).slice();g&lt;b.length;g++)Dt((k=b[g]).obsSet,u.mutatedParts)&amp;&amp;(Re(E,k),k.subscribers.forEach(function(j){return f.add(j)}));else if(0&lt;y.length){l.optimisticOps=l.optimisticOps.filter(function(j){return j.trans!==u});for(var w=0,x=Object.values(l.queries.query);w&lt;x.length;w++)for(var E,k,O,S=0,P=(E=x[w]).slice();S&lt;P.length;S++)(k=P[S]).res!=null&amp;&amp;u.mutatedParts&amp;&amp;(c&amp;&amp;!k.dirty?(O=Object.isFrozen(k.res),O=Mr(k.res,k.req,y,d,k,O),k.dirty?(Re(E,k),k.subscribers.forEach(function(j){return f.add(j)})):O!==k.res&amp;&amp;(k.res=O,k.promise=A.resolve({result:O}))):(k.dirty&amp;&amp;Re(E,k),k.subscribers.forEach(function(j){return f.add(j)})))}}}f.forEach(function(j){return j()})}}},u.addEventListener(&quot;abort&quot;,o(!1),{signal:a}),u.addEventListener(&quot;error&quot;,o(!1),{signal:a}),u.addEventListener(&quot;complete&quot;,o(!0),{signal:a})),u},table:function(t){var r=e.table(t),o=r.schema.primaryKey;return C(C({},r),{mutate:function(i){var a=R.trans;if(o.outbound||a.db._options.cache===&quot;disabled&quot;||a.explicit||a.idbtrans.mode!==&quot;readwrite&quot;)return r.mutate(i);var u=Le[&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(t)];return u?(a=r.mutate(i),i.type!==&quot;add&quot;&amp;&amp;i.type!==&quot;put&quot;||!(50&lt;=i.values.length||Ft(o,i).some(function(c){return c==null}))?(u.optimisticOps.push(i),i.mutatedParts&amp;&amp;Qn(i.mutatedParts),a.then(function(c){0&lt;c.numFailures&amp;&amp;(Re(u.optimisticOps,i),(c=Ir(0,i,c))&amp;&amp;u.optimisticOps.push(c),i.mutatedParts&amp;&amp;Qn(i.mutatedParts))}),a.catch(function(){Re(u.optimisticOps,i),i.mutatedParts&amp;&amp;Qn(i.mutatedParts)})):a.then(function(c){var f=Ir(0,C(C({},i),{values:i.values.map(function(p,s){var m;return c.failures[s]?p:(p=(m=o.keyPath)!==null&amp;&amp;m!==void 0&amp;&amp;m.includes(&quot;.&quot;)?je(p):C({},p),se(p,o.keyPath,c.results[s]),p)})}),c);u.optimisticOps.push(f),queueMicrotask(function(){return i.mutatedParts&amp;&amp;Qn(i.mutatedParts)})}),a):r.mutate(i)},query:function(i){if(!Tr(R,r)||!Dr(&quot;query&quot;,i))return r.query(i);var a=((f=R.trans)===null||f===void 0?void 0:f.db._options.cache)===&quot;immutable&quot;,s=R,u=s.requery,c=s.signal,f=function(d,y,h,v){var g=Le[&quot;idb://&quot;.concat(d,&quot;/&quot;).concat(y)];if(!g)return[];if(!(y=g.queries[h]))return[null,!1,g,null];var b=y[(v.query?v.query.index.name:null)||&quot;&quot;];if(!b)return[null,!1,g,null];switch(h){case&quot;query&quot;:var w=b.find(function(x){return x.req.limit===v.limit&amp;&amp;x.req.values===v.values&amp;&amp;qr(x.req.query.range,v.query.range)});return w?[w,!0,g,b]:[b.find(function(x){return(&quot;limit&quot;in x.req?x.req.limit:1/0)&gt;=v.limit&amp;&amp;(!v.values||x.req.values)&amp;&amp;qo(x.req.query.range,v.query.range)}),!1,g,b];case&quot;count&quot;:return w=b.find(function(x){return qr(x.req.query.range,v.query.range)}),[w,!!w,g,b]}}(n,t,&quot;query&quot;,i),p=f[0],s=f[1],m=f[2],l=f[3];return p&amp;&amp;s?p.obsSet=i.obsSet:(s=r.query(i).then(function(d){var y=d.result;if(p&amp;&amp;(p.res=y),a){for(var h=0,v=y.length;h&lt;v;++h)Object.freeze(y[h]);Object.freeze(y)}else d.result=je(y);return d}).catch(function(d){return l&amp;&amp;p&amp;&amp;Re(l,p),Promise.reject(d)}),p={obsSet:i.obsSet,promise:s,subscribers:new Set,type:&quot;query&quot;,req:i,dirty:!1},l?l.push(p):(l=[p],(m=m||(Le[&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(t)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[i.query.index.name||&quot;&quot;]=l)),Bo(p,l,u,c),p.promise.then(function(d){return{result:Mr(d.result,i,m==null?void 0:m.optimisticOps,r,p,a)}})}})}})}};function Jn(e,n){return new Proxy(e,{get:function(t,r,o){return r===&quot;db&quot;?n:Reflect.get(t,r,o)}})}var _e=(ee.prototype.version=function(e){if(isNaN(e)||e&lt;.1)throw new D.Type(&quot;Given version is not a positive number&quot;);if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema(&quot;Cannot add version when database is open&quot;);this.verno=Math.max(this.verno,e);var n=this._versions,t=n.filter(function(r){return r._cfg.version===e})[0];return t||(t=new this.Version(e),n.push(t),n.sort(Ko),t.stores({}),this._state.autoSchema=!1,t)},ee.prototype._whenReady=function(e){var n=this;return this.idbdb&amp;&amp;(this._state.openComplete||R.letThrough||this._vip)?e():new A(function(t,r){if(n._state.openComplete)return r(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void r(new D.DatabaseClosed);n.open().catch(G)}n._state.dbReadyPromise.then(t,r)}).then(e)},ee.prototype.use=function(e){var n=e.stack,t=e.create,r=e.level,o=e.name;return o&amp;&amp;this.unuse({stack:n,name:o}),e=this._middlewares[n]||(this._middlewares[n]=[]),e.push({stack:n,create:t,level:r??10,name:o}),e.sort(function(i,a){return i.level-a.level}),this},ee.prototype.unuse=function(e){var n=e.stack,t=e.name,r=e.create;return n&amp;&amp;this._middlewares[n]&amp;&amp;(this._middlewares[n]=this._middlewares[n].filter(function(o){return r?o.create!==r:!!t&amp;&amp;o.name!==t})),this},ee.prototype.open=function(){var e=this;return Be(xe,function(){return Ro(e)})},ee.prototype._close=function(){var e=this._state,n=Je.indexOf(this);if(0&lt;=n&amp;&amp;Je.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new A(function(t){e.dbReadyResolve=t}),e.openCanceller=new A(function(t,r){e.cancelOpen=r}))},ee.prototype.close=function(t){var n=(t===void 0?{disableAutoOpen:!0}:t).disableAutoOpen,t=this._state;n?(t.isBeingOpened&amp;&amp;t.cancelOpen(new D.DatabaseClosed),this._close(),t.autoOpen=!1,t.dbOpenError=new D.DatabaseClosed):(this._close(),t.autoOpen=this._options.autoOpen||t.isBeingOpened,t.openComplete=!1,t.dbOpenError=null)},ee.prototype.delete=function(e){var n=this;e===void 0&amp;&amp;(e={disableAutoOpen:!0});var t=0&lt;arguments.length&amp;&amp;typeof arguments[0]!=&quot;object&quot;,r=this._state;return new A(function(o,i){function a(){n.close(e);var u=n._deps.indexedDB.deleteDatabase(n.name);u.onsuccess=J(function(){var c,f,p;c=n._deps,f=n.name,p=c.indexedDB,c=c.IDBKeyRange,jt(p)||f===qn||At(p,c).delete(f).catch(G),o()}),u.onerror=pe(i),u.onblocked=n._fireOnBlocked}if(t)throw new D.InvalidArgument(&quot;Invalid closeOptions argument to db.delete()&quot;);r.isBeingOpened?r.dbReadyPromise.then(a):a()})},ee.prototype.backendDB=function(){return this.idbdb},ee.prototype.isOpen=function(){return this.idbdb!==null},ee.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&amp;&amp;e.name===&quot;DatabaseClosed&quot;},ee.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ee.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ee.prototype,&quot;tables&quot;,{get:function(){var e=this;return B(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),ee.prototype.transaction=function(){var e=(function(n,t,r){var o=arguments.length;if(o&lt;2)throw new D.InvalidArgument(&quot;Too few arguments&quot;);for(var i=new Array(o-1);--o;)i[o-1]=arguments[o];return r=i.pop(),[n,rr(i),r]}).apply(this,arguments);return this._transaction.apply(this,e)},ee.prototype._transaction=function(e,n,t){var r=this,o=R.trans;o&amp;&amp;o.db===this&amp;&amp;e.indexOf(&quot;!&quot;)===-1||(o=null);var i,a,u=e.indexOf(&quot;?&quot;)!==-1;e=e.replace(&quot;!&quot;,&quot;&quot;).replace(&quot;?&quot;,&quot;&quot;);try{if(a=n.map(function(f){if(f=f instanceof r.Table?f.name:f,typeof f!=&quot;string&quot;)throw new TypeError(&quot;Invalid table argument to Dexie.transaction(). Only Table or String are allowed&quot;);return f}),e==&quot;r&quot;||e===gt)i=gt;else{if(e!=&quot;rw&quot;&amp;&amp;e!=bt)throw new D.InvalidArgument(&quot;Invalid transaction mode: &quot;+e);i=bt}if(o){if(o.mode===gt&amp;&amp;i===bt){if(!u)throw new D.SubTransaction(&quot;Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY&quot;);o=null}o&amp;&amp;a.forEach(function(f){if(o&amp;&amp;o.storeNames.indexOf(f)===-1){if(!u)throw new D.SubTransaction(&quot;Table &quot;+f+&quot; not included in parent transaction.&quot;);o=null}}),u&amp;&amp;o&amp;&amp;!o.active&amp;&amp;(o=null)}}catch(f){return o?o._promise(null,function(p,s){s(f)}):Z(f)}var c=(function f(p,s,m,l,d){return A.resolve().then(function(){var y=R.transless||R,h=p._createTransaction(s,m,p._dbSchema,l);if(h.explicit=!0,y={trans:h,transless:y},l)h.idbtrans=l.idbtrans;else try{h.create(),h.idbtrans._explicit=!0,p._state.PR1398_maxLoop=3}catch(b){return b.name===st.InvalidState&amp;&amp;p.isOpen()&amp;&amp;0&lt;--p._state.PR1398_maxLoop?(console.warn(&quot;Dexie: Need to reopen db&quot;),p.close({disableAutoOpen:!1}),p.open().then(function(){return f(p,s,m,null,d)})):Z(b)}var v,g=ut(d);return g&amp;&amp;Xe(),y=A.follow(function(){var b;(v=d.call(h,h))&amp;&amp;(g?(b=Oe.bind(null,null),v.then(b,b)):typeof v.next==&quot;function&quot;&amp;&amp;typeof v.throw==&quot;function&quot;&amp;&amp;(v=Bt(v)))},y),(v&amp;&amp;typeof v.then==&quot;function&quot;?A.resolve(v).then(function(b){return h.active?b:Z(new D.PrematureCommit(&quot;Transaction committed too early. See http://bit.ly/2kdckMn&quot;))}):y.then(function(){return v})).then(function(b){return l&amp;&amp;h._resolve(),h._completion.then(function(){return b})}).catch(function(b){return h._reject(b),Z(b)})})}).bind(null,this,i,a,o,t);return o?o._promise(i,c,&quot;lock&quot;):R.trans?Be(R.transless,function(){return r._whenReady(c)}):this._whenReady(c)},ee.prototype.table=function(e){if(!W(this._allTables,e))throw new D.InvalidTable(&quot;Table &quot;.concat(e,&quot; does not exist&quot;));return this._allTables[e]},ee);function ee(e,n){var t=this;this._middlewares={},this.verno=0;var r=ee.dependencies;this._options=n=C({addons:ee.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:&quot;cloned&quot;},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},r=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,i,a,u,c,f={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:G,dbReadyPromise:null,cancelOpen:G,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};f.dbReadyPromise=new A(function(s){f.dbReadyResolve=s}),f.openCanceller=new A(function(s,m){f.cancelOpen=m}),this._state=f,this.name=e,this.on=ln(this,&quot;populate&quot;,&quot;blocked&quot;,&quot;versionchange&quot;,&quot;close&quot;,{ready:[ct,G]}),this.on.ready.subscribe=er(this.on.ready.subscribe,function(s){return function(m,l){ee.vip(function(){var d,y=t._state;y.openComplete?(y.dbOpenError||A.resolve().then(m),l&amp;&amp;s(m)):y.onReadyBeingFired?(y.onReadyBeingFired.push(m),l&amp;&amp;s(m)):(s(m),d=t,l||s(function h(){d.on.ready.unsubscribe(m),d.on.ready.unsubscribe(h)}))})}}),this.Collection=(o=this,fn(_o.prototype,function(v,h){this.db=o;var l=pr,d=null;if(h)try{l=h()}catch(g){d=g}var y=v._ctx,h=y.table,v=h.hook.reading.fire;this._ctx={table:h,index:y.index,isPrimKey:!y.index||h.schema.primKey.keyPath&amp;&amp;y.index===h.schema.primKey.name,range:l,keysOnly:!1,dir:&quot;next&quot;,unique:&quot;&quot;,algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:y.or,valueMapper:v!==on?v:null}})),this.Table=(i=this,fn(gr.prototype,function(s,m,l){this.db=i,this._tx=l,this.name=s,this.schema=m,this.hook=i._allTables[s]?i._allTables[s].hook:ln(null,{creating:[fo,G],reading:[lo,on],updating:[po,G],deleting:[ho,G]})})),this.Transaction=(a=this,fn(Oo.prototype,function(s,m,l,d,y){var h=this;this.db=a,this.mode=s,this.storeNames=m,this.schema=l,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=ln(this,&quot;complete&quot;,&quot;error&quot;,&quot;abort&quot;),this.parent=y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new A(function(v,g){h._resolve=v,h._reject=g}),this._completion.then(function(){h.active=!1,h.on.complete.fire()},function(v){var g=h.active;return h.active=!1,h.on.error.fire(v),h.parent?h.parent._reject(v):g&amp;&amp;h.idbtrans&amp;&amp;h.idbtrans.abort(),Z(v)})})),this.Version=(u=this,fn(jo.prototype,function(s){this.db=u,this._cfg={version:s,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,fn(kr.prototype,function(s,m,l){if(this.db=c,this._ctx={table:s,index:m===&quot;:id&quot;?null:m,or:l},this._cmp=this._ascending=$,this._descending=function(d,y){return $(y,d)},this._max=function(d,y){return 0&lt;$(d,y)?d:y},this._min=function(d,y){return $(d,y)&lt;0?d:y},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new D.MissingAPI})),this.on(&quot;versionchange&quot;,function(s){0&lt;s.newVersion?console.warn(&quot;Another connection wants to upgrade database \&#x27;&quot;.concat(t.name,&quot;\&#x27;. Closing db now to resume the upgrade.&quot;)):console.warn(&quot;Another connection wants to delete database \&#x27;&quot;.concat(t.name,&quot;\&#x27;. Closing db now to resume the delete request.&quot;)),t.close({disableAutoOpen:!1})}),this.on(&quot;blocked&quot;,function(s){!s.newVersion||s.newVersion&lt;s.oldVersion?console.warn(&quot;Dexie.delete(\&#x27;&quot;.concat(t.name,&quot;\&#x27;) was blocked&quot;)):console.warn(&quot;Upgrade \&#x27;&quot;.concat(t.name,&quot;\&#x27; blocked by other connection holding version &quot;).concat(s.oldVersion/10))}),this._maxKey=yn(n.IDBKeyRange),this._createTransaction=function(s,m,l,d){return new t.Transaction(s,m,l,t._options.chromeTransactionDurability,d)},this._fireOnBlocked=function(s){t.on(&quot;blocked&quot;).fire(s),Je.filter(function(m){return m.name===t.name&amp;&amp;m!==t&amp;&amp;!m._state.vcFired}).map(function(m){return m.on(&quot;versionchange&quot;).fire(s)})},this.use(Io),this.use(No),this.use(Mo),this.use(To),this.use(Do);var p=new Proxy(this,{get:function(s,m,l){if(m===&quot;_vip&quot;)return!0;if(m===&quot;table&quot;)return function(y){return Jn(t.table(y),p)};var d=Reflect.get(s,m,l);return d instanceof gr?Jn(d,p):m===&quot;tables&quot;?d.map(function(y){return Jn(y,p)}):m===&quot;_createTransaction&quot;?function(){return Jn(d.apply(this,arguments),p)}:d}});this.vip=p,r.forEach(function(s){return s(t)})}var Zn,fe=typeof Symbol&lt;&quot;u&quot;&amp;&amp;&quot;observable&quot;in Symbol?Symbol.observable:&quot;@@observable&quot;,Fo=(Ut.prototype.subscribe=function(e,n,t){return this._subscribe(e&amp;&amp;typeof e!=&quot;function&quot;?e:{next:e,error:n,complete:t})},Ut.prototype[fe]=function(){return this},Ut);function Ut(e){this._subscribe=e}try{Zn={indexedDB:I.indexedDB||I.mozIndexedDB||I.webkitIndexedDB||I.msIndexedDB,IDBKeyRange:I.IDBKeyRange||I.webkitIDBKeyRange}}catch{Zn={indexedDB:null,IDBKeyRange:null}}function Br(e){var n,t=!1,r=new Fo(function(o){var i=ut(e),a,u=!1,c={},f={},p={get closed(){return u},unsubscribe:function(){u||(u=!0,a&amp;&amp;a.abort(),s&amp;&amp;Se.storagemutated.unsubscribe(l))}};o.start&amp;&amp;o.start(p);var s=!1,m=function(){return vt(d)},l=function(y){Gn(c,y),Dt(f,c)&amp;&amp;m()},d=function(){var y,h,v;!u&amp;&amp;Zn.indexedDB&amp;&amp;(c={},y={},a&amp;&amp;a.abort(),a=new AbortController,v=function(g){var b=Ge();try{i&amp;&amp;Xe();var w=ke(e,g);return w=i?w.finally(Oe):w}finally{b&amp;&amp;Qe()}}(h={subscr:y,signal:a.signal,requery:m,querier:e,trans:null}),Promise.resolve(v).then(function(g){t=!0,n=g,u||h.signal.aborted||(c={},function(b){for(var w in b)if(W(b,w))return;return 1}(f=y)||s||(Se(pn,l),s=!0),vt(function(){return!u&amp;&amp;o.next&amp;&amp;o.next(g)}))},function(g){t=!1,[&quot;DatabaseClosedError&quot;,&quot;AbortError&quot;].includes(g==null?void 0:g.name)||u||vt(function(){u||o.error&amp;&amp;o.error(g)})}))};return setTimeout(m,0),p});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var Ue=_e;function Vt(e){var n=Ke;try{Ke=!0,Se.storagemutated.fire(e),qt(e,!0)}finally{Ke=n}}H(Ue,C(C({},Kn),{delete:function(e){return new Ue(e,{addons:[]}).delete()},exists:function(e){return new Ue(e,{addons:[]}).open().then(function(n){return n.close(),!0}).catch(&quot;NoSuchDatabaseError&quot;,function(){return!1})},getDatabaseNames:function(e){try{return n=Ue.dependencies,t=n.indexedDB,n=n.IDBKeyRange,(jt(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(o){return o.name}).filter(function(o){return o!==qn})}):At(t,n).toCollection().primaryKeys()).then(e)}catch{return Z(new D.MissingAPI)}var n,t},defineClass:function(){return function(e){F(this,e)}},ignoreTransaction:function(e){return R.trans?Be(R.transless,e):e()},vip:Rt,async:function(e){return function(){try{var n=Bt(e.apply(this,arguments));return n&amp;&amp;typeof n.then==&quot;function&quot;?n:A.resolve(n)}catch(t){return Z(t)}}},spawn:function(e,n,t){try{var r=Bt(e.apply(t,n||[]));return r&amp;&amp;typeof r.then==&quot;function&quot;?r:A.resolve(r)}catch(o){return Z(o)}},currentTransaction:{get:function(){return R.trans||null}},waitFor:function(e,n){return n=A.resolve(typeof e==&quot;function&quot;?Ue.ignoreTransaction(e):e).timeout(n||6e4),R.trans?R.trans.waitFor(n):n},Promise:A,debug:{get:function(){return de},set:function(e){ur(e)}},derive:We,extend:F,props:H,override:er,Events:ln,on:Se,liveQuery:Br,extendObservabilitySet:Gn,getByKeyPath:ge,setByKeyPath:se,delByKeyPath:function(e,n){typeof n==&quot;string&quot;?se(e,n,void 0):&quot;length&quot;in n&amp;&amp;[].map.call(n,function(t){se(e,t,void 0)})},shallowClone:tr,deepClone:je,getObjectDiff:Nt,cmp:$,asap:nr,minKey:-1/0,addons:[],connections:Je,errnames:st,dependencies:Zn,cache:Le,semVer:&quot;4.0.11&quot;,version:&quot;4.0.11&quot;.split(&quot;.&quot;).map(function(e){return parseInt(e)}).reduce(function(e,n,t){return e+n/Math.pow(10,2*t)})})),Ue.maxKey=yn(Ue.dependencies.IDBKeyRange),typeof dispatchEvent&lt;&quot;u&quot;&amp;&amp;typeof addEventListener&lt;&quot;u&quot;&amp;&amp;(Se(pn,function(e){Ke||(e=new CustomEvent(kt,{detail:e}),Ke=!0,dispatchEvent(e),Ke=!1)}),addEventListener(kt,function(e){e=e.detail,Ke||Vt(e)}));var nn,Ke=!1,Nr=function(){};return typeof BroadcastChannel&lt;&quot;u&quot;&amp;&amp;((Nr=function(){(nn=new BroadcastChannel(kt)).onmessage=function(e){return e.data&amp;&amp;Vt(e.data)}})(),typeof nn.unref==&quot;function&quot;&amp;&amp;nn.unref(),Se(pn,function(e){Ke||nn.postMessage(e)})),typeof addEventListener&lt;&quot;u&quot;&amp;&amp;(addEventListener(&quot;pagehide&quot;,function(e){if(!_e.disableBfCache&amp;&amp;e.persisted){de&amp;&amp;console.debug(&quot;Dexie: handling persisted pagehide&quot;),nn!=null&amp;&amp;nn.close();for(var n=0,t=Je;n&lt;t.length;n++)t[n].close({disableAutoOpen:!1})}}),addEventListener(&quot;pageshow&quot;,function(e){!_e.disableBfCache&amp;&amp;e.persisted&amp;&amp;(de&amp;&amp;console.debug(&quot;Dexie: handling persisted pageshow&quot;),Nr(),Vt({all:new re(-1/0,[[]])}))})),A.rejectionMapper=function(e,n){return!e||e instanceof He||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ar[e.name]?e:(n=new ar[e.name](n||e.message,e),&quot;stack&quot;in e&amp;&amp;he(n,&quot;stack&quot;,{get:function(){return this.inner.stack}}),n)},ur(de),C(_e,Object.freeze({__proto__:null,Dexie:_e,liveQuery:Br,Entity:yr,cmp:$,PropModification:hn,replacePrefix:function(e,n){return new hn({replacePrefix:[e,n]})},add:function(e){return new hn({add:e})},remove:function(e){return new hn({remove:e})},default:_e,RangeSet:re,mergeRanges:gn,rangesOverlap:Kr}),{default:_e}),_e})}(ve)),ve.exports}var Ur=Lr(),nt=me(Ur);const $t=Symbol.for(&quot;Dexie&quot;),wn=globalThis[$t]||(globalThis[$t]=nt);if(nt.semVer!==wn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${nt.semVer} and ${wn.semVer}`);const{liveQuery:Vo,mergeRanges:zo,rangesOverlap:Wo,RangeSet:$o,cmp:Ho,Entity:Yo,PropModification:Go,replacePrefix:Qo,add:Xo,remove:Jo}=wn;/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */const Ht=Symbol(&quot;Comlink.proxy&quot;),Vr=Symbol(&quot;Comlink.endpoint&quot;),zr=Symbol(&quot;Comlink.releaseProxy&quot;),tt=Symbol(&quot;Comlink.finalizer&quot;),_n=Symbol(&quot;Comlink.thrown&quot;),Yt=_=&gt;typeof _==&quot;object&quot;&amp;&amp;_!==null||typeof _==&quot;function&quot;,Wr={canHandle:_=&gt;Yt(_)&amp;&amp;_[Ht],serialize(_){const{port1:K,port2:T}=new MessageChannel;return rt(_,K),[T,[T]]},deserialize(_){return _.start(),Gr(_)}},$r={canHandle:_=&gt;Yt(_)&amp;&amp;_n in _,serialize({value:_}){let K;return _ instanceof Error?K={isError:!0,value:{message:_.message,name:_.name,stack:_.stack}}:K={isError:!1,value:_},[K,[]]},deserialize(_){throw _.isError?Object.assign(new Error(_.value.message),_.value):_.value}},Gt=new Map([[&quot;proxy&quot;,Wr],[&quot;throw&quot;,$r]]);function Hr(_,K){for(const T of _)if(K===T||T===&quot;*&quot;||T instanceof RegExp&amp;&amp;T.test(K))return!0;return!1}function rt(_,K=globalThis,T=[&quot;*&quot;]){K.addEventListener(&quot;message&quot;,function C(q){if(!q||!q.data)return;if(!Hr(T,q.origin)){console.warn(`Invalid origin \&#x27;${q.origin}\&#x27; for comlink proxy`);return}const{id:I,type:B,path:M}=Object.assign({path:[]},q.data),F=(q.data.argumentList||[]).map(Ae);let z;try{const Q=M.slice(0,-1).reduce((H,ue)=&gt;H[ue],_),W=M.reduce((H,ue)=&gt;H[ue],_);switch(B){case&quot;GET&quot;:z=W;break;case&quot;SET&quot;:Q[M.slice(-1)[0]]=Ae(q.data.value),z=!0;break;case&quot;APPLY&quot;:z=W.apply(Q,F);break;case&quot;CONSTRUCT&quot;:{const H=new W(...F);z=eo(H)}break;case&quot;ENDPOINT&quot;:{const{port1:H,port2:ue}=new MessageChannel;rt(_,ue),z=Zr(H,[H])}break;case&quot;RELEASE&quot;:z=void 0;break;default:return}}catch(Q){z={value:Q,[_n]:0}}Promise.resolve(z).catch(Q=&gt;({value:Q,[_n]:0})).then(Q=&gt;{const[W,H]=Pn(Q);K.postMessage(Object.assign(Object.assign({},W),{id:I}),H),B===&quot;RELEASE&quot;&amp;&amp;(K.removeEventListener(&quot;message&quot;,C),Qt(K),tt in _&amp;&amp;typeof _[tt]==&quot;function&quot;&amp;&amp;_[tt]())}).catch(Q=&gt;{const[W,H]=Pn({value:new TypeError(&quot;Unserializable return value&quot;),[_n]:0});K.postMessage(Object.assign(Object.assign({},W),{id:I}),H)})}),K.start&amp;&amp;K.start()}function Yr(_){return _.constructor.name===&quot;MessagePort&quot;}function Qt(_){Yr(_)&amp;&amp;_.close()}function Gr(_,K){const T=new Map;return _.addEventListener(&quot;message&quot;,function(q){const{data:I}=q;if(!I||!I.id)return;const B=T.get(I.id);if(B)try{B(I)}finally{T.delete(I.id)}}),ot(_,T,[],K)}function xn(_){if(_)throw new Error(&quot;Proxy has been released and is not useable&quot;)}function Xt(_){return ze(_,new Map,{type:&quot;RELEASE&quot;}).then(()=&gt;{Qt(_)})}const kn=new WeakMap,On=&quot;FinalizationRegistry&quot;in globalThis&amp;&amp;new FinalizationRegistry(_=&gt;{const K=(kn.get(_)||0)-1;kn.set(_,K),K===0&amp;&amp;Xt(_)});function Qr(_,K){const T=(kn.get(K)||0)+1;kn.set(K,T),On&amp;&amp;On.register(_,K,_)}function Xr(_){On&amp;&amp;On.unregister(_)}function ot(_,K,T=[],C=function(){}){let q=!1;const I=new Proxy(C,{get(B,M){if(xn(q),M===zr)return()=&gt;{Xr(I),Xt(_),K.clear(),q=!0};if(M===&quot;then&quot;){if(T.length===0)return{then:()=&gt;I};const F=ze(_,K,{type:&quot;GET&quot;,path:T.map(z=&gt;z.toString())}).then(Ae);return F.then.bind(F)}return ot(_,K,[...T,M])},set(B,M,F){xn(q);const[z,Q]=Pn(F);return ze(_,K,{type:&quot;SET&quot;,path:[...T,M].map(W=&gt;W.toString()),value:z},Q).then(Ae)},apply(B,M,F){xn(q);const z=T[T.length-1];if(z===Vr)return ze(_,K,{type:&quot;ENDPOINT&quot;}).then(Ae);if(z===&quot;bind&quot;)return ot(_,K,T.slice(0,-1));const[Q,W]=Jt(F);return ze(_,K,{type:&quot;APPLY&quot;,path:T.map(H=&gt;H.toString()),argumentList:Q},W).then(Ae)},construct(B,M){xn(q);const[F,z]=Jt(M);return ze(_,K,{type:&quot;CONSTRUCT&quot;,path:T.map(Q=&gt;Q.toString()),argumentList:F},z).then(Ae)}});return Qr(I,_),I}function Jr(_){return Array.prototype.concat.apply([],_)}function Jt(_){const K=_.map(Pn);return[K.map(T=&gt;T[0]),Jr(K.map(T=&gt;T[1]))]}const Zt=new WeakMap;function Zr(_,K){return Zt.set(_,K),_}function eo(_){return Object.assign(_,{[Ht]:!0})}function Pn(_){for(const[K,T]of Gt)if(T.canHandle(_)){const[C,q]=T.serialize(_);return[{type:&quot;HANDLER&quot;,name:K,value:C},q]}return[{type:&quot;RAW&quot;,value:_},Zt.get(_)||[]]}function Ae(_){switch(_.type){case&quot;HANDLER&quot;:return Gt.get(_.name).deserialize(_.value);case&quot;RAW&quot;:return _.value}}function ze(_,K,T,C){return new Promise(q=&gt;{const I=no();K.set(I,q),_.start&amp;&amp;_.start(),_.postMessage(Object.assign({id:I},T),C)})}function no(){return new Array(4).fill(0).map(()=&gt;Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join(&quot;-&quot;)}class to{constructor(){bn(this,&quot;db&quot;);bn(this,&quot;models&quot;);bn(this,&quot;memoryCacheDrawRange&quot;,new Map);bn(this,&quot;memoryCacheHierarchy&quot;,new Map);this.db=new wn(&quot;ModelCacheDB&quot;),this.db.version(1).stores({models:&quot;&amp;key&quot;}),this.models=this.db.table(&quot;models&quot;)}async add(K,T,C){await this.models.put({key:K,hierarchy:T,drawRanges:C}),this.memoryCacheDrawRange.set(K,C),this.memoryCacheHierarchy.set(K,T)}async get(K){return this.models.get(K)}async remove(K){await this.models.delete(K)}async listKeys(){return this.models.toCollection().primaryKeys()}async getDrawRange(K,T,C){const q=this.memoryCacheDrawRange.get(K);if(!q)return console.error(&quot;ModelWorkerAPI: No drawRanges found for key:&quot;,K),null;const I=q[T];if(!I)return null;const B=C*3;for(const[M,[F,z]]of Object.entries(I))if(B&gt;=F&amp;&amp;B&lt;F+z)return[M,F,z];return null}async getPointId(K,T,C){const q=this.memoryCacheDrawRange.get(K);if(!q)return console.error(&quot;ModelWorkerAPI: No drawRanges found for key:&quot;,K),null;const I=q[T];if(!I)return null;const B=C;for(const[M,[F,z]]of Object.entries(I))if(B&gt;=F&amp;&amp;B&lt;F+z)return[M,F,z];return null}async getPointRangeByRangeId(K,T,C){const q=this.memoryCacheDrawRange.get(K);if(!q)return console.error(&quot;ModelWorkerAPI: No drawRanges found for key:&quot;,K),null;const I=q[T];if(!I)return null;const B=I[C];if(!B)return null;const[M,F]=B;return[M,F]}async getNameFromRangeId(K,T){const C=this.memoryCacheHierarchy.get(K);if(!C)return console.error(&quot;ModelWorkerAPI: No hierarchy found for key:&quot;,K),null;const q=C[T];return q?q[0]:null}buildElementToMeshMap(K){const T=this.memoryCacheDrawRange.get(K)??{},C=new Map;for(const[q,I]of Object.entries(T))for(const B of Object.keys(I))C.set(B,q);return C}buildHierarchy(K,T,C){const q={},I=this.buildElementToMeshMap(K);let B=C+1,M=new Map;for(const[Q,[W]]of Object.entries(T)){const H=String(B);q[H]={id:H,name:W,children:[],rangeId:Q,model_key:K,node_name:I.get(Q)??null},M.set(Q,H),B++}let F=null;for(const[Q,[,W]]of Object.entries(T)){const H=M.get(Q);if(!H){console.warn(`ModelWorkerAPI: No string_id found for ${Q} (${W})`);continue}if(W===&quot;*&quot;||W===null)F=q[H];else{let ue=M.get(W);if(!ue){console.warn(`ModelWorkerAPI: No parent found for ${H} (${W})`);continue}const he=q[ue];he&amp;&amp;he.children.push(q[H])}}const z=Q=&gt;{Q.children.sort((W,H)=&gt;{try{return W.name.localeCompare(H.name,void 0,{numeric:!0,sensitivity:&quot;base&quot;})}catch(ue){if(ue instanceof TypeError)return 0;throw ue}}),Q.children.forEach(z)};return F&amp;&amp;z(F),F}async getDrawRangesByMemberNames(K,T){const C=this.memoryCacheHierarchy.get(K),q=this.memoryCacheDrawRange.get(K);if(!C||!q)return console.error(&quot;ModelWorkerAPI: No hierarchy or drawRanges found for key:&quot;,K),[];const I=[],B=this.buildElementToMeshMap(K);for(const[M,[F]]of Object.entries(C))if(T.includes(F)){const z=B.get(M);z&amp;&amp;I.push([z,M])}return I}}rt(new to)})();\n&#x27;,dR=typeof self&lt;&quot;u&quot;&amp;&amp;self.Blob&amp;&amp;new Blob([OI],{type:&quot;text/javascript;charset=utf-8&quot;});function o6(n){let e;try{if(e=dR&amp;&amp;(self.URL||self.webkitURL).createObjectURL(dR),!e)throw&quot;&quot;;const t=new Worker(e,{name:n==null?void 0:n.name});return t.addEventListener(&quot;error&quot;,()=&gt;{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker(&quot;data:text/javascript;charset=utf-8,&quot;+encodeURIComponent(OI),{name:n==null?void 0:n.name})}finally{e&amp;&amp;(self.URL||self.webkitURL).revokeObjectURL(e)}}const a6=new o6,El=AI(a6),Tl=to(n=&gt;({treeData:null,tree:null,searchTerm:&quot;&quot;,max_id:0,setSearchTerm:e=&gt;n({searchTerm:e}),setTree:e=&gt;n({tree:e}),setTreeData:e=&gt;n({treeData:e}),clearTreeData:()=&gt;n({treeData:null}),isTreeCollapsed:!0,setIsTreeCollapsed:e=&gt;n({isTreeCollapsed:e}),setMaxId:e=&gt;n({max_id:e})}));async function l6(n,e){var o;const t=Tl.getState(),i=e.id_hierarchy??{},r={};for(const l of Object.keys(e).filter(u=&gt;u.startsWith(&quot;draw_ranges_node&quot;))){const u=l.slice(16);r[`node${u}`]=e[l]}try{await El.add(n,i,r)}catch(l){console.error(&quot;Failed to cache model metadata&quot;,l)}let s;try{s=await El.buildHierarchy(n,i,t.max_id+1)}catch(l){console.error(&quot;Failed to build tree hierarchy&quot;,l);return}if(s){if(t.treeData&amp;&amp;t.treeData.children.length&gt;0){let u=(o=t.treeData)==null?void 0:o.children.find(h=&gt;h.name===&quot;root&quot;);u?u.children=[...u.children,s]:u={id:(t.max_id+1).toString(),name:&quot;root&quot;,children:[s,t.treeData],model_key:n,node_name:null},t.setTreeData(u)}else t.setTreeData(s);const l=await NI(s);t.setMaxId(l+1)}}async function NI(n,e=0){if(n.children.length===0)return Math.max(Number(n.id),e);for(const t of n.children)e=await NI(t,e);return e}function c6(n){var s;const e=(s=n.parser)==null?void 0:s.json;if(!e)throw new Error(&quot;Raw glTF JSON not available on parser.json&quot;);const t=e.animations,i=e.nodes,r=new Map;return t.forEach((o,l)=&gt;{const u=o.name||`animation_${l}`,h=[];o.channels.forEach(f=&gt;{const p=f.target.node,m=i[p],g=(m==null?void 0:m.name)||`node_${p}`;h.includes(g)||h.push(g)}),r.set(u,h)}),r}class u6 extends Qi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new m6(t)}),this.register(function(t){return new g6(t)}),this.register(function(t){return new T6(t)}),this.register(function(t){return new M6(t)}),this.register(function(t){return new A6(t)}),this.register(function(t){return new _6(t)}),this.register(function(t){return new v6(t)}),this.register(function(t){return new b6(t)}),this.register(function(t){return new x6(t)}),this.register(function(t){return new p6(t)}),this.register(function(t){return new S6(t)}),this.register(function(t){return new y6(t)}),this.register(function(t){return new E6(t)}),this.register(function(t){return new w6(t)}),this.register(function(t){return new f6(t)}),this.register(function(t){return new C6(t)}),this.register(function(t){return new R6(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!==&quot;&quot;)o=this.resourcePath;else if(this.path!==&quot;&quot;){const h=So.extractUrlBase(e);o=So.resolveURL(h,this.path)}else o=So.extractUrlBase(e);this.manager.itemStart(e);const l=function(h){r?r(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},u=new ss(this.manager);u.setPath(this.path),u.setResponseType(&quot;arraybuffer&quot;),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{s.parse(h,o,function(f){t(f),s.manager.itemEnd(e)},l)}catch(f){l(f)}},i,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&amp;&amp;this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&amp;&amp;this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},l={},u=new TextDecoder;if(typeof e==&quot;string&quot;)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(u.decode(new Uint8Array(e,0,4))===DI){try{o[cn.KHR_BINARY_GLTF]=new O6(e)}catch(p){r&amp;&amp;r(p);return}s=JSON.parse(o[cn.KHR_BINARY_GLTF].content)}else s=JSON.parse(u.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]&lt;2){r&amp;&amp;r(new Error(&quot;THREE.GLTFLoader: Unsupported asset. glTF versions &gt;=2.0 are supported.&quot;));return}const h=new G6(s,{path:t||this.resourcePath||&quot;&quot;,crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f&lt;this.pluginCallbacks.length;f++){const p=this.pluginCallbacks[f](h);p.name||console.error(&quot;THREE.GLTFLoader: Invalid plugin found: missing name&quot;),l[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(let f=0;f&lt;s.extensionsUsed.length;++f){const p=s.extensionsUsed[f],m=s.extensionsRequired||[];switch(p){case cn.KHR_MATERIALS_UNLIT:o[p]=new d6;break;case cn.KHR_DRACO_MESH_COMPRESSION:o[p]=new N6(s,this.dracoLoader);break;case cn.KHR_TEXTURE_TRANSFORM:o[p]=new D6;break;case cn.KHR_MESH_QUANTIZATION:o[p]=new I6;break;default:m.indexOf(p)&gt;=0&amp;&amp;l[p]===void 0&amp;&amp;console.warn(&#x27;THREE.GLTFLoader: Unknown extension &quot;&#x27;+p+&#x27;&quot;.&#x27;)}}h.setExtensions(o),h.setPlugins(l),h.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function h6(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const cn={KHR_BINARY_GLTF:&quot;KHR_binary_glTF&quot;,KHR_DRACO_MESH_COMPRESSION:&quot;KHR_draco_mesh_compression&quot;,KHR_LIGHTS_PUNCTUAL:&quot;KHR_lights_punctual&quot;,KHR_MATERIALS_CLEARCOAT:&quot;KHR_materials_clearcoat&quot;,KHR_MATERIALS_DISPERSION:&quot;KHR_materials_dispersion&quot;,KHR_MATERIALS_IOR:&quot;KHR_materials_ior&quot;,KHR_MATERIALS_SHEEN:&quot;KHR_materials_sheen&quot;,KHR_MATERIALS_SPECULAR:&quot;KHR_materials_specular&quot;,KHR_MATERIALS_TRANSMISSION:&quot;KHR_materials_transmission&quot;,KHR_MATERIALS_IRIDESCENCE:&quot;KHR_materials_iridescence&quot;,KHR_MATERIALS_ANISOTROPY:&quot;KHR_materials_anisotropy&quot;,KHR_MATERIALS_UNLIT:&quot;KHR_materials_unlit&quot;,KHR_MATERIALS_VOLUME:&quot;KHR_materials_volume&quot;,KHR_TEXTURE_BASISU:&quot;KHR_texture_basisu&quot;,KHR_TEXTURE_TRANSFORM:&quot;KHR_texture_transform&quot;,KHR_MESH_QUANTIZATION:&quot;KHR_mesh_quantization&quot;,KHR_MATERIALS_EMISSIVE_STRENGTH:&quot;KHR_materials_emissive_strength&quot;,EXT_MATERIALS_BUMP:&quot;EXT_materials_bump&quot;,EXT_TEXTURE_WEBP:&quot;EXT_texture_webp&quot;,EXT_TEXTURE_AVIF:&quot;EXT_texture_avif&quot;,EXT_MESHOPT_COMPRESSION:&quot;EXT_meshopt_compression&quot;,EXT_MESH_GPU_INSTANCING:&quot;EXT_mesh_gpu_instancing&quot;};class f6{constructor(e){this.parser=e,this.name=cn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i&lt;r;i++){const s=t[i];s.extensions&amp;&amp;s.extensions[this.name]&amp;&amp;s.extensions[this.name].light!==void 0&amp;&amp;e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i=&quot;light:&quot;+e;let r=t.cache.get(i);if(r)return r;const s=t.json,u=((s.extensions&amp;&amp;s.extensions[this.name]||{}).lights||[])[e];let h;const f=new Ye(16777215);u.color!==void 0&amp;&amp;f.setRGB(u.color[0],u.color[1],u.color[2],pr);const p=u.range!==void 0?u.range:0;switch(u.type){case&quot;directional&quot;:h=new ep(f),h.target.position.set(0,0,-1),h.add(h.target);break;case&quot;point&quot;:h=new Vy(f),h.distance=p;break;case&quot;spot&quot;:h=new Hy(f),h.distance=p,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,h.angle=u.spot.outerConeAngle,h.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error(&quot;THREE.GLTFLoader: Unexpected light type: &quot;+u.type)}return h.position.set(0,0,0),ea(h,u),u.intensity!==void 0&amp;&amp;(h.intensity=u.intensity),h.name=t.createUniqueName(u.name||&quot;light_&quot;+e),r=Promise.resolve(h),t.cache.add(i,r),r}getDependency(e,t){if(e===&quot;light&quot;)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],l=(s.extensions&amp;&amp;s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return i._getNodeRef(t.cache,l,u)})}}class d6{constructor(){this.name=cn.KHR_MATERIALS_UNLIT}getMaterialType(){return zi}extendParams(e,t,i){const r=[];e.color=new Ye(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],pr),e.opacity=o[3]}s.baseColorTexture!==void 0&amp;&amp;r.push(i.assignTexture(e,&quot;map&quot;,s.baseColorTexture,Dn))}return Promise.all(r)}}class p6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&amp;&amp;(t.emissiveIntensity=s),Promise.resolve()}}class m6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&amp;&amp;(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;clearcoatMap&quot;,o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&amp;&amp;(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;clearcoatRoughnessMap&quot;,o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&amp;&amp;(s.push(i.assignTexture(t,&quot;clearcoatNormalMap&quot;,o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Re(l,l)}return Promise.all(s)}}class g6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class y6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&amp;&amp;(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;iridescenceMap&quot;,o.iridescenceTexture)),o.iridescenceIor!==void 0&amp;&amp;(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&amp;&amp;(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&amp;&amp;(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&amp;&amp;(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;iridescenceThicknessMap&quot;,o.iridescenceThicknessTexture)),Promise.all(s)}}class _6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ye(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],pr)}return o.sheenRoughnessFactor!==void 0&amp;&amp;(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;sheenColorMap&quot;,o.sheenColorTexture,Dn)),o.sheenRoughnessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;sheenRoughnessMap&quot;,o.sheenRoughnessTexture)),Promise.all(s)}}class v6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&amp;&amp;(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;transmissionMap&quot;,o.transmissionTexture)),Promise.all(s)}}class b6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;thicknessMap&quot;,o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ye().setRGB(l[0],l[1],l[2],pr),Promise.all(s)}}class x6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class S6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;specularIntensityMap&quot;,o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new Ye().setRGB(l[0],l[1],l[2],pr),o.specularColorTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;specularColorMap&quot;,o.specularColorTexture,Dn)),Promise.all(s)}}class w6{constructor(e){this.parser=e,this.name=cn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;bumpMap&quot;,o.bumpTexture)),Promise.all(s)}}class E6{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:as}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&amp;&amp;(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&amp;&amp;(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;anisotropyMap&quot;,o.anisotropyTexture)),Promise.all(s)}}class T6{constructor(e){this.parser=e,this.name=cn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&amp;&amp;i.extensionsRequired.indexOf(this.name)&gt;=0)throw new Error(&quot;THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures&quot;);return null}return t.loadTextureImage(e,s.source,o)}}class M6{constructor(e){this.parser=e,this.name=cn.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&amp;&amp;(u=h)}return i.loadTextureImage(e,o.source,u)}}class A6{constructor(e){this.parser=e,this.name=cn.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&amp;&amp;(u=h)}return i.loadTextureImage(e,o.source,u)}}class C6{constructor(e){this.name=cn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&amp;&amp;i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency(&quot;buffer&quot;,r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&amp;&amp;t.extensionsRequired.indexOf(this.name)&gt;=0)throw new Error(&quot;THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files&quot;);return null}return s.then(function(l){const u=r.byteOffset||0,h=r.byteLength||0,f=r.count,p=r.byteStride,m=new Uint8Array(l,u,h);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,p,m,r.mode,r.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(f*p);return o.decodeGltfBuffer(new Uint8Array(g),f,p,m,r.mode,r.filter),g})})}else return null}}class R6{constructor(e){this.name=cn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const h of r.primitives)if(h.mode!==Ss.TRIANGLES&amp;&amp;h.mode!==Ss.TRIANGLE_STRIP&amp;&amp;h.mode!==Ss.TRIANGLE_FAN&amp;&amp;h.mode!==void 0)return null;const o=i.extensions[this.name].attributes,l=[],u={};for(const h in o)l.push(this.parser.getDependency(&quot;accessor&quot;,o[h]).then(f=&gt;(u[h]=f,u[h])));return l.length&lt;1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(h=&gt;{const f=h.pop(),p=f.isGroup?f.children:[f],m=h[0].count,g=[];for(const v of p){const x=new yt,b=new K,_=new Ti,T=new K(1,1,1),w=new Sw(v.geometry,v.material,m);for(let S=0;S&lt;m;S++)u.TRANSLATION&amp;&amp;b.fromBufferAttribute(u.TRANSLATION,S),u.ROTATION&amp;&amp;_.fromBufferAttribute(u.ROTATION,S),u.SCALE&amp;&amp;T.fromBufferAttribute(u.SCALE,S),w.setMatrixAt(S,x.compose(b,_,T));for(const S in u)if(S===&quot;_COLOR_0&quot;){const C=u[S];w.instanceColor=new Nc(C.array,C.itemSize,C.normalized)}else S!==&quot;TRANSLATION&quot;&amp;&amp;S!==&quot;ROTATION&quot;&amp;&amp;S!==&quot;SCALE&quot;&amp;&amp;v.geometry.setAttribute(S,u[S]);nn.prototype.copy.call(w,v),this.parser.assignFinalMaterial(w),g.push(w)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}}const DI=&quot;glTF&quot;,Bf=12,pR={JSON:1313821514,BIN:5130562};class O6{constructor(e){this.name=cn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Bf),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==DI)throw new Error(&quot;THREE.GLTFLoader: Unsupported glTF-Binary header.&quot;);if(this.header.version&lt;2)throw new Error(&quot;THREE.GLTFLoader: Legacy binary file detected.&quot;);const r=this.header.length-Bf,s=new DataView(e,Bf);let o=0;for(;o&lt;r;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===pR.JSON){const h=new Uint8Array(e,Bf+o,l);this.content=i.decode(h)}else if(u===pR.BIN){const h=Bf+o;this.body=e.slice(h,h+l)}o+=l}if(this.content===null)throw new Error(&quot;THREE.GLTFLoader: JSON content not found.&quot;)}}class N6{constructor(e,t){if(!t)throw new Error(&quot;THREE.GLTFLoader: No DRACOLoader instance provided.&quot;);this.name=cn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},u={},h={};for(const f in o){const p=RS[f]||f.toLowerCase();l[p]=o[f]}for(const f in e.attributes){const p=RS[f]||f.toLowerCase();if(o[f]!==void 0){const m=i.accessors[e.attributes[f]],g=ih[m.componentType];h[p]=g.name,u[p]=m.normalized===!0}}return t.getDependency(&quot;bufferView&quot;,s).then(function(f){return new Promise(function(p,m){r.decodeDracoFile(f,function(g){for(const v in g.attributes){const x=g.attributes[v],b=u[v];b!==void 0&amp;&amp;(x.normalized=b)}p(g)},l,h,pr,m)})})}}class D6{constructor(){this.name=cn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&amp;&amp;t.offset===void 0&amp;&amp;t.rotation===void 0&amp;&amp;t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&amp;&amp;(e.channel=t.texCoord),t.offset!==void 0&amp;&amp;e.offset.fromArray(t.offset),t.rotation!==void 0&amp;&amp;(e.rotation=t.rotation),t.scale!==void 0&amp;&amp;e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class I6{constructor(){this.name=cn.KHR_MESH_QUANTIZATION}}class II extends Dh{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=l*2,h=l*3,f=r-t,p=(i-t)/f,m=p*p,g=m*p,v=e*h,x=v-h,b=-2*g+3*m,_=g-m,T=1-b,w=_-m+p;for(let S=0;S!==l;S++){const C=o[x+S+l],O=o[x+S+u]*f,M=o[v+S+l],N=o[v+S]*f;s[S]=T*C+w*O+b*M+_*N}return s}}const P6=new Ti;class L6 extends II{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return P6.fromArray(s).normalize().toArray(s),s}}const Ss={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ih={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},mR={9728:Ei,9729:fi,9984:ay,9985:th,9986:vc,9987:ts},gR={33071:sr,33648:oh,10497:Ts},px={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},RS={POSITION:&quot;position&quot;,NORMAL:&quot;normal&quot;,TANGENT:&quot;tangent&quot;,TEXCOORD_0:&quot;uv&quot;,TEXCOORD_1:&quot;uv1&quot;,TEXCOORD_2:&quot;uv2&quot;,TEXCOORD_3:&quot;uv3&quot;,COLOR_0:&quot;color&quot;,WEIGHTS_0:&quot;skinWeight&quot;,JOINTS_0:&quot;skinIndex&quot;},tl={scale:&quot;scale&quot;,translation:&quot;position&quot;,rotation:&quot;quaternion&quot;,weights:&quot;morphTargetInfluences&quot;},U6={CUBICSPLINE:void 0,LINEAR:fh,STEP:hh},mx={OPAQUE:&quot;OPAQUE&quot;,MASK:&quot;MASK&quot;,BLEND:&quot;BLEND&quot;};function k6(n){return n.DefaultMaterial===void 0&amp;&amp;(n.DefaultMaterial=new rs({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:is})),n.DefaultMaterial}function lc(n,e,t){for(const i in t.extensions)n[i]===void 0&amp;&amp;(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function ea(n,e){e.extras!==void 0&amp;&amp;(typeof e.extras==&quot;object&quot;?Object.assign(n.userData,e.extras):console.warn(&quot;THREE.GLTFLoader: Ignoring primitive type .extras, &quot;+e.extras))}function F6(n,e,t){let i=!1,r=!1,s=!1;for(let h=0,f=e.length;h&lt;f;h++){const p=e[h];if(p.POSITION!==void 0&amp;&amp;(i=!0),p.NORMAL!==void 0&amp;&amp;(r=!0),p.COLOR_0!==void 0&amp;&amp;(s=!0),i&amp;&amp;r&amp;&amp;s)break}if(!i&amp;&amp;!r&amp;&amp;!s)return Promise.resolve(n);const o=[],l=[],u=[];for(let h=0,f=e.length;h&lt;f;h++){const p=e[h];if(i){const m=p.POSITION!==void 0?t.getDependency(&quot;accessor&quot;,p.POSITION):n.attributes.position;o.push(m)}if(r){const m=p.NORMAL!==void 0?t.getDependency(&quot;accessor&quot;,p.NORMAL):n.attributes.normal;l.push(m)}if(s){const m=p.COLOR_0!==void 0?t.getDependency(&quot;accessor&quot;,p.COLOR_0):n.attributes.color;u.push(m)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(h){const f=h[0],p=h[1],m=h[2];return i&amp;&amp;(n.morphAttributes.position=f),r&amp;&amp;(n.morphAttributes.normal=p),s&amp;&amp;(n.morphAttributes.color=m),n.morphTargetsRelative=!0,n})}function z6(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t&lt;i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&amp;&amp;Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i&lt;r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn(&quot;THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.&quot;)}}function B6(n){let e;const t=n.extensions&amp;&amp;n.extensions[cn.KHR_DRACO_MESH_COMPRESSION];if(t?e=&quot;draco:&quot;+t.bufferView+&quot;:&quot;+t.indices+&quot;:&quot;+gx(t.attributes):e=n.indices+&quot;:&quot;+gx(n.attributes)+&quot;:&quot;+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i&lt;r;i++)e+=&quot;:&quot;+gx(n.targets[i]);return e}function gx(n){let e=&quot;&quot;;const t=Object.keys(n).sort();for(let i=0,r=t.length;i&lt;r;i++)e+=t[i]+&quot;:&quot;+n[t[i]]+&quot;;&quot;;return e}function OS(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error(&quot;THREE.GLTFLoader: Unsupported normalized accessor component type.&quot;)}}function H6(n){return n.search(/\.jpe?g($|\?)/i)&gt;0||n.search(/^data\:image\/jpeg/)===0?&quot;image/jpeg&quot;:n.search(/\.webp($|\?)/i)&gt;0||n.search(/^data\:image\/webp/)===0?&quot;image/webp&quot;:n.search(/\.ktx2($|\?)/i)&gt;0||n.search(/^data\:image\/ktx2/)===0?&quot;image/ktx2&quot;:&quot;image/png&quot;}const V6=new yt;class G6{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new h6,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator&lt;&quot;u&quot;){const l=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(l)===!0;const u=l.match(/Version\/(\d+)/);r=i&amp;&amp;u?parseInt(u[1],10):-1,s=l.indexOf(&quot;Firefox&quot;)&gt;-1,o=s?l.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap&gt;&quot;u&quot;||i&amp;&amp;r&lt;17||s&amp;&amp;o&lt;98?this.textureLoader=new By(this.options.manager):this.textureLoader=new FD(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ss(this.options.manager),this.fileLoader.setResponseType(&quot;arraybuffer&quot;),this.options.crossOrigin===&quot;use-credentials&quot;&amp;&amp;this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&amp;&amp;o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&amp;&amp;o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies(&quot;scene&quot;),i.getDependencies(&quot;animation&quot;),i.getDependencies(&quot;camera&quot;)])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return lc(s,l,r),ea(l,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&amp;&amp;u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r&lt;s;r++){const o=t[r].joints;for(let l=0,u=o.length;l&lt;u;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r&lt;s;r++){const o=e[r];o.mesh!==void 0&amp;&amp;(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&amp;&amp;(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&amp;&amp;this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&amp;&amp;(e.refs[t]===void 0&amp;&amp;(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]&lt;=1)return i;const r=i.clone(),s=(o,l)=&gt;{const u=this.associations.get(o);u!=null&amp;&amp;this.associations.set(l,u);for(const[h,f]of o.children.entries())s(f,l.children[h])};return s(i,r),r.name+=&quot;_instance_&quot;+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i&lt;t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r&lt;t.length;r++){const s=e(t[r]);s&amp;&amp;i.push(s)}return i}getDependency(e,t){const i=e+&quot;:&quot;+t;let r=this.cache.get(i);if(!r){switch(e){case&quot;scene&quot;:r=this.loadScene(t);break;case&quot;node&quot;:r=this._invokeOne(function(s){return s.loadNode&amp;&amp;s.loadNode(t)});break;case&quot;mesh&quot;:r=this._invokeOne(function(s){return s.loadMesh&amp;&amp;s.loadMesh(t)});break;case&quot;accessor&quot;:r=this.loadAccessor(t);break;case&quot;bufferView&quot;:r=this._invokeOne(function(s){return s.loadBufferView&amp;&amp;s.loadBufferView(t)});break;case&quot;buffer&quot;:r=this.loadBuffer(t);break;case&quot;material&quot;:r=this._invokeOne(function(s){return s.loadMaterial&amp;&amp;s.loadMaterial(t)});break;case&quot;texture&quot;:r=this._invokeOne(function(s){return s.loadTexture&amp;&amp;s.loadTexture(t)});break;case&quot;skin&quot;:r=this.loadSkin(t);break;case&quot;animation&quot;:r=this._invokeOne(function(s){return s.loadAnimation&amp;&amp;s.loadAnimation(t)});break;case&quot;camera&quot;:r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&amp;&amp;s.getDependency&amp;&amp;s.getDependency(e,t)}),!r)throw new Error(&quot;Unknown type: &quot;+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e===&quot;mesh&quot;?&quot;es&quot;:&quot;s&quot;)]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&amp;&amp;t.type!==&quot;arraybuffer&quot;)throw new Error(&quot;THREE.GLTFLoader: &quot;+t.type+&quot; buffer type is not supported.&quot;);if(t.uri===void 0&amp;&amp;e===0)return Promise.resolve(this.extensions[cn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(So.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error(&#x27;THREE.GLTFLoader: Failed to load buffer &quot;&#x27;+t.uri+&#x27;&quot;.&#x27;))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency(&quot;buffer&quot;,t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&amp;&amp;r.sparse===void 0){const o=px[r.type],l=ih[r.componentType],u=r.normalized===!0,h=new l(r.count*o);return Promise.resolve(new Vt(h,o,u))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency(&quot;bufferView&quot;,r.bufferView)):s.push(null),r.sparse!==void 0&amp;&amp;(s.push(this.getDependency(&quot;bufferView&quot;,r.sparse.indices.bufferView)),s.push(this.getDependency(&quot;bufferView&quot;,r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],u=px[r.type],h=ih[r.componentType],f=h.BYTES_PER_ELEMENT,p=f*u,m=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let x,b;if(g&amp;&amp;g!==p){const _=Math.floor(m/g),T=&quot;InterleavedBuffer:&quot;+r.bufferView+&quot;:&quot;+r.componentType+&quot;:&quot;+_+&quot;:&quot;+r.count;let w=t.cache.get(T);w||(x=new h(l,_*g,r.count*g/f),w=new $d(x,g/f),t.cache.add(T,w)),b=new bl(w,u,m%g/f,v)}else l===null?x=new h(r.count*u):x=new h(l,m,r.count*u),b=new Vt(x,u,v);if(r.sparse!==void 0){const _=px.SCALAR,T=ih[r.sparse.indices.componentType],w=r.sparse.indices.byteOffset||0,S=r.sparse.values.byteOffset||0,C=new T(o[1],w,r.sparse.count*_),O=new h(o[2],S,r.sparse.count*u);l!==null&amp;&amp;(b=new Vt(b.array.slice(),b.itemSize,b.normalized)),b.normalized=!1;for(let M=0,N=C.length;M&lt;N;M++){const R=C[M];if(b.setX(R,O[M*u]),u&gt;=2&amp;&amp;b.setY(R,O[M*u+1]),u&gt;=3&amp;&amp;b.setZ(R,O[M*u+2]),u&gt;=4&amp;&amp;b.setW(R,O[M*u+3]),u&gt;=5)throw new Error(&quot;THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.&quot;)}b.normalized=v}return b})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const u=i.manager.getHandler(o.uri);u!==null&amp;&amp;(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+&quot;:&quot;+o.sampler;if(this.textureCache[u])return this.textureCache[u];const h=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=o.name||l.name||&quot;&quot;,f.name===&quot;&quot;&amp;&amp;typeof l.uri==&quot;string&quot;&amp;&amp;l.uri.startsWith(&quot;data:image/&quot;)===!1&amp;&amp;(f.name=l.uri);const m=(s.samplers||{})[o.sampler]||{};return f.magFilter=mR[m.magFilter]||fi,f.minFilter=mR[m.minFilter]||ts,f.wrapS=gR[m.wrapS]||Ts,f.wrapT=gR[m.wrapT]||Ts,f.generateMipmaps=!f.isCompressedTexture&amp;&amp;f.minFilter!==Ei&amp;&amp;f.minFilter!==fi,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[u]=h,h}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=&gt;p.clone());const o=r.images[e],l=self.URL||self.webkitURL;let u=o.uri||&quot;&quot;,h=!1;if(o.bufferView!==void 0)u=i.getDependency(&quot;bufferView&quot;,o.bufferView).then(function(p){h=!0;const m=new Blob([p],{type:o.mimeType});return u=l.createObjectURL(m),u});else if(o.uri===void 0)throw new Error(&quot;THREE.GLTFLoader: Image &quot;+e+&quot; is missing URI and bufferView&quot;);const f=Promise.resolve(u).then(function(p){return new Promise(function(m,g){let v=m;t.isImageBitmapLoader===!0&amp;&amp;(v=function(x){const b=new Kn(x);b.needsUpdate=!0,m(b)}),t.load(So.resolveURL(p,s.path),v,void 0,g)})}).then(function(p){return h===!0&amp;&amp;l.revokeObjectURL(u),ea(p,o),p.userData.mimeType=o.mimeType||H6(o.uri),p}).catch(function(p){throw console.error(&quot;THREE.GLTFLoader: Couldn&#x27;t load texture&quot;,u),p});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){const s=this;return this.getDependency(&quot;texture&quot;,i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&amp;&amp;i.texCoord&gt;0&amp;&amp;(o=o.clone(),o.channel=i.texCoord),s.extensions[cn.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[cn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(o);o=s.extensions[cn.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,u)}}return r!==void 0&amp;&amp;(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l=&quot;PointsMaterial:&quot;+i.uuid;let u=this.cache.get(l);u||(u=new wy,Di.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(l,u)),i=u}else if(e.isLine){const l=&quot;LineBasicMaterial:&quot;+i.uuid;let u=this.cache.get(l);u||(u=new Ji,Di.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(l,u)),i=u}if(r||s||o){let l=&quot;ClonedMaterial:&quot;+i.uuid+&quot;:&quot;;r&amp;&amp;(l+=&quot;derivative-tangents:&quot;),s&amp;&amp;(l+=&quot;vertex-colors:&quot;),o&amp;&amp;(l+=&quot;flat-shading:&quot;);let u=this.cache.get(l);u||(u=i.clone(),s&amp;&amp;(u.vertexColors=!0),o&amp;&amp;(u.flatShading=!0),r&amp;&amp;(u.normalScale&amp;&amp;(u.normalScale.y*=-1),u.clearcoatNormalScale&amp;&amp;(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(i))),i=u}e.material=i}getMaterialType(){return rs}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const l={},u=s.extensions||{},h=[];if(u[cn.KHR_MATERIALS_UNLIT]){const p=r[cn.KHR_MATERIALS_UNLIT];o=p.getMaterialType(),h.push(p.extendParams(l,s,t))}else{const p=s.pbrMetallicRoughness||{};if(l.color=new Ye(1,1,1),l.opacity=1,Array.isArray(p.baseColorFactor)){const m=p.baseColorFactor;l.color.setRGB(m[0],m[1],m[2],pr),l.opacity=m[3]}p.baseColorTexture!==void 0&amp;&amp;h.push(t.assignTexture(l,&quot;map&quot;,p.baseColorTexture,Dn)),l.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,l.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&amp;&amp;(h.push(t.assignTexture(l,&quot;metalnessMap&quot;,p.metallicRoughnessTexture)),h.push(t.assignTexture(l,&quot;roughnessMap&quot;,p.metallicRoughnessTexture))),o=this._invokeOne(function(m){return m.getMaterialType&amp;&amp;m.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&amp;&amp;m.extendMaterialParams(e,l)})))}s.doubleSided===!0&amp;&amp;(l.side=wi);const f=s.alphaMode||mx.OPAQUE;if(f===mx.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,f===mx.MASK&amp;&amp;(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&amp;&amp;o!==zi&amp;&amp;(h.push(t.assignTexture(l,&quot;normalMap&quot;,s.normalTexture)),l.normalScale=new Re(1,1),s.normalTexture.scale!==void 0)){const p=s.normalTexture.scale;l.normalScale.set(p,p)}if(s.occlusionTexture!==void 0&amp;&amp;o!==zi&amp;&amp;(h.push(t.assignTexture(l,&quot;aoMap&quot;,s.occlusionTexture)),s.occlusionTexture.strength!==void 0&amp;&amp;(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&amp;&amp;o!==zi){const p=s.emissiveFactor;l.emissive=new Ye().setRGB(p[0],p[1],p[2],pr)}return s.emissiveTexture!==void 0&amp;&amp;o!==zi&amp;&amp;h.push(t.assignTexture(l,&quot;emissiveMap&quot;,s.emissiveTexture,Dn)),Promise.all(h).then(function(){const p=new o(l);return s.name&amp;&amp;(p.name=s.name),ea(p,s),t.associations.set(p,{materials:e}),s.extensions&amp;&amp;lc(r,p,s),p})}createUniqueName(e){const t=mn.sanitizeNodeName(e||&quot;&quot;);return t in this.nodeNamesUsed?t+&quot;_&quot;+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(l){return i[cn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return yR(u,l,t)})}const o=[];for(let l=0,u=e.length;l&lt;u;l++){const h=e[l],f=B6(h),p=r[f];if(p)o.push(p.promise);else{let m;h.extensions&amp;&amp;h.extensions[cn.KHR_DRACO_MESH_COMPRESSION]?m=s(h):m=yR(new It,h,t),r[f]={primitive:h,promise:m},o.push(m)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,l=[];for(let u=0,h=o.length;u&lt;h;u++){const f=o[u].material===void 0?k6(this.cache):this.getDependency(&quot;material&quot;,o[u].material);l.push(f)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(u){const h=u.slice(0,u.length-1),f=u[u.length-1],p=[];for(let g=0,v=f.length;g&lt;v;g++){const x=f[g],b=o[g];let _;const T=h[g];if(b.mode===Ss.TRIANGLES||b.mode===Ss.TRIANGLE_STRIP||b.mode===Ss.TRIANGLE_FAN||b.mode===void 0)_=s.isSkinnedMesh===!0?new xy(x,T):new gn(x,T),_.isSkinnedMesh===!0&amp;&amp;_.normalizeSkinWeights(),b.mode===Ss.TRIANGLE_STRIP?_.geometry=LC(_.geometry,gw):b.mode===Ss.TRIANGLE_FAN&amp;&amp;(_.geometry=LC(_.geometry,A0));else if(b.mode===Ss.LINES)_=new Tr(x,T);else if(b.mode===Ss.LINE_STRIP)_=new Eo(x,T);else if(b.mode===Ss.LINE_LOOP)_=new ww(x,T);else if(b.mode===Ss.POINTS)_=new ga(x,T);else throw new Error(&quot;THREE.GLTFLoader: Primitive mode unsupported: &quot;+b.mode);Object.keys(_.geometry.morphAttributes).length&gt;0&amp;&amp;z6(_,s),_.name=t.createUniqueName(s.name||&quot;mesh_&quot;+e),ea(_,s),b.extensions&amp;&amp;lc(r,_,b),t.assignFinalMaterial(_),p.push(_)}for(let g=0,v=p.length;g&lt;v;g++)t.associations.set(p[g],{meshes:e,primitives:g});if(p.length===1)return s.extensions&amp;&amp;lc(r,p[0],s),p[0];const m=new xr;s.extensions&amp;&amp;lc(r,m,s),t.associations.set(m,{meshes:e});for(let g=0,v=p.length;g&lt;v;g++)m.add(p[g]);return m})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn(&quot;THREE.GLTFLoader: Missing camera parameters.&quot;);return}return i.type===&quot;perspective&quot;?t=new Yn(ra.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type===&quot;orthographic&quot;&amp;&amp;(t=new Vc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&amp;&amp;(t.name=this.createUniqueName(i.name)),ea(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r&lt;s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency(&quot;accessor&quot;,t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,l=[],u=[];for(let h=0,f=o.length;h&lt;f;h++){const p=o[h];if(p){l.push(p);const m=new yt;s!==null&amp;&amp;m.fromArray(s.array,h*16),u.push(m)}else console.warn(&#x27;THREE.GLTFLoader: Joint &quot;%s&quot; could not be found.&#x27;,t.joints[h])}return new Ah(l,u)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:&quot;animation_&quot;+e,o=[],l=[],u=[],h=[],f=[];for(let p=0,m=r.channels.length;p&lt;m;p++){const g=r.channels[p],v=r.samplers[g.sampler],x=g.target,b=x.node,_=r.parameters!==void 0?r.parameters[v.input]:v.input,T=r.parameters!==void 0?r.parameters[v.output]:v.output;x.node!==void 0&amp;&amp;(o.push(this.getDependency(&quot;node&quot;,b)),l.push(this.getDependency(&quot;accessor&quot;,_)),u.push(this.getDependency(&quot;accessor&quot;,T)),h.push(v),f.push(x))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(f)]).then(function(p){const m=p[0],g=p[1],v=p[2],x=p[3],b=p[4],_=[];for(let T=0,w=m.length;T&lt;w;T++){const S=m[T],C=g[T],O=v[T],M=x[T],N=b[T];if(S===void 0)continue;S.updateMatrix&amp;&amp;S.updateMatrix();const R=i._createAnimationTracks(S,C,O,M,N);if(R)for(let D=0;D&lt;R.length;D++)_.push(R[D])}return new Sl(s,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency(&quot;mesh&quot;,r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&amp;&amp;o.traverse(function(l){if(l.isMesh)for(let u=0,h=r.weights.length;u&lt;h;u++)l.morphTargetInfluences[u]=r.weights[u]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],l=r.children||[];for(let h=0,f=l.length;h&lt;f;h++)o.push(i.getDependency(&quot;node&quot;,l[h]));const u=r.skin===void 0?Promise.resolve(null):i.getDependency(&quot;skin&quot;,r.skin);return Promise.all([s,Promise.all(o),u]).then(function(h){const f=h[0],p=h[1],m=h[2];m!==null&amp;&amp;f.traverse(function(g){g.isSkinnedMesh&amp;&amp;g.bind(m,V6)});for(let g=0,v=p.length;g&lt;v;g++)f.add(p[g]);return f})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):&quot;&quot;,l=[],u=r._invokeOne(function(h){return h.createNodeMesh&amp;&amp;h.createNodeMesh(e)});return u&amp;&amp;l.push(u),s.camera!==void 0&amp;&amp;l.push(r.getDependency(&quot;camera&quot;,s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&amp;&amp;h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),this.nodeCache[e]=Promise.all(l).then(function(h){let f;if(s.isBone===!0?f=new Zd:h.length&gt;1?f=new xr:h.length===1?f=h[0]:f=new nn,f!==h[0])for(let p=0,m=h.length;p&lt;m;p++)f.add(h[p]);if(s.name&amp;&amp;(f.userData.name=s.name,f.name=o),ea(f,s),s.extensions&amp;&amp;lc(i,f,s),s.matrix!==void 0){const p=new yt;p.fromArray(s.matrix),f.applyMatrix4(p)}else s.translation!==void 0&amp;&amp;f.position.fromArray(s.translation),s.rotation!==void 0&amp;&amp;f.quaternion.fromArray(s.rotation),s.scale!==void 0&amp;&amp;f.scale.fromArray(s.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new xr;i.name&amp;&amp;(s.name=r.createUniqueName(i.name)),ea(s,i),i.extensions&amp;&amp;lc(t,s,i);const o=i.nodes||[],l=[];for(let u=0,h=o.length;u&lt;h;u++)l.push(r.getDependency(&quot;node&quot;,o[u]));return Promise.all(l).then(function(u){for(let f=0,p=u.length;f&lt;p;f++)s.add(u[f]);const h=f=&gt;{const p=new Map;for(const[m,g]of r.associations)(m instanceof Di||m instanceof Kn)&amp;&amp;p.set(m,g);return f.traverse(m=&gt;{const g=r.associations.get(m);g!=null&amp;&amp;p.set(m,g)}),p};return r.associations=h(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],l=e.name?e.name:e.uuid,u=[];tl[s.path]===tl.weights?e.traverse(function(m){m.morphTargetInfluences&amp;&amp;u.push(m.name?m.name:m.uuid)}):u.push(l);let h;switch(tl[s.path]){case tl.weights:h=Ic;break;case tl.rotation:h=xl;break;case tl.translation:case tl.scale:h=ba;break;default:switch(i.itemSize){case 1:h=Ic;break;case 2:case 3:default:h=ba;break}break}const f=r.interpolation!==void 0?U6[r.interpolation]:fh,p=this._getArrayFromAccessor(i);for(let m=0,g=u.length;m&lt;g;m++){const v=new h(u[m]+&quot;.&quot;+tl[s.path],t.array,p,f);r.interpolation===&quot;CUBICSPLINE&quot;&amp;&amp;this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=OS(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s&lt;o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof xl?L6:II;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function j6(n,e,t){const i=e.attributes,r=new di;if(i.POSITION!==void 0){const l=t.json.accessors[i.POSITION],u=l.min,h=l.max;if(u!==void 0&amp;&amp;h!==void 0){if(r.set(new K(u[0],u[1],u[2]),new K(h[0],h[1],h[2])),l.normalized){const f=OS(ih[l.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn(&quot;THREE.GLTFLoader: Missing min/max properties for accessor POSITION.&quot;);return}}else return;const s=e.targets;if(s!==void 0){const l=new K,u=new K;for(let h=0,f=s.length;h&lt;f;h++){const p=s[h];if(p.POSITION!==void 0){const m=t.json.accessors[p.POSITION],g=m.min,v=m.max;if(g!==void 0&amp;&amp;v!==void 0){if(u.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),u.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),u.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),m.normalized){const x=OS(ih[m.componentType]);u.multiplyScalar(x)}l.max(u)}else console.warn(&quot;THREE.GLTFLoader: Missing min/max properties for accessor POSITION.&quot;)}}r.expandByVector(l)}n.boundingBox=r;const o=new pi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function yR(n,e,t){const i=e.attributes,r=[];function s(o,l){return t.getDependency(&quot;accessor&quot;,o).then(function(u){n.setAttribute(l,u)})}for(const o in i){const l=RS[o]||o.toLowerCase();l in n.attributes||r.push(s(i[o],l))}if(e.indices!==void 0&amp;&amp;!n.index){const o=t.getDependency(&quot;accessor&quot;,e.indices).then(function(l){n.setIndex(l)});r.push(o)}return Jt.workingColorSpace!==pr&amp;&amp;&quot;COLOR_0&quot;in i&amp;&amp;console.warn(`THREE.GLTFLoader: Converting vertex colors from &quot;srgb-linear&quot; to &quot;${Jt.workingColorSpace}&quot; not supported.`),ea(n,e),j6(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?F6(n,e.targets,t):n})}function W6(n){const e=new u6;return new Promise((t,i)=&gt;{e.load(n,t,void 0,i)})}function X6(n){if(n instanceof Ni){const e=Array.isArray(n.material)?n.material[0]:n.material;e&amp;&amp;&quot;vertexColors&quot;in e&amp;&amp;(e.vertexColors=!0,e.side=wi,e.needsUpdate=!0);return}n.material=new zi({vertexColors:!0,side:wi})}function q6(n){return Math.sqrt(n.reduce((e,t)=&gt;e+t*t,0))}function Y6(n){return n[0]}class K6{static colorizeData(e,t=q6){e[0].length===1&amp;&amp;(t=Y6);const i=ow.getState().colorPalette,r=e.map(f=&gt;t(f)).sort((f,p)=&gt;f-p),s=r[0],o=r[r.length-1],l=i[0],u=i[1],h=f=&gt;l.map((p,m)=&gt;p+(u[m]-p)*(f-s)/(o-s));return e.map(f=&gt;h(t(f)))}}function $6(n){const e=[];for(let t=0;t&lt;n.length;t+=3)e.push([n[t],n[t+1],n[t+2]]);return e}function Z6(n,e){const t=n.geometry,i=t.attributes.position,r=t.morphAttributes.position[e],s=$6(Array.from(r.array)),o=K6.colorizeData(s),l=new Float32Array(i.count*3),u=new Vt(l,3);t.setAttribute(&quot;color&quot;,u);for(let h=0;h&lt;i.count;h++){const f=o[h],p=new Ye(f[0],f[1],f[2]);u.setXYZ(h,p.r,p.g,p.b)}u.needsUpdate=!0,X6(n),n instanceof Ni&amp;&amp;(n.setBaseColorsFromCurrent(),n.reapplySelectionHighlight())}class J6{constructor(e){Qe(this,&quot;mixer&quot;);Qe(this,&quot;actions&quot;,new Map);Qe(this,&quot;currentAction&quot;,null);Qe(this,&quot;meshMap&quot;,new Map);Qe(this,&quot;animation_store&quot;,null);this.mixer=new GD(e),this.animation_store=wl.getState()}clear(){this.mixer.stopAllAction(),this.actions.clear(),this.currentAction=null}addAnimation(e){const t=this.mixer.clipAction(e);this.actions.set(e.name,t)}setMeshMap(e){this.meshMap=e}getAnimationNames(){return Array.from(this.actions.keys())}_get_mesh_from_action(e){const t=e.getClip(),i=this.meshMap.get(t.name),r=wr.current;if(i&amp;&amp;r)for(const s of i){const o=s.replace(&quot;.&quot;,&quot;&quot;),l=r.getObjectByName(o);if(l)return l}return null}setCurrentAnimation(e){var i,r;if(e===&quot;No Animation&quot;){(i=this.animation_store)==null||i.setSelectedAnimation(e),this.stopAnimation();const s=new rs({color:8421504,side:wi}),o=this.actions.values().next().value;if(o){const l=this._get_mesh_from_action(o);l&amp;&amp;(l instanceof Ni?l.disableVertexColorsAndResetMaterial():l.material=s,l.geometry.attributes.position.needsUpdate=!0)}return}const t=this.actions.get(e);if(t){this.currentAction&amp;&amp;this.currentAction.stop(),this.currentAction=t,wl.getState().setSelectedAnimation(e);const s=this._get_mesh_from_action(t),o=this.getActionIndex();s&amp;&amp;Z6(s,o),(r=this.animation_store)==null||r.setIsPlaying(!1),this.currentAction.paused=!0}}togglePlayPause(){var e,t;this.currentAction&amp;&amp;((t=this.animation_store)==null||t.setIsPlaying(!((e=this.animation_store)!=null&amp;&amp;e.isPlaying)),this.currentAction.paused=!this.currentAction.paused,this.currentAction.paused||this.currentAction.play())}stopAnimation(){var e,t;this.currentAction&amp;&amp;(this.currentAction.paused=!0,this.seek(0),(e=this.animation_store)==null||e.setCurrentKey(this.getCurrentTime()),(t=this.animation_store)==null||t.setIsPlaying(!1))}seek(e){this.currentAction&amp;&amp;(this.currentAction.paused&amp;&amp;this.currentAction.play(),this.currentAction.time=e)}update(e){var t;this.mixer.update(e),this.animation_store&amp;&amp;((t=this.currentAction)!=null&amp;&amp;t.isRunning())&amp;&amp;this.animation_store.setCurrentKey(this.getCurrentTime())}getCurrentTime(){return this.currentAction?this.currentAction.time:0}getDuration(){return this.currentAction?this.currentAction.getClip().duration:0}getStep(){return this.currentAction?this.getDuration()/100:0}getActionIndex(){if(this.currentAction){const e=this.currentAction.getClip();return Array.from(this.actions.keys()).indexOf(e.name)}return-1}}function NS(n,e){const t=wr.current;if(!t)return;const i=ha.current,r=ua.current,s=i?i.getSize(new Re).y:window.innerHeight,o=r&amp;&amp;r.isPerspectiveCamera?r.fov:50;t.traverse(l=&gt;{if(l instanceof ga){const u=l.material,h=f=&gt;{if(f.isPointsMaterial){const p=f;p.size=n,p.sizeAttenuation=!!e,p.needsUpdate=!0}else if(f.isShaderMaterial){const p=f;p.uniforms&amp;&amp;(p.uniforms.pointSize&amp;&amp;(p.uniforms.pointSize.value=n),typeof e==&quot;boolean&quot;&amp;&amp;p.uniforms.uWorldSize&amp;&amp;(p.uniforms.uWorldSize.value=e),p.uniforms.uWorldPointSize&amp;&amp;(p.uniforms.uWorldPointSize.value=n),p.uniforms.uFov&amp;&amp;(p.uniforms.uFov.value=o),p.uniforms.uViewportHeight&amp;&amp;(p.uniforms.uViewportHeight.value=s),p.needsUpdate=!0)}};Array.isArray(u)?u.forEach(h):u&amp;&amp;h(u)}})}async function PI(n,e=!0){var g,v,x,b;if(wr.current==null)return console.error(&quot;Scene reference is null&quot;),new xr;const t=wr.current,i=new xr;if(!n)return i;const r=await W6(n),s=r.scene,o=r.animations,l=io.getState(),u=wa.getState(),h=wl.getState(),f=(g=r.parser.json.extensions)==null?void 0:g.ADA_EXT_data;f&amp;&amp;(Xy.current=f,f.simulation_objects.length&gt;0&amp;&amp;(qw.current=f.simulation_objects[0])),Si.current=new J6(t),o.length&gt;0?(h.setHasAnimation(!0),(v=Si.current)==null||v.clear(),(x=Si.current)==null||x.setMeshMap(c6(r)),o.forEach(_=&gt;{var T;(T=Si.current)==null||T.addAnimation(_)})):(h.setHasAnimation(!1),(b=Si.current)==null||b.clear());const p=s.name+&quot;_&quot;+s.uuid;await rI({gltf_scene:s,hash:p});const m=s.userData??{};if(await l6(p,m),l.translation&amp;&amp;e)console.log(&quot;Model already translated&quot;),s.position.add(l.translation);else{const _=new di().setFromObject(s);if(l.setBoundingBox(_),!u.lockTranslation){const w=_.getCenter(new K).clone().multiplyScalar(-1);if(l.zIsUp){const S=_.min.z,C=_.max.z-S;w.z=-S+C*.05}else{const S=_.min.y,C=_.max.y-S;w.y=-S+C*.05}s.position.add(w),l.setTranslation(w)}}i.add(s),t.add(i);try{const _=u.pointSize??.01,T=u.pointSizeAbsolute??!0;NS(_,T)}catch{}return yl.current||(yl.current=new Map),yl.current.set(p,i),o.length&gt;0&amp;&amp;h.setHasAnimation(!0),i}function Q6(n){console.log(&quot;Loading GLTF from base64 data&quot;);const t=(&quot;data:text/plain;base64,&quot;+n).split(&quot;,&quot;)[1],i=atob(t),r=new Uint8Array(i.length);for(let o=0;o&lt;i.length;o++)r[o]=i.charCodeAt(o);const s=new Blob([r],{type:&quot;model/gltf-binary&quot;});return URL.createObjectURL(s)}function eW(){console.log(&quot;B64GLTF exists, loading model&quot;);let n=Q6(window.B64GLTF);io.getState().setModelUrl(n,gl.REPLACE)}async function LI(n){var i;const e=wl.getState();e.setHasAnimation(!1),e.setIsPlaying(!1),e.setSelectedAnimation(&quot;No Animation&quot;),(i=Si.current)==null||i.clear(),io.getState().translation=null,Tl.getState().clearTreeData();const t=wr.current;if(!t){console.warn(&quot;No scene found&quot;);return}if(t.removeFromParent(),yl.current)for(let r of yl.current.keys()){let s=yl.current.get(r);s&amp;&amp;s.clear()}await PI(n,!1)}async function _R(n){var h,f;console.log(&quot;Received scene update message from server&quot;);let e=n.scene();if(!e){console.error(&quot;No scene object found in the message&quot;);return}let t=e.operation(),i=e.currentFile();if(!i){console.error(&quot;No file object found in the message&quot;);return}let r=i.filedataArray();if(!r){console.error(&quot;No filedata found in the file object&quot;);return}let s=i.compressed(),o;s?(console.log(&quot;Decompressing received GLB data...&quot;),o=qj(r)):o=r;const l=new Blob([o],{type:&quot;model/gltf-binary&quot;}),u=URL.createObjectURL(l);if(t==gl.REPLACE)await LI(u);else if(t==gl.REMOVE)console.error(&quot;Currently unsupported operation&quot;,t);else if(t==gl.ADD){let p=(f=(h=n.package_())==null?void 0:h.mesh())==null?void 0:f.unpack();p?await I8(p):await PI(u,!0)}else console.error(&quot;Unknown operation type: &quot;,t)}const Rs=to(n=&gt;({name:null,setName:e=&gt;n(()=&gt;({name:e})),faceIndex:null,setFaceIndex:e=&gt;n(()=&gt;({faceIndex:e})),clickCoordinate:null,setClickCoordinate:e=&gt;n(()=&gt;({clickCoordinate:e})),jsonData:null,setJsonData:e=&gt;n(()=&gt;({jsonData:e})),isJsonViewVisible:!1,setIsJsonViewVisible:e=&gt;n(()=&gt;({isJsonViewVisible:e})),show_info_box:!1,toggle:()=&gt;n(e=&gt;({show_info_box:!e.show_info_box}))}));async function vR(n){var e,t;if(n.meshInfo()&amp;&amp;((e=n.meshInfo())!=null&amp;&amp;e.jsonData())){const i=(t=n.meshInfo())==null?void 0:t.jsonData();if(!i){console.error(&quot;No JSON data found in the message&quot;);return}const r=JSON.parse(i);Rs.getState().setJsonData(r)}else Rs.getState().setJsonData(null)}function Ii(n){if(typeof n==&quot;string&quot;||typeof n==&quot;number&quot;)return&quot;&quot;+n;let e=&quot;&quot;;if(Array.isArray(n))for(let t=0,i;t&lt;n.length;t++)(i=Ii(n[t]))!==&quot;&quot;&amp;&amp;(e+=(e&amp;&amp;&quot; &quot;)+i);else for(let t in n)n[t]&amp;&amp;(e+=(e&amp;&amp;&quot; &quot;)+t);return e}var tW={value:()=&gt;{}};function Ky(){for(var n=0,e=arguments.length,t={},i;n&lt;e;++n){if(!(i=arguments[n]+&quot;&quot;)||i in t||/[\s.]/.test(i))throw new Error(&quot;illegal type: &quot;+i);t[i]=[]}return new Ug(t)}function Ug(n){this._=n}function nW(n,e){return n.trim().split(/^|\s+/).map(function(t){var i=&quot;&quot;,r=t.indexOf(&quot;.&quot;);if(r&gt;=0&amp;&amp;(i=t.slice(r+1),t=t.slice(0,r)),t&amp;&amp;!e.hasOwnProperty(t))throw new Error(&quot;unknown type: &quot;+t);return{type:t,name:i}})}Ug.prototype=Ky.prototype={constructor:Ug,on:function(n,e){var t=this._,i=nW(n+&quot;&quot;,t),r,s=-1,o=i.length;if(arguments.length&lt;2){for(;++s&lt;o;)if((r=(n=i[s]).type)&amp;&amp;(r=iW(t[r],n.name)))return r;return}if(e!=null&amp;&amp;typeof e!=&quot;function&quot;)throw new Error(&quot;invalid callback: &quot;+e);for(;++s&lt;o;)if(r=(n=i[s]).type)t[r]=bR(t[r],n.name,e);else if(e==null)for(r in t)t[r]=bR(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Ug(n)},call:function(n,e){if((r=arguments.length-2)&gt;0)for(var t=new Array(r),i=0,r,s;i&lt;r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error(&quot;unknown type: &quot;+n);for(s=this._[n],i=0,r=s.length;i&lt;r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error(&quot;unknown type: &quot;+n);for(var i=this._[n],r=0,s=i.length;r&lt;s;++r)i[r].value.apply(e,t)}};function iW(n,e){for(var t=0,i=n.length,r;t&lt;i;++t)if((r=n[t]).name===e)return r.value}function bR(n,e,t){for(var i=0,r=n.length;i&lt;r;++i)if(n[i].name===e){n[i]=tW,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&amp;&amp;n.push({name:e,value:t}),n}var DS=&quot;http://www.w3.org/1999/xhtml&quot;;const xR={svg:&quot;http://www.w3.org/2000/svg&quot;,xhtml:DS,xlink:&quot;http://www.w3.org/1999/xlink&quot;,xml:&quot;http://www.w3.org/XML/1998/namespace&quot;,xmlns:&quot;http://www.w3.org/2000/xmlns/&quot;};function $y(n){var e=n+=&quot;&quot;,t=e.indexOf(&quot;:&quot;);return t&gt;=0&amp;&amp;(e=n.slice(0,t))!==&quot;xmlns&quot;&amp;&amp;(n=n.slice(t+1)),xR.hasOwnProperty(e)?{space:xR[e],local:n}:n}function rW(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===DS&amp;&amp;e.documentElement.namespaceURI===DS?e.createElement(n):e.createElementNS(t,n)}}function sW(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function UI(n){var e=$y(n);return(e.local?sW:rW)(e)}function oW(){}function Yw(n){return n==null?oW:function(){return this.querySelector(n)}}function aW(n){typeof n!=&quot;function&quot;&amp;&amp;(n=Yw(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r&lt;t;++r)for(var s=e[r],o=s.length,l=i[r]=new Array(o),u,h,f=0;f&lt;o;++f)(u=s[f])&amp;&amp;(h=n.call(u,u.__data__,f,s))&amp;&amp;(&quot;__data__&quot;in u&amp;&amp;(h.__data__=u.__data__),l[f]=h);return new os(i,this._parents)}function lW(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function cW(){return[]}function kI(n){return n==null?cW:function(){return this.querySelectorAll(n)}}function uW(n){return function(){return lW(n.apply(this,arguments))}}function hW(n){typeof n==&quot;function&quot;?n=uW(n):n=kI(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s&lt;t;++s)for(var o=e[s],l=o.length,u,h=0;h&lt;l;++h)(u=o[h])&amp;&amp;(i.push(n.call(u,u.__data__,h,o)),r.push(u));return new os(i,r)}function FI(n){return function(){return this.matches(n)}}function zI(n){return function(e){return e.matches(n)}}var fW=Array.prototype.find;function dW(n){return function(){return fW.call(this.children,n)}}function pW(){return this.firstElementChild}function mW(n){return this.select(n==null?pW:dW(typeof n==&quot;function&quot;?n:zI(n)))}var gW=Array.prototype.filter;function yW(){return Array.from(this.children)}function _W(n){return function(){return gW.call(this.children,n)}}function vW(n){return this.selectAll(n==null?yW:_W(typeof n==&quot;function&quot;?n:zI(n)))}function bW(n){typeof n!=&quot;function&quot;&amp;&amp;(n=FI(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r&lt;t;++r)for(var s=e[r],o=s.length,l=i[r]=[],u,h=0;h&lt;o;++h)(u=s[h])&amp;&amp;n.call(u,u.__data__,h,s)&amp;&amp;l.push(u);return new os(i,this._parents)}function BI(n){return new Array(n.length)}function xW(){return new os(this._enter||this._groups.map(BI),this._parents)}function H0(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}H0.prototype={constructor:H0,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function SW(n){return function(){return n}}function wW(n,e,t,i,r,s){for(var o=0,l,u=e.length,h=s.length;o&lt;h;++o)(l=e[o])?(l.__data__=s[o],i[o]=l):t[o]=new H0(n,s[o]);for(;o&lt;u;++o)(l=e[o])&amp;&amp;(r[o]=l)}function EW(n,e,t,i,r,s,o){var l,u,h=new Map,f=e.length,p=s.length,m=new Array(f),g;for(l=0;l&lt;f;++l)(u=e[l])&amp;&amp;(m[l]=g=o.call(u,u.__data__,l,e)+&quot;&quot;,h.has(g)?r[l]=u:h.set(g,u));for(l=0;l&lt;p;++l)g=o.call(n,s[l],l,s)+&quot;&quot;,(u=h.get(g))?(i[l]=u,u.__data__=s[l],h.delete(g)):t[l]=new H0(n,s[l]);for(l=0;l&lt;f;++l)(u=e[l])&amp;&amp;h.get(m[l])===u&amp;&amp;(r[l]=u)}function TW(n){return n.__data__}function MW(n,e){if(!arguments.length)return Array.from(this,TW);var t=e?EW:wW,i=this._parents,r=this._groups;typeof n!=&quot;function&quot;&amp;&amp;(n=SW(n));for(var s=r.length,o=new Array(s),l=new Array(s),u=new Array(s),h=0;h&lt;s;++h){var f=i[h],p=r[h],m=p.length,g=AW(n.call(f,f&amp;&amp;f.__data__,h,i)),v=g.length,x=l[h]=new Array(v),b=o[h]=new Array(v),_=u[h]=new Array(m);t(f,p,x,b,_,g,e);for(var T=0,w=0,S,C;T&lt;v;++T)if(S=x[T]){for(T&gt;=w&amp;&amp;(w=T+1);!(C=b[w])&amp;&amp;++w&lt;v;);S._next=C||null}}return o=new os(o,i),o._enter=l,o._exit=u,o}function AW(n){return typeof n==&quot;object&quot;&amp;&amp;&quot;length&quot;in n?n:Array.from(n)}function CW(){return new os(this._exit||this._groups.map(BI),this._parents)}function RW(n,e,t){var i=this.enter(),r=this,s=this.exit();return typeof n==&quot;function&quot;?(i=n(i),i&amp;&amp;(i=i.selection())):i=i.append(n+&quot;&quot;),e!=null&amp;&amp;(r=e(r),r&amp;&amp;(r=r.selection())),t==null?s.remove():t(s),i&amp;&amp;r?i.merge(r).order():r}function OW(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,s=i.length,o=Math.min(r,s),l=new Array(r),u=0;u&lt;o;++u)for(var h=t[u],f=i[u],p=h.length,m=l[u]=new Array(p),g,v=0;v&lt;p;++v)(g=h[v]||f[v])&amp;&amp;(m[v]=g);for(;u&lt;r;++u)l[u]=t[u];return new os(l,this._parents)}function NW(){for(var n=this._groups,e=-1,t=n.length;++e&lt;t;)for(var i=n[e],r=i.length-1,s=i[r],o;--r&gt;=0;)(o=i[r])&amp;&amp;(s&amp;&amp;o.compareDocumentPosition(s)^4&amp;&amp;s.parentNode.insertBefore(o,s),s=o);return this}function DW(n){n||(n=IW);function e(p,m){return p&amp;&amp;m?n(p.__data__,m.__data__):!p-!m}for(var t=this._groups,i=t.length,r=new Array(i),s=0;s&lt;i;++s){for(var o=t[s],l=o.length,u=r[s]=new Array(l),h,f=0;f&lt;l;++f)(h=o[f])&amp;&amp;(u[f]=h);u.sort(e)}return new os(r,this._parents).order()}function IW(n,e){return n&lt;e?-1:n&gt;e?1:n&gt;=e?0:NaN}function PW(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function LW(){return Array.from(this)}function UW(){for(var n=this._groups,e=0,t=n.length;e&lt;t;++e)for(var i=n[e],r=0,s=i.length;r&lt;s;++r){var o=i[r];if(o)return o}return null}function kW(){let n=0;for(const e of this)++n;return n}function FW(){return!this.node()}function zW(n){for(var e=this._groups,t=0,i=e.length;t&lt;i;++t)for(var r=e[t],s=0,o=r.length,l;s&lt;o;++s)(l=r[s])&amp;&amp;n.call(l,l.__data__,s,r);return this}function BW(n){return function(){this.removeAttribute(n)}}function HW(n){return function(){this.removeAttributeNS(n.space,n.local)}}function VW(n,e){return function(){this.setAttribute(n,e)}}function GW(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function jW(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function WW(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function XW(n,e){var t=$y(n);if(arguments.length&lt;2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?HW:BW:typeof e==&quot;function&quot;?t.local?WW:jW:t.local?GW:VW)(t,e))}function HI(n){return n.ownerDocument&amp;&amp;n.ownerDocument.defaultView||n.document&amp;&amp;n||n.defaultView}function qW(n){return function(){this.style.removeProperty(n)}}function YW(n,e,t){return function(){this.style.setProperty(n,e,t)}}function KW(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function $W(n,e,t){return arguments.length&gt;1?this.each((e==null?qW:typeof e==&quot;function&quot;?KW:YW)(n,e,t??&quot;&quot;)):gh(this.node(),n)}function gh(n,e){return n.style.getPropertyValue(e)||HI(n).getComputedStyle(n,null).getPropertyValue(e)}function ZW(n){return function(){delete this[n]}}function JW(n,e){return function(){this[n]=e}}function QW(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function e9(n,e){return arguments.length&gt;1?this.each((e==null?ZW:typeof e==&quot;function&quot;?QW:JW)(n,e)):this.node()[n]}function VI(n){return n.trim().split(/^|\s+/)}function Kw(n){return n.classList||new GI(n)}function GI(n){this._node=n,this._names=VI(n.getAttribute(&quot;class&quot;)||&quot;&quot;)}GI.prototype={add:function(n){var e=this._names.indexOf(n);e&lt;0&amp;&amp;(this._names.push(n),this._node.setAttribute(&quot;class&quot;,this._names.join(&quot; &quot;)))},remove:function(n){var e=this._names.indexOf(n);e&gt;=0&amp;&amp;(this._names.splice(e,1),this._node.setAttribute(&quot;class&quot;,this._names.join(&quot; &quot;)))},contains:function(n){return this._names.indexOf(n)&gt;=0}};function jI(n,e){for(var t=Kw(n),i=-1,r=e.length;++i&lt;r;)t.add(e[i])}function WI(n,e){for(var t=Kw(n),i=-1,r=e.length;++i&lt;r;)t.remove(e[i])}function t9(n){return function(){jI(this,n)}}function n9(n){return function(){WI(this,n)}}function i9(n,e){return function(){(e.apply(this,arguments)?jI:WI)(this,n)}}function r9(n,e){var t=VI(n+&quot;&quot;);if(arguments.length&lt;2){for(var i=Kw(this.node()),r=-1,s=t.length;++r&lt;s;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof e==&quot;function&quot;?i9:e?t9:n9)(t,e))}function s9(){this.textContent=&quot;&quot;}function o9(n){return function(){this.textContent=n}}function a9(n){return function(){var e=n.apply(this,arguments);this.textContent=e??&quot;&quot;}}function l9(n){return arguments.length?this.each(n==null?s9:(typeof n==&quot;function&quot;?a9:o9)(n)):this.node().textContent}function c9(){this.innerHTML=&quot;&quot;}function u9(n){return function(){this.innerHTML=n}}function h9(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??&quot;&quot;}}function f9(n){return arguments.length?this.each(n==null?c9:(typeof n==&quot;function&quot;?h9:u9)(n)):this.node().innerHTML}function d9(){this.nextSibling&amp;&amp;this.parentNode.appendChild(this)}function p9(){return this.each(d9)}function m9(){this.previousSibling&amp;&amp;this.parentNode.insertBefore(this,this.parentNode.firstChild)}function g9(){return this.each(m9)}function y9(n){var e=typeof n==&quot;function&quot;?n:UI(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function _9(){return null}function v9(n,e){var t=typeof n==&quot;function&quot;?n:UI(n),i=e==null?_9:typeof e==&quot;function&quot;?e:Yw(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function b9(){var n=this.parentNode;n&amp;&amp;n.removeChild(this)}function x9(){return this.each(b9)}function S9(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function w9(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function E9(n){return this.select(n?w9:S9)}function T9(n){return arguments.length?this.property(&quot;__data__&quot;,n):this.node().__data__}function M9(n){return function(e){n.call(this,e,this.__data__)}}function A9(n){return n.trim().split(/^|\s+/).map(function(e){var t=&quot;&quot;,i=e.indexOf(&quot;.&quot;);return i&gt;=0&amp;&amp;(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function C9(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,r=e.length,s;t&lt;r;++t)s=e[t],(!n.type||s.type===n.type)&amp;&amp;s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function R9(n,e,t){return function(){var i=this.__on,r,s=M9(e);if(i){for(var o=0,l=i.length;o&lt;l;++o)if((r=i[o]).type===n.type&amp;&amp;r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function O9(n,e,t){var i=A9(n+&quot;&quot;),r,s=i.length,o;if(arguments.length&lt;2){var l=this.node().__on;if(l){for(var u=0,h=l.length,f;u&lt;h;++u)for(r=0,f=l[u];r&lt;s;++r)if((o=i[r]).type===f.type&amp;&amp;o.name===f.name)return f.value}return}for(l=e?R9:C9,r=0;r&lt;s;++r)this.each(l(i[r],e,t));return this}function XI(n,e,t){var i=HI(n),r=i.CustomEvent;typeof r==&quot;function&quot;?r=new r(e,t):(r=i.document.createEvent(&quot;Event&quot;),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function N9(n,e){return function(){return XI(this,n,e)}}function D9(n,e){return function(){return XI(this,n,e.apply(this,arguments))}}function I9(n,e){return this.each((typeof e==&quot;function&quot;?D9:N9)(n,e))}function*P9(){for(var n=this._groups,e=0,t=n.length;e&lt;t;++e)for(var i=n[e],r=0,s=i.length,o;r&lt;s;++r)(o=i[r])&amp;&amp;(yield o)}var qI=[null];function os(n,e){this._groups=n,this._parents=e}function tp(){return new os([[document.documentElement]],qI)}function L9(){return this}os.prototype=tp.prototype={constructor:os,select:aW,selectAll:hW,selectChild:mW,selectChildren:vW,filter:bW,data:MW,enter:xW,exit:CW,join:RW,merge:OW,selection:L9,order:NW,sort:DW,call:PW,nodes:LW,node:UW,size:kW,empty:FW,each:zW,attr:XW,style:$W,property:e9,classed:r9,text:l9,html:f9,raise:p9,lower:g9,append:y9,insert:v9,remove:x9,clone:E9,datum:T9,on:O9,dispatch:I9,[Symbol.iterator]:P9};function es(n){return typeof n==&quot;string&quot;?new os([[document.querySelector(n)]],[document.documentElement]):new os([[n]],qI)}function U9(n){let e;for(;e=n.sourceEvent;)n=e;return n}function qs(n,e){if(n=U9(n),e===void 0&amp;&amp;(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}const k9={passive:!1},Id={capture:!0,passive:!1};function yx(n){n.stopImmediatePropagation()}function rh(n){n.preventDefault(),n.stopImmediatePropagation()}function YI(n){var e=n.document.documentElement,t=es(n).on(&quot;dragstart.drag&quot;,rh,Id);&quot;onselectstart&quot;in e?t.on(&quot;selectstart.drag&quot;,rh,Id):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect=&quot;none&quot;)}function KI(n,e){var t=n.document.documentElement,i=es(n).on(&quot;dragstart.drag&quot;,null);e&amp;&amp;(i.on(&quot;click.drag&quot;,rh,Id),setTimeout(function(){i.on(&quot;click.drag&quot;,null)},0)),&quot;onselectstart&quot;in t?i.on(&quot;selectstart.drag&quot;,null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const rg=n=&gt;()=&gt;n;function IS(n,{sourceEvent:e,subject:t,target:i,identifier:r,active:s,x:o,y:l,dx:u,dy:h,dispatch:f}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:f}})}IS.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function F9(n){return!n.ctrlKey&amp;&amp;!n.button}function z9(){return this.parentNode}function B9(n,e){return e??{x:n.x,y:n.y}}function H9(){return navigator.maxTouchPoints||&quot;ontouchstart&quot;in this}function $I(){var n=F9,e=z9,t=B9,i=H9,r={},s=Ky(&quot;start&quot;,&quot;drag&quot;,&quot;end&quot;),o=0,l,u,h,f,p=0;function m(S){S.on(&quot;mousedown.drag&quot;,g).filter(i).on(&quot;touchstart.drag&quot;,b).on(&quot;touchmove.drag&quot;,_,k9).on(&quot;touchend.drag touchcancel.drag&quot;,T).style(&quot;touch-action&quot;,&quot;none&quot;).style(&quot;-webkit-tap-highlight-color&quot;,&quot;rgba(0,0,0,0)&quot;)}function g(S,C){if(!(f||!n.call(this,S,C))){var O=w(this,e.call(this,S,C),S,C,&quot;mouse&quot;);O&amp;&amp;(es(S.view).on(&quot;mousemove.drag&quot;,v,Id).on(&quot;mouseup.drag&quot;,x,Id),YI(S.view),yx(S),h=!1,l=S.clientX,u=S.clientY,O(&quot;start&quot;,S))}}function v(S){if(rh(S),!h){var C=S.clientX-l,O=S.clientY-u;h=C*C+O*O&gt;p}r.mouse(&quot;drag&quot;,S)}function x(S){es(S.view).on(&quot;mousemove.drag mouseup.drag&quot;,null),KI(S.view,h),rh(S),r.mouse(&quot;end&quot;,S)}function b(S,C){if(n.call(this,S,C)){var O=S.changedTouches,M=e.call(this,S,C),N=O.length,R,D;for(R=0;R&lt;N;++R)(D=w(this,M,S,C,O[R].identifier,O[R]))&amp;&amp;(yx(S),D(&quot;start&quot;,S,O[R]))}}function _(S){var C=S.changedTouches,O=C.length,M,N;for(M=0;M&lt;O;++M)(N=r[C[M].identifier])&amp;&amp;(rh(S),N(&quot;drag&quot;,S,C[M]))}function T(S){var C=S.changedTouches,O=C.length,M,N;for(f&amp;&amp;clearTimeout(f),f=setTimeout(function(){f=null},500),M=0;M&lt;O;++M)(N=r[C[M].identifier])&amp;&amp;(yx(S),N(&quot;end&quot;,S,C[M]))}function w(S,C,O,M,N,R){var D=s.copy(),L=qs(R||O,C),H,q,z;if((z=t.call(S,new IS(&quot;beforestart&quot;,{sourceEvent:O,target:m,identifier:N,active:o,x:L[0],y:L[1],dx:0,dy:0,dispatch:D}),M))!=null)return H=z.x-L[0]||0,q=z.y-L[1]||0,function $(P,j,G){var ee=L,F;switch(P){case&quot;start&quot;:r[N]=$,F=o++;break;case&quot;end&quot;:delete r[N],--o;case&quot;drag&quot;:L=qs(G||j,C),F=o;break}D.call(P,S,new IS(P,{sourceEvent:j,subject:z,target:m,identifier:N,active:F,x:L[0]+H,y:L[1]+q,dx:L[0]-ee[0],dy:L[1]-ee[1],dispatch:D}),M)}}return m.filter=function(S){return arguments.length?(n=typeof S==&quot;function&quot;?S:rg(!!S),m):n},m.container=function(S){return arguments.length?(e=typeof S==&quot;function&quot;?S:rg(S),m):e},m.subject=function(S){return arguments.length?(t=typeof S==&quot;function&quot;?S:rg(S),m):t},m.touchable=function(S){return arguments.length?(i=typeof S==&quot;function&quot;?S:rg(!!S),m):i},m.on=function(){var S=s.on.apply(s,arguments);return S===s?m:S},m.clickDistance=function(S){return arguments.length?(p=(S=+S)*S,m):Math.sqrt(p)},m}function $w(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function ZI(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function np(){}var Pd=.7,V0=1/Pd,sh=&quot;\\s*([+-]?\\d+)\\s*&quot;,Ld=&quot;\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*&quot;,wo=&quot;\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*&quot;,V9=/^#([0-9a-f]{3,8})$/,G9=new RegExp(`^rgb\\(${sh},${sh},${sh}\\)$`),j9=new RegExp(`^rgb\\(${wo},${wo},${wo}\\)$`),W9=new RegExp(`^rgba\\(${sh},${sh},${sh},${Ld}\\)$`),X9=new RegExp(`^rgba\\(${wo},${wo},${wo},${Ld}\\)$`),q9=new RegExp(`^hsl\\(${Ld},${wo},${wo}\\)$`),Y9=new RegExp(`^hsla\\(${Ld},${wo},${wo},${Ld}\\)$`),SR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$w(np,Ud,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:wR,formatHex:wR,formatHex8:K9,formatHsl:$9,formatRgb:ER,toString:ER});function wR(){return this.rgb().formatHex()}function K9(){return this.rgb().formatHex8()}function $9(){return JI(this).formatHsl()}function ER(){return this.rgb().formatRgb()}function Ud(n){var e,t;return n=(n+&quot;&quot;).trim().toLowerCase(),(e=V9.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?TR(e):t===3?new Fr(e&gt;&gt;8&amp;15|e&gt;&gt;4&amp;240,e&gt;&gt;4&amp;15|e&amp;240,(e&amp;15)&lt;&lt;4|e&amp;15,1):t===8?sg(e&gt;&gt;24&amp;255,e&gt;&gt;16&amp;255,e&gt;&gt;8&amp;255,(e&amp;255)/255):t===4?sg(e&gt;&gt;12&amp;15|e&gt;&gt;8&amp;240,e&gt;&gt;8&amp;15|e&gt;&gt;4&amp;240,e&gt;&gt;4&amp;15|e&amp;240,((e&amp;15)&lt;&lt;4|e&amp;15)/255):null):(e=G9.exec(n))?new Fr(e[1],e[2],e[3],1):(e=j9.exec(n))?new Fr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=W9.exec(n))?sg(e[1],e[2],e[3],e[4]):(e=X9.exec(n))?sg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=q9.exec(n))?CR(e[1],e[2]/100,e[3]/100,1):(e=Y9.exec(n))?CR(e[1],e[2]/100,e[3]/100,e[4]):SR.hasOwnProperty(n)?TR(SR[n]):n===&quot;transparent&quot;?new Fr(NaN,NaN,NaN,0):null}function TR(n){return new Fr(n&gt;&gt;16&amp;255,n&gt;&gt;8&amp;255,n&amp;255,1)}function sg(n,e,t,i){return i&lt;=0&amp;&amp;(n=e=t=NaN),new Fr(n,e,t,i)}function Z9(n){return n instanceof np||(n=Ud(n)),n?(n=n.rgb(),new Fr(n.r,n.g,n.b,n.opacity)):new Fr}function PS(n,e,t,i){return arguments.length===1?Z9(n):new Fr(n,e,t,i??1)}function Fr(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}$w(Fr,PS,ZI(np,{brighter(n){return n=n==null?V0:Math.pow(V0,n),new Fr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Pd:Math.pow(Pd,n),new Fr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Fr(Cc(this.r),Cc(this.g),Cc(this.b),G0(this.opacity))},displayable(){return-.5&lt;=this.r&amp;&amp;this.r&lt;255.5&amp;&amp;-.5&lt;=this.g&amp;&amp;this.g&lt;255.5&amp;&amp;-.5&lt;=this.b&amp;&amp;this.b&lt;255.5&amp;&amp;0&lt;=this.opacity&amp;&amp;this.opacity&lt;=1},hex:MR,formatHex:MR,formatHex8:J9,formatRgb:AR,toString:AR}));function MR(){return`#${wc(this.r)}${wc(this.g)}${wc(this.b)}`}function J9(){return`#${wc(this.r)}${wc(this.g)}${wc(this.b)}${wc((isNaN(this.opacity)?1:this.opacity)*255)}`}function AR(){const n=G0(this.opacity);return`${n===1?&quot;rgb(&quot;:&quot;rgba(&quot;}${Cc(this.r)}, ${Cc(this.g)}, ${Cc(this.b)}${n===1?&quot;)&quot;:`, ${n})`}`}function G0(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Cc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function wc(n){return n=Cc(n),(n&lt;16?&quot;0&quot;:&quot;&quot;)+n.toString(16)}function CR(n,e,t,i){return i&lt;=0?n=e=t=NaN:t&lt;=0||t&gt;=1?n=e=NaN:e&lt;=0&amp;&amp;(n=NaN),new Ks(n,e,t,i)}function JI(n){if(n instanceof Ks)return new Ks(n.h,n.s,n.l,n.opacity);if(n instanceof np||(n=Ud(n)),!n)return new Ks;if(n instanceof Ks)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,l=s-r,u=(s+r)/2;return l?(e===s?o=(t-i)/l+(t&lt;i)*6:t===s?o=(i-e)/l+2:o=(e-t)/l+4,l/=u&lt;.5?s+r:2-s-r,o*=60):l=u&gt;0&amp;&amp;u&lt;1?0:o,new Ks(o,l,u,n.opacity)}function Q9(n,e,t,i){return arguments.length===1?JI(n):new Ks(n,e,t,i??1)}function Ks(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}$w(Ks,Q9,ZI(np,{brighter(n){return n=n==null?V0:Math.pow(V0,n),new Ks(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Pd:Math.pow(Pd,n),new Ks(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h&lt;0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t&lt;.5?t:1-t)*e,r=2*t-i;return new Fr(_x(n&gt;=240?n-240:n+120,r,i),_x(n,r,i),_x(n&lt;120?n+240:n-120,r,i),this.opacity)},clamp(){return new Ks(RR(this.h),og(this.s),og(this.l),G0(this.opacity))},displayable(){return(0&lt;=this.s&amp;&amp;this.s&lt;=1||isNaN(this.s))&amp;&amp;0&lt;=this.l&amp;&amp;this.l&lt;=1&amp;&amp;0&lt;=this.opacity&amp;&amp;this.opacity&lt;=1},formatHsl(){const n=G0(this.opacity);return`${n===1?&quot;hsl(&quot;:&quot;hsla(&quot;}${RR(this.h)}, ${og(this.s)*100}%, ${og(this.l)*100}%${n===1?&quot;)&quot;:`, ${n})`}`}}));function RR(n){return n=(n||0)%360,n&lt;0?n+360:n}function og(n){return Math.max(0,Math.min(1,n||0))}function _x(n,e,t){return(n&lt;60?e+(t-e)*n/60:n&lt;180?t:n&lt;240?e+(t-e)*(240-n)/60:e)*255}const QI=n=&gt;()=&gt;n;function e7(n,e){return function(t){return n+t*e}}function t7(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function n7(n){return(n=+n)==1?eP:function(e,t){return t-e?t7(e,t,n):QI(isNaN(e)?t:e)}}function eP(n,e){var t=e-n;return t?e7(n,t):QI(isNaN(n)?e:n)}const OR=function n(e){var t=n7(e);function i(r,s){var o=t((r=PS(r)).r,(s=PS(s)).r),l=t(r.g,s.g),u=t(r.b,s.b),h=eP(r.opacity,s.opacity);return function(f){return r.r=o(f),r.g=l(f),r.b=u(f),r.opacity=h(f),r+&quot;&quot;}}return i.gamma=n,i}(1);function cl(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var LS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vx=new RegExp(LS.source,&quot;g&quot;);function i7(n){return function(){return n}}function r7(n){return function(e){return n(e)+&quot;&quot;}}function s7(n,e){var t=LS.lastIndex=vx.lastIndex=0,i,r,s,o=-1,l=[],u=[];for(n=n+&quot;&quot;,e=e+&quot;&quot;;(i=LS.exec(n))&amp;&amp;(r=vx.exec(e));)(s=r.index)&gt;t&amp;&amp;(s=e.slice(t,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,u.push({i:o,x:cl(i,r)})),t=vx.lastIndex;return t&lt;e.length&amp;&amp;(s=e.slice(t),l[o]?l[o]+=s:l[++o]=s),l.length&lt;2?u[0]?r7(u[0].x):i7(e):(e=u.length,function(h){for(var f=0,p;f&lt;e;++f)l[(p=u[f]).i]=p.x(h);return l.join(&quot;&quot;)})}var NR=180/Math.PI,US={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tP(n,e,t,i,r,s){var o,l,u;return(o=Math.sqrt(n*n+e*e))&amp;&amp;(n/=o,e/=o),(u=n*t+e*i)&amp;&amp;(t-=n*u,i-=e*u),(l=Math.sqrt(t*t+i*i))&amp;&amp;(t/=l,i/=l,u/=l),n*i&lt;e*t&amp;&amp;(n=-n,e=-e,u=-u,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*NR,skewX:Math.atan(u)*NR,scaleX:o,scaleY:l}}var ag;function o7(n){const e=new(typeof DOMMatrix==&quot;function&quot;?DOMMatrix:WebKitCSSMatrix)(n+&quot;&quot;);return e.isIdentity?US:tP(e.a,e.b,e.c,e.d,e.e,e.f)}function a7(n){return n==null||(ag||(ag=document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,&quot;g&quot;)),ag.setAttribute(&quot;transform&quot;,n),!(n=ag.transform.baseVal.consolidate()))?US:(n=n.matrix,tP(n.a,n.b,n.c,n.d,n.e,n.f))}function nP(n,e,t,i){function r(h){return h.length?h.pop()+&quot; &quot;:&quot;&quot;}function s(h,f,p,m,g,v){if(h!==p||f!==m){var x=g.push(&quot;translate(&quot;,null,e,null,t);v.push({i:x-4,x:cl(h,p)},{i:x-2,x:cl(f,m)})}else(p||m)&amp;&amp;g.push(&quot;translate(&quot;+p+e+m+t)}function o(h,f,p,m){h!==f?(h-f&gt;180?f+=360:f-h&gt;180&amp;&amp;(h+=360),m.push({i:p.push(r(p)+&quot;rotate(&quot;,null,i)-2,x:cl(h,f)})):f&amp;&amp;p.push(r(p)+&quot;rotate(&quot;+f+i)}function l(h,f,p,m){h!==f?m.push({i:p.push(r(p)+&quot;skewX(&quot;,null,i)-2,x:cl(h,f)}):f&amp;&amp;p.push(r(p)+&quot;skewX(&quot;+f+i)}function u(h,f,p,m,g,v){if(h!==p||f!==m){var x=g.push(r(g)+&quot;scale(&quot;,null,&quot;,&quot;,null,&quot;)&quot;);v.push({i:x-4,x:cl(h,p)},{i:x-2,x:cl(f,m)})}else(p!==1||m!==1)&amp;&amp;g.push(r(g)+&quot;scale(&quot;+p+&quot;,&quot;+m+&quot;)&quot;)}return function(h,f){var p=[],m=[];return h=n(h),f=n(f),s(h.translateX,h.translateY,f.translateX,f.translateY,p,m),o(h.rotate,f.rotate,p,m),l(h.skewX,f.skewX,p,m),u(h.scaleX,h.scaleY,f.scaleX,f.scaleY,p,m),h=f=null,function(g){for(var v=-1,x=m.length,b;++v&lt;x;)p[(b=m[v]).i]=b.x(g);return p.join(&quot;&quot;)}}}var l7=nP(o7,&quot;px, &quot;,&quot;px)&quot;,&quot;deg)&quot;),c7=nP(a7,&quot;, &quot;,&quot;)&quot;,&quot;)&quot;),u7=1e-12;function DR(n){return((n=Math.exp(n))+1/n)/2}function h7(n){return((n=Math.exp(n))-1/n)/2}function f7(n){return((n=Math.exp(2*n))-1)/(n+1)}const d7=function n(e,t,i){function r(s,o){var l=s[0],u=s[1],h=s[2],f=o[0],p=o[1],m=o[2],g=f-l,v=p-u,x=g*g+v*v,b,_;if(x&lt;u7)_=Math.log(m/h)/e,b=function(M){return[l+M*g,u+M*v,h*Math.exp(e*M*_)]};else{var T=Math.sqrt(x),w=(m*m-h*h+i*x)/(2*h*t*T),S=(m*m-h*h-i*x)/(2*m*t*T),C=Math.log(Math.sqrt(w*w+1)-w),O=Math.log(Math.sqrt(S*S+1)-S);_=(O-C)/e,b=function(M){var N=M*_,R=DR(C),D=h/(t*T)*(R*f7(e*N+C)-h7(C));return[l+D*g,u+D*v,h*R/DR(e*N+C)]}}return b.duration=_*1e3*e/Math.SQRT2,b}return r.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return n(o,l,u)},r}(Math.SQRT2,2,4);var yh=0,td=0,Hf=0,iP=1e3,j0,nd,W0=0,Lc=0,Zy=0,kd=typeof performance==&quot;object&quot;&amp;&amp;performance.now?performance:Date,rP=typeof window==&quot;object&quot;&amp;&amp;window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Zw(){return Lc||(rP(p7),Lc=kd.now()+Zy)}function p7(){Lc=0}function X0(){this._call=this._time=this._next=null}X0.prototype=sP.prototype={constructor:X0,restart:function(n,e,t){if(typeof n!=&quot;function&quot;)throw new TypeError(&quot;callback is not a function&quot;);t=(t==null?Zw():+t)+(e==null?0:+e),!this._next&amp;&amp;nd!==this&amp;&amp;(nd?nd._next=this:j0=this,nd=this),this._call=n,this._time=t,kS()},stop:function(){this._call&amp;&amp;(this._call=null,this._time=1/0,kS())}};function sP(n,e,t){var i=new X0;return i.restart(n,e,t),i}function m7(){Zw(),++yh;for(var n=j0,e;n;)(e=Lc-n._time)&gt;=0&amp;&amp;n._call.call(void 0,e),n=n._next;--yh}function IR(){Lc=(W0=kd.now())+Zy,yh=td=0;try{m7()}finally{yh=0,y7(),Lc=0}}function g7(){var n=kd.now(),e=n-W0;e&gt;iP&amp;&amp;(Zy-=e,W0=n)}function y7(){for(var n,e=j0,t,i=1/0;e;)e._call?(i&gt;e._time&amp;&amp;(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:j0=t);nd=n,kS(i)}function kS(n){if(!yh){td&amp;&amp;(td=clearTimeout(td));var e=n-Lc;e&gt;24?(n&lt;1/0&amp;&amp;(td=setTimeout(IR,n-kd.now()-Zy)),Hf&amp;&amp;(Hf=clearInterval(Hf))):(Hf||(W0=kd.now(),Hf=setInterval(g7,iP)),yh=1,rP(IR))}}function PR(n,e,t){var i=new X0;return e=e==null?0:+e,i.restart(r=&gt;{i.stop(),n(r+e)},e,t),i}var _7=Ky(&quot;start&quot;,&quot;end&quot;,&quot;cancel&quot;,&quot;interrupt&quot;),v7=[],oP=0,LR=1,FS=2,kg=3,UR=4,zS=5,Fg=6;function Jy(n,e,t,i,r,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;b7(n,t,{name:e,index:i,group:r,on:_7,tween:v7,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:oP})}function Jw(n,e){var t=ro(n,e);if(t.state&gt;oP)throw new Error(&quot;too late; already scheduled&quot;);return t}function Ro(n,e){var t=ro(n,e);if(t.state&gt;kg)throw new Error(&quot;too late; already running&quot;);return t}function ro(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error(&quot;transition not found&quot;);return t}function b7(n,e,t){var i=n.__transition,r;i[e]=t,t.timer=sP(s,0,t.time);function s(h){t.state=LR,t.timer.restart(o,t.delay,t.time),t.delay&lt;=h&amp;&amp;o(h-t.delay)}function o(h){var f,p,m,g;if(t.state!==LR)return u();for(f in i)if(g=i[f],g.name===t.name){if(g.state===kg)return PR(o);g.state===UR?(g.state=Fg,g.timer.stop(),g.on.call(&quot;interrupt&quot;,n,n.__data__,g.index,g.group),delete i[f]):+f&lt;e&amp;&amp;(g.state=Fg,g.timer.stop(),g.on.call(&quot;cancel&quot;,n,n.__data__,g.index,g.group),delete i[f])}if(PR(function(){t.state===kg&amp;&amp;(t.state=UR,t.timer.restart(l,t.delay,t.time),l(h))}),t.state=FS,t.on.call(&quot;start&quot;,n,n.__data__,t.index,t.group),t.state===FS){for(t.state=kg,r=new Array(m=t.tween.length),f=0,p=-1;f&lt;m;++f)(g=t.tween[f].value.call(n,n.__data__,t.index,t.group))&amp;&amp;(r[++p]=g);r.length=p+1}}function l(h){for(var f=h&lt;t.duration?t.ease.call(null,h/t.duration):(t.timer.restart(u),t.state=zS,1),p=-1,m=r.length;++p&lt;m;)r[p].call(n,f);t.state===zS&amp;&amp;(t.on.call(&quot;end&quot;,n,n.__data__,t.index,t.group),u())}function u(){t.state=Fg,t.timer.stop(),delete i[e];for(var h in i)return;delete n.__transition}}function zg(n,e){var t=n.__transition,i,r,s=!0,o;if(t){e=e==null?null:e+&quot;&quot;;for(o in t){if((i=t[o]).name!==e){s=!1;continue}r=i.state&gt;FS&amp;&amp;i.state&lt;zS,i.state=Fg,i.timer.stop(),i.on.call(r?&quot;interrupt&quot;:&quot;cancel&quot;,n,n.__data__,i.index,i.group),delete t[o]}s&amp;&amp;delete n.__transition}}function x7(n){return this.each(function(){zg(this,n)})}function S7(n,e){var t,i;return function(){var r=Ro(this,n),s=r.tween;if(s!==t){i=t=s;for(var o=0,l=i.length;o&lt;l;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function w7(n,e,t){var i,r;if(typeof t!=&quot;function&quot;)throw new Error;return function(){var s=Ro(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var l={name:e,value:t},u=0,h=r.length;u&lt;h;++u)if(r[u].name===e){r[u]=l;break}u===h&amp;&amp;r.push(l)}s.tween=r}}function E7(n,e){var t=this._id;if(n+=&quot;&quot;,arguments.length&lt;2){for(var i=ro(this.node(),t).tween,r=0,s=i.length,o;r&lt;s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((e==null?S7:w7)(t,n,e))}function Qw(n,e,t){var i=n._id;return n.each(function(){var r=Ro(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return ro(r,i).value[e]}}function aP(n,e){var t;return(typeof e==&quot;number&quot;?cl:e instanceof Ud?OR:(t=Ud(e))?(e=t,OR):s7)(n,e)}function T7(n){return function(){this.removeAttribute(n)}}function M7(n){return function(){this.removeAttributeNS(n.space,n.local)}}function A7(n,e,t){var i,r=t+&quot;&quot;,s;return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function C7(n,e,t){var i,r=t+&quot;&quot;,s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function R7(n,e,t){var i,r,s;return function(){var o,l=t(this),u;return l==null?void this.removeAttribute(n):(o=this.getAttribute(n),u=l+&quot;&quot;,o===u?null:o===i&amp;&amp;u===r?s:(r=u,s=e(i=o,l)))}}function O7(n,e,t){var i,r,s;return function(){var o,l=t(this),u;return l==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),u=l+&quot;&quot;,o===u?null:o===i&amp;&amp;u===r?s:(r=u,s=e(i=o,l)))}}function N7(n,e){var t=$y(n),i=t===&quot;transform&quot;?c7:aP;return this.attrTween(n,typeof e==&quot;function&quot;?(t.local?O7:R7)(t,i,Qw(this,&quot;attr.&quot;+n,e)):e==null?(t.local?M7:T7)(t):(t.local?C7:A7)(t,i,e))}function D7(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function I7(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function P7(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&amp;&amp;(t=(i=s)&amp;&amp;I7(n,s)),t}return r._value=e,r}function L7(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&amp;&amp;(t=(i=s)&amp;&amp;D7(n,s)),t}return r._value=e,r}function U7(n,e){var t=&quot;attr.&quot;+n;if(arguments.length&lt;2)return(t=this.tween(t))&amp;&amp;t._value;if(e==null)return this.tween(t,null);if(typeof e!=&quot;function&quot;)throw new Error;var i=$y(n);return this.tween(t,(i.local?P7:L7)(i,e))}function k7(n,e){return function(){Jw(this,n).delay=+e.apply(this,arguments)}}function F7(n,e){return e=+e,function(){Jw(this,n).delay=e}}function z7(n){var e=this._id;return arguments.length?this.each((typeof n==&quot;function&quot;?k7:F7)(e,n)):ro(this.node(),e).delay}function B7(n,e){return function(){Ro(this,n).duration=+e.apply(this,arguments)}}function H7(n,e){return e=+e,function(){Ro(this,n).duration=e}}function V7(n){var e=this._id;return arguments.length?this.each((typeof n==&quot;function&quot;?B7:H7)(e,n)):ro(this.node(),e).duration}function G7(n,e){if(typeof e!=&quot;function&quot;)throw new Error;return function(){Ro(this,n).ease=e}}function j7(n){var e=this._id;return arguments.length?this.each(G7(e,n)):ro(this.node(),e).ease}function W7(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!=&quot;function&quot;)throw new Error;Ro(this,n).ease=t}}function X7(n){if(typeof n!=&quot;function&quot;)throw new Error;return this.each(W7(this._id,n))}function q7(n){typeof n!=&quot;function&quot;&amp;&amp;(n=FI(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r&lt;t;++r)for(var s=e[r],o=s.length,l=i[r]=[],u,h=0;h&lt;o;++h)(u=s[h])&amp;&amp;n.call(u,u.__data__,h,s)&amp;&amp;l.push(u);return new xa(i,this._parents,this._name,this._id)}function Y7(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=t.length,s=Math.min(i,r),o=new Array(i),l=0;l&lt;s;++l)for(var u=e[l],h=t[l],f=u.length,p=o[l]=new Array(f),m,g=0;g&lt;f;++g)(m=u[g]||h[g])&amp;&amp;(p[g]=m);for(;l&lt;i;++l)o[l]=e[l];return new xa(o,this._parents,this._name,this._id)}function K7(n){return(n+&quot;&quot;).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(&quot;.&quot;);return t&gt;=0&amp;&amp;(e=e.slice(0,t)),!e||e===&quot;start&quot;})}function $7(n,e,t){var i,r,s=K7(e)?Jw:Ro;return function(){var o=s(this,n),l=o.on;l!==i&amp;&amp;(r=(i=l).copy()).on(e,t),o.on=r}}function Z7(n,e){var t=this._id;return arguments.length&lt;2?ro(this.node(),t).on.on(n):this.each($7(t,n,e))}function J7(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&amp;&amp;e.removeChild(this)}}function Q7(){return this.on(&quot;end.remove&quot;,J7(this._id))}function eX(n){var e=this._name,t=this._id;typeof n!=&quot;function&quot;&amp;&amp;(n=Yw(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o&lt;r;++o)for(var l=i[o],u=l.length,h=s[o]=new Array(u),f,p,m=0;m&lt;u;++m)(f=l[m])&amp;&amp;(p=n.call(f,f.__data__,m,l))&amp;&amp;(&quot;__data__&quot;in f&amp;&amp;(p.__data__=f.__data__),h[m]=p,Jy(h[m],e,t,m,h,ro(f,t)));return new xa(s,this._parents,e,t)}function tX(n){var e=this._name,t=this._id;typeof n!=&quot;function&quot;&amp;&amp;(n=kI(n));for(var i=this._groups,r=i.length,s=[],o=[],l=0;l&lt;r;++l)for(var u=i[l],h=u.length,f,p=0;p&lt;h;++p)if(f=u[p]){for(var m=n.call(f,f.__data__,p,u),g,v=ro(f,t),x=0,b=m.length;x&lt;b;++x)(g=m[x])&amp;&amp;Jy(g,e,t,x,m,v);s.push(m),o.push(f)}return new xa(s,o,e,t)}var nX=tp.prototype.constructor;function iX(){return new nX(this._groups,this._parents)}function rX(n,e){var t,i,r;return function(){var s=gh(this,n),o=(this.style.removeProperty(n),gh(this,n));return s===o?null:s===t&amp;&amp;o===i?r:r=e(t=s,i=o)}}function lP(n){return function(){this.style.removeProperty(n)}}function sX(n,e,t){var i,r=t+&quot;&quot;,s;return function(){var o=gh(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}function oX(n,e,t){var i,r,s;return function(){var o=gh(this,n),l=t(this),u=l+&quot;&quot;;return l==null&amp;&amp;(u=l=(this.style.removeProperty(n),gh(this,n))),o===u?null:o===i&amp;&amp;u===r?s:(r=u,s=e(i=o,l))}}function aX(n,e){var t,i,r,s=&quot;style.&quot;+e,o=&quot;end.&quot;+s,l;return function(){var u=Ro(this,n),h=u.on,f=u.value[s]==null?l||(l=lP(e)):void 0;(h!==t||r!==f)&amp;&amp;(i=(t=h).copy()).on(o,r=f),u.on=i}}function lX(n,e,t){var i=(n+=&quot;&quot;)==&quot;transform&quot;?l7:aP;return e==null?this.styleTween(n,rX(n,i)).on(&quot;end.style.&quot;+n,lP(n)):typeof e==&quot;function&quot;?this.styleTween(n,oX(n,i,Qw(this,&quot;style.&quot;+n,e))).each(aX(this._id,n)):this.styleTween(n,sX(n,i,e),t).on(&quot;end.style.&quot;+n,null)}function cX(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function uX(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&amp;&amp;(i=(r=o)&amp;&amp;cX(n,o,t)),i}return s._value=e,s}function hX(n,e,t){var i=&quot;style.&quot;+(n+=&quot;&quot;);if(arguments.length&lt;2)return(i=this.tween(i))&amp;&amp;i._value;if(e==null)return this.tween(i,null);if(typeof e!=&quot;function&quot;)throw new Error;return this.tween(i,uX(n,e,t??&quot;&quot;))}function fX(n){return function(){this.textContent=n}}function dX(n){return function(){var e=n(this);this.textContent=e??&quot;&quot;}}function pX(n){return this.tween(&quot;text&quot;,typeof n==&quot;function&quot;?dX(Qw(this,&quot;text&quot;,n)):fX(n==null?&quot;&quot;:n+&quot;&quot;))}function mX(n){return function(e){this.textContent=n.call(this,e)}}function gX(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&amp;&amp;(e=(t=r)&amp;&amp;mX(r)),e}return i._value=n,i}function yX(n){var e=&quot;text&quot;;if(arguments.length&lt;1)return(e=this.tween(e))&amp;&amp;e._value;if(n==null)return this.tween(e,null);if(typeof n!=&quot;function&quot;)throw new Error;return this.tween(e,gX(n))}function _X(){for(var n=this._name,e=this._id,t=cP(),i=this._groups,r=i.length,s=0;s&lt;r;++s)for(var o=i[s],l=o.length,u,h=0;h&lt;l;++h)if(u=o[h]){var f=ro(u,e);Jy(u,n,t,h,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new xa(i,this._parents,n,t)}function vX(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--r===0&amp;&amp;s()}};t.each(function(){var h=Ro(this,i),f=h.on;f!==n&amp;&amp;(e=(n=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),h.on=e}),r===0&amp;&amp;s()})}var bX=0;function xa(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function cP(){return++bX}var Jo=tp.prototype;xa.prototype={constructor:xa,select:eX,selectAll:tX,selectChild:Jo.selectChild,selectChildren:Jo.selectChildren,filter:q7,merge:Y7,selection:iX,transition:_X,call:Jo.call,nodes:Jo.nodes,node:Jo.node,size:Jo.size,empty:Jo.empty,each:Jo.each,on:Z7,attr:N7,attrTween:U7,style:lX,styleTween:hX,text:pX,textTween:yX,remove:Q7,tween:E7,delay:z7,duration:V7,ease:j7,easeVarying:X7,end:vX,[Symbol.iterator]:Jo[Symbol.iterator]};function xX(n){return((n*=2)&lt;=1?n*n*n:(n-=2)*n*n+2)/2}var SX={time:null,delay:0,duration:250,ease:xX};function wX(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function EX(n){var e,t;n instanceof xa?(e=n._id,n=n._name):(e=cP(),(t=SX).time=Zw(),n=n==null?null:n+&quot;&quot;);for(var i=this._groups,r=i.length,s=0;s&lt;r;++s)for(var o=i[s],l=o.length,u,h=0;h&lt;l;++h)(u=o[h])&amp;&amp;Jy(u,n,e,h,o,t||wX(u,e));return new xa(i,this._parents,n,e)}tp.prototype.interrupt=x7;tp.prototype.transition=EX;const lg=n=&gt;()=&gt;n;function TX(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function fa(n,e,t){this.k=n,this.x=e,this.y=t}fa.prototype={constructor:fa,scale:function(n){return n===1?this:new fa(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&amp;e===0?this:new fa(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return&quot;translate(&quot;+this.x+&quot;,&quot;+this.y+&quot;) scale(&quot;+this.k+&quot;)&quot;}};var Qy=new fa(1,0,0);uP.prototype=fa.prototype;function uP(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Qy;return n.__zoom}function bx(n){n.stopImmediatePropagation()}function Vf(n){n.preventDefault(),n.stopImmediatePropagation()}function MX(n){return(!n.ctrlKey||n.type===&quot;wheel&quot;)&amp;&amp;!n.button}function AX(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute(&quot;viewBox&quot;)?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function kR(){return this.__zoom||Qy}function CX(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function RX(){return navigator.maxTouchPoints||&quot;ontouchstart&quot;in this}function OX(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r&gt;i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o&gt;s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function hP(){var n=MX,e=AX,t=OX,i=CX,r=RX,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=d7,h=Ky(&quot;start&quot;,&quot;zoom&quot;,&quot;end&quot;),f,p,m,g=500,v=150,x=0,b=10;function _(z){z.property(&quot;__zoom&quot;,kR).on(&quot;wheel.zoom&quot;,N,{passive:!1}).on(&quot;mousedown.zoom&quot;,R).on(&quot;dblclick.zoom&quot;,D).filter(r).on(&quot;touchstart.zoom&quot;,L).on(&quot;touchmove.zoom&quot;,H).on(&quot;touchend.zoom touchcancel.zoom&quot;,q).style(&quot;-webkit-tap-highlight-color&quot;,&quot;rgba(0,0,0,0)&quot;)}_.transform=function(z,$,P,j){var G=z.selection?z.selection():z;G.property(&quot;__zoom&quot;,kR),z!==G?C(z,$,P,j):G.interrupt().each(function(){O(this,arguments).event(j).start().zoom(null,typeof $==&quot;function&quot;?$.apply(this,arguments):$).end()})},_.scaleBy=function(z,$,P,j){_.scaleTo(z,function(){var G=this.__zoom.k,ee=typeof $==&quot;function&quot;?$.apply(this,arguments):$;return G*ee},P,j)},_.scaleTo=function(z,$,P,j){_.transform(z,function(){var G=e.apply(this,arguments),ee=this.__zoom,F=P==null?S(G):typeof P==&quot;function&quot;?P.apply(this,arguments):P,ne=ee.invert(F),le=typeof $==&quot;function&quot;?$.apply(this,arguments):$;return t(w(T(ee,le),F,ne),G,o)},P,j)},_.translateBy=function(z,$,P,j){_.transform(z,function(){return t(this.__zoom.translate(typeof $==&quot;function&quot;?$.apply(this,arguments):$,typeof P==&quot;function&quot;?P.apply(this,arguments):P),e.apply(this,arguments),o)},null,j)},_.translateTo=function(z,$,P,j,G){_.transform(z,function(){var ee=e.apply(this,arguments),F=this.__zoom,ne=j==null?S(ee):typeof j==&quot;function&quot;?j.apply(this,arguments):j;return t(Qy.translate(ne[0],ne[1]).scale(F.k).translate(typeof $==&quot;function&quot;?-$.apply(this,arguments):-$,typeof P==&quot;function&quot;?-P.apply(this,arguments):-P),ee,o)},j,G)};function T(z,$){return $=Math.max(s[0],Math.min(s[1],$)),$===z.k?z:new fa($,z.x,z.y)}function w(z,$,P){var j=$[0]-P[0]*z.k,G=$[1]-P[1]*z.k;return j===z.x&amp;&amp;G===z.y?z:new fa(z.k,j,G)}function S(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function C(z,$,P,j){z.on(&quot;start.zoom&quot;,function(){O(this,arguments).event(j).start()}).on(&quot;interrupt.zoom end.zoom&quot;,function(){O(this,arguments).event(j).end()}).tween(&quot;zoom&quot;,function(){var G=this,ee=arguments,F=O(G,ee).event(j),ne=e.apply(G,ee),le=P==null?S(ne):typeof P==&quot;function&quot;?P.apply(G,ee):P,ce=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),ie=G.__zoom,oe=typeof $==&quot;function&quot;?$.apply(G,ee):$,ae=u(ie.invert(le).concat(ce/ie.k),oe.invert(le).concat(ce/oe.k));return function(ue){if(ue===1)ue=oe;else{var ve=ae(ue),He=ce/ve[2];ue=new fa(He,le[0]-ve[0]*He,le[1]-ve[1]*He)}F.zoom(null,ue)}})}function O(z,$,P){return!P&amp;&amp;z.__zooming||new M(z,$)}function M(z,$){this.that=z,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,$),this.taps=0}M.prototype={event:function(z){return z&amp;&amp;(this.sourceEvent=z),this},start:function(){return++this.active===1&amp;&amp;(this.that.__zooming=this,this.emit(&quot;start&quot;)),this},zoom:function(z,$){return this.mouse&amp;&amp;z!==&quot;mouse&quot;&amp;&amp;(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&amp;&amp;z!==&quot;touch&quot;&amp;&amp;(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&amp;&amp;z!==&quot;touch&quot;&amp;&amp;(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit(&quot;zoom&quot;),this},end:function(){return--this.active===0&amp;&amp;(delete this.that.__zooming,this.emit(&quot;end&quot;)),this},emit:function(z){var $=es(this.that).datum();h.call(z,this.that,new TX(z,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:h}),$)}};function N(z,...$){if(!n.apply(this,arguments))return;var P=O(this,$).event(z),j=this.__zoom,G=Math.max(s[0],Math.min(s[1],j.k*Math.pow(2,i.apply(this,arguments)))),ee=qs(z);if(P.wheel)(P.mouse[0][0]!==ee[0]||P.mouse[0][1]!==ee[1])&amp;&amp;(P.mouse[1]=j.invert(P.mouse[0]=ee)),clearTimeout(P.wheel);else{if(j.k===G)return;P.mouse=[ee,j.invert(ee)],zg(this),P.start()}Vf(z),P.wheel=setTimeout(F,v),P.zoom(&quot;mouse&quot;,t(w(T(j,G),P.mouse[0],P.mouse[1]),P.extent,o));function F(){P.wheel=null,P.end()}}function R(z,...$){if(m||!n.apply(this,arguments))return;var P=z.currentTarget,j=O(this,$,!0).event(z),G=es(z.view).on(&quot;mousemove.zoom&quot;,le,!0).on(&quot;mouseup.zoom&quot;,ce,!0),ee=qs(z,P),F=z.clientX,ne=z.clientY;YI(z.view),bx(z),j.mouse=[ee,this.__zoom.invert(ee)],zg(this),j.start();function le(ie){if(Vf(ie),!j.moved){var oe=ie.clientX-F,ae=ie.clientY-ne;j.moved=oe*oe+ae*ae&gt;x}j.event(ie).zoom(&quot;mouse&quot;,t(w(j.that.__zoom,j.mouse[0]=qs(ie,P),j.mouse[1]),j.extent,o))}function ce(ie){G.on(&quot;mousemove.zoom mouseup.zoom&quot;,null),KI(ie.view,j.moved),Vf(ie),j.event(ie).end()}}function D(z,...$){if(n.apply(this,arguments)){var P=this.__zoom,j=qs(z.changedTouches?z.changedTouches[0]:z,this),G=P.invert(j),ee=P.k*(z.shiftKey?.5:2),F=t(w(T(P,ee),j,G),e.apply(this,$),o);Vf(z),l&gt;0?es(this).transition().duration(l).call(C,F,j,z):es(this).call(_.transform,F,j,z)}}function L(z,...$){if(n.apply(this,arguments)){var P=z.touches,j=P.length,G=O(this,$,z.changedTouches.length===j).event(z),ee,F,ne,le;for(bx(z),F=0;F&lt;j;++F)ne=P[F],le=qs(ne,this),le=[le,this.__zoom.invert(le),ne.identifier],G.touch0?!G.touch1&amp;&amp;G.touch0[2]!==le[2]&amp;&amp;(G.touch1=le,G.taps=0):(G.touch0=le,ee=!0,G.taps=1+!!f);f&amp;&amp;(f=clearTimeout(f)),ee&amp;&amp;(G.taps&lt;2&amp;&amp;(p=le[0],f=setTimeout(function(){f=null},g)),zg(this),G.start())}}function H(z,...$){if(this.__zooming){var P=O(this,$).event(z),j=z.changedTouches,G=j.length,ee,F,ne,le;for(Vf(z),ee=0;ee&lt;G;++ee)F=j[ee],ne=qs(F,this),P.touch0&amp;&amp;P.touch0[2]===F.identifier?P.touch0[0]=ne:P.touch1&amp;&amp;P.touch1[2]===F.identifier&amp;&amp;(P.touch1[0]=ne);if(F=P.that.__zoom,P.touch1){var ce=P.touch0[0],ie=P.touch0[1],oe=P.touch1[0],ae=P.touch1[1],ue=(ue=oe[0]-ce[0])*ue+(ue=oe[1]-ce[1])*ue,ve=(ve=ae[0]-ie[0])*ve+(ve=ae[1]-ie[1])*ve;F=T(F,Math.sqrt(ue/ve)),ne=[(ce[0]+oe[0])/2,(ce[1]+oe[1])/2],le=[(ie[0]+ae[0])/2,(ie[1]+ae[1])/2]}else if(P.touch0)ne=P.touch0[0],le=P.touch0[1];else return;P.zoom(&quot;touch&quot;,t(w(F,ne,le),P.extent,o))}}function q(z,...$){if(this.__zooming){var P=O(this,$).event(z),j=z.changedTouches,G=j.length,ee,F;for(bx(z),m&amp;&amp;clearTimeout(m),m=setTimeout(function(){m=null},g),ee=0;ee&lt;G;++ee)F=j[ee],P.touch0&amp;&amp;P.touch0[2]===F.identifier?delete P.touch0:P.touch1&amp;&amp;P.touch1[2]===F.identifier&amp;&amp;delete P.touch1;if(P.touch1&amp;&amp;!P.touch0&amp;&amp;(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&amp;&amp;(F=qs(F,this),Math.hypot(p[0]-F[0],p[1]-F[1])&lt;b)){var ne=es(this).on(&quot;dblclick.zoom&quot;);ne&amp;&amp;ne.apply(this,arguments)}}}return _.wheelDelta=function(z){return arguments.length?(i=typeof z==&quot;function&quot;?z:lg(+z),_):i},_.filter=function(z){return arguments.length?(n=typeof z==&quot;function&quot;?z:lg(!!z),_):n},_.touchable=function(z){return arguments.length?(r=typeof z==&quot;function&quot;?z:lg(!!z),_):r},_.extent=function(z){return arguments.length?(e=typeof z==&quot;function&quot;?z:lg([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),_):e},_.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],_):[s[0],s[1]]},_.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(z){return arguments.length?(t=z,_):t},_.duration=function(z){return arguments.length?(l=+z,_):l},_.interpolate=function(z){return arguments.length?(u=z,_):u},_.on=function(){var z=h.on.apply(h,arguments);return z===h?_:z},_.clickDistance=function(z){return arguments.length?(x=(z=+z)*z,_):Math.sqrt(x)},_.tapDistance=function(z){return arguments.length?(b=+z,_):b},_}const Mo={error001:()=&gt;&quot;[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001&quot;,error002:()=&gt;&quot;It looks like you&#x27;ve created a new nodeTypes or edgeTypes object. If this wasn&#x27;t on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.&quot;,error003:n=&gt;`Node type &quot;${n}&quot; not found. Using fallback type &quot;default&quot;.`,error004:()=&gt;&quot;The React Flow parent container needs a width and a height to render the graph.&quot;,error005:()=&gt;&quot;Only child nodes can use a parent extent.&quot;,error006:()=&gt;&quot;Can&#x27;t create edge. An edge needs a source and a target.&quot;,error007:n=&gt;`The old edge with id=${n} does not exist.`,error009:n=&gt;`Marker type &quot;${n}&quot; doesn&#x27;t exist.`,error008:(n,{id:e,sourceHandle:t,targetHandle:i})=&gt;`Couldn&#x27;t create edge for ${n} handle id: &quot;${n===&quot;source&quot;?t:i}&quot;, edge id: ${e}.`,error010:()=&gt;&quot;Handle: No node id found. Make sure to only use a Handle inside a custom Node.&quot;,error011:n=&gt;`Edge type &quot;${n}&quot; not found. Using fallback type &quot;default&quot;.`,error012:n=&gt;`Node with id &quot;${n}&quot; does not exist, it may have been removed. This can happen when a node is deleted before the &quot;onNodeClick&quot; handler is called.`,error013:(n=&quot;react&quot;)=&gt;`It seems that you haven&#x27;t loaded the styles. Please import &#x27;@xyflow/${n}/dist/style.css&#x27; or base.css to make sure everything is working properly.`,error014:()=&gt;&quot;useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.&quot;,error015:()=&gt;&quot;It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.&quot;},Fd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],fP=[&quot;Enter&quot;,&quot; &quot;,&quot;Escape&quot;];var _h;(function(n){n.Strict=&quot;strict&quot;,n.Loose=&quot;loose&quot;})(_h||(_h={}));var Rc;(function(n){n.Free=&quot;free&quot;,n.Vertical=&quot;vertical&quot;,n.Horizontal=&quot;horizontal&quot;})(Rc||(Rc={}));var zd;(function(n){n.Partial=&quot;partial&quot;,n.Full=&quot;full&quot;})(zd||(zd={}));const dP={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var dl;(function(n){n.Bezier=&quot;default&quot;,n.Straight=&quot;straight&quot;,n.Step=&quot;step&quot;,n.SmoothStep=&quot;smoothstep&quot;,n.SimpleBezier=&quot;simplebezier&quot;})(dl||(dl={}));var q0;(function(n){n.Arrow=&quot;arrow&quot;,n.ArrowClosed=&quot;arrowclosed&quot;})(q0||(q0={}));var Mt;(function(n){n.Left=&quot;left&quot;,n.Top=&quot;top&quot;,n.Right=&quot;right&quot;,n.Bottom=&quot;bottom&quot;})(Mt||(Mt={}));const FR={[Mt.Left]:Mt.Right,[Mt.Right]:Mt.Left,[Mt.Top]:Mt.Bottom,[Mt.Bottom]:Mt.Top};function pP(n){return n===null?null:n?&quot;valid&quot;:&quot;invalid&quot;}const mP=n=&gt;&quot;id&quot;in n&amp;&amp;&quot;source&quot;in n&amp;&amp;&quot;target&quot;in n,NX=n=&gt;&quot;id&quot;in n&amp;&amp;&quot;position&quot;in n&amp;&amp;!(&quot;source&quot;in n)&amp;&amp;!(&quot;target&quot;in n),e1=n=&gt;&quot;id&quot;in n&amp;&amp;&quot;internals&quot;in n&amp;&amp;!(&quot;source&quot;in n)&amp;&amp;!(&quot;target&quot;in n),ip=(n,e=[0,0])=&gt;{const{width:t,height:i}=Sa(n),r=n.origin??e,s=t*r[0],o=i*r[1];return{x:n.position.x-s,y:n.position.y-o}},DX=(n,e={nodeOrigin:[0,0],nodeLookup:void 0})=&gt;{if(n.length===0)return{x:0,y:0,width:0,height:0};const t=n.reduce((i,r)=&gt;{const s=typeof r==&quot;string&quot;;let o=!e.nodeLookup&amp;&amp;!s?r:void 0;e.nodeLookup&amp;&amp;(o=s?e.nodeLookup.get(r):e1(r)?r:e.nodeLookup.get(r.id));const l=o?Y0(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return e_(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return t_(t)},rp=(n,e={})=&gt;{if(n.size===0)return{x:0,y:0,width:0,height:0};let t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(i=&gt;{if(e.filter===void 0||e.filter(i)){const r=Y0(i);t=e_(t,r)}}),t_(t)},gP=(n,e,[t,i,r]=[0,0,1],s=!1,o=!1)=&gt;{const l={...sp(e,[t,i,r]),width:e.width/r,height:e.height/r},u=[];for(const h of n.values()){const{measured:f,selectable:p=!0,hidden:m=!1}=h;if(o&amp;&amp;!p||m)continue;const g=f.width??h.width??h.initialWidth??null,v=f.height??h.height??h.initialHeight??null,x=Bd(l,bh(h)),b=(g??0)*(v??0),_=s&amp;&amp;x&gt;0;(!h.internals.handleBounds||_||x&gt;=b||h.dragging)&amp;&amp;u.push(h)}return u},IX=(n,e)=&gt;{const t=new Set;return n.forEach(i=&gt;{t.add(i.id)}),e.filter(i=&gt;t.has(i.source)||t.has(i.target))};function BS(n,e){const t=new Map,i=e!=null&amp;&amp;e.nodes?new Set(e.nodes.map(r=&gt;r.id)):null;return n.forEach(r=&gt;{r.measured.width&amp;&amp;r.measured.height&amp;&amp;((e==null?void 0:e.includeHiddenNodes)||!r.hidden)&amp;&amp;(!i||i.has(r.id))&amp;&amp;t.set(r.id,r)}),t}async function HS({nodes:n,width:e,height:t,panZoom:i,minZoom:r,maxZoom:s},o){if(n.size===0)return Promise.resolve(!1);const l=rp(n),u=t1(l,e,t,(o==null?void 0:o.minZoom)??r,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await i.setViewport(u,{duration:o==null?void 0:o.duration}),Promise.resolve(!0)}function yP({nodeId:n,nextPosition:e,nodeLookup:t,nodeOrigin:i=[0,0],nodeExtent:r,onError:s}){const o=t.get(n),l=o.parentId?t.get(o.parentId):void 0,{x:u,y:h}=l?l.internals.positionAbsolute:{x:0,y:0},f=o.origin??i;let p=r;if(o.extent===&quot;parent&quot;&amp;&amp;!o.expandParent)if(!l)s==null||s(&quot;005&quot;,Mo.error005());else{const g=l.measured.width,v=l.measured.height;g&amp;&amp;v&amp;&amp;(p=[[u,h],[u+g,h+v]])}else l&amp;&amp;xh(o.extent)&amp;&amp;(p=[[o.extent[0][0]+u,o.extent[0][1]+h],[o.extent[1][0]+u,o.extent[1][1]+h]]);const m=xh(p)?Uc(e,p,o.measured):e;return(o.measured.width===void 0||o.measured.height===void 0)&amp;&amp;(s==null||s(&quot;015&quot;,Mo.error015())),{position:{x:m.x-u+(o.measured.width??0)*f[0],y:m.y-h+(o.measured.height??0)*f[1]},positionAbsolute:m}}async function PX({nodesToRemove:n=[],edgesToRemove:e=[],nodes:t,edges:i,onBeforeDelete:r}){const s=new Set(n.map(m=&gt;m.id)),o=[];for(const m of t){if(m.deletable===!1)continue;const g=s.has(m.id),v=!g&amp;&amp;m.parentId&amp;&amp;o.find(x=&gt;x.id===m.parentId);(g||v)&amp;&amp;o.push(m)}const l=new Set(e.map(m=&gt;m.id)),u=i.filter(m=&gt;m.deletable!==!1),f=IX(o,u);for(const m of u)l.has(m.id)&amp;&amp;!f.find(v=&gt;v.id===m.id)&amp;&amp;f.push(m);if(!r)return{edges:f,nodes:o};const p=await r({nodes:o,edges:f});return typeof p==&quot;boolean&quot;?p?{edges:f,nodes:o}:{edges:[],nodes:[]}:p}const vh=(n,e=0,t=1)=&gt;Math.min(Math.max(n,e),t),Uc=(n={x:0,y:0},e,t)=&gt;({x:vh(n.x,e[0][0],e[1][0]-((t==null?void 0:t.width)??0)),y:vh(n.y,e[0][1],e[1][1]-((t==null?void 0:t.height)??0))});function _P(n,e,t){const{width:i,height:r}=Sa(t),{x:s,y:o}=t.internals.positionAbsolute;return Uc(n,[[s,o],[s+i,o+r]],e)}const zR=(n,e,t)=&gt;n&lt;e?vh(Math.abs(n-e),1,e)/e:n&gt;t?-vh(Math.abs(n-t),1,e)/e:0,vP=(n,e,t=15,i=40)=&gt;{const r=zR(n.x,i,e.width-i)*t,s=zR(n.y,i,e.height-i)*t;return[r,s]},e_=(n,e)=&gt;({x:Math.min(n.x,e.x),y:Math.min(n.y,e.y),x2:Math.max(n.x2,e.x2),y2:Math.max(n.y2,e.y2)}),VS=({x:n,y:e,width:t,height:i})=&gt;({x:n,y:e,x2:n+t,y2:e+i}),t_=({x:n,y:e,x2:t,y2:i})=&gt;({x:n,y:e,width:t-n,height:i-e}),bh=(n,e=[0,0])=&gt;{var r,s;const{x:t,y:i}=e1(n)?n.internals.positionAbsolute:ip(n,e);return{x:t,y:i,width:((r=n.measured)==null?void 0:r.width)??n.width??n.initialWidth??0,height:((s=n.measured)==null?void 0:s.height)??n.height??n.initialHeight??0}},Y0=(n,e=[0,0])=&gt;{var r,s;const{x:t,y:i}=e1(n)?n.internals.positionAbsolute:ip(n,e);return{x:t,y:i,x2:t+(((r=n.measured)==null?void 0:r.width)??n.width??n.initialWidth??0),y2:i+(((s=n.measured)==null?void 0:s.height)??n.height??n.initialHeight??0)}},bP=(n,e)=&gt;t_(e_(VS(n),VS(e))),Bd=(n,e)=&gt;{const t=Math.max(0,Math.min(n.x+n.width,e.x+e.width)-Math.max(n.x,e.x)),i=Math.max(0,Math.min(n.y+n.height,e.y+e.height)-Math.max(n.y,e.y));return Math.ceil(t*i)},BR=n=&gt;Zs(n.width)&amp;&amp;Zs(n.height)&amp;&amp;Zs(n.x)&amp;&amp;Zs(n.y),Zs=n=&gt;!isNaN(n)&amp;&amp;isFinite(n),LX=(n,e)=&gt;{},n_=(n,e=[1,1])=&gt;({x:e[0]*Math.round(n.x/e[0]),y:e[1]*Math.round(n.y/e[1])}),sp=({x:n,y:e},[t,i,r],s=!1,o=[1,1])=&gt;{const l={x:(n-t)/r,y:(e-i)/r};return s?n_(l,o):l},xP=({x:n,y:e},[t,i,r])=&gt;({x:n*r+t,y:e*r+i}),t1=(n,e,t,i,r,s)=&gt;{const o=e/(n.width*(1+s)),l=t/(n.height*(1+s)),u=Math.min(o,l),h=vh(u,i,r),f=n.x+n.width/2,p=n.y+n.height/2,m=e/2-f*h,g=t/2-p*h;return{x:m,y:g,zoom:h}},K0=()=&gt;{var n;return typeof navigator&lt;&quot;u&quot;&amp;&amp;((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf(&quot;Mac&quot;))&gt;=0};function xh(n){return n!==void 0&amp;&amp;n!==&quot;parent&quot;}function Sa(n){var e,t;return{width:((e=n.measured)==null?void 0:e.width)??n.width??n.initialWidth??0,height:((t=n.measured)==null?void 0:t.height)??n.height??n.initialHeight??0}}function SP(n){var e,t;return(((e=n.measured)==null?void 0:e.width)??n.width??n.initialWidth)!==void 0&amp;&amp;(((t=n.measured)==null?void 0:t.height)??n.height??n.initialHeight)!==void 0}function wP(n,e={width:0,height:0},t,i,r){const s={...n},o=i.get(t);if(o){const l=o.origin||r;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function HR(n,e){if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function md(n,{snapGrid:e=[0,0],snapToGrid:t=!1,transform:i,containerBounds:r}){const{x:s,y:o}=ya(n),l=sp({x:s-((r==null?void 0:r.left)??0),y:o-((r==null?void 0:r.top)??0)},i),{x:u,y:h}=t?n_(l,e):l;return{xSnapped:u,ySnapped:h,...l}}const i_=n=&gt;({width:n.offsetWidth,height:n.offsetHeight}),EP=n=&gt;{var e;return((e=n==null?void 0:n.getRootNode)==null?void 0:e.call(n))||(window==null?void 0:window.document)},UX=[&quot;INPUT&quot;,&quot;SELECT&quot;,&quot;TEXTAREA&quot;];function GS(n){var i,r;const e=((r=(i=n.composedPath)==null?void 0:i.call(n))==null?void 0:r[0])||n.target;return(e==null?void 0:e.nodeType)!==1?!1:UX.includes(e.nodeName)||e.hasAttribute(&quot;contenteditable&quot;)||!!e.closest(&quot;.nokey&quot;)}const TP=n=&gt;&quot;clientX&quot;in n,ya=(n,e)=&gt;{var s,o;const t=TP(n),i=t?n.clientX:(s=n.touches)==null?void 0:s[0].clientX,r=t?n.clientY:(o=n.touches)==null?void 0:o[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},VR=(n,e,t,i,r)=&gt;{const s=e.querySelectorAll(`.${n}`);return!s||!s.length?null:Array.from(s).map(o=&gt;{const l=o.getBoundingClientRect();return{id:o.getAttribute(&quot;data-handleid&quot;),type:n,nodeId:r,position:o.getAttribute(&quot;data-handlepos&quot;),x:(l.left-t.left)/i,y:(l.top-t.top)/i,...i_(o)}})};function MP({sourceX:n,sourceY:e,targetX:t,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=n*.125+r*.375+o*.375+t*.125,h=e*.125+s*.375+l*.375+i*.125,f=Math.abs(u-n),p=Math.abs(h-e);return[u,h,f,p]}function cg(n,e){return n&gt;=0?.5*n:e*25*Math.sqrt(-n)}function GR({pos:n,x1:e,y1:t,x2:i,y2:r,c:s}){switch(n){case Mt.Left:return[e-cg(e-i,s),t];case Mt.Right:return[e+cg(i-e,s),t];case Mt.Top:return[e,t-cg(t-r,s)];case Mt.Bottom:return[e,t+cg(r-t,s)]}}function AP({sourceX:n,sourceY:e,sourcePosition:t=Mt.Bottom,targetX:i,targetY:r,targetPosition:s=Mt.Top,curvature:o=.25}){const[l,u]=GR({pos:t,x1:n,y1:e,x2:i,y2:r,c:o}),[h,f]=GR({pos:s,x1:i,y1:r,x2:n,y2:e,c:o}),[p,m,g,v]=MP({sourceX:n,sourceY:e,targetX:i,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:h,targetControlY:f});return[`M${n},${e} C${l},${u} ${h},${f} ${i},${r}`,p,m,g,v]}function CP({sourceX:n,sourceY:e,targetX:t,targetY:i}){const r=Math.abs(t-n)/2,s=t&lt;n?t+r:t-r,o=Math.abs(i-e)/2,l=i&lt;e?i+o:i-o;return[s,l,r,o]}function kX({sourceNode:n,targetNode:e,selected:t=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const s=t||e.selected||n.selected,o=Math.max(n.internals.z||0,e.internals.z||0,1e3);return i+(s?o:0)}function FX({sourceNode:n,targetNode:e,width:t,height:i,transform:r}){const s=e_(Y0(n),Y0(e));s.x===s.x2&amp;&amp;(s.x2+=1),s.y===s.y2&amp;&amp;(s.y2+=1);const o={x:-r[0]/r[2],y:-r[1]/r[2],width:t/r[2],height:i/r[2]};return Bd(o,t_(s))&gt;0}const zX=({source:n,sourceHandle:e,target:t,targetHandle:i})=&gt;`xy-edge__${n}${e||&quot;&quot;}-${t}${i||&quot;&quot;}`,BX=(n,e)=&gt;e.some(t=&gt;t.source===n.source&amp;&amp;t.target===n.target&amp;&amp;(t.sourceHandle===n.sourceHandle||!t.sourceHandle&amp;&amp;!n.sourceHandle)&amp;&amp;(t.targetHandle===n.targetHandle||!t.targetHandle&amp;&amp;!n.targetHandle)),RP=(n,e)=&gt;{if(!n.source||!n.target)return e;let t;return mP(n)?t={...n}:t={...n,id:zX(n)},BX(t,e)?e:(t.sourceHandle===null&amp;&amp;delete t.sourceHandle,t.targetHandle===null&amp;&amp;delete t.targetHandle,e.concat(t))};function OP({sourceX:n,sourceY:e,targetX:t,targetY:i}){const[r,s,o,l]=CP({sourceX:n,sourceY:e,targetX:t,targetY:i});return[`M ${n},${e}L ${t},${i}`,r,s,o,l]}const jR={[Mt.Left]:{x:-1,y:0},[Mt.Right]:{x:1,y:0},[Mt.Top]:{x:0,y:-1},[Mt.Bottom]:{x:0,y:1}},HX=({source:n,sourcePosition:e=Mt.Bottom,target:t})=&gt;e===Mt.Left||e===Mt.Right?n.x&lt;t.x?{x:1,y:0}:{x:-1,y:0}:n.y&lt;t.y?{x:0,y:1}:{x:0,y:-1},WR=(n,e)=&gt;Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2));function VX({source:n,sourcePosition:e=Mt.Bottom,target:t,targetPosition:i=Mt.Top,center:r,offset:s}){const o=jR[e],l=jR[i],u={x:n.x+o.x*s,y:n.y+o.y*s},h={x:t.x+l.x*s,y:t.y+l.y*s},f=HX({source:u,sourcePosition:e,target:h}),p=f.x!==0?&quot;x&quot;:&quot;y&quot;,m=f[p];let g=[],v,x;const b={x:0,y:0},_={x:0,y:0},[T,w,S,C]=CP({sourceX:n.x,sourceY:n.y,targetX:t.x,targetY:t.y});if(o[p]*l[p]===-1){v=r.x??T,x=r.y??w;const M=[{x:v,y:u.y},{x:v,y:h.y}],N=[{x:u.x,y:x},{x:h.x,y:x}];o[p]===m?g=p===&quot;x&quot;?M:N:g=p===&quot;x&quot;?N:M}else{const M=[{x:u.x,y:h.y}],N=[{x:h.x,y:u.y}];if(p===&quot;x&quot;?g=o.x===m?N:M:g=o.y===m?M:N,e===i){const q=Math.abs(n[p]-t[p]);if(q&lt;=s){const z=Math.min(s-1,s-q);o[p]===m?b[p]=(u[p]&gt;n[p]?-1:1)*z:_[p]=(h[p]&gt;t[p]?-1:1)*z}}if(e!==i){const q=p===&quot;x&quot;?&quot;y&quot;:&quot;x&quot;,z=o[p]===l[q],$=u[q]&gt;h[q],P=u[q]&lt;h[q];(o[p]===1&amp;&amp;(!z&amp;&amp;$||z&amp;&amp;P)||o[p]!==1&amp;&amp;(!z&amp;&amp;P||z&amp;&amp;$))&amp;&amp;(g=p===&quot;x&quot;?M:N)}const R={x:u.x+b.x,y:u.y+b.y},D={x:h.x+_.x,y:h.y+_.y},L=Math.max(Math.abs(R.x-g[0].x),Math.abs(D.x-g[0].x)),H=Math.max(Math.abs(R.y-g[0].y),Math.abs(D.y-g[0].y));L&gt;=H?(v=(R.x+D.x)/2,x=g[0].y):(v=g[0].x,x=(R.y+D.y)/2)}return[[n,{x:u.x+b.x,y:u.y+b.y},...g,{x:h.x+_.x,y:h.y+_.y},t],v,x,S,C]}function GX(n,e,t,i){const r=Math.min(WR(n,e)/2,WR(e,t)/2,i),{x:s,y:o}=e;if(n.x===s&amp;&amp;s===t.x||n.y===o&amp;&amp;o===t.y)return`L${s} ${o}`;if(n.y===o){const h=n.x&lt;t.x?-1:1,f=n.y&lt;t.y?1:-1;return`L ${s+r*h},${o}Q ${s},${o} ${s},${o+r*f}`}const l=n.x&lt;t.x?1:-1,u=n.y&lt;t.y?-1:1;return`L ${s},${o+r*u}Q ${s},${o} ${s+r*l},${o}`}function jS({sourceX:n,sourceY:e,sourcePosition:t=Mt.Bottom,targetX:i,targetY:r,targetPosition:s=Mt.Top,borderRadius:o=5,centerX:l,centerY:u,offset:h=20}){const[f,p,m,g,v]=VX({source:{x:n,y:e},sourcePosition:t,target:{x:i,y:r},targetPosition:s,center:{x:l,y:u},offset:h});return[f.reduce((b,_,T)=&gt;{let w=&quot;&quot;;return T&gt;0&amp;&amp;T&lt;f.length-1?w=GX(f[T-1],_,f[T+1],o):w=`${T===0?&quot;M&quot;:&quot;L&quot;}${_.x} ${_.y}`,b+=w,b},&quot;&quot;),p,m,g,v]}function XR(n){var e;return n&amp;&amp;!!(n.internals.handleBounds||(e=n.handles)!=null&amp;&amp;e.length)&amp;&amp;!!(n.measured.width||n.width||n.initialWidth)}function jX(n){var p;const{sourceNode:e,targetNode:t}=n;if(!XR(e)||!XR(t))return null;const i=e.internals.handleBounds||qR(e.handles),r=t.internals.handleBounds||qR(t.handles),s=YR((i==null?void 0:i.source)??[],n.sourceHandle),o=YR(n.connectionMode===_h.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),n.targetHandle);if(!s||!o)return(p=n.onError)==null||p.call(n,&quot;008&quot;,Mo.error008(s?&quot;target&quot;:&quot;source&quot;,{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const l=(s==null?void 0:s.position)||Mt.Bottom,u=(o==null?void 0:o.position)||Mt.Top,h=Hd(e,s,l),f=Hd(t,o,u);return{sourceX:h.x,sourceY:h.y,targetX:f.x,targetY:f.y,sourcePosition:l,targetPosition:u}}function qR(n){if(!n)return null;const e=[],t=[];for(const i of n)i.width=i.width??1,i.height=i.height??1,i.type===&quot;source&quot;?e.push(i):i.type===&quot;target&quot;&amp;&amp;t.push(i);return{source:e,target:t}}function Hd(n,e,t=Mt.Left,i=!1){const r=((e==null?void 0:e.x)??0)+n.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+n.internals.positionAbsolute.y,{width:o,height:l}=e??Sa(n);if(i)return{x:r+o/2,y:s+l/2};switch((e==null?void 0:e.position)??t){case Mt.Top:return{x:r+o/2,y:s};case Mt.Right:return{x:r+o,y:s+l/2};case Mt.Bottom:return{x:r+o/2,y:s+l};case Mt.Left:return{x:r,y:s+l/2}}}function YR(n,e){return n&amp;&amp;(e?n.find(t=&gt;t.id===e):n[0])||null}function WS(n,e){return n?typeof n==&quot;string&quot;?n:`${e?`${e}__`:&quot;&quot;}${Object.keys(n).sort().map(i=&gt;`${i}=${n[i]}`).join(&quot;&amp;&quot;)}`:&quot;&quot;}function WX(n,{id:e,defaultColor:t,defaultMarkerStart:i,defaultMarkerEnd:r}){const s=new Set;return n.reduce((o,l)=&gt;([l.markerStart||i,l.markerEnd||r].forEach(u=&gt;{if(u&amp;&amp;typeof u==&quot;object&quot;){const h=WS(u,e);s.has(h)||(o.push({id:h,color:u.color||t,...u}),s.add(h))}}),o),[]).sort((o,l)=&gt;o.id.localeCompare(l.id))}const n1={nodeOrigin:[0,0],nodeExtent:Fd,elevateNodesOnSelect:!0,defaults:{}},XX={...n1,checkEquality:!0};function i1(n,e){const t={...n};for(const i in e)e[i]!==void 0&amp;&amp;(t[i]=e[i]);return t}function qX(n,e,t){const i=i1(n1,t);for(const r of n.values())if(r.parentId)r1(r,n,e,i);else{const s=ip(r,i.nodeOrigin),o=xh(r.extent)?r.extent:i.nodeExtent,l=Uc(s,o,Sa(r));r.internals.positionAbsolute=l}}function XS(n,e,t,i){var l,u;const r=i1(XX,i),s=new Map(e),o=r!=null&amp;&amp;r.elevateNodesOnSelect?1e3:0;e.clear(),t.clear();for(const h of n){let f=s.get(h.id);if(r.checkEquality&amp;&amp;h===(f==null?void 0:f.internals.userNode))e.set(h.id,f);else{const p=ip(h,r.nodeOrigin),m=xh(h.extent)?h.extent:r.nodeExtent,g=Uc(p,m,Sa(h));f={...r.defaults,...h,measured:{width:(l=h.measured)==null?void 0:l.width,height:(u=h.measured)==null?void 0:u.height},internals:{positionAbsolute:g,handleBounds:h.measured?f==null?void 0:f.internals.handleBounds:void 0,z:NP(h,o),userNode:h}},e.set(h.id,f)}h.parentId&amp;&amp;r1(f,e,t,i)}}function YX(n,e){if(!n.parentId)return;const t=e.get(n.parentId);t?t.set(n.id,n):e.set(n.parentId,new Map([[n.id,n]]))}function r1(n,e,t,i){const{elevateNodesOnSelect:r,nodeOrigin:s,nodeExtent:o}=i1(n1,i),l=n.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}YX(n,t);const h=r?1e3:0,{x:f,y:p,z:m}=KX(n,u,s,o,h),{positionAbsolute:g}=n.internals,v=f!==g.x||p!==g.y;(v||m!==n.internals.z)&amp;&amp;e.set(n.id,{...n,internals:{...n.internals,positionAbsolute:v?{x:f,y:p}:g,z:m}})}function NP(n,e){return(Zs(n.zIndex)?n.zIndex:0)+(n.selected?e:0)}function KX(n,e,t,i,r){const{x:s,y:o}=e.internals.positionAbsolute,l=Sa(n),u=ip(n,t),h=xh(n.extent)?Uc(u,n.extent,l):u;let f=Uc({x:s+h.x,y:o+h.y},i,l);n.extent===&quot;parent&quot;&amp;&amp;(f=_P(f,l,e));const p=NP(n,r),m=e.internals.z??0;return{x:f.x,y:f.y,z:m&gt;p?m:p}}function s1(n,e,t,i=[0,0]){var o;const r=[],s=new Map;for(const l of n){const u=e.get(l.parentId);if(!u)continue;const h=((o=s.get(l.parentId))==null?void 0:o.expandedRect)??bh(u),f=bP(h,l.rect);s.set(l.parentId,{expandedRect:f,parent:u})}return s.size&gt;0&amp;&amp;s.forEach(({expandedRect:l,parent:u},h)=&gt;{var w;const f=u.internals.positionAbsolute,p=Sa(u),m=u.origin??i,g=l.x&lt;f.x?Math.round(Math.abs(f.x-l.x)):0,v=l.y&lt;f.y?Math.round(Math.abs(f.y-l.y)):0,x=Math.max(p.width,Math.round(l.width)),b=Math.max(p.height,Math.round(l.height)),_=(x-p.width)*m[0],T=(b-p.height)*m[1];(g&gt;0||v&gt;0||_||T)&amp;&amp;(r.push({id:h,type:&quot;position&quot;,position:{x:u.position.x-g+_,y:u.position.y-v+T}}),(w=t.get(h))==null||w.forEach(S=&gt;{n.some(C=&gt;C.id===S.id)||r.push({id:S.id,type:&quot;position&quot;,position:{x:S.position.x+g,y:S.position.y+v}})})),(p.width&lt;l.width||p.height&lt;l.height||g||v)&amp;&amp;r.push({id:h,type:&quot;dimensions&quot;,setAttributes:!0,dimensions:{width:x+(g?m[0]*g-_:0),height:b+(v?m[1]*v-T:0)}})}),r}function $X(n,e,t,i,r,s){const o=i==null?void 0:i.querySelector(&quot;.xyflow__viewport&quot;);let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],h=window.getComputedStyle(o),{m22:f}=new window.DOMMatrixReadOnly(h.transform),p=[];for(const m of n.values()){const g=e.get(m.id);if(!g)continue;if(g.hidden){e.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),l=!0;continue}const v=i_(m.nodeElement),x=g.measured.width!==v.width||g.measured.height!==v.height;if(!!(v.width&amp;&amp;v.height&amp;&amp;(x||!g.internals.handleBounds||m.force))){const _=m.nodeElement.getBoundingClientRect(),T=xh(g.extent)?g.extent:s;let{positionAbsolute:w}=g.internals;g.parentId&amp;&amp;g.extent===&quot;parent&quot;?w=_P(w,v,e.get(g.parentId)):T&amp;&amp;(w=Uc(w,T,v));const S={...g,measured:v,internals:{...g.internals,positionAbsolute:w,handleBounds:{source:VR(&quot;source&quot;,m.nodeElement,_,f,g.id),target:VR(&quot;target&quot;,m.nodeElement,_,f,g.id)}}};e.set(g.id,S),g.parentId&amp;&amp;r1(S,e,t,{nodeOrigin:r}),l=!0,x&amp;&amp;(u.push({id:g.id,type:&quot;dimensions&quot;,dimensions:v}),g.expandParent&amp;&amp;g.parentId&amp;&amp;p.push({id:g.id,parentId:g.parentId,rect:bh(S,r)}))}}if(p.length&gt;0){const m=s1(p,e,t,r);u.push(...m)}return{changes:u,updatedInternals:l}}async function ZX({delta:n,panZoom:e,transform:t,translateExtent:i,width:r,height:s}){if(!e||!n.x&amp;&amp;!n.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:t[0]+n.x,y:t[1]+n.y,zoom:t[2]},[[0,0],[r,s]],i),l=!!o&amp;&amp;(o.x!==t[0]||o.y!==t[1]||o.k!==t[2]);return Promise.resolve(l)}function KR(n,e,t,i,r,s){let o=r;const l=i.get(o)||new Map;i.set(o,l.set(t,e)),o=`${r}-${n}`;const u=i.get(o)||new Map;if(i.set(o,u.set(t,e)),s){o=`${r}-${n}-${s}`;const h=i.get(o)||new Map;i.set(o,h.set(t,e))}}function DP(n,e,t){n.clear(),e.clear();for(const i of t){const{source:r,target:s,sourceHandle:o=null,targetHandle:l=null}=i,u={edgeId:i.id,source:r,target:s,sourceHandle:o,targetHandle:l},h=`${r}-${o}--${s}-${l}`,f=`${s}-${l}--${r}-${o}`;KR(&quot;source&quot;,u,f,n,r,o),KR(&quot;target&quot;,u,h,n,s,l),e.set(i.id,i)}}function IP(n,e){if(!n.parentId)return!1;const t=e.get(n.parentId);return t?t.selected?!0:IP(t,e):!1}function $R(n,e,t){var r;let i=n;do{if((r=i==null?void 0:i.matches)!=null&amp;&amp;r.call(i,e))return!0;if(i===t)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function JX(n,e,t,i){const r=new Map;for(const[s,o]of n)if((o.selected||o.id===i)&amp;&amp;(!o.parentId||!IP(o,n))&amp;&amp;(o.draggable||e&amp;&amp;typeof o.draggable&gt;&quot;u&quot;)){const l=n.get(s);l&amp;&amp;r.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:t.x-l.internals.positionAbsolute.x,y:t.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return r}function xx({nodeId:n,dragItems:e,nodeLookup:t,dragging:i=!0}){var o,l,u;const r=[];for(const[h,f]of e){const p=(o=t.get(h))==null?void 0:o.internals.userNode;p&amp;&amp;r.push({...p,position:f.position,dragging:i})}if(!n)return[r[0],r];const s=(l=t.get(n))==null?void 0:l.internals.userNode;return[s?{...s,position:((u=e.get(n))==null?void 0:u.position)||s.position,dragging:i}:r[0],r]}function QX({onNodeMouseDown:n,getStoreItems:e,onDragStart:t,onDrag:i,onDragStop:r}){let s={x:null,y:null},o=0,l=new Map,u=!1,h={x:0,y:0},f=null,p=!1,m=null,g=!1;function v({noDragClassName:b,handleSelector:_,domNode:T,isSelectable:w,nodeId:S,nodeClickDistance:C=0}){m=es(T);function O({x:D,y:L},H){const{nodeLookup:q,nodeExtent:z,snapGrid:$,snapToGrid:P,nodeOrigin:j,onNodeDrag:G,onSelectionDrag:ee,onError:F,updateNodePositions:ne}=e();s={x:D,y:L};let le=!1,ce={x:0,y:0,x2:0,y2:0};if(l.size&gt;1&amp;&amp;z){const ie=rp(l);ce=VS(ie)}for(const[ie,oe]of l){if(!q.has(ie))continue;let ae={x:D-oe.distance.x,y:L-oe.distance.y};P&amp;&amp;(ae=n_(ae,$));let ue=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];if(l.size&gt;1&amp;&amp;z&amp;&amp;!oe.extent){const{positionAbsolute:Xe}=oe.internals,ct=Xe.x-ce.x+z[0][0],We=Xe.x+oe.measured.width-ce.x2+z[1][0],Ke=Xe.y-ce.y+z[0][1],Q=Xe.y+oe.measured.height-ce.y2+z[1][1];ue=[[ct,Ke],[We,Q]]}const{position:ve,positionAbsolute:He}=yP({nodeId:ie,nextPosition:ae,nodeLookup:q,nodeExtent:ue,nodeOrigin:j,onError:F});le=le||oe.position.x!==ve.x||oe.position.y!==ve.y,oe.position=ve,oe.internals.positionAbsolute=He}if(le&amp;&amp;(ne(l,!0),H&amp;&amp;(i||G||!S&amp;&amp;ee))){const[ie,oe]=xx({nodeId:S,dragItems:l,nodeLookup:q});i==null||i(H,l,ie,oe),G==null||G(H,ie,oe),S||ee==null||ee(H,oe)}}async function M(){if(!f)return;const{transform:D,panBy:L,autoPanSpeed:H,autoPanOnNodeDrag:q}=e();if(!q){u=!1,cancelAnimationFrame(o);return}const[z,$]=vP(h,f,H);(z!==0||$!==0)&amp;&amp;(s.x=(s.x??0)-z/D[2],s.y=(s.y??0)-$/D[2],await L({x:z,y:$})&amp;&amp;O(s,null)),o=requestAnimationFrame(M)}function N(D){var le;const{nodeLookup:L,multiSelectionActive:H,nodesDraggable:q,transform:z,snapGrid:$,snapToGrid:P,selectNodesOnDrag:j,onNodeDragStart:G,onSelectionDragStart:ee,unselectNodesAndEdges:F}=e();p=!0,(!j||!w)&amp;&amp;!H&amp;&amp;S&amp;&amp;((le=L.get(S))!=null&amp;&amp;le.selected||F()),w&amp;&amp;j&amp;&amp;S&amp;&amp;(n==null||n(S));const ne=md(D.sourceEvent,{transform:z,snapGrid:$,snapToGrid:P,containerBounds:f});if(s=ne,l=JX(L,q,ne,S),l.size&gt;0&amp;&amp;(t||G||!S&amp;&amp;ee)){const[ce,ie]=xx({nodeId:S,dragItems:l,nodeLookup:L});t==null||t(D.sourceEvent,l,ce,ie),G==null||G(D.sourceEvent,ce,ie),S||ee==null||ee(D.sourceEvent,ie)}}const R=$I().clickDistance(C).on(&quot;start&quot;,D=&gt;{const{domNode:L,nodeDragThreshold:H,transform:q,snapGrid:z,snapToGrid:$}=e();f=(L==null?void 0:L.getBoundingClientRect())||null,g=!1,H===0&amp;&amp;N(D),s=md(D.sourceEvent,{transform:q,snapGrid:z,snapToGrid:$,containerBounds:f}),h=ya(D.sourceEvent,f)}).on(&quot;drag&quot;,D=&gt;{const{autoPanOnNodeDrag:L,transform:H,snapGrid:q,snapToGrid:z,nodeDragThreshold:$,nodeLookup:P}=e(),j=md(D.sourceEvent,{transform:H,snapGrid:q,snapToGrid:z,containerBounds:f});if((D.sourceEvent.type===&quot;touchmove&quot;&amp;&amp;D.sourceEvent.touches.length&gt;1||S&amp;&amp;!P.has(S))&amp;&amp;(g=!0),!g){if(!u&amp;&amp;L&amp;&amp;p&amp;&amp;(u=!0,M()),!p){const G=j.xSnapped-(s.x??0),ee=j.ySnapped-(s.y??0);Math.sqrt(G*G+ee*ee)&gt;$&amp;&amp;N(D)}(s.x!==j.xSnapped||s.y!==j.ySnapped)&amp;&amp;l&amp;&amp;p&amp;&amp;(h=ya(D.sourceEvent,f),O(j,D.sourceEvent))}}).on(&quot;end&quot;,D=&gt;{if(!(!p||g)&amp;&amp;(u=!1,p=!1,cancelAnimationFrame(o),l.size&gt;0)){const{nodeLookup:L,updateNodePositions:H,onNodeDragStop:q,onSelectionDragStop:z}=e();if(H(l,!1),r||q||!S&amp;&amp;z){const[$,P]=xx({nodeId:S,dragItems:l,nodeLookup:L,dragging:!1});r==null||r(D.sourceEvent,l,$,P),q==null||q(D.sourceEvent,$,P),S||z==null||z(D.sourceEvent,P)}}}).filter(D=&gt;{const L=D.target;return!D.button&amp;&amp;(!b||!$R(L,`.${b}`,T))&amp;&amp;(!_||$R(L,_,T))});m.call(R)}function x(){m==null||m.on(&quot;.drag&quot;,null)}return{update:v,destroy:x}}function eq(n,e,t){const i=[],r={x:n.x-t,y:n.y-t,width:t*2,height:t*2};for(const s of e.values())Bd(r,bh(s))&gt;0&amp;&amp;i.push(s);return i}const tq=250;function nq(n,e,t,i){var l,u;let r=[],s=1/0;const o=eq(n,t,e+tq);for(const h of o){const f=[...((l=h.internals.handleBounds)==null?void 0:l.source)??[],...((u=h.internals.handleBounds)==null?void 0:u.target)??[]];for(const p of f){if(i.nodeId===p.nodeId&amp;&amp;i.type===p.type&amp;&amp;i.id===p.id)continue;const{x:m,y:g}=Hd(h,p,p.position,!0),v=Math.sqrt(Math.pow(m-n.x,2)+Math.pow(g-n.y,2));v&gt;e||(v&lt;s?(r=[{...p,x:m,y:g}],s=v):v===s&amp;&amp;r.push({...p,x:m,y:g}))}}if(!r.length)return null;if(r.length&gt;1){const h=i.type===&quot;source&quot;?&quot;target&quot;:&quot;source&quot;;return r.find(f=&gt;f.type===h)??r[0]}return r[0]}function PP(n,e,t,i,r,s=!1){var h,f,p;const o=i.get(n);if(!o)return null;const l=r===&quot;strict&quot;?(h=o.internals.handleBounds)==null?void 0:h[e]:[...((f=o.internals.handleBounds)==null?void 0:f.source)??[],...((p=o.internals.handleBounds)==null?void 0:p.target)??[]],u=(t?l==null?void 0:l.find(m=&gt;m.id===t):l==null?void 0:l[0])??null;return u&amp;&amp;s?{...u,...Hd(o,u,u.position,!0)}:u}function LP(n,e){return n||(e!=null&amp;&amp;e.classList.contains(&quot;target&quot;)?&quot;target&quot;:e!=null&amp;&amp;e.classList.contains(&quot;source&quot;)?&quot;source&quot;:null)}function iq(n,e){let t=null;return e?t=!0:n&amp;&amp;!e&amp;&amp;(t=!1),t}const UP=()=&gt;!0;function rq(n,{connectionMode:e,connectionRadius:t,handleId:i,nodeId:r,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:h,autoPanOnConnect:f,flowId:p,panBy:m,cancelConnection:g,onConnectStart:v,onConnect:x,onConnectEnd:b,isValidConnection:_=UP,onReconnectEnd:T,updateConnection:w,getTransform:S,getFromHandle:C,autoPanSpeed:O}){const M=EP(n.target);let N=0,R;const{x:D,y:L}=ya(n),H=M==null?void 0:M.elementFromPoint(D,L),q=LP(s,H),z=l==null?void 0:l.getBoundingClientRect();if(!z||!q)return;const $=PP(r,q,i,u,e);if(!$)return;let P=ya(n,z),j=!1,G=null,ee=!1,F=null;function ne(){if(!f||!z)return;const[He,Xe]=vP(P,z,O);m({x:He,y:Xe}),N=requestAnimationFrame(ne)}const le={...$,nodeId:r,type:q,position:$.position},ce=u.get(r),oe={inProgress:!0,isValid:null,from:Hd(ce,le,Mt.Left,!0),fromHandle:le,fromPosition:le.position,fromNode:ce,to:P,toHandle:null,toPosition:FR[le.position],toNode:null};w(oe);let ae=oe;v==null||v(n,{nodeId:r,handleId:i,handleType:q});function ue(He){if(!C()||!le){ve(He);return}const Xe=S();P=ya(He,z),R=nq(sp(P,Xe,!1,[1,1]),t,u,le),j||(ne(),j=!0);const ct=kP(He,{handle:R,connectionMode:e,fromNodeId:r,fromHandleId:i,fromType:o?&quot;target&quot;:&quot;source&quot;,isValidConnection:_,doc:M,lib:h,flowId:p,nodeLookup:u});F=ct.handleDomNode,G=ct.connection,ee=iq(!!R,ct.isValid);const We={...ae,isValid:ee,to:R&amp;&amp;ee?xP({x:R.x,y:R.y},Xe):P,toHandle:ct.toHandle,toPosition:ee&amp;&amp;ct.toHandle?ct.toHandle.position:FR[le.position],toNode:ct.toHandle?u.get(ct.toHandle.nodeId):null};ee&amp;&amp;R&amp;&amp;ae.toHandle&amp;&amp;We.toHandle&amp;&amp;ae.toHandle.type===We.toHandle.type&amp;&amp;ae.toHandle.nodeId===We.toHandle.nodeId&amp;&amp;ae.toHandle.id===We.toHandle.id&amp;&amp;ae.to.x===We.to.x&amp;&amp;ae.to.y===We.to.y||(w(We),ae=We)}function ve(He){(R||F)&amp;&amp;G&amp;&amp;ee&amp;&amp;(x==null||x(G));const{inProgress:Xe,...ct}=ae,We={...ct,toPosition:ae.toHandle?ae.toPosition:null};b==null||b(He,We),s&amp;&amp;(T==null||T(He,We)),g(),cancelAnimationFrame(N),j=!1,ee=!1,G=null,F=null,M.removeEventListener(&quot;mousemove&quot;,ue),M.removeEventListener(&quot;mouseup&quot;,ve),M.removeEventListener(&quot;touchmove&quot;,ue),M.removeEventListener(&quot;touchend&quot;,ve)}M.addEventListener(&quot;mousemove&quot;,ue),M.addEventListener(&quot;mouseup&quot;,ve),M.addEventListener(&quot;touchmove&quot;,ue),M.addEventListener(&quot;touchend&quot;,ve)}function kP(n,{handle:e,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:h=UP,nodeLookup:f}){const p=s===&quot;target&quot;,m=e?o.querySelector(`.${l}-flow__handle[data-id=&quot;${u}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}&quot;]`):null,{x:g,y:v}=ya(n),x=o.elementFromPoint(g,v),b=x!=null&amp;&amp;x.classList.contains(`${l}-flow__handle`)?x:m,_={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const T=LP(void 0,b),w=b.getAttribute(&quot;data-nodeid&quot;),S=b.getAttribute(&quot;data-handleid&quot;),C=b.classList.contains(&quot;connectable&quot;),O=b.classList.contains(&quot;connectableend&quot;);if(!w||!T)return _;const M={source:p?w:i,sourceHandle:p?S:r,target:p?i:w,targetHandle:p?r:S};_.connection=M;const R=C&amp;&amp;O&amp;&amp;(t===_h.Strict?p&amp;&amp;T===&quot;source&quot;||!p&amp;&amp;T===&quot;target&quot;:w!==i||S!==r);_.isValid=R&amp;&amp;h(M),_.toHandle=PP(w,T,S,f,t,!1)}return _}const qS={onPointerDown:rq,isValid:kP};function sq({domNode:n,panZoom:e,getTransform:t,getViewScale:i}){const r=es(n);function s({translateExtent:l,width:u,height:h,zoomStep:f=10,pannable:p=!0,zoomable:m=!0,inversePan:g=!1}){const v=w=&gt;{const S=t();if(w.sourceEvent.type!==&quot;wheel&quot;||!e)return;const C=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*f,O=S[2]*Math.pow(2,C);e.scaleTo(O)};let x=[0,0];const b=w=&gt;{(w.sourceEvent.type===&quot;mousedown&quot;||w.sourceEvent.type===&quot;touchstart&quot;)&amp;&amp;(x=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY])},_=w=&gt;{const S=t();if(w.sourceEvent.type!==&quot;mousemove&quot;&amp;&amp;w.sourceEvent.type!==&quot;touchmove&quot;||!e)return;const C=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY],O=[C[0]-x[0],C[1]-x[1]];x=C;const M=i()*Math.max(S[2],Math.log(S[2]))*(g?-1:1),N={x:S[0]-O[0]*M,y:S[1]-O[1]*M},R=[[0,0],[u,h]];e.setViewportConstrained({x:N.x,y:N.y,zoom:S[2]},R,l)},T=hP().on(&quot;start&quot;,b).on(&quot;zoom&quot;,p?_:null).on(&quot;zoom.wheel&quot;,m?v:null);r.call(T,{})}function o(){r.on(&quot;zoom&quot;,null)}return{update:s,destroy:o,pointer:qs}}const oq=(n,e)=&gt;n.x!==e.x||n.y!==e.y||n.zoom!==e.k,r_=n=&gt;({x:n.x,y:n.y,zoom:n.k}),Sx=({x:n,y:e,zoom:t})=&gt;Qy.translate(n,e).scale(t),Qu=(n,e)=&gt;n.target.closest(`.${e}`),FP=(n,e)=&gt;e===2&amp;&amp;Array.isArray(n)&amp;&amp;n.includes(2),wx=(n,e=0,t=()=&gt;{})=&gt;{const i=typeof e==&quot;number&quot;&amp;&amp;e&gt;0;return i||t(),i?n.transition().duration(e).on(&quot;end&quot;,t):n},zP=n=&gt;{const e=n.ctrlKey&amp;&amp;K0()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*e};function aq({zoomPanValues:n,noWheelClassName:e,d3Selection:t,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:h}){return f=&gt;{if(Qu(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const p=t.property(&quot;__zoom&quot;).k||1;if(f.ctrlKey&amp;&amp;o){const b=qs(f),_=zP(f),T=p*Math.pow(2,_);i.scaleTo(t,T,b,f);return}const m=f.deltaMode===1?20:1;let g=r===Rc.Vertical?0:f.deltaX*m,v=r===Rc.Horizontal?0:f.deltaY*m;!K0()&amp;&amp;f.shiftKey&amp;&amp;r!==Rc.Vertical&amp;&amp;(g=f.deltaY*m,v=0),i.translateBy(t,-(g/p)*s,-(v/p)*s,{internal:!0});const x=r_(t.property(&quot;__zoom&quot;));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,l==null||l(f,x)),n.isPanScrolling&amp;&amp;(u==null||u(f,x),n.panScrollTimeout=setTimeout(()=&gt;{h==null||h(f,x),n.isPanScrolling=!1},150))}}function lq({noWheelClassName:n,preventScrolling:e,d3ZoomHandler:t}){return function(i,r){if(!e&amp;&amp;i.type===&quot;wheel&quot;&amp;&amp;!i.ctrlKey||Qu(i,n))return null;i.preventDefault(),t.call(this,i,r)}}function cq({zoomPanValues:n,onDraggingChange:e,onPanZoomStart:t}){return i=&gt;{var s,o,l;if((s=i.sourceEvent)!=null&amp;&amp;s.internal)return;const r=r_(i.transform);n.mouseButton=((o=i.sourceEvent)==null?void 0:o.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=r,((l=i.sourceEvent)==null?void 0:l.type)===&quot;mousedown&quot;&amp;&amp;e(!0),t&amp;&amp;(t==null||t(i.sourceEvent,r))}}function uq({zoomPanValues:n,panOnDrag:e,onPaneContextMenu:t,onTransformChange:i,onPanZoom:r}){return s=&gt;{var o,l;n.usedRightMouseButton=!!(t&amp;&amp;FP(e,n.mouseButton??0)),(o=s.sourceEvent)!=null&amp;&amp;o.sync||i([s.transform.x,s.transform.y,s.transform.k]),r&amp;&amp;!((l=s.sourceEvent)!=null&amp;&amp;l.internal)&amp;&amp;(r==null||r(s.sourceEvent,r_(s.transform)))}}function hq({zoomPanValues:n,panOnDrag:e,panOnScroll:t,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:s}){return o=&gt;{var l;if(!((l=o.sourceEvent)!=null&amp;&amp;l.internal)&amp;&amp;(n.isZoomingOrPanning=!1,s&amp;&amp;FP(e,n.mouseButton??0)&amp;&amp;!n.usedRightMouseButton&amp;&amp;o.sourceEvent&amp;&amp;s(o.sourceEvent),n.usedRightMouseButton=!1,i(!1),r&amp;&amp;oq(n.prevViewport,o.transform))){const u=r_(o.transform);n.prevViewport=u,clearTimeout(n.timerId),n.timerId=setTimeout(()=&gt;{r==null||r(o.sourceEvent,u)},t?150:0)}}}function fq({zoomActivationKeyPressed:n,zoomOnScroll:e,zoomOnPinch:t,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:h}){return f=&gt;{var v;const p=n||e,m=t&amp;&amp;f.ctrlKey;if(f.button===1&amp;&amp;f.type===&quot;mousedown&quot;&amp;&amp;(Qu(f,`${h}-flow__node`)||Qu(f,`${h}-flow__edge`)))return!0;if(!i&amp;&amp;!p&amp;&amp;!r&amp;&amp;!s&amp;&amp;!t||o||Qu(f,l)&amp;&amp;f.type===&quot;wheel&quot;||Qu(f,u)&amp;&amp;(f.type!==&quot;wheel&quot;||r&amp;&amp;f.type===&quot;wheel&quot;&amp;&amp;!n)||!t&amp;&amp;f.ctrlKey&amp;&amp;f.type===&quot;wheel&quot;)return!1;if(!t&amp;&amp;f.type===&quot;touchstart&quot;&amp;&amp;((v=f.touches)==null?void 0:v.length)&gt;1)return f.preventDefault(),!1;if(!p&amp;&amp;!r&amp;&amp;!m&amp;&amp;f.type===&quot;wheel&quot;||!i&amp;&amp;(f.type===&quot;mousedown&quot;||f.type===&quot;touchstart&quot;)||Array.isArray(i)&amp;&amp;!i.includes(f.button)&amp;&amp;f.type===&quot;mousedown&quot;)return!1;const g=Array.isArray(i)&amp;&amp;i.includes(f.button)||!f.button||f.button&lt;=1;return(!f.ctrlKey||f.type===&quot;wheel&quot;)&amp;&amp;g}}function dq({domNode:n,minZoom:e,maxZoom:t,paneClickDistance:i,translateExtent:r,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:h}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=n.getBoundingClientRect(),m=hP().clickDistance(!Zs(i)||i&lt;0?0:i).scaleExtent([e,t]).translateExtent(r),g=es(n).call(m);w({x:s.x,y:s.y,zoom:vh(s.zoom,e,t)},[[0,0],[p.width,p.height]],r);const v=g.on(&quot;wheel.zoom&quot;),x=g.on(&quot;dblclick.zoom&quot;);m.wheelDelta(zP);function b(H,q){return g?new Promise(z=&gt;{m==null||m.transform(wx(g,q==null?void 0:q.duration,()=&gt;z(!0)),H)}):Promise.resolve(!1)}function _({noWheelClassName:H,noPanClassName:q,onPaneContextMenu:z,userSelectionActive:$,panOnScroll:P,panOnDrag:j,panOnScrollMode:G,panOnScrollSpeed:ee,preventScrolling:F,zoomOnPinch:ne,zoomOnScroll:le,zoomOnDoubleClick:ce,zoomActivationKeyPressed:ie,lib:oe,onTransformChange:ae}){$&amp;&amp;!f.isZoomingOrPanning&amp;&amp;T();const ve=P&amp;&amp;!ie&amp;&amp;!$?aq({zoomPanValues:f,noWheelClassName:H,d3Selection:g,d3Zoom:m,panOnScrollMode:G,panOnScrollSpeed:ee,zoomOnPinch:ne,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):lq({noWheelClassName:H,preventScrolling:F,d3ZoomHandler:v});if(g.on(&quot;wheel.zoom&quot;,ve,{passive:!1}),!$){const Xe=cq({zoomPanValues:f,onDraggingChange:h,onPanZoomStart:l});m.on(&quot;start&quot;,Xe);const ct=uq({zoomPanValues:f,panOnDrag:j,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:ae});m.on(&quot;zoom&quot;,ct);const We=hq({zoomPanValues:f,panOnDrag:j,panOnScroll:P,onPaneContextMenu:z,onPanZoomEnd:u,onDraggingChange:h});m.on(&quot;end&quot;,We)}const He=fq({zoomActivationKeyPressed:ie,panOnDrag:j,zoomOnScroll:le,panOnScroll:P,zoomOnDoubleClick:ce,zoomOnPinch:ne,userSelectionActive:$,noPanClassName:q,noWheelClassName:H,lib:oe});m.filter(He),ce?g.on(&quot;dblclick.zoom&quot;,x):g.on(&quot;dblclick.zoom&quot;,null)}function T(){m.on(&quot;zoom&quot;,null)}async function w(H,q,z){const $=Sx(H),P=m==null?void 0:m.constrain()($,q,z);return P&amp;&amp;await b(P),new Promise(j=&gt;j(P))}async function S(H,q){const z=Sx(H);return await b(z,q),new Promise($=&gt;$(z))}function C(H){if(g){const q=Sx(H),z=g.property(&quot;__zoom&quot;);(z.k!==H.zoom||z.x!==H.x||z.y!==H.y)&amp;&amp;(m==null||m.transform(g,q,null,{sync:!0}))}}function O(){const H=g?uP(g.node()):{x:0,y:0,k:1};return{x:H.x,y:H.y,zoom:H.k}}function M(H,q){return g?new Promise(z=&gt;{m==null||m.scaleTo(wx(g,q==null?void 0:q.duration,()=&gt;z(!0)),H)}):Promise.resolve(!1)}function N(H,q){return g?new Promise(z=&gt;{m==null||m.scaleBy(wx(g,q==null?void 0:q.duration,()=&gt;z(!0)),H)}):Promise.resolve(!1)}function R(H){m==null||m.scaleExtent(H)}function D(H){m==null||m.translateExtent(H)}function L(H){const q=!Zs(H)||H&lt;0?0:H;m==null||m.clickDistance(q)}return{update:_,destroy:T,setViewport:S,setViewportConstrained:w,getViewport:O,scaleTo:M,scaleBy:N,setScaleExtent:R,setTranslateExtent:D,syncViewport:C,setClickDistance:L}}var gd;(function(n){n.Line=&quot;line&quot;,n.Handle=&quot;handle&quot;})(gd||(gd={}));function pq({width:n,prevWidth:e,height:t,prevHeight:i,affectsX:r,affectsY:s}){const o=n-e,l=t-i,u=[o&gt;0?1:o&lt;0?-1:0,l&gt;0?1:l&lt;0?-1:0];return o&amp;&amp;r&amp;&amp;(u[0]=u[0]*-1),l&amp;&amp;s&amp;&amp;(u[1]=u[1]*-1),u}function mq(n){const e=n.includes(&quot;right&quot;)||n.includes(&quot;left&quot;),t=n.includes(&quot;bottom&quot;)||n.includes(&quot;top&quot;),i=n.includes(&quot;left&quot;),r=n.includes(&quot;top&quot;);return{isHorizontal:e,isVertical:t,affectsX:i,affectsY:r}}function nl(n,e){return Math.max(0,e-n)}function il(n,e){return Math.max(0,n-e)}function ug(n,e,t){return Math.max(0,e-n,n-t)}function ZR(n,e){return n?!e:e}function gq(n,e,t,i,r,s,o,l){let{affectsX:u,affectsY:h}=e;const{isHorizontal:f,isVertical:p}=e,m=f&amp;&amp;p,{xSnapped:g,ySnapped:v}=t,{minWidth:x,maxWidth:b,minHeight:_,maxHeight:T}=i,{x:w,y:S,width:C,height:O,aspectRatio:M}=n;let N=Math.floor(f?g-n.pointerX:0),R=Math.floor(p?v-n.pointerY:0);const D=C+(u?-N:N),L=O+(h?-R:R),H=-s[0]*C,q=-s[1]*O;let z=ug(D,x,b),$=ug(L,_,T);if(o){let G=0,ee=0;u&amp;&amp;N&lt;0?G=nl(w+N+H,o[0][0]):!u&amp;&amp;N&gt;0&amp;&amp;(G=il(w+D+H,o[1][0])),h&amp;&amp;R&lt;0?ee=nl(S+R+q,o[0][1]):!h&amp;&amp;R&gt;0&amp;&amp;(ee=il(S+L+q,o[1][1])),z=Math.max(z,G),$=Math.max($,ee)}if(l){let G=0,ee=0;u&amp;&amp;N&gt;0?G=il(w+N,l[0][0]):!u&amp;&amp;N&lt;0&amp;&amp;(G=nl(w+D,l[1][0])),h&amp;&amp;R&gt;0?ee=il(S+R,l[0][1]):!h&amp;&amp;R&lt;0&amp;&amp;(ee=nl(S+L,l[1][1])),z=Math.max(z,G),$=Math.max($,ee)}if(r){if(f){const G=ug(D/M,_,T)*M;if(z=Math.max(z,G),o){let ee=0;!u&amp;&amp;!h||u&amp;&amp;!h&amp;&amp;m?ee=il(S+q+D/M,o[1][1])*M:ee=nl(S+q+(u?N:-N)/M,o[0][1])*M,z=Math.max(z,ee)}if(l){let ee=0;!u&amp;&amp;!h||u&amp;&amp;!h&amp;&amp;m?ee=nl(S+D/M,l[1][1])*M:ee=il(S+(u?N:-N)/M,l[0][1])*M,z=Math.max(z,ee)}}if(p){const G=ug(L*M,x,b)/M;if($=Math.max($,G),o){let ee=0;!u&amp;&amp;!h||h&amp;&amp;!u&amp;&amp;m?ee=il(w+L*M+H,o[1][0])/M:ee=nl(w+(h?R:-R)*M+H,o[0][0])/M,$=Math.max($,ee)}if(l){let ee=0;!u&amp;&amp;!h||h&amp;&amp;!u&amp;&amp;m?ee=nl(w+L*M,l[1][0])/M:ee=il(w+(h?R:-R)*M,l[0][0])/M,$=Math.max($,ee)}}}R=R+(R&lt;0?$:-$),N=N+(N&lt;0?z:-z),r&amp;&amp;(m?D&gt;L*M?R=(ZR(u,h)?-N:N)/M:N=(ZR(u,h)?-R:R)*M:f?(R=N/M,h=u):(N=R*M,u=h));const P=u?w+N:w,j=h?S+R:S;return{width:C+(u?-N:N),height:O+(h?-R:R),x:s[0]*N*(u?-1:1)+P,y:s[1]*R*(h?-1:1)+j}}const BP={width:0,height:0,x:0,y:0},yq={...BP,pointerX:0,pointerY:0,aspectRatio:1};function _q(n){return[[0,0],[n.measured.width,n.measured.height]]}function vq(n,e,t){const i=e.position.x+n.position.x,r=e.position.y+n.position.y,s=n.measured.width??0,o=n.measured.height??0,l=t[0]*s,u=t[1]*o;return[[i-l,r-u],[i+s-l,r+o-u]]}function bq({domNode:n,nodeId:e,getStoreItems:t,onChange:i,onEnd:r}){const s=es(n);function o({controlPosition:u,boundaries:h,keepAspectRatio:f,onResizeStart:p,onResize:m,onResizeEnd:g,shouldResize:v}){let x={...BP},b={...yq};const _=mq(u);let T,w=null,S=[],C,O,M;const N=$I().on(&quot;start&quot;,R=&gt;{const{nodeLookup:D,transform:L,snapGrid:H,snapToGrid:q,nodeOrigin:z,paneDomNode:$}=t();if(T=D.get(e),!T)return;w=($==null?void 0:$.getBoundingClientRect())??null;const{xSnapped:P,ySnapped:j}=md(R.sourceEvent,{transform:L,snapGrid:H,snapToGrid:q,containerBounds:w});x={width:T.measured.width??0,height:T.measured.height??0,x:T.position.x??0,y:T.position.y??0},b={...x,pointerX:P,pointerY:j,aspectRatio:x.width/x.height},C=void 0,T.parentId&amp;&amp;(T.extent===&quot;parent&quot;||T.expandParent)&amp;&amp;(C=D.get(T.parentId),O=C&amp;&amp;T.extent===&quot;parent&quot;?_q(C):void 0),S=[],M=void 0;for(const[G,ee]of D)if(ee.parentId===e&amp;&amp;(S.push({id:G,position:{...ee.position},extent:ee.extent}),ee.extent===&quot;parent&quot;||ee.expandParent)){const F=vq(ee,T,ee.origin??z);M?M=[[Math.min(F[0][0],M[0][0]),Math.min(F[0][1],M[0][1])],[Math.max(F[1][0],M[1][0]),Math.max(F[1][1],M[1][1])]]:M=F}p==null||p(R,{...x})}).on(&quot;drag&quot;,R=&gt;{const{transform:D,snapGrid:L,snapToGrid:H,nodeOrigin:q}=t(),z=md(R.sourceEvent,{transform:D,snapGrid:L,snapToGrid:H,containerBounds:w}),$=[];if(!T)return;const{x:P,y:j,width:G,height:ee}=x,F={},ne=T.origin??q,{width:le,height:ce,x:ie,y:oe}=gq(b,_,z,h,f,ne,O,M),ae=le!==G,ue=ce!==ee,ve=ie!==P&amp;&amp;ae,He=oe!==j&amp;&amp;ue;if(!ve&amp;&amp;!He&amp;&amp;!ae&amp;&amp;!ue)return;if((ve||He||ne[0]===1||ne[1]===1)&amp;&amp;(F.x=ve?ie:x.x,F.y=He?oe:x.y,x.x=F.x,x.y=F.y,S.length&gt;0)){const Ke=ie-P,Q=oe-j;for(const Ve of S)Ve.position={x:Ve.position.x-Ke+ne[0]*(le-G),y:Ve.position.y-Q+ne[1]*(ce-ee)},$.push(Ve)}if((ae||ue)&amp;&amp;(F.width=ae?le:x.width,F.height=ue?ce:x.height,x.width=F.width,x.height=F.height),C&amp;&amp;T.expandParent){const Ke=ne[0]*(F.width??0);F.x&amp;&amp;F.x&lt;Ke&amp;&amp;(x.x=Ke,b.x=b.x-(F.x-Ke));const Q=ne[1]*(F.height??0);F.y&amp;&amp;F.y&lt;Q&amp;&amp;(x.y=Q,b.y=b.y-(F.y-Q))}const Xe=pq({width:x.width,prevWidth:G,height:x.height,prevHeight:ee,affectsX:_.affectsX,affectsY:_.affectsY}),ct={...x,direction:Xe};(v==null?void 0:v(R,ct))!==!1&amp;&amp;(m==null||m(R,ct),i(F,$))}).on(&quot;end&quot;,R=&gt;{g==null||g(R,{...x}),r==null||r()});s.call(N)}function l(){s.on(&quot;.drag&quot;,null)}return{update:o,destroy:l}}var Ex={exports:{}},Tx={},Mx={exports:{}},Ax={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JR;function xq(){if(JR)return Ax;JR=1;var n=zc();function e(p,m){return p===m&amp;&amp;(p!==0||1/p===1/m)||p!==p&amp;&amp;m!==m}var t=typeof Object.is==&quot;function&quot;?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function l(p,m){var g=m(),v=i({inst:{value:g,getSnapshot:m}}),x=v[0].inst,b=v[1];return s(function(){x.value=g,x.getSnapshot=m,u(x)&amp;&amp;b({inst:x})},[p,g,m]),r(function(){return u(x)&amp;&amp;b({inst:x}),p(function(){u(x)&amp;&amp;b({inst:x})})},[p]),o(g),g}function u(p){var m=p.getSnapshot;p=p.value;try{var g=m();return!t(p,g)}catch{return!0}}function h(p,m){return m()}var f=typeof window&gt;&quot;u&quot;||typeof window.document&gt;&quot;u&quot;||typeof window.document.createElement&gt;&quot;u&quot;?h:l;return Ax.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Ax}var QR;function HP(){return QR||(QR=1,Mx.exports=xq()),Mx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eO;function Sq(){if(eO)return Tx;eO=1;var n=zc(),e=HP();function t(h,f){return h===f&amp;&amp;(h!==0||1/h===1/f)||h!==h&amp;&amp;f!==f}var i=typeof Object.is==&quot;function&quot;?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,l=n.useMemo,u=n.useDebugValue;return Tx.useSyncExternalStoreWithSelector=function(h,f,p,m,g){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=l(function(){function _(O){if(!T){if(T=!0,w=O,O=m(O),g!==void 0&amp;&amp;x.hasValue){var M=x.value;if(g(M,O))return S=M}return S=O}if(M=S,i(w,O))return M;var N=m(O);return g!==void 0&amp;&amp;g(M,N)?(w=O,M):(w=O,S=N)}var T=!1,w,S,C=p===void 0?null:p;return[function(){return _(f())},C===null?void 0:function(){return _(C())}]},[f,p,m,g]);var b=r(h,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),u(b),b},Tx}var tO;function wq(){return tO||(tO=1,Ex.exports=Sq()),Ex.exports}var Eq=wq();const Tq=iy(Eq),Mq={},nO=n=&gt;{let e;const t=new Set,i=(f,p)=&gt;{const m=typeof f==&quot;function&quot;?f(e):f;if(!Object.is(m,e)){const g=e;e=p??(typeof m!=&quot;object&quot;||m===null)?m:Object.assign({},e,m),t.forEach(v=&gt;v(e,g))}},r=()=&gt;e,u={setState:i,getState:r,getInitialState:()=&gt;h,subscribe:f=&gt;(t.add(f),()=&gt;t.delete(f)),destroy:()=&gt;{(Mq?&quot;production&quot;:void 0)!==&quot;production&quot;&amp;&amp;console.warn(&quot;[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.&quot;),t.clear()}},h=e=n(i,r,u);return u},Aq=n=&gt;n?nO(n):nO,{useDebugValue:Cq}=_d,{useSyncExternalStoreWithSelector:Rq}=Tq,Oq=n=&gt;n;function VP(n,e=Oq,t){const i=Rq(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return Cq(i),i}const iO=(n,e)=&gt;{const t=Aq(n),i=(r,s=e)=&gt;VP(t,r,s);return Object.assign(i,t),i},Nq=(n,e)=&gt;n?iO(n,e):iO;function mi(n,e){if(Object.is(n,e))return!0;if(typeof n!=&quot;object&quot;||n===null||typeof e!=&quot;object&quot;||e===null)return!1;if(n instanceof Map&amp;&amp;e instanceof Map){if(n.size!==e.size)return!1;for(const[i,r]of n)if(!Object.is(r,e.get(i)))return!1;return!0}if(n instanceof Set&amp;&amp;e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(n[i],e[i]))return!1;return!0}var GP=ry();const s_=re.createContext(null),Dq=s_.Provider,jP=Mo.error001();function vn(n,e){const t=re.useContext(s_);if(t===null)throw new Error(jP);return VP(t,n,e)}function $n(){const n=re.useContext(s_);if(n===null)throw new Error(jP);return re.useMemo(()=&gt;({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const rO={display:&quot;none&quot;},Iq={position:&quot;absolute&quot;,width:1,height:1,margin:-1,border:0,padding:0,overflow:&quot;hidden&quot;,clip:&quot;rect(0px, 0px, 0px, 0px)&quot;,clipPath:&quot;inset(100%)&quot;},WP=&quot;react-flow__node-desc&quot;,XP=&quot;react-flow__edge-desc&quot;,Pq=&quot;react-flow__aria-live&quot;,Lq=n=&gt;n.ariaLiveMessage;function Uq({rfId:n}){const e=vn(Lq);return I.jsx(&quot;div&quot;,{id:`${Pq}-${n}`,&quot;aria-live&quot;:&quot;assertive&quot;,&quot;aria-atomic&quot;:&quot;true&quot;,style:Iq,children:e})}function kq({rfId:n,disableKeyboardA11y:e}){return I.jsxs(I.Fragment,{children:[I.jsxs(&quot;div&quot;,{id:`${WP}-${n}`,style:rO,children:[&quot;Press enter or space to select a node.&quot;,!e&amp;&amp;&quot;You can then use the arrow keys to move the node around.&quot;,&quot; Press delete to remove it and escape to cancel.&quot;,&quot; &quot;]}),I.jsx(&quot;div&quot;,{id:`${XP}-${n}`,style:rO,children:&quot;Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.&quot;}),!e&amp;&amp;I.jsx(Uq,{rfId:n})]})}const Fq=n=&gt;n.userSelectionActive?&quot;none&quot;:&quot;all&quot;,o_=re.forwardRef(({position:n=&quot;top-left&quot;,children:e,className:t,style:i,...r},s)=&gt;{const o=vn(Fq),l=`${n}`.split(&quot;-&quot;);return I.jsx(&quot;div&quot;,{className:Ii([&quot;react-flow__panel&quot;,t,...l]),style:{...i,pointerEvents:o},ref:s,...r,children:e})});o_.displayName=&quot;Panel&quot;;function zq({proOptions:n,position:e=&quot;bottom-right&quot;}){return n!=null&amp;&amp;n.hideAttribution?null:I.jsx(o_,{position:e,className:&quot;react-flow__attribution&quot;,&quot;data-message&quot;:&quot;Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev&quot;,children:I.jsx(&quot;a&quot;,{href:&quot;https://reactflow.dev&quot;,target:&quot;_blank&quot;,rel:&quot;noopener noreferrer&quot;,&quot;aria-label&quot;:&quot;React Flow attribution&quot;,children:&quot;React Flow&quot;})})}const Bq=n=&gt;{const e=[],t=[];for(const[,i]of n.nodeLookup)i.selected&amp;&amp;e.push(i.internals.userNode);for(const[,i]of n.edgeLookup)i.selected&amp;&amp;t.push(i);return{selectedNodes:e,selectedEdges:t}},hg=n=&gt;n.id;function Hq(n,e){return mi(n.selectedNodes.map(hg),e.selectedNodes.map(hg))&amp;&amp;mi(n.selectedEdges.map(hg),e.selectedEdges.map(hg))}function Vq({onSelectionChange:n}){const e=$n(),{selectedNodes:t,selectedEdges:i}=vn(Bq,Hq);return re.useEffect(()=&gt;{const r={nodes:t,edges:i};n==null||n(r),e.getState().onSelectionChangeHandlers.forEach(s=&gt;s(r))},[t,i,n]),null}const Gq=n=&gt;!!n.onSelectionChangeHandlers;function jq({onSelectionChange:n}){const e=vn(Gq);return n||e?I.jsx(Vq,{onSelectionChange:n}):null}const qP=[0,0],Wq={x:0,y:0,zoom:1},Xq=[&quot;nodes&quot;,&quot;edges&quot;,&quot;defaultNodes&quot;,&quot;defaultEdges&quot;,&quot;onConnect&quot;,&quot;onConnectStart&quot;,&quot;onConnectEnd&quot;,&quot;onClickConnectStart&quot;,&quot;onClickConnectEnd&quot;,&quot;nodesDraggable&quot;,&quot;nodesConnectable&quot;,&quot;nodesFocusable&quot;,&quot;edgesFocusable&quot;,&quot;edgesReconnectable&quot;,&quot;elevateNodesOnSelect&quot;,&quot;elevateEdgesOnSelect&quot;,&quot;minZoom&quot;,&quot;maxZoom&quot;,&quot;nodeExtent&quot;,&quot;onNodesChange&quot;,&quot;onEdgesChange&quot;,&quot;elementsSelectable&quot;,&quot;connectionMode&quot;,&quot;snapGrid&quot;,&quot;snapToGrid&quot;,&quot;translateExtent&quot;,&quot;connectOnClick&quot;,&quot;defaultEdgeOptions&quot;,&quot;fitView&quot;,&quot;fitViewOptions&quot;,&quot;onNodesDelete&quot;,&quot;onEdgesDelete&quot;,&quot;onDelete&quot;,&quot;onNodeDrag&quot;,&quot;onNodeDragStart&quot;,&quot;onNodeDragStop&quot;,&quot;onSelectionDrag&quot;,&quot;onSelectionDragStart&quot;,&quot;onSelectionDragStop&quot;,&quot;onMoveStart&quot;,&quot;onMove&quot;,&quot;onMoveEnd&quot;,&quot;noPanClassName&quot;,&quot;nodeOrigin&quot;,&quot;autoPanOnConnect&quot;,&quot;autoPanOnNodeDrag&quot;,&quot;onError&quot;,&quot;connectionRadius&quot;,&quot;isValidConnection&quot;,&quot;selectNodesOnDrag&quot;,&quot;nodeDragThreshold&quot;,&quot;onBeforeDelete&quot;,&quot;debug&quot;,&quot;autoPanSpeed&quot;,&quot;paneClickDistance&quot;],sO=[...Xq,&quot;rfId&quot;],qq=n=&gt;({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),oO={translateExtent:Fd,nodeOrigin:qP,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:&quot;nopan&quot;,rfId:&quot;1&quot;,paneClickDistance:0};function Yq(n){const{setNodes:e,setEdges:t,setMinZoom:i,setMaxZoom:r,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:h}=vn(qq,mi),f=$n();re.useEffect(()=&gt;(u(n.defaultNodes,n.defaultEdges),()=&gt;{p.current=oO,l()}),[]);const p=re.useRef(oO);return re.useEffect(()=&gt;{for(const m of sO){const g=n[m],v=p.current[m];g!==v&amp;&amp;(typeof n[m]&gt;&quot;u&quot;||(m===&quot;nodes&quot;?e(g):m===&quot;edges&quot;?t(g):m===&quot;minZoom&quot;?i(g):m===&quot;maxZoom&quot;?r(g):m===&quot;translateExtent&quot;?s(g):m===&quot;nodeExtent&quot;?o(g):m===&quot;paneClickDistance&quot;?h(g):m===&quot;fitView&quot;?f.setState({fitViewOnInit:g}):m===&quot;fitViewOptions&quot;?f.setState({fitViewOnInitOptions:g}):f.setState({[m]:g})))}p.current=n},sO.map(m=&gt;n[m])),null}function aO(){return typeof window&gt;&quot;u&quot;||!window.matchMedia?null:window.matchMedia(&quot;(prefers-color-scheme: dark)&quot;)}function Kq(n){var i;const[e,t]=re.useState(n===&quot;system&quot;?null:n);return re.useEffect(()=&gt;{if(n!==&quot;system&quot;){t(n);return}const r=aO(),s=()=&gt;t(r!=null&amp;&amp;r.matches?&quot;dark&quot;:&quot;light&quot;);return s(),r==null||r.addEventListener(&quot;change&quot;,s),()=&gt;{r==null||r.removeEventListener(&quot;change&quot;,s)}},[n]),e!==null?e:(i=aO())!=null&amp;&amp;i.matches?&quot;dark&quot;:&quot;light&quot;}const lO=typeof document&lt;&quot;u&quot;?document:null;function Vd(n=null,e={target:lO,actInsideInputWithModifier:!0}){const[t,i]=re.useState(!1),r=re.useRef(!1),s=re.useRef(new Set([])),[o,l]=re.useMemo(()=&gt;{if(n!==null){const h=(Array.isArray(n)?n:[n]).filter(p=&gt;typeof p==&quot;string&quot;).map(p=&gt;p.replace(&quot;+&quot;,`
`).replace(`

`,`
+`).split(`
`)),f=h.reduce((p,m)=&gt;p.concat(...m),[]);return[h,f]}return[[],[]]},[n]);return re.useEffect(()=&gt;{const u=(e==null?void 0:e.target)||lO;if(n!==null){const h=m=&gt;{if(r.current=m.ctrlKey||m.metaKey||m.shiftKey,(!r.current||r.current&amp;&amp;!e.actInsideInputWithModifier)&amp;&amp;GS(m))return!1;const v=uO(m.code,l);s.current.add(m[v]),cO(o,s.current,!1)&amp;&amp;(m.preventDefault(),i(!0))},f=m=&gt;{if((!r.current||r.current&amp;&amp;!e.actInsideInputWithModifier)&amp;&amp;GS(m))return!1;const v=uO(m.code,l);cO(o,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(m[v]),m.key===&quot;Meta&quot;&amp;&amp;s.current.clear(),r.current=!1},p=()=&gt;{s.current.clear(),i(!1)};return u==null||u.addEventListener(&quot;keydown&quot;,h),u==null||u.addEventListener(&quot;keyup&quot;,f),window.addEventListener(&quot;blur&quot;,p),window.addEventListener(&quot;contextmenu&quot;,p),()=&gt;{u==null||u.removeEventListener(&quot;keydown&quot;,h),u==null||u.removeEventListener(&quot;keyup&quot;,f),window.removeEventListener(&quot;blur&quot;,p),window.removeEventListener(&quot;contextmenu&quot;,p)}}},[n,i]),t}function cO(n,e,t){return n.filter(i=&gt;t||i.length===e.size).some(i=&gt;i.every(r=&gt;e.has(r)))}function uO(n,e){return e.includes(n)?&quot;code&quot;:&quot;key&quot;}const $q=()=&gt;{const n=$n();return re.useMemo(()=&gt;({zoomIn:e=&gt;{const{panZoom:t}=n.getState();return t?t.scaleBy(1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomOut:e=&gt;{const{panZoom:t}=n.getState();return t?t.scaleBy(1/1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomTo:(e,t)=&gt;{const{panZoom:i}=n.getState();return i?i.scaleTo(e,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},getZoom:()=&gt;n.getState().transform[2],setViewport:async(e,t)=&gt;{const{transform:[i,r,s],panZoom:o}=n.getState();return o?(await o.setViewport({x:e.x??i,y:e.y??r,zoom:e.zoom??s},{duration:t==null?void 0:t.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=&gt;{const[e,t,i]=n.getState().transform;return{x:e,y:t,zoom:i}},fitView:e=&gt;{const{nodeLookup:t,minZoom:i,maxZoom:r,panZoom:s,domNode:o}=n.getState();if(!s||!o)return Promise.resolve(!1);const l=BS(t,e),{width:u,height:h}=i_(o);return HS({nodes:l,width:u,height:h,minZoom:i,maxZoom:r,panZoom:s},e)},setCenter:async(e,t,i)=&gt;{const{width:r,height:s,maxZoom:o,panZoom:l}=n.getState(),u=typeof(i==null?void 0:i.zoom)&lt;&quot;u&quot;?i.zoom:o,h=r/2-e*u,f=s/2-t*u;return l?(await l.setViewport({x:h,y:f,zoom:u},{duration:i==null?void 0:i.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,t)=&gt;{const{width:i,height:r,minZoom:s,maxZoom:o,panZoom:l}=n.getState(),u=t1(e,i,r,s,o,(t==null?void 0:t.padding)??.1);return l?(await l.setViewport(u,{duration:t==null?void 0:t.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,t={})=&gt;{const{transform:i,snapGrid:r,snapToGrid:s,domNode:o}=n.getState();if(!o)return e;const{x:l,y:u}=o.getBoundingClientRect(),h={x:e.x-l,y:e.y-u},f=t.snapGrid??r,p=t.snapToGrid??s;return sp(h,i,p,f)},flowToScreenPosition:e=&gt;{const{transform:t,domNode:i}=n.getState();if(!i)return e;const{x:r,y:s}=i.getBoundingClientRect(),o=xP(e,t);return{x:o.x+r,y:o.y+s}}}),[])};function YP(n,e){const t=[],i=new Map,r=[];for(const s of n)if(s.type===&quot;add&quot;){r.push(s);continue}else if(s.type===&quot;remove&quot;||s.type===&quot;replace&quot;)i.set(s.id,[s]);else{const o=i.get(s.id);o?o.push(s):i.set(s.id,[s])}for(const s of e){const o=i.get(s.id);if(!o){t.push(s);continue}if(o[0].type===&quot;remove&quot;)continue;if(o[0].type===&quot;replace&quot;){t.push({...o[0].item});continue}const l={...s};for(const u of o)Zq(u,l);t.push(l)}return r.length&amp;&amp;r.forEach(s=&gt;{s.index!==void 0?t.splice(s.index,0,{...s.item}):t.push({...s.item})}),t}function Zq(n,e){switch(n.type){case&quot;select&quot;:{e.selected=n.selected;break}case&quot;position&quot;:{typeof n.position&lt;&quot;u&quot;&amp;&amp;(e.position=n.position),typeof n.dragging&lt;&quot;u&quot;&amp;&amp;(e.dragging=n.dragging);break}case&quot;dimensions&quot;:{typeof n.dimensions&lt;&quot;u&quot;&amp;&amp;(e.measured??(e.measured={}),e.measured.width=n.dimensions.width,e.measured.height=n.dimensions.height,n.setAttributes&amp;&amp;(e.width=n.dimensions.width,e.height=n.dimensions.height)),typeof n.resizing==&quot;boolean&quot;&amp;&amp;(e.resizing=n.resizing);break}}}function KP(n,e){return YP(n,e)}function $P(n,e){return YP(n,e)}function pc(n,e){return{id:n,type:&quot;select&quot;,selected:e}}function eh(n,e=new Set,t=!1){const i=[];for(const[r,s]of n){const o=e.has(r);!(s.selected===void 0&amp;&amp;!o)&amp;&amp;s.selected!==o&amp;&amp;(t&amp;&amp;(s.selected=o),i.push(pc(s.id,o)))}return i}function hO({items:n=[],lookup:e}){var r;const t=[],i=new Map(n.map(s=&gt;[s.id,s]));for(const[s,o]of n.entries()){const l=e.get(o.id),u=((r=l==null?void 0:l.internals)==null?void 0:r.userNode)??l;u!==void 0&amp;&amp;u!==o&amp;&amp;t.push({id:o.id,item:o,type:&quot;replace&quot;}),u===void 0&amp;&amp;t.push({item:o,type:&quot;add&quot;,index:s})}for(const[s]of e)i.get(s)===void 0&amp;&amp;t.push({id:s,type:&quot;remove&quot;});return t}function fO(n){return{id:n.id,type:&quot;remove&quot;}}const dO=n=&gt;NX(n),Jq=n=&gt;mP(n);function ZP(n){return re.forwardRef(n)}const Qq=typeof window&lt;&quot;u&quot;?re.useLayoutEffect:re.useEffect;function pO(n){const[e,t]=re.useState(BigInt(0)),[i]=re.useState(()=&gt;eY(()=&gt;t(r=&gt;r+BigInt(1))));return Qq(()=&gt;{const r=i.get();r.length&amp;&amp;(n(r),i.reset())},[e]),i}function eY(n){let e=[];return{get:()=&gt;e,reset:()=&gt;{e=[]},push:t=&gt;{e.push(t),n()}}}const JP=re.createContext(null);function tY({children:n}){const e=$n(),t=re.useCallback(l=&gt;{const{nodes:u=[],setNodes:h,hasDefaultNodes:f,onNodesChange:p,nodeLookup:m}=e.getState();let g=u;for(const v of l)g=typeof v==&quot;function&quot;?v(g):v;f?h(g):p&amp;&amp;p(hO({items:g,lookup:m}))},[]),i=pO(t),r=re.useCallback(l=&gt;{const{edges:u=[],setEdges:h,hasDefaultEdges:f,onEdgesChange:p,edgeLookup:m}=e.getState();let g=u;for(const v of l)g=typeof v==&quot;function&quot;?v(g):v;f?h(g):p&amp;&amp;p(hO({items:g,lookup:m}))},[]),s=pO(r),o=re.useMemo(()=&gt;({nodeQueue:i,edgeQueue:s}),[]);return I.jsx(JP.Provider,{value:o,children:n})}function nY(){const n=re.useContext(JP);if(!n)throw new Error(&quot;useBatchContext must be used within a BatchProvider&quot;);return n}const iY=n=&gt;!!n.panZoom;function o1(){const n=$q(),e=$n(),t=nY(),i=vn(iY),r=re.useMemo(()=&gt;{const s=p=&gt;e.getState().nodeLookup.get(p),o=p=&gt;{t.nodeQueue.push(p)},l=p=&gt;{t.edgeQueue.push(p)},u=p=&gt;{var _,T;const{nodeLookup:m,nodeOrigin:g}=e.getState(),v=dO(p)?p:m.get(p.id),x=v.parentId?wP(v.position,v.measured,v.parentId,m,g):v.position,b={...v,position:x,width:((_=v.measured)==null?void 0:_.width)??v.width,height:((T=v.measured)==null?void 0:T.height)??v.height};return bh(b)},h=(p,m,g={replace:!1})=&gt;{o(v=&gt;v.map(x=&gt;{if(x.id===p){const b=typeof m==&quot;function&quot;?m(x):m;return g.replace&amp;&amp;dO(b)?b:{...x,...b}}return x}))},f=(p,m,g={replace:!1})=&gt;{l(v=&gt;v.map(x=&gt;{if(x.id===p){const b=typeof m==&quot;function&quot;?m(x):m;return g.replace&amp;&amp;Jq(b)?b:{...x,...b}}return x}))};return{getNodes:()=&gt;e.getState().nodes.map(p=&gt;({...p})),getNode:p=&gt;{var m;return(m=s(p))==null?void 0:m.internals.userNode},getInternalNode:s,getEdges:()=&gt;{const{edges:p=[]}=e.getState();return p.map(m=&gt;({...m}))},getEdge:p=&gt;e.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=&gt;{const m=Array.isArray(p)?p:[p];t.nodeQueue.push(g=&gt;[...g,...m])},addEdges:p=&gt;{const m=Array.isArray(p)?p:[p];t.edgeQueue.push(g=&gt;[...g,...m])},toObject:()=&gt;{const{nodes:p=[],edges:m=[],transform:g}=e.getState(),[v,x,b]=g;return{nodes:p.map(_=&gt;({..._})),edges:m.map(_=&gt;({..._})),viewport:{x:v,y:x,zoom:b}}},deleteElements:async({nodes:p=[],edges:m=[]})=&gt;{const{nodes:g,edges:v,onNodesDelete:x,onEdgesDelete:b,triggerNodeChanges:_,triggerEdgeChanges:T,onDelete:w,onBeforeDelete:S}=e.getState(),{nodes:C,edges:O}=await PX({nodesToRemove:p,edgesToRemove:m,nodes:g,edges:v,onBeforeDelete:S}),M=O.length&gt;0,N=C.length&gt;0;if(M){const R=O.map(fO);b==null||b(O),T(R)}if(N){const R=C.map(fO);x==null||x(C),_(R)}return(N||M)&amp;&amp;(w==null||w({nodes:C,edges:O})),{deletedNodes:C,deletedEdges:O}},getIntersectingNodes:(p,m=!0,g)=&gt;{const v=BR(p),x=v?p:u(p),b=g!==void 0;return x?(g||e.getState().nodes).filter(_=&gt;{const T=e.getState().nodeLookup.get(_.id);if(T&amp;&amp;!v&amp;&amp;(_.id===p.id||!T.internals.positionAbsolute))return!1;const w=bh(b?_:T),S=Bd(w,x);return m&amp;&amp;S&gt;0||S&gt;=x.width*x.height}):[]},isNodeIntersecting:(p,m,g=!0)=&gt;{const x=BR(p)?p:u(p);if(!x)return!1;const b=Bd(x,m);return g&amp;&amp;b&gt;0||b&gt;=x.width*x.height},updateNode:h,updateNodeData:(p,m,g={replace:!1})=&gt;{h(p,v=&gt;{const x=typeof m==&quot;function&quot;?m(v):m;return g.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},g)},updateEdge:f,updateEdgeData:(p,m,g={replace:!1})=&gt;{f(p,v=&gt;{const x=typeof m==&quot;function&quot;?m(v):m;return g.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},g)},getNodesBounds:p=&gt;{const{nodeLookup:m,nodeOrigin:g}=e.getState();return DX(p,{nodeLookup:m,nodeOrigin:g})},getHandleConnections:({type:p,id:m,nodeId:g})=&gt;{var v;return Array.from(((v=e.getState().connectionLookup.get(`${g}-${p}${m?`-${m}`:&quot;&quot;}`))==null?void 0:v.values())??[])},getNodeConnections:({type:p,handleId:m,nodeId:g})=&gt;{var v;return Array.from(((v=e.getState().connectionLookup.get(`${g}${p?m?`-${p}-${m}`:`-${p}`:&quot;&quot;}`))==null?void 0:v.values())??[])}}},[]);return re.useMemo(()=&gt;({...r,...n,viewportInitialized:i}),[i])}const mO=n=&gt;n.selected,rY={actInsideInputWithModifier:!1},sY=typeof window&lt;&quot;u&quot;?window:void 0;function oY({deleteKeyCode:n,multiSelectionKeyCode:e}){const t=$n(),{deleteElements:i}=o1(),r=Vd(n,rY),s=Vd(e,{target:sY});re.useEffect(()=&gt;{if(r){const{edges:o,nodes:l}=t.getState();i({nodes:l.filter(mO),edges:o.filter(mO)}),t.setState({nodesSelectionActive:!1})}},[r]),re.useEffect(()=&gt;{t.setState({multiSelectionActive:s})},[s])}function aY(n){const e=$n();re.useEffect(()=&gt;{const t=()=&gt;{var r,s;if(!n.current)return!1;const i=i_(n.current);(i.height===0||i.width===0)&amp;&amp;((s=(r=e.getState()).onError)==null||s.call(r,&quot;004&quot;,Mo.error004())),e.setState({width:i.width||500,height:i.height||500})};if(n.current){t(),window.addEventListener(&quot;resize&quot;,t);const i=new ResizeObserver(()=&gt;t());return i.observe(n.current),()=&gt;{window.removeEventListener(&quot;resize&quot;,t),i&amp;&amp;n.current&amp;&amp;i.unobserve(n.current)}}},[])}const a_={position:&quot;absolute&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,top:0,left:0},lY=n=&gt;({userSelectionActive:n.userSelectionActive,lib:n.lib});function cY({onPaneContextMenu:n,zoomOnScroll:e=!0,zoomOnPinch:t=!0,panOnScroll:i=!1,panOnScrollSpeed:r=.5,panOnScrollMode:s=Rc.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:h,minZoom:f,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:g=!0,children:v,noWheelClassName:x,noPanClassName:b,onViewportChange:_,isControlledViewport:T,paneClickDistance:w}){const S=$n(),C=re.useRef(null),{userSelectionActive:O,lib:M}=vn(lY,mi),N=Vd(m),R=re.useRef();aY(C);const D=re.useCallback(L=&gt;{_==null||_({x:L[0],y:L[1],zoom:L[2]}),T||S.setState({transform:L})},[_,T]);return re.useEffect(()=&gt;{if(C.current){R.current=dq({domNode:C.current,minZoom:f,maxZoom:p,translateExtent:h,viewport:u,paneClickDistance:w,onDraggingChange:z=&gt;S.setState({paneDragging:z}),onPanZoomStart:(z,$)=&gt;{const{onViewportChangeStart:P,onMoveStart:j}=S.getState();j==null||j(z,$),P==null||P($)},onPanZoom:(z,$)=&gt;{const{onViewportChange:P,onMove:j}=S.getState();j==null||j(z,$),P==null||P($)},onPanZoomEnd:(z,$)=&gt;{const{onViewportChangeEnd:P,onMoveEnd:j}=S.getState();j==null||j(z,$),P==null||P($)}});const{x:L,y:H,zoom:q}=R.current.getViewport();return S.setState({panZoom:R.current,transform:[L,H,q],domNode:C.current.closest(&quot;.react-flow&quot;)}),()=&gt;{var z;(z=R.current)==null||z.destroy()}}},[]),re.useEffect(()=&gt;{var L;(L=R.current)==null||L.update({onPaneContextMenu:n,zoomOnScroll:e,zoomOnPinch:t,panOnScroll:i,panOnScrollSpeed:r,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:N,preventScrolling:g,noPanClassName:b,userSelectionActive:O,noWheelClassName:x,lib:M,onTransformChange:D})},[n,e,t,i,r,s,o,l,N,g,b,O,x,M,D]),I.jsx(&quot;div&quot;,{className:&quot;react-flow__renderer&quot;,ref:C,style:a_,children:v})}const uY=n=&gt;({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function hY(){const{userSelectionActive:n,userSelectionRect:e}=vn(uY,mi);return n&amp;&amp;e?I.jsx(&quot;div&quot;,{className:&quot;react-flow__selection react-flow__container&quot;,style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const Cx=(n,e)=&gt;t=&gt;{t.target===e.current&amp;&amp;(n==null||n(t))},fY=n=&gt;({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,dragging:n.paneDragging});function dY({isSelecting:n,selectionKeyPressed:e,selectionMode:t=zd.Full,panOnDrag:i,selectionOnDrag:r,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:h,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:m,children:g}){const v=$n(),{userSelectionActive:x,elementsSelectable:b,dragging:_}=vn(fY,mi),T=b&amp;&amp;(n||x),w=re.useRef(null),S=re.useRef(),C=re.useRef(new Set),O=re.useRef(new Set),M=re.useRef(!1),N=re.useRef(!1),R=P=&gt;{if(M.current){M.current=!1;return}l==null||l(P),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},D=P=&gt;{if(Array.isArray(i)&amp;&amp;(i!=null&amp;&amp;i.includes(2))){P.preventDefault();return}u==null||u(P)},L=h?P=&gt;h(P):void 0,H=P=&gt;{var ne,le;const{resetSelectedElements:j,domNode:G}=v.getState();if(S.current=G==null?void 0:G.getBoundingClientRect(),!b||!n||P.button!==0||P.target!==w.current||!S.current)return;(le=(ne=P.target)==null?void 0:ne.setPointerCapture)==null||le.call(ne,P.pointerId),N.current=!0,M.current=!1;const{x:ee,y:F}=ya(P.nativeEvent,S.current);j(),v.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:F,x:ee,y:F}}),s==null||s(P)},q=P=&gt;{const{userSelectionRect:j,transform:G,nodeLookup:ee,edgeLookup:F,connectionLookup:ne,triggerNodeChanges:le,triggerEdgeChanges:ce,defaultEdgeOptions:ie}=v.getState();if(!S.current||!j)return;M.current=!0;const{x:oe,y:ae}=ya(P.nativeEvent,S.current),{startX:ue,startY:ve}=j,He={startX:ue,startY:ve,x:oe&lt;ue?oe:ue,y:ae&lt;ve?ae:ve,width:Math.abs(oe-ue),height:Math.abs(ae-ve)},Xe=C.current,ct=O.current;C.current=new Set(gP(ee,He,G,t===zd.Partial,!0).map(Ke=&gt;Ke.id)),O.current=new Set;const We=(ie==null?void 0:ie.selectable)??!0;for(const Ke of C.current){const Q=ne.get(Ke);if(Q)for(const{edgeId:Ve}of Q.values()){const Le=F.get(Ve);Le&amp;&amp;(Le.selectable??We)&amp;&amp;O.current.add(Ve)}}if(!HR(Xe,C.current)){const Ke=eh(ee,C.current,!0);le(Ke)}if(!HR(ct,O.current)){const Ke=eh(F,O.current);ce(Ke)}v.setState({userSelectionRect:He,userSelectionActive:!0,nodesSelectionActive:!1})},z=P=&gt;{var G,ee;if(P.button!==0||!N.current)return;(ee=(G=P.target)==null?void 0:G.releasePointerCapture)==null||ee.call(G,P.pointerId);const{userSelectionRect:j}=v.getState();!x&amp;&amp;j&amp;&amp;P.target===w.current&amp;&amp;(R==null||R(P)),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:C.current.size&gt;0}),o==null||o(P),(e||r)&amp;&amp;(M.current=!1),N.current=!1},$=i===!0||Array.isArray(i)&amp;&amp;i.includes(0);return I.jsxs(&quot;div&quot;,{className:Ii([&quot;react-flow__pane&quot;,{draggable:$,dragging:_,selection:n}]),onClick:T?void 0:Cx(R,w),onContextMenu:Cx(D,w),onWheel:Cx(L,w),onPointerEnter:T?void 0:f,onPointerDown:T?H:p,onPointerMove:T?q:p,onPointerUp:T?z:void 0,onPointerLeave:m,ref:w,style:a_,children:[g,I.jsx(hY,{})]})}function YS({id:n,store:e,unselect:t=!1,nodeRef:i}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),h=l.get(n);if(!h){u==null||u(&quot;012&quot;,Mo.error012(n));return}e.setState({nodesSelectionActive:!1}),h.selected?(t||h.selected&amp;&amp;o)&amp;&amp;(s({nodes:[h],edges:[]}),requestAnimationFrame(()=&gt;{var f;return(f=i==null?void 0:i.current)==null?void 0:f.blur()})):r([n])}function QP({nodeRef:n,disabled:e=!1,noDragClassName:t,handleSelector:i,nodeId:r,isSelectable:s,nodeClickDistance:o}){const l=$n(),[u,h]=re.useState(!1),f=re.useRef();return re.useEffect(()=&gt;{f.current=QX({getStoreItems:()=&gt;l.getState(),onNodeMouseDown:p=&gt;{YS({id:p,store:l,nodeRef:n})},onDragStart:()=&gt;{h(!0)},onDragStop:()=&gt;{h(!1)}})},[]),re.useEffect(()=&gt;{var p,m;if(e)(p=f.current)==null||p.destroy();else if(n.current)return(m=f.current)==null||m.update({noDragClassName:t,handleSelector:i,domNode:n.current,isSelectable:s,nodeId:r,nodeClickDistance:o}),()=&gt;{var g;(g=f.current)==null||g.destroy()}},[t,i,e,s,n,r]),u}const pY=n=&gt;e=&gt;e.selected&amp;&amp;(e.draggable||n&amp;&amp;typeof e.draggable&gt;&quot;u&quot;);function eL(){const n=$n();return re.useCallback(t=&gt;{const{nodeExtent:i,snapToGrid:r,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:h,nodeOrigin:f}=n.getState(),p=new Map,m=pY(o),g=r?s[0]:5,v=r?s[1]:5,x=t.direction.x*g*t.factor,b=t.direction.y*v*t.factor;for(const[,_]of h){if(!m(_))continue;let T={x:_.internals.positionAbsolute.x+x,y:_.internals.positionAbsolute.y+b};r&amp;&amp;(T=n_(T,s));const{position:w,positionAbsolute:S}=yP({nodeId:_.id,nextPosition:T,nodeLookup:h,nodeExtent:i,nodeOrigin:f,onError:l});_.position=w,_.internals.positionAbsolute=S,p.set(_.id,_)}u(p)},[])}const a1=re.createContext(null),mY=a1.Provider;a1.Consumer;const tL=()=&gt;re.useContext(a1),gY=n=&gt;({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),yY=(n,e,t)=&gt;i=&gt;{const{connectionClickStartHandle:r,connectionMode:s,connection:o}=i,{fromHandle:l,toHandle:u,isValid:h}=o,f=(u==null?void 0:u.nodeId)===n&amp;&amp;(u==null?void 0:u.id)===e&amp;&amp;(u==null?void 0:u.type)===t;return{connectingFrom:(l==null?void 0:l.nodeId)===n&amp;&amp;(l==null?void 0:l.id)===e&amp;&amp;(l==null?void 0:l.type)===t,connectingTo:f,clickConnecting:(r==null?void 0:r.nodeId)===n&amp;&amp;(r==null?void 0:r.id)===e&amp;&amp;(r==null?void 0:r.type)===t,isPossibleEndHandle:s===_h.Strict?(l==null?void 0:l.type)!==t:n!==(l==null?void 0:l.nodeId)||e!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!r,valid:f&amp;&amp;h}};function _Y({type:n=&quot;source&quot;,position:e=Mt.Top,isValidConnection:t,isConnectable:i=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:h,onMouseDown:f,onTouchStart:p,...m},g){var $,P;const v=o||null,x=n===&quot;target&quot;,b=$n(),_=tL(),{connectOnClick:T,noPanClassName:w,rfId:S}=vn(gY,mi),{connectingFrom:C,connectingTo:O,clickConnecting:M,isPossibleEndHandle:N,connectionInProcess:R,clickConnectionInProcess:D,valid:L}=vn(yY(_,v,n),mi);_||(P=($=b.getState()).onError)==null||P.call($,&quot;010&quot;,Mo.error010());const H=j=&gt;{const{defaultEdgeOptions:G,onConnect:ee,hasDefaultEdges:F}=b.getState(),ne={...G,...j};if(F){const{edges:le,setEdges:ce}=b.getState();ce(RP(ne,le))}ee==null||ee(ne),l==null||l(ne)},q=j=&gt;{if(!_)return;const G=TP(j.nativeEvent);if(r&amp;&amp;(G&amp;&amp;j.button===0||!G)){const ee=b.getState();qS.onPointerDown(j.nativeEvent,{autoPanOnConnect:ee.autoPanOnConnect,connectionMode:ee.connectionMode,connectionRadius:ee.connectionRadius,domNode:ee.domNode,nodeLookup:ee.nodeLookup,lib:ee.lib,isTarget:x,handleId:v,nodeId:_,flowId:ee.rfId,panBy:ee.panBy,cancelConnection:ee.cancelConnection,onConnectStart:ee.onConnectStart,onConnectEnd:ee.onConnectEnd,updateConnection:ee.updateConnection,onConnect:H,isValidConnection:t||ee.isValidConnection,getTransform:()=&gt;b.getState().transform,getFromHandle:()=&gt;b.getState().connection.fromHandle,autoPanSpeed:ee.autoPanSpeed})}G?f==null||f(j):p==null||p(j)},z=j=&gt;{const{onClickConnectStart:G,onClickConnectEnd:ee,connectionClickStartHandle:F,connectionMode:ne,isValidConnection:le,lib:ce,rfId:ie,nodeLookup:oe,connection:ae}=b.getState();if(!_||!F&amp;&amp;!r)return;if(!F){G==null||G(j.nativeEvent,{nodeId:_,handleId:v,handleType:n}),b.setState({connectionClickStartHandle:{nodeId:_,type:n,id:v}});return}const ue=EP(j.target),ve=t||le,{connection:He,isValid:Xe}=qS.isValid(j.nativeEvent,{handle:{nodeId:_,id:v,type:n},connectionMode:ne,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:ve,flowId:ie,doc:ue,lib:ce,nodeLookup:oe});Xe&amp;&amp;He&amp;&amp;H(He);const ct=structuredClone(ae);delete ct.inProgress,ct.toPosition=ct.toHandle?ct.toHandle.position:null,ee==null||ee(j,ct),b.setState({connectionClickStartHandle:null})};return I.jsx(&quot;div&quot;,{&quot;data-handleid&quot;:v,&quot;data-nodeid&quot;:_,&quot;data-handlepos&quot;:e,&quot;data-id&quot;:`${S}-${_}-${v}-${n}`,className:Ii([&quot;react-flow__handle&quot;,`react-flow__handle-${e}`,&quot;nodrag&quot;,w,h,{source:!x,target:x,connectable:i,connectablestart:r,connectableend:s,clickconnecting:M,connectingfrom:C,connectingto:O,valid:L,connectionindicator:i&amp;&amp;(!R||N)&amp;&amp;(R||D?s:r)}]),onMouseDown:q,onTouchStart:q,onClick:T?z:void 0,ref:g,...m,children:u})}const Ml=re.memo(ZP(_Y));function vY({data:n,isConnectable:e,sourcePosition:t=Mt.Bottom}){return I.jsxs(I.Fragment,{children:[n==null?void 0:n.label,I.jsx(Ml,{type:&quot;source&quot;,position:t,isConnectable:e})]})}function bY({data:n,isConnectable:e,targetPosition:t=Mt.Top,sourcePosition:i=Mt.Bottom}){return I.jsxs(I.Fragment,{children:[I.jsx(Ml,{type:&quot;target&quot;,position:t,isConnectable:e}),n==null?void 0:n.label,I.jsx(Ml,{type:&quot;source&quot;,position:i,isConnectable:e})]})}function xY(){return null}function SY({data:n,isConnectable:e,targetPosition:t=Mt.Top}){return I.jsxs(I.Fragment,{children:[I.jsx(Ml,{type:&quot;target&quot;,position:t,isConnectable:e}),n==null?void 0:n.label]})}const $0={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},gO={input:vY,default:bY,output:SY,group:xY};function wY(n){var e,t,i,r;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((e=n.style)==null?void 0:e.width),height:n.height??n.initialHeight??((t=n.style)==null?void 0:t.height)}:{width:n.width??((i=n.style)==null?void 0:i.width),height:n.height??((r=n.style)==null?void 0:r.height)}}const EY=n=&gt;{const{width:e,height:t,x:i,y:r}=rp(n.nodeLookup,{filter:s=&gt;!!s.selected});return{width:Zs(e)?e:null,height:Zs(t)?t:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${i}px,${r}px)`}};function TY({onSelectionContextMenu:n,noPanClassName:e,disableKeyboardA11y:t}){const i=$n(),{width:r,height:s,transformString:o,userSelectionActive:l}=vn(EY,mi),u=eL(),h=re.useRef(null);if(re.useEffect(()=&gt;{var m;t||(m=h.current)==null||m.focus({preventScroll:!0})},[t]),QP({nodeRef:h}),l||!r||!s)return null;const f=n?m=&gt;{const g=i.getState().nodes.filter(v=&gt;v.selected);n(m,g)}:void 0,p=m=&gt;{Object.prototype.hasOwnProperty.call($0,m.key)&amp;&amp;(m.preventDefault(),u({direction:$0[m.key],factor:m.shiftKey?4:1}))};return I.jsx(&quot;div&quot;,{className:Ii([&quot;react-flow__nodesselection&quot;,&quot;react-flow__container&quot;,e]),style:{transform:o},children:I.jsx(&quot;div&quot;,{ref:h,className:&quot;react-flow__nodesselection-rect&quot;,onContextMenu:f,tabIndex:t?void 0:-1,onKeyDown:t?void 0:p,style:{width:r,height:s}})})}const yO=typeof window&lt;&quot;u&quot;?window:void 0,MY=n=&gt;({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function nL({children:n,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:h,selectionOnDrag:f,selectionMode:p,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:v,panActivationKeyCode:x,zoomActivationKeyCode:b,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:w,panOnScroll:S,panOnScrollSpeed:C,panOnScrollMode:O,zoomOnDoubleClick:M,panOnDrag:N,defaultViewport:R,translateExtent:D,minZoom:L,maxZoom:H,preventScrolling:q,onSelectionContextMenu:z,noWheelClassName:$,noPanClassName:P,disableKeyboardA11y:j,onViewportChange:G,isControlledViewport:ee}){const{nodesSelectionActive:F,userSelectionActive:ne}=vn(MY),le=Vd(h,{target:yO}),ce=Vd(x,{target:yO}),ie=ce||N,oe=ce||S,ae=f&amp;&amp;ie!==!0,ue=le||ne||ae;return oY({deleteKeyCode:u,multiSelectionKeyCode:v}),I.jsx(cY,{onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:w,panOnScroll:oe,panOnScrollSpeed:C,panOnScrollMode:O,zoomOnDoubleClick:M,panOnDrag:!le&amp;&amp;ie,defaultViewport:R,translateExtent:D,minZoom:L,maxZoom:H,zoomActivationKeyCode:b,preventScrolling:q,noWheelClassName:$,noPanClassName:P,onViewportChange:G,isControlledViewport:ee,paneClickDistance:l,children:I.jsxs(dY,{onSelectionStart:m,onSelectionEnd:g,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ie,isSelecting:!!ue,selectionMode:p,selectionKeyPressed:le,selectionOnDrag:ae,children:[n,F&amp;&amp;I.jsx(TY,{onSelectionContextMenu:z,noPanClassName:P,disableKeyboardA11y:j})]})})}nL.displayName=&quot;FlowRenderer&quot;;const AY=re.memo(nL),CY=n=&gt;e=&gt;n?gP(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(t=&gt;t.id):Array.from(e.nodeLookup.keys());function RY(n){return vn(re.useCallback(CY(n),[n]),mi)}const OY=n=&gt;n.updateNodeInternals;function NY(){const n=vn(OY),[e]=re.useState(()=&gt;typeof ResizeObserver&gt;&quot;u&quot;?null:new ResizeObserver(t=&gt;{const i=new Map;t.forEach(r=&gt;{const s=r.target.getAttribute(&quot;data-id&quot;);i.set(s,{id:s,nodeElement:r.target,force:!0})}),n(i)}));return re.useEffect(()=&gt;()=&gt;{e==null||e.disconnect()},[e]),e}function DY({node:n,nodeType:e,hasDimensions:t,resizeObserver:i}){const r=$n(),s=re.useRef(null),o=re.useRef(null),l=re.useRef(n.sourcePosition),u=re.useRef(n.targetPosition),h=re.useRef(e),f=t&amp;&amp;!!n.internals.handleBounds;return re.useEffect(()=&gt;{s.current&amp;&amp;!n.hidden&amp;&amp;(!f||o.current!==s.current)&amp;&amp;(o.current&amp;&amp;(i==null||i.unobserve(o.current)),i==null||i.observe(s.current),o.current=s.current)},[f,n.hidden]),re.useEffect(()=&gt;()=&gt;{o.current&amp;&amp;(i==null||i.unobserve(o.current),o.current=null)},[]),re.useEffect(()=&gt;{if(s.current){const p=h.current!==e,m=l.current!==n.sourcePosition,g=u.current!==n.targetPosition;(p||m||g)&amp;&amp;(h.current=e,l.current=n.sourcePosition,u.current=n.targetPosition,r.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:s.current,force:!0}]])))}},[n.id,e,n.sourcePosition,n.targetPosition]),s}function IY({id:n,onClick:e,onMouseEnter:t,onMouseMove:i,onMouseLeave:r,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:h,nodesFocusable:f,resizeObserver:p,noDragClassName:m,noPanClassName:g,disableKeyboardA11y:v,rfId:x,nodeTypes:b,nodeClickDistance:_,onError:T}){const{node:w,internals:S,isParent:C}=vn(ue=&gt;{const ve=ue.nodeLookup.get(n),He=ue.parentLookup.has(n);return{node:ve,internals:ve.internals,isParent:He}},mi);let O=w.type||&quot;default&quot;,M=(b==null?void 0:b[O])||gO[O];M===void 0&amp;&amp;(T==null||T(&quot;003&quot;,Mo.error003(O)),O=&quot;default&quot;,M=gO.default);const N=!!(w.draggable||l&amp;&amp;typeof w.draggable&gt;&quot;u&quot;),R=!!(w.selectable||u&amp;&amp;typeof w.selectable&gt;&quot;u&quot;),D=!!(w.connectable||h&amp;&amp;typeof w.connectable&gt;&quot;u&quot;),L=!!(w.focusable||f&amp;&amp;typeof w.focusable&gt;&quot;u&quot;),H=$n(),q=SP(w),z=DY({node:w,nodeType:O,hasDimensions:q,resizeObserver:p}),$=QP({nodeRef:z,disabled:w.hidden||!N,noDragClassName:m,handleSelector:w.dragHandle,nodeId:n,isSelectable:R,nodeClickDistance:_}),P=eL();if(w.hidden)return null;const j=Sa(w),G=wY(w),ee=R||N||e||t||i||r,F=t?ue=&gt;t(ue,{...S.userNode}):void 0,ne=i?ue=&gt;i(ue,{...S.userNode}):void 0,le=r?ue=&gt;r(ue,{...S.userNode}):void 0,ce=s?ue=&gt;s(ue,{...S.userNode}):void 0,ie=o?ue=&gt;o(ue,{...S.userNode}):void 0,oe=ue=&gt;{const{selectNodesOnDrag:ve,nodeDragThreshold:He}=H.getState();R&amp;&amp;(!ve||!N||He&gt;0)&amp;&amp;YS({id:n,store:H,nodeRef:z}),e&amp;&amp;e(ue,{...S.userNode})},ae=ue=&gt;{if(!(GS(ue.nativeEvent)||v))if(fP.includes(ue.key)&amp;&amp;R){const ve=ue.key===&quot;Escape&quot;;YS({id:n,store:H,unselect:ve,nodeRef:z})}else N&amp;&amp;w.selected&amp;&amp;Object.prototype.hasOwnProperty.call($0,ue.key)&amp;&amp;(ue.preventDefault(),H.setState({ariaLiveMessage:`Moved selected node ${ue.key.replace(&quot;Arrow&quot;,&quot;&quot;).toLowerCase()}. New position, x: ${~~S.positionAbsolute.x}, y: ${~~S.positionAbsolute.y}`}),P({direction:$0[ue.key],factor:ue.shiftKey?4:1}))};return I.jsx(&quot;div&quot;,{className:Ii([&quot;react-flow__node&quot;,`react-flow__node-${O}`,{[g]:N},w.className,{selected:w.selected,selectable:R,parent:C,draggable:N,dragging:$}]),ref:z,style:{zIndex:S.z,transform:`translate(${S.positionAbsolute.x}px,${S.positionAbsolute.y}px)`,pointerEvents:ee?&quot;all&quot;:&quot;none&quot;,visibility:q?&quot;visible&quot;:&quot;hidden&quot;,...w.style,...G},&quot;data-id&quot;:n,&quot;data-testid&quot;:`rf__node-${n}`,onMouseEnter:F,onMouseMove:ne,onMouseLeave:le,onContextMenu:ce,onClick:oe,onDoubleClick:ie,onKeyDown:L?ae:void 0,tabIndex:L?0:void 0,role:L?&quot;button&quot;:void 0,&quot;aria-describedby&quot;:v?void 0:`${WP}-${x}`,&quot;aria-label&quot;:w.ariaLabel,children:I.jsx(mY,{value:n,children:I.jsx(M,{id:n,data:w.data,type:O,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:w.selected??!1,selectable:R,draggable:N,deletable:w.deletable??!0,isConnectable:D,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:$,dragHandle:w.dragHandle,zIndex:S.z,parentId:w.parentId,...j})})})}const PY=n=&gt;({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function iL(n){const{nodesDraggable:e,nodesConnectable:t,nodesFocusable:i,elementsSelectable:r,onError:s}=vn(PY,mi),o=RY(n.onlyRenderVisibleElements),l=NY();return I.jsx(&quot;div&quot;,{className:&quot;react-flow__nodes&quot;,style:a_,children:o.map(u=&gt;I.jsx(IY,{id:u,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:t,nodesFocusable:i,elementsSelectable:r,nodeClickDistance:n.nodeClickDistance,onError:s},u))})}iL.displayName=&quot;NodeRenderer&quot;;const LY=re.memo(iL);function UY(n){return vn(re.useCallback(t=&gt;{if(!n)return t.edges.map(r=&gt;r.id);const i=[];if(t.width&amp;&amp;t.height)for(const r of t.edges){const s=t.nodeLookup.get(r.source),o=t.nodeLookup.get(r.target);s&amp;&amp;o&amp;&amp;FX({sourceNode:s,targetNode:o,width:t.width,height:t.height,transform:t.transform})&amp;&amp;i.push(r.id)}return i},[n]),mi)}const kY=({color:n=&quot;none&quot;,strokeWidth:e=1})=&gt;I.jsx(&quot;polyline&quot;,{style:{stroke:n,strokeWidth:e},strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,fill:&quot;none&quot;,points:&quot;-5,-4 0,0 -5,4&quot;}),FY=({color:n=&quot;none&quot;,strokeWidth:e=1})=&gt;I.jsx(&quot;polyline&quot;,{style:{stroke:n,fill:n,strokeWidth:e},strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,points:&quot;-5,-4 0,0 -5,4 -5,-4&quot;}),_O={[q0.Arrow]:kY,[q0.ArrowClosed]:FY};function zY(n){const e=$n();return re.useMemo(()=&gt;{var r,s;return Object.prototype.hasOwnProperty.call(_O,n)?_O[n]:((s=(r=e.getState()).onError)==null||s.call(r,&quot;009&quot;,Mo.error009(n)),null)},[n])}const BY=({id:n,type:e,color:t,width:i=12.5,height:r=12.5,markerUnits:s=&quot;strokeWidth&quot;,strokeWidth:o,orient:l=&quot;auto-start-reverse&quot;})=&gt;{const u=zY(e);return u?I.jsx(&quot;marker&quot;,{className:&quot;react-flow__arrowhead&quot;,id:n,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:&quot;-10 -10 20 20&quot;,markerUnits:s,orient:l,refX:&quot;0&quot;,refY:&quot;0&quot;,children:I.jsx(u,{color:t,strokeWidth:o})}):null},rL=({defaultColor:n,rfId:e})=&gt;{const t=vn(s=&gt;s.edges),i=vn(s=&gt;s.defaultEdgeOptions),r=re.useMemo(()=&gt;WX(t,{id:e,defaultColor:n,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[t,i,e,n]);return r.length?I.jsx(&quot;svg&quot;,{className:&quot;react-flow__marker&quot;,children:I.jsx(&quot;defs&quot;,{children:r.map(s=&gt;I.jsx(BY,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};rL.displayName=&quot;MarkerDefinitions&quot;;var HY=re.memo(rL);function sL({x:n,y:e,label:t,labelStyle:i={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:h,...f}){const[p,m]=re.useState({x:1,y:0,width:0,height:0}),g=Ii([&quot;react-flow__edge-textwrapper&quot;,h]),v=re.useRef(null);return re.useEffect(()=&gt;{if(v.current){const x=v.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[t]),typeof t&gt;&quot;u&quot;||!t?null:I.jsxs(&quot;g&quot;,{transform:`translate(${n-p.width/2} ${e-p.height/2})`,className:g,visibility:p.width?&quot;visible&quot;:&quot;hidden&quot;,...f,children:[r&amp;&amp;I.jsx(&quot;rect&quot;,{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:&quot;react-flow__edge-textbg&quot;,style:s,rx:l,ry:l}),I.jsx(&quot;text&quot;,{className:&quot;react-flow__edge-text&quot;,y:p.height/2,dy:&quot;0.3em&quot;,ref:v,style:i,children:t}),u]})}sL.displayName=&quot;EdgeText&quot;;const VY=re.memo(sL);function l_({path:n,labelX:e,labelY:t,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:h=20,...f}){return I.jsxs(I.Fragment,{children:[I.jsx(&quot;path&quot;,{...f,d:n,fill:&quot;none&quot;,className:Ii([&quot;react-flow__edge-path&quot;,f.className])}),h&amp;&amp;I.jsx(&quot;path&quot;,{d:n,fill:&quot;none&quot;,strokeOpacity:0,strokeWidth:h,className:&quot;react-flow__edge-interaction&quot;}),i&amp;&amp;Zs(e)&amp;&amp;Zs(t)?I.jsx(VY,{x:e,y:t,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function vO({pos:n,x1:e,y1:t,x2:i,y2:r}){return n===Mt.Left||n===Mt.Right?[.5*(e+i),t]:[e,.5*(t+r)]}function oL({sourceX:n,sourceY:e,sourcePosition:t=Mt.Bottom,targetX:i,targetY:r,targetPosition:s=Mt.Top}){const[o,l]=vO({pos:t,x1:n,y1:e,x2:i,y2:r}),[u,h]=vO({pos:s,x1:i,y1:r,x2:n,y2:e}),[f,p,m,g]=MP({sourceX:n,sourceY:e,targetX:i,targetY:r,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:h});return[`M${n},${e} C${o},${l} ${u},${h} ${i},${r}`,f,p,m,g]}function aL(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,sourcePosition:o=Mt.Bottom,targetPosition:l=Mt.Top,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,interactionWidth:_})=&gt;{const[T,w,S]=oL({sourceX:t,sourceY:i,sourcePosition:o,targetX:r,targetY:s,targetPosition:l}),C=n.isInternal?void 0:e;return I.jsx(l_,{id:C,path:T,labelX:w,labelY:S,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,interactionWidth:_})})}const GY=aL({isInternal:!1}),lL=aL({isInternal:!0});GY.displayName=&quot;SimpleBezierEdge&quot;;lL.displayName=&quot;SimpleBezierEdgeInternal&quot;;function cL(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,sourcePosition:g=Mt.Bottom,targetPosition:v=Mt.Top,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:T})=&gt;{const[w,S,C]=jS({sourceX:t,sourceY:i,sourcePosition:g,targetX:r,targetY:s,targetPosition:v,borderRadius:_==null?void 0:_.borderRadius,offset:_==null?void 0:_.offset}),O=n.isInternal?void 0:e;return I.jsx(l_,{id:O,path:w,labelX:S,labelY:C,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:x,markerStart:b,interactionWidth:T})})}const uL=cL({isInternal:!1}),hL=cL({isInternal:!0});uL.displayName=&quot;SmoothStepEdge&quot;;hL.displayName=&quot;SmoothStepEdgeInternal&quot;;function fL(n){return re.memo(({id:e,...t})=&gt;{var r;const i=n.isInternal?void 0:e;return I.jsx(uL,{...t,id:i,pathOptions:re.useMemo(()=&gt;{var s;return{borderRadius:0,offset:(s=t.pathOptions)==null?void 0:s.offset}},[(r=t.pathOptions)==null?void 0:r.offset])})})}const jY=fL({isInternal:!1}),dL=fL({isInternal:!0});jY.displayName=&quot;StepEdge&quot;;dL.displayName=&quot;StepEdgeInternal&quot;;function pL(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,interactionWidth:x})=&gt;{const[b,_,T]=OP({sourceX:t,sourceY:i,targetX:r,targetY:s}),w=n.isInternal?void 0:e;return I.jsx(l_,{id:w,path:b,labelX:_,labelY:T,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,interactionWidth:x})})}const WY=pL({isInternal:!1}),mL=pL({isInternal:!0});WY.displayName=&quot;StraightEdge&quot;;mL.displayName=&quot;StraightEdgeInternal&quot;;function gL(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,sourcePosition:o=Mt.Bottom,targetPosition:l=Mt.Top,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:T})=&gt;{const[w,S,C]=AP({sourceX:t,sourceY:i,sourcePosition:o,targetX:r,targetY:s,targetPosition:l,curvature:_==null?void 0:_.curvature}),O=n.isInternal?void 0:e;return I.jsx(l_,{id:O,path:w,labelX:S,labelY:C,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,interactionWidth:T})})}const XY=gL({isInternal:!1}),yL=gL({isInternal:!0});XY.displayName=&quot;BezierEdge&quot;;yL.displayName=&quot;BezierEdgeInternal&quot;;const bO={default:yL,straight:mL,step:dL,smoothstep:hL,simplebezier:lL},xO={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},qY=(n,e,t)=&gt;t===Mt.Left?n-e:t===Mt.Right?n+e:n,YY=(n,e,t)=&gt;t===Mt.Top?n-e:t===Mt.Bottom?n+e:n,SO=&quot;react-flow__edgeupdater&quot;;function wO({position:n,centerX:e,centerY:t,radius:i=10,onMouseDown:r,onMouseEnter:s,onMouseOut:o,type:l}){return I.jsx(&quot;circle&quot;,{onMouseDown:r,onMouseEnter:s,onMouseOut:o,className:Ii([SO,`${SO}-${l}`]),cx:qY(e,i,n),cy:YY(t,i,n),r:i,stroke:&quot;transparent&quot;,fill:&quot;transparent&quot;})}function KY({isReconnectable:n,reconnectRadius:e,edge:t,sourceX:i,sourceY:r,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:h,onReconnectStart:f,onReconnectEnd:p,setReconnecting:m,setUpdateHover:g}){const v=$n(),x=(S,C)=&gt;{if(S.button!==0)return;const{autoPanOnConnect:O,domNode:M,isValidConnection:N,connectionMode:R,connectionRadius:D,lib:L,onConnectStart:H,onConnectEnd:q,cancelConnection:z,nodeLookup:$,rfId:P,panBy:j,updateConnection:G}=v.getState(),ee=C.type===&quot;target&quot;;m(!0),f==null||f(S,t,C.type);const F=(le,ce)=&gt;{m(!1),p==null||p(le,t,C.type,ce)},ne=le=&gt;h==null?void 0:h(t,le);qS.onPointerDown(S.nativeEvent,{autoPanOnConnect:O,connectionMode:R,connectionRadius:D,domNode:M,handleId:C.id,nodeId:C.nodeId,nodeLookup:$,isTarget:ee,edgeUpdaterType:C.type,lib:L,flowId:P,cancelConnection:z,panBy:j,isValidConnection:N,onConnect:ne,onConnectStart:H,onConnectEnd:q,onReconnectEnd:F,updateConnection:G,getTransform:()=&gt;v.getState().transform,getFromHandle:()=&gt;v.getState().connection.fromHandle})},b=S=&gt;x(S,{nodeId:t.target,id:t.targetHandle??null,type:&quot;target&quot;}),_=S=&gt;x(S,{nodeId:t.source,id:t.sourceHandle??null,type:&quot;source&quot;}),T=()=&gt;g(!0),w=()=&gt;g(!1);return I.jsxs(I.Fragment,{children:[(n===!0||n===&quot;source&quot;)&amp;&amp;I.jsx(wO,{position:l,centerX:i,centerY:r,radius:e,onMouseDown:b,onMouseEnter:T,onMouseOut:w,type:&quot;source&quot;}),(n===!0||n===&quot;target&quot;)&amp;&amp;I.jsx(wO,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:_,onMouseEnter:T,onMouseOut:w,type:&quot;target&quot;})]})}function $Y({id:n,edgesFocusable:e,edgesReconnectable:t,elementsSelectable:i,onClick:r,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:h,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,rfId:v,edgeTypes:x,noPanClassName:b,onError:_,disableKeyboardA11y:T}){let w=vn(We=&gt;We.edgeLookup.get(n));const S=vn(We=&gt;We.defaultEdgeOptions);w=S?{...S,...w}:w;let C=w.type||&quot;default&quot;,O=(x==null?void 0:x[C])||bO[C];O===void 0&amp;&amp;(_==null||_(&quot;011&quot;,Mo.error011(C)),C=&quot;default&quot;,O=bO.default);const M=!!(w.focusable||e&amp;&amp;typeof w.focusable&gt;&quot;u&quot;),N=typeof p&lt;&quot;u&quot;&amp;&amp;(w.reconnectable||t&amp;&amp;typeof w.reconnectable&gt;&quot;u&quot;),R=!!(w.selectable||i&amp;&amp;typeof w.selectable&gt;&quot;u&quot;),D=re.useRef(null),[L,H]=re.useState(!1),[q,z]=re.useState(!1),$=$n(),{zIndex:P,sourceX:j,sourceY:G,targetX:ee,targetY:F,sourcePosition:ne,targetPosition:le}=vn(re.useCallback(We=&gt;{const Ke=We.nodeLookup.get(w.source),Q=We.nodeLookup.get(w.target);if(!Ke||!Q)return{zIndex:w.zIndex,...xO};const Ve=jX({id:n,sourceNode:Ke,targetNode:Q,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:We.connectionMode,onError:_});return{zIndex:kX({selected:w.selected,zIndex:w.zIndex,sourceNode:Ke,targetNode:Q,elevateOnSelect:We.elevateEdgesOnSelect}),...Ve||xO}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),mi),ce=re.useMemo(()=&gt;w.markerStart?`url(&#x27;#${WS(w.markerStart,v)}&#x27;)`:void 0,[w.markerStart,v]),ie=re.useMemo(()=&gt;w.markerEnd?`url(&#x27;#${WS(w.markerEnd,v)}&#x27;)`:void 0,[w.markerEnd,v]);if(w.hidden||j===null||G===null||ee===null||F===null)return null;const oe=We=&gt;{var Le;const{addSelectedEdges:Ke,unselectNodesAndEdges:Q,multiSelectionActive:Ve}=$.getState();R&amp;&amp;($.setState({nodesSelectionActive:!1}),w.selected&amp;&amp;Ve?(Q({nodes:[],edges:[w]}),(Le=D.current)==null||Le.blur()):Ke([n])),r&amp;&amp;r(We,w)},ae=s?We=&gt;{s(We,{...w})}:void 0,ue=o?We=&gt;{o(We,{...w})}:void 0,ve=l?We=&gt;{l(We,{...w})}:void 0,He=u?We=&gt;{u(We,{...w})}:void 0,Xe=h?We=&gt;{h(We,{...w})}:void 0,ct=We=&gt;{var Ke;if(!T&amp;&amp;fP.includes(We.key)&amp;&amp;R){const{unselectNodesAndEdges:Q,addSelectedEdges:Ve}=$.getState();We.key===&quot;Escape&quot;?((Ke=D.current)==null||Ke.blur(),Q({edges:[w]})):Ve([n])}};return I.jsx(&quot;svg&quot;,{style:{zIndex:P},children:I.jsxs(&quot;g&quot;,{className:Ii([&quot;react-flow__edge&quot;,`react-flow__edge-${C}`,w.className,b,{selected:w.selected,animated:w.animated,inactive:!R&amp;&amp;!r,updating:L,selectable:R}]),onClick:oe,onDoubleClick:ae,onContextMenu:ue,onMouseEnter:ve,onMouseMove:He,onMouseLeave:Xe,onKeyDown:M?ct:void 0,tabIndex:M?0:void 0,role:M?&quot;button&quot;:&quot;img&quot;,&quot;data-id&quot;:n,&quot;data-testid&quot;:`rf__edge-${n}`,&quot;aria-label&quot;:w.ariaLabel===null?void 0:w.ariaLabel||`Edge from ${w.source} to ${w.target}`,&quot;aria-describedby&quot;:M?`${XP}-${v}`:void 0,ref:D,children:[!q&amp;&amp;I.jsx(O,{id:n,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:R,deletable:w.deletable??!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:j,sourceY:G,targetX:ee,targetY:F,sourcePosition:ne,targetPosition:le,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:ce,markerEnd:ie,pathOptions:&quot;pathOptions&quot;in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),N&amp;&amp;I.jsx(KY,{edge:w,isReconnectable:N,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,sourceX:j,sourceY:G,targetX:ee,targetY:F,sourcePosition:ne,targetPosition:le,setUpdateHover:H,setReconnecting:z})]})})}const ZY=n=&gt;({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function _L({defaultMarkerColor:n,onlyRenderVisibleElements:e,rfId:t,edgeTypes:i,noPanClassName:r,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:h,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,disableKeyboardA11y:x}){const{edgesFocusable:b,edgesReconnectable:_,elementsSelectable:T,onError:w}=vn(ZY,mi),S=UY(e);return I.jsxs(&quot;div&quot;,{className:&quot;react-flow__edges&quot;,children:[I.jsx(HY,{defaultColor:n,rfId:t}),S.map(C=&gt;I.jsx($Y,{id:C,edgesFocusable:b,edgesReconnectable:_,elementsSelectable:T,noPanClassName:r,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:h,onClick:f,reconnectRadius:p,onDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,rfId:t,onError:w,edgeTypes:i,disableKeyboardA11y:x},C))]})}_L.displayName=&quot;EdgeRenderer&quot;;const JY=re.memo(_L),QY=n=&gt;`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function eK({children:n}){const e=vn(QY);return I.jsx(&quot;div&quot;,{className:&quot;react-flow__viewport xyflow__viewport react-flow__container&quot;,style:{transform:e},children:n})}function tK(n){const e=o1(),t=re.useRef(!1);re.useEffect(()=&gt;{!t.current&amp;&amp;e.viewportInitialized&amp;&amp;n&amp;&amp;(setTimeout(()=&gt;n(e),1),t.current=!0)},[n,e.viewportInitialized])}const nK=n=&gt;{var e;return(e=n.panZoom)==null?void 0:e.syncViewport};function iK(n){const e=vn(nK),t=$n();return re.useEffect(()=&gt;{n&amp;&amp;(e==null||e(n),t.setState({transform:[n.x,n.y,n.zoom]}))},[n,e]),null}function rK(n){return n.connection.inProgress?{...n.connection,to:sp(n.connection.to,n.transform)}:{...n.connection}}function sK(n){return rK}function oK(n){const e=sK();return vn(e,mi)}const aK=n=&gt;({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function lK({containerStyle:n,style:e,type:t,component:i}){const{nodesConnectable:r,width:s,height:o,isValid:l,inProgress:u}=vn(aK,mi);return!(s&amp;&amp;r&amp;&amp;u)?null:I.jsx(&quot;svg&quot;,{style:n,width:s,height:o,className:&quot;react-flow__connectionline react-flow__container&quot;,children:I.jsx(&quot;g&quot;,{className:Ii([&quot;react-flow__connection&quot;,pP(l)]),children:I.jsx(vL,{style:e,type:t,CustomComponent:i,isValid:l})})})}const vL=({style:n,type:e=dl.Bezier,CustomComponent:t,isValid:i})=&gt;{const{inProgress:r,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:h,toNode:f,toHandle:p,toPosition:m}=oK();if(!r)return;if(t)return I.jsx(t,{connectionLineType:e,connectionLineStyle:n,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:h.x,toY:h.y,fromPosition:u,toPosition:m,connectionStatus:pP(i),toNode:f,toHandle:p});let g=&quot;&quot;;const v={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:h.x,targetY:h.y,targetPosition:m};switch(e){case dl.Bezier:[g]=AP(v);break;case dl.SimpleBezier:[g]=oL(v);break;case dl.Step:[g]=jS({...v,borderRadius:0});break;case dl.SmoothStep:[g]=jS(v);break;default:[g]=OP(v)}return I.jsx(&quot;path&quot;,{d:g,fill:&quot;none&quot;,className:&quot;react-flow__connection-path&quot;,style:n})};vL.displayName=&quot;ConnectionLine&quot;;const cK={};function EO(n=cK){re.useRef(n),$n(),re.useEffect(()=&gt;{},[n])}function uK(){$n(),re.useRef(!1),re.useEffect(()=&gt;{},[])}function bL({nodeTypes:n,edgeTypes:e,onInit:t,onNodeClick:i,onEdgeClick:r,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:m,onSelectionEnd:g,connectionLineType:v,connectionLineStyle:x,connectionLineComponent:b,connectionLineContainerStyle:_,selectionKeyCode:T,selectionOnDrag:w,selectionMode:S,multiSelectionKeyCode:C,panActivationKeyCode:O,zoomActivationKeyCode:M,deleteKeyCode:N,onlyRenderVisibleElements:R,elementsSelectable:D,defaultViewport:L,translateExtent:H,minZoom:q,maxZoom:z,preventScrolling:$,defaultMarkerColor:P,zoomOnScroll:j,zoomOnPinch:G,panOnScroll:ee,panOnScrollSpeed:F,panOnScrollMode:ne,zoomOnDoubleClick:le,panOnDrag:ce,onPaneClick:ie,onPaneMouseEnter:oe,onPaneMouseMove:ae,onPaneMouseLeave:ue,onPaneScroll:ve,onPaneContextMenu:He,paneClickDistance:Xe,nodeClickDistance:ct,onEdgeContextMenu:We,onEdgeMouseEnter:Ke,onEdgeMouseMove:Q,onEdgeMouseLeave:Ve,reconnectRadius:Le,onReconnect:Fe,onReconnectStart:De,onReconnectEnd:mt,noDragClassName:ze,noWheelClassName:te,noPanClassName:V,disableKeyboardA11y:pe,nodeExtent:Ce,rfId:Ue,viewport:Me,onViewportChange:Ze}){return EO(n),EO(e),uK(),tK(t),iK(Me),I.jsx(AY,{onPaneClick:ie,onPaneMouseEnter:oe,onPaneMouseMove:ae,onPaneMouseLeave:ue,onPaneContextMenu:He,onPaneScroll:ve,paneClickDistance:Xe,deleteKeyCode:N,selectionKeyCode:T,selectionOnDrag:w,selectionMode:S,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:C,panActivationKeyCode:O,zoomActivationKeyCode:M,elementsSelectable:D,zoomOnScroll:j,zoomOnPinch:G,zoomOnDoubleClick:le,panOnScroll:ee,panOnScrollSpeed:F,panOnScrollMode:ne,panOnDrag:ce,defaultViewport:L,translateExtent:H,minZoom:q,maxZoom:z,onSelectionContextMenu:p,preventScrolling:$,noDragClassName:ze,noWheelClassName:te,noPanClassName:V,disableKeyboardA11y:pe,onViewportChange:Ze,isControlledViewport:!!Me,children:I.jsxs(eK,{children:[I.jsx(JY,{edgeTypes:e,onEdgeClick:r,onEdgeDoubleClick:o,onReconnect:Fe,onReconnectStart:De,onReconnectEnd:mt,onlyRenderVisibleElements:R,onEdgeContextMenu:We,onEdgeMouseEnter:Ke,onEdgeMouseMove:Q,onEdgeMouseLeave:Ve,reconnectRadius:Le,defaultMarkerColor:P,noPanClassName:V,disableKeyboardA11y:pe,rfId:Ue}),I.jsx(lK,{style:x,type:v,component:b,containerStyle:_}),I.jsx(&quot;div&quot;,{className:&quot;react-flow__edgelabel-renderer&quot;}),I.jsx(LY,{nodeTypes:n,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:f,nodeClickDistance:ct,onlyRenderVisibleElements:R,noPanClassName:V,noDragClassName:ze,disableKeyboardA11y:pe,nodeExtent:Ce,rfId:Ue}),I.jsx(&quot;div&quot;,{className:&quot;react-flow__viewport-portal&quot;})]})})}bL.displayName=&quot;GraphView&quot;;const hK=re.memo(bL),TO=({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}={})=&gt;{const h=new Map,f=new Map,p=new Map,m=new Map,g=i??e??[],v=t??n??[],x=l??[0,0],b=u??Fd;DP(p,m,g),XS(v,h,f,{nodeOrigin:x,nodeExtent:b,elevateNodesOnSelect:!1});let _=[0,0,1];if(o&amp;&amp;r&amp;&amp;s){const T=rp(h,{filter:O=&gt;!!((O.width||O.initialWidth)&amp;&amp;(O.height||O.initialHeight))}),{x:w,y:S,zoom:C}=t1(T,r,s,.5,2,.1);_=[w,S,C]}return{rfId:&quot;1&quot;,width:0,height:0,transform:_,nodes:v,nodeLookup:h,parentLookup:f,edges:g,edgeLookup:m,connectionLookup:p,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:t!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Fd,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:_h.Strict,domNode:null,paneDragging:!1,noPanClassName:&quot;nopan&quot;,nodeOrigin:x,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...dP},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:&quot;&quot;,autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:LX,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:&quot;react&quot;,debug:!1}},fK=({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u})=&gt;Nq((h,f)=&gt;({...TO({nodes:n,edges:e,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u,defaultNodes:t,defaultEdges:i}),setNodes:p=&gt;{const{nodeLookup:m,parentLookup:g,nodeOrigin:v,elevateNodesOnSelect:x}=f();XS(p,m,g,{nodeOrigin:v,nodeExtent:u,elevateNodesOnSelect:x,checkEquality:!0}),h({nodes:p})},setEdges:p=&gt;{const{connectionLookup:m,edgeLookup:g}=f();DP(m,g,p),h({edges:p})},setDefaultNodesAndEdges:(p,m)=&gt;{if(p){const{setNodes:g}=f();g(p),h({hasDefaultNodes:!0})}if(m){const{setEdges:g}=f();g(m),h({hasDefaultEdges:!0})}},updateNodeInternals:(p,m={triggerFitView:!0})=&gt;{const{triggerNodeChanges:g,nodeLookup:v,parentLookup:x,fitViewOnInit:b,fitViewDone:_,fitViewOnInitOptions:T,domNode:w,nodeOrigin:S,nodeExtent:C,debug:O,fitViewSync:M}=f(),{changes:N,updatedInternals:R}=$X(p,v,x,w,S,C);if(R){if(qX(v,x,{nodeOrigin:S,nodeExtent:C}),m.triggerFitView){let D=_;!_&amp;&amp;b&amp;&amp;(D=M({...T,nodes:T==null?void 0:T.nodes})),h({fitViewDone:D})}else h({});(N==null?void 0:N.length)&gt;0&amp;&amp;(O&amp;&amp;console.log(&quot;React Flow: trigger node changes&quot;,N),g==null||g(N))}},updateNodePositions:(p,m=!1)=&gt;{const g=[],v=[],{nodeLookup:x,triggerNodeChanges:b}=f();for(const[_,T]of p){const w=x.get(_),S=!!(w!=null&amp;&amp;w.expandParent&amp;&amp;(w!=null&amp;&amp;w.parentId)&amp;&amp;(T!=null&amp;&amp;T.position)),C={id:_,type:&quot;position&quot;,position:S?{x:Math.max(0,T.position.x),y:Math.max(0,T.position.y)}:T.position,dragging:m};S&amp;&amp;w.parentId&amp;&amp;g.push({id:_,parentId:w.parentId,rect:{...T.internals.positionAbsolute,width:T.measured.width??0,height:T.measured.height??0}}),v.push(C)}if(g.length&gt;0){const{parentLookup:_,nodeOrigin:T}=f(),w=s1(g,x,_,T);v.push(...w)}b(v)},triggerNodeChanges:p=&gt;{const{onNodesChange:m,setNodes:g,nodes:v,hasDefaultNodes:x,debug:b}=f();if(p!=null&amp;&amp;p.length){if(x){const _=KP(p,v);g(_)}b&amp;&amp;console.log(&quot;React Flow: trigger node changes&quot;,p),m==null||m(p)}},triggerEdgeChanges:p=&gt;{const{onEdgesChange:m,setEdges:g,edges:v,hasDefaultEdges:x,debug:b}=f();if(p!=null&amp;&amp;p.length){if(x){const _=$P(p,v);g(_)}b&amp;&amp;console.log(&quot;React Flow: trigger edge changes&quot;,p),m==null||m(p)}},addSelectedNodes:p=&gt;{const{multiSelectionActive:m,edgeLookup:g,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:b}=f();if(m){const _=p.map(T=&gt;pc(T,!0));x(_);return}x(eh(v,new Set([...p]),!0)),b(eh(g))},addSelectedEdges:p=&gt;{const{multiSelectionActive:m,edgeLookup:g,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:b}=f();if(m){const _=p.map(T=&gt;pc(T,!0));b(_);return}b(eh(g,new Set([...p]))),x(eh(v,new Set,!0))},unselectNodesAndEdges:({nodes:p,edges:m}={})=&gt;{const{edges:g,nodes:v,nodeLookup:x,triggerNodeChanges:b,triggerEdgeChanges:_}=f(),T=p||v,w=m||g,S=T.map(O=&gt;{const M=x.get(O.id);return M&amp;&amp;(M.selected=!1),pc(O.id,!1)}),C=w.map(O=&gt;pc(O.id,!1));b(S),_(C)},setMinZoom:p=&gt;{const{panZoom:m,maxZoom:g}=f();m==null||m.setScaleExtent([p,g]),h({minZoom:p})},setMaxZoom:p=&gt;{const{panZoom:m,minZoom:g}=f();m==null||m.setScaleExtent([g,p]),h({maxZoom:p})},setTranslateExtent:p=&gt;{var m;(m=f().panZoom)==null||m.setTranslateExtent(p),h({translateExtent:p})},setPaneClickDistance:p=&gt;{var m;(m=f().panZoom)==null||m.setClickDistance(p)},resetSelectedElements:()=&gt;{const{edges:p,nodes:m,triggerNodeChanges:g,triggerEdgeChanges:v}=f(),x=m.reduce((_,T)=&gt;T.selected?[..._,pc(T.id,!1)]:_,[]),b=p.reduce((_,T)=&gt;T.selected?[..._,pc(T.id,!1)]:_,[]);g(x),v(b)},setNodeExtent:p=&gt;{const{nodes:m,nodeLookup:g,parentLookup:v,nodeOrigin:x,elevateNodesOnSelect:b,nodeExtent:_}=f();p[0][0]===_[0][0]&amp;&amp;p[0][1]===_[0][1]&amp;&amp;p[1][0]===_[1][0]&amp;&amp;p[1][1]===_[1][1]||(XS(m,g,v,{nodeOrigin:x,nodeExtent:p,elevateNodesOnSelect:b,checkEquality:!1}),h({nodeExtent:p}))},panBy:p=&gt;{const{transform:m,width:g,height:v,panZoom:x,translateExtent:b}=f();return ZX({delta:p,panZoom:x,transform:m,translateExtent:b,width:g,height:v})},fitView:p=&gt;{const{panZoom:m,width:g,height:v,minZoom:x,maxZoom:b,nodeLookup:_}=f();if(!m)return Promise.resolve(!1);const T=BS(_,p);return HS({nodes:T,width:g,height:v,panZoom:m,minZoom:x,maxZoom:b},p)},fitViewSync:p=&gt;{const{panZoom:m,width:g,height:v,minZoom:x,maxZoom:b,nodeLookup:_}=f();if(!m)return!1;const T=BS(_,p);return HS({nodes:T,width:g,height:v,panZoom:m,minZoom:x,maxZoom:b},p),T.size&gt;0},cancelConnection:()=&gt;{h({connection:{...dP}})},updateConnection:p=&gt;{h({connection:p})},reset:()=&gt;h({...TO()})}),Object.is);function dK({initialNodes:n,initialEdges:e,defaultNodes:t,defaultEdges:i,initialWidth:r,initialHeight:s,fitView:o,nodeOrigin:l,nodeExtent:u,children:h}){const[f]=re.useState(()=&gt;fK({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}));return I.jsx(Dq,{value:f,children:I.jsx(tY,{children:h})})}function pK({children:n,nodes:e,edges:t,defaultNodes:i,defaultEdges:r,width:s,height:o,fitView:l,nodeOrigin:u,nodeExtent:h}){return re.useContext(s_)?I.jsx(I.Fragment,{children:n}):I.jsx(dK,{initialNodes:e,initialEdges:t,defaultNodes:i,defaultEdges:r,initialWidth:s,initialHeight:o,fitView:l,nodeOrigin:u,nodeExtent:h,children:n})}const mK={width:&quot;100%&quot;,height:&quot;100%&quot;,overflow:&quot;hidden&quot;,position:&quot;relative&quot;,zIndex:0};function gK({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,className:r,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:h,onMove:f,onMoveStart:p,onMoveEnd:m,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:_,onNodeMouseEnter:T,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:C,onNodeDoubleClick:O,onNodeDragStart:M,onNodeDrag:N,onNodeDragStop:R,onNodesDelete:D,onEdgesDelete:L,onDelete:H,onSelectionChange:q,onSelectionDragStart:z,onSelectionDrag:$,onSelectionDragStop:P,onSelectionContextMenu:j,onSelectionStart:G,onSelectionEnd:ee,onBeforeDelete:F,connectionMode:ne,connectionLineType:le=dl.Bezier,connectionLineStyle:ce,connectionLineComponent:ie,connectionLineContainerStyle:oe,deleteKeyCode:ae=&quot;Backspace&quot;,selectionKeyCode:ue=&quot;Shift&quot;,selectionOnDrag:ve=!1,selectionMode:He=zd.Full,panActivationKeyCode:Xe=&quot;Space&quot;,multiSelectionKeyCode:ct=K0()?&quot;Meta&quot;:&quot;Control&quot;,zoomActivationKeyCode:We=K0()?&quot;Meta&quot;:&quot;Control&quot;,snapToGrid:Ke,snapGrid:Q,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:Le,nodesDraggable:Fe,nodesConnectable:De,nodesFocusable:mt,nodeOrigin:ze=qP,edgesFocusable:te,edgesReconnectable:V,elementsSelectable:pe=!0,defaultViewport:Ce=Wq,minZoom:Ue=.5,maxZoom:Me=2,translateExtent:Ze=Fd,preventScrolling:qe=!0,nodeExtent:ht,defaultMarkerColor:Ct=&quot;#b1b1b7&quot;,zoomOnScroll:je=!0,zoomOnPinch:ft=!0,panOnScroll:St=!1,panOnScrollSpeed:Rt=.5,panOnScrollMode:st=Rc.Free,zoomOnDoubleClick:jt=!0,panOnDrag:Pt=!0,onPaneClick:yn,onPaneMouseEnter:de,onPaneMouseMove:nt,onPaneMouseLeave:Ae,onPaneScroll:Pe,onPaneContextMenu:ot,paneClickDistance:et=0,nodeClickDistance:Ut=0,children:wn,onReconnect:jn,onReconnectStart:zt,onReconnectEnd:Gi,onEdgeContextMenu:oi,onEdgeDoubleClick:Zn,onEdgeMouseEnter:gi,onEdgeMouseMove:ji,onEdgeMouseLeave:Ns,reconnectRadius:Ea=10,onNodesChange:Oo,onEdgesChange:Ds,noDragClassName:Hr=&quot;nodrag&quot;,noWheelClassName:cs=&quot;nowheel&quot;,noPanClassName:Mr=&quot;nopan&quot;,fitView:Ar,fitViewOptions:Is,connectOnClick:us,attributionPosition:Wn,proOptions:Ta,defaultEdgeOptions:Ma,elevateNodesOnSelect:Vr,elevateEdgesOnSelect:Y,disableKeyboardA11y:fe=!1,autoPanOnConnect:be,autoPanOnNodeDrag:we,autoPanSpeed:me,connectionRadius:Ge,isValidConnection:Je,onError:tt,style:dt,id:Ot,nodeDragThreshold:Et,viewport:bt,onViewportChange:Bt,width:un,height:In,colorMode:Qt=&quot;light&quot;,debug:Zt,onScroll:wt,...Hn},rn){const Jn=Ot||&quot;1&quot;,Tn=Kq(Qt),bn=re.useCallback(Cr=&gt;{Cr.currentTarget.scrollTo({top:0,left:0,behavior:&quot;instant&quot;}),wt==null||wt(Cr)},[wt]);return I.jsx(&quot;div&quot;,{&quot;data-testid&quot;:&quot;rf__wrapper&quot;,...Hn,onScroll:bn,style:{...dt,...mK},ref:rn,className:Ii([&quot;react-flow&quot;,r,Tn]),id:Ot,children:I.jsxs(pK,{nodes:n,edges:e,width:un,height:In,fitView:Ar,nodeOrigin:ze,nodeExtent:ht,children:[I.jsx(hK,{onInit:h,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:T,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:C,onNodeDoubleClick:O,nodeTypes:s,edgeTypes:o,connectionLineType:le,connectionLineStyle:ce,connectionLineComponent:ie,connectionLineContainerStyle:oe,selectionKeyCode:ue,selectionOnDrag:ve,selectionMode:He,deleteKeyCode:ae,multiSelectionKeyCode:ct,panActivationKeyCode:Xe,zoomActivationKeyCode:We,onlyRenderVisibleElements:Ve,defaultViewport:Ce,translateExtent:Ze,minZoom:Ue,maxZoom:Me,preventScrolling:qe,zoomOnScroll:je,zoomOnPinch:ft,zoomOnDoubleClick:jt,panOnScroll:St,panOnScrollSpeed:Rt,panOnScrollMode:st,panOnDrag:Pt,onPaneClick:yn,onPaneMouseEnter:de,onPaneMouseMove:nt,onPaneMouseLeave:Ae,onPaneScroll:Pe,onPaneContextMenu:ot,paneClickDistance:et,nodeClickDistance:Ut,onSelectionContextMenu:j,onSelectionStart:G,onSelectionEnd:ee,onReconnect:jn,onReconnectStart:zt,onReconnectEnd:Gi,onEdgeContextMenu:oi,onEdgeDoubleClick:Zn,onEdgeMouseEnter:gi,onEdgeMouseMove:ji,onEdgeMouseLeave:Ns,reconnectRadius:Ea,defaultMarkerColor:Ct,noDragClassName:Hr,noWheelClassName:cs,noPanClassName:Mr,rfId:Jn,disableKeyboardA11y:fe,nodeExtent:ht,viewport:bt,onViewportChange:Bt}),I.jsx(Yq,{nodes:n,edges:e,defaultNodes:t,defaultEdges:i,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:_,nodesDraggable:Fe,nodesConnectable:De,nodesFocusable:mt,edgesFocusable:te,edgesReconnectable:V,elementsSelectable:pe,elevateNodesOnSelect:Vr,elevateEdgesOnSelect:Y,minZoom:Ue,maxZoom:Me,nodeExtent:ht,onNodesChange:Oo,onEdgesChange:Ds,snapToGrid:Ke,snapGrid:Q,connectionMode:ne,translateExtent:Ze,connectOnClick:us,defaultEdgeOptions:Ma,fitView:Ar,fitViewOptions:Is,onNodesDelete:D,onEdgesDelete:L,onDelete:H,onNodeDragStart:M,onNodeDrag:N,onNodeDragStop:R,onSelectionDrag:$,onSelectionDragStart:z,onSelectionDragStop:P,onMove:f,onMoveStart:p,onMoveEnd:m,noPanClassName:Mr,nodeOrigin:ze,rfId:Jn,autoPanOnConnect:be,autoPanOnNodeDrag:we,autoPanSpeed:me,onError:tt,connectionRadius:Ge,isValidConnection:Je,selectNodesOnDrag:Le,nodeDragThreshold:Et,onBeforeDelete:F,paneClickDistance:et,debug:Zt}),I.jsx(jq,{onSelectionChange:q}),wn,I.jsx(zq,{proOptions:Ta,position:Wn}),I.jsx(kq,{rfId:Jn,disableKeyboardA11y:fe})]})})}var yK=ZP(gK);function _K({dimensions:n,lineWidth:e,variant:t,className:i}){return I.jsx(&quot;path&quot;,{strokeWidth:e,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:Ii([&quot;react-flow__background-pattern&quot;,t,i])})}function vK({radius:n,className:e}){return I.jsx(&quot;circle&quot;,{cx:n,cy:n,r:n,className:Ii([&quot;react-flow__background-pattern&quot;,&quot;dots&quot;,e])})}var _l;(function(n){n.Lines=&quot;lines&quot;,n.Dots=&quot;dots&quot;,n.Cross=&quot;cross&quot;})(_l||(_l={}));const bK={[_l.Dots]:1,[_l.Lines]:1,[_l.Cross]:6},xK=n=&gt;({transform:n.transform,patternId:`pattern-${n.rfId}`});function xL({id:n,variant:e=_l.Dots,gap:t=20,size:i,lineWidth:r=1,offset:s=0,color:o,bgColor:l,style:u,className:h,patternClassName:f}){const p=re.useRef(null),{transform:m,patternId:g}=vn(xK,mi),v=i||bK[e],x=e===_l.Dots,b=e===_l.Cross,_=Array.isArray(t)?t:[t,t],T=[_[0]*m[2]||1,_[1]*m[2]||1],w=v*m[2],S=Array.isArray(s)?s:[s,s],C=b?[w,w]:T,O=[S[0]*m[2]||1+C[0]/2,S[1]*m[2]||1+C[1]/2],M=`${g}${n||&quot;&quot;}`;return I.jsxs(&quot;svg&quot;,{className:Ii([&quot;react-flow__background&quot;,h]),style:{...u,...a_,&quot;--xy-background-color-props&quot;:l,&quot;--xy-background-pattern-color-props&quot;:o},ref:p,&quot;data-testid&quot;:&quot;rf__background&quot;,children:[I.jsx(&quot;pattern&quot;,{id:M,x:m[0]%T[0],y:m[1]%T[1],width:T[0],height:T[1],patternUnits:&quot;userSpaceOnUse&quot;,patternTransform:`translate(-${O[0]},-${O[1]})`,children:x?I.jsx(vK,{radius:w/2,className:f}):I.jsx(_K,{dimensions:C,lineWidth:r,variant:e,className:f})}),I.jsx(&quot;rect&quot;,{x:&quot;0&quot;,y:&quot;0&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,fill:`url(#${M})`})]})}xL.displayName=&quot;Background&quot;;const SK=re.memo(xL);function wK(){return I.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 32 32&quot;,children:I.jsx(&quot;path&quot;,{d:&quot;M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z&quot;})})}function EK(){return I.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 32 5&quot;,children:I.jsx(&quot;path&quot;,{d:&quot;M0 0h32v4.2H0z&quot;})})}function TK(){return I.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 32 30&quot;,children:I.jsx(&quot;path&quot;,{d:&quot;M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z&quot;})})}function MK(){return I.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 25 32&quot;,children:I.jsx(&quot;path&quot;,{d:&quot;M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z&quot;})})}function AK(){return I.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 25 32&quot;,children:I.jsx(&quot;path&quot;,{d:&quot;M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z&quot;})})}function fg({children:n,className:e,...t}){return I.jsx(&quot;button&quot;,{type:&quot;button&quot;,className:Ii([&quot;react-flow__controls-button&quot;,e]),...t,children:n})}const CK=n=&gt;({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]&lt;=n.minZoom,maxZoomReached:n.transform[2]&gt;=n.maxZoom});function SL({style:n,showZoom:e=!0,showFitView:t=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:h,children:f,position:p=&quot;bottom-left&quot;,orientation:m=&quot;vertical&quot;,&quot;aria-label&quot;:g=&quot;React Flow controls&quot;}){const v=$n(),{isInteractive:x,minZoomReached:b,maxZoomReached:_}=vn(CK,mi),{zoomIn:T,zoomOut:w,fitView:S}=o1(),C=()=&gt;{T(),s==null||s()},O=()=&gt;{w(),o==null||o()},M=()=&gt;{S(r),l==null||l()},N=()=&gt;{v.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),u==null||u(!x)},R=m===&quot;horizontal&quot;?&quot;horizontal&quot;:&quot;vertical&quot;;return I.jsxs(o_,{className:Ii([&quot;react-flow__controls&quot;,R,h]),position:p,style:n,&quot;data-testid&quot;:&quot;rf__controls&quot;,&quot;aria-label&quot;:g,children:[e&amp;&amp;I.jsxs(I.Fragment,{children:[I.jsx(fg,{onClick:C,className:&quot;react-flow__controls-zoomin&quot;,title:&quot;zoom in&quot;,&quot;aria-label&quot;:&quot;zoom in&quot;,disabled:_,children:I.jsx(wK,{})}),I.jsx(fg,{onClick:O,className:&quot;react-flow__controls-zoomout&quot;,title:&quot;zoom out&quot;,&quot;aria-label&quot;:&quot;zoom out&quot;,disabled:b,children:I.jsx(EK,{})})]}),t&amp;&amp;I.jsx(fg,{className:&quot;react-flow__controls-fitview&quot;,onClick:M,title:&quot;fit view&quot;,&quot;aria-label&quot;:&quot;fit view&quot;,children:I.jsx(TK,{})}),i&amp;&amp;I.jsx(fg,{className:&quot;react-flow__controls-interactive&quot;,onClick:N,title:&quot;toggle interactivity&quot;,&quot;aria-label&quot;:&quot;toggle interactivity&quot;,children:x?I.jsx(AK,{}):I.jsx(MK,{})}),f]})}SL.displayName=&quot;Controls&quot;;const RK=re.memo(SL);function OK({id:n,x:e,y:t,width:i,height:r,style:s,color:o,strokeColor:l,strokeWidth:u,className:h,borderRadius:f,shapeRendering:p,selected:m,onClick:g}){const{background:v,backgroundColor:x}=s||{},b=o||v||x;return I.jsx(&quot;rect&quot;,{className:Ii([&quot;react-flow__minimap-node&quot;,{selected:m},h]),x:e,y:t,rx:f,ry:f,width:i,height:r,style:{fill:b,stroke:l,strokeWidth:u},shapeRendering:p,onClick:g?_=&gt;g(_,n):void 0})}const NK=re.memo(OK),DK=n=&gt;n.nodes.map(e=&gt;e.id),Rx=n=&gt;n instanceof Function?n:()=&gt;n;function IK({nodeStrokeColor:n,nodeColor:e,nodeClassName:t=&quot;&quot;,nodeBorderRadius:i=5,nodeStrokeWidth:r,nodeComponent:s=NK,onClick:o}){const l=vn(DK,mi),u=Rx(e),h=Rx(n),f=Rx(t),p=typeof window&gt;&quot;u&quot;||window.chrome?&quot;crispEdges&quot;:&quot;geometricPrecision&quot;;return I.jsx(I.Fragment,{children:l.map(m=&gt;I.jsx(LK,{id:m,nodeColorFunc:u,nodeStrokeColorFunc:h,nodeClassNameFunc:f,nodeBorderRadius:i,nodeStrokeWidth:r,NodeComponent:s,onClick:o,shapeRendering:p},m))})}function PK({id:n,nodeColorFunc:e,nodeStrokeColorFunc:t,nodeClassNameFunc:i,nodeBorderRadius:r,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:h,x:f,y:p,width:m,height:g}=vn(v=&gt;{const x=v.nodeLookup.get(n),{x:b,y:_}=x.internals.positionAbsolute,{width:T,height:w}=Sa(x);return{node:x,x:b,y:_,width:T,height:w}},mi);return!h||h.hidden||!SP(h)?null:I.jsx(l,{x:f,y:p,width:m,height:g,style:h.style,selected:!!h.selected,className:i(h),color:e(h),borderRadius:r,strokeColor:t(h),strokeWidth:s,shapeRendering:o,onClick:u,id:h.id})}const LK=re.memo(PK);var UK=re.memo(IK);const kK=200,FK=150,zK=n=&gt;{const e={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:e,boundingRect:n.nodeLookup.size&gt;0?bP(rp(n.nodeLookup),e):e,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height}},BK=&quot;react-flow__minimap-desc&quot;;function wL({style:n,className:e,nodeStrokeColor:t,nodeColor:i,nodeClassName:r=&quot;&quot;,nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:h,maskStrokeColor:f,maskStrokeWidth:p,position:m=&quot;bottom-right&quot;,onClick:g,onNodeClick:v,pannable:x=!1,zoomable:b=!1,ariaLabel:_=&quot;React Flow mini map&quot;,inversePan:T,zoomStep:w=10,offsetScale:S=5}){const C=$n(),O=re.useRef(null),{boundingRect:M,viewBB:N,rfId:R,panZoom:D,translateExtent:L,flowWidth:H,flowHeight:q}=vn(zK,mi),z=(n==null?void 0:n.width)??kK,$=(n==null?void 0:n.height)??FK,P=M.width/z,j=M.height/$,G=Math.max(P,j),ee=G*z,F=G*$,ne=S*G,le=M.x-(ee-M.width)/2-ne,ce=M.y-(F-M.height)/2-ne,ie=ee+ne*2,oe=F+ne*2,ae=`${BK}-${R}`,ue=re.useRef(0),ve=re.useRef();ue.current=G,re.useEffect(()=&gt;{if(O.current&amp;&amp;D)return ve.current=sq({domNode:O.current,panZoom:D,getTransform:()=&gt;C.getState().transform,getViewScale:()=&gt;ue.current}),()=&gt;{var ct;(ct=ve.current)==null||ct.destroy()}},[D]),re.useEffect(()=&gt;{var ct;(ct=ve.current)==null||ct.update({translateExtent:L,width:H,height:q,inversePan:T,pannable:x,zoomStep:w,zoomable:b})},[x,b,T,w,L,H,q]);const He=g?ct=&gt;{var Q;const[We,Ke]=((Q=ve.current)==null?void 0:Q.pointer(ct))||[0,0];g(ct,{x:We,y:Ke})}:void 0,Xe=v?re.useCallback((ct,We)=&gt;{const Ke=C.getState().nodeLookup.get(We);v(ct,Ke)},[]):void 0;return I.jsx(o_,{position:m,style:{...n,&quot;--xy-minimap-background-color-props&quot;:typeof u==&quot;string&quot;?u:void 0,&quot;--xy-minimap-mask-background-color-props&quot;:typeof h==&quot;string&quot;?h:void 0,&quot;--xy-minimap-mask-stroke-color-props&quot;:typeof f==&quot;string&quot;?f:void 0,&quot;--xy-minimap-mask-stroke-width-props&quot;:typeof p==&quot;number&quot;?p*G:void 0,&quot;--xy-minimap-node-background-color-props&quot;:typeof i==&quot;string&quot;?i:void 0,&quot;--xy-minimap-node-stroke-color-props&quot;:typeof t==&quot;string&quot;?t:void 0,&quot;--xy-minimap-node-stroke-width-props&quot;:typeof o==&quot;string&quot;?o:void 0},className:Ii([&quot;react-flow__minimap&quot;,e]),&quot;data-testid&quot;:&quot;rf__minimap&quot;,children:I.jsxs(&quot;svg&quot;,{width:z,height:$,viewBox:`${le} ${ce} ${ie} ${oe}`,className:&quot;react-flow__minimap-svg&quot;,role:&quot;img&quot;,&quot;aria-labelledby&quot;:ae,ref:O,onClick:He,children:[_&amp;&amp;I.jsx(&quot;title&quot;,{id:ae,children:_}),I.jsx(UK,{onClick:Xe,nodeColor:i,nodeStrokeColor:t,nodeBorderRadius:s,nodeClassName:r,nodeStrokeWidth:o,nodeComponent:l}),I.jsx(&quot;path&quot;,{className:&quot;react-flow__minimap-mask&quot;,d:`M${le-ne},${ce-ne}h${ie+ne*2}v${oe+ne*2}h${-ie-ne*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fillRule:&quot;evenodd&quot;,pointerEvents:&quot;none&quot;})]})})}wL.displayName=&quot;MiniMap&quot;;const HK=re.memo(wL);function VK({nodeId:n,position:e,variant:t=gd.Handle,className:i,style:r={},children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:h=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,shouldResize:m,onResizeStart:g,onResize:v,onResizeEnd:x}){const b=tL(),_=typeof n==&quot;string&quot;?n:b,T=$n(),w=re.useRef(null),S=t===gd.Line?&quot;right&quot;:&quot;bottom-right&quot;,C=e??S,O=re.useRef(null);re.useEffect(()=&gt;{if(!(!w.current||!_))return O.current||(O.current=bq({domNode:w.current,nodeId:_,getStoreItems:()=&gt;{const{nodeLookup:D,transform:L,snapGrid:H,snapToGrid:q,nodeOrigin:z,domNode:$}=T.getState();return{nodeLookup:D,transform:L,snapGrid:H,snapToGrid:q,nodeOrigin:z,paneDomNode:$}},onChange:(D,L)=&gt;{const{triggerNodeChanges:H,nodeLookup:q,parentLookup:z,nodeOrigin:$}=T.getState(),P=[],j={x:D.x,y:D.y},G=q.get(_);if(G&amp;&amp;G.expandParent&amp;&amp;G.parentId){const ee=G.origin??$,F=D.width??G.measured.width??0,ne=D.height??G.measured.height??0,le={id:G.id,parentId:G.parentId,rect:{width:F,height:ne,...wP({x:D.x??G.position.x,y:D.y??G.position.y},{width:F,height:ne},G.parentId,q,ee)}},ce=s1([le],q,z,$);P.push(...ce),j.x=D.x?Math.max(ee[0]*F,D.x):void 0,j.y=D.y?Math.max(ee[1]*ne,D.y):void 0}if(j.x!==void 0&amp;&amp;j.y!==void 0){const ee={id:_,type:&quot;position&quot;,position:{...j}};P.push(ee)}if(D.width!==void 0&amp;&amp;D.height!==void 0){const ee={id:_,type:&quot;dimensions&quot;,resizing:!0,setAttributes:!0,dimensions:{width:D.width,height:D.height}};P.push(ee)}for(const ee of L){const F={...ee,type:&quot;position&quot;};P.push(F)}H(P)},onEnd:()=&gt;{const D={id:_,type:&quot;dimensions&quot;,resizing:!1};T.getState().triggerNodeChanges([D])}})),O.current.update({controlPosition:C,boundaries:{minWidth:l,minHeight:u,maxWidth:h,maxHeight:f},keepAspectRatio:p,onResizeStart:g,onResize:v,onResizeEnd:x,shouldResize:m}),()=&gt;{var D;(D=O.current)==null||D.destroy()}},[C,l,u,h,f,p,g,v,x,m]);const M=C.split(&quot;-&quot;),N=t===gd.Line?&quot;borderColor&quot;:&quot;backgroundColor&quot;,R=o?{...r,[N]:o}:r;return I.jsx(&quot;div&quot;,{className:Ii([&quot;react-flow__resize-control&quot;,&quot;nodrag&quot;,...M,t,i]),ref:w,style:R,children:s})}re.memo(VK);const Js=to(n=&gt;({isNodeEditorVisible:!1,setIsNodeEditorVisible:e=&gt;n({isNodeEditorVisible:e}),nodes:[{id:&quot;1&quot;,type:&quot;input&quot;,data:{label:&quot;Start Procedure&quot;},position:{x:250,y:0}}],edges:[],setNodes:e=&gt;n({nodes:e}),setEdges:e=&gt;n({edges:e}),onNodesChange:e=&gt;n(t=&gt;({nodes:KP(e,t.nodes)})),onEdgesChange:e=&gt;n(t=&gt;({edges:$P(e,t.edges)})),onConnect:e=&gt;n(t=&gt;({edges:RP(e,t.edges)})),use_node_editor_only:window.NODE_EDITOR_ONLY||!1}));async function MO(n){var s;const e=n.procedureStore();if(!e)return;const t=e.proceduresLength();if(!t)return;const i=[],r=n.server();if(r){const o=r.allFileObjectsLength();if(o)for(let l=0;l&lt;o;l++){const u=(s=n.server())==null?void 0:s.allFileObjects(l);if(u){const h={id:`file-object-${l}`,type:&quot;file_object&quot;,position:{x:250,y:l*100-100},data:{label:u.name(),description:u.fileType().toString(),filepath:u.filepath(),filetype:To[u.fileType()].toString(),fileobject:u,fileobjectT:u.unpack(),glbFile:u.glbFile(),IfcSqliteFile:u.ifcsqliteFile(),isProcedureOutput:u.isProcedureOutput()}};i.push(h)}}}for(let o=0;o&lt;t;o++){const l=e.procedures(o);if(l){const u=l.unpack(),h={};for(let m=0;m&lt;u.fileInputs.length;m++){const g=u.fileInputs[m];g&amp;&amp;g.argName&amp;&amp;(h[g.argName.toString()]=g)}const f={};for(let m=0;m&lt;u.fileOutputs.length;m++){const g=u.fileOutputs[m];g&amp;&amp;g.argName&amp;&amp;(f[g.argName.toString()]=g)}const p={id:`procedure-${o}`,type:&quot;procedure&quot;,position:{x:250,y:o*100},data:{label:l.name(),description:l.description(),scriptFileLocation:l.scriptFileLocation(),procedure:u,fileInputsMap:h,fileOutputsMap:f}};i.push(p)}}Js.getState().setNodes(i)}function GK(n){var p,m,g;let e=(p=n.procedureParent())==null?void 0:p.procedureIdString();if(!e){console.error(&quot;No procedure ID found in the message&quot;);return}const t=Js.getState().nodes,i=t.find(v=&gt;v.id===e);let r=t.length+1,s=((m=i==null?void 0:i.position)==null?void 0:m.x)||250,o=((g=i==null?void 0:i.position)==null?void 0:g.y)||0,l=(i==null?void 0:i.width)||200;const u={id:`file-object-${r}`,type:&quot;file_object&quot;,position:{x:s+l+50,y:o},data:{label:n.name(),description:n.fileType().toString(),filepath:n.filepath(),filetype:To[n.fileType()].toString(),fileobject:n,glbFile:n.glbFile(),IfcSqliteFile:n.ifcsqliteFile(),isProcedureOutput:n.isProcedureOutput()}},h={id:`edge-${r}`,source:u.id,target:e},f=Js.getState().edges;Js.getState().setNodes([...t,u]),Js.getState().setEdges([...f,h])}async function jK(n){var t,i;console.log(&quot;receive_procedure&quot;),console.log(&quot;Instance ID:&quot;,n.instanceId());let e=(t=n.serverReply())==null?void 0:t.fileObjectsLength();if(e)for(let r=0;r&lt;e;r++){let s=(i=n.serverReply())==null?void 0:i.fileObjects(r);if(!s){console.error(&quot;No file object found in the message&quot;);continue}GK(s)}}const l1=to(n=&gt;({serverFiles:[],setServerFiles:e=&gt;n({serverFiles:e}),showServerInfoBox:!1,setShowServerInfoBox:e=&gt;n({showServerInfoBox:e}),showUrdfLoader:!1,setShowUrdfLoader:e=&gt;n({showUrdfLoader:e})}));async function WK(n){n.unpack(),l1.getState().setShowServerInfoBox(!0)}async function XK(n){var e,t,i;try{const r=new Od(new Uint8Array(n)),s=lt.getRootAsMessage(r),o=s.commandType();switch(o){case Bn.PING:await x8(s);break;case Bn.UPDATE_SCENE:await _R(s),await MO(s);break;case Bn.MESH_INFO_REPLY:await vR(s);break;case Bn.SERVER_REPLY:const l=(e=s.serverReply())==null?void 0:e.replyTo();switch(l){case Bn.LIST_PROCEDURES:await MO(s);break;case Bn.MESH_INFO_CALLBACK:await vR(s);break;case Bn.VIEW_FILE_OBJECT:console.log(&quot;VIEW_FILE_OBJECT Server Reply message received&quot;),await _R(s);break;case Bn.RUN_PROCEDURE:console.log(&quot;RUN_PROCEDURE Server Reply message received&quot;),await jK(s);break;case Bn.LIST_FILE_OBJECTS:await WK(s);break;default:console.error(&quot;Unknown Server Reply type:&quot;,l)}break;case Bn.ERROR:console.error(&quot;Server Error message received:&quot;),console.error((i=(t=s.serverReply())==null?void 0:t.error())==null?void 0:i.message());break;default:console.error(&quot;Unknown FlatBuffer message type:&quot;,Bn[o])}console.log(&quot;Flatbuffer message received&quot;),console.log(&quot;Instance ID:&quot;,s.instanceId()),console.log(&quot;Command Type:&quot;,Bn[s.commandType()]),console.log(&quot;Mesh Info:&quot;,s.meshInfo())}catch(r){console.error(&quot;Error handling FlatBuffer message:&quot;,r)}}async function EL(n){try{if(n.data instanceof Blob){const e=await n.data.arrayBuffer();await XK(e)}else console.log(&quot;Message from server&quot;,n.data)}catch(e){console.error(&quot;Error handling WebSocket message:&quot;,e)}}const wa=to(n=&gt;({isOptionsVisible:!1,showPerf:!1,showEdges:!0,lockTranslation:!1,enableWebsocket:!0,enableNodeEditor:!1,pointSize:.01,pointSizeAbsolute:!0,useGpuPointPicking:!0,setIsOptionsVisible:e=&gt;n({isOptionsVisible:e}),setShowPerf:e=&gt;n({showPerf:e}),setShowEdges:e=&gt;n({showEdges:e}),setLockTranslation:e=&gt;n({lockTranslation:e}),setEnableNodeEditor:e=&gt;n({enableNodeEditor:e}),setPointSize:e=&gt;n({pointSize:e}),setPointSizeAbsolute:e=&gt;n({pointSizeAbsolute:e}),setUseGpuPointPicking:e=&gt;n({useGpuPointPicking:e}),setEnableWebsocket:async e=&gt;{n({enableWebsocket:e});try{if(e){const t=tI.getState().webSocketAddress;await Mi.connect(t),(async()=&gt;{for await(const i of Mi.messages())await EL(i)})().catch(i=&gt;{console.error(&quot;Error in WS message loop:&quot;,i)})}else await Mi.disconnect()}catch(t){console.error(&quot;Error toggling WebSocket:&quot;,t)}}})),eo=to(n=&gt;({selectedObjects:new Map,addSelectedObject:(e,t)=&gt;n(i=&gt;{const r=new Map(i.selectedObjects),s=new Set(r.get(e)||[]);return s.add(t),r.set(e,s),e instanceof Ni?e.updateSelectionGroups(Array.from(s)):e.traverse(o=&gt;{o instanceof Ni&amp;&amp;o.updateSelectionGroups(Array.from(s))}),{selectedObjects:r}}),removeSelectedObject:(e,t)=&gt;n(i=&gt;{const r=new Map(i.selectedObjects),s=r.get(e);if(s){const o=new Set(s);o.delete(t),o.size===0?(e instanceof Ni?e.clearSelectionGroups():e.isPoints?U0(e):e.traverse(l=&gt;{l instanceof Ni&amp;&amp;l.clearSelectionGroups()}),r.delete(e)):(r.set(e,o),e instanceof Ni?e.updateSelectionGroups(Array.from(o)):e.isPoints||e.traverse(l=&gt;{l instanceof Ni&amp;&amp;l.updateSelectionGroups(Array.from(o))}))}return{selectedObjects:r}}),clearSelectedObjects:()=&gt;n(e=&gt;(e.selectedObjects.forEach((t,i)=&gt;{i instanceof Ni?i.clearSelectionGroups():i.isPoints?U0(i):i.traverse(r=&gt;{r instanceof Ni&amp;&amp;r.clearSelectionGroups()})}),{selectedObjects:new Map})),addBatchofMeshes:e=&gt;n(t=&gt;{const i=new Map(t.selectedObjects),r=new Map;return e.forEach(([s,o])=&gt;{r.has(s)||r.set(s,new Set),r.get(s).add(o)}),r.forEach((s,o)=&gt;{const l=new Set(i.get(o)||[]);s.forEach(u=&gt;l.add(u)),i.set(o,l),o instanceof Ni?o.updateSelectionGroups(Array.from(l)):o.traverse(u=&gt;{u instanceof Ni&amp;&amp;u.updateSelectionGroups(Array.from(l))})}),{selectedObjects:i}})})),AO={type:&quot;change&quot;},c1={type:&quot;start&quot;},TL={type:&quot;end&quot;},dg=new Cl,CO=new ta,qK=Math.cos(70*ra.DEG2RAD),ki=new K,Pr=2*Math.PI,kn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Ox=1e-6;class kc extends qD{constructor(e,t=null){super(e,t),this.state=kn.NONE,this.target=new K,this.cursor=new K,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:&quot;ArrowLeft&quot;,UP:&quot;ArrowUp&quot;,RIGHT:&quot;ArrowRight&quot;,BOTTOM:&quot;ArrowDown&quot;},this.mouseButtons={LEFT:Ec.ROTATE,MIDDLE:Ec.DOLLY,RIGHT:Ec.PAN},this.touches={ONE:_c.ROTATE,TWO:_c.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new K,this._lastQuaternion=new Ti,this._lastTargetPosition=new K,this._quat=new Ti().setFromUnitVectors(e.up,new K(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new _S,this._sphericalDelta=new _S,this._scale=1,this._panOffset=new K,this._rotateStart=new Re,this._rotateEnd=new Re,this._rotateDelta=new Re,this._panStart=new Re,this._panEnd=new Re,this._panDelta=new Re,this._dollyStart=new Re,this._dollyEnd=new Re,this._dollyDelta=new Re,this._dollyDirection=new K,this._mouse=new Re,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=KK.bind(this),this._onPointerDown=YK.bind(this),this._onPointerUp=$K.bind(this),this._onContextMenu=i$.bind(this),this._onMouseWheel=QK.bind(this),this._onKeyDown=e$.bind(this),this._onTouchStart=t$.bind(this),this._onTouchMove=n$.bind(this),this._onMouseDown=ZK.bind(this),this._onMouseMove=JK.bind(this),this._interceptControlDown=r$.bind(this),this._interceptControlUp=s$.bind(this),this.domElement!==null&amp;&amp;this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener(&quot;pointerdown&quot;,this._onPointerDown),this.domElement.addEventListener(&quot;pointercancel&quot;,this._onPointerUp),this.domElement.addEventListener(&quot;contextmenu&quot;,this._onContextMenu),this.domElement.addEventListener(&quot;wheel&quot;,this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener(&quot;keydown&quot;,this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction=&quot;none&quot;}disconnect(){this.domElement.removeEventListener(&quot;pointerdown&quot;,this._onPointerDown),this.domElement.removeEventListener(&quot;pointermove&quot;,this._onPointerMove),this.domElement.removeEventListener(&quot;pointerup&quot;,this._onPointerUp),this.domElement.removeEventListener(&quot;pointercancel&quot;,this._onPointerUp),this.domElement.removeEventListener(&quot;wheel&quot;,this._onMouseWheel),this.domElement.removeEventListener(&quot;contextmenu&quot;,this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener(&quot;keydown&quot;,this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction=&quot;auto&quot;}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener(&quot;keydown&quot;,this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&amp;&amp;(this._domElementKeyEvents.removeEventListener(&quot;keydown&quot;,this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(AO),this.update(),this.state=kn.NONE}update(e=null){const t=this.object.position;ki.copy(t).sub(this.target),ki.applyQuaternion(this._quat),this._spherical.setFromVector3(ki),this.autoRotate&amp;&amp;this.state===kn.NONE&amp;&amp;this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&amp;&amp;isFinite(r)&amp;&amp;(i&lt;-Math.PI?i+=Pr:i&gt;Math.PI&amp;&amp;(i-=Pr),r&lt;-Math.PI?r+=Pr:r&gt;Math.PI&amp;&amp;(r-=Pr),i&lt;=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta&gt;(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&amp;&amp;this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(ki.setFromSpherical(this._spherical),ki.applyQuaternion(this._quatInverse),t.copy(this.target).add(ki),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&amp;&amp;this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const l=ki.length();o=this._clampDistance(l*this._scale);const u=l-o;this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),s=!!u}else if(this.object.isOrthographicCamera){const l=new K(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=u!==this.object.zoom;const h=new K(this._mouse.x,this._mouse.y,0);h.unproject(this.object),this.object.position.sub(h).add(l),this.object.updateMatrixWorld(),o=ki.length()}else console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.&quot;),this.zoomToCursor=!1;o!==null&amp;&amp;(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(dg.origin.copy(this.object.position),dg.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(dg.direction))&lt;qK?this.object.lookAt(this.target):(CO.setFromNormalAndCoplanarPoint(this.object.up,this.target),dg.intersectPlane(CO,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&amp;&amp;(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)&gt;Ox||8*(1-this._lastQuaternion.dot(this.object.quaternion))&gt;Ox||this._lastTargetPosition.distanceToSquared(this.target)&gt;Ox?(this.dispatchEvent(AO),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Pr/60*this.autoRotateSpeed*e:Pr/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){ki.setFromMatrixColumn(t,0),ki.multiplyScalar(-e),this._panOffset.add(ki)}_panUp(e,t){this.screenSpacePanning===!0?ki.setFromMatrixColumn(t,1):(ki.setFromMatrixColumn(t,0),ki.crossVectors(this.object.up,ki)),ki.multiplyScalar(e),this._panOffset.add(ki)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;ki.copy(r).sub(this.target);let s=ki.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/i.clientHeight,this.object.matrix),this._panUp(2*t*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.&quot;),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.&quot;),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.&quot;),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),r=e-i.left,s=t-i.top,o=i.width,l=i.height;this._mouse.x=r/o*2-1,this._mouse.y=-(s/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Pr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Pr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y&gt;0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y&lt;0&amp;&amp;this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY&lt;0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY&gt;0&amp;&amp;this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateUp(Pr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateUp(-Pr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateLeft(Pr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateLeft(-Pr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(-this.keyPanSpeed,0),t=!0;break}t&amp;&amp;(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&amp;&amp;this._handleTouchStartDolly(e),this.enablePan&amp;&amp;this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&amp;&amp;this._handleTouchStartDolly(e),this.enableRotate&amp;&amp;this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),s=.5*(e.pageY+i.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Pr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Pr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,l=(e.pageY+t.y)*.5;this._updateZoomParameters(o,l)}_handleTouchMoveDollyPan(e){this.enableZoom&amp;&amp;this._handleTouchMoveDolly(e),this.enablePan&amp;&amp;this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&amp;&amp;this._handleTouchMoveDolly(e),this.enableRotate&amp;&amp;this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t&lt;this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t&lt;this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&amp;&amp;(t=new Re,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&amp;&amp;!this._controlActive&amp;&amp;(i.deltaY*=10),i}}function YK(n){this.enabled!==!1&amp;&amp;(this._pointers.length===0&amp;&amp;(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener(&quot;pointermove&quot;,this._onPointerMove),this.domElement.addEventListener(&quot;pointerup&quot;,this._onPointerUp)),!this._isTrackingPointer(n)&amp;&amp;(this._addPointer(n),n.pointerType===&quot;touch&quot;?this._onTouchStart(n):this._onMouseDown(n)))}function KK(n){this.enabled!==!1&amp;&amp;(n.pointerType===&quot;touch&quot;?this._onTouchMove(n):this._onMouseMove(n))}function $K(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener(&quot;pointermove&quot;,this._onPointerMove),this.domElement.removeEventListener(&quot;pointerup&quot;,this._onPointerUp),this.dispatchEvent(TL),this.state=kn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function ZK(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Ec.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=kn.DOLLY;break;case Ec.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=kn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=kn.ROTATE}break;case Ec.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=kn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=kn.PAN}break;default:this.state=kn.NONE}this.state!==kn.NONE&amp;&amp;this.dispatchEvent(c1)}function JK(n){switch(this.state){case kn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case kn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case kn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function QK(n){this.enabled===!1||this.enableZoom===!1||this.state!==kn.NONE||(n.preventDefault(),this.dispatchEvent(c1),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(TL))}function e$(n){this.enabled!==!1&amp;&amp;this._handleKeyDown(n)}function t$(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case _c.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=kn.TOUCH_ROTATE;break;case _c.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=kn.TOUCH_PAN;break;default:this.state=kn.NONE}break;case 2:switch(this.touches.TWO){case _c.DOLLY_PAN:if(this.enableZoom===!1&amp;&amp;this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=kn.TOUCH_DOLLY_PAN;break;case _c.DOLLY_ROTATE:if(this.enableZoom===!1&amp;&amp;this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=kn.TOUCH_DOLLY_ROTATE;break;default:this.state=kn.NONE}break;default:this.state=kn.NONE}this.state!==kn.NONE&amp;&amp;this.dispatchEvent(c1)}function n$(n){switch(this._trackPointer(n),this.state){case kn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case kn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case kn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&amp;&amp;this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case kn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&amp;&amp;this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=kn.NONE}}function i$(n){this.enabled!==!1&amp;&amp;n.preventDefault()}function r$(n){n.key===&quot;Control&quot;&amp;&amp;(this._controlActive=!0,this.domElement.getRootNode().addEventListener(&quot;keyup&quot;,this._interceptControlUp,{passive:!0,capture:!0}))}function s$(n){n.key===&quot;Control&quot;&amp;&amp;(this._controlActive=!1,this.domElement.getRootNode().removeEventListener(&quot;keyup&quot;,this._interceptControlUp,{passive:!0,capture:!0}))}/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const ni={LEFT:1,RIGHT:2,MIDDLE:4},Se=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),zu={NONE:0,IN:1,OUT:-1};function cc(n){return n.isPerspectiveCamera}function al(n){return n.isOrthographicCamera}const Bu=Math.PI*2,RO=Math.PI/2,ML=1e-5,Gf=Math.PI/180;function Gs(n,e,t){return Math.max(e,Math.min(t,n))}function Gn(n,e=ML){return Math.abs(n)&lt;e}function An(n,e,t=ML){return Gn(n-e,t)}function OO(n,e){return Math.round(n/e)*e}function jf(n){return isFinite(n)?n:n&lt;0?-Number.MAX_VALUE:Number.MAX_VALUE}function Wf(n){return Math.abs(n)&lt;Number.MAX_VALUE?n:n*(1/0)}function pg(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,l=o*s,u=1/(1+l+.48*l*l+.235*l*l*l);let h=n-e;const f=e,p=r*i;h=Gs(h,-p,p),e=n-h;const m=(t.value+o*h)*s;t.value=(t.value-o*m)*u;let g=e+(h+m)*u;return f-n&gt;0==g&gt;f&amp;&amp;(g=f,t.value=(g-f)/s),g}function NO(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const l=2/i,u=l*s,h=1/(1+u+.48*u*u+.235*u*u*u);let f=e.x,p=e.y,m=e.z,g=n.x-f,v=n.y-p,x=n.z-m;const b=f,_=p,T=m,w=r*i,S=w*w,C=g*g+v*v+x*x;if(C&gt;S){const $=Math.sqrt(C);g=g/$*w,v=v/$*w,x=x/$*w}f=n.x-g,p=n.y-v,m=n.z-x;const O=(t.x+l*g)*s,M=(t.y+l*v)*s,N=(t.z+l*x)*s;t.x=(t.x-l*O)*h,t.y=(t.y-l*M)*h,t.z=(t.z-l*N)*h,o.x=f+(g+O)*h,o.y=p+(v+M)*h,o.z=m+(x+N)*h;const R=b-n.x,D=_-n.y,L=T-n.z,H=o.x-b,q=o.y-_,z=o.z-T;return R*H+D*q+L*z&gt;0&amp;&amp;(o.x=b,o.y=_,o.z=T,t.x=(o.x-b)/s,t.y=(o.y-_)/s,t.z=(o.z-T)/s),o}function Nx(n,e){e.set(0,0),n.forEach(t=&gt;{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function Dx(n,e){return al(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class o${constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&amp;&amp;(i[e]=[]),i[e].indexOf(t)===-1&amp;&amp;i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&amp;&amp;i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&amp;&amp;r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&amp;&amp;(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s&lt;o;s++)r[s].call(this,e)}}}var Ix;const a$=&quot;2.10.1&quot;,mg=1/8,l$=/Mac/.test((Ix=globalThis==null?void 0:globalThis.navigator)===null||Ix===void 0?void 0:Ix.platform);let Ft,DO,gg,Px,Lr,Kt,Sn,Hu,Xf,po,mo,uc,IO,PO,vs,qf,Vu,LO,Lx,UO,Ux,kx,yg;class Sh extends o${static install(e){Ft=e.THREE,DO=Object.freeze(new Ft.Vector3(0,0,0)),gg=Object.freeze(new Ft.Vector3(0,1,0)),Px=Object.freeze(new Ft.Vector3(0,0,1)),Lr=new Ft.Vector2,Kt=new Ft.Vector3,Sn=new Ft.Vector3,Hu=new Ft.Vector3,Xf=new Ft.Vector3,po=new Ft.Vector3,mo=new Ft.Vector3,uc=new Ft.Vector3,IO=new Ft.Vector3,PO=new Ft.Vector3,vs=new Ft.Spherical,qf=new Ft.Spherical,Vu=new Ft.Box3,LO=new Ft.Box3,Lx=new Ft.Sphere,UO=new Ft.Quaternion,Ux=new Ft.Quaternion,kx=new Ft.Matrix4,yg=new Ft.Raycaster}static get ACTION(){return Se}set verticalDragToForward(e){console.warn(&quot;camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.&quot;)}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=&gt;{},this._enabled=!0,this._state=Se.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=zu.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Ft.Vector3,this._focalOffsetVelocity=new Ft.Vector3,this._zoomVelocity={value:0},this._truckInternal=(_,T,w,S)=&gt;{let C,O;if(cc(this._camera)){const M=Kt.copy(this._camera.position).sub(this._target),N=this._camera.getEffectiveFOV()*Gf,R=M.length()*Math.tan(N*.5);C=this.truckSpeed*_*R/this._elementRect.height,O=this.truckSpeed*T*R/this._elementRect.height}else if(al(this._camera)){const M=this._camera;C=this.truckSpeed*_*(M.right-M.left)/M.zoom/this._elementRect.width,O=this.truckSpeed*T*(M.top-M.bottom)/M.zoom/this._elementRect.height}else return;S?(w?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(C,0,!0),this.forward(-O,!0)):w?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y+O,this._focalOffsetEnd.z,!0):this.truck(C,O,!0)},this._rotateInternal=(_,T)=&gt;{const w=Bu*this.azimuthRotateSpeed*_/this._elementRect.height,S=Bu*this.polarRotateSpeed*T/this._elementRect.height;this.rotate(w,S,!0)},this._dollyInternal=(_,T,w)=&gt;{const S=Math.pow(.95,-_*this.dollySpeed),C=this._sphericalEnd.radius,O=this._sphericalEnd.radius*S,M=Gs(O,this.minDistance,this.maxDistance),N=M-O;this.infinityDolly&amp;&amp;this.dollyToCursor?this._dollyToNoClamp(O,!0):this.infinityDolly&amp;&amp;!this.dollyToCursor?(this.dollyInFixed(N,!0),this._dollyToNoClamp(M,!0)):this._dollyToNoClamp(M,!0),this.dollyToCursor&amp;&amp;(this._changedDolly+=(this.infinityDolly?O:M)-C,this._dollyControlCoord.set(T,w)),this._lastDollyDirection=Math.sign(-_)},this._zoomInternal=(_,T,w)=&gt;{const S=Math.pow(.95,_*this.dollySpeed),C=this._zoom,O=this._zoom*S;this.zoomTo(O,!0),this.dollyToCursor&amp;&amp;(this._changedZoom+=O-C,this._dollyControlCoord.set(T,w))},typeof Ft&gt;&quot;u&quot;&amp;&amp;console.error(&quot;camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information.&quot;),this._camera=e,this._yAxisUpSpace=new Ft.Quaternion().setFromUnitVectors(this._camera.up,gg),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Se.NONE,this._target=new Ft.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Ft.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Ft.Spherical().setFromVector3(Kt.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Ft.Vector3,new Ft.Vector3,new Ft.Vector3,new Ft.Vector3],this._updateNearPlaneCorners(),this._boundary=new Ft.Box3(new Ft.Vector3(-1/0,-1/0,-1/0),new Ft.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Ft.Vector2,this.mouseButtons={left:Se.ROTATE,middle:Se.DOLLY,right:Se.TRUCK,wheel:cc(this._camera)?Se.DOLLY:al(this._camera)?Se.ZOOM:Se.NONE},this.touches={one:Se.TOUCH_ROTATE,two:cc(this._camera)?Se.TOUCH_DOLLY_TRUCK:al(this._camera)?Se.TOUCH_ZOOM_TRUCK:Se.NONE,three:Se.TOUCH_TRUCK};const i=new Ft.Vector2,r=new Ft.Vector2,s=new Ft.Vector2,o=_=&gt;{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const S=this._domElement.getBoundingClientRect(),C=_.clientX/S.width,O=_.clientY/S.height;if(C&lt;this._interactiveArea.left||C&gt;this._interactiveArea.right||O&lt;this._interactiveArea.top||O&gt;this._interactiveArea.bottom)return}const T=_.pointerType!==&quot;mouse&quot;?null:(_.buttons&amp;ni.LEFT)===ni.LEFT?ni.LEFT:(_.buttons&amp;ni.MIDDLE)===ni.MIDDLE?ni.MIDDLE:(_.buttons&amp;ni.RIGHT)===ni.RIGHT?ni.RIGHT:null;if(T!==null){const S=this._findPointerByMouseButton(T);S&amp;&amp;this._disposePointer(S)}if((_.buttons&amp;ni.LEFT)===ni.LEFT&amp;&amp;this._lockedPointer)return;const w={pointerId:_.pointerId,clientX:_.clientX,clientY:_.clientY,deltaX:0,deltaY:0,mouseButton:T};this._activePointers.push(w),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this._domElement.ownerDocument.addEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.addEventListener(&quot;pointerup&quot;,u),this._isDragging=!0,m(_)},l=_=&gt;{_.cancelable&amp;&amp;_.preventDefault();const T=_.pointerId,w=this._lockedPointer||this._findPointerById(T);if(w){if(w.clientX=_.clientX,w.clientY=_.clientY,w.deltaX=_.movementX,w.deltaY=_.movementY,this._state=0,_.pointerType===&quot;touch&quot;)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&amp;&amp;this._lockedPointer||this._isDragging&amp;&amp;(_.buttons&amp;ni.LEFT)===ni.LEFT)&amp;&amp;(this._state=this._state|this.mouseButtons.left),this._isDragging&amp;&amp;(_.buttons&amp;ni.MIDDLE)===ni.MIDDLE&amp;&amp;(this._state=this._state|this.mouseButtons.middle),this._isDragging&amp;&amp;(_.buttons&amp;ni.RIGHT)===ni.RIGHT&amp;&amp;(this._state=this._state|this.mouseButtons.right);g()}},u=_=&gt;{const T=this._findPointerById(_.pointerId);if(!(T&amp;&amp;T===this._lockedPointer)){if(T&amp;&amp;this._disposePointer(T),_.pointerType===&quot;touch&quot;)switch(this._activePointers.length){case 0:this._state=Se.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Se.NONE;v()}};let h=-1;const f=_=&gt;{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Se.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const O=this._domElement.getBoundingClientRect(),M=_.clientX/O.width,N=_.clientY/O.height;if(M&lt;this._interactiveArea.left||M&gt;this._interactiveArea.right||N&lt;this._interactiveArea.top||N&gt;this._interactiveArea.bottom)return}if(_.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Se.ROTATE||this.mouseButtons.wheel===Se.TRUCK){const O=performance.now();h-O&lt;1e3&amp;&amp;this._getClientRect(this._elementRect),h=O}const T=l$?-1:-3,w=_.deltaMode===1||_.ctrlKey?_.deltaY/T:_.deltaY/(T*10),S=this.dollyToCursor?(_.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(_.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Se.ROTATE:{this._rotateInternal(_.deltaX,_.deltaY),this._isUserControllingRotate=!0;break}case Se.TRUCK:{this._truckInternal(_.deltaX,_.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case Se.SCREEN_PAN:{this._truckInternal(_.deltaX,_.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case Se.OFFSET:{this._truckInternal(_.deltaX,_.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case Se.DOLLY:{this._dollyInternal(-w,S,C),this._isUserControllingDolly=!0;break}case Se.ZOOM:{this._zoomInternal(-w,S,C),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:&quot;control&quot;})},p=_=&gt;{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Sh.ACTION.NONE){const T=_ instanceof PointerEvent?_.pointerId:0,w=this._findPointerById(T);w&amp;&amp;this._disposePointer(w),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u);return}_.preventDefault()}},m=_=&gt;{if(!this._enabled)return;if(Nx(this._activePointers,Lr),this._getClientRect(this._elementRect),i.copy(Lr),r.copy(Lr),this._activePointers.length&gt;=2){const w=Lr.x-this._activePointers[1].clientX,S=Lr.y-this._activePointers[1].clientY,C=Math.sqrt(w*w+S*S);s.set(0,C);const O=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,M=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(O,M)}if(this._state=0,!_)this._lockedPointer&amp;&amp;(this._state=this._state|this.mouseButtons.left);else if(&quot;pointerType&quot;in _&amp;&amp;_.pointerType===&quot;touch&quot;)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&amp;&amp;(_.buttons&amp;ni.LEFT)===ni.LEFT&amp;&amp;(this._state=this._state|this.mouseButtons.left),(_.buttons&amp;ni.MIDDLE)===ni.MIDDLE&amp;&amp;(this._state=this._state|this.mouseButtons.middle),(_.buttons&amp;ni.RIGHT)===ni.RIGHT&amp;&amp;(this._state=this._state|this.mouseButtons.right);((this._state&amp;Se.ROTATE)===Se.ROTATE||(this._state&amp;Se.TOUCH_ROTATE)===Se.TOUCH_ROTATE||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE)&amp;&amp;(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&amp;Se.TRUCK)===Se.TRUCK||(this._state&amp;Se.SCREEN_PAN)===Se.SCREEN_PAN||(this._state&amp;Se.TOUCH_TRUCK)===Se.TOUCH_TRUCK||(this._state&amp;Se.TOUCH_SCREEN_PAN)===Se.TOUCH_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN)&amp;&amp;(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&amp;Se.DOLLY)===Se.DOLLY||(this._state&amp;Se.TOUCH_DOLLY)===Se.TOUCH_DOLLY||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE)&amp;&amp;(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&amp;Se.ZOOM)===Se.ZOOM||(this._state&amp;Se.TOUCH_ZOOM)===Se.TOUCH_ZOOM||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_ZOOM_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE)&amp;&amp;(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&amp;Se.OFFSET)===Se.OFFSET||(this._state&amp;Se.TOUCH_OFFSET)===Se.TOUCH_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET)&amp;&amp;(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:&quot;controlstart&quot;})},g=()=&gt;{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Nx(this._activePointers,Lr);const T=this._domElement&amp;&amp;this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,w=T?-T.deltaX:r.x-Lr.x,S=T?-T.deltaY:r.y-Lr.y;if(r.copy(Lr),((this._state&amp;Se.ROTATE)===Se.ROTATE||(this._state&amp;Se.TOUCH_ROTATE)===Se.TOUCH_ROTATE||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE)&amp;&amp;(this._rotateInternal(w,S),this._isUserControllingRotate=!0),(this._state&amp;Se.DOLLY)===Se.DOLLY||(this._state&amp;Se.ZOOM)===Se.ZOOM){const C=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,O=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,M=this.dollyDragInverted?-1:1;(this._state&amp;Se.DOLLY)===Se.DOLLY?(this._dollyInternal(M*S*mg,C,O),this._isUserControllingDolly=!0):(this._zoomInternal(M*S*mg,C,O),this._isUserControllingZoom=!0)}if((this._state&amp;Se.TOUCH_DOLLY)===Se.TOUCH_DOLLY||(this._state&amp;Se.TOUCH_ZOOM)===Se.TOUCH_ZOOM||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_ZOOM_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE){const C=Lr.x-this._activePointers[1].clientX,O=Lr.y-this._activePointers[1].clientY,M=Math.sqrt(C*C+O*O),N=s.y-M;s.set(0,M);const R=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,D=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&amp;Se.TOUCH_DOLLY)===Se.TOUCH_DOLLY||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET?(this._dollyInternal(N*mg,R,D),this._isUserControllingDolly=!0):(this._zoomInternal(N*mg,R,D),this._isUserControllingZoom=!0)}((this._state&amp;Se.TRUCK)===Se.TRUCK||(this._state&amp;Se.TOUCH_TRUCK)===Se.TOUCH_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK)&amp;&amp;(this._truckInternal(w,S,!1,!1),this._isUserControllingTruck=!0),((this._state&amp;Se.SCREEN_PAN)===Se.SCREEN_PAN||(this._state&amp;Se.TOUCH_SCREEN_PAN)===Se.TOUCH_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_ZOOM_SCREEN_PAN)&amp;&amp;(this._truckInternal(w,S,!1,!0),this._isUserControllingTruck=!0),((this._state&amp;Se.OFFSET)===Se.OFFSET||(this._state&amp;Se.TOUCH_OFFSET)===Se.TOUCH_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET)&amp;&amp;(this._truckInternal(w,S,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:&quot;control&quot;})},v=()=&gt;{Nx(this._activePointers,Lr),r.copy(Lr),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&amp;&amp;this._activePointers[0]===this._lockedPointer)&amp;&amp;(this._isDragging=!1),this._activePointers.length===0&amp;&amp;this._domElement&amp;&amp;(this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this.dispatchEvent({type:&quot;controlend&quot;}))};this.lockPointer=()=&gt;{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener(&quot;pointerlockchange&quot;,x),this._domElement.ownerDocument.addEventListener(&quot;pointerlockerror&quot;,b),this._domElement.ownerDocument.addEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.addEventListener(&quot;pointerup&quot;,u),m())},this.unlockPointer=()=&gt;{var _,T,w;this._lockedPointer!==null&amp;&amp;(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(_=this._domElement)===null||_===void 0||_.ownerDocument.exitPointerLock(),(T=this._domElement)===null||T===void 0||T.ownerDocument.removeEventListener(&quot;pointerlockchange&quot;,x),(w=this._domElement)===null||w===void 0||w.ownerDocument.removeEventListener(&quot;pointerlockerror&quot;,b),this.cancel()};const x=()=&gt;{this._domElement&amp;&amp;this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},b=()=&gt;{this.unlockPointer()};this._addAllEventListeners=_=&gt;{this._domElement=_,this._domElement.style.touchAction=&quot;none&quot;,this._domElement.style.userSelect=&quot;none&quot;,this._domElement.style.webkitUserSelect=&quot;none&quot;,this._domElement.addEventListener(&quot;pointerdown&quot;,o),this._domElement.addEventListener(&quot;pointercancel&quot;,u),this._domElement.addEventListener(&quot;wheel&quot;,f,{passive:!1}),this._domElement.addEventListener(&quot;contextmenu&quot;,p)},this._removeAllEventListeners=()=&gt;{this._domElement&amp;&amp;(this._domElement.style.touchAction=&quot;&quot;,this._domElement.style.userSelect=&quot;&quot;,this._domElement.style.webkitUserSelect=&quot;&quot;,this._domElement.removeEventListener(&quot;pointerdown&quot;,o),this._domElement.removeEventListener(&quot;pointercancel&quot;,u),this._domElement.removeEventListener(&quot;wheel&quot;,f,{passive:!1}),this._domElement.removeEventListener(&quot;contextmenu&quot;,p),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this._domElement.ownerDocument.removeEventListener(&quot;pointerlockchange&quot;,x),this._domElement.ownerDocument.removeEventListener(&quot;pointerlockerror&quot;,b))},this.cancel=()=&gt;{this._state!==Se.NONE&amp;&amp;(this._state=Se.NONE,this._activePointers.length=0,v())},t&amp;&amp;this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&amp;&amp;(e?(this._domElement.style.touchAction=&quot;none&quot;,this._domElement.style.userSelect=&quot;none&quot;,this._domElement.style.webkitUserSelect=&quot;none&quot;):(this.cancel(),this._domElement.style.touchAction=&quot;&quot;,this._domElement.style.userSelect=&quot;&quot;,this._domElement.style.webkitUserSelect=&quot;&quot;))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&amp;&amp;this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&amp;&amp;this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&amp;&amp;this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Gs(e.width,0,1),this._interactiveArea.height=Gs(e.height,0,1),this._interactiveArea.x=Gs(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Gs(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=Gs(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Gs(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&amp;&amp;An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=zu.NONE,this._changedDolly=0,this._dollyToNoClamp(Gs(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length&gt;=1){const o=this._collisionTest(),l=An(o,this._spherical.radius);if(!(i&gt;e)&amp;&amp;l)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(Xf).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Gs(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||An(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn(&quot;`pan` has been renamed to `truck`&quot;),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),po.setFromMatrixColumn(this._camera.matrix,0),mo.setFromMatrixColumn(this._camera.matrix,1),po.multiplyScalar(e),mo.multiplyScalar(-t);const r=Kt.copy(po).add(mo),s=Sn.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){Kt.setFromMatrixColumn(this._camera.matrix,0),Kt.crossVectors(this._camera.up,Kt),Kt.multiplyScalar(e);const i=Sn.copy(this._targetEnd).add(Kt);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return Kt.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Kt.x,this._targetEnd.y+Kt.y,this._targetEnd.z+Kt.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=Kt.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const l=Kt.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(l.x,l.y,l.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:l=0}={}){const u=[],h=e.isBox3?Vu.copy(e):Vu.setFromObject(e);h.isEmpty()&amp;&amp;(console.warn(&quot;camera-controls: fitTo() cannot be used with an empty box. Aborting&quot;),Promise.resolve());const f=OO(this._sphericalEnd.theta,RO),p=OO(this._sphericalEnd.phi,RO);u.push(this.rotateTo(f,p,t));const m=Kt.setFromSpherical(this._sphericalEnd).normalize(),g=UO.setFromUnitVectors(m,Px),v=An(Math.abs(m.y),1);v&amp;&amp;g.multiply(Ux.setFromAxisAngle(gg,f)),g.multiply(this._yAxisUpSpaceInverse);const x=LO.makeEmpty();Sn.copy(h.min).applyQuaternion(g),x.expandByPoint(Sn),Sn.copy(h.min).setX(h.max.x).applyQuaternion(g),x.expandByPoint(Sn),Sn.copy(h.min).setY(h.max.y).applyQuaternion(g),x.expandByPoint(Sn),Sn.copy(h.max).setZ(h.min.z).applyQuaternion(g),x.expandByPoint(Sn),Sn.copy(h.min).setZ(h.max.z).applyQuaternion(g),x.expandByPoint(Sn),Sn.copy(h.max).setY(h.min.y).applyQuaternion(g),x.expandByPoint(Sn),Sn.copy(h.max).setX(h.min.x).applyQuaternion(g),x.expandByPoint(Sn),Sn.copy(h.max).applyQuaternion(g),x.expandByPoint(Sn),x.min.x-=r,x.min.y-=o,x.max.x+=s,x.max.y+=l,g.setFromUnitVectors(Px,m),v&amp;&amp;g.premultiply(Ux.invert()),g.premultiply(this._yAxisUpSpace);const b=x.getSize(Kt),_=x.getCenter(Sn).applyQuaternion(g);if(cc(this._camera)){const T=this.getDistanceToFitBox(b.x,b.y,b.z,i);u.push(this.moveTo(_.x,_.y,_.z,t)),u.push(this.dollyTo(T,t)),u.push(this.setFocalOffset(0,0,0,t))}else if(al(this._camera)){const T=this._camera,w=T.right-T.left,S=T.top-T.bottom,C=i?Math.max(w/b.x,S/b.y):Math.min(w/b.x,S/b.y);u.push(this.moveTo(_.x,_.y,_.z,t)),u.push(this.zoomTo(C,t)),u.push(this.setFocalOffset(0,0,0,t))}return Promise.all(u)}fitToSphere(e,t){const i=[],s=&quot;isObject3D&quot;in e?Sh.createBoundingSphere(e,Lx):Lx.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),cc(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(al(this._camera)){const o=this._camera.right-this._camera.left,l=this._camera.top-this._camera.bottom,u=2*s.radius,h=Math.min(o/u,l/u);i.push(this.zoomTo(h,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,l=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=zu.NONE,this._changedDolly=0;const u=Sn.set(r,s,o),h=Kt.set(e,t,i);this._targetEnd.copy(u),this._sphericalEnd.setFromVector3(h.sub(u).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,l||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const f=!l||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold)&amp;&amp;An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&amp;&amp;An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&amp;&amp;An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(f)}lerpLookAt(e,t,i,r,s,o,l,u,h,f,p,m,g,v=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=zu.NONE,this._changedDolly=0;const x=Kt.set(r,s,o),b=Sn.set(e,t,i);vs.setFromVector3(b.sub(x).applyQuaternion(this._yAxisUpSpace));const _=Hu.set(f,p,m),T=Sn.set(l,u,h);qf.setFromVector3(T.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(x.lerp(_,g));const w=qf.theta-vs.theta,S=qf.phi-vs.phi,C=qf.radius-vs.radius;this._sphericalEnd.set(vs.radius+C*g,vs.phi+S*g,vs.theta+w*g),this.normalizeRotations(),this._needsUpdate=!0,v||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const O=!v||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold)&amp;&amp;An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&amp;&amp;An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&amp;&amp;An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(O)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(Kt),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=Gs(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||An(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&amp;&amp;An(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&amp;&amp;An(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),po.setFromMatrixColumn(this._camera.matrixWorldInverse,0),mo.setFromMatrixColumn(this._camera.matrixWorldInverse,1),uc.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=Kt.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);po.multiplyScalar(o.x),mo.multiplyScalar(o.y),uc.multiplyScalar(o.z),Kt.copy(po).add(mo).add(uc),Kt.z=Kt.z+s,this.dollyTo(s,!1),this.setFocalOffset(-Kt.x,Kt.y,-Kt.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Ft.Vector4,typeof e==&quot;number&quot;?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(Dx(this._camera,&quot;getDistanceToFitBox&quot;))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Gf,l=this._camera.aspect;return((r?s&gt;l:s&lt;l)?t:e/l)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(Dx(this._camera,&quot;getDistanceToFitSphere&quot;))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Gf,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1&lt;this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&amp;&amp;e.isVector3?e:new Ft.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&amp;&amp;e.isVector3?e:new Ft.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new Ft.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&amp;&amp;e.isVector3?e:new Ft.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Bu,this._sphericalEnd.theta&lt;0&amp;&amp;(this._sphericalEnd.theta+=Bu),this._spherical.theta+=Bu*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Bu)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!An(this._camera.up.x,this._cameraUp0.x)||!An(this._camera.up.y,this._cameraUp0.y)||!An(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(Kt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,gg),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Kt.subVectors(this._target,this._camera.position).normalize(),t=Sn.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(Kt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=IO.subVectors(this._targetEnd,this._target),o=PO.subVectors(this._focalOffsetEnd,this._focalOffset),l=this._zoomEnd-this._zoom;if(Gn(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=pg(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,p,1/0,e),this._needsUpdate=!0}if(Gn(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=pg(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,p,1/0,e),this._needsUpdate=!0}if(Gn(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const p=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=pg(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,p,this.maxSpeed,e),this._needsUpdate=!0}if(Gn(s.x)&amp;&amp;Gn(s.y)&amp;&amp;Gn(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const p=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;NO(this._target,this._targetEnd,this._targetVelocity,p,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Gn(o.x)&amp;&amp;Gn(o.y)&amp;&amp;Gn(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const p=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;NO(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,p,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Gn(l))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const p=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=pg(this._zoom,this._zoomEnd,this._zoomVelocity,p,1/0,e)}if(this.dollyToCursor){if(cc(this._camera)&amp;&amp;this._changedDolly!==0){const p=this._spherical.radius-this._lastDistance,m=this._camera,g=this._getCameraDirection(Xf),v=Kt.copy(g).cross(m.up).normalize();v.lengthSq()===0&amp;&amp;(v.x=1);const x=Sn.crossVectors(v,g),b=this._sphericalEnd.radius*Math.tan(m.getEffectiveFOV()*Gf*.5),T=(this._sphericalEnd.radius-p-this._sphericalEnd.radius)/this._sphericalEnd.radius,w=Hu.copy(this._targetEnd).add(v.multiplyScalar(this._dollyControlCoord.x*b*m.aspect)).add(x.multiplyScalar(this._dollyControlCoord.y*b)),S=Kt.copy(this._targetEnd).lerp(w,T),C=this._lastDollyDirection===zu.IN&amp;&amp;this._spherical.radius&lt;=this.minDistance,O=this._lastDollyDirection===zu.OUT&amp;&amp;this.maxDistance&lt;=this._spherical.radius;if(this.infinityDolly&amp;&amp;(C||O)){this._sphericalEnd.radius-=p,this._spherical.radius-=p;const N=Sn.copy(g).multiplyScalar(-p);S.add(N)}this._boundary.clampPoint(S,S);const M=Sn.subVectors(S,this._targetEnd);this._targetEnd.copy(S),this._target.add(M),this._changedDolly-=p,Gn(this._changedDolly)&amp;&amp;(this._changedDolly=0)}else if(al(this._camera)&amp;&amp;this._changedZoom!==0){const p=this._zoom-this._lastZoom,m=this._camera,g=Kt.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(m.near+m.far)/(m.near-m.far)).unproject(m),v=Sn.set(0,0,-1).applyQuaternion(m.quaternion),x=Hu.copy(g).add(v.multiplyScalar(-g.dot(m.up))),_=-(this._zoom-p-this._zoom)/this._zoom,T=this._getCameraDirection(Xf),w=this._targetEnd.dot(T),S=Kt.copy(this._targetEnd).lerp(x,_),C=S.dot(T),O=T.multiplyScalar(C-w);S.sub(O),this._boundary.clampPoint(S,S);const M=Sn.subVectors(S,this._targetEnd);this._targetEnd.copy(S),this._target.add(M),this._changedZoom-=p,Gn(this._changedZoom)&amp;&amp;(this._changedZoom=0)}}this._camera.zoom!==this._zoom&amp;&amp;(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const u=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,u),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Gn(this._focalOffset.x)||!Gn(this._focalOffset.y)||!Gn(this._focalOffset.z))&amp;&amp;(po.setFromMatrixColumn(this._camera.matrix,0),mo.setFromMatrixColumn(this._camera.matrix,1),uc.setFromMatrixColumn(this._camera.matrix,2),po.multiplyScalar(this._focalOffset.x),mo.multiplyScalar(-this._focalOffset.y),uc.multiplyScalar(this._focalOffset.z),Kt.copy(po).add(mo).add(uc),this._camera.position.add(Kt),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&amp;&amp;this._encloseToBoundary(this._camera.position.copy(this._target),Kt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const f=this._needsUpdate;return f&amp;&amp;!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:&quot;wake&quot;}),this.dispatchEvent({type:&quot;update&quot;})):f?(this.dispatchEvent({type:&quot;update&quot;}),Gn(t,this.restThreshold)&amp;&amp;Gn(i,this.restThreshold)&amp;&amp;Gn(r,this.restThreshold)&amp;&amp;Gn(s.x,this.restThreshold)&amp;&amp;Gn(s.y,this.restThreshold)&amp;&amp;Gn(s.z,this.restThreshold)&amp;&amp;Gn(o.x,this.restThreshold)&amp;&amp;Gn(o.y,this.restThreshold)&amp;&amp;Gn(o.z,this.restThreshold)&amp;&amp;Gn(l,this.restThreshold)&amp;&amp;!this._hasRested&amp;&amp;(this._hasRested=!0,this.dispatchEvent({type:&quot;rest&quot;}))):!f&amp;&amp;this._updatedLastTime&amp;&amp;this.dispatchEvent({type:&quot;sleep&quot;}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=f,this._needsUpdate=!1,f}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:jf(this.maxDistance),minZoom:this.minZoom,maxZoom:jf(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:jf(this.maxPolarAngle),minAzimuthAngle:jf(this.minAzimuthAngle),maxAzimuthAngle:jf(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:Kt.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Wf(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Wf(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Wf(i.maxPolarAngle),this.minAzimuthAngle=Wf(i.minAzimuthAngle),this.maxAzimuthAngle=Wf(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),vs.setFromVector3(Kt.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(vs.theta,vs.phi,t),this.dollyTo(vs.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn(&quot;camera-controls is already connected.&quot;);return}e.setAttribute(&quot;data-camera-controls-version&quot;,a$),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&amp;&amp;(this._domElement.removeAttribute(&quot;data-camera-controls-version&quot;),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=&gt;t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=&gt;t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=Sn.copy(t).add(e),l=this._boundary.clampPoint(s,Hu).sub(s),u=l.lengthSq();if(u===0)return e.add(t);if(u===r)return e;if(i===0)return e.add(t).add(l);{const h=1+i*u/t.dot(l);return e.add(Sn.copy(t).multiplyScalar(h)).add(l.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(cc(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*Gf,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(al(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length&gt;=1)||Dx(this._camera,&quot;_collisionTest&quot;))return e;const i=this._getTargetDirection(Xf);kx.lookAt(DO,i,this._camera.up);for(let r=0;r&lt;4;r++){const s=Sn.copy(this._nearPlaneCorners[r]);s.applyMatrix4(kx);const o=Hu.addVectors(this._target,s);yg.set(o,i),yg.far=this._spherical.radius+1;const l=yg.intersectObjects(this.colliderMeshes);l.length!==0&amp;&amp;l[0].distance&lt;e&amp;&amp;(e=l[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:&quot;transitionstart&quot;}),new Promise(t=&gt;{const i=()=&gt;{this.removeEventListener(&quot;rest&quot;,i),t()};this.addEventListener(&quot;rest&quot;,i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(&quot;.dampingFactor has been deprecated. use smoothTime (in seconds) instead.&quot;),0}set dampingFactor(e){console.warn(&quot;.dampingFactor has been deprecated. use smoothTime (in seconds) instead.&quot;)}get draggingDampingFactor(){return console.warn(&quot;.draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.&quot;),0}set draggingDampingFactor(e){console.warn(&quot;.draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.&quot;)}static createBoundingSphere(e,t=new Ft.Sphere){const i=t,r=i.center;Vu.makeEmpty(),e.traverseVisible(o=&gt;{o.isMesh&amp;&amp;Vu.expandByObject(o)}),Vu.getCenter(r);let s=0;return e.traverseVisible(o=&gt;{if(!o.isMesh)return;const l=o;if(!l.geometry)return;const u=l.geometry.clone();u.applyMatrix4(l.matrixWorld);const f=u.attributes.position;for(let p=0,m=f.count;p&lt;m;p++)Kt.fromBufferAttribute(f,p),s=Math.max(s,r.distanceToSquared(Kt))}),i.radius=Math.sqrt(s),i}}const c$=(n,e,t=1)=&gt;{const i=eo.getState().selectedObjects;if(n&amp;&amp;e){const r=new di,s=new K;let o=!1;if(i.size&gt;0&amp;&amp;i.forEach((l,u)=&gt;{const h=u;if(!h||!h.geometry)return;const f=h.geometry,p=f.getAttribute(&quot;position&quot;);if(!p)return;const m=f.morphAttributes&amp;&amp;f.morphAttributes.position,g=f.morphTargetsRelative===!0,v=h.morphTargetInfluences,x=(T,w)=&gt;{if(!m||!v)return;let S=0;for(let C=0;C&lt;m.length;C++){const O=v[C]||0;if(O===0)continue;S+=O;const M=m[C],N=M.getX(T),R=M.getY(T),D=M.getZ(T);g?(w.x+=N*O,w.y+=R*O,w.z+=D*O):(w.x=w.x*(1-S)+N*O,w.y=w.y*(1-S)+R*O,w.z=w.z*(1-S)+D*O)}};if(h.isPoints){const T=f.getAttribute(&quot;sel&quot;);if(T){for(let w=0;w&lt;T.count;w++)if(T.getX(w)&gt;.5){if(s.fromBufferAttribute(p,w),x(w,s),isNaN(s.x)||isNaN(s.y)||isNaN(s.z))continue;h.localToWorld(s),r.expandByPoint(s),o=!0}}Fx(r,e,t,n);return}const b=f.getIndex();if(!b||!h.drawRanges)return;const _=b.array;l.forEach(T=&gt;{const w=h.drawRanges.get(T);if(!w)return;const[S,C]=w;if(!(S&lt;0||S+C&gt;_.length))for(let O=S;O&lt;S+C;O++){const M=_[O];M&lt;0||M&gt;=p.count||(s.fromBufferAttribute(p,M),x(M,s),!(isNaN(s.x)||isNaN(s.y)||isNaN(s.z))&amp;&amp;(h.localToWorld(s),r.expandByPoint(s),o=!0))}})}),o&amp;&amp;!r.isEmpty())Fx(r,e,t,n);else if(IC.current){const u=IC.current.position,h=1.5,f=new di;f.setFromCenterAndSize(u,new K(h,h,h)),Fx(f,e,t,n)}else console.warn(&quot;No selected geometry or points to center view on.&quot;)}else console.warn(&quot;Controls or camera not available to center view.&quot;)};function Fx(n,e,t=1,i){if(n.isEmpty()){console.warn(&quot;Bounding box is empty after processing selected vertices.&quot;);return}const{zIsUp:r}=io.getState(),s=new pi;n.getBoundingSphere(s);const o=s.center,l=s.radius;if(l===0||isNaN(l)){console.warn(&quot;Selection has zero size or invalid radius.&quot;);return}let u=0;if(e instanceof Yn){const p=e.fov*Math.PI/180;u=l/Math.sin(p/2)/t}else if(e instanceof Vc){const p=e.right/e.top;e.top=l/t,e.bottom=-l/t,e.left=-l*p/t,e.right=l*p/t,e.updateProjectionMatrix(),u=e.position.distanceTo(o)}else{console.warn(&quot;Unknown camera type.&quot;);return}const h=new K;e.getWorldDirection(h).normalize();const f=o.clone().add(h.multiplyScalar(-u));if(e.position.copy(f),r?e.up.set(0,0,1):e.up.set(0,1,0),e.lookAt(o),e.updateProjectionMatrix(),i instanceof kc)i.target.copy(o),i.update();else{const p=i,m=new pi(o,l/t);p.fitToSphere(m,!0)}}function u$(n,e,t){const i=r=&gt;{const s=r.key.toLowerCase(),o=r.shiftKey,l=eo.getState().selectedObjects;if(o&amp;&amp;s===&quot;h&quot;)l.forEach((u,h)=&gt;{h instanceof Ni?h.hideBatchDrawRange(u):h.traverse(f=&gt;{f instanceof Ni&amp;&amp;f.hideBatchDrawRange(u)})});else if(o&amp;&amp;s===&quot;u&quot;)n.traverse(u=&gt;{u instanceof Ni&amp;&amp;u.unhideAllDrawRanges()});else if(o&amp;&amp;s===&quot;f&quot;)c$(t,e);else if(o&amp;&amp;s===&quot;a&quot;)h$(n,e,t);else if(o&amp;&amp;s===&quot;q&quot;){const{isOptionsVisible:u,setIsOptionsVisible:h}=wa.getState();h(!u)}};return window.addEventListener(&quot;keydown&quot;,i),()=&gt;{window.removeEventListener(&quot;keydown&quot;,i)}}const h$=(n,e,t)=&gt;{const i=new di;let r=!1;if(n.traverse(b=&gt;{if(b instanceof gn){const _=new di().setFromObject(b);_.isEmpty()||(i.union(_),r=!0)}}),!r||i.isEmpty())return;const s=i.getBoundingSphere(new pi);if(!s||s.radius===0)return;const o=s.center.clone(),l=s.radius,u=ra.degToRad(e.fov),h=e.aspect||1,f=l/Math.tan(u/2),p=2*Math.atan(Math.tan(u/2)*h),m=l/Math.tan(p/2),g=Math.max(f,m),v=new K;e.getWorldDirection(v).normalize();const x=o.clone().add(v.clone().multiplyScalar(-g));t instanceof kc?(e.position.copy(x),e.lookAt(o),t.target.copy(o)):t instanceof Sh&amp;&amp;t.setLookAt(x.x,x.y,x.z,o.x,o.y,o.z,!0),e.updateProjectionMatrix(),t instanceof kc&amp;&amp;t.update()};function f$(n,e){const t=new Yn(60,n.clientWidth/n.clientHeight,.1,1e4);t.position.set(-5,5,5),t.layers.enable(0),t.layers.enable(1);const i=e?new K(0,0,1):new K(0,1,0);return t.up.copy(i),t.updateProjectionMatrix(),t}Sh.install({THREE:t8});function d$(n,e,t,i){const r=e.querySelector(&quot;canvas&quot;);if(!r)throw new Error(&quot;Renderer canvas not found&quot;);let s;return i?(s=new kc(n,r),console.log(&quot;Using OrbitControls&quot;)):(s=new Sh(n,r),console.log(&quot;Using CameraControls&quot;)),s}function p$(n,e){const t=new ep(16777215,1.4);t.castShadow=!1,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,t.shadow.camera.near=.5,t.shadow.camera.far=500,t.shadow.bias=-1e-4,e.add(t);const i=new nn;return e.add(i),t.target=i,t.position.copy(n.position),()=&gt;{t.position.copy(n.position);const r=new K;n.getWorldDirection(r),i.position.copy(n.position.clone().add(r)),t.target.updateMatrixWorld()}}function m$(n,e){const t=new Gy(16777215,Math.PI/2);return n.add(t),{updateCameraLight:p$(e,n)}}function g$(n){const{zIsUp:e}=io.getState(),t=new XD(100,100,8947848,4473924);return t.material.depthWrite=!1,t.renderOrder=-1,t.layers.set(1),e&amp;&amp;(t.rotation.x=Math.PI/2),n.add(t),t}class kO extends HTMLElement{constructor(e,t){super(),this.camera=e,this.options=Object.assign({size:150,padding:8,bubbleSizePrimary:10,bubbleSizeSeconday:10,showSecondary:!0,lineWidth:2,fontSize:&quot;10px&quot;,fontFamily:&quot;arial&quot;,fontWeight:&quot;bold&quot;,fontColor:&quot;#151515&quot;,fontYAdjust:0,colors:{x:[&quot;#f73c3c&quot;,&quot;#942424&quot;],y:[&quot;#6ccb26&quot;,&quot;#417a17&quot;],z:[&quot;#178cf0&quot;,&quot;#0e5490&quot;]}},t),this.onAxisSelected=null,this.bubbles=[{axis:&quot;x&quot;,direction:new K(1,0,0),size:this.options.bubbleSizePrimary,color:this.options.colors.x,line:this.options.lineWidth,label:&quot;X&quot;},{axis:&quot;y&quot;,direction:new K(0,1,0),size:this.options.bubbleSizePrimary,color:this.options.colors.y,line:this.options.lineWidth,label:&quot;Y&quot;},{axis:&quot;z&quot;,direction:new K(0,0,1),size:this.options.bubbleSizePrimary,color:this.options.colors.z,line:this.options.lineWidth,label:&quot;Z&quot;},{axis:&quot;-x&quot;,direction:new K(-1,0,0),size:this.options.bubbleSizeSeconday,color:this.options.colors.x,label:&quot;-X&quot;},{axis:&quot;-y&quot;,direction:new K(0,-1,0),size:this.options.bubbleSizeSeconday,color:this.options.colors.y,label:&quot;-Y&quot;},{axis:&quot;-z&quot;,direction:new K(0,0,-1),size:this.options.bubbleSizeSeconday,color:this.options.colors.z,label:&quot;-Z&quot;}],this.center=new K(this.options.size/2,this.options.size/2,0),this.selectedAxis=null,this.innerHTML=&quot;&lt;canvas width=&#x27;&quot;+this.options.size+&quot;&#x27; height=&#x27;&quot;+this.options.size+&quot;&#x27;&gt;&lt;/canvas&gt;&quot;,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseClick=this.onMouseClick.bind(this)}connectedCallback(){this.canvas=this.querySelector(&quot;canvas&quot;),this.context=this.canvas.getContext(&quot;2d&quot;),this.canvas.addEventListener(&quot;mousemove&quot;,this.onMouseMove,!1),this.canvas.addEventListener(&quot;mouseout&quot;,this.onMouseOut,!1),this.canvas.addEventListener(&quot;click&quot;,this.onMouseClick,!1)}disconnectedCallback(){this.canvas.removeEventListener(&quot;mousemove&quot;,this.onMouseMove,!1),this.canvas.removeEventListener(&quot;mouseout&quot;,this.onMouseOut,!1),this.canvas.removeEventListener(&quot;click&quot;,this.onMouseClick,!1)}onMouseMove(e){const t=this.canvas.getBoundingClientRect();this.mouse=new K(e.clientX-t.left,e.clientY-t.top,0)}onMouseOut(){this.mouse=null}onMouseClick(){this.onAxisSelected&amp;&amp;typeof this.onAxisSelected==&quot;function&quot;&amp;&amp;this.onAxisSelected({axis:this.selectedAxis.axis,direction:this.selectedAxis.direction.clone()})}clear(){this.canvas&amp;&amp;this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}drawCircle(e,t=10,i=&quot;#FF0000&quot;){this.context.beginPath(),this.context.arc(e.x,e.y,t,0,2*Math.PI,!1),this.context.fillStyle=i,this.context.fill(),this.context.closePath()}drawLine(e,t,i=1,r=&quot;#FF0000&quot;){this.context.beginPath(),this.context.moveTo(e.x,e.y),this.context.lineTo(t.x,t.y),this.context.lineWidth=i,this.context.strokeStyle=r,this.context.stroke(),this.context.closePath()}update(){this.clear();const t=new yt().makeRotationFromEuler(this.camera.rotation).clone().invert();for(const r of this.bubbles)r.position=this.getBubblePosition(r.direction.clone().applyMatrix4(t));const i=[];for(const r in this.bubbles)(this.options.showSecondary===!0||r[0]!==&quot;-&quot;)&amp;&amp;i.push(this.bubbles[r]);if(i.sort((r,s)=&gt;r.position.z&gt;s.position.z?1:-1),this.selectedAxis=null,this.mouse){let r=1/0;for(const s of i){const o=this.mouse.distanceTo(s.position);(o&lt;r||o&lt;s.size)&amp;&amp;(r=o,this.selectedAxis=s)}}this.drawLayers(i)}drawLayers(e){for(const t of e){let i=t.color;this.selectedAxis===t?i=&quot;#FFFFFF&quot;:t.position.z&gt;=-.01?i=t.color[0]:i=t.color[1],this.drawCircle(t.position,t.size,i),t.line&amp;&amp;this.drawLine(this.center,t.position,t.line,i),t.label&amp;&amp;(this.context.font=[this.options.fontWeight,this.options.fontSize,this.options.fontFamily].join(&quot; &quot;),this.context.fillStyle=this.options.fontColor,this.context.textBaseline=&quot;middle&quot;,this.context.textAlign=&quot;center&quot;,this.context.fillText(t.label,t.position.x,t.position.y+this.options.fontYAdjust))}}getBubblePosition(e){return new K(e.x*(this.center.x-this.options.bubbleSizePrimary/2-this.options.padding)+this.center.x,this.center.y-e.y*(this.center.y-this.options.bubbleSizePrimary/2-this.options.padding),e.z)}}function y$(n,e){customElements.get(&quot;orientation-gizmo&quot;)||customElements.define(&quot;orientation-gizmo&quot;,kO);const t=new kO(n,{});return t.style.position=&quot;absolute&quot;,t.style.bottom=&quot;8px&quot;,t.style.right=&quot;8px&quot;,t.style.pointerEvents=&quot;auto&quot;,t.style.zIndex=&quot;10&quot;,e.appendChild(t),t}function _$(n,e,t){const i=y$(n,e);return i.onAxisSelected=({axis:r,direction:s})=&gt;{const o=n.position.length();n.position.copy(s.clone().multiplyScalar(o)),t instanceof kc&amp;&amp;(t.target.set(0,0,0),t.update())},i}var la=function(){var n=0,e=document.createElement(&quot;div&quot;);e.style.cssText=&quot;position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000&quot;,e.addEventListener(&quot;click&quot;,function(f){f.preventDefault(),i(++n%e.children.length)},!1);function t(f){return e.appendChild(f.dom),f}function i(f){for(var p=0;p&lt;e.children.length;p++)e.children[p].style.display=p===f?&quot;block&quot;:&quot;none&quot;;n=f}var r=(performance||Date).now(),s=r,o=0,l=t(new la.Panel(&quot;FPS&quot;,&quot;#0ff&quot;,&quot;#002&quot;)),u=t(new la.Panel(&quot;MS&quot;,&quot;#0f0&quot;,&quot;#020&quot;));if(self.performance&amp;&amp;self.performance.memory)var h=t(new la.Panel(&quot;MB&quot;,&quot;#f08&quot;,&quot;#201&quot;));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var f=(performance||Date).now();if(u.update(f-r,200),f&gt;=s+1e3&amp;&amp;(l.update(o*1e3/(f-s),100),s=f,o=0,h)){var p=performance.memory;h.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return f},update:function(){r=this.end()},domElement:e,setMode:i}};la.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),l=80*o,u=48*o,h=3*o,f=2*o,p=3*o,m=15*o,g=74*o,v=30*o,x=document.createElement(&quot;canvas&quot;);x.width=l,x.height=u,x.style.cssText=&quot;width:80px;height:48px&quot;;var b=x.getContext(&quot;2d&quot;);return b.font=&quot;bold &quot;+9*o+&quot;px Helvetica,Arial,sans-serif&quot;,b.textBaseline=&quot;top&quot;,b.fillStyle=t,b.fillRect(0,0,l,u),b.fillStyle=e,b.fillText(n,h,f),b.fillRect(p,m,g,v),b.fillStyle=t,b.globalAlpha=.9,b.fillRect(p,m,g,v),{dom:x,update:function(_,T){i=Math.min(i,_),r=Math.max(r,_),b.fillStyle=t,b.globalAlpha=1,b.fillRect(0,0,l,m),b.fillStyle=e,b.fillText(s(_)+&quot; &quot;+n+&quot; (&quot;+s(i)+&quot;-&quot;+s(r)+&quot;)&quot;,h,f),b.drawImage(x,p+o,m,g-o,v,p,m,g-o,v),b.fillRect(p+g-o,m,o,v),b.fillStyle=t,b.globalAlpha=.9,b.fillRect(p+g-o,m,o,s((1-_/T)*v))}}};function v$(n){const e=[];let t=null,i=null;for(let r=0;r&lt;3;r++){const s=new la;s.showPanel(r),n.appendChild(s.dom),Object.assign(s.dom.style,{position:&quot;absolute&quot;,top:`${r*48}px`,left:&quot;auto&quot;,right:&quot;0px&quot;,zIndex:&quot;20&quot;}),e.push(s)}{const r=new la;t=r.addPanel(new la.Panel(&quot;calls&quot;,&quot;#ff8&quot;,&quot;#221&quot;)),r.showPanel(3),n.appendChild(r.dom),Object.assign(r.dom.style,{position:&quot;absolute&quot;,top:`${3*48}px`,left:&quot;auto&quot;,right:&quot;0px&quot;,zIndex:&quot;20&quot;}),e.push(r)}{const r=new la;i=r.addPanel(new la.Panel(&quot;tris&quot;,&quot;#8ff&quot;,&quot;#122&quot;)),r.showPanel(3),n.appendChild(r.dom),Object.assign(r.dom.style,{position:&quot;absolute&quot;,top:`${4*48}px`,left:&quot;auto&quot;,right:&quot;0px&quot;,zIndex:&quot;20&quot;}),e.push(r)}return{statsArray:e,callsPanel:t,trisPanel:i}}function b$(n,e,t){const i=()=&gt;{n&amp;&amp;(e.aspect=n.clientWidth/n.clientHeight,e.updateProjectionMatrix(),t.setSize(n.clientWidth,n.clientHeight))};return window.addEventListener(&quot;resize&quot;,i),()=&gt;{window.removeEventListener(&quot;resize&quot;,i)}}function x$(n){eo.getState().selectedObjects.forEach((i,r)=&gt;{r instanceof Ni?r.isPoints?U0(r):r.clearSelectionGroups():r.traverse(s=&gt;{s instanceof Ni&amp;&amp;s.clearSelectionGroups()})});const t=wr.current;t&amp;&amp;t.traverse(i=&gt;{i instanceof ga&amp;&amp;U0(i)})}async function FO(n,e,t){return await El.getDrawRange(n,e,t)}async function S$(n,e,t){return await El.getPointId(n,e,t)}async function Z0(n,e){return await El.getNameFromRangeId(n,e)}async function AL(n,e,t){return await El.getPointRangeByRangeId(n,e,t)}async function CL(n,e,t){const i=eo.getState(),s=i.selectedObjects.get(n),o=s?s.has(t):!1;e?o?i.removeSelectedObject(n,t):i.addSelectedObject(n,t):(i.clearSelectedObjects(),i.addSelectedObject(n,t))}function Gd(n,e){if(n.name===e)return n;if(!Array.isArray(n.children))return null;for(let t of n.children){const i=Gd(t,e);if(i)return i}return null}async function w$(n,e){var m,g;if(e.button===2)return;const t=n.object,i=n.faceIndex??0,r=e.shiftKey,s=io.getState().translation,o=n.point.clone();s&amp;&amp;o.sub(s),Rs.getState().setClickCoordinate(o),!t.is_design&amp;&amp;t.ada_ext_data!=null&amp;&amp;(qw.current=t.ada_ext_data);const l=t.name;let u=await FO(t.unique_key,l,i);if(!u&amp;&amp;((m=t.userData)!=null&amp;&amp;m.node_id&amp;&amp;(u=await FO(t.unique_key,`node${(g=t.userData)==null?void 0:g.node_id}`,i)),!u)){console.warn(&quot;selected mesh has no draw range&quot;);return}const[h]=u;await CL(t,r,h);const f=await Z0(t.unique_key,h);if(!f){console.warn(&quot;selected mesh has no name&quot;);return}Rs.getState().setName(f);const p=Tl.getState();if(p.treeData&amp;&amp;p.tree&amp;&amp;!p.isTreeCollapsed){p.tree.isProgrammaticChange=!0;const v=[];for(const[b,_]of eo.getState().selectedObjects){const T=b.unique_key??(b.userData?b.userData.unique_hash:void 0);if(T)for(const w of _){const S=await Z0(T,w);if(!S)continue;const C=Gd(p.treeData,S);C&amp;&amp;v.push(C.id)}}const x=Gd(p.treeData,f);p.tree.setSelection({ids:v,mostRecent:x,anchor:x}),x&amp;&amp;p.tree.scrollTo({id:x.id}),p.tree.isProgrammaticChange=!1}}async function zO(n,e){if(e.button===2)return;const t=e.shiftKey,i=wa.getState().useGpuPointPicking;let r=n.object,s=typeof n.index==&quot;number&quot;?n.index:null,o=n.point.clone();if(i){const _=dd.pickAt(e.clientX,e.clientY);_&amp;&amp;(r=_.object,s=_.index,o=_.worldPosition.clone())}const l=io.getState().translation,u=o.clone();l&amp;&amp;u.sub(l),Rs.getState().setClickCoordinate(u);const h=r.userData.unique_hash;if(s==null)return;const f=await S$(h,r.name,s);if(!f){console.warn(&quot;selected mesh has no draw range&quot;);return}const[p]=f,m=new Set;for(const[_]of eo.getState().selectedObjects)_.isPoints&amp;&amp;m.add(_);await CL(r,t,p);const g=new Map;for(const[_,T]of eo.getState().selectedObjects){const w=_;if(!w.isPoints)continue;const S=w.userData?w.userData.unique_hash:void 0;if(!S)continue;const C=w.name,O=[];for(const M of T){const N=await AL(S,C,M);if(!N)continue;const[R,D]=N,L=R+D;for(let H=R;H&lt;L;H++)O.push(H)}g.set(w,O)}g.size===0&amp;&amp;s!=null&amp;&amp;r.isPoints&amp;&amp;g.set(r,[s]);const v=_=&gt;{const T=_.geometry,w=T.getAttribute(&quot;position&quot;);if(!w)return;let S=T.getAttribute(&quot;sel&quot;);!S||S.count!==w.count?(S=new Vt(new Float32Array(w.count),1),T.setAttribute(&quot;sel&quot;,S)):(S.array.fill(0),S.needsUpdate=!0)};for(const[_,T]of g){iI(_,L0.color);const w=_.geometry,S=w.getAttribute(&quot;position&quot;);if(!S)continue;let C=w.getAttribute(&quot;sel&quot;);!C||C.count!==S.count?(C=new Vt(new Float32Array(S.count),1),w.setAttribute(&quot;sel&quot;,C)):C.array.fill(0);const O=C.array;for(const M of T)M&gt;=0&amp;&amp;M&lt;O.length&amp;&amp;(O[M]=1);C.needsUpdate=!0,m.delete(_)}for(const _ of m)v(_);const x=await Z0(h,p);if(!x){console.warn(&quot;selected mesh has no name&quot;);return}Rs.getState().setName(x);const b=Tl.getState();if(b.treeData&amp;&amp;b.tree&amp;&amp;!b.isTreeCollapsed){b.tree.isProgrammaticChange=!0;const _=[];for(const[w,S]of eo.getState().selectedObjects){const C=w.unique_key??(w.userData?w.userData.unique_hash:void 0);if(C)for(const O of S){const M=await Z0(C,O);if(!M)continue;const N=Gd(b.treeData,M);N&amp;&amp;_.push(N.id)}}const T=Gd(b.treeData,x);b.tree.setSelection({ids:_,mostRecent:T,anchor:T}),T&amp;&amp;b.tree.scrollTo({id:T.id}),b.tree.isProgrammaticChange=!1}}function E$(n,e,t,i){let r=null;const s=5;return n.addEventListener(&quot;pointerdown&quot;,o=&gt;{r={x:o.clientX,y:o.clientY}}),n.addEventListener(&quot;click&quot;,async o=&gt;{if(!r)return;const l=o.clientX-r.x,u=o.clientY-r.y;if(l*l+u*u&gt;s*s)return;if(wa.getState().useGpuPointPicking)try{const _=dd.pickAt(o.clientX,o.clientY);if(_){const T={object:_.object,index:_.index,point:_.worldPosition.clone(),distance:0};await zO(T,o);return}}catch(_){console.warn(&quot;GPU picking threw an error; falling back to raycast:&quot;,_)}const h=i.domElement.getBoundingClientRect(),f=(o.clientX-h.left)/h.width*2-1,p=-((o.clientY-h.top)/h.height)*2+1,m=new Re(f,p),g=new jD;g.params.Points={...g.params.Points,threshold:.02},g.layers.set(0),g.layers.disable(1),g.setFromCamera(m,e);const v=g.intersectObjects(t.children,!0);let x=null,b=null;for(const _ of v)if(_.object.isPoints)b||(b=_);else{x=_;break}if(x){await w$(x,o);return}b?await zO(b,o):x$()}),()=&gt;{n.removeEventListener(&quot;pointerdown&quot;,()=&gt;{}),n.removeEventListener(&quot;click&quot;,()=&gt;{})}}const T$=()=&gt;{const n=re.useRef(null),{modelUrl:e,zIsUp:t,defaultOrbitController:i}=io(),{showPerf:r}=wa(),s=re.useRef(null),o=re.useRef(null);return re.useEffect(()=&gt;{const l=n.current;if(!l)return;const u=new ResizeObserver(h=&gt;{var f;for(const p of h){const{width:m,height:g}=p.contentRect;(f=ha.current)==null||f.setSize(m,g),ua.current&amp;&amp;(ua.current.aspect=m/g,ua.current.updateProjectionMatrix())}});return u.observe(l),()=&gt;{u.disconnect()}},[]),re.useEffect(()=&gt;{if(!n.current)return;t&amp;&amp;(nn.DEFAULT_UP=new K(0,0,1));const l=new Hw;if(!wr.current){const S=new by;S.background=new Ye(&quot;#393939&quot;),wr.current=S}const u=wr.current;if(s.current=new xr,!ha.current){const S=new eI({antialias:!0});S.setSize(n.current.clientWidth,n.current.clientHeight),S.shadowMap.enabled=!0,n.current.appendChild(S.domElement),ha.current=S}const h=ha.current,f=f$(n.current,t);ua.current=f;const p=d$(f,n.current,t,i);wS.current=p;const m=u$(u,f,p),{updateCameraLight:g}=m$(u,f);ES.current=g;const v=g$(u);let x=null;n.current&amp;&amp;f&amp;&amp;p&amp;&amp;(x=_$(f,n.current,p));const{statsArray:b,callsPanel:_,trisPanel:T}=v$(n.current);o.current={statsArray:b,callsPanel:_,trisPanel:T},e&amp;&amp;(LI(e),window.B64GLTF&amp;&amp;delete window.B64GLTF),s.current&amp;&amp;u.add(s.current);const w=()=&gt;{if(requestAnimationFrame(w),b.forEach(S=&gt;S.begin()),Si.current&amp;&amp;Si.current.currentAction){const S=l.getDelta();Si.current.update(S)}if(p instanceof kc)p.update();else{const S=l.getDelta();p.update(S)}g==null||g(),x==null||x.update(),h.render(u,f),_&amp;&amp;_.update(h.info.render.calls,200),T&amp;&amp;T.update(h.info.render.triangles,5e5),b.forEach(S=&gt;S.end())};return w(),b$(n.current,f,h),E$(n.current,f,u,h),()=&gt;{var S;x&amp;&amp;((S=n.current)!=null&amp;&amp;S.contains(x))&amp;&amp;n.current.removeChild(x),v.dispose(),u.remove(v),m==null||m(),b&amp;&amp;b.length&gt;0&amp;&amp;b.forEach(C=&gt;{var O;(O=n.current)==null||O.removeChild(C.dom)})}},[i,t]),re.useEffect(()=&gt;{if(!o.current||!n.current)return;const{statsArray:l}=o.current;l.forEach(u=&gt;{u.dom.style.display=r?&quot;block&quot;:&quot;none&quot;})},[r]),I.jsx(&quot;div&quot;,{ref:n,className:&quot;w-full h-full relative&quot;})},M$=()=&gt;I.jsxs(&quot;div&quot;,{className:&quot;relative w-full h-full&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;absolute right-5 top-80 z-10&quot;,children:I.jsx(qk,{})}),I.jsx(&quot;div&quot;,{id:&quot;canvasParent&quot;,className:&quot;absolute w-full h-full&quot;,children:I.jsx(T$,{})})]}),A$=n=&gt;typeof n==&quot;boolean&quot;||n instanceof Boolean,C$=n=&gt;typeof n==&quot;number&quot;||n instanceof Number,R$=n=&gt;typeof n==&quot;bigint&quot;||n instanceof BigInt,RL=n=&gt;!!n&amp;&amp;n instanceof Date,O$=n=&gt;typeof n==&quot;string&quot;||n instanceof String,N$=n=&gt;Array.isArray(n),D$=n=&gt;typeof n==&quot;object&quot;&amp;&amp;n!==null,OL=n=&gt;!!n&amp;&amp;n instanceof Object&amp;&amp;typeof n==&quot;function&quot;;function J0(n,e){return e===void 0&amp;&amp;(e=!1),!n||e?`&quot;${n}&quot;`:n}function I$(n,e,t){return t?JSON.stringify(n):e?`&quot;${n}&quot;`:n}function NL(n){let{field:e,value:t,data:i,lastElement:r,openBracket:s,closeBracket:o,level:l,style:u,shouldExpandNode:h,clickToExpandNode:f,outerRef:p,beforeExpandChange:m}=n;const g=re.useRef(!1),[v,x]=re.useState(()=&gt;h(l,t,e)),b=re.useRef(null);re.useEffect(()=&gt;{g.current?x(h(l,t,e)):g.current=!0},[h]);const _=re.useId();if(i.length===0)return P$({field:e,openBracket:s,closeBracket:o,lastElement:r,style:u});const T=v?u.collapseIcon:u.expandIcon,w=v?u.ariaLables.collapseJson:u.ariaLables.expandJson,S=l+1,C=i.length-1,O=R=&gt;{v!==R&amp;&amp;(!m||m({level:l,value:t,field:e,newExpandValue:R}))&amp;&amp;x(R)},M=R=&gt;{if(R.key===&quot;ArrowRight&quot;||R.key===&quot;ArrowLeft&quot;)R.preventDefault(),O(R.key===&quot;ArrowRight&quot;);else if(R.key===&quot;ArrowUp&quot;||R.key===&quot;ArrowDown&quot;){R.preventDefault();const D=R.key===&quot;ArrowUp&quot;?-1:1;if(!p.current)return;const L=p.current.querySelectorAll(&quot;[role=button]&quot;);let H=-1;for(let z=0;z&lt;L.length;z++)if(L[z].tabIndex===0){H=z;break}if(H&lt;0)return;const q=(H+D+L.length)%L.length;L[H].tabIndex=-1,L[q].tabIndex=0,L[q].focus()}},N=()=&gt;{var R;O(!v);const D=b.current;if(!D)return;const L=(R=p.current)===null||R===void 0?void 0:R.querySelector(&#x27;[role=button][tabindex=&quot;0&quot;]&#x27;);L&amp;&amp;(L.tabIndex=-1),D.tabIndex=0,D.focus()};return re.createElement(&quot;div&quot;,{className:u.basicChildStyle,role:&quot;treeitem&quot;,&quot;aria-expanded&quot;:v,&quot;aria-selected&quot;:void 0},re.createElement(&quot;span&quot;,{className:T,onClick:N,onKeyDown:M,role:&quot;button&quot;,&quot;aria-label&quot;:w,&quot;aria-expanded&quot;:v,&quot;aria-controls&quot;:v?_:void 0,ref:b,tabIndex:l===0?0:-1}),(e||e===&quot;&quot;)&amp;&amp;(f?re.createElement(&quot;span&quot;,{className:u.clickableLabel,onClick:N,onKeyDown:M},J0(e,u.quotesForFieldNames),&quot;:&quot;):re.createElement(&quot;span&quot;,{className:u.label},J0(e,u.quotesForFieldNames),&quot;:&quot;)),re.createElement(&quot;span&quot;,{className:u.punctuation},s),v?re.createElement(&quot;ul&quot;,{id:_,role:&quot;group&quot;,className:u.childFieldsContainer},i.map((R,D)=&gt;re.createElement(DL,{key:R[0]||D,field:R[0],value:R[1],style:u,lastElement:D===C,level:S,shouldExpandNode:h,clickToExpandNode:f,outerRef:p}))):re.createElement(&quot;span&quot;,{className:u.collapsedContent,onClick:N,onKeyDown:M}),re.createElement(&quot;span&quot;,{className:u.punctuation},o),!r&amp;&amp;re.createElement(&quot;span&quot;,{className:u.punctuation},&quot;,&quot;))}function P$(n){let{field:e,openBracket:t,closeBracket:i,lastElement:r,style:s}=n;return re.createElement(&quot;div&quot;,{className:s.basicChildStyle,role:&quot;treeitem&quot;,&quot;aria-selected&quot;:void 0},(e||e===&quot;&quot;)&amp;&amp;re.createElement(&quot;span&quot;,{className:s.label},J0(e,s.quotesForFieldNames),&quot;:&quot;),re.createElement(&quot;span&quot;,{className:s.punctuation},t),re.createElement(&quot;span&quot;,{className:s.punctuation},i),!r&amp;&amp;re.createElement(&quot;span&quot;,{className:s.punctuation},&quot;,&quot;))}function L$(n){let{field:e,value:t,style:i,lastElement:r,shouldExpandNode:s,clickToExpandNode:o,level:l,outerRef:u,beforeExpandChange:h}=n;return NL({field:e,value:t,lastElement:r||!1,level:l,openBracket:&quot;{&quot;,closeBracket:&quot;}&quot;,style:i,shouldExpandNode:s,clickToExpandNode:o,data:Object.keys(t).map(f=&gt;[f,t[f]]),outerRef:u,beforeExpandChange:h})}function U$(n){let{field:e,value:t,style:i,lastElement:r,level:s,shouldExpandNode:o,clickToExpandNode:l,outerRef:u,beforeExpandChange:h}=n;return NL({field:e,value:t,lastElement:r||!1,level:s,openBracket:&quot;[&quot;,closeBracket:&quot;]&quot;,style:i,shouldExpandNode:o,clickToExpandNode:l,data:t.map(f=&gt;[void 0,f]),outerRef:u,beforeExpandChange:h})}function k$(n){let{field:e,value:t,style:i,lastElement:r}=n,s,o=i.otherValue;return t===null?(s=&quot;null&quot;,o=i.nullValue):t===void 0?(s=&quot;undefined&quot;,o=i.undefinedValue):O$(t)?(s=I$(t,!i.noQuotesForStringValues,i.stringifyStringValues),o=i.stringValue):A$(t)?(s=t?&quot;true&quot;:&quot;false&quot;,o=i.booleanValue):C$(t)?(s=t.toString(),o=i.numberValue):R$(t)?(s=`${t.toString()}n`,o=i.numberValue):RL(t)?s=t.toISOString():OL(t)?s=&quot;function() { }&quot;:s=t.toString(),re.createElement(&quot;div&quot;,{className:i.basicChildStyle,role:&quot;treeitem&quot;,&quot;aria-selected&quot;:void 0},(e||e===&quot;&quot;)&amp;&amp;re.createElement(&quot;span&quot;,{className:i.label},J0(e,i.quotesForFieldNames),&quot;:&quot;),re.createElement(&quot;span&quot;,{className:o},s),!r&amp;&amp;re.createElement(&quot;span&quot;,{className:i.punctuation},&quot;,&quot;))}function DL(n){const e=n.value;return N$(e)?re.createElement(U$,Object.assign({},n)):D$(e)&amp;&amp;!RL(e)&amp;&amp;!OL(e)?re.createElement(L$,Object.assign({},n)):re.createElement(k$,Object.assign({},n))}var yr={&quot;container-light&quot;:&quot;_2IvMF _GzYRV&quot;,&quot;basic-element-style&quot;:&quot;_2bkNM&quot;,&quot;child-fields-container&quot;:&quot;_1BXBN&quot;,&quot;label-light&quot;:&quot;_1MGIk&quot;,&quot;clickable-label-light&quot;:&quot;_2YKJg _1MGIk _1MFti&quot;,&quot;punctuation-light&quot;:&quot;_3uHL6 _3eOF8&quot;,&quot;value-null-light&quot;:&quot;_2T6PJ&quot;,&quot;value-undefined-light&quot;:&quot;_1Gho6&quot;,&quot;value-string-light&quot;:&quot;_vGjyY&quot;,&quot;value-number-light&quot;:&quot;_1bQdo&quot;,&quot;value-boolean-light&quot;:&quot;_3zQKs&quot;,&quot;value-other-light&quot;:&quot;_1xvuR&quot;,&quot;collapse-icon-light&quot;:&quot;_oLqym _f10Tu _1MFti _1LId0&quot;,&quot;expand-icon-light&quot;:&quot;_2AXVT _f10Tu _1MFti _1UmXx&quot;,&quot;collapsed-content-light&quot;:&quot;_2KJWg _1pNG9 _1MFti&quot;};const F$={collapseJson:&quot;collapse JSON&quot;,expandJson:&quot;expand JSON&quot;},BO={container:yr[&quot;container-light&quot;],basicChildStyle:yr[&quot;basic-element-style&quot;],childFieldsContainer:yr[&quot;child-fields-container&quot;],label:yr[&quot;label-light&quot;],clickableLabel:yr[&quot;clickable-label-light&quot;],nullValue:yr[&quot;value-null-light&quot;],undefinedValue:yr[&quot;value-undefined-light&quot;],stringValue:yr[&quot;value-string-light&quot;],booleanValue:yr[&quot;value-boolean-light&quot;],numberValue:yr[&quot;value-number-light&quot;],otherValue:yr[&quot;value-other-light&quot;],punctuation:yr[&quot;punctuation-light&quot;],collapseIcon:yr[&quot;collapse-icon-light&quot;],expandIcon:yr[&quot;expand-icon-light&quot;],collapsedContent:yr[&quot;collapsed-content-light&quot;],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:F$,stringifyStringValues:!1},z$=()=&gt;!0,HO=n=&gt;n&lt;1,VO=n=&gt;{let{data:e,style:t=BO,shouldExpandNode:i=z$,clickToExpandNode:r=!1,beforeExpandChange:s,...o}=n;const l=re.useRef(null);return re.createElement(&quot;div&quot;,Object.assign({&quot;aria-label&quot;:&quot;JSON view&quot;},o,{className:t.container,ref:l,role:&quot;tree&quot;}),re.createElement(DL,{value:e,style:{...BO,...t},lastElement:!0,level:0,shouldExpandNode:i,clickToExpandNode:r,outerRef:l,beforeExpandChange:s}))};var Yf={exports:{}},zx={},Bx={exports:{}},Hx,GO;function B$(){if(GO)return Hx;GO=1;var n=&quot;SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED&quot;;return Hx=n,Hx}var Vx,jO;function H$(){if(jO)return Vx;jO=1;var n=B$();function e(){}function t(){}return t.resetWarningCache=e,Vx=function(){function i(o,l,u,h,f,p){if(p!==n){var m=new Error(&quot;Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types&quot;);throw m.name=&quot;Invariant Violation&quot;,m}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},Vx}var WO;function IL(){return WO||(WO=1,Bx.exports=H$()()),Bx.exports}function PL(n){var e,t,i=&quot;&quot;;if(typeof n==&quot;string&quot;||typeof n==&quot;number&quot;)i+=n;else if(typeof n==&quot;object&quot;)if(Array.isArray(n))for(e=0;e&lt;n.length;e++)n[e]&amp;&amp;(t=PL(n[e]))&amp;&amp;(i&amp;&amp;(i+=&quot; &quot;),i+=t);else for(e in n)n[e]&amp;&amp;(i&amp;&amp;(i+=&quot; &quot;),i+=e);return i}function XO(){for(var n,e,t=0,i=&quot;&quot;;t&lt;arguments.length;)(n=arguments[t++])&amp;&amp;(e=PL(n))&amp;&amp;(i&amp;&amp;(i+=&quot; &quot;),i+=e);return i}const V$=Object.freeze(Object.defineProperty({__proto__:null,clsx:XO,default:XO},Symbol.toStringTag,{value:&quot;Module&quot;})),G$=Pk(V$);var xi={},rl={},qO;function c_(){if(qO)return rl;qO=1,Object.defineProperty(rl,&quot;__esModule&quot;,{value:!0}),rl.dontSetMe=r,rl.findInArray=n,rl.int=i,rl.isFunction=e,rl.isNum=t;function n(s,o){for(let l=0,u=s.length;l&lt;u;l++)if(o.apply(o,[s[l],l,s]))return s[l]}function e(s){return typeof s==&quot;function&quot;||Object.prototype.toString.call(s)===&quot;[object Function]&quot;}function t(s){return typeof s==&quot;number&quot;&amp;&amp;!isNaN(s)}function i(s){return parseInt(s,10)}function r(s,o,l){if(s[o])return new Error(&quot;Invalid prop &quot;.concat(o,&quot; passed to &quot;).concat(l,&quot; - do not set this, set it on the child.&quot;))}return rl}var sl={},YO;function j$(){if(YO)return sl;YO=1,Object.defineProperty(sl,&quot;__esModule&quot;,{value:!0}),sl.browserPrefixToKey=t,sl.browserPrefixToStyle=i,sl.default=void 0,sl.getPrefix=e;const n=[&quot;Moz&quot;,&quot;Webkit&quot;,&quot;O&quot;,&quot;ms&quot;];function e(){var s;let o=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:&quot;transform&quot;;if(typeof window&gt;&quot;u&quot;)return&quot;&quot;;const l=(s=window.document)===null||s===void 0||(s=s.documentElement)===null||s===void 0?void 0:s.style;if(!l||o in l)return&quot;&quot;;for(let u=0;u&lt;n.length;u++)if(t(o,n[u])in l)return n[u];return&quot;&quot;}function t(s,o){return o?&quot;&quot;.concat(o).concat(r(s)):s}function i(s,o){return o?&quot;-&quot;.concat(o.toLowerCase(),&quot;-&quot;).concat(s):s}function r(s){let o=&quot;&quot;,l=!0;for(let u=0;u&lt;s.length;u++)l?(o+=s[u].toUpperCase(),l=!1):s[u]===&quot;-&quot;?l=!0:o+=s[u];return o}return sl.default=e(),sl}var KO;function u1(){if(KO)return xi;KO=1,Object.defineProperty(xi,&quot;__esModule&quot;,{value:!0}),xi.addClassName=C,xi.addEvent=l,xi.addUserSelectStyles=w,xi.createCSSTransform=v,xi.createSVGTransform=x,xi.getTouch=_,xi.getTouchIdentifier=T,xi.getTranslation=b,xi.innerHeight=p,xi.innerWidth=m,xi.matchesSelector=s,xi.matchesSelectorAndParentsTo=o,xi.offsetXYFromParent=g,xi.outerHeight=h,xi.outerWidth=f,xi.removeClassName=O,xi.removeEvent=u,xi.removeUserSelectStyles=S;var n=c_(),e=i(j$());function t(M){if(typeof WeakMap!=&quot;function&quot;)return null;var N=new WeakMap,R=new WeakMap;return(t=function(D){return D?R:N})(M)}function i(M,N){if(M&amp;&amp;M.__esModule)return M;if(M===null||typeof M!=&quot;object&quot;&amp;&amp;typeof M!=&quot;function&quot;)return{default:M};var R=t(N);if(R&amp;&amp;R.has(M))return R.get(M);var D={},L=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;for(var H in M)if(H!==&quot;default&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(M,H)){var q=L?Object.getOwnPropertyDescriptor(M,H):null;q&amp;&amp;(q.get||q.set)?Object.defineProperty(D,H,q):D[H]=M[H]}return D.default=M,R&amp;&amp;R.set(M,D),D}let r=&quot;&quot;;function s(M,N){return r||(r=(0,n.findInArray)([&quot;matches&quot;,&quot;webkitMatchesSelector&quot;,&quot;mozMatchesSelector&quot;,&quot;msMatchesSelector&quot;,&quot;oMatchesSelector&quot;],function(R){return(0,n.isFunction)(M[R])})),(0,n.isFunction)(M[r])?M[r](N):!1}function o(M,N,R){let D=M;do{if(s(D,N))return!0;if(D===R)return!1;D=D.parentNode}while(D);return!1}function l(M,N,R,D){if(!M)return;const L={capture:!0,...D};M.addEventListener?M.addEventListener(N,R,L):M.attachEvent?M.attachEvent(&quot;on&quot;+N,R):M[&quot;on&quot;+N]=R}function u(M,N,R,D){if(!M)return;const L={capture:!0,...D};M.removeEventListener?M.removeEventListener(N,R,L):M.detachEvent?M.detachEvent(&quot;on&quot;+N,R):M[&quot;on&quot;+N]=null}function h(M){let N=M.clientHeight;const R=M.ownerDocument.defaultView.getComputedStyle(M);return N+=(0,n.int)(R.borderTopWidth),N+=(0,n.int)(R.borderBottomWidth),N}function f(M){let N=M.clientWidth;const R=M.ownerDocument.defaultView.getComputedStyle(M);return N+=(0,n.int)(R.borderLeftWidth),N+=(0,n.int)(R.borderRightWidth),N}function p(M){let N=M.clientHeight;const R=M.ownerDocument.defaultView.getComputedStyle(M);return N-=(0,n.int)(R.paddingTop),N-=(0,n.int)(R.paddingBottom),N}function m(M){let N=M.clientWidth;const R=M.ownerDocument.defaultView.getComputedStyle(M);return N-=(0,n.int)(R.paddingLeft),N-=(0,n.int)(R.paddingRight),N}function g(M,N,R){const L=N===N.ownerDocument.body?{left:0,top:0}:N.getBoundingClientRect(),H=(M.clientX+N.scrollLeft-L.left)/R,q=(M.clientY+N.scrollTop-L.top)/R;return{x:H,y:q}}function v(M,N){const R=b(M,N,&quot;px&quot;);return{[(0,e.browserPrefixToKey)(&quot;transform&quot;,e.default)]:R}}function x(M,N){return b(M,N,&quot;&quot;)}function b(M,N,R){let{x:D,y:L}=M,H=&quot;translate(&quot;.concat(D).concat(R,&quot;,&quot;).concat(L).concat(R,&quot;)&quot;);if(N){const q=&quot;&quot;.concat(typeof N.x==&quot;string&quot;?N.x:N.x+R),z=&quot;&quot;.concat(typeof N.y==&quot;string&quot;?N.y:N.y+R);H=&quot;translate(&quot;.concat(q,&quot;, &quot;).concat(z,&quot;)&quot;)+H}return H}function _(M,N){return M.targetTouches&amp;&amp;(0,n.findInArray)(M.targetTouches,R=&gt;N===R.identifier)||M.changedTouches&amp;&amp;(0,n.findInArray)(M.changedTouches,R=&gt;N===R.identifier)}function T(M){if(M.targetTouches&amp;&amp;M.targetTouches[0])return M.targetTouches[0].identifier;if(M.changedTouches&amp;&amp;M.changedTouches[0])return M.changedTouches[0].identifier}function w(M){if(!M)return;let N=M.getElementById(&quot;react-draggable-style-el&quot;);N||(N=M.createElement(&quot;style&quot;),N.type=&quot;text/css&quot;,N.id=&quot;react-draggable-style-el&quot;,N.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,N.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,M.getElementsByTagName(&quot;head&quot;)[0].appendChild(N)),M.body&amp;&amp;C(M.body,&quot;react-draggable-transparent-selection&quot;)}function S(M){if(M)try{if(M.body&amp;&amp;O(M.body,&quot;react-draggable-transparent-selection&quot;),M.selection)M.selection.empty();else{const N=(M.defaultView||window).getSelection();N&amp;&amp;N.type!==&quot;Caret&quot;&amp;&amp;N.removeAllRanges()}}catch{}}function C(M,N){M.classList?M.classList.add(N):M.className.match(new RegExp(&quot;(?:^|\\s)&quot;.concat(N,&quot;(?!\\S)&quot;)))||(M.className+=&quot; &quot;.concat(N))}function O(M,N){M.classList?M.classList.remove(N):M.className=M.className.replace(new RegExp(&quot;(?:^|\\s)&quot;.concat(N,&quot;(?!\\S)&quot;),&quot;g&quot;),&quot;&quot;)}return xi}var go={},$O;function LL(){if($O)return go;$O=1,Object.defineProperty(go,&quot;__esModule&quot;,{value:!0}),go.canDragX=r,go.canDragY=s,go.createCoreData=l,go.createDraggableData=u,go.getBoundPosition=t,go.getControlPosition=o,go.snapToGrid=i;var n=c_(),e=u1();function t(p,m,g){if(!p.props.bounds)return[m,g];let{bounds:v}=p.props;v=typeof v==&quot;string&quot;?v:h(v);const x=f(p);if(typeof v==&quot;string&quot;){const{ownerDocument:b}=x,_=b.defaultView;let T;if(v===&quot;parent&quot;?T=x.parentNode:T=b.querySelector(v),!(T instanceof _.HTMLElement))throw new Error(&#x27;Bounds selector &quot;&#x27;+v+&#x27;&quot; could not find an element.&#x27;);const w=T,S=_.getComputedStyle(x),C=_.getComputedStyle(w);v={left:-x.offsetLeft+(0,n.int)(C.paddingLeft)+(0,n.int)(S.marginLeft),top:-x.offsetTop+(0,n.int)(C.paddingTop)+(0,n.int)(S.marginTop),right:(0,e.innerWidth)(w)-(0,e.outerWidth)(x)-x.offsetLeft+(0,n.int)(C.paddingRight)-(0,n.int)(S.marginRight),bottom:(0,e.innerHeight)(w)-(0,e.outerHeight)(x)-x.offsetTop+(0,n.int)(C.paddingBottom)-(0,n.int)(S.marginBottom)}}return(0,n.isNum)(v.right)&amp;&amp;(m=Math.min(m,v.right)),(0,n.isNum)(v.bottom)&amp;&amp;(g=Math.min(g,v.bottom)),(0,n.isNum)(v.left)&amp;&amp;(m=Math.max(m,v.left)),(0,n.isNum)(v.top)&amp;&amp;(g=Math.max(g,v.top)),[m,g]}function i(p,m,g){const v=Math.round(m/p[0])*p[0],x=Math.round(g/p[1])*p[1];return[v,x]}function r(p){return p.props.axis===&quot;both&quot;||p.props.axis===&quot;x&quot;}function s(p){return p.props.axis===&quot;both&quot;||p.props.axis===&quot;y&quot;}function o(p,m,g){const v=typeof m==&quot;number&quot;?(0,e.getTouch)(p,m):null;if(typeof m==&quot;number&quot;&amp;&amp;!v)return null;const x=f(g),b=g.props.offsetParent||x.offsetParent||x.ownerDocument.body;return(0,e.offsetXYFromParent)(v||p,b,g.props.scale)}function l(p,m,g){const v=!(0,n.isNum)(p.lastX),x=f(p);return v?{node:x,deltaX:0,deltaY:0,lastX:m,lastY:g,x:m,y:g}:{node:x,deltaX:m-p.lastX,deltaY:g-p.lastY,lastX:p.lastX,lastY:p.lastY,x:m,y:g}}function u(p,m){const g=p.props.scale;return{node:m.node,x:p.state.x+m.deltaX/g,y:p.state.y+m.deltaY/g,deltaX:m.deltaX/g,deltaY:m.deltaY/g,lastX:p.state.x,lastY:p.state.y}}function h(p){return{left:p.left,top:p.top,right:p.right,bottom:p.bottom}}function f(p){const m=p.findDOMNode();if(!m)throw new Error(&quot;&lt;DraggableCore&gt;: Unmounted during event!&quot;);return m}return go}var Kf={},_g={},ZO;function UL(){if(ZO)return _g;ZO=1,Object.defineProperty(_g,&quot;__esModule&quot;,{value:!0}),_g.default=n;function n(){}return _g}var JO;function W$(){if(JO)return Kf;JO=1,Object.defineProperty(Kf,&quot;__esModule&quot;,{value:!0}),Kf.default=void 0;var n=h(zc()),e=l(IL()),t=l(ry()),i=u1(),r=LL(),s=c_(),o=l(UL());function l(b){return b&amp;&amp;b.__esModule?b:{default:b}}function u(b){if(typeof WeakMap!=&quot;function&quot;)return null;var _=new WeakMap,T=new WeakMap;return(u=function(w){return w?T:_})(b)}function h(b,_){if(b&amp;&amp;b.__esModule)return b;if(b===null||typeof b!=&quot;object&quot;&amp;&amp;typeof b!=&quot;function&quot;)return{default:b};var T=u(_);if(T&amp;&amp;T.has(b))return T.get(b);var w={},S=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;for(var C in b)if(C!==&quot;default&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(b,C)){var O=S?Object.getOwnPropertyDescriptor(b,C):null;O&amp;&amp;(O.get||O.set)?Object.defineProperty(w,C,O):w[C]=b[C]}return w.default=b,T&amp;&amp;T.set(b,w),w}function f(b,_,T){return _=p(_),_ in b?Object.defineProperty(b,_,{value:T,enumerable:!0,configurable:!0,writable:!0}):b[_]=T,b}function p(b){var _=m(b,&quot;string&quot;);return typeof _==&quot;symbol&quot;?_:String(_)}function m(b,_){if(typeof b!=&quot;object&quot;||b===null)return b;var T=b[Symbol.toPrimitive];if(T!==void 0){var w=T.call(b,_);if(typeof w!=&quot;object&quot;)return w;throw new TypeError(&quot;@@toPrimitive must return a primitive value.&quot;)}return(_===&quot;string&quot;?String:Number)(b)}const g={touch:{start:&quot;touchstart&quot;,move:&quot;touchmove&quot;,stop:&quot;touchend&quot;},mouse:{start:&quot;mousedown&quot;,move:&quot;mousemove&quot;,stop:&quot;mouseup&quot;}};let v=g.mouse,x=class extends n.Component{constructor(){super(...arguments),f(this,&quot;dragging&quot;,!1),f(this,&quot;lastX&quot;,NaN),f(this,&quot;lastY&quot;,NaN),f(this,&quot;touchIdentifier&quot;,null),f(this,&quot;mounted&quot;,!1),f(this,&quot;handleDragStart&quot;,_=&gt;{if(this.props.onMouseDown(_),!this.props.allowAnyClick&amp;&amp;typeof _.button==&quot;number&quot;&amp;&amp;_.button!==0)return!1;const T=this.findDOMNode();if(!T||!T.ownerDocument||!T.ownerDocument.body)throw new Error(&quot;&lt;DraggableCore&gt; not mounted on DragStart!&quot;);const{ownerDocument:w}=T;if(this.props.disabled||!(_.target instanceof w.defaultView.Node)||this.props.handle&amp;&amp;!(0,i.matchesSelectorAndParentsTo)(_.target,this.props.handle,T)||this.props.cancel&amp;&amp;(0,i.matchesSelectorAndParentsTo)(_.target,this.props.cancel,T))return;_.type===&quot;touchstart&quot;&amp;&amp;_.preventDefault();const S=(0,i.getTouchIdentifier)(_);this.touchIdentifier=S;const C=(0,r.getControlPosition)(_,S,this);if(C==null)return;const{x:O,y:M}=C,N=(0,r.createCoreData)(this,O,M);(0,o.default)(&quot;DraggableCore: handleDragStart: %j&quot;,N),(0,o.default)(&quot;calling&quot;,this.props.onStart),!(this.props.onStart(_,N)===!1||this.mounted===!1)&amp;&amp;(this.props.enableUserSelectHack&amp;&amp;(0,i.addUserSelectStyles)(w),this.dragging=!0,this.lastX=O,this.lastY=M,(0,i.addEvent)(w,v.move,this.handleDrag),(0,i.addEvent)(w,v.stop,this.handleDragStop))}),f(this,&quot;handleDrag&quot;,_=&gt;{const T=(0,r.getControlPosition)(_,this.touchIdentifier,this);if(T==null)return;let{x:w,y:S}=T;if(Array.isArray(this.props.grid)){let M=w-this.lastX,N=S-this.lastY;if([M,N]=(0,r.snapToGrid)(this.props.grid,M,N),!M&amp;&amp;!N)return;w=this.lastX+M,S=this.lastY+N}const C=(0,r.createCoreData)(this,w,S);if((0,o.default)(&quot;DraggableCore: handleDrag: %j&quot;,C),this.props.onDrag(_,C)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent(&quot;mouseup&quot;))}catch{const N=document.createEvent(&quot;MouseEvents&quot;);N.initMouseEvent(&quot;mouseup&quot;,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(N)}return}this.lastX=w,this.lastY=S}),f(this,&quot;handleDragStop&quot;,_=&gt;{if(!this.dragging)return;const T=(0,r.getControlPosition)(_,this.touchIdentifier,this);if(T==null)return;let{x:w,y:S}=T;if(Array.isArray(this.props.grid)){let N=w-this.lastX||0,R=S-this.lastY||0;[N,R]=(0,r.snapToGrid)(this.props.grid,N,R),w=this.lastX+N,S=this.lastY+R}const C=(0,r.createCoreData)(this,w,S);if(this.props.onStop(_,C)===!1||this.mounted===!1)return!1;const M=this.findDOMNode();M&amp;&amp;this.props.enableUserSelectHack&amp;&amp;(0,i.removeUserSelectStyles)(M.ownerDocument),(0,o.default)(&quot;DraggableCore: handleDragStop: %j&quot;,C),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,M&amp;&amp;((0,o.default)(&quot;DraggableCore: Removing handlers&quot;),(0,i.removeEvent)(M.ownerDocument,v.move,this.handleDrag),(0,i.removeEvent)(M.ownerDocument,v.stop,this.handleDragStop))}),f(this,&quot;onMouseDown&quot;,_=&gt;(v=g.mouse,this.handleDragStart(_))),f(this,&quot;onMouseUp&quot;,_=&gt;(v=g.mouse,this.handleDragStop(_))),f(this,&quot;onTouchStart&quot;,_=&gt;(v=g.touch,this.handleDragStart(_))),f(this,&quot;onTouchEnd&quot;,_=&gt;(v=g.touch,this.handleDragStop(_)))}componentDidMount(){this.mounted=!0;const _=this.findDOMNode();_&amp;&amp;(0,i.addEvent)(_,g.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const _=this.findDOMNode();if(_){const{ownerDocument:T}=_;(0,i.removeEvent)(T,g.mouse.move,this.handleDrag),(0,i.removeEvent)(T,g.touch.move,this.handleDrag),(0,i.removeEvent)(T,g.mouse.stop,this.handleDragStop),(0,i.removeEvent)(T,g.touch.stop,this.handleDragStop),(0,i.removeEvent)(_,g.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&amp;&amp;(0,i.removeUserSelectStyles)(T)}}findDOMNode(){var _,T;return(_=this.props)!==null&amp;&amp;_!==void 0&amp;&amp;_.nodeRef?(T=this.props)===null||T===void 0||(T=T.nodeRef)===null||T===void 0?void 0:T.current:t.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return Kf.default=x,f(x,&quot;displayName&quot;,&quot;DraggableCore&quot;),f(x,&quot;propTypes&quot;,{allowAnyClick:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(b,_){if(b[_]&amp;&amp;b[_].nodeType!==1)throw new Error(&quot;Draggable&#x27;s offsetParent must be a DOM Node.&quot;)},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),f(x,&quot;defaultProps&quot;,{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),Kf}var QO;function X$(){return QO||(QO=1,function(n){Object.defineProperty(n,&quot;__esModule&quot;,{value:!0}),Object.defineProperty(n,&quot;DraggableCore&quot;,{enumerable:!0,get:function(){return u.default}}),n.default=void 0;var e=m(zc()),t=f(IL()),i=f(ry()),r=f(G$),s=u1(),o=LL(),l=c_(),u=f(W$()),h=f(UL());function f(T){return T&amp;&amp;T.__esModule?T:{default:T}}function p(T){if(typeof WeakMap!=&quot;function&quot;)return null;var w=new WeakMap,S=new WeakMap;return(p=function(C){return C?S:w})(T)}function m(T,w){if(T&amp;&amp;T.__esModule)return T;if(T===null||typeof T!=&quot;object&quot;&amp;&amp;typeof T!=&quot;function&quot;)return{default:T};var S=p(w);if(S&amp;&amp;S.has(T))return S.get(T);var C={},O=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;for(var M in T)if(M!==&quot;default&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(T,M)){var N=O?Object.getOwnPropertyDescriptor(T,M):null;N&amp;&amp;(N.get||N.set)?Object.defineProperty(C,M,N):C[M]=T[M]}return C.default=T,S&amp;&amp;S.set(T,C),C}function g(){return g=Object.assign?Object.assign.bind():function(T){for(var w=1;w&lt;arguments.length;w++){var S=arguments[w];for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&amp;&amp;(T[C]=S[C])}return T},g.apply(this,arguments)}function v(T,w,S){return w=x(w),w in T?Object.defineProperty(T,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):T[w]=S,T}function x(T){var w=b(T,&quot;string&quot;);return typeof w==&quot;symbol&quot;?w:String(w)}function b(T,w){if(typeof T!=&quot;object&quot;||T===null)return T;var S=T[Symbol.toPrimitive];if(S!==void 0){var C=S.call(T,w);if(typeof C!=&quot;object&quot;)return C;throw new TypeError(&quot;@@toPrimitive must return a primitive value.&quot;)}return(w===&quot;string&quot;?String:Number)(T)}class _ extends e.Component{static getDerivedStateFromProps(w,S){let{position:C}=w,{prevPropsPosition:O}=S;return C&amp;&amp;(!O||C.x!==O.x||C.y!==O.y)?((0,h.default)(&quot;Draggable: getDerivedStateFromProps %j&quot;,{position:C,prevPropsPosition:O}),{x:C.x,y:C.y,prevPropsPosition:{...C}}):null}constructor(w){super(w),v(this,&quot;onDragStart&quot;,(S,C)=&gt;{if((0,h.default)(&quot;Draggable: onDragStart: %j&quot;,C),this.props.onStart(S,(0,o.createDraggableData)(this,C))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),v(this,&quot;onDrag&quot;,(S,C)=&gt;{if(!this.state.dragging)return!1;(0,h.default)(&quot;Draggable: onDrag: %j&quot;,C);const O=(0,o.createDraggableData)(this,C),M={x:O.x,y:O.y,slackX:0,slackY:0};if(this.props.bounds){const{x:R,y:D}=M;M.x+=this.state.slackX,M.y+=this.state.slackY;const[L,H]=(0,o.getBoundPosition)(this,M.x,M.y);M.x=L,M.y=H,M.slackX=this.state.slackX+(R-M.x),M.slackY=this.state.slackY+(D-M.y),O.x=M.x,O.y=M.y,O.deltaX=M.x-this.state.x,O.deltaY=M.y-this.state.y}if(this.props.onDrag(S,O)===!1)return!1;this.setState(M)}),v(this,&quot;onDragStop&quot;,(S,C)=&gt;{if(!this.state.dragging||this.props.onStop(S,(0,o.createDraggableData)(this,C))===!1)return!1;(0,h.default)(&quot;Draggable: onDragStop: %j&quot;,C);const M={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:R,y:D}=this.props.position;M.x=R,M.y=D}this.setState(M)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&amp;&amp;!(w.onDrag||w.onStop)&amp;&amp;console.warn(&quot;A `position` was applied to this &lt;Draggable&gt;, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.&quot;)}componentDidMount(){typeof window.SVGElement&lt;&quot;u&quot;&amp;&amp;this.findDOMNode()instanceof window.SVGElement&amp;&amp;this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var w,S;return(w=(S=this.props)===null||S===void 0||(S=S.nodeRef)===null||S===void 0?void 0:S.current)!==null&amp;&amp;w!==void 0?w:i.default.findDOMNode(this)}render(){const{axis:w,bounds:S,children:C,defaultPosition:O,defaultClassName:M,defaultClassNameDragging:N,defaultClassNameDragged:R,position:D,positionOffset:L,scale:H,...q}=this.props;let z={},$=null;const j=!!!D||this.state.dragging,G=D||O,ee={x:(0,o.canDragX)(this)&amp;&amp;j?this.state.x:G.x,y:(0,o.canDragY)(this)&amp;&amp;j?this.state.y:G.y};this.state.isElementSVG?$=(0,s.createSVGTransform)(ee,L):z=(0,s.createCSSTransform)(ee,L);const F=(0,r.default)(C.props.className||&quot;&quot;,M,{[N]:this.state.dragging,[R]:this.state.dragged});return e.createElement(u.default,g({},q,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(C),{className:F,style:{...C.props.style,...z},transform:$}))}}n.default=_,v(_,&quot;displayName&quot;,&quot;Draggable&quot;),v(_,&quot;propTypes&quot;,{...u.default.propTypes,axis:t.default.oneOf([&quot;both&quot;,&quot;x&quot;,&quot;y&quot;,&quot;none&quot;]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),v(_,&quot;defaultProps&quot;,{...u.default.defaultProps,axis:&quot;both&quot;,bounds:!1,defaultClassName:&quot;react-draggable&quot;,defaultClassNameDragging:&quot;react-draggable-dragging&quot;,defaultClassNameDragged:&quot;react-draggable-dragged&quot;,defaultPosition:{x:0,y:0},scale:1})}(zx)),zx}var e2;function q$(){if(e2)return Yf.exports;e2=1;const{default:n,DraggableCore:e}=X$();return Yf.exports=n,Yf.exports.default=n,Yf.exports.DraggableCore=e,Yf.exports}var Y$=q$();const K$=iy(Y$);var Oi=function(){return Oi=Object.assign||function(n){for(var e,t=1,i=arguments.length;t&lt;i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&amp;&amp;(n[r]=e[r])}return n},Oi.apply(this,arguments)},t2={width:&quot;100%&quot;,height:&quot;10px&quot;,top:&quot;0px&quot;,left:&quot;0px&quot;,cursor:&quot;row-resize&quot;},n2={width:&quot;10px&quot;,height:&quot;100%&quot;,top:&quot;0px&quot;,left:&quot;0px&quot;,cursor:&quot;col-resize&quot;},vg={width:&quot;20px&quot;,height:&quot;20px&quot;,position:&quot;absolute&quot;,zIndex:1},$$={top:Oi(Oi({},t2),{top:&quot;-5px&quot;}),right:Oi(Oi({},n2),{left:void 0,right:&quot;-5px&quot;}),bottom:Oi(Oi({},t2),{top:void 0,bottom:&quot;-5px&quot;}),left:Oi(Oi({},n2),{left:&quot;-5px&quot;}),topRight:Oi(Oi({},vg),{right:&quot;-10px&quot;,top:&quot;-10px&quot;,cursor:&quot;ne-resize&quot;}),bottomRight:Oi(Oi({},vg),{right:&quot;-10px&quot;,bottom:&quot;-10px&quot;,cursor:&quot;se-resize&quot;}),bottomLeft:Oi(Oi({},vg),{left:&quot;-10px&quot;,bottom:&quot;-10px&quot;,cursor:&quot;sw-resize&quot;}),topLeft:Oi(Oi({},vg),{left:&quot;-10px&quot;,top:&quot;-10px&quot;,cursor:&quot;nw-resize&quot;})},Z$=re.memo(function(n){var e=n.onResizeStart,t=n.direction,i=n.children,r=n.replaceStyles,s=n.className,o=re.useCallback(function(h){e(h,t)},[e,t]),l=re.useCallback(function(h){e(h,t)},[e,t]),u=re.useMemo(function(){return Oi(Oi({position:&quot;absolute&quot;,userSelect:&quot;none&quot;},$$[t]),r??{})},[r,t]);return I.jsx(&quot;div&quot;,{className:s||void 0,style:u,onMouseDown:o,onTouchStart:l,children:i})}),J$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&amp;&amp;(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!=&quot;function&quot;&amp;&amp;t!==null)throw new TypeError(&quot;Class extends value &quot;+String(t)+&quot; is not a constructor or null&quot;);n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),vo=function(){return vo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t&lt;i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&amp;&amp;(n[r]=e[r])}return n},vo.apply(this,arguments)},Q$={width:&quot;auto&quot;,height:&quot;auto&quot;},bg=function(n,e,t){return Math.max(Math.min(n,t),e)},i2=function(n,e,t){var i=Math.round(n/e);return i*e+t*(i-1)},Gu=function(n,e){return new RegExp(n,&quot;i&quot;).test(e)},xg=function(n){return!!(n.touches&amp;&amp;n.touches.length)},eZ=function(n){return!!((n.clientX||n.clientX===0)&amp;&amp;(n.clientY||n.clientY===0))},r2=function(n,e,t){t===void 0&amp;&amp;(t=0);var i=e.reduce(function(s,o,l){return Math.abs(o-n)&lt;Math.abs(e[s]-n)?l:s},0),r=Math.abs(e[i]-n);return t===0||r&lt;t?e[i]:n},Gx=function(n){return n=n.toString(),n===&quot;auto&quot;||n.endsWith(&quot;px&quot;)||n.endsWith(&quot;%&quot;)||n.endsWith(&quot;vh&quot;)||n.endsWith(&quot;vw&quot;)||n.endsWith(&quot;vmax&quot;)||n.endsWith(&quot;vmin&quot;)?n:&quot;&quot;.concat(n,&quot;px&quot;)},Sg=function(n,e,t,i){if(n&amp;&amp;typeof n==&quot;string&quot;){if(n.endsWith(&quot;px&quot;))return Number(n.replace(&quot;px&quot;,&quot;&quot;));if(n.endsWith(&quot;%&quot;)){var r=Number(n.replace(&quot;%&quot;,&quot;&quot;))/100;return e*r}if(n.endsWith(&quot;vw&quot;)){var r=Number(n.replace(&quot;vw&quot;,&quot;&quot;))/100;return t*r}if(n.endsWith(&quot;vh&quot;)){var r=Number(n.replace(&quot;vh&quot;,&quot;&quot;))/100;return i*r}}return n},tZ=function(n,e,t,i,r,s,o){return i=Sg(i,n.width,e,t),r=Sg(r,n.height,e,t),s=Sg(s,n.width,e,t),o=Sg(o,n.height,e,t),{maxWidth:typeof i&gt;&quot;u&quot;?void 0:Number(i),maxHeight:typeof r&gt;&quot;u&quot;?void 0:Number(r),minWidth:typeof s&gt;&quot;u&quot;?void 0:Number(s),minHeight:typeof o&gt;&quot;u&quot;?void 0:Number(o)}},nZ=function(n){return Array.isArray(n)?n:[n,n]},iZ=[&quot;as&quot;,&quot;ref&quot;,&quot;style&quot;,&quot;className&quot;,&quot;grid&quot;,&quot;gridGap&quot;,&quot;snap&quot;,&quot;bounds&quot;,&quot;boundsByDirection&quot;,&quot;size&quot;,&quot;defaultSize&quot;,&quot;minWidth&quot;,&quot;minHeight&quot;,&quot;maxWidth&quot;,&quot;maxHeight&quot;,&quot;lockAspectRatio&quot;,&quot;lockAspectRatioExtraWidth&quot;,&quot;lockAspectRatioExtraHeight&quot;,&quot;enable&quot;,&quot;handleStyles&quot;,&quot;handleClasses&quot;,&quot;handleWrapperStyle&quot;,&quot;handleWrapperClass&quot;,&quot;children&quot;,&quot;onResizeStart&quot;,&quot;onResize&quot;,&quot;onResizeStop&quot;,&quot;handleComponent&quot;,&quot;scale&quot;,&quot;resizeRatio&quot;,&quot;snapGap&quot;],s2=&quot;__resizable_base__&quot;,rZ=function(n){J$(e,n);function e(t){var i,r,s,o,l=n.call(this,t)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.delta={width:0,height:0},l.appendBase=function(){if(!l.resizable||!l.window)return null;var u=l.parentNode;if(!u)return null;var h=l.window.document.createElement(&quot;div&quot;);return h.style.width=&quot;100%&quot;,h.style.height=&quot;100%&quot;,h.style.position=&quot;absolute&quot;,h.style.transform=&quot;scale(0, 0)&quot;,h.style.left=&quot;0&quot;,h.style.flex=&quot;0 0 100%&quot;,h.classList?h.classList.add(s2):h.className+=s2,u.appendChild(h),h},l.removeBase=function(u){var h=l.parentNode;h&amp;&amp;h.removeChild(u)},l.state={isResizing:!1,width:(r=(i=l.propsSize)===null||i===void 0?void 0:i.width)!==null&amp;&amp;r!==void 0?r:&quot;auto&quot;,height:(o=(s=l.propsSize)===null||s===void 0?void 0:s.height)!==null&amp;&amp;o!==void 0?o:&quot;auto&quot;,direction:&quot;right&quot;,original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:&quot;100%&quot;,width:&quot;100%&quot;,backgroundColor:&quot;rgba(0,0,0,0)&quot;,cursor:&quot;auto&quot;,opacity:0,position:&quot;fixed&quot;,zIndex:9999,top:&quot;0&quot;,left:&quot;0&quot;,bottom:&quot;0&quot;,right:&quot;0&quot;},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(e.prototype,&quot;parentNode&quot;,{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;window&quot;,{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;propsSize&quot;,{get:function(){return this.props.size||this.props.defaultSize||Q$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;size&quot;,{get:function(){var t=0,i=0;if(this.resizable&amp;&amp;this.window){var r=this.resizable.offsetWidth,s=this.resizable.offsetHeight,o=this.resizable.style.position;o!==&quot;relative&quot;&amp;&amp;(this.resizable.style.position=&quot;relative&quot;),t=this.resizable.style.width!==&quot;auto&quot;?this.resizable.offsetWidth:r,i=this.resizable.style.height!==&quot;auto&quot;?this.resizable.offsetHeight:s,this.resizable.style.position=o}return{width:t,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;sizeStyle&quot;,{get:function(){var t=this,i=this.props.size,r=function(l){var u;if(typeof t.state[l]&gt;&quot;u&quot;||t.state[l]===&quot;auto&quot;)return&quot;auto&quot;;if(t.propsSize&amp;&amp;t.propsSize[l]&amp;&amp;(!((u=t.propsSize[l])===null||u===void 0)&amp;&amp;u.toString().endsWith(&quot;%&quot;))){if(t.state[l].toString().endsWith(&quot;%&quot;))return t.state[l].toString();var h=t.getParentSize(),f=Number(t.state[l].toString().replace(&quot;px&quot;,&quot;&quot;)),p=f/h[l]*100;return&quot;&quot;.concat(p,&quot;%&quot;)}return Gx(t.state[l])},s=i&amp;&amp;typeof i.width&lt;&quot;u&quot;&amp;&amp;!this.state.isResizing?Gx(i.width):r(&quot;width&quot;),o=i&amp;&amp;typeof i.height&lt;&quot;u&quot;&amp;&amp;!this.state.isResizing?Gx(i.height):r(&quot;height&quot;);return{width:s,height:o}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var i=!1,r=this.parentNode.style.flexWrap;r!==&quot;wrap&quot;&amp;&amp;(i=!0,this.parentNode.style.flexWrap=&quot;wrap&quot;),t.style.position=&quot;relative&quot;,t.style.minWidth=&quot;100%&quot;,t.style.minHeight=&quot;100%&quot;;var s={width:t.offsetWidth,height:t.offsetHeight};return i&amp;&amp;(this.parentNode.style.flexWrap=r),this.removeBase(t),s},e.prototype.bindEvents=function(){this.window&amp;&amp;(this.window.addEventListener(&quot;mouseup&quot;,this.onMouseUp),this.window.addEventListener(&quot;mousemove&quot;,this.onMouseMove),this.window.addEventListener(&quot;mouseleave&quot;,this.onMouseUp),this.window.addEventListener(&quot;touchmove&quot;,this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener(&quot;touchend&quot;,this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&amp;&amp;(this.window.removeEventListener(&quot;mouseup&quot;,this.onMouseUp),this.window.removeEventListener(&quot;mousemove&quot;,this.onMouseMove),this.window.removeEventListener(&quot;mouseleave&quot;,this.onMouseUp),this.window.removeEventListener(&quot;touchmove&quot;,this.onMouseMove,!0),this.window.removeEventListener(&quot;touchend&quot;,this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!==&quot;auto&quot;?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&amp;&amp;this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,i){var r=this.propsSize&amp;&amp;this.propsSize[i];return this.state[i]===&quot;auto&quot;&amp;&amp;this.state.original[i]===t&amp;&amp;(typeof r&gt;&quot;u&quot;||r===&quot;auto&quot;)?&quot;auto&quot;:t},e.prototype.calculateNewMaxFromBoundary=function(t,i){var r=this.props.boundsByDirection,s=this.state.direction,o=r&amp;&amp;Gu(&quot;left&quot;,s),l=r&amp;&amp;Gu(&quot;top&quot;,s),u,h;if(this.props.bounds===&quot;parent&quot;){var f=this.parentNode;f&amp;&amp;(u=o?this.resizableRight-this.parentLeft:f.offsetWidth+(this.parentLeft-this.resizableLeft),h=l?this.resizableBottom-this.parentTop:f.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds===&quot;window&quot;?this.window&amp;&amp;(u=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,h=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&amp;&amp;(u=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),h=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return u&amp;&amp;Number.isFinite(u)&amp;&amp;(t=t&amp;&amp;t&lt;u?t:u),h&amp;&amp;Number.isFinite(h)&amp;&amp;(i=i&amp;&amp;i&lt;h?i:h),{maxWidth:t,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(t,i){var r=this.props.scale||1,s=nZ(this.props.resizeRatio||1),o=s[0],l=s[1],u=this.state,h=u.direction,f=u.original,p=this.props,m=p.lockAspectRatio,g=p.lockAspectRatioExtraHeight,v=p.lockAspectRatioExtraWidth,x=f.width,b=f.height,_=g||0,T=v||0;return Gu(&quot;right&quot;,h)&amp;&amp;(x=f.width+(t-f.x)*o/r,m&amp;&amp;(b=(x-T)/this.ratio+_)),Gu(&quot;left&quot;,h)&amp;&amp;(x=f.width-(t-f.x)*o/r,m&amp;&amp;(b=(x-T)/this.ratio+_)),Gu(&quot;bottom&quot;,h)&amp;&amp;(b=f.height+(i-f.y)*l/r,m&amp;&amp;(x=(b-_)*this.ratio+T)),Gu(&quot;top&quot;,h)&amp;&amp;(b=f.height-(i-f.y)*l/r,m&amp;&amp;(x=(b-_)*this.ratio+T)),{newWidth:x,newHeight:b}},e.prototype.calculateNewSizeFromAspectRatio=function(t,i,r,s){var o=this.props,l=o.lockAspectRatio,u=o.lockAspectRatioExtraHeight,h=o.lockAspectRatioExtraWidth,f=typeof s.width&gt;&quot;u&quot;?10:s.width,p=typeof r.width&gt;&quot;u&quot;||r.width&lt;0?t:r.width,m=typeof s.height&gt;&quot;u&quot;?10:s.height,g=typeof r.height&gt;&quot;u&quot;||r.height&lt;0?i:r.height,v=u||0,x=h||0;if(l){var b=(m-v)*this.ratio+x,_=(g-v)*this.ratio+x,T=(f-x)/this.ratio+v,w=(p-x)/this.ratio+v,S=Math.max(f,b),C=Math.min(p,_),O=Math.max(m,T),M=Math.min(g,w);t=bg(t,S,C),i=bg(i,O,M)}else t=bg(t,f,p),i=bg(i,m,g);return{newWidth:t,newHeight:i}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds===&quot;parent&quot;){var i=this.parentNode;if(i){var r=i.getBoundingClientRect();this.parentLeft=r.left*t,this.parentTop=r.top*t}}if(this.props.bounds&amp;&amp;typeof this.props.bounds!=&quot;string&quot;){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*t,this.targetTop=s.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),l=o.left,u=o.top,h=o.right,f=o.bottom;this.resizableLeft=l*t,this.resizableRight=h*t,this.resizableTop=u*t,this.resizableBottom=f*t}},e.prototype.onResizeStart=function(t,i){if(!(!this.resizable||!this.window)){var r=0,s=0;if(t.nativeEvent&amp;&amp;eZ(t.nativeEvent)?(r=t.nativeEvent.clientX,s=t.nativeEvent.clientY):t.nativeEvent&amp;&amp;xg(t.nativeEvent)&amp;&amp;(r=t.nativeEvent.touches[0].clientX,s=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&amp;&amp;this.resizable){var o=this.props.onResizeStart(t,i,this.resizable);if(o===!1)return}this.props.size&amp;&amp;(typeof this.props.size.height&lt;&quot;u&quot;&amp;&amp;this.props.size.height!==this.state.height&amp;&amp;this.setState({height:this.props.size.height}),typeof this.props.size.width&lt;&quot;u&quot;&amp;&amp;this.props.size.width!==this.state.width&amp;&amp;this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio==&quot;number&quot;?this.props.lockAspectRatio:this.size.width/this.size.height;var l,u=this.window.getComputedStyle(this.resizable);if(u.flexBasis!==&quot;auto&quot;){var h=this.parentNode;if(h){var f=this.window.getComputedStyle(h).flexDirection;this.flexDir=f.startsWith(&quot;row&quot;)?&quot;row&quot;:&quot;column&quot;,l=u.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var p={original:{x:r,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:vo(vo({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||&quot;auto&quot;}),direction:i,flexBasis:l};this.setState(p)}},e.prototype.onMouseMove=function(t){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&amp;&amp;xg(t))try{t.preventDefault(),t.stopPropagation()}catch{}var r=this.props,s=r.maxWidth,o=r.maxHeight,l=r.minWidth,u=r.minHeight,h=xg(t)?t.touches[0].clientX:t.clientX,f=xg(t)?t.touches[0].clientY:t.clientY,p=this.state,m=p.direction,g=p.original,v=p.width,x=p.height,b=this.getParentSize(),_=tZ(b,this.window.innerWidth,this.window.innerHeight,s,o,l,u);s=_.maxWidth,o=_.maxHeight,l=_.minWidth,u=_.minHeight;var T=this.calculateNewSizeFromDirection(h,f),w=T.newHeight,S=T.newWidth,C=this.calculateNewMaxFromBoundary(s,o);this.props.snap&amp;&amp;this.props.snap.x&amp;&amp;(S=r2(S,this.props.snap.x,this.props.snapGap)),this.props.snap&amp;&amp;this.props.snap.y&amp;&amp;(w=r2(w,this.props.snap.y,this.props.snapGap));var O=this.calculateNewSizeFromAspectRatio(S,w,{width:C.maxWidth,height:C.maxHeight},{width:l,height:u});if(S=O.newWidth,w=O.newHeight,this.props.grid){var M=i2(S,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),N=i2(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),R=this.props.snapGap||0,D=R===0||Math.abs(M-S)&lt;=R?M:S,L=R===0||Math.abs(N-w)&lt;=R?N:w;S=D,w=L}var H={width:S-g.width,height:w-g.height};if(this.delta=H,v&amp;&amp;typeof v==&quot;string&quot;){if(v.endsWith(&quot;%&quot;)){var q=S/b.width*100;S=&quot;&quot;.concat(q,&quot;%&quot;)}else if(v.endsWith(&quot;vw&quot;)){var z=S/this.window.innerWidth*100;S=&quot;&quot;.concat(z,&quot;vw&quot;)}else if(v.endsWith(&quot;vh&quot;)){var $=S/this.window.innerHeight*100;S=&quot;&quot;.concat($,&quot;vh&quot;)}}if(x&amp;&amp;typeof x==&quot;string&quot;){if(x.endsWith(&quot;%&quot;)){var q=w/b.height*100;w=&quot;&quot;.concat(q,&quot;%&quot;)}else if(x.endsWith(&quot;vw&quot;)){var z=w/this.window.innerWidth*100;w=&quot;&quot;.concat(z,&quot;vw&quot;)}else if(x.endsWith(&quot;vh&quot;)){var $=w/this.window.innerHeight*100;w=&quot;&quot;.concat($,&quot;vh&quot;)}}var P={width:this.createSizeForCssProperty(S,&quot;width&quot;),height:this.createSizeForCssProperty(w,&quot;height&quot;)};this.flexDir===&quot;row&quot;?P.flexBasis=P.width:this.flexDir===&quot;column&quot;&amp;&amp;(P.flexBasis=P.height);var j=this.state.width!==P.width,G=this.state.height!==P.height,ee=this.state.flexBasis!==P.flexBasis,F=j||G||ee;F&amp;&amp;GP.flushSync(function(){i.setState(P)}),this.props.onResize&amp;&amp;F&amp;&amp;this.props.onResize(t,m,this.resizable,H)}},e.prototype.onMouseUp=function(t){var i,r,s=this.state,o=s.isResizing,l=s.direction;s.original,!(!o||!this.resizable)&amp;&amp;(this.props.onResizeStop&amp;&amp;this.props.onResizeStop(t,l,this.resizable,this.delta),this.props.size&amp;&amp;this.setState({width:(i=this.props.size.width)!==null&amp;&amp;i!==void 0?i:&quot;auto&quot;,height:(r=this.props.size.height)!==null&amp;&amp;r!==void 0?r:&quot;auto&quot;}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:vo(vo({},this.state.backgroundStyle),{cursor:&quot;auto&quot;})}))},e.prototype.updateSize=function(t){var i,r;this.setState({width:(i=t.width)!==null&amp;&amp;i!==void 0?i:&quot;auto&quot;,height:(r=t.height)!==null&amp;&amp;r!==void 0?r:&quot;auto&quot;})},e.prototype.renderResizer=function(){var t=this,i=this.props,r=i.enable,s=i.handleStyles,o=i.handleClasses,l=i.handleWrapperStyle,u=i.handleWrapperClass,h=i.handleComponent;if(!r)return null;var f=Object.keys(r).map(function(p){return r[p]!==!1?I.jsx(Z$,{direction:p,onResizeStart:t.onResizeStart,replaceStyles:s&amp;&amp;s[p],className:o&amp;&amp;o[p],children:h&amp;&amp;h[p]?h[p]:null},p):null});return I.jsx(&quot;div&quot;,{className:u,style:l,children:f})},e.prototype.render=function(){var t=this,i=Object.keys(this.props).reduce(function(o,l){return iZ.indexOf(l)!==-1||(o[l]=t.props[l]),o},{}),r=vo(vo(vo({position:&quot;relative&quot;,userSelect:this.state.isResizing?&quot;none&quot;:&quot;auto&quot;},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:&quot;border-box&quot;,flexShrink:0});this.state.flexBasis&amp;&amp;(r.flexBasis=this.state.flexBasis);var s=this.props.as||&quot;div&quot;;return I.jsxs(s,vo({style:r,className:this.props.className},i,{ref:function(o){o&amp;&amp;(t.resizable=o)},children:[this.state.isResizing&amp;&amp;I.jsx(&quot;div&quot;,{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:&quot;div&quot;,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(re.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var KS=function(n,e){return KS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&amp;&amp;(t[r]=i[r])},KS(n,e)};function sZ(n,e){KS(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Fi=function(){return Fi=Object.assign||function(e){for(var t,i=1,r=arguments.length;i&lt;r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&amp;&amp;(e[s]=t[s])}return e},Fi.apply(this,arguments)};function oZ(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;e.indexOf(i)&lt;0&amp;&amp;(t[i]=n[i]);if(n!=null&amp;&amp;typeof Object.getOwnPropertySymbols==&quot;function&quot;)for(var r=0,i=Object.getOwnPropertySymbols(n);r&lt;i.length;r++)e.indexOf(i[r])&lt;0&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i[r])&amp;&amp;(t[i[r]]=n[i[r]]);return t}var aZ={width:&quot;auto&quot;,height:&quot;auto&quot;,display:&quot;inline-block&quot;,position:&quot;absolute&quot;,top:0,left:0},lZ=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},h1=function(n){sZ(e,n);function e(t){var i=n.call(this,t)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,i=t.left,r=t.top,s=this.getDraggablePosition(),o=s.x,l=s.y;this.draggable.setState({x:o-i,y:l-r}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,i=t.x,r=t.y;return{x:i,y:r}},e.prototype.getParent=function(){return this.resizable&amp;&amp;this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth&gt;&quot;u&quot;?Number.MAX_SAFE_INTEGER:this.props.maxWidth,i=typeof this.props.maxHeight&gt;&quot;u&quot;?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:i}},e.prototype.getSelfElement=function(){return this.resizable&amp;&amp;this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var i=this.props.scale;switch(this.props.bounds){case&quot;window&quot;:return window.innerHeight/i;case&quot;body&quot;:return document.body.offsetHeight/i;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var i=this.props.scale;switch(this.props.bounds){case&quot;window&quot;:return window.innerWidth/i;case&quot;body&quot;:return document.body.offsetWidth/i;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,i){this.props.onDragStart&amp;&amp;this.props.onDragStart(t,i);var r=this.getDraggablePosition();if(this.originalPosition=r,!!this.props.bounds){var s=this.getParent(),o=this.props.scale,l;if(this.props.bounds===&quot;parent&quot;)l=s;else if(this.props.bounds===&quot;body&quot;){var u=s.getBoundingClientRect(),h=u.left,f=u.top,p=document.body.getBoundingClientRect(),m=-(h-s.offsetLeft*o-p.left)/o,g=-(f-s.offsetTop*o-p.top)/o,v=(document.body.offsetWidth-this.resizable.size.width*o)/o+m,x=(document.body.offsetHeight-this.resizable.size.height*o)/o+g;return this.setState({bounds:{top:g,right:v,bottom:x,left:m}})}else if(this.props.bounds===&quot;window&quot;){if(!this.resizable)return;var b=s.getBoundingClientRect(),_=b.left,T=b.top,w=-(_-s.offsetLeft*o)/o,S=-(T-s.offsetTop*o)/o,v=(window.innerWidth-this.resizable.size.width*o)/o+w,x=(window.innerHeight-this.resizable.size.height*o)/o+S;return this.setState({bounds:{top:S,right:v,bottom:x,left:w}})}else typeof this.props.bounds==&quot;string&quot;?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&amp;&amp;(l=this.props.bounds);if(!(!(l instanceof HTMLElement)||!(s instanceof HTMLElement))){var C=l.getBoundingClientRect(),O=C.left,M=C.top,N=s.getBoundingClientRect(),R=N.left,D=N.top,L=(O-R)/o,H=M-D;if(this.resizable){this.updateOffsetFromParent();var q=this.offsetFromParent;this.setState({bounds:{top:H-q.top,right:L+(l.offsetWidth-this.resizable.size.width)-q.left/o,bottom:H+(l.offsetHeight-this.resizable.size.height)-q.top,left:L-q.left/o}})}}}},e.prototype.onDrag=function(t,i){if(this.props.onDrag){var r=this.offsetFromParent,s=r.left,o=r.top;if(!this.props.dragAxis||this.props.dragAxis===&quot;both&quot;)return this.props.onDrag(t,Fi(Fi({},i),{x:i.x+s,y:i.y+o}));if(this.props.dragAxis===&quot;x&quot;)return this.props.onDrag(t,Fi(Fi({},i),{x:i.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis===&quot;y&quot;)return this.props.onDrag(t,Fi(Fi({},i),{x:this.originalPosition.x+s,y:i.y+o,deltaX:0}))}},e.prototype.onDragStop=function(t,i){if(this.props.onDragStop){var r=this.offsetFromParent,s=r.left,o=r.top;if(!this.props.dragAxis||this.props.dragAxis===&quot;both&quot;)return this.props.onDragStop(t,Fi(Fi({},i),{x:i.x+s,y:i.y+o}));if(this.props.dragAxis===&quot;x&quot;)return this.props.onDragStop(t,Fi(Fi({},i),{x:i.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis===&quot;y&quot;)return this.props.onDragStop(t,Fi(Fi({},i),{x:this.originalPosition.x+s,y:i.y+o,deltaX:0}))}},e.prototype.onResizeStart=function(t,i,r){t.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,o=this.offsetFromParent,l=this.getDraggablePosition();if(this.resizingPosition={x:l.x+o.left,y:l.y+o.top},this.originalPosition=l,this.props.bounds){var u=this.getParent(),h=void 0;this.props.bounds===&quot;parent&quot;?h=u:this.props.bounds===&quot;body&quot;?h=document.body:this.props.bounds===&quot;window&quot;?h=window:typeof this.props.bounds==&quot;string&quot;?h=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&amp;&amp;(h=this.props.bounds);var f=this.getSelfElement();if(f instanceof Element&amp;&amp;(h instanceof HTMLElement||h===window)&amp;&amp;u instanceof HTMLElement){var p=this.getMaxSizesFromProps(),m=p.maxWidth,g=p.maxHeight,v=this.getParentSize();if(m&amp;&amp;typeof m==&quot;string&quot;)if(m.endsWith(&quot;%&quot;)){var x=Number(m.replace(&quot;%&quot;,&quot;&quot;))/100;m=v.width*x}else m.endsWith(&quot;px&quot;)&amp;&amp;(m=Number(m.replace(&quot;px&quot;,&quot;&quot;)));if(g&amp;&amp;typeof g==&quot;string&quot;)if(g.endsWith(&quot;%&quot;)){var x=Number(g.replace(&quot;%&quot;,&quot;&quot;))/100;g=v.height*x}else g.endsWith(&quot;px&quot;)&amp;&amp;(g=Number(g.replace(&quot;px&quot;,&quot;&quot;)));var b=f.getBoundingClientRect(),_=b.left,T=b.top,w=this.props.bounds===&quot;window&quot;?{left:0,top:0}:h.getBoundingClientRect(),S=w.left,C=w.top,O=this.getOffsetWidth(h),M=this.getOffsetHeight(h),N=i.toLowerCase().endsWith(&quot;left&quot;),R=i.toLowerCase().endsWith(&quot;right&quot;),D=i.startsWith(&quot;top&quot;),L=i.startsWith(&quot;bottom&quot;);if((N||D)&amp;&amp;this.resizable){var H=(_-S)/s+this.resizable.size.width;this.setState({maxWidth:H&gt;Number(m)?m:H})}if(R||this.props.lockAspectRatio&amp;&amp;!N&amp;&amp;!D){var H=O+(S-_)/s;this.setState({maxWidth:H&gt;Number(m)?m:H})}if((D||N)&amp;&amp;this.resizable){var H=(T-C)/s+this.resizable.size.height;this.setState({maxHeight:H&gt;Number(g)?g:H})}if(L||this.props.lockAspectRatio&amp;&amp;!D&amp;&amp;!N){var H=M+(C-T)/s;this.setState({maxHeight:H&gt;Number(g)?g:H})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&amp;&amp;this.props.onResizeStart(t,i,r)},e.prototype.onResize=function(t,i,r,s){var o=this,l={x:this.originalPosition.x,y:this.originalPosition.y},u=-s.width,h=-s.height,f=[&quot;top&quot;,&quot;left&quot;,&quot;topLeft&quot;,&quot;bottomLeft&quot;,&quot;topRight&quot;];f.includes(i)&amp;&amp;(i===&quot;bottomLeft&quot;?l.x+=u:(i===&quot;topRight&quot;||(l.x+=u),l.y+=h));var p=this.draggable.state;(l.x!==p.x||l.y!==p.y)&amp;&amp;GP.flushSync(function(){o.draggable.setState(l)}),this.updateOffsetFromParent();var m=this.offsetFromParent,g=this.getDraggablePosition().x+m.left,v=this.getDraggablePosition().y+m.top;this.resizingPosition={x:g,y:v},this.props.onResize&amp;&amp;this.props.onResize(t,i,r,s,{x:g,y:v})},e.prototype.onResizeStop=function(t,i,r,s){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),l=o.maxWidth,u=o.maxHeight;this.setState({maxWidth:l,maxHeight:u}),this.props.onResizeStop&amp;&amp;this.props.onResizeStop(t,i,r,s,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&amp;&amp;this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,i=this.getParent(),r=this.getSelfElement();if(!i||r===null)return{top:0,left:0};var s=i.getBoundingClientRect(),o=s.left,l=s.top,u=r.getBoundingClientRect(),h=this.getDraggablePosition(),f=i.scrollLeft,p=i.scrollTop;this.offsetFromParent={left:u.left-o+f-h.x*t,top:u.top-l+p-h.y*t}},e.prototype.render=function(){var t=this,i=this.props,r=i.disableDragging,s=i.style,o=i.dragHandleClassName,l=i.position,u=i.onMouseDown,h=i.onMouseUp,f=i.dragAxis,p=i.dragGrid,m=i.bounds,g=i.enableUserSelectHack,v=i.cancel,x=i.children;i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop;var b=i.resizeHandleStyles,_=i.resizeHandleClasses,T=i.resizeHandleComponent,w=i.enableResizing,S=i.resizeGrid,C=i.resizeHandleWrapperClass,O=i.resizeHandleWrapperStyle,M=i.scale,N=i.allowAnyClick,R=i.dragPositionOffset,D=oZ(i,[&quot;disableDragging&quot;,&quot;style&quot;,&quot;dragHandleClassName&quot;,&quot;position&quot;,&quot;onMouseDown&quot;,&quot;onMouseUp&quot;,&quot;dragAxis&quot;,&quot;dragGrid&quot;,&quot;bounds&quot;,&quot;enableUserSelectHack&quot;,&quot;cancel&quot;,&quot;children&quot;,&quot;onResizeStart&quot;,&quot;onResize&quot;,&quot;onResizeStop&quot;,&quot;onDragStart&quot;,&quot;onDrag&quot;,&quot;onDragStop&quot;,&quot;resizeHandleStyles&quot;,&quot;resizeHandleClasses&quot;,&quot;resizeHandleComponent&quot;,&quot;enableResizing&quot;,&quot;resizeGrid&quot;,&quot;resizeHandleWrapperClass&quot;,&quot;resizeHandleWrapperStyle&quot;,&quot;scale&quot;,&quot;allowAnyClick&quot;,&quot;dragPositionOffset&quot;]),L=this.props.default?Fi({},this.props.default):void 0;delete D.default;var H=r||o?{cursor:&quot;auto&quot;}:{cursor:&quot;move&quot;},q=Fi(Fi(Fi({},aZ),H),s),z=this.offsetFromParent,$=z.left,P=z.top,j;l&amp;&amp;(j={x:l.x-$,y:l.y-P});var G=this.state.resizing?void 0:j,ee=this.state.resizing?&quot;both&quot;:f;return re.createElement(K$,{ref:function(F){F&amp;&amp;(t.draggable=F)},handle:o?&quot;.&quot;.concat(o):void 0,defaultPosition:L,onMouseDown:u,onMouseUp:h,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:ee,disabled:r,grid:p,bounds:m?this.state.bounds:void 0,position:G,enableUserSelectHack:g,cancel:v,scale:M,allowAnyClick:N,nodeRef:this.resizableElement,positionOffset:R},re.createElement(rZ,Fi({},D,{ref:function(F){F&amp;&amp;(t.resizable=F,t.resizableElement.current=F.resizable)},defaultSize:L,size:this.props.size,enable:typeof w==&quot;boolean&quot;?lZ(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:q,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:S,handleWrapperClass:C,handleWrapperStyle:O,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:b,handleClasses:_,handleComponent:T,scale:this.props.scale}),x))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(re.PureComponent);const cZ=({data:n})=&gt;{const[e,t]=re.useState(!0),i=()=&gt;{t(!e)};return e?I.jsxs(&quot;div&quot;,{className:&quot;json-viewer bg-white p-2 border rounded&quot;,children:[I.jsxs(&quot;div&quot;,{className:&quot;flex justify-between items-center mb-2&quot;,children:[I.jsx(&quot;h3&quot;,{className:&quot;font-bold&quot;,children:&quot;JSON Data&quot;}),I.jsx(&quot;button&quot;,{className:&quot;text-blue-500 underline&quot;,onClick:i,children:&quot;Undock&quot;})]}),I.jsx(VO,{data:n,shouldExpandNode:HO})]}):I.jsx(h1,{default:{x:100,y:100,width:400,height:300},minWidth:200,minHeight:100,bounds:&quot;window&quot;,className:&quot;bg-white border rounded shadow-lg&quot;,children:I.jsxs(&quot;div&quot;,{className:&quot;json-viewer p-2 h-full&quot;,children:[I.jsxs(&quot;div&quot;,{className:&quot;flex justify-between items-center mb-2&quot;,children:[I.jsx(&quot;h3&quot;,{className:&quot;font-bold&quot;,children:&quot;JSON Data&quot;}),I.jsx(&quot;button&quot;,{className:&quot;text-blue-500 underline&quot;,onClick:i,children:&quot;Dock&quot;})]}),I.jsx(&quot;div&quot;,{className:&quot;overflow-auto h-full&quot;,children:I.jsx(VO,{data:n,shouldExpandNode:HO})})]})})},uZ=({clickCoordinate:n,prec:e})=&gt;{const{zIsUp:t}=io();if(!n)return I.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:&quot;Â &quot;});const i=n.x.toFixed(e),r=n.y.toFixed(e),s=n.z.toFixed(e),o=t?`(${i}, ${r}, ${s})`:`(${i}, ${s}, ${r})`;return I.jsx(&quot;div&quot;,{className:&quot;table-cell w-48 flex items-center pointer-events-auto&quot;,children:I.jsx(&quot;span&quot;,{children:o})})},hZ=()=&gt;{const{name:n,faceIndex:e,clickCoordinate:t,jsonData:i,isJsonViewVisible:r,setIsJsonViewVisible:s}=Rs(),o=()=&gt;{s(!r)};return I.jsxs(&quot;div&quot;,{className:&quot;bg-gray-400 bg-opacity-50 rounded p-2 min-w-80&quot;,children:[I.jsx(&quot;h2&quot;,{className:&quot;font-bold&quot;,children:&quot;Selected Object Info&quot;}),I.jsxs(&quot;div&quot;,{className:&quot;table-row pointer-events-auto&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Name:&quot;}),I.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:n})]}),I.jsxs(&quot;div&quot;,{className:&quot;table-row hidden&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Face Index:&quot;}),I.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:e})]}),I.jsxs(&quot;div&quot;,{className:&quot;table-row&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;table-cell w-24 min-w-24&quot;,children:&quot;Clicked @:&quot;}),I.jsx(uZ,{clickCoordinate:t,prec:3})]}),i&amp;&amp;I.jsxs(&quot;div&quot;,{className:&quot;table-row&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;JSON Data:&quot;}),I.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:I.jsx(&quot;button&quot;,{className:&quot;bg-blue-500 text-white px-2 py-1 rounded&quot;,onClick:o,children:r?&quot;Hide JSON&quot;:&quot;Show JSON&quot;})})]}),r&amp;&amp;i&amp;&amp;I.jsx(&quot;div&quot;,{className:&quot;mt-2&quot;,children:I.jsx(cZ,{data:i})})]})},fZ=n=&gt;I.jsx(&quot;svg&quot;,{fill:&quot;none&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:1.5,stroke:&quot;currentColor&quot;,className:&quot;w-6 h-6&quot;,children:I.jsx(&quot;path&quot;,{strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,d:&quot;M21 7.5V18M15 7.5V18M3 16.811V8.69c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811Z&quot;})}),dZ=n=&gt;I.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,fill:&quot;none&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:1.5,stroke:&quot;currentColor&quot;,className:&quot;w-6 h-6&quot;,children:I.jsx(&quot;path&quot;,{strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,d:&quot;M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z&quot;})});function pZ(){const n=qw.current,[e,t]=re.useState(0),[i,r]=re.useState(0);if(re.useEffect(()=&gt;{n&amp;&amp;(t(0),r(0))},[n]),!n)return I.jsxs(&quot;div&quot;,{className:&quot;max-w-md mx-auto mt-6 p-4 border rounded-lg shadow-sm&quot;,children:[I.jsx(&quot;h2&quot;,{className:&quot;text-lg font-semibold text-gray-800&quot;,children:&quot;No Simulation Loaded&quot;}),I.jsx(&quot;p&quot;,{className:&quot;text-sm text-gray-500 mt-2&quot;,children:&quot;Load a GLB with the ADA simulation metadata extension to view details here.&quot;})]});const s=n.steps,l=s[e].fields,u=l[i];return I.jsxs(&quot;div&quot;,{className:&quot;p-6 border rounded-lg shadow-sm bg-white bg-opacity-50 max-h-96 overflow-auto pointer-events-auto&quot;,children:[I.jsx(&quot;h2&quot;,{className:&quot;text-xl font-semibold text-gray-800&quot;,children:n.name}),I.jsx(&quot;p&quot;,{className:&quot;text-sm text-gray-500 mt-1&quot;,children:new Date(n.date).toLocaleString()}),I.jsxs(&quot;div&quot;,{className:&quot;mt-4 text-sm text-gray-700&quot;,children:[I.jsxs(&quot;div&quot;,{children:[I.jsx(&quot;strong&quot;,{children:&quot;Software:&quot;}),&quot; &quot;,n.fea_software]}),I.jsxs(&quot;div&quot;,{className:&quot;mt-1&quot;,children:[I.jsx(&quot;strong&quot;,{children:&quot;Version:&quot;}),&quot; &quot;,n.fea_software_version]})]}),I.jsxs(&quot;div&quot;,{className:&quot;mt-6&quot;,children:[I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row gap-4 items-center&quot;,children:[I.jsxs(&quot;label&quot;,{className:&quot;flex items-center text-sm text-gray-700&quot;,children:[I.jsx(&quot;span&quot;,{children:&quot;Select Step:&quot;}),I.jsx(&quot;select&quot;,{className:&quot;ml-2 p-1 border rounded&quot;,value:e,onChange:h=&gt;{const f=parseInt(h.target.value,10);t(f),r(0)},children:s.map((h,f)=&gt;I.jsxs(&quot;option&quot;,{value:f,children:[&quot;Step &quot;,f+1,&quot;: &quot;,h.analysis_type]},f))})]}),I.jsxs(&quot;label&quot;,{className:&quot;flex items-center text-sm text-gray-700&quot;,children:[I.jsx(&quot;span&quot;,{children:&quot;Select Field:&quot;}),I.jsx(&quot;select&quot;,{className:&quot;ml-2 p-1 border rounded&quot;,value:i,onChange:h=&gt;r(parseInt(h.target.value,10)),children:l.map((h,f)=&gt;I.jsx(&quot;option&quot;,{value:f,children:h.name},f))})]})]}),I.jsxs(&quot;div&quot;,{className:&quot;mt-4 p-4 border rounded bg-white&quot;,children:[I.jsxs(&quot;div&quot;,{className:&quot;text-sm text-gray-800&quot;,children:[I.jsx(&quot;strong&quot;,{children:&quot;Name:&quot;}),&quot; &quot;,u.name]}),I.jsxs(&quot;div&quot;,{className:&quot;text-sm text-gray-800 mt-1&quot;,children:[I.jsx(&quot;strong&quot;,{children:&quot;Type:&quot;}),&quot; &quot;,u.type]}),I.jsxs(&quot;div&quot;,{className:&quot;text-sm text-gray-800 mt-1&quot;,children:[I.jsx(&quot;strong&quot;,{children:&quot;BufferView:&quot;}),&quot; &quot;,u.data.bufferView,u.data.byteOffset!==void 0&amp;&amp;I.jsxs(&quot;span&quot;,{children:[&quot; @ &quot;,u.data.byteOffset,&quot; bytes&quot;]})]})]})]})]})}const mZ=n=&gt;I.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;#ffffff&quot;,...n,children:[I.jsx(&quot;rect&quot;,{x:&quot;3&quot;,y:&quot;4&quot;,width:&quot;18&quot;,height:&quot;16&quot;,rx:&quot;1&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;line&quot;,{x1:&quot;9&quot;,y1:&quot;4&quot;,x2:&quot;9&quot;,y2:&quot;20&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;line&quot;,{x1:&quot;15&quot;,y1:&quot;4&quot;,x2:&quot;15&quot;,y2:&quot;20&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;line&quot;,{x1:&quot;3&quot;,y1:&quot;10&quot;,x2:&quot;21&quot;,y2:&quot;10&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;line&quot;,{x1:&quot;3&quot;,y1:&quot;16&quot;,x2:&quot;21&quot;,y2:&quot;16&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;polyline&quot;,{points:&quot;10.5,17 11.5,15 12.5,16 13.5,14&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;})]}),gZ=()=&gt;{var f,p,m;const{selectedAnimation:n,currentKey:e,setCurrentKey:t}=wl(),i=parseFloat(e.toFixed(2)),[r,s]=re.useState(!1),o=g=&gt;{var x;const v=g.target.value;(x=Si.current)==null||x.setCurrentAnimation(v)},l=()=&gt;{Si.current&amp;&amp;Si.current.togglePlayPause()},u=()=&gt;{Si.current&amp;&amp;Si.current.stopAnimation()},h=g=&gt;{Si.current&amp;&amp;Si.current.seek(g)};return re.useEffect(()=&gt;{Si.current&amp;&amp;t(Si.current.getCurrentTime())},[n]),I.jsxs(&quot;div&quot;,{className:&quot;flex flex-col gap-2&quot;,children:[I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center gap-x-2 min-w-0 pointer-events-auto&quot;,children:[I.jsxs(&quot;select&quot;,{className:&quot;text-black font-bold py-2 px-4 rounded w-60&quot;,value:n,onChange:o,children:[I.jsx(&quot;option&quot;,{title:&quot;No Animation&quot;,value:&quot;No Animation&quot;,children:&quot;No Animation&quot;},&quot;No Animation&quot;),(f=Si.current)==null?void 0:f.getAnimationNames().map(g=&gt;I.jsx(&quot;option&quot;,{value:g,children:g},g))]}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,onClick:l,children:I.jsx(fZ,{})}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,onClick:u,children:I.jsx(dZ,{})}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,onClick:()=&gt;s(g=&gt;!g),children:I.jsx(mZ,{})}),I.jsxs(&quot;div&quot;,{className:&quot;flex items-center gap-2 min-w-[100px] max-w-sm w-full&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;range&quot;,min:&quot;0&quot;,max:((p=Si.current)==null?void 0:p.getDuration())||0,value:i,step:((m=Si.current)==null?void 0:m.getStep())||0,onChange:g=&gt;{const v=parseFloat(g.target.value);t(v),h(v)},className:&quot;w-full h-2 rounded-lg appearance-none cursor-pointer accent-blue-700 bg-blue-700/30&quot;}),I.jsx(&quot;div&quot;,{className:&quot;text-white text-sm font-mono w-12 text-center&quot;,children:i})]})]}),r&amp;&amp;I.jsx(&quot;div&quot;,{className:&quot;flex-1 overflow-hidden&quot;,children:I.jsx(pZ,{})})]})};async function kL(){console.log(&quot;Querying server for mesh info&quot;);let n=new Co(1024);lt.startMessage(n),lt.addInstanceId(n,Mi.instance_id),lt.addCommandType(n,Bn.LIST_PROCEDURES),lt.addTargetGroup(n,si.SERVER),lt.addClientType(n,si.WEB),n.finish(lt.endMessage(n)),await Mi.sendMessage(n.asUint8Array())}const f1=n=&gt;I.jsx(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 15 15&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:I.jsx(&quot;path&quot;,{fillRule:&quot;evenodd&quot;,clipRule:&quot;evenodd&quot;,d:&quot;M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z&quot;,fill:&quot;#ffffff&quot;})});async function yZ(){console.log(&quot;Querying server for list of files&quot;);let n=new Co(1024);lt.startMessage(n),lt.addInstanceId(n,Mi.instance_id),lt.addCommandType(n,Bn.LIST_FILE_OBJECTS),lt.addTargetGroup(n,si.SERVER),lt.addClientType(n,si.WEB),n.finish(lt.endMessage(n)),await Mi.sendMessage(n.asUint8Array())}const _Z=()=&gt;(l1(),I.jsxs(&quot;div&quot;,{className:&quot;bg-gray-400 bg-opacity-50 rounded p-2 mt-2 ml-2 mr-2 min-w-80&quot;,children:[I.jsx(&quot;h2&quot;,{className:&quot;font-bold&quot;,children:&quot;Server Info&quot;}),I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;pr-1 &quot;,children:&quot;Files:&quot;}),I.jsxs(&quot;select&quot;,{id:&quot;listbox&quot;,name:&quot;listbox&quot;,className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold p-2 rounded&quot;,children:[I.jsx(&quot;option&quot;,{value:&quot;item1&quot;,children:&quot;Item 1&quot;}),I.jsx(&quot;option&quot;,{value:&quot;item2&quot;,children:&quot;Item 2&quot;}),I.jsx(&quot;option&quot;,{value:&quot;item3&quot;,children:&quot;Item 3&quot;}),I.jsx(&quot;option&quot;,{value:&quot;item4&quot;,children:&quot;Item 4&quot;})]}),I.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-2 ml-2 rounded&quot;,onClick:()=&gt;yZ(),children:I.jsx(f1,{})})]})]})),vZ=n=&gt;I.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,strokeWidth:&quot;1.5&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;currentColor&quot;,children:[I.jsx(&quot;rect&quot;,{width:&quot;7&quot;,height:&quot;5&quot;,rx:&quot;0.6&quot;,transform:&quot;matrix(0 -1 -1 0 22 21)&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;rect&quot;,{width:&quot;7&quot;,height:&quot;5&quot;,rx:&quot;0.6&quot;,transform:&quot;matrix(0 -1 -1 0 7 15.5)&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;rect&quot;,{width:&quot;7&quot;,height:&quot;5&quot;,rx:&quot;0.6&quot;,transform:&quot;matrix(0 -1 -1 0 22 10)&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M17 17.5H13.5C12.3954 17.5 11.5 16.6046 11.5 15.5V8.5C11.5 7.39543 12.3954 6.5 13.5 6.5H17&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M11.5 12H7&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;})]}),bZ=n=&gt;I.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,fill:&quot;none&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:1.5,stroke:&quot;currentColor&quot;,className:&quot;w-6 h-6&quot;,children:I.jsx(&quot;path&quot;,{strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,d:&quot;m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z&quot;})}),xZ=n=&gt;I.jsxs(&quot;svg&quot;,{fill:&quot;currentColor&quot;,width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 36 36&quot;,version:&quot;1.1&quot;,preserveAspectRatio:&quot;xMidYMid meet&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[I.jsx(&quot;title&quot;,{children:&quot;tree-view-line&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M15,32H11a1,1,0,0,1-1-1V27a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1v4A1,1,0,0,1,15,32Zm-3-2h2V28H12Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-1&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M15,16H11a1,1,0,0,0-1,1v1.2H5.8V12H7a1,1,0,0,0,1-1V7A1,1,0,0,0,7,6H3A1,1,0,0,0,2,7v4a1,1,0,0,0,1,1H4.2V29.8h6.36a.8.8,0,0,0,0-1.6H5.8V19.8H10V21a1,1,0,0,0,1,1h4a1,1,0,0,0,1-1V17A1,1,0,0,0,15,16ZM4,8H6v2H4ZM14,20H12V18h2Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-2&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M34,9a1,1,0,0,0-1-1H10v2H33A1,1,0,0,0,34,9Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-3&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M33,18H18v2H33a1,1,0,0,0,0-2Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-4&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M33,28H18v2H33a1,1,0,0,0,0-2Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-5&quot;}),I.jsx(&quot;rect&quot;,{x:&quot;0&quot;,y:&quot;0&quot;,width:&quot;36&quot;,height:&quot;36&quot;,fillOpacity:&quot;0&quot;})]}),SZ=n=&gt;I.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,strokeWidth:&quot;1.5&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;currentColor&quot;,children:[I.jsx(&quot;path&quot;,{d:&quot;M3 19H12M21 19H12M12 19V13M12 13H18V5H6V13H12Z&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M9 9.01L9.01 8.99889&quot;,stroke:&quot;#000000&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M12 9.01L12.01 8.99889&quot;,stroke:&quot;#000000&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;})]}),wZ=n=&gt;I.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;#ffffff&quot;,...n,children:[I.jsx(&quot;path&quot;,{d:&quot;M6 3V21&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),I.jsx(&quot;circle&quot;,{cx:&quot;6&quot;,cy:&quot;9&quot;,r:&quot;2&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M18 3V21&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),I.jsx(&quot;circle&quot;,{cx:&quot;18&quot;,cy:&quot;15&quot;,r:&quot;2&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;})]}),$S=to((n,e)=&gt;({show_group_info_box:!1,selectedGroup:null,availableGroups:[],setShowGroupInfoBox:t=&gt;n({show_group_info_box:t}),setSelectedGroup:t=&gt;n({selectedGroup:t}),setAvailableGroups:t=&gt;n({availableGroups:t}),toggle:()=&gt;n(t=&gt;({show_group_info_box:!t.show_group_info_box}))})),EZ=()=&gt;I.jsxs(&quot;svg&quot;,{width:&quot;24&quot;,height:&quot;24&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;2&quot;,children:[I.jsx(&quot;circle&quot;,{cx:&quot;8&quot;,cy:&quot;8&quot;,r:&quot;5&quot;}),I.jsx(&quot;circle&quot;,{cx:&quot;16&quot;,cy:&quot;8&quot;,r:&quot;5&quot;}),I.jsx(&quot;circle&quot;,{cx:&quot;12&quot;,cy:&quot;16&quot;,r:&quot;5&quot;})]});async function o2(n,e,t){const i=eo.getState();if(!e||e.length===0||!n){i.clearSelectedObjects();return}if(!El){console.error(&quot;No model store or active model key available&quot;);return}try{const r=await El.getDrawRangesByMemberNames(n,e);if(r.length===0){console.warn(&quot;No draw ranges found for group members:&quot;,e),i.clearSelectedObjects();return}const s=yl.current;if(!s){console.error(&quot;No model key map available&quot;);return}const o=s.get(n);if(!o){console.error(`Mesh object not found for model key: ${n}`);return}if(t===&quot;node&quot;){const h=new Map;for(const[m,g]of r)h.has(m)||h.set(m,[]),h.get(m).push(g);const f=new Map;o.traverse(m=&gt;{if(m.isPoints){const g=m,v=g.name;if(h.has(v)){const x=f.get(v)??[];x.push(g),f.set(v,x)}}}),i.clearSelectedObjects();for(const[m,g]of h){const v=f.get(m)||[];for(const x of v)for(const b of g)i.addSelectedObject(x,b)}const p=eo.getState().selectedObjects;for(const[m,g]of p){const v=m;if(!v||!v.isPoints)continue;const x=v.userData?v.userData.unique_hash:void 0;if(!x)continue;const b=v.name,_=[];for(const O of g){const M=await AL(x,b,O);if(!M)continue;const[N,R]=M,D=N+R;for(let L=N;L&lt;D;L++)_.push(L)}iI(v,L0.color);const T=v.geometry,w=T.getAttribute(&quot;position&quot;);if(!w)continue;let S=T.getAttribute(&quot;sel&quot;);!S||S.count!==w.count?(S=new Vt(new Float32Array(w.count),1),T.setAttribute(&quot;sel&quot;,S)):S.array.fill(0);const C=S.array;for(const O of _)O&gt;=0&amp;&amp;O&lt;C.length&amp;&amp;(C[O]=1);S.needsUpdate=!0}return}const l=[],u=o;for(const[,h]of r)l.push([u,h]);i.clearSelectedObjects(),l.length&gt;0&amp;&amp;(i.addBatchofMeshes(l),console.log(`Selected ${l.length} mesh ranges for group members`))}catch(r){console.error(&quot;Error selecting group members:&quot;,r)}}const TZ=()=&gt;{const{selectedGroup:n,availableGroups:e,setSelectedGroup:t,setAvailableGroups:i}=$S();re.useEffect(()=&gt;{(()=&gt;{const o=[],l=Xy.current;l&amp;&amp;(l.design_objects&amp;&amp;l.design_objects.forEach(u=&gt;{u.groups&amp;&amp;u.groups.forEach(h=&gt;{o.push({name:h.name||&quot;Unnamed Group&quot;,description:h.description,members:h.members,type:&quot;design&quot;,parent_name:u.name||&quot;Unnamed Object&quot;})})}),l.simulation_objects&amp;&amp;l.simulation_objects.forEach(u=&gt;{u.groups&amp;&amp;u.groups.forEach(h=&gt;{o.push({name:h.name||&quot;Unnamed Group&quot;,description:h.description,members:h.members,type:&quot;simulation&quot;,parent_name:u.name||&quot;Unnamed Object&quot;,fe_object_type:h.fe_object_type})})})),i(o)})()},[i]);const r=async s=&gt;{var u,h;const o=s.target.value;if(o===&quot;&quot;){t(null),Rs.getState().setName(&quot;&quot;),await o2(&quot;&quot;,[],void 0);return}const l=e.find(f=&gt;f.name===o);if(t(l||null),l&amp;&amp;l.members&amp;&amp;l.members.length&gt;0){Rs.getState().setName(`Group: ${l.name}`);const f=[];(u=wr.current)==null||u.traverse(m=&gt;{m instanceof Ni&amp;&amp;f.push(m)});let p=null;for(const m of f)if(((h=m.ada_ext_data)==null?void 0:h.name)==l.parent_name){p=m;break}if(!p){console.warn(`Parent object ${l.parent_name} not found in scene`);return}await o2(p.unique_key,l.members,l.fe_object_type)}};return I.jsxs(&quot;div&quot;,{className:&quot;bg-gray-400 bg-opacity-50 rounded p-2 min-w-80&quot;,children:[I.jsx(&quot;h2&quot;,{className:&quot;font-bold&quot;,children:&quot;Group Information&quot;}),I.jsxs(&quot;div&quot;,{className:&quot;table-row pointer-events-auto&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Group:&quot;}),I.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:I.jsxs(&quot;select&quot;,{className:&quot;w-full p-1 rounded bg-white border&quot;,value:(n==null?void 0:n.name)||&quot;&quot;,onChange:r,children:[I.jsx(&quot;option&quot;,{value:&quot;&quot;,children:&quot;Select a group...&quot;}),e.map((s,o)=&gt;I.jsxs(&quot;option&quot;,{value:s.name,children:[s.name,&quot; (&quot;,s.type,&quot;)&quot;]},`${s.name}-${o}`))]})})]}),n&amp;&amp;I.jsxs(I.Fragment,{children:[I.jsxs(&quot;div&quot;,{className:&quot;table-row&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Type:&quot;}),I.jsxs(&quot;div&quot;,{className:&quot;table-cell w-48 capitalize&quot;,children:[n.type,&quot; Object&quot;]})]}),I.jsxs(&quot;div&quot;,{className:&quot;table-row&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Description:&quot;}),I.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:n.description||&quot;No description available&quot;})]}),I.jsxs(&quot;div&quot;,{className:&quot;table-row&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Members:&quot;}),I.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:n.members?n.members.length:0})]})]})]})},MZ=()=&gt;{const{show_info_box:n}=Rs(),{show_group_info_box:e}=$S(),{isNodeEditorVisible:t,setIsNodeEditorVisible:i,use_node_editor_only:r}=Js(),{isOptionsVisible:s,setIsOptionsVisible:o,enableNodeEditor:l}=wa(),{isTreeCollapsed:u,setIsTreeCollapsed:h}=Tl(),{showServerInfoBox:f,setShowServerInfoBox:p}=l1(),{hasAnimation:m,isControlsVisible:g,setIsControlsVisible:v}=wl();return I.jsx(&quot;div&quot;,{className:&quot;relative w-full h-full&quot;,children:I.jsxs(&quot;div&quot;,{className:&quot;absolute left-0 top-0 z-10 py-2 gap-2 flex flex-col pointer-events-none&quot;,children:[I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center gap-2 px-2 max-w-full pointer-events-auto&quot;,children:[r&amp;&amp;I.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-1 rounded&quot;,onClick:()=&gt;kL(),children:I.jsx(f1,{})}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:r,onClick:()=&gt;o(!s),children:&quot;â°&quot;}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:r,onClick:()=&gt;h(!u),children:I.jsx(xZ,{})}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:r||!l,onClick:()=&gt;i(!t),children:I.jsx(vZ,{})}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:!0,onClick:()=&gt;p(!f),children:I.jsx(SZ,{})}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:r,onClick:Rs.getState().toggle,children:I.jsx(bZ,{})}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:r,onClick:$S.getState().toggle,children:I.jsx(EZ,{})}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:!m,onClick:()=&gt;v(!g),children:I.jsx(wZ,{})})]}),I.jsxs(&quot;div&quot;,{className:&quot;px-2 gap-2 flex flex-col&quot;,children:[f&amp;&amp;I.jsx(_Z,{}),n&amp;&amp;I.jsx(hZ,{}),e&amp;&amp;I.jsx(TZ,{}),g&amp;&amp;I.jsx(gZ,{})]})]})})};async function AZ(){let n=ha.current;if(!n){console.error(&quot;Renderer not found&quot;);return}let e=wr.current;if(!e){console.error(&quot;Scene not found&quot;);return}let t=ua.current;if(!t){console.error(&quot;Camera not found&quot;);return}await CZ(n,e,t,!1)}async function CZ(n,e,t,i=!1){const o=new As(1920,1080,{type:zr}),l=n.getRenderTarget(),u=new Re;n.getSize(u),t instanceof Yn&amp;&amp;(t.aspect=1920/1080,t.updateProjectionMatrix()),ES.current&amp;&amp;ES.current(),n.setSize(1920,1080),n.setRenderTarget(o),n.render(e,t);const h=new Uint8Array(1920*1080*4);n.readRenderTargetPixels(o,0,0,1920,1080,h);const f=document.createElement(&quot;canvas&quot;);f.width=1920,f.height=1080;const p=f.getContext(&quot;2d&quot;);if(!p)throw new Error(&quot;Failed to get 2D context&quot;);const m=p.createImageData(1920,1080);for(let g=0;g&lt;1080;g++)for(let v=0;v&lt;1920;v++){const x=((1080-g-1)*1920+v)*4,b=(g*1920+v)*4,_=h[x],T=h[x+1],w=h[x+2],S=h[x+3];S&gt;0?(m.data[b]=Math.min(255,Math.round(_*255/S)),m.data[b+1]=Math.min(255,Math.round(T*255/S)),m.data[b+2]=Math.min(255,Math.round(w*255/S))):(m.data[b]=0,m.data[b+1]=0,m.data[b+2]=0),m.data[b+3]=S}p.putImageData(m,0,0),f.toBlob(g=&gt;{if(g){const v=document.createElement(&quot;a&quot;);v.href=URL.createObjectURL(g),v.download=&quot;screenshot.png&quot;,v.click()}}),n.setRenderTarget(l),n.setSize(u.x,u.y),t instanceof Yn&amp;&amp;(t.aspect=u.x/u.y,t.updateProjectionMatrix()),o.dispose()}class id extends Qi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ss(this.manager);o.setPath(this.path),o.setResponseType(&quot;arraybuffer&quot;),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(l))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){function t(h){const f=new DataView(h),p=32/8*3+32/8*3*3+16/8,m=f.getUint32(80,!0);if(80+32/8+m*p===f.byteLength)return!0;const v=[115,111,108,105,100];for(let x=0;x&lt;5;x++)if(i(v,f,x))return!1;return!0}function i(h,f,p){for(let m=0,g=h.length;m&lt;g;m++)if(h[m]!==f.getUint8(p+m))return!1;return!0}function r(h){const f=new DataView(h),p=f.getUint32(80,!0);let m,g,v,x=!1,b,_,T,w,S;for(let L=0;L&lt;70;L++)f.getUint32(L,!1)==1129270351&amp;&amp;f.getUint8(L+4)==82&amp;&amp;f.getUint8(L+5)==61&amp;&amp;(x=!0,b=new Float32Array(p*3*3),_=f.getUint8(L+6)/255,T=f.getUint8(L+7)/255,w=f.getUint8(L+8)/255,S=f.getUint8(L+9)/255);const C=84,O=12*4+2,M=new It,N=new Float32Array(p*3*3),R=new Float32Array(p*3*3),D=new Ye;for(let L=0;L&lt;p;L++){const H=C+L*O,q=f.getFloat32(H,!0),z=f.getFloat32(H+4,!0),$=f.getFloat32(H+8,!0);if(x){const P=f.getUint16(H+48,!0);(P&amp;32768)===0?(m=(P&amp;31)/31,g=(P&gt;&gt;5&amp;31)/31,v=(P&gt;&gt;10&amp;31)/31):(m=_,g=T,v=w)}for(let P=1;P&lt;=3;P++){const j=H+P*12,G=L*3*3+(P-1)*3;N[G]=f.getFloat32(j,!0),N[G+1]=f.getFloat32(j+4,!0),N[G+2]=f.getFloat32(j+8,!0),R[G]=q,R[G+1]=z,R[G+2]=$,x&amp;&amp;(D.setRGB(m,g,v,Dn),b[G]=D.r,b[G+1]=D.g,b[G+2]=D.b)}}return M.setAttribute(&quot;position&quot;,new Vt(N,3)),M.setAttribute(&quot;normal&quot;,new Vt(R,3)),x&amp;&amp;(M.setAttribute(&quot;color&quot;,new Vt(b,3)),M.hasColors=!0,M.alpha=S),M}function s(h){const f=new It,p=/solid([\s\S]*?)endsolid/g,m=/facet([\s\S]*?)endfacet/g,g=/solid\s(.+)/;let v=0;const x=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,b=new RegExp(&quot;vertex&quot;+x+x+x,&quot;g&quot;),_=new RegExp(&quot;normal&quot;+x+x+x,&quot;g&quot;),T=[],w=[],S=[],C=new K;let O,M=0,N=0,R=0;for(;(O=p.exec(h))!==null;){N=R;const D=O[0],L=(O=g.exec(D))!==null?O[1]:&quot;&quot;;for(S.push(L);(O=m.exec(D))!==null;){let z=0,$=0;const P=O[0];for(;(O=_.exec(P))!==null;)C.x=parseFloat(O[1]),C.y=parseFloat(O[2]),C.z=parseFloat(O[3]),$++;for(;(O=b.exec(P))!==null;)T.push(parseFloat(O[1]),parseFloat(O[2]),parseFloat(O[3])),w.push(C.x,C.y,C.z),z++,R++;$!==1&amp;&amp;console.error(&quot;THREE.STLLoader: Something isn&#x27;t right with the normal of face number &quot;+v),z!==3&amp;&amp;console.error(&quot;THREE.STLLoader: Something isn&#x27;t right with the vertices of face number &quot;+v),v++}const H=N,q=R-N;f.userData.groupNames=S,f.addGroup(H,q,M),M++}return f.setAttribute(&quot;position&quot;,new ut(T,3)),f.setAttribute(&quot;normal&quot;,new ut(w,3)),f}function o(h){return typeof h!=&quot;string&quot;?new TextDecoder().decode(h):h}function l(h){if(typeof h==&quot;string&quot;){const f=new Uint8Array(h.length);for(let p=0;p&lt;h.length;p++)f[p]=h.charCodeAt(p)&amp;255;return f.buffer||f}else return h}const u=l(e);return t(u)?r(u):s(o(e))}}class a2 extends ND{constructor(e){super(e)}parse(e){function t(P){switch(P.image_type){case m:case x:if(P.colormap_length&gt;256||P.colormap_size!==24||P.colormap_type!==1)throw new Error(&quot;THREE.TGALoader: Invalid type colormap data for indexed type.&quot;);break;case g:case v:case b:case _:if(P.colormap_type)throw new Error(&quot;THREE.TGALoader: Invalid type colormap data for colormap type.&quot;);break;case p:throw new Error(&quot;THREE.TGALoader: No data.&quot;);default:throw new Error(&quot;THREE.TGALoader: Invalid type &quot;+P.image_type)}if(P.width&lt;=0||P.height&lt;=0)throw new Error(&quot;THREE.TGALoader: Invalid image size.&quot;);if(P.pixel_size!==8&amp;&amp;P.pixel_size!==16&amp;&amp;P.pixel_size!==24&amp;&amp;P.pixel_size!==32)throw new Error(&quot;THREE.TGALoader: Invalid pixel size &quot;+P.pixel_size)}function i(P,j,G,ee,F){let ne,le;const ce=G.pixel_size&gt;&gt;3,ie=G.width*G.height*ce;if(j&amp;&amp;(le=F.subarray(ee,ee+=G.colormap_length*(G.colormap_size&gt;&gt;3))),P){ne=new Uint8Array(ie);let oe,ae,ue,ve=0;const He=new Uint8Array(ce);for(;ve&lt;ie;)if(oe=F[ee++],ae=(oe&amp;127)+1,oe&amp;128){for(ue=0;ue&lt;ce;++ue)He[ue]=F[ee++];for(ue=0;ue&lt;ae;++ue)ne.set(He,ve+ue*ce);ve+=ce*ae}else{for(ae*=ce,ue=0;ue&lt;ae;++ue)ne[ve+ue]=F[ee++];ve+=ae}}else ne=F.subarray(ee,ee+=j?G.width*G.height:ie);return{pixel_data:ne,palettes:le}}function r(P,j,G,ee,F,ne,le,ce,ie){const oe=ie;let ae,ue=0,ve,He;const Xe=D.width;for(He=j;He!==ee;He+=G)for(ve=F;ve!==le;ve+=ne,ue++)ae=ce[ue],P[(ve+Xe*He)*4+3]=255,P[(ve+Xe*He)*4+2]=oe[ae*3+0],P[(ve+Xe*He)*4+1]=oe[ae*3+1],P[(ve+Xe*He)*4+0]=oe[ae*3+2];return P}function s(P,j,G,ee,F,ne,le,ce){let ie,oe=0,ae,ue;const ve=D.width;for(ue=j;ue!==ee;ue+=G)for(ae=F;ae!==le;ae+=ne,oe+=2)ie=ce[oe+0]+(ce[oe+1]&lt;&lt;8),P[(ae+ve*ue)*4+0]=(ie&amp;31744)&gt;&gt;7,P[(ae+ve*ue)*4+1]=(ie&amp;992)&gt;&gt;2,P[(ae+ve*ue)*4+2]=(ie&amp;31)&lt;&lt;3,P[(ae+ve*ue)*4+3]=ie&amp;32768?0:255;return P}function o(P,j,G,ee,F,ne,le,ce){let ie=0,oe,ae;const ue=D.width;for(ae=j;ae!==ee;ae+=G)for(oe=F;oe!==le;oe+=ne,ie+=3)P[(oe+ue*ae)*4+3]=255,P[(oe+ue*ae)*4+2]=ce[ie+0],P[(oe+ue*ae)*4+1]=ce[ie+1],P[(oe+ue*ae)*4+0]=ce[ie+2];return P}function l(P,j,G,ee,F,ne,le,ce){let ie=0,oe,ae;const ue=D.width;for(ae=j;ae!==ee;ae+=G)for(oe=F;oe!==le;oe+=ne,ie+=4)P[(oe+ue*ae)*4+2]=ce[ie+0],P[(oe+ue*ae)*4+1]=ce[ie+1],P[(oe+ue*ae)*4+0]=ce[ie+2],P[(oe+ue*ae)*4+3]=ce[ie+3];return P}function u(P,j,G,ee,F,ne,le,ce){let ie,oe=0,ae,ue;const ve=D.width;for(ue=j;ue!==ee;ue+=G)for(ae=F;ae!==le;ae+=ne,oe++)ie=ce[oe],P[(ae+ve*ue)*4+0]=ie,P[(ae+ve*ue)*4+1]=ie,P[(ae+ve*ue)*4+2]=ie,P[(ae+ve*ue)*4+3]=255;return P}function h(P,j,G,ee,F,ne,le,ce){let ie=0,oe,ae;const ue=D.width;for(ae=j;ae!==ee;ae+=G)for(oe=F;oe!==le;oe+=ne,ie+=2)P[(oe+ue*ae)*4+0]=ce[ie+0],P[(oe+ue*ae)*4+1]=ce[ie+0],P[(oe+ue*ae)*4+2]=ce[ie+0],P[(oe+ue*ae)*4+3]=ce[ie+1];return P}function f(P,j,G,ee,F){let ne,le,ce,ie,oe,ae;switch((D.flags&amp;T)&gt;&gt;w){default:case O:ne=0,ce=1,oe=j,le=0,ie=1,ae=G;break;case S:ne=0,ce=1,oe=j,le=G-1,ie=-1,ae=-1;break;case M:ne=j-1,ce=-1,oe=-1,le=0,ie=1,ae=G;break;case C:ne=j-1,ce=-1,oe=-1,le=G-1,ie=-1,ae=-1;break}if(q)switch(D.pixel_size){case 8:u(P,le,ie,ae,ne,ce,oe,ee);break;case 16:h(P,le,ie,ae,ne,ce,oe,ee);break;default:throw new Error(&quot;THREE.TGALoader: Format not supported.&quot;)}else switch(D.pixel_size){case 8:r(P,le,ie,ae,ne,ce,oe,ee,F);break;case 16:s(P,le,ie,ae,ne,ce,oe,ee);break;case 24:o(P,le,ie,ae,ne,ce,oe,ee);break;case 32:l(P,le,ie,ae,ne,ce,oe,ee);break;default:throw new Error(&quot;THREE.TGALoader: Format not supported.&quot;)}return P}const p=0,m=1,g=2,v=3,x=9,b=10,_=11,T=48,w=4,S=0,C=1,O=2,M=3;if(e.length&lt;19)throw new Error(&quot;THREE.TGALoader: Not enough data to contain header.&quot;);let N=0;const R=new Uint8Array(e),D={id_length:R[N++],colormap_type:R[N++],image_type:R[N++],colormap_index:R[N++]|R[N++]&lt;&lt;8,colormap_length:R[N++]|R[N++]&lt;&lt;8,colormap_size:R[N++],origin:[R[N++]|R[N++]&lt;&lt;8,R[N++]|R[N++]&lt;&lt;8],width:R[N++]|R[N++]&lt;&lt;8,height:R[N++]|R[N++]&lt;&lt;8,pixel_size:R[N++],flags:R[N++]};if(t(D),D.id_length+N&gt;e.length)throw new Error(&quot;THREE.TGALoader: No data.&quot;);N+=D.id_length;let L=!1,H=!1,q=!1;switch(D.image_type){case x:L=!0,H=!0;break;case m:H=!0;break;case b:L=!0;break;case g:break;case _:L=!0,q=!0;break;case v:q=!0;break}const z=new Uint8Array(D.width*D.height*4),$=i(L,H,D,N,R);return f(z,D.width,D.height,$.pixel_data,$.palettes),{data:z,width:D.width,height:D.height,flipY:!0,generateMipmaps:!0,minFilter:ts}}}class RZ extends Qi{load(e,t,i,r){const s=this,o=s.path===&quot;&quot;?So.extractUrlBase(e):s.path,l=new ss(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(u){try{t(s.parse(u,o))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},i,r)}parse(e,t){function i(B,k){const Z=[],X=B.childNodes;for(let J=0,Te=X.length;J&lt;Te;J++){const Oe=X[J];Oe.nodeName===k&amp;&amp;Z.push(Oe)}return Z}function r(B){if(B.length===0)return[];const k=B.trim().split(/\s+/),Z=new Array(k.length);for(let X=0,J=k.length;X&lt;J;X++)Z[X]=k[X];return Z}function s(B){if(B.length===0)return[];const k=B.trim().split(/\s+/),Z=new Array(k.length);for(let X=0,J=k.length;X&lt;J;X++)Z[X]=parseFloat(k[X]);return Z}function o(B){if(B.length===0)return[];const k=B.trim().split(/\s+/),Z=new Array(k.length);for(let X=0,J=k.length;X&lt;J;X++)Z[X]=parseInt(k[X]);return Z}function l(B){return B.substring(1)}function u(){return&quot;three_default_&quot;+Ps++}function h(B){return Object.keys(B).length===0}function f(B){return{unit:p(i(B,&quot;unit&quot;)[0]),upAxis:m(i(B,&quot;up_axis&quot;)[0])}}function p(B){return B!==void 0&amp;&amp;B.hasAttribute(&quot;meter&quot;)===!0?parseFloat(B.getAttribute(&quot;meter&quot;)):1}function m(B){return B!==void 0?B.textContent:&quot;Y_UP&quot;}function g(B,k,Z,X){const J=i(B,k)[0];if(J!==void 0){const Te=i(J,Z);for(let Oe=0;Oe&lt;Te.length;Oe++)X(Te[Oe])}}function v(B,k){for(const Z in B){const X=B[Z];X.build=k(B[Z])}}function x(B,k){return B.build!==void 0||(B.build=k(B)),B.build}function b(B){const k={sources:{},samplers:{},channels:{}};let Z=!1;for(let X=0,J=B.childNodes.length;X&lt;J;X++){const Te=B.childNodes[X];if(Te.nodeType!==1)continue;let Oe;switch(Te.nodeName){case&quot;source&quot;:Oe=Te.getAttribute(&quot;id&quot;),k.sources[Oe]=Ae(Te);break;case&quot;sampler&quot;:Oe=Te.getAttribute(&quot;id&quot;),k.samplers[Oe]=_(Te);break;case&quot;channel&quot;:Oe=Te.getAttribute(&quot;target&quot;),k.channels[Oe]=T(Te);break;case&quot;animation&quot;:b(Te),Z=!0;break;default:console.log(Te)}}Z===!1&amp;&amp;(Nt.animations[B.getAttribute(&quot;id&quot;)||ra.generateUUID()]=k)}function _(B){const k={inputs:{}};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=l(J.getAttribute(&quot;source&quot;)),Oe=J.getAttribute(&quot;semantic&quot;);k.inputs[Oe]=Te;break}}return k}function T(B){const k={};let X=B.getAttribute(&quot;target&quot;).split(&quot;/&quot;);const J=X.shift();let Te=X.shift();const Oe=Te.indexOf(&quot;(&quot;)!==-1,at=Te.indexOf(&quot;.&quot;)!==-1;if(at)X=Te.split(&quot;.&quot;),Te=X.shift(),k.member=X.shift();else if(Oe){const $e=Te.split(&quot;(&quot;);Te=$e.shift();for(let it=0;it&lt;$e.length;it++)$e[it]=parseInt($e[it].replace(/\)/,&quot;&quot;));k.indices=$e}return k.id=J,k.sid=Te,k.arraySyntax=Oe,k.memberSyntax=at,k.sampler=l(B.getAttribute(&quot;source&quot;)),k}function w(B){const k=[],Z=B.channels,X=B.samplers,J=B.sources;for(const Te in Z)if(Z.hasOwnProperty(Te)){const Oe=Z[Te],at=X[Oe.sampler],$e=at.inputs.INPUT,it=at.inputs.OUTPUT,xt=J[$e],Be=J[it],pt=C(Oe,xt,Be);D(pt,k)}return k}function S(B){return x(Nt.animations[B],w)}function C(B,k,Z){const X=Nt.nodes[B.id],J=Bt(X.id),Te=X.transforms[B.sid],Oe=X.matrix.clone().transpose();let at,$e,it,xt,Be,pt;const gt={};switch(Te){case&quot;matrix&quot;:for(it=0,xt=k.array.length;it&lt;xt;it++)if(at=k.array[it],$e=it*Z.stride,gt[at]===void 0&amp;&amp;(gt[at]={}),B.arraySyntax===!0){const Fn=Z.array[$e],dn=B.indices[0]+4*B.indices[1];gt[at][dn]=Fn}else for(Be=0,pt=Z.stride;Be&lt;pt;Be++)gt[at][Be]=Z.array[$e+Be];break;case&quot;translate&quot;:console.warn(&#x27;THREE.ColladaLoader: Animation transform type &quot;%s&quot; not yet implemented.&#x27;,Te);break;case&quot;rotate&quot;:console.warn(&#x27;THREE.ColladaLoader: Animation transform type &quot;%s&quot; not yet implemented.&#x27;,Te);break;case&quot;scale&quot;:console.warn(&#x27;THREE.ColladaLoader: Animation transform type &quot;%s&quot; not yet implemented.&#x27;,Te);break}const Tt=O(gt,Oe);return{name:J.uuid,keyframes:Tt}}function O(B,k){const Z=[];for(const J in B)Z.push({time:parseFloat(J),value:B[J]});Z.sort(X);for(let J=0;J&lt;16;J++)L(Z,J,k.elements[J]);return Z;function X(J,Te){return J.time-Te.time}}const M=new K,N=new K,R=new Ti;function D(B,k){const Z=B.keyframes,X=B.name,J=[],Te=[],Oe=[],at=[];for(let $e=0,it=Z.length;$e&lt;it;$e++){const xt=Z[$e],Be=xt.time,pt=xt.value;fe.fromArray(pt).transpose(),fe.decompose(M,R,N),J.push(Be),Te.push(M.x,M.y,M.z),Oe.push(R.x,R.y,R.z,R.w),at.push(N.x,N.y,N.z)}return Te.length&gt;0&amp;&amp;k.push(new ba(X+&quot;.position&quot;,J,Te)),Oe.length&gt;0&amp;&amp;k.push(new xl(X+&quot;.quaternion&quot;,J,Oe)),at.length&gt;0&amp;&amp;k.push(new ba(X+&quot;.scale&quot;,J,at)),k}function L(B,k,Z){let X,J=!0,Te,Oe;for(Te=0,Oe=B.length;Te&lt;Oe;Te++)X=B[Te],X.value[k]===void 0?X.value[k]=null:J=!1;if(J===!0)for(Te=0,Oe=B.length;Te&lt;Oe;Te++)X=B[Te],X.value[k]=Z;else H(B,k)}function H(B,k){let Z,X;for(let J=0,Te=B.length;J&lt;Te;J++){const Oe=B[J];if(Oe.value[k]===null){if(Z=q(B,J,k),X=z(B,J,k),Z===null){Oe.value[k]=X.value[k];continue}if(X===null){Oe.value[k]=Z.value[k];continue}$(Oe,Z,X,k)}}}function q(B,k,Z){for(;k&gt;=0;){const X=B[k];if(X.value[Z]!==null)return X;k--}return null}function z(B,k,Z){for(;k&lt;B.length;){const X=B[k];if(X.value[Z]!==null)return X;k++}return null}function $(B,k,Z,X){if(Z.time-k.time===0){B.value[X]=k.value[X];return}B.value[X]=(B.time-k.time)*(Z.value[X]-k.value[X])/(Z.time-k.time)+k.value[X]}function P(B){const k={name:B.getAttribute(&quot;id&quot;)||&quot;default&quot;,start:parseFloat(B.getAttribute(&quot;start&quot;)||0),end:parseFloat(B.getAttribute(&quot;end&quot;)||0),animations:[]};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;instance_animation&quot;:k.animations.push(l(J.getAttribute(&quot;url&quot;)));break}}Nt.clips[B.getAttribute(&quot;id&quot;)]=k}function j(B){const k=[],Z=B.name,X=B.end-B.start||-1,J=B.animations;for(let Te=0,Oe=J.length;Te&lt;Oe;Te++){const at=S(J[Te]);for(let $e=0,it=at.length;$e&lt;it;$e++)k.push(at[$e])}return new Sl(Z,X,k)}function G(B){return x(Nt.clips[B],j)}function ee(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;skin&quot;:k.id=l(J.getAttribute(&quot;source&quot;)),k.skin=F(J);break;case&quot;morph&quot;:k.id=l(J.getAttribute(&quot;source&quot;)),console.warn(&quot;THREE.ColladaLoader: Morph target animation not supported yet.&quot;);break}}Nt.controllers[B.getAttribute(&quot;id&quot;)]=k}function F(B){const k={sources:{}};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;bind_shape_matrix&quot;:k.bindShapeMatrix=s(J.textContent);break;case&quot;source&quot;:const Te=J.getAttribute(&quot;id&quot;);k.sources[Te]=Ae(J);break;case&quot;joints&quot;:k.joints=ne(J);break;case&quot;vertex_weights&quot;:k.vertexWeights=le(J);break}}return k}function ne(B){const k={inputs:{}};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=J.getAttribute(&quot;semantic&quot;),Oe=l(J.getAttribute(&quot;source&quot;));k.inputs[Te]=Oe;break}}return k}function le(B){const k={inputs:{}};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=J.getAttribute(&quot;semantic&quot;),Oe=l(J.getAttribute(&quot;source&quot;)),at=parseInt(J.getAttribute(&quot;offset&quot;));k.inputs[Te]={id:Oe,offset:at};break;case&quot;vcount&quot;:k.vcount=o(J.textContent);break;case&quot;v&quot;:k.v=o(J.textContent);break}}return k}function ce(B){const k={id:B.id},Z=Nt.geometries[k.id];return B.skin!==void 0&amp;&amp;(k.skin=ie(B.skin),Z.sources.skinIndices=k.skin.indices,Z.sources.skinWeights=k.skin.weights),k}function ie(B){const Z={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},X=B.sources,J=B.vertexWeights,Te=J.vcount,Oe=J.v,at=J.inputs.JOINT.offset,$e=J.inputs.WEIGHT.offset,it=B.sources[B.joints.inputs.JOINT],xt=B.sources[B.joints.inputs.INV_BIND_MATRIX],Be=X[J.inputs.WEIGHT.id].array;let pt=0,gt,Tt,_t;for(gt=0,_t=Te.length;gt&lt;_t;gt++){const dn=Te[gt],hn=[];for(Tt=0;Tt&lt;dn;Tt++){const sn=Oe[pt+at],Rr=Oe[pt+$e],er=Be[Rr];hn.push({index:sn,weight:er}),pt+=2}for(hn.sort(Fn),Tt=0;Tt&lt;4;Tt++){const sn=hn[Tt];sn!==void 0?(Z.indices.array.push(sn.index),Z.weights.array.push(sn.weight)):(Z.indices.array.push(0),Z.weights.array.push(0))}}for(B.bindShapeMatrix?Z.bindMatrix=new yt().fromArray(B.bindShapeMatrix).transpose():Z.bindMatrix=new yt().identity(),gt=0,_t=it.array.length;gt&lt;_t;gt++){const dn=it.array[gt],hn=new yt().fromArray(xt.array,gt*xt.stride).transpose();Z.joints.push({name:dn,boneInverse:hn})}return Z;function Fn(dn,hn){return hn.weight-dn.weight}}function oe(B){return x(Nt.controllers[B],ce)}function ae(B){const k={init_from:i(B,&quot;init_from&quot;)[0].textContent};Nt.images[B.getAttribute(&quot;id&quot;)]=k}function ue(B){return B.build!==void 0?B.build:B.init_from}function ve(B){const k=Nt.images[B];return k!==void 0?x(k,ue):(console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t find image with ID:&quot;,B),null)}function He(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;profile_COMMON&quot;:k.profile=Xe(J);break}}Nt.effects[B.getAttribute(&quot;id&quot;)]=k}function Xe(B){const k={surfaces:{},samplers:{}};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;newparam&quot;:ct(J,k);break;case&quot;technique&quot;:k.technique=Q(J);break;case&quot;extra&quot;:k.extra=ze(J);break}}return k}function ct(B,k){const Z=B.getAttribute(&quot;sid&quot;);for(let X=0,J=B.childNodes.length;X&lt;J;X++){const Te=B.childNodes[X];if(Te.nodeType===1)switch(Te.nodeName){case&quot;surface&quot;:k.surfaces[Z]=We(Te);break;case&quot;sampler2D&quot;:k.samplers[Z]=Ke(Te);break}}}function We(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;init_from&quot;:k.init_from=J.textContent;break}}return k}function Ke(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;source&quot;:k.source=J.textContent;break}}return k}function Q(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;constant&quot;:case&quot;lambert&quot;:case&quot;blinn&quot;:case&quot;phong&quot;:k.type=J.nodeName,k.parameters=Ve(J);break;case&quot;extra&quot;:k.extra=ze(J);break}}return k}function Ve(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;emission&quot;:case&quot;diffuse&quot;:case&quot;specular&quot;:case&quot;bump&quot;:case&quot;ambient&quot;:case&quot;shininess&quot;:case&quot;transparency&quot;:k[J.nodeName]=Le(J);break;case&quot;transparent&quot;:k[J.nodeName]={opaque:J.hasAttribute(&quot;opaque&quot;)?J.getAttribute(&quot;opaque&quot;):&quot;A_ONE&quot;,data:Le(J)};break}}return k}function Le(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;color&quot;:k[J.nodeName]=s(J.textContent);break;case&quot;float&quot;:k[J.nodeName]=parseFloat(J.textContent);break;case&quot;texture&quot;:k[J.nodeName]={id:J.getAttribute(&quot;texture&quot;),extra:Fe(J)};break}}return k}function Fe(B){const k={technique:{}};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;extra&quot;:De(J,k);break}}return k}function De(B,k){for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;technique&quot;:mt(J,k);break}}}function mt(B,k){for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;repeatU&quot;:case&quot;repeatV&quot;:case&quot;offsetU&quot;:case&quot;offsetV&quot;:k.technique[J.nodeName]=parseFloat(J.textContent);break;case&quot;wrapU&quot;:case&quot;wrapV&quot;:J.textContent.toUpperCase()===&quot;TRUE&quot;?k.technique[J.nodeName]=1:J.textContent.toUpperCase()===&quot;FALSE&quot;?k.technique[J.nodeName]=0:k.technique[J.nodeName]=parseInt(J.textContent);break;case&quot;bump&quot;:k[J.nodeName]=V(J);break}}}function ze(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;technique&quot;:k.technique=te(J);break}}return k}function te(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;double_sided&quot;:k[J.nodeName]=parseInt(J.textContent);break;case&quot;bump&quot;:k[J.nodeName]=V(J);break}}return k}function V(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;texture&quot;:k[J.nodeName]={id:J.getAttribute(&quot;texture&quot;),texcoord:J.getAttribute(&quot;texcoord&quot;),extra:Fe(J)};break}}return k}function pe(B){return B}function Ce(B){return x(Nt.effects[B],pe)}function Ue(B){const k={name:B.getAttribute(&quot;name&quot;)};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;instance_effect&quot;:k.url=l(J.getAttribute(&quot;url&quot;));break}}Nt.materials[B.getAttribute(&quot;id&quot;)]=k}function Me(B){let k,Z=B.slice((B.lastIndexOf(&quot;.&quot;)-1&gt;&gt;&gt;0)+2);switch(Z=Z.toLowerCase(),Z){case&quot;tga&quot;:k=Qn;break;default:k=Pi}return k}function Ze(B){const k=Ce(B.url),Z=k.profile.technique;let X;switch(Z.type){case&quot;phong&quot;:case&quot;blinn&quot;:X=new ml;break;case&quot;lambert&quot;:X=new zy;break;default:X=new zi;break}X.name=B.name||&quot;&quot;;function J($e,it=null){const xt=k.profile.samplers[$e.id];let Be=null;if(xt!==void 0){const pt=k.profile.surfaces[xt.source];Be=ve(pt.init_from)}else console.warn(&quot;THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).&quot;),Be=ve($e.id);if(Be!==null){const pt=Me(Be);if(pt!==void 0){const gt=pt.load(Be),Tt=$e.extra;if(Tt!==void 0&amp;&amp;Tt.technique!==void 0&amp;&amp;h(Tt.technique)===!1){const _t=Tt.technique;gt.wrapS=_t.wrapU?Ts:sr,gt.wrapT=_t.wrapV?Ts:sr,gt.offset.set(_t.offsetU||0,_t.offsetV||0),gt.repeat.set(_t.repeatU||1,_t.repeatV||1)}else gt.wrapS=Ts,gt.wrapT=Ts;return it!==null&amp;&amp;(gt.colorSpace=it),gt}else return console.warn(&quot;THREE.ColladaLoader: Loader for texture %s not found.&quot;,Be),null}else return console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t create texture with ID:&quot;,$e.id),null}const Te=Z.parameters;for(const $e in Te){const it=Te[$e];switch($e){case&quot;diffuse&quot;:it.color&amp;&amp;X.color.fromArray(it.color),it.texture&amp;&amp;(X.map=J(it.texture,Dn));break;case&quot;specular&quot;:it.color&amp;&amp;X.specular&amp;&amp;X.specular.fromArray(it.color),it.texture&amp;&amp;(X.specularMap=J(it.texture));break;case&quot;bump&quot;:it.texture&amp;&amp;(X.normalMap=J(it.texture));break;case&quot;ambient&quot;:it.texture&amp;&amp;(X.lightMap=J(it.texture,Dn));break;case&quot;shininess&quot;:it.float&amp;&amp;X.shininess&amp;&amp;(X.shininess=it.float);break;case&quot;emission&quot;:it.color&amp;&amp;X.emissive&amp;&amp;X.emissive.fromArray(it.color),it.texture&amp;&amp;(X.emissiveMap=J(it.texture,Dn));break}}Jt.toWorkingColorSpace(X.color,Dn),X.specular&amp;&amp;Jt.toWorkingColorSpace(X.specular,Dn),X.emissive&amp;&amp;Jt.toWorkingColorSpace(X.emissive,Dn);let Oe=Te.transparent,at=Te.transparency;if(at===void 0&amp;&amp;Oe&amp;&amp;(at={float:1}),Oe===void 0&amp;&amp;at&amp;&amp;(Oe={opaque:&quot;A_ONE&quot;,data:{color:[1,1,1,1]}}),Oe&amp;&amp;at)if(Oe.data.texture)X.transparent=!0;else{const $e=Oe.data.color;switch(Oe.opaque){case&quot;A_ONE&quot;:X.opacity=$e[3]*at.float;break;case&quot;RGB_ZERO&quot;:X.opacity=1-$e[0]*at.float;break;case&quot;A_ZERO&quot;:X.opacity=1-$e[3]*at.float;break;case&quot;RGB_ONE&quot;:X.opacity=$e[0]*at.float;break;default:console.warn(&#x27;THREE.ColladaLoader: Invalid opaque type &quot;%s&quot; of transparent tag.&#x27;,Oe.opaque)}X.opacity&lt;1&amp;&amp;(X.transparent=!0)}if(Z.extra!==void 0&amp;&amp;Z.extra.technique!==void 0){const $e=Z.extra.technique;for(const it in $e){const xt=$e[it];switch(it){case&quot;double_sided&quot;:X.side=xt===1?wi:is;break;case&quot;bump&quot;:X.normalMap=J(xt.texture),X.normalScale=new Re(1,1);break}}}return X}function qe(B){return x(Nt.materials[B],Ze)}function ht(B){const k={name:B.getAttribute(&quot;name&quot;)};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;optics&quot;:k.optics=Ct(J);break}}Nt.cameras[B.getAttribute(&quot;id&quot;)]=k}function Ct(B){for(let k=0;k&lt;B.childNodes.length;k++){const Z=B.childNodes[k];switch(Z.nodeName){case&quot;technique_common&quot;:return je(Z)}}return{}}function je(B){const k={};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];switch(X.nodeName){case&quot;perspective&quot;:case&quot;orthographic&quot;:k.technique=X.nodeName,k.parameters=ft(X);break}}return k}function ft(B){const k={};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];switch(X.nodeName){case&quot;xfov&quot;:case&quot;yfov&quot;:case&quot;xmag&quot;:case&quot;ymag&quot;:case&quot;znear&quot;:case&quot;zfar&quot;:case&quot;aspect_ratio&quot;:k[X.nodeName]=parseFloat(X.textContent);break}}return k}function St(B){let k;switch(B.optics.technique){case&quot;perspective&quot;:k=new Yn(B.optics.parameters.yfov,B.optics.parameters.aspect_ratio,B.optics.parameters.znear,B.optics.parameters.zfar);break;case&quot;orthographic&quot;:let Z=B.optics.parameters.ymag,X=B.optics.parameters.xmag;const J=B.optics.parameters.aspect_ratio;X=X===void 0?Z*J:X,Z=Z===void 0?X/J:Z,X*=.5,Z*=.5,k=new Vc(-X,X,Z,-Z,B.optics.parameters.znear,B.optics.parameters.zfar);break;default:k=new Yn;break}return k.name=B.name||&quot;&quot;,k}function Rt(B){const k=Nt.cameras[B];return k!==void 0?x(k,St):(console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t find camera with ID:&quot;,B),null)}function st(B){let k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;technique_common&quot;:k=jt(J);break}}Nt.lights[B.getAttribute(&quot;id&quot;)]=k}function jt(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;directional&quot;:case&quot;point&quot;:case&quot;spot&quot;:case&quot;ambient&quot;:k.technique=J.nodeName,k.parameters=Pt(J)}}return k}function Pt(B){const k={};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;color&quot;:const Te=s(J.textContent);k.color=new Ye().fromArray(Te),Jt.toWorkingColorSpace(k.color,Dn);break;case&quot;falloff_angle&quot;:k.falloffAngle=parseFloat(J.textContent);break;case&quot;quadratic_attenuation&quot;:const Oe=parseFloat(J.textContent);k.distance=Oe?Math.sqrt(1/Oe):0;break}}return k}function yn(B){let k;switch(B.technique){case&quot;directional&quot;:k=new ep;break;case&quot;point&quot;:k=new Vy;break;case&quot;spot&quot;:k=new Hy;break;case&quot;ambient&quot;:k=new Gy;break}return B.parameters.color&amp;&amp;k.color.copy(B.parameters.color),B.parameters.distance&amp;&amp;(k.distance=B.parameters.distance),k}function de(B){const k=Nt.lights[B];return k!==void 0?x(k,yn):(console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t find light with ID:&quot;,B),null)}function nt(B){const k={name:B.getAttribute(&quot;name&quot;),sources:{},vertices:{},primitives:[]},Z=i(B,&quot;mesh&quot;)[0];if(Z!==void 0){for(let X=0;X&lt;Z.childNodes.length;X++){const J=Z.childNodes[X];if(J.nodeType!==1)continue;const Te=J.getAttribute(&quot;id&quot;);switch(J.nodeName){case&quot;source&quot;:k.sources[Te]=Ae(J);break;case&quot;vertices&quot;:k.vertices=Pe(J);break;case&quot;polygons&quot;:console.warn(&quot;THREE.ColladaLoader: Unsupported primitive type: &quot;,J.nodeName);break;case&quot;lines&quot;:case&quot;linestrips&quot;:case&quot;polylist&quot;:case&quot;triangles&quot;:k.primitives.push(ot(J));break;default:console.log(J)}}Nt.geometries[B.getAttribute(&quot;id&quot;)]=k}}function Ae(B){const k={array:[],stride:3};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;float_array&quot;:k.array=s(X.textContent);break;case&quot;Name_array&quot;:k.array=r(X.textContent);break;case&quot;technique_common&quot;:const J=i(X,&quot;accessor&quot;)[0];J!==void 0&amp;&amp;(k.stride=parseInt(J.getAttribute(&quot;stride&quot;)));break}}return k}function Pe(B){const k={};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];X.nodeType===1&amp;&amp;(k[X.getAttribute(&quot;semantic&quot;)]=l(X.getAttribute(&quot;source&quot;)))}return k}function ot(B){const k={type:B.nodeName,material:B.getAttribute(&quot;material&quot;),count:parseInt(B.getAttribute(&quot;count&quot;)),inputs:{},stride:0,hasUV:!1};for(let Z=0,X=B.childNodes.length;Z&lt;X;Z++){const J=B.childNodes[Z];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=l(J.getAttribute(&quot;source&quot;)),Oe=J.getAttribute(&quot;semantic&quot;),at=parseInt(J.getAttribute(&quot;offset&quot;)),$e=parseInt(J.getAttribute(&quot;set&quot;)),it=$e&gt;0?Oe+$e:Oe;k.inputs[it]={id:Te,offset:at},k.stride=Math.max(k.stride,at+1),Oe===&quot;TEXCOORD&quot;&amp;&amp;(k.hasUV=!0);break;case&quot;vcount&quot;:k.vcount=o(J.textContent);break;case&quot;p&quot;:k.p=o(J.textContent);break}}return k}function et(B){const k={};for(let Z=0;Z&lt;B.length;Z++){const X=B[Z];k[X.type]===void 0&amp;&amp;(k[X.type]=[]),k[X.type].push(X)}return k}function Ut(B){let k=0;for(let Z=0,X=B.length;Z&lt;X;Z++)B[Z].hasUV===!0&amp;&amp;k++;k&gt;0&amp;&amp;k&lt;B.length&amp;&amp;(B.uvsNeedsFix=!0)}function wn(B){const k={},Z=B.sources,X=B.vertices,J=B.primitives;if(J.length===0)return{};const Te=et(J);for(const Oe in Te){const at=Te[Oe];Ut(at),k[Oe]=jn(at,Z,X)}return k}function jn(B,k,Z){const X={},J={array:[],stride:0},Te={array:[],stride:0},Oe={array:[],stride:0},at={array:[],stride:0},$e={array:[],stride:0},it={array:[],stride:4},xt={array:[],stride:4},Be=new It,pt=[];let gt=0;for(let Tt=0;Tt&lt;B.length;Tt++){const _t=B[Tt],Fn=_t.inputs;let dn=0;switch(_t.type){case&quot;lines&quot;:case&quot;linestrips&quot;:dn=_t.count*2;break;case&quot;triangles&quot;:dn=_t.count*3;break;case&quot;polylist&quot;:for(let hn=0;hn&lt;_t.count;hn++){const sn=_t.vcount[hn];switch(sn){case 3:dn+=3;break;case 4:dn+=6;break;default:dn+=(sn-2)*3;break}}break;default:console.warn(&quot;THREE.ColladaLoader: Unknown primitive type:&quot;,_t.type)}Be.addGroup(gt,dn,Tt),gt+=dn,_t.material&amp;&amp;pt.push(_t.material);for(const hn in Fn){const sn=Fn[hn];switch(hn){case&quot;VERTEX&quot;:for(const Rr in Z){const er=Z[Rr];switch(Rr){case&quot;POSITION&quot;:const yi=J.array.length;if(zt(_t,k[er],sn.offset,J.array),J.stride=k[er].stride,k.skinWeights&amp;&amp;k.skinIndices&amp;&amp;(zt(_t,k.skinIndices,sn.offset,it.array),zt(_t,k.skinWeights,sn.offset,xt.array)),_t.hasUV===!1&amp;&amp;B.uvsNeedsFix===!0){const No=(J.array.length-yi)/J.stride;for(let Il=0;Il&lt;No;Il++)Oe.array.push(0,0)}break;case&quot;NORMAL&quot;:zt(_t,k[er],sn.offset,Te.array),Te.stride=k[er].stride;break;case&quot;COLOR&quot;:zt(_t,k[er],sn.offset,$e.array),$e.stride=k[er].stride;break;case&quot;TEXCOORD&quot;:zt(_t,k[er],sn.offset,Oe.array),Oe.stride=k[er].stride;break;case&quot;TEXCOORD1&quot;:zt(_t,k[er],sn.offset,at.array),Oe.stride=k[er].stride;break;default:console.warn(&#x27;THREE.ColladaLoader: Semantic &quot;%s&quot; not handled in geometry build process.&#x27;,Rr)}}break;case&quot;NORMAL&quot;:zt(_t,k[sn.id],sn.offset,Te.array),Te.stride=k[sn.id].stride;break;case&quot;COLOR&quot;:zt(_t,k[sn.id],sn.offset,$e.array,!0),$e.stride=k[sn.id].stride;break;case&quot;TEXCOORD&quot;:zt(_t,k[sn.id],sn.offset,Oe.array),Oe.stride=k[sn.id].stride;break;case&quot;TEXCOORD1&quot;:zt(_t,k[sn.id],sn.offset,at.array),at.stride=k[sn.id].stride;break}}}return J.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;position&quot;,new ut(J.array,J.stride)),Te.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;normal&quot;,new ut(Te.array,Te.stride)),$e.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;color&quot;,new ut($e.array,$e.stride)),Oe.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;uv&quot;,new ut(Oe.array,Oe.stride)),at.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;uv1&quot;,new ut(at.array,at.stride)),it.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;skinIndex&quot;,new ut(it.array,it.stride)),xt.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;skinWeight&quot;,new ut(xt.array,xt.stride)),X.data=Be,X.type=B[0].type,X.materialKeys=pt,X}function zt(B,k,Z,X,J=!1){const Te=B.p,Oe=B.stride,at=B.vcount;function $e(Be){let pt=Te[Be+Z]*xt;const gt=pt+xt;for(;pt&lt;gt;pt++)X.push(it[pt]);if(J){const Tt=X.length-xt-1;ei.setRGB(X[Tt+0],X[Tt+1],X[Tt+2],Dn),X[Tt+0]=ei.r,X[Tt+1]=ei.g,X[Tt+2]=ei.b}}const it=k.array,xt=k.stride;if(B.vcount!==void 0){let Be=0;for(let pt=0,gt=at.length;pt&lt;gt;pt++){const Tt=at[pt];if(Tt===4){const _t=Be+Oe*0,Fn=Be+Oe*1,dn=Be+Oe*2,hn=Be+Oe*3;$e(_t),$e(Fn),$e(hn),$e(Fn),$e(dn),$e(hn)}else if(Tt===3){const _t=Be+Oe*0,Fn=Be+Oe*1,dn=Be+Oe*2;$e(_t),$e(Fn),$e(dn)}else if(Tt&gt;4)for(let _t=1,Fn=Tt-2;_t&lt;=Fn;_t++){const dn=Be+Oe*0,hn=Be+Oe*_t,sn=Be+Oe*(_t+1);$e(dn),$e(hn),$e(sn)}Be+=Oe*Tt}}else for(let Be=0,pt=Te.length;Be&lt;pt;Be+=Oe)$e(Be)}function Gi(B){return x(Nt.geometries[B],wn)}function oi(B){const k={name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,joints:{},links:[]};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;technique_common&quot;:ji(X,k);break}}Nt.kinematicsModels[B.getAttribute(&quot;id&quot;)]=k}function Zn(B){return B.build!==void 0?B.build:B}function gi(B){return x(Nt.kinematicsModels[B],Zn)}function ji(B,k){for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;joint&quot;:k.joints[X.getAttribute(&quot;sid&quot;)]=Ns(X);break;case&quot;link&quot;:k.links.push(Oo(X));break}}}function Ns(B){let k;for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;prismatic&quot;:case&quot;revolute&quot;:k=Ea(X);break}}return k}function Ea(B){const k={sid:B.getAttribute(&quot;sid&quot;),name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,axis:new K,limits:{min:0,max:0},type:B.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;axis&quot;:const J=s(X.textContent);k.axis.fromArray(J);break;case&quot;limits&quot;:const Te=X.getElementsByTagName(&quot;max&quot;)[0],Oe=X.getElementsByTagName(&quot;min&quot;)[0];k.limits.max=parseFloat(Te.textContent),k.limits.min=parseFloat(Oe.textContent);break}}return k.limits.min&gt;=k.limits.max&amp;&amp;(k.static=!0),k.middlePosition=(k.limits.min+k.limits.max)/2,k}function Oo(B){const k={sid:B.getAttribute(&quot;sid&quot;),name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,attachments:[],transforms:[]};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;attachment_full&quot;:k.attachments.push(Ds(X));break;case&quot;matrix&quot;:case&quot;translate&quot;:case&quot;rotate&quot;:k.transforms.push(Hr(X));break}}return k}function Ds(B){const k={joint:B.getAttribute(&quot;joint&quot;).split(&quot;/&quot;).pop(),transforms:[],links:[]};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;link&quot;:k.links.push(Oo(X));break;case&quot;matrix&quot;:case&quot;translate&quot;:case&quot;rotate&quot;:k.transforms.push(Hr(X));break}}return k}function Hr(B){const k={type:B.nodeName},Z=s(B.textContent);switch(k.type){case&quot;matrix&quot;:k.obj=new yt,k.obj.fromArray(Z).transpose();break;case&quot;translate&quot;:k.obj=new K,k.obj.fromArray(Z);break;case&quot;rotate&quot;:k.obj=new K,k.obj.fromArray(Z),k.angle=ra.degToRad(Z[3]);break}return k}function cs(B){const k={name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,rigidBodies:{}};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;rigid_body&quot;:k.rigidBodies[X.getAttribute(&quot;name&quot;)]={},Mr(X,k.rigidBodies[X.getAttribute(&quot;name&quot;)]);break}}Nt.physicsModels[B.getAttribute(&quot;id&quot;)]=k}function Mr(B,k){for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;technique_common&quot;:Ar(X,k);break}}}function Ar(B,k){for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;inertia&quot;:k.inertia=s(X.textContent);break;case&quot;mass&quot;:k.mass=s(X.textContent)[0];break}}}function Is(B){const k={bindJointAxis:[]};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;bind_joint_axis&quot;:k.bindJointAxis.push(us(X));break}}Nt.kinematicsScenes[l(B.getAttribute(&quot;url&quot;))]=k}function us(B){const k={target:B.getAttribute(&quot;target&quot;).split(&quot;/&quot;).pop()};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType===1)switch(X.nodeName){case&quot;axis&quot;:const J=X.getElementsByTagName(&quot;param&quot;)[0];k.axis=J.textContent;const Te=k.axis.split(&quot;inst_&quot;).pop().split(&quot;axis&quot;)[0];k.jointIndex=Te.substring(0,Te.length-1);break}}return k}function Wn(B){return B.build!==void 0?B.build:B}function Ta(B){return x(Nt.kinematicsScenes[B],Wn)}function Ma(){const B=Object.keys(Nt.kinematicsModels)[0],k=Object.keys(Nt.kinematicsScenes)[0],Z=Object.keys(Nt.visualScenes)[0];if(B===void 0||k===void 0)return;const X=gi(B),J=Ta(k),Te=Zt(Z),Oe=J.bindJointAxis,at={};for(let xt=0,Be=Oe.length;xt&lt;Be;xt++){const pt=Oe[xt],gt=Tn.querySelector(&#x27;[sid=&quot;&#x27;+pt.target+&#x27;&quot;]&#x27;);if(gt){const Tt=gt.parentElement;$e(pt.jointIndex,Tt)}}function $e(xt,Be){const pt=Be.getAttribute(&quot;name&quot;),gt=X.joints[xt];Te.traverse(function(Tt){Tt.name===pt&amp;&amp;(at[xt]={object:Tt,transforms:Vr(Be),joint:gt,position:gt.zeroPosition})})}const it=new yt;Gr={joints:X&amp;&amp;X.joints,getJointValue:function(xt){const Be=at[xt];if(Be)return Be.position;console.warn(&quot;THREE.ColladaLoader: Joint &quot;+xt+&quot; doesn&#x27;t exist.&quot;)},setJointValue:function(xt,Be){const pt=at[xt];if(pt){const gt=pt.joint;if(Be&gt;gt.limits.max||Be&lt;gt.limits.min)console.warn(&quot;THREE.ColladaLoader: Joint &quot;+xt+&quot; value &quot;+Be+&quot; outside of limits (min: &quot;+gt.limits.min+&quot;, max: &quot;+gt.limits.max+&quot;).&quot;);else if(gt.static)console.warn(&quot;THREE.ColladaLoader: Joint &quot;+xt+&quot; is static.&quot;);else{const Tt=pt.object,_t=gt.axis,Fn=pt.transforms;fe.identity();for(let dn=0;dn&lt;Fn.length;dn++){const hn=Fn[dn];if(hn.sid&amp;&amp;hn.sid.indexOf(xt)!==-1)switch(gt.type){case&quot;revolute&quot;:fe.multiply(it.makeRotationAxis(_t,ra.degToRad(Be)));break;case&quot;prismatic&quot;:fe.multiply(it.makeTranslation(_t.x*Be,_t.y*Be,_t.z*Be));break;default:console.warn(&quot;THREE.ColladaLoader: Unknown joint type: &quot;+gt.type);break}else switch(hn.type){case&quot;matrix&quot;:fe.multiply(hn.obj);break;case&quot;translate&quot;:fe.multiply(it.makeTranslation(hn.obj.x,hn.obj.y,hn.obj.z));break;case&quot;scale&quot;:fe.scale(hn.obj);break;case&quot;rotate&quot;:fe.multiply(it.makeRotationAxis(hn.obj,hn.angle));break}}Tt.matrix.copy(fe),Tt.matrix.decompose(Tt.position,Tt.quaternion,Tt.scale),at[xt].position=Be}}else console.log(&quot;THREE.ColladaLoader: &quot;+xt+&quot; does not exist.&quot;)}}}function Vr(B){const k=[],Z=Tn.querySelector(&#x27;[id=&quot;&#x27;+B.id+&#x27;&quot;]&#x27;);for(let X=0;X&lt;Z.childNodes.length;X++){const J=Z.childNodes[X];if(J.nodeType!==1)continue;let Te,Oe;switch(J.nodeName){case&quot;matrix&quot;:Te=s(J.textContent);const at=new yt().fromArray(Te).transpose();k.push({sid:J.getAttribute(&quot;sid&quot;),type:J.nodeName,obj:at});break;case&quot;translate&quot;:case&quot;scale&quot;:Te=s(J.textContent),Oe=new K().fromArray(Te),k.push({sid:J.getAttribute(&quot;sid&quot;),type:J.nodeName,obj:Oe});break;case&quot;rotate&quot;:Te=s(J.textContent),Oe=new K().fromArray(Te);const $e=ra.degToRad(Te[3]);k.push({sid:J.getAttribute(&quot;sid&quot;),type:J.nodeName,obj:Oe,angle:$e});break}}return k}function Y(B){const k=B.getElementsByTagName(&quot;node&quot;);for(let Z=0;Z&lt;k.length;Z++){const X=k[Z];X.hasAttribute(&quot;id&quot;)===!1&amp;&amp;X.setAttribute(&quot;id&quot;,u())}}const fe=new yt,be=new K;function we(B){const k={name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,type:B.getAttribute(&quot;type&quot;),id:B.getAttribute(&quot;id&quot;),sid:B.getAttribute(&quot;sid&quot;),matrix:new yt,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];if(X.nodeType!==1)continue;let J;switch(X.nodeName){case&quot;node&quot;:k.nodes.push(X.getAttribute(&quot;id&quot;)),we(X);break;case&quot;instance_camera&quot;:k.instanceCameras.push(l(X.getAttribute(&quot;url&quot;)));break;case&quot;instance_controller&quot;:k.instanceControllers.push(me(X));break;case&quot;instance_light&quot;:k.instanceLights.push(l(X.getAttribute(&quot;url&quot;)));break;case&quot;instance_geometry&quot;:k.instanceGeometries.push(me(X));break;case&quot;instance_node&quot;:k.instanceNodes.push(l(X.getAttribute(&quot;url&quot;)));break;case&quot;matrix&quot;:J=s(X.textContent),k.matrix.multiply(fe.fromArray(J).transpose()),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;translate&quot;:J=s(X.textContent),be.fromArray(J),k.matrix.multiply(fe.makeTranslation(be.x,be.y,be.z)),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;rotate&quot;:J=s(X.textContent);const Te=ra.degToRad(J[3]);k.matrix.multiply(fe.makeRotationAxis(be.fromArray(J),Te)),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;scale&quot;:J=s(X.textContent),k.matrix.scale(be.fromArray(J)),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;extra&quot;:break;default:console.log(X)}}return bt(k.id)?console.warn(&quot;THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.&quot;,k.id):Nt.nodes[k.id]=k,k}function me(B){const k={id:l(B.getAttribute(&quot;url&quot;)),materials:{},skeletons:[]};for(let Z=0;Z&lt;B.childNodes.length;Z++){const X=B.childNodes[Z];switch(X.nodeName){case&quot;bind_material&quot;:const J=X.getElementsByTagName(&quot;instance_material&quot;);for(let Te=0;Te&lt;J.length;Te++){const Oe=J[Te],at=Oe.getAttribute(&quot;symbol&quot;),$e=Oe.getAttribute(&quot;target&quot;);k.materials[at]=l($e)}break;case&quot;skeleton&quot;:k.skeletons.push(l(X.textContent));break}}return k}function Ge(B,k){const Z=[],X=[];let J,Te,Oe;for(J=0;J&lt;B.length;J++){const it=B[J];let xt;if(bt(it))xt=Bt(it),Je(xt,k,Z);else if(Qt(it)){const pt=Nt.visualScenes[it].children;for(let gt=0;gt&lt;pt.length;gt++){const Tt=pt[gt];if(Tt.type===&quot;JOINT&quot;){const _t=Bt(Tt.id);Je(_t,k,Z)}}}else console.error(&quot;THREE.ColladaLoader: Unable to find root bone of skeleton with ID:&quot;,it)}for(J=0;J&lt;k.length;J++)for(Te=0;Te&lt;Z.length;Te++)if(Oe=Z[Te],Oe.bone.name===k[J].name){X[J]=Oe,Oe.processed=!0;break}for(J=0;J&lt;Z.length;J++)Oe=Z[J],Oe.processed===!1&amp;&amp;(X.push(Oe),Oe.processed=!0);const at=[],$e=[];for(J=0;J&lt;X.length;J++)Oe=X[J],at.push(Oe.bone),$e.push(Oe.boneInverse);return new Ah(at,$e)}function Je(B,k,Z){B.traverse(function(X){if(X.isBone===!0){let J;for(let Te=0;Te&lt;k.length;Te++){const Oe=k[Te];if(Oe.name===X.name){J=Oe.boneInverse;break}}J===void 0&amp;&amp;(J=new yt),Z.push({bone:X,boneInverse:J,processed:!1})}})}function tt(B){const k=[],Z=B.matrix,X=B.nodes,J=B.type,Te=B.instanceCameras,Oe=B.instanceControllers,at=B.instanceLights,$e=B.instanceGeometries,it=B.instanceNodes;for(let Be=0,pt=X.length;Be&lt;pt;Be++)k.push(Bt(X[Be]));for(let Be=0,pt=Te.length;Be&lt;pt;Be++){const gt=Rt(Te[Be]);gt!==null&amp;&amp;k.push(gt.clone())}for(let Be=0,pt=Oe.length;Be&lt;pt;Be++){const gt=Oe[Be],Tt=oe(gt.id),_t=Gi(Tt.id),Fn=Et(_t,gt.materials),dn=gt.skeletons,hn=Tt.skin.joints,sn=Ge(dn,hn);for(let Rr=0,er=Fn.length;Rr&lt;er;Rr++){const yi=Fn[Rr];yi.isSkinnedMesh&amp;&amp;(yi.bind(sn,Tt.skin.bindMatrix),yi.normalizeSkinWeights()),k.push(yi)}}for(let Be=0,pt=at.length;Be&lt;pt;Be++){const gt=de(at[Be]);gt!==null&amp;&amp;k.push(gt.clone())}for(let Be=0,pt=$e.length;Be&lt;pt;Be++){const gt=$e[Be],Tt=Gi(gt.id),_t=Et(Tt,gt.materials);for(let Fn=0,dn=_t.length;Fn&lt;dn;Fn++)k.push(_t[Fn])}for(let Be=0,pt=it.length;Be&lt;pt;Be++)k.push(Bt(it[Be]).clone());let xt;if(X.length===0&amp;&amp;k.length===1)xt=k[0];else{xt=J===&quot;JOINT&quot;?new Zd:new xr;for(let Be=0;Be&lt;k.length;Be++)xt.add(k[Be])}return xt.name=J===&quot;JOINT&quot;?B.sid:B.name,xt.matrix.copy(Z),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale),xt}const dt=new zi({name:Qi.DEFAULT_MATERIAL_NAME,color:16711935});function Ot(B,k){const Z=[];for(let X=0,J=B.length;X&lt;J;X++){const Te=k[B[X]];Te===void 0?(console.warn(&quot;THREE.ColladaLoader: Material with key %s not found. Apply fallback material.&quot;,B[X]),Z.push(dt)):Z.push(qe(Te))}return Z}function Et(B,k){const Z=[];for(const X in B){const J=B[X],Te=Ot(J.materialKeys,k);if(Te.length===0&amp;&amp;(X===&quot;lines&quot;||X===&quot;linestrips&quot;?Te.push(new Ji):Te.push(new ml)),X===&quot;lines&quot;||X===&quot;linestrips&quot;)for(let it=0,xt=Te.length;it&lt;xt;it++){const Be=Te[it];if(Be.isMeshPhongMaterial===!0||Be.isMeshLambertMaterial===!0){const pt=new Ji;pt.color.copy(Be.color),pt.opacity=Be.opacity,pt.transparent=Be.transparent,Te[it]=pt}}const Oe=J.data.attributes.skinIndex!==void 0,at=Te.length===1?Te[0]:Te;let $e;switch(X){case&quot;lines&quot;:$e=new Tr(J.data,at);break;case&quot;linestrips&quot;:$e=new Eo(J.data,at);break;case&quot;triangles&quot;:case&quot;polylist&quot;:Oe?$e=new xy(J.data,at):$e=new gn(J.data,at);break}Z.push($e)}return Z}function bt(B){return Nt.nodes[B]!==void 0}function Bt(B){return x(Nt.nodes[B],tt)}function un(B){const k={name:B.getAttribute(&quot;name&quot;),children:[]};Y(B);const Z=i(B,&quot;node&quot;);for(let X=0;X&lt;Z.length;X++)k.children.push(we(Z[X]));Nt.visualScenes[B.getAttribute(&quot;id&quot;)]=k}function In(B){const k=new xr;k.name=B.name;const Z=B.children;for(let X=0;X&lt;Z.length;X++){const J=Z[X];k.add(Bt(J.id))}return k}function Qt(B){return Nt.visualScenes[B]!==void 0}function Zt(B){return x(Nt.visualScenes[B],In)}function wt(B){const k=i(B,&quot;instance_visual_scene&quot;)[0];return Zt(l(k.getAttribute(&quot;url&quot;)))}function Hn(){const B=Nt.clips;if(h(B)===!0){if(h(Nt.animations)===!1){const k=[];for(const Z in Nt.animations){const X=S(Z);for(let J=0,Te=X.length;J&lt;Te;J++)k.push(X[J])}ai.push(new Sl(&quot;default&quot;,-1,k))}}else for(const k in B)ai.push(G(k))}function rn(B){let k=&quot;&quot;;const Z=[B];for(;Z.length;){const X=Z.shift();X.nodeType===Node.TEXT_NODE?k+=X.textContent:(k+=`
`,Z.push(...X.childNodes))}return k.trim()}if(e.length===0)return{scene:new by};const Jn=new DOMParser().parseFromString(e,&quot;application/xml&quot;),Tn=i(Jn,&quot;COLLADA&quot;)[0],bn=Jn.getElementsByTagName(&quot;parsererror&quot;)[0];if(bn!==void 0){const B=i(bn,&quot;div&quot;)[0];let k;return B?k=B.textContent:k=rn(bn),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,k),null}const Cr=Tn.getAttribute(&quot;version&quot;);console.debug(&quot;THREE.ColladaLoader: File version&quot;,Cr);const Mn=f(i(Tn,&quot;asset&quot;)[0]),Pi=new By(this.manager);Pi.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let Qn;a2&amp;&amp;(Qn=new a2(this.manager),Qn.setPath(this.resourcePath||t));const ei=new Ye,ai=[];let Gr={},Ps=0;const Nt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};g(Tn,&quot;library_animations&quot;,&quot;animation&quot;,b),g(Tn,&quot;library_animation_clips&quot;,&quot;animation_clip&quot;,P),g(Tn,&quot;library_controllers&quot;,&quot;controller&quot;,ee),g(Tn,&quot;library_images&quot;,&quot;image&quot;,ae),g(Tn,&quot;library_effects&quot;,&quot;effect&quot;,He),g(Tn,&quot;library_materials&quot;,&quot;material&quot;,Ue),g(Tn,&quot;library_cameras&quot;,&quot;camera&quot;,ht),g(Tn,&quot;library_lights&quot;,&quot;light&quot;,st),g(Tn,&quot;library_geometries&quot;,&quot;geometry&quot;,nt),g(Tn,&quot;library_nodes&quot;,&quot;node&quot;,we),g(Tn,&quot;library_visual_scenes&quot;,&quot;visual_scene&quot;,un),g(Tn,&quot;library_kinematics_models&quot;,&quot;kinematics_model&quot;,oi),g(Tn,&quot;library_physics_models&quot;,&quot;physics_model&quot;,cs),g(Tn,&quot;scene&quot;,&quot;instance_kinematics_scene&quot;,Is),v(Nt.animations,w),v(Nt.clips,j),v(Nt.controllers,ce),v(Nt.images,ue),v(Nt.effects,pe),v(Nt.materials,Ze),v(Nt.cameras,St),v(Nt.lights,yn),v(Nt.geometries,wn),v(Nt.visualScenes,In),Hn(),Ma();const Dl=wt(i(Tn,&quot;scene&quot;)[0]);return Dl.animations=ai,Mn.upAxis===&quot;Z_UP&quot;&amp;&amp;(console.warn(&quot;THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289.&quot;),Dl.rotation.set(-Math.PI/2,0,0)),Dl.scale.multiplyScalar(Mn.unit),{get animations(){return console.warn(&quot;THREE.ColladaLoader: Please access animations over scene.animations now.&quot;),ai},kinematics:Gr,library:Nt,scene:Dl}}}const l2=new K,OZ=new Er,wg=new yt,ol=new yt,Eg=new Ti,Tg=new K(1,1,1),Mg=new K;class u_ extends nn{constructor(...e){super(...e),this.urdfNode=null,this.urdfName=&quot;&quot;}copy(e,t){return super.copy(e,t),this.urdfNode=e.urdfNode,this.urdfName=e.urdfName,this}}class NZ extends u_{constructor(...e){super(...e),this.isURDFCollider=!0,this.type=&quot;URDFCollider&quot;}}class DZ extends u_{constructor(...e){super(...e),this.isURDFVisual=!0,this.type=&quot;URDFVisual&quot;}}class FL extends u_{constructor(...e){super(...e),this.isURDFLink=!0,this.type=&quot;URDFLink&quot;}}class zL extends u_{get jointType(){return this._jointType}set jointType(e){if(this.jointType!==e)switch(this._jointType=e,this.matrixWorldNeedsUpdate=!0,e){case&quot;fixed&quot;:this.jointValue=[];break;case&quot;continuous&quot;:case&quot;revolute&quot;:case&quot;prismatic&quot;:this.jointValue=new Array(1).fill(0);break;case&quot;planar&quot;:this.jointValue=new Array(3).fill(0),this.axis=new K(0,0,1);break;case&quot;floating&quot;:this.jointValue=new Array(6).fill(0);break}}get angle(){return this.jointValue[0]}constructor(...e){super(...e),this.isURDFJoint=!0,this.type=&quot;URDFJoint&quot;,this.jointValue=null,this.jointType=&quot;fixed&quot;,this.axis=new K(1,0,0),this.limit={lower:0,upper:0},this.ignoreLimits=!1,this.origPosition=null,this.origQuaternion=null,this.mimicJoints=[]}copy(e,t){return super.copy(e,t),this.jointType=e.jointType,this.axis=e.axis.clone(),this.limit.lower=e.limit.lower,this.limit.upper=e.limit.upper,this.ignoreLimits=!1,this.jointValue=[...e.jointValue],this.origPosition=e.origPosition?e.origPosition.clone():null,this.origQuaternion=e.origQuaternion?e.origQuaternion.clone():null,this.mimicJoints=[...e.mimicJoints],this}setJointValue(...e){e=e.map(i=&gt;i===null?null:parseFloat(i)),(!this.origPosition||!this.origQuaternion)&amp;&amp;(this.origPosition=this.position.clone(),this.origQuaternion=this.quaternion.clone());let t=!1;switch(this.mimicJoints.forEach(i=&gt;{t=i.updateFromMimickedJoint(...e)||t}),this.jointType){case&quot;fixed&quot;:return t;case&quot;continuous&quot;:case&quot;revolute&quot;:{let i=e[0];return i==null||i===this.jointValue[0]?t:(!this.ignoreLimits&amp;&amp;this.jointType===&quot;revolute&quot;&amp;&amp;(i=Math.min(this.limit.upper,i),i=Math.max(this.limit.lower,i)),this.quaternion.setFromAxisAngle(this.axis,i).premultiply(this.origQuaternion),this.jointValue[0]!==i?(this.jointValue[0]=i,this.matrixWorldNeedsUpdate=!0,!0):t)}case&quot;prismatic&quot;:{let i=e[0];return i==null||i===this.jointValue[0]?t:(this.ignoreLimits||(i=Math.min(this.limit.upper,i),i=Math.max(this.limit.lower,i)),this.position.copy(this.origPosition),l2.copy(this.axis).applyEuler(this.rotation),this.position.addScaledVector(l2,i),this.jointValue[0]!==i?(this.jointValue[0]=i,this.matrixWorldNeedsUpdate=!0,!0):t)}case&quot;floating&quot;:return this.jointValue.every((i,r)=&gt;e[r]===i||e[r]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],this.jointValue[3]=e[3]!==null?e[3]:this.jointValue[3],this.jointValue[4]=e[4]!==null?e[4]:this.jointValue[4],this.jointValue[5]=e[5]!==null?e[5]:this.jointValue[5],ol.compose(this.origPosition,this.origQuaternion,Tg),Eg.setFromEuler(OZ.set(this.jointValue[3],this.jointValue[4],this.jointValue[5],&quot;XYZ&quot;)),Mg.set(this.jointValue[0],this.jointValue[1],this.jointValue[2]),wg.compose(Mg,Eg,Tg),ol.premultiply(wg),this.position.setFromMatrixPosition(ol),this.rotation.setFromRotationMatrix(ol),this.matrixWorldNeedsUpdate=!0,!0);case&quot;planar&quot;:return this.jointValue.every((i,r)=&gt;e[r]===i||e[r]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],ol.compose(this.origPosition,this.origQuaternion,Tg),Eg.setFromAxisAngle(this.axis,this.jointValue[2]),Mg.set(this.jointValue[0],this.jointValue[1],0),wg.compose(Mg,Eg,Tg),ol.premultiply(wg),this.position.setFromMatrixPosition(ol),this.rotation.setFromRotationMatrix(ol),this.matrixWorldNeedsUpdate=!0,!0)}return t}}class c2 extends zL{constructor(...e){super(...e),this.type=&quot;URDFMimicJoint&quot;,this.mimicJoint=null,this.offset=0,this.multiplier=1}updateFromMimickedJoint(...e){const t=e.map(i=&gt;i*this.multiplier+this.offset);return super.setJointValue(...t)}copy(e,t){return super.copy(e,t),this.mimicJoint=e.mimicJoint,this.offset=e.offset,this.multiplier=e.multiplier,this}}class IZ extends FL{constructor(...e){super(...e),this.isURDFRobot=!0,this.urdfNode=null,this.urdfRobotNode=null,this.robotName=null,this.links=null,this.joints=null,this.colliders=null,this.visual=null,this.frames=null}copy(e,t){super.copy(e,t),this.urdfRobotNode=e.urdfRobotNode,this.robotName=e.robotName,this.links={},this.joints={},this.colliders={},this.visual={},this.traverse(i=&gt;{i.isURDFJoint&amp;&amp;i.urdfName in e.joints&amp;&amp;(this.joints[i.urdfName]=i),i.isURDFLink&amp;&amp;i.urdfName in e.links&amp;&amp;(this.links[i.urdfName]=i),i.isURDFCollider&amp;&amp;i.urdfName in e.colliders&amp;&amp;(this.colliders[i.urdfName]=i),i.isURDFVisual&amp;&amp;i.urdfName in e.visual&amp;&amp;(this.visual[i.urdfName]=i)});for(const i in this.joints)this.joints[i].mimicJoints=this.joints[i].mimicJoints.map(r=&gt;this.joints[r.name]);return this.frames={...this.colliders,...this.visual,...this.links,...this.joints},this}getFrame(e){return this.frames[e]}setJointValue(e,...t){const i=this.joints[e];return i?i.setJointValue(...t):!1}setJointValues(e){let t=!1;for(const i in e){const r=e[i];Array.isArray(r)?t=this.setJointValue(i,...r)||t:t=this.setJointValue(i,r)||t}return t}}const jx=new Ti,u2=new Er;function ju(n){return n?n.trim().split(/\s+/g).map(e=&gt;parseFloat(e)):[0,0,0]}function h2(n,e,t=!1){t||n.rotation.set(0,0,0),u2.set(e[0],e[1],e[2],&quot;ZYX&quot;),jx.setFromEuler(u2),jx.multiply(n.quaternion),n.quaternion.copy(jx)}class PZ{constructor(e){this.manager=e||Fw,this.loadMeshCb=this.defaultMeshLoader.bind(this),this.parseVisual=!0,this.parseCollision=!1,this.packages=&quot;&quot;,this.workingPath=&quot;&quot;,this.fetchOptions={}}loadAsync(e){return new Promise((t,i)=&gt;{this.load(e,t,null,i)})}load(e,t,i,r){const s=this.manager,o=So.extractUrlBase(e),l=this.manager.resolveURL(e);s.itemStart(l),fetch(l,this.fetchOptions).then(u=&gt;{if(u.ok)return i&amp;&amp;i(null),u.text();throw new Error(`URDFLoader: Failed to load url &#x27;${l}&#x27; with error code ${u.status} : ${u.statusText}.`)}).then(u=&gt;{const h=this.parse(u,this.workingPath||o);t(h),s.itemEnd(l)}).catch(u=&gt;{r?r(u):console.error(&quot;URDFLoader: Error loading file.&quot;,u),s.itemError(l),s.itemEnd(l)})}parse(e,t=this.workingPath){const i=this.packages,r=this.loadMeshCb,s=this.parseVisual,o=this.parseCollision,l=this.manager,u={},h={},f={};function p(T){if(!/^package:\/\//.test(T))return t?t+T:T;const[w,S]=T.replace(/^package:\/\//,&quot;&quot;).split(/\/(.+)/);if(typeof i==&quot;string&quot;)return i.endsWith(w)?i+&quot;/&quot;+S:i+&quot;/&quot;+w+&quot;/&quot;+S;if(i instanceof Function)return i(w)+&quot;/&quot;+S;if(typeof i==&quot;object&quot;)return w in i?i[w]+&quot;/&quot;+S:(console.error(`URDFLoader : ${w} not found in provided package list.`),null)}function m(T){let w;T instanceof Document?w=[...T.children]:T instanceof Element?w=[T]:w=[...new DOMParser().parseFromString(T,&quot;text/xml&quot;).children];const S=w.filter(C=&gt;C.nodeName===&quot;robot&quot;).pop();return g(S)}function g(T){const w=[...T.children],S=w.filter(L=&gt;L.nodeName.toLowerCase()===&quot;link&quot;),C=w.filter(L=&gt;L.nodeName.toLowerCase()===&quot;joint&quot;),O=w.filter(L=&gt;L.nodeName.toLowerCase()===&quot;material&quot;),M=new IZ;M.robotName=T.getAttribute(&quot;name&quot;),M.urdfRobotNode=T,O.forEach(L=&gt;{const H=L.getAttribute(&quot;name&quot;);f[H]=b(L)});const N={},R={};S.forEach(L=&gt;{const H=L.getAttribute(&quot;name&quot;),q=T.querySelector(`child[link=&quot;${H}&quot;]`)===null;u[H]=x(L,N,R,q?M:null)}),C.forEach(L=&gt;{const H=L.getAttribute(&quot;name&quot;);h[H]=v(L)}),M.joints=h,M.links=u,M.colliders=R,M.visual=N;const D=Object.values(h);return D.forEach(L=&gt;{L instanceof c2&amp;&amp;h[L.mimicJoint].mimicJoints.push(L)}),D.forEach(L=&gt;{const H=new Set,q=z=&gt;{if(H.has(z))throw new Error(&quot;URDFLoader: Detected an infinite loop of mimic joints.&quot;);H.add(z),z.mimicJoints.forEach($=&gt;{q($)})};q(L)}),M.frames={...R,...N,...u,...h},M}function v(T){const w=[...T.children],S=T.getAttribute(&quot;type&quot;);let C;const O=w.find(H=&gt;H.nodeName.toLowerCase()===&quot;mimic&quot;);O?(C=new c2,C.mimicJoint=O.getAttribute(&quot;joint&quot;),C.multiplier=parseFloat(O.getAttribute(&quot;multiplier&quot;)||1),C.offset=parseFloat(O.getAttribute(&quot;offset&quot;)||0)):C=new zL,C.urdfNode=T,C.name=T.getAttribute(&quot;name&quot;),C.urdfName=C.name,C.jointType=S;let M=null,N=null,R=[0,0,0],D=[0,0,0];w.forEach(H=&gt;{const q=H.nodeName.toLowerCase();q===&quot;origin&quot;?(R=ju(H.getAttribute(&quot;xyz&quot;)),D=ju(H.getAttribute(&quot;rpy&quot;))):q===&quot;child&quot;?N=u[H.getAttribute(&quot;link&quot;)]:q===&quot;parent&quot;?M=u[H.getAttribute(&quot;link&quot;)]:q===&quot;limit&quot;&amp;&amp;(C.limit.lower=parseFloat(H.getAttribute(&quot;lower&quot;)||C.limit.lower),C.limit.upper=parseFloat(H.getAttribute(&quot;upper&quot;)||C.limit.upper))}),M.add(C),C.add(N),h2(C,D),C.position.set(R[0],R[1],R[2]);const L=w.filter(H=&gt;H.nodeName.toLowerCase()===&quot;axis&quot;)[0];if(L){const H=L.getAttribute(&quot;xyz&quot;).split(/\s+/g).map(q=&gt;parseFloat(q));C.axis=new K(H[0],H[1],H[2]),C.axis.normalize()}return C}function x(T,w,S,C=null){C===null&amp;&amp;(C=new FL);const O=[...T.children];return C.name=T.getAttribute(&quot;name&quot;),C.urdfName=C.name,C.urdfNode=T,s&amp;&amp;O.filter(N=&gt;N.nodeName.toLowerCase()===&quot;visual&quot;).forEach(N=&gt;{const R=_(N,f);if(C.add(R),N.hasAttribute(&quot;name&quot;)){const D=N.getAttribute(&quot;name&quot;);R.name=D,R.urdfName=D,w[D]=R}}),o&amp;&amp;O.filter(N=&gt;N.nodeName.toLowerCase()===&quot;collision&quot;).forEach(N=&gt;{const R=_(N);if(C.add(R),N.hasAttribute(&quot;name&quot;)){const D=N.getAttribute(&quot;name&quot;);R.name=D,R.urdfName=D,S[D]=R}}),C}function b(T){const w=[...T.children],S=new ml;return S.name=T.getAttribute(&quot;name&quot;)||&quot;&quot;,w.forEach(C=&gt;{const O=C.nodeName.toLowerCase();if(O===&quot;color&quot;){const M=C.getAttribute(&quot;rgba&quot;).split(/\s/g).map(N=&gt;parseFloat(N));S.color.setRGB(M[0],M[1],M[2]),S.opacity=M[3],S.transparent=M[3]&lt;1,S.depthWrite=!S.transparent}else if(O===&quot;texture&quot;){const M=C.getAttribute(&quot;filename&quot;);if(M){const N=new By(l),R=p(M);S.map=N.load(R),S.map.colorSpace=Dn}}}),S}function _(T,w={}){const S=T.nodeName.toLowerCase()===&quot;collision&quot;,C=[...T.children];let O=null;const M=C.filter(R=&gt;R.nodeName.toLowerCase()===&quot;material&quot;)[0];if(M){const R=M.getAttribute(&quot;name&quot;);R&amp;&amp;R in w?O=w[R]:O=b(M)}else O=new ml;const N=S?new NZ:new DZ;return N.urdfNode=T,C.forEach(R=&gt;{const D=R.nodeName.toLowerCase();if(D===&quot;geometry&quot;){const L=R.children[0].nodeName.toLowerCase();if(L===&quot;mesh&quot;){const H=R.children[0].getAttribute(&quot;filename&quot;),q=p(H);if(q!==null){const z=R.children[0].getAttribute(&quot;scale&quot;);if(z){const $=ju(z);N.scale.set($[0],$[1],$[2])}r(q,l,($,P)=&gt;{P?console.error(&quot;URDFLoader: Error loading mesh.&quot;,P):$&amp;&amp;($ instanceof gn&amp;&amp;($.material=O),$.position.set(0,0,0),$.quaternion.identity(),N.add($))})}}else if(L===&quot;box&quot;){const H=new gn;H.geometry=new Rl(1,1,1),H.material=O;const q=ju(R.children[0].getAttribute(&quot;size&quot;));H.scale.set(q[0],q[1],q[2]),N.add(H)}else if(L===&quot;sphere&quot;){const H=new gn;H.geometry=new Nh(1,30,30),H.material=O;const q=parseFloat(R.children[0].getAttribute(&quot;radius&quot;))||0;H.scale.set(q,q,q),N.add(H)}else if(L===&quot;cylinder&quot;){const H=new gn;H.geometry=new Rh(1,1,1,30),H.material=O;const q=parseFloat(R.children[0].getAttribute(&quot;radius&quot;))||0,z=parseFloat(R.children[0].getAttribute(&quot;length&quot;))||0;H.scale.set(q,z,q),H.rotation.set(Math.PI/2,0,0),N.add(H)}}else if(D===&quot;origin&quot;){const L=ju(R.getAttribute(&quot;xyz&quot;)),H=ju(R.getAttribute(&quot;rpy&quot;));N.position.set(L[0],L[1],L[2]),N.rotation.set(0,0,0),h2(N,H)}}),N}return m(e)}defaultMeshLoader(e,t,i){/\.stl$/i.test(e)?new id(t).load(e,s=&gt;{const o=new gn(s,new ml);i(o)}):/\.dae$/i.test(e)?new RZ(t).load(e,s=&gt;i(s.scene)):console.warn(`URDFLoader: Could not load model at ${e}.
No loader available`)}}function LZ(){console.log(&quot;Loading robot&quot;);const n=new id;n.parse=function(r){try{return id.prototype.parse.call(this,r)}catch(s){if(console.warn(&quot;Binary STL failed. Trying ASCII fallback...&quot;,s),typeof r==&quot;string&quot;)return id.prototype.parse.call(this,r);{const l=new TextDecoder().decode(r);return id.prototype.parse.call(this,l)}}};let e=wr.current;e||console.error(&quot;Scene is not defined&quot;);const t=&quot;./models/kr4_r600/urdf/kuka_kr4.urdf&quot;,i=new PZ;i.workingPath=&quot;./models/kr4_r600&quot;,i.packages={meshes:&quot;/models/kr4_r600/meshes&quot;},i.loadMeshCb=(r,s,o)=&gt;{fetch(r).then(l=&gt;{if(!l.ok)throw new Error(`HTTP error ${l.status} for ${r}`);return l.arrayBuffer()}).then(l=&gt;{const u=new Uint8Array(l.slice(0,100)),h=new TextDecoder().decode(u);console.log(&quot;STL header preview:&quot;,h);const f=n.parse(l),p=new gn(f,new rs({color:10066329}));o(p)}).catch(l=&gt;{console.error(`Failed to load STL at ${r}`,l),o(null,l)})},i.load(t,r=&gt;{console.log(&quot;Robot loaded:&quot;,r),e?(r.traverse(s=&gt;{s.castShadow=!0}),e.add(r)):console.error(&quot;Scene still not available at load time&quot;)},r=&gt;{console.error(&quot;Failed to load URDF:&quot;,r)})}function UZ(){if(console.log(&quot;Debug print function called&quot;),wl.getState().hasAnimation?console.log(&quot;Animation found&quot;):console.log(&quot;No animation found&quot;),!wr.current){console.log(&quot;Scene is null&quot;);return}if(!ua.current)console.log(&quot;No cameras found in the scene&quot;);else{let t=ua.current;console.log(&quot;Camera position:&quot;,t.position),console.log(&quot;Camera rotation:&quot;,t.rotation),console.log(&quot;Camera up:&quot;,t.up),console.log(&quot;Camera world up:&quot;,t.getWorldDirection(new K)),console.log(&quot;Camera world direction:&quot;,t.getWorldDirection(new K)),console.log(&quot;Camera quaternion:&quot;,t.quaternion),console.log(&quot;Camera matrix world:&quot;,t.matrixWorld),console.log(&quot;Camera matrix world inverse:&quot;,t.matrixWorldInverse),console.log(&quot;Camera projection matrix:&quot;,t.projectionMatrix),console.log(&quot;Camera projection matrix inverse:&quot;,t.projectionMatrixInverse),console.log(&quot;Camera frustum:&quot;,t.projectionMatrix.elements),console.log(&quot;Camera frustum planes:&quot;,t.projectionMatrix.elements),console.log(&quot;Camera frustum size:&quot;,t.projectionMatrix.elements.length)}if(!wS.current)console.log(&quot;No controls found in the scene&quot;);else{let t=wS.current;t instanceof kc?(console.log(&quot;Controls type: OrbitControls&quot;),console.log(&quot;Controls target:&quot;,t.target),console.log(&quot;Controls position:&quot;,t.object.position)):(console.log(&quot;Controls type: CameraControls&quot;),console.log(&quot;Controls position:&quot;,t.camera.position))}}function kZ(){const{showPerf:n,setShowPerf:e,showEdges:t,setShowEdges:i,lockTranslation:r,setLockTranslation:s,setEnableWebsocket:o,enableWebsocket:l,enableNodeEditor:u,setEnableNodeEditor:h,pointSize:f,setPointSize:p,pointSizeAbsolute:m,setPointSizeAbsolute:g}=wa(),{showLegend:v,setShowLegend:x}=ow(),{zIsUp:b,setZIsUp:_,defaultOrbitController:T,setDefaultOrbitController:w}=io(),[S]=re.useState({width:300,height:460}),[C,O]=re.useState({x:0,y:0}),[M,N]=re.useState(!1),R=window.UNIQUE_VERSION_ID||0,D=re.useCallback(H=&gt;{const q=Math.min(Math.max(0,H.x),window.innerWidth-S.width),z=Math.min(Math.max(0,H.y),window.innerHeight-S.height);return{x:q,y:z}},[S]),L=re.useCallback(()=&gt;{const H=(window.innerWidth-S.width)/2,q=(window.innerHeight-S.height)/2;O(D({x:H,y:q}))},[S,D]);return re.useEffect(()=&gt;(L(),window.addEventListener(&quot;resize&quot;,L),()=&gt;{window.removeEventListener(&quot;resize&quot;,L)}),[L]),re.useEffect(()=&gt;{NS(f,m)},[f,m]),re.useEffect(()=&gt;{const H=()=&gt;NS(f,m);return window.addEventListener(&quot;resize&quot;,H),()=&gt;window.removeEventListener(&quot;resize&quot;,H)},[f,m]),re.useEffect(()=&gt;{m?(f&gt;.1||f&lt;.005)&amp;&amp;p(.01):(f&lt;5||f&gt;30)&amp;&amp;p(10)},[m]),I.jsx(h1,{default:{width:300,height:460,x:(window.innerWidth-300)/2,y:(window.innerHeight-460)/2},minWidth:250,bounds:&quot;window&quot;,enableResizing:{right:!0,bottomRight:!0},dragHandleClassName:&quot;options-drag-handle&quot;,cancel:&quot;input, button, select, textarea, .no-drag&quot;,onDragStop:(H,q)=&gt;O({x:q.x,y:q.y}),onResizeStop:(H,q,z,$,P)=&gt;{O(P)},children:I.jsxs(&quot;div&quot;,{className:&quot;flex flex-col space-y-4 p-4 bg-gray-800 rounded shadow-lg h-full text-white text-sm&quot;,style:{height:&quot;auto&quot;,maxHeight:&quot;640px&quot;,overflowY:&quot;auto&quot;,width:&quot;100%&quot;,boxSizing:&quot;border-box&quot;},children:[I.jsx(&quot;div&quot;,{className:&quot;options-drag-handle font-bold text-base cursor-move select-none&quot;,children:&quot;Options Panel&quot;}),I.jsxs(&quot;div&quot;,{className:&quot;text-xs text-gray-400&quot;,children:[&quot;Version: &quot;,R]}),I.jsxs(&quot;div&quot;,{className:&quot;space-y-2&quot;,children:[I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:()=&gt;UZ(),children:&quot;Debug print&quot;}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:LZ,children:&quot;Load URDF Model&quot;}),I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:async()=&gt;{try{await AZ()}catch(H){console.error(&quot;Error taking screenshot:&quot;,H)}},children:&quot;Take Screenshot&quot;})]}),I.jsx(&quot;hr&quot;,{className:&quot;border-gray-600&quot;}),I.jsxs(&quot;div&quot;,{className:&quot;space-y-2&quot;,children:[I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;span&quot;,{className:&quot;w-32&quot;,children:&quot;Point Size&quot;}),I.jsx(&quot;input&quot;,{type:&quot;range&quot;,min:m?.005:5,max:m?.1:30,step:m?.005:1,value:f,onChange:H=&gt;p(parseFloat(H.target.value)),className:&quot;flex-1 no-drag&quot;}),I.jsx(&quot;input&quot;,{type:&quot;number&quot;,min:m?.005:5,max:m?.1:30,step:m?.005:1,value:f,onChange:H=&gt;p(parseFloat(H.target.value)||0),className:&quot;w-24 bg-gray-700 text-white p-1 rounded no-drag&quot;})]}),I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,className:&quot;no-drag&quot;,checked:m,onChange:()=&gt;g(!m)}),I.jsx(&quot;span&quot;,{children:&quot;Absolute point size (world units)&quot;})]})]}),I.jsx(&quot;hr&quot;,{className:&quot;border-gray-600&quot;}),I.jsxs(&quot;div&quot;,{className:&quot;space-y-2&quot;,children:[I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:n,onChange:()=&gt;e(!n)}),I.jsx(&quot;span&quot;,{children:&quot;Show Stats (Perf)&quot;})]}),I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:v,onChange:()=&gt;x(!v)}),I.jsx(&quot;span&quot;,{children:&quot;Show Color Legend&quot;})]}),I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:t,onChange:()=&gt;i(!t)}),I.jsx(&quot;span&quot;,{children:&quot;Geometry Edges&quot;})]}),I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:r,onChange:()=&gt;s(!r)}),I.jsx(&quot;span&quot;,{children:&quot;Lock Translation&quot;})]}),I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:u,onChange:()=&gt;h(!u)}),I.jsx(&quot;span&quot;,{children:&quot;Enable Node Editor&quot;})]}),I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:l,onChange:()=&gt;o(!l)}),I.jsx(&quot;span&quot;,{children:&quot;Enable Websocket&quot;})]}),I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:b,onChange:()=&gt;_(!b)}),I.jsx(&quot;span&quot;,{children:&quot;Z is UP&quot;})]}),I.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[I.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:T,onChange:()=&gt;w(!T)}),I.jsx(&quot;span&quot;,{children:&quot;Use Default Orbitcontroller&quot;})]})]}),I.jsx(&quot;hr&quot;,{className:&quot;border-gray-600&quot;}),I.jsxs(&quot;div&quot;,{children:[I.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:()=&gt;N(!M),children:&quot;Shortcut Keys&quot;}),M&amp;&amp;I.jsxs(&quot;div&quot;,{className:&quot;mt-2 bg-gray-700 p-2 rounded text-xs space-y-1&quot;,children:[I.jsxs(&quot;p&quot;,{children:[I.jsx(&quot;kbd&quot;,{children:&quot;Shift + H&quot;}),&quot;: Hide&quot;]}),I.jsxs(&quot;p&quot;,{children:[I.jsx(&quot;kbd&quot;,{children:&quot;Shift + U&quot;}),&quot;: Unhide All&quot;]}),I.jsxs(&quot;p&quot;,{children:[I.jsx(&quot;kbd&quot;,{children:&quot;Shift + F&quot;}),&quot;: Center on Selection&quot;]}),I.jsxs(&quot;p&quot;,{children:[I.jsx(&quot;kbd&quot;,{children:&quot;Shift + A&quot;}),&quot;: Zoom to All&quot;]}),I.jsxs(&quot;p&quot;,{children:[I.jsx(&quot;kbd&quot;,{children:&quot;Shift + Q&quot;}),&quot;: Toggle Options Menu&quot;]})]})]})]})})}var FZ=HP();const BL=re.createContext(null);function ls(){const n=re.useContext(BL);if(n===null)throw new Error(&quot;No Tree Api Provided&quot;);return n}const HL=re.createContext(null);function zZ(){const n=re.useContext(HL);if(n===null)throw new Error(&quot;Provide a NodesContext&quot;);return n}const VL=re.createContext(null);function BZ(){const n=re.useContext(VL);if(n===null)throw new Error(&quot;Provide a DnDContext&quot;);return n}const GL=re.createContext(0);function jL(){re.useContext(GL)}function Bg(n,e,t){return Math.max(Math.min(n,t),e)}function WL(n){return n&amp;&amp;n.isLeaf}function XL(n){return n&amp;&amp;n.isInternal&amp;&amp;!n.isOpen}function qL(n){var e;return n&amp;&amp;n.isOpen&amp;&amp;!(!((e=n.children)===null||e===void 0)&amp;&amp;e.length)}const YL=(n,e)=&gt;{let t=n;for(;t;){if(t.id===e.id)return!0;t=t.parent}return!1},KL=n=&gt;{if(!n.parent)throw Error(&quot;Node does not have a parent&quot;);return n.parent.children.findIndex(e=&gt;e.id===n.id)};function HZ(){}function d1(n,e){if(!n)return null;if(n.id===e)return n;if(n.children)for(let t of n.children){const i=d1(t,e);if(i)return i}return null}function Q0(n,e){if(e(n),n.children)for(let t of n.children)Q0(t,e)}function $L(n){const e=JL(n);let t;for(let i=0;i&lt;e.length;++i)if(e[i]===n){t=VZ(e,i);break}t==null||t.focus()}function ZL(n){const e=JL(n);let t;for(let i=0;i&lt;e.length;++i)if(e[i]===n){t=GZ(e,i);break}t==null||t.focus()}function VZ(n,e){return e+1&lt;n.length?n[e+1]:n[0]}function GZ(n,e){return e-1&gt;=0?n[e-1]:n[n.length-1]}function JL(n){return Array.from(document.querySelectorAll(&#x27;button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=&quot;-1&quot;]):not([disabled]), details:not([disabled]), summary:not(:disabled)&#x27;)).filter(e=&gt;e===n||!n.contains(e))}function rd(n,e){return typeof e==&quot;boolean&quot;?e:typeof e==&quot;string&quot;?n[e]:e(n)}function QL(n){return n===null?null:yc(n)}function yc(n){return typeof n==&quot;string&quot;?n:n.id}function jZ(...n){return e=&gt;{n.forEach(t=&gt;{typeof t==&quot;function&quot;?t(e):t!=null&amp;&amp;(t.current=e)})}}function e3(n,...e){if(n)return n(...e)}function t3(n){return new Promise((e,t)=&gt;{let i=0;function r(){i+=1,i===100&amp;&amp;t(),n()?e():setTimeout(r,10)}r()})}function n3(n){var e,t;const i=n.focusedNode;return i?i.isOpen?0:i.parent?i.childIndex+1:0:(t=(e=n.root.children)===null||e===void 0?void 0:e.length)!==null&amp;&amp;t!==void 0?t:0}function i3(n){const e=n.focusedNode;return e?e.isOpen?e.id:e.parent&amp;&amp;!e.parent.isRoot?e.parent.id:null:null}const WZ=Object.freeze(Object.defineProperty({__proto__:null,access:rd,bound:Bg,dfs:d1,focusNextElement:$L,focusPrevElement:ZL,getInsertIndex:n3,getInsertParentId:i3,identify:yc,identifyNull:QL,indexOf:KL,isClosed:XL,isDescendant:YL,isItem:WL,isOpenWithEmptyChildren:qL,mergeRefs:jZ,noop:HZ,safeRun:e3,waitFor:t3,walk:Q0},Symbol.toStringTag,{value:&quot;Module&quot;})),XZ={display:&quot;flex&quot;,alignItems:&quot;center&quot;,zIndex:1},qZ={flex:1,height:&quot;2px&quot;,background:&quot;#4B91E2&quot;,borderRadius:&quot;1px&quot;},YZ={width:&quot;4px&quot;,height:&quot;4px&quot;,boxShadow:&quot;0 0 0 3px #4B91E2&quot;,borderRadius:&quot;50%&quot;},KZ=_d.memo(function({top:e,left:t,indent:i}){const r={position:&quot;absolute&quot;,pointerEvents:&quot;none&quot;,top:e-2+&quot;px&quot;,left:t+&quot;px&quot;,right:i+&quot;px&quot;};return I.jsxs(&quot;div&quot;,{style:Object.assign(Object.assign({},XZ),r),children:[I.jsx(&quot;div&quot;,{style:Object.assign({},YZ)}),I.jsx(&quot;div&quot;,{style:Object.assign({},qZ)})]})});function $Z({node:n,attrs:e,innerRef:t,children:i}){return I.jsx(&quot;div&quot;,Object.assign({},e,{ref:t,onFocus:r=&gt;r.stopPropagation(),onClick:n.handleClick,children:i}))}function ZZ(n){return I.jsxs(&quot;div&quot;,{ref:n.dragHandle,style:n.style,children:[I.jsx(&quot;span&quot;,{onClick:e=&gt;{e.stopPropagation(),n.node.toggle()},children:n.node.isLeaf?&quot;ð³&quot;:n.node.isOpen?&quot;ð&quot;:&quot;ð&quot;}),&quot; &quot;,n.node.isEditing?I.jsx(QZ,Object.assign({},n)):I.jsx(JZ,Object.assign({},n))]})}function JZ(n){return I.jsx(I.Fragment,{children:I.jsx(&quot;span&quot;,{children:n.node.data.name})})}function QZ({node:n}){const e=re.useRef();return re.useEffect(()=&gt;{var t,i;(t=e.current)===null||t===void 0||t.focus(),(i=e.current)===null||i===void 0||i.select()},[]),I.jsx(&quot;input&quot;,{ref:e,defaultValue:n.data.name,onBlur:()=&gt;n.reset(),onKeyDown:t=&gt;{var i;t.key===&quot;Escape&quot;&amp;&amp;n.reset(),t.key===&quot;Enter&quot;&amp;&amp;n.submit(((i=e.current)===null||i===void 0?void 0:i.value)||&quot;&quot;)}})}function Wx(n){return{type:&quot;EDIT&quot;,id:n}}function eJ(n={id:null},e){return e.type===&quot;EDIT&quot;?Object.assign(Object.assign({},n),{id:e.id}):n}function Wu(n){return{type:&quot;FOCUS&quot;,id:n}}function tJ(){return{type:&quot;TREE_BLUR&quot;}}function nJ(n={id:null,treeFocused:!1},e){return e.type===&quot;FOCUS&quot;?Object.assign(Object.assign({},n),{id:e.id,treeFocused:!0}):e.type===&quot;TREE_BLUR&quot;?Object.assign(Object.assign({},n),{treeFocused:!1}):n}class ey{constructor(e){this.handleClick=t=&gt;{t.metaKey&amp;&amp;!this.tree.props.disableMultiSelection?this.isSelected?this.deselect():this.selectMulti():t.shiftKey&amp;&amp;!this.tree.props.disableMultiSelection?this.selectContiguous():(this.select(),this.activate())},this.tree=e.tree,this.id=e.id,this.data=e.data,this.level=e.level,this.children=e.children,this.parent=e.parent,this.isDraggable=e.isDraggable,this.rowIndex=e.rowIndex}get isRoot(){return this.id===jd}get isLeaf(){return!Array.isArray(this.children)}get isInternal(){return!this.isLeaf}get isOpen(){return this.isLeaf?!1:this.tree.isOpen(this.id)}get isClosed(){return this.isLeaf?!1:!this.tree.isOpen(this.id)}get isEditable(){return this.tree.isEditable(this.data)}get isEditing(){return this.tree.editingId===this.id}get isSelected(){return this.tree.isSelected(this.id)}get isOnlySelection(){return this.isSelected&amp;&amp;this.tree.hasOneSelection}get isSelectedStart(){var e;return this.isSelected&amp;&amp;!(!((e=this.prev)===null||e===void 0)&amp;&amp;e.isSelected)}get isSelectedEnd(){var e;return this.isSelected&amp;&amp;!(!((e=this.next)===null||e===void 0)&amp;&amp;e.isSelected)}get isFocused(){return this.tree.isFocused(this.id)}get isDragging(){return this.tree.isDragging(this.id)}get willReceiveDrop(){return this.tree.willReceiveDrop(this.id)}get state(){return{isClosed:this.isClosed,isDragging:this.isDragging,isEditing:this.isEditing,isFocused:this.isFocused,isInternal:this.isInternal,isLeaf:this.isLeaf,isOpen:this.isOpen,isSelected:this.isSelected,isSelectedEnd:this.isSelectedEnd,isSelectedStart:this.isSelectedStart,willReceiveDrop:this.willReceiveDrop}}get childIndex(){return this.parent&amp;&amp;this.parent.children?this.parent.children.findIndex(e=&gt;e.id===this.id):-1}get next(){return this.rowIndex===null?null:this.tree.at(this.rowIndex+1)}get prev(){return this.rowIndex===null?null:this.tree.at(this.rowIndex-1)}get nextSibling(){var e,t;const i=this.childIndex;return(t=(e=this.parent)===null||e===void 0?void 0:e.children[i+1])!==null&amp;&amp;t!==void 0?t:null}isAncestorOf(e){if(!e)return!1;let t=e;for(;t;){if(t.id===this.id)return!0;t=t.parent}return!1}select(){this.tree.select(this)}deselect(){this.tree.deselect(this)}selectMulti(){this.tree.selectMulti(this)}selectContiguous(){this.tree.selectContiguous(this)}activate(){this.tree.activate(this)}focus(){this.tree.focus(this)}toggle(){this.tree.toggle(this)}open(){this.tree.open(this)}openParents(){this.tree.openParents(this)}close(){this.tree.close(this)}submit(e){this.tree.submit(this,e)}reset(){this.tree.reset()}clone(){return new ey(Object.assign({},this))}edit(){return this.tree.edit(this)}}const jd=&quot;__REACT_ARBORIST_INTERNAL_ROOT__&quot;;function f2(n){var e;function t(s,o,l){const u=n.accessId(s),h=new ey({tree:n,data:s,level:o,parent:l,id:u,children:null,isDraggable:n.isDraggable(s),rowIndex:null}),f=n.accessChildren(s);return f&amp;&amp;(h.children=f.map(p=&gt;t(p,o+1,h))),h}const i=new ey({tree:n,id:jd,data:{id:jd},level:-1,parent:null,children:null,isDraggable:!0,rowIndex:null}),r=(e=n.props.data)!==null&amp;&amp;e!==void 0?e:[];return i.children=r.map(s=&gt;t(s,0,i)),i}const ZS={open(n,e){return{type:&quot;VISIBILITY_OPEN&quot;,id:n,filtered:e}},close(n,e){return{type:&quot;VISIBILITY_CLOSE&quot;,id:n,filtered:e}},toggle(n,e){return{type:&quot;VISIBILITY_TOGGLE&quot;,id:n,filtered:e}},clear(n){return{type:&quot;VISIBILITY_CLEAR&quot;,filtered:n}}};function d2(n={},e){if(e.type===&quot;VISIBILITY_OPEN&quot;)return Object.assign(Object.assign({},n),{[e.id]:!0});if(e.type===&quot;VISIBILITY_CLOSE&quot;)return Object.assign(Object.assign({},n),{[e.id]:!1});if(e.type===&quot;VISIBILITY_TOGGLE&quot;){const t=n[e.id];return Object.assign(Object.assign({},n),{[e.id]:!t})}else return e.type===&quot;VISIBILITY_CLEAR&quot;?{}:n}function iJ(n={filtered:{},unfiltered:{}},e){return e.type.startsWith(&quot;VISIBILITY&quot;)?e.filtered?Object.assign(Object.assign({},n),{filtered:d2(n.filtered,e)}):Object.assign(Object.assign({},n),{unfiltered:d2(n.unfiltered,e)}):n}const wh=n=&gt;{var e;return{nodes:{open:{filtered:{},unfiltered:(e=n==null?void 0:n.initialOpenState)!==null&amp;&amp;e!==void 0?e:{}},focus:{id:null,treeFocused:!1},edit:{id:null},drag:{id:null,selectedIds:[],destinationParentId:null,destinationIndex:null},selection:{ids:new Set,anchor:null,mostRecent:null}},dnd:{cursor:{type:&quot;none&quot;},dragId:null,dragIds:[],parentId:null,index:-1}}},Hs={clear:()=&gt;({type:&quot;SELECTION_CLEAR&quot;}),only:n=&gt;({type:&quot;SELECTION_ONLY&quot;,id:yc(n)}),add:n=&gt;({type:&quot;SELECTION_ADD&quot;,ids:(Array.isArray(n)?n:[n]).map(yc)}),remove:n=&gt;({type:&quot;SELECTION_REMOVE&quot;,ids:(Array.isArray(n)?n:[n]).map(yc)}),set:n=&gt;Object.assign({type:&quot;SELECTION_SET&quot;},n),mostRecent:n=&gt;({type:&quot;SELECTION_MOST_RECENT&quot;,id:n===null?null:yc(n)}),anchor:n=&gt;({type:&quot;SELECTION_ANCHOR&quot;,id:n===null?null:yc(n)})};function rJ(n=wh().nodes.selection,e){const t=n.ids;switch(e.type){case&quot;SELECTION_CLEAR&quot;:return Object.assign(Object.assign({},n),{ids:new Set});case&quot;SELECTION_ONLY&quot;:return Object.assign(Object.assign({},n),{ids:new Set([e.id])});case&quot;SELECTION_ADD&quot;:return e.ids.length===0?n:(e.ids.forEach(i=&gt;t.add(i)),Object.assign(Object.assign({},n),{ids:new Set(t)}));case&quot;SELECTION_REMOVE&quot;:return e.ids.length===0?n:(e.ids.forEach(i=&gt;t.delete(i)),Object.assign(Object.assign({},n),{ids:new Set(t)}));case&quot;SELECTION_SET&quot;:return Object.assign(Object.assign({},n),{ids:e.ids,mostRecent:e.mostRecent,anchor:e.anchor});case&quot;SELECTION_MOST_RECENT&quot;:return Object.assign(Object.assign({},n),{mostRecent:e.id});case&quot;SELECTION_ANCHOR&quot;:return Object.assign(Object.assign({},n),{anchor:e.id});default:return n}}const Eh={cursor(n){return{type:&quot;DND_CURSOR&quot;,cursor:n}},dragStart(n,e){return{type:&quot;DND_DRAG_START&quot;,id:n,dragIds:e}},dragEnd(){return{type:&quot;DND_DRAG_END&quot;}},hovering(n,e){return{type:&quot;DND_HOVERING&quot;,parentId:n,index:e}}};function sJ(n=wh().dnd,e){switch(e.type){case&quot;DND_CURSOR&quot;:return Object.assign(Object.assign({},n),{cursor:e.cursor});case&quot;DND_DRAG_START&quot;:return Object.assign(Object.assign({},n),{dragId:e.id,dragIds:e.dragIds});case&quot;DND_DRAG_END&quot;:return wh().dnd;case&quot;DND_HOVERING&quot;:return Object.assign(Object.assign({},n),{parentId:e.parentId,index:e.index});default:return n}}const oJ={position:&quot;fixed&quot;,pointerEvents:&quot;none&quot;,zIndex:100,left:0,top:0,width:&quot;100%&quot;,height:&quot;100%&quot;},aJ=n=&gt;{if(!n)return{display:&quot;none&quot;};const{x:e,y:t}=n;return{transform:`translate(${e}px, ${t}px)`}},lJ=n=&gt;{if(!n)return{display:&quot;none&quot;};const{x:e,y:t}=n;return{transform:`translate(${e+10}px, ${t+10}px)`}};function r3({offset:n,mouse:e,id:t,dragIds:i,isDragging:r}){return I.jsxs(cJ,{isDragging:r,children:[I.jsx(uJ,{offset:n,children:I.jsx(fJ,{id:t,dragIds:i})}),I.jsx(hJ,{mouse:e,count:i.length})]})}const cJ=re.memo(function(e){return e.isDragging?I.jsx(&quot;div&quot;,{style:oJ,children:e.children}):null});function uJ(n){return I.jsx(&quot;div&quot;,{className:&quot;row preview&quot;,style:aJ(n.offset),children:n.children})}function hJ(n){const{count:e,mouse:t}=n;return e&gt;1?I.jsx(&quot;div&quot;,{className:&quot;selected-count&quot;,style:lJ(t),children:e}):null}const fJ=re.memo(function(e){const t=ls(),i=t.get(e.id);return i?I.jsx(t.renderNode,{preview:!0,node:i,style:{paddingLeft:i.level*t.indent,opacity:.2,background:&quot;transparent&quot;},tree:t}):null});function JS(){return JS=Object.assign?Object.assign.bind():function(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&amp;&amp;(n[i]=t[i])}return n},JS.apply(null,arguments)}function p2(n){if(n===void 0)throw new ReferenceError(&quot;this hasn&#x27;t been initialised - super() hasn&#x27;t been called&quot;);return n}function QS(n,e){return QS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},QS(n,e)}function dJ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,QS(n,e)}var m2=Number.isNaN||function(e){return typeof e==&quot;number&quot;&amp;&amp;e!==e};function pJ(n,e){return!!(n===e||m2(n)&amp;&amp;m2(e))}function mJ(n,e){if(n.length!==e.length)return!1;for(var t=0;t&lt;n.length;t++)if(!pJ(n[t],e[t]))return!1;return!0}function Xx(n,e){e===void 0&amp;&amp;(e=mJ);var t,i=[],r,s=!1;function o(){for(var l=[],u=0;u&lt;arguments.length;u++)l[u]=arguments[u];return s&amp;&amp;t===this&amp;&amp;e(l,i)||(r=n.apply(this,l),s=!0,t=this,i=l),r}return o}var gJ=typeof performance==&quot;object&quot;&amp;&amp;typeof performance.now==&quot;function&quot;,g2=gJ?function(){return performance.now()}:function(){return Date.now()};function y2(n){cancelAnimationFrame(n.id)}function yJ(n,e){var t=g2();function i(){g2()-t&gt;=e?n.call(null):r.id=requestAnimationFrame(i)}var r={id:requestAnimationFrame(i)};return r}var qx=-1;function _2(n){if(n===void 0&amp;&amp;(n=!1),qx===-1||n){var e=document.createElement(&quot;div&quot;),t=e.style;t.width=&quot;50px&quot;,t.height=&quot;50px&quot;,t.overflow=&quot;scroll&quot;,document.body.appendChild(e),qx=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return qx}var Xu=null;function v2(n){if(n===void 0&amp;&amp;(n=!1),Xu===null||n){var e=document.createElement(&quot;div&quot;),t=e.style;t.width=&quot;50px&quot;,t.height=&quot;50px&quot;,t.overflow=&quot;scroll&quot;,t.direction=&quot;rtl&quot;;var i=document.createElement(&quot;div&quot;),r=i.style;return r.width=&quot;100px&quot;,r.height=&quot;100px&quot;,e.appendChild(i),document.body.appendChild(e),e.scrollLeft&gt;0?Xu=&quot;positive-descending&quot;:(e.scrollLeft=1,e.scrollLeft===0?Xu=&quot;negative&quot;:Xu=&quot;positive-ascending&quot;),document.body.removeChild(e),Xu}return Xu}var _J=150,vJ=function(e,t){return e};function bJ(n){var e,t=n.getItemOffset,i=n.getEstimatedTotalSize,r=n.getItemSize,s=n.getOffsetForIndexAndAlignment,o=n.getStartIndexForOffset,l=n.getStopIndexForStartIndex,u=n.initInstanceProps,h=n.shouldResetStyleCacheOnItemSizeChange,f=n.validateProps;return e=function(p){dJ(m,p);function m(v){var x;return x=p.call(this,v)||this,x._instanceProps=u(x.props,p2(x)),x._outerRef=void 0,x._resetIsScrollingTimeoutId=null,x.state={instance:p2(x),isScrolling:!1,scrollDirection:&quot;forward&quot;,scrollOffset:typeof x.props.initialScrollOffset==&quot;number&quot;?x.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},x._callOnItemsRendered=void 0,x._callOnItemsRendered=Xx(function(b,_,T,w){return x.props.onItemsRendered({overscanStartIndex:b,overscanStopIndex:_,visibleStartIndex:T,visibleStopIndex:w})}),x._callOnScroll=void 0,x._callOnScroll=Xx(function(b,_,T){return x.props.onScroll({scrollDirection:b,scrollOffset:_,scrollUpdateWasRequested:T})}),x._getItemStyle=void 0,x._getItemStyle=function(b){var _=x.props,T=_.direction,w=_.itemSize,S=_.layout,C=x._getItemStyleCache(h&amp;&amp;w,h&amp;&amp;S,h&amp;&amp;T),O;if(C.hasOwnProperty(b))O=C[b];else{var M=t(x.props,b,x._instanceProps),N=r(x.props,b,x._instanceProps),R=T===&quot;horizontal&quot;||S===&quot;horizontal&quot;,D=T===&quot;rtl&quot;,L=R?M:0;C[b]=O={position:&quot;absolute&quot;,left:D?void 0:L,right:D?L:void 0,top:R?0:M,height:R?&quot;100%&quot;:N,width:R?N:&quot;100%&quot;}}return O},x._getItemStyleCache=void 0,x._getItemStyleCache=Xx(function(b,_,T){return{}}),x._onScrollHorizontal=function(b){var _=b.currentTarget,T=_.clientWidth,w=_.scrollLeft,S=_.scrollWidth;x.setState(function(C){if(C.scrollOffset===w)return null;var O=x.props.direction,M=w;if(O===&quot;rtl&quot;)switch(v2()){case&quot;negative&quot;:M=-w;break;case&quot;positive-descending&quot;:M=S-T-w;break}return M=Math.max(0,Math.min(M,S-T)),{isScrolling:!0,scrollDirection:C.scrollOffset&lt;M?&quot;forward&quot;:&quot;backward&quot;,scrollOffset:M,scrollUpdateWasRequested:!1}},x._resetIsScrollingDebounced)},x._onScrollVertical=function(b){var _=b.currentTarget,T=_.clientHeight,w=_.scrollHeight,S=_.scrollTop;x.setState(function(C){if(C.scrollOffset===S)return null;var O=Math.max(0,Math.min(S,w-T));return{isScrolling:!0,scrollDirection:C.scrollOffset&lt;O?&quot;forward&quot;:&quot;backward&quot;,scrollOffset:O,scrollUpdateWasRequested:!1}},x._resetIsScrollingDebounced)},x._outerRefSetter=function(b){var _=x.props.outerRef;x._outerRef=b,typeof _==&quot;function&quot;?_(b):_!=null&amp;&amp;typeof _==&quot;object&quot;&amp;&amp;_.hasOwnProperty(&quot;current&quot;)&amp;&amp;(_.current=b)},x._resetIsScrollingDebounced=function(){x._resetIsScrollingTimeoutId!==null&amp;&amp;y2(x._resetIsScrollingTimeoutId),x._resetIsScrollingTimeoutId=yJ(x._resetIsScrolling,_J)},x._resetIsScrolling=function(){x._resetIsScrollingTimeoutId=null,x.setState({isScrolling:!1},function(){x._getItemStyleCache(-1,null)})},x}m.getDerivedStateFromProps=function(x,b){return xJ(x,b),f(x),null};var g=m.prototype;return g.scrollTo=function(x){x=Math.max(0,x),this.setState(function(b){return b.scrollOffset===x?null:{scrollDirection:b.scrollOffset&lt;x?&quot;forward&quot;:&quot;backward&quot;,scrollOffset:x,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},g.scrollToItem=function(x,b){b===void 0&amp;&amp;(b=&quot;auto&quot;);var _=this.props,T=_.itemCount,w=_.layout,S=this.state.scrollOffset;x=Math.max(0,Math.min(x,T-1));var C=0;if(this._outerRef){var O=this._outerRef;w===&quot;vertical&quot;?C=O.scrollWidth&gt;O.clientWidth?_2():0:C=O.scrollHeight&gt;O.clientHeight?_2():0}this.scrollTo(s(this.props,x,b,S,this._instanceProps,C))},g.componentDidMount=function(){var x=this.props,b=x.direction,_=x.initialScrollOffset,T=x.layout;if(typeof _==&quot;number&quot;&amp;&amp;this._outerRef!=null){var w=this._outerRef;b===&quot;horizontal&quot;||T===&quot;horizontal&quot;?w.scrollLeft=_:w.scrollTop=_}this._callPropsCallbacks()},g.componentDidUpdate=function(){var x=this.props,b=x.direction,_=x.layout,T=this.state,w=T.scrollOffset,S=T.scrollUpdateWasRequested;if(S&amp;&amp;this._outerRef!=null){var C=this._outerRef;if(b===&quot;horizontal&quot;||_===&quot;horizontal&quot;)if(b===&quot;rtl&quot;)switch(v2()){case&quot;negative&quot;:C.scrollLeft=-w;break;case&quot;positive-ascending&quot;:C.scrollLeft=w;break;default:var O=C.clientWidth,M=C.scrollWidth;C.scrollLeft=M-O-w;break}else C.scrollLeft=w;else C.scrollTop=w}this._callPropsCallbacks()},g.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&amp;&amp;y2(this._resetIsScrollingTimeoutId)},g.render=function(){var x=this.props,b=x.children,_=x.className,T=x.direction,w=x.height,S=x.innerRef,C=x.innerElementType,O=x.innerTagName,M=x.itemCount,N=x.itemData,R=x.itemKey,D=R===void 0?vJ:R,L=x.layout,H=x.outerElementType,q=x.outerTagName,z=x.style,$=x.useIsScrolling,P=x.width,j=this.state.isScrolling,G=T===&quot;horizontal&quot;||L===&quot;horizontal&quot;,ee=G?this._onScrollHorizontal:this._onScrollVertical,F=this._getRangeToRender(),ne=F[0],le=F[1],ce=[];if(M&gt;0)for(var ie=ne;ie&lt;=le;ie++)ce.push(re.createElement(b,{data:N,key:D(ie,N),index:ie,isScrolling:$?j:void 0,style:this._getItemStyle(ie)}));var oe=i(this.props,this._instanceProps);return re.createElement(H||q||&quot;div&quot;,{className:_,onScroll:ee,ref:this._outerRefSetter,style:JS({position:&quot;relative&quot;,height:w,width:P,overflow:&quot;auto&quot;,WebkitOverflowScrolling:&quot;touch&quot;,willChange:&quot;transform&quot;,direction:T},z)},re.createElement(C||O||&quot;div&quot;,{children:ce,ref:S,style:{height:G?&quot;100%&quot;:oe,pointerEvents:j?&quot;none&quot;:void 0,width:G?oe:&quot;100%&quot;}}))},g._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered==&quot;function&quot;){var x=this.props.itemCount;if(x&gt;0){var b=this._getRangeToRender(),_=b[0],T=b[1],w=b[2],S=b[3];this._callOnItemsRendered(_,T,w,S)}}if(typeof this.props.onScroll==&quot;function&quot;){var C=this.state,O=C.scrollDirection,M=C.scrollOffset,N=C.scrollUpdateWasRequested;this._callOnScroll(O,M,N)}},g._getRangeToRender=function(){var x=this.props,b=x.itemCount,_=x.overscanCount,T=this.state,w=T.isScrolling,S=T.scrollDirection,C=T.scrollOffset;if(b===0)return[0,0,0,0];var O=o(this.props,C,this._instanceProps),M=l(this.props,O,C,this._instanceProps),N=!w||S===&quot;backward&quot;?Math.max(1,_):1,R=!w||S===&quot;forward&quot;?Math.max(1,_):1;return[Math.max(0,O-N),Math.max(0,Math.min(b-1,M+R)),O,M]},m}(re.PureComponent),e.defaultProps={direction:&quot;ltr&quot;,itemData:void 0,layout:&quot;vertical&quot;,overscanCount:2,useIsScrolling:!1},e}var xJ=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},SJ=bJ({getItemOffset:function(e,t){var i=e.itemSize;return t*i},getItemSize:function(e,t){var i=e.itemSize;return i},getEstimatedTotalSize:function(e){var t=e.itemCount,i=e.itemSize;return i*t},getOffsetForIndexAndAlignment:function(e,t,i,r,s,o){var l=e.direction,u=e.height,h=e.itemCount,f=e.itemSize,p=e.layout,m=e.width,g=l===&quot;horizontal&quot;||p===&quot;horizontal&quot;,v=g?m:u,x=Math.max(0,h*f-v),b=Math.min(x,t*f),_=Math.max(0,t*f-v+f+o);switch(i===&quot;smart&quot;&amp;&amp;(r&gt;=_-v&amp;&amp;r&lt;=b+v?i=&quot;auto&quot;:i=&quot;center&quot;),i){case&quot;start&quot;:return b;case&quot;end&quot;:return _;case&quot;center&quot;:{var T=Math.round(_+(b-_)/2);return T&lt;Math.ceil(v/2)?0:T&gt;x+Math.floor(v/2)?x:T}case&quot;auto&quot;:default:return r&gt;=_&amp;&amp;r&lt;=b?r:r&lt;_?_:b}},getStartIndexForOffset:function(e,t){var i=e.itemCount,r=e.itemSize;return Math.max(0,Math.min(i-1,Math.floor(t/r)))},getStopIndexForStartIndex:function(e,t,i){var r=e.direction,s=e.height,o=e.itemCount,l=e.itemSize,u=e.layout,h=e.width,f=r===&quot;horizontal&quot;||u===&quot;horizontal&quot;,p=t*l,m=f?h:s,g=Math.ceil((m+i-p)/l);return Math.max(0,Math.min(o-1,t+g-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function wJ(){var n,e;const t=ls(),r=BZ().cursor;if(!r||r.type!==&quot;line&quot;)return null;const s=t.indent,o=t.rowHeight*r.index+((e=(n=t.props.padding)!==null&amp;&amp;n!==void 0?n:t.props.paddingTop)!==null&amp;&amp;e!==void 0?e:0),l=s*r.level,u=t.renderCursor;return I.jsx(u,{top:o,left:l,indent:s})}var EJ=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;e.indexOf(i)&lt;0&amp;&amp;(t[i]=n[i]);if(n!=null&amp;&amp;typeof Object.getOwnPropertySymbols==&quot;function&quot;)for(var r=0,i=Object.getOwnPropertySymbols(n);r&lt;i.length;r++)e.indexOf(i[r])&lt;0&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i[r])&amp;&amp;(t[i[r]]=n[i[r]]);return t};const TJ=re.forwardRef(function(e,t){const{children:i}=e,r=EJ(e,[&quot;children&quot;]),s=ls();return I.jsxs(&quot;div&quot;,Object.assign({ref:t},r,{onClick:o=&gt;{o.currentTarget===o.target&amp;&amp;s.deselectAll()},children:[I.jsx(MJ,{}),i]}))}),MJ=()=&gt;{const n=ls();return I.jsx(&quot;div&quot;,{style:{height:n.visibleNodes.length*n.rowHeight,width:&quot;100%&quot;,position:&quot;absolute&quot;,left:&quot;0&quot;,right:&quot;0&quot;},children:I.jsx(wJ,{})})};var AJ=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;e.indexOf(i)&lt;0&amp;&amp;(t[i]=n[i]);if(n!=null&amp;&amp;typeof Object.getOwnPropertySymbols==&quot;function&quot;)for(var r=0,i=Object.getOwnPropertySymbols(n);r&lt;i.length;r++)e.indexOf(i[r])&lt;0&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i[r])&amp;&amp;(t[i[r]]=n[i[r]]);return t};const CJ=re.forwardRef(function(e,t){var i,r,s,o,{style:l}=e,u=AJ(e,[&quot;style&quot;]);const h=ls(),f=(r=(i=h.props.padding)!==null&amp;&amp;i!==void 0?i:h.props.paddingTop)!==null&amp;&amp;r!==void 0?r:0,p=(o=(s=h.props.padding)!==null&amp;&amp;s!==void 0?s:h.props.paddingBottom)!==null&amp;&amp;o!==void 0?o:0;return I.jsx(&quot;div&quot;,Object.assign({ref:t,style:Object.assign(Object.assign({},l),{height:`${parseFloat(l.height)+f+p}px`})},u))});var s3=re.createContext({dragDropManager:void 0}),ws;(function(n){n.SOURCE=&quot;SOURCE&quot;,n.TARGET=&quot;TARGET&quot;})(ws||(ws={}));function Xt(n,e){for(var t=arguments.length,i=new Array(t&gt;2?t-2:0),r=2;r&lt;t;r++)i[r-2]=arguments[r];if(!n){var s;if(e===void 0)s=new Error(&quot;Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.&quot;);else{var o=0;s=new Error(e.replace(/%s/g,function(){return i[o++]})),s.name=&quot;Invariant Violation&quot;}throw s.framesToPop=1,s}}var p1=&quot;dnd-core/INIT_COORDS&quot;,h_=&quot;dnd-core/BEGIN_DRAG&quot;,m1=&quot;dnd-core/PUBLISH_DRAG_SOURCE&quot;,f_=&quot;dnd-core/HOVER&quot;,d_=&quot;dnd-core/DROP&quot;,p_=&quot;dnd-core/END_DRAG&quot;;function b2(n,e){return{type:p1,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}function Hg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?Hg=function(t){return typeof t}:Hg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},Hg(n)}function RJ(n,e,t){return e.split(&quot;.&quot;).reduce(function(i,r){return i&amp;&amp;i[r]?i[r]:t||null},n)}function OJ(n,e){return n.filter(function(t){return t!==e})}function o3(n){return Hg(n)===&quot;object&quot;}function NJ(n,e){var t=new Map,i=function(o){t.set(o,t.has(o)?t.get(o)+1:1)};n.forEach(i),e.forEach(i);var r=[];return t.forEach(function(s,o){s===1&amp;&amp;r.push(o)}),r}function DJ(n,e){return n.filter(function(t){return e.indexOf(t)&gt;-1})}var IJ={type:p1,payload:{clientOffset:null,sourceClientOffset:null}};function PJ(n){return function(){var t=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:[],i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{publishSource:!0},r=i.publishSource,s=r===void 0?!0:r,o=i.clientOffset,l=i.getSourceClientOffset,u=n.getMonitor(),h=n.getRegistry();n.dispatch(b2(o)),LJ(t,u,h);var f=FJ(t,u);if(f===null){n.dispatch(IJ);return}var p=null;if(o){if(!l)throw new Error(&quot;getSourceClientOffset must be defined&quot;);UJ(l),p=l(f)}n.dispatch(b2(o,p));var m=h.getSource(f),g=m.beginDrag(u,f);if(g!=null){kJ(g),h.pinSource(f);var v=h.getSourceType(f);return{type:h_,payload:{itemType:v,item:g,sourceId:f,clientOffset:o||null,sourceClientOffset:p||null,isSourcePublic:!!s}}}}}function LJ(n,e,t){Xt(!e.isDragging(),&quot;Cannot call beginDrag while dragging.&quot;),n.forEach(function(i){Xt(t.getSource(i),&quot;Expected sourceIds to be registered.&quot;)})}function UJ(n){Xt(typeof n==&quot;function&quot;,&quot;When clientOffset is provided, getSourceClientOffset must be a function.&quot;)}function kJ(n){Xt(o3(n),&quot;Item must be an object.&quot;)}function FJ(n,e){for(var t=null,i=n.length-1;i&gt;=0;i--)if(e.canDragSource(n[i])){t=n[i];break}return t}function zJ(n){return function(){var t=n.getMonitor();if(t.isDragging())return{type:m1}}}function ew(n,e){return e===null?n===null:Array.isArray(n)?n.some(function(t){return t===e}):n===e}function BJ(n){return function(t){var i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{},r=i.clientOffset;HJ(t);var s=t.slice(0),o=n.getMonitor(),l=n.getRegistry();VJ(s,o,l);var u=o.getItemType();return GJ(s,l,u),jJ(s,o,l),{type:f_,payload:{targetIds:s,clientOffset:r||null}}}}function HJ(n){Xt(Array.isArray(n),&quot;Expected targetIds to be an array.&quot;)}function VJ(n,e,t){Xt(e.isDragging(),&quot;Cannot call hover while not dragging.&quot;),Xt(!e.didDrop(),&quot;Cannot call hover after drop.&quot;);for(var i=0;i&lt;n.length;i++){var r=n[i];Xt(n.lastIndexOf(r)===i,&quot;Expected targetIds to be unique in the passed array.&quot;);var s=t.getTarget(r);Xt(s,&quot;Expected targetIds to be registered.&quot;)}}function GJ(n,e,t){for(var i=n.length-1;i&gt;=0;i--){var r=n[i],s=e.getTargetType(r);ew(s,t)||n.splice(i,1)}}function jJ(n,e,t){n.forEach(function(i){var r=t.getTarget(i);r.hover(e,i)})}function x2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function S2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?x2(Object(t),!0).forEach(function(i){WJ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function WJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XJ(n){return function(){var t=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{},i=n.getMonitor(),r=n.getRegistry();qJ(i);var s=$J(i);s.forEach(function(o,l){var u=YJ(o,l,r,i),h={type:d_,payload:{dropResult:S2(S2({},t),u)}};n.dispatch(h)})}}function qJ(n){Xt(n.isDragging(),&quot;Cannot call drop while not dragging.&quot;),Xt(!n.didDrop(),&quot;Cannot call drop twice during one drag operation.&quot;)}function YJ(n,e,t,i){var r=t.getTarget(n),s=r?r.drop(i,n):void 0;return KJ(s),typeof s&gt;&quot;u&quot;&amp;&amp;(s=e===0?{}:i.getDropResult()),s}function KJ(n){Xt(typeof n&gt;&quot;u&quot;||o3(n),&quot;Drop result must either be an object or undefined.&quot;)}function $J(n){var e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function ZJ(n){return function(){var t=n.getMonitor(),i=n.getRegistry();JJ(t);var r=t.getSourceId();if(r!=null){var s=i.getSource(r,!0);s.endDrag(t,r),i.unpinSource()}return{type:p_}}}function JJ(n){Xt(n.isDragging(),&quot;Cannot call endDrag while not dragging.&quot;)}function QJ(n){return{beginDrag:PJ(n),publishDragSource:zJ(n),hover:BJ(n),drop:XJ(n),endDrag:ZJ(n)}}function eQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function tQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function nQ(n,e,t){return e&amp;&amp;tQ(n.prototype,e),n}function $f(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var iQ=function(){function n(e,t){var i=this;eQ(this,n),$f(this,&quot;store&quot;,void 0),$f(this,&quot;monitor&quot;,void 0),$f(this,&quot;backend&quot;,void 0),$f(this,&quot;isSetUp&quot;,!1),$f(this,&quot;handleRefCountChange&quot;,function(){var r=i.store.getState().refCount&gt;0;i.backend&amp;&amp;(r&amp;&amp;!i.isSetUp?(i.backend.setup(),i.isSetUp=!0):!r&amp;&amp;i.isSetUp&amp;&amp;(i.backend.teardown(),i.isSetUp=!1))}),this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}return nQ(n,[{key:&quot;receiveBackend&quot;,value:function(t){this.backend=t}},{key:&quot;getMonitor&quot;,value:function(){return this.monitor}},{key:&quot;getBackend&quot;,value:function(){return this.backend}},{key:&quot;getRegistry&quot;,value:function(){return this.monitor.registry}},{key:&quot;getActions&quot;,value:function(){var t=this,i=this.store.dispatch;function r(o){return function(){for(var l=arguments.length,u=new Array(l),h=0;h&lt;l;h++)u[h]=arguments[h];var f=o.apply(t,u);typeof f&lt;&quot;u&quot;&amp;&amp;i(f)}}var s=QJ(this);return Object.keys(s).reduce(function(o,l){var u=s[l];return o[l]=r(u),o},{})}},{key:&quot;dispatch&quot;,value:function(t){this.store.dispatch(t)}}]),n}();function bs(n){return&quot;Minified Redux error #&quot;+n+&quot;; visit https://redux.js.org/Errors?code=&quot;+n+&quot; for the full message or use the non-minified dev environment for full errors. &quot;}var w2=function(){return typeof Symbol==&quot;function&quot;&amp;&amp;Symbol.observable||&quot;@@observable&quot;}(),E2=function(){return Math.random().toString(36).substring(7).split(&quot;&quot;).join(&quot;.&quot;)},T2={INIT:&quot;@@redux/INIT&quot;+E2(),REPLACE:&quot;@@redux/REPLACE&quot;+E2()};function rQ(n){if(typeof n!=&quot;object&quot;||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function a3(n,e,t){var i;if(typeof e==&quot;function&quot;&amp;&amp;typeof t==&quot;function&quot;||typeof t==&quot;function&quot;&amp;&amp;typeof arguments[3]==&quot;function&quot;)throw new Error(bs(0));if(typeof e==&quot;function&quot;&amp;&amp;typeof t&gt;&quot;u&quot;&amp;&amp;(t=e,e=void 0),typeof t&lt;&quot;u&quot;){if(typeof t!=&quot;function&quot;)throw new Error(bs(1));return t(a3)(n,e)}if(typeof n!=&quot;function&quot;)throw new Error(bs(2));var r=n,s=e,o=[],l=o,u=!1;function h(){l===o&amp;&amp;(l=o.slice())}function f(){if(u)throw new Error(bs(3));return s}function p(x){if(typeof x!=&quot;function&quot;)throw new Error(bs(4));if(u)throw new Error(bs(5));var b=!0;return h(),l.push(x),function(){if(b){if(u)throw new Error(bs(6));b=!1,h();var T=l.indexOf(x);l.splice(T,1),o=null}}}function m(x){if(!rQ(x))throw new Error(bs(7));if(typeof x.type&gt;&quot;u&quot;)throw new Error(bs(8));if(u)throw new Error(bs(9));try{u=!0,s=r(s,x)}finally{u=!1}for(var b=o=l,_=0;_&lt;b.length;_++){var T=b[_];T()}return x}function g(x){if(typeof x!=&quot;function&quot;)throw new Error(bs(10));r=x,m({type:T2.REPLACE})}function v(){var x,b=p;return x={subscribe:function(T){if(typeof T!=&quot;object&quot;||T===null)throw new Error(bs(11));function w(){T.next&amp;&amp;T.next(f())}w();var S=b(w);return{unsubscribe:S}}},x[w2]=function(){return this},x}return m({type:T2.INIT}),i={dispatch:m,subscribe:p,getState:f,replaceReducer:g},i[w2]=v,i}var sQ=function(e,t){return e===t};function oQ(n,e){return!n&amp;&amp;!e?!0:!n||!e?!1:n.x===e.x&amp;&amp;n.y===e.y}function aQ(n,e){var t=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:sQ;if(n.length!==e.length)return!1;for(var i=0;i&lt;n.length;++i)if(!t(n[i],e[i]))return!1;return!0}function M2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function A2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?M2(Object(t),!0).forEach(function(i){lQ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function lQ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var C2={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function cQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:C2,e=arguments.length&gt;1?arguments[1]:void 0,t=e.payload;switch(e.type){case p1:case h_:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case f_:return oQ(n.clientOffset,t.clientOffset)?n:A2(A2({},n),{},{clientOffset:t.clientOffset});case p_:case d_:return C2;default:return n}}var g1=&quot;dnd-core/ADD_SOURCE&quot;,y1=&quot;dnd-core/ADD_TARGET&quot;,_1=&quot;dnd-core/REMOVE_SOURCE&quot;,m_=&quot;dnd-core/REMOVE_TARGET&quot;;function uQ(n){return{type:g1,payload:{sourceId:n}}}function hQ(n){return{type:y1,payload:{targetId:n}}}function fQ(n){return{type:_1,payload:{sourceId:n}}}function dQ(n){return{type:m_,payload:{targetId:n}}}function R2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function xs(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?R2(Object(t),!0).forEach(function(i){pQ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):R2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function pQ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var mQ={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function gQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:mQ,e=arguments.length&gt;1?arguments[1]:void 0,t=e.payload;switch(e.type){case h_:return xs(xs({},n),{},{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case m1:return xs(xs({},n),{},{isSourcePublic:!0});case f_:return xs(xs({},n),{},{targetIds:t.targetIds});case m_:return n.targetIds.indexOf(t.targetId)===-1?n:xs(xs({},n),{},{targetIds:OJ(n.targetIds,t.targetId)});case d_:return xs(xs({},n),{},{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case p_:return xs(xs({},n),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function yQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:0,e=arguments.length&gt;1?arguments[1]:void 0;switch(e.type){case g1:case y1:return n+1;case _1:case m_:return n-1;default:return n}}var ty=[],v1=[];ty.__IS_NONE__=!0;v1.__IS_ALL__=!0;function _Q(n,e){if(n===ty)return!1;if(n===v1||typeof e&gt;&quot;u&quot;)return!0;var t=DJ(e,n);return t.length&gt;0}function vQ(){var n=arguments.length&gt;1?arguments[1]:void 0;switch(n.type){case f_:break;case g1:case y1:case m_:case _1:return ty;case h_:case m1:case p_:case d_:default:return v1}var e=n.payload,t=e.targetIds,i=t===void 0?[]:t,r=e.prevTargetIds,s=r===void 0?[]:r,o=NJ(i,s),l=o.length&gt;0||!aQ(i,s);if(!l)return ty;var u=s[s.length-1],h=i[i.length-1];return u!==h&amp;&amp;(u&amp;&amp;o.push(u),h&amp;&amp;o.push(h)),o}function bQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:0;return n+1}function O2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function N2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O2(Object(t),!0).forEach(function(i){xQ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function xQ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{},e=arguments.length&gt;1?arguments[1]:void 0;return{dirtyHandlerIds:vQ(n.dirtyHandlerIds,{type:e.type,payload:N2(N2({},e.payload),{},{prevTargetIds:RJ(n,&quot;dragOperation.targetIds&quot;,[])})}),dragOffset:cQ(n.dragOffset,e),refCount:yQ(n.refCount,e),dragOperation:gQ(n.dragOperation,e),stateId:bQ(n.stateId)}}function wQ(n,e){return{x:n.x+e.x,y:n.y+e.y}}function l3(n,e){return{x:n.x-e.x,y:n.y-e.y}}function EQ(n){var e=n.clientOffset,t=n.initialClientOffset,i=n.initialSourceClientOffset;return!e||!t||!i?null:l3(wQ(e,i),t)}function TQ(n){var e=n.clientOffset,t=n.initialClientOffset;return!e||!t?null:l3(e,t)}function MQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function AQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function CQ(n,e,t){return e&amp;&amp;AQ(n.prototype,e),n}function D2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var RQ=function(){function n(e,t){MQ(this,n),D2(this,&quot;store&quot;,void 0),D2(this,&quot;registry&quot;,void 0),this.store=e,this.registry=t}return CQ(n,[{key:&quot;subscribeToStateChange&quot;,value:function(t){var i=this,r=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},s=r.handlerIds;Xt(typeof t==&quot;function&quot;,&quot;listener must be a function.&quot;),Xt(typeof s&gt;&quot;u&quot;||Array.isArray(s),&quot;handlerIds, when specified, must be an array of strings.&quot;);var o=this.store.getState().stateId,l=function(){var h=i.store.getState(),f=h.stateId;try{var p=f===o||f===o+1&amp;&amp;!_Q(h.dirtyHandlerIds,s);p||t()}finally{o=f}};return this.store.subscribe(l)}},{key:&quot;subscribeToOffsetChange&quot;,value:function(t){var i=this;Xt(typeof t==&quot;function&quot;,&quot;listener must be a function.&quot;);var r=this.store.getState().dragOffset,s=function(){var l=i.store.getState().dragOffset;l!==r&amp;&amp;(r=l,t())};return this.store.subscribe(s)}},{key:&quot;canDragSource&quot;,value:function(t){if(!t)return!1;var i=this.registry.getSource(t);return Xt(i,&quot;Expected to find a valid source. sourceId=&quot;.concat(t)),this.isDragging()?!1:i.canDrag(this,t)}},{key:&quot;canDropOnTarget&quot;,value:function(t){if(!t)return!1;var i=this.registry.getTarget(t);if(Xt(i,&quot;Expected to find a valid target. targetId=&quot;.concat(t)),!this.isDragging()||this.didDrop())return!1;var r=this.registry.getTargetType(t),s=this.getItemType();return ew(r,s)&amp;&amp;i.canDrop(this,t)}},{key:&quot;isDragging&quot;,value:function(){return!!this.getItemType()}},{key:&quot;isDraggingSource&quot;,value:function(t){if(!t)return!1;var i=this.registry.getSource(t,!0);if(Xt(i,&quot;Expected to find a valid source. sourceId=&quot;.concat(t)),!this.isDragging()||!this.isSourcePublic())return!1;var r=this.registry.getSourceType(t),s=this.getItemType();return r!==s?!1:i.isDragging(this,t)}},{key:&quot;isOverTarget&quot;,value:function(t){var i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!t)return!1;var r=i.shallow;if(!this.isDragging())return!1;var s=this.registry.getTargetType(t),o=this.getItemType();if(o&amp;&amp;!ew(s,o))return!1;var l=this.getTargetIds();if(!l.length)return!1;var u=l.indexOf(t);return r?u===l.length-1:u&gt;-1}},{key:&quot;getItemType&quot;,value:function(){return this.store.getState().dragOperation.itemType}},{key:&quot;getItem&quot;,value:function(){return this.store.getState().dragOperation.item}},{key:&quot;getSourceId&quot;,value:function(){return this.store.getState().dragOperation.sourceId}},{key:&quot;getTargetIds&quot;,value:function(){return this.store.getState().dragOperation.targetIds}},{key:&quot;getDropResult&quot;,value:function(){return this.store.getState().dragOperation.dropResult}},{key:&quot;didDrop&quot;,value:function(){return this.store.getState().dragOperation.didDrop}},{key:&quot;isSourcePublic&quot;,value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:&quot;getInitialClientOffset&quot;,value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:&quot;getInitialSourceClientOffset&quot;,value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:&quot;getClientOffset&quot;,value:function(){return this.store.getState().dragOffset.clientOffset}},{key:&quot;getSourceClientOffset&quot;,value:function(){return EQ(this.store.getState().dragOffset)}},{key:&quot;getDifferenceFromInitialOffset&quot;,value:function(){return TQ(this.store.getState().dragOffset)}}]),n}(),OQ=0;function NQ(){return OQ++}function Vg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?Vg=function(t){return typeof t}:Vg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},Vg(n)}function DQ(n){Xt(typeof n.canDrag==&quot;function&quot;,&quot;Expected canDrag to be a function.&quot;),Xt(typeof n.beginDrag==&quot;function&quot;,&quot;Expected beginDrag to be a function.&quot;),Xt(typeof n.endDrag==&quot;function&quot;,&quot;Expected endDrag to be a function.&quot;)}function IQ(n){Xt(typeof n.canDrop==&quot;function&quot;,&quot;Expected canDrop to be a function.&quot;),Xt(typeof n.hover==&quot;function&quot;,&quot;Expected hover to be a function.&quot;),Xt(typeof n.drop==&quot;function&quot;,&quot;Expected beginDrag to be a function.&quot;)}function tw(n,e){if(e&amp;&amp;Array.isArray(n)){n.forEach(function(t){return tw(t,!1)});return}Xt(typeof n==&quot;string&quot;||Vg(n)===&quot;symbol&quot;,e?&quot;Type can only be a string, a symbol, or an array of either.&quot;:&quot;Type can only be a string or a symbol.&quot;)}const I2=typeof global&lt;&quot;u&quot;?global:self,c3=I2.MutationObserver||I2.WebKitMutationObserver;function u3(n){return function(){const t=setTimeout(r,0),i=setInterval(r,50);function r(){clearTimeout(t),clearInterval(i),n()}}}function PQ(n){let e=1;const t=new c3(n),i=document.createTextNode(&quot;&quot;);return t.observe(i,{characterData:!0}),function(){e=-e,i.data=e}}const LQ=typeof c3==&quot;function&quot;?PQ:u3;class UQ{enqueueTask(e){const{queue:t,requestFlush:i}=this;t.length||(i(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=&gt;{const{queue:e}=this;for(;this.index&lt;e.length;){const t=this.index;if(this.index++,e[t].call(),this.index&gt;this.capacity){for(let i=0,r=e.length-this.index;i&lt;r;i++)e[i]=e[i+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=&gt;{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=LQ(this.flush),this.requestErrorThrow=u3(()=&gt;{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class kQ{call(){try{this.task&amp;&amp;this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class FQ{create(e){const t=this.freeTasks,i=t.length?t.pop():new kQ(this.onError,r=&gt;t[t.length]=r);return i.task=e,i}constructor(e){this.onError=e,this.freeTasks=[]}}const h3=new UQ,zQ=new FQ(h3.registerPendingError);function BQ(n){h3.enqueueTask(zQ.create(n))}function HQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function VQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function GQ(n,e,t){return e&amp;&amp;VQ(n.prototype,e),n}function qu(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jQ(n,e){return YQ(n)||qQ(n,e)||XQ(n,e)||WQ()}function WQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XQ(n,e){if(n){if(typeof n==&quot;string&quot;)return P2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P2(n,e)}}function P2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function qQ(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function YQ(n){if(Array.isArray(n))return n}function KQ(n){var e=NQ().toString();switch(n){case ws.SOURCE:return&quot;S&quot;.concat(e);case ws.TARGET:return&quot;T&quot;.concat(e);default:throw new Error(&quot;Unknown Handler Role: &quot;.concat(n))}}function L2(n){switch(n[0]){case&quot;S&quot;:return ws.SOURCE;case&quot;T&quot;:return ws.TARGET;default:Xt(!1,&quot;Cannot parse handler ID: &quot;.concat(n))}}function U2(n,e){var t=n.entries(),i=!1;do{var r=t.next(),s=r.done,o=jQ(r.value,2),l=o[1];if(l===e)return!0;i=!!s}while(!i);return!1}var $Q=function(){function n(e){HQ(this,n),qu(this,&quot;types&quot;,new Map),qu(this,&quot;dragSources&quot;,new Map),qu(this,&quot;dropTargets&quot;,new Map),qu(this,&quot;pinnedSourceId&quot;,null),qu(this,&quot;pinnedSource&quot;,null),qu(this,&quot;store&quot;,void 0),this.store=e}return GQ(n,[{key:&quot;addSource&quot;,value:function(t,i){tw(t),DQ(i);var r=this.addHandler(ws.SOURCE,t,i);return this.store.dispatch(uQ(r)),r}},{key:&quot;addTarget&quot;,value:function(t,i){tw(t,!0),IQ(i);var r=this.addHandler(ws.TARGET,t,i);return this.store.dispatch(hQ(r)),r}},{key:&quot;containsHandler&quot;,value:function(t){return U2(this.dragSources,t)||U2(this.dropTargets,t)}},{key:&quot;getSource&quot;,value:function(t){var i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:!1;Xt(this.isSourceId(t),&quot;Expected a valid source ID.&quot;);var r=i&amp;&amp;t===this.pinnedSourceId,s=r?this.pinnedSource:this.dragSources.get(t);return s}},{key:&quot;getTarget&quot;,value:function(t){return Xt(this.isTargetId(t),&quot;Expected a valid target ID.&quot;),this.dropTargets.get(t)}},{key:&quot;getSourceType&quot;,value:function(t){return Xt(this.isSourceId(t),&quot;Expected a valid source ID.&quot;),this.types.get(t)}},{key:&quot;getTargetType&quot;,value:function(t){return Xt(this.isTargetId(t),&quot;Expected a valid target ID.&quot;),this.types.get(t)}},{key:&quot;isSourceId&quot;,value:function(t){var i=L2(t);return i===ws.SOURCE}},{key:&quot;isTargetId&quot;,value:function(t){var i=L2(t);return i===ws.TARGET}},{key:&quot;removeSource&quot;,value:function(t){var i=this;Xt(this.getSource(t),&quot;Expected an existing source.&quot;),this.store.dispatch(fQ(t)),BQ(function(){i.dragSources.delete(t),i.types.delete(t)})}},{key:&quot;removeTarget&quot;,value:function(t){Xt(this.getTarget(t),&quot;Expected an existing target.&quot;),this.store.dispatch(dQ(t)),this.dropTargets.delete(t),this.types.delete(t)}},{key:&quot;pinSource&quot;,value:function(t){var i=this.getSource(t);Xt(i,&quot;Expected an existing source.&quot;),this.pinnedSourceId=t,this.pinnedSource=i}},{key:&quot;unpinSource&quot;,value:function(){Xt(this.pinnedSource,&quot;No source is pinned at the time.&quot;),this.pinnedSourceId=null,this.pinnedSource=null}},{key:&quot;addHandler&quot;,value:function(t,i,r){var s=KQ(t);return this.types.set(s,i),t===ws.SOURCE?this.dragSources.set(s,r):t===ws.TARGET&amp;&amp;this.dropTargets.set(s,r),s}}]),n}();function ZQ(n){var e=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:void 0,t=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:{},i=arguments.length&gt;3&amp;&amp;arguments[3]!==void 0?arguments[3]:!1,r=JQ(i),s=new RQ(r,new $Q(r)),o=new iQ(r,s),l=n(o,e,t);return o.receiveBackend(l),o}function JQ(n){var e=typeof window&lt;&quot;u&quot;&amp;&amp;window.__REDUX_DEVTOOLS_EXTENSION__;return a3(SQ,n&amp;&amp;e&amp;&amp;e({name:&quot;dnd-core&quot;,instanceId:&quot;dnd-core&quot;}))}var QQ=[&quot;children&quot;];function eee(n,e){return ree(n)||iee(n,e)||nee(n,e)||tee()}function tee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nee(n,e){if(n){if(typeof n==&quot;string&quot;)return k2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k2(n,e)}}function k2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function iee(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function ree(n){if(Array.isArray(n))return n}function see(n,e){if(n==null)return{};var t=oee(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r&lt;s.length;r++)i=s[r],!(e.indexOf(i)&gt;=0)&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i)&amp;&amp;(t[i]=n[i])}return t}function oee(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s&lt;i.length;s++)r=i[s],!(e.indexOf(r)&gt;=0)&amp;&amp;(t[r]=n[r]);return t}var F2=0,Gg=Symbol.for(&quot;__REACT_DND_CONTEXT_INSTANCE__&quot;),aee=re.memo(function(e){var t=e.children,i=see(e,QQ),r=lee(i),s=eee(r,2),o=s[0],l=s[1];return re.useEffect(function(){if(l){var u=f3();return++F2,function(){--F2===0&amp;&amp;(u[Gg]=null)}}},[]),I.jsx(s3.Provider,Object.assign({value:o},{children:t}),void 0)});function lee(n){if(&quot;manager&quot;in n){var e={dragDropManager:n.manager};return[e,!1]}var t=cee(n.backend,n.context,n.options,n.debugMode),i=!n.context;return[t,i]}function cee(n){var e=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:f3(),t=arguments.length&gt;2?arguments[2]:void 0,i=arguments.length&gt;3?arguments[3]:void 0,r=e;return r[Gg]||(r[Gg]={dragDropManager:ZQ(n,e,t,i)}),r[Gg]}function f3(){return typeof global&lt;&quot;u&quot;?global:window}function uee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function hee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function fee(n,e,t){return e&amp;&amp;hee(n.prototype,e),n}function z2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Yx=!1,Kx=!1,dee=function(){function n(e){uee(this,n),z2(this,&quot;internalMonitor&quot;,void 0),z2(this,&quot;sourceId&quot;,null),this.internalMonitor=e.getMonitor()}return fee(n,[{key:&quot;receiveHandlerId&quot;,value:function(t){this.sourceId=t}},{key:&quot;getHandlerId&quot;,value:function(){return this.sourceId}},{key:&quot;canDrag&quot;,value:function(){Xt(!Yx,&quot;You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor&quot;);try{return Yx=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Yx=!1}}},{key:&quot;isDragging&quot;,value:function(){if(!this.sourceId)return!1;Xt(!Kx,&quot;You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor&quot;);try{return Kx=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Kx=!1}}},{key:&quot;subscribeToStateChange&quot;,value:function(t,i){return this.internalMonitor.subscribeToStateChange(t,i)}},{key:&quot;isDraggingSource&quot;,value:function(t){return this.internalMonitor.isDraggingSource(t)}},{key:&quot;isOverTarget&quot;,value:function(t,i){return this.internalMonitor.isOverTarget(t,i)}},{key:&quot;getTargetIds&quot;,value:function(){return this.internalMonitor.getTargetIds()}},{key:&quot;isSourcePublic&quot;,value:function(){return this.internalMonitor.isSourcePublic()}},{key:&quot;getSourceId&quot;,value:function(){return this.internalMonitor.getSourceId()}},{key:&quot;subscribeToOffsetChange&quot;,value:function(t){return this.internalMonitor.subscribeToOffsetChange(t)}},{key:&quot;canDragSource&quot;,value:function(t){return this.internalMonitor.canDragSource(t)}},{key:&quot;canDropOnTarget&quot;,value:function(t){return this.internalMonitor.canDropOnTarget(t)}},{key:&quot;getItemType&quot;,value:function(){return this.internalMonitor.getItemType()}},{key:&quot;getItem&quot;,value:function(){return this.internalMonitor.getItem()}},{key:&quot;getDropResult&quot;,value:function(){return this.internalMonitor.getDropResult()}},{key:&quot;didDrop&quot;,value:function(){return this.internalMonitor.didDrop()}},{key:&quot;getInitialClientOffset&quot;,value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:&quot;getInitialSourceClientOffset&quot;,value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:&quot;getSourceClientOffset&quot;,value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:&quot;getClientOffset&quot;,value:function(){return this.internalMonitor.getClientOffset()}},{key:&quot;getDifferenceFromInitialOffset&quot;,value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),n}();function pee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function mee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function gee(n,e,t){return e&amp;&amp;mee(n.prototype,e),n}function B2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var $x=!1,yee=function(){function n(e){pee(this,n),B2(this,&quot;internalMonitor&quot;,void 0),B2(this,&quot;targetId&quot;,null),this.internalMonitor=e.getMonitor()}return gee(n,[{key:&quot;receiveHandlerId&quot;,value:function(t){this.targetId=t}},{key:&quot;getHandlerId&quot;,value:function(){return this.targetId}},{key:&quot;subscribeToStateChange&quot;,value:function(t,i){return this.internalMonitor.subscribeToStateChange(t,i)}},{key:&quot;canDrop&quot;,value:function(){if(!this.targetId)return!1;Xt(!$x,&quot;You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor&quot;);try{return $x=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{$x=!1}}},{key:&quot;isOver&quot;,value:function(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}},{key:&quot;getItemType&quot;,value:function(){return this.internalMonitor.getItemType()}},{key:&quot;getItem&quot;,value:function(){return this.internalMonitor.getItem()}},{key:&quot;getDropResult&quot;,value:function(){return this.internalMonitor.getDropResult()}},{key:&quot;didDrop&quot;,value:function(){return this.internalMonitor.didDrop()}},{key:&quot;getInitialClientOffset&quot;,value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:&quot;getInitialSourceClientOffset&quot;,value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:&quot;getSourceClientOffset&quot;,value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:&quot;getClientOffset&quot;,value:function(){return this.internalMonitor.getClientOffset()}},{key:&quot;getDifferenceFromInitialOffset&quot;,value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),n}();function _ee(n){if(typeof n.type!=&quot;string&quot;){var e=n.type.displayName||n.type.name||&quot;the component&quot;;throw new Error(&quot;Only native element nodes can now be passed to React DnD connectors.&quot;+&quot;You can either wrap &quot;.concat(e,&quot; into a &lt;div&gt;, or turn it into a &quot;)+&quot;drag source or a drop target itself.&quot;)}}function vee(n){return function(){var e=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:null,t=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null;if(!re.isValidElement(e)){var i=e;return n(i,t),i}var r=e;_ee(r);var s=t?function(o){return n(o,t)}:n;return bee(r,s)}}function d3(n){var e={};return Object.keys(n).forEach(function(t){var i=n[t];if(t.endsWith(&quot;Ref&quot;))e[t]=n[t];else{var r=vee(i);e[t]=function(){return r}}}),e}function H2(n,e){typeof n==&quot;function&quot;?n(e):n.current=e}function bee(n,e){var t=n.ref;return Xt(typeof t!=&quot;string&quot;,&quot;Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a &lt;span&gt; or &lt;div&gt;. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs&quot;),t?re.cloneElement(n,{ref:function(r){H2(t,r),H2(e,r)}}):re.cloneElement(n,{ref:e})}function jg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?jg=function(t){return typeof t}:jg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},jg(n)}function nw(n){return n!==null&amp;&amp;jg(n)===&quot;object&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(n,&quot;current&quot;)}function iw(n,e,t,i){var r=void 0;if(r!==void 0)return!!r;if(n===e)return!0;if(typeof n!=&quot;object&quot;||!n||typeof e!=&quot;object&quot;||!e)return!1;var s=Object.keys(n),o=Object.keys(e);if(s.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(e),u=0;u&lt;s.length;u++){var h=s[u];if(!l(h))return!1;var f=n[h],p=e[h];if(r=void 0,r===!1||r===void 0&amp;&amp;f!==p)return!1}return!0}function xee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function See(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function wee(n,e,t){return e&amp;&amp;See(n.prototype,e),n}function hr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Eee=function(){function n(e){var t=this;xee(this,n),hr(this,&quot;hooks&quot;,d3({dragSource:function(r,s){t.clearDragSource(),t.dragSourceOptions=s||null,nw(r)?t.dragSourceRef=r:t.dragSourceNode=r,t.reconnectDragSource()},dragPreview:function(r,s){t.clearDragPreview(),t.dragPreviewOptions=s||null,nw(r)?t.dragPreviewRef=r:t.dragPreviewNode=r,t.reconnectDragPreview()}})),hr(this,&quot;handlerId&quot;,null),hr(this,&quot;dragSourceRef&quot;,null),hr(this,&quot;dragSourceNode&quot;,void 0),hr(this,&quot;dragSourceOptionsInternal&quot;,null),hr(this,&quot;dragSourceUnsubscribe&quot;,void 0),hr(this,&quot;dragPreviewRef&quot;,null),hr(this,&quot;dragPreviewNode&quot;,void 0),hr(this,&quot;dragPreviewOptionsInternal&quot;,null),hr(this,&quot;dragPreviewUnsubscribe&quot;,void 0),hr(this,&quot;lastConnectedHandlerId&quot;,null),hr(this,&quot;lastConnectedDragSource&quot;,null),hr(this,&quot;lastConnectedDragSourceOptions&quot;,null),hr(this,&quot;lastConnectedDragPreview&quot;,null),hr(this,&quot;lastConnectedDragPreviewOptions&quot;,null),hr(this,&quot;backend&quot;,void 0),this.backend=e}return wee(n,[{key:&quot;receiveHandlerId&quot;,value:function(t){this.handlerId!==t&amp;&amp;(this.handlerId=t,this.reconnect())}},{key:&quot;connectTarget&quot;,get:function(){return this.dragSource}},{key:&quot;dragSourceOptions&quot;,get:function(){return this.dragSourceOptionsInternal},set:function(t){this.dragSourceOptionsInternal=t}},{key:&quot;dragPreviewOptions&quot;,get:function(){return this.dragPreviewOptionsInternal},set:function(t){this.dragPreviewOptionsInternal=t}},{key:&quot;reconnect&quot;,value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:&quot;reconnectDragSource&quot;,value:function(){var t=this.dragSource,i=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(i&amp;&amp;this.disconnectDragSource(),!!this.handlerId){if(!t){this.lastConnectedDragSource=t;return}i&amp;&amp;(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions))}}},{key:&quot;reconnectDragPreview&quot;,value:function(){var t=this.dragPreview,i=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(i&amp;&amp;this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}i&amp;&amp;(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}},{key:&quot;didHandlerIdChange&quot;,value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:&quot;didConnectedDragSourceChange&quot;,value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:&quot;didConnectedDragPreviewChange&quot;,value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:&quot;didDragSourceOptionsChange&quot;,value:function(){return!iw(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:&quot;didDragPreviewOptionsChange&quot;,value:function(){return!iw(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:&quot;disconnectDragSource&quot;,value:function(){this.dragSourceUnsubscribe&amp;&amp;(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:&quot;disconnectDragPreview&quot;,value:function(){this.dragPreviewUnsubscribe&amp;&amp;(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:&quot;dragSource&quot;,get:function(){return this.dragSourceNode||this.dragSourceRef&amp;&amp;this.dragSourceRef.current}},{key:&quot;dragPreview&quot;,get:function(){return this.dragPreviewNode||this.dragPreviewRef&amp;&amp;this.dragPreviewRef.current}},{key:&quot;clearDragSource&quot;,value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:&quot;clearDragPreview&quot;,value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),n}();function Tee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Mee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Aee(n,e,t){return e&amp;&amp;Mee(n.prototype,e),n}function yo(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Cee=function(){function n(e){var t=this;Tee(this,n),yo(this,&quot;hooks&quot;,d3({dropTarget:function(r,s){t.clearDropTarget(),t.dropTargetOptions=s,nw(r)?t.dropTargetRef=r:t.dropTargetNode=r,t.reconnect()}})),yo(this,&quot;handlerId&quot;,null),yo(this,&quot;dropTargetRef&quot;,null),yo(this,&quot;dropTargetNode&quot;,void 0),yo(this,&quot;dropTargetOptionsInternal&quot;,null),yo(this,&quot;unsubscribeDropTarget&quot;,void 0),yo(this,&quot;lastConnectedHandlerId&quot;,null),yo(this,&quot;lastConnectedDropTarget&quot;,null),yo(this,&quot;lastConnectedDropTargetOptions&quot;,null),yo(this,&quot;backend&quot;,void 0),this.backend=e}return Aee(n,[{key:&quot;connectTarget&quot;,get:function(){return this.dropTarget}},{key:&quot;reconnect&quot;,value:function(){var t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&amp;&amp;this.disconnectDropTarget();var i=this.dropTarget;if(this.handlerId){if(!i){this.lastConnectedDropTarget=i;return}t&amp;&amp;(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=i,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,i,this.dropTargetOptions))}}},{key:&quot;receiveHandlerId&quot;,value:function(t){t!==this.handlerId&amp;&amp;(this.handlerId=t,this.reconnect())}},{key:&quot;dropTargetOptions&quot;,get:function(){return this.dropTargetOptionsInternal},set:function(t){this.dropTargetOptionsInternal=t}},{key:&quot;didHandlerIdChange&quot;,value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:&quot;didDropTargetChange&quot;,value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:&quot;didOptionsChange&quot;,value:function(){return!iw(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:&quot;disconnectDropTarget&quot;,value:function(){this.unsubscribeDropTarget&amp;&amp;(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:&quot;dropTarget&quot;,get:function(){return this.dropTargetNode||this.dropTargetRef&amp;&amp;this.dropTargetRef.current}},{key:&quot;clearDropTarget&quot;,value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),n}();function Ree(n,e,t){var i=t.getRegistry(),r=i.addTarget(n,e);return[r,function(){return i.removeTarget(r)}]}function Oee(n,e,t){var i=t.getRegistry(),r=i.addSource(n,e);return[r,function(){return i.removeSource(r)}]}var Fc=typeof window&lt;&quot;u&quot;?re.useLayoutEffect:re.useEffect;function Wg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?Wg=function(t){return typeof t}:Wg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},Wg(n)}function Nee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Dee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Iee(n,e,t){return e&amp;&amp;Dee(n.prototype,e),n}function Zx(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Pee=function(){function n(e,t,i){Nee(this,n),Zx(this,&quot;spec&quot;,void 0),Zx(this,&quot;monitor&quot;,void 0),Zx(this,&quot;connector&quot;,void 0),this.spec=e,this.monitor=t,this.connector=i}return Iee(n,[{key:&quot;beginDrag&quot;,value:function(){var t,i=this.spec,r=this.monitor,s=null;return Wg(i.item)===&quot;object&quot;?s=i.item:typeof i.item==&quot;function&quot;?s=i.item(r):s={},(t=s)!==null&amp;&amp;t!==void 0?t:null}},{key:&quot;canDrag&quot;,value:function(){var t=this.spec,i=this.monitor;return typeof t.canDrag==&quot;boolean&quot;?t.canDrag:typeof t.canDrag==&quot;function&quot;?t.canDrag(i):!0}},{key:&quot;isDragging&quot;,value:function(t,i){var r=this.spec,s=this.monitor,o=r.isDragging;return o?o(s):i===t.getSourceId()}},{key:&quot;endDrag&quot;,value:function(){var t=this.spec,i=this.monitor,r=this.connector,s=t.end;s&amp;&amp;s(i.getItem(),i),r.reconnect()}}]),n}();function Lee(n,e,t){var i=re.useMemo(function(){return new Pee(n,e,t)},[e,t]);return re.useEffect(function(){i.spec=n},[n]),i}function jc(){var n=re.useContext(s3),e=n.dragDropManager;return Xt(e!=null,&quot;Expected drag drop context&quot;),e}function Uee(n){return re.useMemo(function(){var e=n.type;return Xt(e!=null,&quot;spec.type must be defined&quot;),e},[n])}function kee(n,e){return Hee(n)||Bee(n,e)||zee(n,e)||Fee()}function Fee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zee(n,e){if(n){if(typeof n==&quot;string&quot;)return V2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V2(n,e)}}function V2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function Bee(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function Hee(n){if(Array.isArray(n))return n}function Vee(n,e,t){var i=jc(),r=Lee(n,e,t),s=Uee(n);Fc(function(){if(s!=null){var l=Oee(s,r,i),u=kee(l,2),h=u[0],f=u[1];return e.receiveHandlerId(h),t.receiveHandlerId(h),f}},[i,e,t,r,s])}function Gee(n){return qee(n)||Xee(n)||Wee(n)||jee()}function jee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wee(n,e){if(n){if(typeof n==&quot;string&quot;)return rw(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rw(n,e)}}function Xee(n){if(typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]!=null||n[&quot;@@iterator&quot;]!=null)return Array.from(n)}function qee(n){if(Array.isArray(n))return rw(n)}function rw(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function p3(n,e){var t=Gee(e||[]);return e==null&amp;&amp;typeof n!=&quot;function&quot;&amp;&amp;t.push(n),re.useMemo(function(){return typeof n==&quot;function&quot;?n():n},t)}function Yee(){var n=jc();return re.useMemo(function(){return new dee(n)},[n])}function Kee(n,e){var t=jc(),i=re.useMemo(function(){return new Eee(t.getBackend())},[t]);return Fc(function(){return i.dragSourceOptions=n||null,i.reconnect(),function(){return i.disconnectDragSource()}},[i,n]),Fc(function(){return i.dragPreviewOptions=e||null,i.reconnect(),function(){return i.disconnectDragPreview()}},[i,e]),i}var Jx,G2;function $ee(){return G2||(G2=1,Jx=function n(e,t){if(e===t)return!0;if(e&amp;&amp;t&amp;&amp;typeof e==&quot;object&quot;&amp;&amp;typeof t==&quot;object&quot;){if(e.constructor!==t.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!n(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&amp;&amp;e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=i;r--!==0;){var o=s[r];if(!n(e[o],t[o]))return!1}return!0}return e!==e&amp;&amp;t!==t}),Jx}var Zee=$ee();const Jee=iy(Zee);function Qee(n,e){return ite(n)||nte(n,e)||tte(n,e)||ete()}function ete(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tte(n,e){if(n){if(typeof n==&quot;string&quot;)return j2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j2(n,e)}}function j2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function nte(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function ite(n){if(Array.isArray(n))return n}function m3(n,e,t){var i=re.useState(function(){return e(n)}),r=Qee(i,2),s=r[0],o=r[1],l=re.useCallback(function(){var u=e(n);Jee(s,u)||(o(u),t&amp;&amp;t())},[s,n,t]);return Fc(l),[s,l]}function rte(n,e){return lte(n)||ate(n,e)||ote(n,e)||ste()}function ste(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ote(n,e){if(n){if(typeof n==&quot;string&quot;)return W2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return W2(n,e)}}function W2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function ate(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function lte(n){if(Array.isArray(n))return n}function cte(n,e,t){var i=m3(n,e,t),r=rte(i,2),s=r[0],o=r[1];return Fc(function(){var u=n.getHandlerId();if(u!=null)return n.subscribeToStateChange(o,{handlerIds:[u]})},[n,o]),s}function g3(n,e,t){return cte(e,n||function(){return{}},function(){return t.reconnect()})}function ute(n){return re.useMemo(function(){return n.hooks.dragSource()},[n])}function hte(n){return re.useMemo(function(){return n.hooks.dragPreview()},[n])}function fte(n,e){var t=p3(n,e);Xt(!t.begin,&quot;useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)&quot;);var i=Yee(),r=Kee(t.options,t.previewOptions);return Vee(t,i,r),[g3(t.collect,i,r),ute(r),hte(r)]}function dte(n){var e=n.accept;return re.useMemo(function(){return Xt(n.accept!=null,&quot;accept must be defined&quot;),Array.isArray(e)?e:[e]},[e])}function pte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function mte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function gte(n,e,t){return e&amp;&amp;mte(n.prototype,e),n}function X2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var yte=function(){function n(e,t){pte(this,n),X2(this,&quot;spec&quot;,void 0),X2(this,&quot;monitor&quot;,void 0),this.spec=e,this.monitor=t}return gte(n,[{key:&quot;canDrop&quot;,value:function(){var t=this.spec,i=this.monitor;return t.canDrop?t.canDrop(i.getItem(),i):!0}},{key:&quot;hover&quot;,value:function(){var t=this.spec,i=this.monitor;t.hover&amp;&amp;t.hover(i.getItem(),i)}},{key:&quot;drop&quot;,value:function(){var t=this.spec,i=this.monitor;if(t.drop)return t.drop(i.getItem(),i)}}]),n}();function _te(n,e){var t=re.useMemo(function(){return new yte(n,e)},[e]);return re.useEffect(function(){t.spec=n},[n]),t}function vte(n,e){return wte(n)||Ste(n,e)||xte(n,e)||bte()}function bte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xte(n,e){if(n){if(typeof n==&quot;string&quot;)return q2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return q2(n,e)}}function q2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function Ste(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function wte(n){if(Array.isArray(n))return n}function Ete(n,e,t){var i=jc(),r=_te(n,e),s=dte(n);Fc(function(){var l=Ree(s,r,i),u=vte(l,2),h=u[0],f=u[1];return e.receiveHandlerId(h),t.receiveHandlerId(h),f},[i,e,r,t,s.map(function(o){return o.toString()}).join(&quot;|&quot;)])}function Tte(){var n=jc();return re.useMemo(function(){return new yee(n)},[n])}function Mte(n){var e=jc(),t=re.useMemo(function(){return new Cee(e.getBackend())},[e]);return Fc(function(){return t.dropTargetOptions=n||null,t.reconnect(),function(){return t.disconnectDropTarget()}},[n]),t}function Ate(n){return re.useMemo(function(){return n.hooks.dropTarget()},[n])}function y3(n,e){var t=p3(n,e),i=Tte(),r=Mte(t.options);return Ete(t,i,r),[g3(t.collect,i,r),Ate(r)]}function Cte(n,e){return Dte(n)||Nte(n,e)||Ote(n,e)||Rte()}function Rte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ote(n,e){if(n){if(typeof n==&quot;string&quot;)return Y2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Y2(n,e)}}function Y2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function Nte(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function Dte(n){if(Array.isArray(n))return n}function Ite(n){var e=jc(),t=e.getMonitor(),i=m3(t,n),r=Cte(i,2),s=r[0],o=r[1];return re.useEffect(function(){return t.subscribeToOffsetChange(o)}),re.useEffect(function(){return t.subscribeToStateChange(o)}),s}function _3(n){var e=null,t=function(){return e==null&amp;&amp;(e=n()),e};return t}function Pte(n,e){return n.filter(function(t){return t!==e})}function Lte(n,e){var t=new Set,i=function(o){return t.add(o)};n.forEach(i),e.forEach(i);var r=[];return t.forEach(function(s){return r.push(s)}),r}function Ute(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function kte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Fte(n,e,t){return e&amp;&amp;kte(n.prototype,e),n}function K2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var zte=function(){function n(e){Ute(this,n),K2(this,&quot;entered&quot;,[]),K2(this,&quot;isNodeInDocument&quot;,void 0),this.isNodeInDocument=e}return Fte(n,[{key:&quot;enter&quot;,value:function(t){var i=this,r=this.entered.length,s=function(l){return i.isNodeInDocument(l)&amp;&amp;(!l.contains||l.contains(t))};return this.entered=Lte(this.entered.filter(s),[t]),r===0&amp;&amp;this.entered.length&gt;0}},{key:&quot;leave&quot;,value:function(t){var i=this.entered.length;return this.entered=Pte(this.entered.filter(this.isNodeInDocument),t),i&gt;0&amp;&amp;this.entered.length===0}},{key:&quot;reset&quot;,value:function(){this.entered=[]}}]),n}(),Bte=_3(function(){return/firefox/i.test(navigator.userAgent)}),v3=_3(function(){return!!window.safari});function Hte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Vte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Gte(n,e,t){return e&amp;&amp;Vte(n.prototype,e),n}function Zf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var $2=function(){function n(e,t){Hte(this,n),Zf(this,&quot;xs&quot;,void 0),Zf(this,&quot;ys&quot;,void 0),Zf(this,&quot;c1s&quot;,void 0),Zf(this,&quot;c2s&quot;,void 0),Zf(this,&quot;c3s&quot;,void 0);for(var i=e.length,r=[],s=0;s&lt;i;s++)r.push(s);r.sort(function(N,R){return e[N]&lt;e[R]?-1:1});for(var o=[],l=[],u,h,f=0;f&lt;i-1;f++)u=e[f+1]-e[f],h=t[f+1]-t[f],o.push(u),l.push(h/u);for(var p=[l[0]],m=0;m&lt;o.length-1;m++){var g=l[m],v=l[m+1];if(g*v&lt;=0)p.push(0);else{u=o[m];var x=o[m+1],b=u+x;p.push(3*b/((b+x)/g+(b+u)/v))}}p.push(l[l.length-1]);for(var _=[],T=[],w,S=0;S&lt;p.length-1;S++){w=l[S];var C=p[S],O=1/o[S],M=C+p[S+1]-w-w;_.push((w-C-M)*O),T.push(M*O*O)}this.xs=e,this.ys=t,this.c1s=p,this.c2s=_,this.c3s=T}return Gte(n,[{key:&quot;interpolate&quot;,value:function(t){var i=this.xs,r=this.ys,s=this.c1s,o=this.c2s,l=this.c3s,u=i.length-1;if(t===i[u])return r[u];for(var h=0,f=l.length-1,p;h&lt;=f;){p=Math.floor(.5*(h+f));var m=i[p];if(m&lt;t)h=p+1;else if(m&gt;t)f=p-1;else return r[p]}u=Math.max(0,f);var g=t-i[u],v=g*g;return r[u]+s[u]*g+o[u]*v+l[u]*g*v}}]),n}(),jte=1;function b3(n){var e=n.nodeType===jte?n:n.parentElement;if(!e)return null;var t=e.getBoundingClientRect(),i=t.top,r=t.left;return{x:r,y:i}}function Ag(n){return{x:n.clientX,y:n.clientY}}function Wte(n){var e;return n.nodeName===&quot;IMG&quot;&amp;&amp;(Bte()||!((e=document.documentElement)!==null&amp;&amp;e!==void 0&amp;&amp;e.contains(n)))}function Xte(n,e,t,i){var r=n?e.width:t,s=n?e.height:i;return v3()&amp;&amp;n&amp;&amp;(s/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:s}}function qte(n,e,t,i,r){var s=Wte(e),o=s?n:e,l=b3(o),u={x:t.x-l.x,y:t.y-l.y},h=n.offsetWidth,f=n.offsetHeight,p=i.anchorX,m=i.anchorY,g=Xte(s,e,h,f),v=g.dragPreviewWidth,x=g.dragPreviewHeight,b=function(){var M=new $2([0,.5,1],[u.y,u.y/f*x,u.y+x-f]),N=M.interpolate(m);return v3()&amp;&amp;s&amp;&amp;(N+=(window.devicePixelRatio-1)*x),N},_=function(){var M=new $2([0,.5,1],[u.x,u.x/h*v,u.x+v-h]);return M.interpolate(p)},T=r.offsetX,w=r.offsetY,S=T===0||T,C=w===0||w;return{x:S?T:_(),y:C?w:b()}}var x3=&quot;__NATIVE_FILE__&quot;,S3=&quot;__NATIVE_URL__&quot;,w3=&quot;__NATIVE_TEXT__&quot;,E3=&quot;__NATIVE_HTML__&quot;;const Z2=Object.freeze(Object.defineProperty({__proto__:null,FILE:x3,HTML:E3,TEXT:w3,URL:S3},Symbol.toStringTag,{value:&quot;Module&quot;}));function Qx(n,e,t){var i=e.reduce(function(r,s){return r||n.getData(s)},&quot;&quot;);return i??t}var Yu;function Cg(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var sw=(Yu={},Cg(Yu,x3,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items},dataTransfer:function(e){return e}},matchesTypes:[&quot;Files&quot;]}),Cg(Yu,E3,{exposeProperties:{html:function(e,t){return Qx(e,t,&quot;&quot;)},dataTransfer:function(e){return e}},matchesTypes:[&quot;Html&quot;,&quot;text/html&quot;]}),Cg(Yu,S3,{exposeProperties:{urls:function(e,t){return Qx(e,t,&quot;&quot;).split(`
`)},dataTransfer:function(e){return e}},matchesTypes:[&quot;Url&quot;,&quot;text/uri-list&quot;]}),Cg(Yu,w3,{exposeProperties:{text:function(e,t){return Qx(e,t,&quot;&quot;)},dataTransfer:function(e){return e}},matchesTypes:[&quot;Text&quot;,&quot;text/plain&quot;]}),Yu);function Yte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Kte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function $te(n,e,t){return e&amp;&amp;Kte(n.prototype,e),n}function J2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Zte=function(){function n(e){Yte(this,n),J2(this,&quot;item&quot;,void 0),J2(this,&quot;config&quot;,void 0),this.config=e,this.item={},this.initializeExposedProperties()}return $te(n,[{key:&quot;initializeExposedProperties&quot;,value:function(){var t=this;Object.keys(this.config.exposeProperties).forEach(function(i){Object.defineProperty(t.item,i,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn&#x27;t allow reading &quot;`.concat(i,&#x27;&quot; until the drop event.&#x27;)),null}})})}},{key:&quot;loadDataTransfer&quot;,value:function(t){var i=this;if(t){var r={};Object.keys(this.config.exposeProperties).forEach(function(s){r[s]={value:i.config.exposeProperties[s](t,i.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,r)}}},{key:&quot;canDrag&quot;,value:function(){return!0}},{key:&quot;beginDrag&quot;,value:function(){return this.item}},{key:&quot;isDragging&quot;,value:function(t,i){return i===t.getSourceId()}},{key:&quot;endDrag&quot;,value:function(){}}]),n}();function Jte(n,e){var t=new Zte(sw[n]);return t.loadDataTransfer(e),t}function eS(n){if(!n)return null;var e=Array.prototype.slice.call(n.types||[]);return Object.keys(sw).filter(function(t){var i=sw[t].matchesTypes;return i.some(function(r){return e.indexOf(r)&gt;-1})})[0]||null}function Qte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function ene(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function tne(n,e,t){return e&amp;&amp;ene(n.prototype,e),n}function tS(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var nne=function(){function n(e,t){Qte(this,n),tS(this,&quot;ownerDocument&quot;,null),tS(this,&quot;globalContext&quot;,void 0),tS(this,&quot;optionsArgs&quot;,void 0),this.globalContext=e,this.optionsArgs=t}return tne(n,[{key:&quot;window&quot;,get:function(){if(this.globalContext)return this.globalContext;if(typeof window&lt;&quot;u&quot;)return window}},{key:&quot;document&quot;,get:function(){var t;return(t=this.globalContext)!==null&amp;&amp;t!==void 0&amp;&amp;t.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:&quot;rootElement&quot;,get:function(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}}]),n}();function Q2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function eN(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Q2(Object(t),!0).forEach(function(i){ln(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Q2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ine(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function rne(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function sne(n,e,t){return e&amp;&amp;rne(n.prototype,e),n}function ln(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var one=function(){function n(e,t,i){var r=this;ine(this,n),ln(this,&quot;options&quot;,void 0),ln(this,&quot;actions&quot;,void 0),ln(this,&quot;monitor&quot;,void 0),ln(this,&quot;registry&quot;,void 0),ln(this,&quot;enterLeaveCounter&quot;,void 0),ln(this,&quot;sourcePreviewNodes&quot;,new Map),ln(this,&quot;sourcePreviewNodeOptions&quot;,new Map),ln(this,&quot;sourceNodes&quot;,new Map),ln(this,&quot;sourceNodeOptions&quot;,new Map),ln(this,&quot;dragStartSourceIds&quot;,null),ln(this,&quot;dropTargetIds&quot;,[]),ln(this,&quot;dragEnterTargetIds&quot;,[]),ln(this,&quot;currentNativeSource&quot;,null),ln(this,&quot;currentNativeHandle&quot;,null),ln(this,&quot;currentDragSourceNode&quot;,null),ln(this,&quot;altKeyPressed&quot;,!1),ln(this,&quot;mouseMoveTimeoutTimer&quot;,null),ln(this,&quot;asyncEndDragFrameId&quot;,null),ln(this,&quot;dragOverTargetIds&quot;,null),ln(this,&quot;lastClientOffset&quot;,null),ln(this,&quot;hoverRafId&quot;,null),ln(this,&quot;getSourceClientOffset&quot;,function(s){var o=r.sourceNodes.get(s);return o&amp;&amp;b3(o)||null}),ln(this,&quot;endDragNativeItem&quot;,function(){r.isDraggingNativeItem()&amp;&amp;(r.actions.endDrag(),r.currentNativeHandle&amp;&amp;r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)}),ln(this,&quot;isNodeInDocument&quot;,function(s){return!!(s&amp;&amp;r.document&amp;&amp;r.document.body&amp;&amp;r.document.body.contains(s))}),ln(this,&quot;endDragIfSourceWasRemovedFromDOM&quot;,function(){var s=r.currentDragSourceNode;s==null||r.isNodeInDocument(s)||r.clearCurrentDragSourceNode()&amp;&amp;r.monitor.isDragging()&amp;&amp;r.actions.endDrag()}),ln(this,&quot;handleTopDragStartCapture&quot;,function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]}),ln(this,&quot;handleTopDragStart&quot;,function(s){if(!s.defaultPrevented){var o=r.dragStartSourceIds;r.dragStartSourceIds=null;var l=Ag(s);r.monitor.isDragging()&amp;&amp;r.actions.endDrag(),r.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:l});var u=s.dataTransfer,h=eS(u);if(r.monitor.isDragging()){if(u&amp;&amp;typeof u.setDragImage==&quot;function&quot;){var f=r.monitor.getSourceId(),p=r.sourceNodes.get(f),m=r.sourcePreviewNodes.get(f)||p;if(m){var g=r.getCurrentSourcePreviewNodeOptions(),v=g.anchorX,x=g.anchorY,b=g.offsetX,_=g.offsetY,T={anchorX:v,anchorY:x},w={offsetX:b,offsetY:_},S=qte(p,m,l,T,w);u.setDragImage(m,S.x,S.y)}}try{u==null||u.setData(&quot;application/json&quot;,{})}catch{}r.setCurrentDragSourceNode(s.target);var C=r.getCurrentSourcePreviewNodeOptions(),O=C.captureDraggingState;O?r.actions.publishDragSource():setTimeout(function(){return r.actions.publishDragSource()},0)}else if(h)r.beginDragNativeItem(h);else{if(u&amp;&amp;!u.types&amp;&amp;(s.target&amp;&amp;!s.target.hasAttribute||!s.target.hasAttribute(&quot;draggable&quot;)))return;s.preventDefault()}}}),ln(this,&quot;handleTopDragEndCapture&quot;,function(){r.clearCurrentDragSourceNode()&amp;&amp;r.monitor.isDragging()&amp;&amp;r.actions.endDrag()}),ln(this,&quot;handleTopDragEnterCapture&quot;,function(s){r.dragEnterTargetIds=[];var o=r.enterLeaveCounter.enter(s.target);if(!(!o||r.monitor.isDragging())){var l=s.dataTransfer,u=eS(l);u&amp;&amp;r.beginDragNativeItem(u,l)}}),ln(this,&quot;handleTopDragEnter&quot;,function(s){var o=r.dragEnterTargetIds;if(r.dragEnterTargetIds=[],!!r.monitor.isDragging()){r.altKeyPressed=s.altKey,o.length&gt;0&amp;&amp;r.actions.hover(o,{clientOffset:Ag(s)});var l=o.some(function(u){return r.monitor.canDropOnTarget(u)});l&amp;&amp;(s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=r.getCurrentDropEffect()))}}),ln(this,&quot;handleTopDragOverCapture&quot;,function(){r.dragOverTargetIds=[]}),ln(this,&quot;handleTopDragOver&quot;,function(s){var o=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging()){s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=&quot;none&quot;);return}r.altKeyPressed=s.altKey,r.lastClientOffset=Ag(s),r.hoverRafId===null&amp;&amp;typeof requestAnimationFrame&lt;&quot;u&quot;&amp;&amp;(r.hoverRafId=requestAnimationFrame(function(){r.monitor.isDragging()&amp;&amp;r.actions.hover(o||[],{clientOffset:r.lastClientOffset}),r.hoverRafId=null}));var l=(o||[]).some(function(u){return r.monitor.canDropOnTarget(u)});l?(s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=&quot;none&quot;))}),ln(this,&quot;handleTopDragLeaveCapture&quot;,function(s){r.isDraggingNativeItem()&amp;&amp;s.preventDefault();var o=r.enterLeaveCounter.leave(s.target);o&amp;&amp;r.isDraggingNativeItem()&amp;&amp;setTimeout(function(){return r.endDragNativeItem()},0)}),ln(this,&quot;handleTopDropCapture&quot;,function(s){if(r.dropTargetIds=[],r.isDraggingNativeItem()){var o;s.preventDefault(),(o=r.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}else eS(s.dataTransfer)&amp;&amp;s.preventDefault();r.enterLeaveCounter.reset()}),ln(this,&quot;handleTopDrop&quot;,function(s){var o=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(o,{clientOffset:Ag(s)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.monitor.isDragging()&amp;&amp;r.actions.endDrag()}),ln(this,&quot;handleSelectStart&quot;,function(s){var o=s.target;typeof o.dragDrop==&quot;function&quot;&amp;&amp;(o.tagName===&quot;INPUT&quot;||o.tagName===&quot;SELECT&quot;||o.tagName===&quot;TEXTAREA&quot;||o.isContentEditable||(s.preventDefault(),o.dragDrop()))}),this.options=new nne(t,i),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new zte(this.isNodeInDocument)}return sne(n,[{key:&quot;profile&quot;,value:function(){var t,i;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((i=this.dragOverTargetIds)===null||i===void 0?void 0:i.length)||0}}},{key:&quot;window&quot;,get:function(){return this.options.window}},{key:&quot;document&quot;,get:function(){return this.options.document}},{key:&quot;rootElement&quot;,get:function(){return this.options.rootElement}},{key:&quot;setup&quot;,value:function(){var t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error(&quot;Cannot have two HTML5 backends at the same time.&quot;);t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}},{key:&quot;teardown&quot;,value:function(){var t=this.rootElement;if(t!==void 0&amp;&amp;(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var i;(i=this.window)===null||i===void 0||i.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:&quot;connectDragPreview&quot;,value:function(t,i,r){var s=this;return this.sourcePreviewNodeOptions.set(t,r),this.sourcePreviewNodes.set(t,i),function(){s.sourcePreviewNodes.delete(t),s.sourcePreviewNodeOptions.delete(t)}}},{key:&quot;connectDragSource&quot;,value:function(t,i,r){var s=this;this.sourceNodes.set(t,i),this.sourceNodeOptions.set(t,r);var o=function(h){return s.handleDragStart(h,t)},l=function(h){return s.handleSelectStart(h)};return i.setAttribute(&quot;draggable&quot;,&quot;true&quot;),i.addEventListener(&quot;dragstart&quot;,o),i.addEventListener(&quot;selectstart&quot;,l),function(){s.sourceNodes.delete(t),s.sourceNodeOptions.delete(t),i.removeEventListener(&quot;dragstart&quot;,o),i.removeEventListener(&quot;selectstart&quot;,l),i.setAttribute(&quot;draggable&quot;,&quot;false&quot;)}}},{key:&quot;connectDropTarget&quot;,value:function(t,i){var r=this,s=function(h){return r.handleDragEnter(h,t)},o=function(h){return r.handleDragOver(h,t)},l=function(h){return r.handleDrop(h,t)};return i.addEventListener(&quot;dragenter&quot;,s),i.addEventListener(&quot;dragover&quot;,o),i.addEventListener(&quot;drop&quot;,l),function(){i.removeEventListener(&quot;dragenter&quot;,s),i.removeEventListener(&quot;dragover&quot;,o),i.removeEventListener(&quot;drop&quot;,l)}}},{key:&quot;addEventListeners&quot;,value:function(t){t.addEventListener&amp;&amp;(t.addEventListener(&quot;dragstart&quot;,this.handleTopDragStart),t.addEventListener(&quot;dragstart&quot;,this.handleTopDragStartCapture,!0),t.addEventListener(&quot;dragend&quot;,this.handleTopDragEndCapture,!0),t.addEventListener(&quot;dragenter&quot;,this.handleTopDragEnter),t.addEventListener(&quot;dragenter&quot;,this.handleTopDragEnterCapture,!0),t.addEventListener(&quot;dragleave&quot;,this.handleTopDragLeaveCapture,!0),t.addEventListener(&quot;dragover&quot;,this.handleTopDragOver),t.addEventListener(&quot;dragover&quot;,this.handleTopDragOverCapture,!0),t.addEventListener(&quot;drop&quot;,this.handleTopDrop),t.addEventListener(&quot;drop&quot;,this.handleTopDropCapture,!0))}},{key:&quot;removeEventListeners&quot;,value:function(t){t.removeEventListener&amp;&amp;(t.removeEventListener(&quot;dragstart&quot;,this.handleTopDragStart),t.removeEventListener(&quot;dragstart&quot;,this.handleTopDragStartCapture,!0),t.removeEventListener(&quot;dragend&quot;,this.handleTopDragEndCapture,!0),t.removeEventListener(&quot;dragenter&quot;,this.handleTopDragEnter),t.removeEventListener(&quot;dragenter&quot;,this.handleTopDragEnterCapture,!0),t.removeEventListener(&quot;dragleave&quot;,this.handleTopDragLeaveCapture,!0),t.removeEventListener(&quot;dragover&quot;,this.handleTopDragOver),t.removeEventListener(&quot;dragover&quot;,this.handleTopDragOverCapture,!0),t.removeEventListener(&quot;drop&quot;,this.handleTopDrop),t.removeEventListener(&quot;drop&quot;,this.handleTopDropCapture,!0))}},{key:&quot;getCurrentSourceNodeOptions&quot;,value:function(){var t=this.monitor.getSourceId(),i=this.sourceNodeOptions.get(t);return eN({dropEffect:this.altKeyPressed?&quot;copy&quot;:&quot;move&quot;},i||{})}},{key:&quot;getCurrentDropEffect&quot;,value:function(){return this.isDraggingNativeItem()?&quot;copy&quot;:this.getCurrentSourceNodeOptions().dropEffect}},{key:&quot;getCurrentSourcePreviewNodeOptions&quot;,value:function(){var t=this.monitor.getSourceId(),i=this.sourcePreviewNodeOptions.get(t);return eN({anchorX:.5,anchorY:.5,captureDraggingState:!1},i||{})}},{key:&quot;isDraggingNativeItem&quot;,value:function(){var t=this.monitor.getItemType();return Object.keys(Z2).some(function(i){return Z2[i]===t})}},{key:&quot;beginDragNativeItem&quot;,value:function(t,i){this.clearCurrentDragSourceNode(),this.currentNativeSource=Jte(t,i),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:&quot;setCurrentDragSourceNode&quot;,value:function(t){var i=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;var r=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var s;return(s=i.rootElement)===null||s===void 0?void 0:s.addEventListener(&quot;mousemove&quot;,i.endDragIfSourceWasRemovedFromDOM,!0)},r)}},{key:&quot;clearCurrentDragSourceNode&quot;,value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener(&quot;mousemove&quot;,this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:&quot;handleDragStart&quot;,value:function(t,i){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(i))}},{key:&quot;handleDragEnter&quot;,value:function(t,i){this.dragEnterTargetIds.unshift(i)}},{key:&quot;handleDragOver&quot;,value:function(t,i){this.dragOverTargetIds===null&amp;&amp;(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(i)}},{key:&quot;handleDrop&quot;,value:function(t,i){this.dropTargetIds.unshift(i)}}]),n}(),Rg;function ane(){return Rg||(Rg=new Image,Rg.src=&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot;),Rg}var lne=function(e,t,i){return new one(e,t,i)};function cne(n){const e=ls(),t=e.selectedIds,[i,r,s]=fte(()=&gt;({canDrag:()=&gt;n.isDraggable,type:&quot;NODE&quot;,item:()=&gt;{const o=e.isSelected(n.id)?Array.from(t):[n.id];return e.dispatch(Eh.dragStart(n.id,o)),{id:n.id,dragIds:o}},end:()=&gt;{e.hideCursor(),e.dispatch(Eh.dragEnd())}}),[t,n]);return re.useEffect(()=&gt;{s(ane())},[s]),r}function une(n,e){const t=n.getBoundingClientRect(),i=e.x-Math.round(t.x),r=e.y-Math.round(t.y),s=t.height,o=r&lt;s/2,l=!o,u=s/4,h=r&gt;u&amp;&amp;r&lt;s-u;return{x:i,inTopHalf:o,inBottomHalf:l,inMiddle:h,atTop:!h&amp;&amp;o,atBottom:!h&amp;&amp;l}}function hne(n,e,t,i){return n?n.isInternal?i.atTop?[e,n]:i.inMiddle?[n,n]:[n,t]:i.inTopHalf?[e,n]:[n,t]:[e,null]}function Og(n,e){return{parentId:n||null,index:e}}function Ku(n,e){return{type:&quot;line&quot;,index:n,level:e}}function fne(n){return{type:&quot;highlight&quot;,id:n}}function nS(n,e){var t;let i=n;for(;i.parent&amp;&amp;i.level&gt;e;)i=i.parent;const r=((t=i.parent)===null||t===void 0?void 0:t.id)||null,s=KL(i)+1;return{parentId:r,index:s}}function T3(n){var e;const t=une(n.element,n.offset),i=n.indent,r=Math.round(Math.max(0,t.x-i)/i),{node:s,nextNode:o,prevNode:l}=n,[u,h]=hne(s,l,o,t);if(s&amp;&amp;s.isInternal&amp;&amp;t.inMiddle)return{drop:Og(s.id,null),cursor:fne(s.id)};if(!u)return{drop:Og((e=h==null?void 0:h.parent)===null||e===void 0?void 0:e.id,0),cursor:Ku(0,0)};if(WL(u)){const f=Bg(r,(h==null?void 0:h.level)||0,u.level);return{drop:nS(u,f),cursor:Ku(u.rowIndex+1,f)}}if(XL(u)){const f=Bg(r,(h==null?void 0:h.level)||0,u.level);return{drop:nS(u,f),cursor:Ku(u.rowIndex+1,f)}}if(qL(u)){const f=Bg(r,0,u.level+1);return f&gt;u.level?{drop:Og(u.id,0),cursor:Ku(u.rowIndex+1,f)}:{drop:nS(u,f),cursor:Ku(u.rowIndex+1,f)}}return{drop:Og(u==null?void 0:u.id,0),cursor:Ku(u.rowIndex+1,u.level+1)}}function dne(n,e){const t=ls(),[i,r]=y3(()=&gt;({accept:&quot;NODE&quot;,canDrop:()=&gt;t.canDrop(),hover:(s,o)=&gt;{const l=o.getClientOffset();if(!n.current||!l)return;const{cursor:u,drop:h}=T3({element:n.current,offset:l,indent:t.indent,node:e,prevNode:e.prev,nextNode:e.next});h&amp;&amp;t.dispatch(Eh.hovering(h.parentId,h.index)),o.canDrop()?u&amp;&amp;t.showCursor(u):t.hideCursor()},drop:(s,o)=&gt;{if(!o.canDrop())return null;let{parentId:l,index:u,dragIds:h}=t.state.dnd;e3(t.props.onMove,{dragIds:h,parentId:l===jd?null:l,index:u===null?0:u,dragNodes:t.dragNodes,parentNode:t.get(l)}),t.open(l)}}),[e,n.current,t.props]);return r}function pne(n){const e=ls(),t=e.at(n);if(!t)throw new Error(`Could not find node for index: ${n}`);return re.useMemo(()=&gt;{const i=t.clone();return e.visibleNodes[n]=i,i},[...Object.values(t.state),t])}const mne=_d.memo(function({index:e,style:t}){jL(),zZ();const i=ls(),r=pne(e),s=re.useRef(null),o=cne(r),l=dne(s,r),u=re.useCallback(x=&gt;{s.current=x,l(x)},[l]),h=i.indent*r.level,f=re.useMemo(()=&gt;({paddingLeft:h}),[h]),p=re.useMemo(()=&gt;{var x,b;return Object.assign(Object.assign({},t),{top:parseFloat(t.top)+((b=(x=i.props.padding)!==null&amp;&amp;x!==void 0?x:i.props.paddingTop)!==null&amp;&amp;b!==void 0?b:0)})},[t,i.props.padding,i.props.paddingTop]),m={role:&quot;treeitem&quot;,&quot;aria-level&quot;:r.level+1,&quot;aria-selected&quot;:r.isSelected,&quot;aria-expanded&quot;:r.isOpen,style:p,tabIndex:-1,className:i.props.rowClassName};re.useEffect(()=&gt;{var x;!r.isEditing&amp;&amp;r.isFocused&amp;&amp;((x=s.current)===null||x===void 0||x.focus({preventScroll:!0}))},[r.isEditing,r.isFocused,s.current]);const g=i.renderNode,v=i.renderRow;return I.jsx(v,{node:r,innerRef:u,attrs:m,children:I.jsx(g,{node:r,tree:i,style:f,dragHandle:o})})});let iS=&quot;&quot;,tN=null;function M3(){jL();const n=ls();return I.jsx(&quot;div&quot;,{role:&quot;tree&quot;,style:{height:n.height,width:n.width,minHeight:0,minWidth:0},onContextMenu:n.props.onContextMenu,onClick:n.props.onClick,tabIndex:0,onFocus:e=&gt;{e.currentTarget.contains(e.relatedTarget)||n.onFocus()},onBlur:e=&gt;{e.currentTarget.contains(e.relatedTarget)||n.onBlur()},onKeyDown:e=&gt;{var t;if(n.isEditing)return;if(e.key===&quot;Backspace&quot;){if(!n.props.onDelete)return;const r=Array.from(n.selectedIds);if(r.length&gt;1){let s=n.mostRecentNode;for(;s&amp;&amp;s.isSelected;)s=s.nextSibling;s||(s=n.lastNode),n.focus(s,{scroll:!1}),n.delete(Array.from(r))}else{const s=n.focusedNode;if(s){const o=s.nextSibling,l=s.parent;n.focus(o||l,{scroll:!1}),n.delete(s)}}return}if(e.key===&quot;Tab&quot;&amp;&amp;!e.shiftKey){e.preventDefault(),$L(e.currentTarget);return}if(e.key===&quot;Tab&quot;&amp;&amp;e.shiftKey){e.preventDefault(),ZL(e.currentTarget);return}if(e.key===&quot;ArrowDown&quot;){e.preventDefault();const r=n.nextNode;if(e.metaKey){n.select(n.focusedNode),n.activate(n.focusedNode);return}else if(!e.shiftKey||n.props.disableMultiSelection){n.focus(r);return}else{if(!r)return;const s=n.focusedNode;s?s.isSelected?n.selectContiguous(r):n.selectMulti(r):n.focus(n.firstNode);return}}if(e.key===&quot;ArrowUp&quot;){e.preventDefault();const r=n.prevNode;if(!e.shiftKey||n.props.disableMultiSelection){n.focus(r);return}else{if(!r)return;const s=n.focusedNode;s?s.isSelected?n.selectContiguous(r):n.selectMulti(r):n.focus(n.lastNode);return}}if(e.key===&quot;ArrowRight&quot;){const r=n.focusedNode;if(!r)return;r.isInternal&amp;&amp;r.isOpen?n.focus(n.nextNode):r.isInternal&amp;&amp;n.open(r.id);return}if(e.key===&quot;ArrowLeft&quot;){const r=n.focusedNode;if(!r||r.isRoot)return;r.isInternal&amp;&amp;r.isOpen?n.close(r.id):!((t=r.parent)===null||t===void 0)&amp;&amp;t.isRoot||n.focus(r.parent);return}if(e.key===&quot;a&quot;&amp;&amp;e.metaKey&amp;&amp;!n.props.disableMultiSelection){e.preventDefault(),n.selectAll();return}if(e.key===&quot;a&quot;&amp;&amp;!e.metaKey&amp;&amp;n.props.onCreate){n.createLeaf();return}if(e.key===&quot;A&quot;&amp;&amp;!e.metaKey){if(!n.props.onCreate)return;n.createInternal();return}if(e.key===&quot;Home&quot;){e.preventDefault(),n.focus(n.firstNode);return}if(e.key===&quot;End&quot;){e.preventDefault(),n.focus(n.lastNode);return}if(e.key===&quot;Enter&quot;){const r=n.focusedNode;if(!r||!r.isEditable||!n.props.onRename)return;setTimeout(()=&gt;{r&amp;&amp;n.edit(r)});return}if(e.key===&quot; &quot;){e.preventDefault();const r=n.focusedNode;if(!r)return;r.isLeaf?(r.select(),r.activate()):r.toggle();return}if(e.key===&quot;*&quot;){const r=n.focusedNode;if(!r)return;n.openSiblings(r);return}if(e.key===&quot;PageUp&quot;){e.preventDefault(),n.pageUp();return}e.key===&quot;PageDown&quot;&amp;&amp;(e.preventDefault(),n.pageDown()),clearTimeout(tN),iS+=e.key,tN=setTimeout(()=&gt;{iS=&quot;&quot;},600);const i=n.visibleNodes.find(r=&gt;{const s=r.data.name;return typeof s==&quot;string&quot;?s.toLowerCase().startsWith(iS):!1});i&amp;&amp;n.focus(i.id)},children:I.jsx(SJ,{className:n.props.className,outerRef:n.listEl,itemCount:n.visibleNodes.length,height:n.height,width:n.width,itemSize:n.rowHeight,overscanCount:n.overscanCount,itemKey:e=&gt;{var t;return((t=n.visibleNodes[e])===null||t===void 0?void 0:t.id)||e},outerElementType:TJ,innerElementType:CJ,onScroll:n.props.onScroll,onItemsRendered:n.onItemsRendered.bind(n),ref:n.list,children:mne})})}function nN(n){return n.isFiltered?yne(n.root,n.isMatch.bind(n)):gne(n.root)}function gne(n){const e=[];function t(i){var r;i.level&gt;=0&amp;&amp;e.push(i),i.isOpen&amp;&amp;((r=i.children)===null||r===void 0||r.forEach(t))}return t(n),e.forEach(A3),e}function yne(n,e){const t={},i=[];function r(o){if(!o.isRoot&amp;&amp;e(o)){t[o.id]=!0;let u=o.parent;for(;u;)t[u.id]=!0,u=u.parent}if(o.children)for(let u of o.children)r(u)}function s(o){var l;o.level&gt;=0&amp;&amp;t[o.id]&amp;&amp;i.push(o),o.isOpen&amp;&amp;((l=o.children)===null||l===void 0||l.forEach(s))}return r(n),s(n),i.forEach(A3),i}function A3(n,e){n.rowIndex=e}const iN=n=&gt;n.reduce((e,t,i)=&gt;(e[t.id]=i,e),{});var rS=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(i.next(f))}catch(p){o(p)}}function u(f){try{h(i.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):r(f.value).then(l,u)}h((i=i.apply(n,e||[])).next())})};const{safeRun:Ki,identify:Qo,identifyNull:Vs}=WZ;class yd{constructor(e,t,i,r){this.store=e,this.props=t,this.list=i,this.listEl=r,this.visibleStartIndex=0,this.visibleStopIndex=0,this.root=f2(this),this.visibleNodes=nN(this),this.idToIndex=iN(this.visibleNodes)}update(e){this.props=e,this.root=f2(this),this.visibleNodes=nN(this),this.idToIndex=iN(this.visibleNodes)}dispatch(e){return this.store.dispatch(e)}get state(){return this.store.getState()}get openState(){return this.state.nodes.open.unfiltered}get width(){var e;return(e=this.props.width)!==null&amp;&amp;e!==void 0?e:300}get height(){var e;return(e=this.props.height)!==null&amp;&amp;e!==void 0?e:500}get indent(){var e;return(e=this.props.indent)!==null&amp;&amp;e!==void 0?e:24}get rowHeight(){var e;return(e=this.props.rowHeight)!==null&amp;&amp;e!==void 0?e:24}get overscanCount(){var e;return(e=this.props.overscanCount)!==null&amp;&amp;e!==void 0?e:1}get searchTerm(){return(this.props.searchTerm||&quot;&quot;).trim()}get matchFn(){var e;const t=(e=this.props.searchMatch)!==null&amp;&amp;e!==void 0?e:(i,r)=&gt;JSON.stringify(Object.values(i.data)).toLocaleLowerCase().includes(r.toLocaleLowerCase());return i=&gt;t(i,this.searchTerm)}accessChildren(e){var t;const i=this.props.childrenAccessor||&quot;children&quot;;return(t=rd(e,i))!==null&amp;&amp;t!==void 0?t:null}accessId(e){const t=this.props.idAccessor||&quot;id&quot;,i=rd(e,t);if(!i)throw new Error(&quot;Data must contain an &#x27;id&#x27; property or props.idAccessor must return a string&quot;);return i}get firstNode(){var e;return(e=this.visibleNodes[0])!==null&amp;&amp;e!==void 0?e:null}get lastNode(){var e;return(e=this.visibleNodes[this.visibleNodes.length-1])!==null&amp;&amp;e!==void 0?e:null}get focusedNode(){var e;return(e=this.get(this.state.nodes.focus.id))!==null&amp;&amp;e!==void 0?e:null}get mostRecentNode(){var e;return(e=this.get(this.state.nodes.selection.mostRecent))!==null&amp;&amp;e!==void 0?e:null}get nextNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e+1)}get prevNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e-1)}get(e){return e&amp;&amp;e in this.idToIndex&amp;&amp;this.visibleNodes[this.idToIndex[e]]||null}at(e){return this.visibleNodes[e]||null}nodesBetween(e,t){var i;if(e===null||t===null)return[];const r=(i=this.indexOf(e))!==null&amp;&amp;i!==void 0?i:0,s=this.indexOf(t);if(s===null)return[];const o=Math.min(r,s),l=Math.max(r,s);return this.visibleNodes.slice(o,l+1)}indexOf(e){const t=QL(e);return t?this.idToIndex[t]:null}get editingId(){return this.state.nodes.edit.id}createInternal(){return this.create({type:&quot;internal&quot;})}createLeaf(){return this.create({type:&quot;leaf&quot;})}create(){return rS(this,arguments,void 0,function*(e={}){var t,i;const r=e.parentId===void 0?i3(this):e.parentId,s=(t=e.index)!==null&amp;&amp;t!==void 0?t:n3(this),o=(i=e.type)!==null&amp;&amp;i!==void 0?i:&quot;leaf&quot;,l=yield Ki(this.props.onCreate,{type:o,parentId:r,index:s,parentNode:this.get(r)});l&amp;&amp;(this.focus(l),setTimeout(()=&gt;{this.edit(l).then(()=&gt;{this.select(l),this.activate(l)})}))})}delete(e){return rS(this,void 0,void 0,function*(){if(!e)return;const i=(Array.isArray(e)?e:[e]).map(Qo),r=i.map(s=&gt;this.get(s)).filter(s=&gt;!!s);yield Ki(this.props.onDelete,{nodes:r,ids:i})})}edit(e){const t=Qo(e);return this.resolveEdit({cancelled:!0}),this.scrollTo(t),this.dispatch(Wx(t)),new Promise(i=&gt;{yd.editPromise=i})}submit(e,t){return rS(this,void 0,void 0,function*(){if(!e)return;const i=Qo(e);yield Ki(this.props.onRename,{id:i,name:t,node:this.get(i)}),this.dispatch(Wx(null)),this.resolveEdit({cancelled:!1,value:t}),setTimeout(()=&gt;this.onFocus())})}reset(){this.dispatch(Wx(null)),this.resolveEdit({cancelled:!0}),setTimeout(()=&gt;this.onFocus())}activate(e){const t=this.get(Vs(e));t&amp;&amp;Ki(this.props.onActivate,t)}resolveEdit(e){const t=yd.editPromise;t&amp;&amp;t(e),yd.editPromise=null}get selectedIds(){return this.state.nodes.selection.ids}get selectedNodes(){let e=[];for(let t of Array.from(this.selectedIds)){const i=this.get(t);i&amp;&amp;e.push(i)}return e}focus(e,t={}){e&amp;&amp;(this.props.selectionFollowsFocus?this.select(e):(this.dispatch(Wu(Qo(e))),t.scroll!==!1&amp;&amp;this.scrollTo(e),this.focusedNode&amp;&amp;Ki(this.props.onFocus,this.focusedNode)))}pageUp(){var e,t;const i=this.visibleStartIndex,s=this.visibleStopIndex-i;let o=(t=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&amp;&amp;t!==void 0?t:0;o&gt;i?o=i:o=Math.max(i-s,0),this.focus(this.at(o))}pageDown(){var e,t;const i=this.visibleStartIndex,r=this.visibleStopIndex,s=r-i;let o=(t=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&amp;&amp;t!==void 0?t:0;o&lt;r?o=r:o=Math.min(o+s,this.visibleNodes.length-1),this.focus(this.at(o))}select(e,t={}){if(!e)return;const i=t.focus!==!1,r=Qo(e);i&amp;&amp;this.dispatch(Wu(r)),this.dispatch(Hs.only(r)),this.dispatch(Hs.anchor(r)),this.dispatch(Hs.mostRecent(r)),this.scrollTo(r,t.align),this.focusedNode&amp;&amp;i&amp;&amp;Ki(this.props.onFocus,this.focusedNode),Ki(this.props.onSelect,this.selectedNodes)}deselect(e){if(!e)return;const t=Qo(e);this.dispatch(Hs.remove(t)),Ki(this.props.onSelect,this.selectedNodes)}selectMulti(e){const t=this.get(Vs(e));t&amp;&amp;(this.dispatch(Wu(t.id)),this.dispatch(Hs.add(t.id)),this.dispatch(Hs.anchor(t.id)),this.dispatch(Hs.mostRecent(t.id)),this.scrollTo(t),this.focusedNode&amp;&amp;Ki(this.props.onFocus,this.focusedNode),Ki(this.props.onSelect,this.selectedNodes))}selectContiguous(e){if(!e)return;const t=Qo(e),{anchor:i,mostRecent:r}=this.state.nodes.selection;this.dispatch(Wu(t)),this.dispatch(Hs.remove(this.nodesBetween(i,r))),this.dispatch(Hs.add(this.nodesBetween(i,Vs(t)))),this.dispatch(Hs.mostRecent(t)),this.scrollTo(t),this.focusedNode&amp;&amp;Ki(this.props.onFocus,this.focusedNode),Ki(this.props.onSelect,this.selectedNodes)}deselectAll(){this.setSelection({ids:[],anchor:null,mostRecent:null}),Ki(this.props.onSelect,this.selectedNodes)}selectAll(){var e;this.setSelection({ids:Object.keys(this.idToIndex),anchor:this.firstNode,mostRecent:this.lastNode}),this.dispatch(Wu((e=this.lastNode)===null||e===void 0?void 0:e.id)),this.focusedNode&amp;&amp;Ki(this.props.onFocus,this.focusedNode),Ki(this.props.onSelect,this.selectedNodes)}setSelection(e){var t;const i=new Set((t=e.ids)===null||t===void 0?void 0:t.map(Qo)),r=Vs(e.anchor),s=Vs(e.mostRecent);this.dispatch(Hs.set({ids:i,anchor:r,mostRecent:s})),Ki(this.props.onSelect,this.selectedNodes)}get cursorParentId(){const{cursor:e}=this.state.dnd;switch(e.type){case&quot;highlight&quot;:return e.id;default:return null}}get cursorOverFolder(){return this.state.dnd.cursor.type===&quot;highlight&quot;}get dragNodes(){return this.state.dnd.dragIds.map(e=&gt;this.get(e)).filter(e=&gt;!!e)}get dragNode(){return this.get(this.state.nodes.drag.id)}get dragDestinationParent(){return this.get(this.state.nodes.drag.destinationParentId)}get dragDestinationIndex(){return this.state.nodes.drag.destinationIndex}canDrop(){var e;if(this.isFiltered)return!1;const t=(e=this.get(this.state.dnd.parentId))!==null&amp;&amp;e!==void 0?e:this.root,i=this.dragNodes,r=this.props.disableDrop;for(const s of i)if(!s||!t||s.isInternal&amp;&amp;YL(t,s))return!1;return typeof r==&quot;function&quot;?!r({parentNode:t,dragNodes:this.dragNodes,index:this.state.dnd.index||0}):typeof r==&quot;string&quot;?!t.data[r]:typeof r==&quot;boolean&quot;?!r:!0}hideCursor(){this.dispatch(Eh.cursor({type:&quot;none&quot;}))}showCursor(e){this.dispatch(Eh.cursor(e))}open(e){const t=Vs(e);t&amp;&amp;(this.isOpen(t)||(this.dispatch(ZS.open(t,this.isFiltered)),Ki(this.props.onToggle,t)))}close(e){const t=Vs(e);t&amp;&amp;this.isOpen(t)&amp;&amp;(this.dispatch(ZS.close(t,this.isFiltered)),Ki(this.props.onToggle,t))}toggle(e){const t=Vs(e);if(t)return this.isOpen(t)?this.close(t):this.open(t)}openParents(e){const t=Vs(e);if(!t)return;const i=d1(this.root,t);let r=i==null?void 0:i.parent;for(;r;)this.open(r.id),r=r.parent}openSiblings(e){const t=e.parent;if(!t)this.toggle(e.id);else if(t.children){const i=e.isOpen;for(let r of t.children)r.isInternal&amp;&amp;(i?this.close(r.id):this.open(r.id));this.scrollTo(this.focusedNode)}}openAll(){Q0(this.root,e=&gt;{e.isInternal&amp;&amp;e.open()})}closeAll(){Q0(this.root,e=&gt;{e.isInternal&amp;&amp;e.close()})}scrollTo(e,t=&quot;smart&quot;){if(!e)return;const i=Qo(e);return this.openParents(i),t3(()=&gt;i in this.idToIndex).then(()=&gt;{var r;const s=this.idToIndex[i];s!==void 0&amp;&amp;((r=this.list.current)===null||r===void 0||r.scrollToItem(s,t))}).catch(()=&gt;{})}get isEditing(){return this.state.nodes.edit.id!==null}get isFiltered(){var e;return!!(!((e=this.props.searchTerm)===null||e===void 0)&amp;&amp;e.trim())}get hasFocus(){return this.state.nodes.focus.treeFocused}get hasNoSelection(){return this.state.nodes.selection.ids.size===0}get hasOneSelection(){return this.state.nodes.selection.ids.size===1}get hasMultipleSelections(){return this.state.nodes.selection.ids.size&gt;1}isSelected(e){return e?this.state.nodes.selection.ids.has(e):!1}isOpen(e){var t,i,r;if(!e)return!1;if(e===jd)return!0;const s=(t=this.props.openByDefault)!==null&amp;&amp;t!==void 0?t:!0;return this.isFiltered?(i=this.state.nodes.open.filtered[e])!==null&amp;&amp;i!==void 0?i:!0:(r=this.state.nodes.open.unfiltered[e])!==null&amp;&amp;r!==void 0?r:s}isEditable(e){const t=this.props.disableEdit||(()=&gt;!1);return!rd(e,t)}isDraggable(e){const t=this.props.disableDrag||(()=&gt;!1);return!rd(e,t)}isDragging(e){const t=Vs(e);return t?this.state.nodes.drag.id===t:!1}isFocused(e){return this.hasFocus&amp;&amp;this.state.nodes.focus.id===e}isMatch(e){return this.matchFn(e)}willReceiveDrop(e){const t=Vs(e);if(!t)return!1;const{destinationParentId:i,destinationIndex:r}=this.state.nodes.drag;return t===i&amp;&amp;r===null}onFocus(){const e=this.focusedNode||this.firstNode;e&amp;&amp;this.dispatch(Wu(e.id))}onBlur(){this.dispatch(tJ())}onItemsRendered(e){this.visibleStartIndex=e.visibleStartIndex,this.visibleStopIndex=e.visibleStopIndex}get renderContainer(){return this.props.renderContainer||M3}get renderRow(){return this.props.renderRow||$Z}get renderNode(){return this.props.children||ZZ}get renderDragPreview(){return this.props.renderDragPreview||r3}get renderCursor(){return this.props.renderCursor||KZ}}function fr(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var _ne=typeof Symbol==&quot;function&quot;&amp;&amp;Symbol.observable||&quot;@@observable&quot;,rN=_ne,sS=()=&gt;Math.random().toString(36).substring(7).split(&quot;&quot;).join(&quot;.&quot;),vne={INIT:`@@redux/INIT${sS()}`,REPLACE:`@@redux/REPLACE${sS()}`,PROBE_UNKNOWN_ACTION:()=&gt;`@@redux/PROBE_UNKNOWN_ACTION${sS()}`},ny=vne;function bne(n){if(typeof n!=&quot;object&quot;||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function C3(n,e,t){if(typeof n!=&quot;function&quot;)throw new Error(fr(2));if(typeof e==&quot;function&quot;&amp;&amp;typeof t==&quot;function&quot;||typeof t==&quot;function&quot;&amp;&amp;typeof arguments[3]==&quot;function&quot;)throw new Error(fr(0));if(typeof e==&quot;function&quot;&amp;&amp;typeof t&gt;&quot;u&quot;&amp;&amp;(t=e,e=void 0),typeof t&lt;&quot;u&quot;){if(typeof t!=&quot;function&quot;)throw new Error(fr(1));return t(C3)(n,e)}let i=n,r=e,s=new Map,o=s,l=0,u=!1;function h(){o===s&amp;&amp;(o=new Map,s.forEach((b,_)=&gt;{o.set(_,b)}))}function f(){if(u)throw new Error(fr(3));return r}function p(b){if(typeof b!=&quot;function&quot;)throw new Error(fr(4));if(u)throw new Error(fr(5));let _=!0;h();const T=l++;return o.set(T,b),function(){if(_){if(u)throw new Error(fr(6));_=!1,h(),o.delete(T),s=null}}}function m(b){if(!bne(b))throw new Error(fr(7));if(typeof b.type&gt;&quot;u&quot;)throw new Error(fr(8));if(typeof b.type!=&quot;string&quot;)throw new Error(fr(17));if(u)throw new Error(fr(9));try{u=!0,r=i(r,b)}finally{u=!1}return(s=o).forEach(T=&gt;{T()}),b}function g(b){if(typeof b!=&quot;function&quot;)throw new Error(fr(10));i=b,m({type:ny.REPLACE})}function v(){const b=p;return{subscribe(_){if(typeof _!=&quot;object&quot;||_===null)throw new Error(fr(11));function T(){const S=_;S.next&amp;&amp;S.next(f())}return T(),{unsubscribe:b(T)}},[rN](){return this}}}return m({type:ny.INIT}),{dispatch:m,subscribe:p,getState:f,replaceReducer:g,[rN]:v}}function xne(n){Object.keys(n).forEach(e=&gt;{const t=n[e];if(typeof t(void 0,{type:ny.INIT})&gt;&quot;u&quot;)throw new Error(fr(12));if(typeof t(void 0,{type:ny.PROBE_UNKNOWN_ACTION()})&gt;&quot;u&quot;)throw new Error(fr(13))})}function sN(n){const e=Object.keys(n),t={};for(let s=0;s&lt;e.length;s++){const o=e[s];typeof n[o]==&quot;function&quot;&amp;&amp;(t[o]=n[o])}const i=Object.keys(t);let r;try{xne(t)}catch(s){r=s}return function(o={},l){if(r)throw r;let u=!1;const h={};for(let f=0;f&lt;i.length;f++){const p=i[f],m=t[p],g=o[p],v=m(g,l);if(typeof v&gt;&quot;u&quot;)throw l&amp;&amp;l.type,new Error(fr(14));h[p]=v,u=u||v!==g}return u=u||i.length!==Object.keys(o).length,u?h:o}}function Sne(n=wh().nodes.drag,e){switch(e.type){case&quot;DND_DRAG_START&quot;:return Object.assign(Object.assign({},n),{id:e.id,selectedIds:e.dragIds});case&quot;DND_DRAG_END&quot;:return Object.assign(Object.assign({},n),{id:null,destinationParentId:null,destinationIndex:null,selectedIds:[]});case&quot;DND_HOVERING&quot;:return e.parentId!==n.destinationParentId||e.index!=n.destinationIndex?Object.assign(Object.assign({},n),{destinationParentId:e.parentId,destinationIndex:e.index}):n;default:return n}}const wne=sN({nodes:sN({focus:nJ,edit:eJ,open:iJ,selection:rJ,drag:Sne}),dnd:sJ}),Ene=wh();function Tne({treeProps:n,imperativeHandle:e,children:t}){const i=re.useRef(null),r=re.useRef(null),s=re.useRef(C3(wne,wh(n))),o=FZ.useSyncExternalStore(s.current.subscribe,s.current.getState,()=&gt;Ene),l=re.useMemo(()=&gt;new yd(s.current,n,i,r),[]),u=re.useRef(0);return re.useMemo(()=&gt;{u.current+=1,l.update(n)},[...Object.values(n),o.nodes.open]),re.useImperativeHandle(e,()=&gt;l),re.useEffect(()=&gt;{l.props.selection?l.select(l.props.selection,{focus:!1}):l.deselectAll()},[l.props.selection]),re.useEffect(()=&gt;{l.props.searchTerm||s.current.dispatch(ZS.clear(!0))},[l.props.searchTerm]),I.jsx(BL.Provider,{value:l,children:I.jsx(GL.Provider,{value:u.current,children:I.jsx(HL.Provider,{value:o.nodes,children:I.jsx(VL.Provider,{value:o.dnd,children:I.jsx(aee,Object.assign({backend:lne,options:{rootElement:l.props.dndRootElement||void 0}},n.dndManager&amp;&amp;{manager:n.dndManager},{children:t}))})})})})}function Mne(){const n=ls(),[,e]=y3(()=&gt;({accept:&quot;NODE&quot;,canDrop:(t,i)=&gt;i.isOver({shallow:!0})?n.canDrop():!1,hover:(t,i)=&gt;{if(!i.isOver({shallow:!0}))return;const r=i.getClientOffset();if(!n.listEl.current||!r)return;const{cursor:s,drop:o}=T3({element:n.listEl.current,offset:r,indent:n.indent,node:null,prevNode:n.visibleNodes[n.visibleNodes.length-1],nextNode:null});o&amp;&amp;n.dispatch(Eh.hovering(o.parentId,o.index)),i.canDrop()?s&amp;&amp;n.showCursor(s):n.hideCursor()}}),[n]);e(n.listEl)}function Ane(n){return Mne(),n.children}function Cne(){const e=ls().props.renderContainer||M3;return I.jsx(I.Fragment,{children:I.jsx(e,{})})}function Rne(){const n=ls(),{offset:e,mouse:t,item:i,isDragging:r}=Ite(o=&gt;({offset:o.getSourceClientOffset(),mouse:o.getClientOffset(),item:o.getItem(),isDragging:o.isDragging()})),s=n.props.renderDragPreview||r3;return I.jsx(s,{offset:e,mouse:t,id:(i==null?void 0:i.id)||null,dragIds:(i==null?void 0:i.dragIds)||[],isDragging:r})}class One{constructor(e){this.root=Nne(e)}get data(){var e,t;return(t=(e=this.root.children)===null||e===void 0?void 0:e.map(i=&gt;i.data))!==null&amp;&amp;t!==void 0?t:[]}create(e){const t=e.parentId?this.find(e.parentId):this.root;if(!t)return null;t.addChild(e.data,e.index)}move(e){const t=this.find(e.id),i=e.parentId?this.find(e.parentId):this.root;!t||!i||(i.addChild(t.data,e.index),t.drop())}update(e){const t=this.find(e.id);t&amp;&amp;t.update(e.changes)}drop(e){const t=this.find(e.id);t&amp;&amp;t.drop()}find(e,t=this.root){if(!t)return null;if(t.id===e)return t;if(t.children){for(let i of t.children){const r=this.find(e,i);if(r)return r}return null}return null}}function Nne(n){const e=new R3({id:&quot;ROOT&quot;},null);return e.children=n.map(t=&gt;b1(t,e)),e}function b1(n,e){const t=new R3(n,e);return n.children&amp;&amp;(t.children=n.children.map(i=&gt;b1(i,t))),t}class R3{constructor(e,t){this.data=e,this.parent=t,this.id=e.id}hasParent(){return!!this.parent}get childIndex(){return this.hasParent()?this.parent.children.indexOf(this):-1}addChild(e,t){var i,r;const s=b1(e,this);this.children=(i=this.children)!==null&amp;&amp;i!==void 0?i:[],this.children.splice(t,0,s),this.data.children=(r=this.data.children)!==null&amp;&amp;r!==void 0?r:[],this.data.children.splice(t,0,e)}removeChild(e){var t,i;(t=this.children)===null||t===void 0||t.splice(e,1),(i=this.data.children)===null||i===void 0||i.splice(e,1)}update(e){if(this.hasParent()){const t=this.childIndex;this.parent.addChild(Object.assign(Object.assign({},this.data),e),t),this.drop()}}drop(){this.hasParent()&amp;&amp;this.parent.removeChild(this.childIndex)}}let Dne=0;function Ine(n){const[e,t]=re.useState(n),i=re.useMemo(()=&gt;new One(e),[e]);return[e,{onMove:h=&gt;{for(const f of h.dragIds)i.move({id:f,parentId:h.parentId,index:h.index});t(i.data)},onRename:({name:h,id:f})=&gt;{i.update({id:f,changes:{name:h}}),t(i.data)},onCreate:({parentId:h,index:f,type:p})=&gt;{const m={id:`simple-tree-id-${Dne++}`,name:&quot;&quot;};return p===&quot;internal&quot;&amp;&amp;(m.children=[]),i.create({parentId:h,index:f,data:m}),t(i.data),m},onDelete:h=&gt;{h.ids.forEach(f=&gt;i.drop({id:f})),t(i.data)}}]}function Pne(n){if(n.initialData&amp;&amp;n.data)throw new Error(&quot;React Arborist Tree =&gt; Provide either a data or initialData prop, but not both.&quot;);if(n.initialData&amp;&amp;(n.onCreate||n.onDelete||n.onMove||n.onRename))throw new Error(`React Arborist Tree =&gt; You passed the initialData prop along with a data handler.
Use the data prop if you want to provide your own handlers.`);if(n.initialData){const[e,t]=Ine(n.initialData);return Object.assign(Object.assign(Object.assign({},n),t),{data:e})}else return n}function Lne(n,e){const t=Pne(n);return I.jsxs(Tne,{treeProps:t,imperativeHandle:e,children:[I.jsx(Ane,{children:I.jsx(Cne,{})}),I.jsx(Rne,{})]})}const Une=re.forwardRef(Lne),kne=({style:n,node:e,dragHandle:t})=&gt;{const{data:i,isSelected:r,isOpen:s,children:o}=e;let l=!1;return o&amp;&amp;o.length&gt;0&amp;&amp;(l=!0),I.jsxs(&quot;div&quot;,{style:n,ref:t,className:`flex items-center cursor-pointer mr-1 my-1 rounded ${r?&quot;bg-blue-700&quot;:&quot;&quot;}`,children:[l&amp;&amp;I.jsx(&quot;div&quot;,{onClick:u=&gt;{u.stopPropagation(),e.toggle()},className:&quot;mr-2&quot;,children:s?&quot;â¼&quot;:&quot;â¶&quot;}),I.jsx(&quot;div&quot;,{className:&quot;whitespace-nowrap&quot;,children:i.name})]})};async function O3(n,e){if(e.push(n),n.children!=null&amp;&amp;n.children.length&gt;0)for(let t of n.children)await O3(t,e)}async function Fne(n){var t;let e=[];for(let i of n){let r=i.data.rangeId,s=i.data.node_name,o=(t=yl.current)==null?void 0:t.get(i.data.model_key);if(!o){console.warn(&quot;No scene found for node:&quot;,i);continue}let l=o.getObjectByName(s);!l&amp;&amp;(l=o.getObjectByName(i.data.name.replace(&quot;/&quot;,&quot;&quot;)),!l)||e.push([l,r])}return e}async function zne(n){const e=eo.getState();if(n.length&gt;0){let t=[];for(let o of n)await O3(o,t);let i=await Fne(t);e.clearSelectedObjects(),e.addBatchofMeshes(i);const s=t[t.length-1].data.name;Rs.getState().setName(s)}else e.clearSelectedObjects()}const Bne=()=&gt;{const{treeData:n,setTree:e,searchTerm:t}=Tl(),[i,r]=re.useState(800),s=re.useRef(null),o=re.useRef(null),l=re.useRef(null),u=n?[{id:&quot;root&quot;,name:&quot;scene&quot;,children:[n]}]:[{id:&quot;root&quot;,name:&quot;scene&quot;,children:[]}];re.useEffect(()=&gt;{const f=()=&gt;{if(o.current&amp;&amp;l.current){const m=o.current.offsetHeight,g=l.current.offsetHeight;r(m-g)}},p=new ResizeObserver(()=&gt;f());return o.current&amp;&amp;p.observe(o.current),f(),()=&gt;{p.disconnect()}},[]),re.useEffect(()=&gt;{if(s.current){const f=s.current;e(f)}},[]);const h=f=&gt;{var p;(p=s.current)!=null&amp;&amp;p.isProgrammaticChange||(async()=&gt;await zne(f))()};return I.jsxs(&quot;div&quot;,{ref:o,className:&quot;h-full w-full flex flex-col max-h-screen pl-1 pr-2&quot;,children:[I.jsx(&quot;div&quot;,{ref:l,className:&quot;w-full pr-1 pt-1&quot;,children:I.jsx(&quot;input&quot;,{className:&quot;w-full bg-gray-600 text-white rounded pl-1&quot;,placeholder:&quot;Search here&quot;,onInput:f=&gt;{Tl.getState().setSearchTerm(f.target.value)}})}),I.jsx(&quot;div&quot;,{children:I.jsx(Une,{className:&quot;text-white scrollbar&quot;,width:&quot;100%&quot;,height:i,selectionFollowsFocus:!0,data:u,ref:s,disableDrag:!0,disableDrop:!0,disableEdit:!0,openByDefault:!1,disableMultiSelection:!1,searchTerm:t,searchMatch:(f,p)=&gt;f.data.name.toLowerCase().includes(p.toLowerCase()),onSelect:f=&gt;{h(f)},children:kne})})]})},Hne=()=&gt;{const[n,e]=re.useState(256),t=re.useRef(!1),{isTreeCollapsed:i}=Tl(),r=s=&gt;{if(i)return;t.current=!0;const o=s.clientX,l=n,u=f=&gt;{if(!t.current)return;const p=Math.min(400,Math.max(200,l+f.clientX-o));e(p)},h=()=&gt;{t.current=!1,window.removeEventListener(&quot;mousemove&quot;,u),window.removeEventListener(&quot;mouseup&quot;,h)};window.addEventListener(&quot;mousemove&quot;,u),window.addEventListener(&quot;mouseup&quot;,h)};return I.jsx(&quot;div&quot;,{className:&quot;relative flex h-full&quot;,children:!i&amp;&amp;I.jsxs(&quot;div&quot;,{style:{width:`${n}px`},className:&quot;flex-grow-0 flex-shrink-0 h-full bg-gray-800 overflow-auto relative&quot;,children:[I.jsx(Bne,{}),I.jsx(&quot;div&quot;,{className:&quot;absolute top-0 right-0 w-2 h-full cursor-ew-resize bg-gray-600&quot;,onMouseDown:r})]})})},Vne=n=&gt;I.jsx(&quot;svg&quot;,{fill:&quot;#ffffff&quot;,width:&quot;12px&quot;,height:&quot;12px&quot;,viewBox:&quot;0 0 24 24&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,enableBackground:&quot;new 0 0 24 24&quot;,children:I.jsx(&quot;path&quot;,{d:&quot;M8.5,6H6.7C8.2,4.7,10,4,12,4c0.3,0,0.6,0,0.9,0.1c0,0,0,0,0,0c0.5,0.1,1-0.3,1.1-0.9c0.1-0.5-0.3-1-0.9-1.1C12.7,2,12.4,2,12,2C9.6,2,7.3,2.9,5.5,4.4V3c0-0.6-0.4-1-1-1s-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1S9.1,6,8.5,6z M7,14.5c-0.6,0-1,0.4-1,1v1.8C4.7,15.8,4,14,4,12c0-0.3,0-0.6,0.1-0.9c0,0,0,0,0,0c0.1-0.5-0.3-1-0.9-1.1c-0.5-0.1-1,0.3-1.1,0.9C2,11.3,2,11.6,2,12c0,2.4,0.9,4.7,2.4,6.5H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h4c0.3,0,0.6-0.2,0.8-0.4c0,0,0,0,0,0c0,0,0,0,0,0c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.1,0-0.2c0,0,0-0.1,0-0.1v-4C8,14.9,7.6,14.5,7,14.5z M21,5.5c0.6,0,1-0.4,1-1s-0.4-1-1-1h-4c-0.1,0-0.1,0-0.2,0c0,0,0,0,0,0c-0.1,0-0.2,0.1-0.3,0.1c0,0,0,0,0,0c-0.1,0.1-0.2,0.1-0.2,0.2c0,0,0,0,0,0c0,0,0,0,0,0c0,0.1-0.1,0.2-0.1,0.2c0,0.1,0,0.1,0,0.2c0,0,0,0.1,0,0.1v4c0,0.6,0.4,1,1,1s1-0.4,1-1V6.7c1.3,1.4,2,3.3,2,5.3c0,0.3,0,0.6-0.1,0.9c-0.1,0.5,0.3,1,0.9,1.1c0,0,0.1,0,0.1,0c0.5,0,0.9-0.4,1-0.9c0-0.4,0.1-0.7,0.1-1.1c0-2.4-0.9-4.7-2.4-6.5H21z M20.3,16.5c-0.1-0.1-0.2-0.2-0.3-0.3c0,0,0,0,0,0c0,0,0,0,0,0c-0.1-0.1-0.2-0.1-0.3-0.1c0,0-0.1,0-0.1,0c0,0-0.1,0-0.1,0h-4c-0.6,0-1,0.4-1,1s0.4,1,1,1h1.8c-1.4,1.3-3.3,2-5.3,2c-0.3,0-0.6,0-0.9-0.1c0,0,0,0,0,0c-0.5-0.1-1,0.3-1.1,0.9s0.3,1,0.9,1.1c0.4,0,0.7,0.1,1.1,0.1c2.4,0,4.7-0.9,6.5-2.4V21c0,0.6,0.4,1,1,1s1-0.4,1-1v-4C20.5,16.8,20.4,16.6,20.3,16.5C20.3,16.5,20.3,16.5,20.3,16.5z&quot;})}),Gne=n=&gt;I.jsxs(&quot;svg&quot;,{width:&quot;12px&quot;,height:&quot;12px&quot;,viewBox:&quot;0 0 16 16&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[I.jsx(&quot;path&quot;,{d:&quot;M4.70711 12.7071L8 16L11.2929 12.7071L8 9.41421L4.70711 12.7071Z&quot;,fill:&quot;#ffffff&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M3.29289 11.2929L6.58579 8L3.29289 4.70711L0 8L3.29289 11.2929Z&quot;,fill:&quot;#ffffff&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M4.70711 3.29289L8 0L11.2929 3.29289L8 6.58579L4.70711 3.29289Z&quot;,fill:&quot;#ffffff&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M12.7071 4.70711L9.41421 8L12.7071 11.2929L16 8L12.7071 4.70711Z&quot;,fill:&quot;#ffffff&quot;})]});function jne({label:n,onRun:e,is_component:t}){return I.jsxs(&quot;div&quot;,{className:&quot;bg-gray-800 flex flex-col justify-center items-center rounded-t&quot;,children:[I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;flex px-1&quot;,children:t?I.jsx(Gne,{}):I.jsx(Vne,{})}),I.jsx(&quot;div&quot;,{className:&quot;flex text-center text-xs&quot;,children:n})]}),I.jsx(&quot;button&quot;,{className:&quot;nodrag flex relative bg-blue-700 hover:bg-blue-700/50 text-white text-xs px-4 rounded&quot;,onClick:e,children:&quot;Run&quot;})]})}const N3=({id:n,type:e,label:t,isConnectable:i=!0,style:r={position:&quot;absolute&quot;,background:&quot;#5aaf1a&quot;},onConnect:s,left_side:o=!0})=&gt;o?I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:[I.jsx(&quot;span&quot;,{className:&quot;m-auto ml-0 mr-0 relative&quot;,children:I.jsx(Ml,{type:e,id:n,position:Mt.Left,style:r,isConnectable:i,onConnect:s})}),I.jsx(&quot;span&quot;,{className:&quot;pl-2 text-xs text-gray-300&quot;,children:t})]}):I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:[I.jsx(&quot;span&quot;,{className:&quot;pl-1 text-center text-xs text-gray-300&quot;,children:t}),I.jsx(&quot;span&quot;,{className:&quot;m-auto ml-1 mr-0 relative&quot;,children:I.jsx(Ml,{type:e,id:n,position:Mt.Right,style:r,isConnectable:i,onConnect:s})})]});function Wne({param:n,paramId:e,paramName:t,paramDefaultValue:i,paramOptions:r}){var s,o;switch(n.type){case ii.STRING:const l=((s=i==null?void 0:i.stringValue)==null?void 0:s.toString())||&quot;&quot;;return I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center ml-1&quot;,id:e,children:[r&amp;&amp;r.length&gt;0?I.jsx(&quot;select&quot;,{defaultValue:l,className:&quot;nodrag m-auto ml-0 mr-0 text-gray-800 text-xs w-24 border border-gray-400 rounded&quot;,children:r.map((f,p)=&gt;I.jsx(&quot;option&quot;,{value:f.stringValue,children:f.stringValue},p))}):I.jsx(&quot;input&quot;,{type:&quot;text&quot;,defaultValue:l,className:&quot;nodrag m-auto ml-0 mr-0 text-gray-200 text-xs w-20 border border-gray-400 rounded bg-gray-800 p-0.5&quot;}),I.jsx(&quot;span&quot;,{className:&quot;pl-2 text-xs text-gray-300&quot;,children:t})]});case ii.FLOAT:const u=i==null?void 0:i.floatValue;return I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center w-26 ml-1&quot;,id:e,children:[r&amp;&amp;r.length&gt;0?I.jsx(&quot;select&quot;,{defaultValue:u,className:&quot;nodrag m-auto ml-0 mr-0 text-xs text-gray-200 bg-gray-800 p-0.5 w-24 border border-gray-400 rounded&quot;,children:r.map((f,p)=&gt;I.jsx(&quot;option&quot;,{value:f.floatValue,children:f.floatValue},p))}):I.jsx(&quot;input&quot;,{type:&quot;number&quot;,defaultValue:u!=null?u.toFixed(4):&quot;&quot;,className:&quot;flex flex-1 nodrag m-auto ml-0 mr-0 text-xs text-gray-200 bg-gray-800 p-0.5 w-20 border border-gray-400 rounded&quot;}),I.jsx(&quot;span&quot;,{className:&quot;flex-1 pl-2 text-xs text-gray-300&quot;,children:t})]});case ii.ARRAY:const h=i==null?void 0:i.arrayValueType;if(((o=n.defaultValue)==null?void 0:o.arrayAnyLength)===!1){const f=[];for(let p=0;p&lt;(i==null?void 0:i.arrayLength);p++){const m=i.arrayValue[p];m&amp;&amp;f.push(h===ii.FLOAT?m.floatValue:m.stringValue)}return I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center w-24 ml-1&quot;,id:e,children:[f.slice(0,3).map((p,m)=&gt;I.jsx(&quot;input&quot;,{type:&quot;number&quot;,defaultValue:typeof p==&quot;number&quot;?p.toFixed(3):&quot;&quot;,className:&quot;nodrag flex m-auto text-gray-800 border text-xs border-gray-400 rounded max-w-8&quot;},m)),I.jsx(&quot;span&quot;,{className:&quot;flex flex-1 pl-2 text-xs text-gray-300&quot;,children:t})]})}else{let f=&quot;&quot;;return h===ii.FLOAT?f=&quot;1.0;2.0;3.0&quot;:h===ii.INTEGER?f=&quot;1;2;3&quot;:console.error(`Unknown array value type: ${h}`),I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center ml-1&quot;,id:e,children:[I.jsx(&quot;input&quot;,{type:&quot;text&quot;,pattern:&quot;[0-9]+(\\.[0-9]+)?(;\\s*[0-9]+(\\.[0-9]+)?)*&quot;,defaultValue:i==null?void 0:i.stringValue(),placeholder:f,className:&quot;nodrag m-auto ml-0 mr-0 text-gray-800 text-xs w-24 border border-gray-400 rounded&quot;}),I.jsx(&quot;span&quot;,{className:&quot;pl-2 text-xs text-gray-300&quot;,children:t})]})}default:return console.error(`Unknown parameter type: ${n.type}`),null}}function Xne({id:n,data:e}){const t=e.procedure,i=t.parameters.length,r=e.fileInputsMap,s=e.fileOutputsMap,o=[];for(let l=0;l&lt;i;l++){const u=t.parameters[l],h=u.name;h&amp;&amp;(r[h.toString()]?o.unshift(u):o.push(u))}return!i&amp;&amp;t.fileInputs.length===0?null:I.jsx(I.Fragment,{children:Array.from({length:i}).map((l,u)=&gt;{var T;const h=o[u];if(!h)return null;const f=(T=h.name)==null?void 0:T.toString();if(!f||s[f])return null;e.paramids||(e.paramids=[]);const p=e.paramids,m=h.defaultValue;let g=h.options.length,v=null;if(g&gt;0){v=[];for(let w=0;w&lt;g;w++)v[w]=h.options[w]}const x=t.name;if(!x)return console.error(&quot;Procedure name is not defined&quot;),null;const b=`${x}-${u}`,_=`param-${f}-${b}`;return p.includes(_)||p.push(_),r[f]?I.jsx(N3,{id:_,type:&quot;source&quot;,label:f||`Param ${u+1}`},b):I.jsx(Wne,{param:h,paramId:_,paramName:f,paramDefaultValue:m,paramOptions:v},b)})})}function qne(n,e,t){var s,o;let i={};for(let l=0;l&lt;t.parameters.length;l++){let u=t.parameters[l],h=((s=u.name)==null?void 0:s.toString())||&quot;&quot;;i[h]=u}let r=[];for(let l of e){let u=document.getElementById(l);if(!u)continue;let h=u.getElementsByTagName(&quot;span&quot;)[0].innerText,f=i[h],p=f.type,m=ii[p],g=null;f.options.length&gt;0?g=u.getElementsByTagName(&quot;select&quot;):g=u.getElementsByTagName(&quot;input&quot;);let v=n.createString(h);if(g.length==1){let b=g[0].value,_=null;if(f.type===ii.STRING){let w=n.createString(b);Ht.startValue(n),Ht.addStringValue(n,w),_=Ht.endValue(n)}else if(f.type===ii.FLOAT){let w=parseFloat(b);Ht.startValue(n),Ht.addFloatValue(n,w),_=Ht.endValue(n)}else if(f.type===ii.INTEGER){let w=parseInt(b);Ht.startValue(n),Ht.addIntegerValue(n,w),_=Ht.endValue(n)}else if(f.type===ii.BOOLEAN){let w=b===&quot;true&quot;;Ht.startValue(n),Ht.addBooleanValue(n,w),_=Ht.endValue(n)}else{console.log(&quot;Unknown parameter type: &quot;,m);continue}Nn.startParameter(n),Nn.addName(n,v),Nn.addValue(n,_),Nn.addType(n,p);let T=Nn.endParameter(n);r.push(T);continue}else if(g.length&gt;1){let b=[],_=(o=f.defaultValue)==null?void 0:o.arrayValueType;for(let C of g){let O=C.value;if(Ht.startValue(n),_===ii.STRING){let N=n.createString(O);Ht.addStringValue(n,N)}else _===ii.FLOAT?Ht.addFloatValue(n,parseFloat(O)):_===ii.INTEGER?Ht.addIntegerValue(n,parseInt(O)):_===ii.BOOLEAN&amp;&amp;Ht.addBooleanValue(n,O===&quot;true&quot;);let M=Ht.endValue(n);b.push(M)}let T=Ht.createArrayValueVector(n,b);Ht.startValue(n),Ht.addArrayValue(n,T),_&amp;&amp;Ht.addArrayValueType(n,_);let w=Ht.endValue(n);Nn.startParameter(n),Nn.addName(n,v),Nn.addValue(n,w),Nn.addType(n,ii.ARRAY);let S=Nn.endParameter(n);r.push(S);continue}if(u.tagName===&quot;INPUT&quot;){Nn.startParameter(n);let b=Nn.endParameter(n);r.push(b);continue}u.getElementsByTagName(&quot;input&quot;)[0]&amp;&amp;r.push()}return r}async function Yne(n){var g,v,x,b,_;const e=Js.getState().nodes,t=Js.getState().edges,i=e.find(T=&gt;T.id===n.id);if(!i){console.error(&quot;Could not find this procedure node&quot;);return}let r=new Co(1024),s=r.createString(((v=(g=i.data)==null?void 0:g.label)==null?void 0:v.toString())||&quot;&quot;),o=[],l=n.data.procedure;const u=t.filter(T=&gt;T.target.startsWith(&quot;file-object&quot;));if(u.length===0){console.error(&quot;No file object connected to this procedure&quot;);return}for(let T=0;T&lt;u.length;T++){const w=u[T],S=e.find(M=&gt;M.id===w.target);if(!S)continue;const C=(x=w.sourceHandle)==null?void 0:x.split(&quot;-&quot;)[1];let O=(b=S.data.filepath)==null?void 0:b.toString();console.log(S);for(let M=0;M&lt;l.fileInputs.length;M++){const N=l.fileInputs[M];if(C!==N.argName)continue;const R=(_=N.argName)==null?void 0:_.toString();let D=r.createString(O),L=r.createString(R);Ht.startValue(r),Ht.addStringValue(r,D);let H=Ht.endValue(r);Nn.startParameter(r),Nn.addName(r,L),Nn.addValue(r,H);let q=Nn.endParameter(r);o.push(q)}}if(n.data.paramids){let T=qne(r,n.data.paramids,l);T&amp;&amp;o.push(...T)}let h=Zi.createParametersVector(r,o),f=r.createString(n.id.toString());Zi.startProcedureStart(r),Zi.addProcedureName(r,s),Zi.addProcedureIdString(r,f),Zi.addParameters(r,h);let p=Zi.endProcedureStart(r);Es.startProcedureStore(r),Es.addStartProcedure(r,p);let m=Es.endProcedureStore(r);lt.startMessage(r),window.TARGET_INSTANCE_ID?(console.log(&quot;Overriding TARGET_ID:&quot;,window.TARGET_INSTANCE_ID),lt.addInstanceId(r,window.TARGET_INSTANCE_ID)):lt.addInstanceId(r,Mi.instance_id),lt.addCommandType(r,Bn.RUN_PROCEDURE),lt.addTargetGroup(r,si.SERVER),lt.addClientType(r,si.WEB),lt.addProcedureStore(r,m),r.finish(lt.endMessage(r)),await Mi.sendMessage(r.asUint8Array())}function Kne({id:n,data:e}){return I.jsxs(&quot;div&quot;,{className:&quot;bg-bl-background text-gray-200 rounded min-w-40 h-30&quot;,children:[I.jsx(jne,{is_component:e.procedure.isComponent,label:e.label,onRun:()=&gt;Yne({id:n,data:e})}),I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row w-full h-full py-2&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;flex flex-1 flex-col&quot;,children:I.jsx(Xne,{id:n,data:e})}),I.jsx(&quot;div&quot;,{className:&quot;flex flex-col&quot;,children:I.jsx(N3,{id:`${n}-file_object_output`,type:&quot;target&quot;,label:&quot;output_file&quot;,left_side:!1},`procedure-${n}-output`)})]})]})}const $ne=re.memo(Kne);async function Zne(n){console.log(&quot;start_file_in_local_app&quot;+n.name());let e=new Co(1024),t=e.createString(n.name()),i=e.createString(n.filepath());fn.startFileObject(e),fn.addName(e,t),fn.addFilepath(e,i);let r=fn.endFileObject(e);hi.startServer(e),hi.addStartFileInLocalApp(e,r);let s=hi.endServer(e);lt.startMessage(e),lt.addInstanceId(e,Mi.instance_id),lt.addCommandType(e,Bn.START_FILE_IN_LOCAL_APP),lt.addTargetGroup(e,si.SERVER),lt.addClientType(e,si.WEB),lt.addServer(e,s),e.finish(lt.endMessage(e)),await Mi.sendMessage(e.asUint8Array())}async function Jne(n){console.log(&quot;get_file_object_from_server&quot;+n.name());let e=new Co(1024);if(n.fileType()!==To.IFC){await Zne(n);return}let t=n.glbFile();if(!t){console.log(&quot;No GLB file found in the file object&quot;);return}let i=e.createString(t.name());hi.startServer(e),hi.addGetFileObjectByName(e,i);let r=hi.endServer(e);lt.startMessage(e),lt.addInstanceId(e,Mi.instance_id),lt.addCommandType(e,Bn.VIEW_FILE_OBJECT),lt.addTargetGroup(e,si.SERVER),lt.addClientType(e,si.WEB),lt.addServer(e,r),e.finish(lt.endMessage(e)),await Mi.sendMessage(e.asUint8Array())}const Qne=n=&gt;I.jsxs(&quot;svg&quot;,{width:&quot;12px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;#000000&quot;,children:[I.jsx(&quot;path&quot;,{d:&quot;M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;})]}),eie=n=&gt;I.jsxs(&quot;svg&quot;,{width:&quot;12px&quot;,height:&quot;12px&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[I.jsx(&quot;path&quot;,{d:&quot;M15.0007 12C15.0007 13.6569 13.6576 15 12.0007 15C10.3439 15 9.00073 13.6569 9.00073 12C9.00073 10.3431 10.3439 9 12.0007 9C13.6576 9 15.0007 10.3431 15.0007 12Z&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),I.jsx(&quot;path&quot;,{d:&quot;M12.0012 5C7.52354 5 3.73326 7.94288 2.45898 12C3.73324 16.0571 7.52354 19 12.0012 19C16.4788 19 20.2691 16.0571 21.5434 12C20.2691 7.94291 16.4788 5 12.0012 5Z&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;2&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;})]});function tie(n){return I.jsxs(&quot;div&quot;,{className:&quot;bg-bl-background text-gray-200 rounded-md min-w-24&quot;,children:[I.jsxs(&quot;div&quot;,{className:&quot;bg-gray-800 flex flex-row justify-center items-center px-1 rounded-t&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;flex-1&quot;,children:I.jsx(Qne,{})}),I.jsx(&quot;div&quot;,{className:&quot;flex-1 text-center text-xs&quot;,children:n.data.label.toString()}),I.jsxs(&quot;div&quot;,{className:&quot;flex-1 text-xs&quot;,children:[&quot; [&quot;,n.data.filetype.toString(),&quot;]&quot;]})]}),I.jsx(&quot;div&quot;,{className:&quot;flex justify-center items-center text-xs p-1&quot;,children:I.jsx(&quot;button&quot;,{className:&quot;nodrag bg-blue-500 hover:bg-blue-700 text-white p-1 rounded&quot;,onClick:()=&gt;{Jne(n.data.fileobject)},children:I.jsx(eie,{})})}),I.jsxs(&quot;div&quot;,{className:&quot;flex flex-col&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:I.jsx(&quot;span&quot;,{className:&quot;m-auto mr-0&quot;,children:I.jsx(Ml,{type:&quot;target&quot;,id:`${n.id}-file_object_out`,position:Mt.Right,style:{position:&quot;absolute&quot;,background:&quot;#555&quot;},isConnectable:!0})})}),n.data.isProcedureOutput&amp;&amp;I.jsx(&quot;span&quot;,{className:&quot;m-auto mr-0&quot;,children:I.jsx(Ml,{type:&quot;source&quot;,id:`${n.id}-procedure_in`,position:Mt.Left,style:{position:&quot;absolute&quot;,background:&quot;#555&quot;},isConnectable:!0})})]})]})}const nie=re.memo(tie);async function iie(n){n.nodes.length&gt;0&amp;&amp;await rie(n.nodes),n.edges.length&gt;0&amp;&amp;await sie(n.edges)}async function rie(n){for(const e of n)e.type==&quot;file_object&quot;&amp;&amp;await oie(e),console.log(&quot;onDelete node&quot;,e)}async function sie(n){console.log(&quot;onDelete edges&quot;,n)}async function oie(n){console.log(&quot;Deleting file object&quot;,n);let e=new Co(1024),t=n.data.fileobject,i=e.createString(t.name()),r=e.createString(t.filepath());fn.startFileObject(e),fn.addName(e,i),fn.addFilepath(e,r),fn.addFileType(e,t.fileType()),fn.addGlbFile(e,t.glbFile()),fn.addIfcsqliteFile(e,t.ifcsqliteFile());let s=fn.endFileObject(e);hi.startServer(e),hi.addDeleteFileObject(e,s);let o=hi.endServer(e);lt.startMessage(e),lt.addServer(e,o),lt.addInstanceId(e,Mi.instance_id),lt.addCommandType(e,Bn.DELETE_FILE_OBJECT),lt.addTargetGroup(e,si.SERVER),lt.addClientType(e,si.WEB),e.finish(lt.endMessage(e)),await Mi.sendMessage(e.asUint8Array())}async function aie(){let n=new Co(1024);lt.startMessage(n),lt.addInstanceId(n,Mi.instance_id),lt.addCommandType(n,Bn.START_NEW_NODE_EDITOR),lt.addTargetGroup(n,si.SERVER),lt.addClientType(n,si.WEB),n.finish(lt.endMessage(n)),await Mi.sendMessage(n.asUint8Array()),console.log(&quot;Starting new node editor&quot;),Js.getState().setIsNodeEditorVisible(!1)}const lie=n=&gt;I.jsxs(&quot;svg&quot;,{fill:&quot;#ffffff&quot;,width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 36 36&quot;,version:&quot;1.1&quot;,preserveAspectRatio:&quot;xMidYMid meet&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[I.jsx(&quot;title&quot;,{children:&quot;pop-out-line&quot;}),I.jsx(&quot;path&quot;,{className:&quot;clr-i-outline clr-i-outline-path-1&quot;,d:&quot;M27,33H5a2,2,0,0,1-2-2V9A2,2,0,0,1,5,7H15V9H5V31H27V21h2V31A2,2,0,0,1,27,33Z&quot;}),I.jsx(&quot;path&quot;,{className:&quot;clr-i-outline clr-i-outline-path-2&quot;,d:&quot;M18,3a1,1,0,0,0,0,2H29.59L15.74,18.85a1,1,0,1,0,1.41,1.41L31,6.41V18a1,1,0,0,0,2,0V3Z&quot;}),I.jsx(&quot;rect&quot;,{x:&quot;0&quot;,y:&quot;0&quot;,width:&quot;36&quot;,height:&quot;36&quot;,fillOpacity:&quot;0&quot;})]}),cie={procedure:$ne,file_object:nie},oN=()=&gt;{const{nodes:n,edges:e,setNodes:t,setEdges:i,onNodesChange:r,onEdgesChange:s,onConnect:o,use_node_editor_only:l}=Js(),u=I.jsxs(yK,{colorMode:&quot;dark&quot;,nodes:n,edges:e,onNodesChange:h=&gt;r(h),onEdgesChange:h=&gt;s(h),onConnect:o,nodeTypes:cie,onDelete:iie,fitView:!0,children:[I.jsx(SK,{}),I.jsx(RK,{}),I.jsx(HK,{})]});return l?I.jsx(&quot;div&quot;,{style:{width:&quot;100%&quot;,height:&quot;100%&quot;,background:&quot;white&quot;,border:&quot;1px solid #ccc&quot;},children:u}):I.jsxs(h1,{default:{x:100,y:100,width:800,height:600},bounds:&quot;window&quot;,style:{zIndex:1e3,background:&quot;white&quot;,border:&quot;1px solid #ccc&quot;},dragHandleClassName:&quot;node-editor-drag-handle&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;node-editor-header node-editor-drag-handle bg-gray-800 text-white px-4 py-2 cursor-move&quot;,children:I.jsxs(&quot;div&quot;,{className:&quot;flex flex-row&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;flex p-1&quot;,children:&quot;Node Editor&quot;}),I.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-1 ml-2 rounded&quot;,onClick:()=&gt;kL(),children:I.jsx(f1,{})}),I.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-1 ml-2 rounded&quot;,onClick:()=&gt;aie(),children:I.jsx(lie,{})})]})}),I.jsx(&quot;div&quot;,{style:{width:&quot;100%&quot;,height:&quot;calc(100% - 40px)&quot;},children:u})]})};function uie(){const{isOptionsVisible:n}=wa(),{isNodeEditorVisible:e,use_node_editor_only:t}=Js();return re.useEffect(()=&gt;{window.Jupyter&amp;&amp;window.Jupyter.notebook.kernel.comm_manager.register_target(&quot;ReactViewerWidget&quot;,function(r){r.on_msg(s=&gt;{console.log(&quot;Message from Python:&quot;,s.content.data)}),r.send({data:&quot;Hello from React!&quot;})})},[]),I.jsxs(&quot;div&quot;,{className:&quot;relative flex flex-row h-full w-full bg-gray-900&quot;,children:[I.jsx(&quot;div&quot;,{className:&quot;relative h-full&quot;,children:I.jsx(Hne,{})}),I.jsx(&quot;div&quot;,{className:&quot;relative top-0 left-0&quot;,children:I.jsx(MZ,{})}),I.jsx(&quot;div&quot;,{className:&quot;w-full h-full&quot;,children:t?I.jsx(oN,{}):I.jsx(M$,{})}),e&amp;&amp;I.jsx(oN,{}),n&amp;&amp;I.jsx(kZ,{})]})}async function hie(){const n=tI.getState().webSocketAddress;if(window.DEACTIVATE_WS===!0){console.log(&quot;DEACTIVATE_WS is set to true, not connecting to websocket&quot;);return}try{await Mi.connect(n);for await(const e of Mi.messages())await EL(e)}catch(e){console.error(&quot;WebSocket connection failed:&quot;,e)}}hie();window.B64GLTF?eW():console.log(&quot;B64GLTF not attached.&quot;);const fie=document.getElementById(&quot;root&quot;),die=Gk.createRoot(fie);die.render(I.jsx(uie,{}));

&lt;/script&gt;
      &lt;style&gt;
*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: &quot;&quot;}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,Segoe UI Symbol,&quot;Noto Color Emoji&quot;;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.\!container{width:100%!important}.container{width:100%}@media (min-width: 640px){.\!container{max-width:640px!important}.container{max-width:640px}}@media (min-width: 768px){.\!container{max-width:768px!important}.container{max-width:768px}}@media (min-width: 1024px){.\!container{max-width:1024px!important}.container{max-width:1024px}}@media (min-width: 1280px){.\!container{max-width:1280px!important}.container{max-width:1280px}}@media (min-width: 1536px){.\!container{max-width:1536px!important}.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.absolute{position:absolute}.relative{position:relative}.left-0{left:0}.right-0{right:0}.right-5{right:1.25rem}.top-0{top:0}.top-80{top:20rem}.z-10{z-index:10}.m-auto{margin:auto}.mx-auto{margin-left:auto;margin-right:auto}.my-1{margin-top:.25rem;margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.ml-0{margin-left:0}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.mr-0{margin-right:0}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.block{display:block}.flex{display:flex}.table-cell{display:table-cell}.table-row{display:table-row}.hidden{display:none}.h-2{height:.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-80{height:20rem}.h-full{height:100%}.max-h-96{max-height:24rem}.max-h-screen{max-height:100vh}.w-0{width:0px}.w-12{width:3rem}.w-2{width:.5rem}.w-20{width:5rem}.w-24{width:6rem}.w-32{width:8rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-60{width:15rem}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-24{min-width:6rem}.min-w-40{min-width:10rem}.min-w-80{min-width:20rem}.min-w-\[100px\]{min-width:100px}.max-w-8{max-width:2rem}.max-w-full{max-width:100%}.max-w-md{max-width:28rem}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.flex-grow-0{flex-grow:0}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-ew-resize{cursor:ew-resize}.cursor-move{cursor:move}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-x-2{-moz-column-gap:.5rem;column-gap:.5rem}.space-x-2&gt;:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1&gt;:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2&gt;:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-4&gt;:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.border-gray-400{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity))}.border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity))}.bg-bl-background{--tw-bg-opacity: 1;background-color:rgb(57 57 57 / var(--tw-bg-opacity))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity))}.bg-blue-700{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity))}.bg-blue-700\/30{background-color:#1d4ed84d}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity))}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-opacity-50{--tw-bg-opacity: .5}.p-0{padding:0}.p-0\.5{padding:.125rem}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.pl-1{padding-left:.25rem}.pl-2{padding-left:.5rem}.pr-1{padding-right:.25rem}.pr-2{padding-right:.5rem}.pt-1{padding-top:.25rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.capitalize{text-transform:capitalize}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity))}.text-gray-200{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.accent-blue-700{accent-color:#1d4ed8}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}html,body{height:100%;margin:0}#root{height:100%}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.scrollbar::-webkit-scrollbar{width:10px}.scrollbar::-webkit-scrollbar-corner{background-color:#1a1919}.scrollbar::-webkit-scrollbar-track{background-color:#212121b3}.scrollbar::-webkit-scrollbar-thumb{background-color:#374151e6;box-shadow:inset 0 0 6px #0000004d;outline:1px solid rgb(17,17,17)}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity))}.hover\:bg-blue-700\/50:hover{background-color:#1d4ed880}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}._GzYRV{line-height:1.2;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}._3eOF8{margin-right:5px;font-weight:700}._3eOF8+._3eOF8{margin-left:-5px}._1MFti{cursor:pointer}._f10Tu{font-size:1.2em;margin-right:5px;-webkit-user-select:none;-moz-user-select:none;user-select:none}._1UmXx:after{content:&quot;â¸&quot;}._1LId0:after{content:&quot;â¾&quot;}._1pNG9{margin-right:5px}._1pNG9:after{content:&quot;...&quot;;font-size:.8em}._2IvMF{background:#eee}._2bkNM{margin:0;padding:0 10px}._1BXBN{margin:0;padding:0}._1MGIk{font-weight:600;margin-right:5px;color:#000}._3uHL6{color:#000}._2T6PJ,._1Gho6{color:#df113a}._vGjyY{color:#2a3f3c}._1bQdo{color:#0b75f5}._3zQKs{color:#469038}._1xvuR{color:#43413d}._oLqym,._2AXVT,._2KJWg{color:#000}._11RoI{background:#002b36}._17H2C,._3QHg2,._3fDAz{color:#fdf6e3}._2bSDX{font-weight:bolder;margin-right:5px;color:#fdf6e3}._gsbQL{color:#fdf6e3}._LaAZe,._GTKgm{color:#81b5ac}._Chy1W{color:#cb4b16}._2bveF{color:#d33682}._2vRm-{color:#ae81ff}._1prJR{color:#268bd2}.react-flow{direction:ltr;--xy-edge-stroke-default: #b1b1b7;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #555;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(255, 255, 255, .5);--xy-minimap-background-color-default: #fff;--xy-minimap-mask-background-color-default: rgb(240, 240, 240, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #e2e2e2;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: transparent;--xy-background-pattern-dots-color-default: #91919a;--xy-background-pattern-lines-color-default: #eee;--xy-background-pattern-cross-color-default: #e2e2e2;background-color:var(--xy-background-color, var(--xy-background-color-default));--xy-node-color-default: inherit;--xy-node-border-default: 1px solid #1a192b;--xy-node-background-color-default: #fff;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #1a192b;--xy-node-border-radius-default: 3px;--xy-handle-background-color-default: #1a192b;--xy-handle-border-color-default: #fff;--xy-selection-background-color-default: rgba(0, 89, 220, .08);--xy-selection-border-default: 1px dotted rgba(0, 89, 220, .8);--xy-controls-button-background-color-default: #fefefe;--xy-controls-button-background-color-hover-default: #f4f4f4;--xy-controls-button-color-default: inherit;--xy-controls-button-color-hover-default: inherit;--xy-controls-button-border-color-default: #eee;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #ffffff;--xy-edge-label-color-default: inherit;--xy-resize-background-color-default: #3367d9}.react-flow.dark{--xy-edge-stroke-default: #3e3e3e;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #727272;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(150, 150, 150, .25);--xy-minimap-background-color-default: #141414;--xy-minimap-mask-background-color-default: rgb(60, 60, 60, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #2b2b2b;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: #141414;--xy-background-pattern-dots-color-default: #777;--xy-background-pattern-lines-color-default: #777;--xy-background-pattern-cross-color-default: #777;--xy-node-color-default: #f8f8f8;--xy-node-border-default: 1px solid #3c3c3c;--xy-node-background-color-default: #1e1e1e;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #999;--xy-handle-background-color-default: #bebebe;--xy-handle-border-color-default: #1e1e1e;--xy-selection-background-color-default: rgba(200, 200, 220, .08);--xy-selection-border-default: 1px dotted rgba(200, 200, 220, .8);--xy-controls-button-background-color-default: #2b2b2b;--xy-controls-button-background-color-hover-default: #3e3e3e;--xy-controls-button-color-default: #f8f8f8;--xy-controls-button-color-hover-default: #fff;--xy-controls-button-border-color-default: #5b5b5b;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #141414;--xy-edge-label-color-default: #f8f8f8}.react-flow__background{background-color:var(--xy-background-color, var(--xy-background-color-props, var(--xy-background-color-default)));pointer-events:none;z-index:-1}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1}.react-flow__pane.draggable{cursor:grab}.react-flow__pane.dragging{cursor:grabbing}.react-flow__pane.selection{cursor:pointer}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow__edge-path{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default));stroke-width:var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));fill:none}.react-flow__connection-path{stroke:var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));stroke-width:var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));fill:none}.react-flow .react-flow__edges{position:absolute}.react-flow .react-flow__edges svg{overflow:visible;position:absolute;pointer-events:none}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.selectable{cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge.selectable:focus .react-flow__edge-path,.react-flow__edge.selectable:focus-visible .react-flow__edge-path{stroke:var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default))}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}svg.react-flow__connectionline{z-index:1001;overflow:visible;position:absolute}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:default}.react-flow__node.selectable{cursor:pointer}.react-flow__node.draggable{cursor:grab;pointer-events:all}.react-flow__node.draggable.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background-color:var(--xy-handle-background-color, var(--xy-handle-background-color-default));border:1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));border-radius:100%}.react-flow__handle.connectingfrom{pointer-events:all}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:0;transform:translate(-50%,50%)}.react-flow__handle-top{top:0;left:50%;transform:translate(-50%,-50%)}.react-flow__handle-left{top:50%;left:0;transform:translate(-50%,-50%)}.react-flow__handle-right{top:50%;right:0;transform:translate(50%,-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.center{left:50%;transform:translate(-50%)}.react-flow__attribution{font-size:10px;background:var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;left:0;top:0}.react-flow__viewport-portal{position:absolute;width:100%;height:100%;left:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__minimap{background:var( --xy-minimap-background-color-props, var(--xy-minimap-background-color, var(--xy-minimap-background-color-default)) )}.react-flow__minimap-svg{display:block}.react-flow__minimap-mask{fill:var( --xy-minimap-mask-background-color-props, var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default)) );stroke:var( --xy-minimap-mask-stroke-color-props, var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default)) );stroke-width:var( --xy-minimap-mask-stroke-width-props, var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default)) )}.react-flow__minimap-node{fill:var( --xy-minimap-node-background-color-props, var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default)) );stroke:var( --xy-minimap-node-stroke-color-props, var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default)) );stroke-width:var( --xy-minimap-node-stroke-width-props, var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default)) )}.react-flow__background-pattern.dots{fill:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default)) )}.react-flow__background-pattern.lines{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default)) )}.react-flow__background-pattern.cross{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default)) )}.react-flow__controls{display:flex;flex-direction:column;box-shadow:var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default))}.react-flow__controls.horizontal{flex-direction:row}.react-flow__controls-button{display:flex;justify-content:center;align-items:center;height:26px;width:26px;padding:4px;border:none;background:var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));border-bottom:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) );color:var( --xy-controls-button-color-props, var(--xy-controls-button-color, var(--xy-controls-button-color-default)) );cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px;fill:currentColor}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-input,.react-flow__node-default,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:var(--xy-node-border-radius, var(--xy-node-border-radius-default));width:150px;font-size:12px;color:var(--xy-node-color, var(--xy-node-color-default));text-align:center;border:var(--xy-node-border, var(--xy-node-border-default));background-color:var(--xy-node-background-color, var(--xy-node-background-color-default))}.react-flow__node-input.selectable:hover,.react-flow__node-default.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default))}.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default))}.react-flow__node-group{background-color:var(--xy-node-group-background-color, var(--xy-node-group-background-color-default))}.react-flow__nodesselection-rect,.react-flow__selection{background:var(--xy-selection-background-color, var(--xy-selection-background-color-default));border:var(--xy-selection-border, var(--xy-selection-border-default))}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls-button:hover{background:var( --xy-controls-button-background-color-hover-props, var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default)) );color:var( --xy-controls-button-color-hover-props, var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default)) )}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__controls-button:last-child{border-bottom:none}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));transform:translate(-50%,-50%)}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}.react-flow__edge-textbg{fill:var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default))}.react-flow__edge-text{fill:var(--xy-edge-label-color, var(--xy-edge-label-color-default))}

&lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;root&quot; class=&quot;&quot;&gt;&lt;/div&gt;

        &lt;!-- Inject the startup config placeholder into a script --&gt;
        &lt;script&gt;window.B64GLTF = &quot;Z2xURgIAAAAkWwAA+AQAAEpTT057InNjZW5lIjowLCJzY2VuZXMiOlt7Im5vZGVzIjpbMF0sImV4dHJhcyI6eyJpZF9oaWVyYXJjaHkiOnsiMSI6WyJzcGhlcmUxIiwiMCJdLCIwIjpbInJvb3QiLCIqIl19LCJkcmF3X3Jhbmdlc19ub2RlMCI6eyIxIjpbMCw5MThdfX19XSwiYXNzZXQiOnsidmVyc2lvbiI6IjIuMCIsImdlbmVyYXRvciI6Imh0dHBzOi8vZ2l0aHViLmNvbS9taWtlZGgvdHJpbWVzaCJ9LCJhY2Nlc3NvcnMiOlt7ImNvbXBvbmVudFR5cGUiOjUxMjUsInR5cGUiOiJTQ0FMQVIiLCJidWZmZXJWaWV3IjowLCJjb3VudCI6OTE4LCJtYXgiOls5MTddLCJtaW4iOlswXX0seyJjb21wb25lbnRUeXBlIjo1MTI2LCJ0eXBlIjoiVkVDMyIsImJ5dGVPZmZzZXQiOjAsImJ1ZmZlclZpZXciOjEsImNvdW50Ijo5MTgsIm1heCI6WzAuMjk3ODEyNjcwNDY5Mjg0MDYsMC4yOTU0NDIzMTI5NTU4NTYzLDAuMzAwMDAwMDExOTIwOTI4OTZdLCJtaW4iOlstMC4yOTU0NDIzMTI5NTU4NTYzLC0wLjI5NTQ0MjMxMjk1NTg1NjMsLTAuMzAwMDAwMDExOTIwOTI4OTZdfSx7ImNvbXBvbmVudFR5cGUiOjUxMjYsInR5cGUiOiJWRUMyIiwiYnl0ZU9mZnNldCI6MCwiYnVmZmVyVmlldyI6MiwiY291bnQiOjkxOCwibWF4IjpbMC4wLDEuMF0sIm1pbiI6WzAuMCwxLjBdfV0sIm1lc2hlcyI6W3sibmFtZSI6Im5vZGUwIiwiZXh0cmFzIjp7fSwicHJpbWl0aXZlcyI6W3siYXR0cmlidXRlcyI6eyJQT1NJVElPTiI6MSwiVEVYQ09PUkRfMCI6Mn0sImluZGljZXMiOjAsIm1vZGUiOjQsIm1hdGVyaWFsIjowfV19XSwibWF0ZXJpYWxzIjpbeyJwYnJNZXRhbGxpY1JvdWdobmVzcyI6eyJiYXNlQ29sb3JGYWN0b3IiOlsxLjAsMS4wLDEuMCwxLjBdfSwibmFtZSI6Im1hdDAiLCJkb3VibGVTaWRlZCI6dHJ1ZX1dLCJub2RlcyI6W3sibmFtZSI6InJvb3QiLCJjaGlsZHJlbiI6WzFdfSx7Im5hbWUiOiJub2RlMCIsIm1lc2giOjB9XSwiYnVmZmVycyI6W3siYnl0ZUxlbmd0aCI6MjIwMzJ9XSwiYnVmZmVyVmlld3MiOlt7ImJ1ZmZlciI6MCwiYnl0ZU9mZnNldCI6MCwiYnl0ZUxlbmd0aCI6MzY3Mn0seyJidWZmZXIiOjAsImJ5dGVPZmZzZXQiOjM2NzIsImJ5dGVMZW5ndGgiOjExMDE2fSx7ImJ1ZmZlciI6MCwiYnl0ZU9mZnNldCI6MTQ2ODgsImJ5dGVMZW5ndGgiOjczNDR9XSwiZXh0ZW5zaW9uc1VzZWQiOlsiQURBX0VYVF9kYXRhIl0sImV4dGVuc2lvbnMiOnsiQURBX0VYVF9kYXRhIjp7InNpbXVsYXRpb25fb2JqZWN0cyI6W10sImRlc2lnbl9vYmplY3RzIjpbXSwidmVyc2lvbiI6IjEuMC4wIn19fSAQVgAAQklOAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACQAAAAlAAAAJgAAACcAAAAoAAAAKQAAACoAAAArAAAALAAAAC0AAAAuAAAALwAAADAAAAAxAAAAMgAAADMAAAA0AAAANQAAADYAAAA3AAAAOAAAADkAAAA6AAAAOwAAADwAAAA9AAAAPgAAAD8AAABAAAAAQQAAAEIAAABDAAAARAAAAEUAAABGAAAARwAAAEgAAABJAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAUAAAAFEAAABSAAAAUwAAAFQAAABVAAAAVgAAAFcAAABYAAAAWQAAAFoAAABbAAAAXAAAAF0AAABeAAAAXwAAAGAAAABhAAAAYgAAAGMAAABkAAAAZQAAAGYAAABnAAAAaAAAAGkAAABqAAAAawAAAGwAAABtAAAAbgAAAG8AAABwAAAAcQAAAHIAAABzAAAAdAAAAHUAAAB2AAAAdwAAAHgAAAB5AAAAegAAAHsAAAB8AAAAfQAAAH4AAAB/AAAAgAAAAIEAAACCAAAAgwAAAIQAAACFAAAAhgAAAIcAAACIAAAAiQAAAIoAAACLAAAAjAAAAI0AAACOAAAAjwAAAJAAAACRAAAAkgAAAJMAAACUAAAAlQAAAJYAAACXAAAAmAAAAJkAAACaAAAAmwAAAJwAAACdAAAAngAAAJ8AAACgAAAAoQAAAKIAAACjAAAApAAAAKUAAACmAAAApwAAAKgAAACpAAAAqgAAAKsAAACsAAAArQAAAK4AAACvAAAAsAAAALEAAACyAAAAswAAALQAAAC1AAAAtgAAALcAAAC4AAAAuQAAALoAAAC7AAAAvAAAAL0AAAC+AAAAvwAAAMAAAADBAAAAwgAAAMMAAADEAAAAxQAAAMYAAADHAAAAyAAAAMkAAADKAAAAywAAAMwAAADNAAAAzgAAAM8AAADQAAAA0QAAANIAAADTAAAA1AAAANUAAADWAAAA1wAAANgAAADZAAAA2gAAANsAAADcAAAA3QAAAN4AAADfAAAA4AAAAOEAAADiAAAA4wAAAOQAAADlAAAA5gAAAOcAAADoAAAA6QAAAOoAAADrAAAA7AAAAO0AAADuAAAA7wAAAPAAAADxAAAA8gAAAPMAAAD0AAAA9QAAAPYAAAD3AAAA+AAAAPkAAAD6AAAA+wAAAPwAAAD9AAAA/gAAAP8AAAAAAQAAAQEAAAIBAAADAQAABAEAAAUBAAAGAQAABwEAAAgBAAAJAQAACgEAAAsBAAAMAQAADQEAAA4BAAAPAQAAEAEAABEBAAASAQAAEwEAABQBAAAVAQAAFgEAABcBAAAYAQAAGQEAABoBAAAbAQAAHAEAAB0BAAAeAQAAHwEAACABAAAhAQAAIgEAACMBAAAkAQAAJQEAACYBAAAnAQAAKAEAACkBAAAqAQAAKwEAACwBAAAtAQAALgEAAC8BAAAwAQAAMQEAADIBAAAzAQAANAEAADUBAAA2AQAANwEAADgBAAA5AQAAOgEAADsBAAA8AQAAPQEAAD4BAAA/AQAAQAEAAEEBAABCAQAAQwEAAEQBAABFAQAARgEAAEcBAABIAQAASQEAAEoBAABLAQAATAEAAE0BAABOAQAATwEAAFABAABRAQAAUgEAAFMBAABUAQAAVQEAAFYBAABXAQAAWAEAAFkBAABaAQAAWwEAAFwBAABdAQAAXgEAAF8BAABgAQAAYQEAAGIBAABjAQAAZAEAAGUBAABmAQAAZwEAAGgBAABpAQAAagEAAGsBAABsAQAAbQEAAG4BAABvAQAAcAEAAHEBAAByAQAAcwEAAHQBAAB1AQAAdgEAAHcBAAB4AQAAeQEAAHoBAAB7AQAAfAEAAH0BAAB+AQAAfwEAAIABAACBAQAAggEAAIMBAACEAQAAhQEAAIYBAACHAQAAiAEAAIkBAACKAQAAiwEAAIwBAACNAQAAjgEAAI8BAACQAQAAkQEAAJIBAACTAQAAlAEAAJUBAACWAQAAlwEAAJgBAACZAQAAmgEAAJsBAACcAQAAnQEAAJ4BAACfAQAAoAEAAKEBAACiAQAAowEAAKQBAAClAQAApgEAAKcBAACoAQAAqQEAAKoBAACrAQAArAEAAK0BAACuAQAArwEAALABAACxAQAAsgEAALMBAAC0AQAAtQEAALYBAAC3AQAAuAEAALkBAAC6AQAAuwEAALwBAAC9AQAAvgEAAL8BAADAAQAAwQEAAMIBAADDAQAAxAEAAMUBAADGAQAAxwEAAMgBAADJAQAAygEAAMsBAADMAQAAzQEAAM4BAADPAQAA0AEAANEBAADSAQAA0wEAANQBAADVAQAA1gEAANcBAADYAQAA2QEAANoBAADbAQAA3AEAAN0BAADeAQAA3wEAAOABAADhAQAA4gEAAOMBAADkAQAA5QEAAOYBAADnAQAA6AEAAOkBAADqAQAA6wEAAOwBAADtAQAA7gEAAO8BAADwAQAA8QEAAPIBAADzAQAA9AEAAPUBAAD2AQAA9wEAAPgBAAD5AQAA+gEAAPsBAAD8AQAA/QEAAP4BAAD/AQAAAAIAAAECAAACAgAAAwIAAAQCAAAFAgAABgIAAAcCAAAIAgAACQIAAAoCAAALAgAADAIAAA0CAAAOAgAADwIAABACAAARAgAAEgIAABMCAAAUAgAAFQIAABYCAAAXAgAAGAIAABkCAAAaAgAAGwIAABwCAAAdAgAAHgIAAB8CAAAgAgAAIQIAACICAAAjAgAAJAIAACUCAAAmAgAAJwIAACgCAAApAgAAKgIAACsCAAAsAgAALQIAAC4CAAAvAgAAMAIAADECAAAyAgAAMwIAADQCAAA1AgAANgIAADcCAAA4AgAAOQIAADoCAAA7AgAAPAIAAD0CAAA+AgAAPwIAAEACAABBAgAAQgIAAEMCAABEAgAARQIAAEYCAABHAgAASAIAAEkCAABKAgAASwIAAEwCAABNAgAATgIAAE8CAABQAgAAUQIAAFICAABTAgAAVAIAAFUCAABWAgAAVwIAAFgCAABZAgAAWgIAAFsCAABcAgAAXQIAAF4CAABfAgAAYAIAAGECAABiAgAAYwIAAGQCAABlAgAAZgIAAGcCAABoAgAAaQIAAGoCAABrAgAAbAIAAG0CAABuAgAAbwIAAHACAABxAgAAcgIAAHMCAAB0AgAAdQIAAHYCAAB3AgAAeAIAAHkCAAB6AgAAewIAAHwCAAB9AgAAfgIAAH8CAACAAgAAgQIAAIICAACDAgAAhAIAAIUCAACGAgAAhwIAAIgCAACJAgAAigIAAIsCAACMAgAAjQIAAI4CAACPAgAAkAIAAJECAACSAgAAkwIAAJQCAACVAgAAlgIAAJcCAACYAgAAmQIAAJoCAACbAgAAnAIAAJ0CAACeAgAAnwIAAKACAAChAgAAogIAAKMCAACkAgAApQIAAKYCAACnAgAAqAIAAKkCAACqAgAAqwIAAKwCAACtAgAArgIAAK8CAACwAgAAsQIAALICAACzAgAAtAIAALUCAAC2AgAAtwIAALgCAAC5AgAAugIAALsCAAC8AgAAvQIAAL4CAAC/AgAAwAIAAMECAADCAgAAwwIAAMQCAADFAgAAxgIAAMcCAADIAgAAyQIAAMoCAADLAgAAzAIAAM0CAADOAgAAzwIAANACAADRAgAA0gIAANMCAADUAgAA1QIAANYCAADXAgAA2AIAANkCAADaAgAA2wIAANwCAADdAgAA3gIAAN8CAADgAgAA4QIAAOICAADjAgAA5AIAAOUCAADmAgAA5wIAAOgCAADpAgAA6gIAAOsCAADsAgAA7QIAAO4CAADvAgAA8AIAAPECAADyAgAA8wIAAPQCAAD1AgAA9gIAAPcCAAD4AgAA+QIAAPoCAAD7AgAA/AIAAP0CAAD+AgAA/wIAAAADAAABAwAAAgMAAAMDAAAEAwAABQMAAAYDAAAHAwAACAMAAAkDAAAKAwAACwMAAAwDAAANAwAADgMAAA8DAAAQAwAAEQMAABIDAAATAwAAFAMAABUDAAAWAwAAFwMAABgDAAAZAwAAGgMAABsDAAAcAwAAHQMAAB4DAAAfAwAAIAMAACEDAAAiAwAAIwMAACQDAAAlAwAAJgMAACcDAAAoAwAAKQMAACoDAAArAwAALAMAAC0DAAAuAwAALwMAADADAAAxAwAAMgMAADMDAAA0AwAANQMAADYDAAA3AwAAOAMAADkDAAA6AwAAOwMAADwDAAA9AwAAPgMAAD8DAABAAwAAQQMAAEIDAABDAwAARAMAAEUDAABGAwAARwMAAEgDAABJAwAASgMAAEsDAABMAwAATQMAAE4DAABPAwAAUAMAAFEDAABSAwAAUwMAAFQDAABVAwAAVgMAAFcDAABYAwAAWQMAAFoDAABbAwAAXAMAAF0DAABeAwAAXwMAAGADAABhAwAAYgMAAGMDAABkAwAAZQMAAGYDAABnAwAAaAMAAGkDAABqAwAAawMAAGwDAABtAwAAbgMAAG8DAABwAwAAcQMAAHIDAABzAwAAdAMAAHUDAAB2AwAAdwMAAHgDAAB5AwAAegMAAHsDAAB8AwAAfQMAAH4DAAB/AwAAgAMAAIEDAACCAwAAgwMAAIQDAACFAwAAhgMAAIcDAACIAwAAiQMAAIoDAACLAwAAjAMAAI0DAACOAwAAjwMAAJADAACRAwAAkgMAAJMDAACUAwAAlQMAANnxzj2y9ZE8OFaQvlHDDj4Geh2kjAGIvhkJkz2IMKKj/CKVvvD7tT0eI1I9OFaQvhkJkz2IMKKj/CKVvjxuqSOL5LqJmpmZvvD7tT0eI1I9OFaQvtnxzj2y9ZE8OFaQvhkJkz2IMKKj/CKVvvD7tT0eI1I9OFaQvlHDDj4Geh2kjAGIvtnxzj2y9ZE8OFaQvtYShz1z+aA9OFaQvvD7tT0eI1I9OFaQvjxuqSOL5LqJmpmZvge+Dz3gdsU9OFaQvtYShz1z+aA9OFaQvjxuqSOL5LqJmpmZvkmOOT7WEoc9MFRrvha2Sz7ftGCkSPFlvlHDDj4Geh2kjAGIvkmOOT7WEoc9MFRrvhbSfD5LcIukboIuvha2Sz7ftGCkSPFlvkmOOT7WEoc9MFRrvlHDDj4Geh2kjAGIvvD7tT0eI1I9OFaQvnLL5yIeI9I9OFaQvge+Dz3gdsU9OFaQvjxuqSOL5LqJmpmZvjdEFz702v09MFRrvvD7tT0eI1I9OFaQvtYShz1z+aA9OFaQvjdEFz702v09MFRrvkmOOT7WEoc9MFRrvvD7tT0eI1I9OFaQvge+D73gdsU9OFaQvnLL5yIeI9I9OFaQvjxuqSOL5LqJmpmZvuB2xT1XAis+MFRrvtYShz1z+aA9OFaQvge+Dz3gdsU9OFaQvuB2xT1XAis+MFRrvjdEFz702v09MFRrvtYShz1z+aA9OFaQvtYSh71z+aA9OFaQvge+D73gdsU9OFaQvjxuqSOL5LqJmpmZvigAgz6iyjg9mpkZvlaejz6da56kh97ZvRbSfD5LcIukboIuvkUoCT3ldkI+MFRrvuB2xT1XAis+MFRrvge+Dz3gdsU9OFaQvkUoCT3ldkI+MFRrvge+Dz3gdsU9OFaQvnLL5yIeI9I9OFaQvvD7tb0eI1I9OFaQvtYSh71z+aA9OFaQvjxuqSOL5LqJmpmZvmZmZj6BBQU+mpkZvigAgz6iyjg9mpkZvhbSfD5LcIukboIuvmZmZj6BBQU+mpkZvhbSfD5LcIukboIuvkmOOT7WEoc9MFRrvmZmZj6BBQU+mpkZvkmOOT7WEoc9MFRrvjdEFz702v09MFRrvmZmZj6BBQU+mpkZvlaejz6da56kh97ZvSgAgz6iyjg9mpkZvkUoCb3ldkI+MFRrvnLL5yIeI9I9OFaQvge+D73gdsU9OFaQvkUoCb3ldkI+MFRrvkUoCT3ldkI+MFRrvnLL5yIeI9I9OFaQvtnxzr2y9ZE8OFaQvvD7tb0eI1I9OFaQvjxuqSOL5LqJmpmZvlcCKz7/zEs+mpkZvjdEFz702v09MFRrvuB2xT1XAis+MFRrvlcCKz7/zEs+mpkZvmZmZj6BBQU+mpkZvjdEFz702v09MFRrvuB2xb1XAis+MFRrvge+D73gdsU9OFaQvtYSh71z+aA9OFaQvuB2xb1XAis+MFRrvkUoCb3ldkI+MFRrvge+D73gdsU9OFaQvtnxzr2y9ZG8OFaQvjxuqSOL5LqJmpmZvjxuqSOL5LqJmpmZvtnxzr2y9ZG8OFaQvtnxzr2y9ZE8OFaQvjxuqSOL5LqJmpmZvvD7tT2n/3k+mpkZvuB2xT1XAis+MFRrvkUoCT3ldkI+MFRrvvD7tT2n/3k+mpkZvlcCKz7/zEs+mpkZvuB2xT1XAis+MFRrvjdEF7702v09MFRrvuB2xb1XAis+MFRrvtYSh71z+aA9OFaQvjdEF7702v09MFRrvtYSh71z+aA9OFaQvvD7tb0eI1I9OFaQvtwkjj7Z8c49/mBVved6mD78MaikkB0UvVaejz6da56kh97Zvdwkjj7Z8c49/mBVved6mD78MaikkB0UPed6mD78MaikkB0UvfD7tb0eI1K9OFaQvtnxzr2y9ZG8OFaQvjxuqSOL5LqJmpmZvjC7kiOBBYU+mpkZvvD7tT2n/3k+mpkZvkUoCT3ldkI+MFRrvjC7kiOBBYU+mpkZvkUoCT3ldkI+MFRrvkUoCb3ldkI+MFRrvkmOOb7WEoc9MFRrvvD7tb0eI1I9OFaQvtnxzr2y9ZE8OFaQvkmOOb7WEoc9MFRrvjdEF7702v09MFRrvvD7tb0eI1I9OFaQvvHAZz7ldkI+/mBVvWZmZj6BBQU+mpkZvlcCKz7/zEs+mpkZvvHAZz7ldkI+/mBVvVaejz6da56kh97ZvWZmZj6BBQU+mpkZvvHAZz7ldkI+/mBVvdwkjj7Z8c49/mBVvVaejz6da56kh97ZvdYSh71z+aC9OFaQvvD7tb0eI1K9OFaQvjxuqSOL5LqJmpmZvvD7tb2n/3k+mpkZvjC7kiOBBYU+mpkZvkUoCb3ldkI+MFRrvvD7tb2n/3k+mpkZvkUoCb3ldkI+MFRrvuB2xb1XAis+MFRrvuB2Rb7X0NkjMFRrvtnxzr2y9ZE8OFaQvtnxzr2y9ZG8OFaQvuB2Rb7X0NkjMFRrvkmOOb7WEoc9MFRrvtnxzr2y9ZE8OFaQvjdEFz4oAIM+/mBVvVcCKz7/zEs+mpkZvvD7tT2n/3k+mpkZvjdEFz4oAIM+/mBVvfHAZz7ldkI+/mBVvVcCKz7/zEs+mpkZvge+D73gdsW9OFaQvtYSh71z+aC9OFaQvjxuqSOL5LqJmpmZvlcCK77/zEs+mpkZvvD7tb2n/3k+mpkZvuB2xb1XAis+MFRrvlcCK77/zEs+mpkZvuB2xb1XAis+MFRrvjdEF7702v09MFRrvun3lD4eI1I9/mBVPVaejz6da56kh97ZPed6mD78MaikkB0UPUmOOb7WEoe9MFRrvtnxzr2y9ZG8OFaQvvD7tb0eI1K9OFaQvkmOOb7WEoe9MFRrvuB2Rb7X0NkjMFRrvtnxzr2y9ZG8OFaQvh4jUj3p95Q+/mBVvfD7tT2n/3k+mpkZvjC7kiOBBYU+mpkZvh4jUj3p95Q+/mBVvTdEFz4oAIM+/mBVvfD7tT2n/3k+mpkZvkOZ/aQeI9K9OFaQvge+D73gdsW9OFaQvjxuqSOL5LqJmpmZvmZmZr6BBQU+mpkZvjdEF7702v09MFRrvkmOOb7WEoc9MFRrvmZmZr6BBQU+mpkZvlcCK77/zEs+mpkZvjdEF7702v09MFRrvigAgz43RBc+/mBVPVaejz6da56kh97ZPen3lD4eI1I9/mBVPSgAgz43RBc+/mBVPdwkjj7Z8c49/mBVvfHAZz7ldkI+/mBVvSgAgz43RBc+/mBVPen3lD4eI1I9/mBVPed6mD78MaikkB0UPSgAgz43RBc+/mBVPed6mD78MaikkB0UPdwkjj7Z8c49/mBVvTdEF7702v29MFRrvvD7tb0eI1K9OFaQvtYSh71z+aC9OFaQvjdEF7702v29MFRrvkmOOb7WEoe9MFRrvvD7tb0eI1K9OFaQvh4jUr3p95Q+/mBVvTC7kiOBBYU+mpkZvvD7tb2n/3k+mpkZvh4jUr3p95Q+/mBVvR4jUj3p95Q+/mBVvTC7kiOBBYU+mpkZvge+Dz3gdsW9OFaQvkOZ/aQeI9K9OFaQvjxuqSOL5LqJmpmZvigAg76iyjg9mpkZvkmOOb7WEoc9MFRrvuB2Rb7X0NkjMFRrvigAg76iyjg9mpkZvmZmZr6BBQU+mpkZvkmOOb7WEoc9MFRrvuV2Qj7xwGc+/mBVPfHAZz7ldkI+/mBVvTdEFz4oAIM+/mBVveV2Qj7xwGc+/mBVPSgAgz43RBc+/mBVPfHAZz7ldkI+/mBVveB2xb1XAiu+MFRrvtYSh71z+aC9OFaQvge+D73gdsW9OFaQvuB2xb1XAiu+MFRrvjdEF7702v29MFRrvtYSh71z+aC9OFaQvjdEF74oAIM+/mBVvR4jUr3p95Q+/mBVvfD7tb2n/3k+mpkZvjdEF74oAIM+/mBVvfD7tb2n/3k+mpkZvlcCK77/zEs+mpkZvtYShz1z+aC9OFaQvge+Dz3gdsW9OFaQvjxuqSOL5LqJmpmZvigAg76iyji9mpkZvuB2Rb7X0NkjMFRrvkmOOb7WEoe9MFRrvigAg76iyji9mpkZvigAg76iyjg9mpkZvuB2Rb7X0NkjMFRrvtnxzj3cJI4+/mBVPeV2Qj7xwGc+/mBVPTdEFz4oAIM+/mBVvdnxzj3cJI4+/mBVPTdEFz4oAIM+/mBVvR4jUj3p95Q+/mBVvUUoCb3ldkK+MFRrvuB2xb1XAiu+MFRrvge+D73gdsW9OFaQvkUoCb3ldkK+MFRrvge+D73gdsW9OFaQvkOZ/aQeI9K9OFaQvvHAZ77ldkI+/mBVvVcCK77/zEs+mpkZvmZmZr6BBQU+mpkZvvHAZ77ldkI+/mBVvTdEF74oAIM+/mBVvVcCK77/zEs+mpkZvqf/eT7w+7U9mpkZPhbSfD5LcIukboIuPlaejz6da56kh97ZPfD7tT0eI1K9OFaQvjxuqSOL5LqJmpmZvhkJkz2IMKKj/CKVvvD7tT0eI1K9OFaQvtYShz1z+aC9OFaQvjxuqSOL5LqJmpmZvmZmZr6BBQW+mpkZvigAg76iyji9mpkZvkmOOb7WEoe9MFRrvmZmZr6BBQW+mpkZvkmOOb7WEoe9MFRrvjdEF7702v29MFRrvkjbpiM3RJc+/mBVPR4jUj3p95Q+/mBVvR4jUr3p95Q+/mBVvUjbpiM3RJc+/mBVPdnxzj3cJI4+/mBVPR4jUj3p95Q+/mBVvUUoCT3ldkK+MFRrvkOZ/aQeI9K9OFaQvge+Dz3gdsW9OFaQvkUoCT3ldkK+MFRrvkUoCb3ldkK+MFRrvkOZ/aQeI9K9OFaQvtwkjr7Z8c49/mBVvfHAZ77ldkI+/mBVvWZmZr6BBQU+mpkZvtwkjr7Z8c49/mBVvWZmZr6BBQU+mpkZvigAg76iyjg9mpkZvv/MSz5XAis+mpkZPlaejz6da56kh97ZPSgAgz43RBc+/mBVPf/MSz5XAis+mpkZPqf/eT7w+7U9mpkZPlaejz6da56kh97ZPf/MSz5XAis+mpkZPigAgz43RBc+/mBVPeV2Qj7xwGc+/mBVPdnxzj2y9ZG8OFaQvvD7tT0eI1K9OFaQvhkJkz2IMKKj/CKVvtnxzj2y9ZG8OFaQvlHDDj4Geh2kjAGIvvD7tT0eI1K9OFaQvtnxzj2y9ZG8OFaQvhkJkz2IMKKj/CKVvlHDDj4Geh2kjAGIvlcCK77/zEu+mpkZvmZmZr6BBQW+mpkZvjdEF7702v29MFRrvlcCK77/zEu+mpkZvjdEF7702v29MFRrvuB2xb1XAiu+MFRrvtnxzr3cJI4+/mBVPUjbpiM3RJc+/mBVPR4jUr3p95Q+/mBVvdnxzr3cJI4+/mBVPR4jUr3p95Q+/mBVvTdEF74oAIM+/mBVveB2xT1XAiu+MFRrvkUoCT3ldkK+MFRrvge+Dz3gdsW9OFaQvuB2xT1XAiu+MFRrvge+Dz3gdsW9OFaQvtYShz1z+aC9OFaQvjdEl75I2yYk/mBVvdwkjr7Z8c49/mBVvSgAg76iyjg9mpkZvjdEl75I2yYk/mBVvSgAg76iyjg9mpkZvigAg76iyji9mpkZvoEFBT5mZmY+mpkZPv/MSz5XAis+mpkZPuV2Qj7xwGc+/mBVPYEFBT5mZmY+mpkZPuV2Qj7xwGc+/mBVPdnxzj3cJI4+/mBVPfD7tb2n/3m+mpkZvlcCK77/zEu+mpkZvuB2xb1XAiu+MFRrvvD7tb2n/3m+mpkZvuB2xb1XAiu+MFRrvkUoCb3ldkK+MFRrvuV2Qr7xwGc+/mBVPTdEF74oAIM+/mBVvfHAZ77ldkI+/mBVveV2Qr7xwGc+/mBVPdnxzr3cJI4+/mBVPTdEF74oAIM+/mBVveV2Qj5FKAk9MFRrPha2Sz7ftGCkSPFlPhbSfD5LcIukboIuPuV2Qj5FKAk9MFRrPlHDDj4Geh2kjAGIPha2Sz7ftGCkSPFlPjdEFz702v29MFRrvtYShz1z+aC9OFaQvvD7tT0eI1K9OFaQvjdEFz702v29MFRrvuB2xT1XAiu+MFRrvtYShz1z+aC9OFaQvtwkjr7Z8c69/mBVvTdEl75I2yYk/mBVvSgAg76iyji9mpkZvtwkjr7Z8c69/mBVvSgAg76iyji9mpkZvmZmZr6BBQW+mpkZvqLKOD0oAIM+mpkZPtnxzj3cJI4+/mBVPUjbpiM3RJc+/mBVPaLKOD0oAIM+mpkZPoEFBT5mZmY+mpkZPtnxzj3cJI4+/mBVPZqIoKWBBYW+mpkZvvD7tb2n/3m+mpkZvkUoCb3ldkK+MFRrvpqIoKWBBYW+mpkZvkUoCb3ldkK+MFRrvkUoCT3ldkK+MFRrvigAg743RBc+/mBVPeV2Qr7xwGc+/mBVPfHAZ77ldkI+/mBVvSgAg743RBc+/mBVPfHAZ77ldkI+/mBVvdwkjr7Z8c49/mBVvVcCKz7gdsU9MFRrPqf/eT7w+7U9mpkZPv/MSz5XAis+mpkZPlcCKz7gdsU9MFRrPuV2Qj5FKAk9MFRrPhbSfD5LcIukboIuPlcCKz7gdsU9MFRrPlHDDj4Geh2kjAGIPuV2Qj5FKAk9MFRrPlcCKz7gdsU9MFRrPhbSfD5LcIukboIuPqf/eT7w+7U9mpkZPkmOOT7WEoe9MFRrvvD7tT0eI1K9OFaQvlHDDj4Geh2kjAGIvkmOOT7WEoe9MFRrvlHDDj4Geh2kjAGIvha2Sz7ftGCkSPFlvkmOOT7WEoe9MFRrvha2Sz7ftGCkSPFlvhbSfD5LcIukboIuvkmOOT7WEoe9MFRrvjdEFz702v29MFRrvvD7tT0eI1K9OFaQvvHAZ77ldkK+/mBVvWZmZr6BBQW+mpkZvlcCK77/zEu+mpkZvvHAZ77ldkK+/mBVvdwkjr7Z8c69/mBVvWZmZr6BBQW+mpkZvqLKOL0oAIM+mpkZPqLKOD0oAIM+mpkZPkjbpiM3RJc+/mBVPaLKOL0oAIM+mpkZPkjbpiM3RJc+/mBVPdnxzr3cJI4+/mBVPfD7tT2n/3m+mpkZvpqIoKWBBYW+mpkZvkUoCT3ldkK+MFRrvvD7tT2n/3m+mpkZvkUoCT3ldkK+MFRrvuB2xT1XAiu+MFRrvun3lL4eI1I9/mBVPSgAg743RBc+/mBVPdwkjr7Z8c49/mBVven3lL4eI1I9/mBVPdwkjr7Z8c49/mBVvTdEl75I2yYk/mBVvfTa/T03RBc+MFRrPv/MSz5XAis+mpkZPoEFBT5mZmY+mpkZPvTa/T03RBc+MFRrPlcCKz7gdsU9MFRrPv/MSz5XAis+mpkZPjdEF74oAIO+/mBVvfHAZ77ldkK+/mBVvVcCK77/zEu+mpkZvjdEF74oAIO+/mBVvVcCK77/zEu+mpkZvvD7tb2n/3m+mpkZvoEFBb5mZmY+mpkZPtnxzr3cJI4+/mBVPeV2Qr7xwGc+/mBVPYEFBb5mZmY+mpkZPqLKOL0oAIM+mpkZPtnxzr3cJI4+/mBVPVcCKz7/zEu+mpkZvuB2xT1XAiu+MFRrvjdEFz702v29MFRrvlcCKz7/zEu+mpkZvvD7tT2n/3m+mpkZvuB2xT1XAiu+MFRrvun3lL4eI1K9/mBVPen3lL4eI1I9/mBVPTdEl75I2yYk/mBVven3lL4eI1K9/mBVPTdEl75I2yYk/mBVvdwkjr7Z8c69/mBVvdYShz1Jjjk+MFRrPoEFBT5mZmY+mpkZPqLKOD0oAIM+mpkZPtYShz1Jjjk+MFRrPvTa/T03RBc+MFRrPoEFBT5mZmY+mpkZPh4jUr3p95S+/mBVvTdEF74oAIO+/mBVvfD7tb2n/3m+mpkZvh4jUr3p95S+/mBVvfD7tb2n/3m+mpkZvpqIoKWBBYW+mpkZvv/MS75XAis+mpkZPuV2Qr7xwGc+/mBVPSgAg743RBc+/mBVPf/MS75XAis+mpkZPoEFBb5mZmY+mpkZPuV2Qr7xwGc+/mBVPeB2xT0Hvg89OFaQPhkJkz2IMKKj/CKVPlHDDj4Geh2kjAGIPmZmZj6BBQW+mpkZvkmOOT7WEoe9MFRrvhbSfD5LcIukboIuvmZmZj6BBQW+mpkZvjdEFz702v29MFRrvkmOOT7WEoe9MFRrvmZmZj6BBQW+mpkZvlcCKz7/zEu+mpkZvjdEFz702v29MFRrvigAg743RBe+/mBVPdwkjr7Z8c69/mBVvfHAZ77ldkK+/mBVvSgAg743RBe+/mBVPen3lL4eI1K9/mBVPdwkjr7Z8c69/mBVvdfQWSPgdkU+MFRrPqLKOD0oAIM+mpkZPqLKOL0oAIM+mpkZPtfQWSPgdkU+MFRrPtYShz1Jjjk+MFRrPqLKOD0oAIM+mpkZPh4jUj3p95S+/mBVvR4jUr3p95S+/mBVvZqIoKWBBYW+mpkZvh4jUj3p95S+/mBVvZqIoKWBBYW+mpkZvvD7tT2n/3m+mpkZvqf/eb7w+7U9mpkZPv/MS75XAis+mpkZPigAg743RBc+/mBVPaf/eb7w+7U9mpkZPigAg743RBc+/mBVPen3lL4eI1I9/mBVPXP5oD3WEoc9OFaQPjxuqSOL5LqJmpmZPhkJkz2IMKKj/CKVPnP5oD3WEoc9OFaQPuB2xT0Hvg89OFaQPlHDDj4Geh2kjAGIPnP5oD3WEoc9OFaQPhkJkz2IMKKj/CKVPuB2xT0Hvg89OFaQPnP5oD3WEoc9OFaQPlHDDj4Geh2kjAGIPlcCKz7gdsU9MFRrPnP5oD3WEoc9OFaQPlcCKz7gdsU9MFRrPvTa/T03RBc+MFRrPigAgz6iyji9mpkZvmZmZj6BBQW+mpkZvhbSfD5LcIukboIuvigAgz6iyji9mpkZvhbSfD5LcIukboIuvlaejz6da56kh97ZvSgAgz6iyji9mpkZvlaejz6da56kh97ZvWZmZj6BBQW+mpkZvuV2Qr7xwGe+/mBVPSgAg743RBe+/mBVPfHAZ77ldkK+/mBVveV2Qr7xwGe+/mBVPfHAZ77ldkK+/mBVvTdEF74oAIO+/mBVvdYSh71Jjjk+MFRrPtfQWSPgdkU+MFRrPqLKOL0oAIM+mpkZPtYSh71Jjjk+MFRrPqLKOL0oAIM+mpkZPoEFBb5mZmY+mpkZPjdEFz4oAIO+/mBVvR4jUj3p95S+/mBVvfD7tT2n/3m+mpkZvjdEFz4oAIO+/mBVvfD7tT2n/3m+mpkZvlcCKz7/zEu+mpkZvoEFhb4wuxIkmpkZPqf/eb7w+7U9mpkZPun3lL4eI1I9/mBVPYEFhb4wuxIkmpkZPun3lL4eI1I9/mBVPen3lL4eI1K9/mBVPR4jUj3w+7U9OFaQPvTa/T03RBc+MFRrPtYShz1Jjjk+MFRrPh4jUj3w+7U9OFaQPnP5oD3WEoc9OFaQPvTa/T03RBc+MFRrPh4jUj3w+7U9OFaQPjxuqSOL5LqJmpmZPnP5oD3WEoc9OFaQPtnxzr3cJI6+/mBVPeV2Qr7xwGe+/mBVPTdEF74oAIO+/mBVvdnxzr3cJI6+/mBVPTdEF74oAIO+/mBVvR4jUr3p95S+/mBVvfTa/b03RBc+MFRrPoEFBb5mZmY+mpkZPv/MS75XAis+mpkZPvTa/b03RBc+MFRrPtYSh71Jjjk+MFRrPoEFBb5mZmY+mpkZPvHAZz7ldkK+/mBVvVcCKz7/zEu+mpkZvmZmZj6BBQW+mpkZvvHAZz7ldkK+/mBVvWZmZj6BBQW+mpkZvlaejz6da56kh97ZvfHAZz7ldkK+/mBVvTdEFz4oAIO+/mBVvVcCKz7/zEu+mpkZvqf/eb7w+7W9mpkZPun3lL4eI1K9/mBVPSgAg743RBe+/mBVPaf/eb7w+7W9mpkZPoEFhb4wuxIkmpkZPun3lL4eI1K9/mBVPbL1kTzZ8c49OFaQPh4jUj3w+7U9OFaQPtYShz1Jjjk+MFRrPrL1kTzZ8c49OFaQPjxuqSOL5LqJmpmZPh4jUj3w+7U9OFaQPrL1kTzZ8c49OFaQPtYShz1Jjjk+MFRrPtfQWSPgdkU+MFRrPlWNtqU3RJe+/mBVPR4jUr3p95S+/mBVvR4jUj3p95S+/mBVvVWNtqU3RJe+/mBVPdnxzr3cJI6+/mBVPR4jUr3p95S+/mBVvVcCK77gdsU9MFRrPvTa/b03RBc+MFRrPv/MS75XAis+mpkZPlcCK77gdsU9MFRrPv/MS75XAis+mpkZPqf/eb7w+7U9mpkZPtwkjj7Z8c69/mBVvfHAZz7ldkK+/mBVvVaejz6da56kh97Zvdwkjj7Z8c69/mBVvVaejz6da56kh97Zved6mD78MaikkB0Uvdwkjj7Z8c69/mBVved6mD78MaikkB0Uved6mD78MaikkB0UPf/MS75XAiu+mpkZPqf/eb7w+7W9mpkZPigAg743RBe+/mBVPf/MS75XAiu+mpkZPigAg743RBe+/mBVPeV2Qr7xwGe+/mBVPbL1kbzZ8c49OFaQPjxuqSOL5LqJmpmZPrL1kTzZ8c49OFaQPrL1kbzZ8c49OFaQPrL1kTzZ8c49OFaQPtfQWSPgdkU+MFRrPrL1kbzZ8c49OFaQPtfQWSPgdkU+MFRrPtYSh71Jjjk+MFRrPtnxzj3cJI6+/mBVPVWNtqU3RJe+/mBVPR4jUj3p95S+/mBVvdnxzj3cJI6+/mBVPR4jUj3p95S+/mBVvTdEFz4oAIO+/mBVveV2Qr5FKAk9MFRrPqf/eb7w+7U9mpkZPoEFhb4wuxIkmpkZPuV2Qr5FKAk9MFRrPlcCK77gdsU9MFRrPqf/eb7w+7U9mpkZPoEFBb5mZma+mpkZPuV2Qr7xwGe+/mBVPdnxzr3cJI6+/mBVPYEFBb5mZma+mpkZPv/MS75XAiu+mpkZPuV2Qr7xwGe+/mBVPR4jUr3w+7U9OFaQPtYSh71Jjjk+MFRrPvTa/b03RBc+MFRrPh4jUr3w+7U9OFaQPrL1kbzZ8c49OFaQPtYSh71Jjjk+MFRrPh4jUr3w+7U9OFaQPjxuqSOL5LqJmpmZPrL1kbzZ8c49OFaQPuV2Qj7xwGe+/mBVPTdEFz4oAIO+/mBVvfHAZz7ldkK+/mBVveV2Qj7xwGe+/mBVPdnxzj3cJI6+/mBVPTdEFz4oAIO+/mBVveV2Qr5FKAm9MFRrPuV2Qr5FKAk9MFRrPoEFhb4wuxIkmpkZPuV2Qr5FKAm9MFRrPoEFhb4wuxIkmpkZPqf/eb7w+7W9mpkZPqLKOL0oAIO+mpkZPtnxzr3cJI6+/mBVPVWNtqU3RJe+/mBVPaLKOL0oAIO+mpkZPoEFBb5mZma+mpkZPtnxzr3cJI6+/mBVPXP5oL3WEoc9OFaQPvTa/b03RBc+MFRrPlcCK77gdsU9MFRrPnP5oL3WEoc9OFaQPh4jUr3w+7U9OFaQPvTa/b03RBc+MFRrPnP5oL3WEoc9OFaQPjxuqSOL5LqJmpmZPh4jUr3w+7U9OFaQPigAgz43RBe+/mBVPfHAZz7ldkK+/mBVvdwkjj7Z8c69/mBVvSgAgz43RBe+/mBVPeV2Qj7xwGe+/mBVPfHAZz7ldkK+/mBVvSgAgz43RBe+/mBVPdwkjj7Z8c69/mBVved6mD78MaikkB0UPVcCK77gdsW9MFRrPqf/eb7w+7W9mpkZPv/MS75XAiu+mpkZPlcCK77gdsW9MFRrPuV2Qr5FKAm9MFRrPqf/eb7w+7W9mpkZPqLKOD0oAIO+mpkZPqLKOL0oAIO+mpkZPlWNtqU3RJe+/mBVPaLKOD0oAIO+mpkZPlWNtqU3RJe+/mBVPdnxzj3cJI6+/mBVPeB2xb0Hvg89OFaQPjxuqSOL5LqJmpmZPnP5oL3WEoc9OFaQPuB2xb0Hvg89OFaQPlcCK77gdsU9MFRrPuV2Qr5FKAk9MFRrPuB2xb0Hvg89OFaQPnP5oL3WEoc9OFaQPlcCK77gdsU9MFRrPun3lD4eI1K9/mBVPed6mD78MaikkB0UPVaejz6da56kh97ZPen3lD4eI1K9/mBVPVaejz6da56kh97ZPSgAgz43RBe+/mBVPen3lD4eI1K9/mBVPSgAgz43RBe+/mBVPed6mD78MaikkB0UPfTa/b03RBe+MFRrPlcCK77gdsW9MFRrPv/MS75XAiu+mpkZPvTa/b03RBe+MFRrPv/MS75XAiu+mpkZPoEFBb5mZma+mpkZPoEFBT5mZma+mpkZPqLKOD0oAIO+mpkZPtnxzj3cJI6+/mBVPYEFBT5mZma+mpkZPtnxzj3cJI6+/mBVPeV2Qj7xwGe+/mBVPR4j0r1yy2cjOFaQPjxuqSOL5LqJmpmZPjxuqSOL5LqJmpmZPh4j0r1yy2cjOFaQPuB2xb0Hvg89OFaQPuV2Qr5FKAk9MFRrPh4j0r1yy2cjOFaQPuV2Qr5FKAk9MFRrPuV2Qr5FKAm9MFRrPh4j0r1yy2cjOFaQPjxuqSOL5LqJmpmZPuB2xb0Hvg89OFaQPtYSh71Jjjm+MFRrPoEFBb5mZma+mpkZPqLKOL0oAIO+mpkZPtYSh71Jjjm+MFRrPvTa/b03RBe+MFRrPoEFBb5mZma+mpkZPv/MSz5XAiu+mpkZPuV2Qj7xwGe+/mBVPSgAgz43RBe+/mBVPf/MSz5XAiu+mpkZPigAgz43RBe+/mBVPVaejz6da56kh97ZPf/MSz5XAiu+mpkZPoEFBT5mZma+mpkZPuV2Qj7xwGe+/mBVPeB2xb0Hvg+9OFaQPuV2Qr5FKAm9MFRrPlcCK77gdsW9MFRrPuB2xb0Hvg+9OFaQPjxuqSOL5LqJmpmZPh4j0r1yy2cjOFaQPuB2xb0Hvg+9OFaQPh4j0r1yy2cjOFaQPuV2Qr5FKAm9MFRrPghObqXgdkW+MFRrPtYSh71Jjjm+MFRrPqLKOL0oAIO+mpkZPghObqXgdkW+MFRrPqLKOL0oAIO+mpkZPqLKOD0oAIO+mpkZPqf/eT7w+7W9mpkZPlaejz6da56kh97ZPRbSfD5LcIukboIuPqf/eT7w+7W9mpkZPv/MSz5XAiu+mpkZPlaejz6da56kh97ZPXP5oL3WEoe9OFaQPlcCK77gdsW9MFRrPvTa/b03RBe+MFRrPnP5oL3WEoe9OFaQPuB2xb0Hvg+9OFaQPlcCK77gdsW9MFRrPnP5oL3WEoe9OFaQPjxuqSOL5LqJmpmZPuB2xb0Hvg+9OFaQPtYShz1Jjjm+MFRrPghObqXgdkW+MFRrPqLKOD0oAIO+mpkZPtYShz1Jjjm+MFRrPqLKOD0oAIO+mpkZPoEFBT5mZma+mpkZPh4jUr3w+7W9OFaQPjxuqSOL5LqJmpmZPnP5oL3WEoe9OFaQPh4jUr3w+7W9OFaQPvTa/b03RBe+MFRrPtYSh71Jjjm+MFRrPh4jUr3w+7W9OFaQPnP5oL3WEoe9OFaQPvTa/b03RBe+MFRrPvTa/T03RBe+MFRrPtYShz1Jjjm+MFRrPoEFBT5mZma+mpkZPvTa/T03RBe+MFRrPoEFBT5mZma+mpkZPv/MSz5XAiu+mpkZPrL1kbzZ8c69OFaQPjxuqSOL5LqJmpmZPh4jUr3w+7W9OFaQPrL1kbzZ8c69OFaQPh4jUr3w+7W9OFaQPtYSh71Jjjm+MFRrPrL1kbzZ8c69OFaQPtYSh71Jjjm+MFRrPghObqXgdkW+MFRrPlcCKz7gdsW9MFRrPvTa/T03RBe+MFRrPv/MSz5XAiu+mpkZPlcCKz7gdsW9MFRrPv/MSz5XAiu+mpkZPqf/eT7w+7W9mpkZPlcCKz7gdsW9MFRrPqf/eT7w+7W9mpkZPhbSfD5LcIukboIuPrL1kTzZ8c69OFaQPghObqXgdkW+MFRrPtYShz1Jjjm+MFRrPrL1kTzZ8c69OFaQPjxuqSOL5LqJmpmZPrL1kbzZ8c69OFaQPrL1kTzZ8c69OFaQPrL1kbzZ8c69OFaQPghObqXgdkW+MFRrPuV2Qj5FKAm9MFRrPhbSfD5LcIukboIuPha2Sz7ftGCkSPFlPuV2Qj5FKAm9MFRrPha2Sz7ftGCkSPFlPlHDDj4Geh2kjAGIPuV2Qj5FKAm9MFRrPlcCKz7gdsW9MFRrPhbSfD5LcIukboIuPuV2Qj5FKAm9MFRrPlHDDj4Geh2kjAGIPlcCKz7gdsW9MFRrPh4jUj3w+7W9OFaQPtYShz1Jjjm+MFRrPvTa/T03RBe+MFRrPh4jUj3w+7W9OFaQPjxuqSOL5LqJmpmZPrL1kTzZ8c69OFaQPh4jUj3w+7W9OFaQPrL1kTzZ8c69OFaQPtYShz1Jjjm+MFRrPnP5oD3WEoe9OFaQPvTa/T03RBe+MFRrPlcCKz7gdsW9MFRrPnP5oD3WEoe9OFaQPhkJkz2IMKKj/CKVPjxuqSOL5LqJmpmZPnP5oD3WEoe9OFaQPh4jUj3w+7W9OFaQPvTa/T03RBe+MFRrPnP5oD3WEoe9OFaQPlcCKz7gdsW9MFRrPlHDDj4Geh2kjAGIPnP5oD3WEoe9OFaQPjxuqSOL5LqJmpmZPh4jUj3w+7W9OFaQPuB2xT0Hvg+9OFaQPlHDDj4Geh2kjAGIPhkJkz2IMKKj/CKVPuB2xT0Hvg+9OFaQPnP5oD3WEoe9OFaQPlHDDj4Geh2kjAGIPuB2xT0Hvg+9OFaQPhkJkz2IMKKj/CKVPnP5oD3WEoe9OFaQPgAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPw==&quot;;&lt;/script&gt;&lt;script&gt;window.DEACTIVATE_WS = true;&lt;/script&gt;
        &lt;script&gt;window.UNIQUE_VERSION_ID = 1758270264676;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
" width="100%" height="500px" style="border:none;"></iframe></div></div>
</div>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="cylinder.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Cylinder</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="box.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Box</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Kristoffer H. Andersen
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../../_static/documentation_options.js?v=ce408652"></script>
    <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>