<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Sections in ADA" href="sections.html" /><link rel="prev" title="Boolean Operations" href="boolean_operations.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Placement of parts and objects - ADA - Assembly for Design &amp; Analysis</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">ADA - Assembly for Design & Analysis</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">ADA - Assembly for Design & Analysis</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../steel_detailing.html">Steel detailing as a method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../path_to_software_agnosticism.html">Path to Software Agnosticism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../meshing.html">Build mesh recipes, not meshes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="solid_primitives.html">Modelling with adapy</a></li>
<li class="toctree-l1"><a class="reference internal" href="parts_and_assemblies.html">Parts and Assemblies</a></li>
<li class="toctree-l1"><a class="reference internal" href="boolean_operations.html">Boolean Operations</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Placement of parts and objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="sections.html">Sections in ADA</a></li>
<li class="toctree-l1"><a class="reference internal" href="beams.html">Beams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis/simply_supported_beam_eigenvalue.html">Eigenvalue Analysis of Simply Supported Beam</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis/simply_supported_beam_static_gravity.html">Static Analysis of Simply Supported Beam</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FEA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fea/fea_software.html">FEA Software</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ongoing Work</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ifc_database.html">IFC Database</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code.html">Code Documentation</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/Krande/adapy/blob/main/docs/documents/notebooks/design/placement.ipynb?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/Krande/adapy/edit/main/docs/documents/notebooks/design/placement.ipynb" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <div class="admonition note">
  This page was generated from
  <a class="reference external" href="https://github.com/Krande/adapy/blob/v0.7.1/docs/documents/notebooks/design/placement.ipynb">docs/documents/notebooks/design/placement.ipynb</a>.<br>
  Interactive online version:
  <span style="white-space: nowrap;"><a href="https://mybinder.org/v2/gh/Krande/adapy/v0.7.1?filepath=docs/documents/notebooks/design/placement.ipynb"><img alt="Binder badge" src="https://mybinder.org/badge_logo.svg" style="vertical-align:text-bottom"></a> - </span>
  <a href="placement.ipynb" class="reference download internal" download>Download notebook</a> -
  <script>
    if (document.location.host) {
      let nbviewer_link = document.createElement('a');
      nbviewer_link.setAttribute('href',
        'https://nbviewer.org/url' +
        (window.location.protocol == 'https:' ? 's/' : '/') +
        window.location.host +
        window.location.pathname.slice(0, -4) +
        'ipynb');
      nbviewer_link.innerHTML = 'Or view it on <em>nbviewer</em>';
      nbviewer_link.classList.add('reference');
      nbviewer_link.classList.add('external');
      document.currentScript.replaceWith(nbviewer_link, '.');
    }
  </script>
</div><section id="Placement-of-parts-and-objects">
<h1>Placement of parts and objects<a class="headerlink" href="#Placement-of-parts-and-objects" title="Link to this heading">¶</a></h1>
<p>Placement of every object in adapy can be controlled using the <code class="docutils literal notranslate"><span class="pre">ada.Placement</span></code> object.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">ada</span>
</pre></div>
</div>
</div>
<p>First let’s check out how we can copy a single beam and apply a translation and rotation to each instance of the copy</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bm</span> <span class="o">=</span> <span class="n">ada</span><span class="o">.</span><span class="n">Beam</span><span class="p">(</span><span class="s1">&#39;bm1&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;IPE300&#39;</span><span class="p">)</span>
<span class="n">other_beams</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">angle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="mi">45</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span> <span class="n">start</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">other_beams</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bm</span><span class="o">.</span><span class="n">copy_to</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;bm</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">rotation_axis</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">rotation_angle</span><span class="o">=</span><span class="n">angle</span><span class="p">))</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">ada</span><span class="o">.</span><span class="n">Part</span><span class="p">(</span><span class="s1">&#39;MyPart&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">bm</span><span class="p">,</span> <span class="o">*</span><span class="n">other_beams</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
        &lt;title&gt;ADA-PY Viewer&lt;/title&gt;
      &lt;script type=&quot;module&quot; crossorigin&gt;
var vk=Object.defineProperty;var bk=(n,e,t)=&gt;e in n?vk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var dt=(n,e,t)=&gt;bk(n,typeof e!=&quot;symbol&quot;?e+&quot;&quot;:e,t);(function(){const e=document.createElement(&quot;link&quot;).relList;if(e&amp;&amp;e.supports&amp;&amp;e.supports(&quot;modulepreload&quot;))return;for(const r of document.querySelectorAll(&#x27;link[rel=&quot;modulepreload&quot;]&#x27;))i(r);new MutationObserver(r=&gt;{for(const s of r)if(s.type===&quot;childList&quot;)for(const o of s.addedNodes)o.tagName===&quot;LINK&quot;&amp;&amp;o.rel===&quot;modulepreload&quot;&amp;&amp;i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&amp;&amp;(s.integrity=r.integrity),r.referrerPolicy&amp;&amp;(s.referrerPolicy=r.referrerPolicy),r.crossOrigin===&quot;use-credentials&quot;?s.credentials=&quot;include&quot;:r.crossOrigin===&quot;anonymous&quot;?s.credentials=&quot;omit&quot;:s.credentials=&quot;same-origin&quot;,s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Z0(n){return n&amp;&amp;n.__esModule&amp;&amp;Object.prototype.hasOwnProperty.call(n,&quot;default&quot;)?n.default:n}function xk(n){if(Object.prototype.hasOwnProperty.call(n,&quot;__esModule&quot;))return n;var e=n.default;if(typeof e==&quot;function&quot;){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var sb={exports:{}},Ef={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IM;function Sk(){if(IM)return Ef;IM=1;var n=Symbol.for(&quot;react.transitional.element&quot;),e=Symbol.for(&quot;react.fragment&quot;);function t(i,r,s){var o=null;if(s!==void 0&amp;&amp;(o=&quot;&quot;+s),r.key!==void 0&amp;&amp;(o=&quot;&quot;+r.key),&quot;key&quot;in r){s={};for(var l in r)l!==&quot;key&quot;&amp;&amp;(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:o,ref:r!==void 0?r:null,props:s}}return Ef.Fragment=e,Ef.jsx=t,Ef.jsxs=t,Ef}var PM;function wk(){return PM||(PM=1,sb.exports=Sk()),sb.exports}var P=wk(),ob={exports:{}},Tf={},ab={exports:{}},lb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LM;function Ek(){return LM||(LM=1,function(n){function e(I,j){var G=I.length;I.push(j);e:for(;0&lt;G;){var ee=G-1&gt;&gt;&gt;1,F=I[ee];if(0&lt;r(F,j))I[ee]=j,I[G]=F,G=ee;else break e}}function t(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var j=I[0],G=I.pop();if(G!==j){I[0]=G;e:for(var ee=0,F=I.length,ne=F&gt;&gt;&gt;1;ee&lt;ne;){var le=2*(ee+1)-1,ce=I[le],ie=le+1,oe=I[ie];if(0&gt;r(ce,G))ie&lt;F&amp;&amp;0&gt;r(oe,ce)?(I[ee]=oe,I[ie]=G,ee=ie):(I[ee]=ce,I[le]=G,ee=le);else if(ie&lt;F&amp;&amp;0&gt;r(oe,G))I[ee]=oe,I[ie]=G,ee=ie;else break e}}return j}function r(I,j){var G=I.sortIndex-j.sortIndex;return G!==0?G:I.id-j.id}if(n.unstable_now=void 0,typeof performance==&quot;object&quot;&amp;&amp;typeof performance.now==&quot;function&quot;){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,m=3,g=!1,v=!1,x=!1,b=!1,_=typeof setTimeout==&quot;function&quot;?setTimeout:null,T=typeof clearTimeout==&quot;function&quot;?clearTimeout:null,w=typeof setImmediate&lt;&quot;u&quot;?setImmediate:null;function E(I){for(var j=t(h);j!==null;){if(j.callback===null)i(h);else if(j.startTime&lt;=I)i(h),j.sortIndex=j.expirationTime,e(u,j);else break;j=t(h)}}function R(I){if(x=!1,E(I),!v)if(t(u)!==null)v=!0,N||(N=!0,V());else{var j=t(h);j!==null&amp;&amp;K(R,j.startTime-I)}}var N=!1,A=-1,D=5,C=-1;function O(){return b?!0:!(n.unstable_now()-C&lt;D)}function L(){if(b=!1,N){var I=n.unstable_now();C=I;var j=!0;try{e:{v=!1,x&amp;&amp;(x=!1,T(A),A=-1),g=!0;var G=m;try{t:{for(E(I),p=t(u);p!==null&amp;&amp;!(p.expirationTime&gt;I&amp;&amp;O());){var ee=p.callback;if(typeof ee==&quot;function&quot;){p.callback=null,m=p.priorityLevel;var F=ee(p.expirationTime&lt;=I);if(I=n.unstable_now(),typeof F==&quot;function&quot;){p.callback=F,E(I),j=!0;break t}p===t(u)&amp;&amp;i(u),E(I)}else i(u);p=t(u)}if(p!==null)j=!0;else{var ne=t(h);ne!==null&amp;&amp;K(R,ne.startTime-I),j=!1}}break e}finally{p=null,m=G,g=!1}j=void 0}}finally{j?V():N=!1}}}var V;if(typeof w==&quot;function&quot;)V=function(){w(L)};else if(typeof MessageChannel&lt;&quot;u&quot;){var Z=new MessageChannel,z=Z.port2;Z.port1.onmessage=L,V=function(){z.postMessage(null)}}else V=function(){_(L,0)};function K(I,j){A=_(function(){I(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0&gt;I||125&lt;I?console.error(&quot;forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported&quot;):D=0&lt;I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(I){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var G=m;m=j;try{return I()}finally{m=G}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var G=m;m=I;try{return j()}finally{m=G}},n.unstable_scheduleCallback=function(I,j,G){var ee=n.unstable_now();switch(typeof G==&quot;object&quot;&amp;&amp;G!==null?(G=G.delay,G=typeof G==&quot;number&quot;&amp;&amp;0&lt;G?ee+G:ee):G=ee,I){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=G+F,I={id:f++,callback:j,priorityLevel:I,startTime:G,expirationTime:F,sortIndex:-1},G&gt;ee?(I.sortIndex=G,e(h,I),t(u)===null&amp;&amp;I===t(h)&amp;&amp;(x?(T(A),A=-1):x=!0,K(R,G-ee))):(I.sortIndex=F,e(u,I),v||g||(v=!0,N||(N=!0,V()))),I},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(I){var j=m;return function(){var G=m;m=j;try{return I.apply(this,arguments)}finally{m=G}}}}(lb)),lb}var UM;function Tk(){return UM||(UM=1,ab.exports=Ek()),ab.exports}var cb={exports:{}},qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kM;function Mk(){if(kM)return qt;kM=1;var n=Symbol.for(&quot;react.transitional.element&quot;),e=Symbol.for(&quot;react.portal&quot;),t=Symbol.for(&quot;react.fragment&quot;),i=Symbol.for(&quot;react.strict_mode&quot;),r=Symbol.for(&quot;react.profiler&quot;),s=Symbol.for(&quot;react.consumer&quot;),o=Symbol.for(&quot;react.context&quot;),l=Symbol.for(&quot;react.forward_ref&quot;),u=Symbol.for(&quot;react.suspense&quot;),h=Symbol.for(&quot;react.memo&quot;),f=Symbol.for(&quot;react.lazy&quot;),p=Symbol.iterator;function m(F){return F===null||typeof F!=&quot;object&quot;?null:(F=p&amp;&amp;F[p]||F[&quot;@@iterator&quot;],typeof F==&quot;function&quot;?F:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function b(F,ne,le){this.props=F,this.context=ne,this.refs=x,this.updater=le||g}b.prototype.isReactComponent={},b.prototype.setState=function(F,ne){if(typeof F!=&quot;object&quot;&amp;&amp;typeof F!=&quot;function&quot;&amp;&amp;F!=null)throw Error(&quot;takes an object of state variables to update or a function which returns an object of state variables.&quot;);this.updater.enqueueSetState(this,F,ne,&quot;setState&quot;)},b.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,&quot;forceUpdate&quot;)};function _(){}_.prototype=b.prototype;function T(F,ne,le){this.props=F,this.context=ne,this.refs=x,this.updater=le||g}var w=T.prototype=new _;w.constructor=T,v(w,b.prototype),w.isPureReactComponent=!0;var E=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function A(F,ne,le,ce,ie,oe){return le=oe.ref,{$$typeof:n,type:F,key:ne,ref:le!==void 0?le:null,props:oe}}function D(F,ne){return A(F.type,ne,void 0,void 0,void 0,F.props)}function C(F){return typeof F==&quot;object&quot;&amp;&amp;F!==null&amp;&amp;F.$$typeof===n}function O(F){var ne={&quot;=&quot;:&quot;=0&quot;,&quot;:&quot;:&quot;=2&quot;};return&quot;$&quot;+F.replace(/[=:]/g,function(le){return ne[le]})}var L=/\/+/g;function V(F,ne){return typeof F==&quot;object&quot;&amp;&amp;F!==null&amp;&amp;F.key!=null?O(&quot;&quot;+F.key):ne.toString(36)}function Z(){}function z(F){switch(F.status){case&quot;fulfilled&quot;:return F.value;case&quot;rejected&quot;:throw F.reason;default:switch(typeof F.status==&quot;string&quot;?F.then(Z,Z):(F.status=&quot;pending&quot;,F.then(function(ne){F.status===&quot;pending&quot;&amp;&amp;(F.status=&quot;fulfilled&quot;,F.value=ne)},function(ne){F.status===&quot;pending&quot;&amp;&amp;(F.status=&quot;rejected&quot;,F.reason=ne)})),F.status){case&quot;fulfilled&quot;:return F.value;case&quot;rejected&quot;:throw F.reason}}throw F}function K(F,ne,le,ce,ie){var oe=typeof F;(oe===&quot;undefined&quot;||oe===&quot;boolean&quot;)&amp;&amp;(F=null);var ae=!1;if(F===null)ae=!0;else switch(oe){case&quot;bigint&quot;:case&quot;string&quot;:case&quot;number&quot;:ae=!0;break;case&quot;object&quot;:switch(F.$$typeof){case n:case e:ae=!0;break;case f:return ae=F._init,K(ae(F._payload),ne,le,ce,ie)}}if(ae)return ie=ie(F),ae=ce===&quot;&quot;?&quot;.&quot;+V(F,0):ce,E(ie)?(le=&quot;&quot;,ae!=null&amp;&amp;(le=ae.replace(L,&quot;$&amp;/&quot;)+&quot;/&quot;),K(ie,ne,le,&quot;&quot;,function(He){return He})):ie!=null&amp;&amp;(C(ie)&amp;&amp;(ie=D(ie,le+(ie.key==null||F&amp;&amp;F.key===ie.key?&quot;&quot;:(&quot;&quot;+ie.key).replace(L,&quot;$&amp;/&quot;)+&quot;/&quot;)+ae)),ne.push(ie)),1;ae=0;var ue=ce===&quot;&quot;?&quot;.&quot;:ce+&quot;:&quot;;if(E(F))for(var ve=0;ve&lt;F.length;ve++)ce=F[ve],oe=ue+V(ce,ve),ae+=K(ce,ne,le,oe,ie);else if(ve=m(F),typeof ve==&quot;function&quot;)for(F=ve.call(F),ve=0;!(ce=F.next()).done;)ce=ce.value,oe=ue+V(ce,ve++),ae+=K(ce,ne,le,oe,ie);else if(oe===&quot;object&quot;){if(typeof F.then==&quot;function&quot;)return K(z(F),ne,le,ce,ie);throw ne=String(F),Error(&quot;Objects are not valid as a React child (found: &quot;+(ne===&quot;[object Object]&quot;?&quot;object with keys {&quot;+Object.keys(F).join(&quot;, &quot;)+&quot;}&quot;:ne)+&quot;). If you meant to render a collection of children, use an array instead.&quot;)}return ae}function I(F,ne,le){if(F==null)return F;var ce=[],ie=0;return K(F,ce,&quot;&quot;,&quot;&quot;,function(oe){return ne.call(le,oe,ie++)}),ce}function j(F){if(F._status===-1){var ne=F._result;ne=ne(),ne.then(function(le){(F._status===0||F._status===-1)&amp;&amp;(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&amp;&amp;(F._status=2,F._result=le)}),F._status===-1&amp;&amp;(F._status=0,F._result=ne)}if(F._status===1)return F._result.default;throw F._result}var G=typeof reportError==&quot;function&quot;?reportError:function(F){if(typeof window==&quot;object&quot;&amp;&amp;typeof window.ErrorEvent==&quot;function&quot;){var ne=new window.ErrorEvent(&quot;error&quot;,{bubbles:!0,cancelable:!0,message:typeof F==&quot;object&quot;&amp;&amp;F!==null&amp;&amp;typeof F.message==&quot;string&quot;?String(F.message):String(F),error:F});if(!window.dispatchEvent(ne))return}else if(typeof process==&quot;object&quot;&amp;&amp;typeof process.emit==&quot;function&quot;){process.emit(&quot;uncaughtException&quot;,F);return}console.error(F)};function ee(){}return qt.Children={map:I,forEach:function(F,ne,le){I(F,function(){ne.apply(this,arguments)},le)},count:function(F){var ne=0;return I(F,function(){ne++}),ne},toArray:function(F){return I(F,function(ne){return ne})||[]},only:function(F){if(!C(F))throw Error(&quot;React.Children.only expected to receive a single React element child.&quot;);return F}},qt.Component=b,qt.Fragment=t,qt.Profiler=r,qt.PureComponent=T,qt.StrictMode=i,qt.Suspense=u,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,qt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return R.H.useMemoCache(F)}},qt.cache=function(F){return function(){return F.apply(null,arguments)}},qt.cloneElement=function(F,ne,le){if(F==null)throw Error(&quot;The argument must be a React element, but you passed &quot;+F+&quot;.&quot;);var ce=v({},F.props),ie=F.key,oe=void 0;if(ne!=null)for(ae in ne.ref!==void 0&amp;&amp;(oe=void 0),ne.key!==void 0&amp;&amp;(ie=&quot;&quot;+ne.key),ne)!N.call(ne,ae)||ae===&quot;key&quot;||ae===&quot;__self&quot;||ae===&quot;__source&quot;||ae===&quot;ref&quot;&amp;&amp;ne.ref===void 0||(ce[ae]=ne[ae]);var ae=arguments.length-2;if(ae===1)ce.children=le;else if(1&lt;ae){for(var ue=Array(ae),ve=0;ve&lt;ae;ve++)ue[ve]=arguments[ve+2];ce.children=ue}return A(F.type,ie,void 0,void 0,oe,ce)},qt.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:s,_context:F},F},qt.createElement=function(F,ne,le){var ce,ie={},oe=null;if(ne!=null)for(ce in ne.key!==void 0&amp;&amp;(oe=&quot;&quot;+ne.key),ne)N.call(ne,ce)&amp;&amp;ce!==&quot;key&quot;&amp;&amp;ce!==&quot;__self&quot;&amp;&amp;ce!==&quot;__source&quot;&amp;&amp;(ie[ce]=ne[ce]);var ae=arguments.length-2;if(ae===1)ie.children=le;else if(1&lt;ae){for(var ue=Array(ae),ve=0;ve&lt;ae;ve++)ue[ve]=arguments[ve+2];ie.children=ue}if(F&amp;&amp;F.defaultProps)for(ce in ae=F.defaultProps,ae)ie[ce]===void 0&amp;&amp;(ie[ce]=ae[ce]);return A(F,oe,void 0,void 0,null,ie)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(F){return{$$typeof:l,render:F}},qt.isValidElement=C,qt.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:j}},qt.memo=function(F,ne){return{$$typeof:h,type:F,compare:ne===void 0?null:ne}},qt.startTransition=function(F){var ne=R.T,le={};R.T=le;try{var ce=F(),ie=R.S;ie!==null&amp;&amp;ie(le,ce),typeof ce==&quot;object&quot;&amp;&amp;ce!==null&amp;&amp;typeof ce.then==&quot;function&quot;&amp;&amp;ce.then(ee,G)}catch(oe){G(oe)}finally{R.T=ne}},qt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},qt.use=function(F){return R.H.use(F)},qt.useActionState=function(F,ne,le){return R.H.useActionState(F,ne,le)},qt.useCallback=function(F,ne){return R.H.useCallback(F,ne)},qt.useContext=function(F){return R.H.useContext(F)},qt.useDebugValue=function(){},qt.useDeferredValue=function(F,ne){return R.H.useDeferredValue(F,ne)},qt.useEffect=function(F,ne,le){var ce=R.H;if(typeof le==&quot;function&quot;)throw Error(&quot;useEffect CRUD overload is not enabled in this build of React.&quot;);return ce.useEffect(F,ne)},qt.useId=function(){return R.H.useId()},qt.useImperativeHandle=function(F,ne,le){return R.H.useImperativeHandle(F,ne,le)},qt.useInsertionEffect=function(F,ne){return R.H.useInsertionEffect(F,ne)},qt.useLayoutEffect=function(F,ne){return R.H.useLayoutEffect(F,ne)},qt.useMemo=function(F,ne){return R.H.useMemo(F,ne)},qt.useOptimistic=function(F,ne){return R.H.useOptimistic(F,ne)},qt.useReducer=function(F,ne,le){return R.H.useReducer(F,ne,le)},qt.useRef=function(F){return R.H.useRef(F)},qt.useState=function(F){return R.H.useState(F)},qt.useSyncExternalStore=function(F,ne,le){return R.H.useSyncExternalStore(F,ne,le)},qt.useTransition=function(){return R.H.useTransition()},qt.version=&quot;19.1.0&quot;,qt}var FM;function Lc(){return FM||(FM=1,cb.exports=Mk()),cb.exports}var ub={exports:{}},or={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zM;function Ak(){if(zM)return or;zM=1;var n=Lc();function e(u){var h=&quot;https://react.dev/errors/&quot;+u;if(1&lt;arguments.length){h+=&quot;?args[]=&quot;+encodeURIComponent(arguments[1]);for(var f=2;f&lt;arguments.length;f++)h+=&quot;&amp;args[]=&quot;+encodeURIComponent(arguments[f])}return&quot;Minified React error #&quot;+u+&quot;; visit &quot;+h+&quot; for the full message or use the non-minified dev environment for full errors and additional helpful warnings.&quot;}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for(&quot;react.portal&quot;);function s(u,h,f){var p=3&lt;arguments.length&amp;&amp;arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:&quot;&quot;+p,children:u,containerInfo:h,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u===&quot;font&quot;)return&quot;&quot;;if(typeof h==&quot;string&quot;)return h===&quot;use-credentials&quot;?h:&quot;&quot;}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,or.createPortal=function(u,h){var f=2&lt;arguments.length&amp;&amp;arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&amp;&amp;h.nodeType!==9&amp;&amp;h.nodeType!==11)throw Error(e(299));return s(u,h,null,f)},or.flushSync=function(u){var h=o.T,f=i.p;try{if(o.T=null,i.p=2,u)return u()}finally{o.T=h,i.p=f,i.d.f()}},or.preconnect=function(u,h){typeof u==&quot;string&quot;&amp;&amp;(h?(h=h.crossOrigin,h=typeof h==&quot;string&quot;?h===&quot;use-credentials&quot;?h:&quot;&quot;:void 0):h=null,i.d.C(u,h))},or.prefetchDNS=function(u){typeof u==&quot;string&quot;&amp;&amp;i.d.D(u)},or.preinit=function(u,h){if(typeof u==&quot;string&quot;&amp;&amp;h&amp;&amp;typeof h.as==&quot;string&quot;){var f=h.as,p=l(f,h.crossOrigin),m=typeof h.integrity==&quot;string&quot;?h.integrity:void 0,g=typeof h.fetchPriority==&quot;string&quot;?h.fetchPriority:void 0;f===&quot;style&quot;?i.d.S(u,typeof h.precedence==&quot;string&quot;?h.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:g}):f===&quot;script&quot;&amp;&amp;i.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:g,nonce:typeof h.nonce==&quot;string&quot;?h.nonce:void 0})}},or.preinitModule=function(u,h){if(typeof u==&quot;string&quot;)if(typeof h==&quot;object&quot;&amp;&amp;h!==null){if(h.as==null||h.as===&quot;script&quot;){var f=l(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:f,integrity:typeof h.integrity==&quot;string&quot;?h.integrity:void 0,nonce:typeof h.nonce==&quot;string&quot;?h.nonce:void 0})}}else h==null&amp;&amp;i.d.M(u)},or.preload=function(u,h){if(typeof u==&quot;string&quot;&amp;&amp;typeof h==&quot;object&quot;&amp;&amp;h!==null&amp;&amp;typeof h.as==&quot;string&quot;){var f=h.as,p=l(f,h.crossOrigin);i.d.L(u,f,{crossOrigin:p,integrity:typeof h.integrity==&quot;string&quot;?h.integrity:void 0,nonce:typeof h.nonce==&quot;string&quot;?h.nonce:void 0,type:typeof h.type==&quot;string&quot;?h.type:void 0,fetchPriority:typeof h.fetchPriority==&quot;string&quot;?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy==&quot;string&quot;?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet==&quot;string&quot;?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes==&quot;string&quot;?h.imageSizes:void 0,media:typeof h.media==&quot;string&quot;?h.media:void 0})}},or.preloadModule=function(u,h){if(typeof u==&quot;string&quot;)if(h){var f=l(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as==&quot;string&quot;&amp;&amp;h.as!==&quot;script&quot;?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity==&quot;string&quot;?h.integrity:void 0})}else i.d.m(u)},or.requestFormReset=function(u){i.d.r(u)},or.unstable_batchedUpdates=function(u,h){return u(h)},or.useFormState=function(u,h,f){return o.H.useFormState(u,h,f)},or.useFormStatus=function(){return o.H.useHostTransitionStatus()},or.version=&quot;19.1.0&quot;,or}var BM;function J0(){if(BM)return ub.exports;BM=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&gt;&quot;u&quot;||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=&quot;function&quot;))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ub.exports=Ak(),ub.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HM;function Ck(){if(HM)return Tf;HM=1;var n=Tk(),e=Lc(),t=J0();function i(a){var c=&quot;https://react.dev/errors/&quot;+a;if(1&lt;arguments.length){c+=&quot;?args[]=&quot;+encodeURIComponent(arguments[1]);for(var d=2;d&lt;arguments.length;d++)c+=&quot;&amp;args[]=&quot;+encodeURIComponent(arguments[d])}return&quot;Minified React error #&quot;+a+&quot;; visit &quot;+c+&quot; for the full message or use the non-minified dev environment for full errors and additional helpful warnings.&quot;}function r(a){return!(!a||a.nodeType!==1&amp;&amp;a.nodeType!==9&amp;&amp;a.nodeType!==11)}function s(a){var c=a,d=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&amp;4098)!==0&amp;&amp;(d=c.return),a=c.return;while(a)}return c.tag===3?d:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&amp;&amp;(a=a.alternate,a!==null&amp;&amp;(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(i(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(i(188));return c!==a?null:a}for(var d=a,y=c;;){var S=d.return;if(S===null)break;var M=S.alternate;if(M===null){if(y=S.return,y!==null){d=y;continue}break}if(S.child===M.child){for(M=S.child;M;){if(M===d)return l(S),a;if(M===y)return l(S),c;M=M.sibling}throw Error(i(188))}if(d.return!==y.return)d=S,y=M;else{for(var U=!1,W=S.child;W;){if(W===d){U=!0,d=S,y=M;break}if(W===y){U=!0,y=S,d=M;break}W=W.sibling}if(!U){for(W=M.child;W;){if(W===d){U=!0,d=M,y=S;break}if(W===y){U=!0,y=M,d=S;break}W=W.sibling}if(!U)throw Error(i(189))}}if(d.alternate!==y)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?a:c}function h(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=h(a),c!==null)return c;a=a.sibling}return null}var f=Object.assign,p=Symbol.for(&quot;react.element&quot;),m=Symbol.for(&quot;react.transitional.element&quot;),g=Symbol.for(&quot;react.portal&quot;),v=Symbol.for(&quot;react.fragment&quot;),x=Symbol.for(&quot;react.strict_mode&quot;),b=Symbol.for(&quot;react.profiler&quot;),_=Symbol.for(&quot;react.provider&quot;),T=Symbol.for(&quot;react.consumer&quot;),w=Symbol.for(&quot;react.context&quot;),E=Symbol.for(&quot;react.forward_ref&quot;),R=Symbol.for(&quot;react.suspense&quot;),N=Symbol.for(&quot;react.suspense_list&quot;),A=Symbol.for(&quot;react.memo&quot;),D=Symbol.for(&quot;react.lazy&quot;),C=Symbol.for(&quot;react.activity&quot;),O=Symbol.for(&quot;react.memo_cache_sentinel&quot;),L=Symbol.iterator;function V(a){return a===null||typeof a!=&quot;object&quot;?null:(a=L&amp;&amp;a[L]||a[&quot;@@iterator&quot;],typeof a==&quot;function&quot;?a:null)}var Z=Symbol.for(&quot;react.client.reference&quot;);function z(a){if(a==null)return null;if(typeof a==&quot;function&quot;)return a.$$typeof===Z?null:a.displayName||a.name||null;if(typeof a==&quot;string&quot;)return a;switch(a){case v:return&quot;Fragment&quot;;case b:return&quot;Profiler&quot;;case x:return&quot;StrictMode&quot;;case R:return&quot;Suspense&quot;;case N:return&quot;SuspenseList&quot;;case C:return&quot;Activity&quot;}if(typeof a==&quot;object&quot;)switch(a.$$typeof){case g:return&quot;Portal&quot;;case w:return(a.displayName||&quot;Context&quot;)+&quot;.Provider&quot;;case T:return(a._context.displayName||&quot;Context&quot;)+&quot;.Consumer&quot;;case E:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||&quot;&quot;,a=a!==&quot;&quot;?&quot;ForwardRef(&quot;+a+&quot;)&quot;:&quot;ForwardRef&quot;),a;case A:return c=a.displayName||null,c!==null?c:z(a.type)||&quot;Memo&quot;;case D:c=a._payload,a=a._init;try{return z(a(c))}catch{}}return null}var K=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},ee=[],F=-1;function ne(a){return{current:a}}function le(a){0&gt;F||(a.current=ee[F],ee[F]=null,F--)}function ce(a,c){F++,ee[F]=a.current,a.current=c}var ie=ne(null),oe=ne(null),ae=ne(null),ue=ne(null);function ve(a,c){switch(ce(ae,c),ce(oe,a),ce(ie,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&amp;&amp;(a=a.namespaceURI)?aM(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=aM(c),a=lM(c,a);else switch(a){case&quot;svg&quot;:a=1;break;case&quot;math&quot;:a=2;break;default:a=0}}le(ie),ce(ie,a)}function He(){le(ie),le(oe),le(ae)}function Xe(a){a.memoizedState!==null&amp;&amp;ce(ue,a);var c=ie.current,d=lM(c,a.type);c!==d&amp;&amp;(ce(oe,a),ce(ie,d))}function lt(a){oe.current===a&amp;&amp;(le(ie),le(oe)),ue.current===a&amp;&amp;(le(ue),vf._currentValue=G)}var We=Object.prototype.hasOwnProperty,Ye=n.unstable_scheduleCallback,Q=n.unstable_cancelCallback,Ve=n.unstable_shouldYield,Le=n.unstable_requestPaint,Fe=n.unstable_now,Ne=n.unstable_getCurrentPriorityLevel,mt=n.unstable_ImmediatePriority,ze=n.unstable_UserBlockingPriority,te=n.unstable_NormalPriority,H=n.unstable_LowPriority,pe=n.unstable_IdlePriority,Ce=n.log,Ue=n.unstable_setDisableYieldValue,Me=null,Ze=null;function qe(a){if(typeof Ce==&quot;function&quot;&amp;&amp;Ue(a),Ze&amp;&amp;typeof Ze.setStrictMode==&quot;function&quot;)try{Ze.setStrictMode(Me,a)}catch{}}var ut=Math.clz32?Math.clz32:ht,Ct=Math.log,je=Math.LN2;function ht(a){return a&gt;&gt;&gt;=0,a===0?32:31-(Ct(a)/je|0)|0}var St=256,Rt=4194304;function rt(a){var c=a&amp;42;if(c!==0)return c;switch(a&amp;-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&amp;4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&amp;62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Gt(a,c,d){var y=a.pendingLanes;if(y===0)return 0;var S=0,M=a.suspendedLanes,U=a.pingedLanes;a=a.warmLanes;var W=y&amp;134217727;return W!==0?(y=W&amp;~M,y!==0?S=rt(y):(U&amp;=W,U!==0?S=rt(U):d||(d=W&amp;~a,d!==0&amp;&amp;(S=rt(d))))):(W=y&amp;~M,W!==0?S=rt(W):U!==0?S=rt(U):d||(d=y&amp;~a,d!==0&amp;&amp;(S=rt(d)))),S===0?0:c!==0&amp;&amp;c!==S&amp;&amp;(c&amp;M)===0&amp;&amp;(M=S&amp;-S,d=c&amp;-c,M&gt;=d||M===32&amp;&amp;(d&amp;4194048)!==0)?c:S}function It(a,c){return(a.pendingLanes&amp;~(a.suspendedLanes&amp;~a.pingedLanes)&amp;c)===0}function gn(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function de(){var a=St;return St&lt;&lt;=1,(St&amp;4194048)===0&amp;&amp;(St=256),a}function tt(){var a=Rt;return Rt&lt;&lt;=1,(Rt&amp;62914560)===0&amp;&amp;(Rt=4194304),a}function Ae(a){for(var c=[],d=0;31&gt;d;d++)c.push(a);return c}function Pe(a,c){a.pendingLanes|=c,c!==268435456&amp;&amp;(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function st(a,c,d,y,S,M){var U=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&amp;=d,a.entangledLanes&amp;=d,a.errorRecoveryDisabledLanes&amp;=d,a.shellSuspendCounter=0;var W=a.entanglements,se=a.expirationTimes,_e=a.hiddenUpdates;for(d=U&amp;~d;0&lt;d;){var De=31-ut(d),ke=1&lt;&lt;De;W[De]=0,se[De]=-1;var xe=_e[De];if(xe!==null)for(_e[De]=null,De=0;De&lt;xe.length;De++){var Ee=xe[De];Ee!==null&amp;&amp;(Ee.lane&amp;=-536870913)}d&amp;=~ke}y!==0&amp;&amp;Qe(a,y,0),M!==0&amp;&amp;S===0&amp;&amp;a.tag!==0&amp;&amp;(a.suspendedLanes|=M&amp;~(U&amp;~c))}function Qe(a,c,d){a.pendingLanes|=c,a.suspendedLanes&amp;=~c;var y=31-ut(c);a.entangledLanes|=c,a.entanglements[y]=a.entanglements[y]|1073741824|d&amp;4194090}function Ut(a,c){var d=a.entangledLanes|=c;for(a=a.entanglements;d;){var y=31-ut(d),S=1&lt;&lt;y;S&amp;c|a[y]&amp;c&amp;&amp;(a[y]|=c),d&amp;=~S}}function wn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function jn(a){return a&amp;=-a,2&lt;a?8&lt;a?(a&amp;134217727)!==0?32:268435456:8:2}function zt(){var a=j.p;return a!==0?a:(a=window.event,a===void 0?32:AM(a.type))}function Bi(a,c){var d=j.p;try{return j.p=a,c()}finally{j.p=d}}var oi=Math.random().toString(36).slice(2),Zn=&quot;__reactFiber$&quot;+oi,pi=&quot;__reactProps$&quot;+oi,Hi=&quot;__reactContainer$&quot;+oi,Cs=&quot;__reactEvents$&quot;+oi,ya=&quot;__reactListeners$&quot;+oi,Co=&quot;__reactHandles$&quot;+oi,Rs=&quot;__reactResources$&quot;+oi,kr=&quot;__reactMarker$&quot;+oi;function os(a){delete a[Zn],delete a[pi],delete a[Cs],delete a[ya],delete a[Co]}function wr(a){var c=a[Zn];if(c)return c;for(var d=a.parentNode;d;){if(c=d[Hi]||d[Zn]){if(d=c.alternate,c.child!==null||d!==null&amp;&amp;d.child!==null)for(a=fM(a);a!==null;){if(d=a[Zn])return d;a=fM(a)}return c}a=d,d=a.parentNode}return null}function Er(a){if(a=a[Zn]||a[Hi]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Os(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(i(33))}function as(a){var c=a[Rs];return c||(c=a[Rs]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Wn(a){a[kr]=!0}var _a=new Set,va={};function Fr(a,c){q(a,c),q(a+&quot;Capture&quot;,c)}function q(a,c){for(va[a]=c,a=0;a&lt;c.length;a++)_a.add(c[a])}var fe=RegExp(&quot;^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$&quot;),be={},we={};function me(a){return We.call(we,a)?!0:We.call(be,a)?!1:fe.test(a)?we[a]=!0:(be[a]=!0,!1)}function Ge(a,c,d){if(me(c))if(d===null)a.removeAttribute(c);else{switch(typeof d){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:a.removeAttribute(c);return;case&quot;boolean&quot;:var y=c.toLowerCase().slice(0,5);if(y!==&quot;data-&quot;&amp;&amp;y!==&quot;aria-&quot;){a.removeAttribute(c);return}}a.setAttribute(c,&quot;&quot;+d)}}function Je(a,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:case&quot;boolean&quot;:a.removeAttribute(c);return}a.setAttribute(c,&quot;&quot;+d)}}function et(a,c,d,y){if(y===null)a.removeAttribute(d);else{switch(typeof y){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:case&quot;boolean&quot;:a.removeAttribute(d);return}a.setAttributeNS(c,d,&quot;&quot;+y)}}var ft,Ot;function Et(a){if(ft===void 0)try{throw Error()}catch(d){var c=d.stack.trim().match(/\n( *(at )?)/);ft=c&amp;&amp;c[1]||&quot;&quot;,Ot=-1&lt;d.stack.indexOf(`
    at`)?&quot; (&lt;anonymous&gt;)&quot;:-1&lt;d.stack.indexOf(&quot;@&quot;)?&quot;@unknown:0:0&quot;:&quot;&quot;}return`
`+ft+a+Ot}var bt=!1;function Bt(a,c){if(!a||bt)return&quot;&quot;;bt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,&quot;props&quot;,{set:function(){throw Error()}}),typeof Reflect==&quot;object&quot;&amp;&amp;Reflect.construct){try{Reflect.construct(ke,[])}catch(Ee){var xe=Ee}Reflect.construct(a,[],ke)}else{try{ke.call()}catch(Ee){xe=Ee}a.call(ke.prototype)}}else{try{throw Error()}catch(Ee){xe=Ee}(ke=a())&amp;&amp;typeof ke.catch==&quot;function&quot;&amp;&amp;ke.catch(function(){})}}catch(Ee){if(Ee&amp;&amp;xe&amp;&amp;typeof Ee.stack==&quot;string&quot;)return[Ee.stack,xe.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName=&quot;DetermineComponentFrameRoot&quot;;var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,&quot;name&quot;);S&amp;&amp;S.configurable&amp;&amp;Object.defineProperty(y.DetermineComponentFrameRoot,&quot;name&quot;,{value:&quot;DetermineComponentFrameRoot&quot;});var M=y.DetermineComponentFrameRoot(),U=M[0],W=M[1];if(U&amp;&amp;W){var se=U.split(`
`),_e=W.split(`
`);for(S=y=0;y&lt;se.length&amp;&amp;!se[y].includes(&quot;DetermineComponentFrameRoot&quot;);)y++;for(;S&lt;_e.length&amp;&amp;!_e[S].includes(&quot;DetermineComponentFrameRoot&quot;);)S++;if(y===se.length||S===_e.length)for(y=se.length-1,S=_e.length-1;1&lt;=y&amp;&amp;0&lt;=S&amp;&amp;se[y]!==_e[S];)S--;for(;1&lt;=y&amp;&amp;0&lt;=S;y--,S--)if(se[y]!==_e[S]){if(y!==1||S!==1)do if(y--,S--,0&gt;S||se[y]!==_e[S]){var De=`
`+se[y].replace(&quot; at new &quot;,&quot; at &quot;);return a.displayName&amp;&amp;De.includes(&quot;&lt;anonymous&gt;&quot;)&amp;&amp;(De=De.replace(&quot;&lt;anonymous&gt;&quot;,a.displayName)),De}while(1&lt;=y&amp;&amp;0&lt;=S);break}}}finally{bt=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:&quot;&quot;)?Et(d):&quot;&quot;}function un(a){switch(a.tag){case 26:case 27:case 5:return Et(a.type);case 16:return Et(&quot;Lazy&quot;);case 13:return Et(&quot;Suspense&quot;);case 19:return Et(&quot;SuspenseList&quot;);case 0:case 15:return Bt(a.type,!1);case 11:return Bt(a.type.render,!1);case 1:return Bt(a.type,!0);case 31:return Et(&quot;Activity&quot;);default:return&quot;&quot;}}function In(a){try{var c=&quot;&quot;;do c+=un(a),a=a.return;while(a);return c}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Qt(a){switch(typeof a){case&quot;bigint&quot;:case&quot;boolean&quot;:case&quot;number&quot;:case&quot;string&quot;:case&quot;undefined&quot;:return a;case&quot;object&quot;:return a;default:return&quot;&quot;}}function $t(a){var c=a.type;return(a=a.nodeName)&amp;&amp;a.toLowerCase()===&quot;input&quot;&amp;&amp;(c===&quot;checkbox&quot;||c===&quot;radio&quot;)}function wt(a){var c=$t(a)?&quot;checked&quot;:&quot;value&quot;,d=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=&quot;&quot;+a[c];if(!a.hasOwnProperty(c)&amp;&amp;typeof d&lt;&quot;u&quot;&amp;&amp;typeof d.get==&quot;function&quot;&amp;&amp;typeof d.set==&quot;function&quot;){var S=d.get,M=d.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return S.call(this)},set:function(U){y=&quot;&quot;+U,M.call(this,U)}}),Object.defineProperty(a,c,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(U){y=&quot;&quot;+U},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Hn(a){a._valueTracker||(a._valueTracker=wt(a))}function rn(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var d=c.getValue(),y=&quot;&quot;;return a&amp;&amp;(y=$t(a)?a.checked?&quot;true&quot;:&quot;false&quot;:a.value),a=y,a!==d?(c.setValue(a),!0):!1}function Jn(a){if(a=a||(typeof document&lt;&quot;u&quot;?document:void 0),typeof a&gt;&quot;u&quot;)return null;try{return a.activeElement||a.body}catch{return a.body}}var Tn=/[\n&quot;\\]/g;function vn(a){return a.replace(Tn,function(c){return&quot;\\&quot;+c.charCodeAt(0).toString(16)+&quot; &quot;})}function Tr(a,c,d,y,S,M,U,W){a.name=&quot;&quot;,U!=null&amp;&amp;typeof U!=&quot;function&quot;&amp;&amp;typeof U!=&quot;symbol&quot;&amp;&amp;typeof U!=&quot;boolean&quot;?a.type=U:a.removeAttribute(&quot;type&quot;),c!=null?U===&quot;number&quot;?(c===0&amp;&amp;a.value===&quot;&quot;||a.value!=c)&amp;&amp;(a.value=&quot;&quot;+Qt(c)):a.value!==&quot;&quot;+Qt(c)&amp;&amp;(a.value=&quot;&quot;+Qt(c)):U!==&quot;submit&quot;&amp;&amp;U!==&quot;reset&quot;||a.removeAttribute(&quot;value&quot;),c!=null?Ni(a,U,Qt(c)):d!=null?Ni(a,U,Qt(d)):y!=null&amp;&amp;a.removeAttribute(&quot;value&quot;),S==null&amp;&amp;M!=null&amp;&amp;(a.defaultChecked=!!M),S!=null&amp;&amp;(a.checked=S&amp;&amp;typeof S!=&quot;function&quot;&amp;&amp;typeof S!=&quot;symbol&quot;),W!=null&amp;&amp;typeof W!=&quot;function&quot;&amp;&amp;typeof W!=&quot;symbol&quot;&amp;&amp;typeof W!=&quot;boolean&quot;?a.name=&quot;&quot;+Qt(W):a.removeAttribute(&quot;name&quot;)}function Mn(a,c,d,y,S,M,U,W){if(M!=null&amp;&amp;typeof M!=&quot;function&quot;&amp;&amp;typeof M!=&quot;symbol&quot;&amp;&amp;typeof M!=&quot;boolean&quot;&amp;&amp;(a.type=M),c!=null||d!=null){if(!(M!==&quot;submit&quot;&amp;&amp;M!==&quot;reset&quot;||c!=null))return;d=d!=null?&quot;&quot;+Qt(d):&quot;&quot;,c=c!=null?&quot;&quot;+Qt(c):d,W||c===a.value||(a.value=c),a.defaultValue=c}y=y??S,y=typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;&amp;&amp;!!y,a.checked=W?a.checked:!!y,a.defaultChecked=!!y,U!=null&amp;&amp;typeof U!=&quot;function&quot;&amp;&amp;typeof U!=&quot;symbol&quot;&amp;&amp;typeof U!=&quot;boolean&quot;&amp;&amp;(a.name=U)}function Ni(a,c,d){c===&quot;number&quot;&amp;&amp;Jn(a.ownerDocument)===a||a.defaultValue===&quot;&quot;+d||(a.defaultValue=&quot;&quot;+d)}function Qn(a,c,d,y){if(a=a.options,c){c={};for(var S=0;S&lt;d.length;S++)c[&quot;$&quot;+d[S]]=!0;for(d=0;d&lt;a.length;d++)S=c.hasOwnProperty(&quot;$&quot;+a[d].value),a[d].selected!==S&amp;&amp;(a[d].selected=S),S&amp;&amp;y&amp;&amp;(a[d].defaultSelected=!0)}else{for(d=&quot;&quot;+Qt(d),c=null,S=0;S&lt;a.length;S++){if(a[S].value===d){a[S].selected=!0,y&amp;&amp;(a[S].defaultSelected=!0);return}c!==null||a[S].disabled||(c=a[S])}c!==null&amp;&amp;(c.selected=!0)}}function ei(a,c,d){if(c!=null&amp;&amp;(c=&quot;&quot;+Qt(c),c!==a.value&amp;&amp;(a.value=c),d==null)){a.defaultValue!==c&amp;&amp;(a.defaultValue=c);return}a.defaultValue=d!=null?&quot;&quot;+Qt(d):&quot;&quot;}function ai(a,c,d,y){if(c==null){if(y!=null){if(d!=null)throw Error(i(92));if(K(y)){if(1&lt;y.length)throw Error(i(93));y=y[0]}d=y}d==null&amp;&amp;(d=&quot;&quot;),c=d}d=Qt(c),a.defaultValue=d,y=a.textContent,y===d&amp;&amp;y!==&quot;&quot;&amp;&amp;y!==null&amp;&amp;(a.value=y)}function zr(a,c){if(c){var d=a.firstChild;if(d&amp;&amp;d===a.lastChild&amp;&amp;d.nodeType===3){d.nodeValue=c;return}}a.textContent=c}var Ds=new Set(&quot;animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp&quot;.split(&quot; &quot;));function Dt(a,c,d){var y=c.indexOf(&quot;--&quot;)===0;d==null||typeof d==&quot;boolean&quot;||d===&quot;&quot;?y?a.setProperty(c,&quot;&quot;):c===&quot;float&quot;?a.cssFloat=&quot;&quot;:a[c]=&quot;&quot;:y?a.setProperty(c,d):typeof d!=&quot;number&quot;||d===0||Ds.has(c)?c===&quot;float&quot;?a.cssFloat=d:a[c]=(&quot;&quot;+d).trim():a[c]=d+&quot;px&quot;}function El(a,c,d){if(c!=null&amp;&amp;typeof c!=&quot;object&quot;)throw Error(i(62));if(a=a.style,d!=null){for(var y in d)!d.hasOwnProperty(y)||c!=null&amp;&amp;c.hasOwnProperty(y)||(y.indexOf(&quot;--&quot;)===0?a.setProperty(y,&quot;&quot;):y===&quot;float&quot;?a.cssFloat=&quot;&quot;:a[y]=&quot;&quot;);for(var S in c)y=c[S],c.hasOwnProperty(S)&amp;&amp;d[S]!==y&amp;&amp;Dt(a,S,y)}else for(var M in c)c.hasOwnProperty(M)&amp;&amp;Dt(a,M,c[M])}function B(a){if(a.indexOf(&quot;-&quot;)===-1)return!1;switch(a){case&quot;annotation-xml&quot;:case&quot;color-profile&quot;:case&quot;font-face&quot;:case&quot;font-face-src&quot;:case&quot;font-face-uri&quot;:case&quot;font-face-format&quot;:case&quot;font-face-name&quot;:case&quot;missing-glyph&quot;:return!1;default:return!0}}var k=new Map([[&quot;acceptCharset&quot;,&quot;accept-charset&quot;],[&quot;htmlFor&quot;,&quot;for&quot;],[&quot;httpEquiv&quot;,&quot;http-equiv&quot;],[&quot;crossOrigin&quot;,&quot;crossorigin&quot;],[&quot;accentHeight&quot;,&quot;accent-height&quot;],[&quot;alignmentBaseline&quot;,&quot;alignment-baseline&quot;],[&quot;arabicForm&quot;,&quot;arabic-form&quot;],[&quot;baselineShift&quot;,&quot;baseline-shift&quot;],[&quot;capHeight&quot;,&quot;cap-height&quot;],[&quot;clipPath&quot;,&quot;clip-path&quot;],[&quot;clipRule&quot;,&quot;clip-rule&quot;],[&quot;colorInterpolation&quot;,&quot;color-interpolation&quot;],[&quot;colorInterpolationFilters&quot;,&quot;color-interpolation-filters&quot;],[&quot;colorProfile&quot;,&quot;color-profile&quot;],[&quot;colorRendering&quot;,&quot;color-rendering&quot;],[&quot;dominantBaseline&quot;,&quot;dominant-baseline&quot;],[&quot;enableBackground&quot;,&quot;enable-background&quot;],[&quot;fillOpacity&quot;,&quot;fill-opacity&quot;],[&quot;fillRule&quot;,&quot;fill-rule&quot;],[&quot;floodColor&quot;,&quot;flood-color&quot;],[&quot;floodOpacity&quot;,&quot;flood-opacity&quot;],[&quot;fontFamily&quot;,&quot;font-family&quot;],[&quot;fontSize&quot;,&quot;font-size&quot;],[&quot;fontSizeAdjust&quot;,&quot;font-size-adjust&quot;],[&quot;fontStretch&quot;,&quot;font-stretch&quot;],[&quot;fontStyle&quot;,&quot;font-style&quot;],[&quot;fontVariant&quot;,&quot;font-variant&quot;],[&quot;fontWeight&quot;,&quot;font-weight&quot;],[&quot;glyphName&quot;,&quot;glyph-name&quot;],[&quot;glyphOrientationHorizontal&quot;,&quot;glyph-orientation-horizontal&quot;],[&quot;glyphOrientationVertical&quot;,&quot;glyph-orientation-vertical&quot;],[&quot;horizAdvX&quot;,&quot;horiz-adv-x&quot;],[&quot;horizOriginX&quot;,&quot;horiz-origin-x&quot;],[&quot;imageRendering&quot;,&quot;image-rendering&quot;],[&quot;letterSpacing&quot;,&quot;letter-spacing&quot;],[&quot;lightingColor&quot;,&quot;lighting-color&quot;],[&quot;markerEnd&quot;,&quot;marker-end&quot;],[&quot;markerMid&quot;,&quot;marker-mid&quot;],[&quot;markerStart&quot;,&quot;marker-start&quot;],[&quot;overlinePosition&quot;,&quot;overline-position&quot;],[&quot;overlineThickness&quot;,&quot;overline-thickness&quot;],[&quot;paintOrder&quot;,&quot;paint-order&quot;],[&quot;panose-1&quot;,&quot;panose-1&quot;],[&quot;pointerEvents&quot;,&quot;pointer-events&quot;],[&quot;renderingIntent&quot;,&quot;rendering-intent&quot;],[&quot;shapeRendering&quot;,&quot;shape-rendering&quot;],[&quot;stopColor&quot;,&quot;stop-color&quot;],[&quot;stopOpacity&quot;,&quot;stop-opacity&quot;],[&quot;strikethroughPosition&quot;,&quot;strikethrough-position&quot;],[&quot;strikethroughThickness&quot;,&quot;strikethrough-thickness&quot;],[&quot;strokeDasharray&quot;,&quot;stroke-dasharray&quot;],[&quot;strokeDashoffset&quot;,&quot;stroke-dashoffset&quot;],[&quot;strokeLinecap&quot;,&quot;stroke-linecap&quot;],[&quot;strokeLinejoin&quot;,&quot;stroke-linejoin&quot;],[&quot;strokeMiterlimit&quot;,&quot;stroke-miterlimit&quot;],[&quot;strokeOpacity&quot;,&quot;stroke-opacity&quot;],[&quot;strokeWidth&quot;,&quot;stroke-width&quot;],[&quot;textAnchor&quot;,&quot;text-anchor&quot;],[&quot;textDecoration&quot;,&quot;text-decoration&quot;],[&quot;textRendering&quot;,&quot;text-rendering&quot;],[&quot;transformOrigin&quot;,&quot;transform-origin&quot;],[&quot;underlinePosition&quot;,&quot;underline-position&quot;],[&quot;underlineThickness&quot;,&quot;underline-thickness&quot;],[&quot;unicodeBidi&quot;,&quot;unicode-bidi&quot;],[&quot;unicodeRange&quot;,&quot;unicode-range&quot;],[&quot;unitsPerEm&quot;,&quot;units-per-em&quot;],[&quot;vAlphabetic&quot;,&quot;v-alphabetic&quot;],[&quot;vHanging&quot;,&quot;v-hanging&quot;],[&quot;vIdeographic&quot;,&quot;v-ideographic&quot;],[&quot;vMathematical&quot;,&quot;v-mathematical&quot;],[&quot;vectorEffect&quot;,&quot;vector-effect&quot;],[&quot;vertAdvY&quot;,&quot;vert-adv-y&quot;],[&quot;vertOriginX&quot;,&quot;vert-origin-x&quot;],[&quot;vertOriginY&quot;,&quot;vert-origin-y&quot;],[&quot;wordSpacing&quot;,&quot;word-spacing&quot;],[&quot;writingMode&quot;,&quot;writing-mode&quot;],[&quot;xmlnsXlink&quot;,&quot;xmlns:xlink&quot;],[&quot;xHeight&quot;,&quot;x-height&quot;]]),$=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function X(a){return $.test(&quot;&quot;+a)?&quot;javascript:throw new Error(&#x27;React has blocked a javascript: URL as a security precaution.&#x27;)&quot;:a}var J=null;function Te(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&amp;&amp;(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Re=null,ot=null;function Ke(a){var c=Er(a);if(c&amp;&amp;(a=c.stateNode)){var d=a[pi]||null;e:switch(a=c.stateNode,c.type){case&quot;input&quot;:if(Tr(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),c=d.name,d.type===&quot;radio&quot;&amp;&amp;c!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll(&#x27;input[name=&quot;&#x27;+vn(&quot;&quot;+c)+&#x27;&quot;][type=&quot;radio&quot;]&#x27;),c=0;c&lt;d.length;c++){var y=d[c];if(y!==a&amp;&amp;y.form===a.form){var S=y[pi]||null;if(!S)throw Error(i(90));Tr(y,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(c=0;c&lt;d.length;c++)y=d[c],y.form===a.form&amp;&amp;rn(y)}break e;case&quot;textarea&quot;:ei(a,d.value,d.defaultValue);break e;case&quot;select&quot;:c=d.value,c!=null&amp;&amp;Qn(a,!!d.multiple,c,!1)}}}var nt=!1;function xt(a,c,d){if(nt)return a(c,d);nt=!0;try{var y=a(c);return y}finally{if(nt=!1,(Re!==null||ot!==null)&amp;&amp;(kp(),Re&amp;&amp;(c=Re,a=ot,ot=Re=null,Ke(c),a)))for(c=0;c&lt;a.length;c++)Ke(a[c])}}function Be(a,c){var d=a.stateNode;if(d===null)return null;var y=d[pi]||null;if(y===null)return null;d=y[c];e:switch(c){case&quot;onClick&quot;:case&quot;onClickCapture&quot;:case&quot;onDoubleClick&quot;:case&quot;onDoubleClickCapture&quot;:case&quot;onMouseDown&quot;:case&quot;onMouseDownCapture&quot;:case&quot;onMouseMove&quot;:case&quot;onMouseMoveCapture&quot;:case&quot;onMouseUp&quot;:case&quot;onMouseUpCapture&quot;:case&quot;onMouseEnter&quot;:(y=!y.disabled)||(a=a.type,y=!(a===&quot;button&quot;||a===&quot;input&quot;||a===&quot;select&quot;||a===&quot;textarea&quot;)),a=!y;break e;default:a=!1}if(a)return null;if(d&amp;&amp;typeof d!=&quot;function&quot;)throw Error(i(231,c,typeof d));return d}var pt=!(typeof window&gt;&quot;u&quot;||typeof window.document&gt;&quot;u&quot;||typeof window.document.createElement&gt;&quot;u&quot;),gt=!1;if(pt)try{var Tt={};Object.defineProperty(Tt,&quot;passive&quot;,{get:function(){gt=!0}}),window.addEventListener(&quot;test&quot;,Tt,Tt),window.removeEventListener(&quot;test&quot;,Tt,Tt)}catch{gt=!1}var _t=null,Fn=null,dn=null;function hn(){if(dn)return dn;var a,c=Fn,d=c.length,y,S=&quot;value&quot;in _t?_t.value:_t.textContent,M=S.length;for(a=0;a&lt;d&amp;&amp;c[a]===S[a];a++);var U=d-a;for(y=1;y&lt;=U&amp;&amp;c[d-y]===S[M-y];y++);return dn=S.slice(a,1&lt;y?1-y:void 0)}function sn(a){var c=a.keyCode;return&quot;charCode&quot;in a?(a=a.charCode,a===0&amp;&amp;c===13&amp;&amp;(a=13)):a=c,a===10&amp;&amp;(a=13),32&lt;=a||a===13?a:0}function Mr(){return!0}function Qi(){return!1}function mi(a){function c(d,y,S,M,U){this._reactName=d,this._targetInst=S,this.type=y,this.nativeEvent=M,this.target=U,this.currentTarget=null;for(var W in a)a.hasOwnProperty(W)&amp;&amp;(d=a[W],this[W]=d?d(M):M[W]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Mr:Qi,this.isPropagationStopped=Qi,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&amp;&amp;(d.preventDefault?d.preventDefault():typeof d.returnValue!=&quot;unknown&quot;&amp;&amp;(d.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var d=this.nativeEvent;d&amp;&amp;(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!=&quot;unknown&quot;&amp;&amp;(d.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),c}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=mi(Ro),Ih=f({},Ro,{view:0,detail:0}),v3=mi(Ih),u_,h_,Ph,ip=f({},Ih,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d_,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return&quot;movementX&quot;in a?a.movementX:(a!==Ph&amp;&amp;(Ph&amp;&amp;a.type===&quot;mousemove&quot;?(u_=a.screenX-Ph.screenX,h_=a.screenY-Ph.screenY):h_=u_=0,Ph=a),u_)},movementY:function(a){return&quot;movementY&quot;in a?a.movementY:h_}}),d1=mi(ip),b3=f({},ip,{dataTransfer:0}),x3=mi(b3),S3=f({},Ih,{relatedTarget:0}),f_=mi(S3),w3=f({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),E3=mi(w3),T3=f({},Ro,{clipboardData:function(a){return&quot;clipboardData&quot;in a?a.clipboardData:window.clipboardData}}),M3=mi(T3),A3=f({},Ro,{data:0}),p1=mi(A3),C3={Esc:&quot;Escape&quot;,Spacebar:&quot; &quot;,Left:&quot;ArrowLeft&quot;,Up:&quot;ArrowUp&quot;,Right:&quot;ArrowRight&quot;,Down:&quot;ArrowDown&quot;,Del:&quot;Delete&quot;,Win:&quot;OS&quot;,Menu:&quot;ContextMenu&quot;,Apps:&quot;ContextMenu&quot;,Scroll:&quot;ScrollLock&quot;,MozPrintableKey:&quot;Unidentified&quot;},R3={8:&quot;Backspace&quot;,9:&quot;Tab&quot;,12:&quot;Clear&quot;,13:&quot;Enter&quot;,16:&quot;Shift&quot;,17:&quot;Control&quot;,18:&quot;Alt&quot;,19:&quot;Pause&quot;,20:&quot;CapsLock&quot;,27:&quot;Escape&quot;,32:&quot; &quot;,33:&quot;PageUp&quot;,34:&quot;PageDown&quot;,35:&quot;End&quot;,36:&quot;Home&quot;,37:&quot;ArrowLeft&quot;,38:&quot;ArrowUp&quot;,39:&quot;ArrowRight&quot;,40:&quot;ArrowDown&quot;,45:&quot;Insert&quot;,46:&quot;Delete&quot;,112:&quot;F1&quot;,113:&quot;F2&quot;,114:&quot;F3&quot;,115:&quot;F4&quot;,116:&quot;F5&quot;,117:&quot;F6&quot;,118:&quot;F7&quot;,119:&quot;F8&quot;,120:&quot;F9&quot;,121:&quot;F10&quot;,122:&quot;F11&quot;,123:&quot;F12&quot;,144:&quot;NumLock&quot;,145:&quot;ScrollLock&quot;,224:&quot;Meta&quot;},O3={Alt:&quot;altKey&quot;,Control:&quot;ctrlKey&quot;,Meta:&quot;metaKey&quot;,Shift:&quot;shiftKey&quot;};function D3(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=O3[a])?!!c[a]:!1}function d_(){return D3}var N3=f({},Ih,{key:function(a){if(a.key){var c=C3[a.key]||a.key;if(c!==&quot;Unidentified&quot;)return c}return a.type===&quot;keypress&quot;?(a=sn(a),a===13?&quot;Enter&quot;:String.fromCharCode(a)):a.type===&quot;keydown&quot;||a.type===&quot;keyup&quot;?R3[a.keyCode]||&quot;Unidentified&quot;:&quot;&quot;},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d_,charCode:function(a){return a.type===&quot;keypress&quot;?sn(a):0},keyCode:function(a){return a.type===&quot;keydown&quot;||a.type===&quot;keyup&quot;?a.keyCode:0},which:function(a){return a.type===&quot;keypress&quot;?sn(a):a.type===&quot;keydown&quot;||a.type===&quot;keyup&quot;?a.keyCode:0}}),I3=mi(N3),P3=f({},ip,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m1=mi(P3),L3=f({},Ih,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d_}),U3=mi(L3),k3=f({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),F3=mi(k3),z3=f({},ip,{deltaX:function(a){return&quot;deltaX&quot;in a?a.deltaX:&quot;wheelDeltaX&quot;in a?-a.wheelDeltaX:0},deltaY:function(a){return&quot;deltaY&quot;in a?a.deltaY:&quot;wheelDeltaY&quot;in a?-a.wheelDeltaY:&quot;wheelDelta&quot;in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),B3=mi(z3),H3=f({},Ro,{newState:0,oldState:0}),V3=mi(H3),G3=[9,13,27,32],p_=pt&amp;&amp;&quot;CompositionEvent&quot;in window,Lh=null;pt&amp;&amp;&quot;documentMode&quot;in document&amp;&amp;(Lh=document.documentMode);var j3=pt&amp;&amp;&quot;TextEvent&quot;in window&amp;&amp;!Lh,g1=pt&amp;&amp;(!p_||Lh&amp;&amp;8&lt;Lh&amp;&amp;11&gt;=Lh),y1=&quot; &quot;,_1=!1;function v1(a,c){switch(a){case&quot;keyup&quot;:return G3.indexOf(c.keyCode)!==-1;case&quot;keydown&quot;:return c.keyCode!==229;case&quot;keypress&quot;:case&quot;mousedown&quot;:case&quot;focusout&quot;:return!0;default:return!1}}function b1(a){return a=a.detail,typeof a==&quot;object&quot;&amp;&amp;&quot;data&quot;in a?a.data:null}var Vc=!1;function W3(a,c){switch(a){case&quot;compositionend&quot;:return b1(c);case&quot;keypress&quot;:return c.which!==32?null:(_1=!0,y1);case&quot;textInput&quot;:return a=c.data,a===y1&amp;&amp;_1?null:a;default:return null}}function X3(a,c){if(Vc)return a===&quot;compositionend&quot;||!p_&amp;&amp;v1(a,c)?(a=hn(),dn=Fn=_t=null,Vc=!1,a):null;switch(a){case&quot;paste&quot;:return null;case&quot;keypress&quot;:if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&amp;&amp;c.altKey){if(c.char&amp;&amp;1&lt;c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case&quot;compositionend&quot;:return g1&amp;&amp;c.locale!==&quot;ko&quot;?null:c.data;default:return null}}var q3={color:!0,date:!0,datetime:!0,&quot;datetime-local&quot;:!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x1(a){var c=a&amp;&amp;a.nodeName&amp;&amp;a.nodeName.toLowerCase();return c===&quot;input&quot;?!!q3[a.type]:c===&quot;textarea&quot;}function S1(a,c,d,y){Re?ot?ot.push(y):ot=[y]:Re=y,c=Gp(c,&quot;onChange&quot;),0&lt;c.length&amp;&amp;(d=new Tl(&quot;onChange&quot;,&quot;change&quot;,null,d,y),a.push({event:d,listeners:c}))}var Uh=null,kh=null;function Y3(a){nM(a,0)}function rp(a){var c=Os(a);if(rn(c))return a}function w1(a,c){if(a===&quot;change&quot;)return c}var E1=!1;if(pt){var m_;if(pt){var g_=&quot;oninput&quot;in document;if(!g_){var T1=document.createElement(&quot;div&quot;);T1.setAttribute(&quot;oninput&quot;,&quot;return;&quot;),g_=typeof T1.oninput==&quot;function&quot;}m_=g_}else m_=!1;E1=m_&amp;&amp;(!document.documentMode||9&lt;document.documentMode)}function M1(){Uh&amp;&amp;(Uh.detachEvent(&quot;onpropertychange&quot;,A1),kh=Uh=null)}function A1(a){if(a.propertyName===&quot;value&quot;&amp;&amp;rp(kh)){var c=[];S1(c,kh,a,Te(a)),xt(Y3,c)}}function K3(a,c,d){a===&quot;focusin&quot;?(M1(),Uh=c,kh=d,Uh.attachEvent(&quot;onpropertychange&quot;,A1)):a===&quot;focusout&quot;&amp;&amp;M1()}function $3(a){if(a===&quot;selectionchange&quot;||a===&quot;keyup&quot;||a===&quot;keydown&quot;)return rp(kh)}function Z3(a,c){if(a===&quot;click&quot;)return rp(c)}function J3(a,c){if(a===&quot;input&quot;||a===&quot;change&quot;)return rp(c)}function Q3(a,c){return a===c&amp;&amp;(a!==0||1/a===1/c)||a!==a&amp;&amp;c!==c}var Br=typeof Object.is==&quot;function&quot;?Object.is:Q3;function Fh(a,c){if(Br(a,c))return!0;if(typeof a!=&quot;object&quot;||a===null||typeof c!=&quot;object&quot;||c===null)return!1;var d=Object.keys(a),y=Object.keys(c);if(d.length!==y.length)return!1;for(y=0;y&lt;d.length;y++){var S=d[y];if(!We.call(c,S)||!Br(a[S],c[S]))return!1}return!0}function C1(a){for(;a&amp;&amp;a.firstChild;)a=a.firstChild;return a}function R1(a,c){var d=C1(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a&lt;=c&amp;&amp;y&gt;=c)return{node:d,offset:c-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=C1(d)}}function O1(a,c){return a&amp;&amp;c?a===c?!0:a&amp;&amp;a.nodeType===3?!1:c&amp;&amp;c.nodeType===3?O1(a,c.parentNode):&quot;contains&quot;in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&amp;16):!1:!1}function D1(a){a=a!=null&amp;&amp;a.ownerDocument!=null&amp;&amp;a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=Jn(a.document);c instanceof a.HTMLIFrameElement;){try{var d=typeof c.contentWindow.location.href==&quot;string&quot;}catch{d=!1}if(d)a=c.contentWindow;else break;c=Jn(a.document)}return c}function y_(a){var c=a&amp;&amp;a.nodeName&amp;&amp;a.nodeName.toLowerCase();return c&amp;&amp;(c===&quot;input&quot;&amp;&amp;(a.type===&quot;text&quot;||a.type===&quot;search&quot;||a.type===&quot;tel&quot;||a.type===&quot;url&quot;||a.type===&quot;password&quot;)||c===&quot;textarea&quot;||a.contentEditable===&quot;true&quot;)}var eU=pt&amp;&amp;&quot;documentMode&quot;in document&amp;&amp;11&gt;=document.documentMode,Gc=null,__=null,zh=null,v_=!1;function N1(a,c,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;v_||Gc==null||Gc!==Jn(y)||(y=Gc,&quot;selectionStart&quot;in y&amp;&amp;y_(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&amp;&amp;y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),zh&amp;&amp;Fh(zh,y)||(zh=y,y=Gp(__,&quot;onSelect&quot;),0&lt;y.length&amp;&amp;(c=new Tl(&quot;onSelect&quot;,&quot;select&quot;,null,c,d),a.push({event:c,listeners:y}),c.target=Gc)))}function Ml(a,c){var d={};return d[a.toLowerCase()]=c.toLowerCase(),d[&quot;Webkit&quot;+a]=&quot;webkit&quot;+c,d[&quot;Moz&quot;+a]=&quot;moz&quot;+c,d}var jc={animationend:Ml(&quot;Animation&quot;,&quot;AnimationEnd&quot;),animationiteration:Ml(&quot;Animation&quot;,&quot;AnimationIteration&quot;),animationstart:Ml(&quot;Animation&quot;,&quot;AnimationStart&quot;),transitionrun:Ml(&quot;Transition&quot;,&quot;TransitionRun&quot;),transitionstart:Ml(&quot;Transition&quot;,&quot;TransitionStart&quot;),transitioncancel:Ml(&quot;Transition&quot;,&quot;TransitionCancel&quot;),transitionend:Ml(&quot;Transition&quot;,&quot;TransitionEnd&quot;)},b_={},I1={};pt&amp;&amp;(I1=document.createElement(&quot;div&quot;).style,&quot;AnimationEvent&quot;in window||(delete jc.animationend.animation,delete jc.animationiteration.animation,delete jc.animationstart.animation),&quot;TransitionEvent&quot;in window||delete jc.transitionend.transition);function Al(a){if(b_[a])return b_[a];if(!jc[a])return a;var c=jc[a],d;for(d in c)if(c.hasOwnProperty(d)&amp;&amp;d in I1)return b_[a]=c[d];return a}var P1=Al(&quot;animationend&quot;),L1=Al(&quot;animationiteration&quot;),U1=Al(&quot;animationstart&quot;),tU=Al(&quot;transitionrun&quot;),nU=Al(&quot;transitionstart&quot;),iU=Al(&quot;transitioncancel&quot;),k1=Al(&quot;transitionend&quot;),F1=new Map,x_=&quot;abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel&quot;.split(&quot; &quot;);x_.push(&quot;scrollEnd&quot;);function Ns(a,c){F1.set(a,c),Fr(c,[a])}var z1=new WeakMap;function ls(a,c){if(typeof a==&quot;object&quot;&amp;&amp;a!==null){var d=z1.get(a);return d!==void 0?d:(c={value:a,source:c,stack:In(c)},z1.set(a,c),c)}return{value:a,source:c,stack:In(c)}}var cs=[],Wc=0,S_=0;function sp(){for(var a=Wc,c=S_=Wc=0;c&lt;a;){var d=cs[c];cs[c++]=null;var y=cs[c];cs[c++]=null;var S=cs[c];cs[c++]=null;var M=cs[c];if(cs[c++]=null,y!==null&amp;&amp;S!==null){var U=y.pending;U===null?S.next=S:(S.next=U.next,U.next=S),y.pending=S}M!==0&amp;&amp;B1(d,S,M)}}function op(a,c,d,y){cs[Wc++]=a,cs[Wc++]=c,cs[Wc++]=d,cs[Wc++]=y,S_|=y,a.lanes|=y,a=a.alternate,a!==null&amp;&amp;(a.lanes|=y)}function w_(a,c,d,y){return op(a,c,d,y),ap(a)}function Xc(a,c){return op(a,null,null,c),ap(a)}function B1(a,c,d){a.lanes|=d;var y=a.alternate;y!==null&amp;&amp;(y.lanes|=d);for(var S=!1,M=a.return;M!==null;)M.childLanes|=d,y=M.alternate,y!==null&amp;&amp;(y.childLanes|=d),M.tag===22&amp;&amp;(a=M.stateNode,a===null||a._visibility&amp;1||(S=!0)),a=M,M=M.return;return a.tag===3?(M=a.stateNode,S&amp;&amp;c!==null&amp;&amp;(S=31-ut(d),a=M.hiddenUpdates,y=a[S],y===null?a[S]=[c]:y.push(c),c.lane=d|536870912),M):null}function ap(a){if(50&lt;hf)throw hf=0,Rv=null,Error(i(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var qc={};function rU(a,c,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(a,c,d,y){return new rU(a,c,d,y)}function E_(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Oo(a,c){var d=a.alternate;return d===null?(d=Hr(a.tag,c,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=c,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&amp;65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,c=a.dependencies,d.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function H1(a,c){a.flags&amp;=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,c=d.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function lp(a,c,d,y,S,M){var U=0;if(y=a,typeof a==&quot;function&quot;)E_(a)&amp;&amp;(U=1);else if(typeof a==&quot;string&quot;)U=ok(a,d,ie.current)?26:a===&quot;html&quot;||a===&quot;head&quot;||a===&quot;body&quot;?27:5;else e:switch(a){case C:return a=Hr(31,d,c,S),a.elementType=C,a.lanes=M,a;case v:return Cl(d.children,S,M,c);case x:U=8,S|=24;break;case b:return a=Hr(12,d,c,S|2),a.elementType=b,a.lanes=M,a;case R:return a=Hr(13,d,c,S),a.elementType=R,a.lanes=M,a;case N:return a=Hr(19,d,c,S),a.elementType=N,a.lanes=M,a;default:if(typeof a==&quot;object&quot;&amp;&amp;a!==null)switch(a.$$typeof){case _:case w:U=10;break e;case T:U=9;break e;case E:U=11;break e;case A:U=14;break e;case D:U=16,y=null;break e}U=29,d=Error(i(130,a===null?&quot;null&quot;:typeof a,&quot;&quot;)),y=null}return c=Hr(U,d,c,S),c.elementType=a,c.type=y,c.lanes=M,c}function Cl(a,c,d,y){return a=Hr(7,a,y,c),a.lanes=d,a}function T_(a,c,d){return a=Hr(6,a,null,c),a.lanes=d,a}function M_(a,c,d){return c=Hr(4,a.children!==null?a.children:[],a.key,c),c.lanes=d,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Yc=[],Kc=0,cp=null,up=0,us=[],hs=0,Rl=null,Do=1,No=&quot;&quot;;function Ol(a,c){Yc[Kc++]=up,Yc[Kc++]=cp,cp=a,up=c}function V1(a,c,d){us[hs++]=Do,us[hs++]=No,us[hs++]=Rl,Rl=a;var y=Do;a=No;var S=32-ut(y)-1;y&amp;=~(1&lt;&lt;S),d+=1;var M=32-ut(c)+S;if(30&lt;M){var U=S-S%5;M=(y&amp;(1&lt;&lt;U)-1).toString(32),y&gt;&gt;=U,S-=U,Do=1&lt;&lt;32-ut(c)+S|d&lt;&lt;S|y,No=M+a}else Do=1&lt;&lt;M|d&lt;&lt;S|y,No=a}function A_(a){a.return!==null&amp;&amp;(Ol(a,1),V1(a,1,0))}function C_(a){for(;a===cp;)cp=Yc[--Kc],Yc[Kc]=null,up=Yc[--Kc],Yc[Kc]=null;for(;a===Rl;)Rl=us[--hs],us[hs]=null,No=us[--hs],us[hs]=null,Do=us[--hs],us[hs]=null}var dr=null,li=null,En=!1,Dl=null,no=!1,R_=Error(i(519));function Nl(a){var c=Error(i(418,&quot;&quot;));throw Vh(ls(c,a)),R_}function G1(a){var c=a.stateNode,d=a.type,y=a.memoizedProps;switch(c[Zn]=a,c[pi]=y,d){case&quot;dialog&quot;:an(&quot;cancel&quot;,c),an(&quot;close&quot;,c);break;case&quot;iframe&quot;:case&quot;object&quot;:case&quot;embed&quot;:an(&quot;load&quot;,c);break;case&quot;video&quot;:case&quot;audio&quot;:for(d=0;d&lt;df.length;d++)an(df[d],c);break;case&quot;source&quot;:an(&quot;error&quot;,c);break;case&quot;img&quot;:case&quot;image&quot;:case&quot;link&quot;:an(&quot;error&quot;,c),an(&quot;load&quot;,c);break;case&quot;details&quot;:an(&quot;toggle&quot;,c);break;case&quot;input&quot;:an(&quot;invalid&quot;,c),Mn(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Hn(c);break;case&quot;select&quot;:an(&quot;invalid&quot;,c);break;case&quot;textarea&quot;:an(&quot;invalid&quot;,c),ai(c,y.value,y.defaultValue,y.children),Hn(c)}d=y.children,typeof d!=&quot;string&quot;&amp;&amp;typeof d!=&quot;number&quot;&amp;&amp;typeof d!=&quot;bigint&quot;||c.textContent===&quot;&quot;+d||y.suppressHydrationWarning===!0||oM(c.textContent,d)?(y.popover!=null&amp;&amp;(an(&quot;beforetoggle&quot;,c),an(&quot;toggle&quot;,c)),y.onScroll!=null&amp;&amp;an(&quot;scroll&quot;,c),y.onScrollEnd!=null&amp;&amp;an(&quot;scrollend&quot;,c),y.onClick!=null&amp;&amp;(c.onclick=jp),c=!0):c=!1,c||Nl(a)}function j1(a){for(dr=a.return;dr;)switch(dr.tag){case 5:case 13:no=!1;return;case 27:case 3:no=!0;return;default:dr=dr.return}}function Bh(a){if(a!==dr)return!1;if(!En)return j1(a),En=!0,!1;var c=a.tag,d;if((d=c!==3&amp;&amp;c!==27)&amp;&amp;((d=c===5)&amp;&amp;(d=a.type,d=!(d!==&quot;form&quot;&amp;&amp;d!==&quot;button&quot;)||Wv(a.type,a.memoizedProps)),d=!d),d&amp;&amp;li&amp;&amp;Nl(a),j1(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(d=a.data,d===&quot;/$&quot;){if(c===0){li=Ps(a.nextSibling);break e}c--}else d!==&quot;$&quot;&amp;&amp;d!==&quot;$!&quot;&amp;&amp;d!==&quot;$?&quot;||c++;a=a.nextSibling}li=null}}else c===27?(c=li,La(a.type)?(a=Kv,Kv=null,li=a):li=c):li=dr?Ps(a.stateNode.nextSibling):null;return!0}function Hh(){li=dr=null,En=!1}function W1(){var a=Dl;return a!==null&amp;&amp;(Rr===null?Rr=a:Rr.push.apply(Rr,a),Dl=null),a}function Vh(a){Dl===null?Dl=[a]:Dl.push(a)}var O_=ne(null),Il=null,Io=null;function ba(a,c,d){ce(O_,c._currentValue),c._currentValue=d}function Po(a){a._currentValue=O_.current,le(O_)}function D_(a,c,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&amp;c)!==c?(a.childLanes|=c,y!==null&amp;&amp;(y.childLanes|=c)):y!==null&amp;&amp;(y.childLanes&amp;c)!==c&amp;&amp;(y.childLanes|=c),a===d)break;a=a.return}}function N_(a,c,d,y){var S=a.child;for(S!==null&amp;&amp;(S.return=a);S!==null;){var M=S.dependencies;if(M!==null){var U=S.child;M=M.firstContext;e:for(;M!==null;){var W=M;M=S;for(var se=0;se&lt;c.length;se++)if(W.context===c[se]){M.lanes|=d,W=M.alternate,W!==null&amp;&amp;(W.lanes|=d),D_(M.return,d,a),y||(U=null);break e}M=W.next}}else if(S.tag===18){if(U=S.return,U===null)throw Error(i(341));U.lanes|=d,M=U.alternate,M!==null&amp;&amp;(M.lanes|=d),D_(U,d,a),U=null}else U=S.child;if(U!==null)U.return=S;else for(U=S;U!==null;){if(U===a){U=null;break}if(S=U.sibling,S!==null){S.return=U.return,U=S;break}U=U.return}S=U}}function Gh(a,c,d,y){a=null;for(var S=c,M=!1;S!==null;){if(!M){if((S.flags&amp;524288)!==0)M=!0;else if((S.flags&amp;262144)!==0)break}if(S.tag===10){var U=S.alternate;if(U===null)throw Error(i(387));if(U=U.memoizedProps,U!==null){var W=S.type;Br(S.pendingProps.value,U.value)||(a!==null?a.push(W):a=[W])}}else if(S===ue.current){if(U=S.alternate,U===null)throw Error(i(387));U.memoizedState.memoizedState!==S.memoizedState.memoizedState&amp;&amp;(a!==null?a.push(vf):a=[vf])}S=S.return}a!==null&amp;&amp;N_(c,a,d,y),c.flags|=262144}function hp(a){for(a=a.firstContext;a!==null;){if(!Br(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Pl(a){Il=a,Io=null,a=a.dependencies,a!==null&amp;&amp;(a.firstContext=null)}function sr(a){return X1(Il,a)}function fp(a,c){return Il===null&amp;&amp;Pl(a),X1(a,c)}function X1(a,c){var d=c._currentValue;if(c={context:c,memoizedValue:d,next:null},Io===null){if(a===null)throw Error(i(308));Io=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Io=Io.next=c;return d}var sU=typeof AbortController&lt;&quot;u&quot;?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(d,y){a.push(y)}};this.abort=function(){c.aborted=!0,a.forEach(function(d){return d()})}},oU=n.unstable_scheduleCallback,aU=n.unstable_NormalPriority,Ii={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function I_(){return{controller:new sU,data:new Map,refCount:0}}function jh(a){a.refCount--,a.refCount===0&amp;&amp;oU(aU,function(){a.controller.abort()})}var Wh=null,P_=0,$c=0,Zc=null;function lU(a,c){if(Wh===null){var d=Wh=[];P_=0,$c=Uv(),Zc={status:&quot;pending&quot;,value:void 0,then:function(y){d.push(y)}}}return P_++,c.then(q1,q1),c}function q1(){if(--P_===0&amp;&amp;Wh!==null){Zc!==null&amp;&amp;(Zc.status=&quot;fulfilled&quot;);var a=Wh;Wh=null,$c=0,Zc=null;for(var c=0;c&lt;a.length;c++)(0,a[c])()}}function cU(a,c){var d=[],y={status:&quot;pending&quot;,value:null,reason:null,then:function(S){d.push(S)}};return a.then(function(){y.status=&quot;fulfilled&quot;,y.value=c;for(var S=0;S&lt;d.length;S++)(0,d[S])(c)},function(S){for(y.status=&quot;rejected&quot;,y.reason=S,S=0;S&lt;d.length;S++)(0,d[S])(void 0)}),y}var Y1=I.S;I.S=function(a,c){typeof c==&quot;object&quot;&amp;&amp;c!==null&amp;&amp;typeof c.then==&quot;function&quot;&amp;&amp;lU(a,c),Y1!==null&amp;&amp;Y1(a,c)};var Ll=ne(null);function L_(){var a=Ll.current;return a!==null?a:Vn.pooledCache}function dp(a,c){c===null?ce(Ll,Ll.current):ce(Ll,c.pool)}function K1(){var a=L_();return a===null?null:{parent:Ii._currentValue,pool:a}}var Xh=Error(i(460)),$1=Error(i(474)),pp=Error(i(542)),U_={then:function(){}};function Z1(a){return a=a.status,a===&quot;fulfilled&quot;||a===&quot;rejected&quot;}function mp(){}function J1(a,c,d){switch(d=a[d],d===void 0?a.push(c):d!==c&amp;&amp;(c.then(mp,mp),c=d),c.status){case&quot;fulfilled&quot;:return c.value;case&quot;rejected&quot;:throw a=c.reason,eE(a),a;default:if(typeof c.status==&quot;string&quot;)c.then(mp,mp);else{if(a=Vn,a!==null&amp;&amp;100&lt;a.shellSuspendCounter)throw Error(i(482));a=c,a.status=&quot;pending&quot;,a.then(function(y){if(c.status===&quot;pending&quot;){var S=c;S.status=&quot;fulfilled&quot;,S.value=y}},function(y){if(c.status===&quot;pending&quot;){var S=c;S.status=&quot;rejected&quot;,S.reason=y}})}switch(c.status){case&quot;fulfilled&quot;:return c.value;case&quot;rejected&quot;:throw a=c.reason,eE(a),a}throw qh=c,Xh}}var qh=null;function Q1(){if(qh===null)throw Error(i(459));var a=qh;return qh=null,a}function eE(a){if(a===Xh||a===pp)throw Error(i(483))}var xa=!1;function k_(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function F_(a,c){a=a.updateQueue,c.updateQueue===a&amp;&amp;(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Sa(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function wa(a,c,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Cn&amp;2)!==0){var S=y.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),y.pending=c,c=ap(a),B1(a,null,d),c}return op(a,y,c,d),ap(a)}function Yh(a,c,d){if(c=c.updateQueue,c!==null&amp;&amp;(c=c.shared,(d&amp;4194048)!==0)){var y=c.lanes;y&amp;=a.pendingLanes,d|=y,c.lanes=d,Ut(a,d)}}function z_(a,c){var d=a.updateQueue,y=a.alternate;if(y!==null&amp;&amp;(y=y.updateQueue,d===y)){var S=null,M=null;if(d=d.firstBaseUpdate,d!==null){do{var U={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};M===null?S=M=U:M=M.next=U,d=d.next}while(d!==null);M===null?S=M=c:M=M.next=c}else S=M=c;d={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:M,shared:y.shared,callbacks:y.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=c}var B_=!1;function Kh(){if(B_){var a=Zc;if(a!==null)throw a}}function $h(a,c,d,y){B_=!1;var S=a.updateQueue;xa=!1;var M=S.firstBaseUpdate,U=S.lastBaseUpdate,W=S.shared.pending;if(W!==null){S.shared.pending=null;var se=W,_e=se.next;se.next=null,U===null?M=_e:U.next=_e,U=se;var De=a.alternate;De!==null&amp;&amp;(De=De.updateQueue,W=De.lastBaseUpdate,W!==U&amp;&amp;(W===null?De.firstBaseUpdate=_e:W.next=_e,De.lastBaseUpdate=se))}if(M!==null){var ke=S.baseState;U=0,De=_e=se=null,W=M;do{var xe=W.lane&amp;-536870913,Ee=xe!==W.lane;if(Ee?(pn&amp;xe)===xe:(y&amp;xe)===xe){xe!==0&amp;&amp;xe===$c&amp;&amp;(B_=!0),De!==null&amp;&amp;(De=De.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var kt=a,Nt=W;xe=c;var Un=d;switch(Nt.tag){case 1:if(kt=Nt.payload,typeof kt==&quot;function&quot;){ke=kt.call(Un,ke,xe);break e}ke=kt;break e;case 3:kt.flags=kt.flags&amp;-65537|128;case 0:if(kt=Nt.payload,xe=typeof kt==&quot;function&quot;?kt.call(Un,ke,xe):kt,xe==null)break e;ke=f({},ke,xe);break e;case 2:xa=!0}}xe=W.callback,xe!==null&amp;&amp;(a.flags|=64,Ee&amp;&amp;(a.flags|=8192),Ee=S.callbacks,Ee===null?S.callbacks=[xe]:Ee.push(xe))}else Ee={lane:xe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},De===null?(_e=De=Ee,se=ke):De=De.next=Ee,U|=xe;if(W=W.next,W===null){if(W=S.shared.pending,W===null)break;Ee=W,W=Ee.next,Ee.next=null,S.lastBaseUpdate=Ee,S.shared.pending=null}}while(!0);De===null&amp;&amp;(se=ke),S.baseState=se,S.firstBaseUpdate=_e,S.lastBaseUpdate=De,M===null&amp;&amp;(S.shared.lanes=0),Da|=U,a.lanes=U,a.memoizedState=ke}}function tE(a,c){if(typeof a!=&quot;function&quot;)throw Error(i(191,a));a.call(c)}function nE(a,c){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a&lt;d.length;a++)tE(d[a],c)}var Jc=ne(null),gp=ne(0);function iE(a,c){a=Ho,ce(gp,a),ce(Jc,c),Ho=a|c.baseLanes}function H_(){ce(gp,Ho),ce(Jc,Jc.current)}function V_(){Ho=gp.current,le(Jc),le(gp)}var Ea=0,en=null,Pn=null,Ti=null,yp=!1,Qc=!1,Ul=!1,_p=0,Zh=0,eu=null,uU=0;function gi(){throw Error(i(321))}function G_(a,c){if(c===null)return!1;for(var d=0;d&lt;c.length&amp;&amp;d&lt;a.length;d++)if(!Br(a[d],c[d]))return!1;return!0}function j_(a,c,d,y,S,M){return Ea=M,en=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,I.H=a===null||a.memoizedState===null?BE:HE,Ul=!1,M=d(y,S),Ul=!1,Qc&amp;&amp;(M=sE(c,d,y,S)),rE(a),M}function rE(a){I.H=Ep;var c=Pn!==null&amp;&amp;Pn.next!==null;if(Ea=0,Ti=Pn=en=null,yp=!1,Zh=0,eu=null,c)throw Error(i(300));a===null||Vi||(a=a.dependencies,a!==null&amp;&amp;hp(a)&amp;&amp;(Vi=!0))}function sE(a,c,d,y){en=a;var S=0;do{if(Qc&amp;&amp;(eu=null),Zh=0,Qc=!1,25&lt;=S)throw Error(i(301));if(S+=1,Ti=Pn=null,a.updateQueue!=null){var M=a.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&amp;&amp;(M.memoCache.index=0)}I.H=yU,M=c(d,y)}while(Qc);return M}function hU(){var a=I.H,c=a.useState()[0];return c=typeof c.then==&quot;function&quot;?Jh(c):c,a=a.useState()[0],(Pn!==null?Pn.memoizedState:null)!==a&amp;&amp;(en.flags|=1024),c}function W_(){var a=_p!==0;return _p=0,a}function X_(a,c,d){c.updateQueue=a.updateQueue,c.flags&amp;=-2053,a.lanes&amp;=~d}function q_(a){if(yp){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&amp;&amp;(c.pending=null),a=a.next}yp=!1}Ea=0,Ti=Pn=en=null,Qc=!1,Zh=_p=0,eu=null}function Ar(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?en.memoizedState=Ti=a:Ti=Ti.next=a,Ti}function Mi(){if(Pn===null){var a=en.alternate;a=a!==null?a.memoizedState:null}else a=Pn.next;var c=Ti===null?en.memoizedState:Ti.next;if(c!==null)Ti=c,Pn=a;else{if(a===null)throw en.alternate===null?Error(i(467)):Error(i(310));Pn=a,a={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Ti===null?en.memoizedState=Ti=a:Ti=Ti.next=a}return Ti}function Y_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jh(a){var c=Zh;return Zh+=1,eu===null&amp;&amp;(eu=[]),a=J1(eu,a,c),c=en,(Ti===null?c.memoizedState:Ti.next)===null&amp;&amp;(c=c.alternate,I.H=c===null||c.memoizedState===null?BE:HE),a}function vp(a){if(a!==null&amp;&amp;typeof a==&quot;object&quot;){if(typeof a.then==&quot;function&quot;)return Jh(a);if(a.$$typeof===w)return sr(a)}throw Error(i(438,String(a)))}function K_(a){var c=null,d=en.updateQueue;if(d!==null&amp;&amp;(c=d.memoCache),c==null){var y=en.alternate;y!==null&amp;&amp;(y=y.updateQueue,y!==null&amp;&amp;(y=y.memoCache,y!=null&amp;&amp;(c={data:y.data.map(function(S){return S.slice()}),index:0})))}if(c==null&amp;&amp;(c={data:[],index:0}),d===null&amp;&amp;(d=Y_(),en.updateQueue=d),d.memoCache=c,d=c.data[c.index],d===void 0)for(d=c.data[c.index]=Array(a),y=0;y&lt;a;y++)d[y]=O;return c.index++,d}function Lo(a,c){return typeof c==&quot;function&quot;?c(a):c}function bp(a){var c=Mi();return $_(c,Pn,a)}function $_(a,c,d){var y=a.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=d;var S=a.baseQueue,M=y.pending;if(M!==null){if(S!==null){var U=S.next;S.next=M.next,M.next=U}c.baseQueue=S=M,y.pending=null}if(M=a.baseState,S===null)a.memoizedState=M;else{c=S.next;var W=U=null,se=null,_e=c,De=!1;do{var ke=_e.lane&amp;-536870913;if(ke!==_e.lane?(pn&amp;ke)===ke:(Ea&amp;ke)===ke){var xe=_e.revertLane;if(xe===0)se!==null&amp;&amp;(se=se.next={lane:0,revertLane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),ke===$c&amp;&amp;(De=!0);else if((Ea&amp;xe)===xe){_e=_e.next,xe===$c&amp;&amp;(De=!0);continue}else ke={lane:0,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},se===null?(W=se=ke,U=M):se=se.next=ke,en.lanes|=xe,Da|=xe;ke=_e.action,Ul&amp;&amp;d(M,ke),M=_e.hasEagerState?_e.eagerState:d(M,ke)}else xe={lane:ke,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},se===null?(W=se=xe,U=M):se=se.next=xe,en.lanes|=ke,Da|=ke;_e=_e.next}while(_e!==null&amp;&amp;_e!==c);if(se===null?U=M:se.next=W,!Br(M,a.memoizedState)&amp;&amp;(Vi=!0,De&amp;&amp;(d=Zc,d!==null)))throw d;a.memoizedState=M,a.baseState=U,a.baseQueue=se,y.lastRenderedState=M}return S===null&amp;&amp;(y.lanes=0),[a.memoizedState,y.dispatch]}function Z_(a){var c=Mi(),d=c.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=a;var y=d.dispatch,S=d.pending,M=c.memoizedState;if(S!==null){d.pending=null;var U=S=S.next;do M=a(M,U.action),U=U.next;while(U!==S);Br(M,c.memoizedState)||(Vi=!0),c.memoizedState=M,c.baseQueue===null&amp;&amp;(c.baseState=M),d.lastRenderedState=M}return[M,y]}function oE(a,c,d){var y=en,S=Mi(),M=En;if(M){if(d===void 0)throw Error(i(407));d=d()}else d=c();var U=!Br((Pn||S).memoizedState,d);U&amp;&amp;(S.memoizedState=d,Vi=!0),S=S.queue;var W=cE.bind(null,y,S,a);if(Qh(2048,8,W,[a]),S.getSnapshot!==c||U||Ti!==null&amp;&amp;Ti.memoizedState.tag&amp;1){if(y.flags|=2048,tu(9,xp(),lE.bind(null,y,S,d,c),null),Vn===null)throw Error(i(349));M||(Ea&amp;124)!==0||aE(y,c,d)}return d}function aE(a,c,d){a.flags|=16384,a={getSnapshot:c,value:d},c=en.updateQueue,c===null?(c=Y_(),en.updateQueue=c,c.stores=[a]):(d=c.stores,d===null?c.stores=[a]:d.push(a))}function lE(a,c,d,y){c.value=d,c.getSnapshot=y,uE(c)&amp;&amp;hE(a)}function cE(a,c,d){return d(function(){uE(c)&amp;&amp;hE(a)})}function uE(a){var c=a.getSnapshot;a=a.value;try{var d=c();return!Br(a,d)}catch{return!0}}function hE(a){var c=Xc(a,2);c!==null&amp;&amp;Xr(c,a,2)}function J_(a){var c=Ar();if(typeof a==&quot;function&quot;){var d=a;if(a=d(),Ul){qe(!0);try{d()}finally{qe(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:a},c}function fE(a,c,d,y){return a.baseState=d,$_(a,Pn,typeof y==&quot;function&quot;?y:Lo)}function fU(a,c,d,y,S){if(wp(a))throw Error(i(485));if(a=c.action,a!==null){var M={payload:S,action:a,next:null,isTransition:!0,status:&quot;pending&quot;,value:null,reason:null,listeners:[],then:function(U){M.listeners.push(U)}};I.T!==null?d(!0):M.isTransition=!1,y(M),d=c.pending,d===null?(M.next=c.pending=M,dE(c,M)):(M.next=d.next,c.pending=d.next=M)}}function dE(a,c){var d=c.action,y=c.payload,S=a.state;if(c.isTransition){var M=I.T,U={};I.T=U;try{var W=d(S,y),se=I.S;se!==null&amp;&amp;se(U,W),pE(a,c,W)}catch(_e){Q_(a,c,_e)}finally{I.T=M}}else try{M=d(S,y),pE(a,c,M)}catch(_e){Q_(a,c,_e)}}function pE(a,c,d){d!==null&amp;&amp;typeof d==&quot;object&quot;&amp;&amp;typeof d.then==&quot;function&quot;?d.then(function(y){mE(a,c,y)},function(y){return Q_(a,c,y)}):mE(a,c,d)}function mE(a,c,d){c.status=&quot;fulfilled&quot;,c.value=d,gE(c),a.state=d,c=a.pending,c!==null&amp;&amp;(d=c.next,d===c?a.pending=null:(d=d.next,c.next=d,dE(a,d)))}function Q_(a,c,d){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do c.status=&quot;rejected&quot;,c.reason=d,gE(c),c=c.next;while(c!==y)}a.action=null}function gE(a){a=a.listeners;for(var c=0;c&lt;a.length;c++)(0,a[c])()}function yE(a,c){return c}function _E(a,c){if(En){var d=Vn.formState;if(d!==null){e:{var y=en;if(En){if(li){t:{for(var S=li,M=no;S.nodeType!==8;){if(!M){S=null;break t}if(S=Ps(S.nextSibling),S===null){S=null;break t}}M=S.data,S=M===&quot;F!&quot;||M===&quot;F&quot;?S:null}if(S){li=Ps(S.nextSibling),y=S.data===&quot;F!&quot;;break e}}Nl(y)}y=!1}y&amp;&amp;(c=d[0])}}return d=Ar(),d.memoizedState=d.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yE,lastRenderedState:c},d.queue=y,d=kE.bind(null,en,y),y.dispatch=d,y=J_(!1),M=rv.bind(null,en,!1,y.queue),y=Ar(),S={state:c,dispatch:null,action:a,pending:null},y.queue=S,d=fU.bind(null,en,S,M,d),S.dispatch=d,y.memoizedState=a,[c,d,!1]}function vE(a){var c=Mi();return bE(c,Pn,a)}function bE(a,c,d){if(c=$_(a,c,yE)[0],a=bp(Lo)[0],typeof c==&quot;object&quot;&amp;&amp;c!==null&amp;&amp;typeof c.then==&quot;function&quot;)try{var y=Jh(c)}catch(U){throw U===Xh?pp:U}else y=c;c=Mi();var S=c.queue,M=S.dispatch;return d!==c.memoizedState&amp;&amp;(en.flags|=2048,tu(9,xp(),dU.bind(null,S,d),null)),[y,M,a]}function dU(a,c){a.action=c}function xE(a){var c=Mi(),d=Pn;if(d!==null)return bE(c,d,a);Mi(),c=c.memoizedState,d=Mi();var y=d.queue.dispatch;return d.memoizedState=a,[c,y,!1]}function tu(a,c,d,y){return a={tag:a,create:d,deps:y,inst:c,next:null},c=en.updateQueue,c===null&amp;&amp;(c=Y_(),en.updateQueue=c),d=c.lastEffect,d===null?c.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,c.lastEffect=a),a}function xp(){return{destroy:void 0,resource:void 0}}function SE(){return Mi().memoizedState}function Sp(a,c,d,y){var S=Ar();y=y===void 0?null:y,en.flags|=a,S.memoizedState=tu(1|c,xp(),d,y)}function Qh(a,c,d,y){var S=Mi();y=y===void 0?null:y;var M=S.memoizedState.inst;Pn!==null&amp;&amp;y!==null&amp;&amp;G_(y,Pn.memoizedState.deps)?S.memoizedState=tu(c,M,d,y):(en.flags|=a,S.memoizedState=tu(1|c,M,d,y))}function wE(a,c){Sp(8390656,8,a,c)}function EE(a,c){Qh(2048,8,a,c)}function TE(a,c){return Qh(4,2,a,c)}function ME(a,c){return Qh(4,4,a,c)}function AE(a,c){if(typeof c==&quot;function&quot;){a=a();var d=c(a);return function(){typeof d==&quot;function&quot;?d():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function CE(a,c,d){d=d!=null?d.concat([a]):null,Qh(4,4,AE.bind(null,c,a),d)}function ev(){}function RE(a,c){var d=Mi();c=c===void 0?null:c;var y=d.memoizedState;return c!==null&amp;&amp;G_(c,y[1])?y[0]:(d.memoizedState=[a,c],a)}function OE(a,c){var d=Mi();c=c===void 0?null:c;var y=d.memoizedState;if(c!==null&amp;&amp;G_(c,y[1]))return y[0];if(y=a(),Ul){qe(!0);try{a()}finally{qe(!1)}}return d.memoizedState=[y,c],y}function tv(a,c,d){return d===void 0||(Ea&amp;1073741824)!==0?a.memoizedState=c:(a.memoizedState=d,a=IT(),en.lanes|=a,Da|=a,d)}function DE(a,c,d,y){return Br(d,c)?d:Jc.current!==null?(a=tv(a,d,y),Br(a,c)||(Vi=!0),a):(Ea&amp;42)===0?(Vi=!0,a.memoizedState=d):(a=IT(),en.lanes|=a,Da|=a,c)}function NE(a,c,d,y,S){var M=j.p;j.p=M!==0&amp;&amp;8&gt;M?M:8;var U=I.T,W={};I.T=W,rv(a,!1,c,d);try{var se=S(),_e=I.S;if(_e!==null&amp;&amp;_e(W,se),se!==null&amp;&amp;typeof se==&quot;object&quot;&amp;&amp;typeof se.then==&quot;function&quot;){var De=cU(se,y);ef(a,c,De,Wr(a))}else ef(a,c,y,Wr(a))}catch(ke){ef(a,c,{then:function(){},status:&quot;rejected&quot;,reason:ke},Wr())}finally{j.p=M,I.T=U}}function pU(){}function nv(a,c,d,y){if(a.tag!==5)throw Error(i(476));var S=IE(a).queue;NE(a,S,c,G,d===null?pU:function(){return PE(a),d(y)})}function IE(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:G},next:null};var d={};return c.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:d},next:null},a.memoizedState=c,a=a.alternate,a!==null&amp;&amp;(a.memoizedState=c),c}function PE(a){var c=IE(a).next.queue;ef(a,c,{},Wr())}function iv(){return sr(vf)}function LE(){return Mi().memoizedState}function UE(){return Mi().memoizedState}function mU(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var d=Wr();a=Sa(d);var y=wa(c,a,d);y!==null&amp;&amp;(Xr(y,c,d),Yh(y,c,d)),c={cache:I_()},a.payload=c;return}c=c.return}}function gU(a,c,d){var y=Wr();d={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},wp(a)?FE(c,d):(d=w_(a,c,d,y),d!==null&amp;&amp;(Xr(d,a,y),zE(d,c,y)))}function kE(a,c,d){var y=Wr();ef(a,c,d,y)}function ef(a,c,d,y){var S={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(wp(a))FE(c,S);else{var M=a.alternate;if(a.lanes===0&amp;&amp;(M===null||M.lanes===0)&amp;&amp;(M=c.lastRenderedReducer,M!==null))try{var U=c.lastRenderedState,W=M(U,d);if(S.hasEagerState=!0,S.eagerState=W,Br(W,U))return op(a,c,S,0),Vn===null&amp;&amp;sp(),!1}catch{}finally{}if(d=w_(a,c,S,y),d!==null)return Xr(d,a,y),zE(d,c,y),!0}return!1}function rv(a,c,d,y){if(y={lane:2,revertLane:Uv(),action:y,hasEagerState:!1,eagerState:null,next:null},wp(a)){if(c)throw Error(i(479))}else c=w_(a,d,y,2),c!==null&amp;&amp;Xr(c,a,2)}function wp(a){var c=a.alternate;return a===en||c!==null&amp;&amp;c===en}function FE(a,c){Qc=yp=!0;var d=a.pending;d===null?c.next=c:(c.next=d.next,d.next=c),a.pending=c}function zE(a,c,d){if((d&amp;4194048)!==0){var y=c.lanes;y&amp;=a.pendingLanes,d|=y,c.lanes=d,Ut(a,d)}}var Ep={readContext:sr,use:vp,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useLayoutEffect:gi,useInsertionEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useSyncExternalStore:gi,useId:gi,useHostTransitionStatus:gi,useFormState:gi,useActionState:gi,useOptimistic:gi,useMemoCache:gi,useCacheRefresh:gi},BE={readContext:sr,use:vp,useCallback:function(a,c){return Ar().memoizedState=[a,c===void 0?null:c],a},useContext:sr,useEffect:wE,useImperativeHandle:function(a,c,d){d=d!=null?d.concat([a]):null,Sp(4194308,4,AE.bind(null,c,a),d)},useLayoutEffect:function(a,c){return Sp(4194308,4,a,c)},useInsertionEffect:function(a,c){Sp(4,2,a,c)},useMemo:function(a,c){var d=Ar();c=c===void 0?null:c;var y=a();if(Ul){qe(!0);try{a()}finally{qe(!1)}}return d.memoizedState=[y,c],y},useReducer:function(a,c,d){var y=Ar();if(d!==void 0){var S=d(c);if(Ul){qe(!0);try{d(c)}finally{qe(!1)}}}else S=c;return y.memoizedState=y.baseState=S,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:S},y.queue=a,a=a.dispatch=gU.bind(null,en,a),[y.memoizedState,a]},useRef:function(a){var c=Ar();return a={current:a},c.memoizedState=a},useState:function(a){a=J_(a);var c=a.queue,d=kE.bind(null,en,c);return c.dispatch=d,[a.memoizedState,d]},useDebugValue:ev,useDeferredValue:function(a,c){var d=Ar();return tv(d,a,c)},useTransition:function(){var a=J_(!1);return a=NE.bind(null,en,a.queue,!0,!1),Ar().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,d){var y=en,S=Ar();if(En){if(d===void 0)throw Error(i(407));d=d()}else{if(d=c(),Vn===null)throw Error(i(349));(pn&amp;124)!==0||aE(y,c,d)}S.memoizedState=d;var M={value:d,getSnapshot:c};return S.queue=M,wE(cE.bind(null,y,M,a),[a]),y.flags|=2048,tu(9,xp(),lE.bind(null,y,M,d,c),null),d},useId:function(){var a=Ar(),c=Vn.identifierPrefix;if(En){var d=No,y=Do;d=(y&amp;~(1&lt;&lt;32-ut(y)-1)).toString(32)+d,c=&quot;«&quot;+c+&quot;R&quot;+d,d=_p++,0&lt;d&amp;&amp;(c+=&quot;H&quot;+d.toString(32)),c+=&quot;»&quot;}else d=uU++,c=&quot;«&quot;+c+&quot;r&quot;+d.toString(32)+&quot;»&quot;;return a.memoizedState=c},useHostTransitionStatus:iv,useFormState:_E,useActionState:_E,useOptimistic:function(a){var c=Ar();c.memoizedState=c.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=d,c=rv.bind(null,en,!0,d),d.dispatch=c,[a,c]},useMemoCache:K_,useCacheRefresh:function(){return Ar().memoizedState=mU.bind(null,en)}},HE={readContext:sr,use:vp,useCallback:RE,useContext:sr,useEffect:EE,useImperativeHandle:CE,useInsertionEffect:TE,useLayoutEffect:ME,useMemo:OE,useReducer:bp,useRef:SE,useState:function(){return bp(Lo)},useDebugValue:ev,useDeferredValue:function(a,c){var d=Mi();return DE(d,Pn.memoizedState,a,c)},useTransition:function(){var a=bp(Lo)[0],c=Mi().memoizedState;return[typeof a==&quot;boolean&quot;?a:Jh(a),c]},useSyncExternalStore:oE,useId:LE,useHostTransitionStatus:iv,useFormState:vE,useActionState:vE,useOptimistic:function(a,c){var d=Mi();return fE(d,Pn,a,c)},useMemoCache:K_,useCacheRefresh:UE},yU={readContext:sr,use:vp,useCallback:RE,useContext:sr,useEffect:EE,useImperativeHandle:CE,useInsertionEffect:TE,useLayoutEffect:ME,useMemo:OE,useReducer:Z_,useRef:SE,useState:function(){return Z_(Lo)},useDebugValue:ev,useDeferredValue:function(a,c){var d=Mi();return Pn===null?tv(d,a,c):DE(d,Pn.memoizedState,a,c)},useTransition:function(){var a=Z_(Lo)[0],c=Mi().memoizedState;return[typeof a==&quot;boolean&quot;?a:Jh(a),c]},useSyncExternalStore:oE,useId:LE,useHostTransitionStatus:iv,useFormState:xE,useActionState:xE,useOptimistic:function(a,c){var d=Mi();return Pn!==null?fE(d,Pn,a,c):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:K_,useCacheRefresh:UE},nu=null,tf=0;function Tp(a){var c=tf;return tf+=1,nu===null&amp;&amp;(nu=[]),J1(nu,a,c)}function nf(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function Mp(a,c){throw c.$$typeof===p?Error(i(525)):(a=Object.prototype.toString.call(c),Error(i(31,a===&quot;[object Object]&quot;?&quot;object with keys {&quot;+Object.keys(c).join(&quot;, &quot;)+&quot;}&quot;:a)))}function VE(a){var c=a._init;return c(a._payload)}function GE(a){function c(ge,he){if(a){var ye=ge.deletions;ye===null?(ge.deletions=[he],ge.flags|=16):ye.push(he)}}function d(ge,he){if(!a)return null;for(;he!==null;)c(ge,he),he=he.sibling;return null}function y(ge){for(var he=new Map;ge!==null;)ge.key!==null?he.set(ge.key,ge):he.set(ge.index,ge),ge=ge.sibling;return he}function S(ge,he){return ge=Oo(ge,he),ge.index=0,ge.sibling=null,ge}function M(ge,he,ye){return ge.index=ye,a?(ye=ge.alternate,ye!==null?(ye=ye.index,ye&lt;he?(ge.flags|=67108866,he):ye):(ge.flags|=67108866,he)):(ge.flags|=1048576,he)}function U(ge){return a&amp;&amp;ge.alternate===null&amp;&amp;(ge.flags|=67108866),ge}function W(ge,he,ye,Ie){return he===null||he.tag!==6?(he=T_(ye,ge.mode,Ie),he.return=ge,he):(he=S(he,ye),he.return=ge,he)}function se(ge,he,ye,Ie){var vt=ye.type;return vt===v?De(ge,he,ye.props.children,Ie,ye.key):he!==null&amp;&amp;(he.elementType===vt||typeof vt==&quot;object&quot;&amp;&amp;vt!==null&amp;&amp;vt.$$typeof===D&amp;&amp;VE(vt)===he.type)?(he=S(he,ye.props),nf(he,ye),he.return=ge,he):(he=lp(ye.type,ye.key,ye.props,null,ge.mode,Ie),nf(he,ye),he.return=ge,he)}function _e(ge,he,ye,Ie){return he===null||he.tag!==4||he.stateNode.containerInfo!==ye.containerInfo||he.stateNode.implementation!==ye.implementation?(he=M_(ye,ge.mode,Ie),he.return=ge,he):(he=S(he,ye.children||[]),he.return=ge,he)}function De(ge,he,ye,Ie,vt){return he===null||he.tag!==7?(he=Cl(ye,ge.mode,Ie,vt),he.return=ge,he):(he=S(he,ye),he.return=ge,he)}function ke(ge,he,ye){if(typeof he==&quot;string&quot;&amp;&amp;he!==&quot;&quot;||typeof he==&quot;number&quot;||typeof he==&quot;bigint&quot;)return he=T_(&quot;&quot;+he,ge.mode,ye),he.return=ge,he;if(typeof he==&quot;object&quot;&amp;&amp;he!==null){switch(he.$$typeof){case m:return ye=lp(he.type,he.key,he.props,null,ge.mode,ye),nf(ye,he),ye.return=ge,ye;case g:return he=M_(he,ge.mode,ye),he.return=ge,he;case D:var Ie=he._init;return he=Ie(he._payload),ke(ge,he,ye)}if(K(he)||V(he))return he=Cl(he,ge.mode,ye,null),he.return=ge,he;if(typeof he.then==&quot;function&quot;)return ke(ge,Tp(he),ye);if(he.$$typeof===w)return ke(ge,fp(ge,he),ye);Mp(ge,he)}return null}function xe(ge,he,ye,Ie){var vt=he!==null?he.key:null;if(typeof ye==&quot;string&quot;&amp;&amp;ye!==&quot;&quot;||typeof ye==&quot;number&quot;||typeof ye==&quot;bigint&quot;)return vt!==null?null:W(ge,he,&quot;&quot;+ye,Ie);if(typeof ye==&quot;object&quot;&amp;&amp;ye!==null){switch(ye.$$typeof){case m:return ye.key===vt?se(ge,he,ye,Ie):null;case g:return ye.key===vt?_e(ge,he,ye,Ie):null;case D:return vt=ye._init,ye=vt(ye._payload),xe(ge,he,ye,Ie)}if(K(ye)||V(ye))return vt!==null?null:De(ge,he,ye,Ie,null);if(typeof ye.then==&quot;function&quot;)return xe(ge,he,Tp(ye),Ie);if(ye.$$typeof===w)return xe(ge,he,fp(ge,ye),Ie);Mp(ge,ye)}return null}function Ee(ge,he,ye,Ie,vt){if(typeof Ie==&quot;string&quot;&amp;&amp;Ie!==&quot;&quot;||typeof Ie==&quot;number&quot;||typeof Ie==&quot;bigint&quot;)return ge=ge.get(ye)||null,W(he,ge,&quot;&quot;+Ie,vt);if(typeof Ie==&quot;object&quot;&amp;&amp;Ie!==null){switch(Ie.$$typeof){case m:return ge=ge.get(Ie.key===null?ye:Ie.key)||null,se(he,ge,Ie,vt);case g:return ge=ge.get(Ie.key===null?ye:Ie.key)||null,_e(he,ge,Ie,vt);case D:var tn=Ie._init;return Ie=tn(Ie._payload),Ee(ge,he,ye,Ie,vt)}if(K(Ie)||V(Ie))return ge=ge.get(ye)||null,De(he,ge,Ie,vt,null);if(typeof Ie.then==&quot;function&quot;)return Ee(ge,he,ye,Tp(Ie),vt);if(Ie.$$typeof===w)return Ee(ge,he,ye,fp(he,Ie),vt);Mp(he,Ie)}return null}function kt(ge,he,ye,Ie){for(var vt=null,tn=null,At=he,Pt=he=0,ji=null;At!==null&amp;&amp;Pt&lt;ye.length;Pt++){At.index&gt;Pt?(ji=At,At=null):ji=At.sibling;var bn=xe(ge,At,ye[Pt],Ie);if(bn===null){At===null&amp;&amp;(At=ji);break}a&amp;&amp;At&amp;&amp;bn.alternate===null&amp;&amp;c(ge,At),he=M(bn,he,Pt),tn===null?vt=bn:tn.sibling=bn,tn=bn,At=ji}if(Pt===ye.length)return d(ge,At),En&amp;&amp;Ol(ge,Pt),vt;if(At===null){for(;Pt&lt;ye.length;Pt++)At=ke(ge,ye[Pt],Ie),At!==null&amp;&amp;(he=M(At,he,Pt),tn===null?vt=At:tn.sibling=At,tn=At);return En&amp;&amp;Ol(ge,Pt),vt}for(At=y(At);Pt&lt;ye.length;Pt++)ji=Ee(At,ge,Pt,ye[Pt],Ie),ji!==null&amp;&amp;(a&amp;&amp;ji.alternate!==null&amp;&amp;At.delete(ji.key===null?Pt:ji.key),he=M(ji,he,Pt),tn===null?vt=ji:tn.sibling=ji,tn=ji);return a&amp;&amp;At.forEach(function(Ba){return c(ge,Ba)}),En&amp;&amp;Ol(ge,Pt),vt}function Nt(ge,he,ye,Ie){if(ye==null)throw Error(i(151));for(var vt=null,tn=null,At=he,Pt=he=0,ji=null,bn=ye.next();At!==null&amp;&amp;!bn.done;Pt++,bn=ye.next()){At.index&gt;Pt?(ji=At,At=null):ji=At.sibling;var Ba=xe(ge,At,bn.value,Ie);if(Ba===null){At===null&amp;&amp;(At=ji);break}a&amp;&amp;At&amp;&amp;Ba.alternate===null&amp;&amp;c(ge,At),he=M(Ba,he,Pt),tn===null?vt=Ba:tn.sibling=Ba,tn=Ba,At=ji}if(bn.done)return d(ge,At),En&amp;&amp;Ol(ge,Pt),vt;if(At===null){for(;!bn.done;Pt++,bn=ye.next())bn=ke(ge,bn.value,Ie),bn!==null&amp;&amp;(he=M(bn,he,Pt),tn===null?vt=bn:tn.sibling=bn,tn=bn);return En&amp;&amp;Ol(ge,Pt),vt}for(At=y(At);!bn.done;Pt++,bn=ye.next())bn=Ee(At,ge,Pt,bn.value,Ie),bn!==null&amp;&amp;(a&amp;&amp;bn.alternate!==null&amp;&amp;At.delete(bn.key===null?Pt:bn.key),he=M(bn,he,Pt),tn===null?vt=bn:tn.sibling=bn,tn=bn);return a&amp;&amp;At.forEach(function(_k){return c(ge,_k)}),En&amp;&amp;Ol(ge,Pt),vt}function Un(ge,he,ye,Ie){if(typeof ye==&quot;object&quot;&amp;&amp;ye!==null&amp;&amp;ye.type===v&amp;&amp;ye.key===null&amp;&amp;(ye=ye.props.children),typeof ye==&quot;object&quot;&amp;&amp;ye!==null){switch(ye.$$typeof){case m:e:{for(var vt=ye.key;he!==null;){if(he.key===vt){if(vt=ye.type,vt===v){if(he.tag===7){d(ge,he.sibling),Ie=S(he,ye.props.children),Ie.return=ge,ge=Ie;break e}}else if(he.elementType===vt||typeof vt==&quot;object&quot;&amp;&amp;vt!==null&amp;&amp;vt.$$typeof===D&amp;&amp;VE(vt)===he.type){d(ge,he.sibling),Ie=S(he,ye.props),nf(Ie,ye),Ie.return=ge,ge=Ie;break e}d(ge,he);break}else c(ge,he);he=he.sibling}ye.type===v?(Ie=Cl(ye.props.children,ge.mode,Ie,ye.key),Ie.return=ge,ge=Ie):(Ie=lp(ye.type,ye.key,ye.props,null,ge.mode,Ie),nf(Ie,ye),Ie.return=ge,ge=Ie)}return U(ge);case g:e:{for(vt=ye.key;he!==null;){if(he.key===vt)if(he.tag===4&amp;&amp;he.stateNode.containerInfo===ye.containerInfo&amp;&amp;he.stateNode.implementation===ye.implementation){d(ge,he.sibling),Ie=S(he,ye.children||[]),Ie.return=ge,ge=Ie;break e}else{d(ge,he);break}else c(ge,he);he=he.sibling}Ie=M_(ye,ge.mode,Ie),Ie.return=ge,ge=Ie}return U(ge);case D:return vt=ye._init,ye=vt(ye._payload),Un(ge,he,ye,Ie)}if(K(ye))return kt(ge,he,ye,Ie);if(V(ye)){if(vt=V(ye),typeof vt!=&quot;function&quot;)throw Error(i(150));return ye=vt.call(ye),Nt(ge,he,ye,Ie)}if(typeof ye.then==&quot;function&quot;)return Un(ge,he,Tp(ye),Ie);if(ye.$$typeof===w)return Un(ge,he,fp(ge,ye),Ie);Mp(ge,ye)}return typeof ye==&quot;string&quot;&amp;&amp;ye!==&quot;&quot;||typeof ye==&quot;number&quot;||typeof ye==&quot;bigint&quot;?(ye=&quot;&quot;+ye,he!==null&amp;&amp;he.tag===6?(d(ge,he.sibling),Ie=S(he,ye),Ie.return=ge,ge=Ie):(d(ge,he),Ie=T_(ye,ge.mode,Ie),Ie.return=ge,ge=Ie),U(ge)):d(ge,he)}return function(ge,he,ye,Ie){try{tf=0;var vt=Un(ge,he,ye,Ie);return nu=null,vt}catch(At){if(At===Xh||At===pp)throw At;var tn=Hr(29,At,null,ge.mode);return tn.lanes=Ie,tn.return=ge,tn}finally{}}}var iu=GE(!0),jE=GE(!1),fs=ne(null),io=null;function Ta(a){var c=a.alternate;ce(Pi,Pi.current&amp;1),ce(fs,a),io===null&amp;&amp;(c===null||Jc.current!==null||c.memoizedState!==null)&amp;&amp;(io=a)}function WE(a){if(a.tag===22){if(ce(Pi,Pi.current),ce(fs,a),io===null){var c=a.alternate;c!==null&amp;&amp;c.memoizedState!==null&amp;&amp;(io=a)}}else Ma()}function Ma(){ce(Pi,Pi.current),ce(fs,fs.current)}function Uo(a){le(fs),io===a&amp;&amp;(io=null),le(Pi)}var Pi=ne(0);function Ap(a){for(var c=a;c!==null;){if(c.tag===13){var d=c.memoizedState;if(d!==null&amp;&amp;(d=d.dehydrated,d===null||d.data===&quot;$?&quot;||Yv(d)))return c}else if(c.tag===19&amp;&amp;c.memoizedProps.revealOrder!==void 0){if((c.flags&amp;128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function sv(a,c,d,y){c=a.memoizedState,d=d(y,c),d=d==null?c:f({},c,d),a.memoizedState=d,a.lanes===0&amp;&amp;(a.updateQueue.baseState=d)}var ov={enqueueSetState:function(a,c,d){a=a._reactInternals;var y=Wr(),S=Sa(y);S.payload=c,d!=null&amp;&amp;(S.callback=d),c=wa(a,S,y),c!==null&amp;&amp;(Xr(c,a,y),Yh(c,a,y))},enqueueReplaceState:function(a,c,d){a=a._reactInternals;var y=Wr(),S=Sa(y);S.tag=1,S.payload=c,d!=null&amp;&amp;(S.callback=d),c=wa(a,S,y),c!==null&amp;&amp;(Xr(c,a,y),Yh(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var d=Wr(),y=Sa(d);y.tag=2,c!=null&amp;&amp;(y.callback=c),c=wa(a,y,d),c!==null&amp;&amp;(Xr(c,a,d),Yh(c,a,d))}};function XE(a,c,d,y,S,M,U){return a=a.stateNode,typeof a.shouldComponentUpdate==&quot;function&quot;?a.shouldComponentUpdate(y,M,U):c.prototype&amp;&amp;c.prototype.isPureReactComponent?!Fh(d,y)||!Fh(S,M):!0}function qE(a,c,d,y){a=c.state,typeof c.componentWillReceiveProps==&quot;function&quot;&amp;&amp;c.componentWillReceiveProps(d,y),typeof c.UNSAFE_componentWillReceiveProps==&quot;function&quot;&amp;&amp;c.UNSAFE_componentWillReceiveProps(d,y),c.state!==a&amp;&amp;ov.enqueueReplaceState(c,c.state,null)}function kl(a,c){var d=c;if(&quot;ref&quot;in c){d={};for(var y in c)y!==&quot;ref&quot;&amp;&amp;(d[y]=c[y])}if(a=a.defaultProps){d===c&amp;&amp;(d=f({},d));for(var S in a)d[S]===void 0&amp;&amp;(d[S]=a[S])}return d}var Cp=typeof reportError==&quot;function&quot;?reportError:function(a){if(typeof window==&quot;object&quot;&amp;&amp;typeof window.ErrorEvent==&quot;function&quot;){var c=new window.ErrorEvent(&quot;error&quot;,{bubbles:!0,cancelable:!0,message:typeof a==&quot;object&quot;&amp;&amp;a!==null&amp;&amp;typeof a.message==&quot;string&quot;?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process==&quot;object&quot;&amp;&amp;typeof process.emit==&quot;function&quot;){process.emit(&quot;uncaughtException&quot;,a);return}console.error(a)};function YE(a){Cp(a)}function KE(a){console.error(a)}function $E(a){Cp(a)}function Rp(a,c){try{var d=a.onUncaughtError;d(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function ZE(a,c,d){try{var y=a.onCaughtError;y(d.value,{componentStack:d.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function av(a,c,d){return d=Sa(d),d.tag=3,d.payload={element:null},d.callback=function(){Rp(a,c)},d}function JE(a){return a=Sa(a),a.tag=3,a}function QE(a,c,d,y){var S=d.type.getDerivedStateFromError;if(typeof S==&quot;function&quot;){var M=y.value;a.payload=function(){return S(M)},a.callback=function(){ZE(c,d,y)}}var U=d.stateNode;U!==null&amp;&amp;typeof U.componentDidCatch==&quot;function&quot;&amp;&amp;(a.callback=function(){ZE(c,d,y),typeof S!=&quot;function&quot;&amp;&amp;(Na===null?Na=new Set([this]):Na.add(this));var W=y.stack;this.componentDidCatch(y.value,{componentStack:W!==null?W:&quot;&quot;})})}function _U(a,c,d,y,S){if(d.flags|=32768,y!==null&amp;&amp;typeof y==&quot;object&quot;&amp;&amp;typeof y.then==&quot;function&quot;){if(c=d.alternate,c!==null&amp;&amp;Gh(c,d,S,!0),d=fs.current,d!==null){switch(d.tag){case 13:return io===null?Dv():d.alternate===null&amp;&amp;ci===0&amp;&amp;(ci=3),d.flags&amp;=-257,d.flags|=65536,d.lanes=S,y===U_?d.flags|=16384:(c=d.updateQueue,c===null?d.updateQueue=new Set([y]):c.add(y),Iv(a,y,S)),!1;case 22:return d.flags|=65536,y===U_?d.flags|=16384:(c=d.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},d.updateQueue=c):(d=c.retryQueue,d===null?c.retryQueue=new Set([y]):d.add(y)),Iv(a,y,S)),!1}throw Error(i(435,d.tag))}return Iv(a,y,S),Dv(),!1}if(En)return c=fs.current,c!==null?((c.flags&amp;65536)===0&amp;&amp;(c.flags|=256),c.flags|=65536,c.lanes=S,y!==R_&amp;&amp;(a=Error(i(422),{cause:y}),Vh(ls(a,d)))):(y!==R_&amp;&amp;(c=Error(i(423),{cause:y}),Vh(ls(c,d))),a=a.current.alternate,a.flags|=65536,S&amp;=-S,a.lanes|=S,y=ls(y,d),S=av(a.stateNode,y,S),z_(a,S),ci!==4&amp;&amp;(ci=2)),!1;var M=Error(i(520),{cause:y});if(M=ls(M,d),uf===null?uf=[M]:uf.push(M),ci!==4&amp;&amp;(ci=2),c===null)return!0;y=ls(y,d),d=c;do{switch(d.tag){case 3:return d.flags|=65536,a=S&amp;-S,d.lanes|=a,a=av(d.stateNode,y,a),z_(d,a),!1;case 1:if(c=d.type,M=d.stateNode,(d.flags&amp;128)===0&amp;&amp;(typeof c.getDerivedStateFromError==&quot;function&quot;||M!==null&amp;&amp;typeof M.componentDidCatch==&quot;function&quot;&amp;&amp;(Na===null||!Na.has(M))))return d.flags|=65536,S&amp;=-S,d.lanes|=S,S=JE(S),QE(S,a,d,y),z_(d,S),!1}d=d.return}while(d!==null);return!1}var eT=Error(i(461)),Vi=!1;function er(a,c,d,y){c.child=a===null?jE(c,null,d,y):iu(c,a.child,d,y)}function tT(a,c,d,y,S){d=d.render;var M=c.ref;if(&quot;ref&quot;in y){var U={};for(var W in y)W!==&quot;ref&quot;&amp;&amp;(U[W]=y[W])}else U=y;return Pl(c),y=j_(a,c,d,U,M,S),W=W_(),a!==null&amp;&amp;!Vi?(X_(a,c,S),ko(a,c,S)):(En&amp;&amp;W&amp;&amp;A_(c),c.flags|=1,er(a,c,y,S),c.child)}function nT(a,c,d,y,S){if(a===null){var M=d.type;return typeof M==&quot;function&quot;&amp;&amp;!E_(M)&amp;&amp;M.defaultProps===void 0&amp;&amp;d.compare===null?(c.tag=15,c.type=M,iT(a,c,M,y,S)):(a=lp(d.type,null,y,c,c.mode,S),a.ref=c.ref,a.return=c,c.child=a)}if(M=a.child,!mv(a,S)){var U=M.memoizedProps;if(d=d.compare,d=d!==null?d:Fh,d(U,y)&amp;&amp;a.ref===c.ref)return ko(a,c,S)}return c.flags|=1,a=Oo(M,y),a.ref=c.ref,a.return=c,c.child=a}function iT(a,c,d,y,S){if(a!==null){var M=a.memoizedProps;if(Fh(M,y)&amp;&amp;a.ref===c.ref)if(Vi=!1,c.pendingProps=y=M,mv(a,S))(a.flags&amp;131072)!==0&amp;&amp;(Vi=!0);else return c.lanes=a.lanes,ko(a,c,S)}return lv(a,c,d,y,S)}function rT(a,c,d){var y=c.pendingProps,S=y.children,M=a!==null?a.memoizedState:null;if(y.mode===&quot;hidden&quot;){if((c.flags&amp;128)!==0){if(y=M!==null?M.baseLanes|d:d,a!==null){for(S=c.child=a.child,M=0;S!==null;)M=M|S.lanes|S.childLanes,S=S.sibling;c.childLanes=M&amp;~y}else c.childLanes=0,c.child=null;return sT(a,c,y,d)}if((d&amp;536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&amp;&amp;dp(c,M!==null?M.cachePool:null),M!==null?iE(c,M):H_(),WE(c);else return c.lanes=c.childLanes=536870912,sT(a,c,M!==null?M.baseLanes|d:d,d)}else M!==null?(dp(c,M.cachePool),iE(c,M),Ma(),c.memoizedState=null):(a!==null&amp;&amp;dp(c,null),H_(),Ma());return er(a,c,S,d),c.child}function sT(a,c,d,y){var S=L_();return S=S===null?null:{parent:Ii._currentValue,pool:S},c.memoizedState={baseLanes:d,cachePool:S},a!==null&amp;&amp;dp(c,null),H_(),WE(c),a!==null&amp;&amp;Gh(a,c,y,!0),null}function Op(a,c){var d=c.ref;if(d===null)a!==null&amp;&amp;a.ref!==null&amp;&amp;(c.flags|=4194816);else{if(typeof d!=&quot;function&quot;&amp;&amp;typeof d!=&quot;object&quot;)throw Error(i(284));(a===null||a.ref!==d)&amp;&amp;(c.flags|=4194816)}}function lv(a,c,d,y,S){return Pl(c),d=j_(a,c,d,y,void 0,S),y=W_(),a!==null&amp;&amp;!Vi?(X_(a,c,S),ko(a,c,S)):(En&amp;&amp;y&amp;&amp;A_(c),c.flags|=1,er(a,c,d,S),c.child)}function oT(a,c,d,y,S,M){return Pl(c),c.updateQueue=null,d=sE(c,y,d,S),rE(a),y=W_(),a!==null&amp;&amp;!Vi?(X_(a,c,M),ko(a,c,M)):(En&amp;&amp;y&amp;&amp;A_(c),c.flags|=1,er(a,c,d,M),c.child)}function aT(a,c,d,y,S){if(Pl(c),c.stateNode===null){var M=qc,U=d.contextType;typeof U==&quot;object&quot;&amp;&amp;U!==null&amp;&amp;(M=sr(U)),M=new d(y,M),c.memoizedState=M.state!==null&amp;&amp;M.state!==void 0?M.state:null,M.updater=ov,c.stateNode=M,M._reactInternals=c,M=c.stateNode,M.props=y,M.state=c.memoizedState,M.refs={},k_(c),U=d.contextType,M.context=typeof U==&quot;object&quot;&amp;&amp;U!==null?sr(U):qc,M.state=c.memoizedState,U=d.getDerivedStateFromProps,typeof U==&quot;function&quot;&amp;&amp;(sv(c,d,U,y),M.state=c.memoizedState),typeof d.getDerivedStateFromProps==&quot;function&quot;||typeof M.getSnapshotBeforeUpdate==&quot;function&quot;||typeof M.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof M.componentWillMount!=&quot;function&quot;||(U=M.state,typeof M.componentWillMount==&quot;function&quot;&amp;&amp;M.componentWillMount(),typeof M.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;M.UNSAFE_componentWillMount(),U!==M.state&amp;&amp;ov.enqueueReplaceState(M,M.state,null),$h(c,y,M,S),Kh(),M.state=c.memoizedState),typeof M.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308),y=!0}else if(a===null){M=c.stateNode;var W=c.memoizedProps,se=kl(d,W);M.props=se;var _e=M.context,De=d.contextType;U=qc,typeof De==&quot;object&quot;&amp;&amp;De!==null&amp;&amp;(U=sr(De));var ke=d.getDerivedStateFromProps;De=typeof ke==&quot;function&quot;||typeof M.getSnapshotBeforeUpdate==&quot;function&quot;,W=c.pendingProps!==W,De||typeof M.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof M.componentWillReceiveProps!=&quot;function&quot;||(W||_e!==U)&amp;&amp;qE(c,M,y,U),xa=!1;var xe=c.memoizedState;M.state=xe,$h(c,y,M,S),Kh(),_e=c.memoizedState,W||xe!==_e||xa?(typeof ke==&quot;function&quot;&amp;&amp;(sv(c,d,ke,y),_e=c.memoizedState),(se=xa||XE(c,d,se,y,xe,_e,U))?(De||typeof M.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof M.componentWillMount!=&quot;function&quot;||(typeof M.componentWillMount==&quot;function&quot;&amp;&amp;M.componentWillMount(),typeof M.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;M.UNSAFE_componentWillMount()),typeof M.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308)):(typeof M.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=_e),M.props=y,M.state=_e,M.context=U,y=se):(typeof M.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308),y=!1)}else{M=c.stateNode,F_(a,c),U=c.memoizedProps,De=kl(d,U),M.props=De,ke=c.pendingProps,xe=M.context,_e=d.contextType,se=qc,typeof _e==&quot;object&quot;&amp;&amp;_e!==null&amp;&amp;(se=sr(_e)),W=d.getDerivedStateFromProps,(_e=typeof W==&quot;function&quot;||typeof M.getSnapshotBeforeUpdate==&quot;function&quot;)||typeof M.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof M.componentWillReceiveProps!=&quot;function&quot;||(U!==ke||xe!==se)&amp;&amp;qE(c,M,y,se),xa=!1,xe=c.memoizedState,M.state=xe,$h(c,y,M,S),Kh();var Ee=c.memoizedState;U!==ke||xe!==Ee||xa||a!==null&amp;&amp;a.dependencies!==null&amp;&amp;hp(a.dependencies)?(typeof W==&quot;function&quot;&amp;&amp;(sv(c,d,W,y),Ee=c.memoizedState),(De=xa||XE(c,d,De,y,xe,Ee,se)||a!==null&amp;&amp;a.dependencies!==null&amp;&amp;hp(a.dependencies))?(_e||typeof M.UNSAFE_componentWillUpdate!=&quot;function&quot;&amp;&amp;typeof M.componentWillUpdate!=&quot;function&quot;||(typeof M.componentWillUpdate==&quot;function&quot;&amp;&amp;M.componentWillUpdate(y,Ee,se),typeof M.UNSAFE_componentWillUpdate==&quot;function&quot;&amp;&amp;M.UNSAFE_componentWillUpdate(y,Ee,se)),typeof M.componentDidUpdate==&quot;function&quot;&amp;&amp;(c.flags|=4),typeof M.getSnapshotBeforeUpdate==&quot;function&quot;&amp;&amp;(c.flags|=1024)):(typeof M.componentDidUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=4),typeof M.getSnapshotBeforeUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Ee),M.props=y,M.state=Ee,M.context=se,y=De):(typeof M.componentDidUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=4),typeof M.getSnapshotBeforeUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=1024),y=!1)}return M=y,Op(a,c),y=(c.flags&amp;128)!==0,M||y?(M=c.stateNode,d=y&amp;&amp;typeof d.getDerivedStateFromError!=&quot;function&quot;?null:M.render(),c.flags|=1,a!==null&amp;&amp;y?(c.child=iu(c,a.child,null,S),c.child=iu(c,null,d,S)):er(a,c,d,S),c.memoizedState=M.state,a=c.child):a=ko(a,c,S),a}function lT(a,c,d,y){return Hh(),c.flags|=256,er(a,c,d,y),c.child}var cv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uv(a){return{baseLanes:a,cachePool:K1()}}function hv(a,c,d){return a=a!==null?a.childLanes&amp;~d:0,c&amp;&amp;(a|=ds),a}function cT(a,c,d){var y=c.pendingProps,S=!1,M=(c.flags&amp;128)!==0,U;if((U=M)||(U=a!==null&amp;&amp;a.memoizedState===null?!1:(Pi.current&amp;2)!==0),U&amp;&amp;(S=!0,c.flags&amp;=-129),U=(c.flags&amp;32)!==0,c.flags&amp;=-33,a===null){if(En){if(S?Ta(c):Ma(),En){var W=li,se;if(se=W){e:{for(se=W,W=no;se.nodeType!==8;){if(!W){W=null;break e}if(se=Ps(se.nextSibling),se===null){W=null;break e}}W=se}W!==null?(c.memoizedState={dehydrated:W,treeContext:Rl!==null?{id:Do,overflow:No}:null,retryLane:536870912,hydrationErrors:null},se=Hr(18,null,null,0),se.stateNode=W,se.return=c,c.child=se,dr=c,li=null,se=!0):se=!1}se||Nl(c)}if(W=c.memoizedState,W!==null&amp;&amp;(W=W.dehydrated,W!==null))return Yv(W)?c.lanes=32:c.lanes=536870912,null;Uo(c)}return W=y.children,y=y.fallback,S?(Ma(),S=c.mode,W=Dp({mode:&quot;hidden&quot;,children:W},S),y=Cl(y,S,d,null),W.return=c,y.return=c,W.sibling=y,c.child=W,S=c.child,S.memoizedState=uv(d),S.childLanes=hv(a,U,d),c.memoizedState=cv,y):(Ta(c),fv(c,W))}if(se=a.memoizedState,se!==null&amp;&amp;(W=se.dehydrated,W!==null)){if(M)c.flags&amp;256?(Ta(c),c.flags&amp;=-257,c=dv(a,c,d)):c.memoizedState!==null?(Ma(),c.child=a.child,c.flags|=128,c=null):(Ma(),S=y.fallback,W=c.mode,y=Dp({mode:&quot;visible&quot;,children:y.children},W),S=Cl(S,W,d,null),S.flags|=2,y.return=c,S.return=c,y.sibling=S,c.child=y,iu(c,a.child,null,d),y=c.child,y.memoizedState=uv(d),y.childLanes=hv(a,U,d),c.memoizedState=cv,c=S);else if(Ta(c),Yv(W)){if(U=W.nextSibling&amp;&amp;W.nextSibling.dataset,U)var _e=U.dgst;U=_e,y=Error(i(419)),y.stack=&quot;&quot;,y.digest=U,Vh({value:y,source:null,stack:null}),c=dv(a,c,d)}else if(Vi||Gh(a,c,d,!1),U=(d&amp;a.childLanes)!==0,Vi||U){if(U=Vn,U!==null&amp;&amp;(y=d&amp;-d,y=(y&amp;42)!==0?1:wn(y),y=(y&amp;(U.suspendedLanes|d))!==0?0:y,y!==0&amp;&amp;y!==se.retryLane))throw se.retryLane=y,Xc(a,y),Xr(U,a,y),eT;W.data===&quot;$?&quot;||Dv(),c=dv(a,c,d)}else W.data===&quot;$?&quot;?(c.flags|=192,c.child=a.child,c=null):(a=se.treeContext,li=Ps(W.nextSibling),dr=c,En=!0,Dl=null,no=!1,a!==null&amp;&amp;(us[hs++]=Do,us[hs++]=No,us[hs++]=Rl,Do=a.id,No=a.overflow,Rl=c),c=fv(c,y.children),c.flags|=4096);return c}return S?(Ma(),S=y.fallback,W=c.mode,se=a.child,_e=se.sibling,y=Oo(se,{mode:&quot;hidden&quot;,children:y.children}),y.subtreeFlags=se.subtreeFlags&amp;65011712,_e!==null?S=Oo(_e,S):(S=Cl(S,W,d,null),S.flags|=2),S.return=c,y.return=c,y.sibling=S,c.child=y,y=S,S=c.child,W=a.child.memoizedState,W===null?W=uv(d):(se=W.cachePool,se!==null?(_e=Ii._currentValue,se=se.parent!==_e?{parent:_e,pool:_e}:se):se=K1(),W={baseLanes:W.baseLanes|d,cachePool:se}),S.memoizedState=W,S.childLanes=hv(a,U,d),c.memoizedState=cv,y):(Ta(c),d=a.child,a=d.sibling,d=Oo(d,{mode:&quot;visible&quot;,children:y.children}),d.return=c,d.sibling=null,a!==null&amp;&amp;(U=c.deletions,U===null?(c.deletions=[a],c.flags|=16):U.push(a)),c.child=d,c.memoizedState=null,d)}function fv(a,c){return c=Dp({mode:&quot;visible&quot;,children:c},a.mode),c.return=a,a.child=c}function Dp(a,c){return a=Hr(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function dv(a,c,d){return iu(c,a.child,null,d),a=fv(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function uT(a,c,d){a.lanes|=c;var y=a.alternate;y!==null&amp;&amp;(y.lanes|=c),D_(a.return,c,d)}function pv(a,c,d,y,S){var M=a.memoizedState;M===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:S}:(M.isBackwards=c,M.rendering=null,M.renderingStartTime=0,M.last=y,M.tail=d,M.tailMode=S)}function hT(a,c,d){var y=c.pendingProps,S=y.revealOrder,M=y.tail;if(er(a,c,y.children,d),y=Pi.current,(y&amp;2)!==0)y=y&amp;1|2,c.flags|=128;else{if(a!==null&amp;&amp;(a.flags&amp;128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&amp;&amp;uT(a,d,c);else if(a.tag===19)uT(a,d,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&amp;=1}switch(ce(Pi,y),S){case&quot;forwards&quot;:for(d=c.child,S=null;d!==null;)a=d.alternate,a!==null&amp;&amp;Ap(a)===null&amp;&amp;(S=d),d=d.sibling;d=S,d===null?(S=c.child,c.child=null):(S=d.sibling,d.sibling=null),pv(c,!1,S,d,M);break;case&quot;backwards&quot;:for(d=null,S=c.child,c.child=null;S!==null;){if(a=S.alternate,a!==null&amp;&amp;Ap(a)===null){c.child=S;break}a=S.sibling,S.sibling=d,d=S,S=a}pv(c,!0,d,null,M);break;case&quot;together&quot;:pv(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ko(a,c,d){if(a!==null&amp;&amp;(c.dependencies=a.dependencies),Da|=c.lanes,(d&amp;c.childLanes)===0)if(a!==null){if(Gh(a,c,d,!1),(d&amp;c.childLanes)===0)return null}else return null;if(a!==null&amp;&amp;c.child!==a.child)throw Error(i(153));if(c.child!==null){for(a=c.child,d=Oo(a,a.pendingProps),c.child=d,d.return=c;a.sibling!==null;)a=a.sibling,d=d.sibling=Oo(a,a.pendingProps),d.return=c;d.sibling=null}return c.child}function mv(a,c){return(a.lanes&amp;c)!==0?!0:(a=a.dependencies,!!(a!==null&amp;&amp;hp(a)))}function vU(a,c,d){switch(c.tag){case 3:ve(c,c.stateNode.containerInfo),ba(c,Ii,a.memoizedState.cache),Hh();break;case 27:case 5:Xe(c);break;case 4:ve(c,c.stateNode.containerInfo);break;case 10:ba(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(Ta(c),c.flags|=128,null):(d&amp;c.child.childLanes)!==0?cT(a,c,d):(Ta(c),a=ko(a,c,d),a!==null?a.sibling:null);Ta(c);break;case 19:var S=(a.flags&amp;128)!==0;if(y=(d&amp;c.childLanes)!==0,y||(Gh(a,c,d,!1),y=(d&amp;c.childLanes)!==0),S){if(y)return hT(a,c,d);c.flags|=128}if(S=c.memoizedState,S!==null&amp;&amp;(S.rendering=null,S.tail=null,S.lastEffect=null),ce(Pi,Pi.current),y)break;return null;case 22:case 23:return c.lanes=0,rT(a,c,d);case 24:ba(c,Ii,a.memoizedState.cache)}return ko(a,c,d)}function fT(a,c,d){if(a!==null)if(a.memoizedProps!==c.pendingProps)Vi=!0;else{if(!mv(a,d)&amp;&amp;(c.flags&amp;128)===0)return Vi=!1,vU(a,c,d);Vi=(a.flags&amp;131072)!==0}else Vi=!1,En&amp;&amp;(c.flags&amp;1048576)!==0&amp;&amp;V1(c,up,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var y=c.elementType,S=y._init;if(y=S(y._payload),c.type=y,typeof y==&quot;function&quot;)E_(y)?(a=kl(y,a),c.tag=1,c=aT(null,c,y,a,d)):(c.tag=0,c=lv(null,c,y,a,d));else{if(y!=null){if(S=y.$$typeof,S===E){c.tag=11,c=tT(null,c,y,a,d);break e}else if(S===A){c.tag=14,c=nT(null,c,y,a,d);break e}}throw c=z(y)||y,Error(i(306,c,&quot;&quot;))}}return c;case 0:return lv(a,c,c.type,c.pendingProps,d);case 1:return y=c.type,S=kl(y,c.pendingProps),aT(a,c,y,S,d);case 3:e:{if(ve(c,c.stateNode.containerInfo),a===null)throw Error(i(387));y=c.pendingProps;var M=c.memoizedState;S=M.element,F_(a,c),$h(c,y,null,d);var U=c.memoizedState;if(y=U.cache,ba(c,Ii,y),y!==M.cache&amp;&amp;N_(c,[Ii],d,!0),Kh(),y=U.element,M.isDehydrated)if(M={element:y,isDehydrated:!1,cache:U.cache},c.updateQueue.baseState=M,c.memoizedState=M,c.flags&amp;256){c=lT(a,c,y,d);break e}else if(y!==S){S=ls(Error(i(424)),c),Vh(S),c=lT(a,c,y,d);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName===&quot;HTML&quot;?a.ownerDocument.body:a}for(li=Ps(a.firstChild),dr=c,En=!0,Dl=null,no=!0,d=jE(c,null,y,d),c.child=d;d;)d.flags=d.flags&amp;-3|4096,d=d.sibling}else{if(Hh(),y===S){c=ko(a,c,d);break e}er(a,c,y,d)}c=c.child}return c;case 26:return Op(a,c),a===null?(d=gM(c.type,null,c.pendingProps,null))?c.memoizedState=d:En||(d=c.type,a=c.pendingProps,y=Wp(ae.current).createElement(d),y[Zn]=c,y[pi]=a,nr(y,d,a),Wn(y),c.stateNode=y):c.memoizedState=gM(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Xe(c),a===null&amp;&amp;En&amp;&amp;(y=c.stateNode=dM(c.type,c.pendingProps,ae.current),dr=c,no=!0,S=li,La(c.type)?(Kv=S,li=Ps(y.firstChild)):li=S),er(a,c,c.pendingProps.children,d),Op(a,c),a===null&amp;&amp;(c.flags|=4194304),c.child;case 5:return a===null&amp;&amp;En&amp;&amp;((S=y=li)&amp;&amp;(y=qU(y,c.type,c.pendingProps,no),y!==null?(c.stateNode=y,dr=c,li=Ps(y.firstChild),no=!1,S=!0):S=!1),S||Nl(c)),Xe(c),S=c.type,M=c.pendingProps,U=a!==null?a.memoizedProps:null,y=M.children,Wv(S,M)?y=null:U!==null&amp;&amp;Wv(S,U)&amp;&amp;(c.flags|=32),c.memoizedState!==null&amp;&amp;(S=j_(a,c,hU,null,null,d),vf._currentValue=S),Op(a,c),er(a,c,y,d),c.child;case 6:return a===null&amp;&amp;En&amp;&amp;((a=d=li)&amp;&amp;(d=YU(d,c.pendingProps,no),d!==null?(c.stateNode=d,dr=c,li=null,a=!0):a=!1),a||Nl(c)),null;case 13:return cT(a,c,d);case 4:return ve(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=iu(c,null,y,d):er(a,c,y,d),c.child;case 11:return tT(a,c,c.type,c.pendingProps,d);case 7:return er(a,c,c.pendingProps,d),c.child;case 8:return er(a,c,c.pendingProps.children,d),c.child;case 12:return er(a,c,c.pendingProps.children,d),c.child;case 10:return y=c.pendingProps,ba(c,c.type,y.value),er(a,c,y.children,d),c.child;case 9:return S=c.type._context,y=c.pendingProps.children,Pl(c),S=sr(S),y=y(S),c.flags|=1,er(a,c,y,d),c.child;case 14:return nT(a,c,c.type,c.pendingProps,d);case 15:return iT(a,c,c.type,c.pendingProps,d);case 19:return hT(a,c,d);case 31:return y=c.pendingProps,d=c.mode,y={mode:y.mode,children:y.children},a===null?(d=Dp(y,d),d.ref=c.ref,c.child=d,d.return=c,c=d):(d=Oo(a.child,y),d.ref=c.ref,c.child=d,d.return=c,c=d),c;case 22:return rT(a,c,d);case 24:return Pl(c),y=sr(Ii),a===null?(S=L_(),S===null&amp;&amp;(S=Vn,M=I_(),S.pooledCache=M,M.refCount++,M!==null&amp;&amp;(S.pooledCacheLanes|=d),S=M),c.memoizedState={parent:y,cache:S},k_(c),ba(c,Ii,S)):((a.lanes&amp;d)!==0&amp;&amp;(F_(a,c),$h(c,null,null,d),Kh()),S=a.memoizedState,M=c.memoizedState,S.parent!==y?(S={parent:y,cache:y},c.memoizedState=S,c.lanes===0&amp;&amp;(c.memoizedState=c.updateQueue.baseState=S),ba(c,Ii,y)):(y=M.cache,ba(c,Ii,y),y!==S.cache&amp;&amp;N_(c,[Ii],d,!0))),er(a,c,c.pendingProps.children,d),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Fo(a){a.flags|=4}function dT(a,c){if(c.type!==&quot;stylesheet&quot;||(c.state.loading&amp;4)!==0)a.flags&amp;=-16777217;else if(a.flags|=16777216,!xM(c)){if(c=fs.current,c!==null&amp;&amp;((pn&amp;4194048)===pn?io!==null:(pn&amp;62914560)!==pn&amp;&amp;(pn&amp;536870912)===0||c!==io))throw qh=U_,$1;a.flags|=8192}}function Np(a,c){c!==null&amp;&amp;(a.flags|=4),a.flags&amp;16384&amp;&amp;(c=a.tag!==22?tt():536870912,a.lanes|=c,au|=c)}function rf(a,c){if(!En)switch(a.tailMode){case&quot;hidden&quot;:c=a.tail;for(var d=null;c!==null;)c.alternate!==null&amp;&amp;(d=c),c=c.sibling;d===null?a.tail=null:d.sibling=null;break;case&quot;collapsed&quot;:d=a.tail;for(var y=null;d!==null;)d.alternate!==null&amp;&amp;(y=d),d=d.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function ti(a){var c=a.alternate!==null&amp;&amp;a.alternate.child===a.child,d=0,y=0;if(c)for(var S=a.child;S!==null;)d|=S.lanes|S.childLanes,y|=S.subtreeFlags&amp;65011712,y|=S.flags&amp;65011712,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)d|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=y,a.childLanes=d,c}function bU(a,c,d){var y=c.pendingProps;switch(C_(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(c),null;case 1:return ti(c),null;case 3:return d=c.stateNode,y=null,a!==null&amp;&amp;(y=a.memoizedState.cache),c.memoizedState.cache!==y&amp;&amp;(c.flags|=2048),Po(Ii),He(),d.pendingContext&amp;&amp;(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&amp;&amp;(Bh(c)?Fo(c):a===null||a.memoizedState.isDehydrated&amp;&amp;(c.flags&amp;256)===0||(c.flags|=1024,W1())),ti(c),null;case 26:return d=c.memoizedState,a===null?(Fo(c),d!==null?(ti(c),dT(c,d)):(ti(c),c.flags&amp;=-16777217)):d?d!==a.memoizedState?(Fo(c),ti(c),dT(c,d)):(ti(c),c.flags&amp;=-16777217):(a.memoizedProps!==y&amp;&amp;Fo(c),ti(c),c.flags&amp;=-16777217),null;case 27:lt(c),d=ae.current;var S=c.type;if(a!==null&amp;&amp;c.stateNode!=null)a.memoizedProps!==y&amp;&amp;Fo(c);else{if(!y){if(c.stateNode===null)throw Error(i(166));return ti(c),null}a=ie.current,Bh(c)?G1(c):(a=dM(S,y,d),c.stateNode=a,Fo(c))}return ti(c),null;case 5:if(lt(c),d=c.type,a!==null&amp;&amp;c.stateNode!=null)a.memoizedProps!==y&amp;&amp;Fo(c);else{if(!y){if(c.stateNode===null)throw Error(i(166));return ti(c),null}if(a=ie.current,Bh(c))G1(c);else{switch(S=Wp(ae.current),a){case 1:a=S.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,d);break;case 2:a=S.createElementNS(&quot;http://www.w3.org/1998/Math/MathML&quot;,d);break;default:switch(d){case&quot;svg&quot;:a=S.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,d);break;case&quot;math&quot;:a=S.createElementNS(&quot;http://www.w3.org/1998/Math/MathML&quot;,d);break;case&quot;script&quot;:a=S.createElement(&quot;div&quot;),a.innerHTML=&quot;&lt;script&gt;&lt;\/script&gt;&quot;,a=a.removeChild(a.firstChild);break;case&quot;select&quot;:a=typeof y.is==&quot;string&quot;?S.createElement(&quot;select&quot;,{is:y.is}):S.createElement(&quot;select&quot;),y.multiple?a.multiple=!0:y.size&amp;&amp;(a.size=y.size);break;default:a=typeof y.is==&quot;string&quot;?S.createElement(d,{is:y.is}):S.createElement(d)}}a[Zn]=c,a[pi]=y;e:for(S=c.child;S!==null;){if(S.tag===5||S.tag===6)a.appendChild(S.stateNode);else if(S.tag!==4&amp;&amp;S.tag!==27&amp;&amp;S.child!==null){S.child.return=S,S=S.child;continue}if(S===c)break e;for(;S.sibling===null;){if(S.return===null||S.return===c)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}c.stateNode=a;e:switch(nr(a,d,y),d){case&quot;button&quot;:case&quot;input&quot;:case&quot;select&quot;:case&quot;textarea&quot;:a=!!y.autoFocus;break e;case&quot;img&quot;:a=!0;break e;default:a=!1}a&amp;&amp;Fo(c)}}return ti(c),c.flags&amp;=-16777217,null;case 6:if(a&amp;&amp;c.stateNode!=null)a.memoizedProps!==y&amp;&amp;Fo(c);else{if(typeof y!=&quot;string&quot;&amp;&amp;c.stateNode===null)throw Error(i(166));if(a=ae.current,Bh(c)){if(a=c.stateNode,d=c.memoizedProps,y=null,S=dr,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}a[Zn]=c,a=!!(a.nodeValue===d||y!==null&amp;&amp;y.suppressHydrationWarning===!0||oM(a.nodeValue,d)),a||Nl(c)}else a=Wp(a).createTextNode(y),a[Zn]=c,c.stateNode=a}return ti(c),null;case 13:if(y=c.memoizedState,a===null||a.memoizedState!==null&amp;&amp;a.memoizedState.dehydrated!==null){if(S=Bh(c),y!==null&amp;&amp;y.dehydrated!==null){if(a===null){if(!S)throw Error(i(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[Zn]=c}else Hh(),(c.flags&amp;128)===0&amp;&amp;(c.memoizedState=null),c.flags|=4;ti(c),S=!1}else S=W1(),a!==null&amp;&amp;a.memoizedState!==null&amp;&amp;(a.memoizedState.hydrationErrors=S),S=!0;if(!S)return c.flags&amp;256?(Uo(c),c):(Uo(c),null)}if(Uo(c),(c.flags&amp;128)!==0)return c.lanes=d,c;if(d=y!==null,a=a!==null&amp;&amp;a.memoizedState!==null,d){y=c.child,S=null,y.alternate!==null&amp;&amp;y.alternate.memoizedState!==null&amp;&amp;y.alternate.memoizedState.cachePool!==null&amp;&amp;(S=y.alternate.memoizedState.cachePool.pool);var M=null;y.memoizedState!==null&amp;&amp;y.memoizedState.cachePool!==null&amp;&amp;(M=y.memoizedState.cachePool.pool),M!==S&amp;&amp;(y.flags|=2048)}return d!==a&amp;&amp;d&amp;&amp;(c.child.flags|=8192),Np(c,c.updateQueue),ti(c),null;case 4:return He(),a===null&amp;&amp;Bv(c.stateNode.containerInfo),ti(c),null;case 10:return Po(c.type),ti(c),null;case 19:if(le(Pi),S=c.memoizedState,S===null)return ti(c),null;if(y=(c.flags&amp;128)!==0,M=S.rendering,M===null)if(y)rf(S,!1);else{if(ci!==0||a!==null&amp;&amp;(a.flags&amp;128)!==0)for(a=c.child;a!==null;){if(M=Ap(a),M!==null){for(c.flags|=128,rf(S,!1),a=M.updateQueue,c.updateQueue=a,Np(c,a),c.subtreeFlags=0,a=d,d=c.child;d!==null;)H1(d,a),d=d.sibling;return ce(Pi,Pi.current&amp;1|2),c.child}a=a.sibling}S.tail!==null&amp;&amp;Fe()&gt;Lp&amp;&amp;(c.flags|=128,y=!0,rf(S,!1),c.lanes=4194304)}else{if(!y)if(a=Ap(M),a!==null){if(c.flags|=128,y=!0,a=a.updateQueue,c.updateQueue=a,Np(c,a),rf(S,!0),S.tail===null&amp;&amp;S.tailMode===&quot;hidden&quot;&amp;&amp;!M.alternate&amp;&amp;!En)return ti(c),null}else 2*Fe()-S.renderingStartTime&gt;Lp&amp;&amp;d!==536870912&amp;&amp;(c.flags|=128,y=!0,rf(S,!1),c.lanes=4194304);S.isBackwards?(M.sibling=c.child,c.child=M):(a=S.last,a!==null?a.sibling=M:c.child=M,S.last=M)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=Fe(),c.sibling=null,a=Pi.current,ce(Pi,y?a&amp;1|2:a&amp;1),c):(ti(c),null);case 22:case 23:return Uo(c),V_(),y=c.memoizedState!==null,a!==null?a.memoizedState!==null!==y&amp;&amp;(c.flags|=8192):y&amp;&amp;(c.flags|=8192),y?(d&amp;536870912)!==0&amp;&amp;(c.flags&amp;128)===0&amp;&amp;(ti(c),c.subtreeFlags&amp;6&amp;&amp;(c.flags|=8192)):ti(c),d=c.updateQueue,d!==null&amp;&amp;Np(c,d.retryQueue),d=null,a!==null&amp;&amp;a.memoizedState!==null&amp;&amp;a.memoizedState.cachePool!==null&amp;&amp;(d=a.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&amp;&amp;c.memoizedState.cachePool!==null&amp;&amp;(y=c.memoizedState.cachePool.pool),y!==d&amp;&amp;(c.flags|=2048),a!==null&amp;&amp;le(Ll),null;case 24:return d=null,a!==null&amp;&amp;(d=a.memoizedState.cache),c.memoizedState.cache!==d&amp;&amp;(c.flags|=2048),Po(Ii),ti(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function xU(a,c){switch(C_(c),c.tag){case 1:return a=c.flags,a&amp;65536?(c.flags=a&amp;-65537|128,c):null;case 3:return Po(Ii),He(),a=c.flags,(a&amp;65536)!==0&amp;&amp;(a&amp;128)===0?(c.flags=a&amp;-65537|128,c):null;case 26:case 27:case 5:return lt(c),null;case 13:if(Uo(c),a=c.memoizedState,a!==null&amp;&amp;a.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Hh()}return a=c.flags,a&amp;65536?(c.flags=a&amp;-65537|128,c):null;case 19:return le(Pi),null;case 4:return He(),null;case 10:return Po(c.type),null;case 22:case 23:return Uo(c),V_(),a!==null&amp;&amp;le(Ll),a=c.flags,a&amp;65536?(c.flags=a&amp;-65537|128,c):null;case 24:return Po(Ii),null;case 25:return null;default:return null}}function pT(a,c){switch(C_(c),c.tag){case 3:Po(Ii),He();break;case 26:case 27:case 5:lt(c);break;case 4:He();break;case 13:Uo(c);break;case 19:le(Pi);break;case 10:Po(c.type);break;case 22:case 23:Uo(c),V_(),a!==null&amp;&amp;le(Ll);break;case 24:Po(Ii)}}function sf(a,c){try{var d=c.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var S=y.next;d=S;do{if((d.tag&amp;a)===a){y=void 0;var M=d.create,U=d.inst;y=M(),U.destroy=y}d=d.next}while(d!==S)}}catch(W){zn(c,c.return,W)}}function Aa(a,c,d){try{var y=c.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var M=S.next;y=M;do{if((y.tag&amp;a)===a){var U=y.inst,W=U.destroy;if(W!==void 0){U.destroy=void 0,S=c;var se=d,_e=W;try{_e()}catch(De){zn(S,se,De)}}}y=y.next}while(y!==M)}}catch(De){zn(c,c.return,De)}}function mT(a){var c=a.updateQueue;if(c!==null){var d=a.stateNode;try{nE(c,d)}catch(y){zn(a,a.return,y)}}}function gT(a,c,d){d.props=kl(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(y){zn(a,c,y)}}function of(a,c){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof d==&quot;function&quot;?a.refCleanup=d(y):d.current=y}}catch(S){zn(a,c,S)}}function ro(a,c){var d=a.ref,y=a.refCleanup;if(d!==null)if(typeof y==&quot;function&quot;)try{y()}catch(S){zn(a,c,S)}finally{a.refCleanup=null,a=a.alternate,a!=null&amp;&amp;(a.refCleanup=null)}else if(typeof d==&quot;function&quot;)try{d(null)}catch(S){zn(a,c,S)}else d.current=null}function yT(a){var c=a.type,d=a.memoizedProps,y=a.stateNode;try{e:switch(c){case&quot;button&quot;:case&quot;input&quot;:case&quot;select&quot;:case&quot;textarea&quot;:d.autoFocus&amp;&amp;y.focus();break e;case&quot;img&quot;:d.src?y.src=d.src:d.srcSet&amp;&amp;(y.srcset=d.srcSet)}}catch(S){zn(a,a.return,S)}}function gv(a,c,d){try{var y=a.stateNode;VU(y,a.type,d,c),y[pi]=c}catch(S){zn(a,a.return,S)}}function _T(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&amp;&amp;La(a.type)||a.tag===4}function yv(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||_T(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&amp;&amp;a.tag!==6&amp;&amp;a.tag!==18;){if(a.tag===27&amp;&amp;La(a.type)||a.flags&amp;2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&amp;2))return a.stateNode}}function _v(a,c,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?(d.nodeType===9?d.body:d.nodeName===&quot;HTML&quot;?d.ownerDocument.body:d).insertBefore(a,c):(c=d.nodeType===9?d.body:d.nodeName===&quot;HTML&quot;?d.ownerDocument.body:d,c.appendChild(a),d=d._reactRootContainer,d!=null||c.onclick!==null||(c.onclick=jp));else if(y!==4&amp;&amp;(y===27&amp;&amp;La(a.type)&amp;&amp;(d=a.stateNode,c=null),a=a.child,a!==null))for(_v(a,c,d),a=a.sibling;a!==null;)_v(a,c,d),a=a.sibling}function Ip(a,c,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?d.insertBefore(a,c):d.appendChild(a);else if(y!==4&amp;&amp;(y===27&amp;&amp;La(a.type)&amp;&amp;(d=a.stateNode),a=a.child,a!==null))for(Ip(a,c,d),a=a.sibling;a!==null;)Ip(a,c,d),a=a.sibling}function vT(a){var c=a.stateNode,d=a.memoizedProps;try{for(var y=a.type,S=c.attributes;S.length;)c.removeAttributeNode(S[0]);nr(c,y,d),c[Zn]=a,c[pi]=d}catch(M){zn(a,a.return,M)}}var zo=!1,yi=!1,vv=!1,bT=typeof WeakSet==&quot;function&quot;?WeakSet:Set,Gi=null;function SU(a,c){if(a=a.containerInfo,Gv=Zp,a=D1(a),y_(a)){if(&quot;selectionStart&quot;in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&amp;&amp;d.defaultView||window;var y=d.getSelection&amp;&amp;d.getSelection();if(y&amp;&amp;y.rangeCount!==0){d=y.anchorNode;var S=y.anchorOffset,M=y.focusNode;y=y.focusOffset;try{d.nodeType,M.nodeType}catch{d=null;break e}var U=0,W=-1,se=-1,_e=0,De=0,ke=a,xe=null;t:for(;;){for(var Ee;ke!==d||S!==0&amp;&amp;ke.nodeType!==3||(W=U+S),ke!==M||y!==0&amp;&amp;ke.nodeType!==3||(se=U+y),ke.nodeType===3&amp;&amp;(U+=ke.nodeValue.length),(Ee=ke.firstChild)!==null;)xe=ke,ke=Ee;for(;;){if(ke===a)break t;if(xe===d&amp;&amp;++_e===S&amp;&amp;(W=U),xe===M&amp;&amp;++De===y&amp;&amp;(se=U),(Ee=ke.nextSibling)!==null)break;ke=xe,xe=ke.parentNode}ke=Ee}d=W===-1||se===-1?null:{start:W,end:se}}else d=null}d=d||{start:0,end:0}}else d=null;for(jv={focusedElem:a,selectionRange:d},Zp=!1,Gi=c;Gi!==null;)if(c=Gi,a=c.child,(c.subtreeFlags&amp;1024)!==0&amp;&amp;a!==null)a.return=c,Gi=a;else for(;Gi!==null;){switch(c=Gi,M=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&amp;1024)!==0&amp;&amp;M!==null){a=void 0,d=c,S=M.memoizedProps,M=M.memoizedState,y=d.stateNode;try{var kt=kl(d.type,S,d.elementType===d.type);a=y.getSnapshotBeforeUpdate(kt,M),y.__reactInternalSnapshotBeforeUpdate=a}catch(Nt){zn(d,d.return,Nt)}}break;case 3:if((a&amp;1024)!==0){if(a=c.stateNode.containerInfo,d=a.nodeType,d===9)qv(a);else if(d===1)switch(a.nodeName){case&quot;HEAD&quot;:case&quot;HTML&quot;:case&quot;BODY&quot;:qv(a);break;default:a.textContent=&quot;&quot;}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&amp;1024)!==0)throw Error(i(163))}if(a=c.sibling,a!==null){a.return=c.return,Gi=a;break}Gi=c.return}}function xT(a,c,d){var y=d.flags;switch(d.tag){case 0:case 11:case 15:Ca(a,d),y&amp;4&amp;&amp;sf(5,d);break;case 1:if(Ca(a,d),y&amp;4)if(a=d.stateNode,c===null)try{a.componentDidMount()}catch(U){zn(d,d.return,U)}else{var S=kl(d.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(S,c,a.__reactInternalSnapshotBeforeUpdate)}catch(U){zn(d,d.return,U)}}y&amp;64&amp;&amp;mT(d),y&amp;512&amp;&amp;of(d,d.return);break;case 3:if(Ca(a,d),y&amp;64&amp;&amp;(a=d.updateQueue,a!==null)){if(c=null,d.child!==null)switch(d.child.tag){case 27:case 5:c=d.child.stateNode;break;case 1:c=d.child.stateNode}try{nE(a,c)}catch(U){zn(d,d.return,U)}}break;case 27:c===null&amp;&amp;y&amp;4&amp;&amp;vT(d);case 26:case 5:Ca(a,d),c===null&amp;&amp;y&amp;4&amp;&amp;yT(d),y&amp;512&amp;&amp;of(d,d.return);break;case 12:Ca(a,d);break;case 13:Ca(a,d),y&amp;4&amp;&amp;ET(a,d),y&amp;64&amp;&amp;(a=d.memoizedState,a!==null&amp;&amp;(a=a.dehydrated,a!==null&amp;&amp;(d=DU.bind(null,d),KU(a,d))));break;case 22:if(y=d.memoizedState!==null||zo,!y){c=c!==null&amp;&amp;c.memoizedState!==null||yi,S=zo;var M=yi;zo=y,(yi=c)&amp;&amp;!M?Ra(a,d,(d.subtreeFlags&amp;8772)!==0):Ca(a,d),zo=S,yi=M}break;case 30:break;default:Ca(a,d)}}function ST(a){var c=a.alternate;c!==null&amp;&amp;(a.alternate=null,ST(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&amp;&amp;(c=a.stateNode,c!==null&amp;&amp;os(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Xn=null,Cr=!1;function Bo(a,c,d){for(d=d.child;d!==null;)wT(a,c,d),d=d.sibling}function wT(a,c,d){if(Ze&amp;&amp;typeof Ze.onCommitFiberUnmount==&quot;function&quot;)try{Ze.onCommitFiberUnmount(Me,d)}catch{}switch(d.tag){case 26:yi||ro(d,c),Bo(a,c,d),d.memoizedState?d.memoizedState.count--:d.stateNode&amp;&amp;(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:yi||ro(d,c);var y=Xn,S=Cr;La(d.type)&amp;&amp;(Xn=d.stateNode,Cr=!1),Bo(a,c,d),mf(d.stateNode),Xn=y,Cr=S;break;case 5:yi||ro(d,c);case 6:if(y=Xn,S=Cr,Xn=null,Bo(a,c,d),Xn=y,Cr=S,Xn!==null)if(Cr)try{(Xn.nodeType===9?Xn.body:Xn.nodeName===&quot;HTML&quot;?Xn.ownerDocument.body:Xn).removeChild(d.stateNode)}catch(M){zn(d,c,M)}else try{Xn.removeChild(d.stateNode)}catch(M){zn(d,c,M)}break;case 18:Xn!==null&amp;&amp;(Cr?(a=Xn,hM(a.nodeType===9?a.body:a.nodeName===&quot;HTML&quot;?a.ownerDocument.body:a,d.stateNode),wf(a)):hM(Xn,d.stateNode));break;case 4:y=Xn,S=Cr,Xn=d.stateNode.containerInfo,Cr=!0,Bo(a,c,d),Xn=y,Cr=S;break;case 0:case 11:case 14:case 15:yi||Aa(2,d,c),yi||Aa(4,d,c),Bo(a,c,d);break;case 1:yi||(ro(d,c),y=d.stateNode,typeof y.componentWillUnmount==&quot;function&quot;&amp;&amp;gT(d,c,y)),Bo(a,c,d);break;case 21:Bo(a,c,d);break;case 22:yi=(y=yi)||d.memoizedState!==null,Bo(a,c,d),yi=y;break;default:Bo(a,c,d)}}function ET(a,c){if(c.memoizedState===null&amp;&amp;(a=c.alternate,a!==null&amp;&amp;(a=a.memoizedState,a!==null&amp;&amp;(a=a.dehydrated,a!==null))))try{wf(a)}catch(d){zn(c,c.return,d)}}function wU(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&amp;&amp;(c=a.stateNode=new bT),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&amp;&amp;(c=a._retryCache=new bT),c;default:throw Error(i(435,a.tag))}}function bv(a,c){var d=wU(a);c.forEach(function(y){var S=NU.bind(null,a,y);d.has(y)||(d.add(y),y.then(S,S))})}function Vr(a,c){var d=c.deletions;if(d!==null)for(var y=0;y&lt;d.length;y++){var S=d[y],M=a,U=c,W=U;e:for(;W!==null;){switch(W.tag){case 27:if(La(W.type)){Xn=W.stateNode,Cr=!1;break e}break;case 5:Xn=W.stateNode,Cr=!1;break e;case 3:case 4:Xn=W.stateNode.containerInfo,Cr=!0;break e}W=W.return}if(Xn===null)throw Error(i(160));wT(M,U,S),Xn=null,Cr=!1,M=S.alternate,M!==null&amp;&amp;(M.return=null),S.return=null}if(c.subtreeFlags&amp;13878)for(c=c.child;c!==null;)TT(c,a),c=c.sibling}var Is=null;function TT(a,c){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Vr(c,a),Gr(a),y&amp;4&amp;&amp;(Aa(3,a,a.return),sf(3,a),Aa(5,a,a.return));break;case 1:Vr(c,a),Gr(a),y&amp;512&amp;&amp;(yi||d===null||ro(d,d.return)),y&amp;64&amp;&amp;zo&amp;&amp;(a=a.updateQueue,a!==null&amp;&amp;(y=a.callbacks,y!==null&amp;&amp;(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?y:d.concat(y))));break;case 26:var S=Is;if(Vr(c,a),Gr(a),y&amp;512&amp;&amp;(yi||d===null||ro(d,d.return)),y&amp;4){var M=d!==null?d.memoizedState:null;if(y=a.memoizedState,d===null)if(y===null)if(a.stateNode===null){e:{y=a.type,d=a.memoizedProps,S=S.ownerDocument||S;t:switch(y){case&quot;title&quot;:M=S.getElementsByTagName(&quot;title&quot;)[0],(!M||M[kr]||M[Zn]||M.namespaceURI===&quot;http://www.w3.org/2000/svg&quot;||M.hasAttribute(&quot;itemprop&quot;))&amp;&amp;(M=S.createElement(y),S.head.insertBefore(M,S.querySelector(&quot;head &gt; title&quot;))),nr(M,y,d),M[Zn]=a,Wn(M),y=M;break e;case&quot;link&quot;:var U=vM(&quot;link&quot;,&quot;href&quot;,S).get(y+(d.href||&quot;&quot;));if(U){for(var W=0;W&lt;U.length;W++)if(M=U[W],M.getAttribute(&quot;href&quot;)===(d.href==null||d.href===&quot;&quot;?null:d.href)&amp;&amp;M.getAttribute(&quot;rel&quot;)===(d.rel==null?null:d.rel)&amp;&amp;M.getAttribute(&quot;title&quot;)===(d.title==null?null:d.title)&amp;&amp;M.getAttribute(&quot;crossorigin&quot;)===(d.crossOrigin==null?null:d.crossOrigin)){U.splice(W,1);break t}}M=S.createElement(y),nr(M,y,d),S.head.appendChild(M);break;case&quot;meta&quot;:if(U=vM(&quot;meta&quot;,&quot;content&quot;,S).get(y+(d.content||&quot;&quot;))){for(W=0;W&lt;U.length;W++)if(M=U[W],M.getAttribute(&quot;content&quot;)===(d.content==null?null:&quot;&quot;+d.content)&amp;&amp;M.getAttribute(&quot;name&quot;)===(d.name==null?null:d.name)&amp;&amp;M.getAttribute(&quot;property&quot;)===(d.property==null?null:d.property)&amp;&amp;M.getAttribute(&quot;http-equiv&quot;)===(d.httpEquiv==null?null:d.httpEquiv)&amp;&amp;M.getAttribute(&quot;charset&quot;)===(d.charSet==null?null:d.charSet)){U.splice(W,1);break t}}M=S.createElement(y),nr(M,y,d),S.head.appendChild(M);break;default:throw Error(i(468,y))}M[Zn]=a,Wn(M),y=M}a.stateNode=y}else bM(S,a.type,a.stateNode);else a.stateNode=_M(S,y,a.memoizedProps);else M!==y?(M===null?d.stateNode!==null&amp;&amp;(d=d.stateNode,d.parentNode.removeChild(d)):M.count--,y===null?bM(S,a.type,a.stateNode):_M(S,y,a.memoizedProps)):y===null&amp;&amp;a.stateNode!==null&amp;&amp;gv(a,a.memoizedProps,d.memoizedProps)}break;case 27:Vr(c,a),Gr(a),y&amp;512&amp;&amp;(yi||d===null||ro(d,d.return)),d!==null&amp;&amp;y&amp;4&amp;&amp;gv(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Vr(c,a),Gr(a),y&amp;512&amp;&amp;(yi||d===null||ro(d,d.return)),a.flags&amp;32){S=a.stateNode;try{zr(S,&quot;&quot;)}catch(Ee){zn(a,a.return,Ee)}}y&amp;4&amp;&amp;a.stateNode!=null&amp;&amp;(S=a.memoizedProps,gv(a,S,d!==null?d.memoizedProps:S)),y&amp;1024&amp;&amp;(vv=!0);break;case 6:if(Vr(c,a),Gr(a),y&amp;4){if(a.stateNode===null)throw Error(i(162));y=a.memoizedProps,d=a.stateNode;try{d.nodeValue=y}catch(Ee){zn(a,a.return,Ee)}}break;case 3:if(Yp=null,S=Is,Is=Xp(c.containerInfo),Vr(c,a),Is=S,Gr(a),y&amp;4&amp;&amp;d!==null&amp;&amp;d.memoizedState.isDehydrated)try{wf(c.containerInfo)}catch(Ee){zn(a,a.return,Ee)}vv&amp;&amp;(vv=!1,MT(a));break;case 4:y=Is,Is=Xp(a.stateNode.containerInfo),Vr(c,a),Gr(a),Is=y;break;case 12:Vr(c,a),Gr(a);break;case 13:Vr(c,a),Gr(a),a.child.flags&amp;8192&amp;&amp;a.memoizedState!==null!=(d!==null&amp;&amp;d.memoizedState!==null)&amp;&amp;(Mv=Fe()),y&amp;4&amp;&amp;(y=a.updateQueue,y!==null&amp;&amp;(a.updateQueue=null,bv(a,y)));break;case 22:S=a.memoizedState!==null;var se=d!==null&amp;&amp;d.memoizedState!==null,_e=zo,De=yi;if(zo=_e||S,yi=De||se,Vr(c,a),yi=De,zo=_e,Gr(a),y&amp;8192)e:for(c=a.stateNode,c._visibility=S?c._visibility&amp;-2:c._visibility|1,S&amp;&amp;(d===null||se||zo||yi||Fl(a)),d=null,c=a;;){if(c.tag===5||c.tag===26){if(d===null){se=d=c;try{if(M=se.stateNode,S)U=M.style,typeof U.setProperty==&quot;function&quot;?U.setProperty(&quot;display&quot;,&quot;none&quot;,&quot;important&quot;):U.display=&quot;none&quot;;else{W=se.stateNode;var ke=se.memoizedProps.style,xe=ke!=null&amp;&amp;ke.hasOwnProperty(&quot;display&quot;)?ke.display:null;W.style.display=xe==null||typeof xe==&quot;boolean&quot;?&quot;&quot;:(&quot;&quot;+xe).trim()}}catch(Ee){zn(se,se.return,Ee)}}}else if(c.tag===6){if(d===null){se=c;try{se.stateNode.nodeValue=S?&quot;&quot;:se.memoizedProps}catch(Ee){zn(se,se.return,Ee)}}}else if((c.tag!==22&amp;&amp;c.tag!==23||c.memoizedState===null||c===a)&amp;&amp;c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;d===c&amp;&amp;(d=null),c=c.return}d===c&amp;&amp;(d=null),c.sibling.return=c.return,c=c.sibling}y&amp;4&amp;&amp;(y=a.updateQueue,y!==null&amp;&amp;(d=y.retryQueue,d!==null&amp;&amp;(y.retryQueue=null,bv(a,d))));break;case 19:Vr(c,a),Gr(a),y&amp;4&amp;&amp;(y=a.updateQueue,y!==null&amp;&amp;(a.updateQueue=null,bv(a,y)));break;case 30:break;case 21:break;default:Vr(c,a),Gr(a)}}function Gr(a){var c=a.flags;if(c&amp;2){try{for(var d,y=a.return;y!==null;){if(_T(y)){d=y;break}y=y.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var S=d.stateNode,M=yv(a);Ip(a,M,S);break;case 5:var U=d.stateNode;d.flags&amp;32&amp;&amp;(zr(U,&quot;&quot;),d.flags&amp;=-33);var W=yv(a);Ip(a,W,U);break;case 3:case 4:var se=d.stateNode.containerInfo,_e=yv(a);_v(a,_e,se);break;default:throw Error(i(161))}}catch(De){zn(a,a.return,De)}a.flags&amp;=-3}c&amp;4096&amp;&amp;(a.flags&amp;=-4097)}function MT(a){if(a.subtreeFlags&amp;1024)for(a=a.child;a!==null;){var c=a;MT(c),c.tag===5&amp;&amp;c.flags&amp;1024&amp;&amp;c.stateNode.reset(),a=a.sibling}}function Ca(a,c){if(c.subtreeFlags&amp;8772)for(c=c.child;c!==null;)xT(a,c.alternate,c),c=c.sibling}function Fl(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Aa(4,c,c.return),Fl(c);break;case 1:ro(c,c.return);var d=c.stateNode;typeof d.componentWillUnmount==&quot;function&quot;&amp;&amp;gT(c,c.return,d),Fl(c);break;case 27:mf(c.stateNode);case 26:case 5:ro(c,c.return),Fl(c);break;case 22:c.memoizedState===null&amp;&amp;Fl(c);break;case 30:Fl(c);break;default:Fl(c)}a=a.sibling}}function Ra(a,c,d){for(d=d&amp;&amp;(c.subtreeFlags&amp;8772)!==0,c=c.child;c!==null;){var y=c.alternate,S=a,M=c,U=M.flags;switch(M.tag){case 0:case 11:case 15:Ra(S,M,d),sf(4,M);break;case 1:if(Ra(S,M,d),y=M,S=y.stateNode,typeof S.componentDidMount==&quot;function&quot;)try{S.componentDidMount()}catch(_e){zn(y,y.return,_e)}if(y=M,S=y.updateQueue,S!==null){var W=y.stateNode;try{var se=S.shared.hiddenCallbacks;if(se!==null)for(S.shared.hiddenCallbacks=null,S=0;S&lt;se.length;S++)tE(se[S],W)}catch(_e){zn(y,y.return,_e)}}d&amp;&amp;U&amp;64&amp;&amp;mT(M),of(M,M.return);break;case 27:vT(M);case 26:case 5:Ra(S,M,d),d&amp;&amp;y===null&amp;&amp;U&amp;4&amp;&amp;yT(M),of(M,M.return);break;case 12:Ra(S,M,d);break;case 13:Ra(S,M,d),d&amp;&amp;U&amp;4&amp;&amp;ET(S,M);break;case 22:M.memoizedState===null&amp;&amp;Ra(S,M,d),of(M,M.return);break;case 30:break;default:Ra(S,M,d)}c=c.sibling}}function xv(a,c){var d=null;a!==null&amp;&amp;a.memoizedState!==null&amp;&amp;a.memoizedState.cachePool!==null&amp;&amp;(d=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&amp;&amp;c.memoizedState.cachePool!==null&amp;&amp;(a=c.memoizedState.cachePool.pool),a!==d&amp;&amp;(a!=null&amp;&amp;a.refCount++,d!=null&amp;&amp;jh(d))}function Sv(a,c){a=null,c.alternate!==null&amp;&amp;(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&amp;&amp;(c.refCount++,a!=null&amp;&amp;jh(a))}function so(a,c,d,y){if(c.subtreeFlags&amp;10256)for(c=c.child;c!==null;)AT(a,c,d,y),c=c.sibling}function AT(a,c,d,y){var S=c.flags;switch(c.tag){case 0:case 11:case 15:so(a,c,d,y),S&amp;2048&amp;&amp;sf(9,c);break;case 1:so(a,c,d,y);break;case 3:so(a,c,d,y),S&amp;2048&amp;&amp;(a=null,c.alternate!==null&amp;&amp;(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&amp;&amp;(c.refCount++,a!=null&amp;&amp;jh(a)));break;case 12:if(S&amp;2048){so(a,c,d,y),a=c.stateNode;try{var M=c.memoizedProps,U=M.id,W=M.onPostCommit;typeof W==&quot;function&quot;&amp;&amp;W(U,c.alternate===null?&quot;mount&quot;:&quot;update&quot;,a.passiveEffectDuration,-0)}catch(se){zn(c,c.return,se)}}else so(a,c,d,y);break;case 13:so(a,c,d,y);break;case 23:break;case 22:M=c.stateNode,U=c.alternate,c.memoizedState!==null?M._visibility&amp;2?so(a,c,d,y):af(a,c):M._visibility&amp;2?so(a,c,d,y):(M._visibility|=2,ru(a,c,d,y,(c.subtreeFlags&amp;10256)!==0)),S&amp;2048&amp;&amp;xv(U,c);break;case 24:so(a,c,d,y),S&amp;2048&amp;&amp;Sv(c.alternate,c);break;default:so(a,c,d,y)}}function ru(a,c,d,y,S){for(S=S&amp;&amp;(c.subtreeFlags&amp;10256)!==0,c=c.child;c!==null;){var M=a,U=c,W=d,se=y,_e=U.flags;switch(U.tag){case 0:case 11:case 15:ru(M,U,W,se,S),sf(8,U);break;case 23:break;case 22:var De=U.stateNode;U.memoizedState!==null?De._visibility&amp;2?ru(M,U,W,se,S):af(M,U):(De._visibility|=2,ru(M,U,W,se,S)),S&amp;&amp;_e&amp;2048&amp;&amp;xv(U.alternate,U);break;case 24:ru(M,U,W,se,S),S&amp;&amp;_e&amp;2048&amp;&amp;Sv(U.alternate,U);break;default:ru(M,U,W,se,S)}c=c.sibling}}function af(a,c){if(c.subtreeFlags&amp;10256)for(c=c.child;c!==null;){var d=a,y=c,S=y.flags;switch(y.tag){case 22:af(d,y),S&amp;2048&amp;&amp;xv(y.alternate,y);break;case 24:af(d,y),S&amp;2048&amp;&amp;Sv(y.alternate,y);break;default:af(d,y)}c=c.sibling}}var lf=8192;function su(a){if(a.subtreeFlags&amp;lf)for(a=a.child;a!==null;)CT(a),a=a.sibling}function CT(a){switch(a.tag){case 26:su(a),a.flags&amp;lf&amp;&amp;a.memoizedState!==null&amp;&amp;lk(Is,a.memoizedState,a.memoizedProps);break;case 5:su(a);break;case 3:case 4:var c=Is;Is=Xp(a.stateNode.containerInfo),su(a),Is=c;break;case 22:a.memoizedState===null&amp;&amp;(c=a.alternate,c!==null&amp;&amp;c.memoizedState!==null?(c=lf,lf=16777216,su(a),lf=c):su(a));break;default:su(a)}}function RT(a){var c=a.alternate;if(c!==null&amp;&amp;(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function cf(a){var c=a.deletions;if((a.flags&amp;16)!==0){if(c!==null)for(var d=0;d&lt;c.length;d++){var y=c[d];Gi=y,DT(y,a)}RT(a)}if(a.subtreeFlags&amp;10256)for(a=a.child;a!==null;)OT(a),a=a.sibling}function OT(a){switch(a.tag){case 0:case 11:case 15:cf(a),a.flags&amp;2048&amp;&amp;Aa(9,a,a.return);break;case 3:cf(a);break;case 12:cf(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&amp;&amp;c._visibility&amp;2&amp;&amp;(a.return===null||a.return.tag!==13)?(c._visibility&amp;=-3,Pp(a)):cf(a);break;default:cf(a)}}function Pp(a){var c=a.deletions;if((a.flags&amp;16)!==0){if(c!==null)for(var d=0;d&lt;c.length;d++){var y=c[d];Gi=y,DT(y,a)}RT(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Aa(8,c,c.return),Pp(c);break;case 22:d=c.stateNode,d._visibility&amp;2&amp;&amp;(d._visibility&amp;=-3,Pp(c));break;default:Pp(c)}a=a.sibling}}function DT(a,c){for(;Gi!==null;){var d=Gi;switch(d.tag){case 0:case 11:case 15:Aa(8,d,c);break;case 23:case 22:if(d.memoizedState!==null&amp;&amp;d.memoizedState.cachePool!==null){var y=d.memoizedState.cachePool.pool;y!=null&amp;&amp;y.refCount++}break;case 24:jh(d.memoizedState.cache)}if(y=d.child,y!==null)y.return=d,Gi=y;else e:for(d=a;Gi!==null;){y=Gi;var S=y.sibling,M=y.return;if(ST(y),y===d){Gi=null;break e}if(S!==null){S.return=M,Gi=S;break e}Gi=M}}}var EU={getCacheForType:function(a){var c=sr(Ii),d=c.data.get(a);return d===void 0&amp;&amp;(d=a(),c.data.set(a,d)),d}},TU=typeof WeakMap==&quot;function&quot;?WeakMap:Map,Cn=0,Vn=null,on=null,pn=0,Rn=0,jr=null,Oa=!1,ou=!1,wv=!1,Ho=0,ci=0,Da=0,zl=0,Ev=0,ds=0,au=0,uf=null,Rr=null,Tv=!1,Mv=0,Lp=1/0,Up=null,Na=null,tr=0,Ia=null,lu=null,cu=0,Av=0,Cv=null,NT=null,hf=0,Rv=null;function Wr(){if((Cn&amp;2)!==0&amp;&amp;pn!==0)return pn&amp;-pn;if(I.T!==null){var a=$c;return a!==0?a:Uv()}return zt()}function IT(){ds===0&amp;&amp;(ds=(pn&amp;536870912)===0||En?de():536870912);var a=fs.current;return a!==null&amp;&amp;(a.flags|=32),ds}function Xr(a,c,d){(a===Vn&amp;&amp;(Rn===2||Rn===9)||a.cancelPendingCommit!==null)&amp;&amp;(uu(a,0),Pa(a,pn,ds,!1)),Pe(a,d),((Cn&amp;2)===0||a!==Vn)&amp;&amp;(a===Vn&amp;&amp;((Cn&amp;2)===0&amp;&amp;(zl|=d),ci===4&amp;&amp;Pa(a,pn,ds,!1)),oo(a))}function PT(a,c,d){if((Cn&amp;6)!==0)throw Error(i(327));var y=!d&amp;&amp;(c&amp;124)===0&amp;&amp;(c&amp;a.expiredLanes)===0||It(a,c),S=y?CU(a,c):Nv(a,c,!0),M=y;do{if(S===0){ou&amp;&amp;!y&amp;&amp;Pa(a,c,0,!1);break}else{if(d=a.current.alternate,M&amp;&amp;!MU(d)){S=Nv(a,c,!1),M=!1;continue}if(S===2){if(M=c,a.errorRecoveryDisabledLanes&amp;M)var U=0;else U=a.pendingLanes&amp;-536870913,U=U!==0?U:U&amp;536870912?536870912:0;if(U!==0){c=U;e:{var W=a;S=uf;var se=W.current.memoizedState.isDehydrated;if(se&amp;&amp;(uu(W,U).flags|=256),U=Nv(W,U,!1),U!==2){if(wv&amp;&amp;!se){W.errorRecoveryDisabledLanes|=M,zl|=M,S=4;break e}M=Rr,Rr=S,M!==null&amp;&amp;(Rr===null?Rr=M:Rr.push.apply(Rr,M))}S=U}if(M=!1,S!==2)continue}}if(S===1){uu(a,0),Pa(a,c,0,!0);break}e:{switch(y=a,M=S,M){case 0:case 1:throw Error(i(345));case 4:if((c&amp;4194048)!==c)break;case 6:Pa(y,c,ds,!Oa);break e;case 2:Rr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&amp;62914560)===c&amp;&amp;(S=Mv+300-Fe(),10&lt;S)){if(Pa(y,c,ds,!Oa),Gt(y,0,!0)!==0)break e;y.timeoutHandle=cM(LT.bind(null,y,d,Rr,Up,Tv,c,ds,zl,au,Oa,M,2,-0,0),S);break e}LT(y,d,Rr,Up,Tv,c,ds,zl,au,Oa,M,0,-0,0)}}break}while(!0);oo(a)}function LT(a,c,d,y,S,M,U,W,se,_e,De,ke,xe,Ee){if(a.timeoutHandle=-1,ke=c.subtreeFlags,(ke&amp;8192||(ke&amp;16785408)===16785408)&amp;&amp;(_f={stylesheets:null,count:0,unsuspend:ak},CT(c),ke=ck(),ke!==null)){a.cancelPendingCommit=ke(VT.bind(null,a,c,M,d,y,S,U,W,se,De,1,xe,Ee)),Pa(a,M,U,!_e);return}VT(a,c,M,d,y,S,U,W,se)}function MU(a){for(var c=a;;){var d=c.tag;if((d===0||d===11||d===15)&amp;&amp;c.flags&amp;16384&amp;&amp;(d=c.updateQueue,d!==null&amp;&amp;(d=d.stores,d!==null)))for(var y=0;y&lt;d.length;y++){var S=d[y],M=S.getSnapshot;S=S.value;try{if(!Br(M(),S))return!1}catch{return!1}}if(d=c.child,c.subtreeFlags&amp;16384&amp;&amp;d!==null)d.return=c,c=d;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Pa(a,c,d,y){c&amp;=~Ev,c&amp;=~zl,a.suspendedLanes|=c,a.pingedLanes&amp;=~c,y&amp;&amp;(a.warmLanes|=c),y=a.expirationTimes;for(var S=c;0&lt;S;){var M=31-ut(S),U=1&lt;&lt;M;y[M]=-1,S&amp;=~U}d!==0&amp;&amp;Qe(a,d,c)}function kp(){return(Cn&amp;6)===0?(ff(0),!1):!0}function Ov(){if(on!==null){if(Rn===0)var a=on.return;else a=on,Io=Il=null,q_(a),nu=null,tf=0,a=on;for(;a!==null;)pT(a.alternate,a),a=a.return;on=null}}function uu(a,c){var d=a.timeoutHandle;d!==-1&amp;&amp;(a.timeoutHandle=-1,jU(d)),d=a.cancelPendingCommit,d!==null&amp;&amp;(a.cancelPendingCommit=null,d()),Ov(),Vn=a,on=d=Oo(a.current,null),pn=c,Rn=0,jr=null,Oa=!1,ou=It(a,c),wv=!1,au=ds=Ev=zl=Da=ci=0,Rr=uf=null,Tv=!1,(c&amp;8)!==0&amp;&amp;(c|=c&amp;32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&amp;=c;0&lt;y;){var S=31-ut(y),M=1&lt;&lt;S;c|=a[S],y&amp;=~M}return Ho=c,sp(),d}function UT(a,c){en=null,I.H=Ep,c===Xh||c===pp?(c=Q1(),Rn=3):c===$1?(c=Q1(),Rn=4):Rn=c===eT?8:c!==null&amp;&amp;typeof c==&quot;object&quot;&amp;&amp;typeof c.then==&quot;function&quot;?6:1,jr=c,on===null&amp;&amp;(ci=1,Rp(a,ls(c,a.current)))}function kT(){var a=I.H;return I.H=Ep,a===null?Ep:a}function FT(){var a=I.A;return I.A=EU,a}function Dv(){ci=4,Oa||(pn&amp;4194048)!==pn&amp;&amp;fs.current!==null||(ou=!0),(Da&amp;134217727)===0&amp;&amp;(zl&amp;134217727)===0||Vn===null||Pa(Vn,pn,ds,!1)}function Nv(a,c,d){var y=Cn;Cn|=2;var S=kT(),M=FT();(Vn!==a||pn!==c)&amp;&amp;(Up=null,uu(a,c)),c=!1;var U=ci;e:do try{if(Rn!==0&amp;&amp;on!==null){var W=on,se=jr;switch(Rn){case 8:Ov(),U=6;break e;case 3:case 2:case 9:case 6:fs.current===null&amp;&amp;(c=!0);var _e=Rn;if(Rn=0,jr=null,hu(a,W,se,_e),d&amp;&amp;ou){U=0;break e}break;default:_e=Rn,Rn=0,jr=null,hu(a,W,se,_e)}}AU(),U=ci;break}catch(De){UT(a,De)}while(!0);return c&amp;&amp;a.shellSuspendCounter++,Io=Il=null,Cn=y,I.H=S,I.A=M,on===null&amp;&amp;(Vn=null,pn=0,sp()),U}function AU(){for(;on!==null;)zT(on)}function CU(a,c){var d=Cn;Cn|=2;var y=kT(),S=FT();Vn!==a||pn!==c?(Up=null,Lp=Fe()+500,uu(a,c)):ou=It(a,c);e:do try{if(Rn!==0&amp;&amp;on!==null){c=on;var M=jr;t:switch(Rn){case 1:Rn=0,jr=null,hu(a,c,M,1);break;case 2:case 9:if(Z1(M)){Rn=0,jr=null,BT(c);break}c=function(){Rn!==2&amp;&amp;Rn!==9||Vn!==a||(Rn=7),oo(a)},M.then(c,c);break e;case 3:Rn=7;break e;case 4:Rn=5;break e;case 7:Z1(M)?(Rn=0,jr=null,BT(c)):(Rn=0,jr=null,hu(a,c,M,7));break;case 5:var U=null;switch(on.tag){case 26:U=on.memoizedState;case 5:case 27:var W=on;if(!U||xM(U)){Rn=0,jr=null;var se=W.sibling;if(se!==null)on=se;else{var _e=W.return;_e!==null?(on=_e,Fp(_e)):on=null}break t}}Rn=0,jr=null,hu(a,c,M,5);break;case 6:Rn=0,jr=null,hu(a,c,M,6);break;case 8:Ov(),ci=6;break e;default:throw Error(i(462))}}RU();break}catch(De){UT(a,De)}while(!0);return Io=Il=null,I.H=y,I.A=S,Cn=d,on!==null?0:(Vn=null,pn=0,sp(),ci)}function RU(){for(;on!==null&amp;&amp;!Ve();)zT(on)}function zT(a){var c=fT(a.alternate,a,Ho);a.memoizedProps=a.pendingProps,c===null?Fp(a):on=c}function BT(a){var c=a,d=c.alternate;switch(c.tag){case 15:case 0:c=oT(d,c,c.pendingProps,c.type,void 0,pn);break;case 11:c=oT(d,c,c.pendingProps,c.type.render,c.ref,pn);break;case 5:q_(c);default:pT(d,c),c=on=H1(c,Ho),c=fT(d,c,Ho)}a.memoizedProps=a.pendingProps,c===null?Fp(a):on=c}function hu(a,c,d,y){Io=Il=null,q_(c),nu=null,tf=0;var S=c.return;try{if(_U(a,S,c,d,pn)){ci=1,Rp(a,ls(d,a.current)),on=null;return}}catch(M){if(S!==null)throw on=S,M;ci=1,Rp(a,ls(d,a.current)),on=null;return}c.flags&amp;32768?(En||y===1?a=!0:ou||(pn&amp;536870912)!==0?a=!1:(Oa=a=!0,(y===2||y===9||y===3||y===6)&amp;&amp;(y=fs.current,y!==null&amp;&amp;y.tag===13&amp;&amp;(y.flags|=16384))),HT(c,a)):Fp(c)}function Fp(a){var c=a;do{if((c.flags&amp;32768)!==0){HT(c,Oa);return}a=c.return;var d=bU(c.alternate,c,Ho);if(d!==null){on=d;return}if(c=c.sibling,c!==null){on=c;return}on=c=a}while(c!==null);ci===0&amp;&amp;(ci=5)}function HT(a,c){do{var d=xU(a.alternate,a);if(d!==null){d.flags&amp;=32767,on=d;return}if(d=a.return,d!==null&amp;&amp;(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!c&amp;&amp;(a=a.sibling,a!==null)){on=a;return}on=a=d}while(a!==null);ci=6,on=null}function VT(a,c,d,y,S,M,U,W,se){a.cancelPendingCommit=null;do zp();while(tr!==0);if((Cn&amp;6)!==0)throw Error(i(327));if(c!==null){if(c===a.current)throw Error(i(177));if(M=c.lanes|c.childLanes,M|=S_,st(a,d,M,U,W,se),a===Vn&amp;&amp;(on=Vn=null,pn=0),lu=c,Ia=a,cu=d,Av=M,Cv=S,NT=y,(c.subtreeFlags&amp;10256)!==0||(c.flags&amp;10256)!==0?(a.callbackNode=null,a.callbackPriority=0,IU(te,function(){return qT(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(c.flags&amp;13878)!==0,(c.subtreeFlags&amp;13878)!==0||y){y=I.T,I.T=null,S=j.p,j.p=2,U=Cn,Cn|=4;try{SU(a,c,d)}finally{Cn=U,j.p=S,I.T=y}}tr=1,GT(),jT(),WT()}}function GT(){if(tr===1){tr=0;var a=Ia,c=lu,d=(c.flags&amp;13878)!==0;if((c.subtreeFlags&amp;13878)!==0||d){d=I.T,I.T=null;var y=j.p;j.p=2;var S=Cn;Cn|=4;try{TT(c,a);var M=jv,U=D1(a.containerInfo),W=M.focusedElem,se=M.selectionRange;if(U!==W&amp;&amp;W&amp;&amp;W.ownerDocument&amp;&amp;O1(W.ownerDocument.documentElement,W)){if(se!==null&amp;&amp;y_(W)){var _e=se.start,De=se.end;if(De===void 0&amp;&amp;(De=_e),&quot;selectionStart&quot;in W)W.selectionStart=_e,W.selectionEnd=Math.min(De,W.value.length);else{var ke=W.ownerDocument||document,xe=ke&amp;&amp;ke.defaultView||window;if(xe.getSelection){var Ee=xe.getSelection(),kt=W.textContent.length,Nt=Math.min(se.start,kt),Un=se.end===void 0?Nt:Math.min(se.end,kt);!Ee.extend&amp;&amp;Nt&gt;Un&amp;&amp;(U=Un,Un=Nt,Nt=U);var ge=R1(W,Nt),he=R1(W,Un);if(ge&amp;&amp;he&amp;&amp;(Ee.rangeCount!==1||Ee.anchorNode!==ge.node||Ee.anchorOffset!==ge.offset||Ee.focusNode!==he.node||Ee.focusOffset!==he.offset)){var ye=ke.createRange();ye.setStart(ge.node,ge.offset),Ee.removeAllRanges(),Nt&gt;Un?(Ee.addRange(ye),Ee.extend(he.node,he.offset)):(ye.setEnd(he.node,he.offset),Ee.addRange(ye))}}}}for(ke=[],Ee=W;Ee=Ee.parentNode;)Ee.nodeType===1&amp;&amp;ke.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof W.focus==&quot;function&quot;&amp;&amp;W.focus(),W=0;W&lt;ke.length;W++){var Ie=ke[W];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}Zp=!!Gv,jv=Gv=null}finally{Cn=S,j.p=y,I.T=d}}a.current=c,tr=2}}function jT(){if(tr===2){tr=0;var a=Ia,c=lu,d=(c.flags&amp;8772)!==0;if((c.subtreeFlags&amp;8772)!==0||d){d=I.T,I.T=null;var y=j.p;j.p=2;var S=Cn;Cn|=4;try{xT(a,c.alternate,c)}finally{Cn=S,j.p=y,I.T=d}}tr=3}}function WT(){if(tr===4||tr===3){tr=0,Le();var a=Ia,c=lu,d=cu,y=NT;(c.subtreeFlags&amp;10256)!==0||(c.flags&amp;10256)!==0?tr=5:(tr=0,lu=Ia=null,XT(a,a.pendingLanes));var S=a.pendingLanes;if(S===0&amp;&amp;(Na=null),jn(d),c=c.stateNode,Ze&amp;&amp;typeof Ze.onCommitFiberRoot==&quot;function&quot;)try{Ze.onCommitFiberRoot(Me,c,void 0,(c.current.flags&amp;128)===128)}catch{}if(y!==null){c=I.T,S=j.p,j.p=2,I.T=null;try{for(var M=a.onRecoverableError,U=0;U&lt;y.length;U++){var W=y[U];M(W.value,{componentStack:W.stack})}}finally{I.T=c,j.p=S}}(cu&amp;3)!==0&amp;&amp;zp(),oo(a),S=a.pendingLanes,(d&amp;4194090)!==0&amp;&amp;(S&amp;42)!==0?a===Rv?hf++:(hf=0,Rv=a):hf=0,ff(0)}}function XT(a,c){(a.pooledCacheLanes&amp;=c)===0&amp;&amp;(c=a.pooledCache,c!=null&amp;&amp;(a.pooledCache=null,jh(c)))}function zp(a){return GT(),jT(),WT(),qT()}function qT(){if(tr!==5)return!1;var a=Ia,c=Av;Av=0;var d=jn(cu),y=I.T,S=j.p;try{j.p=32&gt;d?32:d,I.T=null,d=Cv,Cv=null;var M=Ia,U=cu;if(tr=0,lu=Ia=null,cu=0,(Cn&amp;6)!==0)throw Error(i(331));var W=Cn;if(Cn|=4,OT(M.current),AT(M,M.current,U,d),Cn=W,ff(0,!1),Ze&amp;&amp;typeof Ze.onPostCommitFiberRoot==&quot;function&quot;)try{Ze.onPostCommitFiberRoot(Me,M)}catch{}return!0}finally{j.p=S,I.T=y,XT(a,c)}}function YT(a,c,d){c=ls(d,c),c=av(a.stateNode,c,2),a=wa(a,c,2),a!==null&amp;&amp;(Pe(a,2),oo(a))}function zn(a,c,d){if(a.tag===3)YT(a,a,d);else for(;c!==null;){if(c.tag===3){YT(c,a,d);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError==&quot;function&quot;||typeof y.componentDidCatch==&quot;function&quot;&amp;&amp;(Na===null||!Na.has(y))){a=ls(d,a),d=JE(2),y=wa(c,d,2),y!==null&amp;&amp;(QE(d,y,c,a),Pe(y,2),oo(y));break}}c=c.return}}function Iv(a,c,d){var y=a.pingCache;if(y===null){y=a.pingCache=new TU;var S=new Set;y.set(c,S)}else S=y.get(c),S===void 0&amp;&amp;(S=new Set,y.set(c,S));S.has(d)||(wv=!0,S.add(d),a=OU.bind(null,a,c,d),c.then(a,a))}function OU(a,c,d){var y=a.pingCache;y!==null&amp;&amp;y.delete(c),a.pingedLanes|=a.suspendedLanes&amp;d,a.warmLanes&amp;=~d,Vn===a&amp;&amp;(pn&amp;d)===d&amp;&amp;(ci===4||ci===3&amp;&amp;(pn&amp;62914560)===pn&amp;&amp;300&gt;Fe()-Mv?(Cn&amp;2)===0&amp;&amp;uu(a,0):Ev|=d,au===pn&amp;&amp;(au=0)),oo(a)}function KT(a,c){c===0&amp;&amp;(c=tt()),a=Xc(a,c),a!==null&amp;&amp;(Pe(a,c),oo(a))}function DU(a){var c=a.memoizedState,d=0;c!==null&amp;&amp;(d=c.retryLane),KT(a,d)}function NU(a,c){var d=0;switch(a.tag){case 13:var y=a.stateNode,S=a.memoizedState;S!==null&amp;&amp;(d=S.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&amp;&amp;y.delete(c),KT(a,d)}function IU(a,c){return Ye(a,c)}var Bp=null,fu=null,Pv=!1,Hp=!1,Lv=!1,Bl=0;function oo(a){a!==fu&amp;&amp;a.next===null&amp;&amp;(fu===null?Bp=fu=a:fu=fu.next=a),Hp=!0,Pv||(Pv=!0,LU())}function ff(a,c){if(!Lv&amp;&amp;Hp){Lv=!0;do for(var d=!1,y=Bp;y!==null;){if(a!==0){var S=y.pendingLanes;if(S===0)var M=0;else{var U=y.suspendedLanes,W=y.pingedLanes;M=(1&lt;&lt;31-ut(42|a)+1)-1,M&amp;=S&amp;~(U&amp;~W),M=M&amp;201326741?M&amp;201326741|1:M?M|2:0}M!==0&amp;&amp;(d=!0,QT(y,M))}else M=pn,M=Gt(y,y===Vn?M:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(M&amp;3)===0||It(y,M)||(d=!0,QT(y,M));y=y.next}while(d);Lv=!1}}function PU(){$T()}function $T(){Hp=Pv=!1;var a=0;Bl!==0&amp;&amp;(GU()&amp;&amp;(a=Bl),Bl=0);for(var c=Fe(),d=null,y=Bp;y!==null;){var S=y.next,M=ZT(y,c);M===0?(y.next=null,d===null?Bp=S:d.next=S,S===null&amp;&amp;(fu=d)):(d=y,(a!==0||(M&amp;3)!==0)&amp;&amp;(Hp=!0)),y=S}ff(a)}function ZT(a,c){for(var d=a.suspendedLanes,y=a.pingedLanes,S=a.expirationTimes,M=a.pendingLanes&amp;-62914561;0&lt;M;){var U=31-ut(M),W=1&lt;&lt;U,se=S[U];se===-1?((W&amp;d)===0||(W&amp;y)!==0)&amp;&amp;(S[U]=gn(W,c)):se&lt;=c&amp;&amp;(a.expiredLanes|=W),M&amp;=~W}if(c=Vn,d=pn,d=Gt(a,a===c?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,d===0||a===c&amp;&amp;(Rn===2||Rn===9)||a.cancelPendingCommit!==null)return y!==null&amp;&amp;y!==null&amp;&amp;Q(y),a.callbackNode=null,a.callbackPriority=0;if((d&amp;3)===0||It(a,d)){if(c=d&amp;-d,c===a.callbackPriority)return c;switch(y!==null&amp;&amp;Q(y),jn(d)){case 2:case 8:d=ze;break;case 32:d=te;break;case 268435456:d=pe;break;default:d=te}return y=JT.bind(null,a),d=Ye(d,y),a.callbackPriority=c,a.callbackNode=d,c}return y!==null&amp;&amp;y!==null&amp;&amp;Q(y),a.callbackPriority=2,a.callbackNode=null,2}function JT(a,c){if(tr!==0&amp;&amp;tr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(zp()&amp;&amp;a.callbackNode!==d)return null;var y=pn;return y=Gt(a,a===Vn?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(PT(a,y,c),ZT(a,Fe()),a.callbackNode!=null&amp;&amp;a.callbackNode===d?JT.bind(null,a):null)}function QT(a,c){if(zp())return null;PT(a,c,!0)}function LU(){WU(function(){(Cn&amp;6)!==0?Ye(mt,PU):$T()})}function Uv(){return Bl===0&amp;&amp;(Bl=de()),Bl}function eM(a){return a==null||typeof a==&quot;symbol&quot;||typeof a==&quot;boolean&quot;?null:typeof a==&quot;function&quot;?a:X(&quot;&quot;+a)}function tM(a,c){var d=c.ownerDocument.createElement(&quot;input&quot;);return d.name=c.name,d.value=c.value,a.id&amp;&amp;d.setAttribute(&quot;form&quot;,a.id),c.parentNode.insertBefore(d,c),a=new FormData(a),d.parentNode.removeChild(d),a}function UU(a,c,d,y,S){if(c===&quot;submit&quot;&amp;&amp;d&amp;&amp;d.stateNode===S){var M=eM((S[pi]||null).action),U=y.submitter;U&amp;&amp;(c=(c=U[pi]||null)?eM(c.formAction):U.getAttribute(&quot;formAction&quot;),c!==null&amp;&amp;(M=c,U=null));var W=new Tl(&quot;action&quot;,&quot;action&quot;,null,y,S);a.push({event:W,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Bl!==0){var se=U?tM(S,U):new FormData(S);nv(d,{pending:!0,data:se,method:S.method,action:M},null,se)}}else typeof M==&quot;function&quot;&amp;&amp;(W.preventDefault(),se=U?tM(S,U):new FormData(S),nv(d,{pending:!0,data:se,method:S.method,action:M},M,se))},currentTarget:S}]})}}for(var kv=0;kv&lt;x_.length;kv++){var Fv=x_[kv],kU=Fv.toLowerCase(),FU=Fv[0].toUpperCase()+Fv.slice(1);Ns(kU,&quot;on&quot;+FU)}Ns(P1,&quot;onAnimationEnd&quot;),Ns(L1,&quot;onAnimationIteration&quot;),Ns(U1,&quot;onAnimationStart&quot;),Ns(&quot;dblclick&quot;,&quot;onDoubleClick&quot;),Ns(&quot;focusin&quot;,&quot;onFocus&quot;),Ns(&quot;focusout&quot;,&quot;onBlur&quot;),Ns(tU,&quot;onTransitionRun&quot;),Ns(nU,&quot;onTransitionStart&quot;),Ns(iU,&quot;onTransitionCancel&quot;),Ns(k1,&quot;onTransitionEnd&quot;),q(&quot;onMouseEnter&quot;,[&quot;mouseout&quot;,&quot;mouseover&quot;]),q(&quot;onMouseLeave&quot;,[&quot;mouseout&quot;,&quot;mouseover&quot;]),q(&quot;onPointerEnter&quot;,[&quot;pointerout&quot;,&quot;pointerover&quot;]),q(&quot;onPointerLeave&quot;,[&quot;pointerout&quot;,&quot;pointerover&quot;]),Fr(&quot;onChange&quot;,&quot;change click focusin focusout input keydown keyup selectionchange&quot;.split(&quot; &quot;)),Fr(&quot;onSelect&quot;,&quot;focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange&quot;.split(&quot; &quot;)),Fr(&quot;onBeforeInput&quot;,[&quot;compositionend&quot;,&quot;keypress&quot;,&quot;textInput&quot;,&quot;paste&quot;]),Fr(&quot;onCompositionEnd&quot;,&quot;compositionend focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;)),Fr(&quot;onCompositionStart&quot;,&quot;compositionstart focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;)),Fr(&quot;onCompositionUpdate&quot;,&quot;compositionupdate focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;));var df=&quot;abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting&quot;.split(&quot; &quot;),zU=new Set(&quot;beforetoggle cancel close invalid load scroll scrollend toggle&quot;.split(&quot; &quot;).concat(df));function nM(a,c){c=(c&amp;4)!==0;for(var d=0;d&lt;a.length;d++){var y=a[d],S=y.event;y=y.listeners;e:{var M=void 0;if(c)for(var U=y.length-1;0&lt;=U;U--){var W=y[U],se=W.instance,_e=W.currentTarget;if(W=W.listener,se!==M&amp;&amp;S.isPropagationStopped())break e;M=W,S.currentTarget=_e;try{M(S)}catch(De){Cp(De)}S.currentTarget=null,M=se}else for(U=0;U&lt;y.length;U++){if(W=y[U],se=W.instance,_e=W.currentTarget,W=W.listener,se!==M&amp;&amp;S.isPropagationStopped())break e;M=W,S.currentTarget=_e;try{M(S)}catch(De){Cp(De)}S.currentTarget=null,M=se}}}}function an(a,c){var d=c[Cs];d===void 0&amp;&amp;(d=c[Cs]=new Set);var y=a+&quot;__bubble&quot;;d.has(y)||(iM(c,a,2,!1),d.add(y))}function zv(a,c,d){var y=0;c&amp;&amp;(y|=4),iM(d,a,y,c)}var Vp=&quot;_reactListening&quot;+Math.random().toString(36).slice(2);function Bv(a){if(!a[Vp]){a[Vp]=!0,_a.forEach(function(d){d!==&quot;selectionchange&quot;&amp;&amp;(zU.has(d)||zv(d,!1,a),zv(d,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Vp]||(c[Vp]=!0,zv(&quot;selectionchange&quot;,!1,c))}}function iM(a,c,d,y){switch(AM(c)){case 2:var S=fk;break;case 8:S=dk;break;default:S=eb}d=S.bind(null,c,d,a),S=void 0,!gt||c!==&quot;touchstart&quot;&amp;&amp;c!==&quot;touchmove&quot;&amp;&amp;c!==&quot;wheel&quot;||(S=!0),y?S!==void 0?a.addEventListener(c,d,{capture:!0,passive:S}):a.addEventListener(c,d,!0):S!==void 0?a.addEventListener(c,d,{passive:S}):a.addEventListener(c,d,!1)}function Hv(a,c,d,y,S){var M=y;if((c&amp;1)===0&amp;&amp;(c&amp;2)===0&amp;&amp;y!==null)e:for(;;){if(y===null)return;var U=y.tag;if(U===3||U===4){var W=y.stateNode.containerInfo;if(W===S)break;if(U===4)for(U=y.return;U!==null;){var se=U.tag;if((se===3||se===4)&amp;&amp;U.stateNode.containerInfo===S)return;U=U.return}for(;W!==null;){if(U=wr(W),U===null)return;if(se=U.tag,se===5||se===6||se===26||se===27){y=M=U;continue e}W=W.parentNode}}y=y.return}xt(function(){var _e=M,De=Te(d),ke=[];e:{var xe=F1.get(a);if(xe!==void 0){var Ee=Tl,kt=a;switch(a){case&quot;keypress&quot;:if(sn(d)===0)break e;case&quot;keydown&quot;:case&quot;keyup&quot;:Ee=I3;break;case&quot;focusin&quot;:kt=&quot;focus&quot;,Ee=f_;break;case&quot;focusout&quot;:kt=&quot;blur&quot;,Ee=f_;break;case&quot;beforeblur&quot;:case&quot;afterblur&quot;:Ee=f_;break;case&quot;click&quot;:if(d.button===2)break e;case&quot;auxclick&quot;:case&quot;dblclick&quot;:case&quot;mousedown&quot;:case&quot;mousemove&quot;:case&quot;mouseup&quot;:case&quot;mouseout&quot;:case&quot;mouseover&quot;:case&quot;contextmenu&quot;:Ee=d1;break;case&quot;drag&quot;:case&quot;dragend&quot;:case&quot;dragenter&quot;:case&quot;dragexit&quot;:case&quot;dragleave&quot;:case&quot;dragover&quot;:case&quot;dragstart&quot;:case&quot;drop&quot;:Ee=x3;break;case&quot;touchcancel&quot;:case&quot;touchend&quot;:case&quot;touchmove&quot;:case&quot;touchstart&quot;:Ee=U3;break;case P1:case L1:case U1:Ee=E3;break;case k1:Ee=F3;break;case&quot;scroll&quot;:case&quot;scrollend&quot;:Ee=v3;break;case&quot;wheel&quot;:Ee=B3;break;case&quot;copy&quot;:case&quot;cut&quot;:case&quot;paste&quot;:Ee=M3;break;case&quot;gotpointercapture&quot;:case&quot;lostpointercapture&quot;:case&quot;pointercancel&quot;:case&quot;pointerdown&quot;:case&quot;pointermove&quot;:case&quot;pointerout&quot;:case&quot;pointerover&quot;:case&quot;pointerup&quot;:Ee=m1;break;case&quot;toggle&quot;:case&quot;beforetoggle&quot;:Ee=V3}var Nt=(c&amp;4)!==0,Un=!Nt&amp;&amp;(a===&quot;scroll&quot;||a===&quot;scrollend&quot;),ge=Nt?xe!==null?xe+&quot;Capture&quot;:null:xe;Nt=[];for(var he=_e,ye;he!==null;){var Ie=he;if(ye=Ie.stateNode,Ie=Ie.tag,Ie!==5&amp;&amp;Ie!==26&amp;&amp;Ie!==27||ye===null||ge===null||(Ie=Be(he,ge),Ie!=null&amp;&amp;Nt.push(pf(he,Ie,ye))),Un)break;he=he.return}0&lt;Nt.length&amp;&amp;(xe=new Ee(xe,kt,null,d,De),ke.push({event:xe,listeners:Nt}))}}if((c&amp;7)===0){e:{if(xe=a===&quot;mouseover&quot;||a===&quot;pointerover&quot;,Ee=a===&quot;mouseout&quot;||a===&quot;pointerout&quot;,xe&amp;&amp;d!==J&amp;&amp;(kt=d.relatedTarget||d.fromElement)&amp;&amp;(wr(kt)||kt[Hi]))break e;if((Ee||xe)&amp;&amp;(xe=De.window===De?De:(xe=De.ownerDocument)?xe.defaultView||xe.parentWindow:window,Ee?(kt=d.relatedTarget||d.toElement,Ee=_e,kt=kt?wr(kt):null,kt!==null&amp;&amp;(Un=s(kt),Nt=kt.tag,kt!==Un||Nt!==5&amp;&amp;Nt!==27&amp;&amp;Nt!==6)&amp;&amp;(kt=null)):(Ee=null,kt=_e),Ee!==kt)){if(Nt=d1,Ie=&quot;onMouseLeave&quot;,ge=&quot;onMouseEnter&quot;,he=&quot;mouse&quot;,(a===&quot;pointerout&quot;||a===&quot;pointerover&quot;)&amp;&amp;(Nt=m1,Ie=&quot;onPointerLeave&quot;,ge=&quot;onPointerEnter&quot;,he=&quot;pointer&quot;),Un=Ee==null?xe:Os(Ee),ye=kt==null?xe:Os(kt),xe=new Nt(Ie,he+&quot;leave&quot;,Ee,d,De),xe.target=Un,xe.relatedTarget=ye,Ie=null,wr(De)===_e&amp;&amp;(Nt=new Nt(ge,he+&quot;enter&quot;,kt,d,De),Nt.target=ye,Nt.relatedTarget=Un,Ie=Nt),Un=Ie,Ee&amp;&amp;kt)t:{for(Nt=Ee,ge=kt,he=0,ye=Nt;ye;ye=du(ye))he++;for(ye=0,Ie=ge;Ie;Ie=du(Ie))ye++;for(;0&lt;he-ye;)Nt=du(Nt),he--;for(;0&lt;ye-he;)ge=du(ge),ye--;for(;he--;){if(Nt===ge||ge!==null&amp;&amp;Nt===ge.alternate)break t;Nt=du(Nt),ge=du(ge)}Nt=null}else Nt=null;Ee!==null&amp;&amp;rM(ke,xe,Ee,Nt,!1),kt!==null&amp;&amp;Un!==null&amp;&amp;rM(ke,Un,kt,Nt,!0)}}e:{if(xe=_e?Os(_e):window,Ee=xe.nodeName&amp;&amp;xe.nodeName.toLowerCase(),Ee===&quot;select&quot;||Ee===&quot;input&quot;&amp;&amp;xe.type===&quot;file&quot;)var vt=w1;else if(x1(xe))if(E1)vt=J3;else{vt=$3;var tn=K3}else Ee=xe.nodeName,!Ee||Ee.toLowerCase()!==&quot;input&quot;||xe.type!==&quot;checkbox&quot;&amp;&amp;xe.type!==&quot;radio&quot;?_e&amp;&amp;B(_e.elementType)&amp;&amp;(vt=w1):vt=Z3;if(vt&amp;&amp;(vt=vt(a,_e))){S1(ke,vt,d,De);break e}tn&amp;&amp;tn(a,xe,_e),a===&quot;focusout&quot;&amp;&amp;_e&amp;&amp;xe.type===&quot;number&quot;&amp;&amp;_e.memoizedProps.value!=null&amp;&amp;Ni(xe,&quot;number&quot;,xe.value)}switch(tn=_e?Os(_e):window,a){case&quot;focusin&quot;:(x1(tn)||tn.contentEditable===&quot;true&quot;)&amp;&amp;(Gc=tn,__=_e,zh=null);break;case&quot;focusout&quot;:zh=__=Gc=null;break;case&quot;mousedown&quot;:v_=!0;break;case&quot;contextmenu&quot;:case&quot;mouseup&quot;:case&quot;dragend&quot;:v_=!1,N1(ke,d,De);break;case&quot;selectionchange&quot;:if(eU)break;case&quot;keydown&quot;:case&quot;keyup&quot;:N1(ke,d,De)}var At;if(p_)e:{switch(a){case&quot;compositionstart&quot;:var Pt=&quot;onCompositionStart&quot;;break e;case&quot;compositionend&quot;:Pt=&quot;onCompositionEnd&quot;;break e;case&quot;compositionupdate&quot;:Pt=&quot;onCompositionUpdate&quot;;break e}Pt=void 0}else Vc?v1(a,d)&amp;&amp;(Pt=&quot;onCompositionEnd&quot;):a===&quot;keydown&quot;&amp;&amp;d.keyCode===229&amp;&amp;(Pt=&quot;onCompositionStart&quot;);Pt&amp;&amp;(g1&amp;&amp;d.locale!==&quot;ko&quot;&amp;&amp;(Vc||Pt!==&quot;onCompositionStart&quot;?Pt===&quot;onCompositionEnd&quot;&amp;&amp;Vc&amp;&amp;(At=hn()):(_t=De,Fn=&quot;value&quot;in _t?_t.value:_t.textContent,Vc=!0)),tn=Gp(_e,Pt),0&lt;tn.length&amp;&amp;(Pt=new p1(Pt,a,null,d,De),ke.push({event:Pt,listeners:tn}),At?Pt.data=At:(At=b1(d),At!==null&amp;&amp;(Pt.data=At)))),(At=j3?W3(a,d):X3(a,d))&amp;&amp;(Pt=Gp(_e,&quot;onBeforeInput&quot;),0&lt;Pt.length&amp;&amp;(tn=new p1(&quot;onBeforeInput&quot;,&quot;beforeinput&quot;,null,d,De),ke.push({event:tn,listeners:Pt}),tn.data=At)),UU(ke,a,_e,d,De)}nM(ke,c)})}function pf(a,c,d){return{instance:a,listener:c,currentTarget:d}}function Gp(a,c){for(var d=c+&quot;Capture&quot;,y=[];a!==null;){var S=a,M=S.stateNode;if(S=S.tag,S!==5&amp;&amp;S!==26&amp;&amp;S!==27||M===null||(S=Be(a,d),S!=null&amp;&amp;y.unshift(pf(a,S,M)),S=Be(a,c),S!=null&amp;&amp;y.push(pf(a,S,M))),a.tag===3)return y;a=a.return}return[]}function du(a){if(a===null)return null;do a=a.return;while(a&amp;&amp;a.tag!==5&amp;&amp;a.tag!==27);return a||null}function rM(a,c,d,y,S){for(var M=c._reactName,U=[];d!==null&amp;&amp;d!==y;){var W=d,se=W.alternate,_e=W.stateNode;if(W=W.tag,se!==null&amp;&amp;se===y)break;W!==5&amp;&amp;W!==26&amp;&amp;W!==27||_e===null||(se=_e,S?(_e=Be(d,M),_e!=null&amp;&amp;U.unshift(pf(d,_e,se))):S||(_e=Be(d,M),_e!=null&amp;&amp;U.push(pf(d,_e,se)))),d=d.return}U.length!==0&amp;&amp;a.push({event:c,listeners:U})}var BU=/\r\n?/g,HU=/\u0000|\uFFFD/g;function sM(a){return(typeof a==&quot;string&quot;?a:&quot;&quot;+a).replace(BU,`
`).replace(HU,&quot;&quot;)}function oM(a,c){return c=sM(c),sM(a)===c}function jp(){}function Ln(a,c,d,y,S,M){switch(d){case&quot;children&quot;:typeof y==&quot;string&quot;?c===&quot;body&quot;||c===&quot;textarea&quot;&amp;&amp;y===&quot;&quot;||zr(a,y):(typeof y==&quot;number&quot;||typeof y==&quot;bigint&quot;)&amp;&amp;c!==&quot;body&quot;&amp;&amp;zr(a,&quot;&quot;+y);break;case&quot;className&quot;:Je(a,&quot;class&quot;,y);break;case&quot;tabIndex&quot;:Je(a,&quot;tabindex&quot;,y);break;case&quot;dir&quot;:case&quot;role&quot;:case&quot;viewBox&quot;:case&quot;width&quot;:case&quot;height&quot;:Je(a,d,y);break;case&quot;style&quot;:El(a,y,M);break;case&quot;data&quot;:if(c!==&quot;object&quot;){Je(a,&quot;data&quot;,y);break}case&quot;src&quot;:case&quot;href&quot;:if(y===&quot;&quot;&amp;&amp;(c!==&quot;a&quot;||d!==&quot;href&quot;)){a.removeAttribute(d);break}if(y==null||typeof y==&quot;function&quot;||typeof y==&quot;symbol&quot;||typeof y==&quot;boolean&quot;){a.removeAttribute(d);break}y=X(&quot;&quot;+y),a.setAttribute(d,y);break;case&quot;action&quot;:case&quot;formAction&quot;:if(typeof y==&quot;function&quot;){a.setAttribute(d,&quot;javascript:throw new Error(&#x27;A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\&#x27;re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().&#x27;)&quot;);break}else typeof M==&quot;function&quot;&amp;&amp;(d===&quot;formAction&quot;?(c!==&quot;input&quot;&amp;&amp;Ln(a,c,&quot;name&quot;,S.name,S,null),Ln(a,c,&quot;formEncType&quot;,S.formEncType,S,null),Ln(a,c,&quot;formMethod&quot;,S.formMethod,S,null),Ln(a,c,&quot;formTarget&quot;,S.formTarget,S,null)):(Ln(a,c,&quot;encType&quot;,S.encType,S,null),Ln(a,c,&quot;method&quot;,S.method,S,null),Ln(a,c,&quot;target&quot;,S.target,S,null)));if(y==null||typeof y==&quot;symbol&quot;||typeof y==&quot;boolean&quot;){a.removeAttribute(d);break}y=X(&quot;&quot;+y),a.setAttribute(d,y);break;case&quot;onClick&quot;:y!=null&amp;&amp;(a.onclick=jp);break;case&quot;onScroll&quot;:y!=null&amp;&amp;an(&quot;scroll&quot;,a);break;case&quot;onScrollEnd&quot;:y!=null&amp;&amp;an(&quot;scrollend&quot;,a);break;case&quot;dangerouslySetInnerHTML&quot;:if(y!=null){if(typeof y!=&quot;object&quot;||!(&quot;__html&quot;in y))throw Error(i(61));if(d=y.__html,d!=null){if(S.children!=null)throw Error(i(60));a.innerHTML=d}}break;case&quot;multiple&quot;:a.multiple=y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;;break;case&quot;muted&quot;:a.muted=y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;;break;case&quot;suppressContentEditableWarning&quot;:case&quot;suppressHydrationWarning&quot;:case&quot;defaultValue&quot;:case&quot;defaultChecked&quot;:case&quot;innerHTML&quot;:case&quot;ref&quot;:break;case&quot;autoFocus&quot;:break;case&quot;xlinkHref&quot;:if(y==null||typeof y==&quot;function&quot;||typeof y==&quot;boolean&quot;||typeof y==&quot;symbol&quot;){a.removeAttribute(&quot;xlink:href&quot;);break}d=X(&quot;&quot;+y),a.setAttributeNS(&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:href&quot;,d);break;case&quot;contentEditable&quot;:case&quot;spellCheck&quot;:case&quot;draggable&quot;:case&quot;value&quot;:case&quot;autoReverse&quot;:case&quot;externalResourcesRequired&quot;:case&quot;focusable&quot;:case&quot;preserveAlpha&quot;:y!=null&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;?a.setAttribute(d,&quot;&quot;+y):a.removeAttribute(d);break;case&quot;inert&quot;:case&quot;allowFullScreen&quot;:case&quot;async&quot;:case&quot;autoPlay&quot;:case&quot;controls&quot;:case&quot;default&quot;:case&quot;defer&quot;:case&quot;disabled&quot;:case&quot;disablePictureInPicture&quot;:case&quot;disableRemotePlayback&quot;:case&quot;formNoValidate&quot;:case&quot;hidden&quot;:case&quot;loop&quot;:case&quot;noModule&quot;:case&quot;noValidate&quot;:case&quot;open&quot;:case&quot;playsInline&quot;:case&quot;readOnly&quot;:case&quot;required&quot;:case&quot;reversed&quot;:case&quot;scoped&quot;:case&quot;seamless&quot;:case&quot;itemScope&quot;:y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;?a.setAttribute(d,&quot;&quot;):a.removeAttribute(d);break;case&quot;capture&quot;:case&quot;download&quot;:y===!0?a.setAttribute(d,&quot;&quot;):y!==!1&amp;&amp;y!=null&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;?a.setAttribute(d,y):a.removeAttribute(d);break;case&quot;cols&quot;:case&quot;rows&quot;:case&quot;size&quot;:case&quot;span&quot;:y!=null&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;&amp;&amp;!isNaN(y)&amp;&amp;1&lt;=y?a.setAttribute(d,y):a.removeAttribute(d);break;case&quot;rowSpan&quot;:case&quot;start&quot;:y==null||typeof y==&quot;function&quot;||typeof y==&quot;symbol&quot;||isNaN(y)?a.removeAttribute(d):a.setAttribute(d,y);break;case&quot;popover&quot;:an(&quot;beforetoggle&quot;,a),an(&quot;toggle&quot;,a),Ge(a,&quot;popover&quot;,y);break;case&quot;xlinkActuate&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:actuate&quot;,y);break;case&quot;xlinkArcrole&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:arcrole&quot;,y);break;case&quot;xlinkRole&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:role&quot;,y);break;case&quot;xlinkShow&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:show&quot;,y);break;case&quot;xlinkTitle&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:title&quot;,y);break;case&quot;xlinkType&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:type&quot;,y);break;case&quot;xmlBase&quot;:et(a,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:base&quot;,y);break;case&quot;xmlLang&quot;:et(a,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:lang&quot;,y);break;case&quot;xmlSpace&quot;:et(a,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:space&quot;,y);break;case&quot;is&quot;:Ge(a,&quot;is&quot;,y);break;case&quot;innerText&quot;:case&quot;textContent&quot;:break;default:(!(2&lt;d.length)||d[0]!==&quot;o&quot;&amp;&amp;d[0]!==&quot;O&quot;||d[1]!==&quot;n&quot;&amp;&amp;d[1]!==&quot;N&quot;)&amp;&amp;(d=k.get(d)||d,Ge(a,d,y))}}function Vv(a,c,d,y,S,M){switch(d){case&quot;style&quot;:El(a,y,M);break;case&quot;dangerouslySetInnerHTML&quot;:if(y!=null){if(typeof y!=&quot;object&quot;||!(&quot;__html&quot;in y))throw Error(i(61));if(d=y.__html,d!=null){if(S.children!=null)throw Error(i(60));a.innerHTML=d}}break;case&quot;children&quot;:typeof y==&quot;string&quot;?zr(a,y):(typeof y==&quot;number&quot;||typeof y==&quot;bigint&quot;)&amp;&amp;zr(a,&quot;&quot;+y);break;case&quot;onScroll&quot;:y!=null&amp;&amp;an(&quot;scroll&quot;,a);break;case&quot;onScrollEnd&quot;:y!=null&amp;&amp;an(&quot;scrollend&quot;,a);break;case&quot;onClick&quot;:y!=null&amp;&amp;(a.onclick=jp);break;case&quot;suppressContentEditableWarning&quot;:case&quot;suppressHydrationWarning&quot;:case&quot;innerHTML&quot;:case&quot;ref&quot;:break;case&quot;innerText&quot;:case&quot;textContent&quot;:break;default:if(!va.hasOwnProperty(d))e:{if(d[0]===&quot;o&quot;&amp;&amp;d[1]===&quot;n&quot;&amp;&amp;(S=d.endsWith(&quot;Capture&quot;),c=d.slice(2,S?d.length-7:void 0),M=a[pi]||null,M=M!=null?M[d]:null,typeof M==&quot;function&quot;&amp;&amp;a.removeEventListener(c,M,S),typeof y==&quot;function&quot;)){typeof M!=&quot;function&quot;&amp;&amp;M!==null&amp;&amp;(d in a?a[d]=null:a.hasAttribute(d)&amp;&amp;a.removeAttribute(d)),a.addEventListener(c,y,S);break e}d in a?a[d]=y:y===!0?a.setAttribute(d,&quot;&quot;):Ge(a,d,y)}}}function nr(a,c,d){switch(c){case&quot;div&quot;:case&quot;span&quot;:case&quot;svg&quot;:case&quot;path&quot;:case&quot;a&quot;:case&quot;g&quot;:case&quot;p&quot;:case&quot;li&quot;:break;case&quot;img&quot;:an(&quot;error&quot;,a),an(&quot;load&quot;,a);var y=!1,S=!1,M;for(M in d)if(d.hasOwnProperty(M)){var U=d[M];if(U!=null)switch(M){case&quot;src&quot;:y=!0;break;case&quot;srcSet&quot;:S=!0;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:throw Error(i(137,c));default:Ln(a,c,M,U,d,null)}}S&amp;&amp;Ln(a,c,&quot;srcSet&quot;,d.srcSet,d,null),y&amp;&amp;Ln(a,c,&quot;src&quot;,d.src,d,null);return;case&quot;input&quot;:an(&quot;invalid&quot;,a);var W=M=U=S=null,se=null,_e=null;for(y in d)if(d.hasOwnProperty(y)){var De=d[y];if(De!=null)switch(y){case&quot;name&quot;:S=De;break;case&quot;type&quot;:U=De;break;case&quot;checked&quot;:se=De;break;case&quot;defaultChecked&quot;:_e=De;break;case&quot;value&quot;:M=De;break;case&quot;defaultValue&quot;:W=De;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(De!=null)throw Error(i(137,c));break;default:Ln(a,c,y,De,d,null)}}Mn(a,M,W,se,_e,U,S,!1),Hn(a);return;case&quot;select&quot;:an(&quot;invalid&quot;,a),y=U=M=null;for(S in d)if(d.hasOwnProperty(S)&amp;&amp;(W=d[S],W!=null))switch(S){case&quot;value&quot;:M=W;break;case&quot;defaultValue&quot;:U=W;break;case&quot;multiple&quot;:y=W;default:Ln(a,c,S,W,d,null)}c=M,d=U,a.multiple=!!y,c!=null?Qn(a,!!y,c,!1):d!=null&amp;&amp;Qn(a,!!y,d,!0);return;case&quot;textarea&quot;:an(&quot;invalid&quot;,a),M=S=y=null;for(U in d)if(d.hasOwnProperty(U)&amp;&amp;(W=d[U],W!=null))switch(U){case&quot;value&quot;:y=W;break;case&quot;defaultValue&quot;:S=W;break;case&quot;children&quot;:M=W;break;case&quot;dangerouslySetInnerHTML&quot;:if(W!=null)throw Error(i(91));break;default:Ln(a,c,U,W,d,null)}ai(a,y,S,M),Hn(a);return;case&quot;option&quot;:for(se in d)if(d.hasOwnProperty(se)&amp;&amp;(y=d[se],y!=null))switch(se){case&quot;selected&quot;:a.selected=y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;;break;default:Ln(a,c,se,y,d,null)}return;case&quot;dialog&quot;:an(&quot;beforetoggle&quot;,a),an(&quot;toggle&quot;,a),an(&quot;cancel&quot;,a),an(&quot;close&quot;,a);break;case&quot;iframe&quot;:case&quot;object&quot;:an(&quot;load&quot;,a);break;case&quot;video&quot;:case&quot;audio&quot;:for(y=0;y&lt;df.length;y++)an(df[y],a);break;case&quot;image&quot;:an(&quot;error&quot;,a),an(&quot;load&quot;,a);break;case&quot;details&quot;:an(&quot;toggle&quot;,a);break;case&quot;embed&quot;:case&quot;source&quot;:case&quot;link&quot;:an(&quot;error&quot;,a),an(&quot;load&quot;,a);case&quot;area&quot;:case&quot;base&quot;:case&quot;br&quot;:case&quot;col&quot;:case&quot;hr&quot;:case&quot;keygen&quot;:case&quot;meta&quot;:case&quot;param&quot;:case&quot;track&quot;:case&quot;wbr&quot;:case&quot;menuitem&quot;:for(_e in d)if(d.hasOwnProperty(_e)&amp;&amp;(y=d[_e],y!=null))switch(_e){case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:throw Error(i(137,c));default:Ln(a,c,_e,y,d,null)}return;default:if(B(c)){for(De in d)d.hasOwnProperty(De)&amp;&amp;(y=d[De],y!==void 0&amp;&amp;Vv(a,c,De,y,d,void 0));return}}for(W in d)d.hasOwnProperty(W)&amp;&amp;(y=d[W],y!=null&amp;&amp;Ln(a,c,W,y,d,null))}function VU(a,c,d,y){switch(c){case&quot;div&quot;:case&quot;span&quot;:case&quot;svg&quot;:case&quot;path&quot;:case&quot;a&quot;:case&quot;g&quot;:case&quot;p&quot;:case&quot;li&quot;:break;case&quot;input&quot;:var S=null,M=null,U=null,W=null,se=null,_e=null,De=null;for(Ee in d){var ke=d[Ee];if(d.hasOwnProperty(Ee)&amp;&amp;ke!=null)switch(Ee){case&quot;checked&quot;:break;case&quot;value&quot;:break;case&quot;defaultValue&quot;:se=ke;default:y.hasOwnProperty(Ee)||Ln(a,c,Ee,null,y,ke)}}for(var xe in y){var Ee=y[xe];if(ke=d[xe],y.hasOwnProperty(xe)&amp;&amp;(Ee!=null||ke!=null))switch(xe){case&quot;type&quot;:M=Ee;break;case&quot;name&quot;:S=Ee;break;case&quot;checked&quot;:_e=Ee;break;case&quot;defaultChecked&quot;:De=Ee;break;case&quot;value&quot;:U=Ee;break;case&quot;defaultValue&quot;:W=Ee;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(Ee!=null)throw Error(i(137,c));break;default:Ee!==ke&amp;&amp;Ln(a,c,xe,Ee,y,ke)}}Tr(a,U,W,se,_e,De,M,S);return;case&quot;select&quot;:Ee=U=W=xe=null;for(M in d)if(se=d[M],d.hasOwnProperty(M)&amp;&amp;se!=null)switch(M){case&quot;value&quot;:break;case&quot;multiple&quot;:Ee=se;default:y.hasOwnProperty(M)||Ln(a,c,M,null,y,se)}for(S in y)if(M=y[S],se=d[S],y.hasOwnProperty(S)&amp;&amp;(M!=null||se!=null))switch(S){case&quot;value&quot;:xe=M;break;case&quot;defaultValue&quot;:W=M;break;case&quot;multiple&quot;:U=M;default:M!==se&amp;&amp;Ln(a,c,S,M,y,se)}c=W,d=U,y=Ee,xe!=null?Qn(a,!!d,xe,!1):!!y!=!!d&amp;&amp;(c!=null?Qn(a,!!d,c,!0):Qn(a,!!d,d?[]:&quot;&quot;,!1));return;case&quot;textarea&quot;:Ee=xe=null;for(W in d)if(S=d[W],d.hasOwnProperty(W)&amp;&amp;S!=null&amp;&amp;!y.hasOwnProperty(W))switch(W){case&quot;value&quot;:break;case&quot;children&quot;:break;default:Ln(a,c,W,null,y,S)}for(U in y)if(S=y[U],M=d[U],y.hasOwnProperty(U)&amp;&amp;(S!=null||M!=null))switch(U){case&quot;value&quot;:xe=S;break;case&quot;defaultValue&quot;:Ee=S;break;case&quot;children&quot;:break;case&quot;dangerouslySetInnerHTML&quot;:if(S!=null)throw Error(i(91));break;default:S!==M&amp;&amp;Ln(a,c,U,S,y,M)}ei(a,xe,Ee);return;case&quot;option&quot;:for(var kt in d)if(xe=d[kt],d.hasOwnProperty(kt)&amp;&amp;xe!=null&amp;&amp;!y.hasOwnProperty(kt))switch(kt){case&quot;selected&quot;:a.selected=!1;break;default:Ln(a,c,kt,null,y,xe)}for(se in y)if(xe=y[se],Ee=d[se],y.hasOwnProperty(se)&amp;&amp;xe!==Ee&amp;&amp;(xe!=null||Ee!=null))switch(se){case&quot;selected&quot;:a.selected=xe&amp;&amp;typeof xe!=&quot;function&quot;&amp;&amp;typeof xe!=&quot;symbol&quot;;break;default:Ln(a,c,se,xe,y,Ee)}return;case&quot;img&quot;:case&quot;link&quot;:case&quot;area&quot;:case&quot;base&quot;:case&quot;br&quot;:case&quot;col&quot;:case&quot;embed&quot;:case&quot;hr&quot;:case&quot;keygen&quot;:case&quot;meta&quot;:case&quot;param&quot;:case&quot;source&quot;:case&quot;track&quot;:case&quot;wbr&quot;:case&quot;menuitem&quot;:for(var Nt in d)xe=d[Nt],d.hasOwnProperty(Nt)&amp;&amp;xe!=null&amp;&amp;!y.hasOwnProperty(Nt)&amp;&amp;Ln(a,c,Nt,null,y,xe);for(_e in y)if(xe=y[_e],Ee=d[_e],y.hasOwnProperty(_e)&amp;&amp;xe!==Ee&amp;&amp;(xe!=null||Ee!=null))switch(_e){case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(xe!=null)throw Error(i(137,c));break;default:Ln(a,c,_e,xe,y,Ee)}return;default:if(B(c)){for(var Un in d)xe=d[Un],d.hasOwnProperty(Un)&amp;&amp;xe!==void 0&amp;&amp;!y.hasOwnProperty(Un)&amp;&amp;Vv(a,c,Un,void 0,y,xe);for(De in y)xe=y[De],Ee=d[De],!y.hasOwnProperty(De)||xe===Ee||xe===void 0&amp;&amp;Ee===void 0||Vv(a,c,De,xe,y,Ee);return}}for(var ge in d)xe=d[ge],d.hasOwnProperty(ge)&amp;&amp;xe!=null&amp;&amp;!y.hasOwnProperty(ge)&amp;&amp;Ln(a,c,ge,null,y,xe);for(ke in y)xe=y[ke],Ee=d[ke],!y.hasOwnProperty(ke)||xe===Ee||xe==null&amp;&amp;Ee==null||Ln(a,c,ke,xe,y,Ee)}var Gv=null,jv=null;function Wp(a){return a.nodeType===9?a:a.ownerDocument}function aM(a){switch(a){case&quot;http://www.w3.org/2000/svg&quot;:return 1;case&quot;http://www.w3.org/1998/Math/MathML&quot;:return 2;default:return 0}}function lM(a,c){if(a===0)switch(c){case&quot;svg&quot;:return 1;case&quot;math&quot;:return 2;default:return 0}return a===1&amp;&amp;c===&quot;foreignObject&quot;?0:a}function Wv(a,c){return a===&quot;textarea&quot;||a===&quot;noscript&quot;||typeof c.children==&quot;string&quot;||typeof c.children==&quot;number&quot;||typeof c.children==&quot;bigint&quot;||typeof c.dangerouslySetInnerHTML==&quot;object&quot;&amp;&amp;c.dangerouslySetInnerHTML!==null&amp;&amp;c.dangerouslySetInnerHTML.__html!=null}var Xv=null;function GU(){var a=window.event;return a&amp;&amp;a.type===&quot;popstate&quot;?a===Xv?!1:(Xv=a,!0):(Xv=null,!1)}var cM=typeof setTimeout==&quot;function&quot;?setTimeout:void 0,jU=typeof clearTimeout==&quot;function&quot;?clearTimeout:void 0,uM=typeof Promise==&quot;function&quot;?Promise:void 0,WU=typeof queueMicrotask==&quot;function&quot;?queueMicrotask:typeof uM&lt;&quot;u&quot;?function(a){return uM.resolve(null).then(a).catch(XU)}:cM;function XU(a){setTimeout(function(){throw a})}function La(a){return a===&quot;head&quot;}function hM(a,c){var d=c,y=0,S=0;do{var M=d.nextSibling;if(a.removeChild(d),M&amp;&amp;M.nodeType===8)if(d=M.data,d===&quot;/$&quot;){if(0&lt;y&amp;&amp;8&gt;y){d=y;var U=a.ownerDocument;if(d&amp;1&amp;&amp;mf(U.documentElement),d&amp;2&amp;&amp;mf(U.body),d&amp;4)for(d=U.head,mf(d),U=d.firstChild;U;){var W=U.nextSibling,se=U.nodeName;U[kr]||se===&quot;SCRIPT&quot;||se===&quot;STYLE&quot;||se===&quot;LINK&quot;&amp;&amp;U.rel.toLowerCase()===&quot;stylesheet&quot;||d.removeChild(U),U=W}}if(S===0){a.removeChild(M),wf(c);return}S--}else d===&quot;$&quot;||d===&quot;$?&quot;||d===&quot;$!&quot;?S++:y=d.charCodeAt(0)-48;else y=0;d=M}while(d);wf(c)}function qv(a){var c=a.firstChild;for(c&amp;&amp;c.nodeType===10&amp;&amp;(c=c.nextSibling);c;){var d=c;switch(c=c.nextSibling,d.nodeName){case&quot;HTML&quot;:case&quot;HEAD&quot;:case&quot;BODY&quot;:qv(d),os(d);continue;case&quot;SCRIPT&quot;:case&quot;STYLE&quot;:continue;case&quot;LINK&quot;:if(d.rel.toLowerCase()===&quot;stylesheet&quot;)continue}a.removeChild(d)}}function qU(a,c,d,y){for(;a.nodeType===1;){var S=d;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&amp;&amp;(a.nodeName!==&quot;INPUT&quot;||a.type!==&quot;hidden&quot;))break}else if(y){if(!a[kr])switch(c){case&quot;meta&quot;:if(!a.hasAttribute(&quot;itemprop&quot;))break;return a;case&quot;link&quot;:if(M=a.getAttribute(&quot;rel&quot;),M===&quot;stylesheet&quot;&amp;&amp;a.hasAttribute(&quot;data-precedence&quot;))break;if(M!==S.rel||a.getAttribute(&quot;href&quot;)!==(S.href==null||S.href===&quot;&quot;?null:S.href)||a.getAttribute(&quot;crossorigin&quot;)!==(S.crossOrigin==null?null:S.crossOrigin)||a.getAttribute(&quot;title&quot;)!==(S.title==null?null:S.title))break;return a;case&quot;style&quot;:if(a.hasAttribute(&quot;data-precedence&quot;))break;return a;case&quot;script&quot;:if(M=a.getAttribute(&quot;src&quot;),(M!==(S.src==null?null:S.src)||a.getAttribute(&quot;type&quot;)!==(S.type==null?null:S.type)||a.getAttribute(&quot;crossorigin&quot;)!==(S.crossOrigin==null?null:S.crossOrigin))&amp;&amp;M&amp;&amp;a.hasAttribute(&quot;async&quot;)&amp;&amp;!a.hasAttribute(&quot;itemprop&quot;))break;return a;default:return a}}else if(c===&quot;input&quot;&amp;&amp;a.type===&quot;hidden&quot;){var M=S.name==null?null:&quot;&quot;+S.name;if(S.type===&quot;hidden&quot;&amp;&amp;a.getAttribute(&quot;name&quot;)===M)return a}else return a;if(a=Ps(a.nextSibling),a===null)break}return null}function YU(a,c,d){if(c===&quot;&quot;)return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!==&quot;INPUT&quot;||a.type!==&quot;hidden&quot;)&amp;&amp;!d||(a=Ps(a.nextSibling),a===null))return null;return a}function Yv(a){return a.data===&quot;$!&quot;||a.data===&quot;$?&quot;&amp;&amp;a.ownerDocument.readyState===&quot;complete&quot;}function KU(a,c){var d=a.ownerDocument;if(a.data!==&quot;$?&quot;||d.readyState===&quot;complete&quot;)c();else{var y=function(){c(),d.removeEventListener(&quot;DOMContentLoaded&quot;,y)};d.addEventListener(&quot;DOMContentLoaded&quot;,y),a._reactRetry=y}}function Ps(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c===&quot;$&quot;||c===&quot;$!&quot;||c===&quot;$?&quot;||c===&quot;F!&quot;||c===&quot;F&quot;)break;if(c===&quot;/$&quot;)return null}}return a}var Kv=null;function fM(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var d=a.data;if(d===&quot;$&quot;||d===&quot;$!&quot;||d===&quot;$?&quot;){if(c===0)return a;c--}else d===&quot;/$&quot;&amp;&amp;c++}a=a.previousSibling}return null}function dM(a,c,d){switch(c=Wp(d),a){case&quot;html&quot;:if(a=c.documentElement,!a)throw Error(i(452));return a;case&quot;head&quot;:if(a=c.head,!a)throw Error(i(453));return a;case&quot;body&quot;:if(a=c.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function mf(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);os(a)}var ps=new Map,pM=new Set;function Xp(a){return typeof a.getRootNode==&quot;function&quot;?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Vo=j.d;j.d={f:$U,r:ZU,D:JU,C:QU,L:ek,m:tk,X:ik,S:nk,M:rk};function $U(){var a=Vo.f(),c=kp();return a||c}function ZU(a){var c=Er(a);c!==null&amp;&amp;c.tag===5&amp;&amp;c.type===&quot;form&quot;?PE(c):Vo.r(a)}var pu=typeof document&gt;&quot;u&quot;?null:document;function mM(a,c,d){var y=pu;if(y&amp;&amp;typeof c==&quot;string&quot;&amp;&amp;c){var S=vn(c);S=&#x27;link[rel=&quot;&#x27;+a+&#x27;&quot;][href=&quot;&#x27;+S+&#x27;&quot;]&#x27;,typeof d==&quot;string&quot;&amp;&amp;(S+=&#x27;[crossorigin=&quot;&#x27;+d+&#x27;&quot;]&#x27;),pM.has(S)||(pM.add(S),a={rel:a,crossOrigin:d,href:c},y.querySelector(S)===null&amp;&amp;(c=y.createElement(&quot;link&quot;),nr(c,&quot;link&quot;,a),Wn(c),y.head.appendChild(c)))}}function JU(a){Vo.D(a),mM(&quot;dns-prefetch&quot;,a,null)}function QU(a,c){Vo.C(a,c),mM(&quot;preconnect&quot;,a,c)}function ek(a,c,d){Vo.L(a,c,d);var y=pu;if(y&amp;&amp;a&amp;&amp;c){var S=&#x27;link[rel=&quot;preload&quot;][as=&quot;&#x27;+vn(c)+&#x27;&quot;]&#x27;;c===&quot;image&quot;&amp;&amp;d&amp;&amp;d.imageSrcSet?(S+=&#x27;[imagesrcset=&quot;&#x27;+vn(d.imageSrcSet)+&#x27;&quot;]&#x27;,typeof d.imageSizes==&quot;string&quot;&amp;&amp;(S+=&#x27;[imagesizes=&quot;&#x27;+vn(d.imageSizes)+&#x27;&quot;]&#x27;)):S+=&#x27;[href=&quot;&#x27;+vn(a)+&#x27;&quot;]&#x27;;var M=S;switch(c){case&quot;style&quot;:M=mu(a);break;case&quot;script&quot;:M=gu(a)}ps.has(M)||(a=f({rel:&quot;preload&quot;,href:c===&quot;image&quot;&amp;&amp;d&amp;&amp;d.imageSrcSet?void 0:a,as:c},d),ps.set(M,a),y.querySelector(S)!==null||c===&quot;style&quot;&amp;&amp;y.querySelector(gf(M))||c===&quot;script&quot;&amp;&amp;y.querySelector(yf(M))||(c=y.createElement(&quot;link&quot;),nr(c,&quot;link&quot;,a),Wn(c),y.head.appendChild(c)))}}function tk(a,c){Vo.m(a,c);var d=pu;if(d&amp;&amp;a){var y=c&amp;&amp;typeof c.as==&quot;string&quot;?c.as:&quot;script&quot;,S=&#x27;link[rel=&quot;modulepreload&quot;][as=&quot;&#x27;+vn(y)+&#x27;&quot;][href=&quot;&#x27;+vn(a)+&#x27;&quot;]&#x27;,M=S;switch(y){case&quot;audioworklet&quot;:case&quot;paintworklet&quot;:case&quot;serviceworker&quot;:case&quot;sharedworker&quot;:case&quot;worker&quot;:case&quot;script&quot;:M=gu(a)}if(!ps.has(M)&amp;&amp;(a=f({rel:&quot;modulepreload&quot;,href:a},c),ps.set(M,a),d.querySelector(S)===null)){switch(y){case&quot;audioworklet&quot;:case&quot;paintworklet&quot;:case&quot;serviceworker&quot;:case&quot;sharedworker&quot;:case&quot;worker&quot;:case&quot;script&quot;:if(d.querySelector(yf(M)))return}y=d.createElement(&quot;link&quot;),nr(y,&quot;link&quot;,a),Wn(y),d.head.appendChild(y)}}}function nk(a,c,d){Vo.S(a,c,d);var y=pu;if(y&amp;&amp;a){var S=as(y).hoistableStyles,M=mu(a);c=c||&quot;default&quot;;var U=S.get(M);if(!U){var W={loading:0,preload:null};if(U=y.querySelector(gf(M)))W.loading=5;else{a=f({rel:&quot;stylesheet&quot;,href:a,&quot;data-precedence&quot;:c},d),(d=ps.get(M))&amp;&amp;$v(a,d);var se=U=y.createElement(&quot;link&quot;);Wn(se),nr(se,&quot;link&quot;,a),se._p=new Promise(function(_e,De){se.onload=_e,se.onerror=De}),se.addEventListener(&quot;load&quot;,function(){W.loading|=1}),se.addEventListener(&quot;error&quot;,function(){W.loading|=2}),W.loading|=4,qp(U,c,y)}U={type:&quot;stylesheet&quot;,instance:U,count:1,state:W},S.set(M,U)}}}function ik(a,c){Vo.X(a,c);var d=pu;if(d&amp;&amp;a){var y=as(d).hoistableScripts,S=gu(a),M=y.get(S);M||(M=d.querySelector(yf(S)),M||(a=f({src:a,async:!0},c),(c=ps.get(S))&amp;&amp;Zv(a,c),M=d.createElement(&quot;script&quot;),Wn(M),nr(M,&quot;link&quot;,a),d.head.appendChild(M)),M={type:&quot;script&quot;,instance:M,count:1,state:null},y.set(S,M))}}function rk(a,c){Vo.M(a,c);var d=pu;if(d&amp;&amp;a){var y=as(d).hoistableScripts,S=gu(a),M=y.get(S);M||(M=d.querySelector(yf(S)),M||(a=f({src:a,async:!0,type:&quot;module&quot;},c),(c=ps.get(S))&amp;&amp;Zv(a,c),M=d.createElement(&quot;script&quot;),Wn(M),nr(M,&quot;link&quot;,a),d.head.appendChild(M)),M={type:&quot;script&quot;,instance:M,count:1,state:null},y.set(S,M))}}function gM(a,c,d,y){var S=(S=ae.current)?Xp(S):null;if(!S)throw Error(i(446));switch(a){case&quot;meta&quot;:case&quot;title&quot;:return null;case&quot;style&quot;:return typeof d.precedence==&quot;string&quot;&amp;&amp;typeof d.href==&quot;string&quot;?(c=mu(d.href),d=as(S).hoistableStyles,y=d.get(c),y||(y={type:&quot;style&quot;,instance:null,count:0,state:null},d.set(c,y)),y):{type:&quot;void&quot;,instance:null,count:0,state:null};case&quot;link&quot;:if(d.rel===&quot;stylesheet&quot;&amp;&amp;typeof d.href==&quot;string&quot;&amp;&amp;typeof d.precedence==&quot;string&quot;){a=mu(d.href);var M=as(S).hoistableStyles,U=M.get(a);if(U||(S=S.ownerDocument||S,U={type:&quot;stylesheet&quot;,instance:null,count:0,state:{loading:0,preload:null}},M.set(a,U),(M=S.querySelector(gf(a)))&amp;&amp;!M._p&amp;&amp;(U.instance=M,U.state.loading=5),ps.has(a)||(d={rel:&quot;preload&quot;,as:&quot;style&quot;,href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ps.set(a,d),M||sk(S,a,d,U.state))),c&amp;&amp;y===null)throw Error(i(528,&quot;&quot;));return U}if(c&amp;&amp;y!==null)throw Error(i(529,&quot;&quot;));return null;case&quot;script&quot;:return c=d.async,d=d.src,typeof d==&quot;string&quot;&amp;&amp;c&amp;&amp;typeof c!=&quot;function&quot;&amp;&amp;typeof c!=&quot;symbol&quot;?(c=gu(d),d=as(S).hoistableScripts,y=d.get(c),y||(y={type:&quot;script&quot;,instance:null,count:0,state:null},d.set(c,y)),y):{type:&quot;void&quot;,instance:null,count:0,state:null};default:throw Error(i(444,a))}}function mu(a){return&#x27;href=&quot;&#x27;+vn(a)+&#x27;&quot;&#x27;}function gf(a){return&#x27;link[rel=&quot;stylesheet&quot;][&#x27;+a+&quot;]&quot;}function yM(a){return f({},a,{&quot;data-precedence&quot;:a.precedence,precedence:null})}function sk(a,c,d,y){a.querySelector(&#x27;link[rel=&quot;preload&quot;][as=&quot;style&quot;][&#x27;+c+&quot;]&quot;)?y.loading=1:(c=a.createElement(&quot;link&quot;),y.preload=c,c.addEventListener(&quot;load&quot;,function(){return y.loading|=1}),c.addEventListener(&quot;error&quot;,function(){return y.loading|=2}),nr(c,&quot;link&quot;,d),Wn(c),a.head.appendChild(c))}function gu(a){return&#x27;[src=&quot;&#x27;+vn(a)+&#x27;&quot;]&#x27;}function yf(a){return&quot;script[async]&quot;+a}function _M(a,c,d){if(c.count++,c.instance===null)switch(c.type){case&quot;style&quot;:var y=a.querySelector(&#x27;style[data-href~=&quot;&#x27;+vn(d.href)+&#x27;&quot;]&#x27;);if(y)return c.instance=y,Wn(y),y;var S=f({},d,{&quot;data-href&quot;:d.href,&quot;data-precedence&quot;:d.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement(&quot;style&quot;),Wn(y),nr(y,&quot;style&quot;,S),qp(y,d.precedence,a),c.instance=y;case&quot;stylesheet&quot;:S=mu(d.href);var M=a.querySelector(gf(S));if(M)return c.state.loading|=4,c.instance=M,Wn(M),M;y=yM(d),(S=ps.get(S))&amp;&amp;$v(y,S),M=(a.ownerDocument||a).createElement(&quot;link&quot;),Wn(M);var U=M;return U._p=new Promise(function(W,se){U.onload=W,U.onerror=se}),nr(M,&quot;link&quot;,y),c.state.loading|=4,qp(M,d.precedence,a),c.instance=M;case&quot;script&quot;:return M=gu(d.src),(S=a.querySelector(yf(M)))?(c.instance=S,Wn(S),S):(y=d,(S=ps.get(M))&amp;&amp;(y=f({},d),Zv(y,S)),a=a.ownerDocument||a,S=a.createElement(&quot;script&quot;),Wn(S),nr(S,&quot;link&quot;,y),a.head.appendChild(S),c.instance=S);case&quot;void&quot;:return null;default:throw Error(i(443,c.type))}else c.type===&quot;stylesheet&quot;&amp;&amp;(c.state.loading&amp;4)===0&amp;&amp;(y=c.instance,c.state.loading|=4,qp(y,d.precedence,a));return c.instance}function qp(a,c,d){for(var y=d.querySelectorAll(&#x27;link[rel=&quot;stylesheet&quot;][data-precedence],style[data-precedence]&#x27;),S=y.length?y[y.length-1]:null,M=S,U=0;U&lt;y.length;U++){var W=y[U];if(W.dataset.precedence===c)M=W;else if(M!==S)break}M?M.parentNode.insertBefore(a,M.nextSibling):(c=d.nodeType===9?d.head:d,c.insertBefore(a,c.firstChild))}function $v(a,c){a.crossOrigin==null&amp;&amp;(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&amp;&amp;(a.referrerPolicy=c.referrerPolicy),a.title==null&amp;&amp;(a.title=c.title)}function Zv(a,c){a.crossOrigin==null&amp;&amp;(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&amp;&amp;(a.referrerPolicy=c.referrerPolicy),a.integrity==null&amp;&amp;(a.integrity=c.integrity)}var Yp=null;function vM(a,c,d){if(Yp===null){var y=new Map,S=Yp=new Map;S.set(d,y)}else S=Yp,y=S.get(d),y||(y=new Map,S.set(d,y));if(y.has(a))return y;for(y.set(a,null),d=d.getElementsByTagName(a),S=0;S&lt;d.length;S++){var M=d[S];if(!(M[kr]||M[Zn]||a===&quot;link&quot;&amp;&amp;M.getAttribute(&quot;rel&quot;)===&quot;stylesheet&quot;)&amp;&amp;M.namespaceURI!==&quot;http://www.w3.org/2000/svg&quot;){var U=M.getAttribute(c)||&quot;&quot;;U=a+U;var W=y.get(U);W?W.push(M):y.set(U,[M])}}return y}function bM(a,c,d){a=a.ownerDocument||a,a.head.insertBefore(d,c===&quot;title&quot;?a.querySelector(&quot;head &gt; title&quot;):null)}function ok(a,c,d){if(d===1||c.itemProp!=null)return!1;switch(a){case&quot;meta&quot;:case&quot;title&quot;:return!0;case&quot;style&quot;:if(typeof c.precedence!=&quot;string&quot;||typeof c.href!=&quot;string&quot;||c.href===&quot;&quot;)break;return!0;case&quot;link&quot;:if(typeof c.rel!=&quot;string&quot;||typeof c.href!=&quot;string&quot;||c.href===&quot;&quot;||c.onLoad||c.onError)break;switch(c.rel){case&quot;stylesheet&quot;:return a=c.disabled,typeof c.precedence==&quot;string&quot;&amp;&amp;a==null;default:return!0}case&quot;script&quot;:if(c.async&amp;&amp;typeof c.async!=&quot;function&quot;&amp;&amp;typeof c.async!=&quot;symbol&quot;&amp;&amp;!c.onLoad&amp;&amp;!c.onError&amp;&amp;c.src&amp;&amp;typeof c.src==&quot;string&quot;)return!0}return!1}function xM(a){return!(a.type===&quot;stylesheet&quot;&amp;&amp;(a.state.loading&amp;3)===0)}var _f=null;function ak(){}function lk(a,c,d){if(_f===null)throw Error(i(475));var y=_f;if(c.type===&quot;stylesheet&quot;&amp;&amp;(typeof d.media!=&quot;string&quot;||matchMedia(d.media).matches!==!1)&amp;&amp;(c.state.loading&amp;4)===0){if(c.instance===null){var S=mu(d.href),M=a.querySelector(gf(S));if(M){a=M._p,a!==null&amp;&amp;typeof a==&quot;object&quot;&amp;&amp;typeof a.then==&quot;function&quot;&amp;&amp;(y.count++,y=Kp.bind(y),a.then(y,y)),c.state.loading|=4,c.instance=M,Wn(M);return}M=a.ownerDocument||a,d=yM(d),(S=ps.get(S))&amp;&amp;$v(d,S),M=M.createElement(&quot;link&quot;),Wn(M);var U=M;U._p=new Promise(function(W,se){U.onload=W,U.onerror=se}),nr(M,&quot;link&quot;,d),c.instance=M}y.stylesheets===null&amp;&amp;(y.stylesheets=new Map),y.stylesheets.set(c,a),(a=c.state.preload)&amp;&amp;(c.state.loading&amp;3)===0&amp;&amp;(y.count++,c=Kp.bind(y),a.addEventListener(&quot;load&quot;,c),a.addEventListener(&quot;error&quot;,c))}}function ck(){if(_f===null)throw Error(i(475));var a=_f;return a.stylesheets&amp;&amp;a.count===0&amp;&amp;Jv(a,a.stylesheets),0&lt;a.count?function(c){var d=setTimeout(function(){if(a.stylesheets&amp;&amp;Jv(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(d)}}:null}function Kp(){if(this.count--,this.count===0){if(this.stylesheets)Jv(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var $p=null;function Jv(a,c){a.stylesheets=null,a.unsuspend!==null&amp;&amp;(a.count++,$p=new Map,c.forEach(uk,a),$p=null,Kp.call(a))}function uk(a,c){if(!(c.state.loading&amp;4)){var d=$p.get(a);if(d)var y=d.get(null);else{d=new Map,$p.set(a,d);for(var S=a.querySelectorAll(&quot;link[data-precedence],style[data-precedence]&quot;),M=0;M&lt;S.length;M++){var U=S[M];(U.nodeName===&quot;LINK&quot;||U.getAttribute(&quot;media&quot;)!==&quot;not all&quot;)&amp;&amp;(d.set(U.dataset.precedence,U),y=U)}y&amp;&amp;d.set(null,y)}S=c.instance,U=S.getAttribute(&quot;data-precedence&quot;),M=d.get(U)||y,M===y&amp;&amp;d.set(null,S),d.set(U,S),this.count++,y=Kp.bind(this),S.addEventListener(&quot;load&quot;,y),S.addEventListener(&quot;error&quot;,y),M?M.parentNode.insertBefore(S,M.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(S,a.firstChild)),c.state.loading|=4}}var vf={$$typeof:w,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function hk(a,c,d,y,S,M,U,W){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=M,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function SM(a,c,d,y,S,M,U,W,se,_e,De,ke){return a=new hk(a,c,d,U,W,se,_e,ke),c=1,M===!0&amp;&amp;(c|=24),M=Hr(3,null,null,c),a.current=M,M.stateNode=a,c=I_(),c.refCount++,a.pooledCache=c,c.refCount++,M.memoizedState={element:y,isDehydrated:d,cache:c},k_(M),a}function wM(a){return a?(a=qc,a):qc}function EM(a,c,d,y,S,M){S=wM(S),y.context===null?y.context=S:y.pendingContext=S,y=Sa(c),y.payload={element:d},M=M===void 0?null:M,M!==null&amp;&amp;(y.callback=M),d=wa(a,y,c),d!==null&amp;&amp;(Xr(d,a,c),Yh(d,a,c))}function TM(a,c){if(a=a.memoizedState,a!==null&amp;&amp;a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&amp;&amp;d&lt;c?d:c}}function Qv(a,c){TM(a,c),(a=a.alternate)&amp;&amp;TM(a,c)}function MM(a){if(a.tag===13){var c=Xc(a,67108864);c!==null&amp;&amp;Xr(c,a,67108864),Qv(a,67108864)}}var Zp=!0;function fk(a,c,d,y){var S=I.T;I.T=null;var M=j.p;try{j.p=2,eb(a,c,d,y)}finally{j.p=M,I.T=S}}function dk(a,c,d,y){var S=I.T;I.T=null;var M=j.p;try{j.p=8,eb(a,c,d,y)}finally{j.p=M,I.T=S}}function eb(a,c,d,y){if(Zp){var S=tb(y);if(S===null)Hv(a,c,y,Jp,d),CM(a,y);else if(mk(S,a,c,d,y))y.stopPropagation();else if(CM(a,y),c&amp;4&amp;&amp;-1&lt;pk.indexOf(a)){for(;S!==null;){var M=Er(S);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var U=rt(M.pendingLanes);if(U!==0){var W=M;for(W.pendingLanes|=2,W.entangledLanes|=2;U;){var se=1&lt;&lt;31-ut(U);W.entanglements[1]|=se,U&amp;=~se}oo(M),(Cn&amp;6)===0&amp;&amp;(Lp=Fe()+500,ff(0))}}break;case 13:W=Xc(M,2),W!==null&amp;&amp;Xr(W,M,2),kp(),Qv(M,2)}if(M=tb(y),M===null&amp;&amp;Hv(a,c,y,Jp,d),M===S)break;S=M}S!==null&amp;&amp;y.stopPropagation()}else Hv(a,c,y,null,d)}}function tb(a){return a=Te(a),nb(a)}var Jp=null;function nb(a){if(Jp=null,a=wr(a),a!==null){var c=s(a);if(c===null)a=null;else{var d=c.tag;if(d===13){if(a=o(c),a!==null)return a;a=null}else if(d===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&amp;&amp;(a=null)}}return Jp=a,null}function AM(a){switch(a){case&quot;beforetoggle&quot;:case&quot;cancel&quot;:case&quot;click&quot;:case&quot;close&quot;:case&quot;contextmenu&quot;:case&quot;copy&quot;:case&quot;cut&quot;:case&quot;auxclick&quot;:case&quot;dblclick&quot;:case&quot;dragend&quot;:case&quot;dragstart&quot;:case&quot;drop&quot;:case&quot;focusin&quot;:case&quot;focusout&quot;:case&quot;input&quot;:case&quot;invalid&quot;:case&quot;keydown&quot;:case&quot;keypress&quot;:case&quot;keyup&quot;:case&quot;mousedown&quot;:case&quot;mouseup&quot;:case&quot;paste&quot;:case&quot;pause&quot;:case&quot;play&quot;:case&quot;pointercancel&quot;:case&quot;pointerdown&quot;:case&quot;pointerup&quot;:case&quot;ratechange&quot;:case&quot;reset&quot;:case&quot;resize&quot;:case&quot;seeked&quot;:case&quot;submit&quot;:case&quot;toggle&quot;:case&quot;touchcancel&quot;:case&quot;touchend&quot;:case&quot;touchstart&quot;:case&quot;volumechange&quot;:case&quot;change&quot;:case&quot;selectionchange&quot;:case&quot;textInput&quot;:case&quot;compositionstart&quot;:case&quot;compositionend&quot;:case&quot;compositionupdate&quot;:case&quot;beforeblur&quot;:case&quot;afterblur&quot;:case&quot;beforeinput&quot;:case&quot;blur&quot;:case&quot;fullscreenchange&quot;:case&quot;focus&quot;:case&quot;hashchange&quot;:case&quot;popstate&quot;:case&quot;select&quot;:case&quot;selectstart&quot;:return 2;case&quot;drag&quot;:case&quot;dragenter&quot;:case&quot;dragexit&quot;:case&quot;dragleave&quot;:case&quot;dragover&quot;:case&quot;mousemove&quot;:case&quot;mouseout&quot;:case&quot;mouseover&quot;:case&quot;pointermove&quot;:case&quot;pointerout&quot;:case&quot;pointerover&quot;:case&quot;scroll&quot;:case&quot;touchmove&quot;:case&quot;wheel&quot;:case&quot;mouseenter&quot;:case&quot;mouseleave&quot;:case&quot;pointerenter&quot;:case&quot;pointerleave&quot;:return 8;case&quot;message&quot;:switch(Ne()){case mt:return 2;case ze:return 8;case te:case H:return 32;case pe:return 268435456;default:return 32}default:return 32}}var ib=!1,Ua=null,ka=null,Fa=null,bf=new Map,xf=new Map,za=[],pk=&quot;mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset&quot;.split(&quot; &quot;);function CM(a,c){switch(a){case&quot;focusin&quot;:case&quot;focusout&quot;:Ua=null;break;case&quot;dragenter&quot;:case&quot;dragleave&quot;:ka=null;break;case&quot;mouseover&quot;:case&quot;mouseout&quot;:Fa=null;break;case&quot;pointerover&quot;:case&quot;pointerout&quot;:bf.delete(c.pointerId);break;case&quot;gotpointercapture&quot;:case&quot;lostpointercapture&quot;:xf.delete(c.pointerId)}}function Sf(a,c,d,y,S,M){return a===null||a.nativeEvent!==M?(a={blockedOn:c,domEventName:d,eventSystemFlags:y,nativeEvent:M,targetContainers:[S]},c!==null&amp;&amp;(c=Er(c),c!==null&amp;&amp;MM(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,S!==null&amp;&amp;c.indexOf(S)===-1&amp;&amp;c.push(S),a)}function mk(a,c,d,y,S){switch(c){case&quot;focusin&quot;:return Ua=Sf(Ua,a,c,d,y,S),!0;case&quot;dragenter&quot;:return ka=Sf(ka,a,c,d,y,S),!0;case&quot;mouseover&quot;:return Fa=Sf(Fa,a,c,d,y,S),!0;case&quot;pointerover&quot;:var M=S.pointerId;return bf.set(M,Sf(bf.get(M)||null,a,c,d,y,S)),!0;case&quot;gotpointercapture&quot;:return M=S.pointerId,xf.set(M,Sf(xf.get(M)||null,a,c,d,y,S)),!0}return!1}function RM(a){var c=wr(a.target);if(c!==null){var d=s(c);if(d!==null){if(c=d.tag,c===13){if(c=o(d),c!==null){a.blockedOn=c,Bi(a.priority,function(){if(d.tag===13){var y=Wr();y=wn(y);var S=Xc(d,y);S!==null&amp;&amp;Xr(S,d,y),Qv(d,y)}});return}}else if(c===3&amp;&amp;d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Qp(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0&lt;c.length;){var d=tb(a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);J=y,d.target.dispatchEvent(y),J=null}else return c=Er(d),c!==null&amp;&amp;MM(c),a.blockedOn=d,!1;c.shift()}return!0}function OM(a,c,d){Qp(a)&amp;&amp;d.delete(c)}function gk(){ib=!1,Ua!==null&amp;&amp;Qp(Ua)&amp;&amp;(Ua=null),ka!==null&amp;&amp;Qp(ka)&amp;&amp;(ka=null),Fa!==null&amp;&amp;Qp(Fa)&amp;&amp;(Fa=null),bf.forEach(OM),xf.forEach(OM)}function em(a,c){a.blockedOn===c&amp;&amp;(a.blockedOn=null,ib||(ib=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gk)))}var tm=null;function DM(a){tm!==a&amp;&amp;(tm=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){tm===a&amp;&amp;(tm=null);for(var c=0;c&lt;a.length;c+=3){var d=a[c],y=a[c+1],S=a[c+2];if(typeof y!=&quot;function&quot;){if(nb(y||d)===null)continue;break}var M=Er(d);M!==null&amp;&amp;(a.splice(c,3),c-=3,nv(M,{pending:!0,data:S,method:d.method,action:y},y,S))}}))}function wf(a){function c(se){return em(se,a)}Ua!==null&amp;&amp;em(Ua,a),ka!==null&amp;&amp;em(ka,a),Fa!==null&amp;&amp;em(Fa,a),bf.forEach(c),xf.forEach(c);for(var d=0;d&lt;za.length;d++){var y=za[d];y.blockedOn===a&amp;&amp;(y.blockedOn=null)}for(;0&lt;za.length&amp;&amp;(d=za[0],d.blockedOn===null);)RM(d),d.blockedOn===null&amp;&amp;za.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(y=0;y&lt;d.length;y+=3){var S=d[y],M=d[y+1],U=S[pi]||null;if(typeof M==&quot;function&quot;)U||DM(d);else if(U){var W=null;if(M&amp;&amp;M.hasAttribute(&quot;formAction&quot;)){if(S=M,U=M[pi]||null)W=U.formAction;else if(nb(S)!==null)continue}else W=U.action;typeof W==&quot;function&quot;?d[y+1]=W:(d.splice(y,3),y-=3),DM(d)}}}function rb(a){this._internalRoot=a}nm.prototype.render=rb.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(i(409));var d=c.current,y=Wr();EM(d,y,a,c,null,null)},nm.prototype.unmount=rb.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;EM(a.current,2,null,a,null,null),kp(),c[Hi]=null}};function nm(a){this._internalRoot=a}nm.prototype.unstable_scheduleHydration=function(a){if(a){var c=zt();a={blockedOn:null,target:a,priority:c};for(var d=0;d&lt;za.length&amp;&amp;c!==0&amp;&amp;c&lt;za[d].priority;d++);za.splice(d,0,a),d===0&amp;&amp;RM(a)}};var NM=e.version;if(NM!==&quot;19.1.0&quot;)throw Error(i(527,NM,&quot;19.1.0&quot;));j.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render==&quot;function&quot;?Error(i(188)):(a=Object.keys(a).join(&quot;,&quot;),Error(i(268,a)));return a=u(c),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var yk={bundleType:0,version:&quot;19.1.0&quot;,rendererPackageName:&quot;react-dom&quot;,currentDispatcherRef:I,reconcilerVersion:&quot;19.1.0&quot;};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&lt;&quot;u&quot;){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&amp;&amp;im.supportsFiber)try{Me=im.inject(yk),Ze=im}catch{}}return Tf.createRoot=function(a,c){if(!r(a))throw Error(i(299));var d=!1,y=&quot;&quot;,S=YE,M=KE,U=$E,W=null;return c!=null&amp;&amp;(c.unstable_strictMode===!0&amp;&amp;(d=!0),c.identifierPrefix!==void 0&amp;&amp;(y=c.identifierPrefix),c.onUncaughtError!==void 0&amp;&amp;(S=c.onUncaughtError),c.onCaughtError!==void 0&amp;&amp;(M=c.onCaughtError),c.onRecoverableError!==void 0&amp;&amp;(U=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&amp;&amp;(W=c.unstable_transitionCallbacks)),c=SM(a,1,!1,null,null,d,y,S,M,U,W,null),a[Hi]=c.current,Bv(a),new rb(c)},Tf.hydrateRoot=function(a,c,d){if(!r(a))throw Error(i(299));var y=!1,S=&quot;&quot;,M=YE,U=KE,W=$E,se=null,_e=null;return d!=null&amp;&amp;(d.unstable_strictMode===!0&amp;&amp;(y=!0),d.identifierPrefix!==void 0&amp;&amp;(S=d.identifierPrefix),d.onUncaughtError!==void 0&amp;&amp;(M=d.onUncaughtError),d.onCaughtError!==void 0&amp;&amp;(U=d.onCaughtError),d.onRecoverableError!==void 0&amp;&amp;(W=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&amp;&amp;(se=d.unstable_transitionCallbacks),d.formState!==void 0&amp;&amp;(_e=d.formState)),c=SM(a,1,!0,c,d??null,y,S,M,U,W,se,_e),c.context=wM(null),d=c.current,y=Wr(),y=wn(y),S=Sa(y),S.callback=null,wa(d,S,y),d=y,c.current.lanes=d,Pe(c,d),oo(c),a[Hi]=c.current,Bv(a),new nm(c)},Tf.version=&quot;19.1.0&quot;,Tf}var VM;function Rk(){if(VM)return ob.exports;VM=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&gt;&quot;u&quot;||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=&quot;function&quot;))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ob.exports=Ck(),ob.exports}var Ok=Rk(),re=Lc();const md=Z0(re),GM=n=&gt;{let e;const t=new Set,i=(h,f)=&gt;{const p=typeof h==&quot;function&quot;?h(e):h;if(!Object.is(p,e)){const m=e;e=f??(typeof p!=&quot;object&quot;||p===null)?p:Object.assign({},e,p),t.forEach(g=&gt;g(e,m))}},r=()=&gt;e,l={setState:i,getState:r,getInitialState:()=&gt;u,subscribe:h=&gt;(t.add(h),()=&gt;t.delete(h))},u=e=n(i,r,l);return l},Dk=n=&gt;n?GM(n):GM,Nk=n=&gt;n;function Ik(n,e=Nk){const t=md.useSyncExternalStore(n.subscribe,()=&gt;e(n.getState()),()=&gt;e(n.getInitialState()));return md.useDebugValue(t),t}const jM=n=&gt;{const e=Dk(n),t=i=&gt;Ik(e,i);return Object.assign(t,e),t},Eo=n=&gt;n?jM(n):jM,ZS=Eo(n=&gt;({min:0,max:100,step:10,minColor:&quot;rgb(255, 0, 0)&quot;,maxColor:&quot;rgb(0, 255, 0)&quot;,setMin:e=&gt;n({min:e}),setMax:e=&gt;n({max:e}),setStep:e=&gt;n({step:e}),setMinColor:e=&gt;n({minColor:e}),setMaxColor:e=&gt;n({maxColor:e}),colorPalette:[[0,149/255,239/255],[1,0,0]],setColorPalette:e=&gt;n({colorPalette:e}),showLegend:!1,setShowLegend:e=&gt;n({showLegend:e})})),Pk=()=&gt;{const{min:n,max:e,step:t,colorPalette:i,showLegend:r}=ZS(),s=`rgb(${i[0].map(u=&gt;u*255).join(&quot;, &quot;)})`,o=`rgb(${i[1].map(u=&gt;u*255).join(&quot;, &quot;)})`,l={backgroundImage:`linear-gradient(to top, ${s}, ${o})`};return P.jsx(&quot;div&quot;,{className:r?&quot;w-20 h-80&quot;:&quot;w-0&quot;,children:P.jsx(&quot;div&quot;,{className:&quot;w-full h-full&quot;,style:l})})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Q0=&quot;176&quot;,_c={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},uc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Z2=0,Jx=1,J2=2,Lk=3,Uk=0,JS=1,Q2=2,mo=3,Qr=0,xr=1,Ki=2,la=0,vc=1,Qx=2,eS=3,tS=4,eD=5,il=100,tD=101,nD=102,iD=103,rD=104,sD=200,oD=201,aD=202,lD=203,Gg=204,jg=205,cD=206,uD=207,hD=208,fD=209,dD=210,pD=211,mD=212,gD=213,yD=214,Wg=0,Xg=1,qg=2,Tc=3,Yg=4,Kg=5,$g=6,Zg=7,Vd=0,_D=1,vD=2,ca=0,bD=1,xD=2,SD=3,wD=4,ED=5,TD=6,MD=7,nS=&quot;attached&quot;,AD=&quot;detached&quot;,ey=300,fa=301,fl=302,gd=303,yd=304,Sh=306,ws=1e3,rr=1001,ih=1002,xi=1003,ty=1004,kk=1004,hc=1005,Fk=1005,fi=1006,Ju=1007,zk=1007,Zr=1008,Bk=1008,es=1009,QS=1010,ew=1011,rh=1012,ny=1013,da=1014,Pr=1015,wh=1016,iy=1017,ry=1018,sh=1020,tw=35902,nw=1021,iw=1022,vr=1023,oh=1026,ah=1027,Gd=1028,jd=1029,rw=1030,sy=1031,Hk=1032,oy=1033,id=33776,rd=33777,sd=33778,od=33779,Jg=35840,Qg=35841,e0=35842,t0=35843,n0=36196,i0=37492,r0=37496,s0=37808,o0=37809,a0=37810,l0=37811,c0=37812,u0=37813,h0=37814,f0=37815,d0=37816,p0=37817,m0=37818,g0=37819,y0=37820,_0=37821,ad=36492,v0=36494,b0=36495,sw=36283,x0=36284,S0=36285,w0=36286,CD=2200,RD=2201,OD=2202,lh=2300,ch=2301,Cg=2302,fc=2400,dc=2401,_d=2402,ay=2500,ow=2501,DD=0,aw=1,E0=2,ND=3200,ID=3201,Vk=3202,Gk=3203,vl=0,PD=1,ta=&quot;&quot;,Nn=&quot;srgb&quot;,fr=&quot;srgb-linear&quot;,vd=&quot;linear&quot;,On=&quot;srgb&quot;,jk=0,ic=7680,Wk=7681,Xk=7682,qk=7683,Yk=34055,Kk=34056,$k=5386,Zk=512,Jk=513,Qk=514,eF=515,tF=516,nF=517,iF=518,iS=519,LD=512,UD=513,kD=514,lw=515,FD=516,zD=517,BD=518,HD=519,bd=35044,rF=35048,sF=35040,oF=35045,aF=35049,lF=35041,cF=35046,uF=35050,hF=35042,fF=&quot;100&quot;,rS=&quot;300 es&quot;,Es=2e3,xd=2001,dF={COMPUTE:&quot;compute&quot;,RENDER:&quot;render&quot;},pF={PERSPECTIVE:&quot;perspective&quot;,LINEAR:&quot;linear&quot;,FLAT:&quot;flat&quot;},mF={NORMAL:&quot;normal&quot;,CENTROID:&quot;centroid&quot;,SAMPLE:&quot;sample&quot;,FLAT_FIRST:&quot;flat first&quot;,FLAT_EITHER:&quot;flat either&quot;};let To=class{addEventListener(e,t){this._listeners===void 0&amp;&amp;(this._listeners={});const i=this._listeners;i[e]===void 0&amp;&amp;(i[e]=[]),i[e].indexOf(t)===-1&amp;&amp;i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&amp;&amp;i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&amp;&amp;r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s&lt;o;s++)r[s].call(this,e);e.target=null}}};const ar=[&quot;00&quot;,&quot;01&quot;,&quot;02&quot;,&quot;03&quot;,&quot;04&quot;,&quot;05&quot;,&quot;06&quot;,&quot;07&quot;,&quot;08&quot;,&quot;09&quot;,&quot;0a&quot;,&quot;0b&quot;,&quot;0c&quot;,&quot;0d&quot;,&quot;0e&quot;,&quot;0f&quot;,&quot;10&quot;,&quot;11&quot;,&quot;12&quot;,&quot;13&quot;,&quot;14&quot;,&quot;15&quot;,&quot;16&quot;,&quot;17&quot;,&quot;18&quot;,&quot;19&quot;,&quot;1a&quot;,&quot;1b&quot;,&quot;1c&quot;,&quot;1d&quot;,&quot;1e&quot;,&quot;1f&quot;,&quot;20&quot;,&quot;21&quot;,&quot;22&quot;,&quot;23&quot;,&quot;24&quot;,&quot;25&quot;,&quot;26&quot;,&quot;27&quot;,&quot;28&quot;,&quot;29&quot;,&quot;2a&quot;,&quot;2b&quot;,&quot;2c&quot;,&quot;2d&quot;,&quot;2e&quot;,&quot;2f&quot;,&quot;30&quot;,&quot;31&quot;,&quot;32&quot;,&quot;33&quot;,&quot;34&quot;,&quot;35&quot;,&quot;36&quot;,&quot;37&quot;,&quot;38&quot;,&quot;39&quot;,&quot;3a&quot;,&quot;3b&quot;,&quot;3c&quot;,&quot;3d&quot;,&quot;3e&quot;,&quot;3f&quot;,&quot;40&quot;,&quot;41&quot;,&quot;42&quot;,&quot;43&quot;,&quot;44&quot;,&quot;45&quot;,&quot;46&quot;,&quot;47&quot;,&quot;48&quot;,&quot;49&quot;,&quot;4a&quot;,&quot;4b&quot;,&quot;4c&quot;,&quot;4d&quot;,&quot;4e&quot;,&quot;4f&quot;,&quot;50&quot;,&quot;51&quot;,&quot;52&quot;,&quot;53&quot;,&quot;54&quot;,&quot;55&quot;,&quot;56&quot;,&quot;57&quot;,&quot;58&quot;,&quot;59&quot;,&quot;5a&quot;,&quot;5b&quot;,&quot;5c&quot;,&quot;5d&quot;,&quot;5e&quot;,&quot;5f&quot;,&quot;60&quot;,&quot;61&quot;,&quot;62&quot;,&quot;63&quot;,&quot;64&quot;,&quot;65&quot;,&quot;66&quot;,&quot;67&quot;,&quot;68&quot;,&quot;69&quot;,&quot;6a&quot;,&quot;6b&quot;,&quot;6c&quot;,&quot;6d&quot;,&quot;6e&quot;,&quot;6f&quot;,&quot;70&quot;,&quot;71&quot;,&quot;72&quot;,&quot;73&quot;,&quot;74&quot;,&quot;75&quot;,&quot;76&quot;,&quot;77&quot;,&quot;78&quot;,&quot;79&quot;,&quot;7a&quot;,&quot;7b&quot;,&quot;7c&quot;,&quot;7d&quot;,&quot;7e&quot;,&quot;7f&quot;,&quot;80&quot;,&quot;81&quot;,&quot;82&quot;,&quot;83&quot;,&quot;84&quot;,&quot;85&quot;,&quot;86&quot;,&quot;87&quot;,&quot;88&quot;,&quot;89&quot;,&quot;8a&quot;,&quot;8b&quot;,&quot;8c&quot;,&quot;8d&quot;,&quot;8e&quot;,&quot;8f&quot;,&quot;90&quot;,&quot;91&quot;,&quot;92&quot;,&quot;93&quot;,&quot;94&quot;,&quot;95&quot;,&quot;96&quot;,&quot;97&quot;,&quot;98&quot;,&quot;99&quot;,&quot;9a&quot;,&quot;9b&quot;,&quot;9c&quot;,&quot;9d&quot;,&quot;9e&quot;,&quot;9f&quot;,&quot;a0&quot;,&quot;a1&quot;,&quot;a2&quot;,&quot;a3&quot;,&quot;a4&quot;,&quot;a5&quot;,&quot;a6&quot;,&quot;a7&quot;,&quot;a8&quot;,&quot;a9&quot;,&quot;aa&quot;,&quot;ab&quot;,&quot;ac&quot;,&quot;ad&quot;,&quot;ae&quot;,&quot;af&quot;,&quot;b0&quot;,&quot;b1&quot;,&quot;b2&quot;,&quot;b3&quot;,&quot;b4&quot;,&quot;b5&quot;,&quot;b6&quot;,&quot;b7&quot;,&quot;b8&quot;,&quot;b9&quot;,&quot;ba&quot;,&quot;bb&quot;,&quot;bc&quot;,&quot;bd&quot;,&quot;be&quot;,&quot;bf&quot;,&quot;c0&quot;,&quot;c1&quot;,&quot;c2&quot;,&quot;c3&quot;,&quot;c4&quot;,&quot;c5&quot;,&quot;c6&quot;,&quot;c7&quot;,&quot;c8&quot;,&quot;c9&quot;,&quot;ca&quot;,&quot;cb&quot;,&quot;cc&quot;,&quot;cd&quot;,&quot;ce&quot;,&quot;cf&quot;,&quot;d0&quot;,&quot;d1&quot;,&quot;d2&quot;,&quot;d3&quot;,&quot;d4&quot;,&quot;d5&quot;,&quot;d6&quot;,&quot;d7&quot;,&quot;d8&quot;,&quot;d9&quot;,&quot;da&quot;,&quot;db&quot;,&quot;dc&quot;,&quot;dd&quot;,&quot;de&quot;,&quot;df&quot;,&quot;e0&quot;,&quot;e1&quot;,&quot;e2&quot;,&quot;e3&quot;,&quot;e4&quot;,&quot;e5&quot;,&quot;e6&quot;,&quot;e7&quot;,&quot;e8&quot;,&quot;e9&quot;,&quot;ea&quot;,&quot;eb&quot;,&quot;ec&quot;,&quot;ed&quot;,&quot;ee&quot;,&quot;ef&quot;,&quot;f0&quot;,&quot;f1&quot;,&quot;f2&quot;,&quot;f3&quot;,&quot;f4&quot;,&quot;f5&quot;,&quot;f6&quot;,&quot;f7&quot;,&quot;f8&quot;,&quot;f9&quot;,&quot;fa&quot;,&quot;fb&quot;,&quot;fc&quot;,&quot;fd&quot;,&quot;fe&quot;,&quot;ff&quot;];let WM=1234567;const bc=Math.PI/180,uh=180/Math.PI;function Jr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ar[n&amp;255]+ar[n&gt;&gt;8&amp;255]+ar[n&gt;&gt;16&amp;255]+ar[n&gt;&gt;24&amp;255]+&quot;-&quot;+ar[e&amp;255]+ar[e&gt;&gt;8&amp;255]+&quot;-&quot;+ar[e&gt;&gt;16&amp;15|64]+ar[e&gt;&gt;24&amp;255]+&quot;-&quot;+ar[t&amp;63|128]+ar[t&gt;&gt;8&amp;255]+&quot;-&quot;+ar[t&gt;&gt;16&amp;255]+ar[t&gt;&gt;24&amp;255]+ar[i&amp;255]+ar[i&gt;&gt;8&amp;255]+ar[i&gt;&gt;16&amp;255]+ar[i&gt;&gt;24&amp;255]).toLowerCase()}function Vt(n,e,t){return Math.max(e,Math.min(t,n))}function cw(n,e){return(n%e+e)%e}function gF(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function yF(n,e,t){return n!==e?(t-n)/(e-n):0}function ld(n,e,t){return(1-t)*n+t*e}function _F(n,e,t,i){return ld(n,e,1-Math.exp(-t*i))}function vF(n,e=1){return e-Math.abs(cw(n,e*2)-e)}function bF(n,e,t){return n&lt;=e?0:n&gt;=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function xF(n,e,t){return n&lt;=e?0:n&gt;=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function SF(n,e){return n+Math.floor(Math.random()*(e-n+1))}function wF(n,e){return n+Math.random()*(e-n)}function EF(n){return n*(.5-Math.random())}function TF(n){n!==void 0&amp;&amp;(WM=n);let e=WM+=1831565813;return e=Math.imul(e^e&gt;&gt;&gt;15,e|1),e^=e+Math.imul(e^e&gt;&gt;&gt;7,e|61),((e^e&gt;&gt;&gt;14)&gt;&gt;&gt;0)/4294967296}function MF(n){return n*bc}function AF(n){return n*uh}function CF(n){return(n&amp;n-1)===0&amp;&amp;n!==0}function RF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function OF(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function DF(n,e,t,i,r){const s=Math.cos,o=Math.sin,l=s(t/2),u=o(t/2),h=s((e+i)/2),f=o((e+i)/2),p=s((e-i)/2),m=o((e-i)/2),g=s((i-e)/2),v=o((i-e)/2);switch(r){case&quot;XYX&quot;:n.set(l*f,u*p,u*m,l*h);break;case&quot;YZY&quot;:n.set(u*m,l*f,u*p,l*h);break;case&quot;ZXZ&quot;:n.set(u*p,u*m,l*f,l*h);break;case&quot;XZX&quot;:n.set(l*f,u*v,u*g,l*h);break;case&quot;YXY&quot;:n.set(u*g,l*f,u*v,l*h);break;case&quot;ZYZ&quot;:n.set(u*v,u*g,l*f,l*h);break;default:console.warn(&quot;THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: &quot;+r)}}function yr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error(&quot;Invalid component type.&quot;)}}function Xt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error(&quot;Invalid component type.&quot;)}}const rl={DEG2RAD:bc,RAD2DEG:uh,generateUUID:Jr,clamp:Vt,euclideanModulo:cw,mapLinear:gF,inverseLerp:yF,lerp:ld,damp:_F,pingpong:vF,smoothstep:bF,smootherstep:xF,randInt:SF,randFloat:wF,randFloatSpread:EF,seededRandom:TF,degToRad:MF,radToDeg:AF,isPowerOfTwo:CF,ceilPowerOfTwo:RF,floorPowerOfTwo:OF,setQuaternionFromProperEuler:DF,normalize:Xt,denormalize:yr};class Oe{constructor(e=0,t=0){Oe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error(&quot;index is out of range: &quot;+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error(&quot;index is out of range: &quot;+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Vt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&amp;&amp;e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jt{constructor(e,t,i,r,s,o,l,u,h){jt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&amp;&amp;this.set(e,t,i,r,s,o,l,u,h)}set(e,t,i,r,s,o,l,u,h){const f=this.elements;return f[0]=e,f[1]=r,f[2]=l,f[3]=t,f[4]=s,f[5]=u,f[6]=i,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[3],u=i[6],h=i[1],f=i[4],p=i[7],m=i[2],g=i[5],v=i[8],x=r[0],b=r[3],_=r[6],T=r[1],w=r[4],E=r[7],R=r[2],N=r[5],A=r[8];return s[0]=o*x+l*T+u*R,s[3]=o*b+l*w+u*N,s[6]=o*_+l*E+u*A,s[1]=h*x+f*T+p*R,s[4]=h*b+f*w+p*N,s[7]=h*_+f*E+p*A,s[2]=m*x+g*T+v*R,s[5]=m*b+g*w+v*N,s[8]=m*_+g*E+v*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8];return t*o*f-t*l*h-i*s*f+i*l*u+r*s*h-r*o*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8],p=f*o-l*h,m=l*u-f*s,g=h*s-o*u,v=t*p+i*m+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=p*x,e[1]=(r*h-f*i)*x,e[2]=(l*i-r*o)*x,e[3]=m*x,e[4]=(f*t-r*u)*x,e[5]=(r*s-l*t)*x,e[6]=g*x,e[7]=(i*u-h*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,l){const u=Math.cos(s),h=Math.sin(s);return this.set(i*u,i*h,-i*(u*o+h*l)+o+e,-r*h,r*u,-r*(-h*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(hb.makeScale(e,t)),this}rotate(e){return this.premultiply(hb.makeRotation(-e)),this}translate(e,t){return this.premultiply(hb.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r&lt;9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i&lt;9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const hb=new jt;function VD(n){for(let e=n.length-1;e&gt;=0;--e)if(n[e]&gt;=65535)return!0;return!1}const NF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Yu(n,e){return new NF[n](e)}function Sd(n){return document.createElementNS(&quot;http://www.w3.org/1999/xhtml&quot;,n)}function GD(){const n=Sd(&quot;canvas&quot;);return n.style.display=&quot;block&quot;,n}const XM={};function Rg(n){n in XM||(XM[n]=!0,console.warn(n))}function IF(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function PF(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function LF(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const qM=new jt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),YM=new jt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function UF(){const n={enabled:!0,workingColorSpace:fr,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===On&amp;&amp;(r.r=ua(r.r),r.g=ua(r.g),r.b=ua(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&amp;&amp;(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===On&amp;&amp;(r.r=Qu(r.r),r.g=Qu(r.g),r.b=Qu(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===ta?vd:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[fr]:{primaries:e,whitePoint:i,transfer:vd,toXYZ:qM,fromXYZ:YM,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Nn},outputColorSpaceConfig:{drawingBufferColorSpace:Nn}},[Nn]:{primaries:e,whitePoint:i,transfer:On,toXYZ:qM,fromXYZ:YM,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Nn}}}),n}const Zt=UF();function ua(n){return n&lt;.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Qu(n){return n&lt;.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let yu;class jD{static getDataURL(e,t=&quot;image/png&quot;){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement&gt;&quot;u&quot;)return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{yu===void 0&amp;&amp;(yu=Sd(&quot;canvas&quot;)),yu.width=e.width,yu.height=e.height;const r=yu.getContext(&quot;2d&quot;);e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=yu}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;e instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;e instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;e instanceof ImageBitmap){const t=Sd(&quot;canvas&quot;);t.width=e.width,t.height=e.height;const i=t.getContext(&quot;2d&quot;);i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o&lt;s.length;o++)s[o]=ua(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i&lt;t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(ua(t[i]/255)*255):t[i]=ua(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn(&quot;THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.&quot;),e}}let kF=0;class ll{constructor(e=null){this.isSource=!0,Object.defineProperty(this,&quot;id&quot;,{value:kF++}),this.uuid=Jr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&amp;&amp;this.version++}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;;if(!t&amp;&amp;e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:&quot;&quot;},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o&lt;l;o++)r[o].isDataTexture?s.push(fb(r[o].image)):s.push(fb(r[o]))}else s=fb(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function fb(n){return typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;n instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;n instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;n instanceof ImageBitmap?jD.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn(&quot;THREE.Texture: Unable to serialize Texture.&quot;),{})}let FF=0;class Kn extends To{constructor(e=Kn.DEFAULT_IMAGE,t=Kn.DEFAULT_MAPPING,i=rr,r=rr,s=fi,o=Zr,l=vr,u=es,h=Kn.DEFAULT_ANISOTROPY,f=ta){super(),this.isTexture=!0,Object.defineProperty(this,&quot;id&quot;,{value:FF++}),this.uuid=Jr(),this.name=&quot;&quot;,this.source=new ll(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Oe(0,0),this.repeat=new Oe(1,1),this.center=new Oe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;;if(!t&amp;&amp;e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:&quot;Texture&quot;,generator:&quot;Texture.toJSON&quot;},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length&gt;0&amp;&amp;(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}transformUv(e){if(this.mapping!==ey)return e;if(e.applyMatrix3(this.matrix),e.x&lt;0||e.x&gt;1)switch(this.wrapS){case ws:e.x=e.x-Math.floor(e.x);break;case rr:e.x=e.x&lt;0?0:1;break;case ih:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y&lt;0||e.y&gt;1)switch(this.wrapT){case ws:e.y=e.y-Math.floor(e.y);break;case rr:e.y=e.y&lt;0?0:1;break;case ih:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&amp;&amp;(e.y=1-e.y),e}set needsUpdate(e){e===!0&amp;&amp;(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&amp;&amp;this.pmremVersion++}}Kn.DEFAULT_IMAGE=null;Kn.DEFAULT_MAPPING=ey;Kn.DEFAULT_ANISOTROPY=1;class yn{constructor(e=0,t=0,i=0,r=1){yn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error(&quot;index is out of range: &quot;+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(&quot;index is out of range: &quot;+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t&lt;1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const u=e.elements,h=u[0],f=u[4],p=u[8],m=u[1],g=u[5],v=u[9],x=u[2],b=u[6],_=u[10];if(Math.abs(f-m)&lt;.01&amp;&amp;Math.abs(p-x)&lt;.01&amp;&amp;Math.abs(v-b)&lt;.01){if(Math.abs(f+m)&lt;.1&amp;&amp;Math.abs(p+x)&lt;.1&amp;&amp;Math.abs(v+b)&lt;.1&amp;&amp;Math.abs(h+g+_-3)&lt;.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(h+1)/2,E=(g+1)/2,R=(_+1)/2,N=(f+m)/4,A=(p+x)/4,D=(v+b)/4;return w&gt;E&amp;&amp;w&gt;R?w&lt;.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=N/i,s=A/i):E&gt;R?E&lt;.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=N/r,s=D/r):R&lt;.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(R),i=A/s,r=D/s),this.set(i,r,s,t),this}let T=Math.sqrt((b-v)*(b-v)+(p-x)*(p-x)+(m-f)*(m-f));return Math.abs(T)&lt;.001&amp;&amp;(T=1),this.x=(b-v)/T,this.y=(p-x)/T,this.z=(m-f)/T,this.w=Math.acos((h+g+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this.w=Vt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this.w=Vt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&amp;&amp;e.y===this.y&amp;&amp;e.z===this.z&amp;&amp;e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ly extends To{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new yn(0,0,e,t),this.scissorTest=!1,this.viewport=new yn(0,0,e,t);const r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:fi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);const s=new Kn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let l=0;l&lt;o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&amp;&amp;(this._depthTexture.renderTarget=null),e!==null&amp;&amp;(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r&lt;s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t&lt;i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new ll(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&amp;&amp;(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}}class Js extends ly{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Wd extends Kn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=xi,this.minFilter=xi,this.wrapR=rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class zF extends Js{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Wd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class cy extends Kn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=xi,this.minFilter=xi,this.wrapR=rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class BF extends Js{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new cy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Si{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,l){let u=i[r+0],h=i[r+1],f=i[r+2],p=i[r+3];const m=s[o+0],g=s[o+1],v=s[o+2],x=s[o+3];if(l===0){e[t+0]=u,e[t+1]=h,e[t+2]=f,e[t+3]=p;return}if(l===1){e[t+0]=m,e[t+1]=g,e[t+2]=v,e[t+3]=x;return}if(p!==x||u!==m||h!==g||f!==v){let b=1-l;const _=u*m+h*g+f*v+p*x,T=_&gt;=0?1:-1,w=1-_*_;if(w&gt;Number.EPSILON){const R=Math.sqrt(w),N=Math.atan2(R,_*T);b=Math.sin(b*N)/R,l=Math.sin(l*N)/R}const E=l*T;if(u=u*b+m*E,h=h*b+g*E,f=f*b+v*E,p=p*b+x*E,b===1-l){const R=1/Math.sqrt(u*u+h*h+f*f+p*p);u*=R,h*=R,f*=R,p*=R}}e[t]=u,e[t+1]=h,e[t+2]=f,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const l=i[r],u=i[r+1],h=i[r+2],f=i[r+3],p=s[o],m=s[o+1],g=s[o+2],v=s[o+3];return e[t]=l*v+f*p+u*g-h*m,e[t+1]=u*v+f*m+h*p-l*g,e[t+2]=h*v+f*g+l*m-u*p,e[t+3]=f*v-l*p-u*m-h*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,u=Math.sin,h=l(i/2),f=l(r/2),p=l(s/2),m=u(i/2),g=u(r/2),v=u(s/2);switch(o){case&quot;XYZ&quot;:this._x=m*f*p+h*g*v,this._y=h*g*p-m*f*v,this._z=h*f*v+m*g*p,this._w=h*f*p-m*g*v;break;case&quot;YXZ&quot;:this._x=m*f*p+h*g*v,this._y=h*g*p-m*f*v,this._z=h*f*v-m*g*p,this._w=h*f*p+m*g*v;break;case&quot;ZXY&quot;:this._x=m*f*p-h*g*v,this._y=h*g*p+m*f*v,this._z=h*f*v+m*g*p,this._w=h*f*p-m*g*v;break;case&quot;ZYX&quot;:this._x=m*f*p-h*g*v,this._y=h*g*p+m*f*v,this._z=h*f*v-m*g*p,this._w=h*f*p+m*g*v;break;case&quot;YZX&quot;:this._x=m*f*p+h*g*v,this._y=h*g*p+m*f*v,this._z=h*f*v-m*g*p,this._w=h*f*p-m*g*v;break;case&quot;XZY&quot;:this._x=m*f*p-h*g*v,this._y=h*g*p-m*f*v,this._z=h*f*v+m*g*p,this._w=h*f*p+m*g*v;break;default:console.warn(&quot;THREE.Quaternion: .setFromEuler() encountered an unknown order: &quot;+o)}return t===!0&amp;&amp;this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],l=t[5],u=t[9],h=t[2],f=t[6],p=t[10],m=i+l+p;if(m&gt;0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(f-u)*g,this._y=(s-h)*g,this._z=(o-r)*g}else if(i&gt;l&amp;&amp;i&gt;p){const g=2*Math.sqrt(1+i-l-p);this._w=(f-u)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+h)/g}else if(l&gt;p){const g=2*Math.sqrt(1+l-i-p);this._w=(s-h)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(u+f)/g}else{const g=2*Math.sqrt(1+p-i-l);this._w=(o-r)/g,this._x=(s+h)/g,this._y=(u+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i&lt;Number.EPSILON?(i=0,Math.abs(e.x)&gt;Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,l=t._x,u=t._y,h=t._z,f=t._w;return this._x=i*f+o*l+r*h-s*u,this._y=r*f+o*u+s*l-i*h,this._z=s*f+o*h+i*u-r*l,this._w=o*f-i*l-r*u-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+i*e._x+r*e._y+s*e._z;if(l&lt;0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l&gt;=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const u=1-l*l;if(u&lt;=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const h=Math.sqrt(u),f=Math.atan2(h,l),p=Math.sin((1-t)*f)/h,m=Math.sin(t*f)/h;return this._w=o*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&amp;&amp;e._y===this._y&amp;&amp;e._z===this._z&amp;&amp;e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,i=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&amp;&amp;(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error(&quot;index is out of range: &quot;+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(&quot;index is out of range: &quot;+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(KM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(KM.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,l=e.z,u=e.w,h=2*(o*r-l*i),f=2*(l*t-s*r),p=2*(s*i-o*t);return this.x=t+u*h+o*p-l*f,this.y=i+u*f+l*h-s*p,this.z=r+u*p+s*f-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*o-i*u,this.z=i*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return db.copy(this).projectOnVector(e),this.sub(db)}reflect(e){return this.sub(db.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Vt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&amp;&amp;e.y===this.y&amp;&amp;e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const db=new Y,KM=new Si;class Ri{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t&lt;i;t+=3)this.expandByPoint(Ls.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t&lt;i;t++)this.expandByPoint(Ls.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t&lt;i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ls.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x&lt;this.min.x||this.max.y&lt;this.min.y||this.max.z&lt;this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute(&quot;position&quot;);if(t===!0&amp;&amp;s!==void 0&amp;&amp;e.isInstancedMesh!==!0)for(let o=0,l=s.count;o&lt;l;o++)e.isMesh===!0?e.getVertexPosition(o,Ls):Ls.fromBufferAttribute(s,o),Ls.applyMatrix4(e.matrixWorld),this.expandByPoint(Ls);else e.boundingBox!==void 0?(e.boundingBox===null&amp;&amp;e.computeBoundingBox(),rm.copy(e.boundingBox)):(i.boundingBox===null&amp;&amp;i.computeBoundingBox(),rm.copy(i.boundingBox)),rm.applyMatrix4(e.matrixWorld),this.union(rm)}const r=e.children;for(let s=0,o=r.length;s&lt;o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x&gt;=this.min.x&amp;&amp;e.x&lt;=this.max.x&amp;&amp;e.y&gt;=this.min.y&amp;&amp;e.y&lt;=this.max.y&amp;&amp;e.z&gt;=this.min.z&amp;&amp;e.z&lt;=this.max.z}containsBox(e){return this.min.x&lt;=e.min.x&amp;&amp;e.max.x&lt;=this.max.x&amp;&amp;this.min.y&lt;=e.min.y&amp;&amp;e.max.y&lt;=this.max.y&amp;&amp;this.min.z&lt;=e.min.z&amp;&amp;e.max.z&lt;=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x&gt;=this.min.x&amp;&amp;e.min.x&lt;=this.max.x&amp;&amp;e.max.y&gt;=this.min.y&amp;&amp;e.min.y&lt;=this.max.y&amp;&amp;e.max.z&gt;=this.min.z&amp;&amp;e.min.z&lt;=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ls),Ls.distanceToSquared(e.center)&lt;=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x&gt;0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y&gt;0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z&gt;0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t&lt;=-e.constant&amp;&amp;i&gt;=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Mf),sm.subVectors(this.max,Mf),_u.subVectors(e.a,Mf),vu.subVectors(e.b,Mf),bu.subVectors(e.c,Mf),Ha.subVectors(vu,_u),Va.subVectors(bu,vu),Hl.subVectors(_u,bu);let t=[0,-Ha.z,Ha.y,0,-Va.z,Va.y,0,-Hl.z,Hl.y,Ha.z,0,-Ha.x,Va.z,0,-Va.x,Hl.z,0,-Hl.x,-Ha.y,Ha.x,0,-Va.y,Va.x,0,-Hl.y,Hl.x,0];return!pb(t,_u,vu,bu,sm)||(t=[1,0,0,0,1,0,0,0,1],!pb(t,_u,vu,bu,sm))?!1:(om.crossVectors(Ha,Va),t=[om.x,om.y,om.z],pb(t,_u,vu,bu,sm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ls).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ls).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&amp;&amp;this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Go[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Go[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Go[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Go[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Go[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Go[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Go[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Go[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Go),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&amp;&amp;e.max.equals(this.max)}}const Go=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Ls=new Y,rm=new Ri,_u=new Y,vu=new Y,bu=new Y,Ha=new Y,Va=new Y,Hl=new Y,Mf=new Y,sm=new Y,om=new Y,Vl=new Y;function pb(n,e,t,i,r){for(let s=0,o=n.length-3;s&lt;=o;s+=3){Vl.fromArray(n,s);const l=r.x*Math.abs(Vl.x)+r.y*Math.abs(Vl.y)+r.z*Math.abs(Vl.z),u=e.dot(Vl),h=t.dot(Vl),f=i.dot(Vl);if(Math.max(-Math.max(u,h,f),Math.min(u,h,f))&gt;l)return!1}return!0}const HF=new Ri,Af=new Y,mb=new Y;class wi{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):HF.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s&lt;o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius&lt;0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)&lt;=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)&lt;=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))&lt;=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i&gt;this.radius*this.radius&amp;&amp;(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Af.subVectors(e,this.center);const t=Af.lengthSq();if(t&gt;this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Af,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(mb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Af.copy(e.center).add(mb)),this.expandByPoint(Af.copy(e.center).sub(mb))),this)}equals(e){return e.center.equals(this.center)&amp;&amp;e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const jo=new Y,gb=new Y,am=new Y,Ga=new Y,yb=new Y,lm=new Y,_b=new Y;class bl{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,jo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i&lt;0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=jo.subVectors(e,this.origin).dot(this.direction);return t&lt;0?this.origin.distanceToSquared(e):(jo.copy(this.origin).addScaledVector(this.direction,t),jo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){gb.copy(e).add(t).multiplyScalar(.5),am.copy(t).sub(e).normalize(),Ga.copy(this.origin).sub(gb);const s=e.distanceTo(t)*.5,o=-this.direction.dot(am),l=Ga.dot(this.direction),u=-Ga.dot(am),h=Ga.lengthSq(),f=Math.abs(1-o*o);let p,m,g,v;if(f&gt;0)if(p=o*u-l,m=o*l-u,v=s*f,p&gt;=0)if(m&gt;=-v)if(m&lt;=v){const x=1/f;p*=x,m*=x,g=p*(p+o*m+2*l)+m*(o*p+m+2*u)+h}else m=s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*u)+h;else m=-s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*u)+h;else m&lt;=-v?(p=Math.max(0,-(-o*s+l)),m=p&gt;0?-s:Math.min(Math.max(-s,-u),s),g=-p*p+m*(m+2*u)+h):m&lt;=v?(p=0,m=Math.min(Math.max(-s,-u),s),g=m*(m+2*u)+h):(p=Math.max(0,-(o*s+l)),m=p&gt;0?s:Math.min(Math.max(-s,-u),s),g=-p*p+m*(m+2*u)+h);else m=o&gt;0?-s:s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*u)+h;return i&amp;&amp;i.copy(this.origin).addScaledVector(this.direction,p),r&amp;&amp;r.copy(gb).addScaledVector(am,m),g}intersectSphere(e,t){jo.subVectors(e.center,this.origin);const i=jo.dot(this.direction),r=jo.dot(jo)-i*i,s=e.radius*e.radius;if(r&gt;s)return null;const o=Math.sqrt(s-r),l=i-o,u=i+o;return u&lt;0?null:l&lt;0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)&lt;=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i&gt;=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t&lt;0}intersectBox(e,t){let i,r,s,o,l,u;const h=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,m=this.origin;return h&gt;=0?(i=(e.min.x-m.x)*h,r=(e.max.x-m.x)*h):(i=(e.max.x-m.x)*h,r=(e.min.x-m.x)*h),f&gt;=0?(s=(e.min.y-m.y)*f,o=(e.max.y-m.y)*f):(s=(e.max.y-m.y)*f,o=(e.min.y-m.y)*f),i&gt;o||s&gt;r||((s&gt;i||isNaN(i))&amp;&amp;(i=s),(o&lt;r||isNaN(r))&amp;&amp;(r=o),p&gt;=0?(l=(e.min.z-m.z)*p,u=(e.max.z-m.z)*p):(l=(e.max.z-m.z)*p,u=(e.min.z-m.z)*p),i&gt;u||l&gt;r)||((l&gt;i||i!==i)&amp;&amp;(i=l),(u&lt;r||r!==r)&amp;&amp;(r=u),r&lt;0)?null:this.at(i&gt;=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,jo)!==null}intersectTriangle(e,t,i,r,s){yb.subVectors(t,e),lm.subVectors(i,e),_b.crossVectors(yb,lm);let o=this.direction.dot(_b),l;if(o&gt;0){if(r)return null;l=1}else if(o&lt;0)l=-1,o=-o;else return null;Ga.subVectors(this.origin,e);const u=l*this.direction.dot(lm.crossVectors(Ga,lm));if(u&lt;0)return null;const h=l*this.direction.dot(yb.cross(Ga));if(h&lt;0||u+h&gt;o)return null;const f=-l*Ga.dot(_b);return f&lt;0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&amp;&amp;e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yt{constructor(e,t,i,r,s,o,l,u,h,f,p,m,g,v,x,b){yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&amp;&amp;this.set(e,t,i,r,s,o,l,u,h,f,p,m,g,v,x,b)}set(e,t,i,r,s,o,l,u,h,f,p,m,g,v,x,b){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=l,_[13]=u,_[2]=h,_[6]=f,_[10]=p,_[14]=m,_[3]=g,_[7]=v,_[11]=x,_[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/xu.setFromMatrixColumn(e,0).length(),s=1/xu.setFromMatrixColumn(e,1).length(),o=1/xu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),l=Math.sin(i),u=Math.cos(r),h=Math.sin(r),f=Math.cos(s),p=Math.sin(s);if(e.order===&quot;XYZ&quot;){const m=o*f,g=o*p,v=l*f,x=l*p;t[0]=u*f,t[4]=-u*p,t[8]=h,t[1]=g+v*h,t[5]=m-x*h,t[9]=-l*u,t[2]=x-m*h,t[6]=v+g*h,t[10]=o*u}else if(e.order===&quot;YXZ&quot;){const m=u*f,g=u*p,v=h*f,x=h*p;t[0]=m+x*l,t[4]=v*l-g,t[8]=o*h,t[1]=o*p,t[5]=o*f,t[9]=-l,t[2]=g*l-v,t[6]=x+m*l,t[10]=o*u}else if(e.order===&quot;ZXY&quot;){const m=u*f,g=u*p,v=h*f,x=h*p;t[0]=m-x*l,t[4]=-o*p,t[8]=v+g*l,t[1]=g+v*l,t[5]=o*f,t[9]=x-m*l,t[2]=-o*h,t[6]=l,t[10]=o*u}else if(e.order===&quot;ZYX&quot;){const m=o*f,g=o*p,v=l*f,x=l*p;t[0]=u*f,t[4]=v*h-g,t[8]=m*h+x,t[1]=u*p,t[5]=x*h+m,t[9]=g*h-v,t[2]=-h,t[6]=l*u,t[10]=o*u}else if(e.order===&quot;YZX&quot;){const m=o*u,g=o*h,v=l*u,x=l*h;t[0]=u*f,t[4]=x-m*p,t[8]=v*p+g,t[1]=p,t[5]=o*f,t[9]=-l*f,t[2]=-h*f,t[6]=g*p+v,t[10]=m-x*p}else if(e.order===&quot;XZY&quot;){const m=o*u,g=o*h,v=l*u,x=l*h;t[0]=u*f,t[4]=-p,t[8]=h*f,t[1]=m*p+x,t[5]=o*f,t[9]=g*p-v,t[2]=v*p-g,t[6]=l*f,t[10]=x*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(VF,e,GF)}lookAt(e,t,i){const r=this.elements;return qr.subVectors(e,t),qr.lengthSq()===0&amp;&amp;(qr.z=1),qr.normalize(),ja.crossVectors(i,qr),ja.lengthSq()===0&amp;&amp;(Math.abs(i.z)===1?qr.x+=1e-4:qr.z+=1e-4,qr.normalize(),ja.crossVectors(i,qr)),ja.normalize(),cm.crossVectors(qr,ja),r[0]=ja.x,r[4]=cm.x,r[8]=qr.x,r[1]=ja.y,r[5]=cm.y,r[9]=qr.y,r[2]=ja.z,r[6]=cm.z,r[10]=qr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[4],u=i[8],h=i[12],f=i[1],p=i[5],m=i[9],g=i[13],v=i[2],x=i[6],b=i[10],_=i[14],T=i[3],w=i[7],E=i[11],R=i[15],N=r[0],A=r[4],D=r[8],C=r[12],O=r[1],L=r[5],V=r[9],Z=r[13],z=r[2],K=r[6],I=r[10],j=r[14],G=r[3],ee=r[7],F=r[11],ne=r[15];return s[0]=o*N+l*O+u*z+h*G,s[4]=o*A+l*L+u*K+h*ee,s[8]=o*D+l*V+u*I+h*F,s[12]=o*C+l*Z+u*j+h*ne,s[1]=f*N+p*O+m*z+g*G,s[5]=f*A+p*L+m*K+g*ee,s[9]=f*D+p*V+m*I+g*F,s[13]=f*C+p*Z+m*j+g*ne,s[2]=v*N+x*O+b*z+_*G,s[6]=v*A+x*L+b*K+_*ee,s[10]=v*D+x*V+b*I+_*F,s[14]=v*C+x*Z+b*j+_*ne,s[3]=T*N+w*O+E*z+R*G,s[7]=T*A+w*L+E*K+R*ee,s[11]=T*D+w*V+E*I+R*F,s[15]=T*C+w*Z+E*j+R*ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],l=e[5],u=e[9],h=e[13],f=e[2],p=e[6],m=e[10],g=e[14],v=e[3],x=e[7],b=e[11],_=e[15];return v*(+s*u*p-r*h*p-s*l*m+i*h*m+r*l*g-i*u*g)+x*(+t*u*g-t*h*m+s*o*m-r*o*g+r*h*f-s*u*f)+b*(+t*h*p-t*l*g-s*o*p+i*o*g+s*l*f-i*h*f)+_*(-r*l*f-t*u*p+t*l*m+r*o*p-i*o*m+i*u*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8],p=e[9],m=e[10],g=e[11],v=e[12],x=e[13],b=e[14],_=e[15],T=p*b*h-x*m*h+x*u*g-l*b*g-p*u*_+l*m*_,w=v*m*h-f*b*h-v*u*g+o*b*g+f*u*_-o*m*_,E=f*x*h-v*p*h+v*l*g-o*x*g-f*l*_+o*p*_,R=v*p*u-f*x*u-v*l*m+o*x*m+f*l*b-o*p*b,N=t*T+i*w+r*E+s*R;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/N;return e[0]=T*A,e[1]=(x*m*s-p*b*s-x*r*g+i*b*g+p*r*_-i*m*_)*A,e[2]=(l*b*s-x*u*s+x*r*h-i*b*h-l*r*_+i*u*_)*A,e[3]=(p*u*s-l*m*s-p*r*h+i*m*h+l*r*g-i*u*g)*A,e[4]=w*A,e[5]=(f*b*s-v*m*s+v*r*g-t*b*g-f*r*_+t*m*_)*A,e[6]=(v*u*s-o*b*s-v*r*h+t*b*h+o*r*_-t*u*_)*A,e[7]=(o*m*s-f*u*s+f*r*h-t*m*h-o*r*g+t*u*g)*A,e[8]=E*A,e[9]=(v*p*s-f*x*s-v*i*g+t*x*g+f*i*_-t*p*_)*A,e[10]=(o*x*s-v*l*s+v*i*h-t*x*h-o*i*_+t*l*_)*A,e[11]=(f*l*s-o*p*s-f*i*h+t*p*h+o*i*g-t*l*g)*A,e[12]=R*A,e[13]=(f*x*r-v*p*r+v*i*m-t*x*m-f*i*b+t*p*b)*A,e[14]=(v*l*r-o*x*r-v*i*u+t*x*u+o*i*b-t*l*b)*A,e[15]=(o*p*r-f*l*r+f*i*u-t*p*u-o*i*m+t*l*m)*A,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,l=e.y,u=e.z,h=s*o,f=s*l;return this.set(h*o+i,h*l-r*u,h*u+r*l,0,h*l+r*u,f*l+i,f*u-r*o,0,h*u-r*l,f*u+r*o,s*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,l=t._z,u=t._w,h=s+s,f=o+o,p=l+l,m=s*h,g=s*f,v=s*p,x=o*f,b=o*p,_=l*p,T=u*h,w=u*f,E=u*p,R=i.x,N=i.y,A=i.z;return r[0]=(1-(x+_))*R,r[1]=(g+E)*R,r[2]=(v-w)*R,r[3]=0,r[4]=(g-E)*N,r[5]=(1-(m+_))*N,r[6]=(b+T)*N,r[7]=0,r[8]=(v+w)*A,r[9]=(b-T)*A,r[10]=(1-(m+x))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=xu.set(r[0],r[1],r[2]).length();const o=xu.set(r[4],r[5],r[6]).length(),l=xu.set(r[8],r[9],r[10]).length();this.determinant()&lt;0&amp;&amp;(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Us.copy(this);const h=1/s,f=1/o,p=1/l;return Us.elements[0]*=h,Us.elements[1]*=h,Us.elements[2]*=h,Us.elements[4]*=f,Us.elements[5]*=f,Us.elements[6]*=f,Us.elements[8]*=p,Us.elements[9]*=p,Us.elements[10]*=p,t.setFromRotationMatrix(Us),i.x=s,i.y=o,i.z=l,this}makePerspective(e,t,i,r,s,o,l=Es){const u=this.elements,h=2*s/(t-e),f=2*s/(i-r),p=(t+e)/(t-e),m=(i+r)/(i-r);let g,v;if(l===Es)g=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(l===xd)g=-o/(o-s),v=-o*s/(o-s);else throw new Error(&quot;THREE.Matrix4.makePerspective(): Invalid coordinate system: &quot;+l);return u[0]=h,u[4]=0,u[8]=p,u[12]=0,u[1]=0,u[5]=f,u[9]=m,u[13]=0,u[2]=0,u[6]=0,u[10]=g,u[14]=v,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,s,o,l=Es){const u=this.elements,h=1/(t-e),f=1/(i-r),p=1/(o-s),m=(t+e)*h,g=(i+r)*f;let v,x;if(l===Es)v=(o+s)*p,x=-2*p;else if(l===xd)v=s*p,x=-1*p;else throw new Error(&quot;THREE.Matrix4.makeOrthographic(): Invalid coordinate system: &quot;+l);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-m,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-g,u[2]=0,u[6]=0,u[10]=x,u[14]=-v,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r&lt;16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i&lt;16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const xu=new Y,Us=new yt,VF=new Y(0,0,0),GF=new Y(1,1,1),ja=new Y,cm=new Y,qr=new Y,$M=new yt,ZM=new Si;class Sr{constructor(e=0,t=0,i=0,r=Sr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],u=r[1],h=r[5],f=r[9],p=r[2],m=r[6],g=r[10];switch(t){case&quot;XYZ&quot;:this._y=Math.asin(Vt(l,-1,1)),Math.abs(l)&lt;.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,h),this._z=0);break;case&quot;YXZ&quot;:this._x=Math.asin(-Vt(f,-1,1)),Math.abs(f)&lt;.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-p,s),this._z=0);break;case&quot;ZXY&quot;:this._x=Math.asin(Vt(m,-1,1)),Math.abs(m)&lt;.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(u,s));break;case&quot;ZYX&quot;:this._y=Math.asin(-Vt(p,-1,1)),Math.abs(p)&lt;.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case&quot;YZX&quot;:this._z=Math.asin(Vt(u,-1,1)),Math.abs(u)&lt;.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,g));break;case&quot;XZY&quot;:this._z=Math.asin(-Vt(o,-1,1)),Math.abs(o)&lt;.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn(&quot;THREE.Euler: .setFromRotationMatrix() encountered an unknown order: &quot;+t)}return this._order=t,i===!0&amp;&amp;this._onChangeCallback(),this}setFromQuaternion(e,t,i){return $M.makeRotationFromQuaternion(e),this.setFromRotationMatrix($M,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ZM.setFromEuler(this),this.setFromQuaternion(ZM,e)}equals(e){return e._x===this._x&amp;&amp;e._y===this._y&amp;&amp;e._z===this._z&amp;&amp;e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&amp;&amp;(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Sr.DEFAULT_ORDER=&quot;XYZ&quot;;class uy{constructor(){this.mask=1}set(e){this.mask=(1&lt;&lt;e|0)&gt;&gt;&gt;0}enable(e){this.mask|=1&lt;&lt;e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1&lt;&lt;e|0}disable(e){this.mask&amp;=~(1&lt;&lt;e|0)}disableAll(){this.mask=0}test(e){return(this.mask&amp;e.mask)!==0}isEnabled(e){return(this.mask&amp;(1&lt;&lt;e|0))!==0}}let jF=0;const JM=new Y,Su=new Si,Wo=new yt,um=new Y,Cf=new Y,WF=new Y,XF=new Si,QM=new Y(1,0,0),eA=new Y(0,1,0),tA=new Y(0,0,1),nA={type:&quot;added&quot;},qF={type:&quot;removed&quot;},wu={type:&quot;childadded&quot;,child:null},vb={type:&quot;childremoved&quot;,child:null};class nn extends To{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,&quot;id&quot;,{value:jF++}),this.uuid=Jr(),this.name=&quot;&quot;,this.type=&quot;Object3D&quot;,this.parent=null,this.children=[],this.up=nn.DEFAULT_UP.clone();const e=new Y,t=new Sr,i=new Si,r=new Y(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new yt},normalMatrix:{value:new jt}}),this.matrix=new yt,this.matrixWorld=new yt,this.matrixAutoUpdate=nn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new uy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Su.setFromAxisAngle(e,t),this.quaternion.multiply(Su),this}rotateOnWorldAxis(e,t){return Su.setFromAxisAngle(e,t),this.quaternion.premultiply(Su),this}rotateX(e){return this.rotateOnAxis(QM,e)}rotateY(e){return this.rotateOnAxis(eA,e)}rotateZ(e){return this.rotateOnAxis(tA,e)}translateOnAxis(e,t){return JM.copy(e).applyQuaternion(this.quaternion),this.position.add(JM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(QM,e)}translateY(e){return this.translateOnAxis(eA,e)}translateZ(e){return this.translateOnAxis(tA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Wo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?um.copy(e):um.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Cf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wo.lookAt(Cf,um,this.up):Wo.lookAt(um,Cf,this.up),this.quaternion.setFromRotationMatrix(Wo),r&amp;&amp;(Wo.extractRotation(r.matrixWorld),Su.setFromRotationMatrix(Wo),this.quaternion.premultiply(Su.invert()))}add(e){if(arguments.length&gt;1){for(let t=0;t&lt;arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error(&quot;THREE.Object3D.add: object can&#x27;t be added as a child of itself.&quot;,e),this):(e&amp;&amp;e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(nA),wu.child=e,this.dispatchEvent(wu),wu.child=null):console.error(&quot;THREE.Object3D.add: object not an instance of THREE.Object3D.&quot;,e),this)}remove(e){if(arguments.length&gt;1){for(let i=0;i&lt;arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&amp;&amp;(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qF),vb.child=e,this.dispatchEvent(vb),vb.child=null),this}removeFromParent(){const e=this.parent;return e!==null&amp;&amp;e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Wo.copy(this.matrixWorld).invert(),e.parent!==null&amp;&amp;(e.parent.updateWorldMatrix(!0,!1),Wo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Wo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(nA),wu.child=e,this.dispatchEvent(wu),wu.child=null,this}getObjectById(e){return this.getObjectByProperty(&quot;id&quot;,e)}getObjectByName(e){return this.getObjectByProperty(&quot;name&quot;,e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i&lt;r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&amp;&amp;i.push(this);const r=this.children;for(let s=0,o=r.length;s&lt;o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cf,e,WF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cf,XF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i&lt;r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i&lt;r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&amp;&amp;(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&amp;&amp;(this.matrixWorldAutoUpdate===!0&amp;&amp;(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i&lt;r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&amp;&amp;i!==null&amp;&amp;i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),this.matrixWorldAutoUpdate===!0&amp;&amp;(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s&lt;o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;,i={};t&amp;&amp;(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:&quot;Object&quot;,generator:&quot;Object3D.toJSON&quot;});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==&quot;&quot;&amp;&amp;(r.name=this.name),this.castShadow===!0&amp;&amp;(r.castShadow=!0),this.receiveShadow===!0&amp;&amp;(r.receiveShadow=!0),this.visible===!1&amp;&amp;(r.visible=!1),this.frustumCulled===!1&amp;&amp;(r.frustumCulled=!1),this.renderOrder!==0&amp;&amp;(r.renderOrder=this.renderOrder),Object.keys(this.userData).length&gt;0&amp;&amp;(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&amp;&amp;(r.matrixAutoUpdate=!1),this.isInstancedMesh&amp;&amp;(r.type=&quot;InstancedMesh&quot;,r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&amp;&amp;(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&amp;&amp;(r.type=&quot;BatchedMesh&quot;,r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(l=&gt;({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),r.instanceInfo=this._instanceInfo.map(l=&gt;({...l})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&amp;&amp;(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&amp;&amp;(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&amp;&amp;(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&amp;&amp;(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&amp;&amp;(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&amp;&amp;(r.background=this.background.toJSON(e).uuid)),this.environment&amp;&amp;this.environment.isTexture&amp;&amp;this.environment.isRenderTargetTexture!==!0&amp;&amp;(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&amp;&amp;l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let h=0,f=u.length;h&lt;f;h++){const p=u[h];s(e.shapes,p)}else s(e.shapes,u)}}if(this.isSkinnedMesh&amp;&amp;(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&amp;&amp;(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,h=this.material.length;u&lt;h;u++)l.push(s(e.materials,this.material[u]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length&gt;0){r.children=[];for(let l=0;l&lt;this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length&gt;0){r.animations=[];for(let l=0;l&lt;this.animations.length;l++){const u=this.animations[l];r.animations.push(s(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),h=o(e.textures),f=o(e.images),p=o(e.shapes),m=o(e.skeletons),g=o(e.animations),v=o(e.nodes);l.length&gt;0&amp;&amp;(i.geometries=l),u.length&gt;0&amp;&amp;(i.materials=u),h.length&gt;0&amp;&amp;(i.textures=h),f.length&gt;0&amp;&amp;(i.images=f),p.length&gt;0&amp;&amp;(i.shapes=p),m.length&gt;0&amp;&amp;(i.skeletons=m),g.length&gt;0&amp;&amp;(i.animations=g),v.length&gt;0&amp;&amp;(i.nodes=v)}return i.object=r,i;function o(l){const u=[];for(const h in l){const f=l[h];delete f.metadata,u.push(f)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i&lt;e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}nn.DEFAULT_UP=new Y(0,1,0);nn.DEFAULT_MATRIX_AUTO_UPDATE=!0;nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ks=new Y,Xo=new Y,bb=new Y,qo=new Y,Eu=new Y,Tu=new Y,iA=new Y,xb=new Y,Sb=new Y,wb=new Y,Eb=new yn,Tb=new yn,Mb=new yn;class _r{constructor(e=new Y,t=new Y,i=new Y){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ks.subVectors(e,t),r.cross(ks);const s=r.lengthSq();return s&gt;0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ks.subVectors(r,t),Xo.subVectors(i,t),bb.subVectors(e,t);const o=ks.dot(ks),l=ks.dot(Xo),u=ks.dot(bb),h=Xo.dot(Xo),f=Xo.dot(bb),p=o*h-l*l;if(p===0)return s.set(0,0,0),null;const m=1/p,g=(h*u-l*f)*m,v=(o*f-l*u)*m;return s.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,qo)===null?!1:qo.x&gt;=0&amp;&amp;qo.y&gt;=0&amp;&amp;qo.x+qo.y&lt;=1}static getInterpolation(e,t,i,r,s,o,l,u){return this.getBarycoord(e,t,i,r,qo)===null?(u.x=0,u.y=0,&quot;z&quot;in u&amp;&amp;(u.z=0),&quot;w&quot;in u&amp;&amp;(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,qo.x),u.addScaledVector(o,qo.y),u.addScaledVector(l,qo.z),u)}static getInterpolatedAttribute(e,t,i,r,s,o){return Eb.setScalar(0),Tb.setScalar(0),Mb.setScalar(0),Eb.fromBufferAttribute(e,t),Tb.fromBufferAttribute(e,i),Mb.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Eb,s.x),o.addScaledVector(Tb,s.y),o.addScaledVector(Mb,s.z),o}static isFrontFacing(e,t,i,r){return ks.subVectors(i,t),Xo.subVectors(e,t),ks.cross(Xo).dot(r)&lt;0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ks.subVectors(this.c,this.b),Xo.subVectors(this.a,this.b),ks.cross(Xo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _r.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _r.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return _r.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return _r.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _r.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,l;Eu.subVectors(r,i),Tu.subVectors(s,i),xb.subVectors(e,i);const u=Eu.dot(xb),h=Tu.dot(xb);if(u&lt;=0&amp;&amp;h&lt;=0)return t.copy(i);Sb.subVectors(e,r);const f=Eu.dot(Sb),p=Tu.dot(Sb);if(f&gt;=0&amp;&amp;p&lt;=f)return t.copy(r);const m=u*p-f*h;if(m&lt;=0&amp;&amp;u&gt;=0&amp;&amp;f&lt;=0)return o=u/(u-f),t.copy(i).addScaledVector(Eu,o);wb.subVectors(e,s);const g=Eu.dot(wb),v=Tu.dot(wb);if(v&gt;=0&amp;&amp;g&lt;=v)return t.copy(s);const x=g*h-u*v;if(x&lt;=0&amp;&amp;h&gt;=0&amp;&amp;v&lt;=0)return l=h/(h-v),t.copy(i).addScaledVector(Tu,l);const b=f*v-g*p;if(b&lt;=0&amp;&amp;p-f&gt;=0&amp;&amp;g-v&gt;=0)return iA.subVectors(s,r),l=(p-f)/(p-f+(g-v)),t.copy(r).addScaledVector(iA,l);const _=1/(b+x+m);return o=x*_,l=m*_,t.copy(i).addScaledVector(Eu,o).addScaledVector(Tu,l)}equals(e){return e.a.equals(this.a)&amp;&amp;e.b.equals(this.b)&amp;&amp;e.c.equals(this.c)}}const WD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wa={h:0,s:0,l:0},hm={h:0,s:0,l:0};function Ab(n,e,t){return t&lt;0&amp;&amp;(t+=1),t&gt;1&amp;&amp;(t-=1),t&lt;1/6?n+(e-n)*6*t:t&lt;1/2?e:t&lt;2/3?n+(e-n)*6*(2/3-t):n}let $e=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&amp;&amp;i===void 0){const r=e;r&amp;&amp;r.isColor?this.copy(r):typeof r==&quot;number&quot;?this.setHex(r):typeof r==&quot;string&quot;&amp;&amp;this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Nn){return e=Math.floor(e),this.r=(e&gt;&gt;16&amp;255)/255,this.g=(e&gt;&gt;8&amp;255)/255,this.b=(e&amp;255)/255,Zt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Zt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Zt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Zt.workingColorSpace){if(e=cw(e,1),t=Vt(t,0,1),i=Vt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i&lt;=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Ab(o,s,e+1/3),this.g=Ab(o,s,e),this.b=Ab(o,s,e-1/3)}return Zt.toWorkingColorSpace(this,r),this}setStyle(e,t=Nn){function i(s){s!==void 0&amp;&amp;parseFloat(s)&lt;1&amp;&amp;console.warn(&quot;THREE.Color: Alpha component of &quot;+e+&quot; will be ignored.&quot;)}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case&quot;rgb&quot;:case&quot;rgba&quot;:if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case&quot;hsl&quot;:case&quot;hsla&quot;:if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn(&quot;THREE.Color: Unknown color model &quot;+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn(&quot;THREE.Color: Invalid hex color &quot;+e)}else if(e&amp;&amp;e.length&gt;0)return this.setColorName(e,t);return this}setColorName(e,t=Nn){const i=WD[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn(&quot;THREE.Color: Unknown color &quot;+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ua(e.r),this.g=ua(e.g),this.b=ua(e.b),this}copyLinearToSRGB(e){return this.r=Qu(e.r),this.g=Qu(e.g),this.b=Qu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Nn){return Zt.fromWorkingColorSpace(lr.copy(this),e),Math.round(Vt(lr.r*255,0,255))*65536+Math.round(Vt(lr.g*255,0,255))*256+Math.round(Vt(lr.b*255,0,255))}getHexString(e=Nn){return(&quot;000000&quot;+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Zt.workingColorSpace){Zt.fromWorkingColorSpace(lr.copy(this),t);const i=lr.r,r=lr.g,s=lr.b,o=Math.max(i,r,s),l=Math.min(i,r,s);let u,h;const f=(l+o)/2;if(l===o)u=0,h=0;else{const p=o-l;switch(h=f&lt;=.5?p/(o+l):p/(2-o-l),o){case i:u=(r-s)/p+(r&lt;s?6:0);break;case r:u=(s-i)/p+2;break;case s:u=(i-r)/p+4;break}u/=6}return e.h=u,e.s=h,e.l=f,e}getRGB(e,t=Zt.workingColorSpace){return Zt.fromWorkingColorSpace(lr.copy(this),t),e.r=lr.r,e.g=lr.g,e.b=lr.b,e}getStyle(e=Nn){Zt.fromWorkingColorSpace(lr.copy(this),e);const t=lr.r,i=lr.g,r=lr.b;return e!==Nn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Wa),this.setHSL(Wa.h+e,Wa.s+t,Wa.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Wa),e.getHSL(hm);const i=ld(Wa.h,hm.h,t),r=ld(Wa.s,hm.s,t),s=ld(Wa.l,hm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&amp;&amp;e.g===this.g&amp;&amp;e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const lr=new $e;$e.NAMES=WD;let YF=0;class Oi extends To{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,&quot;id&quot;,{value:YF++}),this.uuid=Jr(),this.name=&quot;&quot;,this.type=&quot;Material&quot;,this.blending=vc,this.side=Qr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Gg,this.blendDst=jg,this.blendEquation=il,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $e(0,0,0),this.blendAlpha=0,this.depthFunc=Tc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ic,this.stencilZFail=ic,this.stencilZPass=ic,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest&gt;0!=e&gt;0&amp;&amp;this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter &#x27;${t}&#x27; has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: &#x27;${t}&#x27; is not a property of THREE.${this.type}.`);continue}r&amp;&amp;r.isColor?r.set(i):r&amp;&amp;r.isVector3&amp;&amp;i&amp;&amp;i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;;t&amp;&amp;(e={textures:{},images:{}});const i={metadata:{version:4.6,type:&quot;Material&quot;,generator:&quot;Material.toJSON&quot;}};i.uuid=this.uuid,i.type=this.type,this.name!==&quot;&quot;&amp;&amp;(i.name=this.name),this.color&amp;&amp;this.color.isColor&amp;&amp;(i.color=this.color.getHex()),this.roughness!==void 0&amp;&amp;(i.roughness=this.roughness),this.metalness!==void 0&amp;&amp;(i.metalness=this.metalness),this.sheen!==void 0&amp;&amp;(i.sheen=this.sheen),this.sheenColor&amp;&amp;this.sheenColor.isColor&amp;&amp;(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&amp;&amp;(i.sheenRoughness=this.sheenRoughness),this.emissive&amp;&amp;this.emissive.isColor&amp;&amp;(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&amp;&amp;this.emissiveIntensity!==1&amp;&amp;(i.emissiveIntensity=this.emissiveIntensity),this.specular&amp;&amp;this.specular.isColor&amp;&amp;(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&amp;&amp;(i.specularIntensity=this.specularIntensity),this.specularColor&amp;&amp;this.specularColor.isColor&amp;&amp;(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&amp;&amp;(i.shininess=this.shininess),this.clearcoat!==void 0&amp;&amp;(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&amp;&amp;(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&amp;&amp;this.clearcoatMap.isTexture&amp;&amp;(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&amp;&amp;this.clearcoatRoughnessMap.isTexture&amp;&amp;(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&amp;&amp;this.clearcoatNormalMap.isTexture&amp;&amp;(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&amp;&amp;(i.dispersion=this.dispersion),this.iridescence!==void 0&amp;&amp;(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&amp;&amp;(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&amp;&amp;(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&amp;&amp;this.iridescenceMap.isTexture&amp;&amp;(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&amp;&amp;this.iridescenceThicknessMap.isTexture&amp;&amp;(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&amp;&amp;(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&amp;&amp;(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&amp;&amp;this.anisotropyMap.isTexture&amp;&amp;(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&amp;&amp;this.map.isTexture&amp;&amp;(i.map=this.map.toJSON(e).uuid),this.matcap&amp;&amp;this.matcap.isTexture&amp;&amp;(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&amp;&amp;this.alphaMap.isTexture&amp;&amp;(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&amp;&amp;this.lightMap.isTexture&amp;&amp;(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&amp;&amp;this.aoMap.isTexture&amp;&amp;(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&amp;&amp;this.bumpMap.isTexture&amp;&amp;(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&amp;&amp;this.normalMap.isTexture&amp;&amp;(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&amp;&amp;this.displacementMap.isTexture&amp;&amp;(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&amp;&amp;this.roughnessMap.isTexture&amp;&amp;(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&amp;&amp;this.metalnessMap.isTexture&amp;&amp;(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&amp;&amp;this.emissiveMap.isTexture&amp;&amp;(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&amp;&amp;this.specularMap.isTexture&amp;&amp;(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&amp;&amp;this.specularIntensityMap.isTexture&amp;&amp;(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&amp;&amp;this.specularColorMap.isTexture&amp;&amp;(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&amp;&amp;this.envMap.isTexture&amp;&amp;(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&amp;&amp;(i.combine=this.combine)),this.envMapRotation!==void 0&amp;&amp;(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&amp;&amp;(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&amp;&amp;(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&amp;&amp;(i.refractionRatio=this.refractionRatio),this.gradientMap&amp;&amp;this.gradientMap.isTexture&amp;&amp;(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&amp;&amp;(i.transmission=this.transmission),this.transmissionMap&amp;&amp;this.transmissionMap.isTexture&amp;&amp;(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&amp;&amp;(i.thickness=this.thickness),this.thicknessMap&amp;&amp;this.thicknessMap.isTexture&amp;&amp;(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&amp;&amp;this.attenuationDistance!==1/0&amp;&amp;(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&amp;&amp;(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&amp;&amp;(i.size=this.size),this.shadowSide!==null&amp;&amp;(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&amp;&amp;(i.sizeAttenuation=this.sizeAttenuation),this.blending!==vc&amp;&amp;(i.blending=this.blending),this.side!==Qr&amp;&amp;(i.side=this.side),this.vertexColors===!0&amp;&amp;(i.vertexColors=!0),this.opacity&lt;1&amp;&amp;(i.opacity=this.opacity),this.transparent===!0&amp;&amp;(i.transparent=!0),this.blendSrc!==Gg&amp;&amp;(i.blendSrc=this.blendSrc),this.blendDst!==jg&amp;&amp;(i.blendDst=this.blendDst),this.blendEquation!==il&amp;&amp;(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&amp;&amp;(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&amp;&amp;(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&amp;&amp;(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&amp;&amp;this.blendColor.isColor&amp;&amp;(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&amp;&amp;(i.blendAlpha=this.blendAlpha),this.depthFunc!==Tc&amp;&amp;(i.depthFunc=this.depthFunc),this.depthTest===!1&amp;&amp;(i.depthTest=this.depthTest),this.depthWrite===!1&amp;&amp;(i.depthWrite=this.depthWrite),this.colorWrite===!1&amp;&amp;(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&amp;&amp;(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==iS&amp;&amp;(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&amp;&amp;(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&amp;&amp;(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ic&amp;&amp;(i.stencilFail=this.stencilFail),this.stencilZFail!==ic&amp;&amp;(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ic&amp;&amp;(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&amp;&amp;(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&amp;&amp;this.rotation!==0&amp;&amp;(i.rotation=this.rotation),this.polygonOffset===!0&amp;&amp;(i.polygonOffset=!0),this.polygonOffsetFactor!==0&amp;&amp;(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&amp;&amp;(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&amp;&amp;this.linewidth!==1&amp;&amp;(i.linewidth=this.linewidth),this.dashSize!==void 0&amp;&amp;(i.dashSize=this.dashSize),this.gapSize!==void 0&amp;&amp;(i.gapSize=this.gapSize),this.scale!==void 0&amp;&amp;(i.scale=this.scale),this.dithering===!0&amp;&amp;(i.dithering=!0),this.alphaTest&gt;0&amp;&amp;(i.alphaTest=this.alphaTest),this.alphaHash===!0&amp;&amp;(i.alphaHash=!0),this.alphaToCoverage===!0&amp;&amp;(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&amp;&amp;(i.premultipliedAlpha=!0),this.forceSinglePass===!0&amp;&amp;(i.forceSinglePass=!0),this.wireframe===!0&amp;&amp;(i.wireframe=!0),this.wireframeLinewidth&gt;1&amp;&amp;(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!==&quot;round&quot;&amp;&amp;(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!==&quot;round&quot;&amp;&amp;(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&amp;&amp;(i.flatShading=!0),this.visible===!1&amp;&amp;(i.visible=!1),this.toneMapped===!1&amp;&amp;(i.toneMapped=!1),this.fog===!1&amp;&amp;(i.fog=!1),Object.keys(this.userData).length&gt;0&amp;&amp;(i.userData=this.userData);function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length&gt;0&amp;&amp;(i.textures=s),o.length&gt;0&amp;&amp;(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}set needsUpdate(e){e===!0&amp;&amp;this.version++}}class $i extends Oi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type=&quot;MeshBasicMaterial&quot;,this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=Vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const na=KF();function KF(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u&lt;256;++u){const h=u-127;h&lt;-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):h&lt;-14?(i[u]=1024&gt;&gt;-h-14,i[u|256]=1024&gt;&gt;-h-14|32768,r[u]=-h-1,r[u|256]=-h-1):h&lt;=15?(i[u]=h+15&lt;&lt;10,i[u|256]=h+15&lt;&lt;10|32768,r[u]=13,r[u|256]=13):h&lt;128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u&lt;1024;++u){let h=u&lt;&lt;13,f=0;for(;(h&amp;8388608)===0;)h&lt;&lt;=1,f-=8388608;h&amp;=-8388609,f+=947912704,s[u]=h|f}for(let u=1024;u&lt;2048;++u)s[u]=939524096+(u-1024&lt;&lt;13);for(let u=1;u&lt;31;++u)o[u]=u&lt;&lt;23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u&lt;63;++u)o[u]=2147483648+(u-32&lt;&lt;23);o[63]=3347054592;for(let u=1;u&lt;64;++u)u!==32&amp;&amp;(l[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function Ir(n){Math.abs(n)&gt;65504&amp;&amp;console.warn(&quot;THREE.DataUtils.toHalfFloat(): Value out of range.&quot;),n=Vt(n,-65504,65504),na.floatView[0]=n;const e=na.uint32View[0],t=e&gt;&gt;23&amp;511;return na.baseTable[t]+((e&amp;8388607)&gt;&gt;na.shiftTable[t])}function $f(n){const e=n&gt;&gt;10;return na.uint32View[0]=na.mantissaTable[na.offsetTable[e]+(n&amp;1023)]+na.exponentTable[e],na.floatView[0]}class $F{static toHalfFloat(e){return Ir(e)}static fromHalfFloat(e){return $f(e)}}const Ai=new Y,fm=new Oe;let ZF=0;class Jt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError(&quot;THREE.BufferAttribute: array should be a Typed Array.&quot;);this.isBufferAttribute=!0,Object.defineProperty(this,&quot;id&quot;,{value:ZF++}),this.name=&quot;&quot;,this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=bd,this.updateRanges=[],this.gpuType=Pr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&amp;&amp;this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r&lt;s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t&lt;i;t++)fm.fromBufferAttribute(this,t),fm.applyMatrix3(e),this.setXY(t,fm.x,fm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t&lt;i;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix3(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t&lt;i;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix4(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t&lt;i;t++)Ai.fromBufferAttribute(this,t),Ai.applyNormalMatrix(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}transformDirection(e){for(let t=0,i=this.count;t&lt;i;t++)Ai.fromBufferAttribute(this,t),Ai.transformDirection(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&amp;&amp;(i=yr(i,this.array)),i}setComponent(e,t,i){return this.normalized&amp;&amp;(i=Xt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setX(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setY(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setZ(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setW(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array),s=Xt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==&quot;&quot;&amp;&amp;(e.name=this.name),this.usage!==bd&amp;&amp;(e.usage=this.usage),e}}class JF extends Jt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class QF extends Jt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class ez extends Jt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class tz extends Jt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class uw extends Jt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class nz extends Jt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class hw extends Jt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class iz extends Jt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=$f(this.array[e*this.itemSize]);return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setX(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize]=Ir(t),this}getY(e){let t=$f(this.array[e*this.itemSize+1]);return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setY(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+1]=Ir(t),this}getZ(e){let t=$f(this.array[e*this.itemSize+2]);return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setZ(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+2]=Ir(t),this}getW(e){let t=$f(this.array[e*this.itemSize+3]);return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setW(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+3]=Ir(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array)),this.array[e+0]=Ir(t),this.array[e+1]=Ir(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array)),this.array[e+0]=Ir(t),this.array[e+1]=Ir(i),this.array[e+2]=Ir(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array),s=Xt(s,this.array)),this.array[e+0]=Ir(t),this.array[e+1]=Ir(i),this.array[e+2]=Ir(r),this.array[e+3]=Ir(s),this}}class ct extends Jt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let rz=0;const ms=new yt,Cb=new nn,Mu=new Y,Yr=new Ri,Rf=new Ri,Wi=new Y;class Lt extends To{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,&quot;id&quot;,{value:rz++}),this.uuid=Jr(),this.name=&quot;&quot;,this.type=&quot;BufferGeometry&quot;,this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(VD(e)?hw:uw)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&amp;&amp;(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new jt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&amp;&amp;(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&amp;&amp;this.computeBoundingBox(),this.boundingSphere!==null&amp;&amp;this.computeBoundingSphere(),this}applyQuaternion(e){return ms.makeRotationFromQuaternion(e),this.applyMatrix4(ms),this}rotateX(e){return ms.makeRotationX(e),this.applyMatrix4(ms),this}rotateY(e){return ms.makeRotationY(e),this.applyMatrix4(ms),this}rotateZ(e){return ms.makeRotationZ(e),this.applyMatrix4(ms),this}translate(e,t,i){return ms.makeTranslation(e,t,i),this.applyMatrix4(ms),this}scale(e,t,i){return ms.makeScale(e,t,i),this.applyMatrix4(ms),this}lookAt(e){return Cb.lookAt(e),Cb.updateMatrix(),this.applyMatrix4(Cb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mu).negate(),this.translate(Mu.x,Mu.y,Mu.z),this}setFromPoints(e){const t=this.getAttribute(&quot;position&quot;);if(t===void 0){const i=[];for(let r=0,s=e.length;r&lt;s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute(&quot;position&quot;,new ct(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r&lt;i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length&gt;t.count&amp;&amp;console.warn(&quot;THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry.&quot;),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&amp;&amp;(this.boundingBox=new Ri);const e=this.attributes.position,t=this.morphAttributes.position;if(e&amp;&amp;e.isGLBufferAttribute){console.error(&quot;THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.&quot;,this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i&lt;r;i++){const s=t[i];Yr.setFromBufferAttribute(s),this.morphTargetsRelative?(Wi.addVectors(this.boundingBox.min,Yr.min),this.boundingBox.expandByPoint(Wi),Wi.addVectors(this.boundingBox.max,Yr.max),this.boundingBox.expandByPoint(Wi)):(this.boundingBox.expandByPoint(Yr.min),this.boundingBox.expandByPoint(Yr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&amp;&amp;console.error(&#x27;THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The &quot;position&quot; attribute is likely to have NaN values.&#x27;,this)}computeBoundingSphere(){this.boundingSphere===null&amp;&amp;(this.boundingSphere=new wi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&amp;&amp;e.isGLBufferAttribute){console.error(&quot;THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.&quot;,this),this.boundingSphere.set(new Y,1/0);return}if(e){const i=this.boundingSphere.center;if(Yr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s&lt;o;s++){const l=t[s];Rf.setFromBufferAttribute(l),this.morphTargetsRelative?(Wi.addVectors(Yr.min,Rf.min),Yr.expandByPoint(Wi),Wi.addVectors(Yr.max,Rf.max),Yr.expandByPoint(Wi)):(Yr.expandByPoint(Rf.min),Yr.expandByPoint(Rf.max))}Yr.getCenter(i);let r=0;for(let s=0,o=e.count;s&lt;o;s++)Wi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Wi));if(t)for(let s=0,o=t.length;s&lt;o;s++){const l=t[s],u=this.morphTargetsRelative;for(let h=0,f=l.count;h&lt;f;h++)Wi.fromBufferAttribute(l,h),u&amp;&amp;(Mu.fromBufferAttribute(e,h),Wi.add(Mu)),r=Math.max(r,i.distanceToSquared(Wi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&amp;&amp;console.error(&#x27;THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The &quot;position&quot; attribute is likely to have NaN values.&#x27;,this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error(&quot;THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)&quot;);return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute(&quot;tangent&quot;)===!1&amp;&amp;this.setAttribute(&quot;tangent&quot;,new Jt(new Float32Array(4*i.count),4));const o=this.getAttribute(&quot;tangent&quot;),l=[],u=[];for(let D=0;D&lt;i.count;D++)l[D]=new Y,u[D]=new Y;const h=new Y,f=new Y,p=new Y,m=new Oe,g=new Oe,v=new Oe,x=new Y,b=new Y;function _(D,C,O){h.fromBufferAttribute(i,D),f.fromBufferAttribute(i,C),p.fromBufferAttribute(i,O),m.fromBufferAttribute(s,D),g.fromBufferAttribute(s,C),v.fromBufferAttribute(s,O),f.sub(h),p.sub(h),g.sub(m),v.sub(m);const L=1/(g.x*v.y-v.x*g.y);isFinite(L)&amp;&amp;(x.copy(f).multiplyScalar(v.y).addScaledVector(p,-g.y).multiplyScalar(L),b.copy(p).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(L),l[D].add(x),l[C].add(x),l[O].add(x),u[D].add(b),u[C].add(b),u[O].add(b))}let T=this.groups;T.length===0&amp;&amp;(T=[{start:0,count:e.count}]);for(let D=0,C=T.length;D&lt;C;++D){const O=T[D],L=O.start,V=O.count;for(let Z=L,z=L+V;Z&lt;z;Z+=3)_(e.getX(Z+0),e.getX(Z+1),e.getX(Z+2))}const w=new Y,E=new Y,R=new Y,N=new Y;function A(D){R.fromBufferAttribute(r,D),N.copy(R);const C=l[D];w.copy(C),w.sub(R.multiplyScalar(R.dot(C))).normalize(),E.crossVectors(N,C);const L=E.dot(u[D])&lt;0?-1:1;o.setXYZW(D,w.x,w.y,w.z,L)}for(let D=0,C=T.length;D&lt;C;++D){const O=T[D],L=O.start,V=O.count;for(let Z=L,z=L+V;Z&lt;z;Z+=3)A(e.getX(Z+0)),A(e.getX(Z+1)),A(e.getX(Z+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute(&quot;position&quot;);if(t!==void 0){let i=this.getAttribute(&quot;normal&quot;);if(i===void 0)i=new Jt(new Float32Array(t.count*3),3),this.setAttribute(&quot;normal&quot;,i);else for(let m=0,g=i.count;m&lt;g;m++)i.setXYZ(m,0,0,0);const r=new Y,s=new Y,o=new Y,l=new Y,u=new Y,h=new Y,f=new Y,p=new Y;if(e)for(let m=0,g=e.count;m&lt;g;m+=3){const v=e.getX(m+0),x=e.getX(m+1),b=e.getX(m+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,b),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),l.fromBufferAttribute(i,v),u.fromBufferAttribute(i,x),h.fromBufferAttribute(i,b),l.add(f),u.add(f),h.add(f),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z),i.setXYZ(b,h.x,h.y,h.z)}else for(let m=0,g=t.count;m&lt;g;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t&lt;i;t++)Wi.fromBufferAttribute(e,t),Wi.normalize(),e.setXYZ(t,Wi.x,Wi.y,Wi.z)}toNonIndexed(){function e(l,u){const h=l.array,f=l.itemSize,p=l.normalized,m=new h.constructor(u.length*f);let g=0,v=0;for(let x=0,b=u.length;x&lt;b;x++){l.isInterleavedBufferAttribute?g=u[x]*l.data.stride+l.offset:g=u[x]*f;for(let _=0;_&lt;f;_++)m[v++]=h[g++]}return new Jt(m,f,p)}if(this.index===null)return console.warn(&quot;THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.&quot;),this;const t=new Lt,i=this.index.array,r=this.attributes;for(const l in r){const u=r[l],h=e(u,i);t.setAttribute(l,h)}const s=this.morphAttributes;for(const l in s){const u=[],h=s[l];for(let f=0,p=h.length;f&lt;p;f++){const m=h[f],g=e(m,i);u.push(g)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l&lt;u;l++){const h=o[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:&quot;BufferGeometry&quot;,generator:&quot;BufferGeometry.toJSON&quot;}};if(e.uuid=this.uuid,e.type=this.type,this.name!==&quot;&quot;&amp;&amp;(e.name=this.name),Object.keys(this.userData).length&gt;0&amp;&amp;(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&amp;&amp;(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&amp;&amp;(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const h=i[u];e.data.attributes[u]=h.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],f=[];for(let p=0,m=h.length;p&lt;m;p++){const g=h[p];f.push(g.toJSON(e.data))}f.length&gt;0&amp;&amp;(r[u]=f,s=!0)}s&amp;&amp;(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length&gt;0&amp;&amp;(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&amp;&amp;(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&amp;&amp;this.setIndex(i.clone());const r=e.attributes;for(const h in r){const f=r[h];this.setAttribute(h,f.clone(t))}const s=e.morphAttributes;for(const h in s){const f=[],p=s[h];for(let m=0,g=p.length;m&lt;g;m++)f.push(p[m].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h&lt;f;h++){const p=o[h];this.addGroup(p.start,p.count,p.materialIndex)}const l=e.boundingBox;l!==null&amp;&amp;(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&amp;&amp;(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}}const rA=new yt,Gl=new bl,dm=new wi,sA=new Y,pm=new Y,mm=new Y,gm=new Y,Rb=new Y,ym=new Y,oA=new Y,_m=new Y;let Sn=class extends nn{constructor(e=new Lt,t=new $i){super(),this.isMesh=!0,this.type=&quot;Mesh&quot;,this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&amp;&amp;(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&amp;&amp;(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length&gt;0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s&lt;o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&amp;&amp;l){ym.set(0,0,0);for(let u=0,h=s.length;u&lt;h;u++){const f=l[u],p=s[u];f!==0&amp;&amp;(Rb.fromBufferAttribute(p,e),o?ym.addScaledVector(Rb,f):ym.addScaledVector(Rb.sub(t),f))}t.add(ym)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&amp;&amp;(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),dm.copy(i.boundingSphere),dm.applyMatrix4(s),Gl.copy(e.ray).recast(e.near),!(dm.containsPoint(Gl.origin)===!1&amp;&amp;(Gl.intersectSphere(dm,sA)===null||Gl.origin.distanceToSquared(sA)&gt;(e.far-e.near)**2))&amp;&amp;(rA.copy(s).invert(),Gl.copy(e.ray).applyMatrix4(rA),!(i.boundingBox!==null&amp;&amp;Gl.intersectsBox(i.boundingBox)===!1)&amp;&amp;this._computeIntersections(e,t,Gl)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,l=s.index,u=s.attributes.position,h=s.attributes.uv,f=s.attributes.uv1,p=s.attributes.normal,m=s.groups,g=s.drawRange;if(l!==null)if(Array.isArray(o))for(let v=0,x=m.length;v&lt;x;v++){const b=m[v],_=o[b.materialIndex],T=Math.max(b.start,g.start),w=Math.min(l.count,Math.min(b.start+b.count,g.start+g.count));for(let E=T,R=w;E&lt;R;E+=3){const N=l.getX(E),A=l.getX(E+1),D=l.getX(E+2);r=vm(this,_,e,i,h,f,p,N,A,D),r&amp;&amp;(r.faceIndex=Math.floor(E/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),x=Math.min(l.count,g.start+g.count);for(let b=v,_=x;b&lt;_;b+=3){const T=l.getX(b),w=l.getX(b+1),E=l.getX(b+2);r=vm(this,o,e,i,h,f,p,T,w,E),r&amp;&amp;(r.faceIndex=Math.floor(b/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let v=0,x=m.length;v&lt;x;v++){const b=m[v],_=o[b.materialIndex],T=Math.max(b.start,g.start),w=Math.min(u.count,Math.min(b.start+b.count,g.start+g.count));for(let E=T,R=w;E&lt;R;E+=3){const N=E,A=E+1,D=E+2;r=vm(this,_,e,i,h,f,p,N,A,D),r&amp;&amp;(r.faceIndex=Math.floor(E/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),x=Math.min(u.count,g.start+g.count);for(let b=v,_=x;b&lt;_;b+=3){const T=b,w=b+1,E=b+2;r=vm(this,o,e,i,h,f,p,T,w,E),r&amp;&amp;(r.faceIndex=Math.floor(b/3),t.push(r))}}}};function sz(n,e,t,i,r,s,o,l){let u;if(e.side===xr?u=i.intersectTriangle(o,s,r,!0,l):u=i.intersectTriangle(r,s,o,e.side===Qr,l),u===null)return null;_m.copy(l),_m.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(_m);return h&lt;t.near||h&gt;t.far?null:{distance:h,point:_m.clone(),object:n}}function vm(n,e,t,i,r,s,o,l,u,h){n.getVertexPosition(l,pm),n.getVertexPosition(u,mm),n.getVertexPosition(h,gm);const f=sz(n,e,t,i,pm,mm,gm,oA);if(f){const p=new Y;_r.getBarycoord(oA,pm,mm,gm,p),r&amp;&amp;(f.uv=_r.getInterpolatedAttribute(r,l,u,h,p,new Oe)),s&amp;&amp;(f.uv1=_r.getInterpolatedAttribute(s,l,u,h,p,new Oe)),o&amp;&amp;(f.normal=_r.getInterpolatedAttribute(o,l,u,h,p,new Y),f.normal.dot(i.direction)&gt;0&amp;&amp;f.normal.multiplyScalar(-1));const m={a:l,b:u,c:h,normal:new Y,materialIndex:0};_r.getNormal(pm,mm,gm,m.normal),f.face=m,f.barycoord=p}return f}class xl extends Lt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type=&quot;BoxGeometry&quot;,this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],h=[],f=[],p=[];let m=0,g=0;v(&quot;z&quot;,&quot;y&quot;,&quot;x&quot;,-1,-1,i,t,e,o,s,0),v(&quot;z&quot;,&quot;y&quot;,&quot;x&quot;,1,-1,i,t,-e,o,s,1),v(&quot;x&quot;,&quot;z&quot;,&quot;y&quot;,1,1,e,i,t,r,o,2),v(&quot;x&quot;,&quot;z&quot;,&quot;y&quot;,1,-1,e,i,-t,r,o,3),v(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,1,-1,e,t,i,r,s,4),v(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,-1,-1,e,t,-i,r,s,5),this.setIndex(u),this.setAttribute(&quot;position&quot;,new ct(h,3)),this.setAttribute(&quot;normal&quot;,new ct(f,3)),this.setAttribute(&quot;uv&quot;,new ct(p,2));function v(x,b,_,T,w,E,R,N,A,D,C){const O=E/A,L=R/D,V=E/2,Z=R/2,z=N/2,K=A+1,I=D+1;let j=0,G=0;const ee=new Y;for(let F=0;F&lt;I;F++){const ne=F*L-Z;for(let le=0;le&lt;K;le++){const ce=le*O-V;ee[x]=ce*T,ee[b]=ne*w,ee[_]=z,h.push(ee.x,ee.y,ee.z),ee[x]=0,ee[b]=0,ee[_]=N&gt;0?1:-1,f.push(ee.x,ee.y,ee.z),p.push(le/A),p.push(1-F/D),j+=1}}for(let F=0;F&lt;D;F++)for(let ne=0;ne&lt;A;ne++){const le=m+ne+K*F,ce=m+ne+K*(F+1),ie=m+(ne+1)+K*(F+1),oe=m+(ne+1)+K*F;u.push(le,ce,oe),u.push(ce,ie,oe),G+=6}l.addGroup(g,G,C),g+=G,m+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hh(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&amp;&amp;(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn(&quot;UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms().&quot;),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function gr(n){const e={};for(let t=0;t&lt;n.length;t++){const i=hh(n[t]);for(const r in i)e[r]=i[r]}return e}function oz(n){const e=[];for(let t=0;t&lt;n.length;t++)e.push(n[t].clone());return e}function XD(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Zt.workingColorSpace}const qD={clone:hh,merge:gr};var az=`void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,lz=`void main() {
    gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ts extends Oi{constructor(e){super(),this.isShaderMaterial=!0,this.type=&quot;ShaderMaterial&quot;,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=az,this.fragmentShader=lz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&amp;&amp;this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hh(e.uniforms),this.uniformsGroups=oz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&amp;&amp;o.isTexture?t.uniforms[r]={type:&quot;t&quot;,value:o.toJSON(e).uuid}:o&amp;&amp;o.isColor?t.uniforms[r]={type:&quot;c&quot;,value:o.getHex()}:o&amp;&amp;o.isVector2?t.uniforms[r]={type:&quot;v2&quot;,value:o.toArray()}:o&amp;&amp;o.isVector3?t.uniforms[r]={type:&quot;v3&quot;,value:o.toArray()}:o&amp;&amp;o.isVector4?t.uniforms[r]={type:&quot;v4&quot;,value:o.toArray()}:o&amp;&amp;o.isMatrix3?t.uniforms[r]={type:&quot;m3&quot;,value:o.toArray()}:o&amp;&amp;o.isMatrix4?t.uniforms[r]={type:&quot;m4&quot;,value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length&gt;0&amp;&amp;(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&amp;&amp;(i[r]=!0);return Object.keys(i).length&gt;0&amp;&amp;(t.extensions=i),t}}class hy extends nn{constructor(){super(),this.isCamera=!0,this.type=&quot;Camera&quot;,this.matrixWorldInverse=new yt,this.projectionMatrix=new yt,this.projectionMatrixInverse=new yt,this.coordinateSystem=Es}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Xa=new Y,aA=new Oe,lA=new Oe;class Yn extends hy{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type=&quot;PerspectiveCamera&quot;,this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=uh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uh*2*Math.atan(Math.tan(bc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Xa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Xa.x,Xa.y).multiplyScalar(-e/Xa.z),Xa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Xa.x,Xa.y).multiplyScalar(-e/Xa.z)}getViewSize(e,t){return this.getViewBounds(e,aA,lA),t.subVectors(lA,aA)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&amp;&amp;(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&amp;&amp;(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(bc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&amp;&amp;this.view.enabled){const u=o.fullWidth,h=o.fullHeight;s+=o.offsetX*r/u,t-=o.offsetY*i/h,r*=o.width/u,i*=o.height/h}const l=this.filmOffset;l!==0&amp;&amp;(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&amp;&amp;(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Au=-90,Cu=1;class YD extends nn{constructor(e,t,i){super(),this.type=&quot;CubeCamera&quot;,this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Yn(Au,Cu,e,t);r.layers=this.layers,this.add(r);const s=new Yn(Au,Cu,e,t);s.layers=this.layers,this.add(s);const o=new Yn(Au,Cu,e,t);o.layers=this.layers,this.add(o);const l=new Yn(Au,Cu,e,t);l.layers=this.layers,this.add(l);const u=new Yn(Au,Cu,e,t);u.layers=this.layers,this.add(u);const h=new Yn(Au,Cu,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,l,u]=t;for(const h of t)this.remove(h);if(e===Es)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===xd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error(&quot;THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: &quot;+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&amp;&amp;this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&amp;&amp;(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,u,h,f]=this.children,p=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,u),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(p,m,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Xd extends Kn{constructor(e=[],t=fa,i,r,s,o,l,u,h,f){super(e,t,i,r,s,o,l,u,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class KD extends Js{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Xd(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:fi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

                            varying vec3 vWorldDirection;

                            vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

                                    return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

                            }

                            void main() {

                                    vWorldDirection = transformDirection( position, modelMatrix );

                                    #include &lt;begin_vertex&gt;
                                    #include &lt;project_vertex&gt;

                            }
                    `,fragmentShader:`

                            uniform sampler2D tEquirect;

                            varying vec3 vWorldDirection;

                            #include &lt;common&gt;

                            void main() {

                                    vec3 direction = normalize( vWorldDirection );

                                    vec2 sampleUV = equirectUv( direction );

                                    gl_FragColor = texture2D( tEquirect, sampleUV );

                            }
                    `},r=new xl(5,5,5),s=new Ts({name:&quot;CubemapFromEquirect&quot;,uniforms:hh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:xr,blending:la});s.uniforms.tEquirect.value=t;const o=new Sn(r,s),l=t.minFilter;return t.minFilter===Zr&amp;&amp;(t.minFilter=fi),new YD(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o&lt;6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class br extends nn{constructor(){super(),this.isGroup=!0,this.type=&quot;Group&quot;}}const cz={type:&quot;move&quot;};class Og{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&amp;&amp;(this._hand=new br,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&amp;&amp;(this._targetRay=new br,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&amp;&amp;(this._grip=new br,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&amp;&amp;this._targetRay.dispatchEvent(e),this._grip!==null&amp;&amp;this._grip.dispatchEvent(e),this._hand!==null&amp;&amp;this._hand.dispatchEvent(e),this}connect(e){if(e&amp;&amp;e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:&quot;connected&quot;,data:e}),this}disconnect(e){return this.dispatchEvent({type:&quot;disconnected&quot;,data:e}),this._targetRay!==null&amp;&amp;(this._targetRay.visible=!1),this._grip!==null&amp;&amp;(this._grip.visible=!1),this._hand!==null&amp;&amp;(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,h=this._hand;if(e&amp;&amp;t.session.visibilityState!==&quot;visible-blurred&quot;){if(h&amp;&amp;e.hand){o=!0;for(const x of e.hand.values()){const b=t.getJointPose(x,i),_=this._getHandJoint(h,x);b!==null&amp;&amp;(_.matrix.fromArray(b.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=b.radius),_.visible=b!==null}const f=h.joints[&quot;index-finger-tip&quot;],p=h.joints[&quot;thumb-tip&quot;],m=f.position.distanceTo(p.position),g=.02,v=.005;h.inputState.pinching&amp;&amp;m&gt;g+v?(h.inputState.pinching=!1,this.dispatchEvent({type:&quot;pinchend&quot;,handedness:e.handedness,target:this})):!h.inputState.pinching&amp;&amp;m&lt;=g-v&amp;&amp;(h.inputState.pinching=!0,this.dispatchEvent({type:&quot;pinchstart&quot;,handedness:e.handedness,target:this}))}else u!==null&amp;&amp;e.gripSpace&amp;&amp;(s=t.getPose(e.gripSpace,i),s!==null&amp;&amp;(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&amp;&amp;(r=t.getPose(e.targetRaySpace,i),r===null&amp;&amp;s!==null&amp;&amp;(r=s),r!==null&amp;&amp;(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(cz)))}return l!==null&amp;&amp;(l.visible=r!==null),u!==null&amp;&amp;(u.visible=s!==null),h!==null&amp;&amp;(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new br;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class fy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name=&quot;&quot;,this.color=new $e(e),this.density=t}clone(){return new fy(this.color,this.density)}toJSON(){return{type:&quot;FogExp2&quot;,name:this.name,color:this.color.getHex(),density:this.density}}}class dy{constructor(e,t=1,i=1e3){this.isFog=!0,this.name=&quot;&quot;,this.color=new $e(e),this.near=t,this.far=i}clone(){return new dy(this.color,this.near,this.far)}toJSON(){return{type:&quot;Fog&quot;,name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let py=class extends nn{constructor(){super(),this.isScene=!0,this.type=&quot;Scene&quot;,this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Sr,this.environmentIntensity=1,this.environmentRotation=new Sr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;observe&quot;,{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&amp;&amp;(this.background=e.background.clone()),e.environment!==null&amp;&amp;(this.environment=e.environment.clone()),e.fog!==null&amp;&amp;(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&amp;&amp;(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&amp;&amp;(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness&gt;0&amp;&amp;(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&amp;&amp;(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&amp;&amp;(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class qd{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=bd,this.updateRanges=[],this.version=0,this.uuid=Jr()}onUploadCallback(){}set needsUpdate(e){e===!0&amp;&amp;this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r&lt;s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&amp;&amp;(e.arrayBuffers={}),this.array.buffer._uuid===void 0&amp;&amp;(this.array.buffer._uuid=Jr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&amp;&amp;(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&amp;&amp;(e.arrayBuffers={}),this.array.buffer._uuid===void 0&amp;&amp;(this.array.buffer._uuid=Jr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&amp;&amp;(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const pr=new Y;class dl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name=&quot;&quot;,this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t&lt;i;t++)pr.fromBufferAttribute(this,t),pr.applyMatrix4(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t&lt;i;t++)pr.fromBufferAttribute(this,t),pr.applyNormalMatrix(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}transformDirection(e){for(let t=0,i=this.count;t&lt;i;t++)pr.fromBufferAttribute(this,t),pr.transformDirection(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&amp;&amp;(i=yr(i,this.array)),i}setComponent(e,t,i){return this.normalized&amp;&amp;(i=Xt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array),s=Xt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log(&quot;THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.&quot;);const t=[];for(let i=0;i&lt;this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s&lt;this.itemSize;s++)t.push(this.data.array[r+s])}return new Jt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&amp;&amp;(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&amp;&amp;(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new dl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log(&quot;THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.&quot;);const t=[];for(let i=0;i&lt;this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s&lt;this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&amp;&amp;(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&amp;&amp;(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class fw extends Oi{constructor(e){super(),this.isSpriteMaterial=!0,this.type=&quot;SpriteMaterial&quot;,this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ru;const Of=new Y,Ou=new Y,Du=new Y,Nu=new Oe,Df=new Oe,$D=new yt,bm=new Y,Nf=new Y,xm=new Y,cA=new Oe,Ob=new Oe,uA=new Oe;class ZD extends nn{constructor(e=new fw){if(super(),this.isSprite=!0,this.type=&quot;Sprite&quot;,Ru===void 0){Ru=new Lt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new qd(t,5);Ru.setIndex([0,1,2,0,2,3]),Ru.setAttribute(&quot;position&quot;,new dl(i,3,0,!1)),Ru.setAttribute(&quot;uv&quot;,new dl(i,2,3,!1))}this.geometry=Ru,this.material=e,this.center=new Oe(.5,.5)}raycast(e,t){e.camera===null&amp;&amp;console.error(&#x27;THREE.Sprite: &quot;Raycaster.camera&quot; needs to be set in order to raycast against sprites.&#x27;),Ou.setFromMatrixScale(this.matrixWorld),$D.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Du.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&amp;&amp;this.material.sizeAttenuation===!1&amp;&amp;Ou.multiplyScalar(-Du.z);const i=this.material.rotation;let r,s;i!==0&amp;&amp;(s=Math.cos(i),r=Math.sin(i));const o=this.center;Sm(bm.set(-.5,-.5,0),Du,o,Ou,r,s),Sm(Nf.set(.5,-.5,0),Du,o,Ou,r,s),Sm(xm.set(.5,.5,0),Du,o,Ou,r,s),cA.set(0,0),Ob.set(1,0),uA.set(1,1);let l=e.ray.intersectTriangle(bm,Nf,xm,!1,Of);if(l===null&amp;&amp;(Sm(Nf.set(-.5,.5,0),Du,o,Ou,r,s),Ob.set(0,1),l=e.ray.intersectTriangle(bm,xm,Nf,!1,Of),l===null))return;const u=e.ray.origin.distanceTo(Of);u&lt;e.near||u&gt;e.far||t.push({distance:u,point:Of.clone(),uv:_r.getInterpolation(Of,bm,Nf,xm,cA,Ob,uA,new Oe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&amp;&amp;this.center.copy(e.center),this.material=e.material,this}}function Sm(n,e,t,i,r,s){Nu.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Df.x=s*Nu.x-r*Nu.y,Df.y=r*Nu.x+s*Nu.y):Df.copy(Nu),n.copy(e),n.x+=Df.x,n.y+=Df.y,n.applyMatrix4($D)}const wm=new Y,hA=new Y;class JD extends nn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type=&quot;LOD&quot;,Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i&lt;r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s&lt;r.length&amp;&amp;!(t&lt;r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i&lt;t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length&gt;0){let i,r;for(i=1,r=t.length;i&lt;r;i++){let s=t[i].distance;if(t[i].object.visible&amp;&amp;(s-=s*t[i].hysteresis),e&lt;s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length&gt;0){wm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(wm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length&gt;1){wm.setFromMatrixPosition(e.matrixWorld),hA.setFromMatrixPosition(this.matrixWorld);const i=wm.distanceTo(hA)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r&lt;s;r++){let o=t[r].distance;if(t[r].object.visible&amp;&amp;(o-=o*t[r].hysteresis),i&gt;=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r&lt;s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&amp;&amp;(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r&lt;s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const fA=new Y,dA=new yn,pA=new yn,uz=new Y,mA=new yt,Em=new Y,Db=new wi,gA=new yt,Nb=new bl;class my extends Sn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type=&quot;SkinnedMesh&quot;,this.bindMode=nS,this.bindMatrix=new yt,this.bindMatrixInverse=new yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&amp;&amp;(this.boundingBox=new Ri),this.boundingBox.makeEmpty();const t=e.getAttribute(&quot;position&quot;);for(let i=0;i&lt;t.count;i++)this.getVertexPosition(i,Em),this.boundingBox.expandByPoint(Em)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&amp;&amp;(this.boundingSphere=new wi),this.boundingSphere.makeEmpty();const t=e.getAttribute(&quot;position&quot;);for(let i=0;i&lt;t.count;i++)this.getVertexPosition(i,Em),this.boundingSphere.expandByPoint(Em)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&amp;&amp;(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&amp;&amp;(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&amp;&amp;(this.boundingSphere===null&amp;&amp;this.computeBoundingSphere(),Db.copy(this.boundingSphere),Db.applyMatrix4(r),e.ray.intersectsSphere(Db)!==!1&amp;&amp;(gA.copy(r).invert(),Nb.copy(e.ray).applyMatrix4(gA),!(this.boundingBox!==null&amp;&amp;Nb.intersectsBox(this.boundingBox)===!1)&amp;&amp;this._computeIntersections(e,t,Nb)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&amp;&amp;(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i&lt;r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===nS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===AD?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn(&quot;THREE.SkinnedMesh: Unrecognized bindMode: &quot;+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;dA.fromBufferAttribute(r.attributes.skinIndex,e),pA.fromBufferAttribute(r.attributes.skinWeight,e),fA.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s&lt;4;s++){const o=pA.getComponent(s);if(o!==0){const l=dA.getComponent(s);mA.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(uz.copy(fA).applyMatrix4(mA),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Yd extends nn{constructor(){super(),this.isBone=!0,this.type=&quot;Bone&quot;}}class $s extends Kn{constructor(e=null,t=1,i=1,r,s,o,l,u,h=xi,f=xi,p,m){super(null,o,l,u,h,f,r,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const yA=new yt,hz=new yt;class Eh{constructor(e=[],t=[]){this.uuid=Jr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn(&quot;THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.&quot;),this.boneInverses=[];for(let i=0,r=this.bones.length;i&lt;r;i++)this.boneInverses.push(new yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e&lt;t;e++){const i=new yt;this.bones[e]&amp;&amp;i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e&lt;t;e++){const i=this.bones[e];i&amp;&amp;i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e&lt;t;e++){const i=this.bones[e];i&amp;&amp;(i.parent&amp;&amp;i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s&lt;o;s++){const l=e[s]?e[s].matrixWorld:hz;yA.multiplyMatrices(l,t[s]),yA.toArray(i,s*16)}r!==null&amp;&amp;(r.needsUpdate=!0)}clone(){return new Eh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new $s(t,e,e,vr,Pr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t&lt;i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&amp;&amp;(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i&lt;r;i++){const s=e.bones[i];let o=t[s];o===void 0&amp;&amp;(console.warn(&quot;THREE.Skeleton: No bone found with UUID:&quot;,s),o=new Yd),this.bones.push(o),this.boneInverses.push(new yt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:&quot;Skeleton&quot;,generator:&quot;Skeleton.toJSON&quot;},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r&lt;s;r++){const o=t[r];e.bones.push(o.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Mc extends Jt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Iu=new yt,_A=new yt,Tm=[],vA=new Ri,fz=new yt,If=new Sn,Pf=new wi;class dw extends Sn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Mc(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r&lt;i;r++)this.setMatrixAt(r,fz)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&amp;&amp;(this.boundingBox=new Ri),e.boundingBox===null&amp;&amp;e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i&lt;t;i++)this.getMatrixAt(i,Iu),vA.copy(e.boundingBox).applyMatrix4(Iu),this.boundingBox.union(vA)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&amp;&amp;(this.boundingSphere=new wi),e.boundingSphere===null&amp;&amp;e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i&lt;t;i++)this.getMatrixAt(i,Iu),Pf.copy(e.boundingSphere).applyMatrix4(Iu),this.boundingSphere.union(Pf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&amp;&amp;(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&amp;&amp;(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&amp;&amp;(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&amp;&amp;(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let l=0;l&lt;i.length;l++)i[l]=r[o+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(If.geometry=this.geometry,If.material=this.material,If.material!==void 0&amp;&amp;(this.boundingSphere===null&amp;&amp;this.computeBoundingSphere(),Pf.copy(this.boundingSphere),Pf.applyMatrix4(i),e.ray.intersectsSphere(Pf)!==!1))for(let s=0;s&lt;r;s++){this.getMatrixAt(s,Iu),_A.multiplyMatrices(i,Iu),If.matrixWorld=_A,If.raycast(e,Tm);for(let o=0,l=Tm.length;o&lt;l;o++){const u=Tm[o];u.instanceId=s,u.object=this,t.push(u)}Tm.length=0}}setColorAt(e,t){this.instanceColor===null&amp;&amp;(this.instanceColor=new Mc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&amp;&amp;(this.morphTexture=new $s(new Float32Array(r*this.count),r,this.count,Gd,Pr));const s=this.morphTexture.source.data.data;let o=0;for(let h=0;h&lt;i.length;h++)o+=i[h];const l=this.geometry.morphTargetsRelative?1:1-o,u=r*e;s[u]=l,s.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:&quot;dispose&quot;}),this.morphTexture!==null&amp;&amp;(this.morphTexture.dispose(),this.morphTexture=null)}}const Ib=new Y,dz=new Y,pz=new jt;class Qo{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Ib.subVectors(i,t).cross(dz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Ib),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s&lt;0||s&gt;1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t&lt;0&amp;&amp;i&gt;0||i&lt;0&amp;&amp;t&gt;0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||pz.getNormalMatrix(e),r=this.coplanarPoint(Ib).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&amp;&amp;e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const jl=new wi,Mm=new Y;class Th{constructor(e=new Qo,t=new Qo,i=new Qo,r=new Qo,s=new Qo,o=new Qo){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i&lt;6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Es){const i=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],u=r[3],h=r[4],f=r[5],p=r[6],m=r[7],g=r[8],v=r[9],x=r[10],b=r[11],_=r[12],T=r[13],w=r[14],E=r[15];if(i[0].setComponents(u-s,m-h,b-g,E-_).normalize(),i[1].setComponents(u+s,m+h,b+g,E+_).normalize(),i[2].setComponents(u+o,m+f,b+v,E+T).normalize(),i[3].setComponents(u-o,m-f,b-v,E-T).normalize(),i[4].setComponents(u-l,m-p,b-x,E-w).normalize(),t===Es)i[5].setComponents(u+l,m+p,b+x,E+w).normalize();else if(t===xd)i[5].setComponents(l,p,x,w).normalize();else throw new Error(&quot;THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: &quot;+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&amp;&amp;e.computeBoundingSphere(),jl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&amp;&amp;t.computeBoundingSphere(),jl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(jl)}intersectsSprite(e){return jl.center.set(0,0,0),jl.radius=.7071067811865476,jl.applyMatrix4(e.matrixWorld),this.intersectsSphere(jl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s&lt;6;s++)if(t[s].distanceToPoint(i)&lt;r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i&lt;6;i++){const r=t[i];if(Mm.x=r.normal.x&gt;0?e.max.x:e.min.x,Mm.y=r.normal.y&gt;0?e.max.y:e.min.y,Mm.z=r.normal.z&gt;0?e.max.z:e.min.z,r.distanceToPoint(Mm)&lt;0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i&lt;6;i++)if(t[i].distanceToPoint(e)&lt;0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ao=new yt,lo=new Th;class gy{constructor(){this.coordinateSystem=Es}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.containsPoint(e))return!0}return!1}clone(){return new gy}}function Pb(n,e){return n-e}function mz(n,e){return n.z-e.z}function gz(n,e){return e.z-n.z}class yz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index&gt;=s.length&amp;&amp;s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];o.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const Or=new yt,_z=new $e(1,1,1),bA=new Th,vz=new gy,Am=new Ri,Wl=new wi,Lf=new Y,xA=new Y,bz=new Y,Lb=new yz,cr=new Sn,Cm=[];function xz(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s&lt;r;s++)for(let o=0;o&lt;i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Xl(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i&lt;t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class QD extends Sn{constructor(e,t,i=t*2,r){super(new Lt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new $s(t,e,e,vr,Pr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new $s(t,e,e,jd,da);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new $s(t,e,e,vr,Pr);i.colorSpace=Zt.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:u,normalized:h}=o,f=new l.constructor(i*u),p=new Jt(f,u,h);t.setAttribute(s,p)}if(e.getIndex()!==null){const s=i&gt;65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Jt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error(&#x27;THREE.BatchedMesh: All geometries must consistently have &quot;index&quot;.&#x27;);for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing &quot;${i}&quot;. All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error(&quot;THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.&quot;)}}validateInstanceId(e){const t=this._instanceInfo;if(e&lt;0||e&gt;=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e&lt;0||e&gt;=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&amp;&amp;(this.boundingBox=new Ri);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i&lt;r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Or),this.getBoundingBoxAt(s,Am).applyMatrix4(Or),e.union(Am)}}computeBoundingSphere(){this.boundingSphere===null&amp;&amp;(this.boundingSphere=new wi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i&lt;r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Or),this.getBoundingSphereAt(s,Wl).applyMatrix4(Or),e.union(Wl)}}addInstance(e){if(this._instanceInfo.length&gt;=this.maxInstanceCount&amp;&amp;this._availableInstanceIds.length===0)throw new Error(&quot;THREE.BatchedMesh: Maximum item count reached.&quot;);const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length&gt;0?(this._availableInstanceIds.sort(Pb),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Or.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&amp;&amp;(_z.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute(&quot;position&quot;).count:t;const o=e.getIndex();if(o!==null&amp;&amp;(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&amp;&amp;r.indexStart+r.reservedIndexCount&gt;this._maxIndexCount||r.vertexStart+r.reservedVertexCount&gt;this._maxVertexCount)throw new Error(&quot;THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.&quot;);let u;return this._availableGeometryIds.length&gt;0?(this._availableGeometryIds.sort(Pb),u=this._availableGeometryIds.shift(),s[u]=r):(u=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(u,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(e,t){if(e&gt;=this._geometryCount)throw new Error(&quot;THREE.BatchedMesh: Maximum geometry count reached.&quot;);this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),l=this._geometryInfo[e];if(r&amp;&amp;o.count&gt;l.reservedIndexCount||t.attributes.position.count&gt;l.reservedVertexCount)throw new Error(&quot;THREE.BatchedMesh: Reserved space not large enough for provided geometry.&quot;);const u=l.vertexStart,h=l.reservedVertexCount;l.vertexCount=t.getAttribute(&quot;position&quot;).count;for(const f in i.attributes){const p=t.getAttribute(f),m=i.getAttribute(f);xz(p,m,u);const g=p.itemSize;for(let v=p.count,x=h;v&lt;x;v++){const b=u+v;for(let _=0;_&lt;g;_++)m.setComponent(b,_,0)}m.needsUpdate=!0,m.addUpdateRange(u*g,h*g)}if(r){const f=l.indexStart,p=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let m=0;m&lt;o.count;m++)s.setX(f+m,u+o.getX(m));for(let m=o.count,g=p;m&lt;g;m++)s.setX(f+m,u);s.needsUpdate=!0,s.addUpdateRange(f,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&amp;&amp;(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&amp;&amp;(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e&gt;=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r&lt;s;r++)i[r].active&amp;&amp;i[r].geometryIndex===e&amp;&amp;this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,l)=&gt;l).sort((o,l)=&gt;i[o].vertexStart-i[l].vertexStart),s=this.geometry;for(let o=0,l=i.length;o&lt;l;o++){const u=r[o],h=i[u];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:f,vertexStart:p,reservedIndexCount:m}=h,g=s.index,v=g.array,x=e-p;for(let b=f;b&lt;f+m;b++)v[b]=v[b]+x;g.array.copyWithin(t,f,f+m),g.addUpdateRange(t,m),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:f,reservedVertexCount:p}=h,m=s.attributes;for(const g in m){const v=m[g],{array:x,itemSize:b}=v;x.copyWithin(e*b,f*b,(f+p)*b),v.addUpdateRange(e*b,p*b)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e&gt;=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Ri,o=i.index,l=i.attributes.position;for(let u=r.start,h=r.start+r.count;u&lt;h;u++){let f=u;o&amp;&amp;(f=o.getX(f)),s.expandByPoint(Lf.fromBufferAttribute(l,f))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e&gt;=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new wi;this.getBoundingBoxAt(e,Am),Am.getCenter(s.center);const o=i.index,l=i.attributes.position;let u=0;for(let h=r.start,f=r.start+r.count;h&lt;f;h++){let p=h;o&amp;&amp;(p=o.getX(p)),Lf.fromBufferAttribute(l,p),u=Math.max(u,s.center.distanceToSquared(Lf))}s.radius=Math.sqrt(u),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&amp;&amp;this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(Pb);t[t.length-1]===i.length;)i.pop(),t.pop();if(e&lt;i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Xl(this._multiDrawCounts,r),Xl(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Xl(o.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Xl(l.image.data,this._matricesTexture.image.data),u&amp;&amp;(u.dispose(),this._initColorsTexture(),Xl(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=&gt;l.active);if(Math.max(...i.map(l=&gt;l.vertexStart+l.reservedVertexCount))&gt;e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&amp;&amp;Math.max(...i.map(u=&gt;u.indexStart+u.reservedIndexCount))&gt;t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&amp;&amp;(this._geometryInitialized=!1,this.geometry=new Lt,this._initializeGeometry(s));const o=this.geometry;s.index&amp;&amp;Xl(s.index.array,o.index.array);for(const l in s.attributes)Xl(s.attributes[l].array,o.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;cr.material=this.material,cr.geometry.index=o.index,cr.geometry.attributes=o.attributes,cr.geometry.boundingBox===null&amp;&amp;(cr.geometry.boundingBox=new Ri),cr.geometry.boundingSphere===null&amp;&amp;(cr.geometry.boundingSphere=new wi);for(let l=0,u=i.length;l&lt;u;l++){if(!i[l].visible||!i[l].active)continue;const h=i[l].geometryIndex,f=r[h];cr.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(l,cr.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,cr.geometry.boundingBox),this.getBoundingSphereAt(h,cr.geometry.boundingSphere),cr.raycast(e,Cm);for(let p=0,m=Cm.length;p&lt;m;p++){const g=Cm[p];g.object=this,g.batchId=l,t.push(g)}Cm.length=0}cr.material=null,cr.geometry.index=null,cr.geometry.attributes={},cr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=&gt;({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=&gt;({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&amp;&amp;(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&amp;&amp;(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&amp;&amp;!this.perObjectFrustumCulled&amp;&amp;!this.sortObjects)return;const o=r.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,u=this._instanceInfo,h=this._multiDrawStarts,f=this._multiDrawCounts,p=this._geometryInfo,m=this.perObjectFrustumCulled,g=this._indirectTexture,v=g.image.data,x=i.isArrayCamera?vz:bA;m&amp;&amp;!i.isArrayCamera&amp;&amp;(Or.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),bA.setFromProjectionMatrix(Or,e.coordinateSystem));let b=0;if(this.sortObjects){Or.copy(this.matrixWorld).invert(),Lf.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Or),xA.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Or);for(let w=0,E=u.length;w&lt;E;w++)if(u[w].visible&amp;&amp;u[w].active){const R=u[w].geometryIndex;this.getMatrixAt(w,Or),this.getBoundingSphereAt(R,Wl).applyMatrix4(Or);let N=!1;if(m&amp;&amp;(N=!x.intersectsSphere(Wl,i)),!N){const A=p[R],D=bz.subVectors(Wl.center,Lf).dot(xA);Lb.push(A.start,A.count,D,w)}}const _=Lb.list,T=this.customSort;T===null?_.sort(s.transparent?gz:mz):T.call(this,_,i);for(let w=0,E=_.length;w&lt;E;w++){const R=_[w];h[b]=R.start*l,f[b]=R.count,v[b]=R.index,b++}Lb.reset()}else for(let _=0,T=u.length;_&lt;T;_++)if(u[_].visible&amp;&amp;u[_].active){const w=u[_].geometryIndex;let E=!1;if(m&amp;&amp;(this.getMatrixAt(_,Or),this.getBoundingSphereAt(w,Wl).applyMatrix4(Or),E=!x.intersectsSphere(Wl,i)),!E){const R=p[w];h[b]=R.start*l,f[b]=R.count,v[b]=_,b++}}g.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Zi extends Oi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type=&quot;LineBasicMaterial&quot;,this.color=new $e(16777215),this.map=null,this.linewidth=1,this.linecap=&quot;round&quot;,this.linejoin=&quot;round&quot;,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const T0=new Y,M0=new Y,SA=new yt,Uf=new bl,Rm=new wi,Ub=new Y,wA=new Y;class xo extends nn{constructor(e=new Lt,t=new Zi){super(),this.isLine=!0,this.type=&quot;Line&quot;,this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r&lt;s;r++)T0.fromBufferAttribute(t,r-1),M0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=T0.distanceTo(M0);e.setAttribute(&quot;lineDistance&quot;,new ct(i,1))}else console.warn(&quot;THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.&quot;);return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),Rm.copy(i.boundingSphere),Rm.applyMatrix4(r),Rm.radius+=s,e.ray.intersectsSphere(Rm)===!1)return;SA.copy(r).invert(),Uf.copy(e.ray).applyMatrix4(SA);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){const g=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let x=g,b=v-1;x&lt;b;x+=h){const _=f.getX(x),T=f.getX(x+1),w=Om(this,e,Uf,u,_,T,x);w&amp;&amp;t.push(w)}if(this.isLineLoop){const x=f.getX(v-1),b=f.getX(g),_=Om(this,e,Uf,u,x,b,v-1);_&amp;&amp;t.push(_)}}else{const g=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let x=g,b=v-1;x&lt;b;x+=h){const _=Om(this,e,Uf,u,x,x+1,x);_&amp;&amp;t.push(_)}if(this.isLineLoop){const x=Om(this,e,Uf,u,v-1,g,v-1);x&amp;&amp;t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length&gt;0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s&lt;o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Om(n,e,t,i,r,s,o){const l=n.geometry.attributes.position;if(T0.fromBufferAttribute(l,r),M0.fromBufferAttribute(l,s),t.distanceSqToSegment(T0,M0,Ub,wA)&gt;i)return;Ub.applyMatrix4(n.matrixWorld);const h=e.ray.origin.distanceTo(Ub);if(!(h&lt;e.near||h&gt;e.far))return{distance:h,point:wA.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const EA=new Y,TA=new Y;class Ur extends xo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type=&quot;LineSegments&quot;}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r&lt;s;r+=2)EA.fromBufferAttribute(t,r),TA.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+EA.distanceTo(TA);e.setAttribute(&quot;lineDistance&quot;,new ct(i,1))}else console.warn(&quot;THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.&quot;);return this}}class pw extends xo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type=&quot;LineLoop&quot;}}class yy extends Oi{constructor(e){super(),this.isPointsMaterial=!0,this.type=&quot;PointsMaterial&quot;,this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const MA=new yt,sS=new bl,Dm=new wi,Nm=new Y;class _y extends nn{constructor(e=new Lt,t=new yy){super(),this.isPoints=!0,this.type=&quot;Points&quot;,this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),Dm.copy(i.boundingSphere),Dm.applyMatrix4(r),Dm.radius+=s,e.ray.intersectsSphere(Dm)===!1)return;MA.copy(r).invert(),sS.copy(e.ray).applyMatrix4(MA);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let v=m,x=g;v&lt;x;v++){const b=h.getX(v);Nm.fromBufferAttribute(p,b),AA(Nm,b,u,r,e,t,this)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let v=m,x=g;v&lt;x;v++)Nm.fromBufferAttribute(p,v),AA(Nm,v,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length&gt;0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s&lt;o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function AA(n,e,t,i,r,s,o){const l=sS.distanceSqToPoint(n);if(l&lt;t){const u=new Y;sS.closestPointToPoint(n,u),u.applyMatrix4(i);const h=r.ray.origin.distanceTo(u);if(h&lt;r.near||h&gt;r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class eN extends Kn{constructor(e,t,i,r,s=fi,o=fi,l,u,h){super(e,t,i,r,s,o,l,u,h),this.isVideoTexture=!0,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}&quot;requestVideoFrameCallback&quot;in e&amp;&amp;e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;&quot;requestVideoFrameCallback&quot;in e===!1&amp;&amp;e.readyState&gt;=e.HAVE_CURRENT_DATA&amp;&amp;(this.needsUpdate=!0)}}class Sz extends eN{constructor(e,t,i,r,s,o,l,u){super({},e,t,i,r,s,o,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class wz extends Kn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=xi,this.minFilter=xi,this.generateMipmaps=!1,this.needsUpdate=!0}}class vy extends Kn{constructor(e,t,i,r,s,o,l,u,h,f,p,m){super(null,o,l,u,h,f,r,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ez extends vy{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=rr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Tz extends vy{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,fa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Mz extends Kn{constructor(e,t,i,r,s,o,l,u,h){super(e,t,i,r,s,o,l,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class by extends Kn{constructor(e,t,i=da,r,s,o,l=xi,u=xi,h,f=oh){if(f!==oh&amp;&amp;f!==ah)throw new Error(&quot;DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat&quot;);super(null,r,s,o,l,u,f,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ll(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&amp;&amp;(t.compareFunction=this.compareFunction),t}}class Az extends by{constructor(e=1,t=1,i=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:i},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class xy extends Lt{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type=&quot;CapsuleGeometry&quot;,this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],l=[],u=[],h=[],f=t/2,p=Math.PI/2*e,m=t,g=2*p+m,v=i*2+s,x=r+1,b=new Y,_=new Y;for(let T=0;T&lt;=v;T++){let w=0,E=0,R=0,N=0;if(T&lt;=i){const C=T/i,O=C*Math.PI/2;E=-f-e*Math.cos(O),R=e*Math.sin(O),N=-e*Math.cos(O),w=C*p}else if(T&lt;=i+s){const C=(T-i)/s;E=-f+C*t,R=e,N=0,w=p+C*m}else{const C=(T-i-s)/i,O=C*Math.PI/2;E=f+e*Math.sin(O),R=e*Math.cos(O),N=e*Math.sin(O),w=p+m+C*p}const A=Math.max(0,Math.min(1,w/g));let D=0;T===0?D=.5/r:T===v&amp;&amp;(D=-.5/r);for(let C=0;C&lt;=r;C++){const O=C/r,L=O*Math.PI*2,V=Math.sin(L),Z=Math.cos(L);_.x=-R*Z,_.y=E,_.z=R*V,l.push(_.x,_.y,_.z),b.set(-R*Z,N,R*V),b.normalize(),u.push(b.x,b.y,b.z),h.push(O+D,A)}if(T&gt;0){const C=(T-1)*x;for(let O=0;O&lt;r;O++){const L=C+O,V=C+O+1,Z=T*x+O,z=T*x+O+1;o.push(L,V,Z),o.push(V,z,Z)}}}this.setIndex(o),this.setAttribute(&quot;position&quot;,new ct(l,3)),this.setAttribute(&quot;normal&quot;,new ct(u,3)),this.setAttribute(&quot;uv&quot;,new ct(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xy(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Sy extends Lt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type=&quot;CircleGeometry&quot;,this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],u=[],h=new Y,f=new Oe;o.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let p=0,m=3;p&lt;=t;p++,m+=3){const g=i+p/t*r;h.x=e*Math.cos(g),h.y=e*Math.sin(g),o.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(o[m]/e+1)/2,f.y=(o[m+1]/e+1)/2,u.push(f.x,f.y)}for(let p=1;p&lt;=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute(&quot;position&quot;,new ct(o,3)),this.setAttribute(&quot;normal&quot;,new ct(l,3)),this.setAttribute(&quot;uv&quot;,new ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sy(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Mh extends Lt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,l=0,u=Math.PI*2){super(),this.type=&quot;CylinderGeometry&quot;,this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u};const h=this;r=Math.floor(r),s=Math.floor(s);const f=[],p=[],m=[],g=[];let v=0;const x=[],b=i/2;let _=0;T(),o===!1&amp;&amp;(e&gt;0&amp;&amp;w(!0),t&gt;0&amp;&amp;w(!1)),this.setIndex(f),this.setAttribute(&quot;position&quot;,new ct(p,3)),this.setAttribute(&quot;normal&quot;,new ct(m,3)),this.setAttribute(&quot;uv&quot;,new ct(g,2));function T(){const E=new Y,R=new Y;let N=0;const A=(t-e)/i;for(let D=0;D&lt;=s;D++){const C=[],O=D/s,L=O*(t-e)+e;for(let V=0;V&lt;=r;V++){const Z=V/r,z=Z*u+l,K=Math.sin(z),I=Math.cos(z);R.x=L*K,R.y=-O*i+b,R.z=L*I,p.push(R.x,R.y,R.z),E.set(K,A,I).normalize(),m.push(E.x,E.y,E.z),g.push(Z,1-O),C.push(v++)}x.push(C)}for(let D=0;D&lt;r;D++)for(let C=0;C&lt;s;C++){const O=x[C][D],L=x[C+1][D],V=x[C+1][D+1],Z=x[C][D+1];(e&gt;0||C!==0)&amp;&amp;(f.push(O,L,Z),N+=3),(t&gt;0||C!==s-1)&amp;&amp;(f.push(L,V,Z),N+=3)}h.addGroup(_,N,0),_+=N}function w(E){const R=v,N=new Oe,A=new Y;let D=0;const C=E===!0?e:t,O=E===!0?1:-1;for(let V=1;V&lt;=r;V++)p.push(0,b*O,0),m.push(0,O,0),g.push(.5,.5),v++;const L=v;for(let V=0;V&lt;=r;V++){const z=V/r*u+l,K=Math.cos(z),I=Math.sin(z);A.x=C*I,A.y=b*O,A.z=C*K,p.push(A.x,A.y,A.z),m.push(0,O,0),N.x=K*.5+.5,N.y=I*.5*O+.5,g.push(N.x,N.y),v++}for(let V=0;V&lt;r;V++){const Z=R+V,z=L+V;E===!0?f.push(z,z+1,Z):f.push(z+1,z,Z),D+=3}h.addGroup(_,D,E===!0?1:2),_+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Kd extends Mh{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,i,r,s,o,l),this.type=&quot;ConeGeometry&quot;,this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Kd(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sl extends Lt{constructor(e=[],t=[],i=1,r=0){super(),this.type=&quot;PolyhedronGeometry&quot;,this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];l(r),h(i),f(),this.setAttribute(&quot;position&quot;,new ct(s,3)),this.setAttribute(&quot;normal&quot;,new ct(s.slice(),3)),this.setAttribute(&quot;uv&quot;,new ct(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(T){const w=new Y,E=new Y,R=new Y;for(let N=0;N&lt;t.length;N+=3)g(t[N+0],w),g(t[N+1],E),g(t[N+2],R),u(w,E,R,T)}function u(T,w,E,R){const N=R+1,A=[];for(let D=0;D&lt;=N;D++){A[D]=[];const C=T.clone().lerp(E,D/N),O=w.clone().lerp(E,D/N),L=N-D;for(let V=0;V&lt;=L;V++)V===0&amp;&amp;D===N?A[D][V]=C:A[D][V]=C.clone().lerp(O,V/L)}for(let D=0;D&lt;N;D++)for(let C=0;C&lt;2*(N-D)-1;C++){const O=Math.floor(C/2);C%2===0?(m(A[D][O+1]),m(A[D+1][O]),m(A[D][O])):(m(A[D][O+1]),m(A[D+1][O+1]),m(A[D+1][O]))}}function h(T){const w=new Y;for(let E=0;E&lt;s.length;E+=3)w.x=s[E+0],w.y=s[E+1],w.z=s[E+2],w.normalize().multiplyScalar(T),s[E+0]=w.x,s[E+1]=w.y,s[E+2]=w.z}function f(){const T=new Y;for(let w=0;w&lt;s.length;w+=3){T.x=s[w+0],T.y=s[w+1],T.z=s[w+2];const E=b(T)/2/Math.PI+.5,R=_(T)/Math.PI+.5;o.push(E,1-R)}v(),p()}function p(){for(let T=0;T&lt;o.length;T+=6){const w=o[T+0],E=o[T+2],R=o[T+4],N=Math.max(w,E,R),A=Math.min(w,E,R);N&gt;.9&amp;&amp;A&lt;.1&amp;&amp;(w&lt;.2&amp;&amp;(o[T+0]+=1),E&lt;.2&amp;&amp;(o[T+2]+=1),R&lt;.2&amp;&amp;(o[T+4]+=1))}}function m(T){s.push(T.x,T.y,T.z)}function g(T,w){const E=T*3;w.x=e[E+0],w.y=e[E+1],w.z=e[E+2]}function v(){const T=new Y,w=new Y,E=new Y,R=new Y,N=new Oe,A=new Oe,D=new Oe;for(let C=0,O=0;C&lt;s.length;C+=9,O+=6){T.set(s[C+0],s[C+1],s[C+2]),w.set(s[C+3],s[C+4],s[C+5]),E.set(s[C+6],s[C+7],s[C+8]),N.set(o[O+0],o[O+1]),A.set(o[O+2],o[O+3]),D.set(o[O+4],o[O+5]),R.copy(T).add(w).add(E).divideScalar(3);const L=b(R);x(N,O+0,T,L),x(A,O+2,w,L),x(D,O+4,E,L)}}function x(T,w,E,R){R&lt;0&amp;&amp;T.x===1&amp;&amp;(o[w]=T.x-1),E.x===0&amp;&amp;E.z===0&amp;&amp;(o[w]=R/2/Math.PI+.5)}function b(T){return Math.atan2(T.z,-T.x)}function _(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sl(e.vertices,e.indices,e.radius,e.details)}}class wy extends Sl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type=&quot;DodecahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new wy(e.radius,e.detail)}}const Im=new Y,Pm=new Y,kb=new Y,Lm=new _r;class mw extends Lt{constructor(e=null,t=1){if(super(),this.type=&quot;EdgesGeometry&quot;,this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(bc*t),o=e.getIndex(),l=e.getAttribute(&quot;position&quot;),u=o?o.count:l.count,h=[0,0,0],f=[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;],p=new Array(3),m={},g=[];for(let v=0;v&lt;u;v+=3){o?(h[0]=o.getX(v),h[1]=o.getX(v+1),h[2]=o.getX(v+2)):(h[0]=v,h[1]=v+1,h[2]=v+2);const{a:x,b,c:_}=Lm;if(x.fromBufferAttribute(l,h[0]),b.fromBufferAttribute(l,h[1]),_.fromBufferAttribute(l,h[2]),Lm.getNormal(kb),p[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,p[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,p[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let T=0;T&lt;3;T++){const w=(T+1)%3,E=p[T],R=p[w],N=Lm[f[T]],A=Lm[f[w]],D=`${E}_${R}`,C=`${R}_${E}`;C in m&amp;&amp;m[C]?(kb.dot(m[C].normal)&lt;=s&amp;&amp;(g.push(N.x,N.y,N.z),g.push(A.x,A.y,A.z)),m[C]=null):D in m||(m[D]={index0:h[T],index1:h[w],normal:kb.clone()})}}for(const v in m)if(m[v]){const{index0:x,index1:b}=m[v];Im.fromBufferAttribute(l,x),Pm.fromBufferAttribute(l,b),g.push(Im.x,Im.y,Im.z),g.push(Pm.x,Pm.y,Pm.z)}this.setAttribute(&quot;position&quot;,new ct(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Qs{constructor(){this.type=&quot;Curve&quot;,this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn(&quot;THREE.Curve: .getPoint() not implemented.&quot;)}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i&lt;=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i&lt;=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&amp;&amp;this.cacheArcLengths.length===e+1&amp;&amp;!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o&lt;=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let l=0,u=s-1,h;for(;l&lt;=u;)if(r=Math.floor(l+(u-l)/2),h=i[r]-o,h&lt;0)l=r+1;else if(h&gt;0)u=r-1;else{u=r;break}if(r=u,i[r]===o)return r/(s-1);const f=i[r],m=i[r+1]-f,g=(o-f)/m;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r&lt;0&amp;&amp;(r=0),s&gt;1&amp;&amp;(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=t||(o.isVector2?new Oe:new Y);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new Y,r=[],s=[],o=[],l=new Y,u=new yt;for(let g=0;g&lt;=e;g++){const v=g/e;r[g]=this.getTangentAt(v,new Y)}s[0]=new Y,o[0]=new Y;let h=Number.MAX_VALUE;const f=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);f&lt;=h&amp;&amp;(h=f,i.set(1,0,0)),p&lt;=h&amp;&amp;(h=p,i.set(0,1,0)),m&lt;=h&amp;&amp;i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let g=1;g&lt;=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),l.crossVectors(r[g-1],r[g]),l.length()&gt;Number.EPSILON){l.normalize();const v=Math.acos(Vt(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(u.makeRotationAxis(l,v))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(Vt(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(l.crossVectors(s[0],s[e]))&gt;0&amp;&amp;(g=-g);for(let v=1;v&lt;=e;v++)s[v].applyMatrix4(u.makeRotationAxis(r[v],g*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:&quot;Curve&quot;,generator:&quot;Curve.toJSON&quot;}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ey extends Qs{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type=&quot;EllipseCurve&quot;,this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new Oe){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)&lt;Number.EPSILON;for(;s&lt;0;)s+=r;for(;s&gt;r;)s-=r;s&lt;Number.EPSILON&amp;&amp;(o?s=0:s=r),this.aClockwise===!0&amp;&amp;!o&amp;&amp;(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=u-this.aX,g=h-this.aY;u=m*f-g*p+this.aX,h=m*p+g*f+this.aY}return i.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class tN extends Ey{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type=&quot;ArcCurve&quot;}}function gw(){let n=0,e=0,t=0,i=0;function r(s,o,l,u){n=s,e=l,t=-3*s+3*o-2*l-u,i=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,h){r(o,l,h*(l-s),h*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,h,f,p){let m=(o-s)/h-(l-s)/(h+f)+(l-o)/f,g=(l-o)/f-(u-o)/(f+p)+(u-l)/p;m*=f,g*=f,r(o,l,m,g)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+i*l}}}const Um=new Y,Fb=new gw,zb=new gw,Bb=new gw;class nN extends Qs{constructor(e=[],t=!1,i=&quot;centripetal&quot;,r=.5){super(),this.isCatmullRomCurve3=!0,this.type=&quot;CatmullRomCurve3&quot;,this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new Y){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),u=o-l;this.closed?l+=l&gt;0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&amp;&amp;l===s-1&amp;&amp;(l=s-2,u=1);let h,f;this.closed||l&gt;0?h=r[(l-1)%s]:(Um.subVectors(r[0],r[1]).add(r[0]),h=Um);const p=r[l%s],m=r[(l+1)%s];if(this.closed||l+2&lt;s?f=r[(l+2)%s]:(Um.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Um),this.curveType===&quot;centripetal&quot;||this.curveType===&quot;chordal&quot;){const g=this.curveType===&quot;chordal&quot;?.5:.25;let v=Math.pow(h.distanceToSquared(p),g),x=Math.pow(p.distanceToSquared(m),g),b=Math.pow(m.distanceToSquared(f),g);x&lt;1e-4&amp;&amp;(x=1),v&lt;1e-4&amp;&amp;(v=x),b&lt;1e-4&amp;&amp;(b=x),Fb.initNonuniformCatmullRom(h.x,p.x,m.x,f.x,v,x,b),zb.initNonuniformCatmullRom(h.y,p.y,m.y,f.y,v,x,b),Bb.initNonuniformCatmullRom(h.z,p.z,m.z,f.z,v,x,b)}else this.curveType===&quot;catmullrom&quot;&amp;&amp;(Fb.initCatmullRom(h.x,p.x,m.x,f.x,this.tension),zb.initCatmullRom(h.y,p.y,m.y,f.y,this.tension),Bb.initCatmullRom(h.z,p.z,m.z,f.z,this.tension));return i.set(Fb.calc(u),zb.calc(u),Bb.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t&lt;i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(new Y().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function CA(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,l=n*n,u=n*l;return(2*t-2*i+s+o)*u+(-3*t+3*i-2*s-o)*l+s*n+t}function Cz(n,e){const t=1-n;return t*t*e}function Rz(n,e){return 2*(1-n)*n*e}function Oz(n,e){return n*n*e}function cd(n,e,t,i){return Cz(n,e)+Rz(n,t)+Oz(n,i)}function Dz(n,e){const t=1-n;return t*t*t*e}function Nz(n,e){const t=1-n;return 3*t*t*n*e}function Iz(n,e){return 3*(1-n)*n*n*e}function Pz(n,e){return n*n*n*e}function ud(n,e,t,i,r){return Dz(n,e)+Nz(n,t)+Iz(n,i)+Pz(n,r)}class yw extends Qs{constructor(e=new Oe,t=new Oe,i=new Oe,r=new Oe){super(),this.isCubicBezierCurve=!0,this.type=&quot;CubicBezierCurve&quot;,this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Oe){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(ud(e,r.x,s.x,o.x,l.x),ud(e,r.y,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iN extends Qs{constructor(e=new Y,t=new Y,i=new Y,r=new Y){super(),this.isCubicBezierCurve3=!0,this.type=&quot;CubicBezierCurve3&quot;,this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Y){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(ud(e,r.x,s.x,o.x,l.x),ud(e,r.y,s.y,o.y,l.y),ud(e,r.z,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class _w extends Qs{constructor(e=new Oe,t=new Oe){super(),this.isLineCurve=!0,this.type=&quot;LineCurve&quot;,this.v1=e,this.v2=t}getPoint(e,t=new Oe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Oe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rN extends Qs{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type=&quot;LineCurve3&quot;,this.v1=e,this.v2=t}getPoint(e,t=new Y){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vw extends Qs{constructor(e=new Oe,t=new Oe,i=new Oe){super(),this.isQuadraticBezierCurve=!0,this.type=&quot;QuadraticBezierCurve&quot;,this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Oe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(cd(e,r.x,s.x,o.x),cd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bw extends Qs{constructor(e=new Y,t=new Y,i=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type=&quot;QuadraticBezierCurve3&quot;,this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Y){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(cd(e,r.x,s.x,o.x),cd(e,r.y,s.y,o.y),cd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xw extends Qs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type=&quot;SplineCurve&quot;,this.points=e}getPoint(e,t=new Oe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,u=r[o===0?o:o-1],h=r[o],f=r[o&gt;r.length-2?r.length-1:o+1],p=r[o&gt;r.length-3?r.length-1:o+2];return i.set(CA(l,u.x,h.x,f.x,p.x),CA(l,u.y,h.y,f.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t&lt;i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(new Oe().fromArray(r))}return this}}var A0=Object.freeze({__proto__:null,ArcCurve:tN,CatmullRomCurve3:nN,CubicBezierCurve:yw,CubicBezierCurve3:iN,EllipseCurve:Ey,LineCurve:_w,LineCurve3:rN,QuadraticBezierCurve:vw,QuadraticBezierCurve3:bw,SplineCurve:xw});class sN extends Qs{constructor(){super(),this.type=&quot;CurvePath&quot;,this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?&quot;LineCurve&quot;:&quot;LineCurve3&quot;;this.curves.push(new A0[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s&lt;r.length;){if(r[s]&gt;=i){const o=r[s]-i,l=this.curves[s],u=l.getLength(),h=u===0?0:1-o/u;return l.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&amp;&amp;this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i&lt;r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i&lt;=e;i++)t.push(this.getPoint(i/e));return this.autoClose&amp;&amp;t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r&lt;s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(l);for(let h=0;h&lt;u.length;h++){const f=u[h];i&amp;&amp;i.equals(f)||(t.push(f),i=f)}}return this.autoClose&amp;&amp;t.length&gt;1&amp;&amp;!t[t.length-1].equals(t[0])&amp;&amp;t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t&lt;i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t&lt;i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t&lt;i;t++){const r=e.curves[t];this.curves.push(new A0[r.type]().fromJSON(r))}return this}}class C0 extends sN{constructor(e){super(),this.type=&quot;Path&quot;,this.currentPoint=new Oe,e&amp;&amp;this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t&lt;i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new _w(this.currentPoint.clone(),new Oe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new vw(this.currentPoint.clone(),new Oe(e,t),new Oe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const l=new yw(this.currentPoint.clone(),new Oe(e,t),new Oe(i,r),new Oe(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new xw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,l,u){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,i,r,s,o,l,u),this}absellipse(e,t,i,r,s,o,l,u){const h=new Ey(e,t,i,r,s,o,l,u);if(this.curves.length&gt;0){const p=h.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class xc extends C0{constructor(e){super(e),this.uuid=Jr(),this.type=&quot;Shape&quot;,this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i&lt;r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t&lt;i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t&lt;i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t&lt;i;t++){const r=e.holes[t];this.holes.push(new C0().fromJSON(r))}return this}}function Lz(n,e,t=2){const i=e&amp;&amp;e.length,r=i?e[0]*t:n.length;let s=oN(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,h;if(i&amp;&amp;(s=Bz(n,e,s,t)),n.length&gt;80*t){l=1/0,u=1/0;let f=-1/0,p=-1/0;for(let m=t;m&lt;r;m+=t){const g=n[m],v=n[m+1];g&lt;l&amp;&amp;(l=g),v&lt;u&amp;&amp;(u=v),g&gt;f&amp;&amp;(f=g),v&gt;p&amp;&amp;(p=v)}h=Math.max(f-l,p-u),h=h!==0?32767/h:0}return wd(s,o,t,l,u,h,0),o}function oN(n,e,t,i,r){let s;if(r===Zz(n,e,t,i)&gt;0)for(let o=e;o&lt;t;o+=i)s=RA(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o&gt;=e;o-=i)s=RA(o/i|0,n[o],n[o+1],s);return s&amp;&amp;fh(s,s.next)&amp;&amp;(Td(s),s=s.next),s}function Ac(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&amp;&amp;(fh(t,t.next)||ri(t.prev,t,t.next)===0)){if(Td(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function wd(n,e,t,i,r,s,o){if(!n)return;!o&amp;&amp;s&amp;&amp;Wz(n,i,r,s);let l=n;for(;n.prev!==n.next;){const u=n.prev,h=n.next;if(s?kz(n,i,r,s):Uz(n)){e.push(u.i,n.i,h.i),Td(n),n=h.next,l=h.next;continue}if(n=h,n===l){o?o===1?(n=Fz(Ac(n),e),wd(n,e,t,i,r,s,2)):o===2&amp;&amp;zz(n,e,t,i,r,s):wd(Ac(n),e,t,i,r,s,1);break}}}function Uz(n){const e=n.prev,t=n,i=n.next;if(ri(e,t,i)&gt;=0)return!1;const r=e.x,s=t.x,o=i.x,l=e.y,u=t.y,h=i.y,f=Math.min(r,s,o),p=Math.min(l,u,h),m=Math.max(r,s,o),g=Math.max(l,u,h);let v=i.next;for(;v!==e;){if(v.x&gt;=f&amp;&amp;v.x&lt;=m&amp;&amp;v.y&gt;=p&amp;&amp;v.y&lt;=g&amp;&amp;Zf(r,l,s,u,o,h,v.x,v.y)&amp;&amp;ri(v.prev,v,v.next)&gt;=0)return!1;v=v.next}return!0}function kz(n,e,t,i){const r=n.prev,s=n,o=n.next;if(ri(r,s,o)&gt;=0)return!1;const l=r.x,u=s.x,h=o.x,f=r.y,p=s.y,m=o.y,g=Math.min(l,u,h),v=Math.min(f,p,m),x=Math.max(l,u,h),b=Math.max(f,p,m),_=oS(g,v,e,t,i),T=oS(x,b,e,t,i);let w=n.prevZ,E=n.nextZ;for(;w&amp;&amp;w.z&gt;=_&amp;&amp;E&amp;&amp;E.z&lt;=T;){if(w.x&gt;=g&amp;&amp;w.x&lt;=x&amp;&amp;w.y&gt;=v&amp;&amp;w.y&lt;=b&amp;&amp;w!==r&amp;&amp;w!==o&amp;&amp;Zf(l,f,u,p,h,m,w.x,w.y)&amp;&amp;ri(w.prev,w,w.next)&gt;=0||(w=w.prevZ,E.x&gt;=g&amp;&amp;E.x&lt;=x&amp;&amp;E.y&gt;=v&amp;&amp;E.y&lt;=b&amp;&amp;E!==r&amp;&amp;E!==o&amp;&amp;Zf(l,f,u,p,h,m,E.x,E.y)&amp;&amp;ri(E.prev,E,E.next)&gt;=0))return!1;E=E.nextZ}for(;w&amp;&amp;w.z&gt;=_;){if(w.x&gt;=g&amp;&amp;w.x&lt;=x&amp;&amp;w.y&gt;=v&amp;&amp;w.y&lt;=b&amp;&amp;w!==r&amp;&amp;w!==o&amp;&amp;Zf(l,f,u,p,h,m,w.x,w.y)&amp;&amp;ri(w.prev,w,w.next)&gt;=0)return!1;w=w.prevZ}for(;E&amp;&amp;E.z&lt;=T;){if(E.x&gt;=g&amp;&amp;E.x&lt;=x&amp;&amp;E.y&gt;=v&amp;&amp;E.y&lt;=b&amp;&amp;E!==r&amp;&amp;E!==o&amp;&amp;Zf(l,f,u,p,h,m,E.x,E.y)&amp;&amp;ri(E.prev,E,E.next)&gt;=0)return!1;E=E.nextZ}return!0}function Fz(n,e){let t=n;do{const i=t.prev,r=t.next.next;!fh(i,r)&amp;&amp;lN(i,t,t.next,r)&amp;&amp;Ed(i,r)&amp;&amp;Ed(r,i)&amp;&amp;(e.push(i.i,t.i,r.i),Td(t),Td(t.next),t=n=r),t=t.next}while(t!==n);return Ac(t)}function zz(n,e,t,i,r,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&amp;&amp;Yz(o,l)){let u=cN(o,l);o=Ac(o,o.next),u=Ac(u,u.next),wd(o,e,t,i,r,s,0),wd(u,e,t,i,r,s,0);return}l=l.next}o=o.next}while(o!==n)}function Bz(n,e,t,i){const r=[];for(let s=0,o=e.length;s&lt;o;s++){const l=e[s]*i,u=s&lt;o-1?e[s+1]*i:n.length,h=oN(n,l,u,i,!1);h===h.next&amp;&amp;(h.steiner=!0),r.push(qz(h))}r.sort(Hz);for(let s=0;s&lt;r.length;s++)t=Vz(r[s],t);return t}function Hz(n,e){let t=n.x-e.x;if(t===0&amp;&amp;(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function Vz(n,e){const t=Gz(n,e);if(!t)return e;const i=cN(t,n);return Ac(i,i.next),Ac(t,t.next)}function Gz(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;if(fh(n,t))return t;do{if(fh(n,t.next))return t.next;if(r&lt;=t.y&amp;&amp;r&gt;=t.next.y&amp;&amp;t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p&lt;=i&amp;&amp;p&gt;s&amp;&amp;(s=p,o=t.x&lt;t.next.x?t:t.next,p===i))return o}t=t.next}while(t!==e);if(!o)return null;const l=o,u=o.x,h=o.y;let f=1/0;t=o;do{if(i&gt;=t.x&amp;&amp;t.x&gt;=u&amp;&amp;i!==t.x&amp;&amp;aN(r&lt;h?i:s,r,u,h,r&lt;h?s:i,r,t.x,t.y)){const p=Math.abs(r-t.y)/(i-t.x);Ed(t,n)&amp;&amp;(p&lt;f||p===f&amp;&amp;(t.x&gt;o.x||t.x===o.x&amp;&amp;jz(o,t)))&amp;&amp;(o=t,f=p)}t=t.next}while(t!==l);return o}function jz(n,e){return ri(n.prev,n,e.prev)&lt;0&amp;&amp;ri(e.next,n,n.next)&lt;0}function Wz(n,e,t,i){let r=n;do r.z===0&amp;&amp;(r.z=oS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Xz(r)}function Xz(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,l=0;for(let h=0;h&lt;t&amp;&amp;(l++,o=o.nextZ,!!o);h++);let u=t;for(;l&gt;0||u&gt;0&amp;&amp;o;)l!==0&amp;&amp;(u===0||!o||i.z&lt;=o.z)?(r=i,i=i.nextZ,l--):(r=o,o=o.nextZ,u--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e&gt;1);return n}function oS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n&lt;&lt;8)&amp;16711935,n=(n|n&lt;&lt;4)&amp;252645135,n=(n|n&lt;&lt;2)&amp;858993459,n=(n|n&lt;&lt;1)&amp;1431655765,e=(e|e&lt;&lt;8)&amp;16711935,e=(e|e&lt;&lt;4)&amp;252645135,e=(e|e&lt;&lt;2)&amp;858993459,e=(e|e&lt;&lt;1)&amp;1431655765,n|e&lt;&lt;1}function qz(n){let e=n,t=n;do(e.x&lt;t.x||e.x===t.x&amp;&amp;e.y&lt;t.y)&amp;&amp;(t=e),e=e.next;while(e!==n);return t}function aN(n,e,t,i,r,s,o,l){return(r-o)*(e-l)&gt;=(n-o)*(s-l)&amp;&amp;(n-o)*(i-l)&gt;=(t-o)*(e-l)&amp;&amp;(t-o)*(s-l)&gt;=(r-o)*(i-l)}function Zf(n,e,t,i,r,s,o,l){return!(n===o&amp;&amp;e===l)&amp;&amp;aN(n,e,t,i,r,s,o,l)}function Yz(n,e){return n.next.i!==e.i&amp;&amp;n.prev.i!==e.i&amp;&amp;!Kz(n,e)&amp;&amp;(Ed(n,e)&amp;&amp;Ed(e,n)&amp;&amp;$z(n,e)&amp;&amp;(ri(n.prev,n,e.prev)||ri(n,e.prev,e))||fh(n,e)&amp;&amp;ri(n.prev,n,n.next)&gt;0&amp;&amp;ri(e.prev,e,e.next)&gt;0)}function ri(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function fh(n,e){return n.x===e.x&amp;&amp;n.y===e.y}function lN(n,e,t,i){const r=Fm(ri(n,e,t)),s=Fm(ri(n,e,i)),o=Fm(ri(t,i,n)),l=Fm(ri(t,i,e));return!!(r!==s&amp;&amp;o!==l||r===0&amp;&amp;km(n,t,e)||s===0&amp;&amp;km(n,i,e)||o===0&amp;&amp;km(t,n,i)||l===0&amp;&amp;km(t,e,i))}function km(n,e,t){return e.x&lt;=Math.max(n.x,t.x)&amp;&amp;e.x&gt;=Math.min(n.x,t.x)&amp;&amp;e.y&lt;=Math.max(n.y,t.y)&amp;&amp;e.y&gt;=Math.min(n.y,t.y)}function Fm(n){return n&gt;0?1:n&lt;0?-1:0}function Kz(n,e){let t=n;do{if(t.i!==n.i&amp;&amp;t.next.i!==n.i&amp;&amp;t.i!==e.i&amp;&amp;t.next.i!==e.i&amp;&amp;lN(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ed(n,e){return ri(n.prev,n,n.next)&lt;0?ri(n,e,n.next)&gt;=0&amp;&amp;ri(n,n.prev,e)&gt;=0:ri(n,e,n.prev)&lt;0||ri(n,n.next,e)&lt;0}function $z(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y&gt;s!=t.next.y&gt;s&amp;&amp;t.next.y!==t.y&amp;&amp;r&lt;(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&amp;&amp;(i=!i),t=t.next;while(t!==n);return i}function cN(n,e){const t=aS(n.i,n.x,n.y),i=aS(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function RA(n,e,t,i){const r=aS(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Td(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&amp;&amp;(n.prevZ.nextZ=n.nextZ),n.nextZ&amp;&amp;(n.nextZ.prevZ=n.prevZ)}function aS(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Zz(n,e,t,i){let r=0;for(let s=e,o=t-i;s&lt;t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Jz{static triangulate(e,t,i=2){return Lz(e,t,i)}}class qs{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s&lt;t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return qs.area(e)&lt;0}static triangulateShape(e,t){const i=[],r=[],s=[];OA(e),DA(i,e);let o=e.length;t.forEach(OA);for(let u=0;u&lt;t.length;u++)r.push(o),o+=t[u].length,DA(i,t[u]);const l=Jz.triangulate(i,r);for(let u=0;u&lt;l.length;u+=3)s.push(l.slice(u,u+3));return s}}function OA(n){const e=n.length;e&gt;2&amp;&amp;n[e-1].equals(n[0])&amp;&amp;n.pop()}function DA(n,e){for(let t=0;t&lt;e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ty extends Lt{constructor(e=new xc([new Oe(.5,.5),new Oe(-.5,.5),new Oe(-.5,-.5),new Oe(.5,-.5)]),t={}){super(),this.type=&quot;ExtrudeGeometry&quot;,this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,u=e.length;l&lt;u;l++){const h=e[l];o(h)}this.setAttribute(&quot;position&quot;,new ct(r,3)),this.setAttribute(&quot;uv&quot;,new ct(s,2)),this.computeVertexNormals();function o(l){const u=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:Qz;let w,E=!1,R,N,A,D;_&amp;&amp;(w=_.getSpacedPoints(f),E=!0,m=!1,R=_.computeFrenetFrames(f,!1),N=new Y,A=new Y,D=new Y),m||(b=0,g=0,v=0,x=0);const C=l.extractPoints(h);let O=C.shape;const L=C.holes;if(!qs.isClockWise(O)){O=O.reverse();for(let Q=0,Ve=L.length;Q&lt;Ve;Q++){const Le=L[Q];qs.isClockWise(Le)&amp;&amp;(L[Q]=Le.reverse())}}function Z(Q){const Le=10000000000000001e-36;let Fe=Q[0];for(let Ne=1;Ne&lt;=Q.length;Ne++){const mt=Ne%Q.length,ze=Q[mt],te=ze.x-Fe.x,H=ze.y-Fe.y,pe=te*te+H*H,Ce=Math.max(Math.abs(ze.x),Math.abs(ze.y),Math.abs(Fe.x),Math.abs(Fe.y)),Ue=Le*Ce*Ce;if(pe&lt;=Ue){Q.splice(mt,1),Ne--;continue}Fe=ze}}Z(O),L.forEach(Z);const z=L.length,K=O;for(let Q=0;Q&lt;z;Q++){const Ve=L[Q];O=O.concat(Ve)}function I(Q,Ve,Le){return Ve||console.error(&quot;THREE.ExtrudeGeometry: vec does not exist&quot;),Q.clone().addScaledVector(Ve,Le)}const j=O.length;function G(Q,Ve,Le){let Fe,Ne,mt;const ze=Q.x-Ve.x,te=Q.y-Ve.y,H=Le.x-Q.x,pe=Le.y-Q.y,Ce=ze*ze+te*te,Ue=ze*pe-te*H;if(Math.abs(Ue)&gt;Number.EPSILON){const Me=Math.sqrt(Ce),Ze=Math.sqrt(H*H+pe*pe),qe=Ve.x-te/Me,ut=Ve.y+ze/Me,Ct=Le.x-pe/Ze,je=Le.y+H/Ze,ht=((Ct-qe)*pe-(je-ut)*H)/(ze*pe-te*H);Fe=qe+ze*ht-Q.x,Ne=ut+te*ht-Q.y;const St=Fe*Fe+Ne*Ne;if(St&lt;=2)return new Oe(Fe,Ne);mt=Math.sqrt(St/2)}else{let Me=!1;ze&gt;Number.EPSILON?H&gt;Number.EPSILON&amp;&amp;(Me=!0):ze&lt;-Number.EPSILON?H&lt;-Number.EPSILON&amp;&amp;(Me=!0):Math.sign(te)===Math.sign(pe)&amp;&amp;(Me=!0),Me?(Fe=-te,Ne=ze,mt=Math.sqrt(Ce)):(Fe=ze,Ne=te,mt=Math.sqrt(Ce/2))}return new Oe(Fe/mt,Ne/mt)}const ee=[];for(let Q=0,Ve=K.length,Le=Ve-1,Fe=Q+1;Q&lt;Ve;Q++,Le++,Fe++)Le===Ve&amp;&amp;(Le=0),Fe===Ve&amp;&amp;(Fe=0),ee[Q]=G(K[Q],K[Le],K[Fe]);const F=[];let ne,le=ee.concat();for(let Q=0,Ve=z;Q&lt;Ve;Q++){const Le=L[Q];ne=[];for(let Fe=0,Ne=Le.length,mt=Ne-1,ze=Fe+1;Fe&lt;Ne;Fe++,mt++,ze++)mt===Ne&amp;&amp;(mt=0),ze===Ne&amp;&amp;(ze=0),ne[Fe]=G(Le[Fe],Le[mt],Le[ze]);F.push(ne),le=le.concat(ne)}let ce;if(b===0)ce=qs.triangulateShape(K,L);else{const Q=[],Ve=[];for(let Le=0;Le&lt;b;Le++){const Fe=Le/b,Ne=g*Math.cos(Fe*Math.PI/2),mt=v*Math.sin(Fe*Math.PI/2)+x;for(let ze=0,te=K.length;ze&lt;te;ze++){const H=I(K[ze],ee[ze],mt);He(H.x,H.y,-Ne),Fe===0&amp;&amp;Q.push(H)}for(let ze=0,te=z;ze&lt;te;ze++){const H=L[ze];ne=F[ze];const pe=[];for(let Ce=0,Ue=H.length;Ce&lt;Ue;Ce++){const Me=I(H[Ce],ne[Ce],mt);He(Me.x,Me.y,-Ne),Fe===0&amp;&amp;pe.push(Me)}Fe===0&amp;&amp;Ve.push(pe)}}ce=qs.triangulateShape(Q,Ve)}const ie=ce.length,oe=v+x;for(let Q=0;Q&lt;j;Q++){const Ve=m?I(O[Q],le[Q],oe):O[Q];E?(A.copy(R.normals[0]).multiplyScalar(Ve.x),N.copy(R.binormals[0]).multiplyScalar(Ve.y),D.copy(w[0]).add(A).add(N),He(D.x,D.y,D.z)):He(Ve.x,Ve.y,0)}for(let Q=1;Q&lt;=f;Q++)for(let Ve=0;Ve&lt;j;Ve++){const Le=m?I(O[Ve],le[Ve],oe):O[Ve];E?(A.copy(R.normals[Q]).multiplyScalar(Le.x),N.copy(R.binormals[Q]).multiplyScalar(Le.y),D.copy(w[Q]).add(A).add(N),He(D.x,D.y,D.z)):He(Le.x,Le.y,p/f*Q)}for(let Q=b-1;Q&gt;=0;Q--){const Ve=Q/b,Le=g*Math.cos(Ve*Math.PI/2),Fe=v*Math.sin(Ve*Math.PI/2)+x;for(let Ne=0,mt=K.length;Ne&lt;mt;Ne++){const ze=I(K[Ne],ee[Ne],Fe);He(ze.x,ze.y,p+Le)}for(let Ne=0,mt=L.length;Ne&lt;mt;Ne++){const ze=L[Ne];ne=F[Ne];for(let te=0,H=ze.length;te&lt;H;te++){const pe=I(ze[te],ne[te],Fe);E?He(pe.x,pe.y+w[f-1].y,w[f-1].x+Le):He(pe.x,pe.y,p+Le)}}}ae(),ue();function ae(){const Q=r.length/3;if(m){let Ve=0,Le=j*Ve;for(let Fe=0;Fe&lt;ie;Fe++){const Ne=ce[Fe];Xe(Ne[2]+Le,Ne[1]+Le,Ne[0]+Le)}Ve=f+b*2,Le=j*Ve;for(let Fe=0;Fe&lt;ie;Fe++){const Ne=ce[Fe];Xe(Ne[0]+Le,Ne[1]+Le,Ne[2]+Le)}}else{for(let Ve=0;Ve&lt;ie;Ve++){const Le=ce[Ve];Xe(Le[2],Le[1],Le[0])}for(let Ve=0;Ve&lt;ie;Ve++){const Le=ce[Ve];Xe(Le[0]+j*f,Le[1]+j*f,Le[2]+j*f)}}i.addGroup(Q,r.length/3-Q,0)}function ue(){const Q=r.length/3;let Ve=0;ve(K,Ve),Ve+=K.length;for(let Le=0,Fe=L.length;Le&lt;Fe;Le++){const Ne=L[Le];ve(Ne,Ve),Ve+=Ne.length}i.addGroup(Q,r.length/3-Q,1)}function ve(Q,Ve){let Le=Q.length;for(;--Le&gt;=0;){const Fe=Le;let Ne=Le-1;Ne&lt;0&amp;&amp;(Ne=Q.length-1);for(let mt=0,ze=f+b*2;mt&lt;ze;mt++){const te=j*mt,H=j*(mt+1),pe=Ve+Fe+te,Ce=Ve+Ne+te,Ue=Ve+Ne+H,Me=Ve+Fe+H;lt(pe,Ce,Ue,Me)}}}function He(Q,Ve,Le){u.push(Q),u.push(Ve),u.push(Le)}function Xe(Q,Ve,Le){We(Q),We(Ve),We(Le);const Fe=r.length/3,Ne=T.generateTopUV(i,r,Fe-3,Fe-2,Fe-1);Ye(Ne[0]),Ye(Ne[1]),Ye(Ne[2])}function lt(Q,Ve,Le,Fe){We(Q),We(Ve),We(Fe),We(Ve),We(Le),We(Fe);const Ne=r.length/3,mt=T.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);Ye(mt[0]),Ye(mt[1]),Ye(mt[3]),Ye(mt[1]),Ye(mt[2]),Ye(mt[3])}function We(Q){r.push(u[Q*3+0]),r.push(u[Q*3+1]),r.push(u[Q*3+2])}function Ye(Q){s.push(Q.x),s.push(Q.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return eB(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s&lt;o;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&amp;&amp;(e.options.extrudePath=new A0[r.type]().fromJSON(r)),new Ty(i,e.options)}}const Qz={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],l=e[i*3],u=e[i*3+1],h=e[r*3],f=e[r*3+1];return[new Oe(s,o),new Oe(l,u),new Oe(h,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],l=e[t*3+1],u=e[t*3+2],h=e[i*3],f=e[i*3+1],p=e[i*3+2],m=e[r*3],g=e[r*3+1],v=e[r*3+2],x=e[s*3],b=e[s*3+1],_=e[s*3+2];return Math.abs(l-f)&lt;Math.abs(o-h)?[new Oe(o,1-u),new Oe(h,1-p),new Oe(m,1-v),new Oe(x,1-_)]:[new Oe(l,1-u),new Oe(f,1-p),new Oe(g,1-v),new Oe(b,1-_)]}};function eB(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i&lt;r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&amp;&amp;(t.options.extrudePath=e.extrudePath.toJSON()),t}class My extends Sl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type=&quot;IcosahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new My(e.radius,e.detail)}}class Ay extends Lt{constructor(e=[new Oe(0,-.5),new Oe(.5,0),new Oe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type=&quot;LatheGeometry&quot;,this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Vt(r,0,Math.PI*2);const s=[],o=[],l=[],u=[],h=[],f=1/t,p=new Y,m=new Oe,g=new Y,v=new Y,x=new Y;let b=0,_=0;for(let T=0;T&lt;=e.length-1;T++)switch(T){case 0:b=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,g.x=_*1,g.y=-b,g.z=_*0,x.copy(g),g.normalize(),u.push(g.x,g.y,g.z);break;case e.length-1:u.push(x.x,x.y,x.z);break;default:b=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,g.x=_*1,g.y=-b,g.z=_*0,v.copy(g),g.x+=x.x,g.y+=x.y,g.z+=x.z,g.normalize(),u.push(g.x,g.y,g.z),x.copy(v)}for(let T=0;T&lt;=t;T++){const w=i+T*f*r,E=Math.sin(w),R=Math.cos(w);for(let N=0;N&lt;=e.length-1;N++){p.x=e[N].x*E,p.y=e[N].y,p.z=e[N].x*R,o.push(p.x,p.y,p.z),m.x=T/t,m.y=N/(e.length-1),l.push(m.x,m.y);const A=u[3*N+0]*E,D=u[3*N+1],C=u[3*N+0]*R;h.push(A,D,C)}}for(let T=0;T&lt;t;T++)for(let w=0;w&lt;e.length-1;w++){const E=w+T*e.length,R=E,N=E+e.length,A=E+e.length+1,D=E+1;s.push(R,N,D),s.push(A,D,N)}this.setIndex(s),this.setAttribute(&quot;position&quot;,new ct(o,3)),this.setAttribute(&quot;uv&quot;,new ct(l,2)),this.setAttribute(&quot;normal&quot;,new ct(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ay(e.points,e.segments,e.phiStart,e.phiLength)}}class $d extends Sl{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type=&quot;OctahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new $d(e.radius,e.detail)}}class Ah extends Lt{constructor(e=1,t=1,i=1,r=1){super(),this.type=&quot;PlaneGeometry&quot;,this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(i),u=Math.floor(r),h=l+1,f=u+1,p=e/l,m=t/u,g=[],v=[],x=[],b=[];for(let _=0;_&lt;f;_++){const T=_*m-o;for(let w=0;w&lt;h;w++){const E=w*p-s;v.push(E,-T,0),x.push(0,0,1),b.push(w/l),b.push(1-_/u)}}for(let _=0;_&lt;u;_++)for(let T=0;T&lt;l;T++){const w=T+h*_,E=T+h*(_+1),R=T+1+h*(_+1),N=T+1+h*_;g.push(w,E,N),g.push(E,R,N)}this.setIndex(g),this.setAttribute(&quot;position&quot;,new ct(v,3)),this.setAttribute(&quot;normal&quot;,new ct(x,3)),this.setAttribute(&quot;uv&quot;,new ct(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ah(e.width,e.height,e.widthSegments,e.heightSegments)}}class Cy extends Lt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type=&quot;RingGeometry&quot;,this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const l=[],u=[],h=[],f=[];let p=e;const m=(t-e)/r,g=new Y,v=new Oe;for(let x=0;x&lt;=r;x++){for(let b=0;b&lt;=i;b++){const _=s+b/i*o;g.x=p*Math.cos(_),g.y=p*Math.sin(_),u.push(g.x,g.y,g.z),h.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,f.push(v.x,v.y)}p+=m}for(let x=0;x&lt;r;x++){const b=x*(i+1);for(let _=0;_&lt;i;_++){const T=_+b,w=T,E=T+i+1,R=T+i+2,N=T+1;l.push(w,E,N),l.push(E,R,N)}}this.setIndex(l),this.setAttribute(&quot;position&quot;,new ct(u,3)),this.setAttribute(&quot;normal&quot;,new ct(h,3)),this.setAttribute(&quot;uv&quot;,new ct(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ry extends Lt{constructor(e=new xc([new Oe(0,.5),new Oe(-.5,-.5),new Oe(.5,-.5)]),t=12){super(),this.type=&quot;ShapeGeometry&quot;,this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let l=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f&lt;e.length;f++)h(e[f]),this.addGroup(l,u,f),l+=u,u=0;this.setIndex(i),this.setAttribute(&quot;position&quot;,new ct(r,3)),this.setAttribute(&quot;normal&quot;,new ct(s,3)),this.setAttribute(&quot;uv&quot;,new ct(o,2));function h(f){const p=r.length/3,m=f.extractPoints(t);let g=m.shape;const v=m.holes;qs.isClockWise(g)===!1&amp;&amp;(g=g.reverse());for(let b=0,_=v.length;b&lt;_;b++){const T=v[b];qs.isClockWise(T)===!0&amp;&amp;(v[b]=T.reverse())}const x=qs.triangulateShape(g,v);for(let b=0,_=v.length;b&lt;_;b++){const T=v[b];g=g.concat(T)}for(let b=0,_=g.length;b&lt;_;b++){const T=g[b];r.push(T.x,T.y,0),s.push(0,0,1),o.push(T.x,T.y)}for(let b=0,_=x.length;b&lt;_;b++){const T=x[b],w=T[0]+p,E=T[1]+p,R=T[2]+p;i.push(w,E,R),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return tB(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r&lt;s;r++){const o=t[e.shapes[r]];i.push(o)}return new Ry(i,e.curveSegments)}}function tB(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t&lt;i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Ch extends Lt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type=&quot;SphereGeometry&quot;,this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(o+l,Math.PI);let h=0;const f=[],p=new Y,m=new Y,g=[],v=[],x=[],b=[];for(let _=0;_&lt;=i;_++){const T=[],w=_/i;let E=0;_===0&amp;&amp;o===0?E=.5/t:_===i&amp;&amp;u===Math.PI&amp;&amp;(E=-.5/t);for(let R=0;R&lt;=t;R++){const N=R/t;p.x=-e*Math.cos(r+N*s)*Math.sin(o+w*l),p.y=e*Math.cos(o+w*l),p.z=e*Math.sin(r+N*s)*Math.sin(o+w*l),v.push(p.x,p.y,p.z),m.copy(p).normalize(),x.push(m.x,m.y,m.z),b.push(N+E,1-w),T.push(h++)}f.push(T)}for(let _=0;_&lt;i;_++)for(let T=0;T&lt;t;T++){const w=f[_][T+1],E=f[_][T],R=f[_+1][T],N=f[_+1][T+1];(_!==0||o&gt;0)&amp;&amp;g.push(w,E,N),(_!==i-1||u&lt;Math.PI)&amp;&amp;g.push(E,R,N)}this.setIndex(g),this.setAttribute(&quot;position&quot;,new ct(v,3)),this.setAttribute(&quot;normal&quot;,new ct(x,3)),this.setAttribute(&quot;uv&quot;,new ct(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ch(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Oy extends Sl{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type=&quot;TetrahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new Oy(e.radius,e.detail)}}class Dy extends Lt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type=&quot;TorusGeometry&quot;,this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],u=[],h=[],f=new Y,p=new Y,m=new Y;for(let g=0;g&lt;=i;g++)for(let v=0;v&lt;=r;v++){const x=v/r*s,b=g/i*Math.PI*2;p.x=(e+t*Math.cos(b))*Math.cos(x),p.y=(e+t*Math.cos(b))*Math.sin(x),p.z=t*Math.sin(b),l.push(p.x,p.y,p.z),f.x=e*Math.cos(x),f.y=e*Math.sin(x),m.subVectors(p,f).normalize(),u.push(m.x,m.y,m.z),h.push(v/r),h.push(g/i)}for(let g=1;g&lt;=i;g++)for(let v=1;v&lt;=r;v++){const x=(r+1)*g+v-1,b=(r+1)*(g-1)+v-1,_=(r+1)*(g-1)+v,T=(r+1)*g+v;o.push(x,b,T),o.push(b,_,T)}this.setIndex(o),this.setAttribute(&quot;position&quot;,new ct(l,3)),this.setAttribute(&quot;normal&quot;,new ct(u,3)),this.setAttribute(&quot;uv&quot;,new ct(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dy(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ny extends Lt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type=&quot;TorusKnotGeometry&quot;,this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const l=[],u=[],h=[],f=[],p=new Y,m=new Y,g=new Y,v=new Y,x=new Y,b=new Y,_=new Y;for(let w=0;w&lt;=i;++w){const E=w/i*s*Math.PI*2;T(E,s,o,e,g),T(E+.01,s,o,e,v),b.subVectors(v,g),_.addVectors(v,g),x.crossVectors(b,_),_.crossVectors(x,b),x.normalize(),_.normalize();for(let R=0;R&lt;=r;++R){const N=R/r*Math.PI*2,A=-t*Math.cos(N),D=t*Math.sin(N);p.x=g.x+(A*_.x+D*x.x),p.y=g.y+(A*_.y+D*x.y),p.z=g.z+(A*_.z+D*x.z),u.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),h.push(m.x,m.y,m.z),f.push(w/i),f.push(R/r)}}for(let w=1;w&lt;=i;w++)for(let E=1;E&lt;=r;E++){const R=(r+1)*(w-1)+(E-1),N=(r+1)*w+(E-1),A=(r+1)*w+E,D=(r+1)*(w-1)+E;l.push(R,N,D),l.push(N,A,D)}this.setIndex(l),this.setAttribute(&quot;position&quot;,new ct(u,3)),this.setAttribute(&quot;normal&quot;,new ct(h,3)),this.setAttribute(&quot;uv&quot;,new ct(f,2));function T(w,E,R,N,A){const D=Math.cos(w),C=Math.sin(w),O=R/E*w,L=Math.cos(O);A.x=N*(2+L)*.5*D,A.y=N*(2+L)*C*.5,A.z=N*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ny(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Iy extends Lt{constructor(e=new bw(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type=&quot;TubeGeometry&quot;,this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new Y,u=new Y,h=new Oe;let f=new Y;const p=[],m=[],g=[],v=[];x(),this.setIndex(v),this.setAttribute(&quot;position&quot;,new ct(p,3)),this.setAttribute(&quot;normal&quot;,new ct(m,3)),this.setAttribute(&quot;uv&quot;,new ct(g,2));function x(){for(let w=0;w&lt;t;w++)b(w);b(s===!1?t:0),T(),_()}function b(w){f=e.getPointAt(w/t,f);const E=o.normals[w],R=o.binormals[w];for(let N=0;N&lt;=r;N++){const A=N/r*Math.PI*2,D=Math.sin(A),C=-Math.cos(A);u.x=C*E.x+D*R.x,u.y=C*E.y+D*R.y,u.z=C*E.z+D*R.z,u.normalize(),m.push(u.x,u.y,u.z),l.x=f.x+i*u.x,l.y=f.y+i*u.y,l.z=f.z+i*u.z,p.push(l.x,l.y,l.z)}}function _(){for(let w=1;w&lt;=t;w++)for(let E=1;E&lt;=r;E++){const R=(r+1)*(w-1)+(E-1),N=(r+1)*w+(E-1),A=(r+1)*w+E,D=(r+1)*(w-1)+E;v.push(R,N,D),v.push(N,A,D)}}function T(){for(let w=0;w&lt;=t;w++)for(let E=0;E&lt;=r;E++)h.x=w/t,h.y=E/r,g.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Iy(new A0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class uN extends Lt{constructor(e=null){if(super(),this.type=&quot;WireframeGeometry&quot;,this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new Y,s=new Y;if(e.index!==null){const o=e.attributes.position,l=e.index;let u=e.groups;u.length===0&amp;&amp;(u=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,f=u.length;h&lt;f;++h){const p=u[h],m=p.start,g=p.count;for(let v=m,x=m+g;v&lt;x;v+=3)for(let b=0;b&lt;3;b++){const _=l.getX(v+b),T=l.getX(v+(b+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,T),NA(r,s,i)===!0&amp;&amp;(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,u=o.count/3;l&lt;u;l++)for(let h=0;h&lt;3;h++){const f=3*l+h,p=3*l+(h+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,p),NA(r,s,i)===!0&amp;&amp;(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute(&quot;position&quot;,new ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function NA(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var IA=Object.freeze({__proto__:null,BoxGeometry:xl,CapsuleGeometry:xy,CircleGeometry:Sy,ConeGeometry:Kd,CylinderGeometry:Mh,DodecahedronGeometry:wy,EdgesGeometry:mw,ExtrudeGeometry:Ty,IcosahedronGeometry:My,LatheGeometry:Ay,OctahedronGeometry:$d,PlaneGeometry:Ah,PolyhedronGeometry:Sl,RingGeometry:Cy,ShapeGeometry:Ry,SphereGeometry:Ch,TetrahedronGeometry:Oy,TorusGeometry:Dy,TorusKnotGeometry:Ny,TubeGeometry:Iy,WireframeGeometry:uN});class hN extends Oi{constructor(e){super(),this.isShadowMaterial=!0,this.type=&quot;ShadowMaterial&quot;,this.color=new $e(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class fN extends Ts{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type=&quot;RawShaderMaterial&quot;}}class ts extends Oi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type=&quot;MeshStandardMaterial&quot;,this.defines={STANDARD:&quot;&quot;},this.color=new $e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:&quot;&quot;},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rs extends ts{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:&quot;&quot;,PHYSICAL:&quot;&quot;},this.type=&quot;MeshPhysicalMaterial&quot;,this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Oe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,&quot;reflectivity&quot;,{get:function(){return Vt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $e(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy&gt;0!=e&gt;0&amp;&amp;this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat&gt;0!=e&gt;0&amp;&amp;this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence&gt;0!=e&gt;0&amp;&amp;this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion&gt;0!=e&gt;0&amp;&amp;this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen&gt;0!=e&gt;0&amp;&amp;this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission&gt;0!=e&gt;0&amp;&amp;this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:&quot;&quot;,PHYSICAL:&quot;&quot;},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class cl extends Oi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type=&quot;MeshPhongMaterial&quot;,this.color=new $e(16777215),this.specular=new $e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=Vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sw extends Oi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:&quot;&quot;},this.type=&quot;MeshToonMaterial&quot;,this.color=new $e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class dN extends Oi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type=&quot;MeshNormalMaterial&quot;,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Py extends Oi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type=&quot;MeshLambertMaterial&quot;,this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=Vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ww extends Oi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type=&quot;MeshDepthMaterial&quot;,this.depthPacking=ND,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ew extends Oi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type=&quot;MeshDistanceMaterial&quot;,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class pN extends Oi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:&quot;&quot;},this.type=&quot;MeshMatcapMaterial&quot;,this.color=new $e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:&quot;&quot;},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mN extends Zi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type=&quot;LineDashedMaterial&quot;,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function pc(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT==&quot;number&quot;?new e(n):Array.prototype.slice.call(n)}function gN(n){return ArrayBuffer.isView(n)&amp;&amp;!(n instanceof DataView)}function yN(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function lS(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const l=t[s]*e;for(let u=0;u!==e;++u)r[o++]=n[l+u]}return r}function Tw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&amp;&amp;s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&amp;&amp;(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&amp;&amp;(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&amp;&amp;(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function nB(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let u=0;u&lt;s.tracks.length;++u){const h=s.tracks[u],f=h.getValueSize(),p=[],m=[];for(let g=0;g&lt;h.times.length;++g){const v=h.times[g]*r;if(!(v&lt;t||v&gt;=i)){p.push(h.times[g]);for(let x=0;x&lt;f;++x)m.push(h.values[g*f+x])}}p.length!==0&amp;&amp;(h.times=pc(p,h.times.constructor),h.values=pc(m,h.values.constructor),o.push(h))}s.tracks=o;let l=1/0;for(let u=0;u&lt;s.tracks.length;++u)l&gt;s.tracks[u].times[0]&amp;&amp;(l=s.tracks[u].times[0]);for(let u=0;u&lt;s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function iB(n,e=0,t=n,i=30){i&lt;=0&amp;&amp;(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o&lt;r;++o){const l=t.tracks[o],u=l.ValueTypeName;if(u===&quot;bool&quot;||u===&quot;string&quot;)continue;const h=n.tracks.find(function(_){return _.name===l.name&amp;&amp;_.ValueTypeName===u});if(h===void 0)continue;let f=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&amp;&amp;(f=p/3);let m=0;const g=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&amp;&amp;(m=g/3);const v=l.times.length-1;let x;if(s&lt;=l.times[0]){const _=f,T=p-f;x=l.values.slice(_,T)}else if(s&gt;=l.times[v]){const _=v*p+f,T=_+p-f;x=l.values.slice(_,T)}else{const _=l.createInterpolant(),T=f,w=p-f;_.evaluate(s),x=_.resultBuffer.slice(T,w)}u===&quot;quaternion&quot;&amp;&amp;new Si().fromArray(x).normalize().conjugate().toArray(x);const b=h.times.length;for(let _=0;_&lt;b;++_){const T=_*g+m;if(u===&quot;quaternion&quot;)Si.multiplyQuaternionsFlat(h.values,T,x,0,h.values,T);else{const w=g-m*2;for(let E=0;E&lt;w;++E)h.values[T+E]-=x[E]}}}return n.blendMode=ow,n}class rB{static convertArray(e,t){return pc(e,t)}static isTypedArray(e){return gN(e)}static getKeyframeOrder(e){return yN(e)}static sortedArray(e,t,i){return lS(e,t,i)}static flattenJSON(e,t,i,r){Tw(e,t,i,r)}static subclip(e,t,i,r,s=30){return nB(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return iB(e,t,i,r)}}class Rh{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e&lt;r)){for(let l=i+2;;){if(r===void 0){if(e&lt;s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e&lt;r)break t}o=t.length;break n}if(!(e&gt;=s)){const l=t[1];e&lt;l&amp;&amp;(i=2,s=l);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=s,s=t[--i-1],e&gt;=s)break t}o=i,i=0;break n}break e}for(;i&lt;o;){const l=i+o&gt;&gt;&gt;1;e&lt;t[l]?o=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error(&quot;call to abstract method&quot;)}intervalChanged_(){}}class _N extends Rh{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fc,endingEnd:fc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],u=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case dc:s=e,l=2*t-i;break;case _d:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(u===void 0)switch(this.getSettings_().endingEnd){case dc:o=e,u=2*i-t;break;case _d:o=1,u=i+r[1]-r[0];break;default:o=e-1,u=t}const h=(i-t)*.5,f=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(u-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,f=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),x=v*v,b=x*v,_=-m*b+2*m*x-m*v,T=(1+m)*b+(-1.5-2*m)*x+(-.5+m)*v+1,w=(-1-g)*b+(1.5+g)*x+.5*v,E=g*b-g*x;for(let R=0;R!==l;++R)s[R]=_*o[f+R]+T*o[h+R]+w*o[u+R]+E*o[p+R];return s}}class Mw extends Rh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,f=(i-t)/(r-t),p=1-f;for(let m=0;m!==l;++m)s[m]=o[h+m]*p+o[u+m]*f;return s}}class vN extends Rh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class As{constructor(e,t,i,r){if(e===void 0)throw new Error(&quot;THREE.KeyframeTrack: track name is undefined&quot;);if(t===void 0||t.length===0)throw new Error(&quot;THREE.KeyframeTrack: no keyframes in track named &quot;+e);this.name=e,this.times=pc(t,this.TimeBufferType),this.values=pc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:pc(e.times,Array),values:pc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&amp;&amp;(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new vN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Mw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new _N(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case lh:t=this.InterpolantFactoryMethodDiscrete;break;case ch:t=this.InterpolantFactoryMethodLinear;break;case Cg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i=&quot;unsupported interpolation for &quot;+this.ValueTypeName+&quot; keyframe track named &quot;+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn(&quot;THREE.KeyframeTrack:&quot;,i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lh;case this.InterpolantFactoryMethodLinear:return ch;case this.InterpolantFactoryMethodSmooth:return Cg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&amp;&amp;i[s]&lt;e;)++s;for(;o!==-1&amp;&amp;i[o]&gt;t;)--o;if(++o,s!==0||o!==r){s&gt;=o&amp;&amp;(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&amp;&amp;(console.error(&quot;THREE.KeyframeTrack: Invalid value size in track.&quot;,this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&amp;&amp;(console.error(&quot;THREE.KeyframeTrack: Track is empty.&quot;,this),e=!1);let o=null;for(let l=0;l!==s;l++){const u=i[l];if(typeof u==&quot;number&quot;&amp;&amp;isNaN(u)){console.error(&quot;THREE.KeyframeTrack: Time is not a valid number.&quot;,this,l,u),e=!1;break}if(o!==null&amp;&amp;o&gt;u){console.error(&quot;THREE.KeyframeTrack: Out of order keys.&quot;,this,l,u,o),e=!1;break}o=u}if(r!==void 0&amp;&amp;gN(r))for(let l=0,u=r.length;l!==u;++l){const h=r[l];if(isNaN(h)){console.error(&quot;THREE.KeyframeTrack: Value is not a valid number.&quot;,this,l,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Cg,s=e.length-1;let o=1;for(let l=1;l&lt;s;++l){let u=!1;const h=e[l],f=e[l+1];if(h!==f&amp;&amp;(l!==1||h!==e[0]))if(r)u=!0;else{const p=l*i,m=p-i,g=p+i;for(let v=0;v!==i;++v){const x=t[p+v];if(x!==t[m+v]||x!==t[g+v]){u=!0;break}}}if(u){if(l!==o){e[o]=e[l];const p=l*i,m=o*i;for(let g=0;g!==i;++g)t[m+g]=t[p+g]}++o}}if(s&gt;0){e[o]=e[s];for(let l=s*i,u=o*i,h=0;h!==i;++h)t[u+h]=t[l+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}As.prototype.ValueTypeName=&quot;&quot;;As.prototype.TimeBufferType=Float32Array;As.prototype.ValueBufferType=Float32Array;As.prototype.DefaultInterpolation=ch;class Uc extends As{constructor(e,t,i){super(e,t,i)}}Uc.prototype.ValueTypeName=&quot;bool&quot;;Uc.prototype.ValueBufferType=Array;Uc.prototype.DefaultInterpolation=lh;Uc.prototype.InterpolantFactoryMethodLinear=void 0;Uc.prototype.InterpolantFactoryMethodSmooth=void 0;class Aw extends As{constructor(e,t,i,r){super(e,t,i,r)}}Aw.prototype.ValueTypeName=&quot;color&quot;;class Cc extends As{constructor(e,t,i,r){super(e,t,i,r)}}Cc.prototype.ValueTypeName=&quot;number&quot;;class bN extends Rh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(i-t)/(r-t);let h=e*l;for(let f=h+l;h!==f;h+=4)Si.slerpFlat(s,0,o,h-l,o,h,u);return s}}class pl extends As{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new bN(this.times,this.values,this.getValueSize(),e)}}pl.prototype.ValueTypeName=&quot;quaternion&quot;;pl.prototype.InterpolantFactoryMethodSmooth=void 0;class kc extends As{constructor(e,t,i){super(e,t,i)}}kc.prototype.ValueTypeName=&quot;string&quot;;kc.prototype.ValueBufferType=Array;kc.prototype.DefaultInterpolation=lh;kc.prototype.InterpolantFactoryMethodLinear=void 0;kc.prototype.InterpolantFactoryMethodSmooth=void 0;class pa extends As{constructor(e,t,i,r){super(e,t,i,r)}}pa.prototype.ValueTypeName=&quot;vector&quot;;class ml{constructor(e=&quot;&quot;,t=-1,i=[],r=ay){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Jr(),this.duration&lt;0&amp;&amp;this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,l=i.length;o!==l;++o)t.push(oB(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(As.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let l=0;l&lt;s;l++){let u=[],h=[];u.push((l+s-1)%s,l,(l+1)%s),h.push(0,1,0);const f=yN(u);u=lS(u,1,f),h=lS(h,1,f),!r&amp;&amp;u[0]===0&amp;&amp;(u.push(s),h.push(h[0])),o.push(new Cc(&quot;.morphTargetInfluences[&quot;+t[l].name+&quot;]&quot;,u,h).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&amp;&amp;r.geometry.animations||r.animations}for(let r=0;r&lt;i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l&lt;u;l++){const h=e[l],f=h.name.match(s);if(f&amp;&amp;f.length&gt;1){const p=f[1];let m=r[p];m||(r[p]=m=[]),m.push(h)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return o}static parseAnimation(e,t){if(console.warn(&quot;THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185&quot;),!e)return console.error(&quot;THREE.AnimationClip: No animation in JSONLoader data.&quot;),null;const i=function(p,m,g,v,x){if(g.length!==0){const b=[],_=[];Tw(g,b,_,v),b.length!==0&amp;&amp;x.push(new p(m,b,_))}},r=[],s=e.name||&quot;default&quot;,o=e.fps||30,l=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let p=0;p&lt;h.length;p++){const m=h[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let v;for(v=0;v&lt;m.length;v++)if(m[v].morphTargets)for(let x=0;x&lt;m[v].morphTargets.length;x++)g[m[v].morphTargets[x]]=-1;for(const x in g){const b=[],_=[];for(let T=0;T!==m[v].morphTargets.length;++T){const w=m[v];b.push(w.time),_.push(w.morphTarget===x?1:0)}r.push(new Cc(&quot;.morphTargetInfluence[&quot;+x+&quot;]&quot;,b,_))}u=g.length*o}else{const g=&quot;.bones[&quot;+t[p].name+&quot;]&quot;;i(pa,g+&quot;.position&quot;,m,&quot;pos&quot;,r),i(pl,g+&quot;.quaternion&quot;,m,&quot;rot&quot;,r),i(pa,g+&quot;.scale&quot;,m,&quot;scl&quot;,r)}}return r.length===0?null:new this(s,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e&lt;this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t&lt;this.tracks.length;t++)e=e&amp;&amp;this.tracks[t].validate();return e}optimize(){for(let e=0;e&lt;this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t&lt;this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function sB(n){switch(n.toLowerCase()){case&quot;scalar&quot;:case&quot;double&quot;:case&quot;float&quot;:case&quot;number&quot;:case&quot;integer&quot;:return Cc;case&quot;vector&quot;:case&quot;vector2&quot;:case&quot;vector3&quot;:case&quot;vector4&quot;:return pa;case&quot;color&quot;:return Aw;case&quot;quaternion&quot;:return pl;case&quot;bool&quot;:case&quot;boolean&quot;:return Uc;case&quot;string&quot;:return kc}throw new Error(&quot;THREE.KeyframeTrack: Unsupported typeName: &quot;+n)}function oB(n){if(n.type===void 0)throw new Error(&quot;THREE.KeyframeTrack: track type undefined, can not parse&quot;);const e=sB(n.type);if(n.times===void 0){const t=[],i=[];Tw(n.keys,t,i,&quot;value&quot;),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const oa={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&amp;&amp;(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Cw{constructor(e,t,i){const r=this;let s=!1,o=0,l=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){l++,s===!1&amp;&amp;r.onStart!==void 0&amp;&amp;r.onStart(f,o,l),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&amp;&amp;r.onProgress(f,o,l),o===l&amp;&amp;(s=!1,r.onLoad!==void 0&amp;&amp;r.onLoad())},this.itemError=function(f){r.onError!==void 0&amp;&amp;r.onError(f)},this.resolveURL=function(f){return u?u(f):f},this.setURLModifier=function(f){return u=f,this},this.addHandler=function(f,p){return h.push(f,p),this},this.removeHandler=function(f){const p=h.indexOf(f);return p!==-1&amp;&amp;h.splice(p,2),this},this.getHandler=function(f){for(let p=0,m=h.length;p&lt;m;p+=2){const g=h[p],v=h[p+1];if(g.global&amp;&amp;(g.lastIndex=0),g.test(f))return v}return null}}}const Rw=new Cw;class Ji{constructor(e){this.manager=e!==void 0?e:Rw,this.crossOrigin=&quot;anonymous&quot;,this.withCredentials=!1,this.path=&quot;&quot;,this.resourcePath=&quot;&quot;,this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ji.DEFAULT_MATERIAL_NAME=&quot;__DEFAULT&quot;;const Yo={};class aB extends Error{constructor(e,t){super(e),this.response=t}}class ns extends Ji{constructor(e){super(e),this.mimeType=&quot;&quot;,this.responseType=&quot;&quot;}load(e,t,i,r){e===void 0&amp;&amp;(e=&quot;&quot;),this.path!==void 0&amp;&amp;(e=this.path+e),e=this.manager.resolveURL(e);const s=oa.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=&gt;{t&amp;&amp;t(s),this.manager.itemEnd(e)},0),s;if(Yo[e]!==void 0){Yo[e].push({onLoad:t,onProgress:i,onError:r});return}Yo[e]=[],Yo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?&quot;include&quot;:&quot;same-origin&quot;}),l=this.mimeType,u=this.responseType;fetch(o).then(h=&gt;{if(h.status===200||h.status===0){if(h.status===0&amp;&amp;console.warn(&quot;THREE.FileLoader: HTTP Status 0 received.&quot;),typeof ReadableStream&gt;&quot;u&quot;||h.body===void 0||h.body.getReader===void 0)return h;const f=Yo[e],p=h.body.getReader(),m=h.headers.get(&quot;X-File-Size&quot;)||h.headers.get(&quot;Content-Length&quot;),g=m?parseInt(m):0,v=g!==0;let x=0;const b=new ReadableStream({start(_){T();function T(){p.read().then(({done:w,value:E})=&gt;{if(w)_.close();else{x+=E.byteLength;const R=new ProgressEvent(&quot;progress&quot;,{lengthComputable:v,loaded:x,total:g});for(let N=0,A=f.length;N&lt;A;N++){const D=f[N];D.onProgress&amp;&amp;D.onProgress(R)}_.enqueue(E),T()}},w=&gt;{_.error(w)})}}});return new Response(b)}else throw new aB(`fetch for &quot;${h.url}&quot; responded with ${h.status}: ${h.statusText}`,h)}).then(h=&gt;{switch(u){case&quot;arraybuffer&quot;:return h.arrayBuffer();case&quot;blob&quot;:return h.blob();case&quot;document&quot;:return h.text().then(f=&gt;new DOMParser().parseFromString(f,l));case&quot;json&quot;:return h.json();default:if(l===&quot;&quot;)return h.text();{const p=/charset=&quot;?([^;&quot;\s]*)&quot;?/i.exec(l),m=p&amp;&amp;p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return h.arrayBuffer().then(v=&gt;g.decode(v))}}}).then(h=&gt;{oa.add(e,h);const f=Yo[e];delete Yo[e];for(let p=0,m=f.length;p&lt;m;p++){const g=f[p];g.onLoad&amp;&amp;g.onLoad(h)}}).catch(h=&gt;{const f=Yo[e];if(f===void 0)throw this.manager.itemError(e),h;delete Yo[e];for(let p=0,m=f.length;p&lt;m;p++){const g=f[p];g.onError&amp;&amp;g.onError(h)}this.manager.itemError(e)}).finally(()=&gt;{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ns(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i&lt;e.length;i++){const r=ml.parse(e[i]);t.push(r)}return t}}class cB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],l=new vy,u=new ns(this.manager);u.setPath(this.path),u.setResponseType(&quot;arraybuffer&quot;),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let h=0;function f(p){u.load(e[p],function(m){const g=s.parse(m,!0);o[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},h+=1,h===6&amp;&amp;(g.mipmapCount===1&amp;&amp;(l.minFilter=fi),l.image=o,l.format=g.format,l.needsUpdate=!0,t&amp;&amp;t(l))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p&lt;m;++p)f(p);else u.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let v=0;v&lt;g;v++){o[v]={mipmaps:[]};for(let x=0;x&lt;m.mipmapCount;x++)o[v].mipmaps.push(m.mipmaps[v*m.mipmapCount+x]),o[v].format=m.format,o[v].width=m.width,o[v].height=m.height}l.image=o}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&amp;&amp;(l.minFilter=fi),l.format=m.format,l.needsUpdate=!0,t&amp;&amp;t(l)},i,r);return l}}class Md extends Ji{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&amp;&amp;(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=oa.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&amp;&amp;t(o),s.manager.itemEnd(e)},0),o;const l=Sd(&quot;img&quot;);function u(){f(),oa.add(e,this),t&amp;&amp;t(this),s.manager.itemEnd(e)}function h(p){f(),r&amp;&amp;r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){l.removeEventListener(&quot;load&quot;,u,!1),l.removeEventListener(&quot;error&quot;,h,!1)}return l.addEventListener(&quot;load&quot;,u,!1),l.addEventListener(&quot;error&quot;,h,!1),e.slice(0,5)!==&quot;data:&quot;&amp;&amp;this.crossOrigin!==void 0&amp;&amp;(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class uB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=new Xd;s.colorSpace=Nn;const o=new Md(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function u(h){o.load(e[h],function(f){s.images[h]=f,l++,l===6&amp;&amp;(s.needsUpdate=!0,t&amp;&amp;t(s))},void 0,r)}for(let h=0;h&lt;e.length;++h)u(h);return s}}class xN extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new $s,l=new ns(this.manager);return l.setResponseType(&quot;arraybuffer&quot;),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let h;try{h=s.parse(u)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&amp;&amp;(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:rr,o.wrapT=h.wrapT!==void 0?h.wrapT:rr,o.magFilter=h.magFilter!==void 0?h.magFilter:fi,o.minFilter=h.minFilter!==void 0?h.minFilter:fi,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&amp;&amp;(o.colorSpace=h.colorSpace),h.flipY!==void 0&amp;&amp;(o.flipY=h.flipY),h.format!==void 0&amp;&amp;(o.format=h.format),h.type!==void 0&amp;&amp;(o.type=h.type),h.mipmaps!==void 0&amp;&amp;(o.mipmaps=h.mipmaps,o.minFilter=Zr),h.mipmapCount===1&amp;&amp;(o.minFilter=fi),h.generateMipmaps!==void 0&amp;&amp;(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,t&amp;&amp;t(o,h)},i,r),o}}class Ly extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=new Kn,o=new Md(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&amp;&amp;t(s)},i,r),s}}class wl extends nn{constructor(e,t=1){super(),this.isLight=!0,this.type=&quot;Light&quot;,this.color=new $e(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&amp;&amp;(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&amp;&amp;(t.object.distance=this.distance),this.angle!==void 0&amp;&amp;(t.object.angle=this.angle),this.decay!==void 0&amp;&amp;(t.object.decay=this.decay),this.penumbra!==void 0&amp;&amp;(t.object.penumbra=this.penumbra),this.shadow!==void 0&amp;&amp;(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&amp;&amp;(t.object.target=this.target.uuid),t}}class SN extends wl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type=&quot;HemisphereLight&quot;,this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $e(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Hb=new yt,PA=new Y,LA=new Y;class Ow{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Oe(512,512),this.mapType=es,this.map=null,this.mapPass=null,this.matrix=new yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Th,this._frameExtents=new Oe(1,1),this._viewportCount=1,this._viewports=[new yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;PA.setFromMatrixPosition(e.matrixWorld),t.position.copy(PA),LA.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(LA),t.updateMatrixWorld(),Hb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hb),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Hb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&amp;&amp;this.map.dispose(),this.mapPass&amp;&amp;this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&amp;&amp;(e.intensity=this.intensity),this.bias!==0&amp;&amp;(e.bias=this.bias),this.normalBias!==0&amp;&amp;(e.normalBias=this.normalBias),this.radius!==1&amp;&amp;(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&amp;&amp;(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class hB extends Ow{constructor(){super(new Yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=uh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&amp;&amp;(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Uy extends wl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type=&quot;SpotLight&quot;,this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new hB}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const UA=new yt,kf=new Y,Vb=new Y;class fB extends Ow{constructor(){super(new Yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Oe(4,2),this._viewportCount=6,this._viewports=[new yn(2,1,1,1),new yn(0,1,1,1),new yn(3,1,1,1),new yn(1,1,1,1),new yn(3,0,1,1),new yn(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&amp;&amp;(i.far=s,i.updateProjectionMatrix()),kf.setFromMatrixPosition(e.matrixWorld),i.position.copy(kf),Vb.copy(i.position),Vb.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Vb),i.updateMatrixWorld(),r.makeTranslation(-kf.x,-kf.y,-kf.z),UA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UA)}}class ky extends wl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type=&quot;PointLight&quot;,this.distance=i,this.decay=r,this.shadow=new fB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Fc extends hy{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type=&quot;OrthographicCamera&quot;,this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&amp;&amp;(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&amp;&amp;(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,l=r+t,u=r-t;if(this.view!==null&amp;&amp;this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,l-=f*this.view.offsetY,u=l-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&amp;&amp;(t.object.view=Object.assign({},this.view)),t}}class dB extends Ow{constructor(){super(new Fc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Zd extends wl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type=&quot;DirectionalLight&quot;,this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.shadow=new dB}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Fy extends wl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type=&quot;AmbientLight&quot;}}class wN extends wl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type=&quot;RectAreaLight&quot;,this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class EN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e&lt;9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t&lt;9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e&lt;9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t&lt;9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i&lt;9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t&lt;9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i&lt;9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t&lt;9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r&lt;9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r&lt;9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class TN extends wl{constructor(e=new EN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class zy extends Ji{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ns(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&amp;&amp;console.warn(&quot;THREE.MaterialLoader: Undefined texture&quot;,s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&amp;&amp;(r.uuid=e.uuid),e.name!==void 0&amp;&amp;(r.name=e.name),e.color!==void 0&amp;&amp;r.color!==void 0&amp;&amp;r.color.setHex(e.color),e.roughness!==void 0&amp;&amp;(r.roughness=e.roughness),e.metalness!==void 0&amp;&amp;(r.metalness=e.metalness),e.sheen!==void 0&amp;&amp;(r.sheen=e.sheen),e.sheenColor!==void 0&amp;&amp;(r.sheenColor=new $e().setHex(e.sheenColor)),e.sheenRoughness!==void 0&amp;&amp;(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&amp;&amp;r.emissive!==void 0&amp;&amp;r.emissive.setHex(e.emissive),e.specular!==void 0&amp;&amp;r.specular!==void 0&amp;&amp;r.specular.setHex(e.specular),e.specularIntensity!==void 0&amp;&amp;(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&amp;&amp;r.specularColor!==void 0&amp;&amp;r.specularColor.setHex(e.specularColor),e.shininess!==void 0&amp;&amp;(r.shininess=e.shininess),e.clearcoat!==void 0&amp;&amp;(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&amp;&amp;(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&amp;&amp;(r.dispersion=e.dispersion),e.iridescence!==void 0&amp;&amp;(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&amp;&amp;(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&amp;&amp;(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&amp;&amp;(r.transmission=e.transmission),e.thickness!==void 0&amp;&amp;(r.thickness=e.thickness),e.attenuationDistance!==void 0&amp;&amp;(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&amp;&amp;r.attenuationColor!==void 0&amp;&amp;r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&amp;&amp;(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&amp;&amp;(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&amp;&amp;(r.fog=e.fog),e.flatShading!==void 0&amp;&amp;(r.flatShading=e.flatShading),e.blending!==void 0&amp;&amp;(r.blending=e.blending),e.combine!==void 0&amp;&amp;(r.combine=e.combine),e.side!==void 0&amp;&amp;(r.side=e.side),e.shadowSide!==void 0&amp;&amp;(r.shadowSide=e.shadowSide),e.opacity!==void 0&amp;&amp;(r.opacity=e.opacity),e.transparent!==void 0&amp;&amp;(r.transparent=e.transparent),e.alphaTest!==void 0&amp;&amp;(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&amp;&amp;(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&amp;&amp;(r.depthFunc=e.depthFunc),e.depthTest!==void 0&amp;&amp;(r.depthTest=e.depthTest),e.depthWrite!==void 0&amp;&amp;(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&amp;&amp;(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&amp;&amp;(r.blendSrc=e.blendSrc),e.blendDst!==void 0&amp;&amp;(r.blendDst=e.blendDst),e.blendEquation!==void 0&amp;&amp;(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&amp;&amp;(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&amp;&amp;(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&amp;&amp;(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&amp;&amp;r.blendColor!==void 0&amp;&amp;r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&amp;&amp;(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&amp;&amp;(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&amp;&amp;(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&amp;&amp;(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&amp;&amp;(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&amp;&amp;(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&amp;&amp;(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&amp;&amp;(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&amp;&amp;(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&amp;&amp;(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&amp;&amp;(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&amp;&amp;(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&amp;&amp;(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&amp;&amp;(r.rotation=e.rotation),e.linewidth!==void 0&amp;&amp;(r.linewidth=e.linewidth),e.dashSize!==void 0&amp;&amp;(r.dashSize=e.dashSize),e.gapSize!==void 0&amp;&amp;(r.gapSize=e.gapSize),e.scale!==void 0&amp;&amp;(r.scale=e.scale),e.polygonOffset!==void 0&amp;&amp;(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&amp;&amp;(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&amp;&amp;(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&amp;&amp;(r.dithering=e.dithering),e.alphaToCoverage!==void 0&amp;&amp;(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&amp;&amp;(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&amp;&amp;(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&amp;&amp;(r.visible=e.visible),e.toneMapped!==void 0&amp;&amp;(r.toneMapped=e.toneMapped),e.userData!==void 0&amp;&amp;(r.userData=e.userData),e.vertexColors!==void 0&amp;&amp;(typeof e.vertexColors==&quot;number&quot;?r.vertexColors=e.vertexColors&gt;0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case&quot;t&quot;:r.uniforms[s].value=i(o.value);break;case&quot;c&quot;:r.uniforms[s].value=new $e().setHex(o.value);break;case&quot;v2&quot;:r.uniforms[s].value=new Oe().fromArray(o.value);break;case&quot;v3&quot;:r.uniforms[s].value=new Y().fromArray(o.value);break;case&quot;v4&quot;:r.uniforms[s].value=new yn().fromArray(o.value);break;case&quot;m3&quot;:r.uniforms[s].value=new jt().fromArray(o.value);break;case&quot;m4&quot;:r.uniforms[s].value=new yt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&amp;&amp;(r.defines=e.defines),e.vertexShader!==void 0&amp;&amp;(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&amp;&amp;(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&amp;&amp;(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&amp;&amp;(r.lights=e.lights),e.clipping!==void 0&amp;&amp;(r.clipping=e.clipping),e.size!==void 0&amp;&amp;(r.size=e.size),e.sizeAttenuation!==void 0&amp;&amp;(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&amp;&amp;(r.map=i(e.map)),e.matcap!==void 0&amp;&amp;(r.matcap=i(e.matcap)),e.alphaMap!==void 0&amp;&amp;(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&amp;&amp;(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&amp;&amp;(r.bumpScale=e.bumpScale),e.normalMap!==void 0&amp;&amp;(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&amp;&amp;(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&amp;&amp;(s=[s,s]),r.normalScale=new Oe().fromArray(s)}return e.displacementMap!==void 0&amp;&amp;(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&amp;&amp;(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&amp;&amp;(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&amp;&amp;(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&amp;&amp;(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&amp;&amp;(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&amp;&amp;(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&amp;&amp;(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&amp;&amp;(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&amp;&amp;(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&amp;&amp;(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&amp;&amp;r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&amp;&amp;(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&amp;&amp;(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&amp;&amp;(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&amp;&amp;(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&amp;&amp;(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&amp;&amp;(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&amp;&amp;(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&amp;&amp;(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&amp;&amp;(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&amp;&amp;(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&amp;&amp;(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&amp;&amp;(r.clearcoatNormalScale=new Oe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&amp;&amp;(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&amp;&amp;(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&amp;&amp;(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&amp;&amp;(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&amp;&amp;(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&amp;&amp;(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&amp;&amp;(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return zy.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:hN,SpriteMaterial:fw,RawShaderMaterial:fN,ShaderMaterial:Ts,PointsMaterial:yy,MeshPhysicalMaterial:rs,MeshStandardMaterial:ts,MeshPhongMaterial:cl,MeshToonMaterial:Sw,MeshNormalMaterial:dN,MeshLambertMaterial:Py,MeshDepthMaterial:ww,MeshDistanceMaterial:Ew,MeshBasicMaterial:$i,MeshMatcapMaterial:pN,LineDashedMaterial:mN,LineBasicMaterial:Zi,Material:Oi};return new t[e]}}class vo{static extractUrlBase(e){const t=e.lastIndexOf(&quot;/&quot;);return t===-1?&quot;./&quot;:e.slice(0,t+1)}static resolveURL(e,t){return typeof e!=&quot;string&quot;||e===&quot;&quot;?&quot;&quot;:(/^https?:\/\//i.test(t)&amp;&amp;/^\//.test(e)&amp;&amp;(t=t.replace(/(^https?:\/\/[^\/]+).*/i,&quot;$1&quot;)),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class MN extends Lt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type=&quot;InstancedBufferGeometry&quot;,this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class AN extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ns(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,v){if(t[v]!==void 0)return t[v];const b=g.interleavedBuffers[v],_=s(g,b.buffer),T=Yu(b.type,_),w=new qd(T,b.stride);return w.uuid=b.uuid,t[v]=w,w}function s(g,v){if(i[v]!==void 0)return i[v];const b=g.arrayBuffers[v],_=new Uint32Array(b).buffer;return i[v]=_,_}const o=e.isInstancedBufferGeometry?new MN:new Lt,l=e.data.index;if(l!==void 0){const g=Yu(l.type,l.array);o.setIndex(new Jt(g,1))}const u=e.data.attributes;for(const g in u){const v=u[g];let x;if(v.isInterleavedBufferAttribute){const b=r(e.data,v.data);x=new dl(b,v.itemSize,v.offset,v.normalized)}else{const b=Yu(v.type,v.array),_=v.isInstancedBufferAttribute?Mc:Jt;x=new _(b,v.itemSize,v.normalized)}v.name!==void 0&amp;&amp;(x.name=v.name),v.usage!==void 0&amp;&amp;x.setUsage(v.usage),o.setAttribute(g,x)}const h=e.data.morphAttributes;if(h)for(const g in h){const v=h[g],x=[];for(let b=0,_=v.length;b&lt;_;b++){const T=v[b];let w;if(T.isInterleavedBufferAttribute){const E=r(e.data,T.data);w=new dl(E,T.itemSize,T.offset,T.normalized)}else{const E=Yu(T.type,T.array);w=new Jt(E,T.itemSize,T.normalized)}T.name!==void 0&amp;&amp;(w.name=T.name),x.push(w)}o.morphAttributes[g]=x}e.data.morphTargetsRelative&amp;&amp;(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let g=0,v=p.length;g!==v;++g){const x=p[g];o.addGroup(x.start,x.count,x.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new Y;m.center!==void 0&amp;&amp;g.fromArray(m.center),o.boundingSphere=new wi(g,m.radius)}return e.name&amp;&amp;(o.name=e.name),e.userData&amp;&amp;(o.userData=e.userData),o}}class pB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===&quot;&quot;?vo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new ns(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(p){r!==void 0&amp;&amp;r(p),console.error(&quot;THREE:ObjectLoader: Can&#x27;t parse &quot;+e+&quot;.&quot;,p.message);return}const f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()===&quot;geometry&quot;){r!==void 0&amp;&amp;r(new Error(&quot;THREE.ObjectLoader: Can&#x27;t load &quot;+e)),console.error(&quot;THREE.ObjectLoader: Can&#x27;t load &quot;+e);return}s.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===&quot;&quot;?vo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ns(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()===&quot;geometry&quot;)throw new Error(&quot;THREE.ObjectLoader: Can&#x27;t load &quot;+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&amp;&amp;t(h)}),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,i),f=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,f),this.bindLightTargets(h),t!==void 0){let p=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){p=!0;break}p===!1&amp;&amp;t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,r,l,o,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i&lt;r;i++){const s=new xc().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&amp;&amp;(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s&lt;o;s++){const l=new Eh().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new AN;for(let s=0,o=e.length;s&lt;o;s++){let l;const u=e[s];switch(u.type){case&quot;BufferGeometry&quot;:case&quot;InstancedBufferGeometry&quot;:l=r.parse(u);break;default:u.type in IA?l=IA[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type &quot;${u.type}&quot;`)}l.uuid=u.uuid,u.name!==void 0&amp;&amp;(l.name=u.name),u.userData!==void 0&amp;&amp;(l.userData=u.userData),i[u.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new zy;s.setTextures(t);for(let o=0,l=e.length;o&lt;l;o++){const u=e[o];i[u.uuid]===void 0&amp;&amp;(i[u.uuid]=s.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i&lt;e.length;i++){const r=e[i],s=ml.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(u){return i.manager.itemStart(u),s.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function l(u){if(typeof u==&quot;string&quot;){const h=u,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return o(f)}else return u.data?{data:Yu(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&amp;&amp;e.length&gt;0){const u=new Cw(t);s=new Md(u),s.setCrossOrigin(this.crossOrigin);for(let h=0,f=e.length;h&lt;f;h++){const p=e[h],m=p.url;if(Array.isArray(m)){const g=[];for(let v=0,x=m.length;v&lt;x;v++){const b=m[v],_=l(b);_!==null&amp;&amp;(_ instanceof HTMLImageElement?g.push(_):g.push(new $s(_.data,_.width,_.height)))}r[p.uuid]=new ll(g)}else{const g=l(p.url);r[p.uuid]=new ll(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o==&quot;string&quot;){const l=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(u)}else return o.data?{data:Yu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&amp;&amp;e.length&gt;0){r=new Md(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o&lt;l;o++){const u=e[o],h=u.url;if(Array.isArray(h)){const f=[];for(let p=0,m=h.length;p&lt;m;p++){const g=h[p],v=await s(g);v!==null&amp;&amp;(v instanceof HTMLImageElement?f.push(v):f.push(new $s(v.data,v.width,v.height)))}i[u.uuid]=new ll(f)}else{const f=await s(u.url);i[u.uuid]=new ll(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s==&quot;number&quot;?s:(console.warn(&quot;THREE.ObjectLoader.parseTexture: Constant should be in numeric form.&quot;,s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s&lt;o;s++){const l=e[s];l.image===void 0&amp;&amp;console.warn(&#x27;THREE.ObjectLoader: No &quot;image&quot; specified for&#x27;,l.uuid),t[l.image]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined image&quot;,l.image);const u=t[l.image],h=u.data;let f;Array.isArray(h)?(f=new Xd,h.length===6&amp;&amp;(f.needsUpdate=!0)):(h&amp;&amp;h.data?f=new $s:f=new Kn,h&amp;&amp;(f.needsUpdate=!0)),f.source=u,f.uuid=l.uuid,l.name!==void 0&amp;&amp;(f.name=l.name),l.mapping!==void 0&amp;&amp;(f.mapping=i(l.mapping,mB)),l.channel!==void 0&amp;&amp;(f.channel=l.channel),l.offset!==void 0&amp;&amp;f.offset.fromArray(l.offset),l.repeat!==void 0&amp;&amp;f.repeat.fromArray(l.repeat),l.center!==void 0&amp;&amp;f.center.fromArray(l.center),l.rotation!==void 0&amp;&amp;(f.rotation=l.rotation),l.wrap!==void 0&amp;&amp;(f.wrapS=i(l.wrap[0],kA),f.wrapT=i(l.wrap[1],kA)),l.format!==void 0&amp;&amp;(f.format=l.format),l.internalFormat!==void 0&amp;&amp;(f.internalFormat=l.internalFormat),l.type!==void 0&amp;&amp;(f.type=l.type),l.colorSpace!==void 0&amp;&amp;(f.colorSpace=l.colorSpace),l.minFilter!==void 0&amp;&amp;(f.minFilter=i(l.minFilter,FA)),l.magFilter!==void 0&amp;&amp;(f.magFilter=i(l.magFilter,FA)),l.anisotropy!==void 0&amp;&amp;(f.anisotropy=l.anisotropy),l.flipY!==void 0&amp;&amp;(f.flipY=l.flipY),l.generateMipmaps!==void 0&amp;&amp;(f.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&amp;&amp;(f.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&amp;&amp;(f.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&amp;&amp;(f.compareFunction=l.compareFunction),l.userData!==void 0&amp;&amp;(f.userData=l.userData),r[l.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function l(m){return t[m]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined geometry&quot;,m),t[m]}function u(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let v=0,x=m.length;v&lt;x;v++){const b=m[v];i[b]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined material&quot;,b),g.push(i[b])}return g}return i[m]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined material&quot;,m),i[m]}}function h(m){return r[m]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined texture&quot;,m),r[m]}let f,p;switch(e.type){case&quot;Scene&quot;:o=new py,e.background!==void 0&amp;&amp;(Number.isInteger(e.background)?o.background=new $e(e.background):o.background=h(e.background)),e.environment!==void 0&amp;&amp;(o.environment=h(e.environment)),e.fog!==void 0&amp;&amp;(e.fog.type===&quot;Fog&quot;?o.fog=new dy(e.fog.color,e.fog.near,e.fog.far):e.fog.type===&quot;FogExp2&quot;&amp;&amp;(o.fog=new fy(e.fog.color,e.fog.density)),e.fog.name!==&quot;&quot;&amp;&amp;(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&amp;&amp;(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&amp;&amp;(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&amp;&amp;o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&amp;&amp;(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&amp;&amp;o.environmentRotation.fromArray(e.environmentRotation);break;case&quot;PerspectiveCamera&quot;:o=new Yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&amp;&amp;(o.focus=e.focus),e.zoom!==void 0&amp;&amp;(o.zoom=e.zoom),e.filmGauge!==void 0&amp;&amp;(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&amp;&amp;(o.filmOffset=e.filmOffset),e.view!==void 0&amp;&amp;(o.view=Object.assign({},e.view));break;case&quot;OrthographicCamera&quot;:o=new Fc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&amp;&amp;(o.zoom=e.zoom),e.view!==void 0&amp;&amp;(o.view=Object.assign({},e.view));break;case&quot;AmbientLight&quot;:o=new Fy(e.color,e.intensity);break;case&quot;DirectionalLight&quot;:o=new Zd(e.color,e.intensity),o.target=e.target||&quot;&quot;;break;case&quot;PointLight&quot;:o=new ky(e.color,e.intensity,e.distance,e.decay);break;case&quot;RectAreaLight&quot;:o=new wN(e.color,e.intensity,e.width,e.height);break;case&quot;SpotLight&quot;:o=new Uy(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||&quot;&quot;;break;case&quot;HemisphereLight&quot;:o=new SN(e.color,e.groundColor,e.intensity);break;case&quot;LightProbe&quot;:o=new TN().fromJSON(e);break;case&quot;SkinnedMesh&quot;:f=l(e.geometry),p=u(e.material),o=new my(f,p),e.bindMode!==void 0&amp;&amp;(o.bindMode=e.bindMode),e.bindMatrix!==void 0&amp;&amp;o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&amp;&amp;(o.skeleton=e.skeleton);break;case&quot;Mesh&quot;:f=l(e.geometry),p=u(e.material),o=new Sn(f,p);break;case&quot;InstancedMesh&quot;:f=l(e.geometry),p=u(e.material);const m=e.count,g=e.instanceMatrix,v=e.instanceColor;o=new dw(f,p,m),o.instanceMatrix=new Mc(new Float32Array(g.array),16),v!==void 0&amp;&amp;(o.instanceColor=new Mc(new Float32Array(v.array),v.itemSize));break;case&quot;BatchedMesh&quot;:f=l(e.geometry),p=u(e.material),o=new QD(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(x=&gt;{let b=null,_=null;return x.boundingBox!==void 0&amp;&amp;(b=new Ri,b.min.fromArray(x.boundingBox.min),b.max.fromArray(x.boundingBox.max)),x.boundingSphere!==void 0&amp;&amp;(_=new wi,_.radius=x.boundingSphere.radius,_.center.fromArray(x.boundingSphere.center)),{...x,boundingBox:b,boundingSphere:_}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=h(e.matricesTexture.uuid),o._indirectTexture=h(e.indirectTexture.uuid),e.colorsTexture!==void 0&amp;&amp;(o._colorsTexture=h(e.colorsTexture.uuid)),e.boundingSphere!==void 0&amp;&amp;(o.boundingSphere=new wi,o.boundingSphere.center.fromArray(e.boundingSphere.center),o.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&amp;&amp;(o.boundingBox=new Ri,o.boundingBox.min.fromArray(e.boundingBox.min),o.boundingBox.max.fromArray(e.boundingBox.max));break;case&quot;LOD&quot;:o=new JD;break;case&quot;Line&quot;:o=new xo(l(e.geometry),u(e.material));break;case&quot;LineLoop&quot;:o=new pw(l(e.geometry),u(e.material));break;case&quot;LineSegments&quot;:o=new Ur(l(e.geometry),u(e.material));break;case&quot;PointCloud&quot;:case&quot;Points&quot;:o=new _y(l(e.geometry),u(e.material));break;case&quot;Sprite&quot;:o=new ZD(u(e.material));break;case&quot;Group&quot;:o=new br;break;case&quot;Bone&quot;:o=new Yd;break;default:o=new nn}if(o.uuid=e.uuid,e.name!==void 0&amp;&amp;(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&amp;&amp;(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&amp;&amp;o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&amp;&amp;o.position.fromArray(e.position),e.rotation!==void 0&amp;&amp;o.rotation.fromArray(e.rotation),e.quaternion!==void 0&amp;&amp;o.quaternion.fromArray(e.quaternion),e.scale!==void 0&amp;&amp;o.scale.fromArray(e.scale)),e.up!==void 0&amp;&amp;o.up.fromArray(e.up),e.castShadow!==void 0&amp;&amp;(o.castShadow=e.castShadow),e.receiveShadow!==void 0&amp;&amp;(o.receiveShadow=e.receiveShadow),e.shadow&amp;&amp;(e.shadow.intensity!==void 0&amp;&amp;(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&amp;&amp;(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&amp;&amp;(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&amp;&amp;(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&amp;&amp;o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&amp;&amp;(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&amp;&amp;(o.visible=e.visible),e.frustumCulled!==void 0&amp;&amp;(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&amp;&amp;(o.renderOrder=e.renderOrder),e.userData!==void 0&amp;&amp;(o.userData=e.userData),e.layers!==void 0&amp;&amp;(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g&lt;m.length;g++)o.add(this.parseObject(m[g],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g&lt;m.length;g++){const v=m[g];o.animations.push(s[v])}}if(e.type===&quot;LOD&quot;){e.autoUpdate!==void 0&amp;&amp;(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g&lt;m.length;g++){const v=m[g],x=o.getObjectByProperty(&quot;uuid&quot;,v.object);x!==void 0&amp;&amp;o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&amp;&amp;e.traverse(function(i){if(i.isSkinnedMesh===!0&amp;&amp;i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn(&quot;THREE.ObjectLoader: No skeleton found with UUID:&quot;,i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty(&quot;uuid&quot;,i);r!==void 0?t.target=r:t.target=new nn}})}}const mB={UVMapping:ey,CubeReflectionMapping:fa,CubeRefractionMapping:fl,EquirectangularReflectionMapping:gd,EquirectangularRefractionMapping:yd,CubeUVReflectionMapping:Sh},kA={RepeatWrapping:ws,ClampToEdgeWrapping:rr,MirroredRepeatWrapping:ih},FA={NearestFilter:xi,NearestMipmapNearestFilter:ty,NearestMipmapLinearFilter:hc,LinearFilter:fi,LinearMipmapNearestFilter:Ju,LinearMipmapLinearFilter:Zr};class CN extends Ji{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap&gt;&quot;u&quot;&amp;&amp;console.warn(&quot;THREE.ImageBitmapLoader: createImageBitmap() not supported.&quot;),typeof fetch&gt;&quot;u&quot;&amp;&amp;console.warn(&quot;THREE.ImageBitmapLoader: fetch() not supported.&quot;),this.options={premultiplyAlpha:&quot;none&quot;}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&amp;&amp;(e=&quot;&quot;),this.path!==void 0&amp;&amp;(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=oa.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(h=&gt;{t&amp;&amp;t(h),s.manager.itemEnd(e)}).catch(h=&gt;{r&amp;&amp;r(h)});return}return setTimeout(function(){t&amp;&amp;t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin===&quot;anonymous&quot;?&quot;same-origin&quot;:&quot;include&quot;,l.headers=this.requestHeader;const u=fetch(e,l).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:&quot;none&quot;}))}).then(function(h){return oa.add(e,h),t&amp;&amp;t(h),s.manager.itemEnd(e),h}).catch(function(h){r&amp;&amp;r(h),oa.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});oa.add(e,u),s.manager.itemStart(e)}}let zm;class Dw{static getContext(){return zm===void 0&amp;&amp;(zm=new(window.AudioContext||window.webkitAudioContext)),zm}static setContext(e){zm=e}}class gB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ns(this.manager);o.setResponseType(&quot;arraybuffer&quot;),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const h=u.slice(0);Dw.getContext().decodeAudioData(h,function(p){t(p)}).catch(l)}catch(h){l(h)}},i,r);function l(u){r?r(u):console.error(u),s.manager.itemError(e)}}}const zA=new yt,BA=new yt,ql=new yt;class yB{constructor(){this.type=&quot;StereoCamera&quot;,this.aspect=1,this.eyeSep=.064,this.cameraL=new Yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ql.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(bc*t.fov*.5)/t.zoom;let l,u;BA.elements[12]=-r,zA.elements[12]=r,l=-o*t.aspect+s,u=o*t.aspect+s,ql.elements[0]=2*t.near/(u-l),ql.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(ql),l=-o*t.aspect-s,u=o*t.aspect-s,ql.elements[0]=2*t.near/(u-l),ql.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(ql)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(BA),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(zA)}}class RN extends Yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Nw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=HA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&amp;&amp;!this.running)return this.start(),0;if(this.running){const t=HA();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function HA(){return performance.now()}const Yl=new Y,VA=new Si,_B=new Y,Kl=new Y;class vB extends nn{constructor(){super(),this.type=&quot;AudioListener&quot;,this.context=Dw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Nw}getInput(){return this.gain}removeFilter(){return this.filter!==null&amp;&amp;(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yl,VA,_B),Kl.set(0,0,-1).applyQuaternion(VA),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yl.x,r),t.positionY.linearRampToValueAtTime(Yl.y,r),t.positionZ.linearRampToValueAtTime(Yl.z,r),t.forwardX.linearRampToValueAtTime(Kl.x,r),t.forwardY.linearRampToValueAtTime(Kl.y,r),t.forwardZ.linearRampToValueAtTime(Kl.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Yl.x,Yl.y,Yl.z),t.setOrientation(Kl.x,Kl.y,Kl.z,i.x,i.y,i.z)}}class ON extends nn{constructor(e){super(),this.type=&quot;Audio&quot;,this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType=&quot;empty&quot;,this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType=&quot;audioNode&quot;,this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType=&quot;mediaNode&quot;,this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType=&quot;mediaStreamNode&quot;,this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType=&quot;buffer&quot;,this.autoplay&amp;&amp;this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn(&quot;THREE.Audio: Audio is already playing.&quot;);return}if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.isPlaying===!0&amp;&amp;(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&amp;&amp;(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this._progress=0,this.source!==null&amp;&amp;(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length&gt;0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e&lt;t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length&gt;0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e&lt;t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&amp;&amp;this.source.detune!==void 0&amp;&amp;this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.playbackRate=e,this.isPlaying===!0&amp;&amp;this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.loop=e,this.isPlaying===!0&amp;&amp;(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!==&quot;buffer&quot;?(console.warn(&quot;THREE.Audio: Audio source type cannot be copied.&quot;),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const $l=new Y,GA=new Si,bB=new Y,Zl=new Y;class xB extends ON{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel=&quot;HRTF&quot;,this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&amp;&amp;this.isPlaying===!1)return;this.matrixWorld.decompose($l,GA,bB),Zl.set(0,0,1).applyQuaternion(GA);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime($l.x,i),t.positionY.linearRampToValueAtTime($l.y,i),t.positionZ.linearRampToValueAtTime($l.z,i),t.orientationX.linearRampToValueAtTime(Zl.x,i),t.orientationY.linearRampToValueAtTime(Zl.y,i),t.orientationZ.linearRampToValueAtTime(Zl.z,i)}else t.setPosition($l.x,$l.y,$l.z),t.setOrientation(Zl.x,Zl.y,Zl.z)}}class SB{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i&lt;t.length;i++)e+=t[i];return e/t.length}}class DN{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case&quot;quaternion&quot;:r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case&quot;string&quot;:case&quot;bool&quot;:r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)i[s+l]=i[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&amp;&amp;this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s&lt;1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-s,t)}o&gt;0&amp;&amp;this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(i[u]!==i[u+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i&lt;t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i&lt;this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r&gt;=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Si.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Si.multiplyQuaternionsFlat(e,o,e,t,e,i),Si.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*o+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[i+o]*r}}}const Iw=&quot;\\[\\]\\.:\\/&quot;,wB=new RegExp(&quot;[&quot;+Iw+&quot;]&quot;,&quot;g&quot;),Pw=&quot;[^&quot;+Iw+&quot;]&quot;,EB=&quot;[^&quot;+Iw.replace(&quot;\\.&quot;,&quot;&quot;)+&quot;]&quot;,TB=/((?:WC+[\/:])*)/.source.replace(&quot;WC&quot;,Pw),MB=/(WCOD+)?/.source.replace(&quot;WCOD&quot;,EB),AB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace(&quot;WC&quot;,Pw),CB=/\.(WC+)(?:\[(.+)\])?/.source.replace(&quot;WC&quot;,Pw),RB=new RegExp(&quot;^&quot;+TB+MB+AB+CB+&quot;$&quot;),OB=[&quot;material&quot;,&quot;materials&quot;,&quot;bones&quot;,&quot;map&quot;];class DB{constructor(e,t,i){const r=i||mn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&amp;&amp;r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class mn{constructor(e,t,i){this.path=t,this.parsedPath=i||mn.parseTrackName(t),this.node=mn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&amp;&amp;e.isAnimationObjectGroup?new mn.Composite(e,t,i):new mn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,&quot;_&quot;).replace(wB,&quot;&quot;)}static parseTrackName(e){const t=RB.exec(e);if(t===null)throw new Error(&quot;PropertyBinding: Cannot parse trackName: &quot;+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&amp;&amp;i.nodeName.lastIndexOf(&quot;.&quot;);if(r!==void 0&amp;&amp;r!==-1){const s=i.nodeName.substring(r+1);OB.indexOf(s)!==-1&amp;&amp;(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error(&quot;PropertyBinding: can not parse propertyName from trackName: &quot;+e);return i}static findNode(e,t){if(t===void 0||t===&quot;&quot;||t===&quot;.&quot;||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o&lt;s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const u=i(l.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=mn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn(&quot;THREE.PropertyBinding: No target node found for track: &quot;+this.path+&quot;.&quot;);return}if(i){let h=t.objectIndex;switch(i){case&quot;materials&quot;:if(!e.material){console.error(&quot;THREE.PropertyBinding: Can not bind to material as node does not have a material.&quot;,this);return}if(!e.material.materials){console.error(&quot;THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.&quot;,this);return}e=e.material.materials;break;case&quot;bones&quot;:if(!e.skeleton){console.error(&quot;THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.&quot;,this);return}e=e.skeleton.bones;for(let f=0;f&lt;e.length;f++)if(e[f].name===h){h=f;break}break;case&quot;map&quot;:if(&quot;map&quot;in e){e=e.map;break}if(!e.material){console.error(&quot;THREE.PropertyBinding: Can not bind to material as node does not have a material.&quot;,this);return}if(!e.material.map){console.error(&quot;THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.&quot;,this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error(&quot;THREE.PropertyBinding: Can not bind to objectName of node undefined.&quot;,this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error(&quot;THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.&quot;,this,e);return}e=e[h]}}const o=e[r];if(o===void 0){const h=t.nodeName;console.error(&quot;THREE.PropertyBinding: Trying to update property for track: &quot;+h+&quot;.&quot;+r+&quot; but it wasn&#x27;t found.&quot;,e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&amp;&amp;(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r===&quot;morphTargetInfluences&quot;){if(!e.geometry){console.error(&quot;THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.&quot;,this);return}if(!e.geometry.morphAttributes){console.error(&quot;THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.&quot;,this);return}e.morphTargetDictionary[s]!==void 0&amp;&amp;(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&amp;&amp;o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mn.Composite=DB;mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mn.prototype.GetterByBindingType=[mn.prototype._getValue_direct,mn.prototype._getValue_array,mn.prototype._getValue_arrayElement,mn.prototype._getValue_toArray];mn.prototype.SetterByBindingTypeAndVersioning=[[mn.prototype._setValue_direct,mn.prototype._setValue_direct_setNeedsUpdate,mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_array,mn.prototype._setValue_array_setNeedsUpdate,mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_arrayElement,mn.prototype._setValue_arrayElement_setNeedsUpdate,mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_fromArray,mn.prototype._setValue_fromArray_setNeedsUpdate,mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class NB{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Jr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,u=e.length,h=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const m=arguments[f],g=m.uuid;let v=t[g];if(v===void 0){v=u++,t[g]=v,e.push(m);for(let x=0,b=o;x!==b;++x)s[x].push(new mn(m,i[x],r[x]))}else if(v&lt;h){l=e[v];const x=--h,b=e[x];t[b.uuid]=v,e[v]=b,t[g]=x,e[x]=m;for(let _=0,T=o;_!==T;++_){const w=s[_],E=w[x];let R=w[v];w[v]=E,R===void 0&amp;&amp;(R=new mn(m,i[_],r[_])),w[x]=R}}else e[v]!==l&amp;&amp;console.error(&quot;THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.&quot;)}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],h=u.uuid,f=t[h];if(f!==void 0&amp;&amp;f&gt;=s){const p=s++,m=e[p];t[m.uuid]=f,e[f]=m,t[h]=p,e[p]=u;for(let g=0,v=r;g!==v;++g){const x=i[g],b=x[p],_=x[f];x[f]=b,x[p]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],f=h.uuid,p=t[f];if(p!==void 0)if(delete t[f],p&lt;s){const m=--s,g=e[m],v=--o,x=e[v];t[g.uuid]=p,e[p]=g,t[x.uuid]=m,e[m]=x,e.pop();for(let b=0,_=r;b!==_;++b){const T=i[b],w=T[m],E=T[v];T[p]=w,T[m]=E,T.pop()}}else{const m=--o,g=e[m];m&gt;0&amp;&amp;(t[g.uuid]=p),e[p]=g,e.pop();for(let v=0,x=r;v!==x;++v){const b=i[v];b[p]=b[m],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,u=this._objects,h=u.length,f=this.nCachedObjects_,p=new Array(h);r=s.length,i[e]=r,o.push(e),l.push(t),s.push(p);for(let m=f,g=u.length;m!==g;++m){const v=u[m];p[m]=new mn(v,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,u=o[l],h=e[l];t[h]=i,o[i]=u,o.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class NN{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),u={endingStart:fc,endingEnd:fc};for(let h=0;h!==o;++h){const f=s[h].createInterpolant(null);l[h]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=RD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&amp;&amp;!this.paused&amp;&amp;this.timeScale!==0&amp;&amp;this._startTime===null&amp;&amp;this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&amp;&amp;(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&amp;&amp;(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=s,u[1]=s+i,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&amp;&amp;(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*i;u&lt;0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l&gt;0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case ow:for(let f=0,p=u.length;f!==p;++f)u[f].evaluate(o),h[f].accumulateAdditive(l);break;case ay:default:for(let f=0,p=u.length;f!==p;++f)u[f].evaluate(o),h[f].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e&gt;i.parameterPositions[1]&amp;&amp;(this.stopFading(),r===0&amp;&amp;(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e&gt;i.parameterPositions[1]&amp;&amp;(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===OD;if(e===0)return s===-1?r:o&amp;&amp;(s&amp;1)===1?t-r:r;if(i===CD){s===-1&amp;&amp;(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r&gt;=t)r=t;else if(r&lt;0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:&quot;finished&quot;,action:this,direction:e&lt;0?-1:1})}}else{if(s===-1&amp;&amp;(e&gt;=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r&gt;=t||r&lt;0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u&lt;=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e&gt;0?t:0,this.time=r,this._mixer.dispatchEvent({type:&quot;finished&quot;,action:this,direction:e&gt;0?1:-1});else{if(u===1){const h=e&lt;0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:&quot;loop&quot;,action:this,loopDelta:l})}}else this.time=r;if(o&amp;&amp;(s&amp;1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=dc,r.endingEnd=dc):(e?r.endingStart=this.zeroSlopeAtStart?dc:fc:r.endingStart=_d,t?r.endingEnd=this.zeroSlopeAtEnd?dc:fc:r.endingEnd=_d)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&amp;&amp;(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=i,this}}const IB=new Float32Array(1);class IN extends To{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,u=i.uuid,h=this._bindingsByRootAndName;let f=h[u];f===void 0&amp;&amp;(f={},h[u]=f);for(let p=0;p!==s;++p){const m=r[p],g=m.name;let v=f[g];if(v!==void 0)++v.referenceCount,o[p]=v;else{if(v=o[p],v!==void 0){v._cacheIndex===null&amp;&amp;(++v.referenceCount,this._addInactiveBinding(v,u,g));continue}const x=t&amp;&amp;t._propertyBindings[p].binding.parsedPath;v=new DN(mn.create(i,g,x),m.ValueTypeName,m.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,u,g),o[p]=v}l[p].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&amp;&amp;s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&amp;&amp;(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&amp;&amp;(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&amp;&amp;t&lt;this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],u=l.knownActions,h=u[u.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,u[f]=h,u.pop(),e._byClipCacheIndex=null;const p=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],u.length===0&amp;&amp;delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&amp;&amp;this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&amp;&amp;(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,l=o[r],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete l[s],Object.keys(l).length===0&amp;&amp;delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&amp;&amp;(i=new Mw(new Float32Array(2),new Float32Array(2),1,IB),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e==&quot;string&quot;?ml.findByName(r,e):e;const l=o!==null?o.uuid:e,u=this._actionsByClip[l];let h=null;if(i===void 0&amp;&amp;(o!==null?i=o.blendMode:i=ay),u!==void 0){const p=u.actionByRoot[s];if(p!==void 0&amp;&amp;p.blendMode===i)return p;h=u.knownActions[0],o===null&amp;&amp;(o=h._clip)}if(o===null)return null;const f=new NN(this,o,t,i);return this._bindAction(f,h),this._addInactiveAction(f,l,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e==&quot;string&quot;?ml.findByName(i,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&amp;&amp;l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i&gt;=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,s,o);const l=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)l[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t&lt;this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let l=0,u=o.length;l!==u;++l){const h=o[l];this._deactivateAction(h);const f=h._cacheIndex,p=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=f,t[f]=p,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot,u=l[t];u!==void 0&amp;&amp;(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&amp;&amp;(this._deactivateAction(i),this._removeInactiveAction(i))}}class PB extends ly{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new cy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class LB extends ly{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Wd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Lw{constructor(e){this.value=e}clone(){return new Lw(this.value.clone===void 0?this.value:this.value.clone())}}let UB=0;class kB extends To{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,&quot;id&quot;,{value:UB++}),this.name=&quot;&quot;,this.usage=bd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&amp;&amp;this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i&lt;r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o&lt;s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class FB extends qd{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class zB{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name=&quot;&quot;,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&amp;&amp;this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const jA=new yt;class PN{constructor(e,t,i=0,r=1/0){this.ray=new bl(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new uy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error(&quot;THREE.Raycaster: Unsupported camera type: &quot;+t.type)}setFromXRController(e){return jA.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(jA),this}intersectObject(e,t=!0,i=[]){return cS(e,this,i,t),i.sort(WA),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r&lt;s;r++)cS(e[r],this,i,t);return i.sort(WA),i}}function WA(n,e){return n.distance-e.distance}function cS(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&amp;&amp;n.raycast(e,t)===!1&amp;&amp;(r=!1),r===!0&amp;&amp;i===!0){const s=n.children;for(let o=0,l=s.length;o&lt;l;o++)cS(s[o],e,t,!0)}}class uS{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Vt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Vt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class BB{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Uw{constructor(e,t,i,r){Uw.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&amp;&amp;this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i&lt;4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const XA=new Oe;class HB{constructor(e=new Oe(1/0,1/0),t=new Oe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t&lt;i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=XA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x&lt;this.min.x||this.max.y&lt;this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x&gt;=this.min.x&amp;&amp;e.x&lt;=this.max.x&amp;&amp;e.y&gt;=this.min.y&amp;&amp;e.y&lt;=this.max.y}containsBox(e){return this.min.x&lt;=e.min.x&amp;&amp;e.max.x&lt;=this.max.x&amp;&amp;this.min.y&lt;=e.min.y&amp;&amp;e.max.y&lt;=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x&gt;=this.min.x&amp;&amp;e.min.x&lt;=this.max.x&amp;&amp;e.max.y&gt;=this.min.y&amp;&amp;e.min.y&lt;=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,XA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&amp;&amp;this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&amp;&amp;e.max.equals(this.max)}}const qA=new Y,Bm=new Y;class VB{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){qA.subVectors(e,this.start),Bm.subVectors(this.end,this.start);const i=Bm.dot(Bm);let s=Bm.dot(qA)/i;return t&amp;&amp;(s=Vt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&amp;&amp;e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const YA=new Y;class GB extends nn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type=&quot;SpotLightHelper&quot;;const i=new Lt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,u=32;o&lt;u;o++,l++){const h=o/u*Math.PI*2,f=l/u*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}i.setAttribute(&quot;position&quot;,new ct(r,3));const s=new Zi({fog:!1,toneMapped:!1});this.cone=new Ur(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),YA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(YA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qa=new Y,Hm=new yt,Gb=new yt;class jB extends Ur{constructor(e){const t=LN(e),i=new Lt,r=[],s=[],o=new $e(0,0,1),l=new $e(0,1,0);for(let h=0;h&lt;t.length;h++){const f=t[h];f.parent&amp;&amp;f.parent.isBone&amp;&amp;(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}i.setAttribute(&quot;position&quot;,new ct(r,3)),i.setAttribute(&quot;color&quot;,new ct(s,3));const u=new Zi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type=&quot;SkeletonHelper&quot;,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute(&quot;position&quot;);Gb.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s&lt;t.length;s++){const l=t[s];l.parent&amp;&amp;l.parent.isBone&amp;&amp;(Hm.multiplyMatrices(Gb,l.matrixWorld),qa.setFromMatrixPosition(Hm),r.setXYZ(o,qa.x,qa.y,qa.z),Hm.multiplyMatrices(Gb,l.parent.matrixWorld),qa.setFromMatrixPosition(Hm),r.setXYZ(o+1,qa.x,qa.y,qa.z),o+=2)}i.getAttribute(&quot;position&quot;).needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function LN(n){const e=[];n.isBone===!0&amp;&amp;e.push(n);for(let t=0;t&lt;n.children.length;t++)e.push(...LN(n.children[t]));return e}class WB extends Sn{constructor(e,t,i){const r=new Ch(t,4,2),s=new $i({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type=&quot;PointLightHelper&quot;,this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const XB=new Y,KA=new $e,$A=new $e;class qB extends nn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type=&quot;HemisphereLightHelper&quot;;const r=new $d(t);r.rotateY(Math.PI*.5),this.material=new $i({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&amp;&amp;(this.material.vertexColors=!0);const s=r.getAttribute(&quot;position&quot;),o=new Float32Array(s.count*3);r.setAttribute(&quot;color&quot;,new Jt(o,3)),this.add(new Sn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute(&quot;color&quot;);KA.copy(this.light.color),$A.copy(this.light.groundColor);for(let i=0,r=t.count;i&lt;r;i++){const s=i&lt;r/2?KA:$A;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(XB.setFromMatrixPosition(this.light.matrixWorld).negate())}}class UN extends Ur{constructor(e=10,t=10,i=4473924,r=8947848){i=new $e(i),r=new $e(r);const s=t/2,o=e/t,l=e/2,u=[],h=[];for(let m=0,g=0,v=-l;m&lt;=t;m++,v+=o){u.push(-l,0,v,l,0,v),u.push(v,0,-l,v,0,l);const x=m===s?i:r;x.toArray(h,g),g+=3,x.toArray(h,g),g+=3,x.toArray(h,g),g+=3,x.toArray(h,g),g+=3}const f=new Lt;f.setAttribute(&quot;position&quot;,new ct(u,3)),f.setAttribute(&quot;color&quot;,new ct(h,3));const p=new Zi({vertexColors:!0,toneMapped:!1});super(f,p),this.type=&quot;GridHelper&quot;}dispose(){this.geometry.dispose(),this.material.dispose()}}class YB extends Ur{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new $e(s),o=new $e(o);const l=[],u=[];if(t&gt;1)for(let p=0;p&lt;t;p++){const m=p/t*(Math.PI*2),g=Math.sin(m)*e,v=Math.cos(m)*e;l.push(0,0,0),l.push(g,0,v);const x=p&amp;1?s:o;u.push(x.r,x.g,x.b),u.push(x.r,x.g,x.b)}for(let p=0;p&lt;i;p++){const m=p&amp;1?s:o,g=e-e/i*p;for(let v=0;v&lt;r;v++){let x=v/r*(Math.PI*2),b=Math.sin(x)*g,_=Math.cos(x)*g;l.push(b,0,_),u.push(m.r,m.g,m.b),x=(v+1)/r*(Math.PI*2),b=Math.sin(x)*g,_=Math.cos(x)*g,l.push(b,0,_),u.push(m.r,m.g,m.b)}}const h=new Lt;h.setAttribute(&quot;position&quot;,new ct(l,3)),h.setAttribute(&quot;color&quot;,new ct(u,3));const f=new Zi({vertexColors:!0,toneMapped:!1});super(h,f),this.type=&quot;PolarGridHelper&quot;}dispose(){this.geometry.dispose(),this.material.dispose()}}const ZA=new Y,Vm=new Y,JA=new Y;class KB extends nn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type=&quot;DirectionalLightHelper&quot;,t===void 0&amp;&amp;(t=1);let r=new Lt;r.setAttribute(&quot;position&quot;,new ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Zi({fog:!1,toneMapped:!1});this.lightPlane=new xo(r,s),this.add(this.lightPlane),r=new Lt,r.setAttribute(&quot;position&quot;,new ct([0,0,0,0,0,1],3)),this.targetLine=new xo(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ZA.setFromMatrixPosition(this.light.matrixWorld),Vm.setFromMatrixPosition(this.light.target.matrixWorld),JA.subVectors(Vm,ZA),this.lightPlane.lookAt(Vm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Vm),this.targetLine.scale.z=JA.length()}}const Gm=new Y,ui=new hy;class $B extends Ur{constructor(e){const t=new Lt,i=new Zi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l(&quot;n1&quot;,&quot;n2&quot;),l(&quot;n2&quot;,&quot;n4&quot;),l(&quot;n4&quot;,&quot;n3&quot;),l(&quot;n3&quot;,&quot;n1&quot;),l(&quot;f1&quot;,&quot;f2&quot;),l(&quot;f2&quot;,&quot;f4&quot;),l(&quot;f4&quot;,&quot;f3&quot;),l(&quot;f3&quot;,&quot;f1&quot;),l(&quot;n1&quot;,&quot;f1&quot;),l(&quot;n2&quot;,&quot;f2&quot;),l(&quot;n3&quot;,&quot;f3&quot;),l(&quot;n4&quot;,&quot;f4&quot;),l(&quot;p&quot;,&quot;n1&quot;),l(&quot;p&quot;,&quot;n2&quot;),l(&quot;p&quot;,&quot;n3&quot;),l(&quot;p&quot;,&quot;n4&quot;),l(&quot;u1&quot;,&quot;u2&quot;),l(&quot;u2&quot;,&quot;u3&quot;),l(&quot;u3&quot;,&quot;u1&quot;),l(&quot;c&quot;,&quot;t&quot;),l(&quot;p&quot;,&quot;c&quot;),l(&quot;cn1&quot;,&quot;cn2&quot;),l(&quot;cn3&quot;,&quot;cn4&quot;),l(&quot;cf1&quot;,&quot;cf2&quot;),l(&quot;cf3&quot;,&quot;cf4&quot;);function l(v,x){u(v),u(x)}function u(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&amp;&amp;(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute(&quot;position&quot;,new ct(r,3)),t.setAttribute(&quot;color&quot;,new ct(s,3)),super(t,i),this.type=&quot;CameraHelper&quot;,this.camera=e,this.camera.updateProjectionMatrix&amp;&amp;this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new $e(16755200),f=new $e(16711680),p=new $e(43775),m=new $e(16777215),g=new $e(3355443);this.setColors(h,f,p,m,g)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute(&quot;color&quot;);l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;ui.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Es?-1:0;_i(&quot;c&quot;,t,e,ui,0,0,s),_i(&quot;t&quot;,t,e,ui,0,0,1),_i(&quot;n1&quot;,t,e,ui,-1,-1,s),_i(&quot;n2&quot;,t,e,ui,i,-1,s),_i(&quot;n3&quot;,t,e,ui,-1,r,s),_i(&quot;n4&quot;,t,e,ui,i,r,s),_i(&quot;f1&quot;,t,e,ui,-1,-1,1),_i(&quot;f2&quot;,t,e,ui,i,-1,1),_i(&quot;f3&quot;,t,e,ui,-1,r,1),_i(&quot;f4&quot;,t,e,ui,i,r,1),_i(&quot;u1&quot;,t,e,ui,i*.7,r*1.1,s),_i(&quot;u2&quot;,t,e,ui,-1*.7,r*1.1,s),_i(&quot;u3&quot;,t,e,ui,0,r*2,s),_i(&quot;cf1&quot;,t,e,ui,-1,0,1),_i(&quot;cf2&quot;,t,e,ui,i,0,1),_i(&quot;cf3&quot;,t,e,ui,0,-1,1),_i(&quot;cf4&quot;,t,e,ui,0,r,1),_i(&quot;cn1&quot;,t,e,ui,-1,0,s),_i(&quot;cn2&quot;,t,e,ui,i,0,s),_i(&quot;cn3&quot;,t,e,ui,0,-1,s),_i(&quot;cn4&quot;,t,e,ui,0,r,s),e.getAttribute(&quot;position&quot;).needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function _i(n,e,t,i,r,s,o){Gm.set(r,s,o).unproject(i);const l=e[n];if(l!==void 0){const u=t.getAttribute(&quot;position&quot;);for(let h=0,f=l.length;h&lt;f;h++)u.setXYZ(l[h],Gm.x,Gm.y,Gm.z)}}const jm=new Ri;class ZB extends Ur{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Lt;s.setIndex(new Jt(i,1)),s.setAttribute(&quot;position&quot;,new Jt(r,3)),super(s,new Zi({color:t,toneMapped:!1})),this.object=e,this.type=&quot;BoxHelper&quot;,this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&amp;&amp;jm.setFromObject(this.object),jm.isEmpty())return;const e=jm.min,t=jm.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class JB extends Ur{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Lt;s.setIndex(new Jt(i,1)),s.setAttribute(&quot;position&quot;,new ct(r,3)),super(s,new Zi({color:t,toneMapped:!1})),this.box=e,this.type=&quot;Box3Helper&quot;,this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class QB extends xo{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Lt;o.setAttribute(&quot;position&quot;,new ct(s,3)),o.computeBoundingSphere(),super(o,new Zi({color:r,toneMapped:!1})),this.type=&quot;PlaneHelper&quot;,this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Lt;u.setAttribute(&quot;position&quot;,new ct(l,3)),u.computeBoundingSphere(),this.add(new Sn(u,new $i({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const QA=new Y;let Wm,jb;class e4 extends nn{constructor(e=new Y(0,0,1),t=new Y(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type=&quot;ArrowHelper&quot;,Wm===void 0&amp;&amp;(Wm=new Lt,Wm.setAttribute(&quot;position&quot;,new ct([0,0,0,0,1,0],3)),jb=new Kd(.5,1,5,1),jb.translate(0,-.5,0)),this.position.copy(t),this.line=new xo(Wm,new Zi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Sn(jb,new $i({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y&gt;.99999)this.quaternion.set(0,0,0,1);else if(e.y&lt;-.99999)this.quaternion.set(1,0,0,0);else{QA.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(QA,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class t4 extends Ur{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Lt;r.setAttribute(&quot;position&quot;,new ct(t,3)),r.setAttribute(&quot;color&quot;,new ct(i,3));const s=new Zi({vertexColors:!0,toneMapped:!1});super(r,s),this.type=&quot;AxesHelper&quot;}setColors(e,t,i){const r=new $e,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class n4{constructor(){this.type=&quot;ShapePath&quot;,this.color=new $e,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new C0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const T=[];for(let w=0,E=_.length;w&lt;E;w++){const R=_[w],N=new xc;N.curves=R.curves,T.push(N)}return T}function i(_,T){const w=T.length;let E=!1;for(let R=w-1,N=0;N&lt;w;R=N++){let A=T[R],D=T[N],C=D.x-A.x,O=D.y-A.y;if(Math.abs(O)&gt;Number.EPSILON){if(O&lt;0&amp;&amp;(A=T[N],C=-C,D=T[R],O=-O),_.y&lt;A.y||_.y&gt;D.y)continue;if(_.y===A.y){if(_.x===A.x)return!0}else{const L=O*(_.x-A.x)-C*(_.y-A.y);if(L===0)return!0;if(L&lt;0)continue;E=!E}}else{if(_.y!==A.y)continue;if(D.x&lt;=_.x&amp;&amp;_.x&lt;=A.x||A.x&lt;=_.x&amp;&amp;_.x&lt;=D.x)return!0}}return E}const r=qs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,u;const h=[];if(s.length===1)return l=s[0],u=new xc,u.curves=l.curves,h.push(u),h;let f=!r(s[0].getPoints());f=e?!f:f;const p=[],m=[];let g=[],v=0,x;m[v]=void 0,g[v]=[];for(let _=0,T=s.length;_&lt;T;_++)l=s[_],x=l.getPoints(),o=r(x),o=e?!o:o,o?(!f&amp;&amp;m[v]&amp;&amp;v++,m[v]={s:new xc,p:x},m[v].s.curves=l.curves,f&amp;&amp;v++,g[v]=[]):g[v].push({h:l,p:x[0]});if(!m[0])return t(s);if(m.length&gt;1){let _=!1,T=0;for(let w=0,E=m.length;w&lt;E;w++)p[w]=[];for(let w=0,E=m.length;w&lt;E;w++){const R=g[w];for(let N=0;N&lt;R.length;N++){const A=R[N];let D=!0;for(let C=0;C&lt;m.length;C++)i(A.p,m[C].p)&amp;&amp;(w!==C&amp;&amp;T++,D?(D=!1,p[C].push(A)):_=!0);D&amp;&amp;p[w].push(A)}}T&gt;0&amp;&amp;_===!1&amp;&amp;(g=p)}let b;for(let _=0,T=m.length;_&lt;T;_++){u=m[_].s,h.push(u),b=g[_];for(let w=0,E=b.length;w&lt;E;w++)u.holes.push(b[w].h)}return h}}let kN=class extends To{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn(&quot;THREE.Controls: connect() now requires an element.&quot;);return}this.domElement!==null&amp;&amp;this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function i4(n,e){const t=n.image&amp;&amp;n.image.width?n.image.width/n.image.height:1;return t&gt;e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function r4(n,e){const t=n.image&amp;&amp;n.image.width?n.image.width/n.image.height:1;return t&gt;e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function s4(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function hS(n,e,t,i){const r=o4(i);switch(t){case nw:return n*e;case Gd:return n*e/r.components*r.byteLength;case jd:return n*e/r.components*r.byteLength;case rw:return n*e*2/r.components*r.byteLength;case sy:return n*e*2/r.components*r.byteLength;case iw:return n*e*3/r.components*r.byteLength;case vr:return n*e*4/r.components*r.byteLength;case oy:return n*e*4/r.components*r.byteLength;case id:case rd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case sd:case od:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Qg:case t0:return Math.max(n,16)*Math.max(e,8)/4;case Jg:case e0:return Math.max(n,8)*Math.max(e,8)/2;case n0:case i0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case r0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case s0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case o0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case a0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case l0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case c0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case u0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case h0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case f0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case d0:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case p0:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case m0:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case g0:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case y0:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case _0:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case ad:case v0:case b0:return Math.ceil(n/4)*Math.ceil(e/4)*16;case sw:case x0:return Math.ceil(n/4)*Math.ceil(e/4)*8;case S0:case w0:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function o4(n){switch(n){case es:case QS:return{byteLength:1,components:1};case rh:case ew:case wh:return{byteLength:2,components:1};case iy:case ry:return{byteLength:2,components:4};case da:case ny:case Pr:return{byteLength:4,components:1};case tw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class a4{static contain(e,t){return i4(e,t)}static cover(e,t){return r4(e,t)}static fill(e){return s4(e)}static getByteLength(e,t,i,r){return hS(e,t,i,r)}}typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;register&quot;,{detail:{revision:Q0}}));typeof window&lt;&quot;u&quot;&amp;&amp;(window.__THREE__?console.warn(&quot;WARNING: Multiple instances of Three.js being imported.&quot;):window.__THREE__=Q0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function FN(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&amp;&amp;t!==null&amp;&amp;(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function l4(n){const e=new WeakMap;function t(l,u){const h=l.array,f=l.usage,p=h.byteLength,m=n.createBuffer();n.bindBuffer(u,m),n.bufferData(u,h,f),l.onUploadCallback();let g;if(h instanceof Float32Array)g=n.FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)g=n.SHORT;else if(h instanceof Uint32Array)g=n.UNSIGNED_INT;else if(h instanceof Int32Array)g=n.INT;else if(h instanceof Int8Array)g=n.BYTE;else if(h instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error(&quot;THREE.WebGLAttributes: Unsupported buffer data format: &quot;+h);return{buffer:m,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:p}}function i(l,u,h){const f=u.array,p=u.updateRanges;if(n.bindBuffer(h,l),p.length===0)n.bufferSubData(h,0,f);else{p.sort((g,v)=&gt;g.start-v.start);let m=0;for(let g=1;g&lt;p.length;g++){const v=p[m],x=p[g];x.start&lt;=v.start+v.count+1?v.count=Math.max(v.count,x.start+x.count-v.start):(++m,p[m]=x)}p.length=m+1;for(let g=0,v=p.length;g&lt;v;g++){const x=p[g];n.bufferSubData(h,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&amp;&amp;(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&amp;&amp;(l=l.data);const u=e.get(l);u&amp;&amp;(n.deleteBuffer(u.buffer),e.delete(l))}function o(l,u){if(l.isInterleavedBufferAttribute&amp;&amp;(l=l.data),l.isGLBufferAttribute){const f=e.get(l);(!f||f.version&lt;l.version)&amp;&amp;e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const h=e.get(l);if(h===void 0)e.set(l,t(l,u));else if(h.version&lt;l.version){if(h.size!==l.array.byteLength)throw new Error(&quot;THREE.WebGLAttributes: The size of the buffer attribute&#x27;s array buffer does not match the original size. Resizing buffer attributes is not supported.&quot;);i(h.buffer,l,u),h.version=l.version}}return{get:r,remove:s,update:o}}var c4=`#ifdef USE_ALPHAHASH
    if ( diffuseColor.a &lt; getAlphaHashThreshold( vPosition ) ) discard;
#endif`,u4=`#ifdef USE_ALPHAHASH
    const float ALPHA_HASH_SCALE = 0.05;
    float hash2D( vec2 value ) {
            return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
    }
    float hash3D( vec3 value ) {
            return hash2D( vec2( hash2D( value.xy ), value.z ) );
    }
    float getAlphaHashThreshold( vec3 position ) {
            float maxDeriv = max(
                    length( dFdx( position.xyz ) ),
                    length( dFdy( position.xyz ) )
            );
            float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
            vec2 pixScales = vec2(
                    exp2( floor( log2( pixScale ) ) ),
                    exp2( ceil( log2( pixScale ) ) )
            );
            vec2 alpha = vec2(
                    hash3D( floor( pixScales.x * position.xyz ) ),
                    hash3D( floor( pixScales.y * position.xyz ) )
            );
            float lerpFactor = fract( log2( pixScale ) );
            float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
            float a = min( lerpFactor, 1.0 - lerpFactor );
            vec3 cases = vec3(
                    x * x / ( 2.0 * a * ( 1.0 - a ) ),
                    ( x - 0.5 * a ) / ( 1.0 - a ),
                    1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
            );
            float threshold = ( x &lt; ( 1.0 - a ) )
                    ? ( ( x &lt; a ) ? cases.x : cases.y )
                    : cases.z;
            return clamp( threshold , 1.0e-6, 1.0 );
    }
#endif`,h4=`#ifdef USE_ALPHAMAP
    diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,f4=`#ifdef USE_ALPHAMAP
    uniform sampler2D alphaMap;
#endif`,d4=`#ifdef USE_ALPHATEST
    #ifdef ALPHA_TO_COVERAGE
    diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
    if ( diffuseColor.a == 0.0 ) discard;
    #else
    if ( diffuseColor.a &lt; alphaTest ) discard;
    #endif
#endif`,p4=`#ifdef USE_ALPHATEST
    uniform float alphaTest;
#endif`,m4=`#ifdef USE_AOMAP
    float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
    reflectedLight.indirectDiffuse *= ambientOcclusion;
    #if defined( USE_CLEARCOAT )
            clearcoatSpecularIndirect *= ambientOcclusion;
    #endif
    #if defined( USE_SHEEN )
            sheenSpecularIndirect *= ambientOcclusion;
    #endif
    #if defined( USE_ENVMAP ) &amp;&amp; defined( STANDARD )
            float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
            reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
    #endif
#endif`,g4=`#ifdef USE_AOMAP
    uniform sampler2D aoMap;
    uniform float aoMapIntensity;
#endif`,y4=`#ifdef USE_BATCHING
    #if ! defined( GL_ANGLE_multi_draw )
    #define gl_DrawID _gl_DrawID
    uniform int _gl_DrawID;
    #endif
    uniform highp sampler2D batchingTexture;
    uniform highp usampler2D batchingIdTexture;
    mat4 getBatchingMatrix( const in float i ) {
            int size = textureSize( batchingTexture, 0 ).x;
            int j = int( i ) * 4;
            int x = j % size;
            int y = j / size;
            vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
            vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
            vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
            vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
            return mat4( v1, v2, v3, v4 );
    }
    float getIndirectIndex( const in int i ) {
            int size = textureSize( batchingIdTexture, 0 ).x;
            int x = i % size;
            int y = i / size;
            return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
    }
#endif
#ifdef USE_BATCHING_COLOR
    uniform sampler2D batchingColorTexture;
    vec3 getBatchingColor( const in float i ) {
            int size = textureSize( batchingColorTexture, 0 ).x;
            int j = int( i );
            int x = j % size;
            int y = j / size;
            return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
    }
#endif`,_4=`#ifdef USE_BATCHING
    mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,v4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
    vPosition = vec3( position );
#endif`,b4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
    vec3 objectTangent = vec3( tangent.xyz );
#endif`,x4=`float G_BlinnPhong_Implicit( ) {
    return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
    return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
    vec3 halfDir = normalize( lightDir + viewDir );
    float dotNH = saturate( dot( normal, halfDir ) );
    float dotVH = saturate( dot( viewDir, halfDir ) );
    vec3 F = F_Schlick( specularColor, 1.0, dotVH );
    float G = G_BlinnPhong_Implicit( );
    float D = D_BlinnPhong( shininess, dotNH );
    return F * ( G * D );
} // validated`,S4=`#ifdef USE_IRIDESCENCE
    const mat3 XYZ_TO_REC709 = mat3(
             3.2404542, -0.9692660,  0.0556434,
            -1.5371385,  1.8760108, -0.2040259,
            -0.4985314,  0.0415560,  1.0572252
    );
    vec3 Fresnel0ToIor( vec3 fresnel0 ) {
            vec3 sqrtF0 = sqrt( fresnel0 );
            return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
    }
    vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
            return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
    }
    float IorToFresnel0( float transmittedIor, float incidentIor ) {
            return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
    }
    vec3 evalSensitivity( float OPD, vec3 shift ) {
            float phase = 2.0 * PI * OPD * 1.0e-9;
            vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
            vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
            vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
            vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
            xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
            xyz /= 1.0685e-7;
            vec3 rgb = XYZ_TO_REC709 * xyz;
            return rgb;
    }
    vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
            vec3 I;
            float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
            float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
            float cosTheta2Sq = 1.0 - sinTheta2Sq;
            if ( cosTheta2Sq &lt; 0.0 ) {
                    return vec3( 1.0 );
            }
            float cosTheta2 = sqrt( cosTheta2Sq );
            float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
            float R12 = F_Schlick( R0, 1.0, cosTheta1 );
            float T121 = 1.0 - R12;
            float phi12 = 0.0;
            if ( iridescenceIOR &lt; outsideIOR ) phi12 = PI;
            float phi21 = PI - phi12;
            vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );           vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
            vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
            vec3 phi23 = vec3( 0.0 );
            if ( baseIOR[ 0 ] &lt; iridescenceIOR ) phi23[ 0 ] = PI;
            if ( baseIOR[ 1 ] &lt; iridescenceIOR ) phi23[ 1 ] = PI;
            if ( baseIOR[ 2 ] &lt; iridescenceIOR ) phi23[ 2 ] = PI;
            float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
            vec3 phi = vec3( phi21 ) + phi23;
            vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
            vec3 r123 = sqrt( R123 );
            vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
            vec3 C0 = R12 + Rs;
            I = C0;
            vec3 Cm = Rs - T121;
            for ( int m = 1; m &lt;= 2; ++ m ) {
                    Cm *= r123;
                    vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
                    I += Cm * Sm;
            }
            return max( I, vec3( 0.0 ) );
    }
#endif`,w4=`#ifdef USE_BUMPMAP
    uniform sampler2D bumpMap;
    uniform float bumpScale;
    vec2 dHdxy_fwd() {
            vec2 dSTdx = dFdx( vBumpMapUv );
            vec2 dSTdy = dFdy( vBumpMapUv );
            float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
            float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
            float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
            return vec2( dBx, dBy );
    }
    vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
            vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
            vec3 vN = surf_norm;
            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * surf_norm - vGrad );
    }
#endif`,E4=`#if NUM_CLIPPING_PLANES &gt; 0
    vec4 plane;
    #ifdef ALPHA_TO_COVERAGE
            float distanceToPlane, distanceGradient;
            float clipOpacity = 1.0;
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; UNION_CLIPPING_PLANES; i ++ ) {
                    plane = clippingPlanes[ i ];
                    distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
                    distanceGradient = fwidth( distanceToPlane ) / 2.0;
                    clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
                    if ( clipOpacity == 0.0 ) discard;
            }
            #pragma unroll_loop_end
            #if UNION_CLIPPING_PLANES &lt; NUM_CLIPPING_PLANES
                    float unionClipOpacity = 1.0;
                    #pragma unroll_loop_start
                    for ( int i = UNION_CLIPPING_PLANES; i &lt; NUM_CLIPPING_PLANES; i ++ ) {
                            plane = clippingPlanes[ i ];
                            distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
                            distanceGradient = fwidth( distanceToPlane ) / 2.0;
                            unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
                    }
                    #pragma unroll_loop_end
                    clipOpacity *= 1.0 - unionClipOpacity;
            #endif
            diffuseColor.a *= clipOpacity;
            if ( diffuseColor.a == 0.0 ) discard;
    #else
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; UNION_CLIPPING_PLANES; i ++ ) {
                    plane = clippingPlanes[ i ];
                    if ( dot( vClipPosition, plane.xyz ) &gt; plane.w ) discard;
            }
            #pragma unroll_loop_end
            #if UNION_CLIPPING_PLANES &lt; NUM_CLIPPING_PLANES
                    bool clipped = true;
                    #pragma unroll_loop_start
                    for ( int i = UNION_CLIPPING_PLANES; i &lt; NUM_CLIPPING_PLANES; i ++ ) {
                            plane = clippingPlanes[ i ];
                            clipped = ( dot( vClipPosition, plane.xyz ) &gt; plane.w ) &amp;&amp; clipped;
                    }
                    #pragma unroll_loop_end
                    if ( clipped ) discard;
            #endif
    #endif
#endif`,T4=`#if NUM_CLIPPING_PLANES &gt; 0
    varying vec3 vClipPosition;
    uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,M4=`#if NUM_CLIPPING_PLANES &gt; 0
    varying vec3 vClipPosition;
#endif`,A4=`#if NUM_CLIPPING_PLANES &gt; 0
    vClipPosition = - mvPosition.xyz;
#endif`,C4=`#if defined( USE_COLOR_ALPHA )
    diffuseColor *= vColor;
#elif defined( USE_COLOR )
    diffuseColor.rgb *= vColor;
#endif`,R4=`#if defined( USE_COLOR_ALPHA )
    varying vec4 vColor;
#elif defined( USE_COLOR )
    varying vec3 vColor;
#endif`,O4=`#if defined( USE_COLOR_ALPHA )
    varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
    varying vec3 vColor;
#endif`,D4=`#if defined( USE_COLOR_ALPHA )
    vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
    vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
    vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
    vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
    vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
    vColor.xyz *= batchingColor.xyz;
#endif`,N4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
    return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
    float precisionSafeLength( vec3 v ) { return length( v ); }
#else
    float precisionSafeLength( vec3 v ) {
            float maxComponent = max3( abs( v ) );
            return length( v / maxComponent ) * maxComponent;
    }
#endif
struct IncidentLight {
    vec3 color;
    vec3 direction;
    bool visible;
};
struct ReflectedLight {
    vec3 directDiffuse;
    vec3 directSpecular;
    vec3 indirectDiffuse;
    vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
    varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
    return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
    return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
    mat3 tmp;
    tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
    tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
    tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
    return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
    return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
    float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
    float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
    return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
    return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
    float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
    return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
    float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
    return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,I4=`#ifdef ENVMAP_TYPE_CUBE_UV
    #define cubeUV_minMipLevel 4.0
    #define cubeUV_minTileSize 16.0
    float getFace( vec3 direction ) {
            vec3 absDirection = abs( direction );
            float face = - 1.0;
            if ( absDirection.x &gt; absDirection.z ) {
                    if ( absDirection.x &gt; absDirection.y )
                            face = direction.x &gt; 0.0 ? 0.0 : 3.0;
                    else
                            face = direction.y &gt; 0.0 ? 1.0 : 4.0;
            } else {
                    if ( absDirection.z &gt; absDirection.y )
                            face = direction.z &gt; 0.0 ? 2.0 : 5.0;
                    else
                            face = direction.y &gt; 0.0 ? 1.0 : 4.0;
            }
            return face;
    }
    vec2 getUV( vec3 direction, float face ) {
            vec2 uv;
            if ( face == 0.0 ) {
                    uv = vec2( direction.z, direction.y ) / abs( direction.x );
            } else if ( face == 1.0 ) {
                    uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
            } else if ( face == 2.0 ) {
                    uv = vec2( - direction.x, direction.y ) / abs( direction.z );
            } else if ( face == 3.0 ) {
                    uv = vec2( - direction.z, direction.y ) / abs( direction.x );
            } else if ( face == 4.0 ) {
                    uv = vec2( - direction.x, direction.z ) / abs( direction.y );
            } else {
                    uv = vec2( direction.x, direction.y ) / abs( direction.z );
            }
            return 0.5 * ( uv + 1.0 );
    }
    vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
            float face = getFace( direction );
            float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
            mipInt = max( mipInt, cubeUV_minMipLevel );
            float faceSize = exp2( mipInt );
            highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
            if ( face &gt; 2.0 ) {
                    uv.y += faceSize;
                    face -= 3.0;
            }
            uv.x += face * faceSize;
            uv.x += filterInt * 3.0 * cubeUV_minTileSize;
            uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
            uv.x *= CUBEUV_TEXEL_WIDTH;
            uv.y *= CUBEUV_TEXEL_HEIGHT;
            #ifdef texture2DGradEXT
                    return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
            #else
                    return texture2D( envMap, uv ).rgb;
            #endif
    }
    #define cubeUV_r0 1.0
    #define cubeUV_m0 - 2.0
    #define cubeUV_r1 0.8
    #define cubeUV_m1 - 1.0
    #define cubeUV_r4 0.4
    #define cubeUV_m4 2.0
    #define cubeUV_r5 0.305
    #define cubeUV_m5 3.0
    #define cubeUV_r6 0.21
    #define cubeUV_m6 4.0
    float roughnessToMip( float roughness ) {
            float mip = 0.0;
            if ( roughness &gt;= cubeUV_r1 ) {
                    mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
            } else if ( roughness &gt;= cubeUV_r4 ) {
                    mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
            } else if ( roughness &gt;= cubeUV_r5 ) {
                    mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
            } else if ( roughness &gt;= cubeUV_r6 ) {
                    mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
            } else {
                    mip = - 2.0 * log2( 1.16 * roughness );         }
            return mip;
    }
    vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
            float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
            float mipF = fract( mip );
            float mipInt = floor( mip );
            vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
            if ( mipF == 0.0 ) {
                    return vec4( color0, 1.0 );
            } else {
                    vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
                    return vec4( mix( color0, color1, mipF ), 1.0 );
            }
    }
#endif`,P4=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
    vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
    mat3 bm = mat3( batchingMatrix );
    transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
    transformedNormal = bm * transformedNormal;
    #ifdef USE_TANGENT
            transformedTangent = bm * transformedTangent;
    #endif
#endif
#ifdef USE_INSTANCING
    mat3 im = mat3( instanceMatrix );
    transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
    transformedNormal = im * transformedNormal;
    #ifdef USE_TANGENT
            transformedTangent = im * transformedTangent;
    #endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
    transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
    transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
    #ifdef FLIP_SIDED
            transformedTangent = - transformedTangent;
    #endif
#endif`,L4=`#ifdef USE_DISPLACEMENTMAP
    uniform sampler2D displacementMap;
    uniform float displacementScale;
    uniform float displacementBias;
#endif`,U4=`#ifdef USE_DISPLACEMENTMAP
    transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,k4=`#ifdef USE_EMISSIVEMAP
    vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
    #ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
            emissiveColor = sRGBTransferEOTF( emissiveColor );
    #endif
    totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,F4=`#ifdef USE_EMISSIVEMAP
    uniform sampler2D emissiveMap;
#endif`,z4=&quot;gl_FragColor = linearToOutputTexel( gl_FragColor );&quot;,B4=`vec4 LinearTransferOETF( in vec4 value ) {
    return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
    return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
    return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,H4=`#ifdef USE_ENVMAP
    #ifdef ENV_WORLDPOS
            vec3 cameraToFrag;
            if ( isOrthographic ) {
                    cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
            } else {
                    cameraToFrag = normalize( vWorldPosition - cameraPosition );
            }
            vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
            #ifdef ENVMAP_MODE_REFLECTION
                    vec3 reflectVec = reflect( cameraToFrag, worldNormal );
            #else
                    vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
            #endif
    #else
            vec3 reflectVec = vReflect;
    #endif
    #ifdef ENVMAP_TYPE_CUBE
            vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
    #else
            vec4 envColor = vec4( 0.0 );
    #endif
    #ifdef ENVMAP_BLENDING_MULTIPLY
            outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
    #elif defined( ENVMAP_BLENDING_MIX )
            outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
    #elif defined( ENVMAP_BLENDING_ADD )
            outgoingLight += envColor.xyz * specularStrength * reflectivity;
    #endif
#endif`,V4=`#ifdef USE_ENVMAP
    uniform float envMapIntensity;
    uniform float flipEnvMap;
    uniform mat3 envMapRotation;
    #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube envMap;
    #else
            uniform sampler2D envMap;
    #endif

#endif`,G4=`#ifdef USE_ENVMAP
    uniform float reflectivity;
    #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
            #define ENV_WORLDPOS
    #endif
    #ifdef ENV_WORLDPOS
            varying vec3 vWorldPosition;
            uniform float refractionRatio;
    #else
            varying vec3 vReflect;
    #endif
#endif`,j4=`#ifdef USE_ENVMAP
    #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
            #define ENV_WORLDPOS
    #endif
    #ifdef ENV_WORLDPOS

            varying vec3 vWorldPosition;
    #else
            varying vec3 vReflect;
            uniform float refractionRatio;
    #endif
#endif`,W4=`#ifdef USE_ENVMAP
    #ifdef ENV_WORLDPOS
            vWorldPosition = worldPosition.xyz;
    #else
            vec3 cameraToVertex;
            if ( isOrthographic ) {
                    cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
            } else {
                    cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
            }
            vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
            #ifdef ENVMAP_MODE_REFLECTION
                    vReflect = reflect( cameraToVertex, worldNormal );
            #else
                    vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
            #endif
    #endif
#endif`,X4=`#ifdef USE_FOG
    vFogDepth = - mvPosition.z;
#endif`,q4=`#ifdef USE_FOG
    varying float vFogDepth;
#endif`,Y4=`#ifdef USE_FOG
    #ifdef FOG_EXP2
            float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
    #else
            float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
    #endif
    gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,K4=`#ifdef USE_FOG
    uniform vec3 fogColor;
    varying float vFogDepth;
    #ifdef FOG_EXP2
            uniform float fogDensity;
    #else
            uniform float fogNear;
            uniform float fogFar;
    #endif
#endif`,$4=`#ifdef USE_GRADIENTMAP
    uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
    float dotNL = dot( normal, lightDirection );
    vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
    #ifdef USE_GRADIENTMAP
            return vec3( texture2D( gradientMap, coord ).r );
    #else
            vec2 fw = fwidth( coord ) * 0.5;
            return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
    #endif
}`,Z4=`#ifdef USE_LIGHTMAP
    uniform sampler2D lightMap;
    uniform float lightMapIntensity;
#endif`,J4=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Q4=`varying vec3 vViewPosition;
struct LambertMaterial {
    vec3 diffuseColor;
    float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
    float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
    vec3 irradiance = dotNL * directLight.color;
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct                           RE_Direct_Lambert
#define RE_IndirectDiffuse          RE_IndirectDiffuse_Lambert`,eH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
    uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
    float x = normal.x, y = normal.y, z = normal.z;
    vec3 result = shCoefficients[ 0 ] * 0.886227;
    result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
    result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
    result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
    result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
    result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
    result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
    result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
    result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
    return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
    vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
    vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
    return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
    vec3 irradiance = ambientLightColor;
    return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
    float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
    if ( cutoffDistance &gt; 0.0 ) {
            distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
    }
    return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
    return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS &gt; 0
    struct DirectionalLight {
            vec3 direction;
            vec3 color;
    };
    uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
    void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
            light.color = directionalLight.color;
            light.direction = directionalLight.direction;
            light.visible = true;
    }
#endif
#if NUM_POINT_LIGHTS &gt; 0
    struct PointLight {
            vec3 position;
            vec3 color;
            float distance;
            float decay;
    };
    uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
    void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
            vec3 lVector = pointLight.position - geometryPosition;
            light.direction = normalize( lVector );
            float lightDistance = length( lVector );
            light.color = pointLight.color;
            light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
            light.visible = ( light.color != vec3( 0.0 ) );
    }
#endif
#if NUM_SPOT_LIGHTS &gt; 0
    struct SpotLight {
            vec3 position;
            vec3 direction;
            vec3 color;
            float distance;
            float decay;
            float coneCos;
            float penumbraCos;
    };
    uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
    void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
            vec3 lVector = spotLight.position - geometryPosition;
            light.direction = normalize( lVector );
            float angleCos = dot( light.direction, spotLight.direction );
            float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
            if ( spotAttenuation &gt; 0.0 ) {
                    float lightDistance = length( lVector );
                    light.color = spotLight.color * spotAttenuation;
                    light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
                    light.visible = ( light.color != vec3( 0.0 ) );
            } else {
                    light.color = vec3( 0.0 );
                    light.visible = false;
            }
    }
#endif
#if NUM_RECT_AREA_LIGHTS &gt; 0
    struct RectAreaLight {
            vec3 color;
            vec3 position;
            vec3 halfWidth;
            vec3 halfHeight;
    };
    uniform sampler2D ltc_1;        uniform sampler2D ltc_2;
    uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS &gt; 0
    struct HemisphereLight {
            vec3 direction;
            vec3 skyColor;
            vec3 groundColor;
    };
    uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
    vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
            float dotNL = dot( normal, hemiLight.direction );
            float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
            vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
            return irradiance;
    }
#endif`,tH=`#ifdef USE_ENVMAP
    vec3 getIBLIrradiance( const in vec3 normal ) {
            #ifdef ENVMAP_TYPE_CUBE_UV
                    vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
                    vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
                    return PI * envMapColor.rgb * envMapIntensity;
            #else
                    return vec3( 0.0 );
            #endif
    }
    vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
            #ifdef ENVMAP_TYPE_CUBE_UV
                    vec3 reflectVec = reflect( - viewDir, normal );
                    reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
                    reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
                    vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
                    return envMapColor.rgb * envMapIntensity;
            #else
                    return vec3( 0.0 );
            #endif
    }
    #ifdef USE_ANISOTROPY
            vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
                    #ifdef ENVMAP_TYPE_CUBE_UV
                            vec3 bentNormal = cross( bitangent, viewDir );
                            bentNormal = normalize( cross( bentNormal, bitangent ) );
                            bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
                            return getIBLRadiance( viewDir, bentNormal, roughness );
                    #else
                            return vec3( 0.0 );
                    #endif
            }
    #endif
#endif`,nH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,iH=`varying vec3 vViewPosition;
struct ToonMaterial {
    vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
    vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct                           RE_Direct_Toon
#define RE_IndirectDiffuse          RE_IndirectDiffuse_Toon`,rH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
    vec3 diffuseColor;
    vec3 specularColor;
    float specularShininess;
    float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
    float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
    vec3 irradiance = dotNL * directLight.color;
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
    reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct                           RE_Direct_BlinnPhong
#define RE_IndirectDiffuse          RE_IndirectDiffuse_BlinnPhong`,oH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
    material.ior = ior;
    #ifdef USE_SPECULAR
            float specularIntensityFactor = specularIntensity;
            vec3 specularColorFactor = specularColor;
            #ifdef USE_SPECULAR_COLORMAP
                    specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
            #endif
            #ifdef USE_SPECULAR_INTENSITYMAP
                    specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
            #endif
            material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
    #else
            float specularIntensityFactor = 1.0;
            vec3 specularColorFactor = vec3( 1.0 );
            material.specularF90 = 1.0;
    #endif
    material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
    material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
    material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
    material.clearcoat = clearcoat;
    material.clearcoatRoughness = clearcoatRoughness;
    material.clearcoatF0 = vec3( 0.04 );
    material.clearcoatF90 = 1.0;
    #ifdef USE_CLEARCOATMAP
            material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
    #endif
    #ifdef USE_CLEARCOAT_ROUGHNESSMAP
            material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
    #endif
    material.clearcoat = saturate( material.clearcoat );    material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
    material.clearcoatRoughness += geometryRoughness;
    material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
    material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
    material.iridescence = iridescence;
    material.iridescenceIOR = iridescenceIOR;
    #ifdef USE_IRIDESCENCEMAP
            material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
    #endif
    #ifdef USE_IRIDESCENCE_THICKNESSMAP
            material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
    #else
            material.iridescenceThickness = iridescenceThicknessMaximum;
    #endif
#endif
#ifdef USE_SHEEN
    material.sheenColor = sheenColor;
    #ifdef USE_SHEEN_COLORMAP
            material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
    #endif
    material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
    #ifdef USE_SHEEN_ROUGHNESSMAP
            material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
    #endif
#endif
#ifdef USE_ANISOTROPY
    #ifdef USE_ANISOTROPYMAP
            mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
            vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
            vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
    #else
            vec2 anisotropyV = anisotropyVector;
    #endif
    material.anisotropy = length( anisotropyV );
    if( material.anisotropy == 0.0 ) {
            anisotropyV = vec2( 1.0, 0.0 );
    } else {
            anisotropyV /= material.anisotropy;
            material.anisotropy = saturate( material.anisotropy );
    }
    material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
    material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
    material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,aH=`struct PhysicalMaterial {
    vec3 diffuseColor;
    float roughness;
    vec3 specularColor;
    float specularF90;
    float dispersion;
    #ifdef USE_CLEARCOAT
            float clearcoat;
            float clearcoatRoughness;
            vec3 clearcoatF0;
            float clearcoatF90;
    #endif
    #ifdef USE_IRIDESCENCE
            float iridescence;
            float iridescenceIOR;
            float iridescenceThickness;
            vec3 iridescenceFresnel;
            vec3 iridescenceF0;
    #endif
    #ifdef USE_SHEEN
            vec3 sheenColor;
            float sheenRoughness;
    #endif
    #ifdef IOR
            float ior;
    #endif
    #ifdef USE_TRANSMISSION
            float transmission;
            float transmissionAlpha;
            float thickness;
            float attenuationDistance;
            vec3 attenuationColor;
    #endif
    #ifdef USE_ANISOTROPY
            float anisotropy;
            float alphaT;
            vec3 anisotropyT;
            vec3 anisotropyB;
    #endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
    float a2 = pow2( alpha );
    float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
    float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
    return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
    float a2 = pow2( alpha );
    float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
    return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
    float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
            float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
            float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
            float v = 0.5 / ( gv + gl );
            return saturate(v);
    }
    float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
            float a2 = alphaT * alphaB;
            highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
            highp float v2 = dot( v, v );
            float w2 = a2 / v2;
            return RECIPROCAL_PI * a2 * pow2 ( w2 );
    }
#endif
#ifdef USE_CLEARCOAT
    vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
            vec3 f0 = material.clearcoatF0;
            float f90 = material.clearcoatF90;
            float roughness = material.clearcoatRoughness;
            float alpha = pow2( roughness );
            vec3 halfDir = normalize( lightDir + viewDir );
            float dotNL = saturate( dot( normal, lightDir ) );
            float dotNV = saturate( dot( normal, viewDir ) );
            float dotNH = saturate( dot( normal, halfDir ) );
            float dotVH = saturate( dot( viewDir, halfDir ) );
            vec3 F = F_Schlick( f0, f90, dotVH );
            float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
            float D = D_GGX( alpha, dotNH );
            return F * ( V * D );
    }
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
    vec3 f0 = material.specularColor;
    float f90 = material.specularF90;
    float roughness = material.roughness;
    float alpha = pow2( roughness );
    vec3 halfDir = normalize( lightDir + viewDir );
    float dotNL = saturate( dot( normal, lightDir ) );
    float dotNV = saturate( dot( normal, viewDir ) );
    float dotNH = saturate( dot( normal, halfDir ) );
    float dotVH = saturate( dot( viewDir, halfDir ) );
    vec3 F = F_Schlick( f0, f90, dotVH );
    #ifdef USE_IRIDESCENCE
            F = mix( F, material.iridescenceFresnel, material.iridescence );
    #endif
    #ifdef USE_ANISOTROPY
            float dotTL = dot( material.anisotropyT, lightDir );
            float dotTV = dot( material.anisotropyT, viewDir );
            float dotTH = dot( material.anisotropyT, halfDir );
            float dotBL = dot( material.anisotropyB, lightDir );
            float dotBV = dot( material.anisotropyB, viewDir );
            float dotBH = dot( material.anisotropyB, halfDir );
            float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
            float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
    #else
            float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
            float D = D_GGX( alpha, dotNH );
    #endif
    return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
    const float LUT_SIZE = 64.0;
    const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
    const float LUT_BIAS = 0.5 / LUT_SIZE;
    float dotNV = saturate( dot( N, V ) );
    vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
    uv = uv * LUT_SCALE + LUT_BIAS;
    return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
    float l = length( f );
    return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
    float x = dot( v1, v2 );
    float y = abs( x );
    float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
    float b = 3.4175940 + ( 4.1616724 + y ) * y;
    float v = a / b;
    float theta_sintheta = ( x &gt; 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
    return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
    vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
    vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
    vec3 lightNormal = cross( v1, v2 );
    if( dot( lightNormal, P - rectCoords[ 0 ] ) &lt; 0.0 ) return vec3( 0.0 );
    vec3 T1, T2;
    T1 = normalize( V - N * dot( V, N ) );
    T2 = - cross( N, T1 );
    mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
    vec3 coords[ 4 ];
    coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
    coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
    coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
    coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
    coords[ 0 ] = normalize( coords[ 0 ] );
    coords[ 1 ] = normalize( coords[ 1 ] );
    coords[ 2 ] = normalize( coords[ 2 ] );
    coords[ 3 ] = normalize( coords[ 3 ] );
    vec3 vectorFormFactor = vec3( 0.0 );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
    float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
    return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
    float alpha = pow2( roughness );
    float invAlpha = 1.0 / alpha;
    float cos2h = dotNH * dotNH;
    float sin2h = max( 1.0 - cos2h, 0.0078125 );
    return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
    return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
    vec3 halfDir = normalize( lightDir + viewDir );
    float dotNL = saturate( dot( normal, lightDir ) );
    float dotNV = saturate( dot( normal, viewDir ) );
    float dotNH = saturate( dot( normal, halfDir ) );
    float D = D_Charlie( sheenRoughness, dotNH );
    float V = V_Neubelt( dotNV, dotNL );
    return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
    float dotNV = saturate( dot( normal, viewDir ) );
    float r2 = roughness * roughness;
    float a = roughness &lt; 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
    float b = roughness &lt; 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
    float DG = exp( a * dotNV + b ) + ( roughness &lt; 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
    return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
    float dotNV = saturate( dot( normal, viewDir ) );
    const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
    const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
    vec4 r = roughness * c0 + c1;
    float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
    vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
    return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
    vec2 fab = DFGApprox( normal, viewDir, roughness );
    return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
    vec2 fab = DFGApprox( normal, viewDir, roughness );
    #ifdef USE_IRIDESCENCE
            vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
    #else
            vec3 Fr = specularColor;
    #endif
    vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
    float Ess = fab.x + fab.y;
    float Ems = 1.0 - Ess;
    vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;       vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
    singleScatter += FssEss;
    multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS &gt; 0
    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
            vec3 normal = geometryNormal;
            vec3 viewDir = geometryViewDir;
            vec3 position = geometryPosition;
            vec3 lightPos = rectAreaLight.position;
            vec3 halfWidth = rectAreaLight.halfWidth;
            vec3 halfHeight = rectAreaLight.halfHeight;
            vec3 lightColor = rectAreaLight.color;
            float roughness = material.roughness;
            vec3 rectCoords[ 4 ];
            rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;            rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
            rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
            rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
            vec2 uv = LTC_Uv( normal, viewDir, roughness );
            vec4 t1 = texture2D( ltc_1, uv );
            vec4 t2 = texture2D( ltc_2, uv );
            mat3 mInv = mat3(
                    vec3( t1.x, 0, t1.y ),
                    vec3(    0, 1,    0 ),
                    vec3( t1.z, 0, t1.w )
            );
            vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
            reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
            reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
    }
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
    float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
    vec3 irradiance = dotNL * directLight.color;
    #ifdef USE_CLEARCOAT
            float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
            vec3 ccIrradiance = dotNLcc * directLight.color;
            clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
    #endif
    #ifdef USE_SHEEN
            sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
    #endif
    reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
    #ifdef USE_CLEARCOAT
            clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
    #endif
    #ifdef USE_SHEEN
            sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
    #endif
    vec3 singleScattering = vec3( 0.0 );
    vec3 multiScattering = vec3( 0.0 );
    vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
    #ifdef USE_IRIDESCENCE
            computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
    #else
            computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
    #endif
    vec3 totalScattering = singleScattering + multiScattering;
    vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
    reflectedLight.indirectSpecular += radiance * singleScattering;
    reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
    reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct                           RE_Direct_Physical
#define RE_Direct_RectArea          RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse          RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular         RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
    return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
    geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
    float dotNVi = saturate( dot( normal, geometryViewDir ) );
    if ( material.iridescenceThickness == 0.0 ) {
            material.iridescence = 0.0;
    } else {
            material.iridescence = saturate( material.iridescence );
    }
    if ( material.iridescence &gt; 0.0 ) {
            material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
            material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
    }
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) &amp;&amp; NUM_POINT_LIGHT_SHADOWS &gt; 0
    PointLightShadow pointLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_POINT_LIGHTS; i ++ ) {
            pointLight = pointLights[ i ];
            getPointLightInfo( pointLight, geometryPosition, directLight );
            #if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_POINT_LIGHT_SHADOWS )
            pointLightShadow = pointLightShadows[ i ];
            directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
            #endif
            RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
    SpotLight spotLight;
    vec4 spotColor;
    vec3 spotLightCoord;
    bool inSpotLightMap;
    #if defined( USE_SHADOWMAP ) &amp;&amp; NUM_SPOT_LIGHT_SHADOWS &gt; 0
    SpotLightShadow spotLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_SPOT_LIGHTS; i ++ ) {
            spotLight = spotLights[ i ];
            getSpotLightInfo( spotLight, geometryPosition, directLight );
            #if ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
            #define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
            #elif ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
            #define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
            #else
            #define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
            #endif
            #if ( SPOT_LIGHT_MAP_INDEX &lt; NUM_SPOT_LIGHT_MAPS )
                    spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
                    inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
                    spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
                    directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
            #endif
            #undef SPOT_LIGHT_MAP_INDEX
            #if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
            spotLightShadow = spotLightShadows[ i ];
            directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
            #endif
            RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) &amp;&amp; NUM_DIR_LIGHT_SHADOWS &gt; 0
    DirectionalLightShadow directionalLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_DIR_LIGHTS; i ++ ) {
            directionalLight = directionalLights[ i ];
            getDirectionalLightInfo( directionalLight, directLight );
            #if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_DIR_LIGHT_SHADOWS )
            directionalLightShadow = directionalLightShadows[ i ];
            directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
            #endif
            RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct_RectArea )
    RectAreaLight rectAreaLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_RECT_AREA_LIGHTS; i ++ ) {
            rectAreaLight = rectAreaLights[ i ];
            RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
    vec3 iblIrradiance = vec3( 0.0 );
    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
    #if defined( USE_LIGHT_PROBES )
            irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
    #endif
    #if ( NUM_HEMI_LIGHTS &gt; 0 )
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; NUM_HEMI_LIGHTS; i ++ ) {
                    irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
            }
            #pragma unroll_loop_end
    #endif
#endif
#if defined( RE_IndirectSpecular )
    vec3 radiance = vec3( 0.0 );
    vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,cH=`#if defined( RE_IndirectDiffuse )
    #ifdef USE_LIGHTMAP
            vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
            vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
            irradiance += lightMapIrradiance;
    #endif
    #if defined( USE_ENVMAP ) &amp;&amp; defined( STANDARD ) &amp;&amp; defined( ENVMAP_TYPE_CUBE_UV )
            iblIrradiance += getIBLIrradiance( geometryNormal );
    #endif
#endif
#if defined( USE_ENVMAP ) &amp;&amp; defined( RE_IndirectSpecular )
    #ifdef USE_ANISOTROPY
            radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
    #else
            radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
    #endif
    #ifdef USE_CLEARCOAT
            clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
    #endif
#endif`,uH=`#if defined( RE_IndirectDiffuse )
    RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
    RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,hH=`#if defined( USE_LOGDEPTHBUF )
    gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,fH=`#if defined( USE_LOGDEPTHBUF )
    uniform float logDepthBufFC;
    varying float vFragDepth;
    varying float vIsPerspective;
#endif`,dH=`#ifdef USE_LOGDEPTHBUF
    varying float vFragDepth;
    varying float vIsPerspective;
#endif`,pH=`#ifdef USE_LOGDEPTHBUF
    vFragDepth = 1.0 + gl_Position.w;
    vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,mH=`#ifdef USE_MAP
    vec4 sampledDiffuseColor = texture2D( map, vMapUv );
    #ifdef DECODE_VIDEO_TEXTURE
            sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
    #endif
    diffuseColor *= sampledDiffuseColor;
#endif`,gH=`#ifdef USE_MAP
    uniform sampler2D map;
#endif`,yH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
    #if defined( USE_POINTS_UV )
            vec2 uv = vUv;
    #else
            vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
    #endif
#endif
#ifdef USE_MAP
    diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
    diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_H=`#if defined( USE_POINTS_UV )
    varying vec2 vUv;
#else
    #if defined( USE_MAP ) || defined( USE_ALPHAMAP )
            uniform mat3 uvTransform;
    #endif
#endif
#ifdef USE_MAP
    uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
    uniform sampler2D alphaMap;
#endif`,vH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
    vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
    metalnessFactor *= texelMetalness.b;
#endif`,bH=`#ifdef USE_METALNESSMAP
    uniform sampler2D metalnessMap;
#endif`,xH=`#ifdef USE_INSTANCING_MORPH
    float morphTargetInfluences[ MORPHTARGETS_COUNT ];
    float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
    }
#endif`,SH=`#if defined( USE_MORPHCOLORS )
    vColor *= morphTargetBaseInfluence;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            #if defined( USE_COLOR_ALPHA )
                    if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
            #elif defined( USE_COLOR )
                    if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
            #endif
    }
#endif`,wH=`#ifdef USE_MORPHNORMALS
    objectNormal *= morphTargetBaseInfluence;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
    }
#endif`,EH=`#ifdef USE_MORPHTARGETS
    #ifndef USE_INSTANCING_MORPH
            uniform float morphTargetBaseInfluence;
            uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
    #endif
    uniform sampler2DArray morphTargetsTexture;
    uniform ivec2 morphTargetsTextureSize;
    vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
            int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
            int y = texelIndex / morphTargetsTextureSize.x;
            int x = texelIndex - y * morphTargetsTextureSize.x;
            ivec3 morphUV = ivec3( x, y, morphTargetIndex );
            return texelFetch( morphTargetsTexture, morphUV, 0 );
    }
#endif`,TH=`#ifdef USE_MORPHTARGETS
    transformed *= morphTargetBaseInfluence;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
    }
#endif`,MH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
    vec3 fdx = dFdx( vViewPosition );
    vec3 fdy = dFdy( vViewPosition );
    vec3 normal = normalize( cross( fdx, fdy ) );
#else
    vec3 normal = normalize( vNormal );
    #ifdef DOUBLE_SIDED
            normal *= faceDirection;
    #endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
    #ifdef USE_TANGENT
            mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
    #else
            mat3 tbn = getTangentFrame( - vViewPosition, normal,
            #if defined( USE_NORMALMAP )
                    vNormalMapUv
            #elif defined( USE_CLEARCOAT_NORMALMAP )
                    vClearcoatNormalMapUv
            #else
                    vUv
            #endif
            );
    #endif
    #if defined( DOUBLE_SIDED ) &amp;&amp; ! defined( FLAT_SHADED )
            tbn[0] *= faceDirection;
            tbn[1] *= faceDirection;
    #endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    #ifdef USE_TANGENT
            mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
    #else
            mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
    #endif
    #if defined( DOUBLE_SIDED ) &amp;&amp; ! defined( FLAT_SHADED )
            tbn2[0] *= faceDirection;
            tbn2[1] *= faceDirection;
    #endif
#endif
vec3 nonPerturbedNormal = normal;`,AH=`#ifdef USE_NORMALMAP_OBJECTSPACE
    normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
    #ifdef FLIP_SIDED
            normal = - normal;
    #endif
    #ifdef DOUBLE_SIDED
            normal = normal * faceDirection;
    #endif
    normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
    vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;
    normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
    normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,CH=`#ifndef FLAT_SHADED
    varying vec3 vNormal;
    #ifdef USE_TANGENT
            varying vec3 vTangent;
            varying vec3 vBitangent;
    #endif
#endif`,RH=`#ifndef FLAT_SHADED
    varying vec3 vNormal;
    #ifdef USE_TANGENT
            varying vec3 vTangent;
            varying vec3 vBitangent;
    #endif
#endif`,OH=`#ifndef FLAT_SHADED
    vNormal = normalize( transformedNormal );
    #ifdef USE_TANGENT
            vTangent = normalize( transformedTangent );
            vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
    #endif
#endif`,DH=`#ifdef USE_NORMALMAP
    uniform sampler2D normalMap;
    uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
    uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) &amp;&amp; ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
    mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
            vec3 q0 = dFdx( eye_pos.xyz );
            vec3 q1 = dFdy( eye_pos.xyz );
            vec2 st0 = dFdx( uv.st );
            vec2 st1 = dFdy( uv.st );
            vec3 N = surf_norm;
            vec3 q1perp = cross( q1, N );
            vec3 q0perp = cross( N, q0 );
            vec3 T = q1perp * st0.x + q0perp * st1.x;
            vec3 B = q1perp * st0.y + q0perp * st1.y;
            float det = max( dot( T, T ), dot( B, B ) );
            float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
            return mat3( T * scale, B * scale, N );
    }
#endif`,NH=`#ifdef USE_CLEARCOAT
    vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,IH=`#ifdef USE_CLEARCOAT_NORMALMAP
    vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
    clearcoatMapN.xy *= clearcoatNormalScale;
    clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,PH=`#ifdef USE_CLEARCOATMAP
    uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    uniform sampler2D clearcoatNormalMap;
    uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    uniform sampler2D clearcoatRoughnessMap;
#endif`,LH=`#ifdef USE_IRIDESCENCEMAP
    uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    uniform sampler2D iridescenceThicknessMap;
#endif`,UH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,kH=`vec3 packNormalToRGB( const in vec3 normal ) {
    return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
    return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
    if( v &lt;= 0.0 )
            return vec4( 0., 0., 0., 0. );
    if( v &gt;= 1.0 )
            return vec4( 1., 1., 1., 1. );
    float vuf;
    float af = modf( v * PackFactors.a, vuf );
    float bf = modf( vuf * ShiftRight8, vuf );
    float gf = modf( vuf * ShiftRight8, vuf );
    return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
    if( v &lt;= 0.0 )
            return vec3( 0., 0., 0. );
    if( v &gt;= 1.0 )
            return vec3( 1., 1., 1. );
    float vuf;
    float bf = modf( v * PackFactors.b, vuf );
    float gf = modf( vuf * ShiftRight8, vuf );
    return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
    if( v &lt;= 0.0 )
            return vec2( 0., 0. );
    if( v &gt;= 1.0 )
            return vec2( 1., 1. );
    float vuf;
    float gf = modf( v * 256., vuf );
    return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
    return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
    return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
    return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
    vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
    return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
    return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
    return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
    return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
    return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
    return ( near * far ) / ( ( far - near ) * depth - far );
}`,FH=`#ifdef PREMULTIPLIED_ALPHA
    gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
    mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
    mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,BH=`#ifdef DITHERING
    gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HH=`#ifdef DITHERING
    vec3 dithering( vec3 color ) {
            float grid_position = rand( gl_FragCoord.xy );
            vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
            dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
            return color + dither_shift_RGB;
    }
#endif`,VH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
    vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
    roughnessFactor *= texelRoughness.g;
#endif`,GH=`#ifdef USE_ROUGHNESSMAP
    uniform sampler2D roughnessMap;
#endif`,jH=`#if NUM_SPOT_LIGHT_COORDS &gt; 0
    varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS &gt; 0
    uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
            uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
            varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
            struct DirectionalLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
    #endif
    #if NUM_SPOT_LIGHT_SHADOWS &gt; 0
            uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
            struct SpotLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
            uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
            varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
            struct PointLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
                    float shadowCameraNear;
                    float shadowCameraFar;
            };
            uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
    #endif
    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
            return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
    }
    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
            return unpackRGBATo2Half( texture2D( shadow, uv ) );
    }
    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
            float occlusion = 1.0;
            vec2 distribution = texture2DDistribution( shadow, uv );
            float hard_shadow = step( compare , distribution.x );
            if (hard_shadow != 1.0 ) {
                    float distance = compare - distribution.x ;
                    float variance = max( 0.00000, distribution.y * distribution.y );
                    float softness_probability = variance / (variance + distance * distance );                      softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );                      occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
            }
            return occlusion;
    }
    float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
            float shadow = 1.0;
            shadowCoord.xyz /= shadowCoord.w;
            shadowCoord.z += shadowBias;
            bool inFrustum = shadowCoord.x &gt;= 0.0 &amp;&amp; shadowCoord.x &lt;= 1.0 &amp;&amp; shadowCoord.y &gt;= 0.0 &amp;&amp; shadowCoord.y &lt;= 1.0;
            bool frustumTest = inFrustum &amp;&amp; shadowCoord.z &lt;= 1.0;
            if ( frustumTest ) {
            #if defined( SHADOWMAP_TYPE_PCF )
                    vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
                    float dx0 = - texelSize.x * shadowRadius;
                    float dy0 = - texelSize.y * shadowRadius;
                    float dx1 = + texelSize.x * shadowRadius;
                    float dy1 = + texelSize.y * shadowRadius;
                    float dx2 = dx0 / 2.0;
                    float dy2 = dy0 / 2.0;
                    float dx3 = dx1 / 2.0;
                    float dy3 = dy1 / 2.0;
                    shadow = (
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
                    ) * ( 1.0 / 17.0 );
            #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
                    vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
                    float dx = texelSize.x;
                    float dy = texelSize.y;
                    vec2 uv = shadowCoord.xy;
                    vec2 f = fract( uv * shadowMapSize + 0.5 );
                    uv -= f * texelSize;
                    shadow = (
                            texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                            texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                                     f.x ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                                     f.x ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                                     f.y ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                                     f.y ) +
                            mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                                              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                                              f.x ),
                                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                                              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                                              f.x ),
                                     f.y )
                    ) * ( 1.0 / 9.0 );
            #elif defined( SHADOWMAP_TYPE_VSM )
                    shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
            #else
                    shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
            #endif
            }
            return mix( 1.0, shadow, shadowIntensity );
    }
    vec2 cubeToUV( vec3 v, float texelSizeY ) {
            vec3 absV = abs( v );
            float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
            absV *= scaleToCube;
            v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
            vec2 planar = v.xy;
            float almostATexel = 1.5 * texelSizeY;
            float almostOne = 1.0 - almostATexel;
            if ( absV.z &gt;= almostOne ) {
                    if ( v.z &gt; 0.0 )
                            planar.x = 4.0 - v.x;
            } else if ( absV.x &gt;= almostOne ) {
                    float signX = sign( v.x );
                    planar.x = v.z * signX + 2.0 * signX;
            } else if ( absV.y &gt;= almostOne ) {
                    float signY = sign( v.y );
                    planar.x = v.x + 2.0 * signY + 2.0;
                    planar.y = v.z * signY - 2.0;
            }
            return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
    }
    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
            float shadow = 1.0;
            vec3 lightToPosition = shadowCoord.xyz;

            float lightToPositionLength = length( lightToPosition );
            if ( lightToPositionLength - shadowCameraFar &lt;= 0.0 &amp;&amp; lightToPositionLength - shadowCameraNear &gt;= 0.0 ) {
                    float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );                       dp += shadowBias;
                    vec3 bd3D = normalize( lightToPosition );
                    vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
                    #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
                            vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
                            shadow = (
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
                            ) * ( 1.0 / 9.0 );
                    #else
                            shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
                    #endif
            }
            return mix( 1.0, shadow, shadowIntensity );
    }
#endif`,WH=`#if NUM_SPOT_LIGHT_COORDS &gt; 0
    uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
    varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
            uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
            varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
            struct DirectionalLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
    #endif
    #if NUM_SPOT_LIGHT_SHADOWS &gt; 0
            struct SpotLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
            uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
            varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
            struct PointLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
                    float shadowCameraNear;
                    float shadowCameraFar;
            };
            uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
    #endif
#endif`,XH=`#if ( defined( USE_SHADOWMAP ) &amp;&amp; ( NUM_DIR_LIGHT_SHADOWS &gt; 0 || NUM_POINT_LIGHT_SHADOWS &gt; 0 ) ) || ( NUM_SPOT_LIGHT_COORDS &gt; 0 )
    vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
    vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; NUM_DIR_LIGHT_SHADOWS; i ++ ) {
                    shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
                    vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
            }
            #pragma unroll_loop_end
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; NUM_POINT_LIGHT_SHADOWS; i ++ ) {
                    shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
                    vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
            }
            #pragma unroll_loop_end
    #endif
#endif
#if NUM_SPOT_LIGHT_COORDS &gt; 0
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_SPOT_LIGHT_COORDS; i ++ ) {
            shadowWorldPosition = worldPosition;
            #if ( defined( USE_SHADOWMAP ) &amp;&amp; UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
                    shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
            #endif
            vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
    }
    #pragma unroll_loop_end
#endif`,qH=`float getShadowMask() {
    float shadow = 1.0;
    #ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
    DirectionalLightShadow directionalLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_DIR_LIGHT_SHADOWS; i ++ ) {
            directionalLight = directionalLightShadows[ i ];
            shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
    }
    #pragma unroll_loop_end
    #endif
    #if NUM_SPOT_LIGHT_SHADOWS &gt; 0
    SpotLightShadow spotLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
            spotLight = spotLightShadows[ i ];
            shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
    }
    #pragma unroll_loop_end
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
    PointLightShadow pointLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_POINT_LIGHT_SHADOWS; i ++ ) {
            pointLight = pointLightShadows[ i ];
            shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
    }
    #pragma unroll_loop_end
    #endif
    #endif
    return shadow;
}`,YH=`#ifdef USE_SKINNING
    mat4 boneMatX = getBoneMatrix( skinIndex.x );
    mat4 boneMatY = getBoneMatrix( skinIndex.y );
    mat4 boneMatZ = getBoneMatrix( skinIndex.z );
    mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,KH=`#ifdef USE_SKINNING
    uniform mat4 bindMatrix;
    uniform mat4 bindMatrixInverse;
    uniform highp sampler2D boneTexture;
    mat4 getBoneMatrix( const in float i ) {
            int size = textureSize( boneTexture, 0 ).x;
            int j = int( i ) * 4;
            int x = j % size;
            int y = j / size;
            vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
            vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
            vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
            vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
            return mat4( v1, v2, v3, v4 );
    }
#endif`,$H=`#ifdef USE_SKINNING
    vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
    vec4 skinned = vec4( 0.0 );
    skinned += boneMatX * skinVertex * skinWeight.x;
    skinned += boneMatY * skinVertex * skinWeight.y;
    skinned += boneMatZ * skinVertex * skinWeight.z;
    skinned += boneMatW * skinVertex * skinWeight.w;
    transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ZH=`#ifdef USE_SKINNING
    mat4 skinMatrix = mat4( 0.0 );
    skinMatrix += skinWeight.x * boneMatX;
    skinMatrix += skinWeight.y * boneMatY;
    skinMatrix += skinWeight.z * boneMatZ;
    skinMatrix += skinWeight.w * boneMatW;
    skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
    objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
    #ifdef USE_TANGENT
            objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
    #endif
#endif`,JH=`float specularStrength;
#ifdef USE_SPECULARMAP
    vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
    specularStrength = texelSpecular.r;
#else
    specularStrength = 1.0;
#endif`,QH=`#ifdef USE_SPECULARMAP
    uniform sampler2D specularMap;
#endif`,eV=`#if defined( TONE_MAPPING )
    gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
    return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
    color *= toneMappingExposure;
    return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
    color *= toneMappingExposure;
    color = max( vec3( 0.0 ), color - 0.004 );
    return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
    vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
    vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
    return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
    const mat3 ACESInputMat = mat3(
            vec3( 0.59719, 0.07600, 0.02840 ),              vec3( 0.35458, 0.90834, 0.13383 ),
            vec3( 0.04823, 0.01566, 0.83777 )
    );
    const mat3 ACESOutputMat = mat3(
            vec3(  1.60475, -0.10208, -0.00327 ),           vec3( -0.53108,  1.10813, -0.07276 ),
            vec3( -0.07367, -0.00605,  1.07602 )
    );
    color *= toneMappingExposure / 0.6;
    color = ACESInputMat * color;
    color = RRTAndODTFit( color );
    color = ACESOutputMat * color;
    return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
    vec3( 1.6605, - 0.1246, - 0.0182 ),
    vec3( - 0.5876, 1.1329, - 0.1006 ),
    vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
    vec3( 0.6274, 0.0691, 0.0164 ),
    vec3( 0.3293, 0.9195, 0.0880 ),
    vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
    vec3 x2 = x * x;
    vec3 x4 = x2 * x2;
    return + 15.5 * x4 * x2
            - 40.14 * x4 * x
            + 31.96 * x4
            - 6.868 * x2 * x
            + 0.4298 * x2
            + 0.1191 * x
            - 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
    const mat3 AgXInsetMatrix = mat3(
            vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
            vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
            vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
    );
    const mat3 AgXOutsetMatrix = mat3(
            vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
            vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
            vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
    );
    const float AgxMinEv = - 12.47393;      const float AgxMaxEv = 4.026069;
    color *= toneMappingExposure;
    color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
    color = AgXInsetMatrix * color;
    color = max( color, 1e-10 );    color = log2( color );
    color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
    color = clamp( color, 0.0, 1.0 );
    color = agxDefaultContrastApprox( color );
    color = AgXOutsetMatrix * color;
    color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
    color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
    color = clamp( color, 0.0, 1.0 );
    return color;
}
vec3 NeutralToneMapping( vec3 color ) {
    const float StartCompression = 0.8 - 0.04;
    const float Desaturation = 0.15;
    color *= toneMappingExposure;
    float x = min( color.r, min( color.g, color.b ) );
    float offset = x &lt; 0.08 ? x - 6.25 * x * x : 0.04;
    color -= offset;
    float peak = max( color.r, max( color.g, color.b ) );
    if ( peak &lt; StartCompression ) return color;
    float d = 1. - StartCompression;
    float newPeak = 1. - d * d / ( peak + d - StartCompression );
    color *= newPeak / peak;
    float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
    return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,nV=`#ifdef USE_TRANSMISSION
    material.transmission = transmission;
    material.transmissionAlpha = 1.0;
    material.thickness = thickness;
    material.attenuationDistance = attenuationDistance;
    material.attenuationColor = attenuationColor;
    #ifdef USE_TRANSMISSIONMAP
            material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
    #endif
    #ifdef USE_THICKNESSMAP
            material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
    #endif
    vec3 pos = vWorldPosition;
    vec3 v = normalize( cameraPosition - pos );
    vec3 n = inverseTransformDirection( normal, viewMatrix );
    vec4 transmitted = getIBLVolumeRefraction(
            n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
            material.attenuationColor, material.attenuationDistance );
    material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
    totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,iV=`#ifdef USE_TRANSMISSION
    uniform float transmission;
    uniform float thickness;
    uniform float attenuationDistance;
    uniform vec3 attenuationColor;
    #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
    #endif
    #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
    #endif
    uniform vec2 transmissionSamplerSize;
    uniform sampler2D transmissionSamplerMap;
    uniform mat4 modelMatrix;
    uniform mat4 projectionMatrix;
    varying vec3 vWorldPosition;
    float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
    }
    float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
    }
    float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
    }
    float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
    }
    float g0( float a ) {
            return w0( a ) + w1( a );
    }
    float g1( float a ) {
            return w2( a ) + w3( a );
    }
    float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
    }
    float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
    }
    vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
                    g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
    }
    vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
    }
    vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            return normalize( refractionVector ) * thickness * modelScale;
    }
    float applyIorToRoughness( const in float roughness, const in float ior ) {
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
    }
    vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
            return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
    }
    vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
                    return vec3( 1.0 );
            } else {
                    vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
                    vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );                    return transmittance;
            }
    }
    vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec4 transmittedLight;
            vec3 transmittance;
            #ifdef USE_DISPERSION
                    float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
                    vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
                    for ( int i = 0; i &lt; 3; i ++ ) {
                            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
                            vec3 refractedRayExit = position + transmissionRay;
                            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
                            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
                            refractionCoords += 1.0;
                            refractionCoords /= 2.0;
                            vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
                            transmittedLight[ i ] = transmissionSample[ i ];
                            transmittedLight.a += transmissionSample.a;
                            transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
                    }
                    transmittedLight.a /= 3.0;
            #else
                    vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
                    vec3 refractedRayExit = position + transmissionRay;
                    vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
                    vec2 refractionCoords = ndcPos.xy / ndcPos.w;
                    refractionCoords += 1.0;
                    refractionCoords /= 2.0;
                    transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
                    transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
            #endif
            vec3 attenuatedColor = transmittance * transmittedLight.rgb;
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
            return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
    }
#endif`,rV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
    varying vec2 vUv;
#endif
#ifdef USE_MAP
    varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
    varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
    varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
    varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
    varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
    varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
    varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
    varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
    varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
    varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
    varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
    varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
    varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
    varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
    varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
    varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
    varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
    uniform mat3 transmissionMapTransform;
    varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
    uniform mat3 thicknessMapTransform;
    varying vec2 vThicknessMapUv;
#endif`,sV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
    varying vec2 vUv;
#endif
#ifdef USE_MAP
    uniform mat3 mapTransform;
    varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
    uniform mat3 alphaMapTransform;
    varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
    uniform mat3 lightMapTransform;
    varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
    uniform mat3 aoMapTransform;
    varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
    uniform mat3 bumpMapTransform;
    varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
    uniform mat3 normalMapTransform;
    varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
    uniform mat3 displacementMapTransform;
    varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
    uniform mat3 emissiveMapTransform;
    varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
    uniform mat3 metalnessMapTransform;
    varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
    uniform mat3 roughnessMapTransform;
    varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
    uniform mat3 anisotropyMapTransform;
    varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
    uniform mat3 clearcoatMapTransform;
    varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    uniform mat3 clearcoatNormalMapTransform;
    varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    uniform mat3 clearcoatRoughnessMapTransform;
    varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
    uniform mat3 sheenColorMapTransform;
    varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
    uniform mat3 sheenRoughnessMapTransform;
    varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
    uniform mat3 iridescenceMapTransform;
    varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    uniform mat3 iridescenceThicknessMapTransform;
    varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
    uniform mat3 specularMapTransform;
    varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
    uniform mat3 specularColorMapTransform;
    varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
    uniform mat3 specularIntensityMapTransform;
    varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
    uniform mat3 transmissionMapTransform;
    varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
    uniform mat3 thicknessMapTransform;
    varying vec2 vThicknessMapUv;
#endif`,oV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
    vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
    vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
    vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
    vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
    vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
    vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
    vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
    vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
    vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
    vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
    vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
    vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
    vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
    vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
    vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
    vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
    vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
    vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
    vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
    vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
    vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS &gt; 0
    vec4 worldPosition = vec4( transformed, 1.0 );
    #ifdef USE_BATCHING
            worldPosition = batchingMatrix * worldPosition;
    #endif
    #ifdef USE_INSTANCING
            worldPosition = instanceMatrix * worldPosition;
    #endif
    worldPosition = modelMatrix * worldPosition;
#endif`;const lV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
    vec4 texColor = texture2D( t2D, vUv );
    #ifdef DECODE_VIDEO_TEXTURE
            texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
    #endif
    texColor.rgb *= backgroundIntensity;
    gl_FragColor = texColor;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,uV=`varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vWorldDirection = transformDirection( position, modelMatrix );
    #include &lt;begin_vertex&gt;
    #include &lt;project_vertex&gt;
    gl_Position.z = gl_Position.w;
}`,hV=`#ifdef ENVMAP_TYPE_CUBE
    uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
    uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include &lt;cube_uv_reflection_fragment&gt;
void main() {
    #ifdef ENVMAP_TYPE_CUBE
            vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
    #elif defined( ENVMAP_TYPE_CUBE_UV )
            vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
    #else
            vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #endif
    texColor.rgb *= backgroundIntensity;
    gl_FragColor = texColor;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,fV=`varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vWorldDirection = transformDirection( position, modelMatrix );
    #include &lt;begin_vertex&gt;
    #include &lt;project_vertex&gt;
    gl_Position.z = gl_Position.w;
}`,dV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
    vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
    gl_FragColor = texColor;
    gl_FragColor.a *= opacity;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,pV=`#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
varying vec2 vHighPrecisionZW;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #ifdef USE_DISPLACEMENTMAP
            #include &lt;beginnormal_vertex&gt;
            #include &lt;morphnormal_vertex&gt;
            #include &lt;skinnormal_vertex&gt;
    #endif
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vHighPrecisionZW = gl_Position.zw;
}`,mV=`#if DEPTH_PACKING == 3200
    uniform float opacity;
#endif
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
varying vec2 vHighPrecisionZW;
void main() {
    vec4 diffuseColor = vec4( 1.0 );
    #include &lt;clipping_planes_fragment&gt;
    #if DEPTH_PACKING == 3200
            diffuseColor.a = opacity;
    #endif
    #include &lt;map_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
    #if DEPTH_PACKING == 3200
            gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
    #elif DEPTH_PACKING == 3201
            gl_FragColor = packDepthToRGBA( fragCoordZ );
    #elif DEPTH_PACKING == 3202
            gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
    #elif DEPTH_PACKING == 3203
            gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
    #endif
}`,gV=`#define DISTANCE
varying vec3 vWorldPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #ifdef USE_DISPLACEMENTMAP
            #include &lt;beginnormal_vertex&gt;
            #include &lt;morphnormal_vertex&gt;
            #include &lt;skinnormal_vertex&gt;
    #endif
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vWorldPosition = worldPosition.xyz;
}`,yV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main () {
    vec4 diffuseColor = vec4( 1.0 );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    float dist = length( vWorldPosition - referencePosition );
    dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
    dist = saturate( dist );
    gl_FragColor = packDepthToRGBA( dist );
}`,_V=`varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vWorldDirection = transformDirection( position, modelMatrix );
    #include &lt;begin_vertex&gt;
    #include &lt;project_vertex&gt;
}`,vV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vec3 direction = normalize( vWorldDirection );
    vec2 sampleUV = equirectUv( direction );
    gl_FragColor = texture2D( tEquirect, sampleUV );
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,bV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include &lt;common&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    vLineDistance = scale * lineDistance;
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,xV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include &lt;common&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    if ( mod( vLineDistance, totalSize ) &gt; dashSize ) {
            discard;
    }
    vec3 outgoingLight = vec3( 0.0 );
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    outgoingLight = diffuseColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
}`,SV=`#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;envmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
            #include &lt;beginnormal_vertex&gt;
            #include &lt;morphnormal_vertex&gt;
            #include &lt;skinbase_vertex&gt;
            #include &lt;skinnormal_vertex&gt;
            #include &lt;defaultnormal_vertex&gt;
    #endif
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;envmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,wV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
    varying vec3 vNormal;
#endif
#include &lt;common&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;specularmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;specularmap_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    #ifdef USE_LIGHTMAP
            vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
            reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
    #else
            reflectedLight.indirectDiffuse += vec3( 1.0 );
    #endif
    #include &lt;aomap_fragment&gt;
    reflectedLight.indirectDiffuse *= diffuseColor.rgb;
    vec3 outgoingLight = reflectedLight.indirectDiffuse;
    #include &lt;envmap_fragment&gt;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,EV=`#define LAMBERT
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;envmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;envmap_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,TV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_lambert_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;specularmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;specularmap_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_lambert_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
    #include &lt;envmap_fragment&gt;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,MV=`#define MATCAP
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;fog_vertex&gt;
    vViewPosition = - mvPosition.xyz;
}`,AV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    vec3 viewDir = normalize( vViewPosition );
    vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
    vec3 y = cross( viewDir, x );
    vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
    #ifdef USE_MATCAP
            vec4 matcapColor = texture2D( matcap, uv );
    #else
            vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
    #endif
    vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,CV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
    varying vec3 vViewPosition;
#endif
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
    vViewPosition = - mvPosition.xyz;
#endif
}`,RV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
    varying vec3 vViewPosition;
#endif
#include &lt;packing&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
    #ifdef OPAQUE
            gl_FragColor.a = 1.0;
    #endif
}`,OV=`#define PHONG
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;envmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;envmap_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,DV=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_phong_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;specularmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;specularmap_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_phong_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
    #include &lt;envmap_fragment&gt;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,NV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
    varying vec3 vWorldPosition;
#endif
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
#ifdef USE_TRANSMISSION
    vWorldPosition = worldPosition.xyz;
#endif
}`,IV=`#define STANDARD
#ifdef PHYSICAL
    #define IOR
    #define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
    uniform float ior;
#endif
#ifdef USE_SPECULAR
    uniform float specularIntensity;
    uniform vec3 specularColor;
    #ifdef USE_SPECULAR_COLORMAP
            uniform sampler2D specularColorMap;
    #endif
    #ifdef USE_SPECULAR_INTENSITYMAP
            uniform sampler2D specularIntensityMap;
    #endif
#endif
#ifdef USE_CLEARCOAT
    uniform float clearcoat;
    uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
    uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
    uniform float iridescence;
    uniform float iridescenceIOR;
    uniform float iridescenceThicknessMinimum;
    uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
    uniform vec3 sheenColor;
    uniform float sheenRoughness;
    #ifdef USE_SHEEN_COLORMAP
            uniform sampler2D sheenColorMap;
    #endif
    #ifdef USE_SHEEN_ROUGHNESSMAP
            uniform sampler2D sheenRoughnessMap;
    #endif
#endif
#ifdef USE_ANISOTROPY
    uniform vec2 anisotropyVector;
    #ifdef USE_ANISOTROPYMAP
            uniform sampler2D anisotropyMap;
    #endif
#endif
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;iridescence_fragment&gt;
#include &lt;cube_uv_reflection_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_physical_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_physical_pars_fragment&gt;
#include &lt;transmission_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;clearcoat_pars_fragment&gt;
#include &lt;iridescence_pars_fragment&gt;
#include &lt;roughnessmap_pars_fragment&gt;
#include &lt;metalnessmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;roughnessmap_fragment&gt;
    #include &lt;metalnessmap_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;clearcoat_normal_fragment_begin&gt;
    #include &lt;clearcoat_normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_physical_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
    vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
    #include &lt;transmission_fragment&gt;
    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
    #ifdef USE_SHEEN
            float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
            outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
    #endif
    #ifdef USE_CLEARCOAT
            float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
            vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
            outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
    #endif
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,PV=`#define TOON
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,LV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;gradientmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_toon_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_toon_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,UV=`uniform float size;
uniform float scale;
#include &lt;common&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
#ifdef USE_POINTS_UV
    varying vec2 vUv;
    uniform mat3 uvTransform;
#endif
void main() {
    #ifdef USE_POINTS_UV
            vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    #endif
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;project_vertex&gt;
    gl_PointSize = size;
    #ifdef USE_SIZEATTENUATION
            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
    #endif
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,kV=`uniform vec3 diffuse;
uniform float opacity;
#include &lt;common&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;map_particle_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    vec3 outgoingLight = vec3( 0.0 );
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_particle_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    outgoingLight = diffuseColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
}`,FV=`#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
void main() {
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,zV=`uniform vec3 color;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;shadowmask_pars_fragment&gt;
void main() {
    #include &lt;logdepthbuf_fragment&gt;
    gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
}`,BV=`uniform float rotation;
uniform vec2 center;
#include &lt;common&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    vec4 mvPosition = modelViewMatrix[ 3 ];
    vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
    #ifndef USE_SIZEATTENUATION
            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;
    #endif
    vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
    vec2 rotatedPosition;
    rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
    rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
    mvPosition.xy += rotatedPosition;
    gl_Position = projectionMatrix * mvPosition;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,HV=`uniform vec3 diffuse;
uniform float opacity;
#include &lt;common&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    vec3 outgoingLight = vec3( 0.0 );
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    outgoingLight = diffuseColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
}`,Kt={alphahash_fragment:c4,alphahash_pars_fragment:u4,alphamap_fragment:h4,alphamap_pars_fragment:f4,alphatest_fragment:d4,alphatest_pars_fragment:p4,aomap_fragment:m4,aomap_pars_fragment:g4,batching_pars_vertex:y4,batching_vertex:_4,begin_vertex:v4,beginnormal_vertex:b4,bsdfs:x4,iridescence_fragment:S4,bumpmap_pars_fragment:w4,clipping_planes_fragment:E4,clipping_planes_pars_fragment:T4,clipping_planes_pars_vertex:M4,clipping_planes_vertex:A4,color_fragment:C4,color_pars_fragment:R4,color_pars_vertex:O4,color_vertex:D4,common:N4,cube_uv_reflection_fragment:I4,defaultnormal_vertex:P4,displacementmap_pars_vertex:L4,displacementmap_vertex:U4,emissivemap_fragment:k4,emissivemap_pars_fragment:F4,colorspace_fragment:z4,colorspace_pars_fragment:B4,envmap_fragment:H4,envmap_common_pars_fragment:V4,envmap_pars_fragment:G4,envmap_pars_vertex:j4,envmap_physical_pars_fragment:tH,envmap_vertex:W4,fog_vertex:X4,fog_pars_vertex:q4,fog_fragment:Y4,fog_pars_fragment:K4,gradientmap_pars_fragment:$4,lightmap_pars_fragment:Z4,lights_lambert_fragment:J4,lights_lambert_pars_fragment:Q4,lights_pars_begin:eH,lights_toon_fragment:nH,lights_toon_pars_fragment:iH,lights_phong_fragment:rH,lights_phong_pars_fragment:sH,lights_physical_fragment:oH,lights_physical_pars_fragment:aH,lights_fragment_begin:lH,lights_fragment_maps:cH,lights_fragment_end:uH,logdepthbuf_fragment:hH,logdepthbuf_pars_fragment:fH,logdepthbuf_pars_vertex:dH,logdepthbuf_vertex:pH,map_fragment:mH,map_pars_fragment:gH,map_particle_fragment:yH,map_particle_pars_fragment:_H,metalnessmap_fragment:vH,metalnessmap_pars_fragment:bH,morphinstance_vertex:xH,morphcolor_vertex:SH,morphnormal_vertex:wH,morphtarget_pars_vertex:EH,morphtarget_vertex:TH,normal_fragment_begin:MH,normal_fragment_maps:AH,normal_pars_fragment:CH,normal_pars_vertex:RH,normal_vertex:OH,normalmap_pars_fragment:DH,clearcoat_normal_fragment_begin:NH,clearcoat_normal_fragment_maps:IH,clearcoat_pars_fragment:PH,iridescence_pars_fragment:LH,opaque_fragment:UH,packing:kH,premultiplied_alpha_fragment:FH,project_vertex:zH,dithering_fragment:BH,dithering_pars_fragment:HH,roughnessmap_fragment:VH,roughnessmap_pars_fragment:GH,shadowmap_pars_fragment:jH,shadowmap_pars_vertex:WH,shadowmap_vertex:XH,shadowmask_pars_fragment:qH,skinbase_vertex:YH,skinning_pars_vertex:KH,skinning_vertex:$H,skinnormal_vertex:ZH,specularmap_fragment:JH,specularmap_pars_fragment:QH,tonemapping_fragment:eV,tonemapping_pars_fragment:tV,transmission_fragment:nV,transmission_pars_fragment:iV,uv_pars_fragment:rV,uv_pars_vertex:sV,uv_vertex:oV,worldpos_vertex:aV,background_vert:lV,background_frag:cV,backgroundCube_vert:uV,backgroundCube_frag:hV,cube_vert:fV,cube_frag:dV,depth_vert:pV,depth_frag:mV,distanceRGBA_vert:gV,distanceRGBA_frag:yV,equirect_vert:_V,equirect_frag:vV,linedashed_vert:bV,linedashed_frag:xV,meshbasic_vert:SV,meshbasic_frag:wV,meshlambert_vert:EV,meshlambert_frag:TV,meshmatcap_vert:MV,meshmatcap_frag:AV,meshnormal_vert:CV,meshnormal_frag:RV,meshphong_vert:OV,meshphong_frag:DV,meshphysical_vert:NV,meshphysical_frag:IV,meshtoon_vert:PV,meshtoon_frag:LV,points_vert:UV,points_frag:kV,shadow_vert:FV,shadow_frag:zV,sprite_vert:BV,sprite_frag:HV},it={common:{diffuse:{value:new $e(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jt},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jt}},envmap:{envMap:{value:null},envMapRotation:{value:new jt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jt},normalScale:{value:new Oe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0},uvTransform:{value:new jt}},sprite:{diffuse:{value:new $e(16777215)},opacity:{value:1},center:{value:new Oe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jt},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0}}},Ws={basic:{uniforms:gr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:Kt.meshbasic_vert,fragmentShader:Kt.meshbasic_frag},lambert:{uniforms:gr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new $e(0)}}]),vertexShader:Kt.meshlambert_vert,fragmentShader:Kt.meshlambert_frag},phong:{uniforms:gr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new $e(0)},specular:{value:new $e(1118481)},shininess:{value:30}}]),vertexShader:Kt.meshphong_vert,fragmentShader:Kt.meshphong_frag},standard:{uniforms:gr([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new $e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Kt.meshphysical_vert,fragmentShader:Kt.meshphysical_frag},toon:{uniforms:gr([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new $e(0)}}]),vertexShader:Kt.meshtoon_vert,fragmentShader:Kt.meshtoon_frag},matcap:{uniforms:gr([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:Kt.meshmatcap_vert,fragmentShader:Kt.meshmatcap_frag},points:{uniforms:gr([it.points,it.fog]),vertexShader:Kt.points_vert,fragmentShader:Kt.points_frag},dashed:{uniforms:gr([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Kt.linedashed_vert,fragmentShader:Kt.linedashed_frag},depth:{uniforms:gr([it.common,it.displacementmap]),vertexShader:Kt.depth_vert,fragmentShader:Kt.depth_frag},normal:{uniforms:gr([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:Kt.meshnormal_vert,fragmentShader:Kt.meshnormal_frag},sprite:{uniforms:gr([it.sprite,it.fog]),vertexShader:Kt.sprite_vert,fragmentShader:Kt.sprite_frag},background:{uniforms:{uvTransform:{value:new jt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Kt.background_vert,fragmentShader:Kt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new jt}},vertexShader:Kt.backgroundCube_vert,fragmentShader:Kt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Kt.cube_vert,fragmentShader:Kt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Kt.equirect_vert,fragmentShader:Kt.equirect_frag},distanceRGBA:{uniforms:gr([it.common,it.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Kt.distanceRGBA_vert,fragmentShader:Kt.distanceRGBA_frag},shadow:{uniforms:gr([it.lights,it.fog,{color:{value:new $e(0)},opacity:{value:1}}]),vertexShader:Kt.shadow_vert,fragmentShader:Kt.shadow_frag}};Ws.physical={uniforms:gr([Ws.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jt},clearcoatNormalScale:{value:new Oe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jt},sheen:{value:0},sheenColor:{value:new $e(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jt},transmissionSamplerSize:{value:new Oe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jt},attenuationDistance:{value:0},attenuationColor:{value:new $e(0)},specularColor:{value:new $e(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jt},anisotropyVector:{value:new Oe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jt}}]),vertexShader:Kt.meshphysical_vert,fragmentShader:Kt.meshphysical_frag};const Xm={r:0,b:0,g:0},Jl=new Sr,VV=new yt;function GV(n,e,t,i,r,s,o){const l=new $e(0);let u=s===!0?0:1,h,f,p=null,m=0,g=null;function v(w){let E=w.isScene===!0?w.background:null;return E&amp;&amp;E.isTexture&amp;&amp;(E=(w.backgroundBlurriness&gt;0?t:e).get(E)),E}function x(w){let E=!1;const R=v(w);R===null?_(l,u):R&amp;&amp;R.isColor&amp;&amp;(_(R,1),E=!0);const N=n.xr.getEnvironmentBlendMode();N===&quot;additive&quot;?i.buffers.color.setClear(0,0,0,1,o):N===&quot;alpha-blend&quot;&amp;&amp;i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&amp;&amp;(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(w,E){const R=v(E);R&amp;&amp;(R.isCubeTexture||R.mapping===Sh)?(f===void 0&amp;&amp;(f=new Sn(new xl(1,1,1),new Ts({name:&quot;BackgroundCubeMaterial&quot;,uniforms:hh(Ws.backgroundCube.uniforms),vertexShader:Ws.backgroundCube.vertexShader,fragmentShader:Ws.backgroundCube.fragmentShader,side:xr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute(&quot;normal&quot;),f.geometry.deleteAttribute(&quot;uv&quot;),f.onBeforeRender=function(N,A,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(f.material,&quot;envMap&quot;,{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Jl.copy(E.backgroundRotation),Jl.x*=-1,Jl.y*=-1,Jl.z*=-1,R.isCubeTexture&amp;&amp;R.isRenderTargetTexture===!1&amp;&amp;(Jl.y*=-1,Jl.z*=-1),f.material.uniforms.envMap.value=R,f.material.uniforms.flipEnvMap.value=R.isCubeTexture&amp;&amp;R.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(VV.makeRotationFromEuler(Jl)),f.material.toneMapped=Zt.getTransfer(R.colorSpace)!==On,(p!==R||m!==R.version||g!==n.toneMapping)&amp;&amp;(f.material.needsUpdate=!0,p=R,m=R.version,g=n.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null)):R&amp;&amp;R.isTexture&amp;&amp;(h===void 0&amp;&amp;(h=new Sn(new Ah(2,2),new Ts({name:&quot;BackgroundMaterial&quot;,uniforms:hh(Ws.background.uniforms),vertexShader:Ws.background.vertexShader,fragmentShader:Ws.background.fragmentShader,side:Qr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute(&quot;normal&quot;),Object.defineProperty(h.material,&quot;map&quot;,{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=R,h.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,h.material.toneMapped=Zt.getTransfer(R.colorSpace)!==On,R.matrixAutoUpdate===!0&amp;&amp;R.updateMatrix(),h.material.uniforms.uvTransform.value.copy(R.matrix),(p!==R||m!==R.version||g!==n.toneMapping)&amp;&amp;(h.material.needsUpdate=!0,p=R,m=R.version,g=n.toneMapping),h.layers.enableAll(),w.unshift(h,h.geometry,h.material,0,0,null))}function _(w,E){w.getRGB(Xm,XD(n)),i.buffers.color.setClear(Xm.r,Xm.g,Xm.b,E,o)}function T(){f!==void 0&amp;&amp;(f.geometry.dispose(),f.material.dispose(),f=void 0),h!==void 0&amp;&amp;(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return l},setClearColor:function(w,E=1){l.set(w),u=E,_(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(w){u=w,_(l,u)},render:x,addToRenderList:b,dispose:T}}function jV(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let s=r,o=!1;function l(O,L,V,Z,z){let K=!1;const I=p(Z,V,L);s!==I&amp;&amp;(s=I,h(s.object)),K=g(O,Z,V,z),K&amp;&amp;v(O,Z,V,z),z!==null&amp;&amp;e.update(z,n.ELEMENT_ARRAY_BUFFER),(K||o)&amp;&amp;(o=!1,E(O,L,V,Z),z!==null&amp;&amp;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(z).buffer))}function u(){return n.createVertexArray()}function h(O){return n.bindVertexArray(O)}function f(O){return n.deleteVertexArray(O)}function p(O,L,V){const Z=V.wireframe===!0;let z=i[O.id];z===void 0&amp;&amp;(z={},i[O.id]=z);let K=z[L.id];K===void 0&amp;&amp;(K={},z[L.id]=K);let I=K[Z];return I===void 0&amp;&amp;(I=m(u()),K[Z]=I),I}function m(O){const L=[],V=[],Z=[];for(let z=0;z&lt;t;z++)L[z]=0,V[z]=0,Z[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:V,attributeDivisors:Z,object:O,attributes:{},index:null}}function g(O,L,V,Z){const z=s.attributes,K=L.attributes;let I=0;const j=V.getAttributes();for(const G in j)if(j[G].location&gt;=0){const F=z[G];let ne=K[G];if(ne===void 0&amp;&amp;(G===&quot;instanceMatrix&quot;&amp;&amp;O.instanceMatrix&amp;&amp;(ne=O.instanceMatrix),G===&quot;instanceColor&quot;&amp;&amp;O.instanceColor&amp;&amp;(ne=O.instanceColor)),F===void 0||F.attribute!==ne||ne&amp;&amp;F.data!==ne.data)return!0;I++}return s.attributesNum!==I||s.index!==Z}function v(O,L,V,Z){const z={},K=L.attributes;let I=0;const j=V.getAttributes();for(const G in j)if(j[G].location&gt;=0){let F=K[G];F===void 0&amp;&amp;(G===&quot;instanceMatrix&quot;&amp;&amp;O.instanceMatrix&amp;&amp;(F=O.instanceMatrix),G===&quot;instanceColor&quot;&amp;&amp;O.instanceColor&amp;&amp;(F=O.instanceColor));const ne={};ne.attribute=F,F&amp;&amp;F.data&amp;&amp;(ne.data=F.data),z[G]=ne,I++}s.attributes=z,s.attributesNum=I,s.index=Z}function x(){const O=s.newAttributes;for(let L=0,V=O.length;L&lt;V;L++)O[L]=0}function b(O){_(O,0)}function _(O,L){const V=s.newAttributes,Z=s.enabledAttributes,z=s.attributeDivisors;V[O]=1,Z[O]===0&amp;&amp;(n.enableVertexAttribArray(O),Z[O]=1),z[O]!==L&amp;&amp;(n.vertexAttribDivisor(O,L),z[O]=L)}function T(){const O=s.newAttributes,L=s.enabledAttributes;for(let V=0,Z=L.length;V&lt;Z;V++)L[V]!==O[V]&amp;&amp;(n.disableVertexAttribArray(V),L[V]=0)}function w(O,L,V,Z,z,K,I){I===!0?n.vertexAttribIPointer(O,L,V,z,K):n.vertexAttribPointer(O,L,V,Z,z,K)}function E(O,L,V,Z){x();const z=Z.attributes,K=V.getAttributes(),I=L.defaultAttributeValues;for(const j in K){const G=K[j];if(G.location&gt;=0){let ee=z[j];if(ee===void 0&amp;&amp;(j===&quot;instanceMatrix&quot;&amp;&amp;O.instanceMatrix&amp;&amp;(ee=O.instanceMatrix),j===&quot;instanceColor&quot;&amp;&amp;O.instanceColor&amp;&amp;(ee=O.instanceColor)),ee!==void 0){const F=ee.normalized,ne=ee.itemSize,le=e.get(ee);if(le===void 0)continue;const ce=le.buffer,ie=le.type,oe=le.bytesPerElement,ae=ie===n.INT||ie===n.UNSIGNED_INT||ee.gpuType===ny;if(ee.isInterleavedBufferAttribute){const ue=ee.data,ve=ue.stride,He=ee.offset;if(ue.isInstancedInterleavedBuffer){for(let Xe=0;Xe&lt;G.locationSize;Xe++)_(G.location+Xe,ue.meshPerAttribute);O.isInstancedMesh!==!0&amp;&amp;Z._maxInstanceCount===void 0&amp;&amp;(Z._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let Xe=0;Xe&lt;G.locationSize;Xe++)b(G.location+Xe);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let Xe=0;Xe&lt;G.locationSize;Xe++)w(G.location+Xe,ne/G.locationSize,ie,F,ve*oe,(He+ne/G.locationSize*Xe)*oe,ae)}else{if(ee.isInstancedBufferAttribute){for(let ue=0;ue&lt;G.locationSize;ue++)_(G.location+ue,ee.meshPerAttribute);O.isInstancedMesh!==!0&amp;&amp;Z._maxInstanceCount===void 0&amp;&amp;(Z._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let ue=0;ue&lt;G.locationSize;ue++)b(G.location+ue);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let ue=0;ue&lt;G.locationSize;ue++)w(G.location+ue,ne/G.locationSize,ie,F,ne*oe,ne/G.locationSize*ue*oe,ae)}}else if(I!==void 0){const F=I[j];if(F!==void 0)switch(F.length){case 2:n.vertexAttrib2fv(G.location,F);break;case 3:n.vertexAttrib3fv(G.location,F);break;case 4:n.vertexAttrib4fv(G.location,F);break;default:n.vertexAttrib1fv(G.location,F)}}}}T()}function R(){D();for(const O in i){const L=i[O];for(const V in L){const Z=L[V];for(const z in Z)f(Z[z].object),delete Z[z];delete L[V]}delete i[O]}}function N(O){if(i[O.id]===void 0)return;const L=i[O.id];for(const V in L){const Z=L[V];for(const z in Z)f(Z[z].object),delete Z[z];delete L[V]}delete i[O.id]}function A(O){for(const L in i){const V=i[L];if(V[O.id]===void 0)continue;const Z=V[O.id];for(const z in Z)f(Z[z].object),delete Z[z];delete V[O.id]}}function D(){C(),o=!0,s!==r&amp;&amp;(s=r,h(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:D,resetDefaultState:C,dispose:R,releaseStatesOfGeometry:N,releaseStatesOfProgram:A,initAttributes:x,enableAttribute:b,disableUnusedAttributes:T}}function WV(n,e,t){let i;function r(h){i=h}function s(h,f){n.drawArrays(i,h,f),t.update(f,i,1)}function o(h,f,p){p!==0&amp;&amp;(n.drawArraysInstanced(i,h,f,p),t.update(f,i,p))}function l(h,f,p){if(p===0)return;e.get(&quot;WEBGL_multi_draw&quot;).multiDrawArraysWEBGL(i,h,0,f,0,p);let g=0;for(let v=0;v&lt;p;v++)g+=f[v];t.update(g,i,1)}function u(h,f,p,m){if(p===0)return;const g=e.get(&quot;WEBGL_multi_draw&quot;);if(g===null)for(let v=0;v&lt;h.length;v++)o(h[v],f[v],m[v]);else{g.multiDrawArraysInstancedWEBGL(i,h,0,f,0,m,0,p);let v=0;for(let x=0;x&lt;p;x++)v+=f[x]*m[x];t.update(v,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function XV(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has(&quot;EXT_texture_filter_anisotropic&quot;)===!0){const A=e.get(&quot;EXT_texture_filter_anisotropic&quot;);r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(A){return!(A!==vr&amp;&amp;i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(A){const D=A===wh&amp;&amp;(e.has(&quot;EXT_color_buffer_half_float&quot;)||e.has(&quot;EXT_color_buffer_float&quot;));return!(A!==es&amp;&amp;i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&amp;&amp;A!==Pr&amp;&amp;!D)}function u(A){if(A===&quot;highp&quot;){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision&gt;0&amp;&amp;n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision&gt;0)return&quot;highp&quot;;A=&quot;mediump&quot;}return A===&quot;mediump&quot;&amp;&amp;n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision&gt;0&amp;&amp;n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision&gt;0?&quot;mediump&quot;:&quot;lowp&quot;}let h=t.precision!==void 0?t.precision:&quot;highp&quot;;const f=u(h);f!==h&amp;&amp;(console.warn(&quot;THREE.WebGLRenderer:&quot;,h,&quot;not supported, using&quot;,f,&quot;instead.&quot;),h=f);const p=t.logarithmicDepthBuffer===!0,m=t.reverseDepthBuffer===!0&amp;&amp;e.has(&quot;EXT_clip_control&quot;),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),R=v&gt;0,N=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:p,reverseDepthBuffer:m,maxTextures:g,maxVertexTextures:v,maxTextureSize:x,maxCubemapSize:b,maxAttributes:_,maxVertexUniforms:T,maxVaryings:w,maxFragmentUniforms:E,vertexTextures:R,maxSamples:N}}function qV(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Qo,l=new jt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const g=p.length!==0||m||i!==0||r;return r=m,i=p.length,g},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=f(p,m,0)},this.setState=function(p,m,g){const v=p.clippingPlanes,x=p.clipIntersection,b=p.clipShadows,_=n.get(p);if(!r||v===null||v.length===0||s&amp;&amp;!b)s?f(null):h();else{const T=s?0:i,w=T*4;let E=_.clippingState||null;u.value=E,E=f(v,m,w,g);for(let R=0;R!==w;++R)E[R]=t[R];_.clippingState=E,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=T}};function h(){u.value!==t&amp;&amp;(u.value=t,u.needsUpdate=i&gt;0),e.numPlanes=i,e.numIntersection=0}function f(p,m,g,v){const x=p!==null?p.length:0;let b=null;if(x!==0){if(b=u.value,v!==!0||b===null){const _=g+x*4,T=m.matrixWorldInverse;l.getNormalMatrix(T),(b===null||b.length&lt;_)&amp;&amp;(b=new Float32Array(_));for(let w=0,E=g;w!==x;++w,E+=4)o.copy(p[w]).applyMatrix4(T,l),o.normal.toArray(b,E),b[E+3]=o.constant}u.value=b,u.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,b}}function YV(n){let e=new WeakMap;function t(o,l){return l===gd?o.mapping=fa:l===yd&amp;&amp;(o.mapping=fl),o}function i(o){if(o&amp;&amp;o.isTexture){const l=o.mapping;if(l===gd||l===yd)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&amp;&amp;u.height&gt;0){const h=new KD(u.height);return h.fromEquirectangularTexture(n,o),e.set(o,h),o.addEventListener(&quot;dispose&quot;,r),t(h.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener(&quot;dispose&quot;,r);const u=e.get(l);u!==void 0&amp;&amp;(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Ku=4,eC=[.125,.215,.35,.446,.526,.582],ac=20,Wb=new Fc,tC=new $e;let Xb=null,qb=0,Yb=0,Kb=!1;const rc=(1+Math.sqrt(5))/2,Pu=1/rc,nC=[new Y(-rc,Pu,0),new Y(rc,Pu,0),new Y(-Pu,0,rc),new Y(Pu,0,rc),new Y(0,rc,-Pu),new Y(0,rc,Pu),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)],KV=new Y;class fS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:l=KV}=s;Xb=this._renderer.getRenderTarget(),qb=this._renderer.getActiveCubeFace(),Yb=this._renderer.getActiveMipmapLevel(),Kb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,i,r,u,l),t&gt;0&amp;&amp;this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&amp;&amp;(this._cubemapMaterial=sC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&amp;&amp;(this._equirectMaterial=rC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&amp;&amp;this._cubemapMaterial.dispose(),this._equirectMaterial!==null&amp;&amp;this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&amp;&amp;this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&amp;&amp;this._pingPongRenderTarget.dispose();for(let e=0;e&lt;this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Xb,qb,Yb),this._renderer.xr.enabled=Kb,e.scissorTest=!1,qm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===fa||e.mapping===fl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Xb=this._renderer.getRenderTarget(),qb=this._renderer.getActiveCubeFace(),Yb=this._renderer.getActiveMipmapLevel(),Kb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:fi,minFilter:fi,generateMipmaps:!1,type:wh,format:vr,colorSpace:fr,depthBuffer:!1},r=iC(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&amp;&amp;this._dispose(),this._pingPongRenderTarget=iC(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$V(s)),this._blurMaterial=ZV(s,e,t)}return r}_compileMaterial(e){const t=new Sn(this._lodPlanes[0],e);this._renderer.compile(t,Wb)}_sceneToCubeUV(e,t,i,r,s){const u=new Yn(90,1,t,i),h=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,g=p.toneMapping;p.getClearColor(tC),p.toneMapping=ca,p.autoClear=!1;const v=new $i({name:&quot;PMREM.Background&quot;,side:xr,depthWrite:!1,depthTest:!1}),x=new Sn(new xl,v);let b=!1;const _=e.background;_?_.isColor&amp;&amp;(v.color.copy(_),e.background=null,b=!0):(v.color.copy(tC),b=!0);for(let T=0;T&lt;6;T++){const w=T%3;w===0?(u.up.set(0,h[T],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+f[T],s.y,s.z)):w===1?(u.up.set(0,0,h[T]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+f[T],s.z)):(u.up.set(0,h[T],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+f[T]));const E=this._cubeSize;qm(r,w*E,T&gt;2?E:0,E,E),p.setRenderTarget(r),b&amp;&amp;p.render(x,u),p.render(e,u)}x.geometry.dispose(),x.material.dispose(),p.toneMapping=g,p.autoClear=m,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===fa||e.mapping===fl;r?(this._cubemapMaterial===null&amp;&amp;(this._cubemapMaterial=sC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&amp;&amp;(this._equirectMaterial=rC());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Sn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;qm(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(o,Wb)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s&lt;r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=nC[(r-s-1)%nC.length];this._blur(e,s-1,s,o,l)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,&quot;latitudinal&quot;,s),this._halfBlur(o,e,i,i,r,&quot;longitudinal&quot;,s)}_halfBlur(e,t,i,r,s,o,l){const u=this._renderer,h=this._blurMaterial;o!==&quot;latitudinal&quot;&amp;&amp;o!==&quot;longitudinal&quot;&amp;&amp;console.error(&quot;blur direction must be either latitudinal or longitudinal!&quot;);const f=3,p=new Sn(this._lodPlanes[r],h),m=h.uniforms,g=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*ac-1),x=s/v,b=isFinite(s)?1+Math.floor(f*x):ac;b&gt;ac&amp;&amp;console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${ac}`);const _=[];let T=0;for(let A=0;A&lt;ac;++A){const D=A/x,C=Math.exp(-D*D/2);_.push(C),A===0?T+=C:A&lt;b&amp;&amp;(T+=2*C)}for(let A=0;A&lt;_.length;A++)_[A]=_[A]/T;m.envMap.value=e.texture,m.samples.value=b,m.weights.value=_,m.latitudinal.value=o===&quot;latitudinal&quot;,l&amp;&amp;(m.poleAxis.value=l);const{_lodMax:w}=this;m.dTheta.value=v,m.mipInt.value=w-i;const E=this._sizeLods[r],R=3*E*(r&gt;w-Ku?r-w+Ku:0),N=4*(this._cubeSize-E);qm(t,R,N,3*E,2*E),u.setRenderTarget(t),u.render(p,Wb)}}function $V(n){const e=[],t=[],i=[];let r=n;const s=n-Ku+1+eC.length;for(let o=0;o&lt;s;o++){const l=Math.pow(2,r);t.push(l);let u=1/l;o&gt;n-Ku?u=eC[o-n+Ku-1]:o===0&amp;&amp;(u=0),i.push(u);const h=1/(l-2),f=-h,p=1+h,m=[f,f,p,f,p,p,f,f,p,p,f,p],g=6,v=6,x=3,b=2,_=1,T=new Float32Array(x*v*g),w=new Float32Array(b*v*g),E=new Float32Array(_*v*g);for(let N=0;N&lt;g;N++){const A=N%3*2/3-1,D=N&gt;2?0:-1,C=[A,D,0,A+2/3,D,0,A+2/3,D+1,0,A,D,0,A+2/3,D+1,0,A,D+1,0];T.set(C,x*v*N),w.set(m,b*v*N);const O=[N,N,N,N,N,N];E.set(O,_*v*N)}const R=new Lt;R.setAttribute(&quot;position&quot;,new Jt(T,x)),R.setAttribute(&quot;uv&quot;,new Jt(w,b)),R.setAttribute(&quot;faceIndex&quot;,new Jt(E,_)),e.push(R),r&gt;Ku&amp;&amp;r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function iC(n,e,t){const i=new Js(n,e,t);return i.texture.mapping=Sh,i.texture.name=&quot;PMREM.cubeUv&quot;,i.scissorTest=!0,i}function qm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function ZV(n,e,t){const i=new Float32Array(ac),r=new Y(0,1,0);return new Ts({name:&quot;SphericalGaussianBlur&quot;,defines:{n:ac,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:kw(),fragmentShader:`

                    precision mediump float;
                    precision mediump int;

                    varying vec3 vOutputDirection;

                    uniform sampler2D envMap;
                    uniform int samples;
                    uniform float weights[ n ];
                    uniform bool latitudinal;
                    uniform float dTheta;
                    uniform float mipInt;
                    uniform vec3 poleAxis;

                    #define ENVMAP_TYPE_CUBE_UV
                    #include &lt;cube_uv_reflection_fragment&gt;

                    vec3 getSample( float theta, vec3 axis ) {

                            float cosTheta = cos( theta );
                            // Rodrigues&#x27; axis-angle rotation
                            vec3 sampleDirection = vOutputDirection * cosTheta
                                    + cross( axis, vOutputDirection ) * sin( theta )
                                    + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

                            return bilinearCubeUV( envMap, sampleDirection, mipInt );

                    }

                    void main() {

                            vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

                            if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

                                    axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

                            }

                            axis = normalize( axis );

                            gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
                            gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

                            for ( int i = 1; i &lt; n; i++ ) {

                                    if ( i &gt;= samples ) {

                                            break;

                                    }

                                    float theta = dTheta * float( i );
                                    gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
                                    gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

                            }

                    }
            `,blending:la,depthTest:!1,depthWrite:!1})}function rC(){return new Ts({name:&quot;EquirectangularToCubeUV&quot;,uniforms:{envMap:{value:null}},vertexShader:kw(),fragmentShader:`

                    precision mediump float;
                    precision mediump int;

                    varying vec3 vOutputDirection;

                    uniform sampler2D envMap;

                    #include &lt;common&gt;

                    void main() {

                            vec3 outputDirection = normalize( vOutputDirection );
                            vec2 uv = equirectUv( outputDirection );

                            gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

                    }
            `,blending:la,depthTest:!1,depthWrite:!1})}function sC(){return new Ts({name:&quot;CubemapToCubeUV&quot;,uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:kw(),fragmentShader:`

                    precision mediump float;
                    precision mediump int;

                    uniform float flipEnvMap;

                    varying vec3 vOutputDirection;

                    uniform samplerCube envMap;

                    void main() {

                            gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

                    }
            `,blending:la,depthTest:!1,depthWrite:!1})}function kw(){return`

            precision mediump float;
            precision mediump int;

            attribute float faceIndex;

            varying vec3 vOutputDirection;

            // RH coordinate system; PMREM face-indexing convention
            vec3 getDirection( vec2 uv, float face ) {

                    uv = 2.0 * uv - 1.0;

                    vec3 direction = vec3( uv, 1.0 );

                    if ( face == 0.0 ) {

                            direction = direction.zyx; // ( 1, v, u ) pos x

                    } else if ( face == 1.0 ) {

                            direction = direction.xzy;
                            direction.xz *= -1.0; // ( -u, 1, -v ) pos y

                    } else if ( face == 2.0 ) {

                            direction.x *= -1.0; // ( -u, v, 1 ) pos z

                    } else if ( face == 3.0 ) {

                            direction = direction.zyx;
                            direction.xz *= -1.0; // ( -1, v, -u ) neg x

                    } else if ( face == 4.0 ) {

                            direction = direction.xzy;
                            direction.xy *= -1.0; // ( -u, -1, v ) neg y

                    } else if ( face == 5.0 ) {

                            direction.z *= -1.0; // ( u, v, -1 ) neg z

                    }

                    return direction;

            }

            void main() {

                    vOutputDirection = getDirection( uv, faceIndex );
                    gl_Position = vec4( position, 1.0 );

            }
    `}function JV(n){let e=new WeakMap,t=null;function i(l){if(l&amp;&amp;l.isTexture){const u=l.mapping,h=u===gd||u===yd,f=u===fa||u===fl;if(h||f){let p=e.get(l);const m=p!==void 0?p.texture.pmremVersion:0;if(l.isRenderTargetTexture&amp;&amp;l.pmremVersion!==m)return t===null&amp;&amp;(t=new fS(n)),p=h?t.fromEquirectangular(l,p):t.fromCubemap(l,p),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),p.texture;if(p!==void 0)return p.texture;{const g=l.image;return h&amp;&amp;g&amp;&amp;g.height&gt;0||f&amp;&amp;g&amp;&amp;r(g)?(t===null&amp;&amp;(t=new fS(n)),p=h?t.fromEquirectangular(l):t.fromCubemap(l),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),l.addEventListener(&quot;dispose&quot;,s),p.texture):null}}}return l}function r(l){let u=0;const h=6;for(let f=0;f&lt;h;f++)l[f]!==void 0&amp;&amp;u++;return u===h}function s(l){const u=l.target;u.removeEventListener(&quot;dispose&quot;,s);const h=e.get(u);h!==void 0&amp;&amp;(e.delete(u),h.dispose())}function o(){e=new WeakMap,t!==null&amp;&amp;(t.dispose(),t=null)}return{get:i,dispose:o}}function QV(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case&quot;WEBGL_depth_texture&quot;:r=n.getExtension(&quot;WEBGL_depth_texture&quot;)||n.getExtension(&quot;MOZ_WEBGL_depth_texture&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_depth_texture&quot;);break;case&quot;EXT_texture_filter_anisotropic&quot;:r=n.getExtension(&quot;EXT_texture_filter_anisotropic&quot;)||n.getExtension(&quot;MOZ_EXT_texture_filter_anisotropic&quot;)||n.getExtension(&quot;WEBKIT_EXT_texture_filter_anisotropic&quot;);break;case&quot;WEBGL_compressed_texture_s3tc&quot;:r=n.getExtension(&quot;WEBGL_compressed_texture_s3tc&quot;)||n.getExtension(&quot;MOZ_WEBGL_compressed_texture_s3tc&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_compressed_texture_s3tc&quot;);break;case&quot;WEBGL_compressed_texture_pvrtc&quot;:r=n.getExtension(&quot;WEBGL_compressed_texture_pvrtc&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_compressed_texture_pvrtc&quot;);break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t(&quot;EXT_color_buffer_float&quot;),t(&quot;WEBGL_clip_cull_distance&quot;),t(&quot;OES_texture_float_linear&quot;),t(&quot;EXT_color_buffer_half_float&quot;),t(&quot;WEBGL_multisampled_render_to_texture&quot;),t(&quot;WEBGL_render_shared_exponent&quot;)},get:function(i){const r=t(i);return r===null&amp;&amp;Rg(&quot;THREE.WebGLRenderer: &quot;+i+&quot; extension not supported.&quot;),r}}}function e5(n,e,t,i){const r={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&amp;&amp;e.remove(m.index);for(const v in m.attributes)e.remove(m.attributes[v]);m.removeEventListener(&quot;dispose&quot;,o),delete r[m.id];const g=s.get(m);g&amp;&amp;(e.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&amp;&amp;delete m._maxInstanceCount,t.memory.geometries--}function l(p,m){return r[m.id]===!0||(m.addEventListener(&quot;dispose&quot;,o),r[m.id]=!0,t.memory.geometries++),m}function u(p){const m=p.attributes;for(const g in m)e.update(m[g],n.ARRAY_BUFFER)}function h(p){const m=[],g=p.index,v=p.attributes.position;let x=0;if(g!==null){const T=g.array;x=g.version;for(let w=0,E=T.length;w&lt;E;w+=3){const R=T[w+0],N=T[w+1],A=T[w+2];m.push(R,N,N,A,A,R)}}else if(v!==void 0){const T=v.array;x=v.version;for(let w=0,E=T.length/3-1;w&lt;E;w+=3){const R=w+0,N=w+1,A=w+2;m.push(R,N,N,A,A,R)}}else return;const b=new(VD(m)?hw:uw)(m,1);b.version=x;const _=s.get(p);_&amp;&amp;e.remove(_),s.set(p,b)}function f(p){const m=s.get(p);if(m){const g=p.index;g!==null&amp;&amp;m.version&lt;g.version&amp;&amp;h(p)}else h(p);return s.get(p)}return{get:l,update:u,getWireframeAttribute:f}}function t5(n,e,t){let i;function r(m){i=m}let s,o;function l(m){s=m.type,o=m.bytesPerElement}function u(m,g){n.drawElements(i,g,s,m*o),t.update(g,i,1)}function h(m,g,v){v!==0&amp;&amp;(n.drawElementsInstanced(i,g,s,m*o,v),t.update(g,i,v))}function f(m,g,v){if(v===0)return;e.get(&quot;WEBGL_multi_draw&quot;).multiDrawElementsWEBGL(i,g,0,s,m,0,v);let b=0;for(let _=0;_&lt;v;_++)b+=g[_];t.update(b,i,1)}function p(m,g,v,x){if(v===0)return;const b=e.get(&quot;WEBGL_multi_draw&quot;);if(b===null)for(let _=0;_&lt;m.length;_++)h(m[_]/o,g[_],x[_]);else{b.multiDrawElementsInstancedWEBGL(i,g,0,s,m,0,x,0,v);let _=0;for(let T=0;T&lt;v;T++)_+=g[T]*x[T];t.update(_,i,1)}}this.setMode=r,this.setIndex=l,this.render=u,this.renderInstances=h,this.renderMultiDraw=f,this.renderMultiDrawInstances=p}function n5(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,l){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error(&quot;THREE.WebGLInfo: Unknown draw mode:&quot;,o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function i5(n,e,t){const i=new WeakMap,r=new yn;function s(o,l,u){const h=o.morphTargetInfluences,f=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,p=f!==void 0?f.length:0;let m=i.get(l);if(m===void 0||m.count!==p){let O=function(){D.dispose(),i.delete(l),l.removeEventListener(&quot;dispose&quot;,O)};var g=O;m!==void 0&amp;&amp;m.texture.dispose();const v=l.morphAttributes.position!==void 0,x=l.morphAttributes.normal!==void 0,b=l.morphAttributes.color!==void 0,_=l.morphAttributes.position||[],T=l.morphAttributes.normal||[],w=l.morphAttributes.color||[];let E=0;v===!0&amp;&amp;(E=1),x===!0&amp;&amp;(E=2),b===!0&amp;&amp;(E=3);let R=l.attributes.position.count*E,N=1;R&gt;e.maxTextureSize&amp;&amp;(N=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const A=new Float32Array(R*N*4*p),D=new Wd(A,R,N,p);D.type=Pr,D.needsUpdate=!0;const C=E*4;for(let L=0;L&lt;p;L++){const V=_[L],Z=T[L],z=w[L],K=R*N*4*L;for(let I=0;I&lt;V.count;I++){const j=I*C;v===!0&amp;&amp;(r.fromBufferAttribute(V,I),A[K+j+0]=r.x,A[K+j+1]=r.y,A[K+j+2]=r.z,A[K+j+3]=0),x===!0&amp;&amp;(r.fromBufferAttribute(Z,I),A[K+j+4]=r.x,A[K+j+5]=r.y,A[K+j+6]=r.z,A[K+j+7]=0),b===!0&amp;&amp;(r.fromBufferAttribute(z,I),A[K+j+8]=r.x,A[K+j+9]=r.y,A[K+j+10]=r.z,A[K+j+11]=z.itemSize===4?r.w:1)}}m={count:p,texture:D,size:new Oe(R,N)},i.set(l,m),l.addEventListener(&quot;dispose&quot;,O)}if(o.isInstancedMesh===!0&amp;&amp;o.morphTexture!==null)u.getUniforms().setValue(n,&quot;morphTexture&quot;,o.morphTexture,t);else{let v=0;for(let b=0;b&lt;h.length;b++)v+=h[b];const x=l.morphTargetsRelative?1:1-v;u.getUniforms().setValue(n,&quot;morphTargetBaseInfluence&quot;,x),u.getUniforms().setValue(n,&quot;morphTargetInfluences&quot;,h)}u.getUniforms().setValue(n,&quot;morphTargetsTexture&quot;,m.texture,t),u.getUniforms().setValue(n,&quot;morphTargetsTextureSize&quot;,m.size)}return{update:s}}function r5(n,e,t,i){let r=new WeakMap;function s(u){const h=i.render.frame,f=u.geometry,p=e.get(u,f);if(r.get(p)!==h&amp;&amp;(e.update(p),r.set(p,h)),u.isInstancedMesh&amp;&amp;(u.hasEventListener(&quot;dispose&quot;,l)===!1&amp;&amp;u.addEventListener(&quot;dispose&quot;,l),r.get(u)!==h&amp;&amp;(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&amp;&amp;t.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,h))),u.isSkinnedMesh){const m=u.skeleton;r.get(m)!==h&amp;&amp;(m.update(),r.set(m,h))}return p}function o(){r=new WeakMap}function l(u){const h=u.target;h.removeEventListener(&quot;dispose&quot;,l),t.remove(h.instanceMatrix),h.instanceColor!==null&amp;&amp;t.remove(h.instanceColor)}return{update:s,dispose:o}}const zN=new Kn,oC=new by(1,1),BN=new Wd,HN=new cy,VN=new Xd,aC=[],lC=[],cC=new Float32Array(16),uC=new Float32Array(9),hC=new Float32Array(4);function Oh(n,e,t){const i=n[0];if(i&lt;=0||i&gt;0)return n;const r=e*t;let s=aC[r];if(s===void 0&amp;&amp;(s=new Float32Array(r),aC[r]=s),e!==0){i.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function ki(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t&lt;i;t++)if(n[t]!==e[t])return!1;return!0}function Fi(n,e){for(let t=0,i=e.length;t&lt;i;t++)n[t]=e[t]}function By(n,e){let t=lC[e];t===void 0&amp;&amp;(t=new Int32Array(e),lC[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function s5(n,e){const t=this.cache;t[0]!==e&amp;&amp;(n.uniform1f(this.addr,e),t[0]=e)}function o5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&amp;&amp;(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ki(t,e))return;n.uniform2fv(this.addr,e),Fi(t,e)}}function a5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&amp;&amp;(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&amp;&amp;(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ki(t,e))return;n.uniform3fv(this.addr,e),Fi(t,e)}}function l5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&amp;&amp;(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ki(t,e))return;n.uniform4fv(this.addr,e),Fi(t,e)}}function c5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ki(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Fi(t,e)}else{if(ki(t,i))return;hC.set(i),n.uniformMatrix2fv(this.addr,!1,hC),Fi(t,i)}}function u5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ki(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Fi(t,e)}else{if(ki(t,i))return;uC.set(i),n.uniformMatrix3fv(this.addr,!1,uC),Fi(t,i)}}function h5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ki(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Fi(t,e)}else{if(ki(t,i))return;cC.set(i),n.uniformMatrix4fv(this.addr,!1,cC),Fi(t,i)}}function f5(n,e){const t=this.cache;t[0]!==e&amp;&amp;(n.uniform1i(this.addr,e),t[0]=e)}function d5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&amp;&amp;(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ki(t,e))return;n.uniform2iv(this.addr,e),Fi(t,e)}}function p5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&amp;&amp;(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ki(t,e))return;n.uniform3iv(this.addr,e),Fi(t,e)}}function m5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&amp;&amp;(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ki(t,e))return;n.uniform4iv(this.addr,e),Fi(t,e)}}function g5(n,e){const t=this.cache;t[0]!==e&amp;&amp;(n.uniform1ui(this.addr,e),t[0]=e)}function y5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&amp;&amp;(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ki(t,e))return;n.uniform2uiv(this.addr,e),Fi(t,e)}}function _5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&amp;&amp;(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ki(t,e))return;n.uniform3uiv(this.addr,e),Fi(t,e)}}function v5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&amp;&amp;(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ki(t,e))return;n.uniform4uiv(this.addr,e),Fi(t,e)}}function b5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(oC.compareFunction=lw,s=oC):s=zN,t.setTexture2D(e||s,r)}function x5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||HN,r)}function S5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||VN,r)}function w5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||BN,r)}function E5(n){switch(n){case 5126:return s5;case 35664:return o5;case 35665:return a5;case 35666:return l5;case 35674:return c5;case 35675:return u5;case 35676:return h5;case 5124:case 35670:return f5;case 35667:case 35671:return d5;case 35668:case 35672:return p5;case 35669:case 35673:return m5;case 5125:return g5;case 36294:return y5;case 36295:return _5;case 36296:return v5;case 35678:case 36198:case 36298:case 36306:case 35682:return b5;case 35679:case 36299:case 36307:return x5;case 35680:case 36300:case 36308:case 36293:return S5;case 36289:case 36303:case 36311:case 36292:return w5}}function T5(n,e){n.uniform1fv(this.addr,e)}function M5(n,e){const t=Oh(e,this.size,2);n.uniform2fv(this.addr,t)}function A5(n,e){const t=Oh(e,this.size,3);n.uniform3fv(this.addr,t)}function C5(n,e){const t=Oh(e,this.size,4);n.uniform4fv(this.addr,t)}function R5(n,e){const t=Oh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function O5(n,e){const t=Oh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function D5(n,e){const t=Oh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function N5(n,e){n.uniform1iv(this.addr,e)}function I5(n,e){n.uniform2iv(this.addr,e)}function P5(n,e){n.uniform3iv(this.addr,e)}function L5(n,e){n.uniform4iv(this.addr,e)}function U5(n,e){n.uniform1uiv(this.addr,e)}function k5(n,e){n.uniform2uiv(this.addr,e)}function F5(n,e){n.uniform3uiv(this.addr,e)}function z5(n,e){n.uniform4uiv(this.addr,e)}function B5(n,e,t){const i=this.cache,r=e.length,s=By(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||zN,s[o])}function H5(n,e,t){const i=this.cache,r=e.length,s=By(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||HN,s[o])}function V5(n,e,t){const i=this.cache,r=e.length,s=By(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||VN,s[o])}function G5(n,e,t){const i=this.cache,r=e.length,s=By(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||BN,s[o])}function j5(n){switch(n){case 5126:return T5;case 35664:return M5;case 35665:return A5;case 35666:return C5;case 35674:return R5;case 35675:return O5;case 35676:return D5;case 5124:case 35670:return N5;case 35667:case 35671:return I5;case 35668:case 35672:return P5;case 35669:case 35673:return L5;case 5125:return U5;case 36294:return k5;case 36295:return F5;case 36296:return z5;case 35678:case 36198:case 36298:case 36306:case 35682:return B5;case 35679:case 36299:case 36307:return H5;case 35680:case 36300:case 36308:case 36293:return V5;case 36289:case 36303:case 36311:case 36292:return G5}}class W5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=E5(t.type)}}class X5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=j5(t.type)}}class q5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const $b=/(\w+)(\])?(\[|\.)?/g;function fC(n,e){n.seq.push(e),n.map[e.id]=e}function Y5(n,e,t){const i=n.name,r=i.length;for($b.lastIndex=0;;){const s=$b.exec(i),o=$b.lastIndex;let l=s[1];const u=s[2]===&quot;]&quot;,h=s[3];if(u&amp;&amp;(l=l|0),h===void 0||h===&quot;[&quot;&amp;&amp;o+2===r){fC(t,h===void 0?new W5(l,n,e):new X5(l,n,e));break}else{let p=t.map[l];p===void 0&amp;&amp;(p=new q5(l),fC(t,p)),t=p}}}class Dg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r&lt;i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Y5(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&amp;&amp;s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&amp;&amp;this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],u=i[l.id];u.needsUpdate!==!1&amp;&amp;l.setValue(e,u.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&amp;&amp;i.push(o)}return i}}function dC(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const K5=37297;let $5=0;function Z5(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o&lt;s;o++){const l=o+1;i.push(`${l===e?&quot;&gt;&quot;:&quot; &quot;} ${l}: ${t[o]}`)}return i.join(`
`)}const pC=new jt;function J5(n){Zt._getMatrix(pC,Zt.workingColorSpace,n);const e=`mat3( ${pC.elements.map(t=&gt;t.toFixed(4))} )`;switch(Zt.getTransfer(n)){case vd:return[e,&quot;LinearTransferOETF&quot;];case On:return[e,&quot;sRGBTransferOETF&quot;];default:return console.warn(&quot;THREE.WebGLProgram: Unsupported color space: &quot;,n),[e,&quot;LinearTransferOETF&quot;]}}function mC(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&amp;&amp;r===&quot;&quot;)return&quot;&quot;;const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Z5(n.getShaderSource(e),o)}else return r}function Q5(n,e){const t=J5(e);return[`vec4 ${n}( vec4 value ) {`,`      return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,&quot;}&quot;].join(`
`)}function e8(n,e){let t;switch(e){case bD:t=&quot;Linear&quot;;break;case xD:t=&quot;Reinhard&quot;;break;case SD:t=&quot;Cineon&quot;;break;case wD:t=&quot;ACESFilmic&quot;;break;case TD:t=&quot;AgX&quot;;break;case MD:t=&quot;Neutral&quot;;break;case ED:t=&quot;Custom&quot;;break;default:console.warn(&quot;THREE.WebGLProgram: Unsupported toneMapping:&quot;,e),t=&quot;Linear&quot;}return&quot;vec3 &quot;+n+&quot;( vec3 color ) { return &quot;+t+&quot;ToneMapping( color ); }&quot;}const Ym=new Y;function t8(){Zt.getLuminanceCoefficients(Ym);const n=Ym.x.toFixed(4),e=Ym.y.toFixed(4),t=Ym.z.toFixed(4);return[&quot;float luminance( const in vec3 rgb ) {&quot;,`        const vec3 weights = vec3( ${n}, ${e}, ${t} );`,&quot;  return dot( weights, rgb );&quot;,&quot;}&quot;].join(`
`)}function n8(n){return[n.extensionClipCullDistance?&quot;#extension GL_ANGLE_clip_cull_distance : require&quot;:&quot;&quot;,n.extensionMultiDraw?&quot;#extension GL_ANGLE_multi_draw : require&quot;:&quot;&quot;].filter(Jf).join(`
`)}function i8(n){const e=[];for(const t in n){const i=n[t];i!==!1&amp;&amp;e.push(&quot;#define &quot;+t+&quot; &quot;+i)}return e.join(`
`)}function r8(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r&lt;i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let l=1;s.type===n.FLOAT_MAT2&amp;&amp;(l=2),s.type===n.FLOAT_MAT3&amp;&amp;(l=3),s.type===n.FLOAT_MAT4&amp;&amp;(l=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return t}function Jf(n){return n!==&quot;&quot;}function gC(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function yC(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const s8=/^[ \t]*#include +&lt;([\w\d./]+)&gt;/gm;function dS(n){return n.replace(s8,a8)}const o8=new Map;function a8(n,e){let t=Kt[e];if(t===void 0){const i=o8.get(e);if(i!==void 0)t=Kt[i],console.warn(&#x27;THREE.WebGLRenderer: Shader chunk &quot;%s&quot; has been deprecated. Use &quot;%s&quot; instead.&#x27;,e,i);else throw new Error(&quot;Can not resolve #include &lt;&quot;+e+&quot;&gt;&quot;)}return dS(t)}const l8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*&lt;\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _C(n){return n.replace(l8,c8)}function c8(n,e,t,i){let r=&quot;&quot;;for(let s=parseInt(e);s&lt;parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,&quot;[ &quot;+s+&quot; ]&quot;).replace(/UNROLLED_LOOP_INDEX/g,s);return r}function vC(n){let e=`precision ${n.precision} float;
    precision ${n.precision} int;
    precision ${n.precision} sampler2D;
    precision ${n.precision} samplerCube;
    precision ${n.precision} sampler3D;
    precision ${n.precision} sampler2DArray;
    precision ${n.precision} sampler2DShadow;
    precision ${n.precision} samplerCubeShadow;
    precision ${n.precision} sampler2DArrayShadow;
    precision ${n.precision} isampler2D;
    precision ${n.precision} isampler3D;
    precision ${n.precision} isamplerCube;
    precision ${n.precision} isampler2DArray;
    precision ${n.precision} usampler2D;
    precision ${n.precision} usampler3D;
    precision ${n.precision} usamplerCube;
    precision ${n.precision} usampler2DArray;
    `;return n.precision===&quot;highp&quot;?e+=`
#define HIGH_PRECISION`:n.precision===&quot;mediump&quot;?e+=`
#define MEDIUM_PRECISION`:n.precision===&quot;lowp&quot;&amp;&amp;(e+=`
#define LOW_PRECISION`),e}function u8(n){let e=&quot;SHADOWMAP_TYPE_BASIC&quot;;return n.shadowMapType===JS?e=&quot;SHADOWMAP_TYPE_PCF&quot;:n.shadowMapType===Q2?e=&quot;SHADOWMAP_TYPE_PCF_SOFT&quot;:n.shadowMapType===mo&amp;&amp;(e=&quot;SHADOWMAP_TYPE_VSM&quot;),e}function h8(n){let e=&quot;ENVMAP_TYPE_CUBE&quot;;if(n.envMap)switch(n.envMapMode){case fa:case fl:e=&quot;ENVMAP_TYPE_CUBE&quot;;break;case Sh:e=&quot;ENVMAP_TYPE_CUBE_UV&quot;;break}return e}function f8(n){let e=&quot;ENVMAP_MODE_REFLECTION&quot;;if(n.envMap)switch(n.envMapMode){case fl:e=&quot;ENVMAP_MODE_REFRACTION&quot;;break}return e}function d8(n){let e=&quot;ENVMAP_BLENDING_NONE&quot;;if(n.envMap)switch(n.combine){case Vd:e=&quot;ENVMAP_BLENDING_MULTIPLY&quot;;break;case _D:e=&quot;ENVMAP_BLENDING_MIX&quot;;break;case vD:e=&quot;ENVMAP_BLENDING_ADD&quot;;break}return e}function p8(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function m8(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const u=u8(t),h=h8(t),f=f8(t),p=d8(t),m=p8(t),g=n8(t),v=i8(s),x=r.createProgram();let b,_,T=t.glslVersion?&quot;#version &quot;+t.glslVersion+`
`:&quot;&quot;;t.isRawShaderMaterial?(b=[&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v].filter(Jf).join(`
`),b.length&gt;0&amp;&amp;(b+=`
`),_=[&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v].filter(Jf).join(`
`),_.length&gt;0&amp;&amp;(_+=`
`)):(b=[vC(t),&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v,t.extensionClipCullDistance?&quot;#define USE_CLIP_DISTANCE&quot;:&quot;&quot;,t.batching?&quot;#define USE_BATCHING&quot;:&quot;&quot;,t.batchingColor?&quot;#define USE_BATCHING_COLOR&quot;:&quot;&quot;,t.instancing?&quot;#define USE_INSTANCING&quot;:&quot;&quot;,t.instancingColor?&quot;#define USE_INSTANCING_COLOR&quot;:&quot;&quot;,t.instancingMorph?&quot;#define USE_INSTANCING_MORPH&quot;:&quot;&quot;,t.useFog&amp;&amp;t.fog?&quot;#define USE_FOG&quot;:&quot;&quot;,t.useFog&amp;&amp;t.fogExp2?&quot;#define FOG_EXP2&quot;:&quot;&quot;,t.map?&quot;#define USE_MAP&quot;:&quot;&quot;,t.envMap?&quot;#define USE_ENVMAP&quot;:&quot;&quot;,t.envMap?&quot;#define &quot;+f:&quot;&quot;,t.lightMap?&quot;#define USE_LIGHTMAP&quot;:&quot;&quot;,t.aoMap?&quot;#define USE_AOMAP&quot;:&quot;&quot;,t.bumpMap?&quot;#define USE_BUMPMAP&quot;:&quot;&quot;,t.normalMap?&quot;#define USE_NORMALMAP&quot;:&quot;&quot;,t.normalMapObjectSpace?&quot;#define USE_NORMALMAP_OBJECTSPACE&quot;:&quot;&quot;,t.normalMapTangentSpace?&quot;#define USE_NORMALMAP_TANGENTSPACE&quot;:&quot;&quot;,t.displacementMap?&quot;#define USE_DISPLACEMENTMAP&quot;:&quot;&quot;,t.emissiveMap?&quot;#define USE_EMISSIVEMAP&quot;:&quot;&quot;,t.anisotropy?&quot;#define USE_ANISOTROPY&quot;:&quot;&quot;,t.anisotropyMap?&quot;#define USE_ANISOTROPYMAP&quot;:&quot;&quot;,t.clearcoatMap?&quot;#define USE_CLEARCOATMAP&quot;:&quot;&quot;,t.clearcoatRoughnessMap?&quot;#define USE_CLEARCOAT_ROUGHNESSMAP&quot;:&quot;&quot;,t.clearcoatNormalMap?&quot;#define USE_CLEARCOAT_NORMALMAP&quot;:&quot;&quot;,t.iridescenceMap?&quot;#define USE_IRIDESCENCEMAP&quot;:&quot;&quot;,t.iridescenceThicknessMap?&quot;#define USE_IRIDESCENCE_THICKNESSMAP&quot;:&quot;&quot;,t.specularMap?&quot;#define USE_SPECULARMAP&quot;:&quot;&quot;,t.specularColorMap?&quot;#define USE_SPECULAR_COLORMAP&quot;:&quot;&quot;,t.specularIntensityMap?&quot;#define USE_SPECULAR_INTENSITYMAP&quot;:&quot;&quot;,t.roughnessMap?&quot;#define USE_ROUGHNESSMAP&quot;:&quot;&quot;,t.metalnessMap?&quot;#define USE_METALNESSMAP&quot;:&quot;&quot;,t.alphaMap?&quot;#define USE_ALPHAMAP&quot;:&quot;&quot;,t.alphaHash?&quot;#define USE_ALPHAHASH&quot;:&quot;&quot;,t.transmission?&quot;#define USE_TRANSMISSION&quot;:&quot;&quot;,t.transmissionMap?&quot;#define USE_TRANSMISSIONMAP&quot;:&quot;&quot;,t.thicknessMap?&quot;#define USE_THICKNESSMAP&quot;:&quot;&quot;,t.sheenColorMap?&quot;#define USE_SHEEN_COLORMAP&quot;:&quot;&quot;,t.sheenRoughnessMap?&quot;#define USE_SHEEN_ROUGHNESSMAP&quot;:&quot;&quot;,t.mapUv?&quot;#define MAP_UV &quot;+t.mapUv:&quot;&quot;,t.alphaMapUv?&quot;#define ALPHAMAP_UV &quot;+t.alphaMapUv:&quot;&quot;,t.lightMapUv?&quot;#define LIGHTMAP_UV &quot;+t.lightMapUv:&quot;&quot;,t.aoMapUv?&quot;#define AOMAP_UV &quot;+t.aoMapUv:&quot;&quot;,t.emissiveMapUv?&quot;#define EMISSIVEMAP_UV &quot;+t.emissiveMapUv:&quot;&quot;,t.bumpMapUv?&quot;#define BUMPMAP_UV &quot;+t.bumpMapUv:&quot;&quot;,t.normalMapUv?&quot;#define NORMALMAP_UV &quot;+t.normalMapUv:&quot;&quot;,t.displacementMapUv?&quot;#define DISPLACEMENTMAP_UV &quot;+t.displacementMapUv:&quot;&quot;,t.metalnessMapUv?&quot;#define METALNESSMAP_UV &quot;+t.metalnessMapUv:&quot;&quot;,t.roughnessMapUv?&quot;#define ROUGHNESSMAP_UV &quot;+t.roughnessMapUv:&quot;&quot;,t.anisotropyMapUv?&quot;#define ANISOTROPYMAP_UV &quot;+t.anisotropyMapUv:&quot;&quot;,t.clearcoatMapUv?&quot;#define CLEARCOATMAP_UV &quot;+t.clearcoatMapUv:&quot;&quot;,t.clearcoatNormalMapUv?&quot;#define CLEARCOAT_NORMALMAP_UV &quot;+t.clearcoatNormalMapUv:&quot;&quot;,t.clearcoatRoughnessMapUv?&quot;#define CLEARCOAT_ROUGHNESSMAP_UV &quot;+t.clearcoatRoughnessMapUv:&quot;&quot;,t.iridescenceMapUv?&quot;#define IRIDESCENCEMAP_UV &quot;+t.iridescenceMapUv:&quot;&quot;,t.iridescenceThicknessMapUv?&quot;#define IRIDESCENCE_THICKNESSMAP_UV &quot;+t.iridescenceThicknessMapUv:&quot;&quot;,t.sheenColorMapUv?&quot;#define SHEEN_COLORMAP_UV &quot;+t.sheenColorMapUv:&quot;&quot;,t.sheenRoughnessMapUv?&quot;#define SHEEN_ROUGHNESSMAP_UV &quot;+t.sheenRoughnessMapUv:&quot;&quot;,t.specularMapUv?&quot;#define SPECULARMAP_UV &quot;+t.specularMapUv:&quot;&quot;,t.specularColorMapUv?&quot;#define SPECULAR_COLORMAP_UV &quot;+t.specularColorMapUv:&quot;&quot;,t.specularIntensityMapUv?&quot;#define SPECULAR_INTENSITYMAP_UV &quot;+t.specularIntensityMapUv:&quot;&quot;,t.transmissionMapUv?&quot;#define TRANSMISSIONMAP_UV &quot;+t.transmissionMapUv:&quot;&quot;,t.thicknessMapUv?&quot;#define THICKNESSMAP_UV &quot;+t.thicknessMapUv:&quot;&quot;,t.vertexTangents&amp;&amp;t.flatShading===!1?&quot;#define USE_TANGENT&quot;:&quot;&quot;,t.vertexColors?&quot;#define USE_COLOR&quot;:&quot;&quot;,t.vertexAlphas?&quot;#define USE_COLOR_ALPHA&quot;:&quot;&quot;,t.vertexUv1s?&quot;#define USE_UV1&quot;:&quot;&quot;,t.vertexUv2s?&quot;#define USE_UV2&quot;:&quot;&quot;,t.vertexUv3s?&quot;#define USE_UV3&quot;:&quot;&quot;,t.pointsUvs?&quot;#define USE_POINTS_UV&quot;:&quot;&quot;,t.flatShading?&quot;#define FLAT_SHADED&quot;:&quot;&quot;,t.skinning?&quot;#define USE_SKINNING&quot;:&quot;&quot;,t.morphTargets?&quot;#define USE_MORPHTARGETS&quot;:&quot;&quot;,t.morphNormals&amp;&amp;t.flatShading===!1?&quot;#define USE_MORPHNORMALS&quot;:&quot;&quot;,t.morphColors?&quot;#define USE_MORPHCOLORS&quot;:&quot;&quot;,t.morphTargetsCount&gt;0?&quot;#define MORPHTARGETS_TEXTURE_STRIDE &quot;+t.morphTextureStride:&quot;&quot;,t.morphTargetsCount&gt;0?&quot;#define MORPHTARGETS_COUNT &quot;+t.morphTargetsCount:&quot;&quot;,t.doubleSided?&quot;#define DOUBLE_SIDED&quot;:&quot;&quot;,t.flipSided?&quot;#define FLIP_SIDED&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define USE_SHADOWMAP&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define &quot;+u:&quot;&quot;,t.sizeAttenuation?&quot;#define USE_SIZEATTENUATION&quot;:&quot;&quot;,t.numLightProbes&gt;0?&quot;#define USE_LIGHT_PROBES&quot;:&quot;&quot;,t.logarithmicDepthBuffer?&quot;#define USE_LOGDEPTHBUF&quot;:&quot;&quot;,t.reverseDepthBuffer?&quot;#define USE_REVERSEDEPTHBUF&quot;:&quot;&quot;,&quot;uniform mat4 modelMatrix;&quot;,&quot;uniform mat4 modelViewMatrix;&quot;,&quot;uniform mat4 projectionMatrix;&quot;,&quot;uniform mat4 viewMatrix;&quot;,&quot;uniform mat3 normalMatrix;&quot;,&quot;uniform vec3 cameraPosition;&quot;,&quot;uniform bool isOrthographic;&quot;,&quot;#ifdef USE_INSTANCING&quot;,&quot;      attribute mat4 instanceMatrix;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_INSTANCING_COLOR&quot;,&quot;  attribute vec3 instanceColor;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_INSTANCING_MORPH&quot;,&quot;   uniform sampler2D morphTexture;&quot;,&quot;#endif&quot;,&quot;attribute vec3 position;&quot;,&quot;attribute vec3 normal;&quot;,&quot;attribute vec2 uv;&quot;,&quot;#ifdef USE_UV1&quot;,&quot;       attribute vec2 uv1;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_UV2&quot;,&quot;  attribute vec2 uv2;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_UV3&quot;,&quot;  attribute vec2 uv3;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_TANGENT&quot;,&quot;      attribute vec4 tangent;&quot;,&quot;#endif&quot;,&quot;#if defined( USE_COLOR_ALPHA )&quot;,&quot;      attribute vec4 color;&quot;,&quot;#elif defined( USE_COLOR )&quot;,&quot;       attribute vec3 color;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_SKINNING&quot;,&quot;   attribute vec4 skinIndex;&quot;,&quot;  attribute vec4 skinWeight;&quot;,&quot;#endif&quot;,`
`].filter(Jf).join(`
`),_=[vC(t),&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v,t.useFog&amp;&amp;t.fog?&quot;#define USE_FOG&quot;:&quot;&quot;,t.useFog&amp;&amp;t.fogExp2?&quot;#define FOG_EXP2&quot;:&quot;&quot;,t.alphaToCoverage?&quot;#define ALPHA_TO_COVERAGE&quot;:&quot;&quot;,t.map?&quot;#define USE_MAP&quot;:&quot;&quot;,t.matcap?&quot;#define USE_MATCAP&quot;:&quot;&quot;,t.envMap?&quot;#define USE_ENVMAP&quot;:&quot;&quot;,t.envMap?&quot;#define &quot;+h:&quot;&quot;,t.envMap?&quot;#define &quot;+f:&quot;&quot;,t.envMap?&quot;#define &quot;+p:&quot;&quot;,m?&quot;#define CUBEUV_TEXEL_WIDTH &quot;+m.texelWidth:&quot;&quot;,m?&quot;#define CUBEUV_TEXEL_HEIGHT &quot;+m.texelHeight:&quot;&quot;,m?&quot;#define CUBEUV_MAX_MIP &quot;+m.maxMip+&quot;.0&quot;:&quot;&quot;,t.lightMap?&quot;#define USE_LIGHTMAP&quot;:&quot;&quot;,t.aoMap?&quot;#define USE_AOMAP&quot;:&quot;&quot;,t.bumpMap?&quot;#define USE_BUMPMAP&quot;:&quot;&quot;,t.normalMap?&quot;#define USE_NORMALMAP&quot;:&quot;&quot;,t.normalMapObjectSpace?&quot;#define USE_NORMALMAP_OBJECTSPACE&quot;:&quot;&quot;,t.normalMapTangentSpace?&quot;#define USE_NORMALMAP_TANGENTSPACE&quot;:&quot;&quot;,t.emissiveMap?&quot;#define USE_EMISSIVEMAP&quot;:&quot;&quot;,t.anisotropy?&quot;#define USE_ANISOTROPY&quot;:&quot;&quot;,t.anisotropyMap?&quot;#define USE_ANISOTROPYMAP&quot;:&quot;&quot;,t.clearcoat?&quot;#define USE_CLEARCOAT&quot;:&quot;&quot;,t.clearcoatMap?&quot;#define USE_CLEARCOATMAP&quot;:&quot;&quot;,t.clearcoatRoughnessMap?&quot;#define USE_CLEARCOAT_ROUGHNESSMAP&quot;:&quot;&quot;,t.clearcoatNormalMap?&quot;#define USE_CLEARCOAT_NORMALMAP&quot;:&quot;&quot;,t.dispersion?&quot;#define USE_DISPERSION&quot;:&quot;&quot;,t.iridescence?&quot;#define USE_IRIDESCENCE&quot;:&quot;&quot;,t.iridescenceMap?&quot;#define USE_IRIDESCENCEMAP&quot;:&quot;&quot;,t.iridescenceThicknessMap?&quot;#define USE_IRIDESCENCE_THICKNESSMAP&quot;:&quot;&quot;,t.specularMap?&quot;#define USE_SPECULARMAP&quot;:&quot;&quot;,t.specularColorMap?&quot;#define USE_SPECULAR_COLORMAP&quot;:&quot;&quot;,t.specularIntensityMap?&quot;#define USE_SPECULAR_INTENSITYMAP&quot;:&quot;&quot;,t.roughnessMap?&quot;#define USE_ROUGHNESSMAP&quot;:&quot;&quot;,t.metalnessMap?&quot;#define USE_METALNESSMAP&quot;:&quot;&quot;,t.alphaMap?&quot;#define USE_ALPHAMAP&quot;:&quot;&quot;,t.alphaTest?&quot;#define USE_ALPHATEST&quot;:&quot;&quot;,t.alphaHash?&quot;#define USE_ALPHAHASH&quot;:&quot;&quot;,t.sheen?&quot;#define USE_SHEEN&quot;:&quot;&quot;,t.sheenColorMap?&quot;#define USE_SHEEN_COLORMAP&quot;:&quot;&quot;,t.sheenRoughnessMap?&quot;#define USE_SHEEN_ROUGHNESSMAP&quot;:&quot;&quot;,t.transmission?&quot;#define USE_TRANSMISSION&quot;:&quot;&quot;,t.transmissionMap?&quot;#define USE_TRANSMISSIONMAP&quot;:&quot;&quot;,t.thicknessMap?&quot;#define USE_THICKNESSMAP&quot;:&quot;&quot;,t.vertexTangents&amp;&amp;t.flatShading===!1?&quot;#define USE_TANGENT&quot;:&quot;&quot;,t.vertexColors||t.instancingColor||t.batchingColor?&quot;#define USE_COLOR&quot;:&quot;&quot;,t.vertexAlphas?&quot;#define USE_COLOR_ALPHA&quot;:&quot;&quot;,t.vertexUv1s?&quot;#define USE_UV1&quot;:&quot;&quot;,t.vertexUv2s?&quot;#define USE_UV2&quot;:&quot;&quot;,t.vertexUv3s?&quot;#define USE_UV3&quot;:&quot;&quot;,t.pointsUvs?&quot;#define USE_POINTS_UV&quot;:&quot;&quot;,t.gradientMap?&quot;#define USE_GRADIENTMAP&quot;:&quot;&quot;,t.flatShading?&quot;#define FLAT_SHADED&quot;:&quot;&quot;,t.doubleSided?&quot;#define DOUBLE_SIDED&quot;:&quot;&quot;,t.flipSided?&quot;#define FLIP_SIDED&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define USE_SHADOWMAP&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define &quot;+u:&quot;&quot;,t.premultipliedAlpha?&quot;#define PREMULTIPLIED_ALPHA&quot;:&quot;&quot;,t.numLightProbes&gt;0?&quot;#define USE_LIGHT_PROBES&quot;:&quot;&quot;,t.decodeVideoTexture?&quot;#define DECODE_VIDEO_TEXTURE&quot;:&quot;&quot;,t.decodeVideoTextureEmissive?&quot;#define DECODE_VIDEO_TEXTURE_EMISSIVE&quot;:&quot;&quot;,t.logarithmicDepthBuffer?&quot;#define USE_LOGDEPTHBUF&quot;:&quot;&quot;,t.reverseDepthBuffer?&quot;#define USE_REVERSEDEPTHBUF&quot;:&quot;&quot;,&quot;uniform mat4 viewMatrix;&quot;,&quot;uniform vec3 cameraPosition;&quot;,&quot;uniform bool isOrthographic;&quot;,t.toneMapping!==ca?&quot;#define TONE_MAPPING&quot;:&quot;&quot;,t.toneMapping!==ca?Kt.tonemapping_pars_fragment:&quot;&quot;,t.toneMapping!==ca?e8(&quot;toneMapping&quot;,t.toneMapping):&quot;&quot;,t.dithering?&quot;#define DITHERING&quot;:&quot;&quot;,t.opaque?&quot;#define OPAQUE&quot;:&quot;&quot;,Kt.colorspace_pars_fragment,Q5(&quot;linearToOutputTexel&quot;,t.outputColorSpace),t8(),t.useDepthPacking?&quot;#define DEPTH_PACKING &quot;+t.depthPacking:&quot;&quot;,`
`].filter(Jf).join(`
`)),o=dS(o),o=gC(o,t),o=yC(o,t),l=dS(l),l=gC(l,t),l=yC(l,t),o=_C(o),l=_C(l),t.isRawShaderMaterial!==!0&amp;&amp;(T=`#version 300 es
`,b=[g,&quot;#define attribute in&quot;,&quot;#define varying out&quot;,&quot;#define texture2D texture&quot;].join(`
`)+`
`+b,_=[&quot;#define varying in&quot;,t.glslVersion===rS?&quot;&quot;:&quot;layout(location = 0) out highp vec4 pc_fragColor;&quot;,t.glslVersion===rS?&quot;&quot;:&quot;#define gl_FragColor pc_fragColor&quot;,&quot;#define gl_FragDepthEXT gl_FragDepth&quot;,&quot;#define texture2D texture&quot;,&quot;#define textureCube texture&quot;,&quot;#define texture2DProj textureProj&quot;,&quot;#define texture2DLodEXT textureLod&quot;,&quot;#define texture2DProjLodEXT textureProjLod&quot;,&quot;#define textureCubeLodEXT textureLod&quot;,&quot;#define texture2DGradEXT textureGrad&quot;,&quot;#define texture2DProjGradEXT textureProjGrad&quot;,&quot;#define textureCubeGradEXT textureGrad&quot;].join(`
`)+`
`+_);const w=T+b+o,E=T+_+l,R=dC(r,r.VERTEX_SHADER,w),N=dC(r,r.FRAGMENT_SHADER,E);r.attachShader(x,R),r.attachShader(x,N),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&amp;&amp;r.bindAttribLocation(x,0,&quot;position&quot;),r.linkProgram(x);function A(L){if(n.debug.checkShaderErrors){const V=r.getProgramInfoLog(x).trim(),Z=r.getShaderInfoLog(R).trim(),z=r.getShaderInfoLog(N).trim();let K=!0,I=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(K=!1,typeof n.debug.onShaderError==&quot;function&quot;)n.debug.onShaderError(r,x,R,N);else{const j=mC(r,R,&quot;vertex&quot;),G=mC(r,N,&quot;fragment&quot;);console.error(&quot;THREE.WebGLProgram: Shader Error &quot;+r.getError()+&quot; - VALIDATE_STATUS &quot;+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+V+`
`+j+`
`+G)}else V!==&quot;&quot;?console.warn(&quot;THREE.WebGLProgram: Program Info Log:&quot;,V):(Z===&quot;&quot;||z===&quot;&quot;)&amp;&amp;(I=!1);I&amp;&amp;(L.diagnostics={runnable:K,programLog:V,vertexShader:{log:Z,prefix:b},fragmentShader:{log:z,prefix:_}})}r.deleteShader(R),r.deleteShader(N),D=new Dg(r,x),C=r8(r,x)}let D;this.getUniforms=function(){return D===void 0&amp;&amp;A(this),D};let C;this.getAttributes=function(){return C===void 0&amp;&amp;A(this),C};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&amp;&amp;(O=r.getProgramParameter(x,K5)),O},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=$5++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=R,this.fragmentShader=N,this}let g8=0;class y8{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&amp;&amp;(o.add(r),r.usedTimes++),o.has(s)===!1&amp;&amp;(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&amp;&amp;this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&amp;&amp;(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&amp;&amp;(i=new _8(e),t.set(e,i)),i}}class _8{constructor(e){this.id=g8++,this.code=e,this.usedTimes=0}}function v8(n,e,t,i,r,s,o){const l=new uy,u=new y8,h=new Set,f=[],p=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:&quot;depth&quot;,MeshDistanceMaterial:&quot;distanceRGBA&quot;,MeshNormalMaterial:&quot;normal&quot;,MeshBasicMaterial:&quot;basic&quot;,MeshLambertMaterial:&quot;lambert&quot;,MeshPhongMaterial:&quot;phong&quot;,MeshToonMaterial:&quot;toon&quot;,MeshStandardMaterial:&quot;physical&quot;,MeshPhysicalMaterial:&quot;physical&quot;,MeshMatcapMaterial:&quot;matcap&quot;,LineBasicMaterial:&quot;basic&quot;,LineDashedMaterial:&quot;dashed&quot;,PointsMaterial:&quot;points&quot;,ShadowMaterial:&quot;shadow&quot;,SpriteMaterial:&quot;sprite&quot;};function x(C){return h.add(C),C===0?&quot;uv&quot;:`uv${C}`}function b(C,O,L,V,Z){const z=V.fog,K=Z.geometry,I=C.isMeshStandardMaterial?V.environment:null,j=(C.isMeshStandardMaterial?t:e).get(C.envMap||I),G=j&amp;&amp;j.mapping===Sh?j.image.height:null,ee=v[C.type];C.precision!==null&amp;&amp;(g=r.getMaxPrecision(C.precision),g!==C.precision&amp;&amp;console.warn(&quot;THREE.WebGLProgram.getParameters:&quot;,C.precision,&quot;not supported, using&quot;,g,&quot;instead.&quot;));const F=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ne=F!==void 0?F.length:0;let le=0;K.morphAttributes.position!==void 0&amp;&amp;(le=1),K.morphAttributes.normal!==void 0&amp;&amp;(le=2),K.morphAttributes.color!==void 0&amp;&amp;(le=3);let ce,ie,oe,ae;if(ee){const zt=Ws[ee];ce=zt.vertexShader,ie=zt.fragmentShader}else ce=C.vertexShader,ie=C.fragmentShader,u.update(C),oe=u.getVertexShaderID(C),ae=u.getFragmentShaderID(C);const ue=n.getRenderTarget(),ve=n.state.buffers.depth.getReversed(),He=Z.isInstancedMesh===!0,Xe=Z.isBatchedMesh===!0,lt=!!C.map,We=!!C.matcap,Ye=!!j,Q=!!C.aoMap,Ve=!!C.lightMap,Le=!!C.bumpMap,Fe=!!C.normalMap,Ne=!!C.displacementMap,mt=!!C.emissiveMap,ze=!!C.metalnessMap,te=!!C.roughnessMap,H=C.anisotropy&gt;0,pe=C.clearcoat&gt;0,Ce=C.dispersion&gt;0,Ue=C.iridescence&gt;0,Me=C.sheen&gt;0,Ze=C.transmission&gt;0,qe=H&amp;&amp;!!C.anisotropyMap,ut=pe&amp;&amp;!!C.clearcoatMap,Ct=pe&amp;&amp;!!C.clearcoatNormalMap,je=pe&amp;&amp;!!C.clearcoatRoughnessMap,ht=Ue&amp;&amp;!!C.iridescenceMap,St=Ue&amp;&amp;!!C.iridescenceThicknessMap,Rt=Me&amp;&amp;!!C.sheenColorMap,rt=Me&amp;&amp;!!C.sheenRoughnessMap,Gt=!!C.specularMap,It=!!C.specularColorMap,gn=!!C.specularIntensityMap,de=Ze&amp;&amp;!!C.transmissionMap,tt=Ze&amp;&amp;!!C.thicknessMap,Ae=!!C.gradientMap,Pe=!!C.alphaMap,st=C.alphaTest&gt;0,Qe=!!C.alphaHash,Ut=!!C.extensions;let wn=ca;C.toneMapped&amp;&amp;(ue===null||ue.isXRRenderTarget===!0)&amp;&amp;(wn=n.toneMapping);const jn={shaderID:ee,shaderType:C.type,shaderName:C.name,vertexShader:ce,fragmentShader:ie,defines:C.defines,customVertexShaderID:oe,customFragmentShaderID:ae,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:g,batching:Xe,batchingColor:Xe&amp;&amp;Z._colorsTexture!==null,instancing:He,instancingColor:He&amp;&amp;Z.instanceColor!==null,instancingMorph:He&amp;&amp;Z.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:ue===null?n.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:fr,alphaToCoverage:!!C.alphaToCoverage,map:lt,matcap:We,envMap:Ye,envMapMode:Ye&amp;&amp;j.mapping,envMapCubeUVHeight:G,aoMap:Q,lightMap:Ve,bumpMap:Le,normalMap:Fe,displacementMap:m&amp;&amp;Ne,emissiveMap:mt,normalMapObjectSpace:Fe&amp;&amp;C.normalMapType===PD,normalMapTangentSpace:Fe&amp;&amp;C.normalMapType===vl,metalnessMap:ze,roughnessMap:te,anisotropy:H,anisotropyMap:qe,clearcoat:pe,clearcoatMap:ut,clearcoatNormalMap:Ct,clearcoatRoughnessMap:je,dispersion:Ce,iridescence:Ue,iridescenceMap:ht,iridescenceThicknessMap:St,sheen:Me,sheenColorMap:Rt,sheenRoughnessMap:rt,specularMap:Gt,specularColorMap:It,specularIntensityMap:gn,transmission:Ze,transmissionMap:de,thicknessMap:tt,gradientMap:Ae,opaque:C.transparent===!1&amp;&amp;C.blending===vc&amp;&amp;C.alphaToCoverage===!1,alphaMap:Pe,alphaTest:st,alphaHash:Qe,combine:C.combine,mapUv:lt&amp;&amp;x(C.map.channel),aoMapUv:Q&amp;&amp;x(C.aoMap.channel),lightMapUv:Ve&amp;&amp;x(C.lightMap.channel),bumpMapUv:Le&amp;&amp;x(C.bumpMap.channel),normalMapUv:Fe&amp;&amp;x(C.normalMap.channel),displacementMapUv:Ne&amp;&amp;x(C.displacementMap.channel),emissiveMapUv:mt&amp;&amp;x(C.emissiveMap.channel),metalnessMapUv:ze&amp;&amp;x(C.metalnessMap.channel),roughnessMapUv:te&amp;&amp;x(C.roughnessMap.channel),anisotropyMapUv:qe&amp;&amp;x(C.anisotropyMap.channel),clearcoatMapUv:ut&amp;&amp;x(C.clearcoatMap.channel),clearcoatNormalMapUv:Ct&amp;&amp;x(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:je&amp;&amp;x(C.clearcoatRoughnessMap.channel),iridescenceMapUv:ht&amp;&amp;x(C.iridescenceMap.channel),iridescenceThicknessMapUv:St&amp;&amp;x(C.iridescenceThicknessMap.channel),sheenColorMapUv:Rt&amp;&amp;x(C.sheenColorMap.channel),sheenRoughnessMapUv:rt&amp;&amp;x(C.sheenRoughnessMap.channel),specularMapUv:Gt&amp;&amp;x(C.specularMap.channel),specularColorMapUv:It&amp;&amp;x(C.specularColorMap.channel),specularIntensityMapUv:gn&amp;&amp;x(C.specularIntensityMap.channel),transmissionMapUv:de&amp;&amp;x(C.transmissionMap.channel),thicknessMapUv:tt&amp;&amp;x(C.thicknessMap.channel),alphaMapUv:Pe&amp;&amp;x(C.alphaMap.channel),vertexTangents:!!K.attributes.tangent&amp;&amp;(Fe||H),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&amp;&amp;!!K.attributes.color&amp;&amp;K.attributes.color.itemSize===4,pointsUvs:Z.isPoints===!0&amp;&amp;!!K.attributes.uv&amp;&amp;(lt||Pe),fog:!!z,useFog:C.fog===!0,fogExp2:!!z&amp;&amp;z.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:ve,skinning:Z.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:le,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&amp;&amp;L.length&gt;0,shadowMapType:n.shadowMap.type,toneMapping:wn,decodeVideoTexture:lt&amp;&amp;C.map.isVideoTexture===!0&amp;&amp;Zt.getTransfer(C.map.colorSpace)===On,decodeVideoTextureEmissive:mt&amp;&amp;C.emissiveMap.isVideoTexture===!0&amp;&amp;Zt.getTransfer(C.emissiveMap.colorSpace)===On,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Ki,flipSided:C.side===xr,useDepthPacking:C.depthPacking&gt;=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Ut&amp;&amp;C.extensions.clipCullDistance===!0&amp;&amp;i.has(&quot;WEBGL_clip_cull_distance&quot;),extensionMultiDraw:(Ut&amp;&amp;C.extensions.multiDraw===!0||Xe)&amp;&amp;i.has(&quot;WEBGL_multi_draw&quot;),rendererExtensionParallelShaderCompile:i.has(&quot;KHR_parallel_shader_compile&quot;),customProgramCacheKey:C.customProgramCacheKey()};return jn.vertexUv1s=h.has(1),jn.vertexUv2s=h.has(2),jn.vertexUv3s=h.has(3),h.clear(),jn}function _(C){const O=[];if(C.shaderID?O.push(C.shaderID):(O.push(C.customVertexShaderID),O.push(C.customFragmentShaderID)),C.defines!==void 0)for(const L in C.defines)O.push(L),O.push(C.defines[L]);return C.isRawShaderMaterial===!1&amp;&amp;(T(O,C),w(O,C),O.push(n.outputColorSpace)),O.push(C.customProgramCacheKey),O.join()}function T(C,O){C.push(O.precision),C.push(O.outputColorSpace),C.push(O.envMapMode),C.push(O.envMapCubeUVHeight),C.push(O.mapUv),C.push(O.alphaMapUv),C.push(O.lightMapUv),C.push(O.aoMapUv),C.push(O.bumpMapUv),C.push(O.normalMapUv),C.push(O.displacementMapUv),C.push(O.emissiveMapUv),C.push(O.metalnessMapUv),C.push(O.roughnessMapUv),C.push(O.anisotropyMapUv),C.push(O.clearcoatMapUv),C.push(O.clearcoatNormalMapUv),C.push(O.clearcoatRoughnessMapUv),C.push(O.iridescenceMapUv),C.push(O.iridescenceThicknessMapUv),C.push(O.sheenColorMapUv),C.push(O.sheenRoughnessMapUv),C.push(O.specularMapUv),C.push(O.specularColorMapUv),C.push(O.specularIntensityMapUv),C.push(O.transmissionMapUv),C.push(O.thicknessMapUv),C.push(O.combine),C.push(O.fogExp2),C.push(O.sizeAttenuation),C.push(O.morphTargetsCount),C.push(O.morphAttributeCount),C.push(O.numDirLights),C.push(O.numPointLights),C.push(O.numSpotLights),C.push(O.numSpotLightMaps),C.push(O.numHemiLights),C.push(O.numRectAreaLights),C.push(O.numDirLightShadows),C.push(O.numPointLightShadows),C.push(O.numSpotLightShadows),C.push(O.numSpotLightShadowsWithMaps),C.push(O.numLightProbes),C.push(O.shadowMapType),C.push(O.toneMapping),C.push(O.numClippingPlanes),C.push(O.numClipIntersection),C.push(O.depthPacking)}function w(C,O){l.disableAll(),O.supportsVertexTextures&amp;&amp;l.enable(0),O.instancing&amp;&amp;l.enable(1),O.instancingColor&amp;&amp;l.enable(2),O.instancingMorph&amp;&amp;l.enable(3),O.matcap&amp;&amp;l.enable(4),O.envMap&amp;&amp;l.enable(5),O.normalMapObjectSpace&amp;&amp;l.enable(6),O.normalMapTangentSpace&amp;&amp;l.enable(7),O.clearcoat&amp;&amp;l.enable(8),O.iridescence&amp;&amp;l.enable(9),O.alphaTest&amp;&amp;l.enable(10),O.vertexColors&amp;&amp;l.enable(11),O.vertexAlphas&amp;&amp;l.enable(12),O.vertexUv1s&amp;&amp;l.enable(13),O.vertexUv2s&amp;&amp;l.enable(14),O.vertexUv3s&amp;&amp;l.enable(15),O.vertexTangents&amp;&amp;l.enable(16),O.anisotropy&amp;&amp;l.enable(17),O.alphaHash&amp;&amp;l.enable(18),O.batching&amp;&amp;l.enable(19),O.dispersion&amp;&amp;l.enable(20),O.batchingColor&amp;&amp;l.enable(21),C.push(l.mask),l.disableAll(),O.fog&amp;&amp;l.enable(0),O.useFog&amp;&amp;l.enable(1),O.flatShading&amp;&amp;l.enable(2),O.logarithmicDepthBuffer&amp;&amp;l.enable(3),O.reverseDepthBuffer&amp;&amp;l.enable(4),O.skinning&amp;&amp;l.enable(5),O.morphTargets&amp;&amp;l.enable(6),O.morphNormals&amp;&amp;l.enable(7),O.morphColors&amp;&amp;l.enable(8),O.premultipliedAlpha&amp;&amp;l.enable(9),O.shadowMapEnabled&amp;&amp;l.enable(10),O.doubleSided&amp;&amp;l.enable(11),O.flipSided&amp;&amp;l.enable(12),O.useDepthPacking&amp;&amp;l.enable(13),O.dithering&amp;&amp;l.enable(14),O.transmission&amp;&amp;l.enable(15),O.sheen&amp;&amp;l.enable(16),O.opaque&amp;&amp;l.enable(17),O.pointsUvs&amp;&amp;l.enable(18),O.decodeVideoTexture&amp;&amp;l.enable(19),O.decodeVideoTextureEmissive&amp;&amp;l.enable(20),O.alphaToCoverage&amp;&amp;l.enable(21),C.push(l.mask)}function E(C){const O=v[C.type];let L;if(O){const V=Ws[O];L=qD.clone(V.uniforms)}else L=C.uniforms;return L}function R(C,O){let L;for(let V=0,Z=f.length;V&lt;Z;V++){const z=f[V];if(z.cacheKey===O){L=z,++L.usedTimes;break}}return L===void 0&amp;&amp;(L=new m8(n,O,C,s),f.push(L)),L}function N(C){if(--C.usedTimes===0){const O=f.indexOf(C);f[O]=f[f.length-1],f.pop(),C.destroy()}}function A(C){u.remove(C)}function D(){u.dispose()}return{getParameters:b,getProgramCacheKey:_,getUniforms:E,acquireProgram:R,releaseProgram:N,releaseShaderCache:A,programs:f,dispose:D}}function b8(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let l=n.get(o);return l===void 0&amp;&amp;(l={},n.set(o,l)),l}function i(o){n.delete(o)}function r(o,l,u){n.get(o)[l]=u}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function x8(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function bC(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function xC(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(p,m,g,v,x,b){let _=n[e];return _===void 0?(_={id:p.id,object:p,geometry:m,material:g,groupOrder:v,renderOrder:p.renderOrder,z:x,group:b},n[e]=_):(_.id=p.id,_.object=p,_.geometry=m,_.material=g,_.groupOrder=v,_.renderOrder=p.renderOrder,_.z=x,_.group=b),e++,_}function l(p,m,g,v,x,b){const _=o(p,m,g,v,x,b);g.transmission&gt;0?i.push(_):g.transparent===!0?r.push(_):t.push(_)}function u(p,m,g,v,x,b){const _=o(p,m,g,v,x,b);g.transmission&gt;0?i.unshift(_):g.transparent===!0?r.unshift(_):t.unshift(_)}function h(p,m){t.length&gt;1&amp;&amp;t.sort(p||x8),i.length&gt;1&amp;&amp;i.sort(m||bC),r.length&gt;1&amp;&amp;r.sort(m||bC)}function f(){for(let p=e,m=n.length;p&lt;m;p++){const g=n[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:u,finish:f,sort:h}}function S8(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new xC,n.set(i,[o])):r&gt;=s.length?(o=new xC,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function w8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case&quot;DirectionalLight&quot;:t={direction:new Y,color:new $e};break;case&quot;SpotLight&quot;:t={position:new Y,direction:new Y,color:new $e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case&quot;PointLight&quot;:t={position:new Y,color:new $e,distance:0,decay:0};break;case&quot;HemisphereLight&quot;:t={direction:new Y,skyColor:new $e,groundColor:new $e};break;case&quot;RectAreaLight&quot;:t={color:new $e,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return n[e.id]=t,t}}}function E8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case&quot;DirectionalLight&quot;:t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe};break;case&quot;SpotLight&quot;:t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe};break;case&quot;PointLight&quot;:t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let T8=0;function M8(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function A8(n){const e=new w8,t=E8(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h&lt;9;h++)i.probe.push(new Y);const r=new Y,s=new yt,o=new yt;function l(h){let f=0,p=0,m=0;for(let C=0;C&lt;9;C++)i.probe[C].set(0,0,0);let g=0,v=0,x=0,b=0,_=0,T=0,w=0,E=0,R=0,N=0,A=0;h.sort(M8);for(let C=0,O=h.length;C&lt;O;C++){const L=h[C],V=L.color,Z=L.intensity,z=L.distance,K=L.shadow&amp;&amp;L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)f+=V.r*Z,p+=V.g*Z,m+=V.b*Z;else if(L.isLightProbe){for(let I=0;I&lt;9;I++)i.probe[I].addScaledVector(L.sh.coefficients[I],Z);A++}else if(L.isDirectionalLight){const I=e.get(L);if(I.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const j=L.shadow,G=t.get(L);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,i.directionalShadow[g]=G,i.directionalShadowMap[g]=K,i.directionalShadowMatrix[g]=L.shadow.matrix,T++}i.directional[g]=I,g++}else if(L.isSpotLight){const I=e.get(L);I.position.setFromMatrixPosition(L.matrixWorld),I.color.copy(V).multiplyScalar(Z),I.distance=z,I.coneCos=Math.cos(L.angle),I.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),I.decay=L.decay,i.spot[x]=I;const j=L.shadow;if(L.map&amp;&amp;(i.spotLightMap[R]=L.map,R++,j.updateMatrices(L),L.castShadow&amp;&amp;N++),i.spotLightMatrix[x]=j.matrix,L.castShadow){const G=t.get(L);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,i.spotShadow[x]=G,i.spotShadowMap[x]=K,E++}x++}else if(L.isRectAreaLight){const I=e.get(L);I.color.copy(V).multiplyScalar(Z),I.halfWidth.set(L.width*.5,0,0),I.halfHeight.set(0,L.height*.5,0),i.rectArea[b]=I,b++}else if(L.isPointLight){const I=e.get(L);if(I.color.copy(L.color).multiplyScalar(L.intensity),I.distance=L.distance,I.decay=L.decay,L.castShadow){const j=L.shadow,G=t.get(L);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,G.shadowCameraNear=j.camera.near,G.shadowCameraFar=j.camera.far,i.pointShadow[v]=G,i.pointShadowMap[v]=K,i.pointShadowMatrix[v]=L.shadow.matrix,w++}i.point[v]=I,v++}else if(L.isHemisphereLight){const I=e.get(L);I.skyColor.copy(L.color).multiplyScalar(Z),I.groundColor.copy(L.groundColor).multiplyScalar(Z),i.hemi[_]=I,_++}}b&gt;0&amp;&amp;(n.has(&quot;OES_texture_float_linear&quot;)===!0?(i.rectAreaLTC1=it.LTC_FLOAT_1,i.rectAreaLTC2=it.LTC_FLOAT_2):(i.rectAreaLTC1=it.LTC_HALF_1,i.rectAreaLTC2=it.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=p,i.ambient[2]=m;const D=i.hash;(D.directionalLength!==g||D.pointLength!==v||D.spotLength!==x||D.rectAreaLength!==b||D.hemiLength!==_||D.numDirectionalShadows!==T||D.numPointShadows!==w||D.numSpotShadows!==E||D.numSpotMaps!==R||D.numLightProbes!==A)&amp;&amp;(i.directional.length=g,i.spot.length=x,i.rectArea.length=b,i.point.length=v,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=E+R-N,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=N,i.numLightProbes=A,D.directionalLength=g,D.pointLength=v,D.spotLength=x,D.rectAreaLength=b,D.hemiLength=_,D.numDirectionalShadows=T,D.numPointShadows=w,D.numSpotShadows=E,D.numSpotMaps=R,D.numLightProbes=A,i.version=T8++)}function u(h,f){let p=0,m=0,g=0,v=0,x=0;const b=f.matrixWorldInverse;for(let _=0,T=h.length;_&lt;T;_++){const w=h[_];if(w.isDirectionalLight){const E=i.directional[p];E.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(b),p++}else if(w.isSpotLight){const E=i.spot[g];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(b),E.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(b),g++}else if(w.isRectAreaLight){const E=i.rectArea[v];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(b),o.identity(),s.copy(w.matrixWorld),s.premultiply(b),o.extractRotation(s),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),v++}else if(w.isPointLight){const E=i.point[m];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(b),m++}else if(w.isHemisphereLight){const E=i.hemi[x];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(b),x++}}}return{setup:l,setupView:u,state:i}}function SC(n){const e=new A8(n),t=[],i=[];function r(f){h.camera=f,t.length=0,i.length=0}function s(f){t.push(f)}function o(f){i.push(f)}function l(){e.setup(t)}function u(f){e.setupView(t,f)}const h={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function C8(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let l;return o===void 0?(l=new SC(n),e.set(r,[l])):s&gt;=o.length?(l=new SC(n),o.push(l)):l=o[s],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const R8=`void main() {
    gl_Position = vec4( position, 1.0 );
}`,O8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include &lt;packing&gt;
void main() {
    const float samples = float( VSM_SAMPLES );
    float mean = 0.0;
    float squared_mean = 0.0;
    float uvStride = samples &lt;= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
    float uvStart = samples &lt;= 1.0 ? 0.0 : - 1.0;
    for ( float i = 0.0; i &lt; samples; i ++ ) {
            float uvOffset = uvStart + i * uvStride;
            #ifdef HORIZONTAL_PASS
                    vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
                    mean += distribution.x;
                    squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
            #else
                    float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
                    mean += depth;
                    squared_mean += depth * depth;
            #endif
    }
    mean = mean / samples;
    squared_mean = squared_mean / samples;
    float std_dev = sqrt( squared_mean - mean * mean );
    gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function D8(n,e,t){let i=new Th;const r=new Oe,s=new Oe,o=new yn,l=new ww({depthPacking:ID}),u=new Ew,h={},f=t.maxTextureSize,p={[Qr]:xr,[xr]:Qr,[Ki]:Ki},m=new Ts({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Oe},radius:{value:4}},vertexShader:R8,fragmentShader:O8}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const v=new Lt;v.setAttribute(&quot;position&quot;,new Jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Sn(v,m),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=JS;let _=this.type;this.render=function(N,A,D){if(b.enabled===!1||b.autoUpdate===!1&amp;&amp;b.needsUpdate===!1||N.length===0)return;const C=n.getRenderTarget(),O=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),V=n.state;V.setBlending(la),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const Z=_!==mo&amp;&amp;this.type===mo,z=_===mo&amp;&amp;this.type!==mo;for(let K=0,I=N.length;K&lt;I;K++){const j=N[K],G=j.shadow;if(G===void 0){console.warn(&quot;THREE.WebGLShadowMap:&quot;,j,&quot;has no shadow.&quot;);continue}if(G.autoUpdate===!1&amp;&amp;G.needsUpdate===!1)continue;r.copy(G.mapSize);const ee=G.getFrameExtents();if(r.multiply(ee),s.copy(G.mapSize),(r.x&gt;f||r.y&gt;f)&amp;&amp;(r.x&gt;f&amp;&amp;(s.x=Math.floor(f/ee.x),r.x=s.x*ee.x,G.mapSize.x=s.x),r.y&gt;f&amp;&amp;(s.y=Math.floor(f/ee.y),r.y=s.y*ee.y,G.mapSize.y=s.y)),G.map===null||Z===!0||z===!0){const ne=this.type!==mo?{minFilter:xi,magFilter:xi}:{};G.map!==null&amp;&amp;G.map.dispose(),G.map=new Js(r.x,r.y,ne),G.map.texture.name=j.name+&quot;.shadowMap&quot;,G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const F=G.getViewportCount();for(let ne=0;ne&lt;F;ne++){const le=G.getViewport(ne);o.set(s.x*le.x,s.y*le.y,s.x*le.z,s.y*le.w),V.viewport(o),G.updateMatrices(j,ne),i=G.getFrustum(),E(A,D,G.camera,j,this.type)}G.isPointLightShadow!==!0&amp;&amp;this.type===mo&amp;&amp;T(G,D),G.needsUpdate=!1}_=this.type,b.needsUpdate=!1,n.setRenderTarget(C,O,L)};function T(N,A){const D=e.update(x);m.defines.VSM_SAMPLES!==N.blurSamples&amp;&amp;(m.defines.VSM_SAMPLES=N.blurSamples,g.defines.VSM_SAMPLES=N.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),N.mapPass===null&amp;&amp;(N.mapPass=new Js(r.x,r.y)),m.uniforms.shadow_pass.value=N.map.texture,m.uniforms.resolution.value=N.mapSize,m.uniforms.radius.value=N.radius,n.setRenderTarget(N.mapPass),n.clear(),n.renderBufferDirect(A,null,D,m,x,null),g.uniforms.shadow_pass.value=N.mapPass.texture,g.uniforms.resolution.value=N.mapSize,g.uniforms.radius.value=N.radius,n.setRenderTarget(N.map),n.clear(),n.renderBufferDirect(A,null,D,g,x,null)}function w(N,A,D,C){let O=null;const L=D.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(L!==void 0)O=L;else if(O=D.isPointLight===!0?u:l,n.localClippingEnabled&amp;&amp;A.clipShadows===!0&amp;&amp;Array.isArray(A.clippingPlanes)&amp;&amp;A.clippingPlanes.length!==0||A.displacementMap&amp;&amp;A.displacementScale!==0||A.alphaMap&amp;&amp;A.alphaTest&gt;0||A.map&amp;&amp;A.alphaTest&gt;0||A.alphaToCoverage===!0){const V=O.uuid,Z=A.uuid;let z=h[V];z===void 0&amp;&amp;(z={},h[V]=z);let K=z[Z];K===void 0&amp;&amp;(K=O.clone(),z[Z]=K,A.addEventListener(&quot;dispose&quot;,R)),O=K}if(O.visible=A.visible,O.wireframe=A.wireframe,C===mo?O.side=A.shadowSide!==null?A.shadowSide:A.side:O.side=A.shadowSide!==null?A.shadowSide:p[A.side],O.alphaMap=A.alphaMap,O.alphaTest=A.alphaToCoverage===!0?.5:A.alphaTest,O.map=A.map,O.clipShadows=A.clipShadows,O.clippingPlanes=A.clippingPlanes,O.clipIntersection=A.clipIntersection,O.displacementMap=A.displacementMap,O.displacementScale=A.displacementScale,O.displacementBias=A.displacementBias,O.wireframeLinewidth=A.wireframeLinewidth,O.linewidth=A.linewidth,D.isPointLight===!0&amp;&amp;O.isMeshDistanceMaterial===!0){const V=n.properties.get(O);V.light=D}return O}function E(N,A,D,C,O){if(N.visible===!1)return;if(N.layers.test(A.layers)&amp;&amp;(N.isMesh||N.isLine||N.isPoints)&amp;&amp;(N.castShadow||N.receiveShadow&amp;&amp;O===mo)&amp;&amp;(!N.frustumCulled||i.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,N.matrixWorld);const Z=e.update(N),z=N.material;if(Array.isArray(z)){const K=Z.groups;for(let I=0,j=K.length;I&lt;j;I++){const G=K[I],ee=z[G.materialIndex];if(ee&amp;&amp;ee.visible){const F=w(N,ee,C,O);N.onBeforeShadow(n,N,A,D,Z,F,G),n.renderBufferDirect(D,null,Z,F,N,G),N.onAfterShadow(n,N,A,D,Z,F,G)}}}else if(z.visible){const K=w(N,z,C,O);N.onBeforeShadow(n,N,A,D,Z,K,null),n.renderBufferDirect(D,null,Z,K,N,null),N.onAfterShadow(n,N,A,D,Z,K,null)}}const V=N.children;for(let Z=0,z=V.length;Z&lt;z;Z++)E(V[Z],A,D,C,O)}function R(N){N.target.removeEventListener(&quot;dispose&quot;,R);for(const D in h){const C=h[D],O=N.target.uuid;O in C&amp;&amp;(C[O].dispose(),delete C[O])}}}const N8={[Wg]:Xg,[qg]:$g,[Yg]:Zg,[Tc]:Kg,[Xg]:Wg,[$g]:qg,[Zg]:Yg,[Kg]:Tc};function I8(n,e){function t(){let de=!1;const tt=new yn;let Ae=null;const Pe=new yn(0,0,0,0);return{setMask:function(st){Ae!==st&amp;&amp;!de&amp;&amp;(n.colorMask(st,st,st,st),Ae=st)},setLocked:function(st){de=st},setClear:function(st,Qe,Ut,wn,jn){jn===!0&amp;&amp;(st*=wn,Qe*=wn,Ut*=wn),tt.set(st,Qe,Ut,wn),Pe.equals(tt)===!1&amp;&amp;(n.clearColor(st,Qe,Ut,wn),Pe.copy(tt))},reset:function(){de=!1,Ae=null,Pe.set(-1,0,0,0)}}}function i(){let de=!1,tt=!1,Ae=null,Pe=null,st=null;return{setReversed:function(Qe){if(tt!==Qe){const Ut=e.get(&quot;EXT_clip_control&quot;);Qe?Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.ZERO_TO_ONE_EXT):Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.NEGATIVE_ONE_TO_ONE_EXT),tt=Qe;const wn=st;st=null,this.setClear(wn)}},getReversed:function(){return tt},setTest:function(Qe){Qe?ue(n.DEPTH_TEST):ve(n.DEPTH_TEST)},setMask:function(Qe){Ae!==Qe&amp;&amp;!de&amp;&amp;(n.depthMask(Qe),Ae=Qe)},setFunc:function(Qe){if(tt&amp;&amp;(Qe=N8[Qe]),Pe!==Qe){switch(Qe){case Wg:n.depthFunc(n.NEVER);break;case Xg:n.depthFunc(n.ALWAYS);break;case qg:n.depthFunc(n.LESS);break;case Tc:n.depthFunc(n.LEQUAL);break;case Yg:n.depthFunc(n.EQUAL);break;case Kg:n.depthFunc(n.GEQUAL);break;case $g:n.depthFunc(n.GREATER);break;case Zg:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Pe=Qe}},setLocked:function(Qe){de=Qe},setClear:function(Qe){st!==Qe&amp;&amp;(tt&amp;&amp;(Qe=1-Qe),n.clearDepth(Qe),st=Qe)},reset:function(){de=!1,Ae=null,Pe=null,st=null,tt=!1}}}function r(){let de=!1,tt=null,Ae=null,Pe=null,st=null,Qe=null,Ut=null,wn=null,jn=null;return{setTest:function(zt){de||(zt?ue(n.STENCIL_TEST):ve(n.STENCIL_TEST))},setMask:function(zt){tt!==zt&amp;&amp;!de&amp;&amp;(n.stencilMask(zt),tt=zt)},setFunc:function(zt,Bi,oi){(Ae!==zt||Pe!==Bi||st!==oi)&amp;&amp;(n.stencilFunc(zt,Bi,oi),Ae=zt,Pe=Bi,st=oi)},setOp:function(zt,Bi,oi){(Qe!==zt||Ut!==Bi||wn!==oi)&amp;&amp;(n.stencilOp(zt,Bi,oi),Qe=zt,Ut=Bi,wn=oi)},setLocked:function(zt){de=zt},setClear:function(zt){jn!==zt&amp;&amp;(n.clearStencil(zt),jn=zt)},reset:function(){de=!1,tt=null,Ae=null,Pe=null,st=null,Qe=null,Ut=null,wn=null,jn=null}}}const s=new t,o=new i,l=new r,u=new WeakMap,h=new WeakMap;let f={},p={},m=new WeakMap,g=[],v=null,x=!1,b=null,_=null,T=null,w=null,E=null,R=null,N=null,A=new $e(0,0,0),D=0,C=!1,O=null,L=null,V=null,Z=null,z=null;const K=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,j=0;const G=n.getParameter(n.VERSION);G.indexOf(&quot;WebGL&quot;)!==-1?(j=parseFloat(/^WebGL (\d)/.exec(G)[1]),I=j&gt;=1):G.indexOf(&quot;OpenGL ES&quot;)!==-1&amp;&amp;(j=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),I=j&gt;=2);let ee=null,F={};const ne=n.getParameter(n.SCISSOR_BOX),le=n.getParameter(n.VIEWPORT),ce=new yn().fromArray(ne),ie=new yn().fromArray(le);function oe(de,tt,Ae,Pe){const st=new Uint8Array(4),Qe=n.createTexture();n.bindTexture(de,Qe),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ut=0;Ut&lt;Ae;Ut++)de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?n.texImage3D(tt,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,st):n.texImage2D(tt+Ut,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,st);return Qe}const ae={};ae[n.TEXTURE_2D]=oe(n.TEXTURE_2D,n.TEXTURE_2D,1),ae[n.TEXTURE_CUBE_MAP]=oe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ae[n.TEXTURE_2D_ARRAY]=oe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ae[n.TEXTURE_3D]=oe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),l.setClear(0),ue(n.DEPTH_TEST),o.setFunc(Tc),Le(!1),Fe(Jx),ue(n.CULL_FACE),Q(la);function ue(de){f[de]!==!0&amp;&amp;(n.enable(de),f[de]=!0)}function ve(de){f[de]!==!1&amp;&amp;(n.disable(de),f[de]=!1)}function He(de,tt){return p[de]!==tt?(n.bindFramebuffer(de,tt),p[de]=tt,de===n.DRAW_FRAMEBUFFER&amp;&amp;(p[n.FRAMEBUFFER]=tt),de===n.FRAMEBUFFER&amp;&amp;(p[n.DRAW_FRAMEBUFFER]=tt),!0):!1}function Xe(de,tt){let Ae=g,Pe=!1;if(de){Ae=m.get(tt),Ae===void 0&amp;&amp;(Ae=[],m.set(tt,Ae));const st=de.textures;if(Ae.length!==st.length||Ae[0]!==n.COLOR_ATTACHMENT0){for(let Qe=0,Ut=st.length;Qe&lt;Ut;Qe++)Ae[Qe]=n.COLOR_ATTACHMENT0+Qe;Ae.length=st.length,Pe=!0}}else Ae[0]!==n.BACK&amp;&amp;(Ae[0]=n.BACK,Pe=!0);Pe&amp;&amp;n.drawBuffers(Ae)}function lt(de){return v!==de?(n.useProgram(de),v=de,!0):!1}const We={[il]:n.FUNC_ADD,[tD]:n.FUNC_SUBTRACT,[nD]:n.FUNC_REVERSE_SUBTRACT};We[iD]=n.MIN,We[rD]=n.MAX;const Ye={[sD]:n.ZERO,[oD]:n.ONE,[aD]:n.SRC_COLOR,[Gg]:n.SRC_ALPHA,[dD]:n.SRC_ALPHA_SATURATE,[hD]:n.DST_COLOR,[cD]:n.DST_ALPHA,[lD]:n.ONE_MINUS_SRC_COLOR,[jg]:n.ONE_MINUS_SRC_ALPHA,[fD]:n.ONE_MINUS_DST_COLOR,[uD]:n.ONE_MINUS_DST_ALPHA,[pD]:n.CONSTANT_COLOR,[mD]:n.ONE_MINUS_CONSTANT_COLOR,[gD]:n.CONSTANT_ALPHA,[yD]:n.ONE_MINUS_CONSTANT_ALPHA};function Q(de,tt,Ae,Pe,st,Qe,Ut,wn,jn,zt){if(de===la){x===!0&amp;&amp;(ve(n.BLEND),x=!1);return}if(x===!1&amp;&amp;(ue(n.BLEND),x=!0),de!==eD){if(de!==b||zt!==C){if((_!==il||E!==il)&amp;&amp;(n.blendEquation(n.FUNC_ADD),_=il,E=il),zt)switch(de){case vc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Qx:n.blendFunc(n.ONE,n.ONE);break;case eS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case tS:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error(&quot;THREE.WebGLState: Invalid blending: &quot;,de);break}else switch(de){case vc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Qx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case eS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case tS:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error(&quot;THREE.WebGLState: Invalid blending: &quot;,de);break}T=null,w=null,R=null,N=null,A.set(0,0,0),D=0,b=de,C=zt}return}st=st||tt,Qe=Qe||Ae,Ut=Ut||Pe,(tt!==_||st!==E)&amp;&amp;(n.blendEquationSeparate(We[tt],We[st]),_=tt,E=st),(Ae!==T||Pe!==w||Qe!==R||Ut!==N)&amp;&amp;(n.blendFuncSeparate(Ye[Ae],Ye[Pe],Ye[Qe],Ye[Ut]),T=Ae,w=Pe,R=Qe,N=Ut),(wn.equals(A)===!1||jn!==D)&amp;&amp;(n.blendColor(wn.r,wn.g,wn.b,jn),A.copy(wn),D=jn),b=de,C=!1}function Ve(de,tt){de.side===Ki?ve(n.CULL_FACE):ue(n.CULL_FACE);let Ae=de.side===xr;tt&amp;&amp;(Ae=!Ae),Le(Ae),de.blending===vc&amp;&amp;de.transparent===!1?Q(la):Q(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),o.setFunc(de.depthFunc),o.setTest(de.depthTest),o.setMask(de.depthWrite),s.setMask(de.colorWrite);const Pe=de.stencilWrite;l.setTest(Pe),Pe&amp;&amp;(l.setMask(de.stencilWriteMask),l.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),l.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),mt(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?ue(n.SAMPLE_ALPHA_TO_COVERAGE):ve(n.SAMPLE_ALPHA_TO_COVERAGE)}function Le(de){O!==de&amp;&amp;(de?n.frontFace(n.CW):n.frontFace(n.CCW),O=de)}function Fe(de){de!==Z2?(ue(n.CULL_FACE),de!==L&amp;&amp;(de===Jx?n.cullFace(n.BACK):de===J2?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ve(n.CULL_FACE),L=de}function Ne(de){de!==V&amp;&amp;(I&amp;&amp;n.lineWidth(de),V=de)}function mt(de,tt,Ae){de?(ue(n.POLYGON_OFFSET_FILL),(Z!==tt||z!==Ae)&amp;&amp;(n.polygonOffset(tt,Ae),Z=tt,z=Ae)):ve(n.POLYGON_OFFSET_FILL)}function ze(de){de?ue(n.SCISSOR_TEST):ve(n.SCISSOR_TEST)}function te(de){de===void 0&amp;&amp;(de=n.TEXTURE0+K-1),ee!==de&amp;&amp;(n.activeTexture(de),ee=de)}function H(de,tt,Ae){Ae===void 0&amp;&amp;(ee===null?Ae=n.TEXTURE0+K-1:Ae=ee);let Pe=F[Ae];Pe===void 0&amp;&amp;(Pe={type:void 0,texture:void 0},F[Ae]=Pe),(Pe.type!==de||Pe.texture!==tt)&amp;&amp;(ee!==Ae&amp;&amp;(n.activeTexture(Ae),ee=Ae),n.bindTexture(de,tt||ae[de]),Pe.type=de,Pe.texture=tt)}function pe(){const de=F[ee];de!==void 0&amp;&amp;de.type!==void 0&amp;&amp;(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function Ce(){try{n.compressedTexImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Ue(){try{n.compressedTexImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Me(){try{n.texSubImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Ze(){try{n.texSubImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function qe(){try{n.compressedTexSubImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function ut(){try{n.compressedTexSubImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Ct(){try{n.texStorage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function je(){try{n.texStorage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function ht(){try{n.texImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function St(){try{n.texImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Rt(de){ce.equals(de)===!1&amp;&amp;(n.scissor(de.x,de.y,de.z,de.w),ce.copy(de))}function rt(de){ie.equals(de)===!1&amp;&amp;(n.viewport(de.x,de.y,de.z,de.w),ie.copy(de))}function Gt(de,tt){let Ae=h.get(tt);Ae===void 0&amp;&amp;(Ae=new WeakMap,h.set(tt,Ae));let Pe=Ae.get(de);Pe===void 0&amp;&amp;(Pe=n.getUniformBlockIndex(tt,de.name),Ae.set(de,Pe))}function It(de,tt){const Pe=h.get(tt).get(de);u.get(tt)!==Pe&amp;&amp;(n.uniformBlockBinding(tt,Pe,de.__bindingPointIndex),u.set(tt,Pe))}function gn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},ee=null,F={},p={},m=new WeakMap,g=[],v=null,x=!1,b=null,_=null,T=null,w=null,E=null,R=null,N=null,A=new $e(0,0,0),D=0,C=!1,O=null,L=null,V=null,Z=null,z=null,ce.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),l.reset()}return{buffers:{color:s,depth:o,stencil:l},enable:ue,disable:ve,bindFramebuffer:He,drawBuffers:Xe,useProgram:lt,setBlending:Q,setMaterial:Ve,setFlipSided:Le,setCullFace:Fe,setLineWidth:Ne,setPolygonOffset:mt,setScissorTest:ze,activeTexture:te,bindTexture:H,unbindTexture:pe,compressedTexImage2D:Ce,compressedTexImage3D:Ue,texImage2D:ht,texImage3D:St,updateUBOMapping:Gt,uniformBlockBinding:It,texStorage2D:Ct,texStorage3D:je,texSubImage2D:Me,texSubImage3D:Ze,compressedTexSubImage2D:qe,compressedTexSubImage3D:ut,scissor:Rt,viewport:rt,reset:gn}}function P8(n,e,t,i,r,s,o){const l=e.has(&quot;WEBGL_multisampled_render_to_texture&quot;)?e.get(&quot;WEBGL_multisampled_render_to_texture&quot;):null,u=typeof navigator&gt;&quot;u&quot;?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Oe,f=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas&lt;&quot;u&quot;&amp;&amp;new OffscreenCanvas(1,1).getContext(&quot;2d&quot;)!==null}catch{}function v(te,H){return g?new OffscreenCanvas(te,H):Sd(&quot;canvas&quot;)}function x(te,H,pe){let Ce=1;const Ue=ze(te);if((Ue.width&gt;pe||Ue.height&gt;pe)&amp;&amp;(Ce=pe/Math.max(Ue.width,Ue.height)),Ce&lt;1)if(typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;te instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;te instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;te instanceof ImageBitmap||typeof VideoFrame&lt;&quot;u&quot;&amp;&amp;te instanceof VideoFrame){const Me=Math.floor(Ce*Ue.width),Ze=Math.floor(Ce*Ue.height);p===void 0&amp;&amp;(p=v(Me,Ze));const qe=H?v(Me,Ze):p;return qe.width=Me,qe.height=Ze,qe.getContext(&quot;2d&quot;).drawImage(te,0,0,Me,Ze),console.warn(&quot;THREE.WebGLRenderer: Texture has been resized from (&quot;+Ue.width+&quot;x&quot;+Ue.height+&quot;) to (&quot;+Me+&quot;x&quot;+Ze+&quot;).&quot;),qe}else return&quot;data&quot;in te&amp;&amp;console.warn(&quot;THREE.WebGLRenderer: Image in DataTexture is too big (&quot;+Ue.width+&quot;x&quot;+Ue.height+&quot;).&quot;),te;return te}function b(te){return te.generateMipmaps}function _(te){n.generateMipmap(te)}function T(te){return te.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?n.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(te,H,pe,Ce,Ue=!1){if(te!==null){if(n[te]!==void 0)return n[te];console.warn(&quot;THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format &#x27;&quot;+te+&quot;&#x27;&quot;)}let Me=H;if(H===n.RED&amp;&amp;(pe===n.FLOAT&amp;&amp;(Me=n.R32F),pe===n.HALF_FLOAT&amp;&amp;(Me=n.R16F),pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.R8)),H===n.RED_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.R8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.R16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.R32UI),pe===n.BYTE&amp;&amp;(Me=n.R8I),pe===n.SHORT&amp;&amp;(Me=n.R16I),pe===n.INT&amp;&amp;(Me=n.R32I)),H===n.RG&amp;&amp;(pe===n.FLOAT&amp;&amp;(Me=n.RG32F),pe===n.HALF_FLOAT&amp;&amp;(Me=n.RG16F),pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RG8)),H===n.RG_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RG8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.RG16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.RG32UI),pe===n.BYTE&amp;&amp;(Me=n.RG8I),pe===n.SHORT&amp;&amp;(Me=n.RG16I),pe===n.INT&amp;&amp;(Me=n.RG32I)),H===n.RGB_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RGB8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.RGB16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.RGB32UI),pe===n.BYTE&amp;&amp;(Me=n.RGB8I),pe===n.SHORT&amp;&amp;(Me=n.RGB16I),pe===n.INT&amp;&amp;(Me=n.RGB32I)),H===n.RGBA_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RGBA8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.RGBA16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.RGBA32UI),pe===n.BYTE&amp;&amp;(Me=n.RGBA8I),pe===n.SHORT&amp;&amp;(Me=n.RGBA16I),pe===n.INT&amp;&amp;(Me=n.RGBA32I)),H===n.RGB&amp;&amp;pe===n.UNSIGNED_INT_5_9_9_9_REV&amp;&amp;(Me=n.RGB9_E5),H===n.RGBA){const Ze=Ue?vd:Zt.getTransfer(Ce);pe===n.FLOAT&amp;&amp;(Me=n.RGBA32F),pe===n.HALF_FLOAT&amp;&amp;(Me=n.RGBA16F),pe===n.UNSIGNED_BYTE&amp;&amp;(Me=Ze===On?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&amp;&amp;(Me=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&amp;&amp;(Me=n.RGB5_A1)}return(Me===n.R16F||Me===n.R32F||Me===n.RG16F||Me===n.RG32F||Me===n.RGBA16F||Me===n.RGBA32F)&amp;&amp;e.get(&quot;EXT_color_buffer_float&quot;),Me}function E(te,H){let pe;return te?H===null||H===da||H===sh?pe=n.DEPTH24_STENCIL8:H===Pr?pe=n.DEPTH32F_STENCIL8:H===rh&amp;&amp;(pe=n.DEPTH24_STENCIL8,console.warn(&quot;DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.&quot;)):H===null||H===da||H===sh?pe=n.DEPTH_COMPONENT24:H===Pr?pe=n.DEPTH_COMPONENT32F:H===rh&amp;&amp;(pe=n.DEPTH_COMPONENT16),pe}function R(te,H){return b(te)===!0||te.isFramebufferTexture&amp;&amp;te.minFilter!==xi&amp;&amp;te.minFilter!==fi?Math.log2(Math.max(H.width,H.height))+1:te.mipmaps!==void 0&amp;&amp;te.mipmaps.length&gt;0?te.mipmaps.length:te.isCompressedTexture&amp;&amp;Array.isArray(te.image)?H.mipmaps.length:1}function N(te){const H=te.target;H.removeEventListener(&quot;dispose&quot;,N),D(H),H.isVideoTexture&amp;&amp;f.delete(H)}function A(te){const H=te.target;H.removeEventListener(&quot;dispose&quot;,A),O(H)}function D(te){const H=i.get(te);if(H.__webglInit===void 0)return;const pe=te.source,Ce=m.get(pe);if(Ce){const Ue=Ce[H.__cacheKey];Ue.usedTimes--,Ue.usedTimes===0&amp;&amp;C(te),Object.keys(Ce).length===0&amp;&amp;m.delete(pe)}i.remove(te)}function C(te){const H=i.get(te);n.deleteTexture(H.__webglTexture);const pe=te.source,Ce=m.get(pe);delete Ce[H.__cacheKey],o.memory.textures--}function O(te){const H=i.get(te);if(te.depthTexture&amp;&amp;(te.depthTexture.dispose(),i.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let Ce=0;Ce&lt;6;Ce++){if(Array.isArray(H.__webglFramebuffer[Ce]))for(let Ue=0;Ue&lt;H.__webglFramebuffer[Ce].length;Ue++)n.deleteFramebuffer(H.__webglFramebuffer[Ce][Ue]);else n.deleteFramebuffer(H.__webglFramebuffer[Ce]);H.__webglDepthbuffer&amp;&amp;n.deleteRenderbuffer(H.__webglDepthbuffer[Ce])}else{if(Array.isArray(H.__webglFramebuffer))for(let Ce=0;Ce&lt;H.__webglFramebuffer.length;Ce++)n.deleteFramebuffer(H.__webglFramebuffer[Ce]);else n.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&amp;&amp;n.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&amp;&amp;n.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let Ce=0;Ce&lt;H.__webglColorRenderbuffer.length;Ce++)H.__webglColorRenderbuffer[Ce]&amp;&amp;n.deleteRenderbuffer(H.__webglColorRenderbuffer[Ce]);H.__webglDepthRenderbuffer&amp;&amp;n.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const pe=te.textures;for(let Ce=0,Ue=pe.length;Ce&lt;Ue;Ce++){const Me=i.get(pe[Ce]);Me.__webglTexture&amp;&amp;(n.deleteTexture(Me.__webglTexture),o.memory.textures--),i.remove(pe[Ce])}i.remove(te)}let L=0;function V(){L=0}function Z(){const te=L;return te&gt;=r.maxTextures&amp;&amp;console.warn(&quot;THREE.WebGLTextures: Trying to use &quot;+te+&quot; texture units while this GPU supports only &quot;+r.maxTextures),L+=1,te}function z(te){const H=[];return H.push(te.wrapS),H.push(te.wrapT),H.push(te.wrapR||0),H.push(te.magFilter),H.push(te.minFilter),H.push(te.anisotropy),H.push(te.internalFormat),H.push(te.format),H.push(te.type),H.push(te.generateMipmaps),H.push(te.premultiplyAlpha),H.push(te.flipY),H.push(te.unpackAlignment),H.push(te.colorSpace),H.join()}function K(te,H){const pe=i.get(te);if(te.isVideoTexture&amp;&amp;Ne(te),te.isRenderTargetTexture===!1&amp;&amp;te.version&gt;0&amp;&amp;pe.__version!==te.version){const Ce=te.image;if(Ce===null)console.warn(&quot;THREE.WebGLRenderer: Texture marked for update but no image data found.&quot;);else if(Ce.complete===!1)console.warn(&quot;THREE.WebGLRenderer: Texture marked for update but image is incomplete&quot;);else{ie(pe,te,H);return}}t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+H)}function I(te,H){const pe=i.get(te);if(te.version&gt;0&amp;&amp;pe.__version!==te.version){ie(pe,te,H);return}t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+H)}function j(te,H){const pe=i.get(te);if(te.version&gt;0&amp;&amp;pe.__version!==te.version){ie(pe,te,H);return}t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+H)}function G(te,H){const pe=i.get(te);if(te.version&gt;0&amp;&amp;pe.__version!==te.version){oe(pe,te,H);return}t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+H)}const ee={[ws]:n.REPEAT,[rr]:n.CLAMP_TO_EDGE,[ih]:n.MIRRORED_REPEAT},F={[xi]:n.NEAREST,[ty]:n.NEAREST_MIPMAP_NEAREST,[hc]:n.NEAREST_MIPMAP_LINEAR,[fi]:n.LINEAR,[Ju]:n.LINEAR_MIPMAP_NEAREST,[Zr]:n.LINEAR_MIPMAP_LINEAR},ne={[LD]:n.NEVER,[HD]:n.ALWAYS,[UD]:n.LESS,[lw]:n.LEQUAL,[kD]:n.EQUAL,[BD]:n.GEQUAL,[FD]:n.GREATER,[zD]:n.NOTEQUAL};function le(te,H){if(H.type===Pr&amp;&amp;e.has(&quot;OES_texture_float_linear&quot;)===!1&amp;&amp;(H.magFilter===fi||H.magFilter===Ju||H.magFilter===hc||H.magFilter===Zr||H.minFilter===fi||H.minFilter===Ju||H.minFilter===hc||H.minFilter===Zr)&amp;&amp;console.warn(&quot;THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.&quot;),n.texParameteri(te,n.TEXTURE_WRAP_S,ee[H.wrapS]),n.texParameteri(te,n.TEXTURE_WRAP_T,ee[H.wrapT]),(te===n.TEXTURE_3D||te===n.TEXTURE_2D_ARRAY)&amp;&amp;n.texParameteri(te,n.TEXTURE_WRAP_R,ee[H.wrapR]),n.texParameteri(te,n.TEXTURE_MAG_FILTER,F[H.magFilter]),n.texParameteri(te,n.TEXTURE_MIN_FILTER,F[H.minFilter]),H.compareFunction&amp;&amp;(n.texParameteri(te,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(te,n.TEXTURE_COMPARE_FUNC,ne[H.compareFunction])),e.has(&quot;EXT_texture_filter_anisotropic&quot;)===!0){if(H.magFilter===xi||H.minFilter!==hc&amp;&amp;H.minFilter!==Zr||H.type===Pr&amp;&amp;e.has(&quot;OES_texture_float_linear&quot;)===!1)return;if(H.anisotropy&gt;1||i.get(H).__currentAnisotropy){const pe=e.get(&quot;EXT_texture_filter_anisotropic&quot;);n.texParameterf(te,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,r.getMaxAnisotropy())),i.get(H).__currentAnisotropy=H.anisotropy}}}function ce(te,H){let pe=!1;te.__webglInit===void 0&amp;&amp;(te.__webglInit=!0,H.addEventListener(&quot;dispose&quot;,N));const Ce=H.source;let Ue=m.get(Ce);Ue===void 0&amp;&amp;(Ue={},m.set(Ce,Ue));const Me=z(H);if(Me!==te.__cacheKey){Ue[Me]===void 0&amp;&amp;(Ue[Me]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),Ue[Me].usedTimes++;const Ze=Ue[te.__cacheKey];Ze!==void 0&amp;&amp;(Ue[te.__cacheKey].usedTimes--,Ze.usedTimes===0&amp;&amp;C(H)),te.__cacheKey=Me,te.__webglTexture=Ue[Me].texture}return pe}function ie(te,H,pe){let Ce=n.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&amp;&amp;(Ce=n.TEXTURE_2D_ARRAY),H.isData3DTexture&amp;&amp;(Ce=n.TEXTURE_3D);const Ue=ce(te,H),Me=H.source;t.bindTexture(Ce,te.__webglTexture,n.TEXTURE0+pe);const Ze=i.get(Me);if(Me.version!==Ze.__version||Ue===!0){t.activeTexture(n.TEXTURE0+pe);const qe=Zt.getPrimaries(Zt.workingColorSpace),ut=H.colorSpace===ta?null:Zt.getPrimaries(H.colorSpace),Ct=H.colorSpace===ta||qe===ut?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);let je=x(H.image,!1,r.maxTextureSize);je=mt(H,je);const ht=s.convert(H.format,H.colorSpace),St=s.convert(H.type);let Rt=w(H.internalFormat,ht,St,H.colorSpace,H.isVideoTexture);le(Ce,H);let rt;const Gt=H.mipmaps,It=H.isVideoTexture!==!0,gn=Ze.__version===void 0||Ue===!0,de=Me.dataReady,tt=R(H,je);if(H.isDepthTexture)Rt=E(H.format===ah,H.type),gn&amp;&amp;(It?t.texStorage2D(n.TEXTURE_2D,1,Rt,je.width,je.height):t.texImage2D(n.TEXTURE_2D,0,Rt,je.width,je.height,0,ht,St,null));else if(H.isDataTexture)if(Gt.length&gt;0){It&amp;&amp;gn&amp;&amp;t.texStorage2D(n.TEXTURE_2D,tt,Rt,Gt[0].width,Gt[0].height);for(let Ae=0,Pe=Gt.length;Ae&lt;Pe;Ae++)rt=Gt[Ae],It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,rt.width,rt.height,ht,St,rt.data):t.texImage2D(n.TEXTURE_2D,Ae,Rt,rt.width,rt.height,0,ht,St,rt.data);H.generateMipmaps=!1}else It?(gn&amp;&amp;t.texStorage2D(n.TEXTURE_2D,tt,Rt,je.width,je.height),de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,0,0,0,je.width,je.height,ht,St,je.data)):t.texImage2D(n.TEXTURE_2D,0,Rt,je.width,je.height,0,ht,St,je.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){It&amp;&amp;gn&amp;&amp;t.texStorage3D(n.TEXTURE_2D_ARRAY,tt,Rt,Gt[0].width,Gt[0].height,je.depth);for(let Ae=0,Pe=Gt.length;Ae&lt;Pe;Ae++)if(rt=Gt[Ae],H.format!==vr)if(ht!==null)if(It){if(de)if(H.layerUpdates.size&gt;0){const st=hS(rt.width,rt.height,H.format,H.type);for(const Qe of H.layerUpdates){const Ut=rt.data.subarray(Qe*st/rt.data.BYTES_PER_ELEMENT,(Qe+1)*st/rt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,Qe,rt.width,rt.height,1,ht,Ut)}H.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,rt.width,rt.height,je.depth,ht,rt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ae,Rt,rt.width,rt.height,je.depth,0,rt.data,0,0);else console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()&quot;);else It?de&amp;&amp;t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,rt.width,rt.height,je.depth,ht,St,rt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ae,Rt,rt.width,rt.height,je.depth,0,ht,St,rt.data)}else{It&amp;&amp;gn&amp;&amp;t.texStorage2D(n.TEXTURE_2D,tt,Rt,Gt[0].width,Gt[0].height);for(let Ae=0,Pe=Gt.length;Ae&lt;Pe;Ae++)rt=Gt[Ae],H.format!==vr?ht!==null?It?de&amp;&amp;t.compressedTexSubImage2D(n.TEXTURE_2D,Ae,0,0,rt.width,rt.height,ht,rt.data):t.compressedTexImage2D(n.TEXTURE_2D,Ae,Rt,rt.width,rt.height,0,rt.data):console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()&quot;):It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,rt.width,rt.height,ht,St,rt.data):t.texImage2D(n.TEXTURE_2D,Ae,Rt,rt.width,rt.height,0,ht,St,rt.data)}else if(H.isDataArrayTexture)if(It){if(gn&amp;&amp;t.texStorage3D(n.TEXTURE_2D_ARRAY,tt,Rt,je.width,je.height,je.depth),de)if(H.layerUpdates.size&gt;0){const Ae=hS(je.width,je.height,H.format,H.type);for(const Pe of H.layerUpdates){const st=je.data.subarray(Pe*Ae/je.data.BYTES_PER_ELEMENT,(Pe+1)*Ae/je.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Pe,je.width,je.height,1,ht,St,st)}H.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,je.width,je.height,je.depth,ht,St,je.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Rt,je.width,je.height,je.depth,0,ht,St,je.data);else if(H.isData3DTexture)It?(gn&amp;&amp;t.texStorage3D(n.TEXTURE_3D,tt,Rt,je.width,je.height,je.depth),de&amp;&amp;t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,je.width,je.height,je.depth,ht,St,je.data)):t.texImage3D(n.TEXTURE_3D,0,Rt,je.width,je.height,je.depth,0,ht,St,je.data);else if(H.isFramebufferTexture){if(gn)if(It)t.texStorage2D(n.TEXTURE_2D,tt,Rt,je.width,je.height);else{let Ae=je.width,Pe=je.height;for(let st=0;st&lt;tt;st++)t.texImage2D(n.TEXTURE_2D,st,Rt,Ae,Pe,0,ht,St,null),Ae&gt;&gt;=1,Pe&gt;&gt;=1}}else if(Gt.length&gt;0){if(It&amp;&amp;gn){const Ae=ze(Gt[0]);t.texStorage2D(n.TEXTURE_2D,tt,Rt,Ae.width,Ae.height)}for(let Ae=0,Pe=Gt.length;Ae&lt;Pe;Ae++)rt=Gt[Ae],It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,ht,St,rt):t.texImage2D(n.TEXTURE_2D,Ae,Rt,ht,St,rt);H.generateMipmaps=!1}else if(It){if(gn){const Ae=ze(je);t.texStorage2D(n.TEXTURE_2D,tt,Rt,Ae.width,Ae.height)}de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,0,0,0,ht,St,je)}else t.texImage2D(n.TEXTURE_2D,0,Rt,ht,St,je);b(H)&amp;&amp;_(Ce),Ze.__version=Me.version,H.onUpdate&amp;&amp;H.onUpdate(H)}te.__version=H.version}function oe(te,H,pe){if(H.image.length!==6)return;const Ce=ce(te,H),Ue=H.source;t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+pe);const Me=i.get(Ue);if(Ue.version!==Me.__version||Ce===!0){t.activeTexture(n.TEXTURE0+pe);const Ze=Zt.getPrimaries(Zt.workingColorSpace),qe=H.colorSpace===ta?null:Zt.getPrimaries(H.colorSpace),ut=H.colorSpace===ta||Ze===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ut);const Ct=H.isCompressedTexture||H.image[0].isCompressedTexture,je=H.image[0]&amp;&amp;H.image[0].isDataTexture,ht=[];for(let Pe=0;Pe&lt;6;Pe++)!Ct&amp;&amp;!je?ht[Pe]=x(H.image[Pe],!0,r.maxCubemapSize):ht[Pe]=je?H.image[Pe].image:H.image[Pe],ht[Pe]=mt(H,ht[Pe]);const St=ht[0],Rt=s.convert(H.format,H.colorSpace),rt=s.convert(H.type),Gt=w(H.internalFormat,Rt,rt,H.colorSpace),It=H.isVideoTexture!==!0,gn=Me.__version===void 0||Ce===!0,de=Ue.dataReady;let tt=R(H,St);le(n.TEXTURE_CUBE_MAP,H);let Ae;if(Ct){It&amp;&amp;gn&amp;&amp;t.texStorage2D(n.TEXTURE_CUBE_MAP,tt,Gt,St.width,St.height);for(let Pe=0;Pe&lt;6;Pe++){Ae=ht[Pe].mipmaps;for(let st=0;st&lt;Ae.length;st++){const Qe=Ae[st];H.format!==vr?Rt!==null?It?de&amp;&amp;t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st,0,0,Qe.width,Qe.height,Rt,Qe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st,Gt,Qe.width,Qe.height,0,Qe.data):console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()&quot;):It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st,0,0,Qe.width,Qe.height,Rt,rt,Qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st,Gt,Qe.width,Qe.height,0,Rt,rt,Qe.data)}}}else{if(Ae=H.mipmaps,It&amp;&amp;gn){Ae.length&gt;0&amp;&amp;tt++;const Pe=ze(ht[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,tt,Gt,Pe.width,Pe.height)}for(let Pe=0;Pe&lt;6;Pe++)if(je){It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,ht[Pe].width,ht[Pe].height,Rt,rt,ht[Pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Gt,ht[Pe].width,ht[Pe].height,0,Rt,rt,ht[Pe].data);for(let st=0;st&lt;Ae.length;st++){const Ut=Ae[st].image[Pe].image;It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st+1,0,0,Ut.width,Ut.height,Rt,rt,Ut.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st+1,Gt,Ut.width,Ut.height,0,Rt,rt,Ut.data)}}else{It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,Rt,rt,ht[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Gt,Rt,rt,ht[Pe]);for(let st=0;st&lt;Ae.length;st++){const Qe=Ae[st];It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st+1,0,0,Rt,rt,Qe.image[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st+1,Gt,Rt,rt,Qe.image[Pe])}}}b(H)&amp;&amp;_(n.TEXTURE_CUBE_MAP),Me.__version=Ue.version,H.onUpdate&amp;&amp;H.onUpdate(H)}te.__version=H.version}function ae(te,H,pe,Ce,Ue,Me){const Ze=s.convert(pe.format,pe.colorSpace),qe=s.convert(pe.type),ut=w(pe.internalFormat,Ze,qe,pe.colorSpace),Ct=i.get(H),je=i.get(pe);if(je.__renderTarget=H,!Ct.__hasExternalTextures){const ht=Math.max(1,H.width&gt;&gt;Me),St=Math.max(1,H.height&gt;&gt;Me);Ue===n.TEXTURE_3D||Ue===n.TEXTURE_2D_ARRAY?t.texImage3D(Ue,Me,ut,ht,St,H.depth,0,Ze,qe,null):t.texImage2D(Ue,Me,ut,ht,St,0,Ze,qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,te),Fe(H)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ce,Ue,je.__webglTexture,0,Le(H)):(Ue===n.TEXTURE_2D||Ue&gt;=n.TEXTURE_CUBE_MAP_POSITIVE_X&amp;&amp;Ue&lt;=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&amp;&amp;n.framebufferTexture2D(n.FRAMEBUFFER,Ce,Ue,je.__webglTexture,Me),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(te,H,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,te),H.depthBuffer){const Ce=H.depthTexture,Ue=Ce&amp;&amp;Ce.isDepthTexture?Ce.type:null,Me=E(H.stencilBuffer,Ue),Ze=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=Le(H);Fe(H)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,Me,H.width,H.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Me,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,Me,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,te)}else{const Ce=H.textures;for(let Ue=0;Ue&lt;Ce.length;Ue++){const Me=Ce[Ue],Ze=s.convert(Me.format,Me.colorSpace),qe=s.convert(Me.type),ut=w(Me.internalFormat,Ze,qe,Me.colorSpace),Ct=Le(H);pe&amp;&amp;Fe(H)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,ut,H.width,H.height):Fe(H)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ct,ut,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,ut,H.width,H.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ve(te,H){if(H&amp;&amp;H.isWebGLCubeRenderTarget)throw new Error(&quot;Depth Texture with cube render targets is not supported&quot;);if(t.bindFramebuffer(n.FRAMEBUFFER,te),!(H.depthTexture&amp;&amp;H.depthTexture.isDepthTexture))throw new Error(&quot;renderTarget.depthTexture must be an instance of THREE.DepthTexture&quot;);const Ce=i.get(H.depthTexture);Ce.__renderTarget=H,(!Ce.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&amp;&amp;(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),K(H.depthTexture,0);const Ue=Ce.__webglTexture,Me=Le(H);if(H.depthTexture.format===oh)Fe(H)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0);else if(H.depthTexture.format===ah)Fe(H)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0);else throw new Error(&quot;Unknown depthTexture format&quot;)}function He(te){const H=i.get(te),pe=te.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==te.depthTexture){const Ce=te.depthTexture;if(H.__depthDisposeCallback&amp;&amp;H.__depthDisposeCallback(),Ce){const Ue=()=&gt;{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,Ce.removeEventListener(&quot;dispose&quot;,Ue)};Ce.addEventListener(&quot;dispose&quot;,Ue),H.__depthDisposeCallback=Ue}H.__boundDepthTexture=Ce}if(te.depthTexture&amp;&amp;!H.__autoAllocateDepthBuffer){if(pe)throw new Error(&quot;target.depthTexture not supported in Cube render targets&quot;);const Ce=te.texture.mipmaps;Ce&amp;&amp;Ce.length&gt;0?ve(H.__webglFramebuffer[0],te):ve(H.__webglFramebuffer,te)}else if(pe){H.__webglDepthbuffer=[];for(let Ce=0;Ce&lt;6;Ce++)if(t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer[Ce]),H.__webglDepthbuffer[Ce]===void 0)H.__webglDepthbuffer[Ce]=n.createRenderbuffer(),ue(H.__webglDepthbuffer[Ce],te,!1);else{const Ue=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Me=H.__webglDepthbuffer[Ce];n.bindRenderbuffer(n.RENDERBUFFER,Me),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,Me)}}else{const Ce=te.texture.mipmaps;if(Ce&amp;&amp;Ce.length&gt;0?t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=n.createRenderbuffer(),ue(H.__webglDepthbuffer,te,!1);else{const Ue=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Me=H.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Me),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,Me)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Xe(te,H,pe){const Ce=i.get(te);H!==void 0&amp;&amp;ae(Ce.__webglFramebuffer,te,te.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),pe!==void 0&amp;&amp;He(te)}function lt(te){const H=te.texture,pe=i.get(te),Ce=i.get(H);te.addEventListener(&quot;dispose&quot;,A);const Ue=te.textures,Me=te.isWebGLCubeRenderTarget===!0,Ze=Ue.length&gt;1;if(Ze||(Ce.__webglTexture===void 0&amp;&amp;(Ce.__webglTexture=n.createTexture()),Ce.__version=H.version,o.memory.textures++),Me){pe.__webglFramebuffer=[];for(let qe=0;qe&lt;6;qe++)if(H.mipmaps&amp;&amp;H.mipmaps.length&gt;0){pe.__webglFramebuffer[qe]=[];for(let ut=0;ut&lt;H.mipmaps.length;ut++)pe.__webglFramebuffer[qe][ut]=n.createFramebuffer()}else pe.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(H.mipmaps&amp;&amp;H.mipmaps.length&gt;0){pe.__webglFramebuffer=[];for(let qe=0;qe&lt;H.mipmaps.length;qe++)pe.__webglFramebuffer[qe]=n.createFramebuffer()}else pe.__webglFramebuffer=n.createFramebuffer();if(Ze)for(let qe=0,ut=Ue.length;qe&lt;ut;qe++){const Ct=i.get(Ue[qe]);Ct.__webglTexture===void 0&amp;&amp;(Ct.__webglTexture=n.createTexture(),o.memory.textures++)}if(te.samples&gt;0&amp;&amp;Fe(te)===!1){pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let qe=0;qe&lt;Ue.length;qe++){const ut=Ue[qe];pe.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[qe]);const Ct=s.convert(ut.format,ut.colorSpace),je=s.convert(ut.type),ht=w(ut.internalFormat,Ct,je,ut.colorSpace,te.isXRRenderTarget===!0),St=Le(te);n.renderbufferStorageMultisample(n.RENDERBUFFER,St,ht,te.width,te.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,pe.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),te.depthBuffer&amp;&amp;(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),ue(pe.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Me){t.bindTexture(n.TEXTURE_CUBE_MAP,Ce.__webglTexture),le(n.TEXTURE_CUBE_MAP,H);for(let qe=0;qe&lt;6;qe++)if(H.mipmaps&amp;&amp;H.mipmaps.length&gt;0)for(let ut=0;ut&lt;H.mipmaps.length;ut++)ae(pe.__webglFramebuffer[qe][ut],te,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ut);else ae(pe.__webglFramebuffer[qe],te,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);b(H)&amp;&amp;_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ze){for(let qe=0,ut=Ue.length;qe&lt;ut;qe++){const Ct=Ue[qe],je=i.get(Ct);t.bindTexture(n.TEXTURE_2D,je.__webglTexture),le(n.TEXTURE_2D,Ct),ae(pe.__webglFramebuffer,te,Ct,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),b(Ct)&amp;&amp;_(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&amp;&amp;(qe=te.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,Ce.__webglTexture),le(qe,H),H.mipmaps&amp;&amp;H.mipmaps.length&gt;0)for(let ut=0;ut&lt;H.mipmaps.length;ut++)ae(pe.__webglFramebuffer[ut],te,H,n.COLOR_ATTACHMENT0,qe,ut);else ae(pe.__webglFramebuffer,te,H,n.COLOR_ATTACHMENT0,qe,0);b(H)&amp;&amp;_(qe),t.unbindTexture()}te.depthBuffer&amp;&amp;He(te)}function We(te){const H=te.textures;for(let pe=0,Ce=H.length;pe&lt;Ce;pe++){const Ue=H[pe];if(b(Ue)){const Me=T(te),Ze=i.get(Ue).__webglTexture;t.bindTexture(Me,Ze),_(Me),t.unbindTexture()}}}const Ye=[],Q=[];function Ve(te){if(te.samples&gt;0){if(Fe(te)===!1){const H=te.textures,pe=te.width,Ce=te.height;let Ue=n.COLOR_BUFFER_BIT;const Me=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=i.get(te),qe=H.length&gt;1;if(qe)for(let Ct=0;Ct&lt;H.length;Ct++)t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer);const ut=te.texture.mipmaps;ut&amp;&amp;ut.length&gt;0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let Ct=0;Ct&lt;H.length;Ct++){if(te.resolveDepthBuffer&amp;&amp;(te.depthBuffer&amp;&amp;(Ue|=n.DEPTH_BUFFER_BIT),te.stencilBuffer&amp;&amp;te.resolveStencilBuffer&amp;&amp;(Ue|=n.STENCIL_BUFFER_BIT)),qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[Ct]);const je=i.get(H[Ct]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,je,0)}n.blitFramebuffer(0,0,pe,Ce,0,0,pe,Ce,Ue,n.NEAREST),u===!0&amp;&amp;(Ye.length=0,Q.length=0,Ye.push(n.COLOR_ATTACHMENT0+Ct),te.depthBuffer&amp;&amp;te.resolveDepthBuffer===!1&amp;&amp;(Ye.push(Me),Q.push(Me),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ye))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let Ct=0;Ct&lt;H.length;Ct++){t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[Ct]);const je=i.get(H[Ct]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.TEXTURE_2D,je,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}else if(te.depthBuffer&amp;&amp;te.resolveDepthBuffer===!1&amp;&amp;u){const H=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[H])}}}function Le(te){return Math.min(r.maxSamples,te.samples)}function Fe(te){const H=i.get(te);return te.samples&gt;0&amp;&amp;e.has(&quot;WEBGL_multisampled_render_to_texture&quot;)===!0&amp;&amp;H.__useRenderToTexture!==!1}function Ne(te){const H=o.render.frame;f.get(te)!==H&amp;&amp;(f.set(te,H),te.update())}function mt(te,H){const pe=te.colorSpace,Ce=te.format,Ue=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||pe!==fr&amp;&amp;pe!==ta&amp;&amp;(Zt.getTransfer(pe)===On?(Ce!==vr||Ue!==es)&amp;&amp;console.warn(&quot;THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.&quot;):console.error(&quot;THREE.WebGLTextures: Unsupported texture color space:&quot;,pe)),H}function ze(te){return typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;te instanceof HTMLImageElement?(h.width=te.naturalWidth||te.width,h.height=te.naturalHeight||te.height):typeof VideoFrame&lt;&quot;u&quot;&amp;&amp;te instanceof VideoFrame?(h.width=te.displayWidth,h.height=te.displayHeight):(h.width=te.width,h.height=te.height),h}this.allocateTextureUnit=Z,this.resetTextureUnits=V,this.setTexture2D=K,this.setTexture2DArray=I,this.setTexture3D=j,this.setTextureCube=G,this.rebindTextures=Xe,this.setupRenderTarget=lt,this.updateRenderTargetMipmap=We,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=He,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=Fe}function GN(n,e){function t(i,r=ta){let s;const o=Zt.getTransfer(r);if(i===es)return n.UNSIGNED_BYTE;if(i===iy)return n.UNSIGNED_SHORT_4_4_4_4;if(i===ry)return n.UNSIGNED_SHORT_5_5_5_1;if(i===tw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===QS)return n.BYTE;if(i===ew)return n.SHORT;if(i===rh)return n.UNSIGNED_SHORT;if(i===ny)return n.INT;if(i===da)return n.UNSIGNED_INT;if(i===Pr)return n.FLOAT;if(i===wh)return n.HALF_FLOAT;if(i===nw)return n.ALPHA;if(i===iw)return n.RGB;if(i===vr)return n.RGBA;if(i===oh)return n.DEPTH_COMPONENT;if(i===ah)return n.DEPTH_STENCIL;if(i===Gd)return n.RED;if(i===jd)return n.RED_INTEGER;if(i===rw)return n.RG;if(i===sy)return n.RG_INTEGER;if(i===oy)return n.RGBA_INTEGER;if(i===id||i===rd||i===sd||i===od)if(o===On)if(s=e.get(&quot;WEBGL_compressed_texture_s3tc_srgb&quot;),s!==null){if(i===id)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===rd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===sd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===od)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get(&quot;WEBGL_compressed_texture_s3tc&quot;),s!==null){if(i===id)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===rd)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===sd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===od)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Jg||i===Qg||i===e0||i===t0)if(s=e.get(&quot;WEBGL_compressed_texture_pvrtc&quot;),s!==null){if(i===Jg)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Qg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===e0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===t0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===n0||i===i0||i===r0)if(s=e.get(&quot;WEBGL_compressed_texture_etc&quot;),s!==null){if(i===n0||i===i0)return o===On?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===r0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===s0||i===o0||i===a0||i===l0||i===c0||i===u0||i===h0||i===f0||i===d0||i===p0||i===m0||i===g0||i===y0||i===_0)if(s=e.get(&quot;WEBGL_compressed_texture_astc&quot;),s!==null){if(i===s0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===o0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===a0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===l0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===c0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===u0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===h0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===f0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===d0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===p0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===m0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===g0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===y0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===_0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===ad||i===v0||i===b0)if(s=e.get(&quot;EXT_texture_compression_bptc&quot;),s!==null){if(i===ad)return o===On?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===v0)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===b0)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===sw||i===x0||i===S0||i===w0)if(s=e.get(&quot;EXT_texture_compression_rgtc&quot;),s!==null){if(i===ad)return s.COMPRESSED_RED_RGTC1_EXT;if(i===x0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===S0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===w0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===sh?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const L8=`
void main() {

    gl_Position = vec4( position, 1.0 );

}`,U8=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

    vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

    if ( coord.x &gt;= 1.0 ) {

            gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

    } else {

            gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

    }

}`;class k8{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Kn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&amp;&amp;(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&amp;&amp;this.mesh===null){const t=e.cameras[0].viewport,i=new Ts({vertexShader:L8,fragmentShader:U8,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Sn(new Ah(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class F8 extends To{constructor(e,t){super();const i=this;let r=null,s=1,o=null,l=&quot;local-floor&quot;,u=1,h=null,f=null,p=null,m=null,g=null,v=null;const x=new k8,b=t.getContextAttributes();let _=null,T=null;const w=[],E=[],R=new Oe;let N=null;const A=new Yn;A.viewport=new yn;const D=new Yn;D.viewport=new yn;const C=[A,D],O=new RN;let L=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let oe=w[ie];return oe===void 0&amp;&amp;(oe=new Og,w[ie]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(ie){let oe=w[ie];return oe===void 0&amp;&amp;(oe=new Og,w[ie]=oe),oe.getGripSpace()},this.getHand=function(ie){let oe=w[ie];return oe===void 0&amp;&amp;(oe=new Og,w[ie]=oe),oe.getHandSpace()};function Z(ie){const oe=E.indexOf(ie.inputSource);if(oe===-1)return;const ae=w[oe];ae!==void 0&amp;&amp;(ae.update(ie.inputSource,ie.frame,h||o),ae.dispatchEvent({type:ie.type,data:ie.inputSource}))}function z(){r.removeEventListener(&quot;select&quot;,Z),r.removeEventListener(&quot;selectstart&quot;,Z),r.removeEventListener(&quot;selectend&quot;,Z),r.removeEventListener(&quot;squeeze&quot;,Z),r.removeEventListener(&quot;squeezestart&quot;,Z),r.removeEventListener(&quot;squeezeend&quot;,Z),r.removeEventListener(&quot;end&quot;,z),r.removeEventListener(&quot;inputsourceschange&quot;,K);for(let ie=0;ie&lt;w.length;ie++){const oe=E[ie];oe!==null&amp;&amp;(E[ie]=null,w[ie].disconnect(oe))}L=null,V=null,x.reset(),e.setRenderTarget(_),g=null,m=null,p=null,r=null,T=null,ce.stop(),i.isPresenting=!1,e.setPixelRatio(N),e.setSize(R.width,R.height,!1),i.dispatchEvent({type:&quot;sessionend&quot;})}this.setFramebufferScaleFactor=function(ie){s=ie,i.isPresenting===!0&amp;&amp;console.warn(&quot;THREE.WebXRManager: Cannot change framebuffer scale while presenting.&quot;)},this.setReferenceSpaceType=function(ie){l=ie,i.isPresenting===!0&amp;&amp;console.warn(&quot;THREE.WebXRManager: Cannot change reference space type while presenting.&quot;)},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(ie){h=ie},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return p},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(ie){if(r=ie,r!==null){if(_=e.getRenderTarget(),r.addEventListener(&quot;select&quot;,Z),r.addEventListener(&quot;selectstart&quot;,Z),r.addEventListener(&quot;selectend&quot;,Z),r.addEventListener(&quot;squeeze&quot;,Z),r.addEventListener(&quot;squeezestart&quot;,Z),r.addEventListener(&quot;squeezeend&quot;,Z),r.addEventListener(&quot;end&quot;,z),r.addEventListener(&quot;inputsourceschange&quot;,K),b.xrCompatible!==!0&amp;&amp;await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(R),typeof XRWebGLBinding&lt;&quot;u&quot;&amp;&amp;&quot;createProjectionLayer&quot;in XRWebGLBinding.prototype){let ae=null,ue=null,ve=null;b.depth&amp;&amp;(ve=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ae=b.stencil?ah:oh,ue=b.stencil?sh:da);const He={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:s};p=new XRWebGLBinding(r,t),m=p.createProjectionLayer(He),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),T=new Js(m.textureWidth,m.textureHeight,{format:vr,type:es,depthTexture:new by(m.textureWidth,m.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const ae={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,ae),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),T=new Js(g.framebufferWidth,g.framebufferHeight,{format:vr,type:es,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(u),h=null,o=await r.requestReferenceSpace(l),ce.setContext(r),ce.start(),i.isPresenting=!0,i.dispatchEvent({type:&quot;sessionstart&quot;})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function K(ie){for(let oe=0;oe&lt;ie.removed.length;oe++){const ae=ie.removed[oe],ue=E.indexOf(ae);ue&gt;=0&amp;&amp;(E[ue]=null,w[ue].disconnect(ae))}for(let oe=0;oe&lt;ie.added.length;oe++){const ae=ie.added[oe];let ue=E.indexOf(ae);if(ue===-1){for(let He=0;He&lt;w.length;He++)if(He&gt;=E.length){E.push(ae),ue=He;break}else if(E[He]===null){E[He]=ae,ue=He;break}if(ue===-1)break}const ve=w[ue];ve&amp;&amp;ve.connect(ae)}}const I=new Y,j=new Y;function G(ie,oe,ae){I.setFromMatrixPosition(oe.matrixWorld),j.setFromMatrixPosition(ae.matrixWorld);const ue=I.distanceTo(j),ve=oe.projectionMatrix.elements,He=ae.projectionMatrix.elements,Xe=ve[14]/(ve[10]-1),lt=ve[14]/(ve[10]+1),We=(ve[9]+1)/ve[5],Ye=(ve[9]-1)/ve[5],Q=(ve[8]-1)/ve[0],Ve=(He[8]+1)/He[0],Le=Xe*Q,Fe=Xe*Ve,Ne=ue/(-Q+Ve),mt=Ne*-Q;if(oe.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(mt),ie.translateZ(Ne),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),ve[10]===-1)ie.projectionMatrix.copy(oe.projectionMatrix),ie.projectionMatrixInverse.copy(oe.projectionMatrixInverse);else{const ze=Xe+Ne,te=lt+Ne,H=Le-mt,pe=Fe+(ue-mt),Ce=We*lt/te*ze,Ue=Ye*lt/te*ze;ie.projectionMatrix.makePerspective(H,pe,Ce,Ue,ze,te),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function ee(ie,oe){oe===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(oe.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(r===null)return;let oe=ie.near,ae=ie.far;x.texture!==null&amp;&amp;(x.depthNear&gt;0&amp;&amp;(oe=x.depthNear),x.depthFar&gt;0&amp;&amp;(ae=x.depthFar)),O.near=D.near=A.near=oe,O.far=D.far=A.far=ae,(L!==O.near||V!==O.far)&amp;&amp;(r.updateRenderState({depthNear:O.near,depthFar:O.far}),L=O.near,V=O.far),A.layers.mask=ie.layers.mask|2,D.layers.mask=ie.layers.mask|4,O.layers.mask=A.layers.mask|D.layers.mask;const ue=ie.parent,ve=O.cameras;ee(O,ue);for(let He=0;He&lt;ve.length;He++)ee(ve[He],ue);ve.length===2?G(O,A,D):O.projectionMatrix.copy(A.projectionMatrix),F(ie,O,ue)};function F(ie,oe,ae){ae===null?ie.matrix.copy(oe.matrixWorld):(ie.matrix.copy(ae.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(oe.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(oe.projectionMatrix),ie.projectionMatrixInverse.copy(oe.projectionMatrixInverse),ie.isPerspectiveCamera&amp;&amp;(ie.fov=uh*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(m===null&amp;&amp;g===null))return u},this.setFoveation=function(ie){u=ie,m!==null&amp;&amp;(m.fixedFoveation=ie),g!==null&amp;&amp;g.fixedFoveation!==void 0&amp;&amp;(g.fixedFoveation=ie)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(O)};let ne=null;function le(ie,oe){if(f=oe.getViewerPose(h||o),v=oe,f!==null){const ae=f.views;g!==null&amp;&amp;(e.setRenderTargetFramebuffer(T,g.framebuffer),e.setRenderTarget(T));let ue=!1;ae.length!==O.cameras.length&amp;&amp;(O.cameras.length=0,ue=!0);for(let Xe=0;Xe&lt;ae.length;Xe++){const lt=ae[Xe];let We=null;if(g!==null)We=g.getViewport(lt);else{const Q=p.getViewSubImage(m,lt);We=Q.viewport,Xe===0&amp;&amp;(e.setRenderTargetTextures(T,Q.colorTexture,Q.depthStencilTexture),e.setRenderTarget(T))}let Ye=C[Xe];Ye===void 0&amp;&amp;(Ye=new Yn,Ye.layers.enable(Xe),Ye.viewport=new yn,C[Xe]=Ye),Ye.matrix.fromArray(lt.transform.matrix),Ye.matrix.decompose(Ye.position,Ye.quaternion,Ye.scale),Ye.projectionMatrix.fromArray(lt.projectionMatrix),Ye.projectionMatrixInverse.copy(Ye.projectionMatrix).invert(),Ye.viewport.set(We.x,We.y,We.width,We.height),Xe===0&amp;&amp;(O.matrix.copy(Ye.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),ue===!0&amp;&amp;O.cameras.push(Ye)}const ve=r.enabledFeatures;if(ve&amp;&amp;ve.includes(&quot;depth-sensing&quot;)&amp;&amp;r.depthUsage==&quot;gpu-optimized&quot;&amp;&amp;p){const Xe=p.getDepthInformation(ae[0]);Xe&amp;&amp;Xe.isValid&amp;&amp;Xe.texture&amp;&amp;x.init(e,Xe,r.renderState)}}for(let ae=0;ae&lt;w.length;ae++){const ue=E[ae],ve=w[ae];ue!==null&amp;&amp;ve!==void 0&amp;&amp;ve.update(ue,oe,h||o)}ne&amp;&amp;ne(ie,oe),oe.detectedPlanes&amp;&amp;i.dispatchEvent({type:&quot;planesdetected&quot;,data:oe}),v=null}const ce=new FN;ce.setAnimationLoop(le),this.setAnimationLoop=function(ie){ne=ie},this.dispose=function(){}}}const Ql=new Sr,z8=new yt;function B8(n,e){function t(b,_){b.matrixAutoUpdate===!0&amp;&amp;b.updateMatrix(),_.value.copy(b.matrix)}function i(b,_){_.color.getRGB(b.fogColor.value,XD(n)),_.isFog?(b.fogNear.value=_.near,b.fogFar.value=_.far):_.isFogExp2&amp;&amp;(b.fogDensity.value=_.density)}function r(b,_,T,w,E){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(b,_):_.isMeshToonMaterial?(s(b,_),p(b,_)):_.isMeshPhongMaterial?(s(b,_),f(b,_)):_.isMeshStandardMaterial?(s(b,_),m(b,_),_.isMeshPhysicalMaterial&amp;&amp;g(b,_,E)):_.isMeshMatcapMaterial?(s(b,_),v(b,_)):_.isMeshDepthMaterial?s(b,_):_.isMeshDistanceMaterial?(s(b,_),x(b,_)):_.isMeshNormalMaterial?s(b,_):_.isLineBasicMaterial?(o(b,_),_.isLineDashedMaterial&amp;&amp;l(b,_)):_.isPointsMaterial?u(b,_,T,w):_.isSpriteMaterial?h(b,_):_.isShadowMaterial?(b.color.value.copy(_.color),b.opacity.value=_.opacity):_.isShaderMaterial&amp;&amp;(_.uniformsNeedUpdate=!1)}function s(b,_){b.opacity.value=_.opacity,_.color&amp;&amp;b.diffuse.value.copy(_.color),_.emissive&amp;&amp;b.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&amp;&amp;(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.bumpMap&amp;&amp;(b.bumpMap.value=_.bumpMap,t(_.bumpMap,b.bumpMapTransform),b.bumpScale.value=_.bumpScale,_.side===xr&amp;&amp;(b.bumpScale.value*=-1)),_.normalMap&amp;&amp;(b.normalMap.value=_.normalMap,t(_.normalMap,b.normalMapTransform),b.normalScale.value.copy(_.normalScale),_.side===xr&amp;&amp;b.normalScale.value.negate()),_.displacementMap&amp;&amp;(b.displacementMap.value=_.displacementMap,t(_.displacementMap,b.displacementMapTransform),b.displacementScale.value=_.displacementScale,b.displacementBias.value=_.displacementBias),_.emissiveMap&amp;&amp;(b.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,b.emissiveMapTransform)),_.specularMap&amp;&amp;(b.specularMap.value=_.specularMap,t(_.specularMap,b.specularMapTransform)),_.alphaTest&gt;0&amp;&amp;(b.alphaTest.value=_.alphaTest);const T=e.get(_),w=T.envMap,E=T.envMapRotation;w&amp;&amp;(b.envMap.value=w,Ql.copy(E),Ql.x*=-1,Ql.y*=-1,Ql.z*=-1,w.isCubeTexture&amp;&amp;w.isRenderTargetTexture===!1&amp;&amp;(Ql.y*=-1,Ql.z*=-1),b.envMapRotation.value.setFromMatrix4(z8.makeRotationFromEuler(Ql)),b.flipEnvMap.value=w.isCubeTexture&amp;&amp;w.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=_.reflectivity,b.ior.value=_.ior,b.refractionRatio.value=_.refractionRatio),_.lightMap&amp;&amp;(b.lightMap.value=_.lightMap,b.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,b.lightMapTransform)),_.aoMap&amp;&amp;(b.aoMap.value=_.aoMap,b.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,b.aoMapTransform))}function o(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.mapTransform))}function l(b,_){b.dashSize.value=_.dashSize,b.totalSize.value=_.dashSize+_.gapSize,b.scale.value=_.scale}function u(b,_,T,w){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.size.value=_.size*T,b.scale.value=w*.5,_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.uvTransform)),_.alphaMap&amp;&amp;(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest&gt;0&amp;&amp;(b.alphaTest.value=_.alphaTest)}function h(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.rotation.value=_.rotation,_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&amp;&amp;(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest&gt;0&amp;&amp;(b.alphaTest.value=_.alphaTest)}function f(b,_){b.specular.value.copy(_.specular),b.shininess.value=Math.max(_.shininess,1e-4)}function p(b,_){_.gradientMap&amp;&amp;(b.gradientMap.value=_.gradientMap)}function m(b,_){b.metalness.value=_.metalness,_.metalnessMap&amp;&amp;(b.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,b.metalnessMapTransform)),b.roughness.value=_.roughness,_.roughnessMap&amp;&amp;(b.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,b.roughnessMapTransform)),_.envMap&amp;&amp;(b.envMapIntensity.value=_.envMapIntensity)}function g(b,_,T){b.ior.value=_.ior,_.sheen&gt;0&amp;&amp;(b.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),b.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&amp;&amp;(b.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,b.sheenColorMapTransform)),_.sheenRoughnessMap&amp;&amp;(b.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,b.sheenRoughnessMapTransform))),_.clearcoat&gt;0&amp;&amp;(b.clearcoat.value=_.clearcoat,b.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&amp;&amp;(b.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,b.clearcoatMapTransform)),_.clearcoatRoughnessMap&amp;&amp;(b.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&amp;&amp;(b.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===xr&amp;&amp;b.clearcoatNormalScale.value.negate())),_.dispersion&gt;0&amp;&amp;(b.dispersion.value=_.dispersion),_.iridescence&gt;0&amp;&amp;(b.iridescence.value=_.iridescence,b.iridescenceIOR.value=_.iridescenceIOR,b.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&amp;&amp;(b.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,b.iridescenceMapTransform)),_.iridescenceThicknessMap&amp;&amp;(b.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),_.transmission&gt;0&amp;&amp;(b.transmission.value=_.transmission,b.transmissionSamplerMap.value=T.texture,b.transmissionSamplerSize.value.set(T.width,T.height),_.transmissionMap&amp;&amp;(b.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,b.transmissionMapTransform)),b.thickness.value=_.thickness,_.thicknessMap&amp;&amp;(b.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=_.attenuationDistance,b.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy&gt;0&amp;&amp;(b.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&amp;&amp;(b.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=_.specularIntensity,b.specularColor.value.copy(_.specularColor),_.specularColorMap&amp;&amp;(b.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,b.specularColorMapTransform)),_.specularIntensityMap&amp;&amp;(b.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,b.specularIntensityMapTransform))}function v(b,_){_.matcap&amp;&amp;(b.matcap.value=_.matcap)}function x(b,_){const T=e.get(_).light;b.referencePosition.value.setFromMatrixPosition(T.matrixWorld),b.nearDistance.value=T.shadow.camera.near,b.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function H8(n,e,t,i){let r={},s={},o=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(T,w){const E=w.program;i.uniformBlockBinding(T,E)}function h(T,w){let E=r[T.id];E===void 0&amp;&amp;(v(T),E=f(T),r[T.id]=E,T.addEventListener(&quot;dispose&quot;,b));const R=w.program;i.updateUBOMapping(T,R);const N=e.render.frame;s[T.id]!==N&amp;&amp;(m(T),s[T.id]=N)}function f(T){const w=p();T.__bindingPointIndex=w;const E=n.createBuffer(),R=T.__size,N=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,R,N),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,E),E}function p(){for(let T=0;T&lt;l;T++)if(o.indexOf(T)===-1)return o.push(T),T;return console.error(&quot;THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.&quot;),0}function m(T){const w=r[T.id],E=T.uniforms,R=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let N=0,A=E.length;N&lt;A;N++){const D=Array.isArray(E[N])?E[N]:[E[N]];for(let C=0,O=D.length;C&lt;O;C++){const L=D[C];if(g(L,N,C,R)===!0){const V=L.__offset,Z=Array.isArray(L.value)?L.value:[L.value];let z=0;for(let K=0;K&lt;Z.length;K++){const I=Z[K],j=x(I);typeof I==&quot;number&quot;||typeof I==&quot;boolean&quot;?(L.__data[0]=I,n.bufferSubData(n.UNIFORM_BUFFER,V+z,L.__data)):I.isMatrix3?(L.__data[0]=I.elements[0],L.__data[1]=I.elements[1],L.__data[2]=I.elements[2],L.__data[3]=0,L.__data[4]=I.elements[3],L.__data[5]=I.elements[4],L.__data[6]=I.elements[5],L.__data[7]=0,L.__data[8]=I.elements[6],L.__data[9]=I.elements[7],L.__data[10]=I.elements[8],L.__data[11]=0):(I.toArray(L.__data,z),z+=j.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,L.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(T,w,E,R){const N=T.value,A=w+&quot;_&quot;+E;if(R[A]===void 0)return typeof N==&quot;number&quot;||typeof N==&quot;boolean&quot;?R[A]=N:R[A]=N.clone(),!0;{const D=R[A];if(typeof N==&quot;number&quot;||typeof N==&quot;boolean&quot;){if(D!==N)return R[A]=N,!0}else if(D.equals(N)===!1)return D.copy(N),!0}return!1}function v(T){const w=T.uniforms;let E=0;const R=16;for(let A=0,D=w.length;A&lt;D;A++){const C=Array.isArray(w[A])?w[A]:[w[A]];for(let O=0,L=C.length;O&lt;L;O++){const V=C[O],Z=Array.isArray(V.value)?V.value:[V.value];for(let z=0,K=Z.length;z&lt;K;z++){const I=Z[z],j=x(I),G=E%R,ee=G%j.boundary,F=G+ee;E+=ee,F!==0&amp;&amp;R-F&lt;j.storage&amp;&amp;(E+=R-F),V.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=E,E+=j.storage}}}const N=E%R;return N&gt;0&amp;&amp;(E+=R-N),T.__size=E,T.__cache={},this}function x(T){const w={boundary:0,storage:0};return typeof T==&quot;number&quot;||typeof T==&quot;boolean&quot;?(w.boundary=4,w.storage=4):T.isVector2?(w.boundary=8,w.storage=8):T.isVector3||T.isColor?(w.boundary=16,w.storage=12):T.isVector4?(w.boundary=16,w.storage=16):T.isMatrix3?(w.boundary=48,w.storage=48):T.isMatrix4?(w.boundary=64,w.storage=64):T.isTexture?console.warn(&quot;THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.&quot;):console.warn(&quot;THREE.WebGLRenderer: Unsupported uniform value type.&quot;,T),w}function b(T){const w=T.target;w.removeEventListener(&quot;dispose&quot;,b);const E=o.indexOf(w.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function _(){for(const T in r)n.deleteBuffer(r[T]);o=[],r={},s={}}return{bind:u,update:h,dispose:_}}class jN{constructor(e={}){const{canvas:t=GD(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:f=&quot;default&quot;,failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext&lt;&quot;u&quot;&amp;&amp;i instanceof WebGLRenderingContext)throw new Error(&quot;THREE.WebGLRenderer: WebGL 1 is not supported since r163.&quot;);g=i.getContextAttributes().alpha}else g=o;const v=new Uint32Array(4),x=new Int32Array(4);let b=null,_=null;const T=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ca,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const E=this;let R=!1;this._outputColorSpace=Nn;let N=0,A=0,D=null,C=-1,O=null;const L=new yn,V=new yn;let Z=null;const z=new $e(0);let K=0,I=t.width,j=t.height,G=1,ee=null,F=null;const ne=new yn(0,0,I,j),le=new yn(0,0,I,j);let ce=!1;const ie=new Th;let oe=!1,ae=!1;const ue=new yt,ve=new yt,He=new Y,Xe=new yn,lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let We=!1;function Ye(){return D===null?G:1}let Q=i;function Ve(q,fe){return t.getContext(q,fe)}try{const q={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:p};if(&quot;setAttribute&quot;in t&amp;&amp;t.setAttribute(&quot;data-engine&quot;,`three.js r${Q0}`),t.addEventListener(&quot;webglcontextlost&quot;,Pe,!1),t.addEventListener(&quot;webglcontextrestored&quot;,st,!1),t.addEventListener(&quot;webglcontextcreationerror&quot;,Qe,!1),Q===null){const fe=&quot;webgl2&quot;;if(Q=Ve(fe,q),Q===null)throw Ve(fe)?new Error(&quot;Error creating WebGL context with your selected attributes.&quot;):new Error(&quot;Error creating WebGL context.&quot;)}}catch(q){throw console.error(&quot;THREE.WebGLRenderer: &quot;+q.message),q}let Le,Fe,Ne,mt,ze,te,H,pe,Ce,Ue,Me,Ze,qe,ut,Ct,je,ht,St,Rt,rt,Gt,It,gn,de;function tt(){Le=new QV(Q),Le.init(),It=new GN(Q,Le),Fe=new XV(Q,Le,e,It),Ne=new I8(Q,Le),Fe.reverseDepthBuffer&amp;&amp;m&amp;&amp;Ne.buffers.depth.setReversed(!0),mt=new n5(Q),ze=new b8,te=new P8(Q,Le,Ne,ze,Fe,It,mt),H=new YV(E),pe=new JV(E),Ce=new l4(Q),gn=new jV(Q,Ce),Ue=new e5(Q,Ce,mt,gn),Me=new r5(Q,Ue,Ce,mt),Rt=new i5(Q,Fe,te),je=new qV(ze),Ze=new v8(E,H,pe,Le,Fe,gn,je),qe=new B8(E,ze),ut=new S8,Ct=new C8(Le),St=new GV(E,H,pe,Ne,Me,g,u),ht=new D8(E,Me,Fe),de=new H8(Q,mt,Fe,Ne),rt=new WV(Q,Le,mt),Gt=new t5(Q,Le,mt),mt.programs=Ze.programs,E.capabilities=Fe,E.extensions=Le,E.properties=ze,E.renderLists=ut,E.shadowMap=ht,E.state=Ne,E.info=mt}tt();const Ae=new F8(E,Q);this.xr=Ae,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const q=Le.get(&quot;WEBGL_lose_context&quot;);q&amp;&amp;q.loseContext()},this.forceContextRestore=function(){const q=Le.get(&quot;WEBGL_lose_context&quot;);q&amp;&amp;q.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(q){q!==void 0&amp;&amp;(G=q,this.setSize(I,j,!1))},this.getSize=function(q){return q.set(I,j)},this.setSize=function(q,fe,be=!0){if(Ae.isPresenting){console.warn(&quot;THREE.WebGLRenderer: Can&#x27;t change size while VR device is presenting.&quot;);return}I=q,j=fe,t.width=Math.floor(q*G),t.height=Math.floor(fe*G),be===!0&amp;&amp;(t.style.width=q+&quot;px&quot;,t.style.height=fe+&quot;px&quot;),this.setViewport(0,0,q,fe)},this.getDrawingBufferSize=function(q){return q.set(I*G,j*G).floor()},this.setDrawingBufferSize=function(q,fe,be){I=q,j=fe,G=be,t.width=Math.floor(q*be),t.height=Math.floor(fe*be),this.setViewport(0,0,q,fe)},this.getCurrentViewport=function(q){return q.copy(L)},this.getViewport=function(q){return q.copy(ne)},this.setViewport=function(q,fe,be,we){q.isVector4?ne.set(q.x,q.y,q.z,q.w):ne.set(q,fe,be,we),Ne.viewport(L.copy(ne).multiplyScalar(G).round())},this.getScissor=function(q){return q.copy(le)},this.setScissor=function(q,fe,be,we){q.isVector4?le.set(q.x,q.y,q.z,q.w):le.set(q,fe,be,we),Ne.scissor(V.copy(le).multiplyScalar(G).round())},this.getScissorTest=function(){return ce},this.setScissorTest=function(q){Ne.setScissorTest(ce=q)},this.setOpaqueSort=function(q){ee=q},this.setTransparentSort=function(q){F=q},this.getClearColor=function(q){return q.copy(St.getClearColor())},this.setClearColor=function(){St.setClearColor(...arguments)},this.getClearAlpha=function(){return St.getClearAlpha()},this.setClearAlpha=function(){St.setClearAlpha(...arguments)},this.clear=function(q=!0,fe=!0,be=!0){let we=0;if(q){let me=!1;if(D!==null){const Ge=D.texture.format;me=Ge===oy||Ge===sy||Ge===jd}if(me){const Ge=D.texture.type,Je=Ge===es||Ge===da||Ge===rh||Ge===sh||Ge===iy||Ge===ry,et=St.getClearColor(),ft=St.getClearAlpha(),Ot=et.r,Et=et.g,bt=et.b;Je?(v[0]=Ot,v[1]=Et,v[2]=bt,v[3]=ft,Q.clearBufferuiv(Q.COLOR,0,v)):(x[0]=Ot,x[1]=Et,x[2]=bt,x[3]=ft,Q.clearBufferiv(Q.COLOR,0,x))}else we|=Q.COLOR_BUFFER_BIT}fe&amp;&amp;(we|=Q.DEPTH_BUFFER_BIT),be&amp;&amp;(we|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener(&quot;webglcontextlost&quot;,Pe,!1),t.removeEventListener(&quot;webglcontextrestored&quot;,st,!1),t.removeEventListener(&quot;webglcontextcreationerror&quot;,Qe,!1),St.dispose(),ut.dispose(),Ct.dispose(),ze.dispose(),H.dispose(),pe.dispose(),Me.dispose(),gn.dispose(),de.dispose(),Ze.dispose(),Ae.dispose(),Ae.removeEventListener(&quot;sessionstart&quot;,Zn),Ae.removeEventListener(&quot;sessionend&quot;,pi),Hi.stop()};function Pe(q){q.preventDefault(),console.log(&quot;THREE.WebGLRenderer: Context Lost.&quot;),R=!0}function st(){console.log(&quot;THREE.WebGLRenderer: Context Restored.&quot;),R=!1;const q=mt.autoReset,fe=ht.enabled,be=ht.autoUpdate,we=ht.needsUpdate,me=ht.type;tt(),mt.autoReset=q,ht.enabled=fe,ht.autoUpdate=be,ht.needsUpdate=we,ht.type=me}function Qe(q){console.error(&quot;THREE.WebGLRenderer: A WebGL context could not be created. Reason: &quot;,q.statusMessage)}function Ut(q){const fe=q.target;fe.removeEventListener(&quot;dispose&quot;,Ut),wn(fe)}function wn(q){jn(q),ze.remove(q)}function jn(q){const fe=ze.get(q).programs;fe!==void 0&amp;&amp;(fe.forEach(function(be){Ze.releaseProgram(be)}),q.isShaderMaterial&amp;&amp;Ze.releaseShaderCache(q))}this.renderBufferDirect=function(q,fe,be,we,me,Ge){fe===null&amp;&amp;(fe=lt);const Je=me.isMesh&amp;&amp;me.matrixWorld.determinant()&lt;0,et=Os(q,fe,be,we,me);Ne.setMaterial(we,Je);let ft=be.index,Ot=1;if(we.wireframe===!0){if(ft=Ue.getWireframeAttribute(be),ft===void 0)return;Ot=2}const Et=be.drawRange,bt=be.attributes.position;let Bt=Et.start*Ot,un=(Et.start+Et.count)*Ot;Ge!==null&amp;&amp;(Bt=Math.max(Bt,Ge.start*Ot),un=Math.min(un,(Ge.start+Ge.count)*Ot)),ft!==null?(Bt=Math.max(Bt,0),un=Math.min(un,ft.count)):bt!=null&amp;&amp;(Bt=Math.max(Bt,0),un=Math.min(un,bt.count));const In=un-Bt;if(In&lt;0||In===1/0)return;gn.setup(me,we,et,be,ft);let Qt,$t=rt;if(ft!==null&amp;&amp;(Qt=Ce.get(ft),$t=Gt,$t.setIndex(Qt)),me.isMesh)we.wireframe===!0?(Ne.setLineWidth(we.wireframeLinewidth*Ye()),$t.setMode(Q.LINES)):$t.setMode(Q.TRIANGLES);else if(me.isLine){let wt=we.linewidth;wt===void 0&amp;&amp;(wt=1),Ne.setLineWidth(wt*Ye()),me.isLineSegments?$t.setMode(Q.LINES):me.isLineLoop?$t.setMode(Q.LINE_LOOP):$t.setMode(Q.LINE_STRIP)}else me.isPoints?$t.setMode(Q.POINTS):me.isSprite&amp;&amp;$t.setMode(Q.TRIANGLES);if(me.isBatchedMesh)if(me._multiDrawInstances!==null)Rg(&quot;THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.&quot;),$t.renderMultiDrawInstances(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount,me._multiDrawInstances);else if(Le.get(&quot;WEBGL_multi_draw&quot;))$t.renderMultiDraw(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount);else{const wt=me._multiDrawStarts,Hn=me._multiDrawCounts,rn=me._multiDrawCount,Jn=ft?Ce.get(ft).bytesPerElement:1,Tn=ze.get(we).currentProgram.getUniforms();for(let vn=0;vn&lt;rn;vn++)Tn.setValue(Q,&quot;_gl_DrawID&quot;,vn),$t.render(wt[vn]/Jn,Hn[vn])}else if(me.isInstancedMesh)$t.renderInstances(Bt,In,me.count);else if(be.isInstancedBufferGeometry){const wt=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,Hn=Math.min(be.instanceCount,wt);$t.renderInstances(Bt,In,Hn)}else $t.render(Bt,In)};function zt(q,fe,be){q.transparent===!0&amp;&amp;q.side===Ki&amp;&amp;q.forceSinglePass===!1?(q.side=xr,q.needsUpdate=!0,os(q,fe,be),q.side=Qr,q.needsUpdate=!0,os(q,fe,be),q.side=Ki):os(q,fe,be)}this.compile=function(q,fe,be=null){be===null&amp;&amp;(be=q),_=Ct.get(be),_.init(fe),w.push(_),be.traverseVisible(function(me){me.isLight&amp;&amp;me.layers.test(fe.layers)&amp;&amp;(_.pushLight(me),me.castShadow&amp;&amp;_.pushShadow(me))}),q!==be&amp;&amp;q.traverseVisible(function(me){me.isLight&amp;&amp;me.layers.test(fe.layers)&amp;&amp;(_.pushLight(me),me.castShadow&amp;&amp;_.pushShadow(me))}),_.setupLights();const we=new Set;return q.traverse(function(me){if(!(me.isMesh||me.isPoints||me.isLine||me.isSprite))return;const Ge=me.material;if(Ge)if(Array.isArray(Ge))for(let Je=0;Je&lt;Ge.length;Je++){const et=Ge[Je];zt(et,be,me),we.add(et)}else zt(Ge,be,me),we.add(Ge)}),_=w.pop(),we},this.compileAsync=function(q,fe,be=null){const we=this.compile(q,fe,be);return new Promise(me=&gt;{function Ge(){if(we.forEach(function(Je){ze.get(Je).currentProgram.isReady()&amp;&amp;we.delete(Je)}),we.size===0){me(q);return}setTimeout(Ge,10)}Le.get(&quot;KHR_parallel_shader_compile&quot;)!==null?Ge():setTimeout(Ge,10)})};let Bi=null;function oi(q){Bi&amp;&amp;Bi(q)}function Zn(){Hi.stop()}function pi(){Hi.start()}const Hi=new FN;Hi.setAnimationLoop(oi),typeof self&lt;&quot;u&quot;&amp;&amp;Hi.setContext(self),this.setAnimationLoop=function(q){Bi=q,Ae.setAnimationLoop(q),q===null?Hi.stop():Hi.start()},Ae.addEventListener(&quot;sessionstart&quot;,Zn),Ae.addEventListener(&quot;sessionend&quot;,pi),this.render=function(q,fe){if(fe!==void 0&amp;&amp;fe.isCamera!==!0){console.error(&quot;THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.&quot;);return}if(R===!0)return;if(q.matrixWorldAutoUpdate===!0&amp;&amp;q.updateMatrixWorld(),fe.parent===null&amp;&amp;fe.matrixWorldAutoUpdate===!0&amp;&amp;fe.updateMatrixWorld(),Ae.enabled===!0&amp;&amp;Ae.isPresenting===!0&amp;&amp;(Ae.cameraAutoUpdate===!0&amp;&amp;Ae.updateCamera(fe),fe=Ae.getCamera()),q.isScene===!0&amp;&amp;q.onBeforeRender(E,q,fe,D),_=Ct.get(q,w.length),_.init(fe),w.push(_),ve.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse),ie.setFromProjectionMatrix(ve),ae=this.localClippingEnabled,oe=je.init(this.clippingPlanes,ae),b=ut.get(q,T.length),b.init(),T.push(b),Ae.enabled===!0&amp;&amp;Ae.isPresenting===!0){const Ge=E.xr.getDepthSensingMesh();Ge!==null&amp;&amp;Cs(Ge,fe,-1/0,E.sortObjects)}Cs(q,fe,0,E.sortObjects),b.finish(),E.sortObjects===!0&amp;&amp;b.sort(ee,F),We=Ae.enabled===!1||Ae.isPresenting===!1||Ae.hasDepthSensing()===!1,We&amp;&amp;St.addToRenderList(b,q),this.info.render.frame++,oe===!0&amp;&amp;je.beginShadows();const be=_.state.shadowsArray;ht.render(be,q,fe),oe===!0&amp;&amp;je.endShadows(),this.info.autoReset===!0&amp;&amp;this.info.reset();const we=b.opaque,me=b.transmissive;if(_.setupLights(),fe.isArrayCamera){const Ge=fe.cameras;if(me.length&gt;0)for(let Je=0,et=Ge.length;Je&lt;et;Je++){const ft=Ge[Je];Co(we,me,q,ft)}We&amp;&amp;St.render(q);for(let Je=0,et=Ge.length;Je&lt;et;Je++){const ft=Ge[Je];ya(b,q,ft,ft.viewport)}}else me.length&gt;0&amp;&amp;Co(we,me,q,fe),We&amp;&amp;St.render(q),ya(b,q,fe);D!==null&amp;&amp;A===0&amp;&amp;(te.updateMultisampleRenderTarget(D),te.updateRenderTargetMipmap(D)),q.isScene===!0&amp;&amp;q.onAfterRender(E,q,fe),gn.resetDefaultState(),C=-1,O=null,w.pop(),w.length&gt;0?(_=w[w.length-1],oe===!0&amp;&amp;je.setGlobalState(E.clippingPlanes,_.state.camera)):_=null,T.pop(),T.length&gt;0?b=T[T.length-1]:b=null};function Cs(q,fe,be,we){if(q.visible===!1)return;if(q.layers.test(fe.layers)){if(q.isGroup)be=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&amp;&amp;q.update(fe);else if(q.isLight)_.pushLight(q),q.castShadow&amp;&amp;_.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||ie.intersectsSprite(q)){we&amp;&amp;Xe.setFromMatrixPosition(q.matrixWorld).applyMatrix4(ve);const Je=Me.update(q),et=q.material;et.visible&amp;&amp;b.push(q,Je,et,be,Xe.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&amp;&amp;(!q.frustumCulled||ie.intersectsObject(q))){const Je=Me.update(q),et=q.material;if(we&amp;&amp;(q.boundingSphere!==void 0?(q.boundingSphere===null&amp;&amp;q.computeBoundingSphere(),Xe.copy(q.boundingSphere.center)):(Je.boundingSphere===null&amp;&amp;Je.computeBoundingSphere(),Xe.copy(Je.boundingSphere.center)),Xe.applyMatrix4(q.matrixWorld).applyMatrix4(ve)),Array.isArray(et)){const ft=Je.groups;for(let Ot=0,Et=ft.length;Ot&lt;Et;Ot++){const bt=ft[Ot],Bt=et[bt.materialIndex];Bt&amp;&amp;Bt.visible&amp;&amp;b.push(q,Je,Bt,be,Xe.z,bt)}}else et.visible&amp;&amp;b.push(q,Je,et,be,Xe.z,null)}}const Ge=q.children;for(let Je=0,et=Ge.length;Je&lt;et;Je++)Cs(Ge[Je],fe,be,we)}function ya(q,fe,be,we){const me=q.opaque,Ge=q.transmissive,Je=q.transparent;_.setupLightsView(be),oe===!0&amp;&amp;je.setGlobalState(E.clippingPlanes,be),we&amp;&amp;Ne.viewport(L.copy(we)),me.length&gt;0&amp;&amp;Rs(me,fe,be),Ge.length&gt;0&amp;&amp;Rs(Ge,fe,be),Je.length&gt;0&amp;&amp;Rs(Je,fe,be),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),Ne.setPolygonOffset(!1)}function Co(q,fe,be,we){if((be.isScene===!0?be.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[we.id]===void 0&amp;&amp;(_.state.transmissionRenderTarget[we.id]=new Js(1,1,{generateMipmaps:!0,type:Le.has(&quot;EXT_color_buffer_half_float&quot;)||Le.has(&quot;EXT_color_buffer_float&quot;)?wh:es,minFilter:Zr,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Zt.workingColorSpace}));const Ge=_.state.transmissionRenderTarget[we.id],Je=we.viewport||L;Ge.setSize(Je.z*E.transmissionResolutionScale,Je.w*E.transmissionResolutionScale);const et=E.getRenderTarget();E.setRenderTarget(Ge),E.getClearColor(z),K=E.getClearAlpha(),K&lt;1&amp;&amp;E.setClearColor(16777215,.5),E.clear(),We&amp;&amp;St.render(be);const ft=E.toneMapping;E.toneMapping=ca;const Ot=we.viewport;if(we.viewport!==void 0&amp;&amp;(we.viewport=void 0),_.setupLightsView(we),oe===!0&amp;&amp;je.setGlobalState(E.clippingPlanes,we),Rs(q,be,we),te.updateMultisampleRenderTarget(Ge),te.updateRenderTargetMipmap(Ge),Le.has(&quot;WEBGL_multisampled_render_to_texture&quot;)===!1){let Et=!1;for(let bt=0,Bt=fe.length;bt&lt;Bt;bt++){const un=fe[bt],In=un.object,Qt=un.geometry,$t=un.material,wt=un.group;if($t.side===Ki&amp;&amp;In.layers.test(we.layers)){const Hn=$t.side;$t.side=xr,$t.needsUpdate=!0,kr(In,be,we,Qt,$t,wt),$t.side=Hn,$t.needsUpdate=!0,Et=!0}}Et===!0&amp;&amp;(te.updateMultisampleRenderTarget(Ge),te.updateRenderTargetMipmap(Ge))}E.setRenderTarget(et),E.setClearColor(z,K),Ot!==void 0&amp;&amp;(we.viewport=Ot),E.toneMapping=ft}function Rs(q,fe,be){const we=fe.isScene===!0?fe.overrideMaterial:null;for(let me=0,Ge=q.length;me&lt;Ge;me++){const Je=q[me],et=Je.object,ft=Je.geometry,Ot=Je.group;let Et=Je.material;Et.allowOverride===!0&amp;&amp;we!==null&amp;&amp;(Et=we),et.layers.test(be.layers)&amp;&amp;kr(et,fe,be,ft,Et,Ot)}}function kr(q,fe,be,we,me,Ge){q.onBeforeRender(E,fe,be,we,me,Ge),q.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),me.onBeforeRender(E,fe,be,we,q,Ge),me.transparent===!0&amp;&amp;me.side===Ki&amp;&amp;me.forceSinglePass===!1?(me.side=xr,me.needsUpdate=!0,E.renderBufferDirect(be,fe,we,me,q,Ge),me.side=Qr,me.needsUpdate=!0,E.renderBufferDirect(be,fe,we,me,q,Ge),me.side=Ki):E.renderBufferDirect(be,fe,we,me,q,Ge),q.onAfterRender(E,fe,be,we,me,Ge)}function os(q,fe,be){fe.isScene!==!0&amp;&amp;(fe=lt);const we=ze.get(q),me=_.state.lights,Ge=_.state.shadowsArray,Je=me.state.version,et=Ze.getParameters(q,me.state,Ge,fe,be),ft=Ze.getProgramCacheKey(et);let Ot=we.programs;we.environment=q.isMeshStandardMaterial?fe.environment:null,we.fog=fe.fog,we.envMap=(q.isMeshStandardMaterial?pe:H).get(q.envMap||we.environment),we.envMapRotation=we.environment!==null&amp;&amp;q.envMap===null?fe.environmentRotation:q.envMapRotation,Ot===void 0&amp;&amp;(q.addEventListener(&quot;dispose&quot;,Ut),Ot=new Map,we.programs=Ot);let Et=Ot.get(ft);if(Et!==void 0){if(we.currentProgram===Et&amp;&amp;we.lightsStateVersion===Je)return Er(q,et),Et}else et.uniforms=Ze.getUniforms(q),q.onBeforeCompile(et,E),Et=Ze.acquireProgram(et,ft),Ot.set(ft,Et),we.uniforms=et.uniforms;const bt=we.uniforms;return(!q.isShaderMaterial&amp;&amp;!q.isRawShaderMaterial||q.clipping===!0)&amp;&amp;(bt.clippingPlanes=je.uniform),Er(q,et),we.needsLights=Wn(q),we.lightsStateVersion=Je,we.needsLights&amp;&amp;(bt.ambientLightColor.value=me.state.ambient,bt.lightProbe.value=me.state.probe,bt.directionalLights.value=me.state.directional,bt.directionalLightShadows.value=me.state.directionalShadow,bt.spotLights.value=me.state.spot,bt.spotLightShadows.value=me.state.spotShadow,bt.rectAreaLights.value=me.state.rectArea,bt.ltc_1.value=me.state.rectAreaLTC1,bt.ltc_2.value=me.state.rectAreaLTC2,bt.pointLights.value=me.state.point,bt.pointLightShadows.value=me.state.pointShadow,bt.hemisphereLights.value=me.state.hemi,bt.directionalShadowMap.value=me.state.directionalShadowMap,bt.directionalShadowMatrix.value=me.state.directionalShadowMatrix,bt.spotShadowMap.value=me.state.spotShadowMap,bt.spotLightMatrix.value=me.state.spotLightMatrix,bt.spotLightMap.value=me.state.spotLightMap,bt.pointShadowMap.value=me.state.pointShadowMap,bt.pointShadowMatrix.value=me.state.pointShadowMatrix),we.currentProgram=Et,we.uniformsList=null,Et}function wr(q){if(q.uniformsList===null){const fe=q.currentProgram.getUniforms();q.uniformsList=Dg.seqWithValue(fe.seq,q.uniforms)}return q.uniformsList}function Er(q,fe){const be=ze.get(q);be.outputColorSpace=fe.outputColorSpace,be.batching=fe.batching,be.batchingColor=fe.batchingColor,be.instancing=fe.instancing,be.instancingColor=fe.instancingColor,be.instancingMorph=fe.instancingMorph,be.skinning=fe.skinning,be.morphTargets=fe.morphTargets,be.morphNormals=fe.morphNormals,be.morphColors=fe.morphColors,be.morphTargetsCount=fe.morphTargetsCount,be.numClippingPlanes=fe.numClippingPlanes,be.numIntersection=fe.numClipIntersection,be.vertexAlphas=fe.vertexAlphas,be.vertexTangents=fe.vertexTangents,be.toneMapping=fe.toneMapping}function Os(q,fe,be,we,me){fe.isScene!==!0&amp;&amp;(fe=lt),te.resetTextureUnits();const Ge=fe.fog,Je=we.isMeshStandardMaterial?fe.environment:null,et=D===null?E.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:fr,ft=(we.isMeshStandardMaterial?pe:H).get(we.envMap||Je),Ot=we.vertexColors===!0&amp;&amp;!!be.attributes.color&amp;&amp;be.attributes.color.itemSize===4,Et=!!be.attributes.tangent&amp;&amp;(!!we.normalMap||we.anisotropy&gt;0),bt=!!be.morphAttributes.position,Bt=!!be.morphAttributes.normal,un=!!be.morphAttributes.color;let In=ca;we.toneMapped&amp;&amp;(D===null||D.isXRRenderTarget===!0)&amp;&amp;(In=E.toneMapping);const Qt=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,$t=Qt!==void 0?Qt.length:0,wt=ze.get(we),Hn=_.state.lights;if(oe===!0&amp;&amp;(ae===!0||q!==O)){const ei=q===O&amp;&amp;we.id===C;je.setState(we,q,ei)}let rn=!1;we.version===wt.__version?(wt.needsLights&amp;&amp;wt.lightsStateVersion!==Hn.state.version||wt.outputColorSpace!==et||me.isBatchedMesh&amp;&amp;wt.batching===!1||!me.isBatchedMesh&amp;&amp;wt.batching===!0||me.isBatchedMesh&amp;&amp;wt.batchingColor===!0&amp;&amp;me.colorTexture===null||me.isBatchedMesh&amp;&amp;wt.batchingColor===!1&amp;&amp;me.colorTexture!==null||me.isInstancedMesh&amp;&amp;wt.instancing===!1||!me.isInstancedMesh&amp;&amp;wt.instancing===!0||me.isSkinnedMesh&amp;&amp;wt.skinning===!1||!me.isSkinnedMesh&amp;&amp;wt.skinning===!0||me.isInstancedMesh&amp;&amp;wt.instancingColor===!0&amp;&amp;me.instanceColor===null||me.isInstancedMesh&amp;&amp;wt.instancingColor===!1&amp;&amp;me.instanceColor!==null||me.isInstancedMesh&amp;&amp;wt.instancingMorph===!0&amp;&amp;me.morphTexture===null||me.isInstancedMesh&amp;&amp;wt.instancingMorph===!1&amp;&amp;me.morphTexture!==null||wt.envMap!==ft||we.fog===!0&amp;&amp;wt.fog!==Ge||wt.numClippingPlanes!==void 0&amp;&amp;(wt.numClippingPlanes!==je.numPlanes||wt.numIntersection!==je.numIntersection)||wt.vertexAlphas!==Ot||wt.vertexTangents!==Et||wt.morphTargets!==bt||wt.morphNormals!==Bt||wt.morphColors!==un||wt.toneMapping!==In||wt.morphTargetsCount!==$t)&amp;&amp;(rn=!0):(rn=!0,wt.__version=we.version);let Jn=wt.currentProgram;rn===!0&amp;&amp;(Jn=os(we,fe,me));let Tn=!1,vn=!1,Tr=!1;const Mn=Jn.getUniforms(),Ni=wt.uniforms;if(Ne.useProgram(Jn.program)&amp;&amp;(Tn=!0,vn=!0,Tr=!0),we.id!==C&amp;&amp;(C=we.id,vn=!0),Tn||O!==q){Ne.buffers.depth.getReversed()?(ue.copy(q.projectionMatrix),PF(ue),LF(ue),Mn.setValue(Q,&quot;projectionMatrix&quot;,ue)):Mn.setValue(Q,&quot;projectionMatrix&quot;,q.projectionMatrix),Mn.setValue(Q,&quot;viewMatrix&quot;,q.matrixWorldInverse);const ai=Mn.map.cameraPosition;ai!==void 0&amp;&amp;ai.setValue(Q,He.setFromMatrixPosition(q.matrixWorld)),Fe.logarithmicDepthBuffer&amp;&amp;Mn.setValue(Q,&quot;logDepthBufFC&quot;,2/(Math.log(q.far+1)/Math.LN2)),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&amp;&amp;Mn.setValue(Q,&quot;isOrthographic&quot;,q.isOrthographicCamera===!0),O!==q&amp;&amp;(O=q,vn=!0,Tr=!0)}if(me.isSkinnedMesh){Mn.setOptional(Q,me,&quot;bindMatrix&quot;),Mn.setOptional(Q,me,&quot;bindMatrixInverse&quot;);const ei=me.skeleton;ei&amp;&amp;(ei.boneTexture===null&amp;&amp;ei.computeBoneTexture(),Mn.setValue(Q,&quot;boneTexture&quot;,ei.boneTexture,te))}me.isBatchedMesh&amp;&amp;(Mn.setOptional(Q,me,&quot;batchingTexture&quot;),Mn.setValue(Q,&quot;batchingTexture&quot;,me._matricesTexture,te),Mn.setOptional(Q,me,&quot;batchingIdTexture&quot;),Mn.setValue(Q,&quot;batchingIdTexture&quot;,me._indirectTexture,te),Mn.setOptional(Q,me,&quot;batchingColorTexture&quot;),me._colorsTexture!==null&amp;&amp;Mn.setValue(Q,&quot;batchingColorTexture&quot;,me._colorsTexture,te));const Qn=be.morphAttributes;if((Qn.position!==void 0||Qn.normal!==void 0||Qn.color!==void 0)&amp;&amp;Rt.update(me,be,Jn),(vn||wt.receiveShadow!==me.receiveShadow)&amp;&amp;(wt.receiveShadow=me.receiveShadow,Mn.setValue(Q,&quot;receiveShadow&quot;,me.receiveShadow)),we.isMeshGouraudMaterial&amp;&amp;we.envMap!==null&amp;&amp;(Ni.envMap.value=ft,Ni.flipEnvMap.value=ft.isCubeTexture&amp;&amp;ft.isRenderTargetTexture===!1?-1:1),we.isMeshStandardMaterial&amp;&amp;we.envMap===null&amp;&amp;fe.environment!==null&amp;&amp;(Ni.envMapIntensity.value=fe.environmentIntensity),vn&amp;&amp;(Mn.setValue(Q,&quot;toneMappingExposure&quot;,E.toneMappingExposure),wt.needsLights&amp;&amp;as(Ni,Tr),Ge&amp;&amp;we.fog===!0&amp;&amp;qe.refreshFogUniforms(Ni,Ge),qe.refreshMaterialUniforms(Ni,we,G,j,_.state.transmissionRenderTarget[q.id]),Dg.upload(Q,wr(wt),Ni,te)),we.isShaderMaterial&amp;&amp;we.uniformsNeedUpdate===!0&amp;&amp;(Dg.upload(Q,wr(wt),Ni,te),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&amp;&amp;Mn.setValue(Q,&quot;center&quot;,me.center),Mn.setValue(Q,&quot;modelViewMatrix&quot;,me.modelViewMatrix),Mn.setValue(Q,&quot;normalMatrix&quot;,me.normalMatrix),Mn.setValue(Q,&quot;modelMatrix&quot;,me.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const ei=we.uniformsGroups;for(let ai=0,zr=ei.length;ai&lt;zr;ai++){const Ds=ei[ai];de.update(Ds,Jn),de.bind(Ds,Jn)}}return Jn}function as(q,fe){q.ambientLightColor.needsUpdate=fe,q.lightProbe.needsUpdate=fe,q.directionalLights.needsUpdate=fe,q.directionalLightShadows.needsUpdate=fe,q.pointLights.needsUpdate=fe,q.pointLightShadows.needsUpdate=fe,q.spotLights.needsUpdate=fe,q.spotLightShadows.needsUpdate=fe,q.rectAreaLights.needsUpdate=fe,q.hemisphereLights.needsUpdate=fe}function Wn(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&amp;&amp;q.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(q,fe,be){const we=ze.get(q);we.__autoAllocateDepthBuffer=q.resolveDepthBuffer===!1,we.__autoAllocateDepthBuffer===!1&amp;&amp;(we.__useRenderToTexture=!1),ze.get(q.texture).__webglTexture=fe,ze.get(q.depthTexture).__webglTexture=we.__autoAllocateDepthBuffer?void 0:be,we.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(q,fe){const be=ze.get(q);be.__webglFramebuffer=fe,be.__useDefaultFramebuffer=fe===void 0};const _a=Q.createFramebuffer();this.setRenderTarget=function(q,fe=0,be=0){D=q,N=fe,A=be;let we=!0,me=null,Ge=!1,Je=!1;if(q){const ft=ze.get(q);if(ft.__useDefaultFramebuffer!==void 0)Ne.bindFramebuffer(Q.FRAMEBUFFER,null),we=!1;else if(ft.__webglFramebuffer===void 0)te.setupRenderTarget(q);else if(ft.__hasExternalTextures)te.rebindTextures(q,ze.get(q.texture).__webglTexture,ze.get(q.depthTexture).__webglTexture);else if(q.depthBuffer){const bt=q.depthTexture;if(ft.__boundDepthTexture!==bt){if(bt!==null&amp;&amp;ze.has(bt)&amp;&amp;(q.width!==bt.image.width||q.height!==bt.image.height))throw new Error(&quot;WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.&quot;);te.setupDepthRenderbuffer(q)}}const Ot=q.texture;(Ot.isData3DTexture||Ot.isDataArrayTexture||Ot.isCompressedArrayTexture)&amp;&amp;(Je=!0);const Et=ze.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(Et[fe])?me=Et[fe][be]:me=Et[fe],Ge=!0):q.samples&gt;0&amp;&amp;te.useMultisampledRTT(q)===!1?me=ze.get(q).__webglMultisampledFramebuffer:Array.isArray(Et)?me=Et[be]:me=Et,L.copy(q.viewport),V.copy(q.scissor),Z=q.scissorTest}else L.copy(ne).multiplyScalar(G).floor(),V.copy(le).multiplyScalar(G).floor(),Z=ce;if(be!==0&amp;&amp;(me=_a),Ne.bindFramebuffer(Q.FRAMEBUFFER,me)&amp;&amp;we&amp;&amp;Ne.drawBuffers(q,me),Ne.viewport(L),Ne.scissor(V),Ne.setScissorTest(Z),Ge){const ft=ze.get(q.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+fe,ft.__webglTexture,be)}else if(Je){const ft=ze.get(q.texture),Ot=fe;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ft.__webglTexture,be,Ot)}else if(q!==null&amp;&amp;be!==0){const ft=ze.get(q.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,ft.__webglTexture,be)}C=-1},this.readRenderTargetPixels=function(q,fe,be,we,me,Ge,Je){if(!(q&amp;&amp;q.isWebGLRenderTarget)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.&quot;);return}let et=ze.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&amp;&amp;Je!==void 0&amp;&amp;(et=et[Je]),et){Ne.bindFramebuffer(Q.FRAMEBUFFER,et);try{const ft=q.texture,Ot=ft.format,Et=ft.type;if(!Fe.textureFormatReadable(Ot)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.&quot;);return}if(!Fe.textureTypeReadable(Et)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.&quot;);return}fe&gt;=0&amp;&amp;fe&lt;=q.width-we&amp;&amp;be&gt;=0&amp;&amp;be&lt;=q.height-me&amp;&amp;Q.readPixels(fe,be,we,me,It.convert(Ot),It.convert(Et),Ge)}finally{const ft=D!==null?ze.get(D).__webglFramebuffer:null;Ne.bindFramebuffer(Q.FRAMEBUFFER,ft)}}},this.readRenderTargetPixelsAsync=async function(q,fe,be,we,me,Ge,Je){if(!(q&amp;&amp;q.isWebGLRenderTarget))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.&quot;);let et=ze.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&amp;&amp;Je!==void 0&amp;&amp;(et=et[Je]),et)if(fe&gt;=0&amp;&amp;fe&lt;=q.width-we&amp;&amp;be&gt;=0&amp;&amp;be&lt;=q.height-me){Ne.bindFramebuffer(Q.FRAMEBUFFER,et);const ft=q.texture,Ot=ft.format,Et=ft.type;if(!Fe.textureFormatReadable(Ot))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.&quot;);if(!Fe.textureTypeReadable(Et))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.&quot;);const bt=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,bt),Q.bufferData(Q.PIXEL_PACK_BUFFER,Ge.byteLength,Q.STREAM_READ),Q.readPixels(fe,be,we,me,It.convert(Ot),It.convert(Et),0);const Bt=D!==null?ze.get(D).__webglFramebuffer:null;Ne.bindFramebuffer(Q.FRAMEBUFFER,Bt);const un=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),await IF(Q,un,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,bt),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,Ge),Q.deleteBuffer(bt),Q.deleteSync(un),Ge}else throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.&quot;)},this.copyFramebufferToTexture=function(q,fe=null,be=0){const we=Math.pow(2,-be),me=Math.floor(q.image.width*we),Ge=Math.floor(q.image.height*we),Je=fe!==null?fe.x:0,et=fe!==null?fe.y:0;te.setTexture2D(q,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,be,0,0,Je,et,me,Ge),Ne.unbindTexture()};const va=Q.createFramebuffer(),Fr=Q.createFramebuffer();this.copyTextureToTexture=function(q,fe,be=null,we=null,me=0,Ge=null){Ge===null&amp;&amp;(me!==0?(Rg(&quot;WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels.&quot;),Ge=me,me=0):Ge=0);let Je,et,ft,Ot,Et,bt,Bt,un,In;const Qt=q.isCompressedTexture?q.mipmaps[Ge]:q.image;if(be!==null)Je=be.max.x-be.min.x,et=be.max.y-be.min.y,ft=be.isBox3?be.max.z-be.min.z:1,Ot=be.min.x,Et=be.min.y,bt=be.isBox3?be.min.z:0;else{const Qn=Math.pow(2,-me);Je=Math.floor(Qt.width*Qn),et=Math.floor(Qt.height*Qn),q.isDataArrayTexture?ft=Qt.depth:q.isData3DTexture?ft=Math.floor(Qt.depth*Qn):ft=1,Ot=0,Et=0,bt=0}we!==null?(Bt=we.x,un=we.y,In=we.z):(Bt=0,un=0,In=0);const $t=It.convert(fe.format),wt=It.convert(fe.type);let Hn;fe.isData3DTexture?(te.setTexture3D(fe,0),Hn=Q.TEXTURE_3D):fe.isDataArrayTexture||fe.isCompressedArrayTexture?(te.setTexture2DArray(fe,0),Hn=Q.TEXTURE_2D_ARRAY):(te.setTexture2D(fe,0),Hn=Q.TEXTURE_2D),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,fe.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,fe.unpackAlignment);const rn=Q.getParameter(Q.UNPACK_ROW_LENGTH),Jn=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Tn=Q.getParameter(Q.UNPACK_SKIP_PIXELS),vn=Q.getParameter(Q.UNPACK_SKIP_ROWS),Tr=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Qt.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Qt.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Ot),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,Et),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,bt);const Mn=q.isDataArrayTexture||q.isData3DTexture,Ni=fe.isDataArrayTexture||fe.isData3DTexture;if(q.isDepthTexture){const Qn=ze.get(q),ei=ze.get(fe),ai=ze.get(Qn.__renderTarget),zr=ze.get(ei.__renderTarget);Ne.bindFramebuffer(Q.READ_FRAMEBUFFER,ai.__webglFramebuffer),Ne.bindFramebuffer(Q.DRAW_FRAMEBUFFER,zr.__webglFramebuffer);for(let Ds=0;Ds&lt;ft;Ds++)Mn&amp;&amp;(Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ze.get(q).__webglTexture,me,bt+Ds),Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ze.get(fe).__webglTexture,Ge,In+Ds)),Q.blitFramebuffer(Ot,Et,Je,et,Bt,un,Je,et,Q.DEPTH_BUFFER_BIT,Q.NEAREST);Ne.bindFramebuffer(Q.READ_FRAMEBUFFER,null),Ne.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else if(me!==0||q.isRenderTargetTexture||ze.has(q)){const Qn=ze.get(q),ei=ze.get(fe);Ne.bindFramebuffer(Q.READ_FRAMEBUFFER,va),Ne.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Fr);for(let ai=0;ai&lt;ft;ai++)Mn?Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Qn.__webglTexture,me,bt+ai):Q.framebufferTexture2D(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,Qn.__webglTexture,me),Ni?Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ei.__webglTexture,Ge,In+ai):Q.framebufferTexture2D(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,ei.__webglTexture,Ge),me!==0?Q.blitFramebuffer(Ot,Et,Je,et,Bt,un,Je,et,Q.COLOR_BUFFER_BIT,Q.NEAREST):Ni?Q.copyTexSubImage3D(Hn,Ge,Bt,un,In+ai,Ot,Et,Je,et):Q.copyTexSubImage2D(Hn,Ge,Bt,un,Ot,Et,Je,et);Ne.bindFramebuffer(Q.READ_FRAMEBUFFER,null),Ne.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else Ni?q.isDataTexture||q.isData3DTexture?Q.texSubImage3D(Hn,Ge,Bt,un,In,Je,et,ft,$t,wt,Qt.data):fe.isCompressedArrayTexture?Q.compressedTexSubImage3D(Hn,Ge,Bt,un,In,Je,et,ft,$t,Qt.data):Q.texSubImage3D(Hn,Ge,Bt,un,In,Je,et,ft,$t,wt,Qt):q.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,Ge,Bt,un,Je,et,$t,wt,Qt.data):q.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,Ge,Bt,un,Qt.width,Qt.height,$t,Qt.data):Q.texSubImage2D(Q.TEXTURE_2D,Ge,Bt,un,Je,et,$t,wt,Qt);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,rn),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Jn),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Tn),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,vn),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Tr),Ge===0&amp;&amp;fe.generateMipmaps&amp;&amp;Q.generateMipmap(Hn),Ne.unbindTexture()},this.copyTextureToTexture3D=function(q,fe,be=null,we=null,me=0){return Rg(&#x27;WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use &quot;copyTextureToTexture&quot; instead.&#x27;),this.copyTextureToTexture(q,fe,be,we,me)},this.initRenderTarget=function(q){ze.get(q).__webglFramebuffer===void 0&amp;&amp;te.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?te.setTextureCube(q,0):q.isData3DTexture?te.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?te.setTexture2DArray(q,0):te.setTexture2D(q,0),Ne.unbindTexture()},this.resetState=function(){N=0,A=0,D=null,Ne.reset(),gn.reset()},typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;observe&quot;,{detail:this}))}get coordinateSystem(){return Es}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Zt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Zt._getUnpackColorSpace()}}const V8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:wD,AddEquation:il,AddOperation:vD,AdditiveAnimationBlendMode:ow,AdditiveBlending:Qx,AgXToneMapping:TD,AlphaFormat:nw,AlwaysCompare:HD,AlwaysDepth:Xg,AlwaysStencilFunc:iS,AmbientLight:Fy,AnimationAction:NN,AnimationClip:ml,AnimationLoader:lB,AnimationMixer:IN,AnimationObjectGroup:NB,AnimationUtils:rB,ArcCurve:tN,ArrayCamera:RN,ArrowHelper:e4,AttachedBindMode:nS,Audio:ON,AudioAnalyser:SB,AudioContext:Dw,AudioListener:vB,AudioLoader:gB,AxesHelper:t4,BackSide:xr,BasicDepthPacking:ND,BasicShadowMap:Uk,BatchedMesh:QD,Bone:Yd,BooleanKeyframeTrack:Uc,Box2:HB,Box3:Ri,Box3Helper:JB,BoxGeometry:xl,BoxHelper:ZB,BufferAttribute:Jt,BufferGeometry:Lt,BufferGeometryLoader:AN,ByteType:QS,Cache:oa,Camera:hy,CameraHelper:$B,CanvasTexture:Mz,CapsuleGeometry:xy,CatmullRomCurve3:nN,CineonToneMapping:SD,CircleGeometry:Sy,ClampToEdgeWrapping:rr,Clock:Nw,Color:$e,ColorKeyframeTrack:Aw,ColorManagement:Zt,CompressedArrayTexture:Ez,CompressedCubeTexture:Tz,CompressedTexture:vy,CompressedTextureLoader:cB,ConeGeometry:Kd,ConstantAlphaFactor:gD,ConstantColorFactor:pD,Controls:kN,CubeCamera:YD,CubeReflectionMapping:fa,CubeRefractionMapping:fl,CubeTexture:Xd,CubeTextureLoader:uB,CubeUVReflectionMapping:Sh,CubicBezierCurve:yw,CubicBezierCurve3:iN,CubicInterpolant:_N,CullFaceBack:Jx,CullFaceFront:J2,CullFaceFrontBack:Lk,CullFaceNone:Z2,Curve:Qs,CurvePath:sN,CustomBlending:eD,CustomToneMapping:ED,CylinderGeometry:Mh,Cylindrical:BB,Data3DTexture:cy,DataArrayTexture:Wd,DataTexture:$s,DataTextureLoader:xN,DataUtils:$F,DecrementStencilOp:qk,DecrementWrapStencilOp:Kk,DefaultLoadingManager:Rw,DepthArrayTexture:Az,DepthFormat:oh,DepthStencilFormat:ah,DepthTexture:by,DetachedBindMode:AD,DirectionalLight:Zd,DirectionalLightHelper:KB,DiscreteInterpolant:vN,DodecahedronGeometry:wy,DoubleSide:Ki,DstAlphaFactor:cD,DstColorFactor:hD,DynamicCopyUsage:uF,DynamicDrawUsage:rF,DynamicReadUsage:aF,EdgesGeometry:mw,EllipseCurve:Ey,EqualCompare:kD,EqualDepth:Yg,EqualStencilFunc:Qk,EquirectangularReflectionMapping:gd,EquirectangularRefractionMapping:yd,Euler:Sr,EventDispatcher:To,ExtrudeGeometry:Ty,FileLoader:ns,Float16BufferAttribute:iz,Float32BufferAttribute:ct,FloatType:Pr,Fog:dy,FogExp2:fy,FramebufferTexture:wz,FrontSide:Qr,Frustum:Th,FrustumArray:gy,GLBufferAttribute:zB,GLSL1:fF,GLSL3:rS,GreaterCompare:FD,GreaterDepth:$g,GreaterEqualCompare:BD,GreaterEqualDepth:Kg,GreaterEqualStencilFunc:iF,GreaterStencilFunc:tF,GridHelper:UN,Group:br,HalfFloatType:wh,HemisphereLight:SN,HemisphereLightHelper:qB,IcosahedronGeometry:My,ImageBitmapLoader:CN,ImageLoader:Md,ImageUtils:jD,IncrementStencilOp:Xk,IncrementWrapStencilOp:Yk,InstancedBufferAttribute:Mc,InstancedBufferGeometry:MN,InstancedInterleavedBuffer:FB,InstancedMesh:dw,Int16BufferAttribute:tz,Int32BufferAttribute:nz,Int8BufferAttribute:JF,IntType:ny,InterleavedBuffer:qd,InterleavedBufferAttribute:dl,Interpolant:Rh,InterpolateDiscrete:lh,InterpolateLinear:ch,InterpolateSmooth:Cg,InterpolationSamplingMode:mF,InterpolationSamplingType:pF,InvertStencilOp:$k,KeepStencilOp:ic,KeyframeTrack:As,LOD:JD,LatheGeometry:Ay,Layers:uy,LessCompare:UD,LessDepth:qg,LessEqualCompare:lw,LessEqualDepth:Tc,LessEqualStencilFunc:eF,LessStencilFunc:Jk,Light:wl,LightProbe:TN,Line:xo,Line3:VB,LineBasicMaterial:Zi,LineCurve:_w,LineCurve3:rN,LineDashedMaterial:mN,LineLoop:pw,LineSegments:Ur,LinearFilter:fi,LinearInterpolant:Mw,LinearMipMapLinearFilter:Bk,LinearMipMapNearestFilter:zk,LinearMipmapLinearFilter:Zr,LinearMipmapNearestFilter:Ju,LinearSRGBColorSpace:fr,LinearToneMapping:bD,LinearTransfer:vd,Loader:Ji,LoaderUtils:vo,LoadingManager:Cw,LoopOnce:CD,LoopPingPong:OD,LoopRepeat:RD,MOUSE:_c,Material:Oi,MaterialLoader:zy,MathUtils:rl,Matrix2:Uw,Matrix3:jt,Matrix4:yt,MaxEquation:rD,Mesh:Sn,MeshBasicMaterial:$i,MeshDepthMaterial:ww,MeshDistanceMaterial:Ew,MeshLambertMaterial:Py,MeshMatcapMaterial:pN,MeshNormalMaterial:dN,MeshPhongMaterial:cl,MeshPhysicalMaterial:rs,MeshStandardMaterial:ts,MeshToonMaterial:Sw,MinEquation:iD,MirroredRepeatWrapping:ih,MixOperation:_D,MultiplyBlending:tS,MultiplyOperation:Vd,NearestFilter:xi,NearestMipMapLinearFilter:Fk,NearestMipMapNearestFilter:kk,NearestMipmapLinearFilter:hc,NearestMipmapNearestFilter:ty,NeutralToneMapping:MD,NeverCompare:LD,NeverDepth:Wg,NeverStencilFunc:Zk,NoBlending:la,NoColorSpace:ta,NoToneMapping:ca,NormalAnimationBlendMode:ay,NormalBlending:vc,NotEqualCompare:zD,NotEqualDepth:Zg,NotEqualStencilFunc:nF,NumberKeyframeTrack:Cc,Object3D:nn,ObjectLoader:pB,ObjectSpaceNormalMap:PD,OctahedronGeometry:$d,OneFactor:oD,OneMinusConstantAlphaFactor:yD,OneMinusConstantColorFactor:mD,OneMinusDstAlphaFactor:uD,OneMinusDstColorFactor:fD,OneMinusSrcAlphaFactor:jg,OneMinusSrcColorFactor:lD,OrthographicCamera:Fc,PCFShadowMap:JS,PCFSoftShadowMap:Q2,PMREMGenerator:fS,Path:C0,PerspectiveCamera:Yn,Plane:Qo,PlaneGeometry:Ah,PlaneHelper:QB,PointLight:ky,PointLightHelper:WB,Points:_y,PointsMaterial:yy,PolarGridHelper:YB,PolyhedronGeometry:Sl,PositionalAudio:xB,PropertyBinding:mn,PropertyMixer:DN,QuadraticBezierCurve:vw,QuadraticBezierCurve3:bw,Quaternion:Si,QuaternionKeyframeTrack:pl,QuaternionLinearInterpolant:bN,RED_GREEN_RGTC2_Format:S0,RED_RGTC1_Format:sw,REVISION:Q0,RGBADepthPacking:ID,RGBAFormat:vr,RGBAIntegerFormat:oy,RGBA_ASTC_10x10_Format:g0,RGBA_ASTC_10x5_Format:d0,RGBA_ASTC_10x6_Format:p0,RGBA_ASTC_10x8_Format:m0,RGBA_ASTC_12x10_Format:y0,RGBA_ASTC_12x12_Format:_0,RGBA_ASTC_4x4_Format:s0,RGBA_ASTC_5x4_Format:o0,RGBA_ASTC_5x5_Format:a0,RGBA_ASTC_6x5_Format:l0,RGBA_ASTC_6x6_Format:c0,RGBA_ASTC_8x5_Format:u0,RGBA_ASTC_8x6_Format:h0,RGBA_ASTC_8x8_Format:f0,RGBA_BPTC_Format:ad,RGBA_ETC2_EAC_Format:r0,RGBA_PVRTC_2BPPV1_Format:t0,RGBA_PVRTC_4BPPV1_Format:e0,RGBA_S3TC_DXT1_Format:rd,RGBA_S3TC_DXT3_Format:sd,RGBA_S3TC_DXT5_Format:od,RGBDepthPacking:Vk,RGBFormat:iw,RGBIntegerFormat:Hk,RGB_BPTC_SIGNED_Format:v0,RGB_BPTC_UNSIGNED_Format:b0,RGB_ETC1_Format:n0,RGB_ETC2_Format:i0,RGB_PVRTC_2BPPV1_Format:Qg,RGB_PVRTC_4BPPV1_Format:Jg,RGB_S3TC_DXT1_Format:id,RGDepthPacking:Gk,RGFormat:rw,RGIntegerFormat:sy,RawShaderMaterial:fN,Ray:bl,Raycaster:PN,RectAreaLight:wN,RedFormat:Gd,RedIntegerFormat:jd,ReinhardToneMapping:xD,RenderTarget:ly,RenderTarget3D:PB,RenderTargetArray:LB,RepeatWrapping:ws,ReplaceStencilOp:Wk,ReverseSubtractEquation:nD,RingGeometry:Cy,SIGNED_RED_GREEN_RGTC2_Format:w0,SIGNED_RED_RGTC1_Format:x0,SRGBColorSpace:Nn,SRGBTransfer:On,Scene:py,ShaderChunk:Kt,ShaderLib:Ws,ShaderMaterial:Ts,ShadowMaterial:hN,Shape:xc,ShapeGeometry:Ry,ShapePath:n4,ShapeUtils:qs,ShortType:ew,Skeleton:Eh,SkeletonHelper:jB,SkinnedMesh:my,Source:ll,Sphere:wi,SphereGeometry:Ch,Spherical:uS,SphericalHarmonics3:EN,SplineCurve:xw,SpotLight:Uy,SpotLightHelper:GB,Sprite:ZD,SpriteMaterial:fw,SrcAlphaFactor:Gg,SrcAlphaSaturateFactor:dD,SrcColorFactor:aD,StaticCopyUsage:cF,StaticDrawUsage:bd,StaticReadUsage:oF,StereoCamera:yB,StreamCopyUsage:hF,StreamDrawUsage:sF,StreamReadUsage:lF,StringKeyframeTrack:kc,SubtractEquation:tD,SubtractiveBlending:eS,TOUCH:uc,TangentSpaceNormalMap:vl,TetrahedronGeometry:Oy,Texture:Kn,TextureLoader:Ly,TextureUtils:a4,TimestampQuery:dF,TorusGeometry:Dy,TorusKnotGeometry:Ny,Triangle:_r,TriangleFanDrawMode:E0,TriangleStripDrawMode:aw,TrianglesDrawMode:DD,TubeGeometry:Iy,UVMapping:ey,Uint16BufferAttribute:uw,Uint32BufferAttribute:hw,Uint8BufferAttribute:QF,Uint8ClampedBufferAttribute:ez,Uniform:Lw,UniformsGroup:kB,UniformsLib:it,UniformsUtils:qD,UnsignedByteType:es,UnsignedInt248Type:sh,UnsignedInt5999Type:tw,UnsignedIntType:da,UnsignedShort4444Type:iy,UnsignedShort5551Type:ry,UnsignedShortType:rh,VSMShadowMap:mo,Vector2:Oe,Vector3:Y,Vector4:yn,VectorKeyframeTrack:pa,VideoFrameTexture:Sz,VideoTexture:eN,WebGL3DRenderTarget:BF,WebGLArrayRenderTarget:zF,WebGLCoordinateSystem:Es,WebGLCubeRenderTarget:KD,WebGLRenderTarget:Js,WebGLRenderer:jN,WebGLUtils:GN,WebGPUCoordinateSystem:xd,WebXRController:Og,WireframeGeometry:uN,WrapAroundEnding:_d,ZeroCurvatureEnding:fc,ZeroFactor:sD,ZeroSlopeEnding:dc,ZeroStencilOp:jk,createCanvasElement:GD},Symbol.toStringTag,{value:&quot;Module&quot;})),eo=Eo(n=&gt;({modelUrl:null,scene_action:null,userdata:null,translation:null,boundingBox:null,zIsUp:!0,defaultOrbitController:!0,model_type:null,setModelUrl:(e,t)=&gt;n({modelUrl:e,scene_action:t}),setTranslation:e=&gt;n({translation:e}),setBoundingBox:e=&gt;n({boundingBox:e}),setUserData:e=&gt;n({userdata:e}),setZIsUp:e=&gt;n({zIsUp:e}),setDefaultOrbitController:e=&gt;n({defaultOrbitController:e})}));class G8{constructor(){dt(this,&quot;socket&quot;,null);dt(this,&quot;retryWait&quot;,1e3);dt(this,&quot;instance_id&quot;,this.getRandomInt32());dt(this,&quot;shouldReconnect&quot;,!0);dt(this,&quot;messageQueue&quot;,[]);dt(this,&quot;resolvers&quot;,[])}getRandomInt32(){return Math.floor(Math.random()*4294967296)+-2147483648}async connect(e){const t=window.WEBSOCKET_ID;t&amp;&amp;(console.log(&quot;WebSocket ID Override:&quot;,t),this.instance_id=t);const i=`${e}?client-type=web&amp;instance-id=${this.instance_id}`;this.shouldReconnect=!0;try{this.socket=new WebSocket(i),console.log(&quot;WebSocket connecting to:&quot;,i),this.socket.addEventListener(&quot;message&quot;,r=&gt;this.enqueue(r)),this.socket.addEventListener(&quot;close&quot;,()=&gt;{console.log(&quot;WebSocket connection closed.&quot;),this.shouldReconnect&amp;&amp;(console.log(`Retrying in ${this.retryWait/1e3}s…`),setTimeout(()=&gt;this.connect(e),this.retryWait))}),this.socket.addEventListener(&quot;error&quot;,r=&gt;{}),await new Promise((r,s)=&gt;{this.socket.addEventListener(&quot;open&quot;,()=&gt;{console.log(&quot;WebSocket connected&quot;),r()}),this.socket.addEventListener(&quot;error&quot;,o=&gt;{s(o)})})}catch{}}enqueue(e){this.resolvers.length?this.resolvers.shift()(e):this.messageQueue.push(e)}nextMessage(){return new Promise(e=&gt;{this.messageQueue.length?e(this.messageQueue.shift()):this.resolvers.push(e)})}async*messages(){for(;;)yield await this.nextMessage()}async sendMessage(e){var t;if(((t=this.socket)==null?void 0:t.readyState)!==WebSocket.OPEN)throw new Error(&quot;WebSocket is not open&quot;);typeof e==&quot;string&quot;||e instanceof Uint8Array?this.socket.send(e):this.socket.send(JSON.stringify(e))}async disconnect(){this.shouldReconnect=!1,this.resolvers.forEach(e=&gt;e(new MessageEvent(&quot;close&quot;))),this.resolvers=[],this.messageQueue=[],this.socket&amp;&amp;(this.socket.close(),this.socket=null)}}const Ei=new G8,WN=Eo(n=&gt;({webSocketAddress:&quot;ws://localhost:&quot;+(window.WEBSOCKET_PORT||8765),sendData:i=&gt;{},setWebSocketAddress:i=&gt;n({webSocketAddress:i})})),Zb=2,_o=4,ia=4,zi=4,tl=new Int32Array(2),wC=new Float32Array(tl.buffer),EC=new Float64Array(tl.buffer),Km=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var pS;(function(n){n[n.UTF8_BYTES=1]=&quot;UTF8_BYTES&quot;,n[n.UTF16_STRING=2]=&quot;UTF16_STRING&quot;})(pS||(pS={}));class Ad{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Ad(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)&lt;&lt;24&gt;&gt;24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)&lt;&lt;16&gt;&gt;16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]&lt;&lt;8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]&lt;&lt;8|this.bytes_[e+2]&lt;&lt;16|this.bytes_[e+3]&lt;&lt;24}readUint32(e){return this.readInt32(e)&gt;&gt;&gt;0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))&lt;&lt;BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))&lt;&lt;BigInt(32)))}readFloat32(e){return tl[0]=this.readInt32(e),wC[0]}readFloat64(e){return tl[Km?0:1]=this.readInt32(e),tl[Km?1:0]=this.readInt32(e+4),EC[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8,this.bytes_[e+2]=t&gt;&gt;16,this.bytes_[e+3]=t&gt;&gt;24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8,this.bytes_[e+2]=t&gt;&gt;16,this.bytes_[e+3]=t&gt;&gt;24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t&gt;&gt;BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t&gt;&gt;BigInt(32))))}writeFloat32(e,t){wC[0]=t,this.writeInt32(e,tl[0])}writeFloat64(e,t){EC[0]=t,this.writeInt32(e,tl[Km?0:1]),this.writeInt32(e+4,tl[Km?1:0])}getBufferIdentifier(){if(this.bytes_.length&lt;this.position_+_o+ia)throw new Error(&quot;FlatBuffers: ByteBuffer is too short to contain an identifier.&quot;);let e=&quot;&quot;;for(let t=0;t&lt;ia;t++)e+=String.fromCharCode(this.readInt8(this.position_+_o+t));return e}__offset(e,t){const i=e-this.readInt32(e);return t&lt;this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const i=this.readInt32(e);e+=_o;const r=this.bytes_.subarray(e,e+i);return t===pS.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return typeof e==&quot;string&quot;?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+_o}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=ia)throw new Error(&quot;FlatBuffers: file identifier must be length &quot;+ia);for(let t=0;t&lt;ia;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+_o+t))return!1;return!0}createScalarList(e,t){const i=[];for(let r=0;r&lt;t;++r){const s=e(r);s!==null&amp;&amp;i.push(s)}return i}createObjList(e,t){const i=[];for(let r=0;r&lt;t;++r){const s=e(r);s!==null&amp;&amp;i.push(s.unpack())}return i}}class Mo{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let t;e?t=e:t=1024,this.bb=Ad.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e&gt;this.minalign&amp;&amp;(this.minalign=e);const i=~(this.bb.capacity()-this.space+t)+1&amp;e-1;for(;this.space&lt;i+e+t;){const r=this.bb.capacity();this.bb=Mo.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(e){for(let t=0;t&lt;e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){(this.force_defaults||t!==i)&amp;&amp;(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&amp;&amp;(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError(&quot;FlatBuffers: struct must be serialized inline.&quot;)}notNested(){if(this.isNested)throw new TypeError(&quot;FlatBuffers: object serialization must not be nested.&quot;)}slot(e){this.vtable!==null&amp;&amp;(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(t&amp;3221225472)throw new Error(&quot;FlatBuffers: cannot grow buffer beyond 2 gigabytes.&quot;);const i=t&lt;&lt;1,r=Ad.allocate(i);return r.setPosition(i-t),r.bytes().set(e.bytes(),i-t),r}addOffset(e){this.prep(_o,0),this.writeInt32(this.offset()-e+_o)}startObject(e){this.notNested(),this.vtable==null&amp;&amp;(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t&lt;e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error(&quot;FlatBuffers: endObject called without startObject&quot;);this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t&gt;=0&amp;&amp;this.vtable[t]==0;t--);const i=t+1;for(;t&gt;=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);const r=2;this.addInt16(e-this.object_start);const s=(i+r)*Zb;this.addInt16(s);let o=0;const l=this.space;e:for(t=0;t&lt;this.vtables.length;t++){const u=this.bb.capacity()-this.vtables[t];if(s==this.bb.readInt16(u)){for(let h=Zb;h&lt;s;h+=Zb)if(this.bb.readInt16(l+h)!=this.bb.readInt16(u+h))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){const r=i?zi:0;if(t){const s=t;if(this.prep(this.minalign,_o+ia+r),s.length!=ia)throw new TypeError(&quot;FlatBuffers: file identifier must be length &quot;+ia);for(let o=ia-1;o&gt;=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,_o+r),this.addOffset(e),r&amp;&amp;this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(t&lt;this.bb.readInt16(r)&amp;&amp;this.bb.readInt16(r+t)!=0))throw new TypeError(&quot;FlatBuffers: field &quot;+t+&quot; must be set&quot;)}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(_o,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(e==null)return 0;let t;return e instanceof Uint8Array?t=e:t=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e==&quot;string&quot;?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let i=0;i&lt;e.length;++i){const r=e[i];if(r!==null)t.push(this.createObjectOffset(r));else throw new TypeError(&quot;FlatBuffers: Argument for createObjectOffsetList cannot contain null.&quot;)}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}var Bn=(n=&gt;(n[n.PING=0]=&quot;PING&quot;,n[n.PONG=1]=&quot;PONG&quot;,n[n.UPDATE_SCENE=2]=&quot;UPDATE_SCENE&quot;,n[n.UPDATE_SERVER=3]=&quot;UPDATE_SERVER&quot;,n[n.MESH_INFO_CALLBACK=4]=&quot;MESH_INFO_CALLBACK&quot;,n[n.MESH_INFO_REPLY=5]=&quot;MESH_INFO_REPLY&quot;,n[n.LIST_WEB_CLIENTS=6]=&quot;LIST_WEB_CLIENTS&quot;,n[n.LIST_FILE_OBJECTS=7]=&quot;LIST_FILE_OBJECTS&quot;,n[n.LIST_PROCEDURES=8]=&quot;LIST_PROCEDURES&quot;,n[n.RUN_PROCEDURE=9]=&quot;RUN_PROCEDURE&quot;,n[n.ERROR=10]=&quot;ERROR&quot;,n[n.SERVER_REPLY=11]=&quot;SERVER_REPLY&quot;,n[n.VIEW_FILE_OBJECT=12]=&quot;VIEW_FILE_OBJECT&quot;,n[n.DELETE_FILE_OBJECT=13]=&quot;DELETE_FILE_OBJECT&quot;,n[n.START_NEW_NODE_EDITOR=14]=&quot;START_NEW_NODE_EDITOR&quot;,n[n.START_FILE_IN_LOCAL_APP=15]=&quot;START_FILE_IN_LOCAL_APP&quot;,n[n.SCREENSHOT=16]=&quot;SCREENSHOT&quot;,n))(Bn||{}),si=(n=&gt;(n[n.WEB=0]=&quot;WEB&quot;,n[n.LOCAL=1]=&quot;LOCAL&quot;,n[n.SERVER=2]=&quot;SERVER&quot;,n))(si||{});class Hs{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsWebClient(e,t){return(t||new Hs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsWebClient(e,t){return e.setPosition(e.position()+zi),(t||new Hs).__init(e.readInt32(e.position())+e.position(),e)}instanceId(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}address(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}port(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0}static startWebClient(e){e.startObject(4)}static addInstanceId(e,t){e.addFieldInt32(0,t,0)}static addName(e,t){e.addFieldOffset(1,t,0)}static addAddress(e,t){e.addFieldOffset(2,t,0)}static addPort(e,t){e.addFieldInt32(3,t,0)}static endWebClient(e){return e.endObject()}static createWebClient(e,t,i,r,s){return Hs.startWebClient(e),Hs.addInstanceId(e,t),Hs.addName(e,i),Hs.addAddress(e,r),Hs.addPort(e,s),Hs.endWebClient(e)}unpack(){return new j8(this.instanceId(),this.name(),this.address(),this.port())}unpackTo(e){e.instanceId=this.instanceId(),e.name=this.name(),e.address=this.address(),e.port=this.port()}}class j8{constructor(e=0,t=null,i=null,r=0){this.instanceId=e,this.name=t,this.address=i,this.port=r}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.address!==null?e.createString(this.address):0;return Hs.createWebClient(e,this.instanceId,t,i,this.port)}}class Kr{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMesh(e,t){return(t||new Kr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMesh(e,t){return e.setPosition(e.position()+zi),(t||new Kr).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}indices(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+e*4):0}indicesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}indicesArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}vertices(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}verticesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}verticesArray(){const e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}parentName(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}static startMesh(e){e.startObject(4)}static addName(e,t){e.addFieldOffset(0,t,0)}static addIndices(e,t){e.addFieldOffset(1,t,0)}static createIndicesVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addInt32(t[i]);return e.endVector()}static startIndicesVector(e,t){e.startVector(4,t,4)}static addVertices(e,t){e.addFieldOffset(2,t,0)}static createVerticesVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startVerticesVector(e,t){e.startVector(4,t,4)}static addParentName(e,t){e.addFieldOffset(3,t,0)}static endMesh(e){return e.endObject()}static createMesh(e,t,i,r,s){return Kr.startMesh(e),Kr.addName(e,t),Kr.addIndices(e,i),Kr.addVertices(e,r),Kr.addParentName(e,s),Kr.endMesh(e)}unpack(){return new W8(this.name(),this.bb.createScalarList(this.indices.bind(this),this.indicesLength()),this.bb.createScalarList(this.vertices.bind(this),this.verticesLength()),this.parentName())}unpackTo(e){e.name=this.name(),e.indices=this.bb.createScalarList(this.indices.bind(this),this.indicesLength()),e.vertices=this.bb.createScalarList(this.vertices.bind(this),this.verticesLength()),e.parentName=this.parentName()}}class W8{constructor(e=null,t=[],i=[],r=null){this.name=e,this.indices=t,this.vertices=i,this.parentName=r}pack(e){const t=this.name!==null?e.createString(this.name):0,i=Kr.createIndicesVector(e,this.indices),r=Kr.createVerticesVector(e,this.vertices),s=this.parentName!==null?e.createString(this.parentName):0;return Kr.createMesh(e,t,i,r,s)}}class sl{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsAppendMesh(e,t){return(t||new sl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsAppendMesh(e,t){return e.setPosition(e.position()+zi),(t||new sl).__init(e.readInt32(e.position())+e.position(),e)}mesh(e){const t=this.bb.__offset(this.bb_pos,4);return t?(e||new Kr).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startAppendMesh(e){e.startObject(1)}static addMesh(e,t){e.addFieldOffset(0,t,0)}static endAppendMesh(e){return e.endObject()}static createAppendMesh(e,t){return sl.startAppendMesh(e),sl.addMesh(e,t),sl.endAppendMesh(e)}unpack(){return new X8(this.mesh()!==null?this.mesh().unpack():null)}unpackTo(e){e.mesh=this.mesh()!==null?this.mesh().unpack():null}}class X8{constructor(e=null){this.mesh=e}pack(e){const t=this.mesh!==null?this.mesh.pack(e):0;return sl.createAppendMesh(e,t)}}class Vs{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMeshInfo(e,t){return(t||new Vs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMeshInfo(e,t){return e.setPosition(e.position()+zi),(t||new Vs).__init(e.readInt32(e.position())+e.position(),e)}objectName(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}faceIndex(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}jsonData(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}fileName(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}static startMeshInfo(e){e.startObject(4)}static addObjectName(e,t){e.addFieldOffset(0,t,0)}static addFaceIndex(e,t){e.addFieldInt32(1,t,0)}static addJsonData(e,t){e.addFieldOffset(2,t,0)}static addFileName(e,t){e.addFieldOffset(3,t,0)}static endMeshInfo(e){return e.endObject()}static createMeshInfo(e,t,i,r,s){return Vs.startMeshInfo(e),Vs.addObjectName(e,t),Vs.addFaceIndex(e,i),Vs.addJsonData(e,r),Vs.addFileName(e,s),Vs.endMeshInfo(e)}unpack(){return new q8(this.objectName(),this.faceIndex(),this.jsonData(),this.fileName())}unpackTo(e){e.objectName=this.objectName(),e.faceIndex=this.faceIndex(),e.jsonData=this.jsonData(),e.fileName=this.fileName()}}class q8{constructor(e=null,t=0,i=null,r=null){this.objectName=e,this.faceIndex=t,this.jsonData=i,this.fileName=r}pack(e){const t=this.objectName!==null?e.createString(this.objectName):0,i=this.jsonData!==null?e.createString(this.jsonData):0,r=this.fileName!==null?e.createString(this.fileName):0;return Vs.createMeshInfo(e,t,this.faceIndex,i,r)}}var ii=(n=&gt;(n[n.UNKNOWN=0]=&quot;UNKNOWN&quot;,n[n.STRING=1]=&quot;STRING&quot;,n[n.FLOAT=2]=&quot;FLOAT&quot;,n[n.INTEGER=3]=&quot;INTEGER&quot;,n[n.BOOLEAN=4]=&quot;BOOLEAN&quot;,n[n.ARRAY=6]=&quot;ARRAY&quot;,n))(ii||{}),R0=(n=&gt;(n[n.TUPLE=0]=&quot;TUPLE&quot;,n[n.LIST=1]=&quot;LIST&quot;,n[n.SET=2]=&quot;SET&quot;,n))(R0||{});class Ht{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsValue(e,t){return(t||new Ht).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsValue(e,t){return e.setPosition(e.position()+zi),(t||new Ht).__init(e.readInt32(e.position())+e.position(),e)}stringValue(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}floatValue(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0}integerValue(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0}booleanValue(){const e=this.bb.__offset(this.bb_pos,10);return e?!!this.bb.readInt8(this.bb_pos+e):!1}arrayValue(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}arrayValueLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}arrayValueType(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt8(this.bb_pos+e):ii.UNKNOWN}arrayLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):0}arrayType(){const e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt8(this.bb_pos+e):R0.TUPLE}arrayAnyLength(){const e=this.bb.__offset(this.bb_pos,20);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startValue(e){e.startObject(9)}static addStringValue(e,t){e.addFieldOffset(0,t,0)}static addFloatValue(e,t){e.addFieldFloat32(1,t,0)}static addIntegerValue(e,t){e.addFieldInt32(2,t,0)}static addBooleanValue(e,t){e.addFieldInt8(3,+t,0)}static addArrayValue(e,t){e.addFieldOffset(4,t,0)}static createArrayValueVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startArrayValueVector(e,t){e.startVector(4,t,4)}static addArrayValueType(e,t){e.addFieldInt8(5,t,ii.UNKNOWN)}static addArrayLength(e,t){e.addFieldInt32(6,t,0)}static addArrayType(e,t){e.addFieldInt8(7,t,R0.TUPLE)}static addArrayAnyLength(e,t){e.addFieldInt8(8,+t,0)}static endValue(e){return e.endObject()}static createValue(e,t,i,r,s,o,l,u,h,f){return Ht.startValue(e),Ht.addStringValue(e,t),Ht.addFloatValue(e,i),Ht.addIntegerValue(e,r),Ht.addBooleanValue(e,s),Ht.addArrayValue(e,o),Ht.addArrayValueType(e,l),Ht.addArrayLength(e,u),Ht.addArrayType(e,h),Ht.addArrayAnyLength(e,f),Ht.endValue(e)}unpack(){return new Y8(this.stringValue(),this.floatValue(),this.integerValue(),this.booleanValue(),this.bb.createObjList(this.arrayValue.bind(this),this.arrayValueLength()),this.arrayValueType(),this.arrayLength(),this.arrayType(),this.arrayAnyLength())}unpackTo(e){e.stringValue=this.stringValue(),e.floatValue=this.floatValue(),e.integerValue=this.integerValue(),e.booleanValue=this.booleanValue(),e.arrayValue=this.bb.createObjList(this.arrayValue.bind(this),this.arrayValueLength()),e.arrayValueType=this.arrayValueType(),e.arrayLength=this.arrayLength(),e.arrayType=this.arrayType(),e.arrayAnyLength=this.arrayAnyLength()}}class Y8{constructor(e=null,t=0,i=0,r=!1,s=[],o=ii.UNKNOWN,l=0,u=R0.TUPLE,h=!1){this.stringValue=e,this.floatValue=t,this.integerValue=i,this.booleanValue=r,this.arrayValue=s,this.arrayValueType=o,this.arrayLength=l,this.arrayType=u,this.arrayAnyLength=h}pack(e){const t=this.stringValue!==null?e.createString(this.stringValue):0,i=Ht.createArrayValueVector(e,e.createObjectOffsetList(this.arrayValue));return Ht.createValue(e,t,this.floatValue,this.integerValue,this.booleanValue,i,this.arrayValueType,this.arrayLength,this.arrayType,this.arrayAnyLength)}}class Dn{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsParameter(e,t){return(t||new Dn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsParameter(e,t){return e.setPosition(e.position()+zi),(t||new Dn).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}type(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):ii.UNKNOWN}value(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new Ht).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}defaultValue(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new Ht).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}options(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}optionsLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startParameter(e){e.startObject(5)}static addName(e,t){e.addFieldOffset(0,t,0)}static addType(e,t){e.addFieldInt8(1,t,ii.UNKNOWN)}static addValue(e,t){e.addFieldOffset(2,t,0)}static addDefaultValue(e,t){e.addFieldOffset(3,t,0)}static addOptions(e,t){e.addFieldOffset(4,t,0)}static createOptionsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startOptionsVector(e,t){e.startVector(4,t,4)}static endParameter(e){return e.endObject()}unpack(){return new K8(this.name(),this.type(),this.value()!==null?this.value().unpack():null,this.defaultValue()!==null?this.defaultValue().unpack():null,this.bb.createObjList(this.options.bind(this),this.optionsLength()))}unpackTo(e){e.name=this.name(),e.type=this.type(),e.value=this.value()!==null?this.value().unpack():null,e.defaultValue=this.defaultValue()!==null?this.defaultValue().unpack():null,e.options=this.bb.createObjList(this.options.bind(this),this.optionsLength())}}class K8{constructor(e=null,t=ii.UNKNOWN,i=null,r=null,s=[]){this.name=e,this.type=t,this.value=i,this.defaultValue=r,this.options=s}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.value!==null?this.value.pack(e):0,r=this.defaultValue!==null?this.defaultValue.pack(e):0,s=Dn.createOptionsVector(e,e.createObjectOffsetList(this.options));return Dn.startParameter(e),Dn.addName(e,t),Dn.addType(e,this.type),Dn.addValue(e,i),Dn.addDefaultValue(e,r),Dn.addOptions(e,s),Dn.endParameter(e)}}class Yi{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsProcedureStart(e,t){return(t||new Yi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsProcedureStart(e,t){return e.setPosition(e.position()+zi),(t||new Yi).__init(e.readInt32(e.position())+e.position(),e)}procedureName(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}procedureIdString(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}parameters(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new Dn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}parametersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startProcedureStart(e){e.startObject(3)}static addProcedureName(e,t){e.addFieldOffset(0,t,0)}static addProcedureIdString(e,t){e.addFieldOffset(1,t,0)}static addParameters(e,t){e.addFieldOffset(2,t,0)}static createParametersVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startParametersVector(e,t){e.startVector(4,t,4)}static endProcedureStart(e){return e.endObject()}static createProcedureStart(e,t,i,r){return Yi.startProcedureStart(e),Yi.addProcedureName(e,t),Yi.addProcedureIdString(e,i),Yi.addParameters(e,r),Yi.endProcedureStart(e)}unpack(){return new $8(this.procedureName(),this.procedureIdString(),this.bb.createObjList(this.parameters.bind(this),this.parametersLength()))}unpackTo(e){e.procedureName=this.procedureName(),e.procedureIdString=this.procedureIdString(),e.parameters=this.bb.createObjList(this.parameters.bind(this),this.parametersLength())}}class $8{constructor(e=null,t=null,i=[]){this.procedureName=e,this.procedureIdString=t,this.parameters=i}pack(e){const t=this.procedureName!==null?e.createString(this.procedureName):0,i=this.procedureIdString!==null?e.createString(this.procedureIdString):0,r=Yi.createParametersVector(e,e.createObjectOffsetList(this.parameters));return Yi.createProcedureStart(e,t,i,r)}}var So=(n=&gt;(n[n.IFC=0]=&quot;IFC&quot;,n[n.GLB=1]=&quot;GLB&quot;,n[n.SQLITE=2]=&quot;SQLITE&quot;,n[n.XLSX=3]=&quot;XLSX&quot;,n[n.CSV=4]=&quot;CSV&quot;,n))(So||{});class yo{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFileArg(e,t){return(t||new yo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFileArg(e,t){return e.setPosition(e.position()+zi),(t||new yo).__init(e.readInt32(e.position())+e.position(),e)}argName(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fileType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):So.IFC}static startFileArg(e){e.startObject(2)}static addArgName(e,t){e.addFieldOffset(0,t,0)}static addFileType(e,t){e.addFieldInt8(1,t,So.IFC)}static endFileArg(e){return e.endObject()}static createFileArg(e,t,i){return yo.startFileArg(e),yo.addArgName(e,t),yo.addFileType(e,i),yo.endFileArg(e)}unpack(){return new Z8(this.argName(),this.fileType())}unpackTo(e){e.argName=this.argName(),e.fileType=this.fileType()}}class Z8{constructor(e=null,t=So.IFC){this.argName=e,this.fileType=t}pack(e){const t=this.argName!==null?e.createString(this.argName):0;return yo.createFileArg(e,t,this.fileType)}}var O0=(n=&gt;(n[n.IDLE=0]=&quot;IDLE&quot;,n[n.RUNNING=1]=&quot;RUNNING&quot;,n[n.FINISHED=2]=&quot;FINISHED&quot;,n[n.ERROR=3]=&quot;ERROR&quot;,n))(O0||{});class qi{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsProcedure(e,t){return(t||new qi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsProcedure(e,t){return e.setPosition(e.position()+zi),(t||new qi).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}scriptFileLocation(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}parameters(e,t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new Dn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}parametersLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}fileInputs(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new yo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fileInputsLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}fileOutputs(e,t){const i=this.bb.__offset(this.bb_pos,14);return i?(t||new yo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fileOutputsLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}state(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt8(this.bb_pos+e):O0.IDLE}isComponent(){const e=this.bb.__offset(this.bb_pos,18);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startProcedure(e){e.startObject(8)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDescription(e,t){e.addFieldOffset(1,t,0)}static addScriptFileLocation(e,t){e.addFieldOffset(2,t,0)}static addParameters(e,t){e.addFieldOffset(3,t,0)}static createParametersVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startParametersVector(e,t){e.startVector(4,t,4)}static addFileInputs(e,t){e.addFieldOffset(4,t,0)}static createFileInputsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startFileInputsVector(e,t){e.startVector(4,t,4)}static addFileOutputs(e,t){e.addFieldOffset(5,t,0)}static createFileOutputsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startFileOutputsVector(e,t){e.startVector(4,t,4)}static addState(e,t){e.addFieldInt8(6,t,O0.IDLE)}static addIsComponent(e,t){e.addFieldInt8(7,+t,0)}static endProcedure(e){return e.endObject()}static createProcedure(e,t,i,r,s,o,l,u,h){return qi.startProcedure(e),qi.addName(e,t),qi.addDescription(e,i),qi.addScriptFileLocation(e,r),qi.addParameters(e,s),qi.addFileInputs(e,o),qi.addFileOutputs(e,l),qi.addState(e,u),qi.addIsComponent(e,h),qi.endProcedure(e)}unpack(){return new J8(this.name(),this.description(),this.scriptFileLocation(),this.bb.createObjList(this.parameters.bind(this),this.parametersLength()),this.bb.createObjList(this.fileInputs.bind(this),this.fileInputsLength()),this.bb.createObjList(this.fileOutputs.bind(this),this.fileOutputsLength()),this.state(),this.isComponent())}unpackTo(e){e.name=this.name(),e.description=this.description(),e.scriptFileLocation=this.scriptFileLocation(),e.parameters=this.bb.createObjList(this.parameters.bind(this),this.parametersLength()),e.fileInputs=this.bb.createObjList(this.fileInputs.bind(this),this.fileInputsLength()),e.fileOutputs=this.bb.createObjList(this.fileOutputs.bind(this),this.fileOutputsLength()),e.state=this.state(),e.isComponent=this.isComponent()}}class J8{constructor(e=null,t=null,i=null,r=[],s=[],o=[],l=O0.IDLE,u=!1){this.name=e,this.description=t,this.scriptFileLocation=i,this.parameters=r,this.fileInputs=s,this.fileOutputs=o,this.state=l,this.isComponent=u}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.description!==null?e.createString(this.description):0,r=this.scriptFileLocation!==null?e.createString(this.scriptFileLocation):0,s=qi.createParametersVector(e,e.createObjectOffsetList(this.parameters)),o=qi.createFileInputsVector(e,e.createObjectOffsetList(this.fileInputs)),l=qi.createFileOutputsVector(e,e.createObjectOffsetList(this.fileOutputs));return qi.createProcedure(e,t,i,r,s,o,l,this.state,this.isComponent)}}class Ss{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsProcedureStore(e,t){return(t||new Ss).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsProcedureStore(e,t){return e.setPosition(e.position()+zi),(t||new Ss).__init(e.readInt32(e.position())+e.position(),e)}procedures(e,t){const i=this.bb.__offset(this.bb_pos,4);return i?(t||new qi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}proceduresLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}startProcedure(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Yi).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startProcedureStore(e){e.startObject(2)}static addProcedures(e,t){e.addFieldOffset(0,t,0)}static createProceduresVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startProceduresVector(e,t){e.startVector(4,t,4)}static addStartProcedure(e,t){e.addFieldOffset(1,t,0)}static endProcedureStore(e){return e.endObject()}unpack(){return new Q8(this.bb.createObjList(this.procedures.bind(this),this.proceduresLength()),this.startProcedure()!==null?this.startProcedure().unpack():null)}unpackTo(e){e.procedures=this.bb.createObjList(this.procedures.bind(this),this.proceduresLength()),e.startProcedure=this.startProcedure()!==null?this.startProcedure().unpack():null}}class Q8{constructor(e=[],t=null){this.procedures=e,this.startProcedure=t}pack(e){const t=Ss.createProceduresVector(e,e.createObjectOffsetList(this.procedures)),i=this.startProcedure!==null?this.startProcedure.pack(e):0;return Ss.startProcedureStore(e),Ss.addProcedures(e,t),Ss.addStartProcedure(e,i),Ss.endProcedureStore(e)}}var Cd=(n=&gt;(n[n.DESIGN=0]=&quot;DESIGN&quot;,n[n.ANALYSIS=1]=&quot;ANALYSIS&quot;,n[n.FABRICATE=2]=&quot;FABRICATE&quot;,n))(Cd||{});class fn{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFileObject(e,t){return(t||new fn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFileObject(e,t){return e.setPosition(e.position()+zi),(t||new fn).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fileType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):So.IFC}purpose(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt8(this.bb_pos+e):Cd.DESIGN}filepath(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}filedata(e){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}filedataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}filedataArray(){const e=this.bb.__offset(this.bb_pos,12);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}glbFile(e){const t=this.bb.__offset(this.bb_pos,14);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}ifcsqliteFile(e){const t=this.bb.__offset(this.bb_pos,16);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isProcedureOutput(){const e=this.bb.__offset(this.bb_pos,18);return e?!!this.bb.readInt8(this.bb_pos+e):!1}procedureParent(e){const t=this.bb.__offset(this.bb_pos,20);return t?(e||new Yi).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}compressed(){const e=this.bb.__offset(this.bb_pos,22);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startFileObject(e){e.startObject(10)}static addName(e,t){e.addFieldOffset(0,t,0)}static addFileType(e,t){e.addFieldInt8(1,t,So.IFC)}static addPurpose(e,t){e.addFieldInt8(2,t,Cd.DESIGN)}static addFilepath(e,t){e.addFieldOffset(3,t,0)}static addFiledata(e,t){e.addFieldOffset(4,t,0)}static createFiledataVector(e,t){e.startVector(1,t.length,1);for(let i=t.length-1;i&gt;=0;i--)e.addInt8(t[i]);return e.endVector()}static startFiledataVector(e,t){e.startVector(1,t,1)}static addGlbFile(e,t){e.addFieldOffset(5,t,0)}static addIfcsqliteFile(e,t){e.addFieldOffset(6,t,0)}static addIsProcedureOutput(e,t){e.addFieldInt8(7,+t,0)}static addProcedureParent(e,t){e.addFieldOffset(8,t,0)}static addCompressed(e,t){e.addFieldInt8(9,+t,0)}static endFileObject(e){return e.endObject()}unpack(){return new eG(this.name(),this.fileType(),this.purpose(),this.filepath(),this.bb.createScalarList(this.filedata.bind(this),this.filedataLength()),this.glbFile()!==null?this.glbFile().unpack():null,this.ifcsqliteFile()!==null?this.ifcsqliteFile().unpack():null,this.isProcedureOutput(),this.procedureParent()!==null?this.procedureParent().unpack():null,this.compressed())}unpackTo(e){e.name=this.name(),e.fileType=this.fileType(),e.purpose=this.purpose(),e.filepath=this.filepath(),e.filedata=this.bb.createScalarList(this.filedata.bind(this),this.filedataLength()),e.glbFile=this.glbFile()!==null?this.glbFile().unpack():null,e.ifcsqliteFile=this.ifcsqliteFile()!==null?this.ifcsqliteFile().unpack():null,e.isProcedureOutput=this.isProcedureOutput(),e.procedureParent=this.procedureParent()!==null?this.procedureParent().unpack():null,e.compressed=this.compressed()}}class eG{constructor(e=null,t=So.IFC,i=Cd.DESIGN,r=null,s=[],o=null,l=null,u=!1,h=null,f=!1){this.name=e,this.fileType=t,this.purpose=i,this.filepath=r,this.filedata=s,this.glbFile=o,this.ifcsqliteFile=l,this.isProcedureOutput=u,this.procedureParent=h,this.compressed=f}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.filepath!==null?e.createString(this.filepath):0,r=fn.createFiledataVector(e,this.filedata),s=this.glbFile!==null?this.glbFile.pack(e):0,o=this.ifcsqliteFile!==null?this.ifcsqliteFile.pack(e):0,l=this.procedureParent!==null?this.procedureParent.pack(e):0;return fn.startFileObject(e),fn.addName(e,t),fn.addFileType(e,this.fileType),fn.addPurpose(e,this.purpose),fn.addFilepath(e,i),fn.addFiledata(e,r),fn.addGlbFile(e,s),fn.addIfcsqliteFile(e,o),fn.addIsProcedureOutput(e,this.isProcedureOutput),fn.addProcedureParent(e,l),fn.addCompressed(e,this.compressed),fn.endFileObject(e)}}class ir{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsCameraParams(e,t){return(t||new ir).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCameraParams(e,t){return e.setPosition(e.position()+zi),(t||new ir).__init(e.readInt32(e.position())+e.position(),e)}position(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}positionLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}positionArray(){const e=this.bb.__offset(this.bb_pos,4);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}lookAt(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}lookAtLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}lookAtArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}up(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}upLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}upArray(){const e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}fov(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):60}near(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat32(this.bb_pos+e):.1}far(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readFloat32(this.bb_pos+e):1e3}forceCamera(){const e=this.bb.__offset(this.bb_pos,16);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startCameraParams(e){e.startObject(7)}static addPosition(e,t){e.addFieldOffset(0,t,0)}static createPositionVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startPositionVector(e,t){e.startVector(4,t,4)}static addLookAt(e,t){e.addFieldOffset(1,t,0)}static createLookAtVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startLookAtVector(e,t){e.startVector(4,t,4)}static addUp(e,t){e.addFieldOffset(2,t,0)}static createUpVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startUpVector(e,t){e.startVector(4,t,4)}static addFov(e,t){e.addFieldFloat32(3,t,60)}static addNear(e,t){e.addFieldFloat32(4,t,.1)}static addFar(e,t){e.addFieldFloat32(5,t,1e3)}static addForceCamera(e,t){e.addFieldInt8(6,+t,0)}static endCameraParams(e){return e.endObject()}static createCameraParams(e,t,i,r,s,o,l,u){return ir.startCameraParams(e),ir.addPosition(e,t),ir.addLookAt(e,i),ir.addUp(e,r),ir.addFov(e,s),ir.addNear(e,o),ir.addFar(e,l),ir.addForceCamera(e,u),ir.endCameraParams(e)}unpack(){return new tG(this.bb.createScalarList(this.position.bind(this),this.positionLength()),this.bb.createScalarList(this.lookAt.bind(this),this.lookAtLength()),this.bb.createScalarList(this.up.bind(this),this.upLength()),this.fov(),this.near(),this.far(),this.forceCamera())}unpackTo(e){e.position=this.bb.createScalarList(this.position.bind(this),this.positionLength()),e.lookAt=this.bb.createScalarList(this.lookAt.bind(this),this.lookAtLength()),e.up=this.bb.createScalarList(this.up.bind(this),this.upLength()),e.fov=this.fov(),e.near=this.near(),e.far=this.far(),e.forceCamera=this.forceCamera()}}class tG{constructor(e=[],t=[],i=[],r=60,s=.1,o=1e3,l=!1){this.position=e,this.lookAt=t,this.up=i,this.fov=r,this.near=s,this.far=o,this.forceCamera=l}pack(e){const t=ir.createPositionVector(e,this.position),i=ir.createLookAtVector(e,this.lookAt),r=ir.createUpVector(e,this.up);return ir.createCameraParams(e,t,i,r,this.fov,this.near,this.far,this.forceCamera)}}var ul=(n=&gt;(n[n.ADD=0]=&quot;ADD&quot;,n[n.REMOVE=1]=&quot;REMOVE&quot;,n[n.REPLACE=2]=&quot;REPLACE&quot;,n))(ul||{});class ra{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsScene(e,t){return(t||new ra).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsScene(e,t){return e.setPosition(e.position()+zi),(t||new ra).__init(e.readInt32(e.position())+e.position(),e)}operation(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):ul.ADD}cameraParams(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new ir).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}currentFile(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startScene(e){e.startObject(3)}static addOperation(e,t){e.addFieldInt8(0,t,ul.ADD)}static addCameraParams(e,t){e.addFieldOffset(1,t,0)}static addCurrentFile(e,t){e.addFieldOffset(2,t,0)}static endScene(e){return e.endObject()}unpack(){return new nG(this.operation(),this.cameraParams()!==null?this.cameraParams().unpack():null,this.currentFile()!==null?this.currentFile().unpack():null)}unpackTo(e){e.operation=this.operation(),e.cameraParams=this.cameraParams()!==null?this.cameraParams().unpack():null,e.currentFile=this.currentFile()!==null?this.currentFile().unpack():null}}class nG{constructor(e=ul.ADD,t=null,i=null){this.operation=e,this.cameraParams=t,this.currentFile=i}pack(e){const t=this.cameraParams!==null?this.cameraParams.pack(e):0,i=this.currentFile!==null?this.currentFile.pack(e):0;return ra.startScene(e),ra.addOperation(e,this.operation),ra.addCameraParams(e,t),ra.addCurrentFile(e,i),ra.endScene(e)}}class ol{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsScreenshot(e,t){return(t||new ol).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsScreenshot(e,t){return e.setPosition(e.position()+zi),(t||new ol).__init(e.readInt32(e.position())+e.position(),e)}pngFilePath(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}static startScreenshot(e){e.startObject(1)}static addPngFilePath(e,t){e.addFieldOffset(0,t,0)}static endScreenshot(e){return e.endObject()}static createScreenshot(e,t){return ol.startScreenshot(e),ol.addPngFilePath(e,t),ol.endScreenshot(e)}unpack(){return new iG(this.pngFilePath())}unpackTo(e){e.pngFilePath=this.pngFilePath()}}class iG{constructor(e=null){this.pngFilePath=e}pack(e){const t=this.pngFilePath!==null?e.createString(this.pngFilePath):0;return ol.createScreenshot(e,t)}}class hi{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsServer(e,t){return(t||new hi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsServer(e,t){return e.setPosition(e.position()+zi),(t||new hi).__init(e.readInt32(e.position())+e.position(),e)}newFileObject(e){const t=this.bb.__offset(this.bb_pos,4);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}allFileObjects(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new fn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}allFileObjectsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}getFileObjectByName(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}getFileObjectByPath(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}deleteFileObject(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}startFileInLocalApp(e){const t=this.bb.__offset(this.bb_pos,14);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startServer(e){e.startObject(6)}static addNewFileObject(e,t){e.addFieldOffset(0,t,0)}static addAllFileObjects(e,t){e.addFieldOffset(1,t,0)}static createAllFileObjectsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startAllFileObjectsVector(e,t){e.startVector(4,t,4)}static addGetFileObjectByName(e,t){e.addFieldOffset(2,t,0)}static addGetFileObjectByPath(e,t){e.addFieldOffset(3,t,0)}static addDeleteFileObject(e,t){e.addFieldOffset(4,t,0)}static addStartFileInLocalApp(e,t){e.addFieldOffset(5,t,0)}static endServer(e){return e.endObject()}unpack(){return new rG(this.newFileObject()!==null?this.newFileObject().unpack():null,this.bb.createObjList(this.allFileObjects.bind(this),this.allFileObjectsLength()),this.getFileObjectByName(),this.getFileObjectByPath(),this.deleteFileObject()!==null?this.deleteFileObject().unpack():null,this.startFileInLocalApp()!==null?this.startFileInLocalApp().unpack():null)}unpackTo(e){e.newFileObject=this.newFileObject()!==null?this.newFileObject().unpack():null,e.allFileObjects=this.bb.createObjList(this.allFileObjects.bind(this),this.allFileObjectsLength()),e.getFileObjectByName=this.getFileObjectByName(),e.getFileObjectByPath=this.getFileObjectByPath(),e.deleteFileObject=this.deleteFileObject()!==null?this.deleteFileObject().unpack():null,e.startFileInLocalApp=this.startFileInLocalApp()!==null?this.startFileInLocalApp().unpack():null}}class rG{constructor(e=null,t=[],i=null,r=null,s=null,o=null){this.newFileObject=e,this.allFileObjects=t,this.getFileObjectByName=i,this.getFileObjectByPath=r,this.deleteFileObject=s,this.startFileInLocalApp=o}pack(e){const t=this.newFileObject!==null?this.newFileObject.pack(e):0,i=hi.createAllFileObjectsVector(e,e.createObjectOffsetList(this.allFileObjects)),r=this.getFileObjectByName!==null?e.createString(this.getFileObjectByName):0,s=this.getFileObjectByPath!==null?e.createString(this.getFileObjectByPath):0,o=this.deleteFileObject!==null?this.deleteFileObject.pack(e):0,l=this.startFileInLocalApp!==null?this.startFileInLocalApp.pack(e):0;return hi.startServer(e),hi.addNewFileObject(e,t),hi.addAllFileObjects(e,i),hi.addGetFileObjectByName(e,r),hi.addGetFileObjectByPath(e,s),hi.addDeleteFileObject(e,o),hi.addStartFileInLocalApp(e,l),hi.endServer(e)}}let XN=class sc{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsError(e,t){return(t||new sc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsError(e,t){return e.setPosition(e.position()+zi),(t||new sc).__init(e.readInt32(e.position())+e.position(),e)}code(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}message(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startError(e){e.startObject(2)}static addCode(e,t){e.addFieldInt32(0,t,0)}static addMessage(e,t){e.addFieldOffset(1,t,0)}static endError(e){return e.endObject()}static createError(e,t,i){return sc.startError(e),sc.addCode(e,t),sc.addMessage(e,i),sc.endError(e)}unpack(){return new sG(this.code(),this.message())}unpackTo(e){e.code=this.code(),e.message=this.message()}};class sG{constructor(e=0,t=null){this.code=e,this.message=t}pack(e){const t=this.message!==null?e.createString(this.message):0;return XN.createError(e,this.code,t)}}class Gs{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsServerReply(e,t){return(t||new Gs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsServerReply(e,t){return e.setPosition(e.position()+zi),(t||new Gs).__init(e.readInt32(e.position())+e.position(),e)}message(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fileObjects(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new fn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fileObjectsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}replyTo(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt8(this.bb_pos+e):Bn.PING}error(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new XN).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startServerReply(e){e.startObject(4)}static addMessage(e,t){e.addFieldOffset(0,t,0)}static addFileObjects(e,t){e.addFieldOffset(1,t,0)}static createFileObjectsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startFileObjectsVector(e,t){e.startVector(4,t,4)}static addReplyTo(e,t){e.addFieldInt8(2,t,Bn.PING)}static addError(e,t){e.addFieldOffset(3,t,0)}static endServerReply(e){return e.endObject()}unpack(){return new oG(this.message(),this.bb.createObjList(this.fileObjects.bind(this),this.fileObjectsLength()),this.replyTo(),this.error()!==null?this.error().unpack():null)}unpackTo(e){e.message=this.message(),e.fileObjects=this.bb.createObjList(this.fileObjects.bind(this),this.fileObjectsLength()),e.replyTo=this.replyTo(),e.error=this.error()!==null?this.error().unpack():null}}class oG{constructor(e=null,t=[],i=Bn.PING,r=null){this.message=e,this.fileObjects=t,this.replyTo=i,this.error=r}pack(e){const t=this.message!==null?e.createString(this.message):0,i=Gs.createFileObjectsVector(e,e.createObjectOffsetList(this.fileObjects)),r=this.error!==null?this.error.pack(e):0;return Gs.startServerReply(e),Gs.addMessage(e,t),Gs.addFileObjects(e,i),Gs.addReplyTo(e,this.replyTo),Gs.addError(e,r),Gs.endServerReply(e)}}class at{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new at).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+zi),(t||new at).__init(e.readInt32(e.position())+e.position(),e)}instanceId(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}commandType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Bn.PING}scene(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new ra).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}server(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new hi).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}meshInfo(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new Vs).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}targetGroup(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt8(this.bb_pos+e):si.WEB}clientType(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt8(this.bb_pos+e):si.WEB}targetId(){const e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt32(this.bb_pos+e):0}webClients(e,t){const i=this.bb.__offset(this.bb_pos,20);return i?(t||new Hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}webClientsLength(){const e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0}procedureStore(e){const t=this.bb.__offset(this.bb_pos,22);return t?(e||new Ss).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}serverReply(e){const t=this.bb.__offset(this.bb_pos,24);return t?(e||new Gs).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}screenshot(e){const t=this.bb.__offset(this.bb_pos,26);return t?(e||new ol).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}package_(e){const t=this.bb.__offset(this.bb_pos,28);return t?(e||new sl).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startMessage(e){e.startObject(13)}static addInstanceId(e,t){e.addFieldInt32(0,t,0)}static addCommandType(e,t){e.addFieldInt8(1,t,Bn.PING)}static addScene(e,t){e.addFieldOffset(2,t,0)}static addServer(e,t){e.addFieldOffset(3,t,0)}static addMeshInfo(e,t){e.addFieldOffset(4,t,0)}static addTargetGroup(e,t){e.addFieldInt8(5,t,si.WEB)}static addClientType(e,t){e.addFieldInt8(6,t,si.WEB)}static addTargetId(e,t){e.addFieldInt32(7,t,0)}static addWebClients(e,t){e.addFieldOffset(8,t,0)}static createWebClientsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startWebClientsVector(e,t){e.startVector(4,t,4)}static addProcedureStore(e,t){e.addFieldOffset(9,t,0)}static addServerReply(e,t){e.addFieldOffset(10,t,0)}static addScreenshot(e,t){e.addFieldOffset(11,t,0)}static addPackage(e,t){e.addFieldOffset(12,t,0)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}unpack(){return new aG(this.instanceId(),this.commandType(),this.scene()!==null?this.scene().unpack():null,this.server()!==null?this.server().unpack():null,this.meshInfo()!==null?this.meshInfo().unpack():null,this.targetGroup(),this.clientType(),this.targetId(),this.bb.createObjList(this.webClients.bind(this),this.webClientsLength()),this.procedureStore()!==null?this.procedureStore().unpack():null,this.serverReply()!==null?this.serverReply().unpack():null,this.screenshot()!==null?this.screenshot().unpack():null,this.package_()!==null?this.package_().unpack():null)}unpackTo(e){e.instanceId=this.instanceId(),e.commandType=this.commandType(),e.scene=this.scene()!==null?this.scene().unpack():null,e.server=this.server()!==null?this.server().unpack():null,e.meshInfo=this.meshInfo()!==null?this.meshInfo().unpack():null,e.targetGroup=this.targetGroup(),e.clientType=this.clientType(),e.targetId=this.targetId(),e.webClients=this.bb.createObjList(this.webClients.bind(this),this.webClientsLength()),e.procedureStore=this.procedureStore()!==null?this.procedureStore().unpack():null,e.serverReply=this.serverReply()!==null?this.serverReply().unpack():null,e.screenshot=this.screenshot()!==null?this.screenshot().unpack():null,e.package_=this.package_()!==null?this.package_().unpack():null}}class aG{constructor(e=0,t=Bn.PING,i=null,r=null,s=null,o=si.WEB,l=si.WEB,u=0,h=[],f=null,p=null,m=null,g=null){this.instanceId=e,this.commandType=t,this.scene=i,this.server=r,this.meshInfo=s,this.targetGroup=o,this.clientType=l,this.targetId=u,this.webClients=h,this.procedureStore=f,this.serverReply=p,this.screenshot=m,this.package_=g}pack(e){const t=this.scene!==null?this.scene.pack(e):0,i=this.server!==null?this.server.pack(e):0,r=this.meshInfo!==null?this.meshInfo.pack(e):0,s=at.createWebClientsVector(e,e.createObjectOffsetList(this.webClients)),o=this.procedureStore!==null?this.procedureStore.pack(e):0,l=this.serverReply!==null?this.serverReply.pack(e):0,u=this.screenshot!==null?this.screenshot.pack(e):0,h=this.package_!==null?this.package_.pack(e):0;return at.startMessage(e),at.addInstanceId(e,this.instanceId),at.addCommandType(e,this.commandType),at.addScene(e,t),at.addServer(e,i),at.addMeshInfo(e,r),at.addTargetGroup(e,this.targetGroup),at.addClientType(e,this.clientType),at.addTargetId(e,this.targetId),at.addWebClients(e,s),at.addProcedureStore(e,o),at.addServerReply(e,l),at.addScreenshot(e,u),at.addPackage(e,h),at.endMessage(e)}}async function lG(n){try{console.log(&quot;Received ping from server. Replying with FlatBuffer message&quot;);const e=new Mo(1024);at.startMessage(e),at.addInstanceId(e,Ei.instanceId),at.addCommandType(e,Bn.PONG),at.addTargetId(e,n.instanceId()),at.addTargetGroup(e,si.LOCAL),at.addClientType(e,si.WEB),e.finish(at.endMessage(e));const t=e.asUint8Array();await Ei.sendMessage(t)}catch(e){console.error(&quot;Error replying to ping:&quot;,e)}}const mc=re.createRef(),mS=re.createRef(),gc=re.createRef(),Zs=re.createRef(),gS=re.createRef(),bi=re.createRef(),Fw=re.createRef(),zw=re.createRef(),Sc=re.createRef(),cG=new ts({color:&quot;blue&quot;,side:Ki}),uG=new ts({color:8421504,metalness:.1,roughness:.5,flatShading:!0,side:Ki});function hG(n,e=!1){const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),s={},o={},l=n[0].morphTargetsRelative,u=new Lt;let h=0;for(let f=0;f&lt;n.length;++f){const p=n[f];let m=0;if(t!==(p.index!==null))return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.&quot;),null;for(const g in p.attributes){if(!i.has(g))return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&#x27;. All geometries must have compatible attributes; make sure &quot;&#x27;+g+&#x27;&quot; attribute exists among all geometries, or in none of them.&#x27;),null;s[g]===void 0&amp;&amp;(s[g]=[]),s[g].push(p.attributes[g]),m++}if(m!==i.size)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. Make sure all geometries have the same number of attributes.&quot;),null;if(l!==p.morphTargetsRelative)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. .morphTargetsRelative must be consistent throughout all geometries.&quot;),null;for(const g in p.morphAttributes){if(!r.has(g))return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;.  .morphAttributes must be consistent throughout all geometries.&quot;),null;o[g]===void 0&amp;&amp;(o[g]=[]),o[g].push(p.morphAttributes[g])}if(e){let g;if(t)g=p.index.count;else if(p.attributes.position!==void 0)g=p.attributes.position.count;else return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. The geometry must have either an index or a position attribute&quot;),null;u.addGroup(h,g,f),h+=g}}if(t){let f=0;const p=[];for(let m=0;m&lt;n.length;++m){const g=n[m].index;for(let v=0;v&lt;g.count;++v)p.push(g.getX(v)+f);f+=n[m].attributes.position.count}u.setIndex(p)}for(const f in s){const p=TC(s[f]);if(!p)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the &quot;+f+&quot; attribute.&quot;),null;u.setAttribute(f,p)}for(const f in o){const p=o[f][0].length;if(p===0)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[f]=[];for(let m=0;m&lt;p;++m){const g=[];for(let x=0;x&lt;o[f].length;++x)g.push(o[f][x][m]);const v=TC(g);if(!v)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the &quot;+f+&quot; morphAttribute.&quot;),null;u.morphAttributes[f].push(v)}}return u}function TC(n){let e,t,i,r=-1,s=0;for(let h=0;h&lt;n.length;++h){const f=n[h];if(e===void 0&amp;&amp;(e=f.array.constructor),e!==f.array.constructor)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.&quot;),null;if(t===void 0&amp;&amp;(t=f.itemSize),t!==f.itemSize)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.&quot;),null;if(i===void 0&amp;&amp;(i=f.normalized),i!==f.normalized)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.&quot;),null;if(r===-1&amp;&amp;(r=f.gpuType),r!==f.gpuType)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.&quot;),null;s+=f.count*t}const o=new e(s),l=new Jt(o,t,i);let u=0;for(let h=0;h&lt;n.length;++h){const f=n[h];if(f.isInterleavedBufferAttribute){const p=u/t;for(let m=0,g=f.count;m&lt;g;m++)for(let v=0;v&lt;t;v++){const x=f.getComponent(m,v);l.setComponent(m+p,v,x)}}else o.set(f.array,u);u+=f.count*t}return r!==void 0&amp;&amp;(l.gpuType=r),l}function MC(n,e){if(e===DD)return console.warn(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.&quot;),n;if(e===E0||e===aw){let t=n.getIndex();if(t===null){const o=[],l=n.getAttribute(&quot;position&quot;);if(l!==void 0){for(let u=0;u&lt;l.count;u++)o.push(u);n.setIndex(o),t=n.getIndex()}else return console.error(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.&quot;),n}const i=t.count-2,r=[];if(e===E0)for(let o=1;o&lt;=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o&lt;i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&amp;&amp;console.error(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.&quot;);const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:&quot;,e),n}function fG(n,e){const t=[],i=new Map;let r=0;const s=n.attributes.position;return e.forEach(([l,u],h)=&gt;{const f=n.index.array.slice(l,l+u),p=new Lt;p.setAttribute(&quot;position&quot;,s),p.setIndex(Array.from(f));const m=new mw(p),g=m.attributes.position.count,v=new Float32Array(g).fill(r);m.setAttribute(&quot;rangeId&quot;,new Jt(v,1)),t.push(m),i.set(h,r++)}),{geometry:hG(t,!1),rangeIdToIndex:i}}function dG(n,e){const t=n.capabilities.maxTextureSize,i=Math.min(e,t),r=Math.ceil(e/i),s=new Uint8Array(i*r).fill(255),o=new $s(s,i,r,Gd,es);o.minFilter=xi,o.magFilter=xi,o.wrapS=rr,o.wrapT=rr,o.needsUpdate=!0;const l={uVisibleTex:{value:o},uTexSize:{value:new Oe(i,r)},uHighlighted:{value:-1}},u=`
    attribute float rangeId;
    varying float vRangeId;
    void main() {
      vRangeId = rangeId;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
    }
  `,h=`
    precision mediump float;
    varying float vRangeId;
    uniform sampler2D uVisibleTex;
    uniform vec2 uTexSize;
    uniform int uHighlighted;
    void main(){
      int rid = int(vRangeId + 0.5);
      int x = rid % int(uTexSize.x);
      int y = rid / int(uTexSize.x);
      vec2 uv = (vec2(float(x),float(y)) + 0.5) / uTexSize;
      float vis = texture2D(uVisibleTex,uv).r;
      if(vis &lt; 0.5) discard;
      if(rid == uHighlighted) gl_FragColor = vec4(0,0,1,1);
      else             gl_FragColor = vec4(0,0,0,1);
    }
  `;return new Ts({uniforms:l,vertexShader:u,fragmentShader:h})}class bs extends Sn{constructor(t,i,r,s,o,l){super(t.clone(),i.clone());dt(this,&quot;originalGeometry&quot;);dt(this,&quot;originalMaterial&quot;);dt(this,&quot;drawRanges&quot;);dt(this,&quot;unique_key&quot;);dt(this,&quot;is_design&quot;);dt(this,&quot;ada_ext_data&quot;);dt(this,&quot;selectedRanges&quot;,new Set);dt(this,&quot;hiddenRanges&quot;,new Set);dt(this,&quot;edgeMesh&quot;);dt(this,&quot;rangeIdToIndex&quot;);dt(this,&quot;edgeMaterial&quot;);dt(this,&quot;_raycast_inverseMatrix&quot;,new yt);dt(this,&quot;_raycast_ray&quot;,new bl);dt(this,&quot;_raycast_sphere&quot;,new wi);dt(this,&quot;_raycast_vA&quot;,new Y);dt(this,&quot;_raycast_vB&quot;,new Y);dt(this,&quot;_raycast_vC&quot;,new Y);dt(this,&quot;_raycast_uvA&quot;,new Oe);dt(this,&quot;_raycast_uvB&quot;,new Oe);dt(this,&quot;_raycast_uvC&quot;,new Oe);dt(this,&quot;_raycast_intersectionPoint&quot;,new Y);dt(this,&quot;_raycast_barycoord&quot;,new Y);this.originalGeometry=t,this.originalMaterial=i.clone(),this.drawRanges=r,this.updateGroups(),this.unique_key=s,this.is_design=o,this.ada_ext_data=l}updateGroups(){const t=this.geometry.index.count;this.geometry.clearGroups(),this.material=[this.originalMaterial,cG.clone(),new $i({visible:!1})];const i=Array.from(this.drawRanges.entries()).map(([s,[o,l]])=&gt;({id:s,s:o,c:l})).sort((s,o)=&gt;s.s-o.s);let r=0;for(const{id:s,s:o,c:l}of i){o&gt;r&amp;&amp;this.geometry.addGroup(r,o-r,0);let u=0;this.hiddenRanges.has(s)?u=2:this.selectedRanges.has(s)&amp;&amp;(u=1),this.geometry.addGroup(o,l,u),r=o+l}r&lt;t&amp;&amp;this.geometry.addGroup(r,t-r,0)}getEdgeOverlay(t){if(!this.edgeMesh){const{geometry:i,rangeIdToIndex:r}=fG(this.originalGeometry,this.drawRanges);this.rangeIdToIndex=r,this.updateWorldMatrix(!0,!1);const s=this.matrixWorld;this.edgeMaterial=dG(t,r.size),this.edgeMesh=new Ur(i,this.edgeMaterial),this.edgeMesh.layers.set(1),this.edgeMesh.applyMatrix4(s)}return this.edgeMesh}updateSelectionGroups(t){this.selectedRanges=new Set(t),this.updateGroups(),this.edgeMaterial&amp;&amp;this.rangeIdToIndex&amp;&amp;(this.edgeMaterial.uniforms.uHighlighted.value=t.length?this.rangeIdToIndex.get(t[0]):-1)}clearSelectionGroups(){this.updateSelectionGroups([])}hideBatchDrawRange(t){for(const i of t)this.hiddenRanges.add(i);if(this.updateGroups(),this.edgeMaterial&amp;&amp;this.rangeIdToIndex){const i=this.edgeMaterial.uniforms.uVisibleTex.value;for(const r of t){const s=this.rangeIdToIndex.get(r);s!==void 0&amp;&amp;(i.image.data[s]=0)}i.needsUpdate=!0}}unhideAllDrawRanges(){if(this.hiddenRanges.clear(),this.updateGroups(),this.edgeMaterial){const t=this.edgeMaterial.uniforms.uVisibleTex.value;t.image.data.fill(255),this.edgeMaterial.uniforms.uHighlighted.value=-1,t.needsUpdate=!0}}raycast(t,i){const r=this.material;if(r===void 0)return;this.geometry.boundingSphere===null&amp;&amp;this.geometry.computeBoundingSphere();const s=this._raycast_sphere.copy(this.geometry.boundingSphere);if(s.applyMatrix4(this.matrixWorld),t.ray.intersectsSphere(s)===!1)return;const o=this._raycast_inverseMatrix.copy(this.matrixWorld).invert(),l=this._raycast_ray.copy(t.ray).applyMatrix4(o),h=Array.isArray(r)?r:[r],f=this.geometry.groups;for(let p=0;p&lt;f.length;p++){const m=f[p],g=m.materialIndex!==void 0?h[m.materialIndex]:void 0;g!==void 0&amp;&amp;g.visible!==!1&amp;&amp;this.raycastGroup(l,t,m,g,i)}}raycastGroup(t,i,r,s,o){const l=this.geometry,u=l.index,h=l.attributes.position;if(h===void 0)return;const f=r.start,p=f+r.count;this._raycast_vA,this._raycast_vB,this._raycast_vC;let m;if(u!==null){const g=u.array;for(let v=f;v&lt;p;v+=3){const x=g[v],b=g[v+1],_=g[v+2];m=this.checkBufferGeometryIntersection(this,s,i,t,h,x,b,_,r.materialIndex),m&amp;&amp;(m.faceIndex=Math.floor(v/3),o.push(m))}}else for(let g=f;g&lt;p;g+=3){const v=g,x=g+1,b=g+2;m=this.checkBufferGeometryIntersection(this,s,i,t,h,v,x,b,r.materialIndex),m&amp;&amp;(m.faceIndex=Math.floor(g/3),o.push(m))}}checkBufferGeometryIntersection(t,i,r,s,o,l,u,h,f){const p=this._raycast_vA,m=this._raycast_vB,g=this._raycast_vC,v=this._raycast_intersectionPoint;p.fromBufferAttribute(o,l),m.fromBufferAttribute(o,u),g.fromBufferAttribute(o,h);let x=i.side;x===void 0&amp;&amp;(x=Qr);const b=x===Qr;if(s.intersectTriangle(g,m,p,b,v)===null)return null;v.applyMatrix4(this.matrixWorld);const T=r.ray.origin.distanceTo(v);if(T&lt;r.near||T&gt;r.far)return null;const w=this.geometry.attributes.uv;let E;if(w){const R=this._raycast_uvA.fromBufferAttribute(w,l),N=this._raycast_uvB.fromBufferAttribute(w,u),A=this._raycast_uvC.fromBufferAttribute(w,h);E=this._uvIntersection(p,m,g,R,N,A,v)}return{distance:T,point:v.clone(),object:t,uv:E,face:null,faceIndex:-1}}_uvIntersection(t,i,r,s,o,l,u){const h=_r.getBarycoord(u,t,i,r,this._raycast_barycoord),f=new Oe;return s.multiplyScalar(h.x),o.multiplyScalar(h.y),l.multiplyScalar(h.z),f.add(s).add(o).add(l),f}}function pG(n,e,t,i=!0,r=null){const s=new bs(n.geometry,n.material,e,t,i,r);return s.position.copy(n.position),s.rotation.copy(n.rotation),s.scale.copy(n.scale),s.name=n.name,s.userData=n.userData,s.castShadow=n.castShadow,s.receiveShadow=n.receiveShadow,s.visible=n.visible,s.frustumCulled=n.frustumCulled,s.renderOrder=n.renderOrder,s.layers.mask=n.layers.mask,Array.isArray(s.material)?s.material.forEach(o=&gt;{o instanceof ts?(o.side=Ki,o.flatShading=!0,o.needsUpdate=!0):console.warn(`Material is not an instance of MeshStandardMaterial. Type: ${typeof o}`)}):s.material instanceof ts?(s.material.side=Ki,s.material.flatShading=!0,s.material.needsUpdate=!0):console.warn(`Material is not an instance of MeshStandardMaterial. Type: ${typeof s.material}`),s}function mG(n){n.traverse(e=&gt;{if(e instanceof Sn){const t=e.material,i=Array.isArray(t)?t:[t];i.forEach((r,s)=&gt;{if(r instanceof Oi){let o=!1;if(r instanceof $i||r instanceof ts||r instanceof Py||r instanceof cl||r instanceof rs||r instanceof Sw){const l=r.color,u=r.emissive;l.equals(new $e(0))&amp;&amp;u.equals(new $e(0))&amp;&amp;(o=!0)}o&amp;&amp;(i[s]=uG),i[s].flatShading=!0}}),e.material=Array.isArray(t)?i:i[0]}})}const gl=Eo(n=&gt;({hasAnimation:!1,selectedAnimation:&quot;&quot;,currentKey:0,isPlaying:!1,isControlsVisible:!1,setCurrentKey:e=&gt;{n({currentKey:e})},setSelectedAnimation:e=&gt;{n({selectedAnimation:e})},setHasAnimation:e=&gt;{n({hasAnimation:e})},setIsPlaying:e=&gt;{n({isPlaying:e})},setIsControlsVisible:e=&gt;{n({isControlsVisible:e})}}));function gG(n,e){const t=n.geometry,i=t.attributes.position,r=t.morphAttributes.position,s=t.morphTargetsRelative,o=n.morphTargetInfluences,l=n.morphTargetDictionary,u=e.geometry,h=u.attributes.position;let f=u.index;if(!f){const m=i.array,g=m.length/3,v=new Map;for(let T=0;T&lt;g;T++){const w=`${m[3*T]}_${m[3*T+1]}_${m[3*T+2]}`;v.set(w,T)}const x=h.array,b=x.length/3,_=new(g&gt;65535?Uint32Array:Uint16Array)(b);for(let T=0;T&lt;b;T++){const w=`${x[3*T]}_${x[3*T+1]}_${x[3*T+2]}`,E=v.get(w);if(E===void 0)throw new Error(`Cannot infer index for line-vertex ${T}: no matching mesh-vertex found`);_[T]=E}f=new Jt(_,1)}u.setAttribute(&quot;position&quot;,i),u.morphAttributes.position=r,u.morphTargetsRelative=s,u.setIndex(f),e.morphTargetInfluences=o,e.morphTargetDictionary=l;const p=e.material;p.morphTargets=!0,p.needsUpdate=!0,i.needsUpdate=!0}async function yG(n){var t,i;const e=zw.current;if(!e)return null;if(e.simulation_objects)for(const r of e.simulation_objects){const s=(t=r.node_references)==null?void 0:t.faces;if(n.name==s||((i=n.userData)==null?void 0:i.name)==s)return r}return null}async function _G(n){var t,i;const e=zw.current;if(!e)return null;if(e.design_objects)for(const r of e.design_objects){const s=(t=r.node_references)==null?void 0:t.faces;if(n.name==s||((i=n.userData)==null?void 0:i.name)==s)return r}return null}async function qN({gltf_scene:n,hash:e}){var r;eo.getState();const t=Bc.getState(),i=[];n.traverse(s=&gt;{s instanceof Sn?i.push({original:s,parent:s.parent}):(s instanceof Ur||s instanceof _y)&amp;&amp;s.layers.set(1)});for(const{original:s,parent:o}of i){const l=s.name;let u=n.userData[`draw_ranges_${l}`];const h=(r=s.userData)==null?void 0:r.node_id;!u&amp;&amp;h&amp;&amp;(u=n.userData[`draw_ranges_node${h}`]),u||console.warn(`No draw ranges found for mesh: ${l}`);const f=new Map;if(u)for(const[b,[_,T]]of Object.entries(u))f.set(b,[_,T]);const p=await _G(s),m=await yG(s);let g=!1;m==null&amp;&amp;p==null?g=!0:m!=null?g=!1:p!=null&amp;&amp;(g=!0);const x=pG(s,f,e,g,g?p:m);if(t.showEdges&amp;&amp;f.size&amp;&amp;g&amp;&amp;gc.current&amp;&amp;o.add(x.getEdgeOverlay(gc.current)),o.add(x),gl.getState().hasAnimation&amp;&amp;!g){const b=s.children[0];try{gG(x,b)}catch(_){console.error(&quot;Error assigning morph to edge:&quot;,_)}o.add(b)}o.remove(s)}mG(n)}async function vG(n){var _;if(!Zs.current)return;let t=n.indices,i=n.vertices;if(!(t&amp;&amp;i)){console.warn(&quot;Invalid mesh data: missing vertices or indices&quot;);return}let r=new Lt,s=new Float32Array(i),o=new Uint16Array(t);r.setAttribute(&quot;position&quot;,new Jt(s,3)),r.setIndex(new Jt(o,1)),r.computeVertexNormals();let l=new ts({color:8421504,metalness:.5,roughness:.5}),u=new Sn(r,l);n.name&amp;&amp;(u.name=n.name);let h=(_=u.geometry.index)==null?void 0:_.array.length;if(!h){console.warn(&quot;Unable to find mesh array length&quot;);return}let f=eo.getState().userdata;f||(console.warn(&quot;No userdata found&quot;),f={id_hierarchy:{}});let p=f.id_hierarchy,g=(Math.max(...Object.keys(p).map(Number))+1).toString();f[`draw_ranges_${u.name}`]={[g]:[0,h]},f.id_hierarchy[g]=[u.name,0],new Map().set(g,[0,h]);const x=new br;x.name=u.name,x.add(u);const b=x.name+&quot;_&quot;+x.uuid;await qN({gltf_scene:x,hash:b}),console.log(&quot;Mesh added to scene&quot;)}function Dh(n){let e=n.length;for(;--e&gt;=0;)n[e]=0}const bG=3,xG=258,YN=29,SG=256,wG=SG+1+YN,KN=30,EG=512,TG=new Array((wG+2)*2);Dh(TG);const MG=new Array(KN*2);Dh(MG);const AG=new Array(EG);Dh(AG);const CG=new Array(xG-bG+1);Dh(CG);const RG=new Array(YN);Dh(RG);const OG=new Array(KN);Dh(OG);const DG=(n,e,t,i)=&gt;{let r=n&amp;65535|0,s=n&gt;&gt;&gt;16&amp;65535|0,o=0;for(;t!==0;){o=t&gt;2e3?2e3:t,t-=o;do r=r+e[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s&lt;&lt;16|0};var yS=DG;const NG=()=&gt;{let n,e=[];for(var t=0;t&lt;256;t++){n=t;for(var i=0;i&lt;8;i++)n=n&amp;1?3988292384^n&gt;&gt;&gt;1:n&gt;&gt;&gt;1;e[t]=n}return e},IG=new Uint32Array(NG()),PG=(n,e,t,i)=&gt;{const r=IG,s=i+t;n^=-1;for(let o=i;o&lt;s;o++)n=n&gt;&gt;&gt;8^r[(n^e[o])&amp;255];return n^-1};var co=PG,_S={2:&quot;need dictionary&quot;,1:&quot;stream end&quot;,0:&quot;&quot;,&quot;-1&quot;:&quot;file error&quot;,&quot;-2&quot;:&quot;stream error&quot;,&quot;-3&quot;:&quot;data error&quot;,&quot;-4&quot;:&quot;insufficient memory&quot;,&quot;-5&quot;:&quot;buffer error&quot;,&quot;-6&quot;:&quot;incompatible version&quot;},$N={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const LG=(n,e)=&gt;Object.prototype.hasOwnProperty.call(n,e);var UG=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!=&quot;object&quot;)throw new TypeError(t+&quot;must be non-object&quot;);for(const i in t)LG(t,i)&amp;&amp;(n[i]=t[i])}}return n},kG=n=&gt;{let e=0;for(let i=0,r=n.length;i&lt;r;i++)e+=n[i].length;const t=new Uint8Array(e);for(let i=0,r=0,s=n.length;i&lt;s;i++){let o=n[i];t.set(o,r),r+=o.length}return t},ZN={assign:UG,flattenChunks:kG};let JN=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{JN=!1}const Rd=new Uint8Array(256);for(let n=0;n&lt;256;n++)Rd[n]=n&gt;=252?6:n&gt;=248?5:n&gt;=240?4:n&gt;=224?3:n&gt;=192?2:1;Rd[254]=Rd[254]=1;var FG=n=&gt;{if(typeof TextEncoder==&quot;function&quot;&amp;&amp;TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,i,r,s,o=n.length,l=0;for(r=0;r&lt;o;r++)t=n.charCodeAt(r),(t&amp;64512)===55296&amp;&amp;r+1&lt;o&amp;&amp;(i=n.charCodeAt(r+1),(i&amp;64512)===56320&amp;&amp;(t=65536+(t-55296&lt;&lt;10)+(i-56320),r++)),l+=t&lt;128?1:t&lt;2048?2:t&lt;65536?3:4;for(e=new Uint8Array(l),s=0,r=0;s&lt;l;r++)t=n.charCodeAt(r),(t&amp;64512)===55296&amp;&amp;r+1&lt;o&amp;&amp;(i=n.charCodeAt(r+1),(i&amp;64512)===56320&amp;&amp;(t=65536+(t-55296&lt;&lt;10)+(i-56320),r++)),t&lt;128?e[s++]=t:t&lt;2048?(e[s++]=192|t&gt;&gt;&gt;6,e[s++]=128|t&amp;63):t&lt;65536?(e[s++]=224|t&gt;&gt;&gt;12,e[s++]=128|t&gt;&gt;&gt;6&amp;63,e[s++]=128|t&amp;63):(e[s++]=240|t&gt;&gt;&gt;18,e[s++]=128|t&gt;&gt;&gt;12&amp;63,e[s++]=128|t&gt;&gt;&gt;6&amp;63,e[s++]=128|t&amp;63);return e};const zG=(n,e)=&gt;{if(e&lt;65534&amp;&amp;n.subarray&amp;&amp;JN)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t=&quot;&quot;;for(let i=0;i&lt;e;i++)t+=String.fromCharCode(n[i]);return t};var BG=(n,e)=&gt;{const t=e||n.length;if(typeof TextDecoder==&quot;function&quot;&amp;&amp;TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let i,r;const s=new Array(t*2);for(r=0,i=0;i&lt;t;){let o=n[i++];if(o&lt;128){s[r++]=o;continue}let l=Rd[o];if(l&gt;4){s[r++]=65533,i+=l-1;continue}for(o&amp;=l===2?31:l===3?15:7;l&gt;1&amp;&amp;i&lt;t;)o=o&lt;&lt;6|n[i++]&amp;63,l--;if(l&gt;1){s[r++]=65533;continue}o&lt;65536?s[r++]=o:(o-=65536,s[r++]=55296|o&gt;&gt;10&amp;1023,s[r++]=56320|o&amp;1023)}return zG(s,r)},HG=(n,e)=&gt;{e=e||n.length,e&gt;n.length&amp;&amp;(e=n.length);let t=e-1;for(;t&gt;=0&amp;&amp;(n[t]&amp;192)===128;)t--;return t&lt;0||t===0?e:t+Rd[n[t]]&gt;e?t:e},vS={string2buf:FG,buf2string:BG,utf8border:HG};function VG(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=&quot;&quot;,this.state=null,this.data_type=2,this.adler=0}var GG=VG;const $m=16209,jG=16191;var WG=function(e,t){let i,r,s,o,l,u,h,f,p,m,g,v,x,b,_,T,w,E,R,N,A,D,C,O;const L=e.state;i=e.next_in,C=e.input,r=i+(e.avail_in-5),s=e.next_out,O=e.output,o=s-(t-e.avail_out),l=s+(e.avail_out-257),u=L.dmax,h=L.wsize,f=L.whave,p=L.wnext,m=L.window,g=L.hold,v=L.bits,x=L.lencode,b=L.distcode,_=(1&lt;&lt;L.lenbits)-1,T=(1&lt;&lt;L.distbits)-1;e:do{v&lt;15&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8,g+=C[i++]&lt;&lt;v,v+=8),w=x[g&amp;_];t:for(;;){if(E=w&gt;&gt;&gt;24,g&gt;&gt;&gt;=E,v-=E,E=w&gt;&gt;&gt;16&amp;255,E===0)O[s++]=w&amp;65535;else if(E&amp;16){R=w&amp;65535,E&amp;=15,E&amp;&amp;(v&lt;E&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8),R+=g&amp;(1&lt;&lt;E)-1,g&gt;&gt;&gt;=E,v-=E),v&lt;15&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8,g+=C[i++]&lt;&lt;v,v+=8),w=b[g&amp;T];n:for(;;){if(E=w&gt;&gt;&gt;24,g&gt;&gt;&gt;=E,v-=E,E=w&gt;&gt;&gt;16&amp;255,E&amp;16){if(N=w&amp;65535,E&amp;=15,v&lt;E&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8,v&lt;E&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8)),N+=g&amp;(1&lt;&lt;E)-1,N&gt;u){e.msg=&quot;invalid distance too far back&quot;,L.mode=$m;break e}if(g&gt;&gt;&gt;=E,v-=E,E=s-o,N&gt;E){if(E=N-E,E&gt;f&amp;&amp;L.sane){e.msg=&quot;invalid distance too far back&quot;,L.mode=$m;break e}if(A=0,D=m,p===0){if(A+=h-E,E&lt;R){R-=E;do O[s++]=m[A++];while(--E);A=s-N,D=O}}else if(p&lt;E){if(A+=h+p-E,E-=p,E&lt;R){R-=E;do O[s++]=m[A++];while(--E);if(A=0,p&lt;R){E=p,R-=E;do O[s++]=m[A++];while(--E);A=s-N,D=O}}}else if(A+=p-E,E&lt;R){R-=E;do O[s++]=m[A++];while(--E);A=s-N,D=O}for(;R&gt;2;)O[s++]=D[A++],O[s++]=D[A++],O[s++]=D[A++],R-=3;R&amp;&amp;(O[s++]=D[A++],R&gt;1&amp;&amp;(O[s++]=D[A++]))}else{A=s-N;do O[s++]=O[A++],O[s++]=O[A++],O[s++]=O[A++],R-=3;while(R&gt;2);R&amp;&amp;(O[s++]=O[A++],R&gt;1&amp;&amp;(O[s++]=O[A++]))}}else if((E&amp;64)===0){w=b[(w&amp;65535)+(g&amp;(1&lt;&lt;E)-1)];continue n}else{e.msg=&quot;invalid distance code&quot;,L.mode=$m;break e}break}}else if((E&amp;64)===0){w=x[(w&amp;65535)+(g&amp;(1&lt;&lt;E)-1)];continue t}else if(E&amp;32){L.mode=jG;break e}else{e.msg=&quot;invalid literal/length code&quot;,L.mode=$m;break e}break}}while(i&lt;r&amp;&amp;s&lt;l);R=v&gt;&gt;3,i-=R,v-=R&lt;&lt;3,g&amp;=(1&lt;&lt;v)-1,e.next_in=i,e.next_out=s,e.avail_in=i&lt;r?5+(r-i):5-(i-r),e.avail_out=s&lt;l?257+(l-s):257-(s-l),L.hold=g,L.bits=v};const Lu=15,AC=852,CC=592,RC=0,Jb=1,OC=2,XG=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),qG=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),YG=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),KG=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),$G=(n,e,t,i,r,s,o,l)=&gt;{const u=l.bits;let h=0,f=0,p=0,m=0,g=0,v=0,x=0,b=0,_=0,T=0,w,E,R,N,A,D=null,C;const O=new Uint16Array(Lu+1),L=new Uint16Array(Lu+1);let V=null,Z,z,K;for(h=0;h&lt;=Lu;h++)O[h]=0;for(f=0;f&lt;i;f++)O[e[t+f]]++;for(g=u,m=Lu;m&gt;=1&amp;&amp;O[m]===0;m--);if(g&gt;m&amp;&amp;(g=m),m===0)return r[s++]=1&lt;&lt;24|64&lt;&lt;16|0,r[s++]=1&lt;&lt;24|64&lt;&lt;16|0,l.bits=1,0;for(p=1;p&lt;m&amp;&amp;O[p]===0;p++);for(g&lt;p&amp;&amp;(g=p),b=1,h=1;h&lt;=Lu;h++)if(b&lt;&lt;=1,b-=O[h],b&lt;0)return-1;if(b&gt;0&amp;&amp;(n===RC||m!==1))return-1;for(L[1]=0,h=1;h&lt;Lu;h++)L[h+1]=L[h]+O[h];for(f=0;f&lt;i;f++)e[t+f]!==0&amp;&amp;(o[L[e[t+f]]++]=f);if(n===RC?(D=V=o,C=20):n===Jb?(D=XG,V=qG,C=257):(D=YG,V=KG,C=0),T=0,f=0,h=p,A=s,v=g,x=0,R=-1,_=1&lt;&lt;g,N=_-1,n===Jb&amp;&amp;_&gt;AC||n===OC&amp;&amp;_&gt;CC)return 1;for(;;){Z=h-x,o[f]+1&lt;C?(z=0,K=o[f]):o[f]&gt;=C?(z=V[o[f]-C],K=D[o[f]-C]):(z=96,K=0),w=1&lt;&lt;h-x,E=1&lt;&lt;v,p=E;do E-=w,r[A+(T&gt;&gt;x)+E]=Z&lt;&lt;24|z&lt;&lt;16|K|0;while(E!==0);for(w=1&lt;&lt;h-1;T&amp;w;)w&gt;&gt;=1;if(w!==0?(T&amp;=w-1,T+=w):T=0,f++,--O[h]===0){if(h===m)break;h=e[t+o[f]]}if(h&gt;g&amp;&amp;(T&amp;N)!==R){for(x===0&amp;&amp;(x=g),A+=p,v=h-x,b=1&lt;&lt;v;v+x&lt;m&amp;&amp;(b-=O[v+x],!(b&lt;=0));)v++,b&lt;&lt;=1;if(_+=1&lt;&lt;v,n===Jb&amp;&amp;_&gt;AC||n===OC&amp;&amp;_&gt;CC)return 1;R=T&amp;N,r[R]=g&lt;&lt;24|v&lt;&lt;16|A-s|0}}return T!==0&amp;&amp;(r[A+T]=h-x&lt;&lt;24|64&lt;&lt;16|0),l.bits=g,0};var hd=$G;const ZG=0,QN=1,eI=2,{Z_FINISH:DC,Z_BLOCK:JG,Z_TREES:Zm,Z_OK:Rc,Z_STREAM_END:QG,Z_NEED_DICT:e6,Z_STREAM_ERROR:Ms,Z_DATA_ERROR:tI,Z_MEM_ERROR:nI,Z_BUF_ERROR:t6,Z_DEFLATED:NC}=$N,Hy=16180,IC=16181,PC=16182,LC=16183,UC=16184,kC=16185,FC=16186,zC=16187,BC=16188,HC=16189,D0=16190,Ko=16191,Qb=16192,VC=16193,ex=16194,GC=16195,jC=16196,WC=16197,XC=16198,Jm=16199,Qm=16200,qC=16201,YC=16202,KC=16203,$C=16204,ZC=16205,tx=16206,JC=16207,QC=16208,qn=16209,iI=16210,rI=16211,n6=852,i6=592,r6=15,s6=r6,eR=n=&gt;(n&gt;&gt;&gt;24&amp;255)+(n&gt;&gt;&gt;8&amp;65280)+((n&amp;65280)&lt;&lt;8)+((n&amp;255)&lt;&lt;24);function o6(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const zc=n=&gt;{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode&lt;Hy||e.mode&gt;rI?1:0},sI=n=&gt;{if(zc(n))return Ms;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg=&quot;&quot;,e.wrap&amp;&amp;(n.adler=e.wrap&amp;1),e.mode=Hy,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(n6),e.distcode=e.distdyn=new Int32Array(i6),e.sane=1,e.back=-1,Rc},oI=n=&gt;{if(zc(n))return Ms;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,sI(n)},aI=(n,e)=&gt;{let t;if(zc(n))return Ms;const i=n.state;return e&lt;0?(t=0,e=-e):(t=(e&gt;&gt;4)+5,e&lt;48&amp;&amp;(e&amp;=15)),e&amp;&amp;(e&lt;8||e&gt;15)?Ms:(i.window!==null&amp;&amp;i.wbits!==e&amp;&amp;(i.window=null),i.wrap=t,i.wbits=e,oI(n))},lI=(n,e)=&gt;{if(!n)return Ms;const t=new o6;n.state=t,t.strm=n,t.window=null,t.mode=Hy;const i=aI(n,e);return i!==Rc&amp;&amp;(n.state=null),i},a6=n=&gt;lI(n,s6);let tR=!0,nx,ix;const l6=n=&gt;{if(tR){nx=new Int32Array(512),ix=new Int32Array(32);let e=0;for(;e&lt;144;)n.lens[e++]=8;for(;e&lt;256;)n.lens[e++]=9;for(;e&lt;280;)n.lens[e++]=7;for(;e&lt;288;)n.lens[e++]=8;for(hd(QN,n.lens,0,288,nx,0,n.work,{bits:9}),e=0;e&lt;32;)n.lens[e++]=5;hd(eI,n.lens,0,32,ix,0,n.work,{bits:5}),tR=!1}n.lencode=nx,n.lenbits=9,n.distcode=ix,n.distbits=5},cI=(n,e,t,i)=&gt;{let r;const s=n.state;return s.window===null&amp;&amp;(s.wsize=1&lt;&lt;s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i&gt;=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r&gt;i&amp;&amp;(r=i),s.window.set(e.subarray(t-i,t-i+r),s.wnext),i-=r,i?(s.window.set(e.subarray(t-i,t),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&amp;&amp;(s.wnext=0),s.whave&lt;s.wsize&amp;&amp;(s.whave+=r))),0},c6=(n,e)=&gt;{let t,i,r,s,o,l,u,h,f,p,m,g,v,x,b=0,_,T,w,E,R,N,A,D;const C=new Uint8Array(4);let O,L;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(zc(n)||!n.output||!n.input&amp;&amp;n.avail_in!==0)return Ms;t=n.state,t.mode===Ko&amp;&amp;(t.mode=Qb),o=n.next_out,r=n.output,u=n.avail_out,s=n.next_in,i=n.input,l=n.avail_in,h=t.hold,f=t.bits,p=l,m=u,D=Rc;e:for(;;)switch(t.mode){case Hy:if(t.wrap===0){t.mode=Qb;break}for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.wrap&amp;2&amp;&amp;h===35615){t.wbits===0&amp;&amp;(t.wbits=15),t.check=0,C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,t.check=co(t.check,C,2,0),h=0,f=0,t.mode=IC;break}if(t.head&amp;&amp;(t.head.done=!1),!(t.wrap&amp;1)||(((h&amp;255)&lt;&lt;8)+(h&gt;&gt;8))%31){n.msg=&quot;incorrect header check&quot;,t.mode=qn;break}if((h&amp;15)!==NC){n.msg=&quot;unknown compression method&quot;,t.mode=qn;break}if(h&gt;&gt;&gt;=4,f-=4,A=(h&amp;15)+8,t.wbits===0&amp;&amp;(t.wbits=A),A&gt;15||A&gt;t.wbits){n.msg=&quot;invalid window size&quot;,t.mode=qn;break}t.dmax=1&lt;&lt;t.wbits,t.flags=0,n.adler=t.check=1,t.mode=h&amp;512?HC:Ko,h=0,f=0;break;case IC:for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.flags=h,(t.flags&amp;255)!==NC){n.msg=&quot;unknown compression method&quot;,t.mode=qn;break}if(t.flags&amp;57344){n.msg=&quot;unknown header flags set&quot;,t.mode=qn;break}t.head&amp;&amp;(t.head.text=h&gt;&gt;8&amp;1),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,t.check=co(t.check,C,2,0)),h=0,f=0,t.mode=PC;case PC:for(;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.head&amp;&amp;(t.head.time=h),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,C[2]=h&gt;&gt;&gt;16&amp;255,C[3]=h&gt;&gt;&gt;24&amp;255,t.check=co(t.check,C,4,0)),h=0,f=0,t.mode=LC;case LC:for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.head&amp;&amp;(t.head.xflags=h&amp;255,t.head.os=h&gt;&gt;8),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,t.check=co(t.check,C,2,0)),h=0,f=0,t.mode=UC;case UC:if(t.flags&amp;1024){for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.length=h,t.head&amp;&amp;(t.head.extra_len=h),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,t.check=co(t.check,C,2,0)),h=0,f=0}else t.head&amp;&amp;(t.head.extra=null);t.mode=kC;case kC:if(t.flags&amp;1024&amp;&amp;(g=t.length,g&gt;l&amp;&amp;(g=l),g&amp;&amp;(t.head&amp;&amp;(A=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(s,s+g),A)),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(t.check=co(t.check,i,g,s)),l-=g,s+=g,t.length-=g),t.length))break e;t.length=0,t.mode=FC;case FC:if(t.flags&amp;2048){if(l===0)break e;g=0;do A=i[s+g++],t.head&amp;&amp;A&amp;&amp;t.length&lt;65536&amp;&amp;(t.head.name+=String.fromCharCode(A));while(A&amp;&amp;g&lt;l);if(t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(t.check=co(t.check,i,g,s)),l-=g,s+=g,A)break e}else t.head&amp;&amp;(t.head.name=null);t.length=0,t.mode=zC;case zC:if(t.flags&amp;4096){if(l===0)break e;g=0;do A=i[s+g++],t.head&amp;&amp;A&amp;&amp;t.length&lt;65536&amp;&amp;(t.head.comment+=String.fromCharCode(A));while(A&amp;&amp;g&lt;l);if(t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(t.check=co(t.check,i,g,s)),l-=g,s+=g,A)break e}else t.head&amp;&amp;(t.head.comment=null);t.mode=BC;case BC:if(t.flags&amp;512){for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.wrap&amp;4&amp;&amp;h!==(t.check&amp;65535)){n.msg=&quot;header crc mismatch&quot;,t.mode=qn;break}h=0,f=0}t.head&amp;&amp;(t.head.hcrc=t.flags&gt;&gt;9&amp;1,t.head.done=!0),n.adler=t.check=0,t.mode=Ko;break;case HC:for(;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}n.adler=t.check=eR(h),h=0,f=0,t.mode=D0;case D0:if(t.havedict===0)return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=l,t.hold=h,t.bits=f,e6;n.adler=t.check=1,t.mode=Ko;case Ko:if(e===JG||e===Zm)break e;case Qb:if(t.last){h&gt;&gt;&gt;=f&amp;7,f-=f&amp;7,t.mode=tx;break}for(;f&lt;3;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}switch(t.last=h&amp;1,h&gt;&gt;&gt;=1,f-=1,h&amp;3){case 0:t.mode=VC;break;case 1:if(l6(t),t.mode=Jm,e===Zm){h&gt;&gt;&gt;=2,f-=2;break e}break;case 2:t.mode=jC;break;case 3:n.msg=&quot;invalid block type&quot;,t.mode=qn}h&gt;&gt;&gt;=2,f-=2;break;case VC:for(h&gt;&gt;&gt;=f&amp;7,f-=f&amp;7;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if((h&amp;65535)!==(h&gt;&gt;&gt;16^65535)){n.msg=&quot;invalid stored block lengths&quot;,t.mode=qn;break}if(t.length=h&amp;65535,h=0,f=0,t.mode=ex,e===Zm)break e;case ex:t.mode=GC;case GC:if(g=t.length,g){if(g&gt;l&amp;&amp;(g=l),g&gt;u&amp;&amp;(g=u),g===0)break e;r.set(i.subarray(s,s+g),o),l-=g,s+=g,u-=g,o+=g,t.length-=g;break}t.mode=Ko;break;case jC:for(;f&lt;14;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.nlen=(h&amp;31)+257,h&gt;&gt;&gt;=5,f-=5,t.ndist=(h&amp;31)+1,h&gt;&gt;&gt;=5,f-=5,t.ncode=(h&amp;15)+4,h&gt;&gt;&gt;=4,f-=4,t.nlen&gt;286||t.ndist&gt;30){n.msg=&quot;too many length or distance symbols&quot;,t.mode=qn;break}t.have=0,t.mode=WC;case WC:for(;t.have&lt;t.ncode;){for(;f&lt;3;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.lens[V[t.have++]]=h&amp;7,h&gt;&gt;&gt;=3,f-=3}for(;t.have&lt;19;)t.lens[V[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,O={bits:t.lenbits},D=hd(ZG,t.lens,0,19,t.lencode,0,t.work,O),t.lenbits=O.bits,D){n.msg=&quot;invalid code lengths set&quot;,t.mode=qn;break}t.have=0,t.mode=XC;case XC:for(;t.have&lt;t.nlen+t.ndist;){for(;b=t.lencode[h&amp;(1&lt;&lt;t.lenbits)-1],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(w&lt;16)h&gt;&gt;&gt;=_,f-=_,t.lens[t.have++]=w;else{if(w===16){for(L=_+2;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(h&gt;&gt;&gt;=_,f-=_,t.have===0){n.msg=&quot;invalid bit length repeat&quot;,t.mode=qn;break}A=t.lens[t.have-1],g=3+(h&amp;3),h&gt;&gt;&gt;=2,f-=2}else if(w===17){for(L=_+3;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=_,f-=_,A=0,g=3+(h&amp;7),h&gt;&gt;&gt;=3,f-=3}else{for(L=_+7;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=_,f-=_,A=0,g=11+(h&amp;127),h&gt;&gt;&gt;=7,f-=7}if(t.have+g&gt;t.nlen+t.ndist){n.msg=&quot;invalid bit length repeat&quot;,t.mode=qn;break}for(;g--;)t.lens[t.have++]=A}}if(t.mode===qn)break;if(t.lens[256]===0){n.msg=&quot;invalid code -- missing end-of-block&quot;,t.mode=qn;break}if(t.lenbits=9,O={bits:t.lenbits},D=hd(QN,t.lens,0,t.nlen,t.lencode,0,t.work,O),t.lenbits=O.bits,D){n.msg=&quot;invalid literal/lengths set&quot;,t.mode=qn;break}if(t.distbits=6,t.distcode=t.distdyn,O={bits:t.distbits},D=hd(eI,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,O),t.distbits=O.bits,D){n.msg=&quot;invalid distances set&quot;,t.mode=qn;break}if(t.mode=Jm,e===Zm)break e;case Jm:t.mode=Qm;case Qm:if(l&gt;=6&amp;&amp;u&gt;=258){n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=l,t.hold=h,t.bits=f,WG(n,m),o=n.next_out,r=n.output,u=n.avail_out,s=n.next_in,i=n.input,l=n.avail_in,h=t.hold,f=t.bits,t.mode===Ko&amp;&amp;(t.back=-1);break}for(t.back=0;b=t.lencode[h&amp;(1&lt;&lt;t.lenbits)-1],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(T&amp;&amp;(T&amp;240)===0){for(E=_,R=T,N=w;b=t.lencode[N+((h&amp;(1&lt;&lt;E+R)-1)&gt;&gt;E)],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(E+_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=E,f-=E,t.back+=E}if(h&gt;&gt;&gt;=_,f-=_,t.back+=_,t.length=w,T===0){t.mode=ZC;break}if(T&amp;32){t.back=-1,t.mode=Ko;break}if(T&amp;64){n.msg=&quot;invalid literal/length code&quot;,t.mode=qn;break}t.extra=T&amp;15,t.mode=qC;case qC:if(t.extra){for(L=t.extra;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.length+=h&amp;(1&lt;&lt;t.extra)-1,h&gt;&gt;&gt;=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=YC;case YC:for(;b=t.distcode[h&amp;(1&lt;&lt;t.distbits)-1],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if((T&amp;240)===0){for(E=_,R=T,N=w;b=t.distcode[N+((h&amp;(1&lt;&lt;E+R)-1)&gt;&gt;E)],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(E+_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=E,f-=E,t.back+=E}if(h&gt;&gt;&gt;=_,f-=_,t.back+=_,T&amp;64){n.msg=&quot;invalid distance code&quot;,t.mode=qn;break}t.offset=w,t.extra=T&amp;15,t.mode=KC;case KC:if(t.extra){for(L=t.extra;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.offset+=h&amp;(1&lt;&lt;t.extra)-1,h&gt;&gt;&gt;=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset&gt;t.dmax){n.msg=&quot;invalid distance too far back&quot;,t.mode=qn;break}t.mode=$C;case $C:if(u===0)break e;if(g=m-u,t.offset&gt;g){if(g=t.offset-g,g&gt;t.whave&amp;&amp;t.sane){n.msg=&quot;invalid distance too far back&quot;,t.mode=qn;break}g&gt;t.wnext?(g-=t.wnext,v=t.wsize-g):v=t.wnext-g,g&gt;t.length&amp;&amp;(g=t.length),x=t.window}else x=r,v=o-t.offset,g=t.length;g&gt;u&amp;&amp;(g=u),u-=g,t.length-=g;do r[o++]=x[v++];while(--g);t.length===0&amp;&amp;(t.mode=Qm);break;case ZC:if(u===0)break e;r[o++]=t.length,u--,t.mode=Qm;break;case tx:if(t.wrap){for(;f&lt;32;){if(l===0)break e;l--,h|=i[s++]&lt;&lt;f,f+=8}if(m-=u,n.total_out+=m,t.total+=m,t.wrap&amp;4&amp;&amp;m&amp;&amp;(n.adler=t.check=t.flags?co(t.check,r,m,o-m):yS(t.check,r,m,o-m)),m=u,t.wrap&amp;4&amp;&amp;(t.flags?h:eR(h))!==t.check){n.msg=&quot;incorrect data check&quot;,t.mode=qn;break}h=0,f=0}t.mode=JC;case JC:if(t.wrap&amp;&amp;t.flags){for(;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.wrap&amp;4&amp;&amp;h!==(t.total&amp;4294967295)){n.msg=&quot;incorrect length check&quot;,t.mode=qn;break}h=0,f=0}t.mode=QC;case QC:D=QG;break e;case qn:D=tI;break e;case iI:return nI;case rI:default:return Ms}return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=l,t.hold=h,t.bits=f,(t.wsize||m!==n.avail_out&amp;&amp;t.mode&lt;qn&amp;&amp;(t.mode&lt;tx||e!==DC))&amp;&amp;cI(n,n.output,n.next_out,m-n.avail_out),p-=n.avail_in,m-=n.avail_out,n.total_in+=p,n.total_out+=m,t.total+=m,t.wrap&amp;4&amp;&amp;m&amp;&amp;(n.adler=t.check=t.flags?co(t.check,r,m,n.next_out-m):yS(t.check,r,m,n.next_out-m)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Ko?128:0)+(t.mode===Jm||t.mode===ex?256:0),(p===0&amp;&amp;m===0||e===DC)&amp;&amp;D===Rc&amp;&amp;(D=t6),D},u6=n=&gt;{if(zc(n))return Ms;let e=n.state;return e.window&amp;&amp;(e.window=null),n.state=null,Rc},h6=(n,e)=&gt;{if(zc(n))return Ms;const t=n.state;return(t.wrap&amp;2)===0?Ms:(t.head=e,e.done=!1,Rc)},f6=(n,e)=&gt;{const t=e.length;let i,r,s;return zc(n)||(i=n.state,i.wrap!==0&amp;&amp;i.mode!==D0)?Ms:i.mode===D0&amp;&amp;(r=1,r=yS(r,e,t,0),r!==i.check)?tI:(s=cI(n,e,t,t),s?(i.mode=iI,nI):(i.havedict=1,Rc))};var d6=oI,p6=aI,m6=sI,g6=a6,y6=lI,_6=c6,v6=u6,b6=h6,x6=f6,S6=&quot;pako inflate (from Nodeca project)&quot;,ea={inflateReset:d6,inflateReset2:p6,inflateResetKeep:m6,inflateInit:g6,inflateInit2:y6,inflate:_6,inflateEnd:v6,inflateGetHeader:b6,inflateSetDictionary:x6,inflateInfo:S6};function w6(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=&quot;&quot;,this.comment=&quot;&quot;,this.hcrc=0,this.done=!1}var E6=w6;const uI=Object.prototype.toString,{Z_NO_FLUSH:T6,Z_FINISH:M6,Z_OK:Od,Z_STREAM_END:rx,Z_NEED_DICT:sx,Z_STREAM_ERROR:A6,Z_DATA_ERROR:nR,Z_MEM_ERROR:C6}=$N;function Vy(n){this.options=ZN.assign({chunkSize:1024*64,windowBits:15,to:&quot;&quot;},n||{});const e=this.options;e.raw&amp;&amp;e.windowBits&gt;=0&amp;&amp;e.windowBits&lt;16&amp;&amp;(e.windowBits=-e.windowBits,e.windowBits===0&amp;&amp;(e.windowBits=-15)),e.windowBits&gt;=0&amp;&amp;e.windowBits&lt;16&amp;&amp;!(n&amp;&amp;n.windowBits)&amp;&amp;(e.windowBits+=32),e.windowBits&gt;15&amp;&amp;e.windowBits&lt;48&amp;&amp;(e.windowBits&amp;15)===0&amp;&amp;(e.windowBits|=15),this.err=0,this.msg=&quot;&quot;,this.ended=!1,this.chunks=[],this.strm=new GG,this.strm.avail_out=0;let t=ea.inflateInit2(this.strm,e.windowBits);if(t!==Od)throw new Error(_S[t]);if(this.header=new E6,ea.inflateGetHeader(this.strm,this.header),e.dictionary&amp;&amp;(typeof e.dictionary==&quot;string&quot;?e.dictionary=vS.string2buf(e.dictionary):uI.call(e.dictionary)===&quot;[object ArrayBuffer]&quot;&amp;&amp;(e.dictionary=new Uint8Array(e.dictionary)),e.raw&amp;&amp;(t=ea.inflateSetDictionary(this.strm,e.dictionary),t!==Od)))throw new Error(_S[t])}Vy.prototype.push=function(n,e){const t=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?M6:T6,uI.call(n)===&quot;[object ArrayBuffer]&quot;?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&amp;&amp;(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),s=ea.inflate(t,o),s===sx&amp;&amp;r&amp;&amp;(s=ea.inflateSetDictionary(t,r),s===Od?s=ea.inflate(t,o):s===nR&amp;&amp;(s=sx));t.avail_in&gt;0&amp;&amp;s===rx&amp;&amp;t.state.wrap&gt;0&amp;&amp;n[t.next_in]!==0;)ea.inflateReset(t),s=ea.inflate(t,o);switch(s){case A6:case nR:case sx:case C6:return this.onEnd(s),this.ended=!0,!1}if(l=t.avail_out,t.next_out&amp;&amp;(t.avail_out===0||s===rx))if(this.options.to===&quot;string&quot;){let u=vS.utf8border(t.output,t.next_out),h=t.next_out-u,f=vS.buf2string(t.output,u);t.next_out=h,t.avail_out=i-h,h&amp;&amp;t.output.set(t.output.subarray(u,u+h),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Od&amp;&amp;l===0)){if(s===rx)return s=ea.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Vy.prototype.onData=function(n){this.chunks.push(n)};Vy.prototype.onEnd=function(n){n===Od&amp;&amp;(this.options.to===&quot;string&quot;?this.result=this.chunks.join(&quot;&quot;):this.result=ZN.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function R6(n,e){const t=new Vy(e);if(t.push(n),t.err)throw t.msg||_S[t.err];return t.result}var O6=R6,D6={ungzip:O6};const{ungzip:N6}=D6;var I6=N6;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hI=Symbol(&quot;Comlink.proxy&quot;),P6=Symbol(&quot;Comlink.endpoint&quot;),L6=Symbol(&quot;Comlink.releaseProxy&quot;),ox=Symbol(&quot;Comlink.finalizer&quot;),Ng=Symbol(&quot;Comlink.thrown&quot;),fI=n=&gt;typeof n==&quot;object&quot;&amp;&amp;n!==null||typeof n==&quot;function&quot;,U6={canHandle:n=&gt;fI(n)&amp;&amp;n[hI],serialize(n){const{port1:e,port2:t}=new MessageChannel;return pI(n,e),[t,[t]]},deserialize(n){return n.start(),gI(n)}},k6={canHandle:n=&gt;fI(n)&amp;&amp;Ng in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},dI=new Map([[&quot;proxy&quot;,U6],[&quot;throw&quot;,k6]]);function F6(n,e){for(const t of n)if(e===t||t===&quot;*&quot;||t instanceof RegExp&amp;&amp;t.test(e))return!0;return!1}function pI(n,e=globalThis,t=[&quot;*&quot;]){e.addEventListener(&quot;message&quot;,function i(r){if(!r||!r.data)return;if(!F6(t,r.origin)){console.warn(`Invalid origin &#x27;${r.origin}&#x27; for comlink proxy`);return}const{id:s,type:o,path:l}=Object.assign({path:[]},r.data),u=(r.data.argumentList||[]).map(lc);let h;try{const f=l.slice(0,-1).reduce((m,g)=&gt;m[g],n),p=l.reduce((m,g)=&gt;m[g],n);switch(o){case&quot;GET&quot;:h=p;break;case&quot;SET&quot;:f[l.slice(-1)[0]]=lc(r.data.value),h=!0;break;case&quot;APPLY&quot;:h=p.apply(f,u);break;case&quot;CONSTRUCT&quot;:{const m=new p(...u);h=j6(m)}break;case&quot;ENDPOINT&quot;:{const{port1:m,port2:g}=new MessageChannel;pI(n,g),h=G6(m,[m])}break;case&quot;RELEASE&quot;:h=void 0;break;default:return}}catch(f){h={value:f,[Ng]:0}}Promise.resolve(h).catch(f=&gt;({value:f,[Ng]:0})).then(f=&gt;{const[p,m]=P0(f);e.postMessage(Object.assign(Object.assign({},p),{id:s}),m),o===&quot;RELEASE&quot;&amp;&amp;(e.removeEventListener(&quot;message&quot;,i),mI(e),ox in n&amp;&amp;typeof n[ox]==&quot;function&quot;&amp;&amp;n[ox]())}).catch(f=&gt;{const[p,m]=P0({value:new TypeError(&quot;Unserializable return value&quot;),[Ng]:0});e.postMessage(Object.assign(Object.assign({},p),{id:s}),m)})}),e.start&amp;&amp;e.start()}function z6(n){return n.constructor.name===&quot;MessagePort&quot;}function mI(n){z6(n)&amp;&amp;n.close()}function gI(n,e){const t=new Map;return n.addEventListener(&quot;message&quot;,function(r){const{data:s}=r;if(!s||!s.id)return;const o=t.get(s.id);if(o)try{o(s)}finally{t.delete(s.id)}}),bS(n,t,[],e)}function eg(n){if(n)throw new Error(&quot;Proxy has been released and is not useable&quot;)}function yI(n){return qu(n,new Map,{type:&quot;RELEASE&quot;}).then(()=&gt;{mI(n)})}const N0=new WeakMap,I0=&quot;FinalizationRegistry&quot;in globalThis&amp;&amp;new FinalizationRegistry(n=&gt;{const e=(N0.get(n)||0)-1;N0.set(n,e),e===0&amp;&amp;yI(n)});function B6(n,e){const t=(N0.get(e)||0)+1;N0.set(e,t),I0&amp;&amp;I0.register(n,e,n)}function H6(n){I0&amp;&amp;I0.unregister(n)}function bS(n,e,t=[],i=function(){}){let r=!1;const s=new Proxy(i,{get(o,l){if(eg(r),l===L6)return()=&gt;{H6(s),yI(n),e.clear(),r=!0};if(l===&quot;then&quot;){if(t.length===0)return{then:()=&gt;s};const u=qu(n,e,{type:&quot;GET&quot;,path:t.map(h=&gt;h.toString())}).then(lc);return u.then.bind(u)}return bS(n,e,[...t,l])},set(o,l,u){eg(r);const[h,f]=P0(u);return qu(n,e,{type:&quot;SET&quot;,path:[...t,l].map(p=&gt;p.toString()),value:h},f).then(lc)},apply(o,l,u){eg(r);const h=t[t.length-1];if(h===P6)return qu(n,e,{type:&quot;ENDPOINT&quot;}).then(lc);if(h===&quot;bind&quot;)return bS(n,e,t.slice(0,-1));const[f,p]=iR(u);return qu(n,e,{type:&quot;APPLY&quot;,path:t.map(m=&gt;m.toString()),argumentList:f},p).then(lc)},construct(o,l){eg(r);const[u,h]=iR(l);return qu(n,e,{type:&quot;CONSTRUCT&quot;,path:t.map(f=&gt;f.toString()),argumentList:u},h).then(lc)}});return B6(s,n),s}function V6(n){return Array.prototype.concat.apply([],n)}function iR(n){const e=n.map(P0);return[e.map(t=&gt;t[0]),V6(e.map(t=&gt;t[1]))]}const _I=new WeakMap;function G6(n,e){return _I.set(n,e),n}function j6(n){return Object.assign(n,{[hI]:!0})}function P0(n){for(const[e,t]of dI)if(t.canHandle(n)){const[i,r]=t.serialize(n);return[{type:&quot;HANDLER&quot;,name:e,value:i},r]}return[{type:&quot;RAW&quot;,value:n},_I.get(n)||[]]}function lc(n){switch(n.type){case&quot;HANDLER&quot;:return dI.get(n.name).deserialize(n.value);case&quot;RAW&quot;:return n.value}}function qu(n,e,t,i){return new Promise(r=&gt;{const s=W6();e.set(s,r),n.start&amp;&amp;n.start(),n.postMessage(Object.assign({id:s},t),i)})}function W6(){return new Array(4).fill(0).map(()=&gt;Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join(&quot;-&quot;)}const vI=&#x27;var Lo=Object.defineProperty;var Uo=(Ce,me,ve)=&gt;me in Ce?Lo(Ce,me,{enumerable:!0,configurable:!0,writable:!0,value:ve}):Ce[me]=ve;var bn=(Ce,me,ve)=&gt;Uo(Ce,typeof me!=&quot;symbol&quot;?me+&quot;&quot;:me,ve);(function(){&quot;use strict&quot;;var Ce=typeof globalThis&lt;&quot;u&quot;?globalThis:typeof window&lt;&quot;u&quot;?window:typeof global&lt;&quot;u&quot;?global:typeof self&lt;&quot;u&quot;?self:{};function me(_){return _&amp;&amp;_.__esModule&amp;&amp;Object.prototype.hasOwnProperty.call(_,&quot;default&quot;)?_.default:_}var ve={exports:{}},Fr=ve.exports,Wt;function Lr(){return Wt||(Wt=1,function(_,j){(function(R,C){_.exports=C()})(Fr,function(){var R=function(e,n){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&amp;&amp;(t[o]=r[o])})(e,n)},C=function(){return(C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t&lt;r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&amp;&amp;(e[o]=n[o]);return e}).apply(this,arguments)};function L(e,n,t){for(var r,o=0,i=n.length;o&lt;i;o++)!r&amp;&amp;o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}var B=typeof globalThis&lt;&quot;u&quot;?globalThis:typeof self&lt;&quot;u&quot;?self:typeof window&lt;&quot;u&quot;?window:Ce,U=Object.keys,q=Array.isArray;function W(e,n){return typeof n!=&quot;object&quot;||U(n).forEach(function(t){e[t]=n[t]}),e}typeof Promise&gt;&quot;u&quot;||B.Promise||(B.Promise=Promise);var H=Object.getPrototypeOf,Q={}.hasOwnProperty;function V(e,n){return Q.call(e,n)}function $(e,n){typeof n==&quot;function&quot;&amp;&amp;(n=n(H(e))),(typeof Reflect&gt;&quot;u&quot;?U:Reflect.ownKeys)(n).forEach(function(t){he(e,t,n[t])})}var ue=Object.defineProperty;function he(e,n,t,r){ue(e,n,W(t&amp;&amp;V(t,&quot;get&quot;)&amp;&amp;typeof t.get==&quot;function&quot;?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function We(e){return{from:function(n){return e.prototype=Object.create(n.prototype),he(e.prototype,&quot;constructor&quot;,e),{extend:$.bind(null,e.prototype)}}}}var ro=Object.getOwnPropertyDescriptor,oo=[].slice;function En(e,n,t){return oo.call(e,n,t)}function er(e,n){return n(e)}function tn(e){if(!e)throw new Error(&quot;Assertion Failed&quot;)}function nr(e){B.setImmediate?setImmediate(e):setTimeout(e,0)}function ge(e,n){if(typeof n==&quot;string&quot;&amp;&amp;V(e,n))return e[n];if(!n)return e;if(typeof n!=&quot;string&quot;){for(var t=[],r=0,o=n.length;r&lt;o;++r){var i=ge(e,n[r]);t.push(i)}return t}var a=n.indexOf(&quot;.&quot;);if(a!==-1){var u=e[n.substr(0,a)];return u==null?void 0:ge(u,n.substr(a+1))}}function se(e,n,t){if(e&amp;&amp;n!==void 0&amp;&amp;!(&quot;isFrozen&quot;in Object&amp;&amp;Object.isFrozen(e)))if(typeof n!=&quot;string&quot;&amp;&amp;&quot;length&quot;in n){tn(typeof t!=&quot;string&quot;&amp;&amp;&quot;length&quot;in t);for(var r=0,o=n.length;r&lt;o;++r)se(e,n[r],t[r])}else{var i,a,u=n.indexOf(&quot;.&quot;);u!==-1?(i=n.substr(0,u),(a=n.substr(u+1))===&quot;&quot;?t===void 0?q(e)&amp;&amp;!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=t:se(u=!(u=e[i])||!V(e,i)?e[i]={}:u,a,t)):t===void 0?q(e)&amp;&amp;!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=t}}function tr(e){var n,t={};for(n in e)V(e,n)&amp;&amp;(t[n]=e[n]);return t}var io=[].concat;function rr(e){return io.apply([],e)}var Re=&quot;BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey&quot;.split(&quot;,&quot;).concat(rr([8,16,32,64].map(function(e){return[&quot;Int&quot;,&quot;Uint&quot;,&quot;Float&quot;].map(function(n){return n+e+&quot;Array&quot;})}))).filter(function(e){return B[e]}),or=new Set(Re.map(function(e){return B[e]})),rn=null;function je(e){return rn=new WeakMap,e=function n(t){if(!t||typeof t!=&quot;object&quot;)return t;var r=rn.get(t);if(r)return r;if(q(t)){r=[],rn.set(t,r);for(var o=0,i=t.length;o&lt;i;++o)r.push(n(t[o]))}else if(or.has(t.constructor))r=t;else{var a,u=H(t);for(a in r=u===Object.prototype?{}:Object.create(u),rn.set(t,r),t)V(t,a)&amp;&amp;(r[a]=n(t[a]))}return r}(e),rn=null,e}var ao={}.toString;function it(e){return ao.call(e).slice(8,-1)}var at=typeof Symbol&lt;&quot;u&quot;?Symbol.iterator:&quot;@@iterator&quot;,uo=typeof at==&quot;symbol&quot;?function(e){var n;return e!=null&amp;&amp;(n=e[at])&amp;&amp;n.apply(e)}:function(){return null};function Te(e,n){return n=e.indexOf(n),0&lt;=n&amp;&amp;e.splice(n,1),0&lt;=n}var $e={};function be(e){var n,t,r,o;if(arguments.length===1){if(q(e))return e.slice();if(this===$e&amp;&amp;typeof e==&quot;string&quot;)return[e];if(o=uo(e)){for(t=[];!(r=o.next()).done;)t.push(r.value);return t}if(e==null)return[e];if(typeof(n=e.length)!=&quot;number&quot;)return[e];for(t=new Array(n);n--;)t[n]=e[n];return t}for(n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];return t}var ut=typeof Symbol&lt;&quot;u&quot;?function(e){return e[Symbol.toStringTag]===&quot;AsyncFunction&quot;}:function(){return!1},un=[&quot;Unknown&quot;,&quot;Constraint&quot;,&quot;Data&quot;,&quot;TransactionInactive&quot;,&quot;ReadOnly&quot;,&quot;Version&quot;,&quot;NotFound&quot;,&quot;InvalidState&quot;,&quot;InvalidAccess&quot;,&quot;Abort&quot;,&quot;Timeout&quot;,&quot;QuotaExceeded&quot;,&quot;Syntax&quot;,&quot;DataClone&quot;],fe=[&quot;Modify&quot;,&quot;Bulk&quot;,&quot;OpenFailed&quot;,&quot;VersionChange&quot;,&quot;Schema&quot;,&quot;Upgrade&quot;,&quot;InvalidTable&quot;,&quot;MissingAPI&quot;,&quot;NoSuchDatabase&quot;,&quot;InvalidArgument&quot;,&quot;SubTransaction&quot;,&quot;Unsupported&quot;,&quot;Internal&quot;,&quot;DatabaseClosed&quot;,&quot;PrematureCommit&quot;,&quot;ForeignAwait&quot;].concat(un),so={VersionChanged:&quot;Database version changed by other database connection&quot;,DatabaseClosed:&quot;Database has been closed&quot;,Abort:&quot;Transaction aborted&quot;,TransactionInactive:&quot;Transaction has already completed or failed&quot;,MissingAPI:&quot;IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb&quot;};function Ye(e,n){this.name=e,this.message=n}function ir(e,n){return e+&quot;. Errors: &quot;+Object.keys(n).map(function(t){return n[t].toString()}).filter(function(t,r,o){return o.indexOf(t)===r}).join(`\n`)}function Sn(e,n,t,r){this.failures=n,this.failedKeys=r,this.successCount=t,this.message=ir(e,n)}function He(e,n){this.name=&quot;BulkError&quot;,this.failures=Object.keys(n).map(function(t){return n[t]}),this.failuresByPos=n,this.message=ir(e,this.failures)}We(Ye).from(Error).extend({toString:function(){return this.name+&quot;: &quot;+this.message}}),We(Sn).from(Ye),We(He).from(Ye);var st=fe.reduce(function(e,n){return e[n]=n+&quot;Error&quot;,e},{}),co=Ye,D=fe.reduce(function(e,n){var t=n+&quot;Error&quot;;function r(o,i){this.name=t,o?typeof o==&quot;string&quot;?(this.message=&quot;&quot;.concat(o).concat(i?`\n `+i:&quot;&quot;),this.inner=i||null):typeof o==&quot;object&quot;&amp;&amp;(this.message=&quot;&quot;.concat(o.name,&quot; &quot;).concat(o.message),this.inner=o):(this.message=so[n]||t,this.inner=null)}return We(r).from(co),e[n]=r,e},{});D.Syntax=SyntaxError,D.Type=TypeError,D.Range=RangeError;var ar=un.reduce(function(e,n){return e[n+&quot;Error&quot;]=D[n],e},{}),Kn=fe.reduce(function(e,n){return[&quot;Syntax&quot;,&quot;Type&quot;,&quot;Range&quot;].indexOf(n)===-1&amp;&amp;(e[n+&quot;Error&quot;]=D[n]),e},{});function G(){}function on(e){return e}function lo(e,n){return e==null||e===on?n:function(t){return n(e(t))}}function De(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function fo(e,n){return e===G?n:function(){var t=e.apply(this,arguments);t!==void 0&amp;&amp;(arguments[0]=t);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=n.apply(this,arguments);return r&amp;&amp;(this.onsuccess=this.onsuccess?De(r,this.onsuccess):r),o&amp;&amp;(this.onerror=this.onerror?De(o,this.onerror):o),i!==void 0?i:t}}function ho(e,n){return e===G?n:function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&amp;&amp;(this.onsuccess=this.onsuccess?De(t,this.onsuccess):t),r&amp;&amp;(this.onerror=this.onerror?De(r,this.onerror):r)}}function po(e,n){return e===G?n:function(t){var r=e.apply(this,arguments);W(t,r);var o=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,t=n.apply(this,arguments),o&amp;&amp;(this.onsuccess=this.onsuccess?De(o,this.onsuccess):o),i&amp;&amp;(this.onerror=this.onerror?De(i,this.onerror):i),r===void 0?t===void 0?void 0:t:W(r,t)}}function yo(e,n){return e===G?n:function(){return n.apply(this,arguments)!==!1&amp;&amp;e.apply(this,arguments)}}function ct(e,n){return e===G?n:function(){var t=e.apply(this,arguments);if(t&amp;&amp;typeof t.then==&quot;function&quot;){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return t.then(function(){return n.apply(r,i)})}return n.apply(this,arguments)}}Kn.ModifyError=Sn,Kn.DexieError=Ye,Kn.BulkError=He;var de=typeof location&lt;&quot;u&quot;&amp;&amp;/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);function ur(e){de=e}var an={},sr=100,Re=typeof Promise&gt;&quot;u&quot;?[]:function(){var e=Promise.resolve();if(typeof crypto&gt;&quot;u&quot;||!crypto.subtle)return[e,H(e),e];var n=crypto.subtle.digest(&quot;SHA-512&quot;,new Uint8Array([0]));return[n,H(n),e]}(),un=Re[0],fe=Re[1],Re=Re[2],fe=fe&amp;&amp;fe.then,Ie=un&amp;&amp;un.constructor,lt=!!Re,sn=function(e,n){cn.push([e,n]),Cn&amp;&amp;(queueMicrotask(vo),Cn=!1)},ft=!0,Cn=!0,qe=[],An=[],ht=on,xe={id:&quot;global&quot;,global:!0,ref:0,unhandleds:[],onunhandled:G,pgp:!1,env:{},finalize:G},T=xe,cn=[],Me=0,jn=[];function K(e){if(typeof this!=&quot;object&quot;)throw new TypeError(&quot;Promises must be constructed via new&quot;);this._listeners=[],this._lib=!1;var n=this._PSD=T;if(typeof e!=&quot;function&quot;){if(e!==an)throw new TypeError(&quot;Not a function&quot;);return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&amp;&amp;pt(this,this._value))}this._state=null,this._value=null,++n.ref,function t(r,o){try{o(function(i){if(r._state===null){if(i===r)throw new TypeError(&quot;A promise cannot be resolved with itself.&quot;);var a=r._lib&amp;&amp;Ge();i&amp;&amp;typeof i.then==&quot;function&quot;?t(r,function(u,c){i instanceof K?i._then(u,c):i.then(u,c)}):(r._state=!0,r._value=i,lr(r)),a&amp;&amp;Qe()}},pt.bind(null,r))}catch(i){pt(r,i)}}(this,e)}var dt={get:function(){var e=T,n=In;function t(r,o){var i=this,a=!e.global&amp;&amp;(e!==T||n!==In),u=a&amp;&amp;!Oe(),c=new K(function(f,p){yt(i,new cr(hr(r,e,a,u),hr(o,e,a,u),f,p,e))});return this._consoleTask&amp;&amp;(c._consoleTask=this._consoleTask),c}return t.prototype=an,t},set:function(e){he(this,&quot;then&quot;,e&amp;&amp;e.prototype===an?dt:{get:function(){return e},set:dt.set})}};function cr(e,n,t,r,o){this.onFulfilled=typeof e==&quot;function&quot;?e:null,this.onRejected=typeof n==&quot;function&quot;?n:null,this.resolve=t,this.reject=r,this.psd=o}function pt(e,n){var t,r;An.push(n),e._state===null&amp;&amp;(t=e._lib&amp;&amp;Ge(),n=ht(n),e._state=!1,e._value=n,r=e,qe.some(function(o){return o._value===r._value})||qe.push(r),lr(e),t&amp;&amp;Qe())}function lr(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t&lt;r;++t)yt(e,n[t]);var o=e._PSD;--o.ref||o.finalize(),Me===0&amp;&amp;(++Me,sn(function(){--Me==0&amp;&amp;mt()},[]))}function yt(e,n){if(e._state!==null){var t=e._state?n.onFulfilled:n.onRejected;if(t===null)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++Me,sn(mo,[t,e,n])}else e._listeners.push(n)}function mo(e,n,t){try{var r,o=n._value;!n._state&amp;&amp;An.length&amp;&amp;(An=[]),r=de&amp;&amp;n._consoleTask?n._consoleTask.run(function(){return e(o)}):e(o),n._state||An.indexOf(o)!==-1||function(i){for(var a=qe.length;a;)if(qe[--a]._value===i._value)return qe.splice(a,1)}(n),t.resolve(r)}catch(i){t.reject(i)}finally{--Me==0&amp;&amp;mt(),--t.psd.ref||t.psd.finalize()}}function vo(){Be(xe,function(){Ge()&amp;&amp;Qe()})}function Ge(){var e=ft;return Cn=ft=!1,e}function Qe(){var e,n,t;do for(;0&lt;cn.length;)for(e=cn,cn=[],t=e.length,n=0;n&lt;t;++n){var r=e[n];r[0].apply(null,r[1])}while(0&lt;cn.length);Cn=ft=!0}function mt(){var e=qe;qe=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var n=jn.slice(0),t=n.length;t;)n[--t]()}function Tn(e){return new K(an,!1,e)}function J(e,n){var t=T;return function(){var r=Ge(),o=T;try{return Pe(t,!0),e.apply(this,arguments)}catch(i){n&amp;&amp;n(i)}finally{Pe(o,!1),r&amp;&amp;Qe()}}}$(K.prototype,{then:dt,_then:function(e,n){yt(this,new cr(null,null,e,n,T))},catch:function(e){if(arguments.length===1)return this.then(null,e);var n=e,t=arguments[1];return typeof n==&quot;function&quot;?this.then(null,function(r){return(r instanceof n?t:Tn)(r)}):this.then(null,function(r){return(r&amp;&amp;r.name===n?t:Tn)(r)})},finally:function(e){return this.then(function(n){return K.resolve(e()).then(function(){return n})},function(n){return K.resolve(e()).then(function(){return Tn(n)})})},timeout:function(e,n){var t=this;return e&lt;1/0?new K(function(r,o){var i=setTimeout(function(){return o(new D.Timeout(n))},e);t.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol&lt;&quot;u&quot;&amp;&amp;Symbol.toStringTag&amp;&amp;he(K.prototype,Symbol.toStringTag,&quot;Dexie.Promise&quot;),xe.env=fr(),$(K,{all:function(){var e=be.apply(null,arguments).map(qn);return new K(function(n,t){e.length===0&amp;&amp;n([]);var r=e.length;e.forEach(function(o,i){return K.resolve(o).then(function(a){e[i]=a,--r||n(e)},t)})})},resolve:function(e){return e instanceof K?e:e&amp;&amp;typeof e.then==&quot;function&quot;?new K(function(n,t){e.then(n,t)}):new K(an,!0,e)},reject:Tn,race:function(){var e=be.apply(null,arguments).map(qn);return new K(function(n,t){e.map(function(r){return K.resolve(r).then(n,t)})})},PSD:{get:function(){return T},set:function(e){return T=e}},totalEchoes:{get:function(){return In}},newPSD:ke,usePSD:Be,scheduler:{get:function(){return sn},set:function(e){sn=e}},rejectionMapper:{get:function(){return ht},set:function(e){ht=e}},follow:function(e,n){return new K(function(t,r){return ke(function(o,i){var a=T;a.unhandleds=[],a.onunhandled=i,a.finalize=De(function(){var u,c=this;u=function(){c.unhandleds.length===0?o():i(c.unhandleds[0])},jn.push(function f(){u(),jn.splice(jn.indexOf(f),1)}),++Me,sn(function(){--Me==0&amp;&amp;mt()},[])},a.finalize),e()},n,t,r)})}}),Ie&amp;&amp;(Ie.allSettled&amp;&amp;he(K,&quot;allSettled&quot;,function(){var e=be.apply(null,arguments).map(qn);return new K(function(n){e.length===0&amp;&amp;n([]);var t=e.length,r=new Array(t);e.forEach(function(o,i){return K.resolve(o).then(function(a){return r[i]={status:&quot;fulfilled&quot;,value:a}},function(a){return r[i]={status:&quot;rejected&quot;,reason:a}}).then(function(){return--t||n(r)})})})}),Ie.any&amp;&amp;typeof AggregateError&lt;&quot;u&quot;&amp;&amp;he(K,&quot;any&quot;,function(){var e=be.apply(null,arguments).map(qn);return new K(function(n,t){e.length===0&amp;&amp;t(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(i,a){return K.resolve(i).then(function(u){return n(u)},function(u){o[a]=u,--r||t(new AggregateError(o))})})})}),Ie.withResolvers&amp;&amp;(K.withResolvers=Ie.withResolvers));var ne={awaits:0,echoes:0,id:0},go=0,Dn=[],Rn=0,In=0,bo=0;function ke(e,n,t,r){var o=T,i=Object.create(o);return i.parent=o,i.ref=0,i.global=!1,i.id=++bo,xe.env,i.env=lt?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{},n&amp;&amp;W(i,n),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Be(i,e,t,r),i.ref===0&amp;&amp;i.finalize(),r}function Xe(){return ne.id||(ne.id=++go),++ne.awaits,ne.echoes+=sr,ne.id}function Oe(){return!!ne.awaits&amp;&amp;(--ne.awaits==0&amp;&amp;(ne.id=0),ne.echoes=ne.awaits*sr,!0)}function qn(e){return ne.echoes&amp;&amp;e&amp;&amp;e.constructor===Ie?(Xe(),e.then(function(n){return Oe(),n},function(n){return Oe(),Z(n)})):e}function wo(){var e=Dn[Dn.length-1];Dn.pop(),Pe(e,!1)}function Pe(e,n){var t,r=T;(n?!ne.echoes||Rn++&amp;&amp;e===T:!Rn||--Rn&amp;&amp;e===T)||queueMicrotask(n?(function(o){++In,ne.echoes&amp;&amp;--ne.echoes!=0||(ne.echoes=ne.awaits=ne.id=0),Dn.push(T),Pe(o,!0)}).bind(null,e):wo),e!==T&amp;&amp;(T=e,r===xe&amp;&amp;(xe.env=fr()),lt&amp;&amp;(t=xe.env.Promise,n=e.env,(r.global||e.global)&amp;&amp;(Object.defineProperty(B,&quot;Promise&quot;,n.PromiseProp),t.all=n.all,t.race=n.race,t.resolve=n.resolve,t.reject=n.reject,n.allSettled&amp;&amp;(t.allSettled=n.allSettled),n.any&amp;&amp;(t.any=n.any))))}function fr(){var e=B.Promise;return lt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(B,&quot;Promise&quot;),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Be(e,n,t,r,o){var i=T;try{return Pe(e,!0),n(t,r,o)}finally{Pe(i,!1)}}function hr(e,n,t,r){return typeof e!=&quot;function&quot;?e:function(){var o=T;t&amp;&amp;Xe(),Pe(n,!0);try{return e.apply(this,arguments)}finally{Pe(o,!1),r&amp;&amp;queueMicrotask(Oe)}}}function vt(e){Promise===Ie&amp;&amp;ne.echoes===0?Rn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(&quot;&quot;+fe).indexOf(&quot;[native code]&quot;)===-1&amp;&amp;(Xe=Oe=G);var Z=K.reject,Ne=&quot;￿&quot;,we=&quot;Invalid key provided. Keys must be of type string, number, Date or Array&lt;string | number | Date&gt;.&quot;,dr=&quot;String expected.&quot;,Je=[],Mn=&quot;__dbnames&quot;,gt=&quot;readonly&quot;,bt=&quot;readwrite&quot;;function Fe(e,n){return e?n?function(){return e.apply(this,arguments)&amp;&amp;n.apply(this,arguments)}:e:n}var pr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Bn(e){return typeof e!=&quot;string&quot;||/\\./.test(e)?function(n){return n}:function(n){return n[e]===void 0&amp;&amp;e in n&amp;&amp;delete(n=je(n))[e],n}}function yr(){throw D.Type()}function z(e,n){try{var t=mr(e),r=mr(n);if(t!==r)return t===&quot;Array&quot;?1:r===&quot;Array&quot;?-1:t===&quot;binary&quot;?1:r===&quot;binary&quot;?-1:t===&quot;string&quot;?1:r===&quot;string&quot;?-1:t===&quot;Date&quot;?1:r!==&quot;Date&quot;?NaN:-1;switch(t){case&quot;number&quot;:case&quot;Date&quot;:case&quot;string&quot;:return n&lt;e?1:e&lt;n?-1:0;case&quot;binary&quot;:return function(o,i){for(var a=o.length,u=i.length,c=a&lt;u?a:u,f=0;f&lt;c;++f)if(o[f]!==i[f])return o[f]&lt;i[f]?-1:1;return a===u?0:a&lt;u?-1:1}(vr(e),vr(n));case&quot;Array&quot;:return function(o,i){for(var a=o.length,u=i.length,c=a&lt;u?a:u,f=0;f&lt;c;++f){var p=z(o[f],i[f]);if(p!==0)return p}return a===u?0:a&lt;u?-1:1}(e,n)}}catch{}return NaN}function mr(e){var n=typeof e;return n!=&quot;object&quot;?n:ArrayBuffer.isView(e)?&quot;binary&quot;:(e=it(e),e===&quot;ArrayBuffer&quot;?&quot;binary&quot;:e)}function vr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var gr=(X.prototype._trans=function(e,n,t){var r=this._tx||T.trans,o=this.name,i=de&amp;&amp;typeof console&lt;&quot;u&quot;&amp;&amp;console.createTask&amp;&amp;console.createTask(&quot;Dexie: &quot;.concat(e===&quot;readonly&quot;?&quot;read&quot;:&quot;write&quot;,&quot; &quot;).concat(this.name));function a(f,p,s){if(!s.schema[o])throw new D.NotFound(&quot;Table &quot;+o+&quot; not part of transaction&quot;);return n(s.idbtrans,s)}var u=Ge();try{var c=r&amp;&amp;r.db._novip===this.db._novip?r===T.trans?r._promise(e,a,t):ke(function(){return r._promise(e,a,t)},{trans:r,transless:T.transless||T}):function f(p,s,m,l){if(p.idbdb&amp;&amp;(p._state.openComplete||T.letThrough||p._vip)){var d=p._createTransaction(s,m,p._dbSchema);try{d.create(),p._state.PR1398_maxLoop=3}catch(y){return y.name===st.InvalidState&amp;&amp;p.isOpen()&amp;&amp;0&lt;--p._state.PR1398_maxLoop?(console.warn(&quot;Dexie: Need to reopen db&quot;),p.close({disableAutoOpen:!1}),p.open().then(function(){return f(p,s,m,l)})):Z(y)}return d._promise(s,function(y,h){return ke(function(){return T.trans=d,l(y,h,d)})}).then(function(y){if(s===&quot;readwrite&quot;)try{d.idbtrans.commit()}catch{}return s===&quot;readonly&quot;?y:d._completion.then(function(){return y})})}if(p._state.openComplete)return Z(new D.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return Z(new D.DatabaseClosed);p.open().catch(G)}return p._state.dbReadyPromise.then(function(){return f(p,s,m,l)})}(this.db,e,[this.name],a);return i&amp;&amp;(c._consoleTask=i,c=c.catch(function(f){return console.trace(f),Z(f)})),c}finally{u&amp;&amp;Qe()}},X.prototype.get=function(e,n){var t=this;return e&amp;&amp;e.constructor===Object?this.where(e).first(n):e==null?Z(new D.Type(&quot;Invalid argument to Table.get()&quot;)):this._trans(&quot;readonly&quot;,function(r){return t.core.get({trans:r,key:e}).then(function(o){return t.hook.reading.fire(o)})}).then(n)},X.prototype.where=function(e){if(typeof e==&quot;string&quot;)return new this.db.WhereClause(this,e);if(q(e))return new this.db.WhereClause(this,&quot;[&quot;.concat(e.join(&quot;+&quot;),&quot;]&quot;));var n=U(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter(function(u){if(u.compound&amp;&amp;n.every(function(f){return 0&lt;=u.keyPath.indexOf(f)})){for(var c=0;c&lt;n.length;++c)if(n.indexOf(u.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(u,c){return u.keyPath.length-c.keyPath.length})[0];if(t&amp;&amp;this.db._maxKey!==Ne){var i=t.keyPath.slice(0,n.length);return this.where(i).equals(i.map(function(c){return e[c]}))}!t&amp;&amp;de&amp;&amp;console.warn(&quot;The query &quot;.concat(JSON.stringify(e),&quot; on &quot;).concat(this.name,&quot; would benefit from a &quot;)+&quot;compound index [&quot;.concat(n.join(&quot;+&quot;),&quot;]&quot;));var r=this.schema.idxByName;function o(u,c){return z(u,c)===0}var a=n.reduce(function(s,c){var f=s[0],p=s[1],s=r[c],m=e[c];return[f||s,f||!s?Fe(p,s&amp;&amp;s.multi?function(l){return l=ge(l,c),q(l)&amp;&amp;l.some(function(d){return o(m,d)})}:function(l){return o(m,ge(l,c))}):p]},[null,null]),i=a[0],a=a[1];return i?this.where(i.name).equals(e[i.keyPath]).filter(a):t?this.filter(a):this.where(n).equals(&quot;&quot;)},X.prototype.filter=function(e){return this.toCollection().and(e)},X.prototype.count=function(e){return this.toCollection().count(e)},X.prototype.offset=function(e){return this.toCollection().offset(e)},X.prototype.limit=function(e){return this.toCollection().limit(e)},X.prototype.each=function(e){return this.toCollection().each(e)},X.prototype.toArray=function(e){return this.toCollection().toArray(e)},X.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},X.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,q(e)?&quot;[&quot;.concat(e.join(&quot;+&quot;),&quot;]&quot;):e))},X.prototype.reverse=function(){return this.toCollection().reverse()},X.prototype.mapToClass=function(e){var n,t=this.db,r=this.name;function o(){return n!==null&amp;&amp;n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof yr&amp;&amp;(function(c,f){if(typeof f!=&quot;function&quot;&amp;&amp;f!==null)throw new TypeError(&quot;Class extends value &quot;+String(f)+&quot; is not a constructor or null&quot;);function p(){this.constructor=c}R(c,f),c.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}(o,n=e),Object.defineProperty(o.prototype,&quot;db&quot;,{get:function(){return t},enumerable:!1,configurable:!0}),o.prototype.table=function(){return r},e=o);for(var i=new Set,a=e.prototype;a;a=H(a))Object.getOwnPropertyNames(a).forEach(function(c){return i.add(c)});function u(c){if(!c)return c;var f,p=Object.create(e.prototype);for(f in c)if(!i.has(f))try{p[f]=c[f]}catch{}return p}return this.schema.readHook&amp;&amp;this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook(&quot;reading&quot;,u),e},X.prototype.defineClass=function(){return this.mapToClass(function(e){W(this,e)})},X.prototype.add=function(e,n){var t=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&amp;&amp;o&amp;&amp;(a=Bn(i)(e)),this._trans(&quot;readwrite&quot;,function(u){return t.core.mutate({trans:u,type:&quot;add&quot;,keys:n!=null?[n]:null,values:[a]})}).then(function(u){return u.numFailures?K.reject(u.failures[0]):u.lastResult}).then(function(u){if(i)try{se(e,i,u)}catch{}return u})},X.prototype.update=function(e,n){return typeof e!=&quot;object&quot;||q(e)?this.where(&quot;:id&quot;).equals(e).modify(n):(e=ge(e,this.schema.primKey.keyPath),e===void 0?Z(new D.InvalidArgument(&quot;Given object does not contain its primary key&quot;)):this.where(&quot;:id&quot;).equals(e).modify(n))},X.prototype.put=function(e,n){var t=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&amp;&amp;o&amp;&amp;(a=Bn(i)(e)),this._trans(&quot;readwrite&quot;,function(u){return t.core.mutate({trans:u,type:&quot;put&quot;,values:[a],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?K.reject(u.failures[0]):u.lastResult}).then(function(u){if(i)try{se(e,i,u)}catch{}return u})},X.prototype.delete=function(e){var n=this;return this._trans(&quot;readwrite&quot;,function(t){return n.core.mutate({trans:t,type:&quot;delete&quot;,keys:[e]})}).then(function(t){return t.numFailures?K.reject(t.failures[0]):void 0})},X.prototype.clear=function(){var e=this;return this._trans(&quot;readwrite&quot;,function(n){return e.core.mutate({trans:n,type:&quot;deleteRange&quot;,range:pr})}).then(function(n){return n.numFailures?K.reject(n.failures[0]):void 0})},X.prototype.bulkGet=function(e){var n=this;return this._trans(&quot;readonly&quot;,function(t){return n.core.getMany({keys:e,trans:t}).then(function(r){return r.map(function(o){return n.hook.reading.fire(o)})})})},X.prototype.bulkAdd=function(e,n,t){var r=this,o=Array.isArray(n)?n:void 0,i=(t=t||(o?void 0:n))?t.allKeys:void 0;return this._trans(&quot;readwrite&quot;,function(a){var f=r.schema.primKey,u=f.auto,f=f.keyPath;if(f&amp;&amp;o)throw new D.InvalidArgument(&quot;bulkAdd(): keys argument invalid on tables with inbound keys&quot;);if(o&amp;&amp;o.length!==e.length)throw new D.InvalidArgument(&quot;Arguments objects and keys must have the same length&quot;);var c=e.length,f=f&amp;&amp;u?e.map(Bn(f)):e;return r.core.mutate({trans:a,type:&quot;add&quot;,keys:o,values:f,wantResults:i}).then(function(d){var s=d.numFailures,m=d.results,l=d.lastResult,d=d.failures;if(s===0)return i?m:l;throw new He(&quot;&quot;.concat(r.name,&quot;.bulkAdd(): &quot;).concat(s,&quot; of &quot;).concat(c,&quot; operations failed&quot;),d)})})},X.prototype.bulkPut=function(e,n,t){var r=this,o=Array.isArray(n)?n:void 0,i=(t=t||(o?void 0:n))?t.allKeys:void 0;return this._trans(&quot;readwrite&quot;,function(a){var f=r.schema.primKey,u=f.auto,f=f.keyPath;if(f&amp;&amp;o)throw new D.InvalidArgument(&quot;bulkPut(): keys argument invalid on tables with inbound keys&quot;);if(o&amp;&amp;o.length!==e.length)throw new D.InvalidArgument(&quot;Arguments objects and keys must have the same length&quot;);var c=e.length,f=f&amp;&amp;u?e.map(Bn(f)):e;return r.core.mutate({trans:a,type:&quot;put&quot;,keys:o,values:f,wantResults:i}).then(function(d){var s=d.numFailures,m=d.results,l=d.lastResult,d=d.failures;if(s===0)return i?m:l;throw new He(&quot;&quot;.concat(r.name,&quot;.bulkPut(): &quot;).concat(s,&quot; of &quot;).concat(c,&quot; operations failed&quot;),d)})})},X.prototype.bulkUpdate=function(e){var n=this,t=this.core,r=e.map(function(a){return a.key}),o=e.map(function(a){return a.changes}),i=[];return this._trans(&quot;readwrite&quot;,function(a){return t.getMany({trans:a,keys:r,cache:&quot;clone&quot;}).then(function(u){var c=[],f=[];e.forEach(function(s,m){var l=s.key,d=s.changes,y=u[m];if(y){for(var h=0,v=Object.keys(d);h&lt;v.length;h++){var g=v[h],b=d[g];if(g===n.schema.primKey.keyPath){if(z(b,l)!==0)throw new D.Constraint(&quot;Cannot update primary key in bulkUpdate()&quot;)}else se(y,g,b)}i.push(m),c.push(l),f.push(y)}});var p=c.length;return t.mutate({trans:a,type:&quot;put&quot;,keys:c,values:f,updates:{keys:r,changeSpecs:o}}).then(function(s){var m=s.numFailures,l=s.failures;if(m===0)return p;for(var d=0,y=Object.keys(l);d&lt;y.length;d++){var h,v=y[d],g=i[Number(v)];g!=null&amp;&amp;(h=l[v],delete l[v],l[g]=h)}throw new He(&quot;&quot;.concat(n.name,&quot;.bulkUpdate(): &quot;).concat(m,&quot; of &quot;).concat(p,&quot; operations failed&quot;),l)})})})},X.prototype.bulkDelete=function(e){var n=this,t=e.length;return this._trans(&quot;readwrite&quot;,function(r){return n.core.mutate({trans:r,type:&quot;delete&quot;,keys:e})}).then(function(a){var o=a.numFailures,i=a.lastResult,a=a.failures;if(o===0)return i;throw new He(&quot;&quot;.concat(n.name,&quot;.bulkDelete(): &quot;).concat(o,&quot; of &quot;).concat(t,&quot; operations failed&quot;),a)})},X);function X(){}function ln(e){function n(a,u){if(u){for(var c=arguments.length,f=new Array(c-1);--c;)f[c-1]=arguments[c];return t[a].subscribe.apply(null,f),e}if(typeof a==&quot;string&quot;)return t[a]}var t={};n.addEventType=i;for(var r=1,o=arguments.length;r&lt;o;++r)i(arguments[r]);return n;function i(a,u,c){if(typeof a!=&quot;object&quot;){var f;u=u||yo;var p={subscribers:[],fire:c=c||G,subscribe:function(s){p.subscribers.indexOf(s)===-1&amp;&amp;(p.subscribers.push(s),p.fire=u(p.fire,s))},unsubscribe:function(s){p.subscribers=p.subscribers.filter(function(m){return m!==s}),p.fire=p.subscribers.reduce(u,c)}};return t[a]=n[a]=p}U(f=a).forEach(function(s){var m=f[s];if(q(m))i(s,f[s][0],f[s][1]);else{if(m!==&quot;asap&quot;)throw new D.InvalidArgument(&quot;Invalid event config&quot;);var l=i(s,on,function(){for(var d=arguments.length,y=new Array(d);d--;)y[d]=arguments[d];l.subscribers.forEach(function(h){nr(function(){h.apply(null,y)})})})}})}}function fn(e,n){return We(n).from({prototype:e}),n}function Ze(e,n){return!(e.filter||e.algorithm||e.or)&amp;&amp;(n?e.justLimit:!e.replayFilter)}function wt(e,n){e.filter=Fe(e.filter,n)}function _t(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return Fe(r(),n())}:n,e.justLimit=t&amp;&amp;!r}function Nn(e,n){if(e.isPrimKey)return n.primaryKey;var t=n.getIndexByKeyPath(e.index);if(!t)throw new D.Schema(&quot;KeyPath &quot;+e.index+&quot; on object store &quot;+n.name+&quot; is not indexed&quot;);return t}function br(e,n,t){var r=Nn(e,n.schema);return n.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir===&quot;prev&quot;,unique:!!e.unique,query:{index:r,range:e.range}})}function Fn(e,n,t,r){var o=e.replayFilter?Fe(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},a=function(u,c,f){var p,s;o&amp;&amp;!o(c,f,function(m){return c.stop(m)},function(m){return c.fail(m)})||((s=&quot;&quot;+(p=c.primaryKey))==&quot;[object ArrayBuffer]&quot;&amp;&amp;(s=&quot;&quot;+new Uint8Array(p)),V(i,s)||(i[s]=!0,n(u,c,f)))};return Promise.all([e.or._iterate(a,t),wr(br(e,r,t),e.algorithm,a,!e.keysOnly&amp;&amp;e.valueMapper)])}return wr(br(e,r,t),Fe(e.algorithm,o),n,!e.keysOnly&amp;&amp;e.valueMapper)}function wr(e,n,t,r){var o=J(r?function(i,a,u){return t(r(i),a,u)}:t);return e.then(function(i){if(i)return i.start(function(){var a=function(){return i.continue()};n&amp;&amp;!n(i,function(u){return a=u},function(u){i.stop(u),a=G},function(u){i.fail(u),a=G})||o(i.value,i,function(u){return a=u}),a()})})}var hn=(_r.prototype.execute=function(e){var n=this[&quot;@@propmod&quot;];if(n.add!==void 0){var t=n.add;if(q(t))return L(L([],q(e)?e:[],!0),t).sort();if(typeof t==&quot;number&quot;)return(Number(e)||0)+t;if(typeof t==&quot;bigint&quot;)try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError(&quot;Invalid term &quot;.concat(t))}if(n.remove!==void 0){var r=n.remove;if(q(r))return q(e)?e.filter(function(o){return!r.includes(o)}).sort():[];if(typeof r==&quot;number&quot;)return Number(e)-r;if(typeof r==&quot;bigint&quot;)try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError(&quot;Invalid subtrahend &quot;.concat(r))}return t=(t=n.replacePrefix)===null||t===void 0?void 0:t[0],t&amp;&amp;typeof e==&quot;string&quot;&amp;&amp;e.startsWith(t)?n.replacePrefix[1]+e.substring(t.length):e},_r);function _r(e){this[&quot;@@propmod&quot;]=e}var _o=(Y.prototype._read=function(e,n){var t=this._ctx;return t.error?t.table._trans(null,Z.bind(null,t.error)):t.table._trans(&quot;readonly&quot;,e).then(n)},Y.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,Z.bind(null,n.error)):n.table._trans(&quot;readwrite&quot;,e,&quot;locked&quot;)},Y.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=Fe(n.algorithm,e)},Y.prototype._iterate=function(e,n){return Fn(this._ctx,e,n,this._ctx.table.core)},Y.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),t=Object.create(this._ctx);return e&amp;&amp;W(t,e),n._ctx=t,n},Y.prototype.raw=function(){return this._ctx.valueMapper=null,this},Y.prototype.each=function(e){var n=this._ctx;return this._read(function(t){return Fn(n,e,t,n.table.core)})},Y.prototype.count=function(e){var n=this;return this._read(function(t){var r=n._ctx,o=r.table.core;if(Ze(r,!0))return o.count({trans:t,query:{index:Nn(r,o.schema),range:r.range}}).then(function(a){return Math.min(a,r.limit)});var i=0;return Fn(r,function(){return++i,!1},t,o).then(function(){return i})}).then(e)},Y.prototype.sortBy=function(e,n){var t=e.split(&quot;.&quot;).reverse(),r=t[0],o=t.length-1;function i(c,f){return f?i(c[t[f]],f-1):c[r]}var a=this._ctx.dir===&quot;next&quot;?1:-1;function u(c,f){return z(i(c,o),i(f,o))*a}return this.toArray(function(c){return c.sort(u)}).then(n)},Y.prototype.toArray=function(e){var n=this;return this._read(function(t){var r=n._ctx;if(r.dir===&quot;next&quot;&amp;&amp;Ze(r,!0)&amp;&amp;0&lt;r.limit){var o=r.valueMapper,i=Nn(r,r.table.core.schema);return r.table.core.query({trans:t,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(function(u){return u=u.result,o?u.map(o):u})}var a=[];return Fn(r,function(u){return a.push(u)},t,r.table.core).then(function(){return a})},e)},Y.prototype.offset=function(e){var n=this._ctx;return e&lt;=0||(n.offset+=e,Ze(n)?_t(n,function(){var t=e;return function(r,o){return t===0||(t===1?--t:o(function(){r.advance(t),t=0}),!1)}}):_t(n,function(){var t=e;return function(){return--t&lt;0}})),this},Y.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_t(this._ctx,function(){var n=e;return function(t,r,o){return--n&lt;=0&amp;&amp;r(o),0&lt;=n}},!0),this},Y.prototype.until=function(e,n){return wt(this._ctx,function(t,r,o){return!e(t.value)||(r(o),n)}),this},Y.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},Y.prototype.last=function(e){return this.reverse().first(e)},Y.prototype.filter=function(e){var n;return wt(this._ctx,function(t){return e(t.value)}),(n=this._ctx).isMatch=Fe(n.isMatch,e),this},Y.prototype.and=function(e){return this.filter(e)},Y.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Y.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir===&quot;prev&quot;?&quot;next&quot;:&quot;prev&quot;,this._ondirectionchange&amp;&amp;this._ondirectionchange(this._ctx.dir),this},Y.prototype.desc=function(){return this.reverse()},Y.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(t,r){e(r.key,r)})},Y.prototype.eachUniqueKey=function(e){return this._ctx.unique=&quot;unique&quot;,this.eachKey(e)},Y.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},Y.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var t=[];return this.each(function(r,o){t.push(o.key)}).then(function(){return t}).then(e)},Y.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir===&quot;next&quot;&amp;&amp;Ze(n,!0)&amp;&amp;0&lt;n.limit)return this._read(function(r){var o=Nn(n,n.table.core.schema);return n.table.core.query({trans:r,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(r){return r.result}).then(e);n.keysOnly=!n.isMatch;var t=[];return this.each(function(r,o){t.push(o.primaryKey)}).then(function(){return t}).then(e)},Y.prototype.uniqueKeys=function(e){return this._ctx.unique=&quot;unique&quot;,this.keys(e)},Y.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},Y.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Y.prototype.distinct=function(){var e=this._ctx,e=e.index&amp;&amp;e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var n={};return wt(this._ctx,function(o){var r=o.primaryKey.toString(),o=V(n,r);return n[r]=!0,!o}),this},Y.prototype.modify=function(e){var n=this,t=this._ctx;return this._write(function(r){var o,i,a;a=typeof e==&quot;function&quot;?e:(o=U(e),i=o.length,function(h){for(var v=!1,g=0;g&lt;i;++g){var b=o[g],w=e[b],x=ge(h,b);w instanceof hn?(se(h,b,w.execute(x)),v=!0):x!==w&amp;&amp;(se(h,b,w),v=!0)}return v});var u=t.table.core,s=u.schema.primaryKey,c=s.outbound,f=s.extractKey,p=200,s=n.db._options.modifyChunkSize;s&amp;&amp;(p=typeof s==&quot;object&quot;?s[u.name]||s[&quot;*&quot;]||200:s);function m(h,b){var g=b.failures,b=b.numFailures;d+=h-b;for(var w=0,x=U(g);w&lt;x.length;w++){var E=x[w];l.push(g[E])}}var l=[],d=0,y=[];return n.clone().primaryKeys().then(function(h){function v(b){var w=Math.min(p,h.length-b);return u.getMany({trans:r,keys:h.slice(b,b+w),cache:&quot;immutable&quot;}).then(function(x){for(var E=[],k=[],O=c?[]:null,S=[],P=0;P&lt;w;++P){var A=x[P],M={value:je(A),primKey:h[b+P]};a.call(M,M.value,M)!==!1&amp;&amp;(M.value==null?S.push(h[b+P]):c||z(f(A),f(M.value))===0?(k.push(M.value),c&amp;&amp;O.push(h[b+P])):(S.push(h[b+P]),E.push(M.value)))}return Promise.resolve(0&lt;E.length&amp;&amp;u.mutate({trans:r,type:&quot;add&quot;,values:E}).then(function(N){for(var F in N.failures)S.splice(parseInt(F),1);m(E.length,N)})).then(function(){return(0&lt;k.length||g&amp;&amp;typeof e==&quot;object&quot;)&amp;&amp;u.mutate({trans:r,type:&quot;put&quot;,keys:O,values:k,criteria:g,changeSpec:typeof e!=&quot;function&quot;&amp;&amp;e,isAdditionalChunk:0&lt;b}).then(function(N){return m(k.length,N)})}).then(function(){return(0&lt;S.length||g&amp;&amp;e===xt)&amp;&amp;u.mutate({trans:r,type:&quot;delete&quot;,keys:S,criteria:g,isAdditionalChunk:0&lt;b}).then(function(N){return m(S.length,N)})}).then(function(){return h.length&gt;b+w&amp;&amp;v(b+p)})})}var g=Ze(t)&amp;&amp;t.limit===1/0&amp;&amp;(typeof e!=&quot;function&quot;||e===xt)&amp;&amp;{index:t.index,range:t.range};return v(0).then(function(){if(0&lt;l.length)throw new Sn(&quot;Error modifying one or more objects&quot;,l,d,y);return h.length})})})},Y.prototype.delete=function(){var e=this._ctx,n=e.range;return Ze(e)&amp;&amp;(e.isPrimKey||n.type===3)?this._write(function(t){var r=e.table.core.schema.primaryKey,o=n;return e.table.core.count({trans:t,query:{index:r,range:o}}).then(function(i){return e.table.core.mutate({trans:t,type:&quot;deleteRange&quot;,range:o}).then(function(a){var u=a.failures;if(a.lastResult,a.results,a=a.numFailures,a)throw new Sn(&quot;Could not delete some values&quot;,Object.keys(u).map(function(c){return u[c]}),i-a);return i-a})})}):this.modify(xt)},Y);function Y(){}var xt=function(e,n){return n.value=null};function xo(e,n){return e&lt;n?-1:e===n?0:1}function ko(e,n){return n&lt;e?-1:e===n?0:1}function ce(e,n,t){return e=e instanceof kr?new e.Collection(e):e,e._ctx.error=new(t||TypeError)(n),e}function en(e){return new e.Collection(e,function(){return xr(&quot;&quot;)}).limit(0)}function Ln(e,n,t,r){var o,i,a,u,c,f,p,s=t.length;if(!t.every(function(d){return typeof d==&quot;string&quot;}))return ce(e,dr);function m(d){o=d===&quot;next&quot;?function(h){return h.toUpperCase()}:function(h){return h.toLowerCase()},i=d===&quot;next&quot;?function(h){return h.toLowerCase()}:function(h){return h.toUpperCase()},a=d===&quot;next&quot;?xo:ko;var y=t.map(function(h){return{lower:i(h),upper:o(h)}}).sort(function(h,v){return a(h.lower,v.lower)});u=y.map(function(h){return h.upper}),c=y.map(function(h){return h.lower}),p=(f=d)===&quot;next&quot;?&quot;&quot;:r}m(&quot;next&quot;),e=new e.Collection(e,function(){return Ee(u[0],c[s-1]+r)}),e._ondirectionchange=function(d){m(d)};var l=0;return e._addAlgorithm(function(d,y,h){var v=d.key;if(typeof v!=&quot;string&quot;)return!1;var g=i(v);if(n(g,c,l))return!0;for(var b=null,w=l;w&lt;s;++w){var x=function(E,k,O,S,P,A){for(var M=Math.min(E.length,S.length),N=-1,F=0;F&lt;M;++F){var le=k[F];if(le!==S[F])return P(E[F],O[F])&lt;0?E.substr(0,F)+O[F]+O.substr(F+1):P(E[F],S[F])&lt;0?E.substr(0,F)+S[F]+O.substr(F+1):0&lt;=N?E.substr(0,N)+k[N]+O.substr(N+1):null;P(E[F],le)&lt;0&amp;&amp;(N=F)}return M&lt;S.length&amp;&amp;A===&quot;next&quot;?E+O.substr(E.length):M&lt;E.length&amp;&amp;A===&quot;prev&quot;?E.substr(0,O.length):N&lt;0?null:E.substr(0,N)+S[N]+O.substr(N+1)}(v,g,u[w],c[w],a,f);x===null&amp;&amp;b===null?l=w+1:(b===null||0&lt;a(b,x))&amp;&amp;(b=x)}return y(b!==null?function(){d.continue(b+p)}:h),!1}),e}function Ee(e,n,t,r){return{type:2,lower:e,upper:n,lowerOpen:t,upperOpen:r}}function xr(e){return{type:1,lower:e,upper:e}}var kr=(Object.defineProperty(te.prototype,&quot;Collection&quot;,{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),te.prototype.between=function(e,n,t,r){t=t!==!1,r=r===!0;try{return 0&lt;this._cmp(e,n)||this._cmp(e,n)===0&amp;&amp;(t||r)&amp;&amp;(!t||!r)?en(this):new this.Collection(this,function(){return Ee(e,n,!t,!r)})}catch{return ce(this,we)}},te.prototype.equals=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return xr(e)})},te.prototype.above=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(e,void 0,!0)})},te.prototype.aboveOrEqual=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(e,void 0,!1)})},te.prototype.below=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(void 0,e,!1,!0)})},te.prototype.belowOrEqual=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(void 0,e)})},te.prototype.startsWith=function(e){return typeof e!=&quot;string&quot;?ce(this,dr):this.between(e,e+Ne,!0,!0)},te.prototype.startsWithIgnoreCase=function(e){return e===&quot;&quot;?this.startsWith(e):Ln(this,function(n,t){return n.indexOf(t[0])===0},[e],Ne)},te.prototype.equalsIgnoreCase=function(e){return Ln(this,function(n,t){return n===t[0]},[e],&quot;&quot;)},te.prototype.anyOfIgnoreCase=function(){var e=be.apply($e,arguments);return e.length===0?en(this):Ln(this,function(n,t){return t.indexOf(n)!==-1},e,&quot;&quot;)},te.prototype.startsWithAnyOfIgnoreCase=function(){var e=be.apply($e,arguments);return e.length===0?en(this):Ln(this,function(n,t){return t.some(function(r){return n.indexOf(r)===0})},e,Ne)},te.prototype.anyOf=function(){var e=this,n=be.apply($e,arguments),t=this._cmp;try{n.sort(t)}catch{return ce(this,we)}if(n.length===0)return en(this);var r=new this.Collection(this,function(){return Ee(n[0],n[n.length-1])});r._ondirectionchange=function(i){t=i===&quot;next&quot;?e._ascending:e._descending,n.sort(t)};var o=0;return r._addAlgorithm(function(i,a,u){for(var c=i.key;0&lt;t(c,n[o]);)if(++o===n.length)return a(u),!1;return t(c,n[o])===0||(a(function(){i.continue(n[o])}),!1)}),r},te.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},te.prototype.noneOf=function(){var e=be.apply($e,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ce(this,we)}var n=e.reduce(function(t,r){return t?t.concat([[t[t.length-1][1],r]]):[[-1/0,r]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},te.prototype.inAnyRange=function(v,n){var t=this,r=this._cmp,o=this._ascending,i=this._descending,a=this._min,u=this._max;if(v.length===0)return en(this);if(!v.every(function(g){return g[0]!==void 0&amp;&amp;g[1]!==void 0&amp;&amp;o(g[0],g[1])&lt;=0}))return ce(this,&quot;First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower&quot;,D.InvalidArgument);var c=!n||n.includeLowers!==!1,f=n&amp;&amp;n.includeUppers===!0,p,s=o;function m(g,b){return s(g[0],b[0])}try{(p=v.reduce(function(g,b){for(var w=0,x=g.length;w&lt;x;++w){var E=g[w];if(r(b[0],E[1])&lt;0&amp;&amp;0&lt;r(b[1],E[0])){E[0]=a(E[0],b[0]),E[1]=u(E[1],b[1]);break}}return w===x&amp;&amp;g.push(b),g},[])).sort(m)}catch{return ce(this,we)}var l=0,d=f?function(g){return 0&lt;o(g,p[l][1])}:function(g){return 0&lt;=o(g,p[l][1])},y=c?function(g){return 0&lt;i(g,p[l][0])}:function(g){return 0&lt;=i(g,p[l][0])},h=d,v=new this.Collection(this,function(){return Ee(p[0][0],p[p.length-1][1],!c,!f)});return v._ondirectionchange=function(g){s=g===&quot;next&quot;?(h=d,o):(h=y,i),p.sort(m)},v._addAlgorithm(function(g,b,w){for(var x,E=g.key;h(E);)if(++l===p.length)return b(w),!1;return!d(x=E)&amp;&amp;!y(x)||(t._cmp(E,p[l][1])===0||t._cmp(E,p[l][0])===0||b(function(){s===o?g.continue(p[l][0]):g.continue(p[l][1])}),!1)}),v},te.prototype.startsWithAnyOf=function(){var e=be.apply($e,arguments);return e.every(function(n){return typeof n==&quot;string&quot;})?e.length===0?en(this):this.inAnyRange(e.map(function(n){return[n,n+Ne]})):ce(this,&quot;startsWithAnyOf() only works with strings&quot;)},te);function te(){}function pe(e){return J(function(n){return dn(n),e(n.target.error),!1})}function dn(e){e.stopPropagation&amp;&amp;e.stopPropagation(),e.preventDefault&amp;&amp;e.preventDefault()}var pn=&quot;storagemutated&quot;,kt=&quot;x-storagemutated-1&quot;,Se=ln(null,pn),Oo=(ye.prototype._lock=function(){return tn(!T.global),++this._reculock,this._reculock!==1||T.global||(T.lockOwnerFor=this),this},ye.prototype._unlock=function(){if(tn(!T.global),--this._reculock==0)for(T.global||(T.lockOwnerFor=null);0&lt;this._blockedFuncs.length&amp;&amp;!this._locked();){var e=this._blockedFuncs.shift();try{Be(e[1],e[0])}catch{}}return this},ye.prototype._locked=function(){return this._reculock&amp;&amp;T.lockOwnerFor!==this},ye.prototype.create=function(e){var n=this;if(!this.mode)return this;var t=this.db.idbdb,r=this.db._state.dbOpenError;if(tn(!this.idbtrans),!e&amp;&amp;!t)switch(r&amp;&amp;r.name){case&quot;DatabaseClosedError&quot;:throw new D.DatabaseClosed(r);case&quot;MissingAPIError&quot;:throw new D.MissingAPI(r.message,r);default:throw new D.OpenFailed(r)}if(!this.active)throw new D.TransactionInactive;return tn(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||t).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=J(function(o){dn(o),n._reject(e.error)}),e.onabort=J(function(o){dn(o),n.active&amp;&amp;n._reject(new D.Abort(e.error)),n.active=!1,n.on(&quot;abort&quot;).fire(o)}),e.oncomplete=J(function(){n.active=!1,n._resolve(),&quot;mutatedParts&quot;in e&amp;&amp;Se.storagemutated.fire(e.mutatedParts)}),this},ye.prototype._promise=function(e,n,t){var r=this;if(e===&quot;readwrite&quot;&amp;&amp;this.mode!==&quot;readwrite&quot;)return Z(new D.ReadOnly(&quot;Transaction is readonly&quot;));if(!this.active)return Z(new D.TransactionInactive);if(this._locked())return new K(function(i,a){r._blockedFuncs.push([function(){r._promise(e,n,t).then(i,a)},T])});if(t)return ke(function(){var i=new K(function(a,u){r._lock();var c=n(a,u,r);c&amp;&amp;c.then&amp;&amp;c.then(a,u)});return i.finally(function(){return r._unlock()}),i._lib=!0,i});var o=new K(function(i,a){var u=n(i,a,r);u&amp;&amp;u.then&amp;&amp;u.then(i,a)});return o._lib=!0,o},ye.prototype._root=function(){return this.parent?this.parent._root():this},ye.prototype.waitFor=function(e){var n,t=this._root(),r=K.resolve(e);t._waitingFor?t._waitingFor=t._waitingFor.then(function(){return r}):(t._waitingFor=r,t._waitingQueue=[],n=t.idbtrans.objectStore(t.storeNames[0]),function i(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&amp;&amp;(n.get(-1/0).onsuccess=i)}());var o=t._waitingFor;return new K(function(i,a){r.then(function(u){return t._waitingQueue.push(J(i.bind(null,u)))},function(u){return t._waitingQueue.push(J(a.bind(null,u)))}).finally(function(){t._waitingFor===o&amp;&amp;(t._waitingFor=null)})})},ye.prototype.abort=function(){this.active&amp;&amp;(this.active=!1,this.idbtrans&amp;&amp;this.idbtrans.abort(),this._reject(new D.Abort))},ye.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(V(n,e))return n[e];var t=this.schema[e];if(!t)throw new D.NotFound(&quot;Table &quot;+e+&quot; not part of transaction&quot;);return t=new this.db.Table(e,t,this),t.core=this.db.core.table(e),n[e]=t},ye);function ye(){}function Ot(e,n,t,r,o,i,a){return{name:e,keyPath:n,unique:t,multi:r,auto:o,compound:i,src:(t&amp;&amp;!a?&quot;&amp;&quot;:&quot;&quot;)+(r?&quot;*&quot;:&quot;&quot;)+(o?&quot;++&quot;:&quot;&quot;)+Or(n)}}function Or(e){return typeof e==&quot;string&quot;?e:e?&quot;[&quot;+[].join.call(e,&quot;+&quot;)+&quot;]&quot;:&quot;&quot;}function Pt(e,n,t){return{name:e,primKey:n,indexes:t,mappedClass:null,idxByName:(r=function(o){return[o.name,o]},t.reduce(function(o,i,a){return a=r(i,a),a&amp;&amp;(o[a[0]]=a[1]),o},{}))};var r}var yn=function(e){try{return e.only([[]]),yn=function(){return[[]]},[[]]}catch{return yn=function(){return Ne},Ne}};function Et(e){return e==null?function(){}:typeof e==&quot;string&quot;?(n=e).split(&quot;.&quot;).length===1?function(t){return t[n]}:function(t){return ge(t,n)}:function(t){return ge(t,e)};var n}function Pr(e){return[].slice.call(e)}var Po=0;function mn(e){return e==null?&quot;:id&quot;:typeof e==&quot;string&quot;?e:&quot;[&quot;.concat(e.join(&quot;+&quot;),&quot;]&quot;)}function Eo(e,n,c){function r(h){if(h.type===3)return null;if(h.type===4)throw new Error(&quot;Cannot convert never type to IDBKeyRange&quot;);var l=h.lower,d=h.upper,y=h.lowerOpen,h=h.upperOpen;return l===void 0?d===void 0?null:n.upperBound(d,!!h):d===void 0?n.lowerBound(l,!!y):n.bound(l,d,!!y,!!h)}function o(m){var l,d=m.name;return{name:d,schema:m,mutate:function(y){var h=y.trans,v=y.type,g=y.keys,b=y.values,w=y.range;return new Promise(function(x,E){x=J(x);var k=h.objectStore(d),O=k.keyPath==null,S=v===&quot;put&quot;||v===&quot;add&quot;;if(!S&amp;&amp;v!==&quot;delete&quot;&amp;&amp;v!==&quot;deleteRange&quot;)throw new Error(&quot;Invalid operation type: &quot;+v);var P,A=(g||b||{length:1}).length;if(g&amp;&amp;b&amp;&amp;g.length!==b.length)throw new Error(&quot;Given keys array must have same length as given values array.&quot;);if(A===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});function M(ae){++le,dn(ae)}var N=[],F=[],le=0;if(v===&quot;deleteRange&quot;){if(w.type===4)return x({numFailures:le,failures:F,results:[],lastResult:void 0});w.type===3?N.push(P=k.clear()):N.push(P=k.delete(r(w)))}else{var O=S?O?[b,g]:[b,null]:[g,null],I=O[0],oe=O[1];if(S)for(var ie=0;ie&lt;A;++ie)N.push(P=oe&amp;&amp;oe[ie]!==void 0?k[v](I[ie],oe[ie]):k[v](I[ie])),P.onerror=M;else for(ie=0;ie&lt;A;++ie)N.push(P=k[v](I[ie])),P.onerror=M}function et(ae){ae=ae.target.result,N.forEach(function(Ve,zt){return Ve.error!=null&amp;&amp;(F[zt]=Ve.error)}),x({numFailures:le,failures:F,results:v===&quot;delete&quot;?g:N.map(function(Ve){return Ve.result}),lastResult:ae})}P.onerror=function(ae){M(ae),et(ae)},P.onsuccess=et})},getMany:function(y){var h=y.trans,v=y.keys;return new Promise(function(g,b){g=J(g);for(var w,x=h.objectStore(d),E=v.length,k=new Array(E),O=0,S=0,P=function(N){N=N.target,k[N._pos]=N.result,++S===O&amp;&amp;g(k)},A=pe(b),M=0;M&lt;E;++M)v[M]!=null&amp;&amp;((w=x.get(v[M]))._pos=M,w.onsuccess=P,w.onerror=A,++O);O===0&amp;&amp;g(k)})},get:function(y){var h=y.trans,v=y.key;return new Promise(function(g,b){g=J(g);var w=h.objectStore(d).get(v);w.onsuccess=function(x){return g(x.target.result)},w.onerror=pe(b)})},query:(l=f,function(y){return new Promise(function(h,v){h=J(h);var g,b,w,O=y.trans,x=y.values,E=y.limit,P=y.query,k=E===1/0?void 0:E,S=P.index,P=P.range,O=O.objectStore(d),S=S.isPrimaryKey?O:O.index(S.name),P=r(P);if(E===0)return h({result:[]});l?((k=x?S.getAll(P,k):S.getAllKeys(P,k)).onsuccess=function(A){return h({result:A.target.result})},k.onerror=pe(v)):(g=0,b=!x&amp;&amp;&quot;openKeyCursor&quot;in S?S.openKeyCursor(P):S.openCursor(P),w=[],b.onsuccess=function(A){var M=b.result;return M?(w.push(x?M.value:M.primaryKey),++g===E?h({result:w}):void M.continue()):h({result:w})},b.onerror=pe(v))})}),openCursor:function(y){var h=y.trans,v=y.values,g=y.query,b=y.reverse,w=y.unique;return new Promise(function(x,E){x=J(x);var S=g.index,k=g.range,O=h.objectStore(d),O=S.isPrimaryKey?O:O.index(S.name),S=b?w?&quot;prevunique&quot;:&quot;prev&quot;:w?&quot;nextunique&quot;:&quot;next&quot;,P=!v&amp;&amp;&quot;openKeyCursor&quot;in O?O.openKeyCursor(r(k),S):O.openCursor(r(k),S);P.onerror=pe(E),P.onsuccess=J(function(A){var M,N,F,le,I=P.result;I?(I.___id=++Po,I.done=!1,M=I.continue.bind(I),N=(N=I.continuePrimaryKey)&amp;&amp;N.bind(I),F=I.advance.bind(I),le=function(){throw new Error(&quot;Cursor not stopped&quot;)},I.trans=h,I.stop=I.continue=I.continuePrimaryKey=I.advance=function(){throw new Error(&quot;Cursor not started&quot;)},I.fail=J(E),I.next=function(){var oe=this,ie=1;return this.start(function(){return ie--?oe.continue():oe.stop()}).then(function(){return oe})},I.start=function(oe){function ie(){if(P.result)try{oe()}catch(ae){I.fail(ae)}else I.done=!0,I.start=function(){throw new Error(&quot;Cursor behind last entry&quot;)},I.stop()}var et=new Promise(function(ae,Ve){ae=J(ae),P.onerror=pe(Ve),I.fail=Ve,I.stop=function(zt){I.stop=I.continue=I.continuePrimaryKey=I.advance=le,ae(zt)}});return P.onsuccess=J(function(ae){P.onsuccess=ie,ie()}),I.continue=M,I.continuePrimaryKey=N,I.advance=F,ie(),et},x(I)):x(null)},E)})},count:function(y){var h=y.query,v=y.trans,g=h.index,b=h.range;return new Promise(function(w,x){var E=v.objectStore(d),k=g.isPrimaryKey?E:E.index(g.name),E=r(b),k=E?k.count(E):k.count();k.onsuccess=J(function(O){return w(O.target.result)}),k.onerror=pe(x)})}}}var i,a,u,p=(a=c,u=Pr((i=e).objectStoreNames),{schema:{name:i.name,tables:u.map(function(m){return a.objectStore(m)}).map(function(m){var l=m.keyPath,h=m.autoIncrement,d=q(l),y={},h={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:l==null,compound:d,keyPath:l,autoIncrement:h,unique:!0,extractKey:Et(l)},indexes:Pr(m.indexNames).map(function(v){return m.index(v)}).map(function(w){var g=w.name,b=w.unique,x=w.multiEntry,w=w.keyPath,x={name:g,compound:q(w),keyPath:w,unique:b,multiEntry:x,extractKey:Et(w)};return y[mn(w)]=x}),getIndexByKeyPath:function(v){return y[mn(v)]}};return y[&quot;:id&quot;]=h.primaryKey,l!=null&amp;&amp;(y[mn(l)]=h.primaryKey),h})},hasGetAll:0&lt;u.length&amp;&amp;&quot;getAll&quot;in a.objectStore(u[0])&amp;&amp;!(typeof navigator&lt;&quot;u&quot;&amp;&amp;/Safari/.test(navigator.userAgent)&amp;&amp;!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&amp;&amp;[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]&lt;604)}),c=p.schema,f=p.hasGetAll,p=c.tables.map(o),s={};return p.forEach(function(m){return s[m.name]=m}),{stack:&quot;dbcore&quot;,transaction:e.transaction.bind(e),table:function(m){if(!s[m])throw new Error(&quot;Table \&#x27;&quot;.concat(m,&quot;\&#x27; not found&quot;));return s[m]},MIN_KEY:-1/0,MAX_KEY:yn(n),schema:c}}function So(e,n,t,r){var o=t.IDBKeyRange;return t.indexedDB,{dbcore:(r=Eo(n,o,r),e.dbcore.reduce(function(i,a){return a=a.create,C(C({},i),a(i))},r))}}function Un(e,r){var t=r.db,r=So(e._middlewares,t,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(o){var i=o.name;e.core.schema.tables.some(function(a){return a.name===i})&amp;&amp;(o.core=e.core.table(i),e[i]instanceof e.Table&amp;&amp;(e[i].core=o.core))})}function Vn(e,n,t,r){t.forEach(function(o){var i=r[o];n.forEach(function(a){var u=function c(f,p){return ro(f,p)||(f=H(f))&amp;&amp;c(f,p)}(a,o);(!u||&quot;value&quot;in u&amp;&amp;u.value===void 0)&amp;&amp;(a===e.Transaction.prototype||a instanceof e.Transaction?he(a,o,{get:function(){return this.table(o)},set:function(c){ue(this,o,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):a[o]=new e.Table(o,i))})})}function St(e,n){n.forEach(function(t){for(var r in t)t[r]instanceof e.Table&amp;&amp;delete t[r]})}function Ko(e,n){return e._cfg.version-n._cfg.version}function Co(e,n,t,r){var o=e._dbSchema;t.objectStoreNames.contains(&quot;$meta&quot;)&amp;&amp;!o.$meta&amp;&amp;(o.$meta=Pt(&quot;$meta&quot;,Sr(&quot;&quot;)[0],[]),e._storeNames.push(&quot;$meta&quot;));var i=e._createTransaction(&quot;readwrite&quot;,e._storeNames,o);i.create(t),i._completion.catch(r);var a=i._reject.bind(i),u=T.transless||T;ke(function(){return T.trans=i,T.transless=u,n!==0?(Un(e,t),f=n,((c=i).storeNames.includes(&quot;$meta&quot;)?c.table(&quot;$meta&quot;).get(&quot;version&quot;).then(function(p){return p??f}):K.resolve(f)).then(function(p){return m=p,l=i,d=t,y=[],p=(s=e)._versions,h=s._dbSchema=Wn(0,s.idbdb,d),(p=p.filter(function(v){return v._cfg.version&gt;=m})).length!==0?(p.forEach(function(v){y.push(function(){var g=h,b=v._cfg.dbschema;$n(s,g,d),$n(s,b,d),h=s._dbSchema=b;var w=Kt(g,b);w.add.forEach(function(S){Ct(d,S[0],S[1].primKey,S[1].indexes)}),w.change.forEach(function(S){if(S.recreate)throw new D.Upgrade(&quot;Not yet support for changing primary key&quot;);var P=d.objectStore(S.name);S.add.forEach(function(A){return zn(P,A)}),S.change.forEach(function(A){P.deleteIndex(A.name),zn(P,A)}),S.del.forEach(function(A){return P.deleteIndex(A)})});var x=v._cfg.contentUpgrade;if(x&amp;&amp;v._cfg.version&gt;m){Un(s,d),l._memoizedTables={};var E=tr(b);w.del.forEach(function(S){E[S]=g[S]}),St(s,[s.Transaction.prototype]),Vn(s,[s.Transaction.prototype],U(E),E),l.schema=E;var k,O=ut(x);return O&amp;&amp;Xe(),w=K.follow(function(){var S;(k=x(l))&amp;&amp;O&amp;&amp;(S=Oe.bind(null,null),k.then(S,S))}),k&amp;&amp;typeof k.then==&quot;function&quot;?K.resolve(k):w.then(function(){return k})}}),y.push(function(g){var b,w,x=v._cfg.dbschema;b=x,w=g,[].slice.call(w.db.objectStoreNames).forEach(function(E){return b[E]==null&amp;&amp;w.db.deleteObjectStore(E)}),St(s,[s.Transaction.prototype]),Vn(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),l.schema=s._dbSchema}),y.push(function(g){s.idbdb.objectStoreNames.contains(&quot;$meta&quot;)&amp;&amp;(Math.ceil(s.idbdb.version/10)===v._cfg.version?(s.idbdb.deleteObjectStore(&quot;$meta&quot;),delete s._dbSchema.$meta,s._storeNames=s._storeNames.filter(function(b){return b!==&quot;$meta&quot;})):g.objectStore(&quot;$meta&quot;).put(v._cfg.version,&quot;version&quot;))})}),function v(){return y.length?K.resolve(y.shift()(l.idbtrans)).then(v):K.resolve()}().then(function(){Er(h,d)})):K.resolve();var s,m,l,d,y,h}).catch(a)):(U(o).forEach(function(p){Ct(t,p,o[p].primKey,o[p].indexes)}),Un(e,t),void K.follow(function(){return e.on.populate.fire(i)}).catch(a));var c,f})}function Ao(e,n){Er(e._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains(&quot;$meta&quot;)||n.db.createObjectStore(&quot;$meta&quot;).add(Math.ceil(n.db.version/10-1),&quot;version&quot;);var t=Wn(0,e.idbdb,n);$n(e,e._dbSchema,n);for(var r=0,o=Kt(t,e._dbSchema).change;r&lt;o.length;r++){var i=function(a){if(a.change.length||a.recreate)return console.warn(&quot;Unable to patch indexes of table &quot;.concat(a.name,&quot; because it has changes on the type of index or primary key.&quot;)),{value:void 0};var u=n.objectStore(a.name);a.add.forEach(function(c){de&amp;&amp;console.debug(&quot;Dexie upgrade patch: Creating missing index &quot;.concat(a.name,&quot;.&quot;).concat(c.src)),zn(u,c)})}(o[r]);if(typeof i==&quot;object&quot;)return i.value}}function Kt(e,n){var t,r={del:[],add:[],change:[]};for(t in e)n[t]||r.del.push(t);for(t in n){var o=e[t],i=n[t];if(o){var a={name:t,def:i,recreate:!1,del:[],add:[],change:[]};if(&quot;&quot;+(o.primKey.keyPath||&quot;&quot;)!=&quot;&quot;+(i.primKey.keyPath||&quot;&quot;)||o.primKey.auto!==i.primKey.auto)a.recreate=!0,r.change.push(a);else{var u=o.idxByName,c=i.idxByName,f=void 0;for(f in u)c[f]||a.del.push(f);for(f in c){var p=u[f],s=c[f];p?p.src!==s.src&amp;&amp;a.change.push(s):a.add.push(s)}(0&lt;a.del.length||0&lt;a.add.length||0&lt;a.change.length)&amp;&amp;r.change.push(a)}}else r.add.push([t,i])}return r}function Ct(e,n,t,r){var o=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(function(i){return zn(o,i)}),o}function Er(e,n){U(e).forEach(function(t){n.db.objectStoreNames.contains(t)||(de&amp;&amp;console.debug(&quot;Dexie: Creating missing table&quot;,t),Ct(n,t,e[t].primKey,e[t].indexes))})}function zn(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Wn(e,n,t){var r={};return En(n.objectStoreNames,0).forEach(function(o){for(var i=t.objectStore(o),a=Ot(Or(f=i.keyPath),f||&quot;&quot;,!0,!1,!!i.autoIncrement,f&amp;&amp;typeof f!=&quot;string&quot;,!0),u=[],c=0;c&lt;i.indexNames.length;++c){var p=i.index(i.indexNames[c]),f=p.keyPath,p=Ot(p.name,f,!!p.unique,!!p.multiEntry,!1,f&amp;&amp;typeof f!=&quot;string&quot;,!1);u.push(p)}r[o]=Pt(o,a,u)}),r}function $n(e,n,t){for(var r=t.db.objectStoreNames,o=0;o&lt;r.length;++o){var i=r[o],a=t.objectStore(i);e._hasGetAll=&quot;getAll&quot;in a;for(var u=0;u&lt;a.indexNames.length;++u){var c=a.indexNames[u],f=a.index(c).keyPath,p=typeof f==&quot;string&quot;?f:&quot;[&quot;+En(f).join(&quot;+&quot;)+&quot;]&quot;;!n[i]||(f=n[i].idxByName[p])&amp;&amp;(f.name=c,delete n[i].idxByName[p],n[i].idxByName[c]=f)}}typeof navigator&lt;&quot;u&quot;&amp;&amp;/Safari/.test(navigator.userAgent)&amp;&amp;!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&amp;&amp;B.WorkerGlobalScope&amp;&amp;B instanceof B.WorkerGlobalScope&amp;&amp;[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]&lt;604&amp;&amp;(e._hasGetAll=!1)}function Sr(e){return e.split(&quot;,&quot;).map(function(n,t){var r=(n=n.trim()).replace(/([&amp;*]|\\+\\+)/g,&quot;&quot;),o=/^\\[/.test(r)?r.match(/^\\[(.*)\\]$/)[1].split(&quot;+&quot;):r;return Ot(r,o||null,/\\&amp;/.test(n),/\\*/.test(n),/\\+\\+/.test(n),q(o),t===0)})}var jo=(Yn.prototype._parseStoresSpec=function(e,n){U(e).forEach(function(t){if(e[t]!==null){var r=Sr(e[t]),o=r.shift();if(o.unique=!0,o.multi)throw new D.Schema(&quot;Primary key cannot be multi-valued&quot;);r.forEach(function(i){if(i.auto)throw new D.Schema(&quot;Only primary key can be marked as autoIncrement (++)&quot;);if(!i.keyPath)throw new D.Schema(&quot;Index must have a name and cannot be an empty string&quot;)}),n[t]=Pt(t,o,r)}})},Yn.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?W(this._cfg.storesSource,t):t;var t=n._versions,r={},o={};return t.forEach(function(i){W(r,i._cfg.storesSource),o=i._cfg.dbschema={},i._parseStoresSpec(r,o)}),n._dbSchema=o,St(n,[n._allTables,n,n.Transaction.prototype]),Vn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],U(o),o),n._storeNames=U(o),this},Yn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ct(this._cfg.contentUpgrade||G,e),this},Yn);function Yn(){}function At(e,n){var t=e._dbNamesDB;return t||(t=e._dbNamesDB=new _e(Mn,{addons:[],indexedDB:e,IDBKeyRange:n})).version(1).stores({dbnames:&quot;name&quot;}),t.table(&quot;dbnames&quot;)}function jt(e){return e&amp;&amp;typeof e.databases==&quot;function&quot;}function Tt(e){return ke(function(){return T.letThrough=!0,e()})}function Dt(e){return!(&quot;from&quot;in e)}var re=function(e,n){if(!this){var t=new re;return e&amp;&amp;&quot;d&quot;in e&amp;&amp;W(t,e),t}W(this,arguments.length?{d:1,from:e,to:1&lt;arguments.length?n:e}:{d:0})};function vn(e,n,t){var r=z(n,t);if(!isNaN(r)){if(0&lt;r)throw RangeError();if(Dt(e))return W(e,{from:n,to:t,d:1});var o=e.l,r=e.r;if(z(t,e.from)&lt;0)return o?vn(o,n,t):e.l={from:n,to:t,d:1,l:null,r:null},Cr(e);if(0&lt;z(n,e.to))return r?vn(r,n,t):e.r={from:n,to:t,d:1,l:null,r:null},Cr(e);z(n,e.from)&lt;0&amp;&amp;(e.from=n,e.l=null,e.d=r?r.d+1:1),0&lt;z(t,e.to)&amp;&amp;(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1),t=!e.r,o&amp;&amp;!e.l&amp;&amp;gn(e,o),r&amp;&amp;t&amp;&amp;gn(e,r)}}function gn(e,n){Dt(n)||function t(r,c){var i=c.from,a=c.to,u=c.l,c=c.r;vn(r,i,a),u&amp;&amp;t(r,u),c&amp;&amp;t(r,c)}(e,n)}function Kr(e,n){var t=Hn(n),r=t.next();if(r.done)return!1;for(var o=r.value,i=Hn(e),a=i.next(o.from),u=a.value;!r.done&amp;&amp;!a.done;){if(z(u.from,o.to)&lt;=0&amp;&amp;0&lt;=z(u.to,o.from))return!0;z(o.from,u.from)&lt;0?o=(r=t.next(u.from)).value:u=(a=i.next(o.from)).value}return!1}function Hn(e){var n=Dt(e)?null:{s:0,n:e};return{next:function(t){for(var r=0&lt;arguments.length;n;)switch(n.s){case 0:if(n.s=1,r)for(;n.n.l&amp;&amp;z(t,n.n.from)&lt;0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!r||z(t,n.n.to)&lt;=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function Cr(e){var n,t,r=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),o=1&lt;r?&quot;r&quot;:r&lt;-1?&quot;l&quot;:&quot;&quot;;o&amp;&amp;(n=o==&quot;r&quot;?&quot;l&quot;:&quot;r&quot;,t=C({},e),r=e[o],e.from=r.from,e.to=r.to,e[o]=r[o],t[o]=r[n],(e[n]=t).d=Ar(t)),e.d=Ar(e)}function Ar(t){var n=t.r,t=t.l;return(n?t?Math.max(n.d,t.d):n.d:t?t.d:0)+1}function Gn(e,n){return U(n).forEach(function(t){e[t]?gn(e[t],n[t]):e[t]=function r(o){var i,a,u={};for(i in o)V(o,i)&amp;&amp;(a=o[i],u[i]=!a||typeof a!=&quot;object&quot;||or.has(a.constructor)?a:r(a));return u}(n[t])}),e}function Rt(e,n){return e.all||n.all||Object.keys(e).some(function(t){return n[t]&amp;&amp;Kr(n[t],e[t])})}$(re.prototype,((fe={add:function(e){return gn(this,e),this},addKey:function(e){return vn(this,e,e),this},addKeys:function(e){var n=this;return e.forEach(function(t){return vn(n,t,t)}),this},hasKey:function(e){var n=Hn(this).next(e).value;return n&amp;&amp;z(n.from,e)&lt;=0&amp;&amp;0&lt;=z(n.to,e)}})[at]=function(){return Hn(this)},fe));var Le={},It={},qt=!1;function Qn(e){Gn(It,e),qt||(qt=!0,setTimeout(function(){qt=!1,Mt(It,!(It={}))},0))}function Mt(e,n){n===void 0&amp;&amp;(n=!1);var t=new Set;if(e.all)for(var r=0,o=Object.values(Le);r&lt;o.length;r++)jr(a=o[r],e,t,n);else for(var i in e){var a,u=/^idb\\:\\/\\/(.*)\\/(.*)\\//.exec(i);u&amp;&amp;(i=u[1],u=u[2],(a=Le[&quot;idb://&quot;.concat(i,&quot;/&quot;).concat(u)])&amp;&amp;jr(a,e,t,n))}t.forEach(function(c){return c()})}function jr(e,n,t,r){for(var o=[],i=0,a=Object.entries(e.queries.query);i&lt;a.length;i++){for(var u=a[i],c=u[0],f=[],p=0,s=u[1];p&lt;s.length;p++){var m=s[p];Rt(n,m.obsSet)?m.subscribers.forEach(function(h){return t.add(h)}):r&amp;&amp;f.push(m)}r&amp;&amp;o.push([c,f])}if(r)for(var l=0,d=o;l&lt;d.length;l++){var y=d[l],c=y[0],f=y[1];e.queries.query[c]=f}}function To(e){var n=e._state,t=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?Z(n.dbOpenError):e});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var r=n.openCanceller,o=Math.round(10*e.verno),i=!1;function a(){if(n.openCanceller!==r)throw new D.DatabaseClosed(&quot;db.open() was cancelled&quot;)}function u(){return new K(function(m,l){if(a(),!t)throw new D.MissingAPI;var d=e.name,y=n.autoSchema||!o?t.open(d):t.open(d,o);if(!y)throw new D.MissingAPI;y.onerror=pe(l),y.onblocked=J(e._fireOnBlocked),y.onupgradeneeded=J(function(h){var v;p=y.transaction,n.autoSchema&amp;&amp;!e._options.allowEmptyDB?(y.onerror=dn,p.abort(),y.result.close(),(v=t.deleteDatabase(d)).onsuccess=v.onerror=J(function(){l(new D.NoSuchDatabase(&quot;Database &quot;.concat(d,&quot; doesnt exist&quot;)))})):(p.onerror=pe(l),h=h.oldVersion&gt;Math.pow(2,62)?0:h.oldVersion,s=h&lt;1,e.idbdb=y.result,i&amp;&amp;Ao(e,p),Co(e,h/10,p,l))},l),y.onsuccess=J(function(){p=null;var h,v,g,b,w,x=e.idbdb=y.result,E=En(x.objectStoreNames);if(0&lt;E.length)try{var k=x.transaction((b=E).length===1?b[0]:b,&quot;readonly&quot;);if(n.autoSchema)v=x,g=k,(h=e).verno=v.version/10,g=h._dbSchema=Wn(0,v,g),h._storeNames=En(v.objectStoreNames,0),Vn(h,[h._allTables],U(g),g);else if($n(e,e._dbSchema,k),((w=Kt(Wn(0,(w=e).idbdb,k),w._dbSchema)).add.length||w.change.some(function(O){return O.add.length||O.change.length}))&amp;&amp;!i)return console.warn(&quot;Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.&quot;),x.close(),o=x.version+1,i=!0,m(u());Un(e,k)}catch{}Je.push(e),x.onversionchange=J(function(O){n.vcFired=!0,e.on(&quot;versionchange&quot;).fire(O)}),x.onclose=J(function(O){e.on(&quot;close&quot;).fire(O)}),s&amp;&amp;(w=e._deps,k=d,x=w.indexedDB,w=w.IDBKeyRange,jt(x)||k===Mn||At(x,w).put({name:k}).catch(G)),m()},l)}).catch(function(m){switch(m==null?void 0:m.name){case&quot;UnknownError&quot;:if(0&lt;n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn(&quot;Dexie: Workaround for Chrome UnknownError on open()&quot;),u();break;case&quot;VersionError&quot;:if(0&lt;o)return o=0,u()}return K.reject(m)})}var c,f=n.dbReadyResolve,p=null,s=!1;return K.race([r,(typeof navigator&gt;&quot;u&quot;?K.resolve():!navigator.userAgentData&amp;&amp;/Safari\\//.test(navigator.userAgent)&amp;&amp;!/Chrom(e|ium)\\//.test(navigator.userAgent)&amp;&amp;indexedDB.databases?new Promise(function(m){function l(){return indexedDB.databases().finally(m)}c=setInterval(l,100),l()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(u)]).then(function(){return a(),n.onReadyBeingFired=[],K.resolve(Tt(function(){return e.on.ready.fire(e.vip)})).then(function m(){if(0&lt;n.onReadyBeingFired.length){var l=n.onReadyBeingFired.reduce(ct,G);return n.onReadyBeingFired=[],K.resolve(Tt(function(){return l(e.vip)})).then(m)}})}).finally(function(){n.openCanceller===r&amp;&amp;(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(m){n.dbOpenError=m;try{p&amp;&amp;p.abort()}catch{}return r===n.openCanceller&amp;&amp;e._close(),Z(m)}).finally(function(){n.openComplete=!0,f()}).then(function(){var m;return s&amp;&amp;(m={},e.tables.forEach(function(l){l.schema.indexes.forEach(function(d){d.name&amp;&amp;(m[&quot;idb://&quot;.concat(e.name,&quot;/&quot;).concat(l.name,&quot;/&quot;).concat(d.name)]=new re(-1/0,[[[]]]))}),m[&quot;idb://&quot;.concat(e.name,&quot;/&quot;).concat(l.name,&quot;/&quot;)]=m[&quot;idb://&quot;.concat(e.name,&quot;/&quot;).concat(l.name,&quot;/:dels&quot;)]=new re(-1/0,[[[]]])}),Se(pn).fire(m),Mt(m,!0)),e})}function Bt(e){function n(i){return e.next(i)}var t=o(n),r=o(function(i){return e.throw(i)});function o(i){return function(c){var u=i(c),c=u.value;return u.done?c:c&amp;&amp;typeof c.then==&quot;function&quot;?c.then(t,r):q(c)?Promise.all(c).then(t,r):t(c)}}return o(n)()}function Xn(e,n,t){for(var r=q(e)?e.slice():[e],o=0;o&lt;t;++o)r.push(n);return r}var Do={stack:&quot;dbcore&quot;,name:&quot;VirtualIndexMiddleware&quot;,level:1,create:function(e){return C(C({},e),{table:function(n){var t=e.table(n),r=t.schema,o={},i=[];function a(s,m,l){var d=mn(s),y=o[d]=o[d]||[],h=s==null?0:typeof s==&quot;string&quot;?1:s.length,v=0&lt;m,v=C(C({},l),{name:v?&quot;&quot;.concat(d,&quot;(virtual-from:&quot;).concat(l.name,&quot;)&quot;):l.name,lowLevelIndex:l,isVirtual:v,keyTail:m,keyLength:h,extractKey:Et(s),unique:!v&amp;&amp;l.unique});return y.push(v),v.isPrimaryKey||i.push(v),1&lt;h&amp;&amp;a(h===2?s[0]:s.slice(0,h-1),m+1,l),y.sort(function(g,b){return g.keyTail-b.keyTail}),v}n=a(r.primaryKey.keyPath,0,r.primaryKey),o[&quot;:id&quot;]=[n];for(var u=0,c=r.indexes;u&lt;c.length;u++){var f=c[u];a(f.keyPath,0,f)}function p(s){var m,l=s.query.index;return l.isVirtual?C(C({},s),{query:{index:l.lowLevelIndex,range:(m=s.query.range,l=l.keyTail,{type:m.type===1?2:m.type,lower:Xn(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,l),lowerOpen:!0,upper:Xn(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,l),upperOpen:!0})}}):s}return C(C({},t),{schema:C(C({},r),{primaryKey:n,indexes:i,getIndexByKeyPath:function(s){return(s=o[mn(s)])&amp;&amp;s[0]}}),count:function(s){return t.count(p(s))},query:function(s){return t.query(p(s))},openCursor:function(s){var m=s.query.index,l=m.keyTail,d=m.isVirtual,y=m.keyLength;return d?t.openCursor(p(s)).then(function(v){return v&amp;&amp;h(v)}):t.openCursor(s);function h(v){return Object.create(v,{continue:{value:function(g){g!=null?v.continue(Xn(g,s.reverse?e.MAX_KEY:e.MIN_KEY,l)):s.unique?v.continue(v.key.slice(0,y).concat(s.reverse?e.MIN_KEY:e.MAX_KEY,l)):v.continue()}},continuePrimaryKey:{value:function(g,b){v.continuePrimaryKey(Xn(g,e.MAX_KEY,l),b)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var g=v.key;return y===1?g[0]:g.slice(0,y)}},value:{get:function(){return v.value}}})}}})}})}};function Nt(e,n,t,r){return t=t||{},r=r||&quot;&quot;,U(e).forEach(function(o){var i,a,u;V(n,o)?(i=e[o],a=n[o],typeof i==&quot;object&quot;&amp;&amp;typeof a==&quot;object&quot;&amp;&amp;i&amp;&amp;a?(u=it(i))!==it(a)?t[r+o]=n[o]:u===&quot;Object&quot;?Nt(i,a,t,r+o+&quot;.&quot;):i!==a&amp;&amp;(t[r+o]=n[o]):i!==a&amp;&amp;(t[r+o]=n[o])):t[r+o]=void 0}),U(n).forEach(function(o){V(e,o)||(t[r+o]=n[o])}),t}function Ft(e,n){return n.type===&quot;delete&quot;?n.keys:n.keys||n.values.map(e.extractKey)}var Ro={stack:&quot;dbcore&quot;,name:&quot;HooksMiddleware&quot;,level:2,create:function(e){return C(C({},e),{table:function(n){var t=e.table(n),r=t.schema.primaryKey;return C(C({},t),{mutate:function(o){var i=T.trans,a=i.table(n).hook,u=a.deleting,c=a.creating,f=a.updating;switch(o.type){case&quot;add&quot;:if(c.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return p(o)},!0);case&quot;put&quot;:if(c.fire===G&amp;&amp;f.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return p(o)},!0);case&quot;delete&quot;:if(u.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return p(o)},!0);case&quot;deleteRange&quot;:if(u.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return function s(m,l,d){return t.query({trans:m,values:!1,query:{index:r,range:l},limit:d}).then(function(y){var h=y.result;return p({type:&quot;delete&quot;,keys:h,trans:m}).then(function(v){return 0&lt;v.numFailures?Promise.reject(v.failures[0]):h.length&lt;d?{failures:[],numFailures:0,lastResult:void 0}:s(m,C(C({},l),{lower:h[h.length-1],lowerOpen:!0}),d)})})}(o.trans,o.range,1e4)},!0)}return t.mutate(o);function p(s){var m,l,d,y=T.trans,h=s.keys||Ft(r,s);if(!h)throw new Error(&quot;Keys missing&quot;);return(s=s.type===&quot;add&quot;||s.type===&quot;put&quot;?C(C({},s),{keys:h}):C({},s)).type!==&quot;delete&quot;&amp;&amp;(s.values=L([],s.values)),s.keys&amp;&amp;(s.keys=L([],s.keys)),m=t,d=h,((l=s).type===&quot;add&quot;?Promise.resolve([]):m.getMany({trans:l.trans,keys:d,cache:&quot;immutable&quot;})).then(function(v){var g=h.map(function(b,w){var x,E,k,O=v[w],S={onerror:null,onsuccess:null};return s.type===&quot;delete&quot;?u.fire.call(S,b,O,y):s.type===&quot;add&quot;||O===void 0?(x=c.fire.call(S,b,s.values[w],y),b==null&amp;&amp;x!=null&amp;&amp;(s.keys[w]=b=x,r.outbound||se(s.values[w],r.keyPath,b))):(x=Nt(O,s.values[w]),(E=f.fire.call(S,x,b,O,y))&amp;&amp;(k=s.values[w],Object.keys(E).forEach(function(P){V(k,P)?k[P]=E[P]:se(k,P,E[P])}))),S});return t.mutate(s).then(function(b){for(var w=b.failures,x=b.results,E=b.numFailures,b=b.lastResult,k=0;k&lt;h.length;++k){var O=(x||h)[k],S=g[k];O==null?S.onerror&amp;&amp;S.onerror(w[k]):S.onsuccess&amp;&amp;S.onsuccess(s.type===&quot;put&quot;&amp;&amp;v[k]?s.values[k]:O)}return{failures:w,results:x,numFailures:E,lastResult:b}}).catch(function(b){return g.forEach(function(w){return w.onerror&amp;&amp;w.onerror(b)}),Promise.reject(b)})})}}})}})}};function Tr(e,n,t){try{if(!n||n.keys.length&lt;e.length)return null;for(var r=[],o=0,i=0;o&lt;n.keys.length&amp;&amp;i&lt;e.length;++o)z(n.keys[o],e[i])===0&amp;&amp;(r.push(t?je(n.values[o]):n.values[o]),++i);return r.length===e.length?r:null}catch{return null}}var Io={stack:&quot;dbcore&quot;,level:-1,create:function(e){return{table:function(n){var t=e.table(n);return C(C({},t),{getMany:function(r){if(!r.cache)return t.getMany(r);var o=Tr(r.keys,r.trans._cache,r.cache===&quot;clone&quot;);return o?K.resolve(o):t.getMany(r).then(function(i){return r.trans._cache={keys:r.keys,values:r.cache===&quot;clone&quot;?je(i):i},i})},mutate:function(r){return r.type!==&quot;add&quot;&amp;&amp;(r.trans._cache=null),t.mutate(r)}})}}}};function Dr(e,n){return e.trans.mode===&quot;readonly&quot;&amp;&amp;!!e.subscr&amp;&amp;!e.trans.explicit&amp;&amp;e.trans.db._options.cache!==&quot;disabled&quot;&amp;&amp;!n.schema.primaryKey.outbound}function Rr(e,n){switch(e){case&quot;query&quot;:return n.values&amp;&amp;!n.unique;case&quot;get&quot;:case&quot;getMany&quot;:case&quot;count&quot;:case&quot;openCursor&quot;:return!1}}var qo={stack:&quot;dbcore&quot;,level:0,name:&quot;Observability&quot;,create:function(e){var n=e.schema.name,t=new re(e.MIN_KEY,e.MAX_KEY);return C(C({},e),{transaction:function(r,o,i){if(T.subscr&amp;&amp;o!==&quot;readonly&quot;)throw new D.ReadOnly(&quot;Readwrite transaction in liveQuery context. Querier source: &quot;.concat(T.querier));return e.transaction(r,o,i)},table:function(r){var o=e.table(r),i=o.schema,a=i.primaryKey,s=i.indexes,u=a.extractKey,c=a.outbound,f=a.autoIncrement&amp;&amp;s.filter(function(l){return l.compound&amp;&amp;l.keyPath.includes(a.keyPath)}),p=C(C({},o),{mutate:function(l){function d(P){return P=&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(r,&quot;/&quot;).concat(P),b[P]||(b[P]=new re)}var y,h,v,g=l.trans,b=l.mutatedParts||(l.mutatedParts={}),w=d(&quot;&quot;),x=d(&quot;:dels&quot;),E=l.type,S=l.type===&quot;deleteRange&quot;?[l.range]:l.type===&quot;delete&quot;?[l.keys]:l.values.length&lt;50?[Ft(a,l).filter(function(P){return P}),l.values]:[],k=S[0],O=S[1],S=l.trans._cache;return q(k)?(w.addKeys(k),(S=E===&quot;delete&quot;||k.length===O.length?Tr(k,S):null)||x.addKeys(k),(S||O)&amp;&amp;(y=d,h=S,v=O,i.indexes.forEach(function(P){var A=y(P.name||&quot;&quot;);function M(F){return F!=null?P.extractKey(F):null}function N(F){return P.multiEntry&amp;&amp;q(F)?F.forEach(function(le){return A.addKey(le)}):A.addKey(F)}(h||v).forEach(function(F,oe){var I=h&amp;&amp;M(h[oe]),oe=v&amp;&amp;M(v[oe]);z(I,oe)!==0&amp;&amp;(I!=null&amp;&amp;N(I),oe!=null&amp;&amp;N(oe))})}))):k?(O={from:(O=k.lower)!==null&amp;&amp;O!==void 0?O:e.MIN_KEY,to:(O=k.upper)!==null&amp;&amp;O!==void 0?O:e.MAX_KEY},x.add(O),w.add(O)):(w.add(t),x.add(t),i.indexes.forEach(function(P){return d(P.name).add(t)})),o.mutate(l).then(function(P){return!k||l.type!==&quot;add&quot;&amp;&amp;l.type!==&quot;put&quot;||(w.addKeys(P.results),f&amp;&amp;f.forEach(function(A){for(var M=l.values.map(function(I){return A.extractKey(I)}),N=A.keyPath.findIndex(function(I){return I===a.keyPath}),F=0,le=P.results.length;F&lt;le;++F)M[F][N]=P.results[F];d(A.name).addKeys(M)})),g.mutatedParts=Gn(g.mutatedParts||{},b),P})}}),s=function(d){var y=d.query,d=y.index,y=y.range;return[d,new re((d=y.lower)!==null&amp;&amp;d!==void 0?d:e.MIN_KEY,(y=y.upper)!==null&amp;&amp;y!==void 0?y:e.MAX_KEY)]},m={get:function(l){return[a,new re(l.key)]},getMany:function(l){return[a,new re().addKeys(l.keys)]},count:s,query:s,openCursor:s};return U(m).forEach(function(l){p[l]=function(d){var y=T.subscr,h=!!y,v=Dr(T,o)&amp;&amp;Rr(l,d)?d.obsSet={}:y;if(h){var g=function(O){return O=&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(r,&quot;/&quot;).concat(O),v[O]||(v[O]=new re)},b=g(&quot;&quot;),w=g(&quot;:dels&quot;),y=m[l](d),h=y[0],y=y[1];if((l===&quot;query&quot;&amp;&amp;h.isPrimaryKey&amp;&amp;!d.values?w:g(h.name||&quot;&quot;)).add(y),!h.isPrimaryKey){if(l!==&quot;count&quot;){var x=l===&quot;query&quot;&amp;&amp;c&amp;&amp;d.values&amp;&amp;o.query(C(C({},d),{values:!1}));return o[l].apply(this,arguments).then(function(O){if(l===&quot;query&quot;){if(c&amp;&amp;d.values)return x.then(function(M){return M=M.result,b.addKeys(M),O});var S=d.values?O.result.map(u):O.result;(d.values?b:w).addKeys(S)}else if(l===&quot;openCursor&quot;){var P=O,A=d.values;return P&amp;&amp;Object.create(P,{key:{get:function(){return w.addKey(P.primaryKey),P.key}},primaryKey:{get:function(){var M=P.primaryKey;return w.addKey(M),M}},value:{get:function(){return A&amp;&amp;b.addKey(P.primaryKey),P.value}}})}return O})}w.add(t)}}return o[l].apply(this,arguments)}}),p}})}};function Ir(e,n,t){if(t.numFailures===0)return n;if(n.type===&quot;deleteRange&quot;)return null;var r=n.keys?n.keys.length:&quot;values&quot;in n&amp;&amp;n.values?n.values.length:1;return t.numFailures===r?null:(n=C({},n),q(n.keys)&amp;&amp;(n.keys=n.keys.filter(function(o,i){return!(i in t.failures)})),&quot;values&quot;in n&amp;&amp;q(n.values)&amp;&amp;(n.values=n.values.filter(function(o,i){return!(i in t.failures)})),n)}function Lt(e,n){return t=e,((r=n).lower===void 0||(r.lowerOpen?0&lt;z(t,r.lower):0&lt;=z(t,r.lower)))&amp;&amp;(e=e,(n=n).upper===void 0||(n.upperOpen?z(e,n.upper)&lt;0:z(e,n.upper)&lt;=0));var t,r}function qr(e,n,m,r,o,i){if(!m||m.length===0)return e;var a=n.query.index,u=a.multiEntry,c=n.query.range,f=r.schema.primaryKey.extractKey,p=a.extractKey,s=(a.lowLevelIndex||a).extractKey,m=m.reduce(function(l,d){var y=l,h=[];if(d.type===&quot;add&quot;||d.type===&quot;put&quot;)for(var v=new re,g=d.values.length-1;0&lt;=g;--g){var b,w=d.values[g],x=f(w);v.hasKey(x)||(b=p(w),(u&amp;&amp;q(b)?b.some(function(P){return Lt(P,c)}):Lt(b,c))&amp;&amp;(v.addKey(x),h.push(w)))}switch(d.type){case&quot;add&quot;:var E=new re().addKeys(n.values?l.map(function(A){return f(A)}):l),y=l.concat(n.values?h.filter(function(A){return A=f(A),!E.hasKey(A)&amp;&amp;(E.addKey(A),!0)}):h.map(function(A){return f(A)}).filter(function(A){return!E.hasKey(A)&amp;&amp;(E.addKey(A),!0)}));break;case&quot;put&quot;:var k=new re().addKeys(d.values.map(function(A){return f(A)}));y=l.filter(function(A){return!k.hasKey(n.values?f(A):A)}).concat(n.values?h:h.map(function(A){return f(A)}));break;case&quot;delete&quot;:var O=new re().addKeys(d.keys);y=l.filter(function(A){return!O.hasKey(n.values?f(A):A)});break;case&quot;deleteRange&quot;:var S=d.range;y=l.filter(function(A){return!Lt(f(A),S)})}return y},e);return m===e?e:(m.sort(function(l,d){return z(s(l),s(d))||z(f(l),f(d))}),n.limit&amp;&amp;n.limit&lt;1/0&amp;&amp;(m.length&gt;n.limit?m.length=n.limit:e.length===n.limit&amp;&amp;m.length&lt;n.limit&amp;&amp;(o.dirty=!0)),i?Object.freeze(m):m)}function Mr(e,n){return z(e.lower,n.lower)===0&amp;&amp;z(e.upper,n.upper)===0&amp;&amp;!!e.lowerOpen==!!n.lowerOpen&amp;&amp;!!e.upperOpen==!!n.upperOpen}function Mo(e,n){return function(t,r,o,i){if(t===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=z(t,r))===0){if(o&amp;&amp;i)return 0;if(o)return 1;if(i)return-1}return r}(e.lower,n.lower,e.lowerOpen,n.lowerOpen)&lt;=0&amp;&amp;0&lt;=function(t,r,o,i){if(t===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=z(t,r))===0){if(o&amp;&amp;i)return 0;if(o)return-1;if(i)return 1}return r}(e.upper,n.upper,e.upperOpen,n.upperOpen)}function Bo(e,n,t,r){e.subscribers.add(t),r.addEventListener(&quot;abort&quot;,function(){var o,i;e.subscribers.delete(t),e.subscribers.size===0&amp;&amp;(o=e,i=n,setTimeout(function(){o.subscribers.size===0&amp;&amp;Te(i,o)},3e3))})}var No={stack:&quot;dbcore&quot;,level:0,name:&quot;Cache&quot;,create:function(e){var n=e.schema.name;return C(C({},e),{transaction:function(t,r,o){var i,a,u=e.transaction(t,r,o);return r===&quot;readwrite&quot;&amp;&amp;(a=(i=new AbortController).signal,o=function(c){return function(){if(i.abort(),r===&quot;readwrite&quot;){for(var f=new Set,p=0,s=t;p&lt;s.length;p++){var m=s[p],l=Le[&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(m)];if(l){var d=e.table(m),y=l.optimisticOps.filter(function(A){return A.trans===u});if(u._explicit&amp;&amp;c&amp;&amp;u.mutatedParts)for(var h=0,v=Object.values(l.queries.query);h&lt;v.length;h++)for(var g=0,b=(E=v[h]).slice();g&lt;b.length;g++)Rt((k=b[g]).obsSet,u.mutatedParts)&amp;&amp;(Te(E,k),k.subscribers.forEach(function(A){return f.add(A)}));else if(0&lt;y.length){l.optimisticOps=l.optimisticOps.filter(function(A){return A.trans!==u});for(var w=0,x=Object.values(l.queries.query);w&lt;x.length;w++)for(var E,k,O,S=0,P=(E=x[w]).slice();S&lt;P.length;S++)(k=P[S]).res!=null&amp;&amp;u.mutatedParts&amp;&amp;(c&amp;&amp;!k.dirty?(O=Object.isFrozen(k.res),O=qr(k.res,k.req,y,d,k,O),k.dirty?(Te(E,k),k.subscribers.forEach(function(A){return f.add(A)})):O!==k.res&amp;&amp;(k.res=O,k.promise=K.resolve({result:O}))):(k.dirty&amp;&amp;Te(E,k),k.subscribers.forEach(function(A){return f.add(A)})))}}}f.forEach(function(A){return A()})}}},u.addEventListener(&quot;abort&quot;,o(!1),{signal:a}),u.addEventListener(&quot;error&quot;,o(!1),{signal:a}),u.addEventListener(&quot;complete&quot;,o(!0),{signal:a})),u},table:function(t){var r=e.table(t),o=r.schema.primaryKey;return C(C({},r),{mutate:function(i){var a=T.trans;if(o.outbound||a.db._options.cache===&quot;disabled&quot;||a.explicit||a.idbtrans.mode!==&quot;readwrite&quot;)return r.mutate(i);var u=Le[&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(t)];return u?(a=r.mutate(i),i.type!==&quot;add&quot;&amp;&amp;i.type!==&quot;put&quot;||!(50&lt;=i.values.length||Ft(o,i).some(function(c){return c==null}))?(u.optimisticOps.push(i),i.mutatedParts&amp;&amp;Qn(i.mutatedParts),a.then(function(c){0&lt;c.numFailures&amp;&amp;(Te(u.optimisticOps,i),(c=Ir(0,i,c))&amp;&amp;u.optimisticOps.push(c),i.mutatedParts&amp;&amp;Qn(i.mutatedParts))}),a.catch(function(){Te(u.optimisticOps,i),i.mutatedParts&amp;&amp;Qn(i.mutatedParts)})):a.then(function(c){var f=Ir(0,C(C({},i),{values:i.values.map(function(p,s){var m;return c.failures[s]?p:(p=(m=o.keyPath)!==null&amp;&amp;m!==void 0&amp;&amp;m.includes(&quot;.&quot;)?je(p):C({},p),se(p,o.keyPath,c.results[s]),p)})}),c);u.optimisticOps.push(f),queueMicrotask(function(){return i.mutatedParts&amp;&amp;Qn(i.mutatedParts)})}),a):r.mutate(i)},query:function(i){if(!Dr(T,r)||!Rr(&quot;query&quot;,i))return r.query(i);var a=((f=T.trans)===null||f===void 0?void 0:f.db._options.cache)===&quot;immutable&quot;,s=T,u=s.requery,c=s.signal,f=function(d,y,h,v){var g=Le[&quot;idb://&quot;.concat(d,&quot;/&quot;).concat(y)];if(!g)return[];if(!(y=g.queries[h]))return[null,!1,g,null];var b=y[(v.query?v.query.index.name:null)||&quot;&quot;];if(!b)return[null,!1,g,null];switch(h){case&quot;query&quot;:var w=b.find(function(x){return x.req.limit===v.limit&amp;&amp;x.req.values===v.values&amp;&amp;Mr(x.req.query.range,v.query.range)});return w?[w,!0,g,b]:[b.find(function(x){return(&quot;limit&quot;in x.req?x.req.limit:1/0)&gt;=v.limit&amp;&amp;(!v.values||x.req.values)&amp;&amp;Mo(x.req.query.range,v.query.range)}),!1,g,b];case&quot;count&quot;:return w=b.find(function(x){return Mr(x.req.query.range,v.query.range)}),[w,!!w,g,b]}}(n,t,&quot;query&quot;,i),p=f[0],s=f[1],m=f[2],l=f[3];return p&amp;&amp;s?p.obsSet=i.obsSet:(s=r.query(i).then(function(d){var y=d.result;if(p&amp;&amp;(p.res=y),a){for(var h=0,v=y.length;h&lt;v;++h)Object.freeze(y[h]);Object.freeze(y)}else d.result=je(y);return d}).catch(function(d){return l&amp;&amp;p&amp;&amp;Te(l,p),Promise.reject(d)}),p={obsSet:i.obsSet,promise:s,subscribers:new Set,type:&quot;query&quot;,req:i,dirty:!1},l?l.push(p):(l=[p],(m=m||(Le[&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(t)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[i.query.index.name||&quot;&quot;]=l)),Bo(p,l,u,c),p.promise.then(function(d){return{result:qr(d.result,i,m==null?void 0:m.optimisticOps,r,p,a)}})}})}})}};function Jn(e,n){return new Proxy(e,{get:function(t,r,o){return r===&quot;db&quot;?n:Reflect.get(t,r,o)}})}var _e=(ee.prototype.version=function(e){if(isNaN(e)||e&lt;.1)throw new D.Type(&quot;Given version is not a positive number&quot;);if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema(&quot;Cannot add version when database is open&quot;);this.verno=Math.max(this.verno,e);var n=this._versions,t=n.filter(function(r){return r._cfg.version===e})[0];return t||(t=new this.Version(e),n.push(t),n.sort(Ko),t.stores({}),this._state.autoSchema=!1,t)},ee.prototype._whenReady=function(e){var n=this;return this.idbdb&amp;&amp;(this._state.openComplete||T.letThrough||this._vip)?e():new K(function(t,r){if(n._state.openComplete)return r(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void r(new D.DatabaseClosed);n.open().catch(G)}n._state.dbReadyPromise.then(t,r)}).then(e)},ee.prototype.use=function(e){var n=e.stack,t=e.create,r=e.level,o=e.name;return o&amp;&amp;this.unuse({stack:n,name:o}),e=this._middlewares[n]||(this._middlewares[n]=[]),e.push({stack:n,create:t,level:r??10,name:o}),e.sort(function(i,a){return i.level-a.level}),this},ee.prototype.unuse=function(e){var n=e.stack,t=e.name,r=e.create;return n&amp;&amp;this._middlewares[n]&amp;&amp;(this._middlewares[n]=this._middlewares[n].filter(function(o){return r?o.create!==r:!!t&amp;&amp;o.name!==t})),this},ee.prototype.open=function(){var e=this;return Be(xe,function(){return To(e)})},ee.prototype._close=function(){var e=this._state,n=Je.indexOf(this);if(0&lt;=n&amp;&amp;Je.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new K(function(t){e.dbReadyResolve=t}),e.openCanceller=new K(function(t,r){e.cancelOpen=r}))},ee.prototype.close=function(t){var n=(t===void 0?{disableAutoOpen:!0}:t).disableAutoOpen,t=this._state;n?(t.isBeingOpened&amp;&amp;t.cancelOpen(new D.DatabaseClosed),this._close(),t.autoOpen=!1,t.dbOpenError=new D.DatabaseClosed):(this._close(),t.autoOpen=this._options.autoOpen||t.isBeingOpened,t.openComplete=!1,t.dbOpenError=null)},ee.prototype.delete=function(e){var n=this;e===void 0&amp;&amp;(e={disableAutoOpen:!0});var t=0&lt;arguments.length&amp;&amp;typeof arguments[0]!=&quot;object&quot;,r=this._state;return new K(function(o,i){function a(){n.close(e);var u=n._deps.indexedDB.deleteDatabase(n.name);u.onsuccess=J(function(){var c,f,p;c=n._deps,f=n.name,p=c.indexedDB,c=c.IDBKeyRange,jt(p)||f===Mn||At(p,c).delete(f).catch(G),o()}),u.onerror=pe(i),u.onblocked=n._fireOnBlocked}if(t)throw new D.InvalidArgument(&quot;Invalid closeOptions argument to db.delete()&quot;);r.isBeingOpened?r.dbReadyPromise.then(a):a()})},ee.prototype.backendDB=function(){return this.idbdb},ee.prototype.isOpen=function(){return this.idbdb!==null},ee.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&amp;&amp;e.name===&quot;DatabaseClosed&quot;},ee.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ee.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ee.prototype,&quot;tables&quot;,{get:function(){var e=this;return U(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),ee.prototype.transaction=function(){var e=(function(n,t,r){var o=arguments.length;if(o&lt;2)throw new D.InvalidArgument(&quot;Too few arguments&quot;);for(var i=new Array(o-1);--o;)i[o-1]=arguments[o];return r=i.pop(),[n,rr(i),r]}).apply(this,arguments);return this._transaction.apply(this,e)},ee.prototype._transaction=function(e,n,t){var r=this,o=T.trans;o&amp;&amp;o.db===this&amp;&amp;e.indexOf(&quot;!&quot;)===-1||(o=null);var i,a,u=e.indexOf(&quot;?&quot;)!==-1;e=e.replace(&quot;!&quot;,&quot;&quot;).replace(&quot;?&quot;,&quot;&quot;);try{if(a=n.map(function(f){if(f=f instanceof r.Table?f.name:f,typeof f!=&quot;string&quot;)throw new TypeError(&quot;Invalid table argument to Dexie.transaction(). Only Table or String are allowed&quot;);return f}),e==&quot;r&quot;||e===gt)i=gt;else{if(e!=&quot;rw&quot;&amp;&amp;e!=bt)throw new D.InvalidArgument(&quot;Invalid transaction mode: &quot;+e);i=bt}if(o){if(o.mode===gt&amp;&amp;i===bt){if(!u)throw new D.SubTransaction(&quot;Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY&quot;);o=null}o&amp;&amp;a.forEach(function(f){if(o&amp;&amp;o.storeNames.indexOf(f)===-1){if(!u)throw new D.SubTransaction(&quot;Table &quot;+f+&quot; not included in parent transaction.&quot;);o=null}}),u&amp;&amp;o&amp;&amp;!o.active&amp;&amp;(o=null)}}catch(f){return o?o._promise(null,function(p,s){s(f)}):Z(f)}var c=(function f(p,s,m,l,d){return K.resolve().then(function(){var y=T.transless||T,h=p._createTransaction(s,m,p._dbSchema,l);if(h.explicit=!0,y={trans:h,transless:y},l)h.idbtrans=l.idbtrans;else try{h.create(),h.idbtrans._explicit=!0,p._state.PR1398_maxLoop=3}catch(b){return b.name===st.InvalidState&amp;&amp;p.isOpen()&amp;&amp;0&lt;--p._state.PR1398_maxLoop?(console.warn(&quot;Dexie: Need to reopen db&quot;),p.close({disableAutoOpen:!1}),p.open().then(function(){return f(p,s,m,null,d)})):Z(b)}var v,g=ut(d);return g&amp;&amp;Xe(),y=K.follow(function(){var b;(v=d.call(h,h))&amp;&amp;(g?(b=Oe.bind(null,null),v.then(b,b)):typeof v.next==&quot;function&quot;&amp;&amp;typeof v.throw==&quot;function&quot;&amp;&amp;(v=Bt(v)))},y),(v&amp;&amp;typeof v.then==&quot;function&quot;?K.resolve(v).then(function(b){return h.active?b:Z(new D.PrematureCommit(&quot;Transaction committed too early. See http://bit.ly/2kdckMn&quot;))}):y.then(function(){return v})).then(function(b){return l&amp;&amp;h._resolve(),h._completion.then(function(){return b})}).catch(function(b){return h._reject(b),Z(b)})})}).bind(null,this,i,a,o,t);return o?o._promise(i,c,&quot;lock&quot;):T.trans?Be(T.transless,function(){return r._whenReady(c)}):this._whenReady(c)},ee.prototype.table=function(e){if(!V(this._allTables,e))throw new D.InvalidTable(&quot;Table &quot;.concat(e,&quot; does not exist&quot;));return this._allTables[e]},ee);function ee(e,n){var t=this;this._middlewares={},this.verno=0;var r=ee.dependencies;this._options=n=C({addons:ee.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:&quot;cloned&quot;},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},r=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,i,a,u,c,f={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:G,dbReadyPromise:null,cancelOpen:G,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};f.dbReadyPromise=new K(function(s){f.dbReadyResolve=s}),f.openCanceller=new K(function(s,m){f.cancelOpen=m}),this._state=f,this.name=e,this.on=ln(this,&quot;populate&quot;,&quot;blocked&quot;,&quot;versionchange&quot;,&quot;close&quot;,{ready:[ct,G]}),this.on.ready.subscribe=er(this.on.ready.subscribe,function(s){return function(m,l){ee.vip(function(){var d,y=t._state;y.openComplete?(y.dbOpenError||K.resolve().then(m),l&amp;&amp;s(m)):y.onReadyBeingFired?(y.onReadyBeingFired.push(m),l&amp;&amp;s(m)):(s(m),d=t,l||s(function h(){d.on.ready.unsubscribe(m),d.on.ready.unsubscribe(h)}))})}}),this.Collection=(o=this,fn(_o.prototype,function(v,h){this.db=o;var l=pr,d=null;if(h)try{l=h()}catch(g){d=g}var y=v._ctx,h=y.table,v=h.hook.reading.fire;this._ctx={table:h,index:y.index,isPrimKey:!y.index||h.schema.primKey.keyPath&amp;&amp;y.index===h.schema.primKey.name,range:l,keysOnly:!1,dir:&quot;next&quot;,unique:&quot;&quot;,algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:y.or,valueMapper:v!==on?v:null}})),this.Table=(i=this,fn(gr.prototype,function(s,m,l){this.db=i,this._tx=l,this.name=s,this.schema=m,this.hook=i._allTables[s]?i._allTables[s].hook:ln(null,{creating:[fo,G],reading:[lo,on],updating:[po,G],deleting:[ho,G]})})),this.Transaction=(a=this,fn(Oo.prototype,function(s,m,l,d,y){var h=this;this.db=a,this.mode=s,this.storeNames=m,this.schema=l,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=ln(this,&quot;complete&quot;,&quot;error&quot;,&quot;abort&quot;),this.parent=y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new K(function(v,g){h._resolve=v,h._reject=g}),this._completion.then(function(){h.active=!1,h.on.complete.fire()},function(v){var g=h.active;return h.active=!1,h.on.error.fire(v),h.parent?h.parent._reject(v):g&amp;&amp;h.idbtrans&amp;&amp;h.idbtrans.abort(),Z(v)})})),this.Version=(u=this,fn(jo.prototype,function(s){this.db=u,this._cfg={version:s,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,fn(kr.prototype,function(s,m,l){if(this.db=c,this._ctx={table:s,index:m===&quot;:id&quot;?null:m,or:l},this._cmp=this._ascending=z,this._descending=function(d,y){return z(y,d)},this._max=function(d,y){return 0&lt;z(d,y)?d:y},this._min=function(d,y){return z(d,y)&lt;0?d:y},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new D.MissingAPI})),this.on(&quot;versionchange&quot;,function(s){0&lt;s.newVersion?console.warn(&quot;Another connection wants to upgrade database \&#x27;&quot;.concat(t.name,&quot;\&#x27;. Closing db now to resume the upgrade.&quot;)):console.warn(&quot;Another connection wants to delete database \&#x27;&quot;.concat(t.name,&quot;\&#x27;. Closing db now to resume the delete request.&quot;)),t.close({disableAutoOpen:!1})}),this.on(&quot;blocked&quot;,function(s){!s.newVersion||s.newVersion&lt;s.oldVersion?console.warn(&quot;Dexie.delete(\&#x27;&quot;.concat(t.name,&quot;\&#x27;) was blocked&quot;)):console.warn(&quot;Upgrade \&#x27;&quot;.concat(t.name,&quot;\&#x27; blocked by other connection holding version &quot;).concat(s.oldVersion/10))}),this._maxKey=yn(n.IDBKeyRange),this._createTransaction=function(s,m,l,d){return new t.Transaction(s,m,l,t._options.chromeTransactionDurability,d)},this._fireOnBlocked=function(s){t.on(&quot;blocked&quot;).fire(s),Je.filter(function(m){return m.name===t.name&amp;&amp;m!==t&amp;&amp;!m._state.vcFired}).map(function(m){return m.on(&quot;versionchange&quot;).fire(s)})},this.use(Io),this.use(No),this.use(qo),this.use(Do),this.use(Ro);var p=new Proxy(this,{get:function(s,m,l){if(m===&quot;_vip&quot;)return!0;if(m===&quot;table&quot;)return function(y){return Jn(t.table(y),p)};var d=Reflect.get(s,m,l);return d instanceof gr?Jn(d,p):m===&quot;tables&quot;?d.map(function(y){return Jn(y,p)}):m===&quot;_createTransaction&quot;?function(){return Jn(d.apply(this,arguments),p)}:d}});this.vip=p,r.forEach(function(s){return s(t)})}var Zn,fe=typeof Symbol&lt;&quot;u&quot;&amp;&amp;&quot;observable&quot;in Symbol?Symbol.observable:&quot;@@observable&quot;,Fo=(Ut.prototype.subscribe=function(e,n,t){return this._subscribe(e&amp;&amp;typeof e!=&quot;function&quot;?e:{next:e,error:n,complete:t})},Ut.prototype[fe]=function(){return this},Ut);function Ut(e){this._subscribe=e}try{Zn={indexedDB:B.indexedDB||B.mozIndexedDB||B.webkitIndexedDB||B.msIndexedDB,IDBKeyRange:B.IDBKeyRange||B.webkitIDBKeyRange}}catch{Zn={indexedDB:null,IDBKeyRange:null}}function Br(e){var n,t=!1,r=new Fo(function(o){var i=ut(e),a,u=!1,c={},f={},p={get closed(){return u},unsubscribe:function(){u||(u=!0,a&amp;&amp;a.abort(),s&amp;&amp;Se.storagemutated.unsubscribe(l))}};o.start&amp;&amp;o.start(p);var s=!1,m=function(){return vt(d)},l=function(y){Gn(c,y),Rt(f,c)&amp;&amp;m()},d=function(){var y,h,v;!u&amp;&amp;Zn.indexedDB&amp;&amp;(c={},y={},a&amp;&amp;a.abort(),a=new AbortController,v=function(g){var b=Ge();try{i&amp;&amp;Xe();var w=ke(e,g);return w=i?w.finally(Oe):w}finally{b&amp;&amp;Qe()}}(h={subscr:y,signal:a.signal,requery:m,querier:e,trans:null}),Promise.resolve(v).then(function(g){t=!0,n=g,u||h.signal.aborted||(c={},function(b){for(var w in b)if(V(b,w))return;return 1}(f=y)||s||(Se(pn,l),s=!0),vt(function(){return!u&amp;&amp;o.next&amp;&amp;o.next(g)}))},function(g){t=!1,[&quot;DatabaseClosedError&quot;,&quot;AbortError&quot;].includes(g==null?void 0:g.name)||u||vt(function(){u||o.error&amp;&amp;o.error(g)})}))};return setTimeout(m,0),p});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var Ue=_e;function Vt(e){var n=Ke;try{Ke=!0,Se.storagemutated.fire(e),Mt(e,!0)}finally{Ke=n}}$(Ue,C(C({},Kn),{delete:function(e){return new Ue(e,{addons:[]}).delete()},exists:function(e){return new Ue(e,{addons:[]}).open().then(function(n){return n.close(),!0}).catch(&quot;NoSuchDatabaseError&quot;,function(){return!1})},getDatabaseNames:function(e){try{return n=Ue.dependencies,t=n.indexedDB,n=n.IDBKeyRange,(jt(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(o){return o.name}).filter(function(o){return o!==Mn})}):At(t,n).toCollection().primaryKeys()).then(e)}catch{return Z(new D.MissingAPI)}var n,t},defineClass:function(){return function(e){W(this,e)}},ignoreTransaction:function(e){return T.trans?Be(T.transless,e):e()},vip:Tt,async:function(e){return function(){try{var n=Bt(e.apply(this,arguments));return n&amp;&amp;typeof n.then==&quot;function&quot;?n:K.resolve(n)}catch(t){return Z(t)}}},spawn:function(e,n,t){try{var r=Bt(e.apply(t,n||[]));return r&amp;&amp;typeof r.then==&quot;function&quot;?r:K.resolve(r)}catch(o){return Z(o)}},currentTransaction:{get:function(){return T.trans||null}},waitFor:function(e,n){return n=K.resolve(typeof e==&quot;function&quot;?Ue.ignoreTransaction(e):e).timeout(n||6e4),T.trans?T.trans.waitFor(n):n},Promise:K,debug:{get:function(){return de},set:function(e){ur(e)}},derive:We,extend:W,props:$,override:er,Events:ln,on:Se,liveQuery:Br,extendObservabilitySet:Gn,getByKeyPath:ge,setByKeyPath:se,delByKeyPath:function(e,n){typeof n==&quot;string&quot;?se(e,n,void 0):&quot;length&quot;in n&amp;&amp;[].map.call(n,function(t){se(e,t,void 0)})},shallowClone:tr,deepClone:je,getObjectDiff:Nt,cmp:z,asap:nr,minKey:-1/0,addons:[],connections:Je,errnames:st,dependencies:Zn,cache:Le,semVer:&quot;4.0.11&quot;,version:&quot;4.0.11&quot;.split(&quot;.&quot;).map(function(e){return parseInt(e)}).reduce(function(e,n,t){return e+n/Math.pow(10,2*t)})})),Ue.maxKey=yn(Ue.dependencies.IDBKeyRange),typeof dispatchEvent&lt;&quot;u&quot;&amp;&amp;typeof addEventListener&lt;&quot;u&quot;&amp;&amp;(Se(pn,function(e){Ke||(e=new CustomEvent(kt,{detail:e}),Ke=!0,dispatchEvent(e),Ke=!1)}),addEventListener(kt,function(e){e=e.detail,Ke||Vt(e)}));var nn,Ke=!1,Nr=function(){};return typeof BroadcastChannel&lt;&quot;u&quot;&amp;&amp;((Nr=function(){(nn=new BroadcastChannel(kt)).onmessage=function(e){return e.data&amp;&amp;Vt(e.data)}})(),typeof nn.unref==&quot;function&quot;&amp;&amp;nn.unref(),Se(pn,function(e){Ke||nn.postMessage(e)})),typeof addEventListener&lt;&quot;u&quot;&amp;&amp;(addEventListener(&quot;pagehide&quot;,function(e){if(!_e.disableBfCache&amp;&amp;e.persisted){de&amp;&amp;console.debug(&quot;Dexie: handling persisted pagehide&quot;),nn!=null&amp;&amp;nn.close();for(var n=0,t=Je;n&lt;t.length;n++)t[n].close({disableAutoOpen:!1})}}),addEventListener(&quot;pageshow&quot;,function(e){!_e.disableBfCache&amp;&amp;e.persisted&amp;&amp;(de&amp;&amp;console.debug(&quot;Dexie: handling persisted pageshow&quot;),Nr(),Vt({all:new re(-1/0,[[]])}))})),K.rejectionMapper=function(e,n){return!e||e instanceof Ye||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ar[e.name]?e:(n=new ar[e.name](n||e.message,e),&quot;stack&quot;in e&amp;&amp;he(n,&quot;stack&quot;,{get:function(){return this.inner.stack}}),n)},ur(de),C(_e,Object.freeze({__proto__:null,Dexie:_e,liveQuery:Br,Entity:yr,cmp:z,PropModification:hn,replacePrefix:function(e,n){return new hn({replacePrefix:[e,n]})},add:function(e){return new hn({add:e})},remove:function(e){return new hn({remove:e})},default:_e,RangeSet:re,mergeRanges:gn,rangesOverlap:Kr}),{default:_e}),_e})}(ve)),ve.exports}var Ur=Lr(),nt=me(Ur);const $t=Symbol.for(&quot;Dexie&quot;),wn=globalThis[$t]||(globalThis[$t]=nt);if(nt.semVer!==wn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${nt.semVer} and ${wn.semVer}`);const{liveQuery:Vo,mergeRanges:zo,rangesOverlap:Wo,RangeSet:$o,cmp:Yo,Entity:Ho,PropModification:Go,replacePrefix:Qo,add:Xo,remove:Jo}=wn;/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */const Yt=Symbol(&quot;Comlink.proxy&quot;),Vr=Symbol(&quot;Comlink.endpoint&quot;),zr=Symbol(&quot;Comlink.releaseProxy&quot;),tt=Symbol(&quot;Comlink.finalizer&quot;),_n=Symbol(&quot;Comlink.thrown&quot;),Ht=_=&gt;typeof _==&quot;object&quot;&amp;&amp;_!==null||typeof _==&quot;function&quot;,Wr={canHandle:_=&gt;Ht(_)&amp;&amp;_[Yt],serialize(_){const{port1:j,port2:R}=new MessageChannel;return rt(_,j),[R,[R]]},deserialize(_){return _.start(),Gr(_)}},$r={canHandle:_=&gt;Ht(_)&amp;&amp;_n in _,serialize({value:_}){let j;return _ instanceof Error?j={isError:!0,value:{message:_.message,name:_.name,stack:_.stack}}:j={isError:!1,value:_},[j,[]]},deserialize(_){throw _.isError?Object.assign(new Error(_.value.message),_.value):_.value}},Gt=new Map([[&quot;proxy&quot;,Wr],[&quot;throw&quot;,$r]]);function Yr(_,j){for(const R of _)if(j===R||R===&quot;*&quot;||R instanceof RegExp&amp;&amp;R.test(j))return!0;return!1}function rt(_,j=globalThis,R=[&quot;*&quot;]){j.addEventListener(&quot;message&quot;,function C(L){if(!L||!L.data)return;if(!Yr(R,L.origin)){console.warn(`Invalid origin \&#x27;${L.origin}\&#x27; for comlink proxy`);return}const{id:B,type:U,path:q}=Object.assign({path:[]},L.data),W=(L.data.argumentList||[]).map(Ae);let H;try{const Q=q.slice(0,-1).reduce(($,ue)=&gt;$[ue],_),V=q.reduce(($,ue)=&gt;$[ue],_);switch(U){case&quot;GET&quot;:H=V;break;case&quot;SET&quot;:Q[q.slice(-1)[0]]=Ae(L.data.value),H=!0;break;case&quot;APPLY&quot;:H=V.apply(Q,W);break;case&quot;CONSTRUCT&quot;:{const $=new V(...W);H=eo($)}break;case&quot;ENDPOINT&quot;:{const{port1:$,port2:ue}=new MessageChannel;rt(_,ue),H=Zr($,[$])}break;case&quot;RELEASE&quot;:H=void 0;break;default:return}}catch(Q){H={value:Q,[_n]:0}}Promise.resolve(H).catch(Q=&gt;({value:Q,[_n]:0})).then(Q=&gt;{const[V,$]=Pn(Q);j.postMessage(Object.assign(Object.assign({},V),{id:B}),$),U===&quot;RELEASE&quot;&amp;&amp;(j.removeEventListener(&quot;message&quot;,C),Qt(j),tt in _&amp;&amp;typeof _[tt]==&quot;function&quot;&amp;&amp;_[tt]())}).catch(Q=&gt;{const[V,$]=Pn({value:new TypeError(&quot;Unserializable return value&quot;),[_n]:0});j.postMessage(Object.assign(Object.assign({},V),{id:B}),$)})}),j.start&amp;&amp;j.start()}function Hr(_){return _.constructor.name===&quot;MessagePort&quot;}function Qt(_){Hr(_)&amp;&amp;_.close()}function Gr(_,j){const R=new Map;return _.addEventListener(&quot;message&quot;,function(L){const{data:B}=L;if(!B||!B.id)return;const U=R.get(B.id);if(U)try{U(B)}finally{R.delete(B.id)}}),ot(_,R,[],j)}function xn(_){if(_)throw new Error(&quot;Proxy has been released and is not useable&quot;)}function Xt(_){return ze(_,new Map,{type:&quot;RELEASE&quot;}).then(()=&gt;{Qt(_)})}const kn=new WeakMap,On=&quot;FinalizationRegistry&quot;in globalThis&amp;&amp;new FinalizationRegistry(_=&gt;{const j=(kn.get(_)||0)-1;kn.set(_,j),j===0&amp;&amp;Xt(_)});function Qr(_,j){const R=(kn.get(j)||0)+1;kn.set(j,R),On&amp;&amp;On.register(_,j,_)}function Xr(_){On&amp;&amp;On.unregister(_)}function ot(_,j,R=[],C=function(){}){let L=!1;const B=new Proxy(C,{get(U,q){if(xn(L),q===zr)return()=&gt;{Xr(B),Xt(_),j.clear(),L=!0};if(q===&quot;then&quot;){if(R.length===0)return{then:()=&gt;B};const W=ze(_,j,{type:&quot;GET&quot;,path:R.map(H=&gt;H.toString())}).then(Ae);return W.then.bind(W)}return ot(_,j,[...R,q])},set(U,q,W){xn(L);const[H,Q]=Pn(W);return ze(_,j,{type:&quot;SET&quot;,path:[...R,q].map(V=&gt;V.toString()),value:H},Q).then(Ae)},apply(U,q,W){xn(L);const H=R[R.length-1];if(H===Vr)return ze(_,j,{type:&quot;ENDPOINT&quot;}).then(Ae);if(H===&quot;bind&quot;)return ot(_,j,R.slice(0,-1));const[Q,V]=Jt(W);return ze(_,j,{type:&quot;APPLY&quot;,path:R.map($=&gt;$.toString()),argumentList:Q},V).then(Ae)},construct(U,q){xn(L);const[W,H]=Jt(q);return ze(_,j,{type:&quot;CONSTRUCT&quot;,path:R.map(Q=&gt;Q.toString()),argumentList:W},H).then(Ae)}});return Qr(B,_),B}function Jr(_){return Array.prototype.concat.apply([],_)}function Jt(_){const j=_.map(Pn);return[j.map(R=&gt;R[0]),Jr(j.map(R=&gt;R[1]))]}const Zt=new WeakMap;function Zr(_,j){return Zt.set(_,j),_}function eo(_){return Object.assign(_,{[Yt]:!0})}function Pn(_){for(const[j,R]of Gt)if(R.canHandle(_)){const[C,L]=R.serialize(_);return[{type:&quot;HANDLER&quot;,name:j,value:C},L]}return[{type:&quot;RAW&quot;,value:_},Zt.get(_)||[]]}function Ae(_){switch(_.type){case&quot;HANDLER&quot;:return Gt.get(_.name).deserialize(_.value);case&quot;RAW&quot;:return _.value}}function ze(_,j,R,C){return new Promise(L=&gt;{const B=no();j.set(B,L),_.start&amp;&amp;_.start(),_.postMessage(Object.assign({id:B},R),C)})}function no(){return new Array(4).fill(0).map(()=&gt;Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join(&quot;-&quot;)}class to{constructor(){bn(this,&quot;db&quot;);bn(this,&quot;models&quot;);bn(this,&quot;memoryCacheDrawRange&quot;,new Map);bn(this,&quot;memoryCacheHierarchy&quot;,new Map);this.db=new wn(&quot;ModelCacheDB&quot;),this.db.version(1).stores({models:&quot;&amp;key&quot;}),this.models=this.db.table(&quot;models&quot;)}async add(j,R,C){await this.models.put({key:j,hierarchy:R,drawRanges:C}),this.memoryCacheDrawRange.set(j,C),this.memoryCacheHierarchy.set(j,R)}async get(j){return this.models.get(j)}async remove(j){await this.models.delete(j)}async listKeys(){return this.models.toCollection().primaryKeys()}async getDrawRange(j,R,C){const L=this.memoryCacheDrawRange.get(j);if(!L)return console.error(&quot;ModelWorkerAPI: No drawRanges found for key:&quot;,j),null;const B=L[R];if(!B)return null;const U=C*3;for(const[q,[W,H]]of Object.entries(B))if(U&gt;=W&amp;&amp;U&lt;W+H)return[q,W,H];return null}async getNameFromRangeId(j,R){const C=this.memoryCacheHierarchy.get(j);if(!C)return console.error(&quot;ModelWorkerAPI: No hierarchy found for key:&quot;,j),null;const L=C[R];return L?L[0]:null}buildElementToMeshMap(j){const R=this.memoryCacheDrawRange.get(j)??{},C=new Map;for(const[L,B]of Object.entries(R))for(const U of Object.keys(B))C.set(U,L);return C}buildHierarchy(j,R,C){const L={},B=this.buildElementToMeshMap(j);let U=C+1,q=new Map;for(const[Q,[V]]of Object.entries(R)){const $=String(U);L[$]={id:$,name:V,children:[],rangeId:Q,model_key:j,node_name:B.get(Q)??null},q.set(Q,$),U++}let W=null;for(const[Q,[,V]]of Object.entries(R)){const $=q.get(Q);if(!$){console.warn(`ModelWorkerAPI: No string_id found for ${Q} (${V})`);continue}if(V===&quot;*&quot;||V===null)W=L[$];else{let ue=q.get(V);if(!ue){console.warn(`ModelWorkerAPI: No parent found for ${$} (${V})`);continue}const he=L[ue];he&amp;&amp;he.children.push(L[$])}}const H=Q=&gt;{Q.children.sort((V,$)=&gt;{try{return V.name.localeCompare($.name,void 0,{numeric:!0,sensitivity:&quot;base&quot;})}catch(ue){if(ue instanceof TypeError)return 0;throw ue}}),Q.children.forEach(H)};return W&amp;&amp;H(W),W}}rt(new to)})();\n&#x27;,rR=typeof self&lt;&quot;u&quot;&amp;&amp;self.Blob&amp;&amp;new Blob([vI],{type:&quot;text/javascript;charset=utf-8&quot;});function X6(n){let e;try{if(e=rR&amp;&amp;(self.URL||self.webkitURL).createObjectURL(rR),!e)throw&quot;&quot;;const t=new Worker(e,{name:n==null?void 0:n.name});return t.addEventListener(&quot;error&quot;,()=&gt;{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker(&quot;data:text/javascript;charset=utf-8,&quot;+encodeURIComponent(vI),{name:n==null?void 0:n.name})}finally{e&amp;&amp;(self.URL||self.webkitURL).revokeObjectURL(e)}}const q6=new X6,L0=gI(q6),Oc=Eo(n=&gt;({treeData:null,tree:null,searchTerm:&quot;&quot;,max_id:0,setSearchTerm:e=&gt;n({searchTerm:e}),setTree:e=&gt;n({tree:e}),setTreeData:e=&gt;n({treeData:e}),clearTreeData:()=&gt;n({treeData:null}),isTreeCollapsed:!0,setIsTreeCollapsed:e=&gt;n({isTreeCollapsed:e}),setMaxId:e=&gt;n({max_id:e})}));async function Y6(n,e){var o;const t=Oc.getState(),i=e.id_hierarchy??{},r={};for(const l of Object.keys(e).filter(u=&gt;u.startsWith(&quot;draw_ranges_node&quot;))){const u=l.slice(16);r[`node${u}`]=e[l]}try{await L0.add(n,i,r)}catch(l){console.error(&quot;Failed to cache model metadata&quot;,l)}let s;try{s=await L0.buildHierarchy(n,i,t.max_id+1)}catch(l){console.error(&quot;Failed to build tree hierarchy&quot;,l);return}if(s){if(t.treeData&amp;&amp;t.treeData.children.length&gt;0){let u=(o=t.treeData)==null?void 0:o.children.find(h=&gt;h.name===&quot;root&quot;);u?u.children=[...u.children,s]:u={id:(t.max_id+1).toString(),name:&quot;root&quot;,children:[s,t.treeData],model_key:n,node_name:null},t.setTreeData(u)}else t.setTreeData(s);const l=await bI(s);t.setMaxId(l+1)}}async function bI(n,e=0){if(n.children.length===0)return Math.max(Number(n.id),e);for(const t of n.children)e=await bI(t,e);return e}function K6(n){var s;const e=(s=n.parser)==null?void 0:s.json;if(!e)throw new Error(&quot;Raw glTF JSON not available on parser.json&quot;);const t=e.animations,i=e.nodes,r=new Map;return t.forEach((o,l)=&gt;{const u=o.name||`animation_${l}`,h=[];o.channels.forEach(f=&gt;{const p=f.target.node,m=i[p],g=(m==null?void 0:m.name)||`node_${p}`;h.includes(g)||h.push(g)}),r.set(u,h)}),r}class $6 extends Ji{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new tj(t)}),this.register(function(t){return new nj(t)}),this.register(function(t){return new hj(t)}),this.register(function(t){return new fj(t)}),this.register(function(t){return new dj(t)}),this.register(function(t){return new rj(t)}),this.register(function(t){return new sj(t)}),this.register(function(t){return new oj(t)}),this.register(function(t){return new aj(t)}),this.register(function(t){return new ej(t)}),this.register(function(t){return new lj(t)}),this.register(function(t){return new ij(t)}),this.register(function(t){return new uj(t)}),this.register(function(t){return new cj(t)}),this.register(function(t){return new J6(t)}),this.register(function(t){return new pj(t)}),this.register(function(t){return new mj(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!==&quot;&quot;)o=this.resourcePath;else if(this.path!==&quot;&quot;){const h=vo.extractUrlBase(e);o=vo.resolveURL(h,this.path)}else o=vo.extractUrlBase(e);this.manager.itemStart(e);const l=function(h){r?r(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},u=new ns(this.manager);u.setPath(this.path),u.setResponseType(&quot;arraybuffer&quot;),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{s.parse(h,o,function(f){t(f),s.manager.itemEnd(e)},l)}catch(f){l(f)}},i,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&amp;&amp;this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&amp;&amp;this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},l={},u=new TextDecoder;if(typeof e==&quot;string&quot;)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(u.decode(new Uint8Array(e,0,4))===xI){try{o[cn.KHR_BINARY_GLTF]=new gj(e)}catch(p){r&amp;&amp;r(p);return}s=JSON.parse(o[cn.KHR_BINARY_GLTF].content)}else s=JSON.parse(u.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]&lt;2){r&amp;&amp;r(new Error(&quot;THREE.GLTFLoader: Unsupported asset. glTF versions &gt;=2.0 are supported.&quot;));return}const h=new Rj(s,{path:t||this.resourcePath||&quot;&quot;,crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f&lt;this.pluginCallbacks.length;f++){const p=this.pluginCallbacks[f](h);p.name||console.error(&quot;THREE.GLTFLoader: Invalid plugin found: missing name&quot;),l[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(let f=0;f&lt;s.extensionsUsed.length;++f){const p=s.extensionsUsed[f],m=s.extensionsRequired||[];switch(p){case cn.KHR_MATERIALS_UNLIT:o[p]=new Q6;break;case cn.KHR_DRACO_MESH_COMPRESSION:o[p]=new yj(s,this.dracoLoader);break;case cn.KHR_TEXTURE_TRANSFORM:o[p]=new _j;break;case cn.KHR_MESH_QUANTIZATION:o[p]=new vj;break;default:m.indexOf(p)&gt;=0&amp;&amp;l[p]===void 0&amp;&amp;console.warn(&#x27;THREE.GLTFLoader: Unknown extension &quot;&#x27;+p+&#x27;&quot;.&#x27;)}}h.setExtensions(o),h.setPlugins(l),h.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Z6(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const cn={KHR_BINARY_GLTF:&quot;KHR_binary_glTF&quot;,KHR_DRACO_MESH_COMPRESSION:&quot;KHR_draco_mesh_compression&quot;,KHR_LIGHTS_PUNCTUAL:&quot;KHR_lights_punctual&quot;,KHR_MATERIALS_CLEARCOAT:&quot;KHR_materials_clearcoat&quot;,KHR_MATERIALS_DISPERSION:&quot;KHR_materials_dispersion&quot;,KHR_MATERIALS_IOR:&quot;KHR_materials_ior&quot;,KHR_MATERIALS_SHEEN:&quot;KHR_materials_sheen&quot;,KHR_MATERIALS_SPECULAR:&quot;KHR_materials_specular&quot;,KHR_MATERIALS_TRANSMISSION:&quot;KHR_materials_transmission&quot;,KHR_MATERIALS_IRIDESCENCE:&quot;KHR_materials_iridescence&quot;,KHR_MATERIALS_ANISOTROPY:&quot;KHR_materials_anisotropy&quot;,KHR_MATERIALS_UNLIT:&quot;KHR_materials_unlit&quot;,KHR_MATERIALS_VOLUME:&quot;KHR_materials_volume&quot;,KHR_TEXTURE_BASISU:&quot;KHR_texture_basisu&quot;,KHR_TEXTURE_TRANSFORM:&quot;KHR_texture_transform&quot;,KHR_MESH_QUANTIZATION:&quot;KHR_mesh_quantization&quot;,KHR_MATERIALS_EMISSIVE_STRENGTH:&quot;KHR_materials_emissive_strength&quot;,EXT_MATERIALS_BUMP:&quot;EXT_materials_bump&quot;,EXT_TEXTURE_WEBP:&quot;EXT_texture_webp&quot;,EXT_TEXTURE_AVIF:&quot;EXT_texture_avif&quot;,EXT_MESHOPT_COMPRESSION:&quot;EXT_meshopt_compression&quot;,EXT_MESH_GPU_INSTANCING:&quot;EXT_mesh_gpu_instancing&quot;};class J6{constructor(e){this.parser=e,this.name=cn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i&lt;r;i++){const s=t[i];s.extensions&amp;&amp;s.extensions[this.name]&amp;&amp;s.extensions[this.name].light!==void 0&amp;&amp;e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i=&quot;light:&quot;+e;let r=t.cache.get(i);if(r)return r;const s=t.json,u=((s.extensions&amp;&amp;s.extensions[this.name]||{}).lights||[])[e];let h;const f=new $e(16777215);u.color!==void 0&amp;&amp;f.setRGB(u.color[0],u.color[1],u.color[2],fr);const p=u.range!==void 0?u.range:0;switch(u.type){case&quot;directional&quot;:h=new Zd(f),h.target.position.set(0,0,-1),h.add(h.target);break;case&quot;point&quot;:h=new ky(f),h.distance=p;break;case&quot;spot&quot;:h=new Uy(f),h.distance=p,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,h.angle=u.spot.outerConeAngle,h.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error(&quot;THREE.GLTFLoader: Unexpected light type: &quot;+u.type)}return h.position.set(0,0,0),Jo(h,u),u.intensity!==void 0&amp;&amp;(h.intensity=u.intensity),h.name=t.createUniqueName(u.name||&quot;light_&quot;+e),r=Promise.resolve(h),t.cache.add(i,r),r}getDependency(e,t){if(e===&quot;light&quot;)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],l=(s.extensions&amp;&amp;s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return i._getNodeRef(t.cache,l,u)})}}class Q6{constructor(){this.name=cn.KHR_MATERIALS_UNLIT}getMaterialType(){return $i}extendParams(e,t,i){const r=[];e.color=new $e(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],fr),e.opacity=o[3]}s.baseColorTexture!==void 0&amp;&amp;r.push(i.assignTexture(e,&quot;map&quot;,s.baseColorTexture,Nn))}return Promise.all(r)}}class ej{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&amp;&amp;(t.emissiveIntensity=s),Promise.resolve()}}class tj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&amp;&amp;(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;clearcoatMap&quot;,o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&amp;&amp;(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;clearcoatRoughnessMap&quot;,o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&amp;&amp;(s.push(i.assignTexture(t,&quot;clearcoatNormalMap&quot;,o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Oe(l,l)}return Promise.all(s)}}class nj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class ij{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&amp;&amp;(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;iridescenceMap&quot;,o.iridescenceTexture)),o.iridescenceIor!==void 0&amp;&amp;(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&amp;&amp;(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&amp;&amp;(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&amp;&amp;(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;iridescenceThicknessMap&quot;,o.iridescenceThicknessTexture)),Promise.all(s)}}class rj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new $e(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],fr)}return o.sheenRoughnessFactor!==void 0&amp;&amp;(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;sheenColorMap&quot;,o.sheenColorTexture,Nn)),o.sheenRoughnessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;sheenRoughnessMap&quot;,o.sheenRoughnessTexture)),Promise.all(s)}}class sj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&amp;&amp;(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;transmissionMap&quot;,o.transmissionTexture)),Promise.all(s)}}class oj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;thicknessMap&quot;,o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new $e().setRGB(l[0],l[1],l[2],fr),Promise.all(s)}}class aj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class lj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;specularIntensityMap&quot;,o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new $e().setRGB(l[0],l[1],l[2],fr),o.specularColorTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;specularColorMap&quot;,o.specularColorTexture,Nn)),Promise.all(s)}}class cj{constructor(e){this.parser=e,this.name=cn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;bumpMap&quot;,o.bumpTexture)),Promise.all(s)}}class uj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&amp;&amp;(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&amp;&amp;(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;anisotropyMap&quot;,o.anisotropyTexture)),Promise.all(s)}}class hj{constructor(e){this.parser=e,this.name=cn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&amp;&amp;i.extensionsRequired.indexOf(this.name)&gt;=0)throw new Error(&quot;THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures&quot;);return null}return t.loadTextureImage(e,s.source,o)}}class fj{constructor(e){this.parser=e,this.name=cn.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&amp;&amp;(u=h)}return i.loadTextureImage(e,o.source,u)}}class dj{constructor(e){this.parser=e,this.name=cn.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&amp;&amp;(u=h)}return i.loadTextureImage(e,o.source,u)}}class pj{constructor(e){this.name=cn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&amp;&amp;i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency(&quot;buffer&quot;,r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&amp;&amp;t.extensionsRequired.indexOf(this.name)&gt;=0)throw new Error(&quot;THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files&quot;);return null}return s.then(function(l){const u=r.byteOffset||0,h=r.byteLength||0,f=r.count,p=r.byteStride,m=new Uint8Array(l,u,h);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,p,m,r.mode,r.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(f*p);return o.decodeGltfBuffer(new Uint8Array(g),f,p,m,r.mode,r.filter),g})})}else return null}}class mj{constructor(e){this.name=cn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const h of r.primitives)if(h.mode!==vs.TRIANGLES&amp;&amp;h.mode!==vs.TRIANGLE_STRIP&amp;&amp;h.mode!==vs.TRIANGLE_FAN&amp;&amp;h.mode!==void 0)return null;const o=i.extensions[this.name].attributes,l=[],u={};for(const h in o)l.push(this.parser.getDependency(&quot;accessor&quot;,o[h]).then(f=&gt;(u[h]=f,u[h])));return l.length&lt;1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(h=&gt;{const f=h.pop(),p=f.isGroup?f.children:[f],m=h[0].count,g=[];for(const v of p){const x=new yt,b=new Y,_=new Si,T=new Y(1,1,1),w=new dw(v.geometry,v.material,m);for(let E=0;E&lt;m;E++)u.TRANSLATION&amp;&amp;b.fromBufferAttribute(u.TRANSLATION,E),u.ROTATION&amp;&amp;_.fromBufferAttribute(u.ROTATION,E),u.SCALE&amp;&amp;T.fromBufferAttribute(u.SCALE,E),w.setMatrixAt(E,x.compose(b,_,T));for(const E in u)if(E===&quot;_COLOR_0&quot;){const R=u[E];w.instanceColor=new Mc(R.array,R.itemSize,R.normalized)}else E!==&quot;TRANSLATION&quot;&amp;&amp;E!==&quot;ROTATION&quot;&amp;&amp;E!==&quot;SCALE&quot;&amp;&amp;v.geometry.setAttribute(E,u[E]);nn.prototype.copy.call(w,v),this.parser.assignFinalMaterial(w),g.push(w)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}}const xI=&quot;glTF&quot;,Ff=12,sR={JSON:1313821514,BIN:5130562};class gj{constructor(e){this.name=cn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ff),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==xI)throw new Error(&quot;THREE.GLTFLoader: Unsupported glTF-Binary header.&quot;);if(this.header.version&lt;2)throw new Error(&quot;THREE.GLTFLoader: Legacy binary file detected.&quot;);const r=this.header.length-Ff,s=new DataView(e,Ff);let o=0;for(;o&lt;r;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===sR.JSON){const h=new Uint8Array(e,Ff+o,l);this.content=i.decode(h)}else if(u===sR.BIN){const h=Ff+o;this.body=e.slice(h,h+l)}o+=l}if(this.content===null)throw new Error(&quot;THREE.GLTFLoader: JSON content not found.&quot;)}}class yj{constructor(e,t){if(!t)throw new Error(&quot;THREE.GLTFLoader: No DRACOLoader instance provided.&quot;);this.name=cn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},u={},h={};for(const f in o){const p=xS[f]||f.toLowerCase();l[p]=o[f]}for(const f in e.attributes){const p=xS[f]||f.toLowerCase();if(o[f]!==void 0){const m=i.accessors[e.attributes[f]],g=eh[m.componentType];h[p]=g.name,u[p]=m.normalized===!0}}return t.getDependency(&quot;bufferView&quot;,s).then(function(f){return new Promise(function(p,m){r.decodeDracoFile(f,function(g){for(const v in g.attributes){const x=g.attributes[v],b=u[v];b!==void 0&amp;&amp;(x.normalized=b)}p(g)},l,h,fr,m)})})}}class _j{constructor(){this.name=cn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&amp;&amp;t.offset===void 0&amp;&amp;t.rotation===void 0&amp;&amp;t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&amp;&amp;(e.channel=t.texCoord),t.offset!==void 0&amp;&amp;e.offset.fromArray(t.offset),t.rotation!==void 0&amp;&amp;(e.rotation=t.rotation),t.scale!==void 0&amp;&amp;e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class vj{constructor(){this.name=cn.KHR_MESH_QUANTIZATION}}class SI extends Rh{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=l*2,h=l*3,f=r-t,p=(i-t)/f,m=p*p,g=m*p,v=e*h,x=v-h,b=-2*g+3*m,_=g-m,T=1-b,w=_-m+p;for(let E=0;E!==l;E++){const R=o[x+E+l],N=o[x+E+u]*f,A=o[v+E+l],D=o[v+E]*f;s[E]=T*R+w*N+b*A+_*D}return s}}const bj=new Si;class xj extends SI{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return bj.fromArray(s).normalize().toArray(s),s}}const vs={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},eh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},oR={9728:xi,9729:fi,9984:ty,9985:Ju,9986:hc,9987:Zr},aR={33071:rr,33648:ih,10497:ws},ax={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xS={POSITION:&quot;position&quot;,NORMAL:&quot;normal&quot;,TANGENT:&quot;tangent&quot;,TEXCOORD_0:&quot;uv&quot;,TEXCOORD_1:&quot;uv1&quot;,TEXCOORD_2:&quot;uv2&quot;,TEXCOORD_3:&quot;uv3&quot;,COLOR_0:&quot;color&quot;,WEIGHTS_0:&quot;skinWeight&quot;,JOINTS_0:&quot;skinIndex&quot;},Ya={scale:&quot;scale&quot;,translation:&quot;position&quot;,rotation:&quot;quaternion&quot;,weights:&quot;morphTargetInfluences&quot;},Sj={CUBICSPLINE:void 0,LINEAR:ch,STEP:lh},lx={OPAQUE:&quot;OPAQUE&quot;,MASK:&quot;MASK&quot;,BLEND:&quot;BLEND&quot;};function wj(n){return n.DefaultMaterial===void 0&amp;&amp;(n.DefaultMaterial=new ts({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Qr})),n.DefaultMaterial}function ec(n,e,t){for(const i in t.extensions)n[i]===void 0&amp;&amp;(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Jo(n,e){e.extras!==void 0&amp;&amp;(typeof e.extras==&quot;object&quot;?Object.assign(n.userData,e.extras):console.warn(&quot;THREE.GLTFLoader: Ignoring primitive type .extras, &quot;+e.extras))}function Ej(n,e,t){let i=!1,r=!1,s=!1;for(let h=0,f=e.length;h&lt;f;h++){const p=e[h];if(p.POSITION!==void 0&amp;&amp;(i=!0),p.NORMAL!==void 0&amp;&amp;(r=!0),p.COLOR_0!==void 0&amp;&amp;(s=!0),i&amp;&amp;r&amp;&amp;s)break}if(!i&amp;&amp;!r&amp;&amp;!s)return Promise.resolve(n);const o=[],l=[],u=[];for(let h=0,f=e.length;h&lt;f;h++){const p=e[h];if(i){const m=p.POSITION!==void 0?t.getDependency(&quot;accessor&quot;,p.POSITION):n.attributes.position;o.push(m)}if(r){const m=p.NORMAL!==void 0?t.getDependency(&quot;accessor&quot;,p.NORMAL):n.attributes.normal;l.push(m)}if(s){const m=p.COLOR_0!==void 0?t.getDependency(&quot;accessor&quot;,p.COLOR_0):n.attributes.color;u.push(m)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(h){const f=h[0],p=h[1],m=h[2];return i&amp;&amp;(n.morphAttributes.position=f),r&amp;&amp;(n.morphAttributes.normal=p),s&amp;&amp;(n.morphAttributes.color=m),n.morphTargetsRelative=!0,n})}function Tj(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t&lt;i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&amp;&amp;Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i&lt;r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn(&quot;THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.&quot;)}}function Mj(n){let e;const t=n.extensions&amp;&amp;n.extensions[cn.KHR_DRACO_MESH_COMPRESSION];if(t?e=&quot;draco:&quot;+t.bufferView+&quot;:&quot;+t.indices+&quot;:&quot;+cx(t.attributes):e=n.indices+&quot;:&quot;+cx(n.attributes)+&quot;:&quot;+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i&lt;r;i++)e+=&quot;:&quot;+cx(n.targets[i]);return e}function cx(n){let e=&quot;&quot;;const t=Object.keys(n).sort();for(let i=0,r=t.length;i&lt;r;i++)e+=t[i]+&quot;:&quot;+n[t[i]]+&quot;;&quot;;return e}function SS(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error(&quot;THREE.GLTFLoader: Unsupported normalized accessor component type.&quot;)}}function Aj(n){return n.search(/\.jpe?g($|\?)/i)&gt;0||n.search(/^data\:image\/jpeg/)===0?&quot;image/jpeg&quot;:n.search(/\.webp($|\?)/i)&gt;0||n.search(/^data\:image\/webp/)===0?&quot;image/webp&quot;:n.search(/\.ktx2($|\?)/i)&gt;0||n.search(/^data\:image\/ktx2/)===0?&quot;image/ktx2&quot;:&quot;image/png&quot;}const Cj=new yt;class Rj{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Z6,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator&lt;&quot;u&quot;){const l=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(l)===!0;const u=l.match(/Version\/(\d+)/);r=i&amp;&amp;u?parseInt(u[1],10):-1,s=l.indexOf(&quot;Firefox&quot;)&gt;-1,o=s?l.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap&gt;&quot;u&quot;||i&amp;&amp;r&lt;17||s&amp;&amp;o&lt;98?this.textureLoader=new Ly(this.options.manager):this.textureLoader=new CN(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ns(this.options.manager),this.fileLoader.setResponseType(&quot;arraybuffer&quot;),this.options.crossOrigin===&quot;use-credentials&quot;&amp;&amp;this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&amp;&amp;o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&amp;&amp;o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies(&quot;scene&quot;),i.getDependencies(&quot;animation&quot;),i.getDependencies(&quot;camera&quot;)])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return ec(s,l,r),Jo(l,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&amp;&amp;u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r&lt;s;r++){const o=t[r].joints;for(let l=0,u=o.length;l&lt;u;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r&lt;s;r++){const o=e[r];o.mesh!==void 0&amp;&amp;(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&amp;&amp;(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&amp;&amp;this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&amp;&amp;(e.refs[t]===void 0&amp;&amp;(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]&lt;=1)return i;const r=i.clone(),s=(o,l)=&gt;{const u=this.associations.get(o);u!=null&amp;&amp;this.associations.set(l,u);for(const[h,f]of o.children.entries())s(f,l.children[h])};return s(i,r),r.name+=&quot;_instance_&quot;+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i&lt;t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r&lt;t.length;r++){const s=e(t[r]);s&amp;&amp;i.push(s)}return i}getDependency(e,t){const i=e+&quot;:&quot;+t;let r=this.cache.get(i);if(!r){switch(e){case&quot;scene&quot;:r=this.loadScene(t);break;case&quot;node&quot;:r=this._invokeOne(function(s){return s.loadNode&amp;&amp;s.loadNode(t)});break;case&quot;mesh&quot;:r=this._invokeOne(function(s){return s.loadMesh&amp;&amp;s.loadMesh(t)});break;case&quot;accessor&quot;:r=this.loadAccessor(t);break;case&quot;bufferView&quot;:r=this._invokeOne(function(s){return s.loadBufferView&amp;&amp;s.loadBufferView(t)});break;case&quot;buffer&quot;:r=this.loadBuffer(t);break;case&quot;material&quot;:r=this._invokeOne(function(s){return s.loadMaterial&amp;&amp;s.loadMaterial(t)});break;case&quot;texture&quot;:r=this._invokeOne(function(s){return s.loadTexture&amp;&amp;s.loadTexture(t)});break;case&quot;skin&quot;:r=this.loadSkin(t);break;case&quot;animation&quot;:r=this._invokeOne(function(s){return s.loadAnimation&amp;&amp;s.loadAnimation(t)});break;case&quot;camera&quot;:r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&amp;&amp;s.getDependency&amp;&amp;s.getDependency(e,t)}),!r)throw new Error(&quot;Unknown type: &quot;+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e===&quot;mesh&quot;?&quot;es&quot;:&quot;s&quot;)]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&amp;&amp;t.type!==&quot;arraybuffer&quot;)throw new Error(&quot;THREE.GLTFLoader: &quot;+t.type+&quot; buffer type is not supported.&quot;);if(t.uri===void 0&amp;&amp;e===0)return Promise.resolve(this.extensions[cn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(vo.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error(&#x27;THREE.GLTFLoader: Failed to load buffer &quot;&#x27;+t.uri+&#x27;&quot;.&#x27;))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency(&quot;buffer&quot;,t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&amp;&amp;r.sparse===void 0){const o=ax[r.type],l=eh[r.componentType],u=r.normalized===!0,h=new l(r.count*o);return Promise.resolve(new Jt(h,o,u))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency(&quot;bufferView&quot;,r.bufferView)):s.push(null),r.sparse!==void 0&amp;&amp;(s.push(this.getDependency(&quot;bufferView&quot;,r.sparse.indices.bufferView)),s.push(this.getDependency(&quot;bufferView&quot;,r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],u=ax[r.type],h=eh[r.componentType],f=h.BYTES_PER_ELEMENT,p=f*u,m=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let x,b;if(g&amp;&amp;g!==p){const _=Math.floor(m/g),T=&quot;InterleavedBuffer:&quot;+r.bufferView+&quot;:&quot;+r.componentType+&quot;:&quot;+_+&quot;:&quot;+r.count;let w=t.cache.get(T);w||(x=new h(l,_*g,r.count*g/f),w=new qd(x,g/f),t.cache.add(T,w)),b=new dl(w,u,m%g/f,v)}else l===null?x=new h(r.count*u):x=new h(l,m,r.count*u),b=new Jt(x,u,v);if(r.sparse!==void 0){const _=ax.SCALAR,T=eh[r.sparse.indices.componentType],w=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,R=new T(o[1],w,r.sparse.count*_),N=new h(o[2],E,r.sparse.count*u);l!==null&amp;&amp;(b=new Jt(b.array.slice(),b.itemSize,b.normalized)),b.normalized=!1;for(let A=0,D=R.length;A&lt;D;A++){const C=R[A];if(b.setX(C,N[A*u]),u&gt;=2&amp;&amp;b.setY(C,N[A*u+1]),u&gt;=3&amp;&amp;b.setZ(C,N[A*u+2]),u&gt;=4&amp;&amp;b.setW(C,N[A*u+3]),u&gt;=5)throw new Error(&quot;THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.&quot;)}b.normalized=v}return b})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const u=i.manager.getHandler(o.uri);u!==null&amp;&amp;(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+&quot;:&quot;+o.sampler;if(this.textureCache[u])return this.textureCache[u];const h=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=o.name||l.name||&quot;&quot;,f.name===&quot;&quot;&amp;&amp;typeof l.uri==&quot;string&quot;&amp;&amp;l.uri.startsWith(&quot;data:image/&quot;)===!1&amp;&amp;(f.name=l.uri);const m=(s.samplers||{})[o.sampler]||{};return f.magFilter=oR[m.magFilter]||fi,f.minFilter=oR[m.minFilter]||Zr,f.wrapS=aR[m.wrapS]||ws,f.wrapT=aR[m.wrapT]||ws,f.generateMipmaps=!f.isCompressedTexture&amp;&amp;f.minFilter!==xi&amp;&amp;f.minFilter!==fi,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[u]=h,h}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=&gt;p.clone());const o=r.images[e],l=self.URL||self.webkitURL;let u=o.uri||&quot;&quot;,h=!1;if(o.bufferView!==void 0)u=i.getDependency(&quot;bufferView&quot;,o.bufferView).then(function(p){h=!0;const m=new Blob([p],{type:o.mimeType});return u=l.createObjectURL(m),u});else if(o.uri===void 0)throw new Error(&quot;THREE.GLTFLoader: Image &quot;+e+&quot; is missing URI and bufferView&quot;);const f=Promise.resolve(u).then(function(p){return new Promise(function(m,g){let v=m;t.isImageBitmapLoader===!0&amp;&amp;(v=function(x){const b=new Kn(x);b.needsUpdate=!0,m(b)}),t.load(vo.resolveURL(p,s.path),v,void 0,g)})}).then(function(p){return h===!0&amp;&amp;l.revokeObjectURL(u),Jo(p,o),p.userData.mimeType=o.mimeType||Aj(o.uri),p}).catch(function(p){throw console.error(&quot;THREE.GLTFLoader: Couldn&#x27;t load texture&quot;,u),p});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){const s=this;return this.getDependency(&quot;texture&quot;,i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&amp;&amp;i.texCoord&gt;0&amp;&amp;(o=o.clone(),o.channel=i.texCoord),s.extensions[cn.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[cn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(o);o=s.extensions[cn.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,u)}}return r!==void 0&amp;&amp;(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l=&quot;PointsMaterial:&quot;+i.uuid;let u=this.cache.get(l);u||(u=new yy,Oi.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(l,u)),i=u}else if(e.isLine){const l=&quot;LineBasicMaterial:&quot;+i.uuid;let u=this.cache.get(l);u||(u=new Zi,Oi.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(l,u)),i=u}if(r||s||o){let l=&quot;ClonedMaterial:&quot;+i.uuid+&quot;:&quot;;r&amp;&amp;(l+=&quot;derivative-tangents:&quot;),s&amp;&amp;(l+=&quot;vertex-colors:&quot;),o&amp;&amp;(l+=&quot;flat-shading:&quot;);let u=this.cache.get(l);u||(u=i.clone(),s&amp;&amp;(u.vertexColors=!0),o&amp;&amp;(u.flatShading=!0),r&amp;&amp;(u.normalScale&amp;&amp;(u.normalScale.y*=-1),u.clearcoatNormalScale&amp;&amp;(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(i))),i=u}e.material=i}getMaterialType(){return ts}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const l={},u=s.extensions||{},h=[];if(u[cn.KHR_MATERIALS_UNLIT]){const p=r[cn.KHR_MATERIALS_UNLIT];o=p.getMaterialType(),h.push(p.extendParams(l,s,t))}else{const p=s.pbrMetallicRoughness||{};if(l.color=new $e(1,1,1),l.opacity=1,Array.isArray(p.baseColorFactor)){const m=p.baseColorFactor;l.color.setRGB(m[0],m[1],m[2],fr),l.opacity=m[3]}p.baseColorTexture!==void 0&amp;&amp;h.push(t.assignTexture(l,&quot;map&quot;,p.baseColorTexture,Nn)),l.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,l.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&amp;&amp;(h.push(t.assignTexture(l,&quot;metalnessMap&quot;,p.metallicRoughnessTexture)),h.push(t.assignTexture(l,&quot;roughnessMap&quot;,p.metallicRoughnessTexture))),o=this._invokeOne(function(m){return m.getMaterialType&amp;&amp;m.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&amp;&amp;m.extendMaterialParams(e,l)})))}s.doubleSided===!0&amp;&amp;(l.side=Ki);const f=s.alphaMode||lx.OPAQUE;if(f===lx.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,f===lx.MASK&amp;&amp;(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&amp;&amp;o!==$i&amp;&amp;(h.push(t.assignTexture(l,&quot;normalMap&quot;,s.normalTexture)),l.normalScale=new Oe(1,1),s.normalTexture.scale!==void 0)){const p=s.normalTexture.scale;l.normalScale.set(p,p)}if(s.occlusionTexture!==void 0&amp;&amp;o!==$i&amp;&amp;(h.push(t.assignTexture(l,&quot;aoMap&quot;,s.occlusionTexture)),s.occlusionTexture.strength!==void 0&amp;&amp;(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&amp;&amp;o!==$i){const p=s.emissiveFactor;l.emissive=new $e().setRGB(p[0],p[1],p[2],fr)}return s.emissiveTexture!==void 0&amp;&amp;o!==$i&amp;&amp;h.push(t.assignTexture(l,&quot;emissiveMap&quot;,s.emissiveTexture,Nn)),Promise.all(h).then(function(){const p=new o(l);return s.name&amp;&amp;(p.name=s.name),Jo(p,s),t.associations.set(p,{materials:e}),s.extensions&amp;&amp;ec(r,p,s),p})}createUniqueName(e){const t=mn.sanitizeNodeName(e||&quot;&quot;);return t in this.nodeNamesUsed?t+&quot;_&quot;+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(l){return i[cn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return lR(u,l,t)})}const o=[];for(let l=0,u=e.length;l&lt;u;l++){const h=e[l],f=Mj(h),p=r[f];if(p)o.push(p.promise);else{let m;h.extensions&amp;&amp;h.extensions[cn.KHR_DRACO_MESH_COMPRESSION]?m=s(h):m=lR(new Lt,h,t),r[f]={primitive:h,promise:m},o.push(m)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,l=[];for(let u=0,h=o.length;u&lt;h;u++){const f=o[u].material===void 0?wj(this.cache):this.getDependency(&quot;material&quot;,o[u].material);l.push(f)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(u){const h=u.slice(0,u.length-1),f=u[u.length-1],p=[];for(let g=0,v=f.length;g&lt;v;g++){const x=f[g],b=o[g];let _;const T=h[g];if(b.mode===vs.TRIANGLES||b.mode===vs.TRIANGLE_STRIP||b.mode===vs.TRIANGLE_FAN||b.mode===void 0)_=s.isSkinnedMesh===!0?new my(x,T):new Sn(x,T),_.isSkinnedMesh===!0&amp;&amp;_.normalizeSkinWeights(),b.mode===vs.TRIANGLE_STRIP?_.geometry=MC(_.geometry,aw):b.mode===vs.TRIANGLE_FAN&amp;&amp;(_.geometry=MC(_.geometry,E0));else if(b.mode===vs.LINES)_=new Ur(x,T);else if(b.mode===vs.LINE_STRIP)_=new xo(x,T);else if(b.mode===vs.LINE_LOOP)_=new pw(x,T);else if(b.mode===vs.POINTS)_=new _y(x,T);else throw new Error(&quot;THREE.GLTFLoader: Primitive mode unsupported: &quot;+b.mode);Object.keys(_.geometry.morphAttributes).length&gt;0&amp;&amp;Tj(_,s),_.name=t.createUniqueName(s.name||&quot;mesh_&quot;+e),Jo(_,s),b.extensions&amp;&amp;ec(r,_,b),t.assignFinalMaterial(_),p.push(_)}for(let g=0,v=p.length;g&lt;v;g++)t.associations.set(p[g],{meshes:e,primitives:g});if(p.length===1)return s.extensions&amp;&amp;ec(r,p[0],s),p[0];const m=new br;s.extensions&amp;&amp;ec(r,m,s),t.associations.set(m,{meshes:e});for(let g=0,v=p.length;g&lt;v;g++)m.add(p[g]);return m})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn(&quot;THREE.GLTFLoader: Missing camera parameters.&quot;);return}return i.type===&quot;perspective&quot;?t=new Yn(rl.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type===&quot;orthographic&quot;&amp;&amp;(t=new Fc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&amp;&amp;(t.name=this.createUniqueName(i.name)),Jo(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r&lt;s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency(&quot;accessor&quot;,t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,l=[],u=[];for(let h=0,f=o.length;h&lt;f;h++){const p=o[h];if(p){l.push(p);const m=new yt;s!==null&amp;&amp;m.fromArray(s.array,h*16),u.push(m)}else console.warn(&#x27;THREE.GLTFLoader: Joint &quot;%s&quot; could not be found.&#x27;,t.joints[h])}return new Eh(l,u)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:&quot;animation_&quot;+e,o=[],l=[],u=[],h=[],f=[];for(let p=0,m=r.channels.length;p&lt;m;p++){const g=r.channels[p],v=r.samplers[g.sampler],x=g.target,b=x.node,_=r.parameters!==void 0?r.parameters[v.input]:v.input,T=r.parameters!==void 0?r.parameters[v.output]:v.output;x.node!==void 0&amp;&amp;(o.push(this.getDependency(&quot;node&quot;,b)),l.push(this.getDependency(&quot;accessor&quot;,_)),u.push(this.getDependency(&quot;accessor&quot;,T)),h.push(v),f.push(x))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(f)]).then(function(p){const m=p[0],g=p[1],v=p[2],x=p[3],b=p[4],_=[];for(let T=0,w=m.length;T&lt;w;T++){const E=m[T],R=g[T],N=v[T],A=x[T],D=b[T];if(E===void 0)continue;E.updateMatrix&amp;&amp;E.updateMatrix();const C=i._createAnimationTracks(E,R,N,A,D);if(C)for(let O=0;O&lt;C.length;O++)_.push(C[O])}return new ml(s,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency(&quot;mesh&quot;,r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&amp;&amp;o.traverse(function(l){if(l.isMesh)for(let u=0,h=r.weights.length;u&lt;h;u++)l.morphTargetInfluences[u]=r.weights[u]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],l=r.children||[];for(let h=0,f=l.length;h&lt;f;h++)o.push(i.getDependency(&quot;node&quot;,l[h]));const u=r.skin===void 0?Promise.resolve(null):i.getDependency(&quot;skin&quot;,r.skin);return Promise.all([s,Promise.all(o),u]).then(function(h){const f=h[0],p=h[1],m=h[2];m!==null&amp;&amp;f.traverse(function(g){g.isSkinnedMesh&amp;&amp;g.bind(m,Cj)});for(let g=0,v=p.length;g&lt;v;g++)f.add(p[g]);return f})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):&quot;&quot;,l=[],u=r._invokeOne(function(h){return h.createNodeMesh&amp;&amp;h.createNodeMesh(e)});return u&amp;&amp;l.push(u),s.camera!==void 0&amp;&amp;l.push(r.getDependency(&quot;camera&quot;,s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&amp;&amp;h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),this.nodeCache[e]=Promise.all(l).then(function(h){let f;if(s.isBone===!0?f=new Yd:h.length&gt;1?f=new br:h.length===1?f=h[0]:f=new nn,f!==h[0])for(let p=0,m=h.length;p&lt;m;p++)f.add(h[p]);if(s.name&amp;&amp;(f.userData.name=s.name,f.name=o),Jo(f,s),s.extensions&amp;&amp;ec(i,f,s),s.matrix!==void 0){const p=new yt;p.fromArray(s.matrix),f.applyMatrix4(p)}else s.translation!==void 0&amp;&amp;f.position.fromArray(s.translation),s.rotation!==void 0&amp;&amp;f.quaternion.fromArray(s.rotation),s.scale!==void 0&amp;&amp;f.scale.fromArray(s.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new br;i.name&amp;&amp;(s.name=r.createUniqueName(i.name)),Jo(s,i),i.extensions&amp;&amp;ec(t,s,i);const o=i.nodes||[],l=[];for(let u=0,h=o.length;u&lt;h;u++)l.push(r.getDependency(&quot;node&quot;,o[u]));return Promise.all(l).then(function(u){for(let f=0,p=u.length;f&lt;p;f++)s.add(u[f]);const h=f=&gt;{const p=new Map;for(const[m,g]of r.associations)(m instanceof Oi||m instanceof Kn)&amp;&amp;p.set(m,g);return f.traverse(m=&gt;{const g=r.associations.get(m);g!=null&amp;&amp;p.set(m,g)}),p};return r.associations=h(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],l=e.name?e.name:e.uuid,u=[];Ya[s.path]===Ya.weights?e.traverse(function(m){m.morphTargetInfluences&amp;&amp;u.push(m.name?m.name:m.uuid)}):u.push(l);let h;switch(Ya[s.path]){case Ya.weights:h=Cc;break;case Ya.rotation:h=pl;break;case Ya.translation:case Ya.scale:h=pa;break;default:switch(i.itemSize){case 1:h=Cc;break;case 2:case 3:default:h=pa;break}break}const f=r.interpolation!==void 0?Sj[r.interpolation]:ch,p=this._getArrayFromAccessor(i);for(let m=0,g=u.length;m&lt;g;m++){const v=new h(u[m]+&quot;.&quot;+Ya[s.path],t.array,p,f);r.interpolation===&quot;CUBICSPLINE&quot;&amp;&amp;this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=SS(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s&lt;o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof pl?xj:SI;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Oj(n,e,t){const i=e.attributes,r=new Ri;if(i.POSITION!==void 0){const l=t.json.accessors[i.POSITION],u=l.min,h=l.max;if(u!==void 0&amp;&amp;h!==void 0){if(r.set(new Y(u[0],u[1],u[2]),new Y(h[0],h[1],h[2])),l.normalized){const f=SS(eh[l.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn(&quot;THREE.GLTFLoader: Missing min/max properties for accessor POSITION.&quot;);return}}else return;const s=e.targets;if(s!==void 0){const l=new Y,u=new Y;for(let h=0,f=s.length;h&lt;f;h++){const p=s[h];if(p.POSITION!==void 0){const m=t.json.accessors[p.POSITION],g=m.min,v=m.max;if(g!==void 0&amp;&amp;v!==void 0){if(u.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),u.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),u.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),m.normalized){const x=SS(eh[m.componentType]);u.multiplyScalar(x)}l.max(u)}else console.warn(&quot;THREE.GLTFLoader: Missing min/max properties for accessor POSITION.&quot;)}}r.expandByVector(l)}n.boundingBox=r;const o=new wi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function lR(n,e,t){const i=e.attributes,r=[];function s(o,l){return t.getDependency(&quot;accessor&quot;,o).then(function(u){n.setAttribute(l,u)})}for(const o in i){const l=xS[o]||o.toLowerCase();l in n.attributes||r.push(s(i[o],l))}if(e.indices!==void 0&amp;&amp;!n.index){const o=t.getDependency(&quot;accessor&quot;,e.indices).then(function(l){n.setIndex(l)});r.push(o)}return Zt.workingColorSpace!==fr&amp;&amp;&quot;COLOR_0&quot;in i&amp;&amp;console.warn(`THREE.GLTFLoader: Converting vertex colors from &quot;srgb-linear&quot; to &quot;${Zt.workingColorSpace}&quot; not supported.`),Jo(n,e),Oj(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Ej(n,e.targets,t):n})}function Dj(n){const e=new $6;return new Promise((t,i)=&gt;{e.load(n,t,void 0,i)})}function Nj(n){n.material=new $i({vertexColors:!0,side:Ki})}function Ij(n){return Math.sqrt(n.reduce((e,t)=&gt;e+t*t,0))}function Pj(n){return n[0]}class Lj{static colorizeData(e,t=Ij){e[0].length===1&amp;&amp;(t=Pj);const i=ZS.getState().colorPalette,r=e.map(f=&gt;t(f)).sort((f,p)=&gt;f-p),s=r[0],o=r[r.length-1],l=i[0],u=i[1],h=f=&gt;l.map((p,m)=&gt;p+(u[m]-p)*(f-s)/(o-s));return e.map(f=&gt;h(t(f)))}}function Uj(n){const e=[];for(let t=0;t&lt;n.length;t+=3)e.push([n[t],n[t+1],n[t+2]]);return e}function kj(n,e){const t=n.geometry,i=t.attributes.position,r=t.morphAttributes.position[e],s=Uj(Array.from(r.array)),o=Lj.colorizeData(s),l=new Float32Array(i.count*3),u=new Jt(l,3);t.setAttribute(&quot;color&quot;,u);for(let h=0;h&lt;i.count;h++){const f=o[h],p=new $e(f[0],f[1],f[2]);u.setXYZ(h,p.r,p.g,p.b)}u.needsUpdate=!0,Nj(n)}class Fj{constructor(e){dt(this,&quot;mixer&quot;);dt(this,&quot;actions&quot;,new Map);dt(this,&quot;currentAction&quot;,null);dt(this,&quot;meshMap&quot;,new Map);dt(this,&quot;animation_store&quot;,null);this.mixer=new IN(e),this.animation_store=gl.getState()}clear(){this.mixer.stopAllAction(),this.actions.clear(),this.currentAction=null}addAnimation(e){const t=this.mixer.clipAction(e);this.actions.set(e.name,t)}setMeshMap(e){this.meshMap=e}getAnimationNames(){return Array.from(this.actions.keys())}_get_mesh_from_action(e){const t=e.getClip(),i=this.meshMap.get(t.name),r=Zs.current;if(i&amp;&amp;r)for(const s of i){const o=s.replace(&quot;.&quot;,&quot;&quot;),l=r.getObjectByName(o);if(l)return l}return null}setCurrentAnimation(e){var i,r;if(e===&quot;No Animation&quot;){(i=this.animation_store)==null||i.setSelectedAnimation(e),this.stopAnimation();const s=new ts({color:8421504,side:Ki}),o=this.actions.values().next().value;if(o){const l=this._get_mesh_from_action(o);l&amp;&amp;(l.material=s,l.geometry.attributes.position.needsUpdate=!0)}return}const t=this.actions.get(e);if(t){this.currentAction&amp;&amp;this.currentAction.stop(),this.currentAction=t,gl.getState().setSelectedAnimation(e);const s=this._get_mesh_from_action(t),o=this.getActionIndex();s&amp;&amp;kj(s,o),(r=this.animation_store)==null||r.setIsPlaying(!1),this.currentAction.paused=!0}}togglePlayPause(){var e,t;this.currentAction&amp;&amp;((t=this.animation_store)==null||t.setIsPlaying(!((e=this.animation_store)!=null&amp;&amp;e.isPlaying)),this.currentAction.paused=!this.currentAction.paused,this.currentAction.paused||this.currentAction.play())}stopAnimation(){var e,t;this.currentAction&amp;&amp;(this.currentAction.paused=!0,this.seek(0),(e=this.animation_store)==null||e.setCurrentKey(this.getCurrentTime()),(t=this.animation_store)==null||t.setIsPlaying(!1))}seek(e){this.currentAction&amp;&amp;(this.currentAction.paused&amp;&amp;this.currentAction.play(),this.currentAction.time=e)}update(e){var t;this.mixer.update(e),this.animation_store&amp;&amp;((t=this.currentAction)!=null&amp;&amp;t.isRunning())&amp;&amp;this.animation_store.setCurrentKey(this.getCurrentTime())}getCurrentTime(){return this.currentAction?this.currentAction.time:0}getDuration(){return this.currentAction?this.currentAction.getClip().duration:0}getStep(){return this.currentAction?this.getDuration()/100:0}getActionIndex(){if(this.currentAction){const e=this.currentAction.getClip();return Array.from(this.actions.keys()).indexOf(e.name)}return-1}}async function wI(n,e=!0){var g,v,x,b;if(Zs.current==null)return console.error(&quot;Scene reference is null&quot;),new br;const t=Zs.current,i=new br;if(!n)return i;const r=await Dj(n),s=r.scene,o=r.animations,l=eo.getState(),u=Bc.getState(),h=gl.getState(),f=(g=r.parser.json.extensions)==null?void 0:g.ADA_EXT_data;f&amp;&amp;(zw.current=f,f.simulation_objects.length&gt;0&amp;&amp;(Fw.current=f.simulation_objects[0])),bi.current=new Fj(t),o.length&gt;0?(h.setHasAnimation(!0),(v=bi.current)==null||v.clear(),(x=bi.current)==null||x.setMeshMap(K6(r)),o.forEach(_=&gt;{var T;(T=bi.current)==null||T.addAnimation(_)})):(h.setHasAnimation(!1),(b=bi.current)==null||b.clear());const p=s.name+&quot;_&quot;+s.uuid;await qN({gltf_scene:s,hash:p});const m=s.userData??{};if(await Y6(p,m),l.translation&amp;&amp;e)console.log(&quot;Model already translated&quot;),s.position.add(l.translation);else{const _=new Ri().setFromObject(s);if(l.setBoundingBox(_),!u.lockTranslation&amp;&amp;l.model_type==Cd.DESIGN){const w=_.getCenter(new Y).clone().multiplyScalar(-1);if(l.zIsUp){const E=_.min.z,R=_.max.z-E;w.z=-E+R*.05}else{const E=_.min.y,R=_.max.y-E;w.y=-E+R*.05}s.position.add(w),l.setTranslation(w)}}return i.add(s),t.add(i),Sc.current||(Sc.current=new Map),Sc.current.set(p,i),o.length&gt;0&amp;&amp;h.setHasAnimation(!0),i}function zj(n){console.log(&quot;Loading GLTF from base64 data&quot;);const t=(&quot;data:text/plain;base64,&quot;+n).split(&quot;,&quot;)[1],i=atob(t),r=new Uint8Array(i.length);for(let o=0;o&lt;i.length;o++)r[o]=i.charCodeAt(o);const s=new Blob([r],{type:&quot;model/gltf-binary&quot;});return URL.createObjectURL(s)}function Bj(){console.log(&quot;B64GLTF exists, loading model&quot;);let n=zj(window.B64GLTF);eo.getState().setModelUrl(n,ul.REPLACE)}async function EI(n){var i;const e=gl.getState();e.setHasAnimation(!1),e.setIsPlaying(!1),e.setSelectedAnimation(&quot;No Animation&quot;),(i=bi.current)==null||i.clear(),eo.getState().translation=null,Oc.getState().clearTreeData();const t=Zs.current;if(!t){console.warn(&quot;No scene found&quot;);return}if(t.removeFromParent(),Sc.current)for(let r of Sc.current.keys()){let s=Sc.current.get(r);s&amp;&amp;s.clear()}await wI(n,!1)}async function cR(n){var h,f;console.log(&quot;Received scene update message from server&quot;);let e=n.scene();if(!e){console.error(&quot;No scene object found in the message&quot;);return}let t=e.operation(),i=e.currentFile();if(!i){console.error(&quot;No file object found in the message&quot;);return}let r=i.filedataArray();if(!r){console.error(&quot;No filedata found in the file object&quot;);return}let s=i.compressed(),o;s?(console.log(&quot;Decompressing received GLB data...&quot;),o=I6(r)):o=r;const l=new Blob([o],{type:&quot;model/gltf-binary&quot;}),u=URL.createObjectURL(l);if(t==ul.REPLACE)await EI(u);else if(t==ul.REMOVE)console.error(&quot;Currently unsupported operation&quot;,t);else if(t==ul.ADD){let p=(f=(h=n.package_())==null?void 0:h.mesh())==null?void 0:f.unpack();p?await vG(p):await wI(u,!0)}else console.error(&quot;Unknown operation type: &quot;,t)}const yl=Eo(n=&gt;({name:null,setName:e=&gt;n(()=&gt;({name:e})),faceIndex:null,setFaceIndex:e=&gt;n(()=&gt;({faceIndex:e})),clickCoordinate:null,setClickCoordinate:e=&gt;n(()=&gt;({clickCoordinate:e})),jsonData:null,setJsonData:e=&gt;n(()=&gt;({jsonData:e})),isJsonViewVisible:!1,setIsJsonViewVisible:e=&gt;n(()=&gt;({isJsonViewVisible:e})),show_info_box:!1,toggle:()=&gt;n(e=&gt;({show_info_box:!e.show_info_box}))}));async function uR(n){var e,t;if(n.meshInfo()&amp;&amp;((e=n.meshInfo())!=null&amp;&amp;e.jsonData())){const i=(t=n.meshInfo())==null?void 0:t.jsonData();if(!i){console.error(&quot;No JSON data found in the message&quot;);return}const r=JSON.parse(i);yl.getState().setJsonData(r)}else yl.getState().setJsonData(null)}function Di(n){if(typeof n==&quot;string&quot;||typeof n==&quot;number&quot;)return&quot;&quot;+n;let e=&quot;&quot;;if(Array.isArray(n))for(let t=0,i;t&lt;n.length;t++)(i=Di(n[t]))!==&quot;&quot;&amp;&amp;(e+=(e&amp;&amp;&quot; &quot;)+i);else for(let t in n)n[t]&amp;&amp;(e+=(e&amp;&amp;&quot; &quot;)+t);return e}var Hj={value:()=&gt;{}};function Gy(){for(var n=0,e=arguments.length,t={},i;n&lt;e;++n){if(!(i=arguments[n]+&quot;&quot;)||i in t||/[\s.]/.test(i))throw new Error(&quot;illegal type: &quot;+i);t[i]=[]}return new Ig(t)}function Ig(n){this._=n}function Vj(n,e){return n.trim().split(/^|\s+/).map(function(t){var i=&quot;&quot;,r=t.indexOf(&quot;.&quot;);if(r&gt;=0&amp;&amp;(i=t.slice(r+1),t=t.slice(0,r)),t&amp;&amp;!e.hasOwnProperty(t))throw new Error(&quot;unknown type: &quot;+t);return{type:t,name:i}})}Ig.prototype=Gy.prototype={constructor:Ig,on:function(n,e){var t=this._,i=Vj(n+&quot;&quot;,t),r,s=-1,o=i.length;if(arguments.length&lt;2){for(;++s&lt;o;)if((r=(n=i[s]).type)&amp;&amp;(r=Gj(t[r],n.name)))return r;return}if(e!=null&amp;&amp;typeof e!=&quot;function&quot;)throw new Error(&quot;invalid callback: &quot;+e);for(;++s&lt;o;)if(r=(n=i[s]).type)t[r]=hR(t[r],n.name,e);else if(e==null)for(r in t)t[r]=hR(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Ig(n)},call:function(n,e){if((r=arguments.length-2)&gt;0)for(var t=new Array(r),i=0,r,s;i&lt;r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error(&quot;unknown type: &quot;+n);for(s=this._[n],i=0,r=s.length;i&lt;r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error(&quot;unknown type: &quot;+n);for(var i=this._[n],r=0,s=i.length;r&lt;s;++r)i[r].value.apply(e,t)}};function Gj(n,e){for(var t=0,i=n.length,r;t&lt;i;++t)if((r=n[t]).name===e)return r.value}function hR(n,e,t){for(var i=0,r=n.length;i&lt;r;++i)if(n[i].name===e){n[i]=Hj,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&amp;&amp;n.push({name:e,value:t}),n}var wS=&quot;http://www.w3.org/1999/xhtml&quot;;const fR={svg:&quot;http://www.w3.org/2000/svg&quot;,xhtml:wS,xlink:&quot;http://www.w3.org/1999/xlink&quot;,xml:&quot;http://www.w3.org/XML/1998/namespace&quot;,xmlns:&quot;http://www.w3.org/2000/xmlns/&quot;};function jy(n){var e=n+=&quot;&quot;,t=e.indexOf(&quot;:&quot;);return t&gt;=0&amp;&amp;(e=n.slice(0,t))!==&quot;xmlns&quot;&amp;&amp;(n=n.slice(t+1)),fR.hasOwnProperty(e)?{space:fR[e],local:n}:n}function jj(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===wS&amp;&amp;e.documentElement.namespaceURI===wS?e.createElement(n):e.createElementNS(t,n)}}function Wj(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function TI(n){var e=jy(n);return(e.local?Wj:jj)(e)}function Xj(){}function Bw(n){return n==null?Xj:function(){return this.querySelector(n)}}function qj(n){typeof n!=&quot;function&quot;&amp;&amp;(n=Bw(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r&lt;t;++r)for(var s=e[r],o=s.length,l=i[r]=new Array(o),u,h,f=0;f&lt;o;++f)(u=s[f])&amp;&amp;(h=n.call(u,u.__data__,f,s))&amp;&amp;(&quot;__data__&quot;in u&amp;&amp;(h.__data__=u.__data__),l[f]=h);return new is(i,this._parents)}function Yj(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Kj(){return[]}function MI(n){return n==null?Kj:function(){return this.querySelectorAll(n)}}function $j(n){return function(){return Yj(n.apply(this,arguments))}}function Zj(n){typeof n==&quot;function&quot;?n=$j(n):n=MI(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s&lt;t;++s)for(var o=e[s],l=o.length,u,h=0;h&lt;l;++h)(u=o[h])&amp;&amp;(i.push(n.call(u,u.__data__,h,o)),r.push(u));return new is(i,r)}function AI(n){return function(){return this.matches(n)}}function CI(n){return function(e){return e.matches(n)}}var Jj=Array.prototype.find;function Qj(n){return function(){return Jj.call(this.children,n)}}function eW(){return this.firstElementChild}function tW(n){return this.select(n==null?eW:Qj(typeof n==&quot;function&quot;?n:CI(n)))}var nW=Array.prototype.filter;function iW(){return Array.from(this.children)}function rW(n){return function(){return nW.call(this.children,n)}}function sW(n){return this.selectAll(n==null?iW:rW(typeof n==&quot;function&quot;?n:CI(n)))}function oW(n){typeof n!=&quot;function&quot;&amp;&amp;(n=AI(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r&lt;t;++r)for(var s=e[r],o=s.length,l=i[r]=[],u,h=0;h&lt;o;++h)(u=s[h])&amp;&amp;n.call(u,u.__data__,h,s)&amp;&amp;l.push(u);return new is(i,this._parents)}function RI(n){return new Array(n.length)}function aW(){return new is(this._enter||this._groups.map(RI),this._parents)}function U0(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}U0.prototype={constructor:U0,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function lW(n){return function(){return n}}function cW(n,e,t,i,r,s){for(var o=0,l,u=e.length,h=s.length;o&lt;h;++o)(l=e[o])?(l.__data__=s[o],i[o]=l):t[o]=new U0(n,s[o]);for(;o&lt;u;++o)(l=e[o])&amp;&amp;(r[o]=l)}function uW(n,e,t,i,r,s,o){var l,u,h=new Map,f=e.length,p=s.length,m=new Array(f),g;for(l=0;l&lt;f;++l)(u=e[l])&amp;&amp;(m[l]=g=o.call(u,u.__data__,l,e)+&quot;&quot;,h.has(g)?r[l]=u:h.set(g,u));for(l=0;l&lt;p;++l)g=o.call(n,s[l],l,s)+&quot;&quot;,(u=h.get(g))?(i[l]=u,u.__data__=s[l],h.delete(g)):t[l]=new U0(n,s[l]);for(l=0;l&lt;f;++l)(u=e[l])&amp;&amp;h.get(m[l])===u&amp;&amp;(r[l]=u)}function hW(n){return n.__data__}function fW(n,e){if(!arguments.length)return Array.from(this,hW);var t=e?uW:cW,i=this._parents,r=this._groups;typeof n!=&quot;function&quot;&amp;&amp;(n=lW(n));for(var s=r.length,o=new Array(s),l=new Array(s),u=new Array(s),h=0;h&lt;s;++h){var f=i[h],p=r[h],m=p.length,g=dW(n.call(f,f&amp;&amp;f.__data__,h,i)),v=g.length,x=l[h]=new Array(v),b=o[h]=new Array(v),_=u[h]=new Array(m);t(f,p,x,b,_,g,e);for(var T=0,w=0,E,R;T&lt;v;++T)if(E=x[T]){for(T&gt;=w&amp;&amp;(w=T+1);!(R=b[w])&amp;&amp;++w&lt;v;);E._next=R||null}}return o=new is(o,i),o._enter=l,o._exit=u,o}function dW(n){return typeof n==&quot;object&quot;&amp;&amp;&quot;length&quot;in n?n:Array.from(n)}function pW(){return new is(this._exit||this._groups.map(RI),this._parents)}function mW(n,e,t){var i=this.enter(),r=this,s=this.exit();return typeof n==&quot;function&quot;?(i=n(i),i&amp;&amp;(i=i.selection())):i=i.append(n+&quot;&quot;),e!=null&amp;&amp;(r=e(r),r&amp;&amp;(r=r.selection())),t==null?s.remove():t(s),i&amp;&amp;r?i.merge(r).order():r}function gW(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,s=i.length,o=Math.min(r,s),l=new Array(r),u=0;u&lt;o;++u)for(var h=t[u],f=i[u],p=h.length,m=l[u]=new Array(p),g,v=0;v&lt;p;++v)(g=h[v]||f[v])&amp;&amp;(m[v]=g);for(;u&lt;r;++u)l[u]=t[u];return new is(l,this._parents)}function yW(){for(var n=this._groups,e=-1,t=n.length;++e&lt;t;)for(var i=n[e],r=i.length-1,s=i[r],o;--r&gt;=0;)(o=i[r])&amp;&amp;(s&amp;&amp;o.compareDocumentPosition(s)^4&amp;&amp;s.parentNode.insertBefore(o,s),s=o);return this}function _W(n){n||(n=vW);function e(p,m){return p&amp;&amp;m?n(p.__data__,m.__data__):!p-!m}for(var t=this._groups,i=t.length,r=new Array(i),s=0;s&lt;i;++s){for(var o=t[s],l=o.length,u=r[s]=new Array(l),h,f=0;f&lt;l;++f)(h=o[f])&amp;&amp;(u[f]=h);u.sort(e)}return new is(r,this._parents).order()}function vW(n,e){return n&lt;e?-1:n&gt;e?1:n&gt;=e?0:NaN}function bW(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function xW(){return Array.from(this)}function SW(){for(var n=this._groups,e=0,t=n.length;e&lt;t;++e)for(var i=n[e],r=0,s=i.length;r&lt;s;++r){var o=i[r];if(o)return o}return null}function wW(){let n=0;for(const e of this)++n;return n}function EW(){return!this.node()}function TW(n){for(var e=this._groups,t=0,i=e.length;t&lt;i;++t)for(var r=e[t],s=0,o=r.length,l;s&lt;o;++s)(l=r[s])&amp;&amp;n.call(l,l.__data__,s,r);return this}function MW(n){return function(){this.removeAttribute(n)}}function AW(n){return function(){this.removeAttributeNS(n.space,n.local)}}function CW(n,e){return function(){this.setAttribute(n,e)}}function RW(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function OW(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function DW(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function NW(n,e){var t=jy(n);if(arguments.length&lt;2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?AW:MW:typeof e==&quot;function&quot;?t.local?DW:OW:t.local?RW:CW)(t,e))}function OI(n){return n.ownerDocument&amp;&amp;n.ownerDocument.defaultView||n.document&amp;&amp;n||n.defaultView}function IW(n){return function(){this.style.removeProperty(n)}}function PW(n,e,t){return function(){this.style.setProperty(n,e,t)}}function LW(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function UW(n,e,t){return arguments.length&gt;1?this.each((e==null?IW:typeof e==&quot;function&quot;?LW:PW)(n,e,t??&quot;&quot;)):dh(this.node(),n)}function dh(n,e){return n.style.getPropertyValue(e)||OI(n).getComputedStyle(n,null).getPropertyValue(e)}function kW(n){return function(){delete this[n]}}function FW(n,e){return function(){this[n]=e}}function zW(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function BW(n,e){return arguments.length&gt;1?this.each((e==null?kW:typeof e==&quot;function&quot;?zW:FW)(n,e)):this.node()[n]}function DI(n){return n.trim().split(/^|\s+/)}function Hw(n){return n.classList||new NI(n)}function NI(n){this._node=n,this._names=DI(n.getAttribute(&quot;class&quot;)||&quot;&quot;)}NI.prototype={add:function(n){var e=this._names.indexOf(n);e&lt;0&amp;&amp;(this._names.push(n),this._node.setAttribute(&quot;class&quot;,this._names.join(&quot; &quot;)))},remove:function(n){var e=this._names.indexOf(n);e&gt;=0&amp;&amp;(this._names.splice(e,1),this._node.setAttribute(&quot;class&quot;,this._names.join(&quot; &quot;)))},contains:function(n){return this._names.indexOf(n)&gt;=0}};function II(n,e){for(var t=Hw(n),i=-1,r=e.length;++i&lt;r;)t.add(e[i])}function PI(n,e){for(var t=Hw(n),i=-1,r=e.length;++i&lt;r;)t.remove(e[i])}function HW(n){return function(){II(this,n)}}function VW(n){return function(){PI(this,n)}}function GW(n,e){return function(){(e.apply(this,arguments)?II:PI)(this,n)}}function jW(n,e){var t=DI(n+&quot;&quot;);if(arguments.length&lt;2){for(var i=Hw(this.node()),r=-1,s=t.length;++r&lt;s;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof e==&quot;function&quot;?GW:e?HW:VW)(t,e))}function WW(){this.textContent=&quot;&quot;}function XW(n){return function(){this.textContent=n}}function qW(n){return function(){var e=n.apply(this,arguments);this.textContent=e??&quot;&quot;}}function YW(n){return arguments.length?this.each(n==null?WW:(typeof n==&quot;function&quot;?qW:XW)(n)):this.node().textContent}function KW(){this.innerHTML=&quot;&quot;}function $W(n){return function(){this.innerHTML=n}}function ZW(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??&quot;&quot;}}function JW(n){return arguments.length?this.each(n==null?KW:(typeof n==&quot;function&quot;?ZW:$W)(n)):this.node().innerHTML}function QW(){this.nextSibling&amp;&amp;this.parentNode.appendChild(this)}function e9(){return this.each(QW)}function t9(){this.previousSibling&amp;&amp;this.parentNode.insertBefore(this,this.parentNode.firstChild)}function n9(){return this.each(t9)}function i9(n){var e=typeof n==&quot;function&quot;?n:TI(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function r9(){return null}function s9(n,e){var t=typeof n==&quot;function&quot;?n:TI(n),i=e==null?r9:typeof e==&quot;function&quot;?e:Bw(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function o9(){var n=this.parentNode;n&amp;&amp;n.removeChild(this)}function a9(){return this.each(o9)}function l9(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function c9(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function u9(n){return this.select(n?c9:l9)}function h9(n){return arguments.length?this.property(&quot;__data__&quot;,n):this.node().__data__}function f9(n){return function(e){n.call(this,e,this.__data__)}}function d9(n){return n.trim().split(/^|\s+/).map(function(e){var t=&quot;&quot;,i=e.indexOf(&quot;.&quot;);return i&gt;=0&amp;&amp;(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function p9(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,r=e.length,s;t&lt;r;++t)s=e[t],(!n.type||s.type===n.type)&amp;&amp;s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function m9(n,e,t){return function(){var i=this.__on,r,s=f9(e);if(i){for(var o=0,l=i.length;o&lt;l;++o)if((r=i[o]).type===n.type&amp;&amp;r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function g9(n,e,t){var i=d9(n+&quot;&quot;),r,s=i.length,o;if(arguments.length&lt;2){var l=this.node().__on;if(l){for(var u=0,h=l.length,f;u&lt;h;++u)for(r=0,f=l[u];r&lt;s;++r)if((o=i[r]).type===f.type&amp;&amp;o.name===f.name)return f.value}return}for(l=e?m9:p9,r=0;r&lt;s;++r)this.each(l(i[r],e,t));return this}function LI(n,e,t){var i=OI(n),r=i.CustomEvent;typeof r==&quot;function&quot;?r=new r(e,t):(r=i.document.createEvent(&quot;Event&quot;),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function y9(n,e){return function(){return LI(this,n,e)}}function _9(n,e){return function(){return LI(this,n,e.apply(this,arguments))}}function v9(n,e){return this.each((typeof e==&quot;function&quot;?_9:y9)(n,e))}function*b9(){for(var n=this._groups,e=0,t=n.length;e&lt;t;++e)for(var i=n[e],r=0,s=i.length,o;r&lt;s;++r)(o=i[r])&amp;&amp;(yield o)}var UI=[null];function is(n,e){this._groups=n,this._parents=e}function Jd(){return new is([[document.documentElement]],UI)}function x9(){return this}is.prototype=Jd.prototype={constructor:is,select:qj,selectAll:Zj,selectChild:tW,selectChildren:sW,filter:oW,data:fW,enter:aW,exit:pW,join:mW,merge:gW,selection:x9,order:yW,sort:_W,call:bW,nodes:xW,node:SW,size:wW,empty:EW,each:TW,attr:NW,style:UW,property:BW,classed:jW,text:YW,html:JW,raise:e9,lower:n9,append:i9,insert:s9,remove:a9,clone:u9,datum:h9,on:g9,dispatch:v9,[Symbol.iterator]:b9};function $r(n){return typeof n==&quot;string&quot;?new is([[document.querySelector(n)]],[document.documentElement]):new is([[n]],UI)}function S9(n){let e;for(;e=n.sourceEvent;)n=e;return n}function js(n,e){if(n=S9(n),e===void 0&amp;&amp;(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}const w9={passive:!1},Dd={capture:!0,passive:!1};function ux(n){n.stopImmediatePropagation()}function th(n){n.preventDefault(),n.stopImmediatePropagation()}function kI(n){var e=n.document.documentElement,t=$r(n).on(&quot;dragstart.drag&quot;,th,Dd);&quot;onselectstart&quot;in e?t.on(&quot;selectstart.drag&quot;,th,Dd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect=&quot;none&quot;)}function FI(n,e){var t=n.document.documentElement,i=$r(n).on(&quot;dragstart.drag&quot;,null);e&amp;&amp;(i.on(&quot;click.drag&quot;,th,Dd),setTimeout(function(){i.on(&quot;click.drag&quot;,null)},0)),&quot;onselectstart&quot;in t?i.on(&quot;selectstart.drag&quot;,null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const tg=n=&gt;()=&gt;n;function ES(n,{sourceEvent:e,subject:t,target:i,identifier:r,active:s,x:o,y:l,dx:u,dy:h,dispatch:f}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:f}})}ES.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function E9(n){return!n.ctrlKey&amp;&amp;!n.button}function T9(){return this.parentNode}function M9(n,e){return e??{x:n.x,y:n.y}}function A9(){return navigator.maxTouchPoints||&quot;ontouchstart&quot;in this}function zI(){var n=E9,e=T9,t=M9,i=A9,r={},s=Gy(&quot;start&quot;,&quot;drag&quot;,&quot;end&quot;),o=0,l,u,h,f,p=0;function m(E){E.on(&quot;mousedown.drag&quot;,g).filter(i).on(&quot;touchstart.drag&quot;,b).on(&quot;touchmove.drag&quot;,_,w9).on(&quot;touchend.drag touchcancel.drag&quot;,T).style(&quot;touch-action&quot;,&quot;none&quot;).style(&quot;-webkit-tap-highlight-color&quot;,&quot;rgba(0,0,0,0)&quot;)}function g(E,R){if(!(f||!n.call(this,E,R))){var N=w(this,e.call(this,E,R),E,R,&quot;mouse&quot;);N&amp;&amp;($r(E.view).on(&quot;mousemove.drag&quot;,v,Dd).on(&quot;mouseup.drag&quot;,x,Dd),kI(E.view),ux(E),h=!1,l=E.clientX,u=E.clientY,N(&quot;start&quot;,E))}}function v(E){if(th(E),!h){var R=E.clientX-l,N=E.clientY-u;h=R*R+N*N&gt;p}r.mouse(&quot;drag&quot;,E)}function x(E){$r(E.view).on(&quot;mousemove.drag mouseup.drag&quot;,null),FI(E.view,h),th(E),r.mouse(&quot;end&quot;,E)}function b(E,R){if(n.call(this,E,R)){var N=E.changedTouches,A=e.call(this,E,R),D=N.length,C,O;for(C=0;C&lt;D;++C)(O=w(this,A,E,R,N[C].identifier,N[C]))&amp;&amp;(ux(E),O(&quot;start&quot;,E,N[C]))}}function _(E){var R=E.changedTouches,N=R.length,A,D;for(A=0;A&lt;N;++A)(D=r[R[A].identifier])&amp;&amp;(th(E),D(&quot;drag&quot;,E,R[A]))}function T(E){var R=E.changedTouches,N=R.length,A,D;for(f&amp;&amp;clearTimeout(f),f=setTimeout(function(){f=null},500),A=0;A&lt;N;++A)(D=r[R[A].identifier])&amp;&amp;(ux(E),D(&quot;end&quot;,E,R[A]))}function w(E,R,N,A,D,C){var O=s.copy(),L=js(C||N,R),V,Z,z;if((z=t.call(E,new ES(&quot;beforestart&quot;,{sourceEvent:N,target:m,identifier:D,active:o,x:L[0],y:L[1],dx:0,dy:0,dispatch:O}),A))!=null)return V=z.x-L[0]||0,Z=z.y-L[1]||0,function K(I,j,G){var ee=L,F;switch(I){case&quot;start&quot;:r[D]=K,F=o++;break;case&quot;end&quot;:delete r[D],--o;case&quot;drag&quot;:L=js(G||j,R),F=o;break}O.call(I,E,new ES(I,{sourceEvent:j,subject:z,target:m,identifier:D,active:F,x:L[0]+V,y:L[1]+Z,dx:L[0]-ee[0],dy:L[1]-ee[1],dispatch:O}),A)}}return m.filter=function(E){return arguments.length?(n=typeof E==&quot;function&quot;?E:tg(!!E),m):n},m.container=function(E){return arguments.length?(e=typeof E==&quot;function&quot;?E:tg(E),m):e},m.subject=function(E){return arguments.length?(t=typeof E==&quot;function&quot;?E:tg(E),m):t},m.touchable=function(E){return arguments.length?(i=typeof E==&quot;function&quot;?E:tg(!!E),m):i},m.on=function(){var E=s.on.apply(s,arguments);return E===s?m:E},m.clickDistance=function(E){return arguments.length?(p=(E=+E)*E,m):Math.sqrt(p)},m}function Vw(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function BI(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Qd(){}var Nd=.7,k0=1/Nd,nh=&quot;\\s*([+-]?\\d+)\\s*&quot;,Id=&quot;\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*&quot;,bo=&quot;\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*&quot;,C9=/^#([0-9a-f]{3,8})$/,R9=new RegExp(`^rgb\\(${nh},${nh},${nh}\\)$`),O9=new RegExp(`^rgb\\(${bo},${bo},${bo}\\)$`),D9=new RegExp(`^rgba\\(${nh},${nh},${nh},${Id}\\)$`),N9=new RegExp(`^rgba\\(${bo},${bo},${bo},${Id}\\)$`),I9=new RegExp(`^hsl\\(${Id},${bo},${bo}\\)$`),P9=new RegExp(`^hsla\\(${Id},${bo},${bo},${Id}\\)$`),dR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vw(Qd,Pd,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:pR,formatHex:pR,formatHex8:L9,formatHsl:U9,formatRgb:mR,toString:mR});function pR(){return this.rgb().formatHex()}function L9(){return this.rgb().formatHex8()}function U9(){return HI(this).formatHsl()}function mR(){return this.rgb().formatRgb()}function Pd(n){var e,t;return n=(n+&quot;&quot;).trim().toLowerCase(),(e=C9.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?gR(e):t===3?new Lr(e&gt;&gt;8&amp;15|e&gt;&gt;4&amp;240,e&gt;&gt;4&amp;15|e&amp;240,(e&amp;15)&lt;&lt;4|e&amp;15,1):t===8?ng(e&gt;&gt;24&amp;255,e&gt;&gt;16&amp;255,e&gt;&gt;8&amp;255,(e&amp;255)/255):t===4?ng(e&gt;&gt;12&amp;15|e&gt;&gt;8&amp;240,e&gt;&gt;8&amp;15|e&gt;&gt;4&amp;240,e&gt;&gt;4&amp;15|e&amp;240,((e&amp;15)&lt;&lt;4|e&amp;15)/255):null):(e=R9.exec(n))?new Lr(e[1],e[2],e[3],1):(e=O9.exec(n))?new Lr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=D9.exec(n))?ng(e[1],e[2],e[3],e[4]):(e=N9.exec(n))?ng(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=I9.exec(n))?vR(e[1],e[2]/100,e[3]/100,1):(e=P9.exec(n))?vR(e[1],e[2]/100,e[3]/100,e[4]):dR.hasOwnProperty(n)?gR(dR[n]):n===&quot;transparent&quot;?new Lr(NaN,NaN,NaN,0):null}function gR(n){return new Lr(n&gt;&gt;16&amp;255,n&gt;&gt;8&amp;255,n&amp;255,1)}function ng(n,e,t,i){return i&lt;=0&amp;&amp;(n=e=t=NaN),new Lr(n,e,t,i)}function k9(n){return n instanceof Qd||(n=Pd(n)),n?(n=n.rgb(),new Lr(n.r,n.g,n.b,n.opacity)):new Lr}function TS(n,e,t,i){return arguments.length===1?k9(n):new Lr(n,e,t,i??1)}function Lr(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}Vw(Lr,TS,BI(Qd,{brighter(n){return n=n==null?k0:Math.pow(k0,n),new Lr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Nd:Math.pow(Nd,n),new Lr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Lr(wc(this.r),wc(this.g),wc(this.b),F0(this.opacity))},displayable(){return-.5&lt;=this.r&amp;&amp;this.r&lt;255.5&amp;&amp;-.5&lt;=this.g&amp;&amp;this.g&lt;255.5&amp;&amp;-.5&lt;=this.b&amp;&amp;this.b&lt;255.5&amp;&amp;0&lt;=this.opacity&amp;&amp;this.opacity&lt;=1},hex:yR,formatHex:yR,formatHex8:F9,formatRgb:_R,toString:_R}));function yR(){return`#${yc(this.r)}${yc(this.g)}${yc(this.b)}`}function F9(){return`#${yc(this.r)}${yc(this.g)}${yc(this.b)}${yc((isNaN(this.opacity)?1:this.opacity)*255)}`}function _R(){const n=F0(this.opacity);return`${n===1?&quot;rgb(&quot;:&quot;rgba(&quot;}${wc(this.r)}, ${wc(this.g)}, ${wc(this.b)}${n===1?&quot;)&quot;:`, ${n})`}`}function F0(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function wc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function yc(n){return n=wc(n),(n&lt;16?&quot;0&quot;:&quot;&quot;)+n.toString(16)}function vR(n,e,t,i){return i&lt;=0?n=e=t=NaN:t&lt;=0||t&gt;=1?n=e=NaN:e&lt;=0&amp;&amp;(n=NaN),new Xs(n,e,t,i)}function HI(n){if(n instanceof Xs)return new Xs(n.h,n.s,n.l,n.opacity);if(n instanceof Qd||(n=Pd(n)),!n)return new Xs;if(n instanceof Xs)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,l=s-r,u=(s+r)/2;return l?(e===s?o=(t-i)/l+(t&lt;i)*6:t===s?o=(i-e)/l+2:o=(e-t)/l+4,l/=u&lt;.5?s+r:2-s-r,o*=60):l=u&gt;0&amp;&amp;u&lt;1?0:o,new Xs(o,l,u,n.opacity)}function z9(n,e,t,i){return arguments.length===1?HI(n):new Xs(n,e,t,i??1)}function Xs(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}Vw(Xs,z9,BI(Qd,{brighter(n){return n=n==null?k0:Math.pow(k0,n),new Xs(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Nd:Math.pow(Nd,n),new Xs(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h&lt;0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t&lt;.5?t:1-t)*e,r=2*t-i;return new Lr(hx(n&gt;=240?n-240:n+120,r,i),hx(n,r,i),hx(n&lt;120?n+240:n-120,r,i),this.opacity)},clamp(){return new Xs(bR(this.h),ig(this.s),ig(this.l),F0(this.opacity))},displayable(){return(0&lt;=this.s&amp;&amp;this.s&lt;=1||isNaN(this.s))&amp;&amp;0&lt;=this.l&amp;&amp;this.l&lt;=1&amp;&amp;0&lt;=this.opacity&amp;&amp;this.opacity&lt;=1},formatHsl(){const n=F0(this.opacity);return`${n===1?&quot;hsl(&quot;:&quot;hsla(&quot;}${bR(this.h)}, ${ig(this.s)*100}%, ${ig(this.l)*100}%${n===1?&quot;)&quot;:`, ${n})`}`}}));function bR(n){return n=(n||0)%360,n&lt;0?n+360:n}function ig(n){return Math.max(0,Math.min(1,n||0))}function hx(n,e,t){return(n&lt;60?e+(t-e)*n/60:n&lt;180?t:n&lt;240?e+(t-e)*(240-n)/60:e)*255}const VI=n=&gt;()=&gt;n;function B9(n,e){return function(t){return n+t*e}}function H9(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function V9(n){return(n=+n)==1?GI:function(e,t){return t-e?H9(e,t,n):VI(isNaN(e)?t:e)}}function GI(n,e){var t=e-n;return t?B9(n,t):VI(isNaN(n)?e:n)}const xR=function n(e){var t=V9(e);function i(r,s){var o=t((r=TS(r)).r,(s=TS(s)).r),l=t(r.g,s.g),u=t(r.b,s.b),h=GI(r.opacity,s.opacity);return function(f){return r.r=o(f),r.g=l(f),r.b=u(f),r.opacity=h(f),r+&quot;&quot;}}return i.gamma=n,i}(1);function nl(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var MS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fx=new RegExp(MS.source,&quot;g&quot;);function G9(n){return function(){return n}}function j9(n){return function(e){return n(e)+&quot;&quot;}}function W9(n,e){var t=MS.lastIndex=fx.lastIndex=0,i,r,s,o=-1,l=[],u=[];for(n=n+&quot;&quot;,e=e+&quot;&quot;;(i=MS.exec(n))&amp;&amp;(r=fx.exec(e));)(s=r.index)&gt;t&amp;&amp;(s=e.slice(t,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,u.push({i:o,x:nl(i,r)})),t=fx.lastIndex;return t&lt;e.length&amp;&amp;(s=e.slice(t),l[o]?l[o]+=s:l[++o]=s),l.length&lt;2?u[0]?j9(u[0].x):G9(e):(e=u.length,function(h){for(var f=0,p;f&lt;e;++f)l[(p=u[f]).i]=p.x(h);return l.join(&quot;&quot;)})}var SR=180/Math.PI,AS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jI(n,e,t,i,r,s){var o,l,u;return(o=Math.sqrt(n*n+e*e))&amp;&amp;(n/=o,e/=o),(u=n*t+e*i)&amp;&amp;(t-=n*u,i-=e*u),(l=Math.sqrt(t*t+i*i))&amp;&amp;(t/=l,i/=l,u/=l),n*i&lt;e*t&amp;&amp;(n=-n,e=-e,u=-u,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*SR,skewX:Math.atan(u)*SR,scaleX:o,scaleY:l}}var rg;function X9(n){const e=new(typeof DOMMatrix==&quot;function&quot;?DOMMatrix:WebKitCSSMatrix)(n+&quot;&quot;);return e.isIdentity?AS:jI(e.a,e.b,e.c,e.d,e.e,e.f)}function q9(n){return n==null||(rg||(rg=document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,&quot;g&quot;)),rg.setAttribute(&quot;transform&quot;,n),!(n=rg.transform.baseVal.consolidate()))?AS:(n=n.matrix,jI(n.a,n.b,n.c,n.d,n.e,n.f))}function WI(n,e,t,i){function r(h){return h.length?h.pop()+&quot; &quot;:&quot;&quot;}function s(h,f,p,m,g,v){if(h!==p||f!==m){var x=g.push(&quot;translate(&quot;,null,e,null,t);v.push({i:x-4,x:nl(h,p)},{i:x-2,x:nl(f,m)})}else(p||m)&amp;&amp;g.push(&quot;translate(&quot;+p+e+m+t)}function o(h,f,p,m){h!==f?(h-f&gt;180?f+=360:f-h&gt;180&amp;&amp;(h+=360),m.push({i:p.push(r(p)+&quot;rotate(&quot;,null,i)-2,x:nl(h,f)})):f&amp;&amp;p.push(r(p)+&quot;rotate(&quot;+f+i)}function l(h,f,p,m){h!==f?m.push({i:p.push(r(p)+&quot;skewX(&quot;,null,i)-2,x:nl(h,f)}):f&amp;&amp;p.push(r(p)+&quot;skewX(&quot;+f+i)}function u(h,f,p,m,g,v){if(h!==p||f!==m){var x=g.push(r(g)+&quot;scale(&quot;,null,&quot;,&quot;,null,&quot;)&quot;);v.push({i:x-4,x:nl(h,p)},{i:x-2,x:nl(f,m)})}else(p!==1||m!==1)&amp;&amp;g.push(r(g)+&quot;scale(&quot;+p+&quot;,&quot;+m+&quot;)&quot;)}return function(h,f){var p=[],m=[];return h=n(h),f=n(f),s(h.translateX,h.translateY,f.translateX,f.translateY,p,m),o(h.rotate,f.rotate,p,m),l(h.skewX,f.skewX,p,m),u(h.scaleX,h.scaleY,f.scaleX,f.scaleY,p,m),h=f=null,function(g){for(var v=-1,x=m.length,b;++v&lt;x;)p[(b=m[v]).i]=b.x(g);return p.join(&quot;&quot;)}}}var Y9=WI(X9,&quot;px, &quot;,&quot;px)&quot;,&quot;deg)&quot;),K9=WI(q9,&quot;, &quot;,&quot;)&quot;,&quot;)&quot;),$9=1e-12;function wR(n){return((n=Math.exp(n))+1/n)/2}function Z9(n){return((n=Math.exp(n))-1/n)/2}function J9(n){return((n=Math.exp(2*n))-1)/(n+1)}const Q9=function n(e,t,i){function r(s,o){var l=s[0],u=s[1],h=s[2],f=o[0],p=o[1],m=o[2],g=f-l,v=p-u,x=g*g+v*v,b,_;if(x&lt;$9)_=Math.log(m/h)/e,b=function(A){return[l+A*g,u+A*v,h*Math.exp(e*A*_)]};else{var T=Math.sqrt(x),w=(m*m-h*h+i*x)/(2*h*t*T),E=(m*m-h*h-i*x)/(2*m*t*T),R=Math.log(Math.sqrt(w*w+1)-w),N=Math.log(Math.sqrt(E*E+1)-E);_=(N-R)/e,b=function(A){var D=A*_,C=wR(R),O=h/(t*T)*(C*J9(e*D+R)-Z9(R));return[l+O*g,u+O*v,h*C/wR(e*D+R)]}}return b.duration=_*1e3*e/Math.SQRT2,b}return r.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return n(o,l,u)},r}(Math.SQRT2,2,4);var ph=0,Qf=0,zf=0,XI=1e3,z0,ed,B0=0,Dc=0,Wy=0,Ld=typeof performance==&quot;object&quot;&amp;&amp;performance.now?performance:Date,qI=typeof window==&quot;object&quot;&amp;&amp;window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Gw(){return Dc||(qI(e7),Dc=Ld.now()+Wy)}function e7(){Dc=0}function H0(){this._call=this._time=this._next=null}H0.prototype=YI.prototype={constructor:H0,restart:function(n,e,t){if(typeof n!=&quot;function&quot;)throw new TypeError(&quot;callback is not a function&quot;);t=(t==null?Gw():+t)+(e==null?0:+e),!this._next&amp;&amp;ed!==this&amp;&amp;(ed?ed._next=this:z0=this,ed=this),this._call=n,this._time=t,CS()},stop:function(){this._call&amp;&amp;(this._call=null,this._time=1/0,CS())}};function YI(n,e,t){var i=new H0;return i.restart(n,e,t),i}function t7(){Gw(),++ph;for(var n=z0,e;n;)(e=Dc-n._time)&gt;=0&amp;&amp;n._call.call(void 0,e),n=n._next;--ph}function ER(){Dc=(B0=Ld.now())+Wy,ph=Qf=0;try{t7()}finally{ph=0,i7(),Dc=0}}function n7(){var n=Ld.now(),e=n-B0;e&gt;XI&amp;&amp;(Wy-=e,B0=n)}function i7(){for(var n,e=z0,t,i=1/0;e;)e._call?(i&gt;e._time&amp;&amp;(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:z0=t);ed=n,CS(i)}function CS(n){if(!ph){Qf&amp;&amp;(Qf=clearTimeout(Qf));var e=n-Dc;e&gt;24?(n&lt;1/0&amp;&amp;(Qf=setTimeout(ER,n-Ld.now()-Wy)),zf&amp;&amp;(zf=clearInterval(zf))):(zf||(B0=Ld.now(),zf=setInterval(n7,XI)),ph=1,qI(ER))}}function TR(n,e,t){var i=new H0;return e=e==null?0:+e,i.restart(r=&gt;{i.stop(),n(r+e)},e,t),i}var r7=Gy(&quot;start&quot;,&quot;end&quot;,&quot;cancel&quot;,&quot;interrupt&quot;),s7=[],KI=0,MR=1,RS=2,Pg=3,AR=4,OS=5,Lg=6;function Xy(n,e,t,i,r,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;o7(n,t,{name:e,index:i,group:r,on:r7,tween:s7,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:KI})}function jw(n,e){var t=to(n,e);if(t.state&gt;KI)throw new Error(&quot;too late; already scheduled&quot;);return t}function Ao(n,e){var t=to(n,e);if(t.state&gt;Pg)throw new Error(&quot;too late; already running&quot;);return t}function to(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error(&quot;transition not found&quot;);return t}function o7(n,e,t){var i=n.__transition,r;i[e]=t,t.timer=YI(s,0,t.time);function s(h){t.state=MR,t.timer.restart(o,t.delay,t.time),t.delay&lt;=h&amp;&amp;o(h-t.delay)}function o(h){var f,p,m,g;if(t.state!==MR)return u();for(f in i)if(g=i[f],g.name===t.name){if(g.state===Pg)return TR(o);g.state===AR?(g.state=Lg,g.timer.stop(),g.on.call(&quot;interrupt&quot;,n,n.__data__,g.index,g.group),delete i[f]):+f&lt;e&amp;&amp;(g.state=Lg,g.timer.stop(),g.on.call(&quot;cancel&quot;,n,n.__data__,g.index,g.group),delete i[f])}if(TR(function(){t.state===Pg&amp;&amp;(t.state=AR,t.timer.restart(l,t.delay,t.time),l(h))}),t.state=RS,t.on.call(&quot;start&quot;,n,n.__data__,t.index,t.group),t.state===RS){for(t.state=Pg,r=new Array(m=t.tween.length),f=0,p=-1;f&lt;m;++f)(g=t.tween[f].value.call(n,n.__data__,t.index,t.group))&amp;&amp;(r[++p]=g);r.length=p+1}}function l(h){for(var f=h&lt;t.duration?t.ease.call(null,h/t.duration):(t.timer.restart(u),t.state=OS,1),p=-1,m=r.length;++p&lt;m;)r[p].call(n,f);t.state===OS&amp;&amp;(t.on.call(&quot;end&quot;,n,n.__data__,t.index,t.group),u())}function u(){t.state=Lg,t.timer.stop(),delete i[e];for(var h in i)return;delete n.__transition}}function Ug(n,e){var t=n.__transition,i,r,s=!0,o;if(t){e=e==null?null:e+&quot;&quot;;for(o in t){if((i=t[o]).name!==e){s=!1;continue}r=i.state&gt;RS&amp;&amp;i.state&lt;OS,i.state=Lg,i.timer.stop(),i.on.call(r?&quot;interrupt&quot;:&quot;cancel&quot;,n,n.__data__,i.index,i.group),delete t[o]}s&amp;&amp;delete n.__transition}}function a7(n){return this.each(function(){Ug(this,n)})}function l7(n,e){var t,i;return function(){var r=Ao(this,n),s=r.tween;if(s!==t){i=t=s;for(var o=0,l=i.length;o&lt;l;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function c7(n,e,t){var i,r;if(typeof t!=&quot;function&quot;)throw new Error;return function(){var s=Ao(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var l={name:e,value:t},u=0,h=r.length;u&lt;h;++u)if(r[u].name===e){r[u]=l;break}u===h&amp;&amp;r.push(l)}s.tween=r}}function u7(n,e){var t=this._id;if(n+=&quot;&quot;,arguments.length&lt;2){for(var i=to(this.node(),t).tween,r=0,s=i.length,o;r&lt;s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((e==null?l7:c7)(t,n,e))}function Ww(n,e,t){var i=n._id;return n.each(function(){var r=Ao(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return to(r,i).value[e]}}function $I(n,e){var t;return(typeof e==&quot;number&quot;?nl:e instanceof Pd?xR:(t=Pd(e))?(e=t,xR):W9)(n,e)}function h7(n){return function(){this.removeAttribute(n)}}function f7(n){return function(){this.removeAttributeNS(n.space,n.local)}}function d7(n,e,t){var i,r=t+&quot;&quot;,s;return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function p7(n,e,t){var i,r=t+&quot;&quot;,s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function m7(n,e,t){var i,r,s;return function(){var o,l=t(this),u;return l==null?void this.removeAttribute(n):(o=this.getAttribute(n),u=l+&quot;&quot;,o===u?null:o===i&amp;&amp;u===r?s:(r=u,s=e(i=o,l)))}}function g7(n,e,t){var i,r,s;return function(){var o,l=t(this),u;return l==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),u=l+&quot;&quot;,o===u?null:o===i&amp;&amp;u===r?s:(r=u,s=e(i=o,l)))}}function y7(n,e){var t=jy(n),i=t===&quot;transform&quot;?K9:$I;return this.attrTween(n,typeof e==&quot;function&quot;?(t.local?g7:m7)(t,i,Ww(this,&quot;attr.&quot;+n,e)):e==null?(t.local?f7:h7)(t):(t.local?p7:d7)(t,i,e))}function _7(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function v7(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function b7(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&amp;&amp;(t=(i=s)&amp;&amp;v7(n,s)),t}return r._value=e,r}function x7(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&amp;&amp;(t=(i=s)&amp;&amp;_7(n,s)),t}return r._value=e,r}function S7(n,e){var t=&quot;attr.&quot;+n;if(arguments.length&lt;2)return(t=this.tween(t))&amp;&amp;t._value;if(e==null)return this.tween(t,null);if(typeof e!=&quot;function&quot;)throw new Error;var i=jy(n);return this.tween(t,(i.local?b7:x7)(i,e))}function w7(n,e){return function(){jw(this,n).delay=+e.apply(this,arguments)}}function E7(n,e){return e=+e,function(){jw(this,n).delay=e}}function T7(n){var e=this._id;return arguments.length?this.each((typeof n==&quot;function&quot;?w7:E7)(e,n)):to(this.node(),e).delay}function M7(n,e){return function(){Ao(this,n).duration=+e.apply(this,arguments)}}function A7(n,e){return e=+e,function(){Ao(this,n).duration=e}}function C7(n){var e=this._id;return arguments.length?this.each((typeof n==&quot;function&quot;?M7:A7)(e,n)):to(this.node(),e).duration}function R7(n,e){if(typeof e!=&quot;function&quot;)throw new Error;return function(){Ao(this,n).ease=e}}function O7(n){var e=this._id;return arguments.length?this.each(R7(e,n)):to(this.node(),e).ease}function D7(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!=&quot;function&quot;)throw new Error;Ao(this,n).ease=t}}function N7(n){if(typeof n!=&quot;function&quot;)throw new Error;return this.each(D7(this._id,n))}function I7(n){typeof n!=&quot;function&quot;&amp;&amp;(n=AI(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r&lt;t;++r)for(var s=e[r],o=s.length,l=i[r]=[],u,h=0;h&lt;o;++h)(u=s[h])&amp;&amp;n.call(u,u.__data__,h,s)&amp;&amp;l.push(u);return new ma(i,this._parents,this._name,this._id)}function P7(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=t.length,s=Math.min(i,r),o=new Array(i),l=0;l&lt;s;++l)for(var u=e[l],h=t[l],f=u.length,p=o[l]=new Array(f),m,g=0;g&lt;f;++g)(m=u[g]||h[g])&amp;&amp;(p[g]=m);for(;l&lt;i;++l)o[l]=e[l];return new ma(o,this._parents,this._name,this._id)}function L7(n){return(n+&quot;&quot;).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(&quot;.&quot;);return t&gt;=0&amp;&amp;(e=e.slice(0,t)),!e||e===&quot;start&quot;})}function U7(n,e,t){var i,r,s=L7(e)?jw:Ao;return function(){var o=s(this,n),l=o.on;l!==i&amp;&amp;(r=(i=l).copy()).on(e,t),o.on=r}}function k7(n,e){var t=this._id;return arguments.length&lt;2?to(this.node(),t).on.on(n):this.each(U7(t,n,e))}function F7(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&amp;&amp;e.removeChild(this)}}function z7(){return this.on(&quot;end.remove&quot;,F7(this._id))}function B7(n){var e=this._name,t=this._id;typeof n!=&quot;function&quot;&amp;&amp;(n=Bw(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o&lt;r;++o)for(var l=i[o],u=l.length,h=s[o]=new Array(u),f,p,m=0;m&lt;u;++m)(f=l[m])&amp;&amp;(p=n.call(f,f.__data__,m,l))&amp;&amp;(&quot;__data__&quot;in f&amp;&amp;(p.__data__=f.__data__),h[m]=p,Xy(h[m],e,t,m,h,to(f,t)));return new ma(s,this._parents,e,t)}function H7(n){var e=this._name,t=this._id;typeof n!=&quot;function&quot;&amp;&amp;(n=MI(n));for(var i=this._groups,r=i.length,s=[],o=[],l=0;l&lt;r;++l)for(var u=i[l],h=u.length,f,p=0;p&lt;h;++p)if(f=u[p]){for(var m=n.call(f,f.__data__,p,u),g,v=to(f,t),x=0,b=m.length;x&lt;b;++x)(g=m[x])&amp;&amp;Xy(g,e,t,x,m,v);s.push(m),o.push(f)}return new ma(s,o,e,t)}var V7=Jd.prototype.constructor;function G7(){return new V7(this._groups,this._parents)}function j7(n,e){var t,i,r;return function(){var s=dh(this,n),o=(this.style.removeProperty(n),dh(this,n));return s===o?null:s===t&amp;&amp;o===i?r:r=e(t=s,i=o)}}function ZI(n){return function(){this.style.removeProperty(n)}}function W7(n,e,t){var i,r=t+&quot;&quot;,s;return function(){var o=dh(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}function X7(n,e,t){var i,r,s;return function(){var o=dh(this,n),l=t(this),u=l+&quot;&quot;;return l==null&amp;&amp;(u=l=(this.style.removeProperty(n),dh(this,n))),o===u?null:o===i&amp;&amp;u===r?s:(r=u,s=e(i=o,l))}}function q7(n,e){var t,i,r,s=&quot;style.&quot;+e,o=&quot;end.&quot;+s,l;return function(){var u=Ao(this,n),h=u.on,f=u.value[s]==null?l||(l=ZI(e)):void 0;(h!==t||r!==f)&amp;&amp;(i=(t=h).copy()).on(o,r=f),u.on=i}}function Y7(n,e,t){var i=(n+=&quot;&quot;)==&quot;transform&quot;?Y9:$I;return e==null?this.styleTween(n,j7(n,i)).on(&quot;end.style.&quot;+n,ZI(n)):typeof e==&quot;function&quot;?this.styleTween(n,X7(n,i,Ww(this,&quot;style.&quot;+n,e))).each(q7(this._id,n)):this.styleTween(n,W7(n,i,e),t).on(&quot;end.style.&quot;+n,null)}function K7(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function $7(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&amp;&amp;(i=(r=o)&amp;&amp;K7(n,o,t)),i}return s._value=e,s}function Z7(n,e,t){var i=&quot;style.&quot;+(n+=&quot;&quot;);if(arguments.length&lt;2)return(i=this.tween(i))&amp;&amp;i._value;if(e==null)return this.tween(i,null);if(typeof e!=&quot;function&quot;)throw new Error;return this.tween(i,$7(n,e,t??&quot;&quot;))}function J7(n){return function(){this.textContent=n}}function Q7(n){return function(){var e=n(this);this.textContent=e??&quot;&quot;}}function eX(n){return this.tween(&quot;text&quot;,typeof n==&quot;function&quot;?Q7(Ww(this,&quot;text&quot;,n)):J7(n==null?&quot;&quot;:n+&quot;&quot;))}function tX(n){return function(e){this.textContent=n.call(this,e)}}function nX(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&amp;&amp;(e=(t=r)&amp;&amp;tX(r)),e}return i._value=n,i}function iX(n){var e=&quot;text&quot;;if(arguments.length&lt;1)return(e=this.tween(e))&amp;&amp;e._value;if(n==null)return this.tween(e,null);if(typeof n!=&quot;function&quot;)throw new Error;return this.tween(e,nX(n))}function rX(){for(var n=this._name,e=this._id,t=JI(),i=this._groups,r=i.length,s=0;s&lt;r;++s)for(var o=i[s],l=o.length,u,h=0;h&lt;l;++h)if(u=o[h]){var f=to(u,e);Xy(u,n,t,h,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ma(i,this._parents,n,t)}function sX(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--r===0&amp;&amp;s()}};t.each(function(){var h=Ao(this,i),f=h.on;f!==n&amp;&amp;(e=(n=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),h.on=e}),r===0&amp;&amp;s()})}var oX=0;function ma(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function JI(){return++oX}var $o=Jd.prototype;ma.prototype={constructor:ma,select:B7,selectAll:H7,selectChild:$o.selectChild,selectChildren:$o.selectChildren,filter:I7,merge:P7,selection:G7,transition:rX,call:$o.call,nodes:$o.nodes,node:$o.node,size:$o.size,empty:$o.empty,each:$o.each,on:k7,attr:y7,attrTween:S7,style:Y7,styleTween:Z7,text:eX,textTween:iX,remove:z7,tween:u7,delay:T7,duration:C7,ease:O7,easeVarying:N7,end:sX,[Symbol.iterator]:$o[Symbol.iterator]};function aX(n){return((n*=2)&lt;=1?n*n*n:(n-=2)*n*n+2)/2}var lX={time:null,delay:0,duration:250,ease:aX};function cX(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function uX(n){var e,t;n instanceof ma?(e=n._id,n=n._name):(e=JI(),(t=lX).time=Gw(),n=n==null?null:n+&quot;&quot;);for(var i=this._groups,r=i.length,s=0;s&lt;r;++s)for(var o=i[s],l=o.length,u,h=0;h&lt;l;++h)(u=o[h])&amp;&amp;Xy(u,n,e,h,o,t||cX(u,e));return new ma(i,this._parents,n,e)}Jd.prototype.interrupt=a7;Jd.prototype.transition=uX;const sg=n=&gt;()=&gt;n;function hX(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function aa(n,e,t){this.k=n,this.x=e,this.y=t}aa.prototype={constructor:aa,scale:function(n){return n===1?this:new aa(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&amp;e===0?this:new aa(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return&quot;translate(&quot;+this.x+&quot;,&quot;+this.y+&quot;) scale(&quot;+this.k+&quot;)&quot;}};var qy=new aa(1,0,0);QI.prototype=aa.prototype;function QI(n){for(;!n.__zoom;)if(!(n=n.parentNode))return qy;return n.__zoom}function dx(n){n.stopImmediatePropagation()}function Bf(n){n.preventDefault(),n.stopImmediatePropagation()}function fX(n){return(!n.ctrlKey||n.type===&quot;wheel&quot;)&amp;&amp;!n.button}function dX(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute(&quot;viewBox&quot;)?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function CR(){return this.__zoom||qy}function pX(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function mX(){return navigator.maxTouchPoints||&quot;ontouchstart&quot;in this}function gX(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r&gt;i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o&gt;s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function eP(){var n=fX,e=dX,t=gX,i=pX,r=mX,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Q9,h=Gy(&quot;start&quot;,&quot;zoom&quot;,&quot;end&quot;),f,p,m,g=500,v=150,x=0,b=10;function _(z){z.property(&quot;__zoom&quot;,CR).on(&quot;wheel.zoom&quot;,D,{passive:!1}).on(&quot;mousedown.zoom&quot;,C).on(&quot;dblclick.zoom&quot;,O).filter(r).on(&quot;touchstart.zoom&quot;,L).on(&quot;touchmove.zoom&quot;,V).on(&quot;touchend.zoom touchcancel.zoom&quot;,Z).style(&quot;-webkit-tap-highlight-color&quot;,&quot;rgba(0,0,0,0)&quot;)}_.transform=function(z,K,I,j){var G=z.selection?z.selection():z;G.property(&quot;__zoom&quot;,CR),z!==G?R(z,K,I,j):G.interrupt().each(function(){N(this,arguments).event(j).start().zoom(null,typeof K==&quot;function&quot;?K.apply(this,arguments):K).end()})},_.scaleBy=function(z,K,I,j){_.scaleTo(z,function(){var G=this.__zoom.k,ee=typeof K==&quot;function&quot;?K.apply(this,arguments):K;return G*ee},I,j)},_.scaleTo=function(z,K,I,j){_.transform(z,function(){var G=e.apply(this,arguments),ee=this.__zoom,F=I==null?E(G):typeof I==&quot;function&quot;?I.apply(this,arguments):I,ne=ee.invert(F),le=typeof K==&quot;function&quot;?K.apply(this,arguments):K;return t(w(T(ee,le),F,ne),G,o)},I,j)},_.translateBy=function(z,K,I,j){_.transform(z,function(){return t(this.__zoom.translate(typeof K==&quot;function&quot;?K.apply(this,arguments):K,typeof I==&quot;function&quot;?I.apply(this,arguments):I),e.apply(this,arguments),o)},null,j)},_.translateTo=function(z,K,I,j,G){_.transform(z,function(){var ee=e.apply(this,arguments),F=this.__zoom,ne=j==null?E(ee):typeof j==&quot;function&quot;?j.apply(this,arguments):j;return t(qy.translate(ne[0],ne[1]).scale(F.k).translate(typeof K==&quot;function&quot;?-K.apply(this,arguments):-K,typeof I==&quot;function&quot;?-I.apply(this,arguments):-I),ee,o)},j,G)};function T(z,K){return K=Math.max(s[0],Math.min(s[1],K)),K===z.k?z:new aa(K,z.x,z.y)}function w(z,K,I){var j=K[0]-I[0]*z.k,G=K[1]-I[1]*z.k;return j===z.x&amp;&amp;G===z.y?z:new aa(z.k,j,G)}function E(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function R(z,K,I,j){z.on(&quot;start.zoom&quot;,function(){N(this,arguments).event(j).start()}).on(&quot;interrupt.zoom end.zoom&quot;,function(){N(this,arguments).event(j).end()}).tween(&quot;zoom&quot;,function(){var G=this,ee=arguments,F=N(G,ee).event(j),ne=e.apply(G,ee),le=I==null?E(ne):typeof I==&quot;function&quot;?I.apply(G,ee):I,ce=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),ie=G.__zoom,oe=typeof K==&quot;function&quot;?K.apply(G,ee):K,ae=u(ie.invert(le).concat(ce/ie.k),oe.invert(le).concat(ce/oe.k));return function(ue){if(ue===1)ue=oe;else{var ve=ae(ue),He=ce/ve[2];ue=new aa(He,le[0]-ve[0]*He,le[1]-ve[1]*He)}F.zoom(null,ue)}})}function N(z,K,I){return!I&amp;&amp;z.__zooming||new A(z,K)}function A(z,K){this.that=z,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,K),this.taps=0}A.prototype={event:function(z){return z&amp;&amp;(this.sourceEvent=z),this},start:function(){return++this.active===1&amp;&amp;(this.that.__zooming=this,this.emit(&quot;start&quot;)),this},zoom:function(z,K){return this.mouse&amp;&amp;z!==&quot;mouse&quot;&amp;&amp;(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&amp;&amp;z!==&quot;touch&quot;&amp;&amp;(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&amp;&amp;z!==&quot;touch&quot;&amp;&amp;(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit(&quot;zoom&quot;),this},end:function(){return--this.active===0&amp;&amp;(delete this.that.__zooming,this.emit(&quot;end&quot;)),this},emit:function(z){var K=$r(this.that).datum();h.call(z,this.that,new hX(z,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:h}),K)}};function D(z,...K){if(!n.apply(this,arguments))return;var I=N(this,K).event(z),j=this.__zoom,G=Math.max(s[0],Math.min(s[1],j.k*Math.pow(2,i.apply(this,arguments)))),ee=js(z);if(I.wheel)(I.mouse[0][0]!==ee[0]||I.mouse[0][1]!==ee[1])&amp;&amp;(I.mouse[1]=j.invert(I.mouse[0]=ee)),clearTimeout(I.wheel);else{if(j.k===G)return;I.mouse=[ee,j.invert(ee)],Ug(this),I.start()}Bf(z),I.wheel=setTimeout(F,v),I.zoom(&quot;mouse&quot;,t(w(T(j,G),I.mouse[0],I.mouse[1]),I.extent,o));function F(){I.wheel=null,I.end()}}function C(z,...K){if(m||!n.apply(this,arguments))return;var I=z.currentTarget,j=N(this,K,!0).event(z),G=$r(z.view).on(&quot;mousemove.zoom&quot;,le,!0).on(&quot;mouseup.zoom&quot;,ce,!0),ee=js(z,I),F=z.clientX,ne=z.clientY;kI(z.view),dx(z),j.mouse=[ee,this.__zoom.invert(ee)],Ug(this),j.start();function le(ie){if(Bf(ie),!j.moved){var oe=ie.clientX-F,ae=ie.clientY-ne;j.moved=oe*oe+ae*ae&gt;x}j.event(ie).zoom(&quot;mouse&quot;,t(w(j.that.__zoom,j.mouse[0]=js(ie,I),j.mouse[1]),j.extent,o))}function ce(ie){G.on(&quot;mousemove.zoom mouseup.zoom&quot;,null),FI(ie.view,j.moved),Bf(ie),j.event(ie).end()}}function O(z,...K){if(n.apply(this,arguments)){var I=this.__zoom,j=js(z.changedTouches?z.changedTouches[0]:z,this),G=I.invert(j),ee=I.k*(z.shiftKey?.5:2),F=t(w(T(I,ee),j,G),e.apply(this,K),o);Bf(z),l&gt;0?$r(this).transition().duration(l).call(R,F,j,z):$r(this).call(_.transform,F,j,z)}}function L(z,...K){if(n.apply(this,arguments)){var I=z.touches,j=I.length,G=N(this,K,z.changedTouches.length===j).event(z),ee,F,ne,le;for(dx(z),F=0;F&lt;j;++F)ne=I[F],le=js(ne,this),le=[le,this.__zoom.invert(le),ne.identifier],G.touch0?!G.touch1&amp;&amp;G.touch0[2]!==le[2]&amp;&amp;(G.touch1=le,G.taps=0):(G.touch0=le,ee=!0,G.taps=1+!!f);f&amp;&amp;(f=clearTimeout(f)),ee&amp;&amp;(G.taps&lt;2&amp;&amp;(p=le[0],f=setTimeout(function(){f=null},g)),Ug(this),G.start())}}function V(z,...K){if(this.__zooming){var I=N(this,K).event(z),j=z.changedTouches,G=j.length,ee,F,ne,le;for(Bf(z),ee=0;ee&lt;G;++ee)F=j[ee],ne=js(F,this),I.touch0&amp;&amp;I.touch0[2]===F.identifier?I.touch0[0]=ne:I.touch1&amp;&amp;I.touch1[2]===F.identifier&amp;&amp;(I.touch1[0]=ne);if(F=I.that.__zoom,I.touch1){var ce=I.touch0[0],ie=I.touch0[1],oe=I.touch1[0],ae=I.touch1[1],ue=(ue=oe[0]-ce[0])*ue+(ue=oe[1]-ce[1])*ue,ve=(ve=ae[0]-ie[0])*ve+(ve=ae[1]-ie[1])*ve;F=T(F,Math.sqrt(ue/ve)),ne=[(ce[0]+oe[0])/2,(ce[1]+oe[1])/2],le=[(ie[0]+ae[0])/2,(ie[1]+ae[1])/2]}else if(I.touch0)ne=I.touch0[0],le=I.touch0[1];else return;I.zoom(&quot;touch&quot;,t(w(F,ne,le),I.extent,o))}}function Z(z,...K){if(this.__zooming){var I=N(this,K).event(z),j=z.changedTouches,G=j.length,ee,F;for(dx(z),m&amp;&amp;clearTimeout(m),m=setTimeout(function(){m=null},g),ee=0;ee&lt;G;++ee)F=j[ee],I.touch0&amp;&amp;I.touch0[2]===F.identifier?delete I.touch0:I.touch1&amp;&amp;I.touch1[2]===F.identifier&amp;&amp;delete I.touch1;if(I.touch1&amp;&amp;!I.touch0&amp;&amp;(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&amp;&amp;(F=js(F,this),Math.hypot(p[0]-F[0],p[1]-F[1])&lt;b)){var ne=$r(this).on(&quot;dblclick.zoom&quot;);ne&amp;&amp;ne.apply(this,arguments)}}}return _.wheelDelta=function(z){return arguments.length?(i=typeof z==&quot;function&quot;?z:sg(+z),_):i},_.filter=function(z){return arguments.length?(n=typeof z==&quot;function&quot;?z:sg(!!z),_):n},_.touchable=function(z){return arguments.length?(r=typeof z==&quot;function&quot;?z:sg(!!z),_):r},_.extent=function(z){return arguments.length?(e=typeof z==&quot;function&quot;?z:sg([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),_):e},_.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],_):[s[0],s[1]]},_.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(z){return arguments.length?(t=z,_):t},_.duration=function(z){return arguments.length?(l=+z,_):l},_.interpolate=function(z){return arguments.length?(u=z,_):u},_.on=function(){var z=h.on.apply(h,arguments);return z===h?_:z},_.clickDistance=function(z){return arguments.length?(x=(z=+z)*z,_):Math.sqrt(x)},_.tapDistance=function(z){return arguments.length?(b=+z,_):b},_}const wo={error001:()=&gt;&quot;[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001&quot;,error002:()=&gt;&quot;It looks like you&#x27;ve created a new nodeTypes or edgeTypes object. If this wasn&#x27;t on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.&quot;,error003:n=&gt;`Node type &quot;${n}&quot; not found. Using fallback type &quot;default&quot;.`,error004:()=&gt;&quot;The React Flow parent container needs a width and a height to render the graph.&quot;,error005:()=&gt;&quot;Only child nodes can use a parent extent.&quot;,error006:()=&gt;&quot;Can&#x27;t create edge. An edge needs a source and a target.&quot;,error007:n=&gt;`The old edge with id=${n} does not exist.`,error009:n=&gt;`Marker type &quot;${n}&quot; doesn&#x27;t exist.`,error008:(n,{id:e,sourceHandle:t,targetHandle:i})=&gt;`Couldn&#x27;t create edge for ${n} handle id: &quot;${n===&quot;source&quot;?t:i}&quot;, edge id: ${e}.`,error010:()=&gt;&quot;Handle: No node id found. Make sure to only use a Handle inside a custom Node.&quot;,error011:n=&gt;`Edge type &quot;${n}&quot; not found. Using fallback type &quot;default&quot;.`,error012:n=&gt;`Node with id &quot;${n}&quot; does not exist, it may have been removed. This can happen when a node is deleted before the &quot;onNodeClick&quot; handler is called.`,error013:(n=&quot;react&quot;)=&gt;`It seems that you haven&#x27;t loaded the styles. Please import &#x27;@xyflow/${n}/dist/style.css&#x27; or base.css to make sure everything is working properly.`,error014:()=&gt;&quot;useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.&quot;,error015:()=&gt;&quot;It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.&quot;},Ud=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tP=[&quot;Enter&quot;,&quot; &quot;,&quot;Escape&quot;];var mh;(function(n){n.Strict=&quot;strict&quot;,n.Loose=&quot;loose&quot;})(mh||(mh={}));var Ec;(function(n){n.Free=&quot;free&quot;,n.Vertical=&quot;vertical&quot;,n.Horizontal=&quot;horizontal&quot;})(Ec||(Ec={}));var kd;(function(n){n.Partial=&quot;partial&quot;,n.Full=&quot;full&quot;})(kd||(kd={}));const nP={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var al;(function(n){n.Bezier=&quot;default&quot;,n.Straight=&quot;straight&quot;,n.Step=&quot;step&quot;,n.SmoothStep=&quot;smoothstep&quot;,n.SimpleBezier=&quot;simplebezier&quot;})(al||(al={}));var V0;(function(n){n.Arrow=&quot;arrow&quot;,n.ArrowClosed=&quot;arrowclosed&quot;})(V0||(V0={}));var Mt;(function(n){n.Left=&quot;left&quot;,n.Top=&quot;top&quot;,n.Right=&quot;right&quot;,n.Bottom=&quot;bottom&quot;})(Mt||(Mt={}));const RR={[Mt.Left]:Mt.Right,[Mt.Right]:Mt.Left,[Mt.Top]:Mt.Bottom,[Mt.Bottom]:Mt.Top};function iP(n){return n===null?null:n?&quot;valid&quot;:&quot;invalid&quot;}const rP=n=&gt;&quot;id&quot;in n&amp;&amp;&quot;source&quot;in n&amp;&amp;&quot;target&quot;in n,yX=n=&gt;&quot;id&quot;in n&amp;&amp;&quot;position&quot;in n&amp;&amp;!(&quot;source&quot;in n)&amp;&amp;!(&quot;target&quot;in n),Xw=n=&gt;&quot;id&quot;in n&amp;&amp;&quot;internals&quot;in n&amp;&amp;!(&quot;source&quot;in n)&amp;&amp;!(&quot;target&quot;in n),ep=(n,e=[0,0])=&gt;{const{width:t,height:i}=ga(n),r=n.origin??e,s=t*r[0],o=i*r[1];return{x:n.position.x-s,y:n.position.y-o}},_X=(n,e={nodeOrigin:[0,0],nodeLookup:void 0})=&gt;{if(n.length===0)return{x:0,y:0,width:0,height:0};const t=n.reduce((i,r)=&gt;{const s=typeof r==&quot;string&quot;;let o=!e.nodeLookup&amp;&amp;!s?r:void 0;e.nodeLookup&amp;&amp;(o=s?e.nodeLookup.get(r):Xw(r)?r:e.nodeLookup.get(r.id));const l=o?G0(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Yy(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ky(t)},tp=(n,e={})=&gt;{if(n.size===0)return{x:0,y:0,width:0,height:0};let t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(i=&gt;{if(e.filter===void 0||e.filter(i)){const r=G0(i);t=Yy(t,r)}}),Ky(t)},sP=(n,e,[t,i,r]=[0,0,1],s=!1,o=!1)=&gt;{const l={...np(e,[t,i,r]),width:e.width/r,height:e.height/r},u=[];for(const h of n.values()){const{measured:f,selectable:p=!0,hidden:m=!1}=h;if(o&amp;&amp;!p||m)continue;const g=f.width??h.width??h.initialWidth??null,v=f.height??h.height??h.initialHeight??null,x=Fd(l,yh(h)),b=(g??0)*(v??0),_=s&amp;&amp;x&gt;0;(!h.internals.handleBounds||_||x&gt;=b||h.dragging)&amp;&amp;u.push(h)}return u},vX=(n,e)=&gt;{const t=new Set;return n.forEach(i=&gt;{t.add(i.id)}),e.filter(i=&gt;t.has(i.source)||t.has(i.target))};function DS(n,e){const t=new Map,i=e!=null&amp;&amp;e.nodes?new Set(e.nodes.map(r=&gt;r.id)):null;return n.forEach(r=&gt;{r.measured.width&amp;&amp;r.measured.height&amp;&amp;((e==null?void 0:e.includeHiddenNodes)||!r.hidden)&amp;&amp;(!i||i.has(r.id))&amp;&amp;t.set(r.id,r)}),t}async function NS({nodes:n,width:e,height:t,panZoom:i,minZoom:r,maxZoom:s},o){if(n.size===0)return Promise.resolve(!1);const l=tp(n),u=qw(l,e,t,(o==null?void 0:o.minZoom)??r,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await i.setViewport(u,{duration:o==null?void 0:o.duration}),Promise.resolve(!0)}function oP({nodeId:n,nextPosition:e,nodeLookup:t,nodeOrigin:i=[0,0],nodeExtent:r,onError:s}){const o=t.get(n),l=o.parentId?t.get(o.parentId):void 0,{x:u,y:h}=l?l.internals.positionAbsolute:{x:0,y:0},f=o.origin??i;let p=r;if(o.extent===&quot;parent&quot;&amp;&amp;!o.expandParent)if(!l)s==null||s(&quot;005&quot;,wo.error005());else{const g=l.measured.width,v=l.measured.height;g&amp;&amp;v&amp;&amp;(p=[[u,h],[u+g,h+v]])}else l&amp;&amp;_h(o.extent)&amp;&amp;(p=[[o.extent[0][0]+u,o.extent[0][1]+h],[o.extent[1][0]+u,o.extent[1][1]+h]]);const m=_h(p)?Nc(e,p,o.measured):e;return(o.measured.width===void 0||o.measured.height===void 0)&amp;&amp;(s==null||s(&quot;015&quot;,wo.error015())),{position:{x:m.x-u+(o.measured.width??0)*f[0],y:m.y-h+(o.measured.height??0)*f[1]},positionAbsolute:m}}async function bX({nodesToRemove:n=[],edgesToRemove:e=[],nodes:t,edges:i,onBeforeDelete:r}){const s=new Set(n.map(m=&gt;m.id)),o=[];for(const m of t){if(m.deletable===!1)continue;const g=s.has(m.id),v=!g&amp;&amp;m.parentId&amp;&amp;o.find(x=&gt;x.id===m.parentId);(g||v)&amp;&amp;o.push(m)}const l=new Set(e.map(m=&gt;m.id)),u=i.filter(m=&gt;m.deletable!==!1),f=vX(o,u);for(const m of u)l.has(m.id)&amp;&amp;!f.find(v=&gt;v.id===m.id)&amp;&amp;f.push(m);if(!r)return{edges:f,nodes:o};const p=await r({nodes:o,edges:f});return typeof p==&quot;boolean&quot;?p?{edges:f,nodes:o}:{edges:[],nodes:[]}:p}const gh=(n,e=0,t=1)=&gt;Math.min(Math.max(n,e),t),Nc=(n={x:0,y:0},e,t)=&gt;({x:gh(n.x,e[0][0],e[1][0]-((t==null?void 0:t.width)??0)),y:gh(n.y,e[0][1],e[1][1]-((t==null?void 0:t.height)??0))});function aP(n,e,t){const{width:i,height:r}=ga(t),{x:s,y:o}=t.internals.positionAbsolute;return Nc(n,[[s,o],[s+i,o+r]],e)}const OR=(n,e,t)=&gt;n&lt;e?gh(Math.abs(n-e),1,e)/e:n&gt;t?-gh(Math.abs(n-t),1,e)/e:0,lP=(n,e,t=15,i=40)=&gt;{const r=OR(n.x,i,e.width-i)*t,s=OR(n.y,i,e.height-i)*t;return[r,s]},Yy=(n,e)=&gt;({x:Math.min(n.x,e.x),y:Math.min(n.y,e.y),x2:Math.max(n.x2,e.x2),y2:Math.max(n.y2,e.y2)}),IS=({x:n,y:e,width:t,height:i})=&gt;({x:n,y:e,x2:n+t,y2:e+i}),Ky=({x:n,y:e,x2:t,y2:i})=&gt;({x:n,y:e,width:t-n,height:i-e}),yh=(n,e=[0,0])=&gt;{var r,s;const{x:t,y:i}=Xw(n)?n.internals.positionAbsolute:ep(n,e);return{x:t,y:i,width:((r=n.measured)==null?void 0:r.width)??n.width??n.initialWidth??0,height:((s=n.measured)==null?void 0:s.height)??n.height??n.initialHeight??0}},G0=(n,e=[0,0])=&gt;{var r,s;const{x:t,y:i}=Xw(n)?n.internals.positionAbsolute:ep(n,e);return{x:t,y:i,x2:t+(((r=n.measured)==null?void 0:r.width)??n.width??n.initialWidth??0),y2:i+(((s=n.measured)==null?void 0:s.height)??n.height??n.initialHeight??0)}},cP=(n,e)=&gt;Ky(Yy(IS(n),IS(e))),Fd=(n,e)=&gt;{const t=Math.max(0,Math.min(n.x+n.width,e.x+e.width)-Math.max(n.x,e.x)),i=Math.max(0,Math.min(n.y+n.height,e.y+e.height)-Math.max(n.y,e.y));return Math.ceil(t*i)},DR=n=&gt;Ys(n.width)&amp;&amp;Ys(n.height)&amp;&amp;Ys(n.x)&amp;&amp;Ys(n.y),Ys=n=&gt;!isNaN(n)&amp;&amp;isFinite(n),xX=(n,e)=&gt;{},$y=(n,e=[1,1])=&gt;({x:e[0]*Math.round(n.x/e[0]),y:e[1]*Math.round(n.y/e[1])}),np=({x:n,y:e},[t,i,r],s=!1,o=[1,1])=&gt;{const l={x:(n-t)/r,y:(e-i)/r};return s?$y(l,o):l},uP=({x:n,y:e},[t,i,r])=&gt;({x:n*r+t,y:e*r+i}),qw=(n,e,t,i,r,s)=&gt;{const o=e/(n.width*(1+s)),l=t/(n.height*(1+s)),u=Math.min(o,l),h=gh(u,i,r),f=n.x+n.width/2,p=n.y+n.height/2,m=e/2-f*h,g=t/2-p*h;return{x:m,y:g,zoom:h}},j0=()=&gt;{var n;return typeof navigator&lt;&quot;u&quot;&amp;&amp;((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf(&quot;Mac&quot;))&gt;=0};function _h(n){return n!==void 0&amp;&amp;n!==&quot;parent&quot;}function ga(n){var e,t;return{width:((e=n.measured)==null?void 0:e.width)??n.width??n.initialWidth??0,height:((t=n.measured)==null?void 0:t.height)??n.height??n.initialHeight??0}}function hP(n){var e,t;return(((e=n.measured)==null?void 0:e.width)??n.width??n.initialWidth)!==void 0&amp;&amp;(((t=n.measured)==null?void 0:t.height)??n.height??n.initialHeight)!==void 0}function fP(n,e={width:0,height:0},t,i,r){const s={...n},o=i.get(t);if(o){const l=o.origin||r;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function NR(n,e){if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function fd(n,{snapGrid:e=[0,0],snapToGrid:t=!1,transform:i,containerBounds:r}){const{x:s,y:o}=ha(n),l=np({x:s-((r==null?void 0:r.left)??0),y:o-((r==null?void 0:r.top)??0)},i),{x:u,y:h}=t?$y(l,e):l;return{xSnapped:u,ySnapped:h,...l}}const Zy=n=&gt;({width:n.offsetWidth,height:n.offsetHeight}),dP=n=&gt;{var e;return((e=n==null?void 0:n.getRootNode)==null?void 0:e.call(n))||(window==null?void 0:window.document)},SX=[&quot;INPUT&quot;,&quot;SELECT&quot;,&quot;TEXTAREA&quot;];function PS(n){var i,r;const e=((r=(i=n.composedPath)==null?void 0:i.call(n))==null?void 0:r[0])||n.target;return(e==null?void 0:e.nodeType)!==1?!1:SX.includes(e.nodeName)||e.hasAttribute(&quot;contenteditable&quot;)||!!e.closest(&quot;.nokey&quot;)}const pP=n=&gt;&quot;clientX&quot;in n,ha=(n,e)=&gt;{var s,o;const t=pP(n),i=t?n.clientX:(s=n.touches)==null?void 0:s[0].clientX,r=t?n.clientY:(o=n.touches)==null?void 0:o[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},IR=(n,e,t,i,r)=&gt;{const s=e.querySelectorAll(`.${n}`);return!s||!s.length?null:Array.from(s).map(o=&gt;{const l=o.getBoundingClientRect();return{id:o.getAttribute(&quot;data-handleid&quot;),type:n,nodeId:r,position:o.getAttribute(&quot;data-handlepos&quot;),x:(l.left-t.left)/i,y:(l.top-t.top)/i,...Zy(o)}})};function mP({sourceX:n,sourceY:e,targetX:t,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=n*.125+r*.375+o*.375+t*.125,h=e*.125+s*.375+l*.375+i*.125,f=Math.abs(u-n),p=Math.abs(h-e);return[u,h,f,p]}function og(n,e){return n&gt;=0?.5*n:e*25*Math.sqrt(-n)}function PR({pos:n,x1:e,y1:t,x2:i,y2:r,c:s}){switch(n){case Mt.Left:return[e-og(e-i,s),t];case Mt.Right:return[e+og(i-e,s),t];case Mt.Top:return[e,t-og(t-r,s)];case Mt.Bottom:return[e,t+og(r-t,s)]}}function gP({sourceX:n,sourceY:e,sourcePosition:t=Mt.Bottom,targetX:i,targetY:r,targetPosition:s=Mt.Top,curvature:o=.25}){const[l,u]=PR({pos:t,x1:n,y1:e,x2:i,y2:r,c:o}),[h,f]=PR({pos:s,x1:i,y1:r,x2:n,y2:e,c:o}),[p,m,g,v]=mP({sourceX:n,sourceY:e,targetX:i,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:h,targetControlY:f});return[`M${n},${e} C${l},${u} ${h},${f} ${i},${r}`,p,m,g,v]}function yP({sourceX:n,sourceY:e,targetX:t,targetY:i}){const r=Math.abs(t-n)/2,s=t&lt;n?t+r:t-r,o=Math.abs(i-e)/2,l=i&lt;e?i+o:i-o;return[s,l,r,o]}function wX({sourceNode:n,targetNode:e,selected:t=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const s=t||e.selected||n.selected,o=Math.max(n.internals.z||0,e.internals.z||0,1e3);return i+(s?o:0)}function EX({sourceNode:n,targetNode:e,width:t,height:i,transform:r}){const s=Yy(G0(n),G0(e));s.x===s.x2&amp;&amp;(s.x2+=1),s.y===s.y2&amp;&amp;(s.y2+=1);const o={x:-r[0]/r[2],y:-r[1]/r[2],width:t/r[2],height:i/r[2]};return Fd(o,Ky(s))&gt;0}const TX=({source:n,sourceHandle:e,target:t,targetHandle:i})=&gt;`xy-edge__${n}${e||&quot;&quot;}-${t}${i||&quot;&quot;}`,MX=(n,e)=&gt;e.some(t=&gt;t.source===n.source&amp;&amp;t.target===n.target&amp;&amp;(t.sourceHandle===n.sourceHandle||!t.sourceHandle&amp;&amp;!n.sourceHandle)&amp;&amp;(t.targetHandle===n.targetHandle||!t.targetHandle&amp;&amp;!n.targetHandle)),_P=(n,e)=&gt;{if(!n.source||!n.target)return e;let t;return rP(n)?t={...n}:t={...n,id:TX(n)},MX(t,e)?e:(t.sourceHandle===null&amp;&amp;delete t.sourceHandle,t.targetHandle===null&amp;&amp;delete t.targetHandle,e.concat(t))};function vP({sourceX:n,sourceY:e,targetX:t,targetY:i}){const[r,s,o,l]=yP({sourceX:n,sourceY:e,targetX:t,targetY:i});return[`M ${n},${e}L ${t},${i}`,r,s,o,l]}const LR={[Mt.Left]:{x:-1,y:0},[Mt.Right]:{x:1,y:0},[Mt.Top]:{x:0,y:-1},[Mt.Bottom]:{x:0,y:1}},AX=({source:n,sourcePosition:e=Mt.Bottom,target:t})=&gt;e===Mt.Left||e===Mt.Right?n.x&lt;t.x?{x:1,y:0}:{x:-1,y:0}:n.y&lt;t.y?{x:0,y:1}:{x:0,y:-1},UR=(n,e)=&gt;Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2));function CX({source:n,sourcePosition:e=Mt.Bottom,target:t,targetPosition:i=Mt.Top,center:r,offset:s}){const o=LR[e],l=LR[i],u={x:n.x+o.x*s,y:n.y+o.y*s},h={x:t.x+l.x*s,y:t.y+l.y*s},f=AX({source:u,sourcePosition:e,target:h}),p=f.x!==0?&quot;x&quot;:&quot;y&quot;,m=f[p];let g=[],v,x;const b={x:0,y:0},_={x:0,y:0},[T,w,E,R]=yP({sourceX:n.x,sourceY:n.y,targetX:t.x,targetY:t.y});if(o[p]*l[p]===-1){v=r.x??T,x=r.y??w;const A=[{x:v,y:u.y},{x:v,y:h.y}],D=[{x:u.x,y:x},{x:h.x,y:x}];o[p]===m?g=p===&quot;x&quot;?A:D:g=p===&quot;x&quot;?D:A}else{const A=[{x:u.x,y:h.y}],D=[{x:h.x,y:u.y}];if(p===&quot;x&quot;?g=o.x===m?D:A:g=o.y===m?A:D,e===i){const Z=Math.abs(n[p]-t[p]);if(Z&lt;=s){const z=Math.min(s-1,s-Z);o[p]===m?b[p]=(u[p]&gt;n[p]?-1:1)*z:_[p]=(h[p]&gt;t[p]?-1:1)*z}}if(e!==i){const Z=p===&quot;x&quot;?&quot;y&quot;:&quot;x&quot;,z=o[p]===l[Z],K=u[Z]&gt;h[Z],I=u[Z]&lt;h[Z];(o[p]===1&amp;&amp;(!z&amp;&amp;K||z&amp;&amp;I)||o[p]!==1&amp;&amp;(!z&amp;&amp;I||z&amp;&amp;K))&amp;&amp;(g=p===&quot;x&quot;?A:D)}const C={x:u.x+b.x,y:u.y+b.y},O={x:h.x+_.x,y:h.y+_.y},L=Math.max(Math.abs(C.x-g[0].x),Math.abs(O.x-g[0].x)),V=Math.max(Math.abs(C.y-g[0].y),Math.abs(O.y-g[0].y));L&gt;=V?(v=(C.x+O.x)/2,x=g[0].y):(v=g[0].x,x=(C.y+O.y)/2)}return[[n,{x:u.x+b.x,y:u.y+b.y},...g,{x:h.x+_.x,y:h.y+_.y},t],v,x,E,R]}function RX(n,e,t,i){const r=Math.min(UR(n,e)/2,UR(e,t)/2,i),{x:s,y:o}=e;if(n.x===s&amp;&amp;s===t.x||n.y===o&amp;&amp;o===t.y)return`L${s} ${o}`;if(n.y===o){const h=n.x&lt;t.x?-1:1,f=n.y&lt;t.y?1:-1;return`L ${s+r*h},${o}Q ${s},${o} ${s},${o+r*f}`}const l=n.x&lt;t.x?1:-1,u=n.y&lt;t.y?-1:1;return`L ${s},${o+r*u}Q ${s},${o} ${s+r*l},${o}`}function LS({sourceX:n,sourceY:e,sourcePosition:t=Mt.Bottom,targetX:i,targetY:r,targetPosition:s=Mt.Top,borderRadius:o=5,centerX:l,centerY:u,offset:h=20}){const[f,p,m,g,v]=CX({source:{x:n,y:e},sourcePosition:t,target:{x:i,y:r},targetPosition:s,center:{x:l,y:u},offset:h});return[f.reduce((b,_,T)=&gt;{let w=&quot;&quot;;return T&gt;0&amp;&amp;T&lt;f.length-1?w=RX(f[T-1],_,f[T+1],o):w=`${T===0?&quot;M&quot;:&quot;L&quot;}${_.x} ${_.y}`,b+=w,b},&quot;&quot;),p,m,g,v]}function kR(n){var e;return n&amp;&amp;!!(n.internals.handleBounds||(e=n.handles)!=null&amp;&amp;e.length)&amp;&amp;!!(n.measured.width||n.width||n.initialWidth)}function OX(n){var p;const{sourceNode:e,targetNode:t}=n;if(!kR(e)||!kR(t))return null;const i=e.internals.handleBounds||FR(e.handles),r=t.internals.handleBounds||FR(t.handles),s=zR((i==null?void 0:i.source)??[],n.sourceHandle),o=zR(n.connectionMode===mh.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),n.targetHandle);if(!s||!o)return(p=n.onError)==null||p.call(n,&quot;008&quot;,wo.error008(s?&quot;target&quot;:&quot;source&quot;,{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const l=(s==null?void 0:s.position)||Mt.Bottom,u=(o==null?void 0:o.position)||Mt.Top,h=zd(e,s,l),f=zd(t,o,u);return{sourceX:h.x,sourceY:h.y,targetX:f.x,targetY:f.y,sourcePosition:l,targetPosition:u}}function FR(n){if(!n)return null;const e=[],t=[];for(const i of n)i.width=i.width??1,i.height=i.height??1,i.type===&quot;source&quot;?e.push(i):i.type===&quot;target&quot;&amp;&amp;t.push(i);return{source:e,target:t}}function zd(n,e,t=Mt.Left,i=!1){const r=((e==null?void 0:e.x)??0)+n.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+n.internals.positionAbsolute.y,{width:o,height:l}=e??ga(n);if(i)return{x:r+o/2,y:s+l/2};switch((e==null?void 0:e.position)??t){case Mt.Top:return{x:r+o/2,y:s};case Mt.Right:return{x:r+o,y:s+l/2};case Mt.Bottom:return{x:r+o/2,y:s+l};case Mt.Left:return{x:r,y:s+l/2}}}function zR(n,e){return n&amp;&amp;(e?n.find(t=&gt;t.id===e):n[0])||null}function US(n,e){return n?typeof n==&quot;string&quot;?n:`${e?`${e}__`:&quot;&quot;}${Object.keys(n).sort().map(i=&gt;`${i}=${n[i]}`).join(&quot;&amp;&quot;)}`:&quot;&quot;}function DX(n,{id:e,defaultColor:t,defaultMarkerStart:i,defaultMarkerEnd:r}){const s=new Set;return n.reduce((o,l)=&gt;([l.markerStart||i,l.markerEnd||r].forEach(u=&gt;{if(u&amp;&amp;typeof u==&quot;object&quot;){const h=US(u,e);s.has(h)||(o.push({id:h,color:u.color||t,...u}),s.add(h))}}),o),[]).sort((o,l)=&gt;o.id.localeCompare(l.id))}const Yw={nodeOrigin:[0,0],nodeExtent:Ud,elevateNodesOnSelect:!0,defaults:{}},NX={...Yw,checkEquality:!0};function Kw(n,e){const t={...n};for(const i in e)e[i]!==void 0&amp;&amp;(t[i]=e[i]);return t}function IX(n,e,t){const i=Kw(Yw,t);for(const r of n.values())if(r.parentId)$w(r,n,e,i);else{const s=ep(r,i.nodeOrigin),o=_h(r.extent)?r.extent:i.nodeExtent,l=Nc(s,o,ga(r));r.internals.positionAbsolute=l}}function kS(n,e,t,i){var l,u;const r=Kw(NX,i),s=new Map(e),o=r!=null&amp;&amp;r.elevateNodesOnSelect?1e3:0;e.clear(),t.clear();for(const h of n){let f=s.get(h.id);if(r.checkEquality&amp;&amp;h===(f==null?void 0:f.internals.userNode))e.set(h.id,f);else{const p=ep(h,r.nodeOrigin),m=_h(h.extent)?h.extent:r.nodeExtent,g=Nc(p,m,ga(h));f={...r.defaults,...h,measured:{width:(l=h.measured)==null?void 0:l.width,height:(u=h.measured)==null?void 0:u.height},internals:{positionAbsolute:g,handleBounds:h.measured?f==null?void 0:f.internals.handleBounds:void 0,z:bP(h,o),userNode:h}},e.set(h.id,f)}h.parentId&amp;&amp;$w(f,e,t,i)}}function PX(n,e){if(!n.parentId)return;const t=e.get(n.parentId);t?t.set(n.id,n):e.set(n.parentId,new Map([[n.id,n]]))}function $w(n,e,t,i){const{elevateNodesOnSelect:r,nodeOrigin:s,nodeExtent:o}=Kw(Yw,i),l=n.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}PX(n,t);const h=r?1e3:0,{x:f,y:p,z:m}=LX(n,u,s,o,h),{positionAbsolute:g}=n.internals,v=f!==g.x||p!==g.y;(v||m!==n.internals.z)&amp;&amp;e.set(n.id,{...n,internals:{...n.internals,positionAbsolute:v?{x:f,y:p}:g,z:m}})}function bP(n,e){return(Ys(n.zIndex)?n.zIndex:0)+(n.selected?e:0)}function LX(n,e,t,i,r){const{x:s,y:o}=e.internals.positionAbsolute,l=ga(n),u=ep(n,t),h=_h(n.extent)?Nc(u,n.extent,l):u;let f=Nc({x:s+h.x,y:o+h.y},i,l);n.extent===&quot;parent&quot;&amp;&amp;(f=aP(f,l,e));const p=bP(n,r),m=e.internals.z??0;return{x:f.x,y:f.y,z:m&gt;p?m:p}}function Zw(n,e,t,i=[0,0]){var o;const r=[],s=new Map;for(const l of n){const u=e.get(l.parentId);if(!u)continue;const h=((o=s.get(l.parentId))==null?void 0:o.expandedRect)??yh(u),f=cP(h,l.rect);s.set(l.parentId,{expandedRect:f,parent:u})}return s.size&gt;0&amp;&amp;s.forEach(({expandedRect:l,parent:u},h)=&gt;{var w;const f=u.internals.positionAbsolute,p=ga(u),m=u.origin??i,g=l.x&lt;f.x?Math.round(Math.abs(f.x-l.x)):0,v=l.y&lt;f.y?Math.round(Math.abs(f.y-l.y)):0,x=Math.max(p.width,Math.round(l.width)),b=Math.max(p.height,Math.round(l.height)),_=(x-p.width)*m[0],T=(b-p.height)*m[1];(g&gt;0||v&gt;0||_||T)&amp;&amp;(r.push({id:h,type:&quot;position&quot;,position:{x:u.position.x-g+_,y:u.position.y-v+T}}),(w=t.get(h))==null||w.forEach(E=&gt;{n.some(R=&gt;R.id===E.id)||r.push({id:E.id,type:&quot;position&quot;,position:{x:E.position.x+g,y:E.position.y+v}})})),(p.width&lt;l.width||p.height&lt;l.height||g||v)&amp;&amp;r.push({id:h,type:&quot;dimensions&quot;,setAttributes:!0,dimensions:{width:x+(g?m[0]*g-_:0),height:b+(v?m[1]*v-T:0)}})}),r}function UX(n,e,t,i,r,s){const o=i==null?void 0:i.querySelector(&quot;.xyflow__viewport&quot;);let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],h=window.getComputedStyle(o),{m22:f}=new window.DOMMatrixReadOnly(h.transform),p=[];for(const m of n.values()){const g=e.get(m.id);if(!g)continue;if(g.hidden){e.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),l=!0;continue}const v=Zy(m.nodeElement),x=g.measured.width!==v.width||g.measured.height!==v.height;if(!!(v.width&amp;&amp;v.height&amp;&amp;(x||!g.internals.handleBounds||m.force))){const _=m.nodeElement.getBoundingClientRect(),T=_h(g.extent)?g.extent:s;let{positionAbsolute:w}=g.internals;g.parentId&amp;&amp;g.extent===&quot;parent&quot;?w=aP(w,v,e.get(g.parentId)):T&amp;&amp;(w=Nc(w,T,v));const E={...g,measured:v,internals:{...g.internals,positionAbsolute:w,handleBounds:{source:IR(&quot;source&quot;,m.nodeElement,_,f,g.id),target:IR(&quot;target&quot;,m.nodeElement,_,f,g.id)}}};e.set(g.id,E),g.parentId&amp;&amp;$w(E,e,t,{nodeOrigin:r}),l=!0,x&amp;&amp;(u.push({id:g.id,type:&quot;dimensions&quot;,dimensions:v}),g.expandParent&amp;&amp;g.parentId&amp;&amp;p.push({id:g.id,parentId:g.parentId,rect:yh(E,r)}))}}if(p.length&gt;0){const m=Zw(p,e,t,r);u.push(...m)}return{changes:u,updatedInternals:l}}async function kX({delta:n,panZoom:e,transform:t,translateExtent:i,width:r,height:s}){if(!e||!n.x&amp;&amp;!n.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:t[0]+n.x,y:t[1]+n.y,zoom:t[2]},[[0,0],[r,s]],i),l=!!o&amp;&amp;(o.x!==t[0]||o.y!==t[1]||o.k!==t[2]);return Promise.resolve(l)}function BR(n,e,t,i,r,s){let o=r;const l=i.get(o)||new Map;i.set(o,l.set(t,e)),o=`${r}-${n}`;const u=i.get(o)||new Map;if(i.set(o,u.set(t,e)),s){o=`${r}-${n}-${s}`;const h=i.get(o)||new Map;i.set(o,h.set(t,e))}}function xP(n,e,t){n.clear(),e.clear();for(const i of t){const{source:r,target:s,sourceHandle:o=null,targetHandle:l=null}=i,u={edgeId:i.id,source:r,target:s,sourceHandle:o,targetHandle:l},h=`${r}-${o}--${s}-${l}`,f=`${s}-${l}--${r}-${o}`;BR(&quot;source&quot;,u,f,n,r,o),BR(&quot;target&quot;,u,h,n,s,l),e.set(i.id,i)}}function SP(n,e){if(!n.parentId)return!1;const t=e.get(n.parentId);return t?t.selected?!0:SP(t,e):!1}function HR(n,e,t){var r;let i=n;do{if((r=i==null?void 0:i.matches)!=null&amp;&amp;r.call(i,e))return!0;if(i===t)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function FX(n,e,t,i){const r=new Map;for(const[s,o]of n)if((o.selected||o.id===i)&amp;&amp;(!o.parentId||!SP(o,n))&amp;&amp;(o.draggable||e&amp;&amp;typeof o.draggable&gt;&quot;u&quot;)){const l=n.get(s);l&amp;&amp;r.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:t.x-l.internals.positionAbsolute.x,y:t.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return r}function px({nodeId:n,dragItems:e,nodeLookup:t,dragging:i=!0}){var o,l,u;const r=[];for(const[h,f]of e){const p=(o=t.get(h))==null?void 0:o.internals.userNode;p&amp;&amp;r.push({...p,position:f.position,dragging:i})}if(!n)return[r[0],r];const s=(l=t.get(n))==null?void 0:l.internals.userNode;return[s?{...s,position:((u=e.get(n))==null?void 0:u.position)||s.position,dragging:i}:r[0],r]}function zX({onNodeMouseDown:n,getStoreItems:e,onDragStart:t,onDrag:i,onDragStop:r}){let s={x:null,y:null},o=0,l=new Map,u=!1,h={x:0,y:0},f=null,p=!1,m=null,g=!1;function v({noDragClassName:b,handleSelector:_,domNode:T,isSelectable:w,nodeId:E,nodeClickDistance:R=0}){m=$r(T);function N({x:O,y:L},V){const{nodeLookup:Z,nodeExtent:z,snapGrid:K,snapToGrid:I,nodeOrigin:j,onNodeDrag:G,onSelectionDrag:ee,onError:F,updateNodePositions:ne}=e();s={x:O,y:L};let le=!1,ce={x:0,y:0,x2:0,y2:0};if(l.size&gt;1&amp;&amp;z){const ie=tp(l);ce=IS(ie)}for(const[ie,oe]of l){if(!Z.has(ie))continue;let ae={x:O-oe.distance.x,y:L-oe.distance.y};I&amp;&amp;(ae=$y(ae,K));let ue=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];if(l.size&gt;1&amp;&amp;z&amp;&amp;!oe.extent){const{positionAbsolute:Xe}=oe.internals,lt=Xe.x-ce.x+z[0][0],We=Xe.x+oe.measured.width-ce.x2+z[1][0],Ye=Xe.y-ce.y+z[0][1],Q=Xe.y+oe.measured.height-ce.y2+z[1][1];ue=[[lt,Ye],[We,Q]]}const{position:ve,positionAbsolute:He}=oP({nodeId:ie,nextPosition:ae,nodeLookup:Z,nodeExtent:ue,nodeOrigin:j,onError:F});le=le||oe.position.x!==ve.x||oe.position.y!==ve.y,oe.position=ve,oe.internals.positionAbsolute=He}if(le&amp;&amp;(ne(l,!0),V&amp;&amp;(i||G||!E&amp;&amp;ee))){const[ie,oe]=px({nodeId:E,dragItems:l,nodeLookup:Z});i==null||i(V,l,ie,oe),G==null||G(V,ie,oe),E||ee==null||ee(V,oe)}}async function A(){if(!f)return;const{transform:O,panBy:L,autoPanSpeed:V,autoPanOnNodeDrag:Z}=e();if(!Z){u=!1,cancelAnimationFrame(o);return}const[z,K]=lP(h,f,V);(z!==0||K!==0)&amp;&amp;(s.x=(s.x??0)-z/O[2],s.y=(s.y??0)-K/O[2],await L({x:z,y:K})&amp;&amp;N(s,null)),o=requestAnimationFrame(A)}function D(O){var le;const{nodeLookup:L,multiSelectionActive:V,nodesDraggable:Z,transform:z,snapGrid:K,snapToGrid:I,selectNodesOnDrag:j,onNodeDragStart:G,onSelectionDragStart:ee,unselectNodesAndEdges:F}=e();p=!0,(!j||!w)&amp;&amp;!V&amp;&amp;E&amp;&amp;((le=L.get(E))!=null&amp;&amp;le.selected||F()),w&amp;&amp;j&amp;&amp;E&amp;&amp;(n==null||n(E));const ne=fd(O.sourceEvent,{transform:z,snapGrid:K,snapToGrid:I,containerBounds:f});if(s=ne,l=FX(L,Z,ne,E),l.size&gt;0&amp;&amp;(t||G||!E&amp;&amp;ee)){const[ce,ie]=px({nodeId:E,dragItems:l,nodeLookup:L});t==null||t(O.sourceEvent,l,ce,ie),G==null||G(O.sourceEvent,ce,ie),E||ee==null||ee(O.sourceEvent,ie)}}const C=zI().clickDistance(R).on(&quot;start&quot;,O=&gt;{const{domNode:L,nodeDragThreshold:V,transform:Z,snapGrid:z,snapToGrid:K}=e();f=(L==null?void 0:L.getBoundingClientRect())||null,g=!1,V===0&amp;&amp;D(O),s=fd(O.sourceEvent,{transform:Z,snapGrid:z,snapToGrid:K,containerBounds:f}),h=ha(O.sourceEvent,f)}).on(&quot;drag&quot;,O=&gt;{const{autoPanOnNodeDrag:L,transform:V,snapGrid:Z,snapToGrid:z,nodeDragThreshold:K,nodeLookup:I}=e(),j=fd(O.sourceEvent,{transform:V,snapGrid:Z,snapToGrid:z,containerBounds:f});if((O.sourceEvent.type===&quot;touchmove&quot;&amp;&amp;O.sourceEvent.touches.length&gt;1||E&amp;&amp;!I.has(E))&amp;&amp;(g=!0),!g){if(!u&amp;&amp;L&amp;&amp;p&amp;&amp;(u=!0,A()),!p){const G=j.xSnapped-(s.x??0),ee=j.ySnapped-(s.y??0);Math.sqrt(G*G+ee*ee)&gt;K&amp;&amp;D(O)}(s.x!==j.xSnapped||s.y!==j.ySnapped)&amp;&amp;l&amp;&amp;p&amp;&amp;(h=ha(O.sourceEvent,f),N(j,O.sourceEvent))}}).on(&quot;end&quot;,O=&gt;{if(!(!p||g)&amp;&amp;(u=!1,p=!1,cancelAnimationFrame(o),l.size&gt;0)){const{nodeLookup:L,updateNodePositions:V,onNodeDragStop:Z,onSelectionDragStop:z}=e();if(V(l,!1),r||Z||!E&amp;&amp;z){const[K,I]=px({nodeId:E,dragItems:l,nodeLookup:L,dragging:!1});r==null||r(O.sourceEvent,l,K,I),Z==null||Z(O.sourceEvent,K,I),E||z==null||z(O.sourceEvent,I)}}}).filter(O=&gt;{const L=O.target;return!O.button&amp;&amp;(!b||!HR(L,`.${b}`,T))&amp;&amp;(!_||HR(L,_,T))});m.call(C)}function x(){m==null||m.on(&quot;.drag&quot;,null)}return{update:v,destroy:x}}function BX(n,e,t){const i=[],r={x:n.x-t,y:n.y-t,width:t*2,height:t*2};for(const s of e.values())Fd(r,yh(s))&gt;0&amp;&amp;i.push(s);return i}const HX=250;function VX(n,e,t,i){var l,u;let r=[],s=1/0;const o=BX(n,t,e+HX);for(const h of o){const f=[...((l=h.internals.handleBounds)==null?void 0:l.source)??[],...((u=h.internals.handleBounds)==null?void 0:u.target)??[]];for(const p of f){if(i.nodeId===p.nodeId&amp;&amp;i.type===p.type&amp;&amp;i.id===p.id)continue;const{x:m,y:g}=zd(h,p,p.position,!0),v=Math.sqrt(Math.pow(m-n.x,2)+Math.pow(g-n.y,2));v&gt;e||(v&lt;s?(r=[{...p,x:m,y:g}],s=v):v===s&amp;&amp;r.push({...p,x:m,y:g}))}}if(!r.length)return null;if(r.length&gt;1){const h=i.type===&quot;source&quot;?&quot;target&quot;:&quot;source&quot;;return r.find(f=&gt;f.type===h)??r[0]}return r[0]}function wP(n,e,t,i,r,s=!1){var h,f,p;const o=i.get(n);if(!o)return null;const l=r===&quot;strict&quot;?(h=o.internals.handleBounds)==null?void 0:h[e]:[...((f=o.internals.handleBounds)==null?void 0:f.source)??[],...((p=o.internals.handleBounds)==null?void 0:p.target)??[]],u=(t?l==null?void 0:l.find(m=&gt;m.id===t):l==null?void 0:l[0])??null;return u&amp;&amp;s?{...u,...zd(o,u,u.position,!0)}:u}function EP(n,e){return n||(e!=null&amp;&amp;e.classList.contains(&quot;target&quot;)?&quot;target&quot;:e!=null&amp;&amp;e.classList.contains(&quot;source&quot;)?&quot;source&quot;:null)}function GX(n,e){let t=null;return e?t=!0:n&amp;&amp;!e&amp;&amp;(t=!1),t}const TP=()=&gt;!0;function jX(n,{connectionMode:e,connectionRadius:t,handleId:i,nodeId:r,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:h,autoPanOnConnect:f,flowId:p,panBy:m,cancelConnection:g,onConnectStart:v,onConnect:x,onConnectEnd:b,isValidConnection:_=TP,onReconnectEnd:T,updateConnection:w,getTransform:E,getFromHandle:R,autoPanSpeed:N}){const A=dP(n.target);let D=0,C;const{x:O,y:L}=ha(n),V=A==null?void 0:A.elementFromPoint(O,L),Z=EP(s,V),z=l==null?void 0:l.getBoundingClientRect();if(!z||!Z)return;const K=wP(r,Z,i,u,e);if(!K)return;let I=ha(n,z),j=!1,G=null,ee=!1,F=null;function ne(){if(!f||!z)return;const[He,Xe]=lP(I,z,N);m({x:He,y:Xe}),D=requestAnimationFrame(ne)}const le={...K,nodeId:r,type:Z,position:K.position},ce=u.get(r),oe={inProgress:!0,isValid:null,from:zd(ce,le,Mt.Left,!0),fromHandle:le,fromPosition:le.position,fromNode:ce,to:I,toHandle:null,toPosition:RR[le.position],toNode:null};w(oe);let ae=oe;v==null||v(n,{nodeId:r,handleId:i,handleType:Z});function ue(He){if(!R()||!le){ve(He);return}const Xe=E();I=ha(He,z),C=VX(np(I,Xe,!1,[1,1]),t,u,le),j||(ne(),j=!0);const lt=MP(He,{handle:C,connectionMode:e,fromNodeId:r,fromHandleId:i,fromType:o?&quot;target&quot;:&quot;source&quot;,isValidConnection:_,doc:A,lib:h,flowId:p,nodeLookup:u});F=lt.handleDomNode,G=lt.connection,ee=GX(!!C,lt.isValid);const We={...ae,isValid:ee,to:C&amp;&amp;ee?uP({x:C.x,y:C.y},Xe):I,toHandle:lt.toHandle,toPosition:ee&amp;&amp;lt.toHandle?lt.toHandle.position:RR[le.position],toNode:lt.toHandle?u.get(lt.toHandle.nodeId):null};ee&amp;&amp;C&amp;&amp;ae.toHandle&amp;&amp;We.toHandle&amp;&amp;ae.toHandle.type===We.toHandle.type&amp;&amp;ae.toHandle.nodeId===We.toHandle.nodeId&amp;&amp;ae.toHandle.id===We.toHandle.id&amp;&amp;ae.to.x===We.to.x&amp;&amp;ae.to.y===We.to.y||(w(We),ae=We)}function ve(He){(C||F)&amp;&amp;G&amp;&amp;ee&amp;&amp;(x==null||x(G));const{inProgress:Xe,...lt}=ae,We={...lt,toPosition:ae.toHandle?ae.toPosition:null};b==null||b(He,We),s&amp;&amp;(T==null||T(He,We)),g(),cancelAnimationFrame(D),j=!1,ee=!1,G=null,F=null,A.removeEventListener(&quot;mousemove&quot;,ue),A.removeEventListener(&quot;mouseup&quot;,ve),A.removeEventListener(&quot;touchmove&quot;,ue),A.removeEventListener(&quot;touchend&quot;,ve)}A.addEventListener(&quot;mousemove&quot;,ue),A.addEventListener(&quot;mouseup&quot;,ve),A.addEventListener(&quot;touchmove&quot;,ue),A.addEventListener(&quot;touchend&quot;,ve)}function MP(n,{handle:e,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:h=TP,nodeLookup:f}){const p=s===&quot;target&quot;,m=e?o.querySelector(`.${l}-flow__handle[data-id=&quot;${u}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}&quot;]`):null,{x:g,y:v}=ha(n),x=o.elementFromPoint(g,v),b=x!=null&amp;&amp;x.classList.contains(`${l}-flow__handle`)?x:m,_={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const T=EP(void 0,b),w=b.getAttribute(&quot;data-nodeid&quot;),E=b.getAttribute(&quot;data-handleid&quot;),R=b.classList.contains(&quot;connectable&quot;),N=b.classList.contains(&quot;connectableend&quot;);if(!w||!T)return _;const A={source:p?w:i,sourceHandle:p?E:r,target:p?i:w,targetHandle:p?r:E};_.connection=A;const C=R&amp;&amp;N&amp;&amp;(t===mh.Strict?p&amp;&amp;T===&quot;source&quot;||!p&amp;&amp;T===&quot;target&quot;:w!==i||E!==r);_.isValid=C&amp;&amp;h(A),_.toHandle=wP(w,T,E,f,t,!1)}return _}const FS={onPointerDown:jX,isValid:MP};function WX({domNode:n,panZoom:e,getTransform:t,getViewScale:i}){const r=$r(n);function s({translateExtent:l,width:u,height:h,zoomStep:f=10,pannable:p=!0,zoomable:m=!0,inversePan:g=!1}){const v=w=&gt;{const E=t();if(w.sourceEvent.type!==&quot;wheel&quot;||!e)return;const R=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*f,N=E[2]*Math.pow(2,R);e.scaleTo(N)};let x=[0,0];const b=w=&gt;{(w.sourceEvent.type===&quot;mousedown&quot;||w.sourceEvent.type===&quot;touchstart&quot;)&amp;&amp;(x=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY])},_=w=&gt;{const E=t();if(w.sourceEvent.type!==&quot;mousemove&quot;&amp;&amp;w.sourceEvent.type!==&quot;touchmove&quot;||!e)return;const R=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY],N=[R[0]-x[0],R[1]-x[1]];x=R;const A=i()*Math.max(E[2],Math.log(E[2]))*(g?-1:1),D={x:E[0]-N[0]*A,y:E[1]-N[1]*A},C=[[0,0],[u,h]];e.setViewportConstrained({x:D.x,y:D.y,zoom:E[2]},C,l)},T=eP().on(&quot;start&quot;,b).on(&quot;zoom&quot;,p?_:null).on(&quot;zoom.wheel&quot;,m?v:null);r.call(T,{})}function o(){r.on(&quot;zoom&quot;,null)}return{update:s,destroy:o,pointer:js}}const XX=(n,e)=&gt;n.x!==e.x||n.y!==e.y||n.zoom!==e.k,Jy=n=&gt;({x:n.x,y:n.y,zoom:n.k}),mx=({x:n,y:e,zoom:t})=&gt;qy.translate(n,e).scale(t),$u=(n,e)=&gt;n.target.closest(`.${e}`),AP=(n,e)=&gt;e===2&amp;&amp;Array.isArray(n)&amp;&amp;n.includes(2),gx=(n,e=0,t=()=&gt;{})=&gt;{const i=typeof e==&quot;number&quot;&amp;&amp;e&gt;0;return i||t(),i?n.transition().duration(e).on(&quot;end&quot;,t):n},CP=n=&gt;{const e=n.ctrlKey&amp;&amp;j0()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*e};function qX({zoomPanValues:n,noWheelClassName:e,d3Selection:t,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:h}){return f=&gt;{if($u(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const p=t.property(&quot;__zoom&quot;).k||1;if(f.ctrlKey&amp;&amp;o){const b=js(f),_=CP(f),T=p*Math.pow(2,_);i.scaleTo(t,T,b,f);return}const m=f.deltaMode===1?20:1;let g=r===Ec.Vertical?0:f.deltaX*m,v=r===Ec.Horizontal?0:f.deltaY*m;!j0()&amp;&amp;f.shiftKey&amp;&amp;r!==Ec.Vertical&amp;&amp;(g=f.deltaY*m,v=0),i.translateBy(t,-(g/p)*s,-(v/p)*s,{internal:!0});const x=Jy(t.property(&quot;__zoom&quot;));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,l==null||l(f,x)),n.isPanScrolling&amp;&amp;(u==null||u(f,x),n.panScrollTimeout=setTimeout(()=&gt;{h==null||h(f,x),n.isPanScrolling=!1},150))}}function YX({noWheelClassName:n,preventScrolling:e,d3ZoomHandler:t}){return function(i,r){if(!e&amp;&amp;i.type===&quot;wheel&quot;&amp;&amp;!i.ctrlKey||$u(i,n))return null;i.preventDefault(),t.call(this,i,r)}}function KX({zoomPanValues:n,onDraggingChange:e,onPanZoomStart:t}){return i=&gt;{var s,o,l;if((s=i.sourceEvent)!=null&amp;&amp;s.internal)return;const r=Jy(i.transform);n.mouseButton=((o=i.sourceEvent)==null?void 0:o.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=r,((l=i.sourceEvent)==null?void 0:l.type)===&quot;mousedown&quot;&amp;&amp;e(!0),t&amp;&amp;(t==null||t(i.sourceEvent,r))}}function $X({zoomPanValues:n,panOnDrag:e,onPaneContextMenu:t,onTransformChange:i,onPanZoom:r}){return s=&gt;{var o,l;n.usedRightMouseButton=!!(t&amp;&amp;AP(e,n.mouseButton??0)),(o=s.sourceEvent)!=null&amp;&amp;o.sync||i([s.transform.x,s.transform.y,s.transform.k]),r&amp;&amp;!((l=s.sourceEvent)!=null&amp;&amp;l.internal)&amp;&amp;(r==null||r(s.sourceEvent,Jy(s.transform)))}}function ZX({zoomPanValues:n,panOnDrag:e,panOnScroll:t,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:s}){return o=&gt;{var l;if(!((l=o.sourceEvent)!=null&amp;&amp;l.internal)&amp;&amp;(n.isZoomingOrPanning=!1,s&amp;&amp;AP(e,n.mouseButton??0)&amp;&amp;!n.usedRightMouseButton&amp;&amp;o.sourceEvent&amp;&amp;s(o.sourceEvent),n.usedRightMouseButton=!1,i(!1),r&amp;&amp;XX(n.prevViewport,o.transform))){const u=Jy(o.transform);n.prevViewport=u,clearTimeout(n.timerId),n.timerId=setTimeout(()=&gt;{r==null||r(o.sourceEvent,u)},t?150:0)}}}function JX({zoomActivationKeyPressed:n,zoomOnScroll:e,zoomOnPinch:t,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:h}){return f=&gt;{var v;const p=n||e,m=t&amp;&amp;f.ctrlKey;if(f.button===1&amp;&amp;f.type===&quot;mousedown&quot;&amp;&amp;($u(f,`${h}-flow__node`)||$u(f,`${h}-flow__edge`)))return!0;if(!i&amp;&amp;!p&amp;&amp;!r&amp;&amp;!s&amp;&amp;!t||o||$u(f,l)&amp;&amp;f.type===&quot;wheel&quot;||$u(f,u)&amp;&amp;(f.type!==&quot;wheel&quot;||r&amp;&amp;f.type===&quot;wheel&quot;&amp;&amp;!n)||!t&amp;&amp;f.ctrlKey&amp;&amp;f.type===&quot;wheel&quot;)return!1;if(!t&amp;&amp;f.type===&quot;touchstart&quot;&amp;&amp;((v=f.touches)==null?void 0:v.length)&gt;1)return f.preventDefault(),!1;if(!p&amp;&amp;!r&amp;&amp;!m&amp;&amp;f.type===&quot;wheel&quot;||!i&amp;&amp;(f.type===&quot;mousedown&quot;||f.type===&quot;touchstart&quot;)||Array.isArray(i)&amp;&amp;!i.includes(f.button)&amp;&amp;f.type===&quot;mousedown&quot;)return!1;const g=Array.isArray(i)&amp;&amp;i.includes(f.button)||!f.button||f.button&lt;=1;return(!f.ctrlKey||f.type===&quot;wheel&quot;)&amp;&amp;g}}function QX({domNode:n,minZoom:e,maxZoom:t,paneClickDistance:i,translateExtent:r,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:h}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=n.getBoundingClientRect(),m=eP().clickDistance(!Ys(i)||i&lt;0?0:i).scaleExtent([e,t]).translateExtent(r),g=$r(n).call(m);w({x:s.x,y:s.y,zoom:gh(s.zoom,e,t)},[[0,0],[p.width,p.height]],r);const v=g.on(&quot;wheel.zoom&quot;),x=g.on(&quot;dblclick.zoom&quot;);m.wheelDelta(CP);function b(V,Z){return g?new Promise(z=&gt;{m==null||m.transform(gx(g,Z==null?void 0:Z.duration,()=&gt;z(!0)),V)}):Promise.resolve(!1)}function _({noWheelClassName:V,noPanClassName:Z,onPaneContextMenu:z,userSelectionActive:K,panOnScroll:I,panOnDrag:j,panOnScrollMode:G,panOnScrollSpeed:ee,preventScrolling:F,zoomOnPinch:ne,zoomOnScroll:le,zoomOnDoubleClick:ce,zoomActivationKeyPressed:ie,lib:oe,onTransformChange:ae}){K&amp;&amp;!f.isZoomingOrPanning&amp;&amp;T();const ve=I&amp;&amp;!ie&amp;&amp;!K?qX({zoomPanValues:f,noWheelClassName:V,d3Selection:g,d3Zoom:m,panOnScrollMode:G,panOnScrollSpeed:ee,zoomOnPinch:ne,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):YX({noWheelClassName:V,preventScrolling:F,d3ZoomHandler:v});if(g.on(&quot;wheel.zoom&quot;,ve,{passive:!1}),!K){const Xe=KX({zoomPanValues:f,onDraggingChange:h,onPanZoomStart:l});m.on(&quot;start&quot;,Xe);const lt=$X({zoomPanValues:f,panOnDrag:j,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:ae});m.on(&quot;zoom&quot;,lt);const We=ZX({zoomPanValues:f,panOnDrag:j,panOnScroll:I,onPaneContextMenu:z,onPanZoomEnd:u,onDraggingChange:h});m.on(&quot;end&quot;,We)}const He=JX({zoomActivationKeyPressed:ie,panOnDrag:j,zoomOnScroll:le,panOnScroll:I,zoomOnDoubleClick:ce,zoomOnPinch:ne,userSelectionActive:K,noPanClassName:Z,noWheelClassName:V,lib:oe});m.filter(He),ce?g.on(&quot;dblclick.zoom&quot;,x):g.on(&quot;dblclick.zoom&quot;,null)}function T(){m.on(&quot;zoom&quot;,null)}async function w(V,Z,z){const K=mx(V),I=m==null?void 0:m.constrain()(K,Z,z);return I&amp;&amp;await b(I),new Promise(j=&gt;j(I))}async function E(V,Z){const z=mx(V);return await b(z,Z),new Promise(K=&gt;K(z))}function R(V){if(g){const Z=mx(V),z=g.property(&quot;__zoom&quot;);(z.k!==V.zoom||z.x!==V.x||z.y!==V.y)&amp;&amp;(m==null||m.transform(g,Z,null,{sync:!0}))}}function N(){const V=g?QI(g.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function A(V,Z){return g?new Promise(z=&gt;{m==null||m.scaleTo(gx(g,Z==null?void 0:Z.duration,()=&gt;z(!0)),V)}):Promise.resolve(!1)}function D(V,Z){return g?new Promise(z=&gt;{m==null||m.scaleBy(gx(g,Z==null?void 0:Z.duration,()=&gt;z(!0)),V)}):Promise.resolve(!1)}function C(V){m==null||m.scaleExtent(V)}function O(V){m==null||m.translateExtent(V)}function L(V){const Z=!Ys(V)||V&lt;0?0:V;m==null||m.clickDistance(Z)}return{update:_,destroy:T,setViewport:E,setViewportConstrained:w,getViewport:N,scaleTo:A,scaleBy:D,setScaleExtent:C,setTranslateExtent:O,syncViewport:R,setClickDistance:L}}var dd;(function(n){n.Line=&quot;line&quot;,n.Handle=&quot;handle&quot;})(dd||(dd={}));function eq({width:n,prevWidth:e,height:t,prevHeight:i,affectsX:r,affectsY:s}){const o=n-e,l=t-i,u=[o&gt;0?1:o&lt;0?-1:0,l&gt;0?1:l&lt;0?-1:0];return o&amp;&amp;r&amp;&amp;(u[0]=u[0]*-1),l&amp;&amp;s&amp;&amp;(u[1]=u[1]*-1),u}function tq(n){const e=n.includes(&quot;right&quot;)||n.includes(&quot;left&quot;),t=n.includes(&quot;bottom&quot;)||n.includes(&quot;top&quot;),i=n.includes(&quot;left&quot;),r=n.includes(&quot;top&quot;);return{isHorizontal:e,isVertical:t,affectsX:i,affectsY:r}}function Ka(n,e){return Math.max(0,e-n)}function $a(n,e){return Math.max(0,n-e)}function ag(n,e,t){return Math.max(0,e-n,n-t)}function VR(n,e){return n?!e:e}function nq(n,e,t,i,r,s,o,l){let{affectsX:u,affectsY:h}=e;const{isHorizontal:f,isVertical:p}=e,m=f&amp;&amp;p,{xSnapped:g,ySnapped:v}=t,{minWidth:x,maxWidth:b,minHeight:_,maxHeight:T}=i,{x:w,y:E,width:R,height:N,aspectRatio:A}=n;let D=Math.floor(f?g-n.pointerX:0),C=Math.floor(p?v-n.pointerY:0);const O=R+(u?-D:D),L=N+(h?-C:C),V=-s[0]*R,Z=-s[1]*N;let z=ag(O,x,b),K=ag(L,_,T);if(o){let G=0,ee=0;u&amp;&amp;D&lt;0?G=Ka(w+D+V,o[0][0]):!u&amp;&amp;D&gt;0&amp;&amp;(G=$a(w+O+V,o[1][0])),h&amp;&amp;C&lt;0?ee=Ka(E+C+Z,o[0][1]):!h&amp;&amp;C&gt;0&amp;&amp;(ee=$a(E+L+Z,o[1][1])),z=Math.max(z,G),K=Math.max(K,ee)}if(l){let G=0,ee=0;u&amp;&amp;D&gt;0?G=$a(w+D,l[0][0]):!u&amp;&amp;D&lt;0&amp;&amp;(G=Ka(w+O,l[1][0])),h&amp;&amp;C&gt;0?ee=$a(E+C,l[0][1]):!h&amp;&amp;C&lt;0&amp;&amp;(ee=Ka(E+L,l[1][1])),z=Math.max(z,G),K=Math.max(K,ee)}if(r){if(f){const G=ag(O/A,_,T)*A;if(z=Math.max(z,G),o){let ee=0;!u&amp;&amp;!h||u&amp;&amp;!h&amp;&amp;m?ee=$a(E+Z+O/A,o[1][1])*A:ee=Ka(E+Z+(u?D:-D)/A,o[0][1])*A,z=Math.max(z,ee)}if(l){let ee=0;!u&amp;&amp;!h||u&amp;&amp;!h&amp;&amp;m?ee=Ka(E+O/A,l[1][1])*A:ee=$a(E+(u?D:-D)/A,l[0][1])*A,z=Math.max(z,ee)}}if(p){const G=ag(L*A,x,b)/A;if(K=Math.max(K,G),o){let ee=0;!u&amp;&amp;!h||h&amp;&amp;!u&amp;&amp;m?ee=$a(w+L*A+V,o[1][0])/A:ee=Ka(w+(h?C:-C)*A+V,o[0][0])/A,K=Math.max(K,ee)}if(l){let ee=0;!u&amp;&amp;!h||h&amp;&amp;!u&amp;&amp;m?ee=Ka(w+L*A,l[1][0])/A:ee=$a(w+(h?C:-C)*A,l[0][0])/A,K=Math.max(K,ee)}}}C=C+(C&lt;0?K:-K),D=D+(D&lt;0?z:-z),r&amp;&amp;(m?O&gt;L*A?C=(VR(u,h)?-D:D)/A:D=(VR(u,h)?-C:C)*A:f?(C=D/A,h=u):(D=C*A,u=h));const I=u?w+D:w,j=h?E+C:E;return{width:R+(u?-D:D),height:N+(h?-C:C),x:s[0]*D*(u?-1:1)+I,y:s[1]*C*(h?-1:1)+j}}const RP={width:0,height:0,x:0,y:0},iq={...RP,pointerX:0,pointerY:0,aspectRatio:1};function rq(n){return[[0,0],[n.measured.width,n.measured.height]]}function sq(n,e,t){const i=e.position.x+n.position.x,r=e.position.y+n.position.y,s=n.measured.width??0,o=n.measured.height??0,l=t[0]*s,u=t[1]*o;return[[i-l,r-u],[i+s-l,r+o-u]]}function oq({domNode:n,nodeId:e,getStoreItems:t,onChange:i,onEnd:r}){const s=$r(n);function o({controlPosition:u,boundaries:h,keepAspectRatio:f,onResizeStart:p,onResize:m,onResizeEnd:g,shouldResize:v}){let x={...RP},b={...iq};const _=tq(u);let T,w=null,E=[],R,N,A;const D=zI().on(&quot;start&quot;,C=&gt;{const{nodeLookup:O,transform:L,snapGrid:V,snapToGrid:Z,nodeOrigin:z,paneDomNode:K}=t();if(T=O.get(e),!T)return;w=(K==null?void 0:K.getBoundingClientRect())??null;const{xSnapped:I,ySnapped:j}=fd(C.sourceEvent,{transform:L,snapGrid:V,snapToGrid:Z,containerBounds:w});x={width:T.measured.width??0,height:T.measured.height??0,x:T.position.x??0,y:T.position.y??0},b={...x,pointerX:I,pointerY:j,aspectRatio:x.width/x.height},R=void 0,T.parentId&amp;&amp;(T.extent===&quot;parent&quot;||T.expandParent)&amp;&amp;(R=O.get(T.parentId),N=R&amp;&amp;T.extent===&quot;parent&quot;?rq(R):void 0),E=[],A=void 0;for(const[G,ee]of O)if(ee.parentId===e&amp;&amp;(E.push({id:G,position:{...ee.position},extent:ee.extent}),ee.extent===&quot;parent&quot;||ee.expandParent)){const F=sq(ee,T,ee.origin??z);A?A=[[Math.min(F[0][0],A[0][0]),Math.min(F[0][1],A[0][1])],[Math.max(F[1][0],A[1][0]),Math.max(F[1][1],A[1][1])]]:A=F}p==null||p(C,{...x})}).on(&quot;drag&quot;,C=&gt;{const{transform:O,snapGrid:L,snapToGrid:V,nodeOrigin:Z}=t(),z=fd(C.sourceEvent,{transform:O,snapGrid:L,snapToGrid:V,containerBounds:w}),K=[];if(!T)return;const{x:I,y:j,width:G,height:ee}=x,F={},ne=T.origin??Z,{width:le,height:ce,x:ie,y:oe}=nq(b,_,z,h,f,ne,N,A),ae=le!==G,ue=ce!==ee,ve=ie!==I&amp;&amp;ae,He=oe!==j&amp;&amp;ue;if(!ve&amp;&amp;!He&amp;&amp;!ae&amp;&amp;!ue)return;if((ve||He||ne[0]===1||ne[1]===1)&amp;&amp;(F.x=ve?ie:x.x,F.y=He?oe:x.y,x.x=F.x,x.y=F.y,E.length&gt;0)){const Ye=ie-I,Q=oe-j;for(const Ve of E)Ve.position={x:Ve.position.x-Ye+ne[0]*(le-G),y:Ve.position.y-Q+ne[1]*(ce-ee)},K.push(Ve)}if((ae||ue)&amp;&amp;(F.width=ae?le:x.width,F.height=ue?ce:x.height,x.width=F.width,x.height=F.height),R&amp;&amp;T.expandParent){const Ye=ne[0]*(F.width??0);F.x&amp;&amp;F.x&lt;Ye&amp;&amp;(x.x=Ye,b.x=b.x-(F.x-Ye));const Q=ne[1]*(F.height??0);F.y&amp;&amp;F.y&lt;Q&amp;&amp;(x.y=Q,b.y=b.y-(F.y-Q))}const Xe=eq({width:x.width,prevWidth:G,height:x.height,prevHeight:ee,affectsX:_.affectsX,affectsY:_.affectsY}),lt={...x,direction:Xe};(v==null?void 0:v(C,lt))!==!1&amp;&amp;(m==null||m(C,lt),i(F,K))}).on(&quot;end&quot;,C=&gt;{g==null||g(C,{...x}),r==null||r()});s.call(D)}function l(){s.on(&quot;.drag&quot;,null)}return{update:o,destroy:l}}var yx={exports:{}},_x={},vx={exports:{}},bx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GR;function aq(){if(GR)return bx;GR=1;var n=Lc();function e(p,m){return p===m&amp;&amp;(p!==0||1/p===1/m)||p!==p&amp;&amp;m!==m}var t=typeof Object.is==&quot;function&quot;?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function l(p,m){var g=m(),v=i({inst:{value:g,getSnapshot:m}}),x=v[0].inst,b=v[1];return s(function(){x.value=g,x.getSnapshot=m,u(x)&amp;&amp;b({inst:x})},[p,g,m]),r(function(){return u(x)&amp;&amp;b({inst:x}),p(function(){u(x)&amp;&amp;b({inst:x})})},[p]),o(g),g}function u(p){var m=p.getSnapshot;p=p.value;try{var g=m();return!t(p,g)}catch{return!0}}function h(p,m){return m()}var f=typeof window&gt;&quot;u&quot;||typeof window.document&gt;&quot;u&quot;||typeof window.document.createElement&gt;&quot;u&quot;?h:l;return bx.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,bx}var jR;function OP(){return jR||(jR=1,vx.exports=aq()),vx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WR;function lq(){if(WR)return _x;WR=1;var n=Lc(),e=OP();function t(h,f){return h===f&amp;&amp;(h!==0||1/h===1/f)||h!==h&amp;&amp;f!==f}var i=typeof Object.is==&quot;function&quot;?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,l=n.useMemo,u=n.useDebugValue;return _x.useSyncExternalStoreWithSelector=function(h,f,p,m,g){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=l(function(){function _(N){if(!T){if(T=!0,w=N,N=m(N),g!==void 0&amp;&amp;x.hasValue){var A=x.value;if(g(A,N))return E=A}return E=N}if(A=E,i(w,N))return A;var D=m(N);return g!==void 0&amp;&amp;g(A,D)?(w=N,A):(w=N,E=D)}var T=!1,w,E,R=p===void 0?null:p;return[function(){return _(f())},R===null?void 0:function(){return _(R())}]},[f,p,m,g]);var b=r(h,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),u(b),b},_x}var XR;function cq(){return XR||(XR=1,yx.exports=lq()),yx.exports}var uq=cq();const hq=Z0(uq),fq={},qR=n=&gt;{let e;const t=new Set,i=(f,p)=&gt;{const m=typeof f==&quot;function&quot;?f(e):f;if(!Object.is(m,e)){const g=e;e=p??(typeof m!=&quot;object&quot;||m===null)?m:Object.assign({},e,m),t.forEach(v=&gt;v(e,g))}},r=()=&gt;e,u={setState:i,getState:r,getInitialState:()=&gt;h,subscribe:f=&gt;(t.add(f),()=&gt;t.delete(f)),destroy:()=&gt;{(fq?&quot;production&quot;:void 0)!==&quot;production&quot;&amp;&amp;console.warn(&quot;[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.&quot;),t.clear()}},h=e=n(i,r,u);return u},dq=n=&gt;n?qR(n):qR,{useDebugValue:pq}=md,{useSyncExternalStoreWithSelector:mq}=hq,gq=n=&gt;n;function DP(n,e=gq,t){const i=mq(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return pq(i),i}const YR=(n,e)=&gt;{const t=dq(n),i=(r,s=e)=&gt;DP(t,r,s);return Object.assign(i,t),i},yq=(n,e)=&gt;n?YR(n,e):YR;function di(n,e){if(Object.is(n,e))return!0;if(typeof n!=&quot;object&quot;||n===null||typeof e!=&quot;object&quot;||e===null)return!1;if(n instanceof Map&amp;&amp;e instanceof Map){if(n.size!==e.size)return!1;for(const[i,r]of n)if(!Object.is(r,e.get(i)))return!1;return!0}if(n instanceof Set&amp;&amp;e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(n[i],e[i]))return!1;return!0}var NP=J0();const Qy=re.createContext(null),_q=Qy.Provider,IP=wo.error001();function _n(n,e){const t=re.useContext(Qy);if(t===null)throw new Error(IP);return DP(t,n,e)}function $n(){const n=re.useContext(Qy);if(n===null)throw new Error(IP);return re.useMemo(()=&gt;({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const KR={display:&quot;none&quot;},vq={position:&quot;absolute&quot;,width:1,height:1,margin:-1,border:0,padding:0,overflow:&quot;hidden&quot;,clip:&quot;rect(0px, 0px, 0px, 0px)&quot;,clipPath:&quot;inset(100%)&quot;},PP=&quot;react-flow__node-desc&quot;,LP=&quot;react-flow__edge-desc&quot;,bq=&quot;react-flow__aria-live&quot;,xq=n=&gt;n.ariaLiveMessage;function Sq({rfId:n}){const e=_n(xq);return P.jsx(&quot;div&quot;,{id:`${bq}-${n}`,&quot;aria-live&quot;:&quot;assertive&quot;,&quot;aria-atomic&quot;:&quot;true&quot;,style:vq,children:e})}function wq({rfId:n,disableKeyboardA11y:e}){return P.jsxs(P.Fragment,{children:[P.jsxs(&quot;div&quot;,{id:`${PP}-${n}`,style:KR,children:[&quot;Press enter or space to select a node.&quot;,!e&amp;&amp;&quot;You can then use the arrow keys to move the node around.&quot;,&quot; Press delete to remove it and escape to cancel.&quot;,&quot; &quot;]}),P.jsx(&quot;div&quot;,{id:`${LP}-${n}`,style:KR,children:&quot;Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.&quot;}),!e&amp;&amp;P.jsx(Sq,{rfId:n})]})}const Eq=n=&gt;n.userSelectionActive?&quot;none&quot;:&quot;all&quot;,e_=re.forwardRef(({position:n=&quot;top-left&quot;,children:e,className:t,style:i,...r},s)=&gt;{const o=_n(Eq),l=`${n}`.split(&quot;-&quot;);return P.jsx(&quot;div&quot;,{className:Di([&quot;react-flow__panel&quot;,t,...l]),style:{...i,pointerEvents:o},ref:s,...r,children:e})});e_.displayName=&quot;Panel&quot;;function Tq({proOptions:n,position:e=&quot;bottom-right&quot;}){return n!=null&amp;&amp;n.hideAttribution?null:P.jsx(e_,{position:e,className:&quot;react-flow__attribution&quot;,&quot;data-message&quot;:&quot;Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev&quot;,children:P.jsx(&quot;a&quot;,{href:&quot;https://reactflow.dev&quot;,target:&quot;_blank&quot;,rel:&quot;noopener noreferrer&quot;,&quot;aria-label&quot;:&quot;React Flow attribution&quot;,children:&quot;React Flow&quot;})})}const Mq=n=&gt;{const e=[],t=[];for(const[,i]of n.nodeLookup)i.selected&amp;&amp;e.push(i.internals.userNode);for(const[,i]of n.edgeLookup)i.selected&amp;&amp;t.push(i);return{selectedNodes:e,selectedEdges:t}},lg=n=&gt;n.id;function Aq(n,e){return di(n.selectedNodes.map(lg),e.selectedNodes.map(lg))&amp;&amp;di(n.selectedEdges.map(lg),e.selectedEdges.map(lg))}function Cq({onSelectionChange:n}){const e=$n(),{selectedNodes:t,selectedEdges:i}=_n(Mq,Aq);return re.useEffect(()=&gt;{const r={nodes:t,edges:i};n==null||n(r),e.getState().onSelectionChangeHandlers.forEach(s=&gt;s(r))},[t,i,n]),null}const Rq=n=&gt;!!n.onSelectionChangeHandlers;function Oq({onSelectionChange:n}){const e=_n(Rq);return n||e?P.jsx(Cq,{onSelectionChange:n}):null}const UP=[0,0],Dq={x:0,y:0,zoom:1},Nq=[&quot;nodes&quot;,&quot;edges&quot;,&quot;defaultNodes&quot;,&quot;defaultEdges&quot;,&quot;onConnect&quot;,&quot;onConnectStart&quot;,&quot;onConnectEnd&quot;,&quot;onClickConnectStart&quot;,&quot;onClickConnectEnd&quot;,&quot;nodesDraggable&quot;,&quot;nodesConnectable&quot;,&quot;nodesFocusable&quot;,&quot;edgesFocusable&quot;,&quot;edgesReconnectable&quot;,&quot;elevateNodesOnSelect&quot;,&quot;elevateEdgesOnSelect&quot;,&quot;minZoom&quot;,&quot;maxZoom&quot;,&quot;nodeExtent&quot;,&quot;onNodesChange&quot;,&quot;onEdgesChange&quot;,&quot;elementsSelectable&quot;,&quot;connectionMode&quot;,&quot;snapGrid&quot;,&quot;snapToGrid&quot;,&quot;translateExtent&quot;,&quot;connectOnClick&quot;,&quot;defaultEdgeOptions&quot;,&quot;fitView&quot;,&quot;fitViewOptions&quot;,&quot;onNodesDelete&quot;,&quot;onEdgesDelete&quot;,&quot;onDelete&quot;,&quot;onNodeDrag&quot;,&quot;onNodeDragStart&quot;,&quot;onNodeDragStop&quot;,&quot;onSelectionDrag&quot;,&quot;onSelectionDragStart&quot;,&quot;onSelectionDragStop&quot;,&quot;onMoveStart&quot;,&quot;onMove&quot;,&quot;onMoveEnd&quot;,&quot;noPanClassName&quot;,&quot;nodeOrigin&quot;,&quot;autoPanOnConnect&quot;,&quot;autoPanOnNodeDrag&quot;,&quot;onError&quot;,&quot;connectionRadius&quot;,&quot;isValidConnection&quot;,&quot;selectNodesOnDrag&quot;,&quot;nodeDragThreshold&quot;,&quot;onBeforeDelete&quot;,&quot;debug&quot;,&quot;autoPanSpeed&quot;,&quot;paneClickDistance&quot;],$R=[...Nq,&quot;rfId&quot;],Iq=n=&gt;({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),ZR={translateExtent:Ud,nodeOrigin:UP,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:&quot;nopan&quot;,rfId:&quot;1&quot;,paneClickDistance:0};function Pq(n){const{setNodes:e,setEdges:t,setMinZoom:i,setMaxZoom:r,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:h}=_n(Iq,di),f=$n();re.useEffect(()=&gt;(u(n.defaultNodes,n.defaultEdges),()=&gt;{p.current=ZR,l()}),[]);const p=re.useRef(ZR);return re.useEffect(()=&gt;{for(const m of $R){const g=n[m],v=p.current[m];g!==v&amp;&amp;(typeof n[m]&gt;&quot;u&quot;||(m===&quot;nodes&quot;?e(g):m===&quot;edges&quot;?t(g):m===&quot;minZoom&quot;?i(g):m===&quot;maxZoom&quot;?r(g):m===&quot;translateExtent&quot;?s(g):m===&quot;nodeExtent&quot;?o(g):m===&quot;paneClickDistance&quot;?h(g):m===&quot;fitView&quot;?f.setState({fitViewOnInit:g}):m===&quot;fitViewOptions&quot;?f.setState({fitViewOnInitOptions:g}):f.setState({[m]:g})))}p.current=n},$R.map(m=&gt;n[m])),null}function JR(){return typeof window&gt;&quot;u&quot;||!window.matchMedia?null:window.matchMedia(&quot;(prefers-color-scheme: dark)&quot;)}function Lq(n){var i;const[e,t]=re.useState(n===&quot;system&quot;?null:n);return re.useEffect(()=&gt;{if(n!==&quot;system&quot;){t(n);return}const r=JR(),s=()=&gt;t(r!=null&amp;&amp;r.matches?&quot;dark&quot;:&quot;light&quot;);return s(),r==null||r.addEventListener(&quot;change&quot;,s),()=&gt;{r==null||r.removeEventListener(&quot;change&quot;,s)}},[n]),e!==null?e:(i=JR())!=null&amp;&amp;i.matches?&quot;dark&quot;:&quot;light&quot;}const QR=typeof document&lt;&quot;u&quot;?document:null;function Bd(n=null,e={target:QR,actInsideInputWithModifier:!0}){const[t,i]=re.useState(!1),r=re.useRef(!1),s=re.useRef(new Set([])),[o,l]=re.useMemo(()=&gt;{if(n!==null){const h=(Array.isArray(n)?n:[n]).filter(p=&gt;typeof p==&quot;string&quot;).map(p=&gt;p.replace(&quot;+&quot;,`
`).replace(`

`,`
+`).split(`
`)),f=h.reduce((p,m)=&gt;p.concat(...m),[]);return[h,f]}return[[],[]]},[n]);return re.useEffect(()=&gt;{const u=(e==null?void 0:e.target)||QR;if(n!==null){const h=m=&gt;{if(r.current=m.ctrlKey||m.metaKey||m.shiftKey,(!r.current||r.current&amp;&amp;!e.actInsideInputWithModifier)&amp;&amp;PS(m))return!1;const v=tO(m.code,l);s.current.add(m[v]),eO(o,s.current,!1)&amp;&amp;(m.preventDefault(),i(!0))},f=m=&gt;{if((!r.current||r.current&amp;&amp;!e.actInsideInputWithModifier)&amp;&amp;PS(m))return!1;const v=tO(m.code,l);eO(o,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(m[v]),m.key===&quot;Meta&quot;&amp;&amp;s.current.clear(),r.current=!1},p=()=&gt;{s.current.clear(),i(!1)};return u==null||u.addEventListener(&quot;keydown&quot;,h),u==null||u.addEventListener(&quot;keyup&quot;,f),window.addEventListener(&quot;blur&quot;,p),window.addEventListener(&quot;contextmenu&quot;,p),()=&gt;{u==null||u.removeEventListener(&quot;keydown&quot;,h),u==null||u.removeEventListener(&quot;keyup&quot;,f),window.removeEventListener(&quot;blur&quot;,p),window.removeEventListener(&quot;contextmenu&quot;,p)}}},[n,i]),t}function eO(n,e,t){return n.filter(i=&gt;t||i.length===e.size).some(i=&gt;i.every(r=&gt;e.has(r)))}function tO(n,e){return e.includes(n)?&quot;code&quot;:&quot;key&quot;}const Uq=()=&gt;{const n=$n();return re.useMemo(()=&gt;({zoomIn:e=&gt;{const{panZoom:t}=n.getState();return t?t.scaleBy(1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomOut:e=&gt;{const{panZoom:t}=n.getState();return t?t.scaleBy(1/1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomTo:(e,t)=&gt;{const{panZoom:i}=n.getState();return i?i.scaleTo(e,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},getZoom:()=&gt;n.getState().transform[2],setViewport:async(e,t)=&gt;{const{transform:[i,r,s],panZoom:o}=n.getState();return o?(await o.setViewport({x:e.x??i,y:e.y??r,zoom:e.zoom??s},{duration:t==null?void 0:t.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=&gt;{const[e,t,i]=n.getState().transform;return{x:e,y:t,zoom:i}},fitView:e=&gt;{const{nodeLookup:t,minZoom:i,maxZoom:r,panZoom:s,domNode:o}=n.getState();if(!s||!o)return Promise.resolve(!1);const l=DS(t,e),{width:u,height:h}=Zy(o);return NS({nodes:l,width:u,height:h,minZoom:i,maxZoom:r,panZoom:s},e)},setCenter:async(e,t,i)=&gt;{const{width:r,height:s,maxZoom:o,panZoom:l}=n.getState(),u=typeof(i==null?void 0:i.zoom)&lt;&quot;u&quot;?i.zoom:o,h=r/2-e*u,f=s/2-t*u;return l?(await l.setViewport({x:h,y:f,zoom:u},{duration:i==null?void 0:i.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,t)=&gt;{const{width:i,height:r,minZoom:s,maxZoom:o,panZoom:l}=n.getState(),u=qw(e,i,r,s,o,(t==null?void 0:t.padding)??.1);return l?(await l.setViewport(u,{duration:t==null?void 0:t.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,t={})=&gt;{const{transform:i,snapGrid:r,snapToGrid:s,domNode:o}=n.getState();if(!o)return e;const{x:l,y:u}=o.getBoundingClientRect(),h={x:e.x-l,y:e.y-u},f=t.snapGrid??r,p=t.snapToGrid??s;return np(h,i,p,f)},flowToScreenPosition:e=&gt;{const{transform:t,domNode:i}=n.getState();if(!i)return e;const{x:r,y:s}=i.getBoundingClientRect(),o=uP(e,t);return{x:o.x+r,y:o.y+s}}}),[])};function kP(n,e){const t=[],i=new Map,r=[];for(const s of n)if(s.type===&quot;add&quot;){r.push(s);continue}else if(s.type===&quot;remove&quot;||s.type===&quot;replace&quot;)i.set(s.id,[s]);else{const o=i.get(s.id);o?o.push(s):i.set(s.id,[s])}for(const s of e){const o=i.get(s.id);if(!o){t.push(s);continue}if(o[0].type===&quot;remove&quot;)continue;if(o[0].type===&quot;replace&quot;){t.push({...o[0].item});continue}const l={...s};for(const u of o)kq(u,l);t.push(l)}return r.length&amp;&amp;r.forEach(s=&gt;{s.index!==void 0?t.splice(s.index,0,{...s.item}):t.push({...s.item})}),t}function kq(n,e){switch(n.type){case&quot;select&quot;:{e.selected=n.selected;break}case&quot;position&quot;:{typeof n.position&lt;&quot;u&quot;&amp;&amp;(e.position=n.position),typeof n.dragging&lt;&quot;u&quot;&amp;&amp;(e.dragging=n.dragging);break}case&quot;dimensions&quot;:{typeof n.dimensions&lt;&quot;u&quot;&amp;&amp;(e.measured??(e.measured={}),e.measured.width=n.dimensions.width,e.measured.height=n.dimensions.height,n.setAttributes&amp;&amp;(e.width=n.dimensions.width,e.height=n.dimensions.height)),typeof n.resizing==&quot;boolean&quot;&amp;&amp;(e.resizing=n.resizing);break}}}function FP(n,e){return kP(n,e)}function zP(n,e){return kP(n,e)}function oc(n,e){return{id:n,type:&quot;select&quot;,selected:e}}function Zu(n,e=new Set,t=!1){const i=[];for(const[r,s]of n){const o=e.has(r);!(s.selected===void 0&amp;&amp;!o)&amp;&amp;s.selected!==o&amp;&amp;(t&amp;&amp;(s.selected=o),i.push(oc(s.id,o)))}return i}function nO({items:n=[],lookup:e}){var r;const t=[],i=new Map(n.map(s=&gt;[s.id,s]));for(const[s,o]of n.entries()){const l=e.get(o.id),u=((r=l==null?void 0:l.internals)==null?void 0:r.userNode)??l;u!==void 0&amp;&amp;u!==o&amp;&amp;t.push({id:o.id,item:o,type:&quot;replace&quot;}),u===void 0&amp;&amp;t.push({item:o,type:&quot;add&quot;,index:s})}for(const[s]of e)i.get(s)===void 0&amp;&amp;t.push({id:s,type:&quot;remove&quot;});return t}function iO(n){return{id:n.id,type:&quot;remove&quot;}}const rO=n=&gt;yX(n),Fq=n=&gt;rP(n);function BP(n){return re.forwardRef(n)}const zq=typeof window&lt;&quot;u&quot;?re.useLayoutEffect:re.useEffect;function sO(n){const[e,t]=re.useState(BigInt(0)),[i]=re.useState(()=&gt;Bq(()=&gt;t(r=&gt;r+BigInt(1))));return zq(()=&gt;{const r=i.get();r.length&amp;&amp;(n(r),i.reset())},[e]),i}function Bq(n){let e=[];return{get:()=&gt;e,reset:()=&gt;{e=[]},push:t=&gt;{e.push(t),n()}}}const HP=re.createContext(null);function Hq({children:n}){const e=$n(),t=re.useCallback(l=&gt;{const{nodes:u=[],setNodes:h,hasDefaultNodes:f,onNodesChange:p,nodeLookup:m}=e.getState();let g=u;for(const v of l)g=typeof v==&quot;function&quot;?v(g):v;f?h(g):p&amp;&amp;p(nO({items:g,lookup:m}))},[]),i=sO(t),r=re.useCallback(l=&gt;{const{edges:u=[],setEdges:h,hasDefaultEdges:f,onEdgesChange:p,edgeLookup:m}=e.getState();let g=u;for(const v of l)g=typeof v==&quot;function&quot;?v(g):v;f?h(g):p&amp;&amp;p(nO({items:g,lookup:m}))},[]),s=sO(r),o=re.useMemo(()=&gt;({nodeQueue:i,edgeQueue:s}),[]);return P.jsx(HP.Provider,{value:o,children:n})}function Vq(){const n=re.useContext(HP);if(!n)throw new Error(&quot;useBatchContext must be used within a BatchProvider&quot;);return n}const Gq=n=&gt;!!n.panZoom;function Jw(){const n=Uq(),e=$n(),t=Vq(),i=_n(Gq),r=re.useMemo(()=&gt;{const s=p=&gt;e.getState().nodeLookup.get(p),o=p=&gt;{t.nodeQueue.push(p)},l=p=&gt;{t.edgeQueue.push(p)},u=p=&gt;{var _,T;const{nodeLookup:m,nodeOrigin:g}=e.getState(),v=rO(p)?p:m.get(p.id),x=v.parentId?fP(v.position,v.measured,v.parentId,m,g):v.position,b={...v,position:x,width:((_=v.measured)==null?void 0:_.width)??v.width,height:((T=v.measured)==null?void 0:T.height)??v.height};return yh(b)},h=(p,m,g={replace:!1})=&gt;{o(v=&gt;v.map(x=&gt;{if(x.id===p){const b=typeof m==&quot;function&quot;?m(x):m;return g.replace&amp;&amp;rO(b)?b:{...x,...b}}return x}))},f=(p,m,g={replace:!1})=&gt;{l(v=&gt;v.map(x=&gt;{if(x.id===p){const b=typeof m==&quot;function&quot;?m(x):m;return g.replace&amp;&amp;Fq(b)?b:{...x,...b}}return x}))};return{getNodes:()=&gt;e.getState().nodes.map(p=&gt;({...p})),getNode:p=&gt;{var m;return(m=s(p))==null?void 0:m.internals.userNode},getInternalNode:s,getEdges:()=&gt;{const{edges:p=[]}=e.getState();return p.map(m=&gt;({...m}))},getEdge:p=&gt;e.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=&gt;{const m=Array.isArray(p)?p:[p];t.nodeQueue.push(g=&gt;[...g,...m])},addEdges:p=&gt;{const m=Array.isArray(p)?p:[p];t.edgeQueue.push(g=&gt;[...g,...m])},toObject:()=&gt;{const{nodes:p=[],edges:m=[],transform:g}=e.getState(),[v,x,b]=g;return{nodes:p.map(_=&gt;({..._})),edges:m.map(_=&gt;({..._})),viewport:{x:v,y:x,zoom:b}}},deleteElements:async({nodes:p=[],edges:m=[]})=&gt;{const{nodes:g,edges:v,onNodesDelete:x,onEdgesDelete:b,triggerNodeChanges:_,triggerEdgeChanges:T,onDelete:w,onBeforeDelete:E}=e.getState(),{nodes:R,edges:N}=await bX({nodesToRemove:p,edgesToRemove:m,nodes:g,edges:v,onBeforeDelete:E}),A=N.length&gt;0,D=R.length&gt;0;if(A){const C=N.map(iO);b==null||b(N),T(C)}if(D){const C=R.map(iO);x==null||x(R),_(C)}return(D||A)&amp;&amp;(w==null||w({nodes:R,edges:N})),{deletedNodes:R,deletedEdges:N}},getIntersectingNodes:(p,m=!0,g)=&gt;{const v=DR(p),x=v?p:u(p),b=g!==void 0;return x?(g||e.getState().nodes).filter(_=&gt;{const T=e.getState().nodeLookup.get(_.id);if(T&amp;&amp;!v&amp;&amp;(_.id===p.id||!T.internals.positionAbsolute))return!1;const w=yh(b?_:T),E=Fd(w,x);return m&amp;&amp;E&gt;0||E&gt;=x.width*x.height}):[]},isNodeIntersecting:(p,m,g=!0)=&gt;{const x=DR(p)?p:u(p);if(!x)return!1;const b=Fd(x,m);return g&amp;&amp;b&gt;0||b&gt;=x.width*x.height},updateNode:h,updateNodeData:(p,m,g={replace:!1})=&gt;{h(p,v=&gt;{const x=typeof m==&quot;function&quot;?m(v):m;return g.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},g)},updateEdge:f,updateEdgeData:(p,m,g={replace:!1})=&gt;{f(p,v=&gt;{const x=typeof m==&quot;function&quot;?m(v):m;return g.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},g)},getNodesBounds:p=&gt;{const{nodeLookup:m,nodeOrigin:g}=e.getState();return _X(p,{nodeLookup:m,nodeOrigin:g})},getHandleConnections:({type:p,id:m,nodeId:g})=&gt;{var v;return Array.from(((v=e.getState().connectionLookup.get(`${g}-${p}${m?`-${m}`:&quot;&quot;}`))==null?void 0:v.values())??[])},getNodeConnections:({type:p,handleId:m,nodeId:g})=&gt;{var v;return Array.from(((v=e.getState().connectionLookup.get(`${g}${p?m?`-${p}-${m}`:`-${p}`:&quot;&quot;}`))==null?void 0:v.values())??[])}}},[]);return re.useMemo(()=&gt;({...r,...n,viewportInitialized:i}),[i])}const oO=n=&gt;n.selected,jq={actInsideInputWithModifier:!1},Wq=typeof window&lt;&quot;u&quot;?window:void 0;function Xq({deleteKeyCode:n,multiSelectionKeyCode:e}){const t=$n(),{deleteElements:i}=Jw(),r=Bd(n,jq),s=Bd(e,{target:Wq});re.useEffect(()=&gt;{if(r){const{edges:o,nodes:l}=t.getState();i({nodes:l.filter(oO),edges:o.filter(oO)}),t.setState({nodesSelectionActive:!1})}},[r]),re.useEffect(()=&gt;{t.setState({multiSelectionActive:s})},[s])}function qq(n){const e=$n();re.useEffect(()=&gt;{const t=()=&gt;{var r,s;if(!n.current)return!1;const i=Zy(n.current);(i.height===0||i.width===0)&amp;&amp;((s=(r=e.getState()).onError)==null||s.call(r,&quot;004&quot;,wo.error004())),e.setState({width:i.width||500,height:i.height||500})};if(n.current){t(),window.addEventListener(&quot;resize&quot;,t);const i=new ResizeObserver(()=&gt;t());return i.observe(n.current),()=&gt;{window.removeEventListener(&quot;resize&quot;,t),i&amp;&amp;n.current&amp;&amp;i.unobserve(n.current)}}},[])}const t_={position:&quot;absolute&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,top:0,left:0},Yq=n=&gt;({userSelectionActive:n.userSelectionActive,lib:n.lib});function Kq({onPaneContextMenu:n,zoomOnScroll:e=!0,zoomOnPinch:t=!0,panOnScroll:i=!1,panOnScrollSpeed:r=.5,panOnScrollMode:s=Ec.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:h,minZoom:f,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:g=!0,children:v,noWheelClassName:x,noPanClassName:b,onViewportChange:_,isControlledViewport:T,paneClickDistance:w}){const E=$n(),R=re.useRef(null),{userSelectionActive:N,lib:A}=_n(Yq,di),D=Bd(m),C=re.useRef();qq(R);const O=re.useCallback(L=&gt;{_==null||_({x:L[0],y:L[1],zoom:L[2]}),T||E.setState({transform:L})},[_,T]);return re.useEffect(()=&gt;{if(R.current){C.current=QX({domNode:R.current,minZoom:f,maxZoom:p,translateExtent:h,viewport:u,paneClickDistance:w,onDraggingChange:z=&gt;E.setState({paneDragging:z}),onPanZoomStart:(z,K)=&gt;{const{onViewportChangeStart:I,onMoveStart:j}=E.getState();j==null||j(z,K),I==null||I(K)},onPanZoom:(z,K)=&gt;{const{onViewportChange:I,onMove:j}=E.getState();j==null||j(z,K),I==null||I(K)},onPanZoomEnd:(z,K)=&gt;{const{onViewportChangeEnd:I,onMoveEnd:j}=E.getState();j==null||j(z,K),I==null||I(K)}});const{x:L,y:V,zoom:Z}=C.current.getViewport();return E.setState({panZoom:C.current,transform:[L,V,Z],domNode:R.current.closest(&quot;.react-flow&quot;)}),()=&gt;{var z;(z=C.current)==null||z.destroy()}}},[]),re.useEffect(()=&gt;{var L;(L=C.current)==null||L.update({onPaneContextMenu:n,zoomOnScroll:e,zoomOnPinch:t,panOnScroll:i,panOnScrollSpeed:r,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:D,preventScrolling:g,noPanClassName:b,userSelectionActive:N,noWheelClassName:x,lib:A,onTransformChange:O})},[n,e,t,i,r,s,o,l,D,g,b,N,x,A,O]),P.jsx(&quot;div&quot;,{className:&quot;react-flow__renderer&quot;,ref:R,style:t_,children:v})}const $q=n=&gt;({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function Zq(){const{userSelectionActive:n,userSelectionRect:e}=_n($q,di);return n&amp;&amp;e?P.jsx(&quot;div&quot;,{className:&quot;react-flow__selection react-flow__container&quot;,style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const xx=(n,e)=&gt;t=&gt;{t.target===e.current&amp;&amp;(n==null||n(t))},Jq=n=&gt;({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,dragging:n.paneDragging});function Qq({isSelecting:n,selectionKeyPressed:e,selectionMode:t=kd.Full,panOnDrag:i,selectionOnDrag:r,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:h,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:m,children:g}){const v=$n(),{userSelectionActive:x,elementsSelectable:b,dragging:_}=_n(Jq,di),T=b&amp;&amp;(n||x),w=re.useRef(null),E=re.useRef(),R=re.useRef(new Set),N=re.useRef(new Set),A=re.useRef(!1),D=re.useRef(!1),C=I=&gt;{if(A.current){A.current=!1;return}l==null||l(I),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},O=I=&gt;{if(Array.isArray(i)&amp;&amp;(i!=null&amp;&amp;i.includes(2))){I.preventDefault();return}u==null||u(I)},L=h?I=&gt;h(I):void 0,V=I=&gt;{var ne,le;const{resetSelectedElements:j,domNode:G}=v.getState();if(E.current=G==null?void 0:G.getBoundingClientRect(),!b||!n||I.button!==0||I.target!==w.current||!E.current)return;(le=(ne=I.target)==null?void 0:ne.setPointerCapture)==null||le.call(ne,I.pointerId),D.current=!0,A.current=!1;const{x:ee,y:F}=ha(I.nativeEvent,E.current);j(),v.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:F,x:ee,y:F}}),s==null||s(I)},Z=I=&gt;{const{userSelectionRect:j,transform:G,nodeLookup:ee,edgeLookup:F,connectionLookup:ne,triggerNodeChanges:le,triggerEdgeChanges:ce,defaultEdgeOptions:ie}=v.getState();if(!E.current||!j)return;A.current=!0;const{x:oe,y:ae}=ha(I.nativeEvent,E.current),{startX:ue,startY:ve}=j,He={startX:ue,startY:ve,x:oe&lt;ue?oe:ue,y:ae&lt;ve?ae:ve,width:Math.abs(oe-ue),height:Math.abs(ae-ve)},Xe=R.current,lt=N.current;R.current=new Set(sP(ee,He,G,t===kd.Partial,!0).map(Ye=&gt;Ye.id)),N.current=new Set;const We=(ie==null?void 0:ie.selectable)??!0;for(const Ye of R.current){const Q=ne.get(Ye);if(Q)for(const{edgeId:Ve}of Q.values()){const Le=F.get(Ve);Le&amp;&amp;(Le.selectable??We)&amp;&amp;N.current.add(Ve)}}if(!NR(Xe,R.current)){const Ye=Zu(ee,R.current,!0);le(Ye)}if(!NR(lt,N.current)){const Ye=Zu(F,N.current);ce(Ye)}v.setState({userSelectionRect:He,userSelectionActive:!0,nodesSelectionActive:!1})},z=I=&gt;{var G,ee;if(I.button!==0||!D.current)return;(ee=(G=I.target)==null?void 0:G.releasePointerCapture)==null||ee.call(G,I.pointerId);const{userSelectionRect:j}=v.getState();!x&amp;&amp;j&amp;&amp;I.target===w.current&amp;&amp;(C==null||C(I)),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:R.current.size&gt;0}),o==null||o(I),(e||r)&amp;&amp;(A.current=!1),D.current=!1},K=i===!0||Array.isArray(i)&amp;&amp;i.includes(0);return P.jsxs(&quot;div&quot;,{className:Di([&quot;react-flow__pane&quot;,{draggable:K,dragging:_,selection:n}]),onClick:T?void 0:xx(C,w),onContextMenu:xx(O,w),onWheel:xx(L,w),onPointerEnter:T?void 0:f,onPointerDown:T?V:p,onPointerMove:T?Z:p,onPointerUp:T?z:void 0,onPointerLeave:m,ref:w,style:t_,children:[g,P.jsx(Zq,{})]})}function zS({id:n,store:e,unselect:t=!1,nodeRef:i}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),h=l.get(n);if(!h){u==null||u(&quot;012&quot;,wo.error012(n));return}e.setState({nodesSelectionActive:!1}),h.selected?(t||h.selected&amp;&amp;o)&amp;&amp;(s({nodes:[h],edges:[]}),requestAnimationFrame(()=&gt;{var f;return(f=i==null?void 0:i.current)==null?void 0:f.blur()})):r([n])}function VP({nodeRef:n,disabled:e=!1,noDragClassName:t,handleSelector:i,nodeId:r,isSelectable:s,nodeClickDistance:o}){const l=$n(),[u,h]=re.useState(!1),f=re.useRef();return re.useEffect(()=&gt;{f.current=zX({getStoreItems:()=&gt;l.getState(),onNodeMouseDown:p=&gt;{zS({id:p,store:l,nodeRef:n})},onDragStart:()=&gt;{h(!0)},onDragStop:()=&gt;{h(!1)}})},[]),re.useEffect(()=&gt;{var p,m;if(e)(p=f.current)==null||p.destroy();else if(n.current)return(m=f.current)==null||m.update({noDragClassName:t,handleSelector:i,domNode:n.current,isSelectable:s,nodeId:r,nodeClickDistance:o}),()=&gt;{var g;(g=f.current)==null||g.destroy()}},[t,i,e,s,n,r]),u}const eY=n=&gt;e=&gt;e.selected&amp;&amp;(e.draggable||n&amp;&amp;typeof e.draggable&gt;&quot;u&quot;);function GP(){const n=$n();return re.useCallback(t=&gt;{const{nodeExtent:i,snapToGrid:r,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:h,nodeOrigin:f}=n.getState(),p=new Map,m=eY(o),g=r?s[0]:5,v=r?s[1]:5,x=t.direction.x*g*t.factor,b=t.direction.y*v*t.factor;for(const[,_]of h){if(!m(_))continue;let T={x:_.internals.positionAbsolute.x+x,y:_.internals.positionAbsolute.y+b};r&amp;&amp;(T=$y(T,s));const{position:w,positionAbsolute:E}=oP({nodeId:_.id,nextPosition:T,nodeLookup:h,nodeExtent:i,nodeOrigin:f,onError:l});_.position=w,_.internals.positionAbsolute=E,p.set(_.id,_)}u(p)},[])}const Qw=re.createContext(null),tY=Qw.Provider;Qw.Consumer;const jP=()=&gt;re.useContext(Qw),nY=n=&gt;({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),iY=(n,e,t)=&gt;i=&gt;{const{connectionClickStartHandle:r,connectionMode:s,connection:o}=i,{fromHandle:l,toHandle:u,isValid:h}=o,f=(u==null?void 0:u.nodeId)===n&amp;&amp;(u==null?void 0:u.id)===e&amp;&amp;(u==null?void 0:u.type)===t;return{connectingFrom:(l==null?void 0:l.nodeId)===n&amp;&amp;(l==null?void 0:l.id)===e&amp;&amp;(l==null?void 0:l.type)===t,connectingTo:f,clickConnecting:(r==null?void 0:r.nodeId)===n&amp;&amp;(r==null?void 0:r.id)===e&amp;&amp;(r==null?void 0:r.type)===t,isPossibleEndHandle:s===mh.Strict?(l==null?void 0:l.type)!==t:n!==(l==null?void 0:l.nodeId)||e!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!r,valid:f&amp;&amp;h}};function rY({type:n=&quot;source&quot;,position:e=Mt.Top,isValidConnection:t,isConnectable:i=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:h,onMouseDown:f,onTouchStart:p,...m},g){var K,I;const v=o||null,x=n===&quot;target&quot;,b=$n(),_=jP(),{connectOnClick:T,noPanClassName:w,rfId:E}=_n(nY,di),{connectingFrom:R,connectingTo:N,clickConnecting:A,isPossibleEndHandle:D,connectionInProcess:C,clickConnectionInProcess:O,valid:L}=_n(iY(_,v,n),di);_||(I=(K=b.getState()).onError)==null||I.call(K,&quot;010&quot;,wo.error010());const V=j=&gt;{const{defaultEdgeOptions:G,onConnect:ee,hasDefaultEdges:F}=b.getState(),ne={...G,...j};if(F){const{edges:le,setEdges:ce}=b.getState();ce(_P(ne,le))}ee==null||ee(ne),l==null||l(ne)},Z=j=&gt;{if(!_)return;const G=pP(j.nativeEvent);if(r&amp;&amp;(G&amp;&amp;j.button===0||!G)){const ee=b.getState();FS.onPointerDown(j.nativeEvent,{autoPanOnConnect:ee.autoPanOnConnect,connectionMode:ee.connectionMode,connectionRadius:ee.connectionRadius,domNode:ee.domNode,nodeLookup:ee.nodeLookup,lib:ee.lib,isTarget:x,handleId:v,nodeId:_,flowId:ee.rfId,panBy:ee.panBy,cancelConnection:ee.cancelConnection,onConnectStart:ee.onConnectStart,onConnectEnd:ee.onConnectEnd,updateConnection:ee.updateConnection,onConnect:V,isValidConnection:t||ee.isValidConnection,getTransform:()=&gt;b.getState().transform,getFromHandle:()=&gt;b.getState().connection.fromHandle,autoPanSpeed:ee.autoPanSpeed})}G?f==null||f(j):p==null||p(j)},z=j=&gt;{const{onClickConnectStart:G,onClickConnectEnd:ee,connectionClickStartHandle:F,connectionMode:ne,isValidConnection:le,lib:ce,rfId:ie,nodeLookup:oe,connection:ae}=b.getState();if(!_||!F&amp;&amp;!r)return;if(!F){G==null||G(j.nativeEvent,{nodeId:_,handleId:v,handleType:n}),b.setState({connectionClickStartHandle:{nodeId:_,type:n,id:v}});return}const ue=dP(j.target),ve=t||le,{connection:He,isValid:Xe}=FS.isValid(j.nativeEvent,{handle:{nodeId:_,id:v,type:n},connectionMode:ne,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:ve,flowId:ie,doc:ue,lib:ce,nodeLookup:oe});Xe&amp;&amp;He&amp;&amp;V(He);const lt=structuredClone(ae);delete lt.inProgress,lt.toPosition=lt.toHandle?lt.toHandle.position:null,ee==null||ee(j,lt),b.setState({connectionClickStartHandle:null})};return P.jsx(&quot;div&quot;,{&quot;data-handleid&quot;:v,&quot;data-nodeid&quot;:_,&quot;data-handlepos&quot;:e,&quot;data-id&quot;:`${E}-${_}-${v}-${n}`,className:Di([&quot;react-flow__handle&quot;,`react-flow__handle-${e}`,&quot;nodrag&quot;,w,h,{source:!x,target:x,connectable:i,connectablestart:r,connectableend:s,clickconnecting:A,connectingfrom:R,connectingto:N,valid:L,connectionindicator:i&amp;&amp;(!C||D)&amp;&amp;(C||O?s:r)}]),onMouseDown:Z,onTouchStart:Z,onClick:T?z:void 0,ref:g,...m,children:u})}const _l=re.memo(BP(rY));function sY({data:n,isConnectable:e,sourcePosition:t=Mt.Bottom}){return P.jsxs(P.Fragment,{children:[n==null?void 0:n.label,P.jsx(_l,{type:&quot;source&quot;,position:t,isConnectable:e})]})}function oY({data:n,isConnectable:e,targetPosition:t=Mt.Top,sourcePosition:i=Mt.Bottom}){return P.jsxs(P.Fragment,{children:[P.jsx(_l,{type:&quot;target&quot;,position:t,isConnectable:e}),n==null?void 0:n.label,P.jsx(_l,{type:&quot;source&quot;,position:i,isConnectable:e})]})}function aY(){return null}function lY({data:n,isConnectable:e,targetPosition:t=Mt.Top}){return P.jsxs(P.Fragment,{children:[P.jsx(_l,{type:&quot;target&quot;,position:t,isConnectable:e}),n==null?void 0:n.label]})}const W0={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},aO={input:sY,default:oY,output:lY,group:aY};function cY(n){var e,t,i,r;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((e=n.style)==null?void 0:e.width),height:n.height??n.initialHeight??((t=n.style)==null?void 0:t.height)}:{width:n.width??((i=n.style)==null?void 0:i.width),height:n.height??((r=n.style)==null?void 0:r.height)}}const uY=n=&gt;{const{width:e,height:t,x:i,y:r}=tp(n.nodeLookup,{filter:s=&gt;!!s.selected});return{width:Ys(e)?e:null,height:Ys(t)?t:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${i}px,${r}px)`}};function hY({onSelectionContextMenu:n,noPanClassName:e,disableKeyboardA11y:t}){const i=$n(),{width:r,height:s,transformString:o,userSelectionActive:l}=_n(uY,di),u=GP(),h=re.useRef(null);if(re.useEffect(()=&gt;{var m;t||(m=h.current)==null||m.focus({preventScroll:!0})},[t]),VP({nodeRef:h}),l||!r||!s)return null;const f=n?m=&gt;{const g=i.getState().nodes.filter(v=&gt;v.selected);n(m,g)}:void 0,p=m=&gt;{Object.prototype.hasOwnProperty.call(W0,m.key)&amp;&amp;(m.preventDefault(),u({direction:W0[m.key],factor:m.shiftKey?4:1}))};return P.jsx(&quot;div&quot;,{className:Di([&quot;react-flow__nodesselection&quot;,&quot;react-flow__container&quot;,e]),style:{transform:o},children:P.jsx(&quot;div&quot;,{ref:h,className:&quot;react-flow__nodesselection-rect&quot;,onContextMenu:f,tabIndex:t?void 0:-1,onKeyDown:t?void 0:p,style:{width:r,height:s}})})}const lO=typeof window&lt;&quot;u&quot;?window:void 0,fY=n=&gt;({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function WP({children:n,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:h,selectionOnDrag:f,selectionMode:p,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:v,panActivationKeyCode:x,zoomActivationKeyCode:b,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:w,panOnScroll:E,panOnScrollSpeed:R,panOnScrollMode:N,zoomOnDoubleClick:A,panOnDrag:D,defaultViewport:C,translateExtent:O,minZoom:L,maxZoom:V,preventScrolling:Z,onSelectionContextMenu:z,noWheelClassName:K,noPanClassName:I,disableKeyboardA11y:j,onViewportChange:G,isControlledViewport:ee}){const{nodesSelectionActive:F,userSelectionActive:ne}=_n(fY),le=Bd(h,{target:lO}),ce=Bd(x,{target:lO}),ie=ce||D,oe=ce||E,ae=f&amp;&amp;ie!==!0,ue=le||ne||ae;return Xq({deleteKeyCode:u,multiSelectionKeyCode:v}),P.jsx(Kq,{onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:w,panOnScroll:oe,panOnScrollSpeed:R,panOnScrollMode:N,zoomOnDoubleClick:A,panOnDrag:!le&amp;&amp;ie,defaultViewport:C,translateExtent:O,minZoom:L,maxZoom:V,zoomActivationKeyCode:b,preventScrolling:Z,noWheelClassName:K,noPanClassName:I,onViewportChange:G,isControlledViewport:ee,paneClickDistance:l,children:P.jsxs(Qq,{onSelectionStart:m,onSelectionEnd:g,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ie,isSelecting:!!ue,selectionMode:p,selectionKeyPressed:le,selectionOnDrag:ae,children:[n,F&amp;&amp;P.jsx(hY,{onSelectionContextMenu:z,noPanClassName:I,disableKeyboardA11y:j})]})})}WP.displayName=&quot;FlowRenderer&quot;;const dY=re.memo(WP),pY=n=&gt;e=&gt;n?sP(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(t=&gt;t.id):Array.from(e.nodeLookup.keys());function mY(n){return _n(re.useCallback(pY(n),[n]),di)}const gY=n=&gt;n.updateNodeInternals;function yY(){const n=_n(gY),[e]=re.useState(()=&gt;typeof ResizeObserver&gt;&quot;u&quot;?null:new ResizeObserver(t=&gt;{const i=new Map;t.forEach(r=&gt;{const s=r.target.getAttribute(&quot;data-id&quot;);i.set(s,{id:s,nodeElement:r.target,force:!0})}),n(i)}));return re.useEffect(()=&gt;()=&gt;{e==null||e.disconnect()},[e]),e}function _Y({node:n,nodeType:e,hasDimensions:t,resizeObserver:i}){const r=$n(),s=re.useRef(null),o=re.useRef(null),l=re.useRef(n.sourcePosition),u=re.useRef(n.targetPosition),h=re.useRef(e),f=t&amp;&amp;!!n.internals.handleBounds;return re.useEffect(()=&gt;{s.current&amp;&amp;!n.hidden&amp;&amp;(!f||o.current!==s.current)&amp;&amp;(o.current&amp;&amp;(i==null||i.unobserve(o.current)),i==null||i.observe(s.current),o.current=s.current)},[f,n.hidden]),re.useEffect(()=&gt;()=&gt;{o.current&amp;&amp;(i==null||i.unobserve(o.current),o.current=null)},[]),re.useEffect(()=&gt;{if(s.current){const p=h.current!==e,m=l.current!==n.sourcePosition,g=u.current!==n.targetPosition;(p||m||g)&amp;&amp;(h.current=e,l.current=n.sourcePosition,u.current=n.targetPosition,r.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:s.current,force:!0}]])))}},[n.id,e,n.sourcePosition,n.targetPosition]),s}function vY({id:n,onClick:e,onMouseEnter:t,onMouseMove:i,onMouseLeave:r,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:h,nodesFocusable:f,resizeObserver:p,noDragClassName:m,noPanClassName:g,disableKeyboardA11y:v,rfId:x,nodeTypes:b,nodeClickDistance:_,onError:T}){const{node:w,internals:E,isParent:R}=_n(ue=&gt;{const ve=ue.nodeLookup.get(n),He=ue.parentLookup.has(n);return{node:ve,internals:ve.internals,isParent:He}},di);let N=w.type||&quot;default&quot;,A=(b==null?void 0:b[N])||aO[N];A===void 0&amp;&amp;(T==null||T(&quot;003&quot;,wo.error003(N)),N=&quot;default&quot;,A=aO.default);const D=!!(w.draggable||l&amp;&amp;typeof w.draggable&gt;&quot;u&quot;),C=!!(w.selectable||u&amp;&amp;typeof w.selectable&gt;&quot;u&quot;),O=!!(w.connectable||h&amp;&amp;typeof w.connectable&gt;&quot;u&quot;),L=!!(w.focusable||f&amp;&amp;typeof w.focusable&gt;&quot;u&quot;),V=$n(),Z=hP(w),z=_Y({node:w,nodeType:N,hasDimensions:Z,resizeObserver:p}),K=VP({nodeRef:z,disabled:w.hidden||!D,noDragClassName:m,handleSelector:w.dragHandle,nodeId:n,isSelectable:C,nodeClickDistance:_}),I=GP();if(w.hidden)return null;const j=ga(w),G=cY(w),ee=C||D||e||t||i||r,F=t?ue=&gt;t(ue,{...E.userNode}):void 0,ne=i?ue=&gt;i(ue,{...E.userNode}):void 0,le=r?ue=&gt;r(ue,{...E.userNode}):void 0,ce=s?ue=&gt;s(ue,{...E.userNode}):void 0,ie=o?ue=&gt;o(ue,{...E.userNode}):void 0,oe=ue=&gt;{const{selectNodesOnDrag:ve,nodeDragThreshold:He}=V.getState();C&amp;&amp;(!ve||!D||He&gt;0)&amp;&amp;zS({id:n,store:V,nodeRef:z}),e&amp;&amp;e(ue,{...E.userNode})},ae=ue=&gt;{if(!(PS(ue.nativeEvent)||v))if(tP.includes(ue.key)&amp;&amp;C){const ve=ue.key===&quot;Escape&quot;;zS({id:n,store:V,unselect:ve,nodeRef:z})}else D&amp;&amp;w.selected&amp;&amp;Object.prototype.hasOwnProperty.call(W0,ue.key)&amp;&amp;(ue.preventDefault(),V.setState({ariaLiveMessage:`Moved selected node ${ue.key.replace(&quot;Arrow&quot;,&quot;&quot;).toLowerCase()}. New position, x: ${~~E.positionAbsolute.x}, y: ${~~E.positionAbsolute.y}`}),I({direction:W0[ue.key],factor:ue.shiftKey?4:1}))};return P.jsx(&quot;div&quot;,{className:Di([&quot;react-flow__node&quot;,`react-flow__node-${N}`,{[g]:D},w.className,{selected:w.selected,selectable:C,parent:R,draggable:D,dragging:K}]),ref:z,style:{zIndex:E.z,transform:`translate(${E.positionAbsolute.x}px,${E.positionAbsolute.y}px)`,pointerEvents:ee?&quot;all&quot;:&quot;none&quot;,visibility:Z?&quot;visible&quot;:&quot;hidden&quot;,...w.style,...G},&quot;data-id&quot;:n,&quot;data-testid&quot;:`rf__node-${n}`,onMouseEnter:F,onMouseMove:ne,onMouseLeave:le,onContextMenu:ce,onClick:oe,onDoubleClick:ie,onKeyDown:L?ae:void 0,tabIndex:L?0:void 0,role:L?&quot;button&quot;:void 0,&quot;aria-describedby&quot;:v?void 0:`${PP}-${x}`,&quot;aria-label&quot;:w.ariaLabel,children:P.jsx(tY,{value:n,children:P.jsx(A,{id:n,data:w.data,type:N,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:w.selected??!1,selectable:C,draggable:D,deletable:w.deletable??!0,isConnectable:O,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:K,dragHandle:w.dragHandle,zIndex:E.z,parentId:w.parentId,...j})})})}const bY=n=&gt;({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function XP(n){const{nodesDraggable:e,nodesConnectable:t,nodesFocusable:i,elementsSelectable:r,onError:s}=_n(bY,di),o=mY(n.onlyRenderVisibleElements),l=yY();return P.jsx(&quot;div&quot;,{className:&quot;react-flow__nodes&quot;,style:t_,children:o.map(u=&gt;P.jsx(vY,{id:u,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:t,nodesFocusable:i,elementsSelectable:r,nodeClickDistance:n.nodeClickDistance,onError:s},u))})}XP.displayName=&quot;NodeRenderer&quot;;const xY=re.memo(XP);function SY(n){return _n(re.useCallback(t=&gt;{if(!n)return t.edges.map(r=&gt;r.id);const i=[];if(t.width&amp;&amp;t.height)for(const r of t.edges){const s=t.nodeLookup.get(r.source),o=t.nodeLookup.get(r.target);s&amp;&amp;o&amp;&amp;EX({sourceNode:s,targetNode:o,width:t.width,height:t.height,transform:t.transform})&amp;&amp;i.push(r.id)}return i},[n]),di)}const wY=({color:n=&quot;none&quot;,strokeWidth:e=1})=&gt;P.jsx(&quot;polyline&quot;,{style:{stroke:n,strokeWidth:e},strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,fill:&quot;none&quot;,points:&quot;-5,-4 0,0 -5,4&quot;}),EY=({color:n=&quot;none&quot;,strokeWidth:e=1})=&gt;P.jsx(&quot;polyline&quot;,{style:{stroke:n,fill:n,strokeWidth:e},strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,points:&quot;-5,-4 0,0 -5,4 -5,-4&quot;}),cO={[V0.Arrow]:wY,[V0.ArrowClosed]:EY};function TY(n){const e=$n();return re.useMemo(()=&gt;{var r,s;return Object.prototype.hasOwnProperty.call(cO,n)?cO[n]:((s=(r=e.getState()).onError)==null||s.call(r,&quot;009&quot;,wo.error009(n)),null)},[n])}const MY=({id:n,type:e,color:t,width:i=12.5,height:r=12.5,markerUnits:s=&quot;strokeWidth&quot;,strokeWidth:o,orient:l=&quot;auto-start-reverse&quot;})=&gt;{const u=TY(e);return u?P.jsx(&quot;marker&quot;,{className:&quot;react-flow__arrowhead&quot;,id:n,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:&quot;-10 -10 20 20&quot;,markerUnits:s,orient:l,refX:&quot;0&quot;,refY:&quot;0&quot;,children:P.jsx(u,{color:t,strokeWidth:o})}):null},qP=({defaultColor:n,rfId:e})=&gt;{const t=_n(s=&gt;s.edges),i=_n(s=&gt;s.defaultEdgeOptions),r=re.useMemo(()=&gt;DX(t,{id:e,defaultColor:n,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[t,i,e,n]);return r.length?P.jsx(&quot;svg&quot;,{className:&quot;react-flow__marker&quot;,children:P.jsx(&quot;defs&quot;,{children:r.map(s=&gt;P.jsx(MY,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};qP.displayName=&quot;MarkerDefinitions&quot;;var AY=re.memo(qP);function YP({x:n,y:e,label:t,labelStyle:i={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:h,...f}){const[p,m]=re.useState({x:1,y:0,width:0,height:0}),g=Di([&quot;react-flow__edge-textwrapper&quot;,h]),v=re.useRef(null);return re.useEffect(()=&gt;{if(v.current){const x=v.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[t]),typeof t&gt;&quot;u&quot;||!t?null:P.jsxs(&quot;g&quot;,{transform:`translate(${n-p.width/2} ${e-p.height/2})`,className:g,visibility:p.width?&quot;visible&quot;:&quot;hidden&quot;,...f,children:[r&amp;&amp;P.jsx(&quot;rect&quot;,{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:&quot;react-flow__edge-textbg&quot;,style:s,rx:l,ry:l}),P.jsx(&quot;text&quot;,{className:&quot;react-flow__edge-text&quot;,y:p.height/2,dy:&quot;0.3em&quot;,ref:v,style:i,children:t}),u]})}YP.displayName=&quot;EdgeText&quot;;const CY=re.memo(YP);function n_({path:n,labelX:e,labelY:t,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:h=20,...f}){return P.jsxs(P.Fragment,{children:[P.jsx(&quot;path&quot;,{...f,d:n,fill:&quot;none&quot;,className:Di([&quot;react-flow__edge-path&quot;,f.className])}),h&amp;&amp;P.jsx(&quot;path&quot;,{d:n,fill:&quot;none&quot;,strokeOpacity:0,strokeWidth:h,className:&quot;react-flow__edge-interaction&quot;}),i&amp;&amp;Ys(e)&amp;&amp;Ys(t)?P.jsx(CY,{x:e,y:t,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function uO({pos:n,x1:e,y1:t,x2:i,y2:r}){return n===Mt.Left||n===Mt.Right?[.5*(e+i),t]:[e,.5*(t+r)]}function KP({sourceX:n,sourceY:e,sourcePosition:t=Mt.Bottom,targetX:i,targetY:r,targetPosition:s=Mt.Top}){const[o,l]=uO({pos:t,x1:n,y1:e,x2:i,y2:r}),[u,h]=uO({pos:s,x1:i,y1:r,x2:n,y2:e}),[f,p,m,g]=mP({sourceX:n,sourceY:e,targetX:i,targetY:r,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:h});return[`M${n},${e} C${o},${l} ${u},${h} ${i},${r}`,f,p,m,g]}function $P(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,sourcePosition:o=Mt.Bottom,targetPosition:l=Mt.Top,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,interactionWidth:_})=&gt;{const[T,w,E]=KP({sourceX:t,sourceY:i,sourcePosition:o,targetX:r,targetY:s,targetPosition:l}),R=n.isInternal?void 0:e;return P.jsx(n_,{id:R,path:T,labelX:w,labelY:E,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,interactionWidth:_})})}const RY=$P({isInternal:!1}),ZP=$P({isInternal:!0});RY.displayName=&quot;SimpleBezierEdge&quot;;ZP.displayName=&quot;SimpleBezierEdgeInternal&quot;;function JP(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,sourcePosition:g=Mt.Bottom,targetPosition:v=Mt.Top,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:T})=&gt;{const[w,E,R]=LS({sourceX:t,sourceY:i,sourcePosition:g,targetX:r,targetY:s,targetPosition:v,borderRadius:_==null?void 0:_.borderRadius,offset:_==null?void 0:_.offset}),N=n.isInternal?void 0:e;return P.jsx(n_,{id:N,path:w,labelX:E,labelY:R,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:x,markerStart:b,interactionWidth:T})})}const QP=JP({isInternal:!1}),eL=JP({isInternal:!0});QP.displayName=&quot;SmoothStepEdge&quot;;eL.displayName=&quot;SmoothStepEdgeInternal&quot;;function tL(n){return re.memo(({id:e,...t})=&gt;{var r;const i=n.isInternal?void 0:e;return P.jsx(QP,{...t,id:i,pathOptions:re.useMemo(()=&gt;{var s;return{borderRadius:0,offset:(s=t.pathOptions)==null?void 0:s.offset}},[(r=t.pathOptions)==null?void 0:r.offset])})})}const OY=tL({isInternal:!1}),nL=tL({isInternal:!0});OY.displayName=&quot;StepEdge&quot;;nL.displayName=&quot;StepEdgeInternal&quot;;function iL(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,interactionWidth:x})=&gt;{const[b,_,T]=vP({sourceX:t,sourceY:i,targetX:r,targetY:s}),w=n.isInternal?void 0:e;return P.jsx(n_,{id:w,path:b,labelX:_,labelY:T,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,interactionWidth:x})})}const DY=iL({isInternal:!1}),rL=iL({isInternal:!0});DY.displayName=&quot;StraightEdge&quot;;rL.displayName=&quot;StraightEdgeInternal&quot;;function sL(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,sourcePosition:o=Mt.Bottom,targetPosition:l=Mt.Top,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:T})=&gt;{const[w,E,R]=gP({sourceX:t,sourceY:i,sourcePosition:o,targetX:r,targetY:s,targetPosition:l,curvature:_==null?void 0:_.curvature}),N=n.isInternal?void 0:e;return P.jsx(n_,{id:N,path:w,labelX:E,labelY:R,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,interactionWidth:T})})}const NY=sL({isInternal:!1}),oL=sL({isInternal:!0});NY.displayName=&quot;BezierEdge&quot;;oL.displayName=&quot;BezierEdgeInternal&quot;;const hO={default:oL,straight:rL,step:nL,smoothstep:eL,simplebezier:ZP},fO={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},IY=(n,e,t)=&gt;t===Mt.Left?n-e:t===Mt.Right?n+e:n,PY=(n,e,t)=&gt;t===Mt.Top?n-e:t===Mt.Bottom?n+e:n,dO=&quot;react-flow__edgeupdater&quot;;function pO({position:n,centerX:e,centerY:t,radius:i=10,onMouseDown:r,onMouseEnter:s,onMouseOut:o,type:l}){return P.jsx(&quot;circle&quot;,{onMouseDown:r,onMouseEnter:s,onMouseOut:o,className:Di([dO,`${dO}-${l}`]),cx:IY(e,i,n),cy:PY(t,i,n),r:i,stroke:&quot;transparent&quot;,fill:&quot;transparent&quot;})}function LY({isReconnectable:n,reconnectRadius:e,edge:t,sourceX:i,sourceY:r,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:h,onReconnectStart:f,onReconnectEnd:p,setReconnecting:m,setUpdateHover:g}){const v=$n(),x=(E,R)=&gt;{if(E.button!==0)return;const{autoPanOnConnect:N,domNode:A,isValidConnection:D,connectionMode:C,connectionRadius:O,lib:L,onConnectStart:V,onConnectEnd:Z,cancelConnection:z,nodeLookup:K,rfId:I,panBy:j,updateConnection:G}=v.getState(),ee=R.type===&quot;target&quot;;m(!0),f==null||f(E,t,R.type);const F=(le,ce)=&gt;{m(!1),p==null||p(le,t,R.type,ce)},ne=le=&gt;h==null?void 0:h(t,le);FS.onPointerDown(E.nativeEvent,{autoPanOnConnect:N,connectionMode:C,connectionRadius:O,domNode:A,handleId:R.id,nodeId:R.nodeId,nodeLookup:K,isTarget:ee,edgeUpdaterType:R.type,lib:L,flowId:I,cancelConnection:z,panBy:j,isValidConnection:D,onConnect:ne,onConnectStart:V,onConnectEnd:Z,onReconnectEnd:F,updateConnection:G,getTransform:()=&gt;v.getState().transform,getFromHandle:()=&gt;v.getState().connection.fromHandle})},b=E=&gt;x(E,{nodeId:t.target,id:t.targetHandle??null,type:&quot;target&quot;}),_=E=&gt;x(E,{nodeId:t.source,id:t.sourceHandle??null,type:&quot;source&quot;}),T=()=&gt;g(!0),w=()=&gt;g(!1);return P.jsxs(P.Fragment,{children:[(n===!0||n===&quot;source&quot;)&amp;&amp;P.jsx(pO,{position:l,centerX:i,centerY:r,radius:e,onMouseDown:b,onMouseEnter:T,onMouseOut:w,type:&quot;source&quot;}),(n===!0||n===&quot;target&quot;)&amp;&amp;P.jsx(pO,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:_,onMouseEnter:T,onMouseOut:w,type:&quot;target&quot;})]})}function UY({id:n,edgesFocusable:e,edgesReconnectable:t,elementsSelectable:i,onClick:r,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:h,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,rfId:v,edgeTypes:x,noPanClassName:b,onError:_,disableKeyboardA11y:T}){let w=_n(We=&gt;We.edgeLookup.get(n));const E=_n(We=&gt;We.defaultEdgeOptions);w=E?{...E,...w}:w;let R=w.type||&quot;default&quot;,N=(x==null?void 0:x[R])||hO[R];N===void 0&amp;&amp;(_==null||_(&quot;011&quot;,wo.error011(R)),R=&quot;default&quot;,N=hO.default);const A=!!(w.focusable||e&amp;&amp;typeof w.focusable&gt;&quot;u&quot;),D=typeof p&lt;&quot;u&quot;&amp;&amp;(w.reconnectable||t&amp;&amp;typeof w.reconnectable&gt;&quot;u&quot;),C=!!(w.selectable||i&amp;&amp;typeof w.selectable&gt;&quot;u&quot;),O=re.useRef(null),[L,V]=re.useState(!1),[Z,z]=re.useState(!1),K=$n(),{zIndex:I,sourceX:j,sourceY:G,targetX:ee,targetY:F,sourcePosition:ne,targetPosition:le}=_n(re.useCallback(We=&gt;{const Ye=We.nodeLookup.get(w.source),Q=We.nodeLookup.get(w.target);if(!Ye||!Q)return{zIndex:w.zIndex,...fO};const Ve=OX({id:n,sourceNode:Ye,targetNode:Q,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:We.connectionMode,onError:_});return{zIndex:wX({selected:w.selected,zIndex:w.zIndex,sourceNode:Ye,targetNode:Q,elevateOnSelect:We.elevateEdgesOnSelect}),...Ve||fO}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),di),ce=re.useMemo(()=&gt;w.markerStart?`url(&#x27;#${US(w.markerStart,v)}&#x27;)`:void 0,[w.markerStart,v]),ie=re.useMemo(()=&gt;w.markerEnd?`url(&#x27;#${US(w.markerEnd,v)}&#x27;)`:void 0,[w.markerEnd,v]);if(w.hidden||j===null||G===null||ee===null||F===null)return null;const oe=We=&gt;{var Le;const{addSelectedEdges:Ye,unselectNodesAndEdges:Q,multiSelectionActive:Ve}=K.getState();C&amp;&amp;(K.setState({nodesSelectionActive:!1}),w.selected&amp;&amp;Ve?(Q({nodes:[],edges:[w]}),(Le=O.current)==null||Le.blur()):Ye([n])),r&amp;&amp;r(We,w)},ae=s?We=&gt;{s(We,{...w})}:void 0,ue=o?We=&gt;{o(We,{...w})}:void 0,ve=l?We=&gt;{l(We,{...w})}:void 0,He=u?We=&gt;{u(We,{...w})}:void 0,Xe=h?We=&gt;{h(We,{...w})}:void 0,lt=We=&gt;{var Ye;if(!T&amp;&amp;tP.includes(We.key)&amp;&amp;C){const{unselectNodesAndEdges:Q,addSelectedEdges:Ve}=K.getState();We.key===&quot;Escape&quot;?((Ye=O.current)==null||Ye.blur(),Q({edges:[w]})):Ve([n])}};return P.jsx(&quot;svg&quot;,{style:{zIndex:I},children:P.jsxs(&quot;g&quot;,{className:Di([&quot;react-flow__edge&quot;,`react-flow__edge-${R}`,w.className,b,{selected:w.selected,animated:w.animated,inactive:!C&amp;&amp;!r,updating:L,selectable:C}]),onClick:oe,onDoubleClick:ae,onContextMenu:ue,onMouseEnter:ve,onMouseMove:He,onMouseLeave:Xe,onKeyDown:A?lt:void 0,tabIndex:A?0:void 0,role:A?&quot;button&quot;:&quot;img&quot;,&quot;data-id&quot;:n,&quot;data-testid&quot;:`rf__edge-${n}`,&quot;aria-label&quot;:w.ariaLabel===null?void 0:w.ariaLabel||`Edge from ${w.source} to ${w.target}`,&quot;aria-describedby&quot;:A?`${LP}-${v}`:void 0,ref:O,children:[!Z&amp;&amp;P.jsx(N,{id:n,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:C,deletable:w.deletable??!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:j,sourceY:G,targetX:ee,targetY:F,sourcePosition:ne,targetPosition:le,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:ce,markerEnd:ie,pathOptions:&quot;pathOptions&quot;in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),D&amp;&amp;P.jsx(LY,{edge:w,isReconnectable:D,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,sourceX:j,sourceY:G,targetX:ee,targetY:F,sourcePosition:ne,targetPosition:le,setUpdateHover:V,setReconnecting:z})]})})}const kY=n=&gt;({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function aL({defaultMarkerColor:n,onlyRenderVisibleElements:e,rfId:t,edgeTypes:i,noPanClassName:r,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:h,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,disableKeyboardA11y:x}){const{edgesFocusable:b,edgesReconnectable:_,elementsSelectable:T,onError:w}=_n(kY,di),E=SY(e);return P.jsxs(&quot;div&quot;,{className:&quot;react-flow__edges&quot;,children:[P.jsx(AY,{defaultColor:n,rfId:t}),E.map(R=&gt;P.jsx(UY,{id:R,edgesFocusable:b,edgesReconnectable:_,elementsSelectable:T,noPanClassName:r,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:h,onClick:f,reconnectRadius:p,onDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,rfId:t,onError:w,edgeTypes:i,disableKeyboardA11y:x},R))]})}aL.displayName=&quot;EdgeRenderer&quot;;const FY=re.memo(aL),zY=n=&gt;`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function BY({children:n}){const e=_n(zY);return P.jsx(&quot;div&quot;,{className:&quot;react-flow__viewport xyflow__viewport react-flow__container&quot;,style:{transform:e},children:n})}function HY(n){const e=Jw(),t=re.useRef(!1);re.useEffect(()=&gt;{!t.current&amp;&amp;e.viewportInitialized&amp;&amp;n&amp;&amp;(setTimeout(()=&gt;n(e),1),t.current=!0)},[n,e.viewportInitialized])}const VY=n=&gt;{var e;return(e=n.panZoom)==null?void 0:e.syncViewport};function GY(n){const e=_n(VY),t=$n();return re.useEffect(()=&gt;{n&amp;&amp;(e==null||e(n),t.setState({transform:[n.x,n.y,n.zoom]}))},[n,e]),null}function jY(n){return n.connection.inProgress?{...n.connection,to:np(n.connection.to,n.transform)}:{...n.connection}}function WY(n){return jY}function XY(n){const e=WY();return _n(e,di)}const qY=n=&gt;({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function YY({containerStyle:n,style:e,type:t,component:i}){const{nodesConnectable:r,width:s,height:o,isValid:l,inProgress:u}=_n(qY,di);return!(s&amp;&amp;r&amp;&amp;u)?null:P.jsx(&quot;svg&quot;,{style:n,width:s,height:o,className:&quot;react-flow__connectionline react-flow__container&quot;,children:P.jsx(&quot;g&quot;,{className:Di([&quot;react-flow__connection&quot;,iP(l)]),children:P.jsx(lL,{style:e,type:t,CustomComponent:i,isValid:l})})})}const lL=({style:n,type:e=al.Bezier,CustomComponent:t,isValid:i})=&gt;{const{inProgress:r,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:h,toNode:f,toHandle:p,toPosition:m}=XY();if(!r)return;if(t)return P.jsx(t,{connectionLineType:e,connectionLineStyle:n,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:h.x,toY:h.y,fromPosition:u,toPosition:m,connectionStatus:iP(i),toNode:f,toHandle:p});let g=&quot;&quot;;const v={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:h.x,targetY:h.y,targetPosition:m};switch(e){case al.Bezier:[g]=gP(v);break;case al.SimpleBezier:[g]=KP(v);break;case al.Step:[g]=LS({...v,borderRadius:0});break;case al.SmoothStep:[g]=LS(v);break;default:[g]=vP(v)}return P.jsx(&quot;path&quot;,{d:g,fill:&quot;none&quot;,className:&quot;react-flow__connection-path&quot;,style:n})};lL.displayName=&quot;ConnectionLine&quot;;const KY={};function mO(n=KY){re.useRef(n),$n(),re.useEffect(()=&gt;{},[n])}function $Y(){$n(),re.useRef(!1),re.useEffect(()=&gt;{},[])}function cL({nodeTypes:n,edgeTypes:e,onInit:t,onNodeClick:i,onEdgeClick:r,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:m,onSelectionEnd:g,connectionLineType:v,connectionLineStyle:x,connectionLineComponent:b,connectionLineContainerStyle:_,selectionKeyCode:T,selectionOnDrag:w,selectionMode:E,multiSelectionKeyCode:R,panActivationKeyCode:N,zoomActivationKeyCode:A,deleteKeyCode:D,onlyRenderVisibleElements:C,elementsSelectable:O,defaultViewport:L,translateExtent:V,minZoom:Z,maxZoom:z,preventScrolling:K,defaultMarkerColor:I,zoomOnScroll:j,zoomOnPinch:G,panOnScroll:ee,panOnScrollSpeed:F,panOnScrollMode:ne,zoomOnDoubleClick:le,panOnDrag:ce,onPaneClick:ie,onPaneMouseEnter:oe,onPaneMouseMove:ae,onPaneMouseLeave:ue,onPaneScroll:ve,onPaneContextMenu:He,paneClickDistance:Xe,nodeClickDistance:lt,onEdgeContextMenu:We,onEdgeMouseEnter:Ye,onEdgeMouseMove:Q,onEdgeMouseLeave:Ve,reconnectRadius:Le,onReconnect:Fe,onReconnectStart:Ne,onReconnectEnd:mt,noDragClassName:ze,noWheelClassName:te,noPanClassName:H,disableKeyboardA11y:pe,nodeExtent:Ce,rfId:Ue,viewport:Me,onViewportChange:Ze}){return mO(n),mO(e),$Y(),HY(t),GY(Me),P.jsx(dY,{onPaneClick:ie,onPaneMouseEnter:oe,onPaneMouseMove:ae,onPaneMouseLeave:ue,onPaneContextMenu:He,onPaneScroll:ve,paneClickDistance:Xe,deleteKeyCode:D,selectionKeyCode:T,selectionOnDrag:w,selectionMode:E,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:R,panActivationKeyCode:N,zoomActivationKeyCode:A,elementsSelectable:O,zoomOnScroll:j,zoomOnPinch:G,zoomOnDoubleClick:le,panOnScroll:ee,panOnScrollSpeed:F,panOnScrollMode:ne,panOnDrag:ce,defaultViewport:L,translateExtent:V,minZoom:Z,maxZoom:z,onSelectionContextMenu:p,preventScrolling:K,noDragClassName:ze,noWheelClassName:te,noPanClassName:H,disableKeyboardA11y:pe,onViewportChange:Ze,isControlledViewport:!!Me,children:P.jsxs(BY,{children:[P.jsx(FY,{edgeTypes:e,onEdgeClick:r,onEdgeDoubleClick:o,onReconnect:Fe,onReconnectStart:Ne,onReconnectEnd:mt,onlyRenderVisibleElements:C,onEdgeContextMenu:We,onEdgeMouseEnter:Ye,onEdgeMouseMove:Q,onEdgeMouseLeave:Ve,reconnectRadius:Le,defaultMarkerColor:I,noPanClassName:H,disableKeyboardA11y:pe,rfId:Ue}),P.jsx(YY,{style:x,type:v,component:b,containerStyle:_}),P.jsx(&quot;div&quot;,{className:&quot;react-flow__edgelabel-renderer&quot;}),P.jsx(xY,{nodeTypes:n,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:f,nodeClickDistance:lt,onlyRenderVisibleElements:C,noPanClassName:H,noDragClassName:ze,disableKeyboardA11y:pe,nodeExtent:Ce,rfId:Ue}),P.jsx(&quot;div&quot;,{className:&quot;react-flow__viewport-portal&quot;})]})})}cL.displayName=&quot;GraphView&quot;;const ZY=re.memo(cL),gO=({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}={})=&gt;{const h=new Map,f=new Map,p=new Map,m=new Map,g=i??e??[],v=t??n??[],x=l??[0,0],b=u??Ud;xP(p,m,g),kS(v,h,f,{nodeOrigin:x,nodeExtent:b,elevateNodesOnSelect:!1});let _=[0,0,1];if(o&amp;&amp;r&amp;&amp;s){const T=tp(h,{filter:N=&gt;!!((N.width||N.initialWidth)&amp;&amp;(N.height||N.initialHeight))}),{x:w,y:E,zoom:R}=qw(T,r,s,.5,2,.1);_=[w,E,R]}return{rfId:&quot;1&quot;,width:0,height:0,transform:_,nodes:v,nodeLookup:h,parentLookup:f,edges:g,edgeLookup:m,connectionLookup:p,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:t!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Ud,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:mh.Strict,domNode:null,paneDragging:!1,noPanClassName:&quot;nopan&quot;,nodeOrigin:x,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...nP},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:&quot;&quot;,autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:xX,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:&quot;react&quot;,debug:!1}},JY=({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u})=&gt;yq((h,f)=&gt;({...gO({nodes:n,edges:e,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u,defaultNodes:t,defaultEdges:i}),setNodes:p=&gt;{const{nodeLookup:m,parentLookup:g,nodeOrigin:v,elevateNodesOnSelect:x}=f();kS(p,m,g,{nodeOrigin:v,nodeExtent:u,elevateNodesOnSelect:x,checkEquality:!0}),h({nodes:p})},setEdges:p=&gt;{const{connectionLookup:m,edgeLookup:g}=f();xP(m,g,p),h({edges:p})},setDefaultNodesAndEdges:(p,m)=&gt;{if(p){const{setNodes:g}=f();g(p),h({hasDefaultNodes:!0})}if(m){const{setEdges:g}=f();g(m),h({hasDefaultEdges:!0})}},updateNodeInternals:(p,m={triggerFitView:!0})=&gt;{const{triggerNodeChanges:g,nodeLookup:v,parentLookup:x,fitViewOnInit:b,fitViewDone:_,fitViewOnInitOptions:T,domNode:w,nodeOrigin:E,nodeExtent:R,debug:N,fitViewSync:A}=f(),{changes:D,updatedInternals:C}=UX(p,v,x,w,E,R);if(C){if(IX(v,x,{nodeOrigin:E,nodeExtent:R}),m.triggerFitView){let O=_;!_&amp;&amp;b&amp;&amp;(O=A({...T,nodes:T==null?void 0:T.nodes})),h({fitViewDone:O})}else h({});(D==null?void 0:D.length)&gt;0&amp;&amp;(N&amp;&amp;console.log(&quot;React Flow: trigger node changes&quot;,D),g==null||g(D))}},updateNodePositions:(p,m=!1)=&gt;{const g=[],v=[],{nodeLookup:x,triggerNodeChanges:b}=f();for(const[_,T]of p){const w=x.get(_),E=!!(w!=null&amp;&amp;w.expandParent&amp;&amp;(w!=null&amp;&amp;w.parentId)&amp;&amp;(T!=null&amp;&amp;T.position)),R={id:_,type:&quot;position&quot;,position:E?{x:Math.max(0,T.position.x),y:Math.max(0,T.position.y)}:T.position,dragging:m};E&amp;&amp;w.parentId&amp;&amp;g.push({id:_,parentId:w.parentId,rect:{...T.internals.positionAbsolute,width:T.measured.width??0,height:T.measured.height??0}}),v.push(R)}if(g.length&gt;0){const{parentLookup:_,nodeOrigin:T}=f(),w=Zw(g,x,_,T);v.push(...w)}b(v)},triggerNodeChanges:p=&gt;{const{onNodesChange:m,setNodes:g,nodes:v,hasDefaultNodes:x,debug:b}=f();if(p!=null&amp;&amp;p.length){if(x){const _=FP(p,v);g(_)}b&amp;&amp;console.log(&quot;React Flow: trigger node changes&quot;,p),m==null||m(p)}},triggerEdgeChanges:p=&gt;{const{onEdgesChange:m,setEdges:g,edges:v,hasDefaultEdges:x,debug:b}=f();if(p!=null&amp;&amp;p.length){if(x){const _=zP(p,v);g(_)}b&amp;&amp;console.log(&quot;React Flow: trigger edge changes&quot;,p),m==null||m(p)}},addSelectedNodes:p=&gt;{const{multiSelectionActive:m,edgeLookup:g,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:b}=f();if(m){const _=p.map(T=&gt;oc(T,!0));x(_);return}x(Zu(v,new Set([...p]),!0)),b(Zu(g))},addSelectedEdges:p=&gt;{const{multiSelectionActive:m,edgeLookup:g,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:b}=f();if(m){const _=p.map(T=&gt;oc(T,!0));b(_);return}b(Zu(g,new Set([...p]))),x(Zu(v,new Set,!0))},unselectNodesAndEdges:({nodes:p,edges:m}={})=&gt;{const{edges:g,nodes:v,nodeLookup:x,triggerNodeChanges:b,triggerEdgeChanges:_}=f(),T=p||v,w=m||g,E=T.map(N=&gt;{const A=x.get(N.id);return A&amp;&amp;(A.selected=!1),oc(N.id,!1)}),R=w.map(N=&gt;oc(N.id,!1));b(E),_(R)},setMinZoom:p=&gt;{const{panZoom:m,maxZoom:g}=f();m==null||m.setScaleExtent([p,g]),h({minZoom:p})},setMaxZoom:p=&gt;{const{panZoom:m,minZoom:g}=f();m==null||m.setScaleExtent([g,p]),h({maxZoom:p})},setTranslateExtent:p=&gt;{var m;(m=f().panZoom)==null||m.setTranslateExtent(p),h({translateExtent:p})},setPaneClickDistance:p=&gt;{var m;(m=f().panZoom)==null||m.setClickDistance(p)},resetSelectedElements:()=&gt;{const{edges:p,nodes:m,triggerNodeChanges:g,triggerEdgeChanges:v}=f(),x=m.reduce((_,T)=&gt;T.selected?[..._,oc(T.id,!1)]:_,[]),b=p.reduce((_,T)=&gt;T.selected?[..._,oc(T.id,!1)]:_,[]);g(x),v(b)},setNodeExtent:p=&gt;{const{nodes:m,nodeLookup:g,parentLookup:v,nodeOrigin:x,elevateNodesOnSelect:b,nodeExtent:_}=f();p[0][0]===_[0][0]&amp;&amp;p[0][1]===_[0][1]&amp;&amp;p[1][0]===_[1][0]&amp;&amp;p[1][1]===_[1][1]||(kS(m,g,v,{nodeOrigin:x,nodeExtent:p,elevateNodesOnSelect:b,checkEquality:!1}),h({nodeExtent:p}))},panBy:p=&gt;{const{transform:m,width:g,height:v,panZoom:x,translateExtent:b}=f();return kX({delta:p,panZoom:x,transform:m,translateExtent:b,width:g,height:v})},fitView:p=&gt;{const{panZoom:m,width:g,height:v,minZoom:x,maxZoom:b,nodeLookup:_}=f();if(!m)return Promise.resolve(!1);const T=DS(_,p);return NS({nodes:T,width:g,height:v,panZoom:m,minZoom:x,maxZoom:b},p)},fitViewSync:p=&gt;{const{panZoom:m,width:g,height:v,minZoom:x,maxZoom:b,nodeLookup:_}=f();if(!m)return!1;const T=DS(_,p);return NS({nodes:T,width:g,height:v,panZoom:m,minZoom:x,maxZoom:b},p),T.size&gt;0},cancelConnection:()=&gt;{h({connection:{...nP}})},updateConnection:p=&gt;{h({connection:p})},reset:()=&gt;h({...gO()})}),Object.is);function QY({initialNodes:n,initialEdges:e,defaultNodes:t,defaultEdges:i,initialWidth:r,initialHeight:s,fitView:o,nodeOrigin:l,nodeExtent:u,children:h}){const[f]=re.useState(()=&gt;JY({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}));return P.jsx(_q,{value:f,children:P.jsx(Hq,{children:h})})}function eK({children:n,nodes:e,edges:t,defaultNodes:i,defaultEdges:r,width:s,height:o,fitView:l,nodeOrigin:u,nodeExtent:h}){return re.useContext(Qy)?P.jsx(P.Fragment,{children:n}):P.jsx(QY,{initialNodes:e,initialEdges:t,defaultNodes:i,defaultEdges:r,initialWidth:s,initialHeight:o,fitView:l,nodeOrigin:u,nodeExtent:h,children:n})}const tK={width:&quot;100%&quot;,height:&quot;100%&quot;,overflow:&quot;hidden&quot;,position:&quot;relative&quot;,zIndex:0};function nK({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,className:r,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:h,onMove:f,onMoveStart:p,onMoveEnd:m,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:_,onNodeMouseEnter:T,onNodeMouseMove:w,onNodeMouseLeave:E,onNodeContextMenu:R,onNodeDoubleClick:N,onNodeDragStart:A,onNodeDrag:D,onNodeDragStop:C,onNodesDelete:O,onEdgesDelete:L,onDelete:V,onSelectionChange:Z,onSelectionDragStart:z,onSelectionDrag:K,onSelectionDragStop:I,onSelectionContextMenu:j,onSelectionStart:G,onSelectionEnd:ee,onBeforeDelete:F,connectionMode:ne,connectionLineType:le=al.Bezier,connectionLineStyle:ce,connectionLineComponent:ie,connectionLineContainerStyle:oe,deleteKeyCode:ae=&quot;Backspace&quot;,selectionKeyCode:ue=&quot;Shift&quot;,selectionOnDrag:ve=!1,selectionMode:He=kd.Full,panActivationKeyCode:Xe=&quot;Space&quot;,multiSelectionKeyCode:lt=j0()?&quot;Meta&quot;:&quot;Control&quot;,zoomActivationKeyCode:We=j0()?&quot;Meta&quot;:&quot;Control&quot;,snapToGrid:Ye,snapGrid:Q,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:Le,nodesDraggable:Fe,nodesConnectable:Ne,nodesFocusable:mt,nodeOrigin:ze=UP,edgesFocusable:te,edgesReconnectable:H,elementsSelectable:pe=!0,defaultViewport:Ce=Dq,minZoom:Ue=.5,maxZoom:Me=2,translateExtent:Ze=Ud,preventScrolling:qe=!0,nodeExtent:ut,defaultMarkerColor:Ct=&quot;#b1b1b7&quot;,zoomOnScroll:je=!0,zoomOnPinch:ht=!0,panOnScroll:St=!1,panOnScrollSpeed:Rt=.5,panOnScrollMode:rt=Ec.Free,zoomOnDoubleClick:Gt=!0,panOnDrag:It=!0,onPaneClick:gn,onPaneMouseEnter:de,onPaneMouseMove:tt,onPaneMouseLeave:Ae,onPaneScroll:Pe,onPaneContextMenu:st,paneClickDistance:Qe=0,nodeClickDistance:Ut=0,children:wn,onReconnect:jn,onReconnectStart:zt,onReconnectEnd:Bi,onEdgeContextMenu:oi,onEdgeDoubleClick:Zn,onEdgeMouseEnter:pi,onEdgeMouseMove:Hi,onEdgeMouseLeave:Cs,reconnectRadius:ya=10,onNodesChange:Co,onEdgesChange:Rs,noDragClassName:kr=&quot;nodrag&quot;,noWheelClassName:os=&quot;nowheel&quot;,noPanClassName:wr=&quot;nopan&quot;,fitView:Er,fitViewOptions:Os,connectOnClick:as,attributionPosition:Wn,proOptions:_a,defaultEdgeOptions:va,elevateNodesOnSelect:Fr,elevateEdgesOnSelect:q,disableKeyboardA11y:fe=!1,autoPanOnConnect:be,autoPanOnNodeDrag:we,autoPanSpeed:me,connectionRadius:Ge,isValidConnection:Je,onError:et,style:ft,id:Ot,nodeDragThreshold:Et,viewport:bt,onViewportChange:Bt,width:un,height:In,colorMode:Qt=&quot;light&quot;,debug:$t,onScroll:wt,...Hn},rn){const Jn=Ot||&quot;1&quot;,Tn=Lq(Qt),vn=re.useCallback(Tr=&gt;{Tr.currentTarget.scrollTo({top:0,left:0,behavior:&quot;instant&quot;}),wt==null||wt(Tr)},[wt]);return P.jsx(&quot;div&quot;,{&quot;data-testid&quot;:&quot;rf__wrapper&quot;,...Hn,onScroll:vn,style:{...ft,...tK},ref:rn,className:Di([&quot;react-flow&quot;,r,Tn]),id:Ot,children:P.jsxs(eK,{nodes:n,edges:e,width:un,height:In,fitView:Er,nodeOrigin:ze,nodeExtent:ut,children:[P.jsx(ZY,{onInit:h,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:T,onNodeMouseMove:w,onNodeMouseLeave:E,onNodeContextMenu:R,onNodeDoubleClick:N,nodeTypes:s,edgeTypes:o,connectionLineType:le,connectionLineStyle:ce,connectionLineComponent:ie,connectionLineContainerStyle:oe,selectionKeyCode:ue,selectionOnDrag:ve,selectionMode:He,deleteKeyCode:ae,multiSelectionKeyCode:lt,panActivationKeyCode:Xe,zoomActivationKeyCode:We,onlyRenderVisibleElements:Ve,defaultViewport:Ce,translateExtent:Ze,minZoom:Ue,maxZoom:Me,preventScrolling:qe,zoomOnScroll:je,zoomOnPinch:ht,zoomOnDoubleClick:Gt,panOnScroll:St,panOnScrollSpeed:Rt,panOnScrollMode:rt,panOnDrag:It,onPaneClick:gn,onPaneMouseEnter:de,onPaneMouseMove:tt,onPaneMouseLeave:Ae,onPaneScroll:Pe,onPaneContextMenu:st,paneClickDistance:Qe,nodeClickDistance:Ut,onSelectionContextMenu:j,onSelectionStart:G,onSelectionEnd:ee,onReconnect:jn,onReconnectStart:zt,onReconnectEnd:Bi,onEdgeContextMenu:oi,onEdgeDoubleClick:Zn,onEdgeMouseEnter:pi,onEdgeMouseMove:Hi,onEdgeMouseLeave:Cs,reconnectRadius:ya,defaultMarkerColor:Ct,noDragClassName:kr,noWheelClassName:os,noPanClassName:wr,rfId:Jn,disableKeyboardA11y:fe,nodeExtent:ut,viewport:bt,onViewportChange:Bt}),P.jsx(Pq,{nodes:n,edges:e,defaultNodes:t,defaultEdges:i,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:_,nodesDraggable:Fe,nodesConnectable:Ne,nodesFocusable:mt,edgesFocusable:te,edgesReconnectable:H,elementsSelectable:pe,elevateNodesOnSelect:Fr,elevateEdgesOnSelect:q,minZoom:Ue,maxZoom:Me,nodeExtent:ut,onNodesChange:Co,onEdgesChange:Rs,snapToGrid:Ye,snapGrid:Q,connectionMode:ne,translateExtent:Ze,connectOnClick:as,defaultEdgeOptions:va,fitView:Er,fitViewOptions:Os,onNodesDelete:O,onEdgesDelete:L,onDelete:V,onNodeDragStart:A,onNodeDrag:D,onNodeDragStop:C,onSelectionDrag:K,onSelectionDragStart:z,onSelectionDragStop:I,onMove:f,onMoveStart:p,onMoveEnd:m,noPanClassName:wr,nodeOrigin:ze,rfId:Jn,autoPanOnConnect:be,autoPanOnNodeDrag:we,autoPanSpeed:me,onError:et,connectionRadius:Ge,isValidConnection:Je,selectNodesOnDrag:Le,nodeDragThreshold:Et,onBeforeDelete:F,paneClickDistance:Qe,debug:$t}),P.jsx(Oq,{onSelectionChange:Z}),wn,P.jsx(Tq,{proOptions:_a,position:Wn}),P.jsx(wq,{rfId:Jn,disableKeyboardA11y:fe})]})})}var iK=BP(nK);function rK({dimensions:n,lineWidth:e,variant:t,className:i}){return P.jsx(&quot;path&quot;,{strokeWidth:e,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:Di([&quot;react-flow__background-pattern&quot;,t,i])})}function sK({radius:n,className:e}){return P.jsx(&quot;circle&quot;,{cx:n,cy:n,r:n,className:Di([&quot;react-flow__background-pattern&quot;,&quot;dots&quot;,e])})}var hl;(function(n){n.Lines=&quot;lines&quot;,n.Dots=&quot;dots&quot;,n.Cross=&quot;cross&quot;})(hl||(hl={}));const oK={[hl.Dots]:1,[hl.Lines]:1,[hl.Cross]:6},aK=n=&gt;({transform:n.transform,patternId:`pattern-${n.rfId}`});function uL({id:n,variant:e=hl.Dots,gap:t=20,size:i,lineWidth:r=1,offset:s=0,color:o,bgColor:l,style:u,className:h,patternClassName:f}){const p=re.useRef(null),{transform:m,patternId:g}=_n(aK,di),v=i||oK[e],x=e===hl.Dots,b=e===hl.Cross,_=Array.isArray(t)?t:[t,t],T=[_[0]*m[2]||1,_[1]*m[2]||1],w=v*m[2],E=Array.isArray(s)?s:[s,s],R=b?[w,w]:T,N=[E[0]*m[2]||1+R[0]/2,E[1]*m[2]||1+R[1]/2],A=`${g}${n||&quot;&quot;}`;return P.jsxs(&quot;svg&quot;,{className:Di([&quot;react-flow__background&quot;,h]),style:{...u,...t_,&quot;--xy-background-color-props&quot;:l,&quot;--xy-background-pattern-color-props&quot;:o},ref:p,&quot;data-testid&quot;:&quot;rf__background&quot;,children:[P.jsx(&quot;pattern&quot;,{id:A,x:m[0]%T[0],y:m[1]%T[1],width:T[0],height:T[1],patternUnits:&quot;userSpaceOnUse&quot;,patternTransform:`translate(-${N[0]},-${N[1]})`,children:x?P.jsx(sK,{radius:w/2,className:f}):P.jsx(rK,{dimensions:R,lineWidth:r,variant:e,className:f})}),P.jsx(&quot;rect&quot;,{x:&quot;0&quot;,y:&quot;0&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,fill:`url(#${A})`})]})}uL.displayName=&quot;Background&quot;;const lK=re.memo(uL);function cK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 32 32&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z&quot;})})}function uK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 32 5&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M0 0h32v4.2H0z&quot;})})}function hK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 32 30&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z&quot;})})}function fK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 25 32&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z&quot;})})}function dK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 25 32&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z&quot;})})}function cg({children:n,className:e,...t}){return P.jsx(&quot;button&quot;,{type:&quot;button&quot;,className:Di([&quot;react-flow__controls-button&quot;,e]),...t,children:n})}const pK=n=&gt;({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]&lt;=n.minZoom,maxZoomReached:n.transform[2]&gt;=n.maxZoom});function hL({style:n,showZoom:e=!0,showFitView:t=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:h,children:f,position:p=&quot;bottom-left&quot;,orientation:m=&quot;vertical&quot;,&quot;aria-label&quot;:g=&quot;React Flow controls&quot;}){const v=$n(),{isInteractive:x,minZoomReached:b,maxZoomReached:_}=_n(pK,di),{zoomIn:T,zoomOut:w,fitView:E}=Jw(),R=()=&gt;{T(),s==null||s()},N=()=&gt;{w(),o==null||o()},A=()=&gt;{E(r),l==null||l()},D=()=&gt;{v.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),u==null||u(!x)},C=m===&quot;horizontal&quot;?&quot;horizontal&quot;:&quot;vertical&quot;;return P.jsxs(e_,{className:Di([&quot;react-flow__controls&quot;,C,h]),position:p,style:n,&quot;data-testid&quot;:&quot;rf__controls&quot;,&quot;aria-label&quot;:g,children:[e&amp;&amp;P.jsxs(P.Fragment,{children:[P.jsx(cg,{onClick:R,className:&quot;react-flow__controls-zoomin&quot;,title:&quot;zoom in&quot;,&quot;aria-label&quot;:&quot;zoom in&quot;,disabled:_,children:P.jsx(cK,{})}),P.jsx(cg,{onClick:N,className:&quot;react-flow__controls-zoomout&quot;,title:&quot;zoom out&quot;,&quot;aria-label&quot;:&quot;zoom out&quot;,disabled:b,children:P.jsx(uK,{})})]}),t&amp;&amp;P.jsx(cg,{className:&quot;react-flow__controls-fitview&quot;,onClick:A,title:&quot;fit view&quot;,&quot;aria-label&quot;:&quot;fit view&quot;,children:P.jsx(hK,{})}),i&amp;&amp;P.jsx(cg,{className:&quot;react-flow__controls-interactive&quot;,onClick:D,title:&quot;toggle interactivity&quot;,&quot;aria-label&quot;:&quot;toggle interactivity&quot;,children:x?P.jsx(dK,{}):P.jsx(fK,{})}),f]})}hL.displayName=&quot;Controls&quot;;const mK=re.memo(hL);function gK({id:n,x:e,y:t,width:i,height:r,style:s,color:o,strokeColor:l,strokeWidth:u,className:h,borderRadius:f,shapeRendering:p,selected:m,onClick:g}){const{background:v,backgroundColor:x}=s||{},b=o||v||x;return P.jsx(&quot;rect&quot;,{className:Di([&quot;react-flow__minimap-node&quot;,{selected:m},h]),x:e,y:t,rx:f,ry:f,width:i,height:r,style:{fill:b,stroke:l,strokeWidth:u},shapeRendering:p,onClick:g?_=&gt;g(_,n):void 0})}const yK=re.memo(gK),_K=n=&gt;n.nodes.map(e=&gt;e.id),Sx=n=&gt;n instanceof Function?n:()=&gt;n;function vK({nodeStrokeColor:n,nodeColor:e,nodeClassName:t=&quot;&quot;,nodeBorderRadius:i=5,nodeStrokeWidth:r,nodeComponent:s=yK,onClick:o}){const l=_n(_K,di),u=Sx(e),h=Sx(n),f=Sx(t),p=typeof window&gt;&quot;u&quot;||window.chrome?&quot;crispEdges&quot;:&quot;geometricPrecision&quot;;return P.jsx(P.Fragment,{children:l.map(m=&gt;P.jsx(xK,{id:m,nodeColorFunc:u,nodeStrokeColorFunc:h,nodeClassNameFunc:f,nodeBorderRadius:i,nodeStrokeWidth:r,NodeComponent:s,onClick:o,shapeRendering:p},m))})}function bK({id:n,nodeColorFunc:e,nodeStrokeColorFunc:t,nodeClassNameFunc:i,nodeBorderRadius:r,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:h,x:f,y:p,width:m,height:g}=_n(v=&gt;{const x=v.nodeLookup.get(n),{x:b,y:_}=x.internals.positionAbsolute,{width:T,height:w}=ga(x);return{node:x,x:b,y:_,width:T,height:w}},di);return!h||h.hidden||!hP(h)?null:P.jsx(l,{x:f,y:p,width:m,height:g,style:h.style,selected:!!h.selected,className:i(h),color:e(h),borderRadius:r,strokeColor:t(h),strokeWidth:s,shapeRendering:o,onClick:u,id:h.id})}const xK=re.memo(bK);var SK=re.memo(vK);const wK=200,EK=150,TK=n=&gt;{const e={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:e,boundingRect:n.nodeLookup.size&gt;0?cP(tp(n.nodeLookup),e):e,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height}},MK=&quot;react-flow__minimap-desc&quot;;function fL({style:n,className:e,nodeStrokeColor:t,nodeColor:i,nodeClassName:r=&quot;&quot;,nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:h,maskStrokeColor:f,maskStrokeWidth:p,position:m=&quot;bottom-right&quot;,onClick:g,onNodeClick:v,pannable:x=!1,zoomable:b=!1,ariaLabel:_=&quot;React Flow mini map&quot;,inversePan:T,zoomStep:w=10,offsetScale:E=5}){const R=$n(),N=re.useRef(null),{boundingRect:A,viewBB:D,rfId:C,panZoom:O,translateExtent:L,flowWidth:V,flowHeight:Z}=_n(TK,di),z=(n==null?void 0:n.width)??wK,K=(n==null?void 0:n.height)??EK,I=A.width/z,j=A.height/K,G=Math.max(I,j),ee=G*z,F=G*K,ne=E*G,le=A.x-(ee-A.width)/2-ne,ce=A.y-(F-A.height)/2-ne,ie=ee+ne*2,oe=F+ne*2,ae=`${MK}-${C}`,ue=re.useRef(0),ve=re.useRef();ue.current=G,re.useEffect(()=&gt;{if(N.current&amp;&amp;O)return ve.current=WX({domNode:N.current,panZoom:O,getTransform:()=&gt;R.getState().transform,getViewScale:()=&gt;ue.current}),()=&gt;{var lt;(lt=ve.current)==null||lt.destroy()}},[O]),re.useEffect(()=&gt;{var lt;(lt=ve.current)==null||lt.update({translateExtent:L,width:V,height:Z,inversePan:T,pannable:x,zoomStep:w,zoomable:b})},[x,b,T,w,L,V,Z]);const He=g?lt=&gt;{var Q;const[We,Ye]=((Q=ve.current)==null?void 0:Q.pointer(lt))||[0,0];g(lt,{x:We,y:Ye})}:void 0,Xe=v?re.useCallback((lt,We)=&gt;{const Ye=R.getState().nodeLookup.get(We);v(lt,Ye)},[]):void 0;return P.jsx(e_,{position:m,style:{...n,&quot;--xy-minimap-background-color-props&quot;:typeof u==&quot;string&quot;?u:void 0,&quot;--xy-minimap-mask-background-color-props&quot;:typeof h==&quot;string&quot;?h:void 0,&quot;--xy-minimap-mask-stroke-color-props&quot;:typeof f==&quot;string&quot;?f:void 0,&quot;--xy-minimap-mask-stroke-width-props&quot;:typeof p==&quot;number&quot;?p*G:void 0,&quot;--xy-minimap-node-background-color-props&quot;:typeof i==&quot;string&quot;?i:void 0,&quot;--xy-minimap-node-stroke-color-props&quot;:typeof t==&quot;string&quot;?t:void 0,&quot;--xy-minimap-node-stroke-width-props&quot;:typeof o==&quot;string&quot;?o:void 0},className:Di([&quot;react-flow__minimap&quot;,e]),&quot;data-testid&quot;:&quot;rf__minimap&quot;,children:P.jsxs(&quot;svg&quot;,{width:z,height:K,viewBox:`${le} ${ce} ${ie} ${oe}`,className:&quot;react-flow__minimap-svg&quot;,role:&quot;img&quot;,&quot;aria-labelledby&quot;:ae,ref:N,onClick:He,children:[_&amp;&amp;P.jsx(&quot;title&quot;,{id:ae,children:_}),P.jsx(SK,{onClick:Xe,nodeColor:i,nodeStrokeColor:t,nodeBorderRadius:s,nodeClassName:r,nodeStrokeWidth:o,nodeComponent:l}),P.jsx(&quot;path&quot;,{className:&quot;react-flow__minimap-mask&quot;,d:`M${le-ne},${ce-ne}h${ie+ne*2}v${oe+ne*2}h${-ie-ne*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fillRule:&quot;evenodd&quot;,pointerEvents:&quot;none&quot;})]})})}fL.displayName=&quot;MiniMap&quot;;const AK=re.memo(fL);function CK({nodeId:n,position:e,variant:t=dd.Handle,className:i,style:r={},children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:h=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,shouldResize:m,onResizeStart:g,onResize:v,onResizeEnd:x}){const b=jP(),_=typeof n==&quot;string&quot;?n:b,T=$n(),w=re.useRef(null),E=t===dd.Line?&quot;right&quot;:&quot;bottom-right&quot;,R=e??E,N=re.useRef(null);re.useEffect(()=&gt;{if(!(!w.current||!_))return N.current||(N.current=oq({domNode:w.current,nodeId:_,getStoreItems:()=&gt;{const{nodeLookup:O,transform:L,snapGrid:V,snapToGrid:Z,nodeOrigin:z,domNode:K}=T.getState();return{nodeLookup:O,transform:L,snapGrid:V,snapToGrid:Z,nodeOrigin:z,paneDomNode:K}},onChange:(O,L)=&gt;{const{triggerNodeChanges:V,nodeLookup:Z,parentLookup:z,nodeOrigin:K}=T.getState(),I=[],j={x:O.x,y:O.y},G=Z.get(_);if(G&amp;&amp;G.expandParent&amp;&amp;G.parentId){const ee=G.origin??K,F=O.width??G.measured.width??0,ne=O.height??G.measured.height??0,le={id:G.id,parentId:G.parentId,rect:{width:F,height:ne,...fP({x:O.x??G.position.x,y:O.y??G.position.y},{width:F,height:ne},G.parentId,Z,ee)}},ce=Zw([le],Z,z,K);I.push(...ce),j.x=O.x?Math.max(ee[0]*F,O.x):void 0,j.y=O.y?Math.max(ee[1]*ne,O.y):void 0}if(j.x!==void 0&amp;&amp;j.y!==void 0){const ee={id:_,type:&quot;position&quot;,position:{...j}};I.push(ee)}if(O.width!==void 0&amp;&amp;O.height!==void 0){const ee={id:_,type:&quot;dimensions&quot;,resizing:!0,setAttributes:!0,dimensions:{width:O.width,height:O.height}};I.push(ee)}for(const ee of L){const F={...ee,type:&quot;position&quot;};I.push(F)}V(I)},onEnd:()=&gt;{const O={id:_,type:&quot;dimensions&quot;,resizing:!1};T.getState().triggerNodeChanges([O])}})),N.current.update({controlPosition:R,boundaries:{minWidth:l,minHeight:u,maxWidth:h,maxHeight:f},keepAspectRatio:p,onResizeStart:g,onResize:v,onResizeEnd:x,shouldResize:m}),()=&gt;{var O;(O=N.current)==null||O.destroy()}},[R,l,u,h,f,p,g,v,x,m]);const A=R.split(&quot;-&quot;),D=t===dd.Line?&quot;borderColor&quot;:&quot;backgroundColor&quot;,C=o?{...r,[D]:o}:r;return P.jsx(&quot;div&quot;,{className:Di([&quot;react-flow__resize-control&quot;,&quot;nodrag&quot;,...A,t,i]),ref:w,style:C,children:s})}re.memo(CK);const Ks=Eo(n=&gt;({isNodeEditorVisible:!1,setIsNodeEditorVisible:e=&gt;n({isNodeEditorVisible:e}),nodes:[{id:&quot;1&quot;,type:&quot;input&quot;,data:{label:&quot;Start Procedure&quot;},position:{x:250,y:0}}],edges:[],setNodes:e=&gt;n({nodes:e}),setEdges:e=&gt;n({edges:e}),onNodesChange:e=&gt;n(t=&gt;({nodes:FP(e,t.nodes)})),onEdgesChange:e=&gt;n(t=&gt;({edges:zP(e,t.edges)})),onConnect:e=&gt;n(t=&gt;({edges:_P(e,t.edges)})),use_node_editor_only:window.NODE_EDITOR_ONLY||!1}));async function yO(n){var s;const e=n.procedureStore();if(!e)return;const t=e.proceduresLength();if(!t)return;const i=[],r=n.server();if(r){const o=r.allFileObjectsLength();if(o)for(let l=0;l&lt;o;l++){const u=(s=n.server())==null?void 0:s.allFileObjects(l);if(u){const h={id:`file-object-${l}`,type:&quot;file_object&quot;,position:{x:250,y:l*100-100},data:{label:u.name(),description:u.fileType().toString(),filepath:u.filepath(),filetype:So[u.fileType()].toString(),fileobject:u,fileobjectT:u.unpack(),glbFile:u.glbFile(),IfcSqliteFile:u.ifcsqliteFile(),isProcedureOutput:u.isProcedureOutput()}};i.push(h)}}}for(let o=0;o&lt;t;o++){const l=e.procedures(o);if(l){const u=l.unpack(),h={};for(let m=0;m&lt;u.fileInputs.length;m++){const g=u.fileInputs[m];g&amp;&amp;g.argName&amp;&amp;(h[g.argName.toString()]=g)}const f={};for(let m=0;m&lt;u.fileOutputs.length;m++){const g=u.fileOutputs[m];g&amp;&amp;g.argName&amp;&amp;(f[g.argName.toString()]=g)}const p={id:`procedure-${o}`,type:&quot;procedure&quot;,position:{x:250,y:o*100},data:{label:l.name(),description:l.description(),scriptFileLocation:l.scriptFileLocation(),procedure:u,fileInputsMap:h,fileOutputsMap:f}};i.push(p)}}Ks.getState().setNodes(i)}function RK(n){var p,m,g;let e=(p=n.procedureParent())==null?void 0:p.procedureIdString();if(!e){console.error(&quot;No procedure ID found in the message&quot;);return}const t=Ks.getState().nodes,i=t.find(v=&gt;v.id===e);let r=t.length+1,s=((m=i==null?void 0:i.position)==null?void 0:m.x)||250,o=((g=i==null?void 0:i.position)==null?void 0:g.y)||0,l=(i==null?void 0:i.width)||200;const u={id:`file-object-${r}`,type:&quot;file_object&quot;,position:{x:s+l+50,y:o},data:{label:n.name(),description:n.fileType().toString(),filepath:n.filepath(),filetype:So[n.fileType()].toString(),fileobject:n,glbFile:n.glbFile(),IfcSqliteFile:n.ifcsqliteFile(),isProcedureOutput:n.isProcedureOutput()}},h={id:`edge-${r}`,source:u.id,target:e},f=Ks.getState().edges;Ks.getState().setNodes([...t,u]),Ks.getState().setEdges([...f,h])}async function OK(n){var t,i;console.log(&quot;receive_procedure&quot;),console.log(&quot;Instance ID:&quot;,n.instanceId());let e=(t=n.serverReply())==null?void 0:t.fileObjectsLength();if(e)for(let r=0;r&lt;e;r++){let s=(i=n.serverReply())==null?void 0:i.fileObjects(r);if(!s){console.error(&quot;No file object found in the message&quot;);continue}RK(s)}}const e1=Eo(n=&gt;({serverFiles:[],setServerFiles:e=&gt;n({serverFiles:e}),showServerInfoBox:!1,setShowServerInfoBox:e=&gt;n({showServerInfoBox:e}),showUrdfLoader:!1,setShowUrdfLoader:e=&gt;n({showUrdfLoader:e})}));async function DK(n){n.unpack(),e1.getState().setShowServerInfoBox(!0)}async function NK(n){var e,t,i;try{const r=new Ad(new Uint8Array(n)),s=at.getRootAsMessage(r),o=s.commandType();switch(o){case Bn.PING:await lG(s);break;case Bn.UPDATE_SCENE:await cR(s),await yO(s);break;case Bn.MESH_INFO_REPLY:await uR(s);break;case Bn.SERVER_REPLY:const l=(e=s.serverReply())==null?void 0:e.replyTo();switch(l){case Bn.LIST_PROCEDURES:await yO(s);break;case Bn.MESH_INFO_CALLBACK:await uR(s);break;case Bn.VIEW_FILE_OBJECT:console.log(&quot;VIEW_FILE_OBJECT Server Reply message received&quot;),await cR(s);break;case Bn.RUN_PROCEDURE:console.log(&quot;RUN_PROCEDURE Server Reply message received&quot;),await OK(s);break;case Bn.LIST_FILE_OBJECTS:await DK(s);break;default:console.error(&quot;Unknown Server Reply type:&quot;,l)}break;case Bn.ERROR:console.error(&quot;Server Error message received:&quot;),console.error((i=(t=s.serverReply())==null?void 0:t.error())==null?void 0:i.message());break;default:console.error(&quot;Unknown FlatBuffer message type:&quot;,Bn[o])}console.log(&quot;Flatbuffer message received&quot;),console.log(&quot;Instance ID:&quot;,s.instanceId()),console.log(&quot;Command Type:&quot;,Bn[s.commandType()]),console.log(&quot;Mesh Info:&quot;,s.meshInfo())}catch(r){console.error(&quot;Error handling FlatBuffer message:&quot;,r)}}async function dL(n){try{if(n.data instanceof Blob){const e=await n.data.arrayBuffer();await NK(e)}else console.log(&quot;Message from server&quot;,n.data)}catch(e){console.error(&quot;Error handling WebSocket message:&quot;,e)}}const Bc=Eo(n=&gt;({isOptionsVisible:!1,showPerf:!1,showEdges:!0,lockTranslation:!1,enableWebsocket:!0,enableNodeEditor:!1,setIsOptionsVisible:e=&gt;n({isOptionsVisible:e}),setShowPerf:e=&gt;n({showPerf:e}),setShowEdges:e=&gt;n({showEdges:e}),setLockTranslation:e=&gt;n({lockTranslation:e}),setEnableNodeEditor:e=&gt;n({enableNodeEditor:e}),setEnableWebsocket:async e=&gt;{n({enableWebsocket:e});try{if(e){const t=WN.getState().webSocketAddress;await Ei.connect(t),(async()=&gt;{for await(const i of Ei.messages())await dL(i)})().catch(i=&gt;{console.error(&quot;Error in WS message loop:&quot;,i)})}else await Ei.disconnect()}catch(t){console.error(&quot;Error toggling WebSocket:&quot;,t)}}})),Nh=Eo(n=&gt;({selectedObjects:new Map,addSelectedObject:(e,t)=&gt;n(i=&gt;{const r=new Map(i.selectedObjects),s=new Set(r.get(e)||[]);return s.add(t),r.set(e,s),e instanceof bs?e.updateSelectionGroups(Array.from(s)):e.traverse(o=&gt;{o instanceof bs&amp;&amp;o.updateSelectionGroups(Array.from(s))}),{selectedObjects:r}}),removeSelectedObject:(e,t)=&gt;n(i=&gt;{const r=new Map(i.selectedObjects),s=r.get(e);if(s){const o=new Set(s);o.delete(t),o.size===0?(e.clearSelectionGroups(),r.delete(e)):(r.set(e,o),e.updateSelectionGroups(Array.from(o)))}return{selectedObjects:r}}),clearSelectedObjects:()=&gt;n(e=&gt;(e.selectedObjects.forEach((t,i)=&gt;{i instanceof bs?i.clearSelectionGroups():i.traverse(r=&gt;{r instanceof bs&amp;&amp;r.clearSelectionGroups()})}),{selectedObjects:new Map})),addBatchofMeshes:e=&gt;n(t=&gt;{const i=new Map(t.selectedObjects),r=new Map;return e.forEach(([s,o])=&gt;{r.has(s)||r.set(s,new Set),r.get(s).add(o)}),r.forEach((s,o)=&gt;{const l=new Set(i.get(o)||[]);s.forEach(u=&gt;l.add(u)),i.set(o,l),o instanceof bs?o.updateSelectionGroups(Array.from(l)):o.traverse(u=&gt;{u instanceof bs&amp;&amp;u.updateSelectionGroups(Array.from(l))})}),{selectedObjects:i}})})),_O={type:&quot;change&quot;},t1={type:&quot;start&quot;},pL={type:&quot;end&quot;},ug=new bl,vO=new Qo,IK=Math.cos(70*rl.DEG2RAD),Li=new Y,Dr=2*Math.PI,kn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},wx=1e-6;class Ic extends kN{constructor(e,t=null){super(e,t),this.state=kn.NONE,this.target=new Y,this.cursor=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:&quot;ArrowLeft&quot;,UP:&quot;ArrowUp&quot;,RIGHT:&quot;ArrowRight&quot;,BOTTOM:&quot;ArrowDown&quot;},this.mouseButtons={LEFT:_c.ROTATE,MIDDLE:_c.DOLLY,RIGHT:_c.PAN},this.touches={ONE:uc.ROTATE,TWO:uc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Y,this._lastQuaternion=new Si,this._lastTargetPosition=new Y,this._quat=new Si().setFromUnitVectors(e.up,new Y(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new uS,this._sphericalDelta=new uS,this._scale=1,this._panOffset=new Y,this._rotateStart=new Oe,this._rotateEnd=new Oe,this._rotateDelta=new Oe,this._panStart=new Oe,this._panEnd=new Oe,this._panDelta=new Oe,this._dollyStart=new Oe,this._dollyEnd=new Oe,this._dollyDelta=new Oe,this._dollyDirection=new Y,this._mouse=new Oe,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=LK.bind(this),this._onPointerDown=PK.bind(this),this._onPointerUp=UK.bind(this),this._onContextMenu=GK.bind(this),this._onMouseWheel=zK.bind(this),this._onKeyDown=BK.bind(this),this._onTouchStart=HK.bind(this),this._onTouchMove=VK.bind(this),this._onMouseDown=kK.bind(this),this._onMouseMove=FK.bind(this),this._interceptControlDown=jK.bind(this),this._interceptControlUp=WK.bind(this),this.domElement!==null&amp;&amp;this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener(&quot;pointerdown&quot;,this._onPointerDown),this.domElement.addEventListener(&quot;pointercancel&quot;,this._onPointerUp),this.domElement.addEventListener(&quot;contextmenu&quot;,this._onContextMenu),this.domElement.addEventListener(&quot;wheel&quot;,this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener(&quot;keydown&quot;,this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction=&quot;none&quot;}disconnect(){this.domElement.removeEventListener(&quot;pointerdown&quot;,this._onPointerDown),this.domElement.removeEventListener(&quot;pointermove&quot;,this._onPointerMove),this.domElement.removeEventListener(&quot;pointerup&quot;,this._onPointerUp),this.domElement.removeEventListener(&quot;pointercancel&quot;,this._onPointerUp),this.domElement.removeEventListener(&quot;wheel&quot;,this._onMouseWheel),this.domElement.removeEventListener(&quot;contextmenu&quot;,this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener(&quot;keydown&quot;,this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction=&quot;auto&quot;}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener(&quot;keydown&quot;,this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&amp;&amp;(this._domElementKeyEvents.removeEventListener(&quot;keydown&quot;,this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(_O),this.update(),this.state=kn.NONE}update(e=null){const t=this.object.position;Li.copy(t).sub(this.target),Li.applyQuaternion(this._quat),this._spherical.setFromVector3(Li),this.autoRotate&amp;&amp;this.state===kn.NONE&amp;&amp;this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&amp;&amp;isFinite(r)&amp;&amp;(i&lt;-Math.PI?i+=Dr:i&gt;Math.PI&amp;&amp;(i-=Dr),r&lt;-Math.PI?r+=Dr:r&gt;Math.PI&amp;&amp;(r-=Dr),i&lt;=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta&gt;(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&amp;&amp;this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(Li.setFromSpherical(this._spherical),Li.applyQuaternion(this._quatInverse),t.copy(this.target).add(Li),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&amp;&amp;this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const l=Li.length();o=this._clampDistance(l*this._scale);const u=l-o;this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),s=!!u}else if(this.object.isOrthographicCamera){const l=new Y(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=u!==this.object.zoom;const h=new Y(this._mouse.x,this._mouse.y,0);h.unproject(this.object),this.object.position.sub(h).add(l),this.object.updateMatrixWorld(),o=Li.length()}else console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.&quot;),this.zoomToCursor=!1;o!==null&amp;&amp;(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(ug.origin.copy(this.object.position),ug.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(ug.direction))&lt;IK?this.object.lookAt(this.target):(vO.setFromNormalAndCoplanarPoint(this.object.up,this.target),ug.intersectPlane(vO,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&amp;&amp;(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)&gt;wx||8*(1-this._lastQuaternion.dot(this.object.quaternion))&gt;wx||this._lastTargetPosition.distanceToSquared(this.target)&gt;wx?(this.dispatchEvent(_O),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Dr/60*this.autoRotateSpeed*e:Dr/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Li.setFromMatrixColumn(t,0),Li.multiplyScalar(-e),this._panOffset.add(Li)}_panUp(e,t){this.screenSpacePanning===!0?Li.setFromMatrixColumn(t,1):(Li.setFromMatrixColumn(t,0),Li.crossVectors(this.object.up,Li)),Li.multiplyScalar(e),this._panOffset.add(Li)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;Li.copy(r).sub(this.target);let s=Li.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/i.clientHeight,this.object.matrix),this._panUp(2*t*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.&quot;),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.&quot;),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.&quot;),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),r=e-i.left,s=t-i.top,o=i.width,l=i.height;this._mouse.x=r/o*2-1,this._mouse.y=-(s/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Dr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Dr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y&gt;0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y&lt;0&amp;&amp;this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY&lt;0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY&gt;0&amp;&amp;this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateUp(Dr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateUp(-Dr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateLeft(Dr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateLeft(-Dr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(-this.keyPanSpeed,0),t=!0;break}t&amp;&amp;(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&amp;&amp;this._handleTouchStartDolly(e),this.enablePan&amp;&amp;this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&amp;&amp;this._handleTouchStartDolly(e),this.enableRotate&amp;&amp;this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),s=.5*(e.pageY+i.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Dr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Dr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,l=(e.pageY+t.y)*.5;this._updateZoomParameters(o,l)}_handleTouchMoveDollyPan(e){this.enableZoom&amp;&amp;this._handleTouchMoveDolly(e),this.enablePan&amp;&amp;this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&amp;&amp;this._handleTouchMoveDolly(e),this.enableRotate&amp;&amp;this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t&lt;this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t&lt;this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&amp;&amp;(t=new Oe,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&amp;&amp;!this._controlActive&amp;&amp;(i.deltaY*=10),i}}function PK(n){this.enabled!==!1&amp;&amp;(this._pointers.length===0&amp;&amp;(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener(&quot;pointermove&quot;,this._onPointerMove),this.domElement.addEventListener(&quot;pointerup&quot;,this._onPointerUp)),!this._isTrackingPointer(n)&amp;&amp;(this._addPointer(n),n.pointerType===&quot;touch&quot;?this._onTouchStart(n):this._onMouseDown(n)))}function LK(n){this.enabled!==!1&amp;&amp;(n.pointerType===&quot;touch&quot;?this._onTouchMove(n):this._onMouseMove(n))}function UK(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener(&quot;pointermove&quot;,this._onPointerMove),this.domElement.removeEventListener(&quot;pointerup&quot;,this._onPointerUp),this.dispatchEvent(pL),this.state=kn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function kK(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case _c.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=kn.DOLLY;break;case _c.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=kn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=kn.ROTATE}break;case _c.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=kn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=kn.PAN}break;default:this.state=kn.NONE}this.state!==kn.NONE&amp;&amp;this.dispatchEvent(t1)}function FK(n){switch(this.state){case kn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case kn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case kn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function zK(n){this.enabled===!1||this.enableZoom===!1||this.state!==kn.NONE||(n.preventDefault(),this.dispatchEvent(t1),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(pL))}function BK(n){this.enabled!==!1&amp;&amp;this._handleKeyDown(n)}function HK(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case uc.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=kn.TOUCH_ROTATE;break;case uc.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=kn.TOUCH_PAN;break;default:this.state=kn.NONE}break;case 2:switch(this.touches.TWO){case uc.DOLLY_PAN:if(this.enableZoom===!1&amp;&amp;this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=kn.TOUCH_DOLLY_PAN;break;case uc.DOLLY_ROTATE:if(this.enableZoom===!1&amp;&amp;this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=kn.TOUCH_DOLLY_ROTATE;break;default:this.state=kn.NONE}break;default:this.state=kn.NONE}this.state!==kn.NONE&amp;&amp;this.dispatchEvent(t1)}function VK(n){switch(this._trackPointer(n),this.state){case kn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case kn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case kn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&amp;&amp;this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case kn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&amp;&amp;this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=kn.NONE}}function GK(n){this.enabled!==!1&amp;&amp;n.preventDefault()}function jK(n){n.key===&quot;Control&quot;&amp;&amp;(this._controlActive=!0,this.domElement.getRootNode().addEventListener(&quot;keyup&quot;,this._interceptControlUp,{passive:!0,capture:!0}))}function WK(n){n.key===&quot;Control&quot;&amp;&amp;(this._controlActive=!1,this.domElement.getRootNode().removeEventListener(&quot;keyup&quot;,this._interceptControlUp,{passive:!0,capture:!0}))}const XK=(n,e,t=1)=&gt;{const i=Nh.getState().selectedObjects,{zIsUp:r}=eo.getState();if(n&amp;&amp;e&amp;&amp;i.size&gt;0){const s=new Ri,o=new Y;if(i.forEach((l,u)=&gt;{const h=u.geometry,f=h.getAttribute(&quot;position&quot;),p=h.getIndex();if(!f){console.warn(&quot;Geometry has no position attribute.&quot;);return}if(!p){console.warn(&quot;Geometry has no index buffer.&quot;);return}const m=p.array;l.forEach(g=&gt;{const v=u.drawRanges.get(g);if(v){const[x,b]=v;if(x&lt;0||x+b&gt;m.length){console.warn(`Draw range (start: ${x}, count: ${b}) is out of bounds.`);return}for(let _=x;_&lt;x+b;_++){const T=m[_];if(T&lt;0||T&gt;=f.count){console.warn(`Index ${T} at position ${_} is out of bounds.`);continue}if(o.fromBufferAttribute(f,T),isNaN(o.x)||isNaN(o.y)||isNaN(o.z)){console.warn(`NaN detected in vertex position at index ${T}. Skipping.`);continue}u.localToWorld(o),s.expandByPoint(o)}}else console.warn(`Draw range ID ${g} not found in mesh.`)})}),s.isEmpty())console.warn(&quot;Bounding box is empty after processing selected vertices.&quot;);else{const l=new wi;s.getBoundingSphere(l);const u=l.center,h=l.radius;if(h===0||isNaN(h)){console.warn(&quot;Selection has zero size or invalid radius.&quot;);return}let f=0;if(e instanceof Yn){const g=e.fov*Math.PI/180;f=h/Math.sin(g/2)/t}else if(e instanceof Fc){const g=e.right/e.top;e.top=h/t,e.bottom=-h/t,e.left=-h*g/t,e.right=h*g/t,e.updateProjectionMatrix(),f=e.position.distanceTo(u)}else{console.warn(&quot;Unknown camera type.&quot;);return}const p=new Y;e.getWorldDirection(p).normalize();const m=u.clone().add(p.multiplyScalar(-f));if(e.position.copy(m),r?e.up.set(0,0,1):e.up.set(0,1,0),e.lookAt(u),e.updateProjectionMatrix(),n instanceof Ic)n.target.copy(u),n.update();else{const g=n,v=new wi(u,h/t);g.fitToSphere(v,!0)}}}else console.warn(&quot;No selected objects to center view on.&quot;)};/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const ni={LEFT:1,RIGHT:2,MIDDLE:4},Se=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),Uu={NONE:0,IN:1,OUT:-1};function tc(n){return n.isPerspectiveCamera}function el(n){return n.isOrthographicCamera}const ku=Math.PI*2,bO=Math.PI/2,mL=1e-5,Hf=Math.PI/180;function Bs(n,e,t){return Math.max(e,Math.min(t,n))}function Gn(n,e=mL){return Math.abs(n)&lt;e}function An(n,e,t=mL){return Gn(n-e,t)}function xO(n,e){return Math.round(n/e)*e}function Vf(n){return isFinite(n)?n:n&lt;0?-Number.MAX_VALUE:Number.MAX_VALUE}function Gf(n){return Math.abs(n)&lt;Number.MAX_VALUE?n:n*(1/0)}function hg(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,l=o*s,u=1/(1+l+.48*l*l+.235*l*l*l);let h=n-e;const f=e,p=r*i;h=Bs(h,-p,p),e=n-h;const m=(t.value+o*h)*s;t.value=(t.value-o*m)*u;let g=e+(h+m)*u;return f-n&gt;0==g&gt;f&amp;&amp;(g=f,t.value=(g-f)/s),g}function SO(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const l=2/i,u=l*s,h=1/(1+u+.48*u*u+.235*u*u*u);let f=e.x,p=e.y,m=e.z,g=n.x-f,v=n.y-p,x=n.z-m;const b=f,_=p,T=m,w=r*i,E=w*w,R=g*g+v*v+x*x;if(R&gt;E){const K=Math.sqrt(R);g=g/K*w,v=v/K*w,x=x/K*w}f=n.x-g,p=n.y-v,m=n.z-x;const N=(t.x+l*g)*s,A=(t.y+l*v)*s,D=(t.z+l*x)*s;t.x=(t.x-l*N)*h,t.y=(t.y-l*A)*h,t.z=(t.z-l*D)*h,o.x=f+(g+N)*h,o.y=p+(v+A)*h,o.z=m+(x+D)*h;const C=b-n.x,O=_-n.y,L=T-n.z,V=o.x-b,Z=o.y-_,z=o.z-T;return C*V+O*Z+L*z&gt;0&amp;&amp;(o.x=b,o.y=_,o.z=T,t.x=(o.x-b)/s,t.y=(o.y-_)/s,t.z=(o.z-T)/s),o}function Ex(n,e){e.set(0,0),n.forEach(t=&gt;{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function Tx(n,e){return el(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class qK{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&amp;&amp;(i[e]=[]),i[e].indexOf(t)===-1&amp;&amp;i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&amp;&amp;i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&amp;&amp;r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&amp;&amp;(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s&lt;o;s++)r[s].call(this,e)}}}var Mx;const YK=&quot;2.10.1&quot;,fg=1/8,KK=/Mac/.test((Mx=globalThis==null?void 0:globalThis.navigator)===null||Mx===void 0?void 0:Mx.platform);let Ft,wO,dg,Ax,Nr,Yt,xn,Fu,jf,uo,ho,nc,EO,TO,gs,Wf,zu,MO,Cx,AO,Rx,Ox,pg;class vh extends qK{static install(e){Ft=e.THREE,wO=Object.freeze(new Ft.Vector3(0,0,0)),dg=Object.freeze(new Ft.Vector3(0,1,0)),Ax=Object.freeze(new Ft.Vector3(0,0,1)),Nr=new Ft.Vector2,Yt=new Ft.Vector3,xn=new Ft.Vector3,Fu=new Ft.Vector3,jf=new Ft.Vector3,uo=new Ft.Vector3,ho=new Ft.Vector3,nc=new Ft.Vector3,EO=new Ft.Vector3,TO=new Ft.Vector3,gs=new Ft.Spherical,Wf=new Ft.Spherical,zu=new Ft.Box3,MO=new Ft.Box3,Cx=new Ft.Sphere,AO=new Ft.Quaternion,Rx=new Ft.Quaternion,Ox=new Ft.Matrix4,pg=new Ft.Raycaster}static get ACTION(){return Se}set verticalDragToForward(e){console.warn(&quot;camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.&quot;)}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=&gt;{},this._enabled=!0,this._state=Se.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Uu.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Ft.Vector3,this._focalOffsetVelocity=new Ft.Vector3,this._zoomVelocity={value:0},this._truckInternal=(_,T,w,E)=&gt;{let R,N;if(tc(this._camera)){const A=Yt.copy(this._camera.position).sub(this._target),D=this._camera.getEffectiveFOV()*Hf,C=A.length()*Math.tan(D*.5);R=this.truckSpeed*_*C/this._elementRect.height,N=this.truckSpeed*T*C/this._elementRect.height}else if(el(this._camera)){const A=this._camera;R=this.truckSpeed*_*(A.right-A.left)/A.zoom/this._elementRect.width,N=this.truckSpeed*T*(A.top-A.bottom)/A.zoom/this._elementRect.height}else return;E?(w?this.setFocalOffset(this._focalOffsetEnd.x+R,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(R,0,!0),this.forward(-N,!0)):w?this.setFocalOffset(this._focalOffsetEnd.x+R,this._focalOffsetEnd.y+N,this._focalOffsetEnd.z,!0):this.truck(R,N,!0)},this._rotateInternal=(_,T)=&gt;{const w=ku*this.azimuthRotateSpeed*_/this._elementRect.height,E=ku*this.polarRotateSpeed*T/this._elementRect.height;this.rotate(w,E,!0)},this._dollyInternal=(_,T,w)=&gt;{const E=Math.pow(.95,-_*this.dollySpeed),R=this._sphericalEnd.radius,N=this._sphericalEnd.radius*E,A=Bs(N,this.minDistance,this.maxDistance),D=A-N;this.infinityDolly&amp;&amp;this.dollyToCursor?this._dollyToNoClamp(N,!0):this.infinityDolly&amp;&amp;!this.dollyToCursor?(this.dollyInFixed(D,!0),this._dollyToNoClamp(A,!0)):this._dollyToNoClamp(A,!0),this.dollyToCursor&amp;&amp;(this._changedDolly+=(this.infinityDolly?N:A)-R,this._dollyControlCoord.set(T,w)),this._lastDollyDirection=Math.sign(-_)},this._zoomInternal=(_,T,w)=&gt;{const E=Math.pow(.95,_*this.dollySpeed),R=this._zoom,N=this._zoom*E;this.zoomTo(N,!0),this.dollyToCursor&amp;&amp;(this._changedZoom+=N-R,this._dollyControlCoord.set(T,w))},typeof Ft&gt;&quot;u&quot;&amp;&amp;console.error(&quot;camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information.&quot;),this._camera=e,this._yAxisUpSpace=new Ft.Quaternion().setFromUnitVectors(this._camera.up,dg),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Se.NONE,this._target=new Ft.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Ft.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Ft.Spherical().setFromVector3(Yt.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Ft.Vector3,new Ft.Vector3,new Ft.Vector3,new Ft.Vector3],this._updateNearPlaneCorners(),this._boundary=new Ft.Box3(new Ft.Vector3(-1/0,-1/0,-1/0),new Ft.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Ft.Vector2,this.mouseButtons={left:Se.ROTATE,middle:Se.DOLLY,right:Se.TRUCK,wheel:tc(this._camera)?Se.DOLLY:el(this._camera)?Se.ZOOM:Se.NONE},this.touches={one:Se.TOUCH_ROTATE,two:tc(this._camera)?Se.TOUCH_DOLLY_TRUCK:el(this._camera)?Se.TOUCH_ZOOM_TRUCK:Se.NONE,three:Se.TOUCH_TRUCK};const i=new Ft.Vector2,r=new Ft.Vector2,s=new Ft.Vector2,o=_=&gt;{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),R=_.clientX/E.width,N=_.clientY/E.height;if(R&lt;this._interactiveArea.left||R&gt;this._interactiveArea.right||N&lt;this._interactiveArea.top||N&gt;this._interactiveArea.bottom)return}const T=_.pointerType!==&quot;mouse&quot;?null:(_.buttons&amp;ni.LEFT)===ni.LEFT?ni.LEFT:(_.buttons&amp;ni.MIDDLE)===ni.MIDDLE?ni.MIDDLE:(_.buttons&amp;ni.RIGHT)===ni.RIGHT?ni.RIGHT:null;if(T!==null){const E=this._findPointerByMouseButton(T);E&amp;&amp;this._disposePointer(E)}if((_.buttons&amp;ni.LEFT)===ni.LEFT&amp;&amp;this._lockedPointer)return;const w={pointerId:_.pointerId,clientX:_.clientX,clientY:_.clientY,deltaX:0,deltaY:0,mouseButton:T};this._activePointers.push(w),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this._domElement.ownerDocument.addEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.addEventListener(&quot;pointerup&quot;,u),this._isDragging=!0,m(_)},l=_=&gt;{_.cancelable&amp;&amp;_.preventDefault();const T=_.pointerId,w=this._lockedPointer||this._findPointerById(T);if(w){if(w.clientX=_.clientX,w.clientY=_.clientY,w.deltaX=_.movementX,w.deltaY=_.movementY,this._state=0,_.pointerType===&quot;touch&quot;)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&amp;&amp;this._lockedPointer||this._isDragging&amp;&amp;(_.buttons&amp;ni.LEFT)===ni.LEFT)&amp;&amp;(this._state=this._state|this.mouseButtons.left),this._isDragging&amp;&amp;(_.buttons&amp;ni.MIDDLE)===ni.MIDDLE&amp;&amp;(this._state=this._state|this.mouseButtons.middle),this._isDragging&amp;&amp;(_.buttons&amp;ni.RIGHT)===ni.RIGHT&amp;&amp;(this._state=this._state|this.mouseButtons.right);g()}},u=_=&gt;{const T=this._findPointerById(_.pointerId);if(!(T&amp;&amp;T===this._lockedPointer)){if(T&amp;&amp;this._disposePointer(T),_.pointerType===&quot;touch&quot;)switch(this._activePointers.length){case 0:this._state=Se.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Se.NONE;v()}};let h=-1;const f=_=&gt;{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Se.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const N=this._domElement.getBoundingClientRect(),A=_.clientX/N.width,D=_.clientY/N.height;if(A&lt;this._interactiveArea.left||A&gt;this._interactiveArea.right||D&lt;this._interactiveArea.top||D&gt;this._interactiveArea.bottom)return}if(_.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Se.ROTATE||this.mouseButtons.wheel===Se.TRUCK){const N=performance.now();h-N&lt;1e3&amp;&amp;this._getClientRect(this._elementRect),h=N}const T=KK?-1:-3,w=_.deltaMode===1||_.ctrlKey?_.deltaY/T:_.deltaY/(T*10),E=this.dollyToCursor?(_.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(_.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Se.ROTATE:{this._rotateInternal(_.deltaX,_.deltaY),this._isUserControllingRotate=!0;break}case Se.TRUCK:{this._truckInternal(_.deltaX,_.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case Se.SCREEN_PAN:{this._truckInternal(_.deltaX,_.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case Se.OFFSET:{this._truckInternal(_.deltaX,_.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case Se.DOLLY:{this._dollyInternal(-w,E,R),this._isUserControllingDolly=!0;break}case Se.ZOOM:{this._zoomInternal(-w,E,R),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:&quot;control&quot;})},p=_=&gt;{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===vh.ACTION.NONE){const T=_ instanceof PointerEvent?_.pointerId:0,w=this._findPointerById(T);w&amp;&amp;this._disposePointer(w),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u);return}_.preventDefault()}},m=_=&gt;{if(!this._enabled)return;if(Ex(this._activePointers,Nr),this._getClientRect(this._elementRect),i.copy(Nr),r.copy(Nr),this._activePointers.length&gt;=2){const w=Nr.x-this._activePointers[1].clientX,E=Nr.y-this._activePointers[1].clientY,R=Math.sqrt(w*w+E*E);s.set(0,R);const N=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,A=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(N,A)}if(this._state=0,!_)this._lockedPointer&amp;&amp;(this._state=this._state|this.mouseButtons.left);else if(&quot;pointerType&quot;in _&amp;&amp;_.pointerType===&quot;touch&quot;)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&amp;&amp;(_.buttons&amp;ni.LEFT)===ni.LEFT&amp;&amp;(this._state=this._state|this.mouseButtons.left),(_.buttons&amp;ni.MIDDLE)===ni.MIDDLE&amp;&amp;(this._state=this._state|this.mouseButtons.middle),(_.buttons&amp;ni.RIGHT)===ni.RIGHT&amp;&amp;(this._state=this._state|this.mouseButtons.right);((this._state&amp;Se.ROTATE)===Se.ROTATE||(this._state&amp;Se.TOUCH_ROTATE)===Se.TOUCH_ROTATE||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE)&amp;&amp;(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&amp;Se.TRUCK)===Se.TRUCK||(this._state&amp;Se.SCREEN_PAN)===Se.SCREEN_PAN||(this._state&amp;Se.TOUCH_TRUCK)===Se.TOUCH_TRUCK||(this._state&amp;Se.TOUCH_SCREEN_PAN)===Se.TOUCH_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN)&amp;&amp;(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&amp;Se.DOLLY)===Se.DOLLY||(this._state&amp;Se.TOUCH_DOLLY)===Se.TOUCH_DOLLY||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE)&amp;&amp;(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&amp;Se.ZOOM)===Se.ZOOM||(this._state&amp;Se.TOUCH_ZOOM)===Se.TOUCH_ZOOM||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_ZOOM_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE)&amp;&amp;(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&amp;Se.OFFSET)===Se.OFFSET||(this._state&amp;Se.TOUCH_OFFSET)===Se.TOUCH_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET)&amp;&amp;(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:&quot;controlstart&quot;})},g=()=&gt;{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Ex(this._activePointers,Nr);const T=this._domElement&amp;&amp;this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,w=T?-T.deltaX:r.x-Nr.x,E=T?-T.deltaY:r.y-Nr.y;if(r.copy(Nr),((this._state&amp;Se.ROTATE)===Se.ROTATE||(this._state&amp;Se.TOUCH_ROTATE)===Se.TOUCH_ROTATE||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE)&amp;&amp;(this._rotateInternal(w,E),this._isUserControllingRotate=!0),(this._state&amp;Se.DOLLY)===Se.DOLLY||(this._state&amp;Se.ZOOM)===Se.ZOOM){const R=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,N=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,A=this.dollyDragInverted?-1:1;(this._state&amp;Se.DOLLY)===Se.DOLLY?(this._dollyInternal(A*E*fg,R,N),this._isUserControllingDolly=!0):(this._zoomInternal(A*E*fg,R,N),this._isUserControllingZoom=!0)}if((this._state&amp;Se.TOUCH_DOLLY)===Se.TOUCH_DOLLY||(this._state&amp;Se.TOUCH_ZOOM)===Se.TOUCH_ZOOM||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_ZOOM_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE){const R=Nr.x-this._activePointers[1].clientX,N=Nr.y-this._activePointers[1].clientY,A=Math.sqrt(R*R+N*N),D=s.y-A;s.set(0,A);const C=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,O=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&amp;Se.TOUCH_DOLLY)===Se.TOUCH_DOLLY||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET?(this._dollyInternal(D*fg,C,O),this._isUserControllingDolly=!0):(this._zoomInternal(D*fg,C,O),this._isUserControllingZoom=!0)}((this._state&amp;Se.TRUCK)===Se.TRUCK||(this._state&amp;Se.TOUCH_TRUCK)===Se.TOUCH_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK)&amp;&amp;(this._truckInternal(w,E,!1,!1),this._isUserControllingTruck=!0),((this._state&amp;Se.SCREEN_PAN)===Se.SCREEN_PAN||(this._state&amp;Se.TOUCH_SCREEN_PAN)===Se.TOUCH_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_ZOOM_SCREEN_PAN)&amp;&amp;(this._truckInternal(w,E,!1,!0),this._isUserControllingTruck=!0),((this._state&amp;Se.OFFSET)===Se.OFFSET||(this._state&amp;Se.TOUCH_OFFSET)===Se.TOUCH_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET)&amp;&amp;(this._truckInternal(w,E,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:&quot;control&quot;})},v=()=&gt;{Ex(this._activePointers,Nr),r.copy(Nr),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&amp;&amp;this._activePointers[0]===this._lockedPointer)&amp;&amp;(this._isDragging=!1),this._activePointers.length===0&amp;&amp;this._domElement&amp;&amp;(this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this.dispatchEvent({type:&quot;controlend&quot;}))};this.lockPointer=()=&gt;{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener(&quot;pointerlockchange&quot;,x),this._domElement.ownerDocument.addEventListener(&quot;pointerlockerror&quot;,b),this._domElement.ownerDocument.addEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.addEventListener(&quot;pointerup&quot;,u),m())},this.unlockPointer=()=&gt;{var _,T,w;this._lockedPointer!==null&amp;&amp;(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(_=this._domElement)===null||_===void 0||_.ownerDocument.exitPointerLock(),(T=this._domElement)===null||T===void 0||T.ownerDocument.removeEventListener(&quot;pointerlockchange&quot;,x),(w=this._domElement)===null||w===void 0||w.ownerDocument.removeEventListener(&quot;pointerlockerror&quot;,b),this.cancel()};const x=()=&gt;{this._domElement&amp;&amp;this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},b=()=&gt;{this.unlockPointer()};this._addAllEventListeners=_=&gt;{this._domElement=_,this._domElement.style.touchAction=&quot;none&quot;,this._domElement.style.userSelect=&quot;none&quot;,this._domElement.style.webkitUserSelect=&quot;none&quot;,this._domElement.addEventListener(&quot;pointerdown&quot;,o),this._domElement.addEventListener(&quot;pointercancel&quot;,u),this._domElement.addEventListener(&quot;wheel&quot;,f,{passive:!1}),this._domElement.addEventListener(&quot;contextmenu&quot;,p)},this._removeAllEventListeners=()=&gt;{this._domElement&amp;&amp;(this._domElement.style.touchAction=&quot;&quot;,this._domElement.style.userSelect=&quot;&quot;,this._domElement.style.webkitUserSelect=&quot;&quot;,this._domElement.removeEventListener(&quot;pointerdown&quot;,o),this._domElement.removeEventListener(&quot;pointercancel&quot;,u),this._domElement.removeEventListener(&quot;wheel&quot;,f,{passive:!1}),this._domElement.removeEventListener(&quot;contextmenu&quot;,p),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this._domElement.ownerDocument.removeEventListener(&quot;pointerlockchange&quot;,x),this._domElement.ownerDocument.removeEventListener(&quot;pointerlockerror&quot;,b))},this.cancel=()=&gt;{this._state!==Se.NONE&amp;&amp;(this._state=Se.NONE,this._activePointers.length=0,v())},t&amp;&amp;this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&amp;&amp;(e?(this._domElement.style.touchAction=&quot;none&quot;,this._domElement.style.userSelect=&quot;none&quot;,this._domElement.style.webkitUserSelect=&quot;none&quot;):(this.cancel(),this._domElement.style.touchAction=&quot;&quot;,this._domElement.style.userSelect=&quot;&quot;,this._domElement.style.webkitUserSelect=&quot;&quot;))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&amp;&amp;this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&amp;&amp;this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&amp;&amp;this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Bs(e.width,0,1),this._interactiveArea.height=Bs(e.height,0,1),this._interactiveArea.x=Bs(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Bs(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=Bs(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Bs(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&amp;&amp;An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Uu.NONE,this._changedDolly=0,this._dollyToNoClamp(Bs(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length&gt;=1){const o=this._collisionTest(),l=An(o,this._spherical.radius);if(!(i&gt;e)&amp;&amp;l)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(jf).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Bs(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||An(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn(&quot;`pan` has been renamed to `truck`&quot;),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),uo.setFromMatrixColumn(this._camera.matrix,0),ho.setFromMatrixColumn(this._camera.matrix,1),uo.multiplyScalar(e),ho.multiplyScalar(-t);const r=Yt.copy(uo).add(ho),s=xn.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){Yt.setFromMatrixColumn(this._camera.matrix,0),Yt.crossVectors(this._camera.up,Yt),Yt.multiplyScalar(e);const i=xn.copy(this._targetEnd).add(Yt);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return Yt.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Yt.x,this._targetEnd.y+Yt.y,this._targetEnd.z+Yt.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=Yt.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const l=Yt.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(l.x,l.y,l.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:l=0}={}){const u=[],h=e.isBox3?zu.copy(e):zu.setFromObject(e);h.isEmpty()&amp;&amp;(console.warn(&quot;camera-controls: fitTo() cannot be used with an empty box. Aborting&quot;),Promise.resolve());const f=xO(this._sphericalEnd.theta,bO),p=xO(this._sphericalEnd.phi,bO);u.push(this.rotateTo(f,p,t));const m=Yt.setFromSpherical(this._sphericalEnd).normalize(),g=AO.setFromUnitVectors(m,Ax),v=An(Math.abs(m.y),1);v&amp;&amp;g.multiply(Rx.setFromAxisAngle(dg,f)),g.multiply(this._yAxisUpSpaceInverse);const x=MO.makeEmpty();xn.copy(h.min).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.min).setX(h.max.x).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.min).setY(h.max.y).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.max).setZ(h.min.z).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.min).setZ(h.max.z).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.max).setY(h.min.y).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.max).setX(h.min.x).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.max).applyQuaternion(g),x.expandByPoint(xn),x.min.x-=r,x.min.y-=o,x.max.x+=s,x.max.y+=l,g.setFromUnitVectors(Ax,m),v&amp;&amp;g.premultiply(Rx.invert()),g.premultiply(this._yAxisUpSpace);const b=x.getSize(Yt),_=x.getCenter(xn).applyQuaternion(g);if(tc(this._camera)){const T=this.getDistanceToFitBox(b.x,b.y,b.z,i);u.push(this.moveTo(_.x,_.y,_.z,t)),u.push(this.dollyTo(T,t)),u.push(this.setFocalOffset(0,0,0,t))}else if(el(this._camera)){const T=this._camera,w=T.right-T.left,E=T.top-T.bottom,R=i?Math.max(w/b.x,E/b.y):Math.min(w/b.x,E/b.y);u.push(this.moveTo(_.x,_.y,_.z,t)),u.push(this.zoomTo(R,t)),u.push(this.setFocalOffset(0,0,0,t))}return Promise.all(u)}fitToSphere(e,t){const i=[],s=&quot;isObject3D&quot;in e?vh.createBoundingSphere(e,Cx):Cx.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),tc(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(el(this._camera)){const o=this._camera.right-this._camera.left,l=this._camera.top-this._camera.bottom,u=2*s.radius,h=Math.min(o/u,l/u);i.push(this.zoomTo(h,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,l=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Uu.NONE,this._changedDolly=0;const u=xn.set(r,s,o),h=Yt.set(e,t,i);this._targetEnd.copy(u),this._sphericalEnd.setFromVector3(h.sub(u).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,l||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const f=!l||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold)&amp;&amp;An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&amp;&amp;An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&amp;&amp;An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(f)}lerpLookAt(e,t,i,r,s,o,l,u,h,f,p,m,g,v=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Uu.NONE,this._changedDolly=0;const x=Yt.set(r,s,o),b=xn.set(e,t,i);gs.setFromVector3(b.sub(x).applyQuaternion(this._yAxisUpSpace));const _=Fu.set(f,p,m),T=xn.set(l,u,h);Wf.setFromVector3(T.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(x.lerp(_,g));const w=Wf.theta-gs.theta,E=Wf.phi-gs.phi,R=Wf.radius-gs.radius;this._sphericalEnd.set(gs.radius+R*g,gs.phi+E*g,gs.theta+w*g),this.normalizeRotations(),this._needsUpdate=!0,v||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const N=!v||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold)&amp;&amp;An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&amp;&amp;An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&amp;&amp;An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(N)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(Yt),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=Bs(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||An(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&amp;&amp;An(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&amp;&amp;An(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),uo.setFromMatrixColumn(this._camera.matrixWorldInverse,0),ho.setFromMatrixColumn(this._camera.matrixWorldInverse,1),nc.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=Yt.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);uo.multiplyScalar(o.x),ho.multiplyScalar(o.y),nc.multiplyScalar(o.z),Yt.copy(uo).add(ho).add(nc),Yt.z=Yt.z+s,this.dollyTo(s,!1),this.setFocalOffset(-Yt.x,Yt.y,-Yt.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Ft.Vector4,typeof e==&quot;number&quot;?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(Tx(this._camera,&quot;getDistanceToFitBox&quot;))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Hf,l=this._camera.aspect;return((r?s&gt;l:s&lt;l)?t:e/l)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(Tx(this._camera,&quot;getDistanceToFitSphere&quot;))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Hf,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1&lt;this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&amp;&amp;e.isVector3?e:new Ft.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&amp;&amp;e.isVector3?e:new Ft.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new Ft.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&amp;&amp;e.isVector3?e:new Ft.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%ku,this._sphericalEnd.theta&lt;0&amp;&amp;(this._sphericalEnd.theta+=ku),this._spherical.theta+=ku*Math.round((this._sphericalEnd.theta-this._spherical.theta)/ku)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!An(this._camera.up.x,this._cameraUp0.x)||!An(this._camera.up.y,this._cameraUp0.y)||!An(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(Yt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,dg),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Yt.subVectors(this._target,this._camera.position).normalize(),t=xn.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(Yt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=EO.subVectors(this._targetEnd,this._target),o=TO.subVectors(this._focalOffsetEnd,this._focalOffset),l=this._zoomEnd-this._zoom;if(Gn(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=hg(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,p,1/0,e),this._needsUpdate=!0}if(Gn(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=hg(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,p,1/0,e),this._needsUpdate=!0}if(Gn(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const p=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=hg(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,p,this.maxSpeed,e),this._needsUpdate=!0}if(Gn(s.x)&amp;&amp;Gn(s.y)&amp;&amp;Gn(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const p=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;SO(this._target,this._targetEnd,this._targetVelocity,p,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Gn(o.x)&amp;&amp;Gn(o.y)&amp;&amp;Gn(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const p=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;SO(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,p,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Gn(l))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const p=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=hg(this._zoom,this._zoomEnd,this._zoomVelocity,p,1/0,e)}if(this.dollyToCursor){if(tc(this._camera)&amp;&amp;this._changedDolly!==0){const p=this._spherical.radius-this._lastDistance,m=this._camera,g=this._getCameraDirection(jf),v=Yt.copy(g).cross(m.up).normalize();v.lengthSq()===0&amp;&amp;(v.x=1);const x=xn.crossVectors(v,g),b=this._sphericalEnd.radius*Math.tan(m.getEffectiveFOV()*Hf*.5),T=(this._sphericalEnd.radius-p-this._sphericalEnd.radius)/this._sphericalEnd.radius,w=Fu.copy(this._targetEnd).add(v.multiplyScalar(this._dollyControlCoord.x*b*m.aspect)).add(x.multiplyScalar(this._dollyControlCoord.y*b)),E=Yt.copy(this._targetEnd).lerp(w,T),R=this._lastDollyDirection===Uu.IN&amp;&amp;this._spherical.radius&lt;=this.minDistance,N=this._lastDollyDirection===Uu.OUT&amp;&amp;this.maxDistance&lt;=this._spherical.radius;if(this.infinityDolly&amp;&amp;(R||N)){this._sphericalEnd.radius-=p,this._spherical.radius-=p;const D=xn.copy(g).multiplyScalar(-p);E.add(D)}this._boundary.clampPoint(E,E);const A=xn.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(A),this._changedDolly-=p,Gn(this._changedDolly)&amp;&amp;(this._changedDolly=0)}else if(el(this._camera)&amp;&amp;this._changedZoom!==0){const p=this._zoom-this._lastZoom,m=this._camera,g=Yt.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(m.near+m.far)/(m.near-m.far)).unproject(m),v=xn.set(0,0,-1).applyQuaternion(m.quaternion),x=Fu.copy(g).add(v.multiplyScalar(-g.dot(m.up))),_=-(this._zoom-p-this._zoom)/this._zoom,T=this._getCameraDirection(jf),w=this._targetEnd.dot(T),E=Yt.copy(this._targetEnd).lerp(x,_),R=E.dot(T),N=T.multiplyScalar(R-w);E.sub(N),this._boundary.clampPoint(E,E);const A=xn.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(A),this._changedZoom-=p,Gn(this._changedZoom)&amp;&amp;(this._changedZoom=0)}}this._camera.zoom!==this._zoom&amp;&amp;(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const u=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,u),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Gn(this._focalOffset.x)||!Gn(this._focalOffset.y)||!Gn(this._focalOffset.z))&amp;&amp;(uo.setFromMatrixColumn(this._camera.matrix,0),ho.setFromMatrixColumn(this._camera.matrix,1),nc.setFromMatrixColumn(this._camera.matrix,2),uo.multiplyScalar(this._focalOffset.x),ho.multiplyScalar(-this._focalOffset.y),nc.multiplyScalar(this._focalOffset.z),Yt.copy(uo).add(ho).add(nc),this._camera.position.add(Yt),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&amp;&amp;this._encloseToBoundary(this._camera.position.copy(this._target),Yt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const f=this._needsUpdate;return f&amp;&amp;!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:&quot;wake&quot;}),this.dispatchEvent({type:&quot;update&quot;})):f?(this.dispatchEvent({type:&quot;update&quot;}),Gn(t,this.restThreshold)&amp;&amp;Gn(i,this.restThreshold)&amp;&amp;Gn(r,this.restThreshold)&amp;&amp;Gn(s.x,this.restThreshold)&amp;&amp;Gn(s.y,this.restThreshold)&amp;&amp;Gn(s.z,this.restThreshold)&amp;&amp;Gn(o.x,this.restThreshold)&amp;&amp;Gn(o.y,this.restThreshold)&amp;&amp;Gn(o.z,this.restThreshold)&amp;&amp;Gn(l,this.restThreshold)&amp;&amp;!this._hasRested&amp;&amp;(this._hasRested=!0,this.dispatchEvent({type:&quot;rest&quot;}))):!f&amp;&amp;this._updatedLastTime&amp;&amp;this.dispatchEvent({type:&quot;sleep&quot;}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=f,this._needsUpdate=!1,f}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Vf(this.maxDistance),minZoom:this.minZoom,maxZoom:Vf(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Vf(this.maxPolarAngle),minAzimuthAngle:Vf(this.minAzimuthAngle),maxAzimuthAngle:Vf(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:Yt.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Gf(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Gf(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Gf(i.maxPolarAngle),this.minAzimuthAngle=Gf(i.minAzimuthAngle),this.maxAzimuthAngle=Gf(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),gs.setFromVector3(Yt.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(gs.theta,gs.phi,t),this.dollyTo(gs.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn(&quot;camera-controls is already connected.&quot;);return}e.setAttribute(&quot;data-camera-controls-version&quot;,YK),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&amp;&amp;(this._domElement.removeAttribute(&quot;data-camera-controls-version&quot;),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=&gt;t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=&gt;t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=xn.copy(t).add(e),l=this._boundary.clampPoint(s,Fu).sub(s),u=l.lengthSq();if(u===0)return e.add(t);if(u===r)return e;if(i===0)return e.add(t).add(l);{const h=1+i*u/t.dot(l);return e.add(xn.copy(t).multiplyScalar(h)).add(l.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(tc(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*Hf,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(el(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length&gt;=1)||Tx(this._camera,&quot;_collisionTest&quot;))return e;const i=this._getTargetDirection(jf);Ox.lookAt(wO,i,this._camera.up);for(let r=0;r&lt;4;r++){const s=xn.copy(this._nearPlaneCorners[r]);s.applyMatrix4(Ox);const o=Fu.addVectors(this._target,s);pg.set(o,i),pg.far=this._spherical.radius+1;const l=pg.intersectObjects(this.colliderMeshes);l.length!==0&amp;&amp;l[0].distance&lt;e&amp;&amp;(e=l[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:&quot;transitionstart&quot;}),new Promise(t=&gt;{const i=()=&gt;{this.removeEventListener(&quot;rest&quot;,i),t()};this.addEventListener(&quot;rest&quot;,i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(&quot;.dampingFactor has been deprecated. use smoothTime (in seconds) instead.&quot;),0}set dampingFactor(e){console.warn(&quot;.dampingFactor has been deprecated. use smoothTime (in seconds) instead.&quot;)}get draggingDampingFactor(){return console.warn(&quot;.draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.&quot;),0}set draggingDampingFactor(e){console.warn(&quot;.draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.&quot;)}static createBoundingSphere(e,t=new Ft.Sphere){const i=t,r=i.center;zu.makeEmpty(),e.traverseVisible(o=&gt;{o.isMesh&amp;&amp;zu.expandByObject(o)}),zu.getCenter(r);let s=0;return e.traverseVisible(o=&gt;{if(!o.isMesh)return;const l=o;if(!l.geometry)return;const u=l.geometry.clone();u.applyMatrix4(l.matrixWorld);const f=u.attributes.position;for(let p=0,m=f.count;p&lt;m;p++)Yt.fromBufferAttribute(f,p),s=Math.max(s,r.distanceToSquared(Yt))}),i.radius=Math.sqrt(s),i}}function $K(n,e,t){const i=r=&gt;{const s=r.key.toLowerCase(),o=r.shiftKey,l=Nh.getState().selectedObjects;if(o&amp;&amp;s===&quot;h&quot;)l.forEach((u,h)=&gt;{h instanceof bs?h.hideBatchDrawRange(u):h.traverse(f=&gt;{f instanceof bs&amp;&amp;f.hideBatchDrawRange(u)})});else if(o&amp;&amp;s===&quot;u&quot;)n.traverse(u=&gt;{u instanceof bs&amp;&amp;u.unhideAllDrawRanges()});else if(o&amp;&amp;s===&quot;f&quot;)XK(t,e);else if(o&amp;&amp;s===&quot;a&quot;)ZK(n,e,t);else if(o&amp;&amp;s===&quot;q&quot;){const{isOptionsVisible:u,setIsOptionsVisible:h}=Bc.getState();h(!u)}};return window.addEventListener(&quot;keydown&quot;,i),()=&gt;{window.removeEventListener(&quot;keydown&quot;,i)}}const ZK=(n,e,t)=&gt;{const i=new Ri().setFromObject(n);if(i.isEmpty())return;const r=i.getSize(new Y).length(),s=i.getCenter(new Y),o=r*.5,l=new Y;e.getWorldDirection(l).normalize(),e.position.copy(s.clone().add(l.clone().multiplyScalar(-o))),e.lookAt(s),t instanceof Ic?t.target.copy(s):t instanceof vh&amp;&amp;t.setLookAt(e.position.x,e.position.y,e.position.z,s.x,s.y,s.z,!0),e.updateProjectionMatrix(),t instanceof Ic&amp;&amp;t.update()};function JK(n,e){const t=new Yn(60,n.clientWidth/n.clientHeight,.1,1e4);t.position.set(-5,5,5),t.layers.enable(0),t.layers.enable(1);const i=e?new Y(0,0,1):new Y(0,1,0);return t.up.copy(i),t.updateProjectionMatrix(),t}vh.install({THREE:V8});function QK(n,e,t,i){const r=e.querySelector(&quot;canvas&quot;);if(!r)throw new Error(&quot;Renderer canvas not found&quot;);let s;return i?(s=new Ic(n,r),console.log(&quot;Using OrbitControls&quot;)):(s=new vh(n,r),console.log(&quot;Using CameraControls&quot;)),s}function e$(n,e){const t=new Zd(16777215,1.4);t.castShadow=!1,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,t.shadow.camera.near=.5,t.shadow.camera.far=500,t.shadow.bias=-1e-4,e.add(t);const i=new nn;return e.add(i),t.target=i,t.position.copy(n.position),()=&gt;{t.position.copy(n.position);const r=new Y;n.getWorldDirection(r),i.position.copy(n.position.clone().add(r)),t.target.updateMatrixWorld()}}function t$(n,e){const t=new Fy(16777215,Math.PI/2);return n.add(t),{updateCameraLight:e$(e,n)}}function n$(n){const{zIsUp:e}=eo.getState(),t=new UN(100,100,8947848,4473924);return t.material.depthWrite=!1,t.renderOrder=-1,t.layers.set(1),e&amp;&amp;(t.rotation.x=Math.PI/2),n.add(t),t}class CO extends HTMLElement{constructor(e,t){super(),this.camera=e,this.options=Object.assign({size:150,padding:8,bubbleSizePrimary:10,bubbleSizeSeconday:10,showSecondary:!0,lineWidth:2,fontSize:&quot;10px&quot;,fontFamily:&quot;arial&quot;,fontWeight:&quot;bold&quot;,fontColor:&quot;#151515&quot;,fontYAdjust:0,colors:{x:[&quot;#f73c3c&quot;,&quot;#942424&quot;],y:[&quot;#6ccb26&quot;,&quot;#417a17&quot;],z:[&quot;#178cf0&quot;,&quot;#0e5490&quot;]}},t),this.onAxisSelected=null,this.bubbles=[{axis:&quot;x&quot;,direction:new Y(1,0,0),size:this.options.bubbleSizePrimary,color:this.options.colors.x,line:this.options.lineWidth,label:&quot;X&quot;},{axis:&quot;y&quot;,direction:new Y(0,1,0),size:this.options.bubbleSizePrimary,color:this.options.colors.y,line:this.options.lineWidth,label:&quot;Y&quot;},{axis:&quot;z&quot;,direction:new Y(0,0,1),size:this.options.bubbleSizePrimary,color:this.options.colors.z,line:this.options.lineWidth,label:&quot;Z&quot;},{axis:&quot;-x&quot;,direction:new Y(-1,0,0),size:this.options.bubbleSizeSeconday,color:this.options.colors.x,label:&quot;-X&quot;},{axis:&quot;-y&quot;,direction:new Y(0,-1,0),size:this.options.bubbleSizeSeconday,color:this.options.colors.y,label:&quot;-Y&quot;},{axis:&quot;-z&quot;,direction:new Y(0,0,-1),size:this.options.bubbleSizeSeconday,color:this.options.colors.z,label:&quot;-Z&quot;}],this.center=new Y(this.options.size/2,this.options.size/2,0),this.selectedAxis=null,this.innerHTML=&quot;&lt;canvas width=&#x27;&quot;+this.options.size+&quot;&#x27; height=&#x27;&quot;+this.options.size+&quot;&#x27;&gt;&lt;/canvas&gt;&quot;,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseClick=this.onMouseClick.bind(this)}connectedCallback(){this.canvas=this.querySelector(&quot;canvas&quot;),this.context=this.canvas.getContext(&quot;2d&quot;),this.canvas.addEventListener(&quot;mousemove&quot;,this.onMouseMove,!1),this.canvas.addEventListener(&quot;mouseout&quot;,this.onMouseOut,!1),this.canvas.addEventListener(&quot;click&quot;,this.onMouseClick,!1)}disconnectedCallback(){this.canvas.removeEventListener(&quot;mousemove&quot;,this.onMouseMove,!1),this.canvas.removeEventListener(&quot;mouseout&quot;,this.onMouseOut,!1),this.canvas.removeEventListener(&quot;click&quot;,this.onMouseClick,!1)}onMouseMove(e){const t=this.canvas.getBoundingClientRect();this.mouse=new Y(e.clientX-t.left,e.clientY-t.top,0)}onMouseOut(){this.mouse=null}onMouseClick(){this.onAxisSelected&amp;&amp;typeof this.onAxisSelected==&quot;function&quot;&amp;&amp;this.onAxisSelected({axis:this.selectedAxis.axis,direction:this.selectedAxis.direction.clone()})}clear(){this.canvas&amp;&amp;this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}drawCircle(e,t=10,i=&quot;#FF0000&quot;){this.context.beginPath(),this.context.arc(e.x,e.y,t,0,2*Math.PI,!1),this.context.fillStyle=i,this.context.fill(),this.context.closePath()}drawLine(e,t,i=1,r=&quot;#FF0000&quot;){this.context.beginPath(),this.context.moveTo(e.x,e.y),this.context.lineTo(t.x,t.y),this.context.lineWidth=i,this.context.strokeStyle=r,this.context.stroke(),this.context.closePath()}update(){this.clear();const t=new yt().makeRotationFromEuler(this.camera.rotation).clone().invert();for(const r of this.bubbles)r.position=this.getBubblePosition(r.direction.clone().applyMatrix4(t));const i=[];for(const r in this.bubbles)(this.options.showSecondary===!0||r[0]!==&quot;-&quot;)&amp;&amp;i.push(this.bubbles[r]);if(i.sort((r,s)=&gt;r.position.z&gt;s.position.z?1:-1),this.selectedAxis=null,this.mouse){let r=1/0;for(const s of i){const o=this.mouse.distanceTo(s.position);(o&lt;r||o&lt;s.size)&amp;&amp;(r=o,this.selectedAxis=s)}}this.drawLayers(i)}drawLayers(e){for(const t of e){let i=t.color;this.selectedAxis===t?i=&quot;#FFFFFF&quot;:t.position.z&gt;=-.01?i=t.color[0]:i=t.color[1],this.drawCircle(t.position,t.size,i),t.line&amp;&amp;this.drawLine(this.center,t.position,t.line,i),t.label&amp;&amp;(this.context.font=[this.options.fontWeight,this.options.fontSize,this.options.fontFamily].join(&quot; &quot;),this.context.fillStyle=this.options.fontColor,this.context.textBaseline=&quot;middle&quot;,this.context.textAlign=&quot;center&quot;,this.context.fillText(t.label,t.position.x,t.position.y+this.options.fontYAdjust))}}getBubblePosition(e){return new Y(e.x*(this.center.x-this.options.bubbleSizePrimary/2-this.options.padding)+this.center.x,this.center.y-e.y*(this.center.y-this.options.bubbleSizePrimary/2-this.options.padding),e.z)}}function i$(n,e){customElements.get(&quot;orientation-gizmo&quot;)||customElements.define(&quot;orientation-gizmo&quot;,CO);const t=new CO(n,{});return t.style.position=&quot;absolute&quot;,t.style.bottom=&quot;8px&quot;,t.style.right=&quot;8px&quot;,t.style.pointerEvents=&quot;auto&quot;,t.style.zIndex=&quot;10&quot;,e.appendChild(t),t}function r$(n,e,t){const i=i$(n,e);return i.onAxisSelected=({axis:r,direction:s})=&gt;{const o=n.position.length();n.position.copy(s.clone().multiplyScalar(o)),t instanceof Ic&amp;&amp;(t.target.set(0,0,0),t.update())},i}var sa=function(){var n=0,e=document.createElement(&quot;div&quot;);e.style.cssText=&quot;position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000&quot;,e.addEventListener(&quot;click&quot;,function(f){f.preventDefault(),i(++n%e.children.length)},!1);function t(f){return e.appendChild(f.dom),f}function i(f){for(var p=0;p&lt;e.children.length;p++)e.children[p].style.display=p===f?&quot;block&quot;:&quot;none&quot;;n=f}var r=(performance||Date).now(),s=r,o=0,l=t(new sa.Panel(&quot;FPS&quot;,&quot;#0ff&quot;,&quot;#002&quot;)),u=t(new sa.Panel(&quot;MS&quot;,&quot;#0f0&quot;,&quot;#020&quot;));if(self.performance&amp;&amp;self.performance.memory)var h=t(new sa.Panel(&quot;MB&quot;,&quot;#f08&quot;,&quot;#201&quot;));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var f=(performance||Date).now();if(u.update(f-r,200),f&gt;=s+1e3&amp;&amp;(l.update(o*1e3/(f-s),100),s=f,o=0,h)){var p=performance.memory;h.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return f},update:function(){r=this.end()},domElement:e,setMode:i}};sa.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),l=80*o,u=48*o,h=3*o,f=2*o,p=3*o,m=15*o,g=74*o,v=30*o,x=document.createElement(&quot;canvas&quot;);x.width=l,x.height=u,x.style.cssText=&quot;width:80px;height:48px&quot;;var b=x.getContext(&quot;2d&quot;);return b.font=&quot;bold &quot;+9*o+&quot;px Helvetica,Arial,sans-serif&quot;,b.textBaseline=&quot;top&quot;,b.fillStyle=t,b.fillRect(0,0,l,u),b.fillStyle=e,b.fillText(n,h,f),b.fillRect(p,m,g,v),b.fillStyle=t,b.globalAlpha=.9,b.fillRect(p,m,g,v),{dom:x,update:function(_,T){i=Math.min(i,_),r=Math.max(r,_),b.fillStyle=t,b.globalAlpha=1,b.fillRect(0,0,l,m),b.fillStyle=e,b.fillText(s(_)+&quot; &quot;+n+&quot; (&quot;+s(i)+&quot;-&quot;+s(r)+&quot;)&quot;,h,f),b.drawImage(x,p+o,m,g-o,v,p,m,g-o,v),b.fillRect(p+g-o,m,o,v),b.fillStyle=t,b.globalAlpha=.9,b.fillRect(p+g-o,m,o,s((1-_/T)*v))}}};function s$(n){const e=[];let t=null,i=null;for(let r=0;r&lt;3;r++){const s=new sa;s.showPanel(r),n.appendChild(s.dom),Object.assign(s.dom.style,{position:&quot;absolute&quot;,top:`${r*48}px`,left:&quot;auto&quot;,right:&quot;0px&quot;,zIndex:&quot;20&quot;}),e.push(s)}{const r=new sa;t=r.addPanel(new sa.Panel(&quot;calls&quot;,&quot;#ff8&quot;,&quot;#221&quot;)),r.showPanel(3),n.appendChild(r.dom),Object.assign(r.dom.style,{position:&quot;absolute&quot;,top:`${3*48}px`,left:&quot;auto&quot;,right:&quot;0px&quot;,zIndex:&quot;20&quot;}),e.push(r)}{const r=new sa;i=r.addPanel(new sa.Panel(&quot;tris&quot;,&quot;#8ff&quot;,&quot;#122&quot;)),r.showPanel(3),n.appendChild(r.dom),Object.assign(r.dom.style,{position:&quot;absolute&quot;,top:`${4*48}px`,left:&quot;auto&quot;,right:&quot;0px&quot;,zIndex:&quot;20&quot;}),e.push(r)}return{statsArray:e,callsPanel:t,trisPanel:i}}function o$(n,e,t){const i=()=&gt;{n&amp;&amp;(e.aspect=n.clientWidth/n.clientHeight,e.updateProjectionMatrix(),t.setSize(n.clientWidth,n.clientHeight))};return window.addEventListener(&quot;resize&quot;,i),()=&gt;{window.removeEventListener(&quot;resize&quot;,i)}}function a$(n){Nh.getState().selectedObjects.forEach((t,i)=&gt;{i instanceof bs?i.clearSelectionGroups():i.traverse(r=&gt;{r instanceof bs&amp;&amp;r.clearSelectionGroups()})})}async function RO(n,e,t){return await L0.getDrawRange(n,e,t)}async function OO(n,e){return await L0.getNameFromRangeId(n,e)}async function l$(n,e,t){const i=Nh.getState(),s=i.selectedObjects.get(n),o=s?s.has(t):!1;e?o?i.removeSelectedObject(n,t):i.addSelectedObject(n,t):(i.clearSelectedObjects(),i.addSelectedObject(n,t))}function BS(n,e){if(n.name===e)return n;if(!Array.isArray(n.children))return null;for(let t of n.children){const i=BS(t,e);if(i)return i}return null}async function c$(n,e){var m,g;if(e.button===2)return;const t=n.object,i=n.faceIndex??0,r=e.shiftKey,s=eo.getState().translation,o=n.point.clone();s&amp;&amp;o.sub(s),yl.getState().setClickCoordinate(o),!t.is_design&amp;&amp;t.ada_ext_data!=null&amp;&amp;(Fw.current=t.ada_ext_data);const l=t.name;let u=await RO(t.unique_key,l,i);if(!u&amp;&amp;((m=t.userData)!=null&amp;&amp;m.node_id&amp;&amp;(u=await RO(t.unique_key,`node${(g=t.userData)==null?void 0:g.node_id}`,i)),!u)){console.warn(&quot;selected mesh has no draw range&quot;);return}const[h]=u;await l$(t,r,h);const f=await OO(t.unique_key,h);if(!f){console.warn(&quot;selected mesh has no name&quot;);return}yl.getState().setName(f);const p=Oc.getState();if(p.treeData&amp;&amp;p.tree&amp;&amp;!p.isTreeCollapsed){p.tree.isProgrammaticChange=!0;const v=[];for(const[b,_]of Nh.getState().selectedObjects)for(const T of _){const w=await OO(t.unique_key,T);if(!w)continue;const E=BS(p.treeData,w);E&amp;&amp;v.push(E.id)}const x=BS(p.treeData,f);p.tree.setSelection({ids:v,mostRecent:x,anchor:x}),x&amp;&amp;p.tree.scrollTo({id:x.id}),p.tree.isProgrammaticChange=!1}}function u$(n,e,t,i){let r=null;const s=5;return n.addEventListener(&quot;pointerdown&quot;,o=&gt;{r={x:o.clientX,y:o.clientY}}),n.addEventListener(&quot;click&quot;,async o=&gt;{if(!r)return;const l=o.clientX-r.x,u=o.clientY-r.y;if(l*l+u*u&gt;s*s)return;const h=i.domElement.getBoundingClientRect(),f=(o.clientX-h.left)/h.width*2-1,p=-((o.clientY-h.top)/h.height)*2+1,m=new Oe(f,p),g=new PN;g.layers.set(0),g.layers.disable(1),g.setFromCamera(m,e);const v=g.intersectObjects(t.children,!0);v.length===0?a$():await c$(v[0],o)}),()=&gt;{n.removeEventListener(&quot;pointerdown&quot;,()=&gt;{}),n.removeEventListener(&quot;click&quot;,()=&gt;{})}}const h$=()=&gt;{const n=re.useRef(null),{modelUrl:e,zIsUp:t,defaultOrbitController:i}=eo(),{showPerf:r}=Bc(),s=re.useRef(null),o=re.useRef(null);return re.useEffect(()=&gt;{const l=n.current;if(!l)return;const u=new ResizeObserver(h=&gt;{var f;for(const p of h){const{width:m,height:g}=p.contentRect;(f=gc.current)==null||f.setSize(m,g),mc.current&amp;&amp;(mc.current.aspect=m/g,mc.current.updateProjectionMatrix())}});return u.observe(l),()=&gt;{u.disconnect()}},[]),re.useEffect(()=&gt;{if(!n.current)return;t&amp;&amp;(nn.DEFAULT_UP=new Y(0,0,1));const l=new Nw;if(!Zs.current){const E=new py;E.background=new $e(&quot;#393939&quot;),Zs.current=E}const u=Zs.current;if(s.current=new br,!gc.current){const E=new jN({antialias:!0});E.setSize(n.current.clientWidth,n.current.clientHeight),E.shadowMap.enabled=!0,n.current.appendChild(E.domElement),gc.current=E}const h=gc.current,f=JK(n.current,t);mc.current=f;const p=QK(f,n.current,t,i);mS.current=p;const m=$K(u,f,p),{updateCameraLight:g}=t$(u,f);gS.current=g;const v=n$(u);let x=null;n.current&amp;&amp;f&amp;&amp;p&amp;&amp;(x=r$(f,n.current,p));const{statsArray:b,callsPanel:_,trisPanel:T}=s$(n.current);o.current={statsArray:b,callsPanel:_,trisPanel:T},e&amp;&amp;(EI(e),window.B64GLTF&amp;&amp;delete window.B64GLTF),s.current&amp;&amp;u.add(s.current);const w=()=&gt;{if(requestAnimationFrame(w),b.forEach(E=&gt;E.begin()),bi.current&amp;&amp;bi.current.currentAction){const E=l.getDelta();bi.current.update(E)}if(p instanceof Ic)p.update();else{const E=l.getDelta();p.update(E)}g==null||g(),x==null||x.update(),h.render(u,f),_&amp;&amp;_.update(h.info.render.calls,200),T&amp;&amp;T.update(h.info.render.triangles,5e5),b.forEach(E=&gt;E.end())};return w(),o$(n.current,f,h),u$(n.current,f,u,h),()=&gt;{var E;x&amp;&amp;((E=n.current)!=null&amp;&amp;E.contains(x))&amp;&amp;n.current.removeChild(x),v.dispose(),u.remove(v),m==null||m(),b&amp;&amp;b.length&gt;0&amp;&amp;b.forEach(R=&gt;{var N;(N=n.current)==null||N.removeChild(R.dom)})}},[i,t]),re.useEffect(()=&gt;{if(!o.current||!n.current)return;const{statsArray:l}=o.current;l.forEach(u=&gt;{u.dom.style.display=r?&quot;block&quot;:&quot;none&quot;})},[r]),P.jsx(&quot;div&quot;,{ref:n,className:&quot;w-full h-full relative&quot;})},f$=()=&gt;P.jsxs(&quot;div&quot;,{className:&quot;relative w-full h-full&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;absolute right-5 top-80 z-10&quot;,children:P.jsx(Pk,{})}),P.jsx(&quot;div&quot;,{id:&quot;canvasParent&quot;,className:&quot;absolute w-full h-full&quot;,children:P.jsx(h$,{})})]}),d$=n=&gt;typeof n==&quot;boolean&quot;||n instanceof Boolean,p$=n=&gt;typeof n==&quot;number&quot;||n instanceof Number,m$=n=&gt;typeof n==&quot;bigint&quot;||n instanceof BigInt,gL=n=&gt;!!n&amp;&amp;n instanceof Date,g$=n=&gt;typeof n==&quot;string&quot;||n instanceof String,y$=n=&gt;Array.isArray(n),_$=n=&gt;typeof n==&quot;object&quot;&amp;&amp;n!==null,yL=n=&gt;!!n&amp;&amp;n instanceof Object&amp;&amp;typeof n==&quot;function&quot;;function X0(n,e){return e===void 0&amp;&amp;(e=!1),!n||e?`&quot;${n}&quot;`:n}function v$(n,e,t){return t?JSON.stringify(n):e?`&quot;${n}&quot;`:n}function _L(n){let{field:e,value:t,data:i,lastElement:r,openBracket:s,closeBracket:o,level:l,style:u,shouldExpandNode:h,clickToExpandNode:f,outerRef:p,beforeExpandChange:m}=n;const g=re.useRef(!1),[v,x]=re.useState(()=&gt;h(l,t,e)),b=re.useRef(null);re.useEffect(()=&gt;{g.current?x(h(l,t,e)):g.current=!0},[h]);const _=re.useId();if(i.length===0)return b$({field:e,openBracket:s,closeBracket:o,lastElement:r,style:u});const T=v?u.collapseIcon:u.expandIcon,w=v?u.ariaLables.collapseJson:u.ariaLables.expandJson,E=l+1,R=i.length-1,N=C=&gt;{v!==C&amp;&amp;(!m||m({level:l,value:t,field:e,newExpandValue:C}))&amp;&amp;x(C)},A=C=&gt;{if(C.key===&quot;ArrowRight&quot;||C.key===&quot;ArrowLeft&quot;)C.preventDefault(),N(C.key===&quot;ArrowRight&quot;);else if(C.key===&quot;ArrowUp&quot;||C.key===&quot;ArrowDown&quot;){C.preventDefault();const O=C.key===&quot;ArrowUp&quot;?-1:1;if(!p.current)return;const L=p.current.querySelectorAll(&quot;[role=button]&quot;);let V=-1;for(let z=0;z&lt;L.length;z++)if(L[z].tabIndex===0){V=z;break}if(V&lt;0)return;const Z=(V+O+L.length)%L.length;L[V].tabIndex=-1,L[Z].tabIndex=0,L[Z].focus()}},D=()=&gt;{var C;N(!v);const O=b.current;if(!O)return;const L=(C=p.current)===null||C===void 0?void 0:C.querySelector(&#x27;[role=button][tabindex=&quot;0&quot;]&#x27;);L&amp;&amp;(L.tabIndex=-1),O.tabIndex=0,O.focus()};return re.createElement(&quot;div&quot;,{className:u.basicChildStyle,role:&quot;treeitem&quot;,&quot;aria-expanded&quot;:v,&quot;aria-selected&quot;:void 0},re.createElement(&quot;span&quot;,{className:T,onClick:D,onKeyDown:A,role:&quot;button&quot;,&quot;aria-label&quot;:w,&quot;aria-expanded&quot;:v,&quot;aria-controls&quot;:v?_:void 0,ref:b,tabIndex:l===0?0:-1}),(e||e===&quot;&quot;)&amp;&amp;(f?re.createElement(&quot;span&quot;,{className:u.clickableLabel,onClick:D,onKeyDown:A},X0(e,u.quotesForFieldNames),&quot;:&quot;):re.createElement(&quot;span&quot;,{className:u.label},X0(e,u.quotesForFieldNames),&quot;:&quot;)),re.createElement(&quot;span&quot;,{className:u.punctuation},s),v?re.createElement(&quot;ul&quot;,{id:_,role:&quot;group&quot;,className:u.childFieldsContainer},i.map((C,O)=&gt;re.createElement(vL,{key:C[0]||O,field:C[0],value:C[1],style:u,lastElement:O===R,level:E,shouldExpandNode:h,clickToExpandNode:f,outerRef:p}))):re.createElement(&quot;span&quot;,{className:u.collapsedContent,onClick:D,onKeyDown:A}),re.createElement(&quot;span&quot;,{className:u.punctuation},o),!r&amp;&amp;re.createElement(&quot;span&quot;,{className:u.punctuation},&quot;,&quot;))}function b$(n){let{field:e,openBracket:t,closeBracket:i,lastElement:r,style:s}=n;return re.createElement(&quot;div&quot;,{className:s.basicChildStyle,role:&quot;treeitem&quot;,&quot;aria-selected&quot;:void 0},(e||e===&quot;&quot;)&amp;&amp;re.createElement(&quot;span&quot;,{className:s.label},X0(e,s.quotesForFieldNames),&quot;:&quot;),re.createElement(&quot;span&quot;,{className:s.punctuation},t),re.createElement(&quot;span&quot;,{className:s.punctuation},i),!r&amp;&amp;re.createElement(&quot;span&quot;,{className:s.punctuation},&quot;,&quot;))}function x$(n){let{field:e,value:t,style:i,lastElement:r,shouldExpandNode:s,clickToExpandNode:o,level:l,outerRef:u,beforeExpandChange:h}=n;return _L({field:e,value:t,lastElement:r||!1,level:l,openBracket:&quot;{&quot;,closeBracket:&quot;}&quot;,style:i,shouldExpandNode:s,clickToExpandNode:o,data:Object.keys(t).map(f=&gt;[f,t[f]]),outerRef:u,beforeExpandChange:h})}function S$(n){let{field:e,value:t,style:i,lastElement:r,level:s,shouldExpandNode:o,clickToExpandNode:l,outerRef:u,beforeExpandChange:h}=n;return _L({field:e,value:t,lastElement:r||!1,level:s,openBracket:&quot;[&quot;,closeBracket:&quot;]&quot;,style:i,shouldExpandNode:o,clickToExpandNode:l,data:t.map(f=&gt;[void 0,f]),outerRef:u,beforeExpandChange:h})}function w$(n){let{field:e,value:t,style:i,lastElement:r}=n,s,o=i.otherValue;return t===null?(s=&quot;null&quot;,o=i.nullValue):t===void 0?(s=&quot;undefined&quot;,o=i.undefinedValue):g$(t)?(s=v$(t,!i.noQuotesForStringValues,i.stringifyStringValues),o=i.stringValue):d$(t)?(s=t?&quot;true&quot;:&quot;false&quot;,o=i.booleanValue):p$(t)?(s=t.toString(),o=i.numberValue):m$(t)?(s=`${t.toString()}n`,o=i.numberValue):gL(t)?s=t.toISOString():yL(t)?s=&quot;function() { }&quot;:s=t.toString(),re.createElement(&quot;div&quot;,{className:i.basicChildStyle,role:&quot;treeitem&quot;,&quot;aria-selected&quot;:void 0},(e||e===&quot;&quot;)&amp;&amp;re.createElement(&quot;span&quot;,{className:i.label},X0(e,i.quotesForFieldNames),&quot;:&quot;),re.createElement(&quot;span&quot;,{className:o},s),!r&amp;&amp;re.createElement(&quot;span&quot;,{className:i.punctuation},&quot;,&quot;))}function vL(n){const e=n.value;return y$(e)?re.createElement(S$,Object.assign({},n)):_$(e)&amp;&amp;!gL(e)&amp;&amp;!yL(e)?re.createElement(x$,Object.assign({},n)):re.createElement(w$,Object.assign({},n))}var mr={&quot;container-light&quot;:&quot;_2IvMF _GzYRV&quot;,&quot;basic-element-style&quot;:&quot;_2bkNM&quot;,&quot;child-fields-container&quot;:&quot;_1BXBN&quot;,&quot;label-light&quot;:&quot;_1MGIk&quot;,&quot;clickable-label-light&quot;:&quot;_2YKJg _1MGIk _1MFti&quot;,&quot;punctuation-light&quot;:&quot;_3uHL6 _3eOF8&quot;,&quot;value-null-light&quot;:&quot;_2T6PJ&quot;,&quot;value-undefined-light&quot;:&quot;_1Gho6&quot;,&quot;value-string-light&quot;:&quot;_vGjyY&quot;,&quot;value-number-light&quot;:&quot;_1bQdo&quot;,&quot;value-boolean-light&quot;:&quot;_3zQKs&quot;,&quot;value-other-light&quot;:&quot;_1xvuR&quot;,&quot;collapse-icon-light&quot;:&quot;_oLqym _f10Tu _1MFti _1LId0&quot;,&quot;expand-icon-light&quot;:&quot;_2AXVT _f10Tu _1MFti _1UmXx&quot;,&quot;collapsed-content-light&quot;:&quot;_2KJWg _1pNG9 _1MFti&quot;};const E$={collapseJson:&quot;collapse JSON&quot;,expandJson:&quot;expand JSON&quot;},DO={container:mr[&quot;container-light&quot;],basicChildStyle:mr[&quot;basic-element-style&quot;],childFieldsContainer:mr[&quot;child-fields-container&quot;],label:mr[&quot;label-light&quot;],clickableLabel:mr[&quot;clickable-label-light&quot;],nullValue:mr[&quot;value-null-light&quot;],undefinedValue:mr[&quot;value-undefined-light&quot;],stringValue:mr[&quot;value-string-light&quot;],booleanValue:mr[&quot;value-boolean-light&quot;],numberValue:mr[&quot;value-number-light&quot;],otherValue:mr[&quot;value-other-light&quot;],punctuation:mr[&quot;punctuation-light&quot;],collapseIcon:mr[&quot;collapse-icon-light&quot;],expandIcon:mr[&quot;expand-icon-light&quot;],collapsedContent:mr[&quot;collapsed-content-light&quot;],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:E$,stringifyStringValues:!1},T$=()=&gt;!0,NO=n=&gt;n&lt;1,IO=n=&gt;{let{data:e,style:t=DO,shouldExpandNode:i=T$,clickToExpandNode:r=!1,beforeExpandChange:s,...o}=n;const l=re.useRef(null);return re.createElement(&quot;div&quot;,Object.assign({&quot;aria-label&quot;:&quot;JSON view&quot;},o,{className:t.container,ref:l,role:&quot;tree&quot;}),re.createElement(vL,{value:e,style:{...DO,...t},lastElement:!0,level:0,shouldExpandNode:i,clickToExpandNode:r,outerRef:l,beforeExpandChange:s}))};var Xf={exports:{}},Dx={},Nx={exports:{}},Ix,PO;function M$(){if(PO)return Ix;PO=1;var n=&quot;SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED&quot;;return Ix=n,Ix}var Px,LO;function A$(){if(LO)return Px;LO=1;var n=M$();function e(){}function t(){}return t.resetWarningCache=e,Px=function(){function i(o,l,u,h,f,p){if(p!==n){var m=new Error(&quot;Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types&quot;);throw m.name=&quot;Invariant Violation&quot;,m}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},Px}var UO;function bL(){return UO||(UO=1,Nx.exports=A$()()),Nx.exports}function xL(n){var e,t,i=&quot;&quot;;if(typeof n==&quot;string&quot;||typeof n==&quot;number&quot;)i+=n;else if(typeof n==&quot;object&quot;)if(Array.isArray(n))for(e=0;e&lt;n.length;e++)n[e]&amp;&amp;(t=xL(n[e]))&amp;&amp;(i&amp;&amp;(i+=&quot; &quot;),i+=t);else for(e in n)n[e]&amp;&amp;(i&amp;&amp;(i+=&quot; &quot;),i+=e);return i}function kO(){for(var n,e,t=0,i=&quot;&quot;;t&lt;arguments.length;)(n=arguments[t++])&amp;&amp;(e=xL(n))&amp;&amp;(i&amp;&amp;(i+=&quot; &quot;),i+=e);return i}const C$=Object.freeze(Object.defineProperty({__proto__:null,clsx:kO,default:kO},Symbol.toStringTag,{value:&quot;Module&quot;})),R$=xk(C$);var vi={},Za={},FO;function i_(){if(FO)return Za;FO=1,Object.defineProperty(Za,&quot;__esModule&quot;,{value:!0}),Za.dontSetMe=r,Za.findInArray=n,Za.int=i,Za.isFunction=e,Za.isNum=t;function n(s,o){for(let l=0,u=s.length;l&lt;u;l++)if(o.apply(o,[s[l],l,s]))return s[l]}function e(s){return typeof s==&quot;function&quot;||Object.prototype.toString.call(s)===&quot;[object Function]&quot;}function t(s){return typeof s==&quot;number&quot;&amp;&amp;!isNaN(s)}function i(s){return parseInt(s,10)}function r(s,o,l){if(s[o])return new Error(&quot;Invalid prop &quot;.concat(o,&quot; passed to &quot;).concat(l,&quot; - do not set this, set it on the child.&quot;))}return Za}var Ja={},zO;function O$(){if(zO)return Ja;zO=1,Object.defineProperty(Ja,&quot;__esModule&quot;,{value:!0}),Ja.browserPrefixToKey=t,Ja.browserPrefixToStyle=i,Ja.default=void 0,Ja.getPrefix=e;const n=[&quot;Moz&quot;,&quot;Webkit&quot;,&quot;O&quot;,&quot;ms&quot;];function e(){var s;let o=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:&quot;transform&quot;;if(typeof window&gt;&quot;u&quot;)return&quot;&quot;;const l=(s=window.document)===null||s===void 0||(s=s.documentElement)===null||s===void 0?void 0:s.style;if(!l||o in l)return&quot;&quot;;for(let u=0;u&lt;n.length;u++)if(t(o,n[u])in l)return n[u];return&quot;&quot;}function t(s,o){return o?&quot;&quot;.concat(o).concat(r(s)):s}function i(s,o){return o?&quot;-&quot;.concat(o.toLowerCase(),&quot;-&quot;).concat(s):s}function r(s){let o=&quot;&quot;,l=!0;for(let u=0;u&lt;s.length;u++)l?(o+=s[u].toUpperCase(),l=!1):s[u]===&quot;-&quot;?l=!0:o+=s[u];return o}return Ja.default=e(),Ja}var BO;function n1(){if(BO)return vi;BO=1,Object.defineProperty(vi,&quot;__esModule&quot;,{value:!0}),vi.addClassName=R,vi.addEvent=l,vi.addUserSelectStyles=w,vi.createCSSTransform=v,vi.createSVGTransform=x,vi.getTouch=_,vi.getTouchIdentifier=T,vi.getTranslation=b,vi.innerHeight=p,vi.innerWidth=m,vi.matchesSelector=s,vi.matchesSelectorAndParentsTo=o,vi.offsetXYFromParent=g,vi.outerHeight=h,vi.outerWidth=f,vi.removeClassName=N,vi.removeEvent=u,vi.removeUserSelectStyles=E;var n=i_(),e=i(O$());function t(A){if(typeof WeakMap!=&quot;function&quot;)return null;var D=new WeakMap,C=new WeakMap;return(t=function(O){return O?C:D})(A)}function i(A,D){if(A&amp;&amp;A.__esModule)return A;if(A===null||typeof A!=&quot;object&quot;&amp;&amp;typeof A!=&quot;function&quot;)return{default:A};var C=t(D);if(C&amp;&amp;C.has(A))return C.get(A);var O={},L=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;for(var V in A)if(V!==&quot;default&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(A,V)){var Z=L?Object.getOwnPropertyDescriptor(A,V):null;Z&amp;&amp;(Z.get||Z.set)?Object.defineProperty(O,V,Z):O[V]=A[V]}return O.default=A,C&amp;&amp;C.set(A,O),O}let r=&quot;&quot;;function s(A,D){return r||(r=(0,n.findInArray)([&quot;matches&quot;,&quot;webkitMatchesSelector&quot;,&quot;mozMatchesSelector&quot;,&quot;msMatchesSelector&quot;,&quot;oMatchesSelector&quot;],function(C){return(0,n.isFunction)(A[C])})),(0,n.isFunction)(A[r])?A[r](D):!1}function o(A,D,C){let O=A;do{if(s(O,D))return!0;if(O===C)return!1;O=O.parentNode}while(O);return!1}function l(A,D,C,O){if(!A)return;const L={capture:!0,...O};A.addEventListener?A.addEventListener(D,C,L):A.attachEvent?A.attachEvent(&quot;on&quot;+D,C):A[&quot;on&quot;+D]=C}function u(A,D,C,O){if(!A)return;const L={capture:!0,...O};A.removeEventListener?A.removeEventListener(D,C,L):A.detachEvent?A.detachEvent(&quot;on&quot;+D,C):A[&quot;on&quot;+D]=null}function h(A){let D=A.clientHeight;const C=A.ownerDocument.defaultView.getComputedStyle(A);return D+=(0,n.int)(C.borderTopWidth),D+=(0,n.int)(C.borderBottomWidth),D}function f(A){let D=A.clientWidth;const C=A.ownerDocument.defaultView.getComputedStyle(A);return D+=(0,n.int)(C.borderLeftWidth),D+=(0,n.int)(C.borderRightWidth),D}function p(A){let D=A.clientHeight;const C=A.ownerDocument.defaultView.getComputedStyle(A);return D-=(0,n.int)(C.paddingTop),D-=(0,n.int)(C.paddingBottom),D}function m(A){let D=A.clientWidth;const C=A.ownerDocument.defaultView.getComputedStyle(A);return D-=(0,n.int)(C.paddingLeft),D-=(0,n.int)(C.paddingRight),D}function g(A,D,C){const L=D===D.ownerDocument.body?{left:0,top:0}:D.getBoundingClientRect(),V=(A.clientX+D.scrollLeft-L.left)/C,Z=(A.clientY+D.scrollTop-L.top)/C;return{x:V,y:Z}}function v(A,D){const C=b(A,D,&quot;px&quot;);return{[(0,e.browserPrefixToKey)(&quot;transform&quot;,e.default)]:C}}function x(A,D){return b(A,D,&quot;&quot;)}function b(A,D,C){let{x:O,y:L}=A,V=&quot;translate(&quot;.concat(O).concat(C,&quot;,&quot;).concat(L).concat(C,&quot;)&quot;);if(D){const Z=&quot;&quot;.concat(typeof D.x==&quot;string&quot;?D.x:D.x+C),z=&quot;&quot;.concat(typeof D.y==&quot;string&quot;?D.y:D.y+C);V=&quot;translate(&quot;.concat(Z,&quot;, &quot;).concat(z,&quot;)&quot;)+V}return V}function _(A,D){return A.targetTouches&amp;&amp;(0,n.findInArray)(A.targetTouches,C=&gt;D===C.identifier)||A.changedTouches&amp;&amp;(0,n.findInArray)(A.changedTouches,C=&gt;D===C.identifier)}function T(A){if(A.targetTouches&amp;&amp;A.targetTouches[0])return A.targetTouches[0].identifier;if(A.changedTouches&amp;&amp;A.changedTouches[0])return A.changedTouches[0].identifier}function w(A){if(!A)return;let D=A.getElementById(&quot;react-draggable-style-el&quot;);D||(D=A.createElement(&quot;style&quot;),D.type=&quot;text/css&quot;,D.id=&quot;react-draggable-style-el&quot;,D.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,D.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,A.getElementsByTagName(&quot;head&quot;)[0].appendChild(D)),A.body&amp;&amp;R(A.body,&quot;react-draggable-transparent-selection&quot;)}function E(A){if(A)try{if(A.body&amp;&amp;N(A.body,&quot;react-draggable-transparent-selection&quot;),A.selection)A.selection.empty();else{const D=(A.defaultView||window).getSelection();D&amp;&amp;D.type!==&quot;Caret&quot;&amp;&amp;D.removeAllRanges()}}catch{}}function R(A,D){A.classList?A.classList.add(D):A.className.match(new RegExp(&quot;(?:^|\\s)&quot;.concat(D,&quot;(?!\\S)&quot;)))||(A.className+=&quot; &quot;.concat(D))}function N(A,D){A.classList?A.classList.remove(D):A.className=A.className.replace(new RegExp(&quot;(?:^|\\s)&quot;.concat(D,&quot;(?!\\S)&quot;),&quot;g&quot;),&quot;&quot;)}return vi}var fo={},HO;function SL(){if(HO)return fo;HO=1,Object.defineProperty(fo,&quot;__esModule&quot;,{value:!0}),fo.canDragX=r,fo.canDragY=s,fo.createCoreData=l,fo.createDraggableData=u,fo.getBoundPosition=t,fo.getControlPosition=o,fo.snapToGrid=i;var n=i_(),e=n1();function t(p,m,g){if(!p.props.bounds)return[m,g];let{bounds:v}=p.props;v=typeof v==&quot;string&quot;?v:h(v);const x=f(p);if(typeof v==&quot;string&quot;){const{ownerDocument:b}=x,_=b.defaultView;let T;if(v===&quot;parent&quot;?T=x.parentNode:T=b.querySelector(v),!(T instanceof _.HTMLElement))throw new Error(&#x27;Bounds selector &quot;&#x27;+v+&#x27;&quot; could not find an element.&#x27;);const w=T,E=_.getComputedStyle(x),R=_.getComputedStyle(w);v={left:-x.offsetLeft+(0,n.int)(R.paddingLeft)+(0,n.int)(E.marginLeft),top:-x.offsetTop+(0,n.int)(R.paddingTop)+(0,n.int)(E.marginTop),right:(0,e.innerWidth)(w)-(0,e.outerWidth)(x)-x.offsetLeft+(0,n.int)(R.paddingRight)-(0,n.int)(E.marginRight),bottom:(0,e.innerHeight)(w)-(0,e.outerHeight)(x)-x.offsetTop+(0,n.int)(R.paddingBottom)-(0,n.int)(E.marginBottom)}}return(0,n.isNum)(v.right)&amp;&amp;(m=Math.min(m,v.right)),(0,n.isNum)(v.bottom)&amp;&amp;(g=Math.min(g,v.bottom)),(0,n.isNum)(v.left)&amp;&amp;(m=Math.max(m,v.left)),(0,n.isNum)(v.top)&amp;&amp;(g=Math.max(g,v.top)),[m,g]}function i(p,m,g){const v=Math.round(m/p[0])*p[0],x=Math.round(g/p[1])*p[1];return[v,x]}function r(p){return p.props.axis===&quot;both&quot;||p.props.axis===&quot;x&quot;}function s(p){return p.props.axis===&quot;both&quot;||p.props.axis===&quot;y&quot;}function o(p,m,g){const v=typeof m==&quot;number&quot;?(0,e.getTouch)(p,m):null;if(typeof m==&quot;number&quot;&amp;&amp;!v)return null;const x=f(g),b=g.props.offsetParent||x.offsetParent||x.ownerDocument.body;return(0,e.offsetXYFromParent)(v||p,b,g.props.scale)}function l(p,m,g){const v=!(0,n.isNum)(p.lastX),x=f(p);return v?{node:x,deltaX:0,deltaY:0,lastX:m,lastY:g,x:m,y:g}:{node:x,deltaX:m-p.lastX,deltaY:g-p.lastY,lastX:p.lastX,lastY:p.lastY,x:m,y:g}}function u(p,m){const g=p.props.scale;return{node:m.node,x:p.state.x+m.deltaX/g,y:p.state.y+m.deltaY/g,deltaX:m.deltaX/g,deltaY:m.deltaY/g,lastX:p.state.x,lastY:p.state.y}}function h(p){return{left:p.left,top:p.top,right:p.right,bottom:p.bottom}}function f(p){const m=p.findDOMNode();if(!m)throw new Error(&quot;&lt;DraggableCore&gt;: Unmounted during event!&quot;);return m}return fo}var qf={},mg={},VO;function wL(){if(VO)return mg;VO=1,Object.defineProperty(mg,&quot;__esModule&quot;,{value:!0}),mg.default=n;function n(){}return mg}var GO;function D$(){if(GO)return qf;GO=1,Object.defineProperty(qf,&quot;__esModule&quot;,{value:!0}),qf.default=void 0;var n=h(Lc()),e=l(bL()),t=l(J0()),i=n1(),r=SL(),s=i_(),o=l(wL());function l(b){return b&amp;&amp;b.__esModule?b:{default:b}}function u(b){if(typeof WeakMap!=&quot;function&quot;)return null;var _=new WeakMap,T=new WeakMap;return(u=function(w){return w?T:_})(b)}function h(b,_){if(b&amp;&amp;b.__esModule)return b;if(b===null||typeof b!=&quot;object&quot;&amp;&amp;typeof b!=&quot;function&quot;)return{default:b};var T=u(_);if(T&amp;&amp;T.has(b))return T.get(b);var w={},E=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;for(var R in b)if(R!==&quot;default&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(b,R)){var N=E?Object.getOwnPropertyDescriptor(b,R):null;N&amp;&amp;(N.get||N.set)?Object.defineProperty(w,R,N):w[R]=b[R]}return w.default=b,T&amp;&amp;T.set(b,w),w}function f(b,_,T){return _=p(_),_ in b?Object.defineProperty(b,_,{value:T,enumerable:!0,configurable:!0,writable:!0}):b[_]=T,b}function p(b){var _=m(b,&quot;string&quot;);return typeof _==&quot;symbol&quot;?_:String(_)}function m(b,_){if(typeof b!=&quot;object&quot;||b===null)return b;var T=b[Symbol.toPrimitive];if(T!==void 0){var w=T.call(b,_);if(typeof w!=&quot;object&quot;)return w;throw new TypeError(&quot;@@toPrimitive must return a primitive value.&quot;)}return(_===&quot;string&quot;?String:Number)(b)}const g={touch:{start:&quot;touchstart&quot;,move:&quot;touchmove&quot;,stop:&quot;touchend&quot;},mouse:{start:&quot;mousedown&quot;,move:&quot;mousemove&quot;,stop:&quot;mouseup&quot;}};let v=g.mouse,x=class extends n.Component{constructor(){super(...arguments),f(this,&quot;dragging&quot;,!1),f(this,&quot;lastX&quot;,NaN),f(this,&quot;lastY&quot;,NaN),f(this,&quot;touchIdentifier&quot;,null),f(this,&quot;mounted&quot;,!1),f(this,&quot;handleDragStart&quot;,_=&gt;{if(this.props.onMouseDown(_),!this.props.allowAnyClick&amp;&amp;typeof _.button==&quot;number&quot;&amp;&amp;_.button!==0)return!1;const T=this.findDOMNode();if(!T||!T.ownerDocument||!T.ownerDocument.body)throw new Error(&quot;&lt;DraggableCore&gt; not mounted on DragStart!&quot;);const{ownerDocument:w}=T;if(this.props.disabled||!(_.target instanceof w.defaultView.Node)||this.props.handle&amp;&amp;!(0,i.matchesSelectorAndParentsTo)(_.target,this.props.handle,T)||this.props.cancel&amp;&amp;(0,i.matchesSelectorAndParentsTo)(_.target,this.props.cancel,T))return;_.type===&quot;touchstart&quot;&amp;&amp;_.preventDefault();const E=(0,i.getTouchIdentifier)(_);this.touchIdentifier=E;const R=(0,r.getControlPosition)(_,E,this);if(R==null)return;const{x:N,y:A}=R,D=(0,r.createCoreData)(this,N,A);(0,o.default)(&quot;DraggableCore: handleDragStart: %j&quot;,D),(0,o.default)(&quot;calling&quot;,this.props.onStart),!(this.props.onStart(_,D)===!1||this.mounted===!1)&amp;&amp;(this.props.enableUserSelectHack&amp;&amp;(0,i.addUserSelectStyles)(w),this.dragging=!0,this.lastX=N,this.lastY=A,(0,i.addEvent)(w,v.move,this.handleDrag),(0,i.addEvent)(w,v.stop,this.handleDragStop))}),f(this,&quot;handleDrag&quot;,_=&gt;{const T=(0,r.getControlPosition)(_,this.touchIdentifier,this);if(T==null)return;let{x:w,y:E}=T;if(Array.isArray(this.props.grid)){let A=w-this.lastX,D=E-this.lastY;if([A,D]=(0,r.snapToGrid)(this.props.grid,A,D),!A&amp;&amp;!D)return;w=this.lastX+A,E=this.lastY+D}const R=(0,r.createCoreData)(this,w,E);if((0,o.default)(&quot;DraggableCore: handleDrag: %j&quot;,R),this.props.onDrag(_,R)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent(&quot;mouseup&quot;))}catch{const D=document.createEvent(&quot;MouseEvents&quot;);D.initMouseEvent(&quot;mouseup&quot;,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(D)}return}this.lastX=w,this.lastY=E}),f(this,&quot;handleDragStop&quot;,_=&gt;{if(!this.dragging)return;const T=(0,r.getControlPosition)(_,this.touchIdentifier,this);if(T==null)return;let{x:w,y:E}=T;if(Array.isArray(this.props.grid)){let D=w-this.lastX||0,C=E-this.lastY||0;[D,C]=(0,r.snapToGrid)(this.props.grid,D,C),w=this.lastX+D,E=this.lastY+C}const R=(0,r.createCoreData)(this,w,E);if(this.props.onStop(_,R)===!1||this.mounted===!1)return!1;const A=this.findDOMNode();A&amp;&amp;this.props.enableUserSelectHack&amp;&amp;(0,i.removeUserSelectStyles)(A.ownerDocument),(0,o.default)(&quot;DraggableCore: handleDragStop: %j&quot;,R),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,A&amp;&amp;((0,o.default)(&quot;DraggableCore: Removing handlers&quot;),(0,i.removeEvent)(A.ownerDocument,v.move,this.handleDrag),(0,i.removeEvent)(A.ownerDocument,v.stop,this.handleDragStop))}),f(this,&quot;onMouseDown&quot;,_=&gt;(v=g.mouse,this.handleDragStart(_))),f(this,&quot;onMouseUp&quot;,_=&gt;(v=g.mouse,this.handleDragStop(_))),f(this,&quot;onTouchStart&quot;,_=&gt;(v=g.touch,this.handleDragStart(_))),f(this,&quot;onTouchEnd&quot;,_=&gt;(v=g.touch,this.handleDragStop(_)))}componentDidMount(){this.mounted=!0;const _=this.findDOMNode();_&amp;&amp;(0,i.addEvent)(_,g.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const _=this.findDOMNode();if(_){const{ownerDocument:T}=_;(0,i.removeEvent)(T,g.mouse.move,this.handleDrag),(0,i.removeEvent)(T,g.touch.move,this.handleDrag),(0,i.removeEvent)(T,g.mouse.stop,this.handleDragStop),(0,i.removeEvent)(T,g.touch.stop,this.handleDragStop),(0,i.removeEvent)(_,g.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&amp;&amp;(0,i.removeUserSelectStyles)(T)}}findDOMNode(){var _,T;return(_=this.props)!==null&amp;&amp;_!==void 0&amp;&amp;_.nodeRef?(T=this.props)===null||T===void 0||(T=T.nodeRef)===null||T===void 0?void 0:T.current:t.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return qf.default=x,f(x,&quot;displayName&quot;,&quot;DraggableCore&quot;),f(x,&quot;propTypes&quot;,{allowAnyClick:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(b,_){if(b[_]&amp;&amp;b[_].nodeType!==1)throw new Error(&quot;Draggable&#x27;s offsetParent must be a DOM Node.&quot;)},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),f(x,&quot;defaultProps&quot;,{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),qf}var jO;function N$(){return jO||(jO=1,function(n){Object.defineProperty(n,&quot;__esModule&quot;,{value:!0}),Object.defineProperty(n,&quot;DraggableCore&quot;,{enumerable:!0,get:function(){return u.default}}),n.default=void 0;var e=m(Lc()),t=f(bL()),i=f(J0()),r=f(R$),s=n1(),o=SL(),l=i_(),u=f(D$()),h=f(wL());function f(T){return T&amp;&amp;T.__esModule?T:{default:T}}function p(T){if(typeof WeakMap!=&quot;function&quot;)return null;var w=new WeakMap,E=new WeakMap;return(p=function(R){return R?E:w})(T)}function m(T,w){if(T&amp;&amp;T.__esModule)return T;if(T===null||typeof T!=&quot;object&quot;&amp;&amp;typeof T!=&quot;function&quot;)return{default:T};var E=p(w);if(E&amp;&amp;E.has(T))return E.get(T);var R={},N=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;for(var A in T)if(A!==&quot;default&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(T,A)){var D=N?Object.getOwnPropertyDescriptor(T,A):null;D&amp;&amp;(D.get||D.set)?Object.defineProperty(R,A,D):R[A]=T[A]}return R.default=T,E&amp;&amp;E.set(T,R),R}function g(){return g=Object.assign?Object.assign.bind():function(T){for(var w=1;w&lt;arguments.length;w++){var E=arguments[w];for(var R in E)Object.prototype.hasOwnProperty.call(E,R)&amp;&amp;(T[R]=E[R])}return T},g.apply(this,arguments)}function v(T,w,E){return w=x(w),w in T?Object.defineProperty(T,w,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[w]=E,T}function x(T){var w=b(T,&quot;string&quot;);return typeof w==&quot;symbol&quot;?w:String(w)}function b(T,w){if(typeof T!=&quot;object&quot;||T===null)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var R=E.call(T,w);if(typeof R!=&quot;object&quot;)return R;throw new TypeError(&quot;@@toPrimitive must return a primitive value.&quot;)}return(w===&quot;string&quot;?String:Number)(T)}class _ extends e.Component{static getDerivedStateFromProps(w,E){let{position:R}=w,{prevPropsPosition:N}=E;return R&amp;&amp;(!N||R.x!==N.x||R.y!==N.y)?((0,h.default)(&quot;Draggable: getDerivedStateFromProps %j&quot;,{position:R,prevPropsPosition:N}),{x:R.x,y:R.y,prevPropsPosition:{...R}}):null}constructor(w){super(w),v(this,&quot;onDragStart&quot;,(E,R)=&gt;{if((0,h.default)(&quot;Draggable: onDragStart: %j&quot;,R),this.props.onStart(E,(0,o.createDraggableData)(this,R))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),v(this,&quot;onDrag&quot;,(E,R)=&gt;{if(!this.state.dragging)return!1;(0,h.default)(&quot;Draggable: onDrag: %j&quot;,R);const N=(0,o.createDraggableData)(this,R),A={x:N.x,y:N.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:O}=A;A.x+=this.state.slackX,A.y+=this.state.slackY;const[L,V]=(0,o.getBoundPosition)(this,A.x,A.y);A.x=L,A.y=V,A.slackX=this.state.slackX+(C-A.x),A.slackY=this.state.slackY+(O-A.y),N.x=A.x,N.y=A.y,N.deltaX=A.x-this.state.x,N.deltaY=A.y-this.state.y}if(this.props.onDrag(E,N)===!1)return!1;this.setState(A)}),v(this,&quot;onDragStop&quot;,(E,R)=&gt;{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,R))===!1)return!1;(0,h.default)(&quot;Draggable: onDragStop: %j&quot;,R);const A={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:O}=this.props.position;A.x=C,A.y=O}this.setState(A)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&amp;&amp;!(w.onDrag||w.onStop)&amp;&amp;console.warn(&quot;A `position` was applied to this &lt;Draggable&gt;, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.&quot;)}componentDidMount(){typeof window.SVGElement&lt;&quot;u&quot;&amp;&amp;this.findDOMNode()instanceof window.SVGElement&amp;&amp;this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var w,E;return(w=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&amp;&amp;w!==void 0?w:i.default.findDOMNode(this)}render(){const{axis:w,bounds:E,children:R,defaultPosition:N,defaultClassName:A,defaultClassNameDragging:D,defaultClassNameDragged:C,position:O,positionOffset:L,scale:V,...Z}=this.props;let z={},K=null;const j=!!!O||this.state.dragging,G=O||N,ee={x:(0,o.canDragX)(this)&amp;&amp;j?this.state.x:G.x,y:(0,o.canDragY)(this)&amp;&amp;j?this.state.y:G.y};this.state.isElementSVG?K=(0,s.createSVGTransform)(ee,L):z=(0,s.createCSSTransform)(ee,L);const F=(0,r.default)(R.props.className||&quot;&quot;,A,{[D]:this.state.dragging,[C]:this.state.dragged});return e.createElement(u.default,g({},Z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(R),{className:F,style:{...R.props.style,...z},transform:K}))}}n.default=_,v(_,&quot;displayName&quot;,&quot;Draggable&quot;),v(_,&quot;propTypes&quot;,{...u.default.propTypes,axis:t.default.oneOf([&quot;both&quot;,&quot;x&quot;,&quot;y&quot;,&quot;none&quot;]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),v(_,&quot;defaultProps&quot;,{...u.default.defaultProps,axis:&quot;both&quot;,bounds:!1,defaultClassName:&quot;react-draggable&quot;,defaultClassNameDragging:&quot;react-draggable-dragging&quot;,defaultClassNameDragged:&quot;react-draggable-dragged&quot;,defaultPosition:{x:0,y:0},scale:1})}(Dx)),Dx}var WO;function I$(){if(WO)return Xf.exports;WO=1;const{default:n,DraggableCore:e}=N$();return Xf.exports=n,Xf.exports.default=n,Xf.exports.DraggableCore=e,Xf.exports}var P$=I$();const L$=Z0(P$);var Ci=function(){return Ci=Object.assign||function(n){for(var e,t=1,i=arguments.length;t&lt;i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&amp;&amp;(n[r]=e[r])}return n},Ci.apply(this,arguments)},XO={width:&quot;100%&quot;,height:&quot;10px&quot;,top:&quot;0px&quot;,left:&quot;0px&quot;,cursor:&quot;row-resize&quot;},qO={width:&quot;10px&quot;,height:&quot;100%&quot;,top:&quot;0px&quot;,left:&quot;0px&quot;,cursor:&quot;col-resize&quot;},gg={width:&quot;20px&quot;,height:&quot;20px&quot;,position:&quot;absolute&quot;,zIndex:1},U$={top:Ci(Ci({},XO),{top:&quot;-5px&quot;}),right:Ci(Ci({},qO),{left:void 0,right:&quot;-5px&quot;}),bottom:Ci(Ci({},XO),{top:void 0,bottom:&quot;-5px&quot;}),left:Ci(Ci({},qO),{left:&quot;-5px&quot;}),topRight:Ci(Ci({},gg),{right:&quot;-10px&quot;,top:&quot;-10px&quot;,cursor:&quot;ne-resize&quot;}),bottomRight:Ci(Ci({},gg),{right:&quot;-10px&quot;,bottom:&quot;-10px&quot;,cursor:&quot;se-resize&quot;}),bottomLeft:Ci(Ci({},gg),{left:&quot;-10px&quot;,bottom:&quot;-10px&quot;,cursor:&quot;sw-resize&quot;}),topLeft:Ci(Ci({},gg),{left:&quot;-10px&quot;,top:&quot;-10px&quot;,cursor:&quot;nw-resize&quot;})},k$=re.memo(function(n){var e=n.onResizeStart,t=n.direction,i=n.children,r=n.replaceStyles,s=n.className,o=re.useCallback(function(h){e(h,t)},[e,t]),l=re.useCallback(function(h){e(h,t)},[e,t]),u=re.useMemo(function(){return Ci(Ci({position:&quot;absolute&quot;,userSelect:&quot;none&quot;},U$[t]),r??{})},[r,t]);return P.jsx(&quot;div&quot;,{className:s||void 0,style:u,onMouseDown:o,onTouchStart:l,children:i})}),F$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&amp;&amp;(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!=&quot;function&quot;&amp;&amp;t!==null)throw new TypeError(&quot;Class extends value &quot;+String(t)+&quot; is not a constructor or null&quot;);n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),go=function(){return go=Object.assign||function(n){for(var e,t=1,i=arguments.length;t&lt;i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&amp;&amp;(n[r]=e[r])}return n},go.apply(this,arguments)},z$={width:&quot;auto&quot;,height:&quot;auto&quot;},yg=function(n,e,t){return Math.max(Math.min(n,t),e)},YO=function(n,e,t){var i=Math.round(n/e);return i*e+t*(i-1)},Bu=function(n,e){return new RegExp(n,&quot;i&quot;).test(e)},_g=function(n){return!!(n.touches&amp;&amp;n.touches.length)},B$=function(n){return!!((n.clientX||n.clientX===0)&amp;&amp;(n.clientY||n.clientY===0))},KO=function(n,e,t){t===void 0&amp;&amp;(t=0);var i=e.reduce(function(s,o,l){return Math.abs(o-n)&lt;Math.abs(e[s]-n)?l:s},0),r=Math.abs(e[i]-n);return t===0||r&lt;t?e[i]:n},Lx=function(n){return n=n.toString(),n===&quot;auto&quot;||n.endsWith(&quot;px&quot;)||n.endsWith(&quot;%&quot;)||n.endsWith(&quot;vh&quot;)||n.endsWith(&quot;vw&quot;)||n.endsWith(&quot;vmax&quot;)||n.endsWith(&quot;vmin&quot;)?n:&quot;&quot;.concat(n,&quot;px&quot;)},vg=function(n,e,t,i){if(n&amp;&amp;typeof n==&quot;string&quot;){if(n.endsWith(&quot;px&quot;))return Number(n.replace(&quot;px&quot;,&quot;&quot;));if(n.endsWith(&quot;%&quot;)){var r=Number(n.replace(&quot;%&quot;,&quot;&quot;))/100;return e*r}if(n.endsWith(&quot;vw&quot;)){var r=Number(n.replace(&quot;vw&quot;,&quot;&quot;))/100;return t*r}if(n.endsWith(&quot;vh&quot;)){var r=Number(n.replace(&quot;vh&quot;,&quot;&quot;))/100;return i*r}}return n},H$=function(n,e,t,i,r,s,o){return i=vg(i,n.width,e,t),r=vg(r,n.height,e,t),s=vg(s,n.width,e,t),o=vg(o,n.height,e,t),{maxWidth:typeof i&gt;&quot;u&quot;?void 0:Number(i),maxHeight:typeof r&gt;&quot;u&quot;?void 0:Number(r),minWidth:typeof s&gt;&quot;u&quot;?void 0:Number(s),minHeight:typeof o&gt;&quot;u&quot;?void 0:Number(o)}},V$=function(n){return Array.isArray(n)?n:[n,n]},G$=[&quot;as&quot;,&quot;ref&quot;,&quot;style&quot;,&quot;className&quot;,&quot;grid&quot;,&quot;gridGap&quot;,&quot;snap&quot;,&quot;bounds&quot;,&quot;boundsByDirection&quot;,&quot;size&quot;,&quot;defaultSize&quot;,&quot;minWidth&quot;,&quot;minHeight&quot;,&quot;maxWidth&quot;,&quot;maxHeight&quot;,&quot;lockAspectRatio&quot;,&quot;lockAspectRatioExtraWidth&quot;,&quot;lockAspectRatioExtraHeight&quot;,&quot;enable&quot;,&quot;handleStyles&quot;,&quot;handleClasses&quot;,&quot;handleWrapperStyle&quot;,&quot;handleWrapperClass&quot;,&quot;children&quot;,&quot;onResizeStart&quot;,&quot;onResize&quot;,&quot;onResizeStop&quot;,&quot;handleComponent&quot;,&quot;scale&quot;,&quot;resizeRatio&quot;,&quot;snapGap&quot;],$O=&quot;__resizable_base__&quot;,j$=function(n){F$(e,n);function e(t){var i,r,s,o,l=n.call(this,t)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.delta={width:0,height:0},l.appendBase=function(){if(!l.resizable||!l.window)return null;var u=l.parentNode;if(!u)return null;var h=l.window.document.createElement(&quot;div&quot;);return h.style.width=&quot;100%&quot;,h.style.height=&quot;100%&quot;,h.style.position=&quot;absolute&quot;,h.style.transform=&quot;scale(0, 0)&quot;,h.style.left=&quot;0&quot;,h.style.flex=&quot;0 0 100%&quot;,h.classList?h.classList.add($O):h.className+=$O,u.appendChild(h),h},l.removeBase=function(u){var h=l.parentNode;h&amp;&amp;h.removeChild(u)},l.state={isResizing:!1,width:(r=(i=l.propsSize)===null||i===void 0?void 0:i.width)!==null&amp;&amp;r!==void 0?r:&quot;auto&quot;,height:(o=(s=l.propsSize)===null||s===void 0?void 0:s.height)!==null&amp;&amp;o!==void 0?o:&quot;auto&quot;,direction:&quot;right&quot;,original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:&quot;100%&quot;,width:&quot;100%&quot;,backgroundColor:&quot;rgba(0,0,0,0)&quot;,cursor:&quot;auto&quot;,opacity:0,position:&quot;fixed&quot;,zIndex:9999,top:&quot;0&quot;,left:&quot;0&quot;,bottom:&quot;0&quot;,right:&quot;0&quot;},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(e.prototype,&quot;parentNode&quot;,{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;window&quot;,{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;propsSize&quot;,{get:function(){return this.props.size||this.props.defaultSize||z$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;size&quot;,{get:function(){var t=0,i=0;if(this.resizable&amp;&amp;this.window){var r=this.resizable.offsetWidth,s=this.resizable.offsetHeight,o=this.resizable.style.position;o!==&quot;relative&quot;&amp;&amp;(this.resizable.style.position=&quot;relative&quot;),t=this.resizable.style.width!==&quot;auto&quot;?this.resizable.offsetWidth:r,i=this.resizable.style.height!==&quot;auto&quot;?this.resizable.offsetHeight:s,this.resizable.style.position=o}return{width:t,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;sizeStyle&quot;,{get:function(){var t=this,i=this.props.size,r=function(l){var u;if(typeof t.state[l]&gt;&quot;u&quot;||t.state[l]===&quot;auto&quot;)return&quot;auto&quot;;if(t.propsSize&amp;&amp;t.propsSize[l]&amp;&amp;(!((u=t.propsSize[l])===null||u===void 0)&amp;&amp;u.toString().endsWith(&quot;%&quot;))){if(t.state[l].toString().endsWith(&quot;%&quot;))return t.state[l].toString();var h=t.getParentSize(),f=Number(t.state[l].toString().replace(&quot;px&quot;,&quot;&quot;)),p=f/h[l]*100;return&quot;&quot;.concat(p,&quot;%&quot;)}return Lx(t.state[l])},s=i&amp;&amp;typeof i.width&lt;&quot;u&quot;&amp;&amp;!this.state.isResizing?Lx(i.width):r(&quot;width&quot;),o=i&amp;&amp;typeof i.height&lt;&quot;u&quot;&amp;&amp;!this.state.isResizing?Lx(i.height):r(&quot;height&quot;);return{width:s,height:o}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var i=!1,r=this.parentNode.style.flexWrap;r!==&quot;wrap&quot;&amp;&amp;(i=!0,this.parentNode.style.flexWrap=&quot;wrap&quot;),t.style.position=&quot;relative&quot;,t.style.minWidth=&quot;100%&quot;,t.style.minHeight=&quot;100%&quot;;var s={width:t.offsetWidth,height:t.offsetHeight};return i&amp;&amp;(this.parentNode.style.flexWrap=r),this.removeBase(t),s},e.prototype.bindEvents=function(){this.window&amp;&amp;(this.window.addEventListener(&quot;mouseup&quot;,this.onMouseUp),this.window.addEventListener(&quot;mousemove&quot;,this.onMouseMove),this.window.addEventListener(&quot;mouseleave&quot;,this.onMouseUp),this.window.addEventListener(&quot;touchmove&quot;,this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener(&quot;touchend&quot;,this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&amp;&amp;(this.window.removeEventListener(&quot;mouseup&quot;,this.onMouseUp),this.window.removeEventListener(&quot;mousemove&quot;,this.onMouseMove),this.window.removeEventListener(&quot;mouseleave&quot;,this.onMouseUp),this.window.removeEventListener(&quot;touchmove&quot;,this.onMouseMove,!0),this.window.removeEventListener(&quot;touchend&quot;,this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!==&quot;auto&quot;?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&amp;&amp;this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,i){var r=this.propsSize&amp;&amp;this.propsSize[i];return this.state[i]===&quot;auto&quot;&amp;&amp;this.state.original[i]===t&amp;&amp;(typeof r&gt;&quot;u&quot;||r===&quot;auto&quot;)?&quot;auto&quot;:t},e.prototype.calculateNewMaxFromBoundary=function(t,i){var r=this.props.boundsByDirection,s=this.state.direction,o=r&amp;&amp;Bu(&quot;left&quot;,s),l=r&amp;&amp;Bu(&quot;top&quot;,s),u,h;if(this.props.bounds===&quot;parent&quot;){var f=this.parentNode;f&amp;&amp;(u=o?this.resizableRight-this.parentLeft:f.offsetWidth+(this.parentLeft-this.resizableLeft),h=l?this.resizableBottom-this.parentTop:f.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds===&quot;window&quot;?this.window&amp;&amp;(u=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,h=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&amp;&amp;(u=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),h=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return u&amp;&amp;Number.isFinite(u)&amp;&amp;(t=t&amp;&amp;t&lt;u?t:u),h&amp;&amp;Number.isFinite(h)&amp;&amp;(i=i&amp;&amp;i&lt;h?i:h),{maxWidth:t,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(t,i){var r=this.props.scale||1,s=V$(this.props.resizeRatio||1),o=s[0],l=s[1],u=this.state,h=u.direction,f=u.original,p=this.props,m=p.lockAspectRatio,g=p.lockAspectRatioExtraHeight,v=p.lockAspectRatioExtraWidth,x=f.width,b=f.height,_=g||0,T=v||0;return Bu(&quot;right&quot;,h)&amp;&amp;(x=f.width+(t-f.x)*o/r,m&amp;&amp;(b=(x-T)/this.ratio+_)),Bu(&quot;left&quot;,h)&amp;&amp;(x=f.width-(t-f.x)*o/r,m&amp;&amp;(b=(x-T)/this.ratio+_)),Bu(&quot;bottom&quot;,h)&amp;&amp;(b=f.height+(i-f.y)*l/r,m&amp;&amp;(x=(b-_)*this.ratio+T)),Bu(&quot;top&quot;,h)&amp;&amp;(b=f.height-(i-f.y)*l/r,m&amp;&amp;(x=(b-_)*this.ratio+T)),{newWidth:x,newHeight:b}},e.prototype.calculateNewSizeFromAspectRatio=function(t,i,r,s){var o=this.props,l=o.lockAspectRatio,u=o.lockAspectRatioExtraHeight,h=o.lockAspectRatioExtraWidth,f=typeof s.width&gt;&quot;u&quot;?10:s.width,p=typeof r.width&gt;&quot;u&quot;||r.width&lt;0?t:r.width,m=typeof s.height&gt;&quot;u&quot;?10:s.height,g=typeof r.height&gt;&quot;u&quot;||r.height&lt;0?i:r.height,v=u||0,x=h||0;if(l){var b=(m-v)*this.ratio+x,_=(g-v)*this.ratio+x,T=(f-x)/this.ratio+v,w=(p-x)/this.ratio+v,E=Math.max(f,b),R=Math.min(p,_),N=Math.max(m,T),A=Math.min(g,w);t=yg(t,E,R),i=yg(i,N,A)}else t=yg(t,f,p),i=yg(i,m,g);return{newWidth:t,newHeight:i}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds===&quot;parent&quot;){var i=this.parentNode;if(i){var r=i.getBoundingClientRect();this.parentLeft=r.left*t,this.parentTop=r.top*t}}if(this.props.bounds&amp;&amp;typeof this.props.bounds!=&quot;string&quot;){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*t,this.targetTop=s.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),l=o.left,u=o.top,h=o.right,f=o.bottom;this.resizableLeft=l*t,this.resizableRight=h*t,this.resizableTop=u*t,this.resizableBottom=f*t}},e.prototype.onResizeStart=function(t,i){if(!(!this.resizable||!this.window)){var r=0,s=0;if(t.nativeEvent&amp;&amp;B$(t.nativeEvent)?(r=t.nativeEvent.clientX,s=t.nativeEvent.clientY):t.nativeEvent&amp;&amp;_g(t.nativeEvent)&amp;&amp;(r=t.nativeEvent.touches[0].clientX,s=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&amp;&amp;this.resizable){var o=this.props.onResizeStart(t,i,this.resizable);if(o===!1)return}this.props.size&amp;&amp;(typeof this.props.size.height&lt;&quot;u&quot;&amp;&amp;this.props.size.height!==this.state.height&amp;&amp;this.setState({height:this.props.size.height}),typeof this.props.size.width&lt;&quot;u&quot;&amp;&amp;this.props.size.width!==this.state.width&amp;&amp;this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio==&quot;number&quot;?this.props.lockAspectRatio:this.size.width/this.size.height;var l,u=this.window.getComputedStyle(this.resizable);if(u.flexBasis!==&quot;auto&quot;){var h=this.parentNode;if(h){var f=this.window.getComputedStyle(h).flexDirection;this.flexDir=f.startsWith(&quot;row&quot;)?&quot;row&quot;:&quot;column&quot;,l=u.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var p={original:{x:r,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:go(go({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||&quot;auto&quot;}),direction:i,flexBasis:l};this.setState(p)}},e.prototype.onMouseMove=function(t){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&amp;&amp;_g(t))try{t.preventDefault(),t.stopPropagation()}catch{}var r=this.props,s=r.maxWidth,o=r.maxHeight,l=r.minWidth,u=r.minHeight,h=_g(t)?t.touches[0].clientX:t.clientX,f=_g(t)?t.touches[0].clientY:t.clientY,p=this.state,m=p.direction,g=p.original,v=p.width,x=p.height,b=this.getParentSize(),_=H$(b,this.window.innerWidth,this.window.innerHeight,s,o,l,u);s=_.maxWidth,o=_.maxHeight,l=_.minWidth,u=_.minHeight;var T=this.calculateNewSizeFromDirection(h,f),w=T.newHeight,E=T.newWidth,R=this.calculateNewMaxFromBoundary(s,o);this.props.snap&amp;&amp;this.props.snap.x&amp;&amp;(E=KO(E,this.props.snap.x,this.props.snapGap)),this.props.snap&amp;&amp;this.props.snap.y&amp;&amp;(w=KO(w,this.props.snap.y,this.props.snapGap));var N=this.calculateNewSizeFromAspectRatio(E,w,{width:R.maxWidth,height:R.maxHeight},{width:l,height:u});if(E=N.newWidth,w=N.newHeight,this.props.grid){var A=YO(E,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),D=YO(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0,O=C===0||Math.abs(A-E)&lt;=C?A:E,L=C===0||Math.abs(D-w)&lt;=C?D:w;E=O,w=L}var V={width:E-g.width,height:w-g.height};if(this.delta=V,v&amp;&amp;typeof v==&quot;string&quot;){if(v.endsWith(&quot;%&quot;)){var Z=E/b.width*100;E=&quot;&quot;.concat(Z,&quot;%&quot;)}else if(v.endsWith(&quot;vw&quot;)){var z=E/this.window.innerWidth*100;E=&quot;&quot;.concat(z,&quot;vw&quot;)}else if(v.endsWith(&quot;vh&quot;)){var K=E/this.window.innerHeight*100;E=&quot;&quot;.concat(K,&quot;vh&quot;)}}if(x&amp;&amp;typeof x==&quot;string&quot;){if(x.endsWith(&quot;%&quot;)){var Z=w/b.height*100;w=&quot;&quot;.concat(Z,&quot;%&quot;)}else if(x.endsWith(&quot;vw&quot;)){var z=w/this.window.innerWidth*100;w=&quot;&quot;.concat(z,&quot;vw&quot;)}else if(x.endsWith(&quot;vh&quot;)){var K=w/this.window.innerHeight*100;w=&quot;&quot;.concat(K,&quot;vh&quot;)}}var I={width:this.createSizeForCssProperty(E,&quot;width&quot;),height:this.createSizeForCssProperty(w,&quot;height&quot;)};this.flexDir===&quot;row&quot;?I.flexBasis=I.width:this.flexDir===&quot;column&quot;&amp;&amp;(I.flexBasis=I.height);var j=this.state.width!==I.width,G=this.state.height!==I.height,ee=this.state.flexBasis!==I.flexBasis,F=j||G||ee;F&amp;&amp;NP.flushSync(function(){i.setState(I)}),this.props.onResize&amp;&amp;F&amp;&amp;this.props.onResize(t,m,this.resizable,V)}},e.prototype.onMouseUp=function(t){var i,r,s=this.state,o=s.isResizing,l=s.direction;s.original,!(!o||!this.resizable)&amp;&amp;(this.props.onResizeStop&amp;&amp;this.props.onResizeStop(t,l,this.resizable,this.delta),this.props.size&amp;&amp;this.setState({width:(i=this.props.size.width)!==null&amp;&amp;i!==void 0?i:&quot;auto&quot;,height:(r=this.props.size.height)!==null&amp;&amp;r!==void 0?r:&quot;auto&quot;}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:go(go({},this.state.backgroundStyle),{cursor:&quot;auto&quot;})}))},e.prototype.updateSize=function(t){var i,r;this.setState({width:(i=t.width)!==null&amp;&amp;i!==void 0?i:&quot;auto&quot;,height:(r=t.height)!==null&amp;&amp;r!==void 0?r:&quot;auto&quot;})},e.prototype.renderResizer=function(){var t=this,i=this.props,r=i.enable,s=i.handleStyles,o=i.handleClasses,l=i.handleWrapperStyle,u=i.handleWrapperClass,h=i.handleComponent;if(!r)return null;var f=Object.keys(r).map(function(p){return r[p]!==!1?P.jsx(k$,{direction:p,onResizeStart:t.onResizeStart,replaceStyles:s&amp;&amp;s[p],className:o&amp;&amp;o[p],children:h&amp;&amp;h[p]?h[p]:null},p):null});return P.jsx(&quot;div&quot;,{className:u,style:l,children:f})},e.prototype.render=function(){var t=this,i=Object.keys(this.props).reduce(function(o,l){return G$.indexOf(l)!==-1||(o[l]=t.props[l]),o},{}),r=go(go(go({position:&quot;relative&quot;,userSelect:this.state.isResizing?&quot;none&quot;:&quot;auto&quot;},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:&quot;border-box&quot;,flexShrink:0});this.state.flexBasis&amp;&amp;(r.flexBasis=this.state.flexBasis);var s=this.props.as||&quot;div&quot;;return P.jsxs(s,go({style:r,className:this.props.className},i,{ref:function(o){o&amp;&amp;(t.resizable=o)},children:[this.state.isResizing&amp;&amp;P.jsx(&quot;div&quot;,{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:&quot;div&quot;,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(re.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var HS=function(n,e){return HS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&amp;&amp;(t[r]=i[r])},HS(n,e)};function W$(n,e){HS(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ui=function(){return Ui=Object.assign||function(e){for(var t,i=1,r=arguments.length;i&lt;r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&amp;&amp;(e[s]=t[s])}return e},Ui.apply(this,arguments)};function X$(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;e.indexOf(i)&lt;0&amp;&amp;(t[i]=n[i]);if(n!=null&amp;&amp;typeof Object.getOwnPropertySymbols==&quot;function&quot;)for(var r=0,i=Object.getOwnPropertySymbols(n);r&lt;i.length;r++)e.indexOf(i[r])&lt;0&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i[r])&amp;&amp;(t[i[r]]=n[i[r]]);return t}var q$={width:&quot;auto&quot;,height:&quot;auto&quot;,display:&quot;inline-block&quot;,position:&quot;absolute&quot;,top:0,left:0},Y$=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},i1=function(n){W$(e,n);function e(t){var i=n.call(this,t)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,i=t.left,r=t.top,s=this.getDraggablePosition(),o=s.x,l=s.y;this.draggable.setState({x:o-i,y:l-r}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,i=t.x,r=t.y;return{x:i,y:r}},e.prototype.getParent=function(){return this.resizable&amp;&amp;this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth&gt;&quot;u&quot;?Number.MAX_SAFE_INTEGER:this.props.maxWidth,i=typeof this.props.maxHeight&gt;&quot;u&quot;?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:i}},e.prototype.getSelfElement=function(){return this.resizable&amp;&amp;this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var i=this.props.scale;switch(this.props.bounds){case&quot;window&quot;:return window.innerHeight/i;case&quot;body&quot;:return document.body.offsetHeight/i;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var i=this.props.scale;switch(this.props.bounds){case&quot;window&quot;:return window.innerWidth/i;case&quot;body&quot;:return document.body.offsetWidth/i;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,i){this.props.onDragStart&amp;&amp;this.props.onDragStart(t,i);var r=this.getDraggablePosition();if(this.originalPosition=r,!!this.props.bounds){var s=this.getParent(),o=this.props.scale,l;if(this.props.bounds===&quot;parent&quot;)l=s;else if(this.props.bounds===&quot;body&quot;){var u=s.getBoundingClientRect(),h=u.left,f=u.top,p=document.body.getBoundingClientRect(),m=-(h-s.offsetLeft*o-p.left)/o,g=-(f-s.offsetTop*o-p.top)/o,v=(document.body.offsetWidth-this.resizable.size.width*o)/o+m,x=(document.body.offsetHeight-this.resizable.size.height*o)/o+g;return this.setState({bounds:{top:g,right:v,bottom:x,left:m}})}else if(this.props.bounds===&quot;window&quot;){if(!this.resizable)return;var b=s.getBoundingClientRect(),_=b.left,T=b.top,w=-(_-s.offsetLeft*o)/o,E=-(T-s.offsetTop*o)/o,v=(window.innerWidth-this.resizable.size.width*o)/o+w,x=(window.innerHeight-this.resizable.size.height*o)/o+E;return this.setState({bounds:{top:E,right:v,bottom:x,left:w}})}else typeof this.props.bounds==&quot;string&quot;?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&amp;&amp;(l=this.props.bounds);if(!(!(l instanceof HTMLElement)||!(s instanceof HTMLElement))){var R=l.getBoundingClientRect(),N=R.left,A=R.top,D=s.getBoundingClientRect(),C=D.left,O=D.top,L=(N-C)/o,V=A-O;if(this.resizable){this.updateOffsetFromParent();var Z=this.offsetFromParent;this.setState({bounds:{top:V-Z.top,right:L+(l.offsetWidth-this.resizable.size.width)-Z.left/o,bottom:V+(l.offsetHeight-this.resizable.size.height)-Z.top,left:L-Z.left/o}})}}}},e.prototype.onDrag=function(t,i){if(this.props.onDrag){var r=this.offsetFromParent,s=r.left,o=r.top;if(!this.props.dragAxis||this.props.dragAxis===&quot;both&quot;)return this.props.onDrag(t,Ui(Ui({},i),{x:i.x+s,y:i.y+o}));if(this.props.dragAxis===&quot;x&quot;)return this.props.onDrag(t,Ui(Ui({},i),{x:i.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis===&quot;y&quot;)return this.props.onDrag(t,Ui(Ui({},i),{x:this.originalPosition.x+s,y:i.y+o,deltaX:0}))}},e.prototype.onDragStop=function(t,i){if(this.props.onDragStop){var r=this.offsetFromParent,s=r.left,o=r.top;if(!this.props.dragAxis||this.props.dragAxis===&quot;both&quot;)return this.props.onDragStop(t,Ui(Ui({},i),{x:i.x+s,y:i.y+o}));if(this.props.dragAxis===&quot;x&quot;)return this.props.onDragStop(t,Ui(Ui({},i),{x:i.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis===&quot;y&quot;)return this.props.onDragStop(t,Ui(Ui({},i),{x:this.originalPosition.x+s,y:i.y+o,deltaX:0}))}},e.prototype.onResizeStart=function(t,i,r){t.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,o=this.offsetFromParent,l=this.getDraggablePosition();if(this.resizingPosition={x:l.x+o.left,y:l.y+o.top},this.originalPosition=l,this.props.bounds){var u=this.getParent(),h=void 0;this.props.bounds===&quot;parent&quot;?h=u:this.props.bounds===&quot;body&quot;?h=document.body:this.props.bounds===&quot;window&quot;?h=window:typeof this.props.bounds==&quot;string&quot;?h=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&amp;&amp;(h=this.props.bounds);var f=this.getSelfElement();if(f instanceof Element&amp;&amp;(h instanceof HTMLElement||h===window)&amp;&amp;u instanceof HTMLElement){var p=this.getMaxSizesFromProps(),m=p.maxWidth,g=p.maxHeight,v=this.getParentSize();if(m&amp;&amp;typeof m==&quot;string&quot;)if(m.endsWith(&quot;%&quot;)){var x=Number(m.replace(&quot;%&quot;,&quot;&quot;))/100;m=v.width*x}else m.endsWith(&quot;px&quot;)&amp;&amp;(m=Number(m.replace(&quot;px&quot;,&quot;&quot;)));if(g&amp;&amp;typeof g==&quot;string&quot;)if(g.endsWith(&quot;%&quot;)){var x=Number(g.replace(&quot;%&quot;,&quot;&quot;))/100;g=v.height*x}else g.endsWith(&quot;px&quot;)&amp;&amp;(g=Number(g.replace(&quot;px&quot;,&quot;&quot;)));var b=f.getBoundingClientRect(),_=b.left,T=b.top,w=this.props.bounds===&quot;window&quot;?{left:0,top:0}:h.getBoundingClientRect(),E=w.left,R=w.top,N=this.getOffsetWidth(h),A=this.getOffsetHeight(h),D=i.toLowerCase().endsWith(&quot;left&quot;),C=i.toLowerCase().endsWith(&quot;right&quot;),O=i.startsWith(&quot;top&quot;),L=i.startsWith(&quot;bottom&quot;);if((D||O)&amp;&amp;this.resizable){var V=(_-E)/s+this.resizable.size.width;this.setState({maxWidth:V&gt;Number(m)?m:V})}if(C||this.props.lockAspectRatio&amp;&amp;!D&amp;&amp;!O){var V=N+(E-_)/s;this.setState({maxWidth:V&gt;Number(m)?m:V})}if((O||D)&amp;&amp;this.resizable){var V=(T-R)/s+this.resizable.size.height;this.setState({maxHeight:V&gt;Number(g)?g:V})}if(L||this.props.lockAspectRatio&amp;&amp;!O&amp;&amp;!D){var V=A+(R-T)/s;this.setState({maxHeight:V&gt;Number(g)?g:V})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&amp;&amp;this.props.onResizeStart(t,i,r)},e.prototype.onResize=function(t,i,r,s){var o=this,l={x:this.originalPosition.x,y:this.originalPosition.y},u=-s.width,h=-s.height,f=[&quot;top&quot;,&quot;left&quot;,&quot;topLeft&quot;,&quot;bottomLeft&quot;,&quot;topRight&quot;];f.includes(i)&amp;&amp;(i===&quot;bottomLeft&quot;?l.x+=u:(i===&quot;topRight&quot;||(l.x+=u),l.y+=h));var p=this.draggable.state;(l.x!==p.x||l.y!==p.y)&amp;&amp;NP.flushSync(function(){o.draggable.setState(l)}),this.updateOffsetFromParent();var m=this.offsetFromParent,g=this.getDraggablePosition().x+m.left,v=this.getDraggablePosition().y+m.top;this.resizingPosition={x:g,y:v},this.props.onResize&amp;&amp;this.props.onResize(t,i,r,s,{x:g,y:v})},e.prototype.onResizeStop=function(t,i,r,s){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),l=o.maxWidth,u=o.maxHeight;this.setState({maxWidth:l,maxHeight:u}),this.props.onResizeStop&amp;&amp;this.props.onResizeStop(t,i,r,s,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&amp;&amp;this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,i=this.getParent(),r=this.getSelfElement();if(!i||r===null)return{top:0,left:0};var s=i.getBoundingClientRect(),o=s.left,l=s.top,u=r.getBoundingClientRect(),h=this.getDraggablePosition(),f=i.scrollLeft,p=i.scrollTop;this.offsetFromParent={left:u.left-o+f-h.x*t,top:u.top-l+p-h.y*t}},e.prototype.render=function(){var t=this,i=this.props,r=i.disableDragging,s=i.style,o=i.dragHandleClassName,l=i.position,u=i.onMouseDown,h=i.onMouseUp,f=i.dragAxis,p=i.dragGrid,m=i.bounds,g=i.enableUserSelectHack,v=i.cancel,x=i.children;i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop;var b=i.resizeHandleStyles,_=i.resizeHandleClasses,T=i.resizeHandleComponent,w=i.enableResizing,E=i.resizeGrid,R=i.resizeHandleWrapperClass,N=i.resizeHandleWrapperStyle,A=i.scale,D=i.allowAnyClick,C=i.dragPositionOffset,O=X$(i,[&quot;disableDragging&quot;,&quot;style&quot;,&quot;dragHandleClassName&quot;,&quot;position&quot;,&quot;onMouseDown&quot;,&quot;onMouseUp&quot;,&quot;dragAxis&quot;,&quot;dragGrid&quot;,&quot;bounds&quot;,&quot;enableUserSelectHack&quot;,&quot;cancel&quot;,&quot;children&quot;,&quot;onResizeStart&quot;,&quot;onResize&quot;,&quot;onResizeStop&quot;,&quot;onDragStart&quot;,&quot;onDrag&quot;,&quot;onDragStop&quot;,&quot;resizeHandleStyles&quot;,&quot;resizeHandleClasses&quot;,&quot;resizeHandleComponent&quot;,&quot;enableResizing&quot;,&quot;resizeGrid&quot;,&quot;resizeHandleWrapperClass&quot;,&quot;resizeHandleWrapperStyle&quot;,&quot;scale&quot;,&quot;allowAnyClick&quot;,&quot;dragPositionOffset&quot;]),L=this.props.default?Ui({},this.props.default):void 0;delete O.default;var V=r||o?{cursor:&quot;auto&quot;}:{cursor:&quot;move&quot;},Z=Ui(Ui(Ui({},q$),V),s),z=this.offsetFromParent,K=z.left,I=z.top,j;l&amp;&amp;(j={x:l.x-K,y:l.y-I});var G=this.state.resizing?void 0:j,ee=this.state.resizing?&quot;both&quot;:f;return re.createElement(L$,{ref:function(F){F&amp;&amp;(t.draggable=F)},handle:o?&quot;.&quot;.concat(o):void 0,defaultPosition:L,onMouseDown:u,onMouseUp:h,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:ee,disabled:r,grid:p,bounds:m?this.state.bounds:void 0,position:G,enableUserSelectHack:g,cancel:v,scale:A,allowAnyClick:D,nodeRef:this.resizableElement,positionOffset:C},re.createElement(j$,Ui({},O,{ref:function(F){F&amp;&amp;(t.resizable=F,t.resizableElement.current=F.resizable)},defaultSize:L,size:this.props.size,enable:typeof w==&quot;boolean&quot;?Y$(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:Z,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:E,handleWrapperClass:R,handleWrapperStyle:N,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:b,handleClasses:_,handleComponent:T,scale:this.props.scale}),x))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(re.PureComponent);const K$=({data:n})=&gt;{const[e,t]=re.useState(!0),i=()=&gt;{t(!e)};return e?P.jsxs(&quot;div&quot;,{className:&quot;json-viewer bg-white p-2 border rounded&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex justify-between items-center mb-2&quot;,children:[P.jsx(&quot;h3&quot;,{className:&quot;font-bold&quot;,children:&quot;JSON Data&quot;}),P.jsx(&quot;button&quot;,{className:&quot;text-blue-500 underline&quot;,onClick:i,children:&quot;Undock&quot;})]}),P.jsx(IO,{data:n,shouldExpandNode:NO})]}):P.jsx(i1,{default:{x:100,y:100,width:400,height:300},minWidth:200,minHeight:100,bounds:&quot;window&quot;,className:&quot;bg-white border rounded shadow-lg&quot;,children:P.jsxs(&quot;div&quot;,{className:&quot;json-viewer p-2 h-full&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex justify-between items-center mb-2&quot;,children:[P.jsx(&quot;h3&quot;,{className:&quot;font-bold&quot;,children:&quot;JSON Data&quot;}),P.jsx(&quot;button&quot;,{className:&quot;text-blue-500 underline&quot;,onClick:i,children:&quot;Dock&quot;})]}),P.jsx(&quot;div&quot;,{className:&quot;overflow-auto h-full&quot;,children:P.jsx(IO,{data:n,shouldExpandNode:NO})})]})})},$$=({clickCoordinate:n,prec:e})=&gt;{const{zIsUp:t}=eo();if(!n)return P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:&quot; &quot;});const i=n.x.toFixed(e),r=n.y.toFixed(e),s=n.z.toFixed(e),o=t?`(${i}, ${r}, ${s})`:`(${i}, ${s}, ${r})`;return P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48 flex items-center pointer-events-auto&quot;,children:P.jsx(&quot;span&quot;,{children:o})})},Z$=()=&gt;{const{name:n,faceIndex:e,clickCoordinate:t,jsonData:i,isJsonViewVisible:r,setIsJsonViewVisible:s}=yl(),o=()=&gt;{s(!r)};return P.jsxs(&quot;div&quot;,{className:&quot;bg-gray-400 bg-opacity-50 rounded p-2 min-w-80&quot;,children:[P.jsx(&quot;h2&quot;,{className:&quot;font-bold&quot;,children:&quot;Selected Object Info&quot;}),P.jsxs(&quot;div&quot;,{className:&quot;table-row pointer-events-auto&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Name:&quot;}),P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:n})]}),P.jsxs(&quot;div&quot;,{className:&quot;table-row hidden&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Face Index:&quot;}),P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:e})]}),P.jsxs(&quot;div&quot;,{className:&quot;table-row&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;table-cell w-24 min-w-24&quot;,children:&quot;Clicked @:&quot;}),P.jsx($$,{clickCoordinate:t,prec:3})]}),i&amp;&amp;P.jsxs(&quot;div&quot;,{className:&quot;table-row&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;JSON Data:&quot;}),P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:P.jsx(&quot;button&quot;,{className:&quot;bg-blue-500 text-white px-2 py-1 rounded&quot;,onClick:o,children:r?&quot;Hide JSON&quot;:&quot;Show JSON&quot;})})]}),r&amp;&amp;i&amp;&amp;P.jsx(&quot;div&quot;,{className:&quot;mt-2&quot;,children:P.jsx(K$,{data:i})})]})},J$=n=&gt;P.jsx(&quot;svg&quot;,{fill:&quot;none&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:1.5,stroke:&quot;currentColor&quot;,className:&quot;w-6 h-6&quot;,children:P.jsx(&quot;path&quot;,{strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,d:&quot;M21 7.5V18M15 7.5V18M3 16.811V8.69c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811Z&quot;})}),Q$=n=&gt;P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,fill:&quot;none&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:1.5,stroke:&quot;currentColor&quot;,className:&quot;w-6 h-6&quot;,children:P.jsx(&quot;path&quot;,{strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,d:&quot;M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z&quot;})});function eZ(){const n=Fw.current,[e,t]=re.useState(0),[i,r]=re.useState(0);if(re.useEffect(()=&gt;{n&amp;&amp;(t(0),r(0))},[n]),!n)return P.jsxs(&quot;div&quot;,{className:&quot;max-w-md mx-auto mt-6 p-4 border rounded-lg shadow-sm&quot;,children:[P.jsx(&quot;h2&quot;,{className:&quot;text-lg font-semibold text-gray-800&quot;,children:&quot;No Simulation Loaded&quot;}),P.jsx(&quot;p&quot;,{className:&quot;text-sm text-gray-500 mt-2&quot;,children:&quot;Load a GLB with the ADA simulation metadata extension to view details here.&quot;})]});const s=n.steps,l=s[e].fields,u=l[i];return P.jsxs(&quot;div&quot;,{className:&quot;p-6 border rounded-lg shadow-sm bg-white bg-opacity-50 max-h-96 overflow-auto pointer-events-auto&quot;,children:[P.jsx(&quot;h2&quot;,{className:&quot;text-xl font-semibold text-gray-800&quot;,children:n.name}),P.jsx(&quot;p&quot;,{className:&quot;text-sm text-gray-500 mt-1&quot;,children:new Date(n.date).toLocaleString()}),P.jsxs(&quot;div&quot;,{className:&quot;mt-4 text-sm text-gray-700&quot;,children:[P.jsxs(&quot;div&quot;,{children:[P.jsx(&quot;strong&quot;,{children:&quot;Software:&quot;}),&quot; &quot;,n.fea_software]}),P.jsxs(&quot;div&quot;,{className:&quot;mt-1&quot;,children:[P.jsx(&quot;strong&quot;,{children:&quot;Version:&quot;}),&quot; &quot;,n.fea_software_version]})]}),P.jsxs(&quot;div&quot;,{className:&quot;mt-6&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row gap-4 items-center&quot;,children:[P.jsxs(&quot;label&quot;,{className:&quot;flex items-center text-sm text-gray-700&quot;,children:[P.jsx(&quot;span&quot;,{children:&quot;Select Step:&quot;}),P.jsx(&quot;select&quot;,{className:&quot;ml-2 p-1 border rounded&quot;,value:e,onChange:h=&gt;{const f=parseInt(h.target.value,10);t(f),r(0)},children:s.map((h,f)=&gt;P.jsxs(&quot;option&quot;,{value:f,children:[&quot;Step &quot;,f+1,&quot;: &quot;,h.analysis_type]},f))})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center text-sm text-gray-700&quot;,children:[P.jsx(&quot;span&quot;,{children:&quot;Select Field:&quot;}),P.jsx(&quot;select&quot;,{className:&quot;ml-2 p-1 border rounded&quot;,value:i,onChange:h=&gt;r(parseInt(h.target.value,10)),children:l.map((h,f)=&gt;P.jsx(&quot;option&quot;,{value:f,children:h.name},f))})]})]}),P.jsxs(&quot;div&quot;,{className:&quot;mt-4 p-4 border rounded bg-white&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;text-sm text-gray-800&quot;,children:[P.jsx(&quot;strong&quot;,{children:&quot;Name:&quot;}),&quot; &quot;,u.name]}),P.jsxs(&quot;div&quot;,{className:&quot;text-sm text-gray-800 mt-1&quot;,children:[P.jsx(&quot;strong&quot;,{children:&quot;Type:&quot;}),&quot; &quot;,u.type]}),P.jsxs(&quot;div&quot;,{className:&quot;text-sm text-gray-800 mt-1&quot;,children:[P.jsx(&quot;strong&quot;,{children:&quot;BufferView:&quot;}),&quot; &quot;,u.data.bufferView,u.data.byteOffset!==void 0&amp;&amp;P.jsxs(&quot;span&quot;,{children:[&quot; @ &quot;,u.data.byteOffset,&quot; bytes&quot;]})]})]})]})]})}const tZ=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;#ffffff&quot;,...n,children:[P.jsx(&quot;rect&quot;,{x:&quot;3&quot;,y:&quot;4&quot;,width:&quot;18&quot;,height:&quot;16&quot;,rx:&quot;1&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;line&quot;,{x1:&quot;9&quot;,y1:&quot;4&quot;,x2:&quot;9&quot;,y2:&quot;20&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;line&quot;,{x1:&quot;15&quot;,y1:&quot;4&quot;,x2:&quot;15&quot;,y2:&quot;20&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;line&quot;,{x1:&quot;3&quot;,y1:&quot;10&quot;,x2:&quot;21&quot;,y2:&quot;10&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;line&quot;,{x1:&quot;3&quot;,y1:&quot;16&quot;,x2:&quot;21&quot;,y2:&quot;16&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;polyline&quot;,{points:&quot;10.5,17 11.5,15 12.5,16 13.5,14&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;})]}),nZ=()=&gt;{var f,p,m;const{selectedAnimation:n,currentKey:e,setCurrentKey:t}=gl(),i=parseFloat(e.toFixed(2)),[r,s]=re.useState(!1),o=g=&gt;{var x;const v=g.target.value;(x=bi.current)==null||x.setCurrentAnimation(v)},l=()=&gt;{bi.current&amp;&amp;bi.current.togglePlayPause()},u=()=&gt;{bi.current&amp;&amp;bi.current.stopAnimation()},h=g=&gt;{bi.current&amp;&amp;bi.current.seek(g)};return re.useEffect(()=&gt;{bi.current&amp;&amp;t(bi.current.getCurrentTime())},[n]),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-col gap-2&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center gap-x-2 min-w-0 pointer-events-auto&quot;,children:[P.jsxs(&quot;select&quot;,{className:&quot;text-black font-bold py-2 px-4 rounded w-60&quot;,value:n,onChange:o,children:[P.jsx(&quot;option&quot;,{title:&quot;No Animation&quot;,value:&quot;No Animation&quot;,children:&quot;No Animation&quot;},&quot;No Animation&quot;),(f=bi.current)==null?void 0:f.getAnimationNames().map(g=&gt;P.jsx(&quot;option&quot;,{value:g,children:g},g))]}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,onClick:l,children:P.jsx(J$,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,onClick:u,children:P.jsx(Q$,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,onClick:()=&gt;s(g=&gt;!g),children:P.jsx(tZ,{})}),P.jsxs(&quot;div&quot;,{className:&quot;flex items-center gap-2 min-w-[100px] max-w-sm w-full&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;range&quot;,min:&quot;0&quot;,max:((p=bi.current)==null?void 0:p.getDuration())||0,value:i,step:((m=bi.current)==null?void 0:m.getStep())||0,onChange:g=&gt;{const v=parseFloat(g.target.value);t(v),h(v)},className:&quot;w-full h-2 rounded-lg appearance-none cursor-pointer accent-blue-700 bg-blue-700/30&quot;}),P.jsx(&quot;div&quot;,{className:&quot;text-white text-sm font-mono w-12 text-center&quot;,children:i})]})]}),r&amp;&amp;P.jsx(&quot;div&quot;,{className:&quot;flex-1 overflow-hidden&quot;,children:P.jsx(eZ,{})})]})};async function EL(){console.log(&quot;Querying server for mesh info&quot;);let n=new Mo(1024);at.startMessage(n),at.addInstanceId(n,Ei.instance_id),at.addCommandType(n,Bn.LIST_PROCEDURES),at.addTargetGroup(n,si.SERVER),at.addClientType(n,si.WEB),n.finish(at.endMessage(n)),await Ei.sendMessage(n.asUint8Array())}const r1=n=&gt;P.jsx(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 15 15&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:P.jsx(&quot;path&quot;,{fillRule:&quot;evenodd&quot;,clipRule:&quot;evenodd&quot;,d:&quot;M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z&quot;,fill:&quot;#ffffff&quot;})});async function iZ(){console.log(&quot;Querying server for list of files&quot;);let n=new Mo(1024);at.startMessage(n),at.addInstanceId(n,Ei.instance_id),at.addCommandType(n,Bn.LIST_FILE_OBJECTS),at.addTargetGroup(n,si.SERVER),at.addClientType(n,si.WEB),n.finish(at.endMessage(n)),await Ei.sendMessage(n.asUint8Array())}const rZ=()=&gt;(e1(),P.jsxs(&quot;div&quot;,{className:&quot;bg-gray-400 bg-opacity-50 rounded p-2 mt-2 ml-2 mr-2 min-w-80&quot;,children:[P.jsx(&quot;h2&quot;,{className:&quot;font-bold&quot;,children:&quot;Server Info&quot;}),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;pr-1 &quot;,children:&quot;Files:&quot;}),P.jsxs(&quot;select&quot;,{id:&quot;listbox&quot;,name:&quot;listbox&quot;,className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold p-2 rounded&quot;,children:[P.jsx(&quot;option&quot;,{value:&quot;item1&quot;,children:&quot;Item 1&quot;}),P.jsx(&quot;option&quot;,{value:&quot;item2&quot;,children:&quot;Item 2&quot;}),P.jsx(&quot;option&quot;,{value:&quot;item3&quot;,children:&quot;Item 3&quot;}),P.jsx(&quot;option&quot;,{value:&quot;item4&quot;,children:&quot;Item 4&quot;})]}),P.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-2 ml-2 rounded&quot;,onClick:()=&gt;iZ(),children:P.jsx(r1,{})})]})]})),sZ=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,strokeWidth:&quot;1.5&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;currentColor&quot;,children:[P.jsx(&quot;rect&quot;,{width:&quot;7&quot;,height:&quot;5&quot;,rx:&quot;0.6&quot;,transform:&quot;matrix(0 -1 -1 0 22 21)&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;rect&quot;,{width:&quot;7&quot;,height:&quot;5&quot;,rx:&quot;0.6&quot;,transform:&quot;matrix(0 -1 -1 0 7 15.5)&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;rect&quot;,{width:&quot;7&quot;,height:&quot;5&quot;,rx:&quot;0.6&quot;,transform:&quot;matrix(0 -1 -1 0 22 10)&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M17 17.5H13.5C12.3954 17.5 11.5 16.6046 11.5 15.5V8.5C11.5 7.39543 12.3954 6.5 13.5 6.5H17&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M11.5 12H7&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;})]}),oZ=n=&gt;P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,fill:&quot;none&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:1.5,stroke:&quot;currentColor&quot;,className:&quot;w-6 h-6&quot;,children:P.jsx(&quot;path&quot;,{strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,d:&quot;m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z&quot;})}),aZ=n=&gt;P.jsxs(&quot;svg&quot;,{fill:&quot;currentColor&quot;,width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 36 36&quot;,version:&quot;1.1&quot;,preserveAspectRatio:&quot;xMidYMid meet&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[P.jsx(&quot;title&quot;,{children:&quot;tree-view-line&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M15,32H11a1,1,0,0,1-1-1V27a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1v4A1,1,0,0,1,15,32Zm-3-2h2V28H12Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-1&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M15,16H11a1,1,0,0,0-1,1v1.2H5.8V12H7a1,1,0,0,0,1-1V7A1,1,0,0,0,7,6H3A1,1,0,0,0,2,7v4a1,1,0,0,0,1,1H4.2V29.8h6.36a.8.8,0,0,0,0-1.6H5.8V19.8H10V21a1,1,0,0,0,1,1h4a1,1,0,0,0,1-1V17A1,1,0,0,0,15,16ZM4,8H6v2H4ZM14,20H12V18h2Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-2&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M34,9a1,1,0,0,0-1-1H10v2H33A1,1,0,0,0,34,9Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-3&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M33,18H18v2H33a1,1,0,0,0,0-2Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-4&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M33,28H18v2H33a1,1,0,0,0,0-2Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-5&quot;}),P.jsx(&quot;rect&quot;,{x:&quot;0&quot;,y:&quot;0&quot;,width:&quot;36&quot;,height:&quot;36&quot;,fillOpacity:&quot;0&quot;})]}),lZ=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,strokeWidth:&quot;1.5&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;currentColor&quot;,children:[P.jsx(&quot;path&quot;,{d:&quot;M3 19H12M21 19H12M12 19V13M12 13H18V5H6V13H12Z&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M9 9.01L9.01 8.99889&quot;,stroke:&quot;#000000&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M12 9.01L12.01 8.99889&quot;,stroke:&quot;#000000&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;})]}),cZ=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;#ffffff&quot;,...n,children:[P.jsx(&quot;path&quot;,{d:&quot;M6 3V21&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;circle&quot;,{cx:&quot;6&quot;,cy:&quot;9&quot;,r:&quot;2&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M18 3V21&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;circle&quot;,{cx:&quot;18&quot;,cy:&quot;15&quot;,r:&quot;2&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;})]}),uZ=()=&gt;{const{show_info_box:n}=yl(),{isNodeEditorVisible:e,setIsNodeEditorVisible:t,use_node_editor_only:i}=Ks(),{isOptionsVisible:r,setIsOptionsVisible:s,enableNodeEditor:o}=Bc(),{isTreeCollapsed:l,setIsTreeCollapsed:u}=Oc(),{showServerInfoBox:h,setShowServerInfoBox:f}=e1(),{hasAnimation:p,isControlsVisible:m,setIsControlsVisible:g}=gl();return P.jsx(&quot;div&quot;,{className:&quot;relative w-full h-full&quot;,children:P.jsxs(&quot;div&quot;,{className:&quot;absolute left-0 top-0 z-10 py-2 gap-2 flex flex-col pointer-events-none&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center gap-2 px-2 max-w-full pointer-events-auto&quot;,children:[i&amp;&amp;P.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-1 rounded&quot;,onClick:()=&gt;EL(),children:P.jsx(r1,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:i,onClick:()=&gt;s(!r),children:&quot;☰&quot;}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:i,onClick:()=&gt;u(!l),children:P.jsx(aZ,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:i||!o,onClick:()=&gt;t(!e),children:P.jsx(sZ,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:!0,onClick:()=&gt;f(!h),children:P.jsx(lZ,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:i,onClick:yl.getState().toggle,children:P.jsx(oZ,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:!p,onClick:()=&gt;g(!m),children:P.jsx(cZ,{})})]}),P.jsxs(&quot;div&quot;,{className:&quot;px-2 gap-2 flex flex-col&quot;,children:[h&amp;&amp;P.jsx(rZ,{}),n&amp;&amp;P.jsx(Z$,{}),m&amp;&amp;P.jsx(nZ,{})]})]})})};async function hZ(){let n=gc.current;if(!n){console.error(&quot;Renderer not found&quot;);return}let e=Zs.current;if(!e){console.error(&quot;Scene not found&quot;);return}let t=mc.current;if(!t){console.error(&quot;Camera not found&quot;);return}await fZ(n,e,t,!1)}async function fZ(n,e,t,i=!1){const o=new Js(1920,1080,{type:es}),l=n.getRenderTarget(),u=new Oe;n.getSize(u),t instanceof Yn&amp;&amp;(t.aspect=1920/1080,t.updateProjectionMatrix()),gS.current&amp;&amp;gS.current(),n.setSize(1920,1080),n.setRenderTarget(o),n.render(e,t);const h=new Uint8Array(1920*1080*4);n.readRenderTargetPixels(o,0,0,1920,1080,h);const f=document.createElement(&quot;canvas&quot;);f.width=1920,f.height=1080;const p=f.getContext(&quot;2d&quot;);if(!p)throw new Error(&quot;Failed to get 2D context&quot;);const m=p.createImageData(1920,1080);for(let g=0;g&lt;1080;g++)for(let v=0;v&lt;1920;v++){const x=((1080-g-1)*1920+v)*4,b=(g*1920+v)*4,_=h[x],T=h[x+1],w=h[x+2],E=h[x+3];E&gt;0?(m.data[b]=Math.min(255,Math.round(_*255/E)),m.data[b+1]=Math.min(255,Math.round(T*255/E)),m.data[b+2]=Math.min(255,Math.round(w*255/E))):(m.data[b]=0,m.data[b+1]=0,m.data[b+2]=0),m.data[b+3]=E}p.putImageData(m,0,0),f.toBlob(g=&gt;{if(g){const v=document.createElement(&quot;a&quot;);v.href=URL.createObjectURL(g),v.download=&quot;screenshot.png&quot;,v.click()}}),n.setRenderTarget(l),n.setSize(u.x,u.y),t instanceof Yn&amp;&amp;(t.aspect=u.x/u.y,t.updateProjectionMatrix()),o.dispose()}class td extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ns(this.manager);o.setPath(this.path),o.setResponseType(&quot;arraybuffer&quot;),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(l))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){function t(h){const f=new DataView(h),p=32/8*3+32/8*3*3+16/8,m=f.getUint32(80,!0);if(80+32/8+m*p===f.byteLength)return!0;const v=[115,111,108,105,100];for(let x=0;x&lt;5;x++)if(i(v,f,x))return!1;return!0}function i(h,f,p){for(let m=0,g=h.length;m&lt;g;m++)if(h[m]!==f.getUint8(p+m))return!1;return!0}function r(h){const f=new DataView(h),p=f.getUint32(80,!0);let m,g,v,x=!1,b,_,T,w,E;for(let L=0;L&lt;70;L++)f.getUint32(L,!1)==1129270351&amp;&amp;f.getUint8(L+4)==82&amp;&amp;f.getUint8(L+5)==61&amp;&amp;(x=!0,b=new Float32Array(p*3*3),_=f.getUint8(L+6)/255,T=f.getUint8(L+7)/255,w=f.getUint8(L+8)/255,E=f.getUint8(L+9)/255);const R=84,N=12*4+2,A=new Lt,D=new Float32Array(p*3*3),C=new Float32Array(p*3*3),O=new $e;for(let L=0;L&lt;p;L++){const V=R+L*N,Z=f.getFloat32(V,!0),z=f.getFloat32(V+4,!0),K=f.getFloat32(V+8,!0);if(x){const I=f.getUint16(V+48,!0);(I&amp;32768)===0?(m=(I&amp;31)/31,g=(I&gt;&gt;5&amp;31)/31,v=(I&gt;&gt;10&amp;31)/31):(m=_,g=T,v=w)}for(let I=1;I&lt;=3;I++){const j=V+I*12,G=L*3*3+(I-1)*3;D[G]=f.getFloat32(j,!0),D[G+1]=f.getFloat32(j+4,!0),D[G+2]=f.getFloat32(j+8,!0),C[G]=Z,C[G+1]=z,C[G+2]=K,x&amp;&amp;(O.setRGB(m,g,v,Nn),b[G]=O.r,b[G+1]=O.g,b[G+2]=O.b)}}return A.setAttribute(&quot;position&quot;,new Jt(D,3)),A.setAttribute(&quot;normal&quot;,new Jt(C,3)),x&amp;&amp;(A.setAttribute(&quot;color&quot;,new Jt(b,3)),A.hasColors=!0,A.alpha=E),A}function s(h){const f=new Lt,p=/solid([\s\S]*?)endsolid/g,m=/facet([\s\S]*?)endfacet/g,g=/solid\s(.+)/;let v=0;const x=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,b=new RegExp(&quot;vertex&quot;+x+x+x,&quot;g&quot;),_=new RegExp(&quot;normal&quot;+x+x+x,&quot;g&quot;),T=[],w=[],E=[],R=new Y;let N,A=0,D=0,C=0;for(;(N=p.exec(h))!==null;){D=C;const O=N[0],L=(N=g.exec(O))!==null?N[1]:&quot;&quot;;for(E.push(L);(N=m.exec(O))!==null;){let z=0,K=0;const I=N[0];for(;(N=_.exec(I))!==null;)R.x=parseFloat(N[1]),R.y=parseFloat(N[2]),R.z=parseFloat(N[3]),K++;for(;(N=b.exec(I))!==null;)T.push(parseFloat(N[1]),parseFloat(N[2]),parseFloat(N[3])),w.push(R.x,R.y,R.z),z++,C++;K!==1&amp;&amp;console.error(&quot;THREE.STLLoader: Something isn&#x27;t right with the normal of face number &quot;+v),z!==3&amp;&amp;console.error(&quot;THREE.STLLoader: Something isn&#x27;t right with the vertices of face number &quot;+v),v++}const V=D,Z=C-D;f.userData.groupNames=E,f.addGroup(V,Z,A),A++}return f.setAttribute(&quot;position&quot;,new ct(T,3)),f.setAttribute(&quot;normal&quot;,new ct(w,3)),f}function o(h){return typeof h!=&quot;string&quot;?new TextDecoder().decode(h):h}function l(h){if(typeof h==&quot;string&quot;){const f=new Uint8Array(h.length);for(let p=0;p&lt;h.length;p++)f[p]=h.charCodeAt(p)&amp;255;return f.buffer||f}else return h}const u=l(e);return t(u)?r(u):s(o(e))}}class ZO extends xN{constructor(e){super(e)}parse(e){function t(I){switch(I.image_type){case m:case x:if(I.colormap_length&gt;256||I.colormap_size!==24||I.colormap_type!==1)throw new Error(&quot;THREE.TGALoader: Invalid type colormap data for indexed type.&quot;);break;case g:case v:case b:case _:if(I.colormap_type)throw new Error(&quot;THREE.TGALoader: Invalid type colormap data for colormap type.&quot;);break;case p:throw new Error(&quot;THREE.TGALoader: No data.&quot;);default:throw new Error(&quot;THREE.TGALoader: Invalid type &quot;+I.image_type)}if(I.width&lt;=0||I.height&lt;=0)throw new Error(&quot;THREE.TGALoader: Invalid image size.&quot;);if(I.pixel_size!==8&amp;&amp;I.pixel_size!==16&amp;&amp;I.pixel_size!==24&amp;&amp;I.pixel_size!==32)throw new Error(&quot;THREE.TGALoader: Invalid pixel size &quot;+I.pixel_size)}function i(I,j,G,ee,F){let ne,le;const ce=G.pixel_size&gt;&gt;3,ie=G.width*G.height*ce;if(j&amp;&amp;(le=F.subarray(ee,ee+=G.colormap_length*(G.colormap_size&gt;&gt;3))),I){ne=new Uint8Array(ie);let oe,ae,ue,ve=0;const He=new Uint8Array(ce);for(;ve&lt;ie;)if(oe=F[ee++],ae=(oe&amp;127)+1,oe&amp;128){for(ue=0;ue&lt;ce;++ue)He[ue]=F[ee++];for(ue=0;ue&lt;ae;++ue)ne.set(He,ve+ue*ce);ve+=ce*ae}else{for(ae*=ce,ue=0;ue&lt;ae;++ue)ne[ve+ue]=F[ee++];ve+=ae}}else ne=F.subarray(ee,ee+=j?G.width*G.height:ie);return{pixel_data:ne,palettes:le}}function r(I,j,G,ee,F,ne,le,ce,ie){const oe=ie;let ae,ue=0,ve,He;const Xe=O.width;for(He=j;He!==ee;He+=G)for(ve=F;ve!==le;ve+=ne,ue++)ae=ce[ue],I[(ve+Xe*He)*4+3]=255,I[(ve+Xe*He)*4+2]=oe[ae*3+0],I[(ve+Xe*He)*4+1]=oe[ae*3+1],I[(ve+Xe*He)*4+0]=oe[ae*3+2];return I}function s(I,j,G,ee,F,ne,le,ce){let ie,oe=0,ae,ue;const ve=O.width;for(ue=j;ue!==ee;ue+=G)for(ae=F;ae!==le;ae+=ne,oe+=2)ie=ce[oe+0]+(ce[oe+1]&lt;&lt;8),I[(ae+ve*ue)*4+0]=(ie&amp;31744)&gt;&gt;7,I[(ae+ve*ue)*4+1]=(ie&amp;992)&gt;&gt;2,I[(ae+ve*ue)*4+2]=(ie&amp;31)&lt;&lt;3,I[(ae+ve*ue)*4+3]=ie&amp;32768?0:255;return I}function o(I,j,G,ee,F,ne,le,ce){let ie=0,oe,ae;const ue=O.width;for(ae=j;ae!==ee;ae+=G)for(oe=F;oe!==le;oe+=ne,ie+=3)I[(oe+ue*ae)*4+3]=255,I[(oe+ue*ae)*4+2]=ce[ie+0],I[(oe+ue*ae)*4+1]=ce[ie+1],I[(oe+ue*ae)*4+0]=ce[ie+2];return I}function l(I,j,G,ee,F,ne,le,ce){let ie=0,oe,ae;const ue=O.width;for(ae=j;ae!==ee;ae+=G)for(oe=F;oe!==le;oe+=ne,ie+=4)I[(oe+ue*ae)*4+2]=ce[ie+0],I[(oe+ue*ae)*4+1]=ce[ie+1],I[(oe+ue*ae)*4+0]=ce[ie+2],I[(oe+ue*ae)*4+3]=ce[ie+3];return I}function u(I,j,G,ee,F,ne,le,ce){let ie,oe=0,ae,ue;const ve=O.width;for(ue=j;ue!==ee;ue+=G)for(ae=F;ae!==le;ae+=ne,oe++)ie=ce[oe],I[(ae+ve*ue)*4+0]=ie,I[(ae+ve*ue)*4+1]=ie,I[(ae+ve*ue)*4+2]=ie,I[(ae+ve*ue)*4+3]=255;return I}function h(I,j,G,ee,F,ne,le,ce){let ie=0,oe,ae;const ue=O.width;for(ae=j;ae!==ee;ae+=G)for(oe=F;oe!==le;oe+=ne,ie+=2)I[(oe+ue*ae)*4+0]=ce[ie+0],I[(oe+ue*ae)*4+1]=ce[ie+0],I[(oe+ue*ae)*4+2]=ce[ie+0],I[(oe+ue*ae)*4+3]=ce[ie+1];return I}function f(I,j,G,ee,F){let ne,le,ce,ie,oe,ae;switch((O.flags&amp;T)&gt;&gt;w){default:case N:ne=0,ce=1,oe=j,le=0,ie=1,ae=G;break;case E:ne=0,ce=1,oe=j,le=G-1,ie=-1,ae=-1;break;case A:ne=j-1,ce=-1,oe=-1,le=0,ie=1,ae=G;break;case R:ne=j-1,ce=-1,oe=-1,le=G-1,ie=-1,ae=-1;break}if(Z)switch(O.pixel_size){case 8:u(I,le,ie,ae,ne,ce,oe,ee);break;case 16:h(I,le,ie,ae,ne,ce,oe,ee);break;default:throw new Error(&quot;THREE.TGALoader: Format not supported.&quot;)}else switch(O.pixel_size){case 8:r(I,le,ie,ae,ne,ce,oe,ee,F);break;case 16:s(I,le,ie,ae,ne,ce,oe,ee);break;case 24:o(I,le,ie,ae,ne,ce,oe,ee);break;case 32:l(I,le,ie,ae,ne,ce,oe,ee);break;default:throw new Error(&quot;THREE.TGALoader: Format not supported.&quot;)}return I}const p=0,m=1,g=2,v=3,x=9,b=10,_=11,T=48,w=4,E=0,R=1,N=2,A=3;if(e.length&lt;19)throw new Error(&quot;THREE.TGALoader: Not enough data to contain header.&quot;);let D=0;const C=new Uint8Array(e),O={id_length:C[D++],colormap_type:C[D++],image_type:C[D++],colormap_index:C[D++]|C[D++]&lt;&lt;8,colormap_length:C[D++]|C[D++]&lt;&lt;8,colormap_size:C[D++],origin:[C[D++]|C[D++]&lt;&lt;8,C[D++]|C[D++]&lt;&lt;8],width:C[D++]|C[D++]&lt;&lt;8,height:C[D++]|C[D++]&lt;&lt;8,pixel_size:C[D++],flags:C[D++]};if(t(O),O.id_length+D&gt;e.length)throw new Error(&quot;THREE.TGALoader: No data.&quot;);D+=O.id_length;let L=!1,V=!1,Z=!1;switch(O.image_type){case x:L=!0,V=!0;break;case m:V=!0;break;case b:L=!0;break;case g:break;case _:L=!0,Z=!0;break;case v:Z=!0;break}const z=new Uint8Array(O.width*O.height*4),K=i(L,V,O,D,C);return f(z,O.width,O.height,K.pixel_data,K.palettes),{data:z,width:O.width,height:O.height,flipY:!0,generateMipmaps:!0,minFilter:Zr}}}class dZ extends Ji{load(e,t,i,r){const s=this,o=s.path===&quot;&quot;?vo.extractUrlBase(e):s.path,l=new ns(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(u){try{t(s.parse(u,o))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},i,r)}parse(e,t){function i(B,k){const $=[],X=B.childNodes;for(let J=0,Te=X.length;J&lt;Te;J++){const Re=X[J];Re.nodeName===k&amp;&amp;$.push(Re)}return $}function r(B){if(B.length===0)return[];const k=B.trim().split(/\s+/),$=new Array(k.length);for(let X=0,J=k.length;X&lt;J;X++)$[X]=k[X];return $}function s(B){if(B.length===0)return[];const k=B.trim().split(/\s+/),$=new Array(k.length);for(let X=0,J=k.length;X&lt;J;X++)$[X]=parseFloat(k[X]);return $}function o(B){if(B.length===0)return[];const k=B.trim().split(/\s+/),$=new Array(k.length);for(let X=0,J=k.length;X&lt;J;X++)$[X]=parseInt(k[X]);return $}function l(B){return B.substring(1)}function u(){return&quot;three_default_&quot;+Ds++}function h(B){return Object.keys(B).length===0}function f(B){return{unit:p(i(B,&quot;unit&quot;)[0]),upAxis:m(i(B,&quot;up_axis&quot;)[0])}}function p(B){return B!==void 0&amp;&amp;B.hasAttribute(&quot;meter&quot;)===!0?parseFloat(B.getAttribute(&quot;meter&quot;)):1}function m(B){return B!==void 0?B.textContent:&quot;Y_UP&quot;}function g(B,k,$,X){const J=i(B,k)[0];if(J!==void 0){const Te=i(J,$);for(let Re=0;Re&lt;Te.length;Re++)X(Te[Re])}}function v(B,k){for(const $ in B){const X=B[$];X.build=k(B[$])}}function x(B,k){return B.build!==void 0||(B.build=k(B)),B.build}function b(B){const k={sources:{},samplers:{},channels:{}};let $=!1;for(let X=0,J=B.childNodes.length;X&lt;J;X++){const Te=B.childNodes[X];if(Te.nodeType!==1)continue;let Re;switch(Te.nodeName){case&quot;source&quot;:Re=Te.getAttribute(&quot;id&quot;),k.sources[Re]=Ae(Te);break;case&quot;sampler&quot;:Re=Te.getAttribute(&quot;id&quot;),k.samplers[Re]=_(Te);break;case&quot;channel&quot;:Re=Te.getAttribute(&quot;target&quot;),k.channels[Re]=T(Te);break;case&quot;animation&quot;:b(Te),$=!0;break;default:console.log(Te)}}$===!1&amp;&amp;(Dt.animations[B.getAttribute(&quot;id&quot;)||rl.generateUUID()]=k)}function _(B){const k={inputs:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=l(J.getAttribute(&quot;source&quot;)),Re=J.getAttribute(&quot;semantic&quot;);k.inputs[Re]=Te;break}}return k}function T(B){const k={};let X=B.getAttribute(&quot;target&quot;).split(&quot;/&quot;);const J=X.shift();let Te=X.shift();const Re=Te.indexOf(&quot;(&quot;)!==-1,ot=Te.indexOf(&quot;.&quot;)!==-1;if(ot)X=Te.split(&quot;.&quot;),Te=X.shift(),k.member=X.shift();else if(Re){const Ke=Te.split(&quot;(&quot;);Te=Ke.shift();for(let nt=0;nt&lt;Ke.length;nt++)Ke[nt]=parseInt(Ke[nt].replace(/\)/,&quot;&quot;));k.indices=Ke}return k.id=J,k.sid=Te,k.arraySyntax=Re,k.memberSyntax=ot,k.sampler=l(B.getAttribute(&quot;source&quot;)),k}function w(B){const k=[],$=B.channels,X=B.samplers,J=B.sources;for(const Te in $)if($.hasOwnProperty(Te)){const Re=$[Te],ot=X[Re.sampler],Ke=ot.inputs.INPUT,nt=ot.inputs.OUTPUT,xt=J[Ke],Be=J[nt],pt=R(Re,xt,Be);O(pt,k)}return k}function E(B){return x(Dt.animations[B],w)}function R(B,k,$){const X=Dt.nodes[B.id],J=Bt(X.id),Te=X.transforms[B.sid],Re=X.matrix.clone().transpose();let ot,Ke,nt,xt,Be,pt;const gt={};switch(Te){case&quot;matrix&quot;:for(nt=0,xt=k.array.length;nt&lt;xt;nt++)if(ot=k.array[nt],Ke=nt*$.stride,gt[ot]===void 0&amp;&amp;(gt[ot]={}),B.arraySyntax===!0){const Fn=$.array[Ke],dn=B.indices[0]+4*B.indices[1];gt[ot][dn]=Fn}else for(Be=0,pt=$.stride;Be&lt;pt;Be++)gt[ot][Be]=$.array[Ke+Be];break;case&quot;translate&quot;:console.warn(&#x27;THREE.ColladaLoader: Animation transform type &quot;%s&quot; not yet implemented.&#x27;,Te);break;case&quot;rotate&quot;:console.warn(&#x27;THREE.ColladaLoader: Animation transform type &quot;%s&quot; not yet implemented.&#x27;,Te);break;case&quot;scale&quot;:console.warn(&#x27;THREE.ColladaLoader: Animation transform type &quot;%s&quot; not yet implemented.&#x27;,Te);break}const Tt=N(gt,Re);return{name:J.uuid,keyframes:Tt}}function N(B,k){const $=[];for(const J in B)$.push({time:parseFloat(J),value:B[J]});$.sort(X);for(let J=0;J&lt;16;J++)L($,J,k.elements[J]);return $;function X(J,Te){return J.time-Te.time}}const A=new Y,D=new Y,C=new Si;function O(B,k){const $=B.keyframes,X=B.name,J=[],Te=[],Re=[],ot=[];for(let Ke=0,nt=$.length;Ke&lt;nt;Ke++){const xt=$[Ke],Be=xt.time,pt=xt.value;fe.fromArray(pt).transpose(),fe.decompose(A,C,D),J.push(Be),Te.push(A.x,A.y,A.z),Re.push(C.x,C.y,C.z,C.w),ot.push(D.x,D.y,D.z)}return Te.length&gt;0&amp;&amp;k.push(new pa(X+&quot;.position&quot;,J,Te)),Re.length&gt;0&amp;&amp;k.push(new pl(X+&quot;.quaternion&quot;,J,Re)),ot.length&gt;0&amp;&amp;k.push(new pa(X+&quot;.scale&quot;,J,ot)),k}function L(B,k,$){let X,J=!0,Te,Re;for(Te=0,Re=B.length;Te&lt;Re;Te++)X=B[Te],X.value[k]===void 0?X.value[k]=null:J=!1;if(J===!0)for(Te=0,Re=B.length;Te&lt;Re;Te++)X=B[Te],X.value[k]=$;else V(B,k)}function V(B,k){let $,X;for(let J=0,Te=B.length;J&lt;Te;J++){const Re=B[J];if(Re.value[k]===null){if($=Z(B,J,k),X=z(B,J,k),$===null){Re.value[k]=X.value[k];continue}if(X===null){Re.value[k]=$.value[k];continue}K(Re,$,X,k)}}}function Z(B,k,$){for(;k&gt;=0;){const X=B[k];if(X.value[$]!==null)return X;k--}return null}function z(B,k,$){for(;k&lt;B.length;){const X=B[k];if(X.value[$]!==null)return X;k++}return null}function K(B,k,$,X){if($.time-k.time===0){B.value[X]=k.value[X];return}B.value[X]=(B.time-k.time)*($.value[X]-k.value[X])/($.time-k.time)+k.value[X]}function I(B){const k={name:B.getAttribute(&quot;id&quot;)||&quot;default&quot;,start:parseFloat(B.getAttribute(&quot;start&quot;)||0),end:parseFloat(B.getAttribute(&quot;end&quot;)||0),animations:[]};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;instance_animation&quot;:k.animations.push(l(J.getAttribute(&quot;url&quot;)));break}}Dt.clips[B.getAttribute(&quot;id&quot;)]=k}function j(B){const k=[],$=B.name,X=B.end-B.start||-1,J=B.animations;for(let Te=0,Re=J.length;Te&lt;Re;Te++){const ot=E(J[Te]);for(let Ke=0,nt=ot.length;Ke&lt;nt;Ke++)k.push(ot[Ke])}return new ml($,X,k)}function G(B){return x(Dt.clips[B],j)}function ee(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;skin&quot;:k.id=l(J.getAttribute(&quot;source&quot;)),k.skin=F(J);break;case&quot;morph&quot;:k.id=l(J.getAttribute(&quot;source&quot;)),console.warn(&quot;THREE.ColladaLoader: Morph target animation not supported yet.&quot;);break}}Dt.controllers[B.getAttribute(&quot;id&quot;)]=k}function F(B){const k={sources:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;bind_shape_matrix&quot;:k.bindShapeMatrix=s(J.textContent);break;case&quot;source&quot;:const Te=J.getAttribute(&quot;id&quot;);k.sources[Te]=Ae(J);break;case&quot;joints&quot;:k.joints=ne(J);break;case&quot;vertex_weights&quot;:k.vertexWeights=le(J);break}}return k}function ne(B){const k={inputs:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=J.getAttribute(&quot;semantic&quot;),Re=l(J.getAttribute(&quot;source&quot;));k.inputs[Te]=Re;break}}return k}function le(B){const k={inputs:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=J.getAttribute(&quot;semantic&quot;),Re=l(J.getAttribute(&quot;source&quot;)),ot=parseInt(J.getAttribute(&quot;offset&quot;));k.inputs[Te]={id:Re,offset:ot};break;case&quot;vcount&quot;:k.vcount=o(J.textContent);break;case&quot;v&quot;:k.v=o(J.textContent);break}}return k}function ce(B){const k={id:B.id},$=Dt.geometries[k.id];return B.skin!==void 0&amp;&amp;(k.skin=ie(B.skin),$.sources.skinIndices=k.skin.indices,$.sources.skinWeights=k.skin.weights),k}function ie(B){const $={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},X=B.sources,J=B.vertexWeights,Te=J.vcount,Re=J.v,ot=J.inputs.JOINT.offset,Ke=J.inputs.WEIGHT.offset,nt=B.sources[B.joints.inputs.JOINT],xt=B.sources[B.joints.inputs.INV_BIND_MATRIX],Be=X[J.inputs.WEIGHT.id].array;let pt=0,gt,Tt,_t;for(gt=0,_t=Te.length;gt&lt;_t;gt++){const dn=Te[gt],hn=[];for(Tt=0;Tt&lt;dn;Tt++){const sn=Re[pt+ot],Mr=Re[pt+Ke],Qi=Be[Mr];hn.push({index:sn,weight:Qi}),pt+=2}for(hn.sort(Fn),Tt=0;Tt&lt;4;Tt++){const sn=hn[Tt];sn!==void 0?($.indices.array.push(sn.index),$.weights.array.push(sn.weight)):($.indices.array.push(0),$.weights.array.push(0))}}for(B.bindShapeMatrix?$.bindMatrix=new yt().fromArray(B.bindShapeMatrix).transpose():$.bindMatrix=new yt().identity(),gt=0,_t=nt.array.length;gt&lt;_t;gt++){const dn=nt.array[gt],hn=new yt().fromArray(xt.array,gt*xt.stride).transpose();$.joints.push({name:dn,boneInverse:hn})}return $;function Fn(dn,hn){return hn.weight-dn.weight}}function oe(B){return x(Dt.controllers[B],ce)}function ae(B){const k={init_from:i(B,&quot;init_from&quot;)[0].textContent};Dt.images[B.getAttribute(&quot;id&quot;)]=k}function ue(B){return B.build!==void 0?B.build:B.init_from}function ve(B){const k=Dt.images[B];return k!==void 0?x(k,ue):(console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t find image with ID:&quot;,B),null)}function He(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;profile_COMMON&quot;:k.profile=Xe(J);break}}Dt.effects[B.getAttribute(&quot;id&quot;)]=k}function Xe(B){const k={surfaces:{},samplers:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;newparam&quot;:lt(J,k);break;case&quot;technique&quot;:k.technique=Q(J);break;case&quot;extra&quot;:k.extra=ze(J);break}}return k}function lt(B,k){const $=B.getAttribute(&quot;sid&quot;);for(let X=0,J=B.childNodes.length;X&lt;J;X++){const Te=B.childNodes[X];if(Te.nodeType===1)switch(Te.nodeName){case&quot;surface&quot;:k.surfaces[$]=We(Te);break;case&quot;sampler2D&quot;:k.samplers[$]=Ye(Te);break}}}function We(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;init_from&quot;:k.init_from=J.textContent;break}}return k}function Ye(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;source&quot;:k.source=J.textContent;break}}return k}function Q(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;constant&quot;:case&quot;lambert&quot;:case&quot;blinn&quot;:case&quot;phong&quot;:k.type=J.nodeName,k.parameters=Ve(J);break;case&quot;extra&quot;:k.extra=ze(J);break}}return k}function Ve(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;emission&quot;:case&quot;diffuse&quot;:case&quot;specular&quot;:case&quot;bump&quot;:case&quot;ambient&quot;:case&quot;shininess&quot;:case&quot;transparency&quot;:k[J.nodeName]=Le(J);break;case&quot;transparent&quot;:k[J.nodeName]={opaque:J.hasAttribute(&quot;opaque&quot;)?J.getAttribute(&quot;opaque&quot;):&quot;A_ONE&quot;,data:Le(J)};break}}return k}function Le(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;color&quot;:k[J.nodeName]=s(J.textContent);break;case&quot;float&quot;:k[J.nodeName]=parseFloat(J.textContent);break;case&quot;texture&quot;:k[J.nodeName]={id:J.getAttribute(&quot;texture&quot;),extra:Fe(J)};break}}return k}function Fe(B){const k={technique:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;extra&quot;:Ne(J,k);break}}return k}function Ne(B,k){for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;technique&quot;:mt(J,k);break}}}function mt(B,k){for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;repeatU&quot;:case&quot;repeatV&quot;:case&quot;offsetU&quot;:case&quot;offsetV&quot;:k.technique[J.nodeName]=parseFloat(J.textContent);break;case&quot;wrapU&quot;:case&quot;wrapV&quot;:J.textContent.toUpperCase()===&quot;TRUE&quot;?k.technique[J.nodeName]=1:J.textContent.toUpperCase()===&quot;FALSE&quot;?k.technique[J.nodeName]=0:k.technique[J.nodeName]=parseInt(J.textContent);break;case&quot;bump&quot;:k[J.nodeName]=H(J);break}}}function ze(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;technique&quot;:k.technique=te(J);break}}return k}function te(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;double_sided&quot;:k[J.nodeName]=parseInt(J.textContent);break;case&quot;bump&quot;:k[J.nodeName]=H(J);break}}return k}function H(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;texture&quot;:k[J.nodeName]={id:J.getAttribute(&quot;texture&quot;),texcoord:J.getAttribute(&quot;texcoord&quot;),extra:Fe(J)};break}}return k}function pe(B){return B}function Ce(B){return x(Dt.effects[B],pe)}function Ue(B){const k={name:B.getAttribute(&quot;name&quot;)};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;instance_effect&quot;:k.url=l(J.getAttribute(&quot;url&quot;));break}}Dt.materials[B.getAttribute(&quot;id&quot;)]=k}function Me(B){let k,$=B.slice((B.lastIndexOf(&quot;.&quot;)-1&gt;&gt;&gt;0)+2);switch($=$.toLowerCase(),$){case&quot;tga&quot;:k=Qn;break;default:k=Ni}return k}function Ze(B){const k=Ce(B.url),$=k.profile.technique;let X;switch($.type){case&quot;phong&quot;:case&quot;blinn&quot;:X=new cl;break;case&quot;lambert&quot;:X=new Py;break;default:X=new $i;break}X.name=B.name||&quot;&quot;;function J(Ke,nt=null){const xt=k.profile.samplers[Ke.id];let Be=null;if(xt!==void 0){const pt=k.profile.surfaces[xt.source];Be=ve(pt.init_from)}else console.warn(&quot;THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).&quot;),Be=ve(Ke.id);if(Be!==null){const pt=Me(Be);if(pt!==void 0){const gt=pt.load(Be),Tt=Ke.extra;if(Tt!==void 0&amp;&amp;Tt.technique!==void 0&amp;&amp;h(Tt.technique)===!1){const _t=Tt.technique;gt.wrapS=_t.wrapU?ws:rr,gt.wrapT=_t.wrapV?ws:rr,gt.offset.set(_t.offsetU||0,_t.offsetV||0),gt.repeat.set(_t.repeatU||1,_t.repeatV||1)}else gt.wrapS=ws,gt.wrapT=ws;return nt!==null&amp;&amp;(gt.colorSpace=nt),gt}else return console.warn(&quot;THREE.ColladaLoader: Loader for texture %s not found.&quot;,Be),null}else return console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t create texture with ID:&quot;,Ke.id),null}const Te=$.parameters;for(const Ke in Te){const nt=Te[Ke];switch(Ke){case&quot;diffuse&quot;:nt.color&amp;&amp;X.color.fromArray(nt.color),nt.texture&amp;&amp;(X.map=J(nt.texture,Nn));break;case&quot;specular&quot;:nt.color&amp;&amp;X.specular&amp;&amp;X.specular.fromArray(nt.color),nt.texture&amp;&amp;(X.specularMap=J(nt.texture));break;case&quot;bump&quot;:nt.texture&amp;&amp;(X.normalMap=J(nt.texture));break;case&quot;ambient&quot;:nt.texture&amp;&amp;(X.lightMap=J(nt.texture,Nn));break;case&quot;shininess&quot;:nt.float&amp;&amp;X.shininess&amp;&amp;(X.shininess=nt.float);break;case&quot;emission&quot;:nt.color&amp;&amp;X.emissive&amp;&amp;X.emissive.fromArray(nt.color),nt.texture&amp;&amp;(X.emissiveMap=J(nt.texture,Nn));break}}Zt.toWorkingColorSpace(X.color,Nn),X.specular&amp;&amp;Zt.toWorkingColorSpace(X.specular,Nn),X.emissive&amp;&amp;Zt.toWorkingColorSpace(X.emissive,Nn);let Re=Te.transparent,ot=Te.transparency;if(ot===void 0&amp;&amp;Re&amp;&amp;(ot={float:1}),Re===void 0&amp;&amp;ot&amp;&amp;(Re={opaque:&quot;A_ONE&quot;,data:{color:[1,1,1,1]}}),Re&amp;&amp;ot)if(Re.data.texture)X.transparent=!0;else{const Ke=Re.data.color;switch(Re.opaque){case&quot;A_ONE&quot;:X.opacity=Ke[3]*ot.float;break;case&quot;RGB_ZERO&quot;:X.opacity=1-Ke[0]*ot.float;break;case&quot;A_ZERO&quot;:X.opacity=1-Ke[3]*ot.float;break;case&quot;RGB_ONE&quot;:X.opacity=Ke[0]*ot.float;break;default:console.warn(&#x27;THREE.ColladaLoader: Invalid opaque type &quot;%s&quot; of transparent tag.&#x27;,Re.opaque)}X.opacity&lt;1&amp;&amp;(X.transparent=!0)}if($.extra!==void 0&amp;&amp;$.extra.technique!==void 0){const Ke=$.extra.technique;for(const nt in Ke){const xt=Ke[nt];switch(nt){case&quot;double_sided&quot;:X.side=xt===1?Ki:Qr;break;case&quot;bump&quot;:X.normalMap=J(xt.texture),X.normalScale=new Oe(1,1);break}}}return X}function qe(B){return x(Dt.materials[B],Ze)}function ut(B){const k={name:B.getAttribute(&quot;name&quot;)};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;optics&quot;:k.optics=Ct(J);break}}Dt.cameras[B.getAttribute(&quot;id&quot;)]=k}function Ct(B){for(let k=0;k&lt;B.childNodes.length;k++){const $=B.childNodes[k];switch($.nodeName){case&quot;technique_common&quot;:return je($)}}return{}}function je(B){const k={};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];switch(X.nodeName){case&quot;perspective&quot;:case&quot;orthographic&quot;:k.technique=X.nodeName,k.parameters=ht(X);break}}return k}function ht(B){const k={};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];switch(X.nodeName){case&quot;xfov&quot;:case&quot;yfov&quot;:case&quot;xmag&quot;:case&quot;ymag&quot;:case&quot;znear&quot;:case&quot;zfar&quot;:case&quot;aspect_ratio&quot;:k[X.nodeName]=parseFloat(X.textContent);break}}return k}function St(B){let k;switch(B.optics.technique){case&quot;perspective&quot;:k=new Yn(B.optics.parameters.yfov,B.optics.parameters.aspect_ratio,B.optics.parameters.znear,B.optics.parameters.zfar);break;case&quot;orthographic&quot;:let $=B.optics.parameters.ymag,X=B.optics.parameters.xmag;const J=B.optics.parameters.aspect_ratio;X=X===void 0?$*J:X,$=$===void 0?X/J:$,X*=.5,$*=.5,k=new Fc(-X,X,$,-$,B.optics.parameters.znear,B.optics.parameters.zfar);break;default:k=new Yn;break}return k.name=B.name||&quot;&quot;,k}function Rt(B){const k=Dt.cameras[B];return k!==void 0?x(k,St):(console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t find camera with ID:&quot;,B),null)}function rt(B){let k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;technique_common&quot;:k=Gt(J);break}}Dt.lights[B.getAttribute(&quot;id&quot;)]=k}function Gt(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;directional&quot;:case&quot;point&quot;:case&quot;spot&quot;:case&quot;ambient&quot;:k.technique=J.nodeName,k.parameters=It(J)}}return k}function It(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;color&quot;:const Te=s(J.textContent);k.color=new $e().fromArray(Te),Zt.toWorkingColorSpace(k.color,Nn);break;case&quot;falloff_angle&quot;:k.falloffAngle=parseFloat(J.textContent);break;case&quot;quadratic_attenuation&quot;:const Re=parseFloat(J.textContent);k.distance=Re?Math.sqrt(1/Re):0;break}}return k}function gn(B){let k;switch(B.technique){case&quot;directional&quot;:k=new Zd;break;case&quot;point&quot;:k=new ky;break;case&quot;spot&quot;:k=new Uy;break;case&quot;ambient&quot;:k=new Fy;break}return B.parameters.color&amp;&amp;k.color.copy(B.parameters.color),B.parameters.distance&amp;&amp;(k.distance=B.parameters.distance),k}function de(B){const k=Dt.lights[B];return k!==void 0?x(k,gn):(console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t find light with ID:&quot;,B),null)}function tt(B){const k={name:B.getAttribute(&quot;name&quot;),sources:{},vertices:{},primitives:[]},$=i(B,&quot;mesh&quot;)[0];if($!==void 0){for(let X=0;X&lt;$.childNodes.length;X++){const J=$.childNodes[X];if(J.nodeType!==1)continue;const Te=J.getAttribute(&quot;id&quot;);switch(J.nodeName){case&quot;source&quot;:k.sources[Te]=Ae(J);break;case&quot;vertices&quot;:k.vertices=Pe(J);break;case&quot;polygons&quot;:console.warn(&quot;THREE.ColladaLoader: Unsupported primitive type: &quot;,J.nodeName);break;case&quot;lines&quot;:case&quot;linestrips&quot;:case&quot;polylist&quot;:case&quot;triangles&quot;:k.primitives.push(st(J));break;default:console.log(J)}}Dt.geometries[B.getAttribute(&quot;id&quot;)]=k}}function Ae(B){const k={array:[],stride:3};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;float_array&quot;:k.array=s(X.textContent);break;case&quot;Name_array&quot;:k.array=r(X.textContent);break;case&quot;technique_common&quot;:const J=i(X,&quot;accessor&quot;)[0];J!==void 0&amp;&amp;(k.stride=parseInt(J.getAttribute(&quot;stride&quot;)));break}}return k}function Pe(B){const k={};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];X.nodeType===1&amp;&amp;(k[X.getAttribute(&quot;semantic&quot;)]=l(X.getAttribute(&quot;source&quot;)))}return k}function st(B){const k={type:B.nodeName,material:B.getAttribute(&quot;material&quot;),count:parseInt(B.getAttribute(&quot;count&quot;)),inputs:{},stride:0,hasUV:!1};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=l(J.getAttribute(&quot;source&quot;)),Re=J.getAttribute(&quot;semantic&quot;),ot=parseInt(J.getAttribute(&quot;offset&quot;)),Ke=parseInt(J.getAttribute(&quot;set&quot;)),nt=Ke&gt;0?Re+Ke:Re;k.inputs[nt]={id:Te,offset:ot},k.stride=Math.max(k.stride,ot+1),Re===&quot;TEXCOORD&quot;&amp;&amp;(k.hasUV=!0);break;case&quot;vcount&quot;:k.vcount=o(J.textContent);break;case&quot;p&quot;:k.p=o(J.textContent);break}}return k}function Qe(B){const k={};for(let $=0;$&lt;B.length;$++){const X=B[$];k[X.type]===void 0&amp;&amp;(k[X.type]=[]),k[X.type].push(X)}return k}function Ut(B){let k=0;for(let $=0,X=B.length;$&lt;X;$++)B[$].hasUV===!0&amp;&amp;k++;k&gt;0&amp;&amp;k&lt;B.length&amp;&amp;(B.uvsNeedsFix=!0)}function wn(B){const k={},$=B.sources,X=B.vertices,J=B.primitives;if(J.length===0)return{};const Te=Qe(J);for(const Re in Te){const ot=Te[Re];Ut(ot),k[Re]=jn(ot,$,X)}return k}function jn(B,k,$){const X={},J={array:[],stride:0},Te={array:[],stride:0},Re={array:[],stride:0},ot={array:[],stride:0},Ke={array:[],stride:0},nt={array:[],stride:4},xt={array:[],stride:4},Be=new Lt,pt=[];let gt=0;for(let Tt=0;Tt&lt;B.length;Tt++){const _t=B[Tt],Fn=_t.inputs;let dn=0;switch(_t.type){case&quot;lines&quot;:case&quot;linestrips&quot;:dn=_t.count*2;break;case&quot;triangles&quot;:dn=_t.count*3;break;case&quot;polylist&quot;:for(let hn=0;hn&lt;_t.count;hn++){const sn=_t.vcount[hn];switch(sn){case 3:dn+=3;break;case 4:dn+=6;break;default:dn+=(sn-2)*3;break}}break;default:console.warn(&quot;THREE.ColladaLoader: Unknown primitive type:&quot;,_t.type)}Be.addGroup(gt,dn,Tt),gt+=dn,_t.material&amp;&amp;pt.push(_t.material);for(const hn in Fn){const sn=Fn[hn];switch(hn){case&quot;VERTEX&quot;:for(const Mr in $){const Qi=$[Mr];switch(Mr){case&quot;POSITION&quot;:const mi=J.array.length;if(zt(_t,k[Qi],sn.offset,J.array),J.stride=k[Qi].stride,k.skinWeights&amp;&amp;k.skinIndices&amp;&amp;(zt(_t,k.skinIndices,sn.offset,nt.array),zt(_t,k.skinWeights,sn.offset,xt.array)),_t.hasUV===!1&amp;&amp;B.uvsNeedsFix===!0){const Ro=(J.array.length-mi)/J.stride;for(let Tl=0;Tl&lt;Ro;Tl++)Re.array.push(0,0)}break;case&quot;NORMAL&quot;:zt(_t,k[Qi],sn.offset,Te.array),Te.stride=k[Qi].stride;break;case&quot;COLOR&quot;:zt(_t,k[Qi],sn.offset,Ke.array),Ke.stride=k[Qi].stride;break;case&quot;TEXCOORD&quot;:zt(_t,k[Qi],sn.offset,Re.array),Re.stride=k[Qi].stride;break;case&quot;TEXCOORD1&quot;:zt(_t,k[Qi],sn.offset,ot.array),Re.stride=k[Qi].stride;break;default:console.warn(&#x27;THREE.ColladaLoader: Semantic &quot;%s&quot; not handled in geometry build process.&#x27;,Mr)}}break;case&quot;NORMAL&quot;:zt(_t,k[sn.id],sn.offset,Te.array),Te.stride=k[sn.id].stride;break;case&quot;COLOR&quot;:zt(_t,k[sn.id],sn.offset,Ke.array,!0),Ke.stride=k[sn.id].stride;break;case&quot;TEXCOORD&quot;:zt(_t,k[sn.id],sn.offset,Re.array),Re.stride=k[sn.id].stride;break;case&quot;TEXCOORD1&quot;:zt(_t,k[sn.id],sn.offset,ot.array),ot.stride=k[sn.id].stride;break}}}return J.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;position&quot;,new ct(J.array,J.stride)),Te.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;normal&quot;,new ct(Te.array,Te.stride)),Ke.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;color&quot;,new ct(Ke.array,Ke.stride)),Re.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;uv&quot;,new ct(Re.array,Re.stride)),ot.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;uv1&quot;,new ct(ot.array,ot.stride)),nt.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;skinIndex&quot;,new ct(nt.array,nt.stride)),xt.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;skinWeight&quot;,new ct(xt.array,xt.stride)),X.data=Be,X.type=B[0].type,X.materialKeys=pt,X}function zt(B,k,$,X,J=!1){const Te=B.p,Re=B.stride,ot=B.vcount;function Ke(Be){let pt=Te[Be+$]*xt;const gt=pt+xt;for(;pt&lt;gt;pt++)X.push(nt[pt]);if(J){const Tt=X.length-xt-1;ei.setRGB(X[Tt+0],X[Tt+1],X[Tt+2],Nn),X[Tt+0]=ei.r,X[Tt+1]=ei.g,X[Tt+2]=ei.b}}const nt=k.array,xt=k.stride;if(B.vcount!==void 0){let Be=0;for(let pt=0,gt=ot.length;pt&lt;gt;pt++){const Tt=ot[pt];if(Tt===4){const _t=Be+Re*0,Fn=Be+Re*1,dn=Be+Re*2,hn=Be+Re*3;Ke(_t),Ke(Fn),Ke(hn),Ke(Fn),Ke(dn),Ke(hn)}else if(Tt===3){const _t=Be+Re*0,Fn=Be+Re*1,dn=Be+Re*2;Ke(_t),Ke(Fn),Ke(dn)}else if(Tt&gt;4)for(let _t=1,Fn=Tt-2;_t&lt;=Fn;_t++){const dn=Be+Re*0,hn=Be+Re*_t,sn=Be+Re*(_t+1);Ke(dn),Ke(hn),Ke(sn)}Be+=Re*Tt}}else for(let Be=0,pt=Te.length;Be&lt;pt;Be+=Re)Ke(Be)}function Bi(B){return x(Dt.geometries[B],wn)}function oi(B){const k={name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,joints:{},links:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;technique_common&quot;:Hi(X,k);break}}Dt.kinematicsModels[B.getAttribute(&quot;id&quot;)]=k}function Zn(B){return B.build!==void 0?B.build:B}function pi(B){return x(Dt.kinematicsModels[B],Zn)}function Hi(B,k){for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;joint&quot;:k.joints[X.getAttribute(&quot;sid&quot;)]=Cs(X);break;case&quot;link&quot;:k.links.push(Co(X));break}}}function Cs(B){let k;for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;prismatic&quot;:case&quot;revolute&quot;:k=ya(X);break}}return k}function ya(B){const k={sid:B.getAttribute(&quot;sid&quot;),name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,axis:new Y,limits:{min:0,max:0},type:B.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;axis&quot;:const J=s(X.textContent);k.axis.fromArray(J);break;case&quot;limits&quot;:const Te=X.getElementsByTagName(&quot;max&quot;)[0],Re=X.getElementsByTagName(&quot;min&quot;)[0];k.limits.max=parseFloat(Te.textContent),k.limits.min=parseFloat(Re.textContent);break}}return k.limits.min&gt;=k.limits.max&amp;&amp;(k.static=!0),k.middlePosition=(k.limits.min+k.limits.max)/2,k}function Co(B){const k={sid:B.getAttribute(&quot;sid&quot;),name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,attachments:[],transforms:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;attachment_full&quot;:k.attachments.push(Rs(X));break;case&quot;matrix&quot;:case&quot;translate&quot;:case&quot;rotate&quot;:k.transforms.push(kr(X));break}}return k}function Rs(B){const k={joint:B.getAttribute(&quot;joint&quot;).split(&quot;/&quot;).pop(),transforms:[],links:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;link&quot;:k.links.push(Co(X));break;case&quot;matrix&quot;:case&quot;translate&quot;:case&quot;rotate&quot;:k.transforms.push(kr(X));break}}return k}function kr(B){const k={type:B.nodeName},$=s(B.textContent);switch(k.type){case&quot;matrix&quot;:k.obj=new yt,k.obj.fromArray($).transpose();break;case&quot;translate&quot;:k.obj=new Y,k.obj.fromArray($);break;case&quot;rotate&quot;:k.obj=new Y,k.obj.fromArray($),k.angle=rl.degToRad($[3]);break}return k}function os(B){const k={name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,rigidBodies:{}};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;rigid_body&quot;:k.rigidBodies[X.getAttribute(&quot;name&quot;)]={},wr(X,k.rigidBodies[X.getAttribute(&quot;name&quot;)]);break}}Dt.physicsModels[B.getAttribute(&quot;id&quot;)]=k}function wr(B,k){for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;technique_common&quot;:Er(X,k);break}}}function Er(B,k){for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;inertia&quot;:k.inertia=s(X.textContent);break;case&quot;mass&quot;:k.mass=s(X.textContent)[0];break}}}function Os(B){const k={bindJointAxis:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;bind_joint_axis&quot;:k.bindJointAxis.push(as(X));break}}Dt.kinematicsScenes[l(B.getAttribute(&quot;url&quot;))]=k}function as(B){const k={target:B.getAttribute(&quot;target&quot;).split(&quot;/&quot;).pop()};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;axis&quot;:const J=X.getElementsByTagName(&quot;param&quot;)[0];k.axis=J.textContent;const Te=k.axis.split(&quot;inst_&quot;).pop().split(&quot;axis&quot;)[0];k.jointIndex=Te.substring(0,Te.length-1);break}}return k}function Wn(B){return B.build!==void 0?B.build:B}function _a(B){return x(Dt.kinematicsScenes[B],Wn)}function va(){const B=Object.keys(Dt.kinematicsModels)[0],k=Object.keys(Dt.kinematicsScenes)[0],$=Object.keys(Dt.visualScenes)[0];if(B===void 0||k===void 0)return;const X=pi(B),J=_a(k),Te=$t($),Re=J.bindJointAxis,ot={};for(let xt=0,Be=Re.length;xt&lt;Be;xt++){const pt=Re[xt],gt=Tn.querySelector(&#x27;[sid=&quot;&#x27;+pt.target+&#x27;&quot;]&#x27;);if(gt){const Tt=gt.parentElement;Ke(pt.jointIndex,Tt)}}function Ke(xt,Be){const pt=Be.getAttribute(&quot;name&quot;),gt=X.joints[xt];Te.traverse(function(Tt){Tt.name===pt&amp;&amp;(ot[xt]={object:Tt,transforms:Fr(Be),joint:gt,position:gt.zeroPosition})})}const nt=new yt;zr={joints:X&amp;&amp;X.joints,getJointValue:function(xt){const Be=ot[xt];if(Be)return Be.position;console.warn(&quot;THREE.ColladaLoader: Joint &quot;+xt+&quot; doesn&#x27;t exist.&quot;)},setJointValue:function(xt,Be){const pt=ot[xt];if(pt){const gt=pt.joint;if(Be&gt;gt.limits.max||Be&lt;gt.limits.min)console.warn(&quot;THREE.ColladaLoader: Joint &quot;+xt+&quot; value &quot;+Be+&quot; outside of limits (min: &quot;+gt.limits.min+&quot;, max: &quot;+gt.limits.max+&quot;).&quot;);else if(gt.static)console.warn(&quot;THREE.ColladaLoader: Joint &quot;+xt+&quot; is static.&quot;);else{const Tt=pt.object,_t=gt.axis,Fn=pt.transforms;fe.identity();for(let dn=0;dn&lt;Fn.length;dn++){const hn=Fn[dn];if(hn.sid&amp;&amp;hn.sid.indexOf(xt)!==-1)switch(gt.type){case&quot;revolute&quot;:fe.multiply(nt.makeRotationAxis(_t,rl.degToRad(Be)));break;case&quot;prismatic&quot;:fe.multiply(nt.makeTranslation(_t.x*Be,_t.y*Be,_t.z*Be));break;default:console.warn(&quot;THREE.ColladaLoader: Unknown joint type: &quot;+gt.type);break}else switch(hn.type){case&quot;matrix&quot;:fe.multiply(hn.obj);break;case&quot;translate&quot;:fe.multiply(nt.makeTranslation(hn.obj.x,hn.obj.y,hn.obj.z));break;case&quot;scale&quot;:fe.scale(hn.obj);break;case&quot;rotate&quot;:fe.multiply(nt.makeRotationAxis(hn.obj,hn.angle));break}}Tt.matrix.copy(fe),Tt.matrix.decompose(Tt.position,Tt.quaternion,Tt.scale),ot[xt].position=Be}}else console.log(&quot;THREE.ColladaLoader: &quot;+xt+&quot; does not exist.&quot;)}}}function Fr(B){const k=[],$=Tn.querySelector(&#x27;[id=&quot;&#x27;+B.id+&#x27;&quot;]&#x27;);for(let X=0;X&lt;$.childNodes.length;X++){const J=$.childNodes[X];if(J.nodeType!==1)continue;let Te,Re;switch(J.nodeName){case&quot;matrix&quot;:Te=s(J.textContent);const ot=new yt().fromArray(Te).transpose();k.push({sid:J.getAttribute(&quot;sid&quot;),type:J.nodeName,obj:ot});break;case&quot;translate&quot;:case&quot;scale&quot;:Te=s(J.textContent),Re=new Y().fromArray(Te),k.push({sid:J.getAttribute(&quot;sid&quot;),type:J.nodeName,obj:Re});break;case&quot;rotate&quot;:Te=s(J.textContent),Re=new Y().fromArray(Te);const Ke=rl.degToRad(Te[3]);k.push({sid:J.getAttribute(&quot;sid&quot;),type:J.nodeName,obj:Re,angle:Ke});break}}return k}function q(B){const k=B.getElementsByTagName(&quot;node&quot;);for(let $=0;$&lt;k.length;$++){const X=k[$];X.hasAttribute(&quot;id&quot;)===!1&amp;&amp;X.setAttribute(&quot;id&quot;,u())}}const fe=new yt,be=new Y;function we(B){const k={name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,type:B.getAttribute(&quot;type&quot;),id:B.getAttribute(&quot;id&quot;),sid:B.getAttribute(&quot;sid&quot;),matrix:new yt,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType!==1)continue;let J;switch(X.nodeName){case&quot;node&quot;:k.nodes.push(X.getAttribute(&quot;id&quot;)),we(X);break;case&quot;instance_camera&quot;:k.instanceCameras.push(l(X.getAttribute(&quot;url&quot;)));break;case&quot;instance_controller&quot;:k.instanceControllers.push(me(X));break;case&quot;instance_light&quot;:k.instanceLights.push(l(X.getAttribute(&quot;url&quot;)));break;case&quot;instance_geometry&quot;:k.instanceGeometries.push(me(X));break;case&quot;instance_node&quot;:k.instanceNodes.push(l(X.getAttribute(&quot;url&quot;)));break;case&quot;matrix&quot;:J=s(X.textContent),k.matrix.multiply(fe.fromArray(J).transpose()),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;translate&quot;:J=s(X.textContent),be.fromArray(J),k.matrix.multiply(fe.makeTranslation(be.x,be.y,be.z)),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;rotate&quot;:J=s(X.textContent);const Te=rl.degToRad(J[3]);k.matrix.multiply(fe.makeRotationAxis(be.fromArray(J),Te)),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;scale&quot;:J=s(X.textContent),k.matrix.scale(be.fromArray(J)),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;extra&quot;:break;default:console.log(X)}}return bt(k.id)?console.warn(&quot;THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.&quot;,k.id):Dt.nodes[k.id]=k,k}function me(B){const k={id:l(B.getAttribute(&quot;url&quot;)),materials:{},skeletons:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];switch(X.nodeName){case&quot;bind_material&quot;:const J=X.getElementsByTagName(&quot;instance_material&quot;);for(let Te=0;Te&lt;J.length;Te++){const Re=J[Te],ot=Re.getAttribute(&quot;symbol&quot;),Ke=Re.getAttribute(&quot;target&quot;);k.materials[ot]=l(Ke)}break;case&quot;skeleton&quot;:k.skeletons.push(l(X.textContent));break}}return k}function Ge(B,k){const $=[],X=[];let J,Te,Re;for(J=0;J&lt;B.length;J++){const nt=B[J];let xt;if(bt(nt))xt=Bt(nt),Je(xt,k,$);else if(Qt(nt)){const pt=Dt.visualScenes[nt].children;for(let gt=0;gt&lt;pt.length;gt++){const Tt=pt[gt];if(Tt.type===&quot;JOINT&quot;){const _t=Bt(Tt.id);Je(_t,k,$)}}}else console.error(&quot;THREE.ColladaLoader: Unable to find root bone of skeleton with ID:&quot;,nt)}for(J=0;J&lt;k.length;J++)for(Te=0;Te&lt;$.length;Te++)if(Re=$[Te],Re.bone.name===k[J].name){X[J]=Re,Re.processed=!0;break}for(J=0;J&lt;$.length;J++)Re=$[J],Re.processed===!1&amp;&amp;(X.push(Re),Re.processed=!0);const ot=[],Ke=[];for(J=0;J&lt;X.length;J++)Re=X[J],ot.push(Re.bone),Ke.push(Re.boneInverse);return new Eh(ot,Ke)}function Je(B,k,$){B.traverse(function(X){if(X.isBone===!0){let J;for(let Te=0;Te&lt;k.length;Te++){const Re=k[Te];if(Re.name===X.name){J=Re.boneInverse;break}}J===void 0&amp;&amp;(J=new yt),$.push({bone:X,boneInverse:J,processed:!1})}})}function et(B){const k=[],$=B.matrix,X=B.nodes,J=B.type,Te=B.instanceCameras,Re=B.instanceControllers,ot=B.instanceLights,Ke=B.instanceGeometries,nt=B.instanceNodes;for(let Be=0,pt=X.length;Be&lt;pt;Be++)k.push(Bt(X[Be]));for(let Be=0,pt=Te.length;Be&lt;pt;Be++){const gt=Rt(Te[Be]);gt!==null&amp;&amp;k.push(gt.clone())}for(let Be=0,pt=Re.length;Be&lt;pt;Be++){const gt=Re[Be],Tt=oe(gt.id),_t=Bi(Tt.id),Fn=Et(_t,gt.materials),dn=gt.skeletons,hn=Tt.skin.joints,sn=Ge(dn,hn);for(let Mr=0,Qi=Fn.length;Mr&lt;Qi;Mr++){const mi=Fn[Mr];mi.isSkinnedMesh&amp;&amp;(mi.bind(sn,Tt.skin.bindMatrix),mi.normalizeSkinWeights()),k.push(mi)}}for(let Be=0,pt=ot.length;Be&lt;pt;Be++){const gt=de(ot[Be]);gt!==null&amp;&amp;k.push(gt.clone())}for(let Be=0,pt=Ke.length;Be&lt;pt;Be++){const gt=Ke[Be],Tt=Bi(gt.id),_t=Et(Tt,gt.materials);for(let Fn=0,dn=_t.length;Fn&lt;dn;Fn++)k.push(_t[Fn])}for(let Be=0,pt=nt.length;Be&lt;pt;Be++)k.push(Bt(nt[Be]).clone());let xt;if(X.length===0&amp;&amp;k.length===1)xt=k[0];else{xt=J===&quot;JOINT&quot;?new Yd:new br;for(let Be=0;Be&lt;k.length;Be++)xt.add(k[Be])}return xt.name=J===&quot;JOINT&quot;?B.sid:B.name,xt.matrix.copy($),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale),xt}const ft=new $i({name:Ji.DEFAULT_MATERIAL_NAME,color:16711935});function Ot(B,k){const $=[];for(let X=0,J=B.length;X&lt;J;X++){const Te=k[B[X]];Te===void 0?(console.warn(&quot;THREE.ColladaLoader: Material with key %s not found. Apply fallback material.&quot;,B[X]),$.push(ft)):$.push(qe(Te))}return $}function Et(B,k){const $=[];for(const X in B){const J=B[X],Te=Ot(J.materialKeys,k);if(Te.length===0&amp;&amp;(X===&quot;lines&quot;||X===&quot;linestrips&quot;?Te.push(new Zi):Te.push(new cl)),X===&quot;lines&quot;||X===&quot;linestrips&quot;)for(let nt=0,xt=Te.length;nt&lt;xt;nt++){const Be=Te[nt];if(Be.isMeshPhongMaterial===!0||Be.isMeshLambertMaterial===!0){const pt=new Zi;pt.color.copy(Be.color),pt.opacity=Be.opacity,pt.transparent=Be.transparent,Te[nt]=pt}}const Re=J.data.attributes.skinIndex!==void 0,ot=Te.length===1?Te[0]:Te;let Ke;switch(X){case&quot;lines&quot;:Ke=new Ur(J.data,ot);break;case&quot;linestrips&quot;:Ke=new xo(J.data,ot);break;case&quot;triangles&quot;:case&quot;polylist&quot;:Re?Ke=new my(J.data,ot):Ke=new Sn(J.data,ot);break}$.push(Ke)}return $}function bt(B){return Dt.nodes[B]!==void 0}function Bt(B){return x(Dt.nodes[B],et)}function un(B){const k={name:B.getAttribute(&quot;name&quot;),children:[]};q(B);const $=i(B,&quot;node&quot;);for(let X=0;X&lt;$.length;X++)k.children.push(we($[X]));Dt.visualScenes[B.getAttribute(&quot;id&quot;)]=k}function In(B){const k=new br;k.name=B.name;const $=B.children;for(let X=0;X&lt;$.length;X++){const J=$[X];k.add(Bt(J.id))}return k}function Qt(B){return Dt.visualScenes[B]!==void 0}function $t(B){return x(Dt.visualScenes[B],In)}function wt(B){const k=i(B,&quot;instance_visual_scene&quot;)[0];return $t(l(k.getAttribute(&quot;url&quot;)))}function Hn(){const B=Dt.clips;if(h(B)===!0){if(h(Dt.animations)===!1){const k=[];for(const $ in Dt.animations){const X=E($);for(let J=0,Te=X.length;J&lt;Te;J++)k.push(X[J])}ai.push(new ml(&quot;default&quot;,-1,k))}}else for(const k in B)ai.push(G(k))}function rn(B){let k=&quot;&quot;;const $=[B];for(;$.length;){const X=$.shift();X.nodeType===Node.TEXT_NODE?k+=X.textContent:(k+=`
`,$.push(...X.childNodes))}return k.trim()}if(e.length===0)return{scene:new py};const Jn=new DOMParser().parseFromString(e,&quot;application/xml&quot;),Tn=i(Jn,&quot;COLLADA&quot;)[0],vn=Jn.getElementsByTagName(&quot;parsererror&quot;)[0];if(vn!==void 0){const B=i(vn,&quot;div&quot;)[0];let k;return B?k=B.textContent:k=rn(vn),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,k),null}const Tr=Tn.getAttribute(&quot;version&quot;);console.debug(&quot;THREE.ColladaLoader: File version&quot;,Tr);const Mn=f(i(Tn,&quot;asset&quot;)[0]),Ni=new Ly(this.manager);Ni.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let Qn;ZO&amp;&amp;(Qn=new ZO(this.manager),Qn.setPath(this.resourcePath||t));const ei=new $e,ai=[];let zr={},Ds=0;const Dt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};g(Tn,&quot;library_animations&quot;,&quot;animation&quot;,b),g(Tn,&quot;library_animation_clips&quot;,&quot;animation_clip&quot;,I),g(Tn,&quot;library_controllers&quot;,&quot;controller&quot;,ee),g(Tn,&quot;library_images&quot;,&quot;image&quot;,ae),g(Tn,&quot;library_effects&quot;,&quot;effect&quot;,He),g(Tn,&quot;library_materials&quot;,&quot;material&quot;,Ue),g(Tn,&quot;library_cameras&quot;,&quot;camera&quot;,ut),g(Tn,&quot;library_lights&quot;,&quot;light&quot;,rt),g(Tn,&quot;library_geometries&quot;,&quot;geometry&quot;,tt),g(Tn,&quot;library_nodes&quot;,&quot;node&quot;,we),g(Tn,&quot;library_visual_scenes&quot;,&quot;visual_scene&quot;,un),g(Tn,&quot;library_kinematics_models&quot;,&quot;kinematics_model&quot;,oi),g(Tn,&quot;library_physics_models&quot;,&quot;physics_model&quot;,os),g(Tn,&quot;scene&quot;,&quot;instance_kinematics_scene&quot;,Os),v(Dt.animations,w),v(Dt.clips,j),v(Dt.controllers,ce),v(Dt.images,ue),v(Dt.effects,pe),v(Dt.materials,Ze),v(Dt.cameras,St),v(Dt.lights,gn),v(Dt.geometries,wn),v(Dt.visualScenes,In),Hn(),va();const El=wt(i(Tn,&quot;scene&quot;)[0]);return El.animations=ai,Mn.upAxis===&quot;Z_UP&quot;&amp;&amp;(console.warn(&quot;THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289.&quot;),El.rotation.set(-Math.PI/2,0,0)),El.scale.multiplyScalar(Mn.unit),{get animations(){return console.warn(&quot;THREE.ColladaLoader: Please access animations over scene.animations now.&quot;),ai},kinematics:zr,library:Dt,scene:El}}}const JO=new Y,pZ=new Sr,bg=new yt,Qa=new yt,xg=new Si,Sg=new Y(1,1,1),wg=new Y;class r_ extends nn{constructor(...e){super(...e),this.urdfNode=null,this.urdfName=&quot;&quot;}copy(e,t){return super.copy(e,t),this.urdfNode=e.urdfNode,this.urdfName=e.urdfName,this}}class mZ extends r_{constructor(...e){super(...e),this.isURDFCollider=!0,this.type=&quot;URDFCollider&quot;}}class gZ extends r_{constructor(...e){super(...e),this.isURDFVisual=!0,this.type=&quot;URDFVisual&quot;}}class TL extends r_{constructor(...e){super(...e),this.isURDFLink=!0,this.type=&quot;URDFLink&quot;}}class ML extends r_{get jointType(){return this._jointType}set jointType(e){if(this.jointType!==e)switch(this._jointType=e,this.matrixWorldNeedsUpdate=!0,e){case&quot;fixed&quot;:this.jointValue=[];break;case&quot;continuous&quot;:case&quot;revolute&quot;:case&quot;prismatic&quot;:this.jointValue=new Array(1).fill(0);break;case&quot;planar&quot;:this.jointValue=new Array(3).fill(0),this.axis=new Y(0,0,1);break;case&quot;floating&quot;:this.jointValue=new Array(6).fill(0);break}}get angle(){return this.jointValue[0]}constructor(...e){super(...e),this.isURDFJoint=!0,this.type=&quot;URDFJoint&quot;,this.jointValue=null,this.jointType=&quot;fixed&quot;,this.axis=new Y(1,0,0),this.limit={lower:0,upper:0},this.ignoreLimits=!1,this.origPosition=null,this.origQuaternion=null,this.mimicJoints=[]}copy(e,t){return super.copy(e,t),this.jointType=e.jointType,this.axis=e.axis.clone(),this.limit.lower=e.limit.lower,this.limit.upper=e.limit.upper,this.ignoreLimits=!1,this.jointValue=[...e.jointValue],this.origPosition=e.origPosition?e.origPosition.clone():null,this.origQuaternion=e.origQuaternion?e.origQuaternion.clone():null,this.mimicJoints=[...e.mimicJoints],this}setJointValue(...e){e=e.map(i=&gt;i===null?null:parseFloat(i)),(!this.origPosition||!this.origQuaternion)&amp;&amp;(this.origPosition=this.position.clone(),this.origQuaternion=this.quaternion.clone());let t=!1;switch(this.mimicJoints.forEach(i=&gt;{t=i.updateFromMimickedJoint(...e)||t}),this.jointType){case&quot;fixed&quot;:return t;case&quot;continuous&quot;:case&quot;revolute&quot;:{let i=e[0];return i==null||i===this.jointValue[0]?t:(!this.ignoreLimits&amp;&amp;this.jointType===&quot;revolute&quot;&amp;&amp;(i=Math.min(this.limit.upper,i),i=Math.max(this.limit.lower,i)),this.quaternion.setFromAxisAngle(this.axis,i).premultiply(this.origQuaternion),this.jointValue[0]!==i?(this.jointValue[0]=i,this.matrixWorldNeedsUpdate=!0,!0):t)}case&quot;prismatic&quot;:{let i=e[0];return i==null||i===this.jointValue[0]?t:(this.ignoreLimits||(i=Math.min(this.limit.upper,i),i=Math.max(this.limit.lower,i)),this.position.copy(this.origPosition),JO.copy(this.axis).applyEuler(this.rotation),this.position.addScaledVector(JO,i),this.jointValue[0]!==i?(this.jointValue[0]=i,this.matrixWorldNeedsUpdate=!0,!0):t)}case&quot;floating&quot;:return this.jointValue.every((i,r)=&gt;e[r]===i||e[r]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],this.jointValue[3]=e[3]!==null?e[3]:this.jointValue[3],this.jointValue[4]=e[4]!==null?e[4]:this.jointValue[4],this.jointValue[5]=e[5]!==null?e[5]:this.jointValue[5],Qa.compose(this.origPosition,this.origQuaternion,Sg),xg.setFromEuler(pZ.set(this.jointValue[3],this.jointValue[4],this.jointValue[5],&quot;XYZ&quot;)),wg.set(this.jointValue[0],this.jointValue[1],this.jointValue[2]),bg.compose(wg,xg,Sg),Qa.premultiply(bg),this.position.setFromMatrixPosition(Qa),this.rotation.setFromRotationMatrix(Qa),this.matrixWorldNeedsUpdate=!0,!0);case&quot;planar&quot;:return this.jointValue.every((i,r)=&gt;e[r]===i||e[r]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],Qa.compose(this.origPosition,this.origQuaternion,Sg),xg.setFromAxisAngle(this.axis,this.jointValue[2]),wg.set(this.jointValue[0],this.jointValue[1],0),bg.compose(wg,xg,Sg),Qa.premultiply(bg),this.position.setFromMatrixPosition(Qa),this.rotation.setFromRotationMatrix(Qa),this.matrixWorldNeedsUpdate=!0,!0)}return t}}class QO extends ML{constructor(...e){super(...e),this.type=&quot;URDFMimicJoint&quot;,this.mimicJoint=null,this.offset=0,this.multiplier=1}updateFromMimickedJoint(...e){const t=e.map(i=&gt;i*this.multiplier+this.offset);return super.setJointValue(...t)}copy(e,t){return super.copy(e,t),this.mimicJoint=e.mimicJoint,this.offset=e.offset,this.multiplier=e.multiplier,this}}class yZ extends TL{constructor(...e){super(...e),this.isURDFRobot=!0,this.urdfNode=null,this.urdfRobotNode=null,this.robotName=null,this.links=null,this.joints=null,this.colliders=null,this.visual=null,this.frames=null}copy(e,t){super.copy(e,t),this.urdfRobotNode=e.urdfRobotNode,this.robotName=e.robotName,this.links={},this.joints={},this.colliders={},this.visual={},this.traverse(i=&gt;{i.isURDFJoint&amp;&amp;i.urdfName in e.joints&amp;&amp;(this.joints[i.urdfName]=i),i.isURDFLink&amp;&amp;i.urdfName in e.links&amp;&amp;(this.links[i.urdfName]=i),i.isURDFCollider&amp;&amp;i.urdfName in e.colliders&amp;&amp;(this.colliders[i.urdfName]=i),i.isURDFVisual&amp;&amp;i.urdfName in e.visual&amp;&amp;(this.visual[i.urdfName]=i)});for(const i in this.joints)this.joints[i].mimicJoints=this.joints[i].mimicJoints.map(r=&gt;this.joints[r.name]);return this.frames={...this.colliders,...this.visual,...this.links,...this.joints},this}getFrame(e){return this.frames[e]}setJointValue(e,...t){const i=this.joints[e];return i?i.setJointValue(...t):!1}setJointValues(e){let t=!1;for(const i in e){const r=e[i];Array.isArray(r)?t=this.setJointValue(i,...r)||t:t=this.setJointValue(i,r)||t}return t}}const Ux=new Si,e2=new Sr;function Hu(n){return n?n.trim().split(/\s+/g).map(e=&gt;parseFloat(e)):[0,0,0]}function t2(n,e,t=!1){t||n.rotation.set(0,0,0),e2.set(e[0],e[1],e[2],&quot;ZYX&quot;),Ux.setFromEuler(e2),Ux.multiply(n.quaternion),n.quaternion.copy(Ux)}class _Z{constructor(e){this.manager=e||Rw,this.loadMeshCb=this.defaultMeshLoader.bind(this),this.parseVisual=!0,this.parseCollision=!1,this.packages=&quot;&quot;,this.workingPath=&quot;&quot;,this.fetchOptions={}}loadAsync(e){return new Promise((t,i)=&gt;{this.load(e,t,null,i)})}load(e,t,i,r){const s=this.manager,o=vo.extractUrlBase(e),l=this.manager.resolveURL(e);s.itemStart(l),fetch(l,this.fetchOptions).then(u=&gt;{if(u.ok)return i&amp;&amp;i(null),u.text();throw new Error(`URDFLoader: Failed to load url &#x27;${l}&#x27; with error code ${u.status} : ${u.statusText}.`)}).then(u=&gt;{const h=this.parse(u,this.workingPath||o);t(h),s.itemEnd(l)}).catch(u=&gt;{r?r(u):console.error(&quot;URDFLoader: Error loading file.&quot;,u),s.itemError(l),s.itemEnd(l)})}parse(e,t=this.workingPath){const i=this.packages,r=this.loadMeshCb,s=this.parseVisual,o=this.parseCollision,l=this.manager,u={},h={},f={};function p(T){if(!/^package:\/\//.test(T))return t?t+T:T;const[w,E]=T.replace(/^package:\/\//,&quot;&quot;).split(/\/(.+)/);if(typeof i==&quot;string&quot;)return i.endsWith(w)?i+&quot;/&quot;+E:i+&quot;/&quot;+w+&quot;/&quot;+E;if(i instanceof Function)return i(w)+&quot;/&quot;+E;if(typeof i==&quot;object&quot;)return w in i?i[w]+&quot;/&quot;+E:(console.error(`URDFLoader : ${w} not found in provided package list.`),null)}function m(T){let w;T instanceof Document?w=[...T.children]:T instanceof Element?w=[T]:w=[...new DOMParser().parseFromString(T,&quot;text/xml&quot;).children];const E=w.filter(R=&gt;R.nodeName===&quot;robot&quot;).pop();return g(E)}function g(T){const w=[...T.children],E=w.filter(L=&gt;L.nodeName.toLowerCase()===&quot;link&quot;),R=w.filter(L=&gt;L.nodeName.toLowerCase()===&quot;joint&quot;),N=w.filter(L=&gt;L.nodeName.toLowerCase()===&quot;material&quot;),A=new yZ;A.robotName=T.getAttribute(&quot;name&quot;),A.urdfRobotNode=T,N.forEach(L=&gt;{const V=L.getAttribute(&quot;name&quot;);f[V]=b(L)});const D={},C={};E.forEach(L=&gt;{const V=L.getAttribute(&quot;name&quot;),Z=T.querySelector(`child[link=&quot;${V}&quot;]`)===null;u[V]=x(L,D,C,Z?A:null)}),R.forEach(L=&gt;{const V=L.getAttribute(&quot;name&quot;);h[V]=v(L)}),A.joints=h,A.links=u,A.colliders=C,A.visual=D;const O=Object.values(h);return O.forEach(L=&gt;{L instanceof QO&amp;&amp;h[L.mimicJoint].mimicJoints.push(L)}),O.forEach(L=&gt;{const V=new Set,Z=z=&gt;{if(V.has(z))throw new Error(&quot;URDFLoader: Detected an infinite loop of mimic joints.&quot;);V.add(z),z.mimicJoints.forEach(K=&gt;{Z(K)})};Z(L)}),A.frames={...C,...D,...u,...h},A}function v(T){const w=[...T.children],E=T.getAttribute(&quot;type&quot;);let R;const N=w.find(V=&gt;V.nodeName.toLowerCase()===&quot;mimic&quot;);N?(R=new QO,R.mimicJoint=N.getAttribute(&quot;joint&quot;),R.multiplier=parseFloat(N.getAttribute(&quot;multiplier&quot;)||1),R.offset=parseFloat(N.getAttribute(&quot;offset&quot;)||0)):R=new ML,R.urdfNode=T,R.name=T.getAttribute(&quot;name&quot;),R.urdfName=R.name,R.jointType=E;let A=null,D=null,C=[0,0,0],O=[0,0,0];w.forEach(V=&gt;{const Z=V.nodeName.toLowerCase();Z===&quot;origin&quot;?(C=Hu(V.getAttribute(&quot;xyz&quot;)),O=Hu(V.getAttribute(&quot;rpy&quot;))):Z===&quot;child&quot;?D=u[V.getAttribute(&quot;link&quot;)]:Z===&quot;parent&quot;?A=u[V.getAttribute(&quot;link&quot;)]:Z===&quot;limit&quot;&amp;&amp;(R.limit.lower=parseFloat(V.getAttribute(&quot;lower&quot;)||R.limit.lower),R.limit.upper=parseFloat(V.getAttribute(&quot;upper&quot;)||R.limit.upper))}),A.add(R),R.add(D),t2(R,O),R.position.set(C[0],C[1],C[2]);const L=w.filter(V=&gt;V.nodeName.toLowerCase()===&quot;axis&quot;)[0];if(L){const V=L.getAttribute(&quot;xyz&quot;).split(/\s+/g).map(Z=&gt;parseFloat(Z));R.axis=new Y(V[0],V[1],V[2]),R.axis.normalize()}return R}function x(T,w,E,R=null){R===null&amp;&amp;(R=new TL);const N=[...T.children];return R.name=T.getAttribute(&quot;name&quot;),R.urdfName=R.name,R.urdfNode=T,s&amp;&amp;N.filter(D=&gt;D.nodeName.toLowerCase()===&quot;visual&quot;).forEach(D=&gt;{const C=_(D,f);if(R.add(C),D.hasAttribute(&quot;name&quot;)){const O=D.getAttribute(&quot;name&quot;);C.name=O,C.urdfName=O,w[O]=C}}),o&amp;&amp;N.filter(D=&gt;D.nodeName.toLowerCase()===&quot;collision&quot;).forEach(D=&gt;{const C=_(D);if(R.add(C),D.hasAttribute(&quot;name&quot;)){const O=D.getAttribute(&quot;name&quot;);C.name=O,C.urdfName=O,E[O]=C}}),R}function b(T){const w=[...T.children],E=new cl;return E.name=T.getAttribute(&quot;name&quot;)||&quot;&quot;,w.forEach(R=&gt;{const N=R.nodeName.toLowerCase();if(N===&quot;color&quot;){const A=R.getAttribute(&quot;rgba&quot;).split(/\s/g).map(D=&gt;parseFloat(D));E.color.setRGB(A[0],A[1],A[2]),E.opacity=A[3],E.transparent=A[3]&lt;1,E.depthWrite=!E.transparent}else if(N===&quot;texture&quot;){const A=R.getAttribute(&quot;filename&quot;);if(A){const D=new Ly(l),C=p(A);E.map=D.load(C),E.map.colorSpace=Nn}}}),E}function _(T,w={}){const E=T.nodeName.toLowerCase()===&quot;collision&quot;,R=[...T.children];let N=null;const A=R.filter(C=&gt;C.nodeName.toLowerCase()===&quot;material&quot;)[0];if(A){const C=A.getAttribute(&quot;name&quot;);C&amp;&amp;C in w?N=w[C]:N=b(A)}else N=new cl;const D=E?new mZ:new gZ;return D.urdfNode=T,R.forEach(C=&gt;{const O=C.nodeName.toLowerCase();if(O===&quot;geometry&quot;){const L=C.children[0].nodeName.toLowerCase();if(L===&quot;mesh&quot;){const V=C.children[0].getAttribute(&quot;filename&quot;),Z=p(V);if(Z!==null){const z=C.children[0].getAttribute(&quot;scale&quot;);if(z){const K=Hu(z);D.scale.set(K[0],K[1],K[2])}r(Z,l,(K,I)=&gt;{I?console.error(&quot;URDFLoader: Error loading mesh.&quot;,I):K&amp;&amp;(K instanceof Sn&amp;&amp;(K.material=N),K.position.set(0,0,0),K.quaternion.identity(),D.add(K))})}}else if(L===&quot;box&quot;){const V=new Sn;V.geometry=new xl(1,1,1),V.material=N;const Z=Hu(C.children[0].getAttribute(&quot;size&quot;));V.scale.set(Z[0],Z[1],Z[2]),D.add(V)}else if(L===&quot;sphere&quot;){const V=new Sn;V.geometry=new Ch(1,30,30),V.material=N;const Z=parseFloat(C.children[0].getAttribute(&quot;radius&quot;))||0;V.scale.set(Z,Z,Z),D.add(V)}else if(L===&quot;cylinder&quot;){const V=new Sn;V.geometry=new Mh(1,1,1,30),V.material=N;const Z=parseFloat(C.children[0].getAttribute(&quot;radius&quot;))||0,z=parseFloat(C.children[0].getAttribute(&quot;length&quot;))||0;V.scale.set(Z,z,Z),V.rotation.set(Math.PI/2,0,0),D.add(V)}}else if(O===&quot;origin&quot;){const L=Hu(C.getAttribute(&quot;xyz&quot;)),V=Hu(C.getAttribute(&quot;rpy&quot;));D.position.set(L[0],L[1],L[2]),D.rotation.set(0,0,0),t2(D,V)}}),D}return m(e)}defaultMeshLoader(e,t,i){/\.stl$/i.test(e)?new td(t).load(e,s=&gt;{const o=new Sn(s,new cl);i(o)}):/\.dae$/i.test(e)?new dZ(t).load(e,s=&gt;i(s.scene)):console.warn(`URDFLoader: Could not load model at ${e}.
No loader available`)}}function vZ(){console.log(&quot;Loading robot&quot;);const n=new td;n.parse=function(r){try{return td.prototype.parse.call(this,r)}catch(s){if(console.warn(&quot;Binary STL failed. Trying ASCII fallback...&quot;,s),typeof r==&quot;string&quot;)return td.prototype.parse.call(this,r);{const l=new TextDecoder().decode(r);return td.prototype.parse.call(this,l)}}};let e=Zs.current;e||console.error(&quot;Scene is not defined&quot;);const t=&quot;./models/kr4_r600/urdf/kuka_kr4.urdf&quot;,i=new _Z;i.workingPath=&quot;./models/kr4_r600&quot;,i.packages={meshes:&quot;/models/kr4_r600/meshes&quot;},i.loadMeshCb=(r,s,o)=&gt;{fetch(r).then(l=&gt;{if(!l.ok)throw new Error(`HTTP error ${l.status} for ${r}`);return l.arrayBuffer()}).then(l=&gt;{const u=new Uint8Array(l.slice(0,100)),h=new TextDecoder().decode(u);console.log(&quot;STL header preview:&quot;,h);const f=n.parse(l),p=new Sn(f,new ts({color:10066329}));o(p)}).catch(l=&gt;{console.error(`Failed to load STL at ${r}`,l),o(null,l)})},i.load(t,r=&gt;{console.log(&quot;Robot loaded:&quot;,r),e?(r.traverse(s=&gt;{s.castShadow=!0}),e.add(r)):console.error(&quot;Scene still not available at load time&quot;)},r=&gt;{console.error(&quot;Failed to load URDF:&quot;,r)})}function bZ(){if(console.log(&quot;Debug print function called&quot;),gl.getState().hasAnimation?console.log(&quot;Animation found&quot;):console.log(&quot;No animation found&quot;),!Zs.current){console.log(&quot;Scene is null&quot;);return}if(!mc.current)console.log(&quot;No cameras found in the scene&quot;);else{let t=mc.current;console.log(&quot;Camera position:&quot;,t.position),console.log(&quot;Camera rotation:&quot;,t.rotation),console.log(&quot;Camera up:&quot;,t.up),console.log(&quot;Camera world up:&quot;,t.getWorldDirection(new Y)),console.log(&quot;Camera world direction:&quot;,t.getWorldDirection(new Y)),console.log(&quot;Camera quaternion:&quot;,t.quaternion),console.log(&quot;Camera matrix world:&quot;,t.matrixWorld),console.log(&quot;Camera matrix world inverse:&quot;,t.matrixWorldInverse),console.log(&quot;Camera projection matrix:&quot;,t.projectionMatrix),console.log(&quot;Camera projection matrix inverse:&quot;,t.projectionMatrixInverse),console.log(&quot;Camera frustum:&quot;,t.projectionMatrix.elements),console.log(&quot;Camera frustum planes:&quot;,t.projectionMatrix.elements),console.log(&quot;Camera frustum size:&quot;,t.projectionMatrix.elements.length)}if(!mS.current)console.log(&quot;No controls found in the scene&quot;);else{let t=mS.current;t instanceof Ic?(console.log(&quot;Controls type: OrbitControls&quot;),console.log(&quot;Controls target:&quot;,t.target),console.log(&quot;Controls position:&quot;,t.object.position)):(console.log(&quot;Controls type: CameraControls&quot;),console.log(&quot;Controls position:&quot;,t.camera.position))}}function xZ(){const{showPerf:n,setShowPerf:e,showEdges:t,setShowEdges:i,lockTranslation:r,setLockTranslation:s,setEnableWebsocket:o,enableWebsocket:l,enableNodeEditor:u,setEnableNodeEditor:h}=Bc(),{showLegend:f,setShowLegend:p}=ZS(),{zIsUp:m,setZIsUp:g,defaultOrbitController:v,setDefaultOrbitController:x}=eo(),[b]=re.useState({width:300,height:460}),[_,T]=re.useState({x:0,y:0}),[w,E]=re.useState(!1),R=window.UNIQUE_VERSION_ID||0,N=re.useCallback(D=&gt;{const C=Math.min(Math.max(0,D.x),window.innerWidth-b.width),O=Math.min(Math.max(0,D.y),window.innerHeight-b.height);return{x:C,y:O}},[b]),A=re.useCallback(()=&gt;{const D=(window.innerWidth-b.width)/2,C=(window.innerHeight-b.height)/2;T(N({x:D,y:C}))},[b,N]);return re.useEffect(()=&gt;(A(),window.addEventListener(&quot;resize&quot;,A),()=&gt;{window.removeEventListener(&quot;resize&quot;,A)}),[A]),P.jsx(i1,{default:{width:300,height:460,x:(window.innerWidth-300)/2,y:(window.innerHeight-460)/2},minWidth:250,bounds:&quot;window&quot;,enableResizing:{right:!0,bottomRight:!0},onDragStop:(D,C)=&gt;T({x:C.x,y:C.y}),onResizeStop:(D,C,O,L,V)=&gt;{T(V)},children:P.jsxs(&quot;div&quot;,{className:&quot;flex flex-col space-y-4 p-4 bg-gray-800 rounded shadow-lg h-full text-white text-sm&quot;,style:{height:&quot;auto&quot;,maxHeight:&quot;640px&quot;,overflowY:&quot;auto&quot;,width:&quot;100%&quot;,boxSizing:&quot;border-box&quot;},children:[P.jsx(&quot;div&quot;,{className:&quot;font-bold text-base&quot;,children:&quot;Options Panel&quot;}),P.jsxs(&quot;div&quot;,{className:&quot;text-xs text-gray-400&quot;,children:[&quot;Version: &quot;,R]}),P.jsxs(&quot;div&quot;,{className:&quot;space-y-2&quot;,children:[P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:()=&gt;bZ(),children:&quot;Debug print&quot;}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:vZ,children:&quot;Load URDF Model&quot;}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:async()=&gt;{try{await hZ()}catch(D){console.error(&quot;Error taking screenshot:&quot;,D)}},children:&quot;Take Screenshot&quot;})]}),P.jsx(&quot;hr&quot;,{className:&quot;border-gray-600&quot;}),P.jsxs(&quot;div&quot;,{className:&quot;space-y-2&quot;,children:[P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:n,onChange:()=&gt;e(!n)}),P.jsx(&quot;span&quot;,{children:&quot;Show Stats (Perf)&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:f,onChange:()=&gt;p(!f)}),P.jsx(&quot;span&quot;,{children:&quot;Show Color Legend&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:t,onChange:()=&gt;i(!t)}),P.jsx(&quot;span&quot;,{children:&quot;Geometry Edges&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:r,onChange:()=&gt;s(!r)}),P.jsx(&quot;span&quot;,{children:&quot;Lock Translation&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:u,onChange:()=&gt;h(!u)}),P.jsx(&quot;span&quot;,{children:&quot;Enable Node Editor&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:l,onChange:()=&gt;o(!l)}),P.jsx(&quot;span&quot;,{children:&quot;Enable Websocket&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:m,onChange:()=&gt;g(!m)}),P.jsx(&quot;span&quot;,{children:&quot;Z is UP&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:v,onChange:()=&gt;x(!v)}),P.jsx(&quot;span&quot;,{children:&quot;Use Default Orbitcontroller&quot;})]})]}),P.jsx(&quot;hr&quot;,{className:&quot;border-gray-600&quot;}),P.jsxs(&quot;div&quot;,{children:[P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:()=&gt;E(!w),children:&quot;Shortcut Keys&quot;}),w&amp;&amp;P.jsxs(&quot;div&quot;,{className:&quot;mt-2 bg-gray-700 p-2 rounded text-xs space-y-1&quot;,children:[P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + H&quot;}),&quot;: Hide&quot;]}),P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + U&quot;}),&quot;: Unhide All&quot;]}),P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + F&quot;}),&quot;: Center on Selection&quot;]}),P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + A&quot;}),&quot;: Zoom to All&quot;]}),P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + Q&quot;}),&quot;: Toggle Options Menu&quot;]})]})]})]})})}var SZ=OP();const AL=re.createContext(null);function ss(){const n=re.useContext(AL);if(n===null)throw new Error(&quot;No Tree Api Provided&quot;);return n}const CL=re.createContext(null);function wZ(){const n=re.useContext(CL);if(n===null)throw new Error(&quot;Provide a NodesContext&quot;);return n}const RL=re.createContext(null);function EZ(){const n=re.useContext(RL);if(n===null)throw new Error(&quot;Provide a DnDContext&quot;);return n}const OL=re.createContext(0);function DL(){re.useContext(OL)}function kg(n,e,t){return Math.max(Math.min(n,t),e)}function NL(n){return n&amp;&amp;n.isLeaf}function IL(n){return n&amp;&amp;n.isInternal&amp;&amp;!n.isOpen}function PL(n){var e;return n&amp;&amp;n.isOpen&amp;&amp;!(!((e=n.children)===null||e===void 0)&amp;&amp;e.length)}const LL=(n,e)=&gt;{let t=n;for(;t;){if(t.id===e.id)return!0;t=t.parent}return!1},UL=n=&gt;{if(!n.parent)throw Error(&quot;Node does not have a parent&quot;);return n.parent.children.findIndex(e=&gt;e.id===n.id)};function TZ(){}function s1(n,e){if(!n)return null;if(n.id===e)return n;if(n.children)for(let t of n.children){const i=s1(t,e);if(i)return i}return null}function q0(n,e){if(e(n),n.children)for(let t of n.children)q0(t,e)}function kL(n){const e=zL(n);let t;for(let i=0;i&lt;e.length;++i)if(e[i]===n){t=MZ(e,i);break}t==null||t.focus()}function FL(n){const e=zL(n);let t;for(let i=0;i&lt;e.length;++i)if(e[i]===n){t=AZ(e,i);break}t==null||t.focus()}function MZ(n,e){return e+1&lt;n.length?n[e+1]:n[0]}function AZ(n,e){return e-1&gt;=0?n[e-1]:n[n.length-1]}function zL(n){return Array.from(document.querySelectorAll(&#x27;button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=&quot;-1&quot;]):not([disabled]), details:not([disabled]), summary:not(:disabled)&#x27;)).filter(e=&gt;e===n||!n.contains(e))}function nd(n,e){return typeof e==&quot;boolean&quot;?e:typeof e==&quot;string&quot;?n[e]:e(n)}function BL(n){return n===null?null:cc(n)}function cc(n){return typeof n==&quot;string&quot;?n:n.id}function CZ(...n){return e=&gt;{n.forEach(t=&gt;{typeof t==&quot;function&quot;?t(e):t!=null&amp;&amp;(t.current=e)})}}function HL(n,...e){if(n)return n(...e)}function VL(n){return new Promise((e,t)=&gt;{let i=0;function r(){i+=1,i===100&amp;&amp;t(),n()?e():setTimeout(r,10)}r()})}function GL(n){var e,t;const i=n.focusedNode;return i?i.isOpen?0:i.parent?i.childIndex+1:0:(t=(e=n.root.children)===null||e===void 0?void 0:e.length)!==null&amp;&amp;t!==void 0?t:0}function jL(n){const e=n.focusedNode;return e?e.isOpen?e.id:e.parent&amp;&amp;!e.parent.isRoot?e.parent.id:null:null}const RZ=Object.freeze(Object.defineProperty({__proto__:null,access:nd,bound:kg,dfs:s1,focusNextElement:kL,focusPrevElement:FL,getInsertIndex:GL,getInsertParentId:jL,identify:cc,identifyNull:BL,indexOf:UL,isClosed:IL,isDescendant:LL,isItem:NL,isOpenWithEmptyChildren:PL,mergeRefs:CZ,noop:TZ,safeRun:HL,waitFor:VL,walk:q0},Symbol.toStringTag,{value:&quot;Module&quot;})),OZ={display:&quot;flex&quot;,alignItems:&quot;center&quot;,zIndex:1},DZ={flex:1,height:&quot;2px&quot;,background:&quot;#4B91E2&quot;,borderRadius:&quot;1px&quot;},NZ={width:&quot;4px&quot;,height:&quot;4px&quot;,boxShadow:&quot;0 0 0 3px #4B91E2&quot;,borderRadius:&quot;50%&quot;},IZ=md.memo(function({top:e,left:t,indent:i}){const r={position:&quot;absolute&quot;,pointerEvents:&quot;none&quot;,top:e-2+&quot;px&quot;,left:t+&quot;px&quot;,right:i+&quot;px&quot;};return P.jsxs(&quot;div&quot;,{style:Object.assign(Object.assign({},OZ),r),children:[P.jsx(&quot;div&quot;,{style:Object.assign({},NZ)}),P.jsx(&quot;div&quot;,{style:Object.assign({},DZ)})]})});function PZ({node:n,attrs:e,innerRef:t,children:i}){return P.jsx(&quot;div&quot;,Object.assign({},e,{ref:t,onFocus:r=&gt;r.stopPropagation(),onClick:n.handleClick,children:i}))}function LZ(n){return P.jsxs(&quot;div&quot;,{ref:n.dragHandle,style:n.style,children:[P.jsx(&quot;span&quot;,{onClick:e=&gt;{e.stopPropagation(),n.node.toggle()},children:n.node.isLeaf?&quot;🌳&quot;:n.node.isOpen?&quot;🗁&quot;:&quot;🗀&quot;}),&quot; &quot;,n.node.isEditing?P.jsx(kZ,Object.assign({},n)):P.jsx(UZ,Object.assign({},n))]})}function UZ(n){return P.jsx(P.Fragment,{children:P.jsx(&quot;span&quot;,{children:n.node.data.name})})}function kZ({node:n}){const e=re.useRef();return re.useEffect(()=&gt;{var t,i;(t=e.current)===null||t===void 0||t.focus(),(i=e.current)===null||i===void 0||i.select()},[]),P.jsx(&quot;input&quot;,{ref:e,defaultValue:n.data.name,onBlur:()=&gt;n.reset(),onKeyDown:t=&gt;{var i;t.key===&quot;Escape&quot;&amp;&amp;n.reset(),t.key===&quot;Enter&quot;&amp;&amp;n.submit(((i=e.current)===null||i===void 0?void 0:i.value)||&quot;&quot;)}})}function kx(n){return{type:&quot;EDIT&quot;,id:n}}function FZ(n={id:null},e){return e.type===&quot;EDIT&quot;?Object.assign(Object.assign({},n),{id:e.id}):n}function Vu(n){return{type:&quot;FOCUS&quot;,id:n}}function zZ(){return{type:&quot;TREE_BLUR&quot;}}function BZ(n={id:null,treeFocused:!1},e){return e.type===&quot;FOCUS&quot;?Object.assign(Object.assign({},n),{id:e.id,treeFocused:!0}):e.type===&quot;TREE_BLUR&quot;?Object.assign(Object.assign({},n),{treeFocused:!1}):n}class Y0{constructor(e){this.handleClick=t=&gt;{t.metaKey&amp;&amp;!this.tree.props.disableMultiSelection?this.isSelected?this.deselect():this.selectMulti():t.shiftKey&amp;&amp;!this.tree.props.disableMultiSelection?this.selectContiguous():(this.select(),this.activate())},this.tree=e.tree,this.id=e.id,this.data=e.data,this.level=e.level,this.children=e.children,this.parent=e.parent,this.isDraggable=e.isDraggable,this.rowIndex=e.rowIndex}get isRoot(){return this.id===Hd}get isLeaf(){return!Array.isArray(this.children)}get isInternal(){return!this.isLeaf}get isOpen(){return this.isLeaf?!1:this.tree.isOpen(this.id)}get isClosed(){return this.isLeaf?!1:!this.tree.isOpen(this.id)}get isEditable(){return this.tree.isEditable(this.data)}get isEditing(){return this.tree.editingId===this.id}get isSelected(){return this.tree.isSelected(this.id)}get isOnlySelection(){return this.isSelected&amp;&amp;this.tree.hasOneSelection}get isSelectedStart(){var e;return this.isSelected&amp;&amp;!(!((e=this.prev)===null||e===void 0)&amp;&amp;e.isSelected)}get isSelectedEnd(){var e;return this.isSelected&amp;&amp;!(!((e=this.next)===null||e===void 0)&amp;&amp;e.isSelected)}get isFocused(){return this.tree.isFocused(this.id)}get isDragging(){return this.tree.isDragging(this.id)}get willReceiveDrop(){return this.tree.willReceiveDrop(this.id)}get state(){return{isClosed:this.isClosed,isDragging:this.isDragging,isEditing:this.isEditing,isFocused:this.isFocused,isInternal:this.isInternal,isLeaf:this.isLeaf,isOpen:this.isOpen,isSelected:this.isSelected,isSelectedEnd:this.isSelectedEnd,isSelectedStart:this.isSelectedStart,willReceiveDrop:this.willReceiveDrop}}get childIndex(){return this.parent&amp;&amp;this.parent.children?this.parent.children.findIndex(e=&gt;e.id===this.id):-1}get next(){return this.rowIndex===null?null:this.tree.at(this.rowIndex+1)}get prev(){return this.rowIndex===null?null:this.tree.at(this.rowIndex-1)}get nextSibling(){var e,t;const i=this.childIndex;return(t=(e=this.parent)===null||e===void 0?void 0:e.children[i+1])!==null&amp;&amp;t!==void 0?t:null}isAncestorOf(e){if(!e)return!1;let t=e;for(;t;){if(t.id===this.id)return!0;t=t.parent}return!1}select(){this.tree.select(this)}deselect(){this.tree.deselect(this)}selectMulti(){this.tree.selectMulti(this)}selectContiguous(){this.tree.selectContiguous(this)}activate(){this.tree.activate(this)}focus(){this.tree.focus(this)}toggle(){this.tree.toggle(this)}open(){this.tree.open(this)}openParents(){this.tree.openParents(this)}close(){this.tree.close(this)}submit(e){this.tree.submit(this,e)}reset(){this.tree.reset()}clone(){return new Y0(Object.assign({},this))}edit(){return this.tree.edit(this)}}const Hd=&quot;__REACT_ARBORIST_INTERNAL_ROOT__&quot;;function n2(n){var e;function t(s,o,l){const u=n.accessId(s),h=new Y0({tree:n,data:s,level:o,parent:l,id:u,children:null,isDraggable:n.isDraggable(s),rowIndex:null}),f=n.accessChildren(s);return f&amp;&amp;(h.children=f.map(p=&gt;t(p,o+1,h))),h}const i=new Y0({tree:n,id:Hd,data:{id:Hd},level:-1,parent:null,children:null,isDraggable:!0,rowIndex:null}),r=(e=n.props.data)!==null&amp;&amp;e!==void 0?e:[];return i.children=r.map(s=&gt;t(s,0,i)),i}const VS={open(n,e){return{type:&quot;VISIBILITY_OPEN&quot;,id:n,filtered:e}},close(n,e){return{type:&quot;VISIBILITY_CLOSE&quot;,id:n,filtered:e}},toggle(n,e){return{type:&quot;VISIBILITY_TOGGLE&quot;,id:n,filtered:e}},clear(n){return{type:&quot;VISIBILITY_CLEAR&quot;,filtered:n}}};function i2(n={},e){if(e.type===&quot;VISIBILITY_OPEN&quot;)return Object.assign(Object.assign({},n),{[e.id]:!0});if(e.type===&quot;VISIBILITY_CLOSE&quot;)return Object.assign(Object.assign({},n),{[e.id]:!1});if(e.type===&quot;VISIBILITY_TOGGLE&quot;){const t=n[e.id];return Object.assign(Object.assign({},n),{[e.id]:!t})}else return e.type===&quot;VISIBILITY_CLEAR&quot;?{}:n}function HZ(n={filtered:{},unfiltered:{}},e){return e.type.startsWith(&quot;VISIBILITY&quot;)?e.filtered?Object.assign(Object.assign({},n),{filtered:i2(n.filtered,e)}):Object.assign(Object.assign({},n),{unfiltered:i2(n.unfiltered,e)}):n}const bh=n=&gt;{var e;return{nodes:{open:{filtered:{},unfiltered:(e=n==null?void 0:n.initialOpenState)!==null&amp;&amp;e!==void 0?e:{}},focus:{id:null,treeFocused:!1},edit:{id:null},drag:{id:null,selectedIds:[],destinationParentId:null,destinationIndex:null},selection:{ids:new Set,anchor:null,mostRecent:null}},dnd:{cursor:{type:&quot;none&quot;},dragId:null,dragIds:[],parentId:null,index:-1}}},Fs={clear:()=&gt;({type:&quot;SELECTION_CLEAR&quot;}),only:n=&gt;({type:&quot;SELECTION_ONLY&quot;,id:cc(n)}),add:n=&gt;({type:&quot;SELECTION_ADD&quot;,ids:(Array.isArray(n)?n:[n]).map(cc)}),remove:n=&gt;({type:&quot;SELECTION_REMOVE&quot;,ids:(Array.isArray(n)?n:[n]).map(cc)}),set:n=&gt;Object.assign({type:&quot;SELECTION_SET&quot;},n),mostRecent:n=&gt;({type:&quot;SELECTION_MOST_RECENT&quot;,id:n===null?null:cc(n)}),anchor:n=&gt;({type:&quot;SELECTION_ANCHOR&quot;,id:n===null?null:cc(n)})};function VZ(n=bh().nodes.selection,e){const t=n.ids;switch(e.type){case&quot;SELECTION_CLEAR&quot;:return Object.assign(Object.assign({},n),{ids:new Set});case&quot;SELECTION_ONLY&quot;:return Object.assign(Object.assign({},n),{ids:new Set([e.id])});case&quot;SELECTION_ADD&quot;:return e.ids.length===0?n:(e.ids.forEach(i=&gt;t.add(i)),Object.assign(Object.assign({},n),{ids:new Set(t)}));case&quot;SELECTION_REMOVE&quot;:return e.ids.length===0?n:(e.ids.forEach(i=&gt;t.delete(i)),Object.assign(Object.assign({},n),{ids:new Set(t)}));case&quot;SELECTION_SET&quot;:return Object.assign(Object.assign({},n),{ids:e.ids,mostRecent:e.mostRecent,anchor:e.anchor});case&quot;SELECTION_MOST_RECENT&quot;:return Object.assign(Object.assign({},n),{mostRecent:e.id});case&quot;SELECTION_ANCHOR&quot;:return Object.assign(Object.assign({},n),{anchor:e.id});default:return n}}const xh={cursor(n){return{type:&quot;DND_CURSOR&quot;,cursor:n}},dragStart(n,e){return{type:&quot;DND_DRAG_START&quot;,id:n,dragIds:e}},dragEnd(){return{type:&quot;DND_DRAG_END&quot;}},hovering(n,e){return{type:&quot;DND_HOVERING&quot;,parentId:n,index:e}}};function GZ(n=bh().dnd,e){switch(e.type){case&quot;DND_CURSOR&quot;:return Object.assign(Object.assign({},n),{cursor:e.cursor});case&quot;DND_DRAG_START&quot;:return Object.assign(Object.assign({},n),{dragId:e.id,dragIds:e.dragIds});case&quot;DND_DRAG_END&quot;:return bh().dnd;case&quot;DND_HOVERING&quot;:return Object.assign(Object.assign({},n),{parentId:e.parentId,index:e.index});default:return n}}const jZ={position:&quot;fixed&quot;,pointerEvents:&quot;none&quot;,zIndex:100,left:0,top:0,width:&quot;100%&quot;,height:&quot;100%&quot;},WZ=n=&gt;{if(!n)return{display:&quot;none&quot;};const{x:e,y:t}=n;return{transform:`translate(${e}px, ${t}px)`}},XZ=n=&gt;{if(!n)return{display:&quot;none&quot;};const{x:e,y:t}=n;return{transform:`translate(${e+10}px, ${t+10}px)`}};function WL({offset:n,mouse:e,id:t,dragIds:i,isDragging:r}){return P.jsxs(qZ,{isDragging:r,children:[P.jsx(YZ,{offset:n,children:P.jsx($Z,{id:t,dragIds:i})}),P.jsx(KZ,{mouse:e,count:i.length})]})}const qZ=re.memo(function(e){return e.isDragging?P.jsx(&quot;div&quot;,{style:jZ,children:e.children}):null});function YZ(n){return P.jsx(&quot;div&quot;,{className:&quot;row preview&quot;,style:WZ(n.offset),children:n.children})}function KZ(n){const{count:e,mouse:t}=n;return e&gt;1?P.jsx(&quot;div&quot;,{className:&quot;selected-count&quot;,style:XZ(t),children:e}):null}const $Z=re.memo(function(e){const t=ss(),i=t.get(e.id);return i?P.jsx(t.renderNode,{preview:!0,node:i,style:{paddingLeft:i.level*t.indent,opacity:.2,background:&quot;transparent&quot;},tree:t}):null});function GS(){return GS=Object.assign?Object.assign.bind():function(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&amp;&amp;(n[i]=t[i])}return n},GS.apply(null,arguments)}function r2(n){if(n===void 0)throw new ReferenceError(&quot;this hasn&#x27;t been initialised - super() hasn&#x27;t been called&quot;);return n}function jS(n,e){return jS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},jS(n,e)}function ZZ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,jS(n,e)}var s2=Number.isNaN||function(e){return typeof e==&quot;number&quot;&amp;&amp;e!==e};function JZ(n,e){return!!(n===e||s2(n)&amp;&amp;s2(e))}function QZ(n,e){if(n.length!==e.length)return!1;for(var t=0;t&lt;n.length;t++)if(!JZ(n[t],e[t]))return!1;return!0}function Fx(n,e){e===void 0&amp;&amp;(e=QZ);var t,i=[],r,s=!1;function o(){for(var l=[],u=0;u&lt;arguments.length;u++)l[u]=arguments[u];return s&amp;&amp;t===this&amp;&amp;e(l,i)||(r=n.apply(this,l),s=!0,t=this,i=l),r}return o}var eJ=typeof performance==&quot;object&quot;&amp;&amp;typeof performance.now==&quot;function&quot;,o2=eJ?function(){return performance.now()}:function(){return Date.now()};function a2(n){cancelAnimationFrame(n.id)}function tJ(n,e){var t=o2();function i(){o2()-t&gt;=e?n.call(null):r.id=requestAnimationFrame(i)}var r={id:requestAnimationFrame(i)};return r}var zx=-1;function l2(n){if(n===void 0&amp;&amp;(n=!1),zx===-1||n){var e=document.createElement(&quot;div&quot;),t=e.style;t.width=&quot;50px&quot;,t.height=&quot;50px&quot;,t.overflow=&quot;scroll&quot;,document.body.appendChild(e),zx=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return zx}var Gu=null;function c2(n){if(n===void 0&amp;&amp;(n=!1),Gu===null||n){var e=document.createElement(&quot;div&quot;),t=e.style;t.width=&quot;50px&quot;,t.height=&quot;50px&quot;,t.overflow=&quot;scroll&quot;,t.direction=&quot;rtl&quot;;var i=document.createElement(&quot;div&quot;),r=i.style;return r.width=&quot;100px&quot;,r.height=&quot;100px&quot;,e.appendChild(i),document.body.appendChild(e),e.scrollLeft&gt;0?Gu=&quot;positive-descending&quot;:(e.scrollLeft=1,e.scrollLeft===0?Gu=&quot;negative&quot;:Gu=&quot;positive-ascending&quot;),document.body.removeChild(e),Gu}return Gu}var nJ=150,iJ=function(e,t){return e};function rJ(n){var e,t=n.getItemOffset,i=n.getEstimatedTotalSize,r=n.getItemSize,s=n.getOffsetForIndexAndAlignment,o=n.getStartIndexForOffset,l=n.getStopIndexForStartIndex,u=n.initInstanceProps,h=n.shouldResetStyleCacheOnItemSizeChange,f=n.validateProps;return e=function(p){ZZ(m,p);function m(v){var x;return x=p.call(this,v)||this,x._instanceProps=u(x.props,r2(x)),x._outerRef=void 0,x._resetIsScrollingTimeoutId=null,x.state={instance:r2(x),isScrolling:!1,scrollDirection:&quot;forward&quot;,scrollOffset:typeof x.props.initialScrollOffset==&quot;number&quot;?x.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},x._callOnItemsRendered=void 0,x._callOnItemsRendered=Fx(function(b,_,T,w){return x.props.onItemsRendered({overscanStartIndex:b,overscanStopIndex:_,visibleStartIndex:T,visibleStopIndex:w})}),x._callOnScroll=void 0,x._callOnScroll=Fx(function(b,_,T){return x.props.onScroll({scrollDirection:b,scrollOffset:_,scrollUpdateWasRequested:T})}),x._getItemStyle=void 0,x._getItemStyle=function(b){var _=x.props,T=_.direction,w=_.itemSize,E=_.layout,R=x._getItemStyleCache(h&amp;&amp;w,h&amp;&amp;E,h&amp;&amp;T),N;if(R.hasOwnProperty(b))N=R[b];else{var A=t(x.props,b,x._instanceProps),D=r(x.props,b,x._instanceProps),C=T===&quot;horizontal&quot;||E===&quot;horizontal&quot;,O=T===&quot;rtl&quot;,L=C?A:0;R[b]=N={position:&quot;absolute&quot;,left:O?void 0:L,right:O?L:void 0,top:C?0:A,height:C?&quot;100%&quot;:D,width:C?D:&quot;100%&quot;}}return N},x._getItemStyleCache=void 0,x._getItemStyleCache=Fx(function(b,_,T){return{}}),x._onScrollHorizontal=function(b){var _=b.currentTarget,T=_.clientWidth,w=_.scrollLeft,E=_.scrollWidth;x.setState(function(R){if(R.scrollOffset===w)return null;var N=x.props.direction,A=w;if(N===&quot;rtl&quot;)switch(c2()){case&quot;negative&quot;:A=-w;break;case&quot;positive-descending&quot;:A=E-T-w;break}return A=Math.max(0,Math.min(A,E-T)),{isScrolling:!0,scrollDirection:R.scrollOffset&lt;A?&quot;forward&quot;:&quot;backward&quot;,scrollOffset:A,scrollUpdateWasRequested:!1}},x._resetIsScrollingDebounced)},x._onScrollVertical=function(b){var _=b.currentTarget,T=_.clientHeight,w=_.scrollHeight,E=_.scrollTop;x.setState(function(R){if(R.scrollOffset===E)return null;var N=Math.max(0,Math.min(E,w-T));return{isScrolling:!0,scrollDirection:R.scrollOffset&lt;N?&quot;forward&quot;:&quot;backward&quot;,scrollOffset:N,scrollUpdateWasRequested:!1}},x._resetIsScrollingDebounced)},x._outerRefSetter=function(b){var _=x.props.outerRef;x._outerRef=b,typeof _==&quot;function&quot;?_(b):_!=null&amp;&amp;typeof _==&quot;object&quot;&amp;&amp;_.hasOwnProperty(&quot;current&quot;)&amp;&amp;(_.current=b)},x._resetIsScrollingDebounced=function(){x._resetIsScrollingTimeoutId!==null&amp;&amp;a2(x._resetIsScrollingTimeoutId),x._resetIsScrollingTimeoutId=tJ(x._resetIsScrolling,nJ)},x._resetIsScrolling=function(){x._resetIsScrollingTimeoutId=null,x.setState({isScrolling:!1},function(){x._getItemStyleCache(-1,null)})},x}m.getDerivedStateFromProps=function(x,b){return sJ(x,b),f(x),null};var g=m.prototype;return g.scrollTo=function(x){x=Math.max(0,x),this.setState(function(b){return b.scrollOffset===x?null:{scrollDirection:b.scrollOffset&lt;x?&quot;forward&quot;:&quot;backward&quot;,scrollOffset:x,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},g.scrollToItem=function(x,b){b===void 0&amp;&amp;(b=&quot;auto&quot;);var _=this.props,T=_.itemCount,w=_.layout,E=this.state.scrollOffset;x=Math.max(0,Math.min(x,T-1));var R=0;if(this._outerRef){var N=this._outerRef;w===&quot;vertical&quot;?R=N.scrollWidth&gt;N.clientWidth?l2():0:R=N.scrollHeight&gt;N.clientHeight?l2():0}this.scrollTo(s(this.props,x,b,E,this._instanceProps,R))},g.componentDidMount=function(){var x=this.props,b=x.direction,_=x.initialScrollOffset,T=x.layout;if(typeof _==&quot;number&quot;&amp;&amp;this._outerRef!=null){var w=this._outerRef;b===&quot;horizontal&quot;||T===&quot;horizontal&quot;?w.scrollLeft=_:w.scrollTop=_}this._callPropsCallbacks()},g.componentDidUpdate=function(){var x=this.props,b=x.direction,_=x.layout,T=this.state,w=T.scrollOffset,E=T.scrollUpdateWasRequested;if(E&amp;&amp;this._outerRef!=null){var R=this._outerRef;if(b===&quot;horizontal&quot;||_===&quot;horizontal&quot;)if(b===&quot;rtl&quot;)switch(c2()){case&quot;negative&quot;:R.scrollLeft=-w;break;case&quot;positive-ascending&quot;:R.scrollLeft=w;break;default:var N=R.clientWidth,A=R.scrollWidth;R.scrollLeft=A-N-w;break}else R.scrollLeft=w;else R.scrollTop=w}this._callPropsCallbacks()},g.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&amp;&amp;a2(this._resetIsScrollingTimeoutId)},g.render=function(){var x=this.props,b=x.children,_=x.className,T=x.direction,w=x.height,E=x.innerRef,R=x.innerElementType,N=x.innerTagName,A=x.itemCount,D=x.itemData,C=x.itemKey,O=C===void 0?iJ:C,L=x.layout,V=x.outerElementType,Z=x.outerTagName,z=x.style,K=x.useIsScrolling,I=x.width,j=this.state.isScrolling,G=T===&quot;horizontal&quot;||L===&quot;horizontal&quot;,ee=G?this._onScrollHorizontal:this._onScrollVertical,F=this._getRangeToRender(),ne=F[0],le=F[1],ce=[];if(A&gt;0)for(var ie=ne;ie&lt;=le;ie++)ce.push(re.createElement(b,{data:D,key:O(ie,D),index:ie,isScrolling:K?j:void 0,style:this._getItemStyle(ie)}));var oe=i(this.props,this._instanceProps);return re.createElement(V||Z||&quot;div&quot;,{className:_,onScroll:ee,ref:this._outerRefSetter,style:GS({position:&quot;relative&quot;,height:w,width:I,overflow:&quot;auto&quot;,WebkitOverflowScrolling:&quot;touch&quot;,willChange:&quot;transform&quot;,direction:T},z)},re.createElement(R||N||&quot;div&quot;,{children:ce,ref:E,style:{height:G?&quot;100%&quot;:oe,pointerEvents:j?&quot;none&quot;:void 0,width:G?oe:&quot;100%&quot;}}))},g._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered==&quot;function&quot;){var x=this.props.itemCount;if(x&gt;0){var b=this._getRangeToRender(),_=b[0],T=b[1],w=b[2],E=b[3];this._callOnItemsRendered(_,T,w,E)}}if(typeof this.props.onScroll==&quot;function&quot;){var R=this.state,N=R.scrollDirection,A=R.scrollOffset,D=R.scrollUpdateWasRequested;this._callOnScroll(N,A,D)}},g._getRangeToRender=function(){var x=this.props,b=x.itemCount,_=x.overscanCount,T=this.state,w=T.isScrolling,E=T.scrollDirection,R=T.scrollOffset;if(b===0)return[0,0,0,0];var N=o(this.props,R,this._instanceProps),A=l(this.props,N,R,this._instanceProps),D=!w||E===&quot;backward&quot;?Math.max(1,_):1,C=!w||E===&quot;forward&quot;?Math.max(1,_):1;return[Math.max(0,N-D),Math.max(0,Math.min(b-1,A+C)),N,A]},m}(re.PureComponent),e.defaultProps={direction:&quot;ltr&quot;,itemData:void 0,layout:&quot;vertical&quot;,overscanCount:2,useIsScrolling:!1},e}var sJ=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},oJ=rJ({getItemOffset:function(e,t){var i=e.itemSize;return t*i},getItemSize:function(e,t){var i=e.itemSize;return i},getEstimatedTotalSize:function(e){var t=e.itemCount,i=e.itemSize;return i*t},getOffsetForIndexAndAlignment:function(e,t,i,r,s,o){var l=e.direction,u=e.height,h=e.itemCount,f=e.itemSize,p=e.layout,m=e.width,g=l===&quot;horizontal&quot;||p===&quot;horizontal&quot;,v=g?m:u,x=Math.max(0,h*f-v),b=Math.min(x,t*f),_=Math.max(0,t*f-v+f+o);switch(i===&quot;smart&quot;&amp;&amp;(r&gt;=_-v&amp;&amp;r&lt;=b+v?i=&quot;auto&quot;:i=&quot;center&quot;),i){case&quot;start&quot;:return b;case&quot;end&quot;:return _;case&quot;center&quot;:{var T=Math.round(_+(b-_)/2);return T&lt;Math.ceil(v/2)?0:T&gt;x+Math.floor(v/2)?x:T}case&quot;auto&quot;:default:return r&gt;=_&amp;&amp;r&lt;=b?r:r&lt;_?_:b}},getStartIndexForOffset:function(e,t){var i=e.itemCount,r=e.itemSize;return Math.max(0,Math.min(i-1,Math.floor(t/r)))},getStopIndexForStartIndex:function(e,t,i){var r=e.direction,s=e.height,o=e.itemCount,l=e.itemSize,u=e.layout,h=e.width,f=r===&quot;horizontal&quot;||u===&quot;horizontal&quot;,p=t*l,m=f?h:s,g=Math.ceil((m+i-p)/l);return Math.max(0,Math.min(o-1,t+g-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function aJ(){var n,e;const t=ss(),r=EZ().cursor;if(!r||r.type!==&quot;line&quot;)return null;const s=t.indent,o=t.rowHeight*r.index+((e=(n=t.props.padding)!==null&amp;&amp;n!==void 0?n:t.props.paddingTop)!==null&amp;&amp;e!==void 0?e:0),l=s*r.level,u=t.renderCursor;return P.jsx(u,{top:o,left:l,indent:s})}var lJ=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;e.indexOf(i)&lt;0&amp;&amp;(t[i]=n[i]);if(n!=null&amp;&amp;typeof Object.getOwnPropertySymbols==&quot;function&quot;)for(var r=0,i=Object.getOwnPropertySymbols(n);r&lt;i.length;r++)e.indexOf(i[r])&lt;0&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i[r])&amp;&amp;(t[i[r]]=n[i[r]]);return t};const cJ=re.forwardRef(function(e,t){const{children:i}=e,r=lJ(e,[&quot;children&quot;]),s=ss();return P.jsxs(&quot;div&quot;,Object.assign({ref:t},r,{onClick:o=&gt;{o.currentTarget===o.target&amp;&amp;s.deselectAll()},children:[P.jsx(uJ,{}),i]}))}),uJ=()=&gt;{const n=ss();return P.jsx(&quot;div&quot;,{style:{height:n.visibleNodes.length*n.rowHeight,width:&quot;100%&quot;,position:&quot;absolute&quot;,left:&quot;0&quot;,right:&quot;0&quot;},children:P.jsx(aJ,{})})};var hJ=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;e.indexOf(i)&lt;0&amp;&amp;(t[i]=n[i]);if(n!=null&amp;&amp;typeof Object.getOwnPropertySymbols==&quot;function&quot;)for(var r=0,i=Object.getOwnPropertySymbols(n);r&lt;i.length;r++)e.indexOf(i[r])&lt;0&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i[r])&amp;&amp;(t[i[r]]=n[i[r]]);return t};const fJ=re.forwardRef(function(e,t){var i,r,s,o,{style:l}=e,u=hJ(e,[&quot;style&quot;]);const h=ss(),f=(r=(i=h.props.padding)!==null&amp;&amp;i!==void 0?i:h.props.paddingTop)!==null&amp;&amp;r!==void 0?r:0,p=(o=(s=h.props.padding)!==null&amp;&amp;s!==void 0?s:h.props.paddingBottom)!==null&amp;&amp;o!==void 0?o:0;return P.jsx(&quot;div&quot;,Object.assign({ref:t,style:Object.assign(Object.assign({},l),{height:`${parseFloat(l.height)+f+p}px`})},u))});var XL=re.createContext({dragDropManager:void 0}),xs;(function(n){n.SOURCE=&quot;SOURCE&quot;,n.TARGET=&quot;TARGET&quot;})(xs||(xs={}));function Wt(n,e){for(var t=arguments.length,i=new Array(t&gt;2?t-2:0),r=2;r&lt;t;r++)i[r-2]=arguments[r];if(!n){var s;if(e===void 0)s=new Error(&quot;Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.&quot;);else{var o=0;s=new Error(e.replace(/%s/g,function(){return i[o++]})),s.name=&quot;Invariant Violation&quot;}throw s.framesToPop=1,s}}var o1=&quot;dnd-core/INIT_COORDS&quot;,s_=&quot;dnd-core/BEGIN_DRAG&quot;,a1=&quot;dnd-core/PUBLISH_DRAG_SOURCE&quot;,o_=&quot;dnd-core/HOVER&quot;,a_=&quot;dnd-core/DROP&quot;,l_=&quot;dnd-core/END_DRAG&quot;;function u2(n,e){return{type:o1,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}function Fg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?Fg=function(t){return typeof t}:Fg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},Fg(n)}function dJ(n,e,t){return e.split(&quot;.&quot;).reduce(function(i,r){return i&amp;&amp;i[r]?i[r]:t||null},n)}function pJ(n,e){return n.filter(function(t){return t!==e})}function qL(n){return Fg(n)===&quot;object&quot;}function mJ(n,e){var t=new Map,i=function(o){t.set(o,t.has(o)?t.get(o)+1:1)};n.forEach(i),e.forEach(i);var r=[];return t.forEach(function(s,o){s===1&amp;&amp;r.push(o)}),r}function gJ(n,e){return n.filter(function(t){return e.indexOf(t)&gt;-1})}var yJ={type:o1,payload:{clientOffset:null,sourceClientOffset:null}};function _J(n){return function(){var t=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:[],i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{publishSource:!0},r=i.publishSource,s=r===void 0?!0:r,o=i.clientOffset,l=i.getSourceClientOffset,u=n.getMonitor(),h=n.getRegistry();n.dispatch(u2(o)),vJ(t,u,h);var f=SJ(t,u);if(f===null){n.dispatch(yJ);return}var p=null;if(o){if(!l)throw new Error(&quot;getSourceClientOffset must be defined&quot;);bJ(l),p=l(f)}n.dispatch(u2(o,p));var m=h.getSource(f),g=m.beginDrag(u,f);if(g!=null){xJ(g),h.pinSource(f);var v=h.getSourceType(f);return{type:s_,payload:{itemType:v,item:g,sourceId:f,clientOffset:o||null,sourceClientOffset:p||null,isSourcePublic:!!s}}}}}function vJ(n,e,t){Wt(!e.isDragging(),&quot;Cannot call beginDrag while dragging.&quot;),n.forEach(function(i){Wt(t.getSource(i),&quot;Expected sourceIds to be registered.&quot;)})}function bJ(n){Wt(typeof n==&quot;function&quot;,&quot;When clientOffset is provided, getSourceClientOffset must be a function.&quot;)}function xJ(n){Wt(qL(n),&quot;Item must be an object.&quot;)}function SJ(n,e){for(var t=null,i=n.length-1;i&gt;=0;i--)if(e.canDragSource(n[i])){t=n[i];break}return t}function wJ(n){return function(){var t=n.getMonitor();if(t.isDragging())return{type:a1}}}function WS(n,e){return e===null?n===null:Array.isArray(n)?n.some(function(t){return t===e}):n===e}function EJ(n){return function(t){var i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{},r=i.clientOffset;TJ(t);var s=t.slice(0),o=n.getMonitor(),l=n.getRegistry();MJ(s,o,l);var u=o.getItemType();return AJ(s,l,u),CJ(s,o,l),{type:o_,payload:{targetIds:s,clientOffset:r||null}}}}function TJ(n){Wt(Array.isArray(n),&quot;Expected targetIds to be an array.&quot;)}function MJ(n,e,t){Wt(e.isDragging(),&quot;Cannot call hover while not dragging.&quot;),Wt(!e.didDrop(),&quot;Cannot call hover after drop.&quot;);for(var i=0;i&lt;n.length;i++){var r=n[i];Wt(n.lastIndexOf(r)===i,&quot;Expected targetIds to be unique in the passed array.&quot;);var s=t.getTarget(r);Wt(s,&quot;Expected targetIds to be registered.&quot;)}}function AJ(n,e,t){for(var i=n.length-1;i&gt;=0;i--){var r=n[i],s=e.getTargetType(r);WS(s,t)||n.splice(i,1)}}function CJ(n,e,t){n.forEach(function(i){var r=t.getTarget(i);r.hover(e,i)})}function h2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function f2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h2(Object(t),!0).forEach(function(i){RJ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function RJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OJ(n){return function(){var t=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{},i=n.getMonitor(),r=n.getRegistry();DJ(i);var s=PJ(i);s.forEach(function(o,l){var u=NJ(o,l,r,i),h={type:a_,payload:{dropResult:f2(f2({},t),u)}};n.dispatch(h)})}}function DJ(n){Wt(n.isDragging(),&quot;Cannot call drop while not dragging.&quot;),Wt(!n.didDrop(),&quot;Cannot call drop twice during one drag operation.&quot;)}function NJ(n,e,t,i){var r=t.getTarget(n),s=r?r.drop(i,n):void 0;return IJ(s),typeof s&gt;&quot;u&quot;&amp;&amp;(s=e===0?{}:i.getDropResult()),s}function IJ(n){Wt(typeof n&gt;&quot;u&quot;||qL(n),&quot;Drop result must either be an object or undefined.&quot;)}function PJ(n){var e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function LJ(n){return function(){var t=n.getMonitor(),i=n.getRegistry();UJ(t);var r=t.getSourceId();if(r!=null){var s=i.getSource(r,!0);s.endDrag(t,r),i.unpinSource()}return{type:l_}}}function UJ(n){Wt(n.isDragging(),&quot;Cannot call endDrag while not dragging.&quot;)}function kJ(n){return{beginDrag:_J(n),publishDragSource:wJ(n),hover:EJ(n),drop:OJ(n),endDrag:LJ(n)}}function FJ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function zJ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function BJ(n,e,t){return e&amp;&amp;zJ(n.prototype,e),n}function Yf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var HJ=function(){function n(e,t){var i=this;FJ(this,n),Yf(this,&quot;store&quot;,void 0),Yf(this,&quot;monitor&quot;,void 0),Yf(this,&quot;backend&quot;,void 0),Yf(this,&quot;isSetUp&quot;,!1),Yf(this,&quot;handleRefCountChange&quot;,function(){var r=i.store.getState().refCount&gt;0;i.backend&amp;&amp;(r&amp;&amp;!i.isSetUp?(i.backend.setup(),i.isSetUp=!0):!r&amp;&amp;i.isSetUp&amp;&amp;(i.backend.teardown(),i.isSetUp=!1))}),this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}return BJ(n,[{key:&quot;receiveBackend&quot;,value:function(t){this.backend=t}},{key:&quot;getMonitor&quot;,value:function(){return this.monitor}},{key:&quot;getBackend&quot;,value:function(){return this.backend}},{key:&quot;getRegistry&quot;,value:function(){return this.monitor.registry}},{key:&quot;getActions&quot;,value:function(){var t=this,i=this.store.dispatch;function r(o){return function(){for(var l=arguments.length,u=new Array(l),h=0;h&lt;l;h++)u[h]=arguments[h];var f=o.apply(t,u);typeof f&lt;&quot;u&quot;&amp;&amp;i(f)}}var s=kJ(this);return Object.keys(s).reduce(function(o,l){var u=s[l];return o[l]=r(u),o},{})}},{key:&quot;dispatch&quot;,value:function(t){this.store.dispatch(t)}}]),n}();function ys(n){return&quot;Minified Redux error #&quot;+n+&quot;; visit https://redux.js.org/Errors?code=&quot;+n+&quot; for the full message or use the non-minified dev environment for full errors. &quot;}var d2=function(){return typeof Symbol==&quot;function&quot;&amp;&amp;Symbol.observable||&quot;@@observable&quot;}(),p2=function(){return Math.random().toString(36).substring(7).split(&quot;&quot;).join(&quot;.&quot;)},m2={INIT:&quot;@@redux/INIT&quot;+p2(),REPLACE:&quot;@@redux/REPLACE&quot;+p2()};function VJ(n){if(typeof n!=&quot;object&quot;||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function YL(n,e,t){var i;if(typeof e==&quot;function&quot;&amp;&amp;typeof t==&quot;function&quot;||typeof t==&quot;function&quot;&amp;&amp;typeof arguments[3]==&quot;function&quot;)throw new Error(ys(0));if(typeof e==&quot;function&quot;&amp;&amp;typeof t&gt;&quot;u&quot;&amp;&amp;(t=e,e=void 0),typeof t&lt;&quot;u&quot;){if(typeof t!=&quot;function&quot;)throw new Error(ys(1));return t(YL)(n,e)}if(typeof n!=&quot;function&quot;)throw new Error(ys(2));var r=n,s=e,o=[],l=o,u=!1;function h(){l===o&amp;&amp;(l=o.slice())}function f(){if(u)throw new Error(ys(3));return s}function p(x){if(typeof x!=&quot;function&quot;)throw new Error(ys(4));if(u)throw new Error(ys(5));var b=!0;return h(),l.push(x),function(){if(b){if(u)throw new Error(ys(6));b=!1,h();var T=l.indexOf(x);l.splice(T,1),o=null}}}function m(x){if(!VJ(x))throw new Error(ys(7));if(typeof x.type&gt;&quot;u&quot;)throw new Error(ys(8));if(u)throw new Error(ys(9));try{u=!0,s=r(s,x)}finally{u=!1}for(var b=o=l,_=0;_&lt;b.length;_++){var T=b[_];T()}return x}function g(x){if(typeof x!=&quot;function&quot;)throw new Error(ys(10));r=x,m({type:m2.REPLACE})}function v(){var x,b=p;return x={subscribe:function(T){if(typeof T!=&quot;object&quot;||T===null)throw new Error(ys(11));function w(){T.next&amp;&amp;T.next(f())}w();var E=b(w);return{unsubscribe:E}}},x[d2]=function(){return this},x}return m({type:m2.INIT}),i={dispatch:m,subscribe:p,getState:f,replaceReducer:g},i[d2]=v,i}var GJ=function(e,t){return e===t};function jJ(n,e){return!n&amp;&amp;!e?!0:!n||!e?!1:n.x===e.x&amp;&amp;n.y===e.y}function WJ(n,e){var t=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:GJ;if(n.length!==e.length)return!1;for(var i=0;i&lt;n.length;++i)if(!t(n[i],e[i]))return!1;return!0}function g2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function y2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?g2(Object(t),!0).forEach(function(i){XJ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):g2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function XJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var _2={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function qJ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:_2,e=arguments.length&gt;1?arguments[1]:void 0,t=e.payload;switch(e.type){case o1:case s_:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case o_:return jJ(n.clientOffset,t.clientOffset)?n:y2(y2({},n),{},{clientOffset:t.clientOffset});case l_:case a_:return _2;default:return n}}var l1=&quot;dnd-core/ADD_SOURCE&quot;,c1=&quot;dnd-core/ADD_TARGET&quot;,u1=&quot;dnd-core/REMOVE_SOURCE&quot;,c_=&quot;dnd-core/REMOVE_TARGET&quot;;function YJ(n){return{type:l1,payload:{sourceId:n}}}function KJ(n){return{type:c1,payload:{targetId:n}}}function $J(n){return{type:u1,payload:{sourceId:n}}}function ZJ(n){return{type:c_,payload:{targetId:n}}}function v2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function _s(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v2(Object(t),!0).forEach(function(i){JJ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function JJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var QJ={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function eQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:QJ,e=arguments.length&gt;1?arguments[1]:void 0,t=e.payload;switch(e.type){case s_:return _s(_s({},n),{},{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case a1:return _s(_s({},n),{},{isSourcePublic:!0});case o_:return _s(_s({},n),{},{targetIds:t.targetIds});case c_:return n.targetIds.indexOf(t.targetId)===-1?n:_s(_s({},n),{},{targetIds:pJ(n.targetIds,t.targetId)});case a_:return _s(_s({},n),{},{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case l_:return _s(_s({},n),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function tQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:0,e=arguments.length&gt;1?arguments[1]:void 0;switch(e.type){case l1:case c1:return n+1;case u1:case c_:return n-1;default:return n}}var K0=[],h1=[];K0.__IS_NONE__=!0;h1.__IS_ALL__=!0;function nQ(n,e){if(n===K0)return!1;if(n===h1||typeof e&gt;&quot;u&quot;)return!0;var t=gJ(e,n);return t.length&gt;0}function iQ(){var n=arguments.length&gt;1?arguments[1]:void 0;switch(n.type){case o_:break;case l1:case c1:case c_:case u1:return K0;case s_:case a1:case l_:case a_:default:return h1}var e=n.payload,t=e.targetIds,i=t===void 0?[]:t,r=e.prevTargetIds,s=r===void 0?[]:r,o=mJ(i,s),l=o.length&gt;0||!WJ(i,s);if(!l)return K0;var u=s[s.length-1],h=i[i.length-1];return u!==h&amp;&amp;(u&amp;&amp;o.push(u),h&amp;&amp;o.push(h)),o}function rQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:0;return n+1}function b2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function x2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b2(Object(t),!0).forEach(function(i){sQ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function sQ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{},e=arguments.length&gt;1?arguments[1]:void 0;return{dirtyHandlerIds:iQ(n.dirtyHandlerIds,{type:e.type,payload:x2(x2({},e.payload),{},{prevTargetIds:dJ(n,&quot;dragOperation.targetIds&quot;,[])})}),dragOffset:qJ(n.dragOffset,e),refCount:tQ(n.refCount,e),dragOperation:eQ(n.dragOperation,e),stateId:rQ(n.stateId)}}function aQ(n,e){return{x:n.x+e.x,y:n.y+e.y}}function KL(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lQ(n){var e=n.clientOffset,t=n.initialClientOffset,i=n.initialSourceClientOffset;return!e||!t||!i?null:KL(aQ(e,i),t)}function cQ(n){var e=n.clientOffset,t=n.initialClientOffset;return!e||!t?null:KL(e,t)}function uQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function hQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function fQ(n,e,t){return e&amp;&amp;hQ(n.prototype,e),n}function S2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var dQ=function(){function n(e,t){uQ(this,n),S2(this,&quot;store&quot;,void 0),S2(this,&quot;registry&quot;,void 0),this.store=e,this.registry=t}return fQ(n,[{key:&quot;subscribeToStateChange&quot;,value:function(t){var i=this,r=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},s=r.handlerIds;Wt(typeof t==&quot;function&quot;,&quot;listener must be a function.&quot;),Wt(typeof s&gt;&quot;u&quot;||Array.isArray(s),&quot;handlerIds, when specified, must be an array of strings.&quot;);var o=this.store.getState().stateId,l=function(){var h=i.store.getState(),f=h.stateId;try{var p=f===o||f===o+1&amp;&amp;!nQ(h.dirtyHandlerIds,s);p||t()}finally{o=f}};return this.store.subscribe(l)}},{key:&quot;subscribeToOffsetChange&quot;,value:function(t){var i=this;Wt(typeof t==&quot;function&quot;,&quot;listener must be a function.&quot;);var r=this.store.getState().dragOffset,s=function(){var l=i.store.getState().dragOffset;l!==r&amp;&amp;(r=l,t())};return this.store.subscribe(s)}},{key:&quot;canDragSource&quot;,value:function(t){if(!t)return!1;var i=this.registry.getSource(t);return Wt(i,&quot;Expected to find a valid source. sourceId=&quot;.concat(t)),this.isDragging()?!1:i.canDrag(this,t)}},{key:&quot;canDropOnTarget&quot;,value:function(t){if(!t)return!1;var i=this.registry.getTarget(t);if(Wt(i,&quot;Expected to find a valid target. targetId=&quot;.concat(t)),!this.isDragging()||this.didDrop())return!1;var r=this.registry.getTargetType(t),s=this.getItemType();return WS(r,s)&amp;&amp;i.canDrop(this,t)}},{key:&quot;isDragging&quot;,value:function(){return!!this.getItemType()}},{key:&quot;isDraggingSource&quot;,value:function(t){if(!t)return!1;var i=this.registry.getSource(t,!0);if(Wt(i,&quot;Expected to find a valid source. sourceId=&quot;.concat(t)),!this.isDragging()||!this.isSourcePublic())return!1;var r=this.registry.getSourceType(t),s=this.getItemType();return r!==s?!1:i.isDragging(this,t)}},{key:&quot;isOverTarget&quot;,value:function(t){var i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!t)return!1;var r=i.shallow;if(!this.isDragging())return!1;var s=this.registry.getTargetType(t),o=this.getItemType();if(o&amp;&amp;!WS(s,o))return!1;var l=this.getTargetIds();if(!l.length)return!1;var u=l.indexOf(t);return r?u===l.length-1:u&gt;-1}},{key:&quot;getItemType&quot;,value:function(){return this.store.getState().dragOperation.itemType}},{key:&quot;getItem&quot;,value:function(){return this.store.getState().dragOperation.item}},{key:&quot;getSourceId&quot;,value:function(){return this.store.getState().dragOperation.sourceId}},{key:&quot;getTargetIds&quot;,value:function(){return this.store.getState().dragOperation.targetIds}},{key:&quot;getDropResult&quot;,value:function(){return this.store.getState().dragOperation.dropResult}},{key:&quot;didDrop&quot;,value:function(){return this.store.getState().dragOperation.didDrop}},{key:&quot;isSourcePublic&quot;,value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:&quot;getInitialClientOffset&quot;,value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:&quot;getInitialSourceClientOffset&quot;,value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:&quot;getClientOffset&quot;,value:function(){return this.store.getState().dragOffset.clientOffset}},{key:&quot;getSourceClientOffset&quot;,value:function(){return lQ(this.store.getState().dragOffset)}},{key:&quot;getDifferenceFromInitialOffset&quot;,value:function(){return cQ(this.store.getState().dragOffset)}}]),n}(),pQ=0;function mQ(){return pQ++}function zg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?zg=function(t){return typeof t}:zg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},zg(n)}function gQ(n){Wt(typeof n.canDrag==&quot;function&quot;,&quot;Expected canDrag to be a function.&quot;),Wt(typeof n.beginDrag==&quot;function&quot;,&quot;Expected beginDrag to be a function.&quot;),Wt(typeof n.endDrag==&quot;function&quot;,&quot;Expected endDrag to be a function.&quot;)}function yQ(n){Wt(typeof n.canDrop==&quot;function&quot;,&quot;Expected canDrop to be a function.&quot;),Wt(typeof n.hover==&quot;function&quot;,&quot;Expected hover to be a function.&quot;),Wt(typeof n.drop==&quot;function&quot;,&quot;Expected beginDrag to be a function.&quot;)}function XS(n,e){if(e&amp;&amp;Array.isArray(n)){n.forEach(function(t){return XS(t,!1)});return}Wt(typeof n==&quot;string&quot;||zg(n)===&quot;symbol&quot;,e?&quot;Type can only be a string, a symbol, or an array of either.&quot;:&quot;Type can only be a string or a symbol.&quot;)}const w2=typeof global&lt;&quot;u&quot;?global:self,$L=w2.MutationObserver||w2.WebKitMutationObserver;function ZL(n){return function(){const t=setTimeout(r,0),i=setInterval(r,50);function r(){clearTimeout(t),clearInterval(i),n()}}}function _Q(n){let e=1;const t=new $L(n),i=document.createTextNode(&quot;&quot;);return t.observe(i,{characterData:!0}),function(){e=-e,i.data=e}}const vQ=typeof $L==&quot;function&quot;?_Q:ZL;class bQ{enqueueTask(e){const{queue:t,requestFlush:i}=this;t.length||(i(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=&gt;{const{queue:e}=this;for(;this.index&lt;e.length;){const t=this.index;if(this.index++,e[t].call(),this.index&gt;this.capacity){for(let i=0,r=e.length-this.index;i&lt;r;i++)e[i]=e[i+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=&gt;{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=vQ(this.flush),this.requestErrorThrow=ZL(()=&gt;{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class xQ{call(){try{this.task&amp;&amp;this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class SQ{create(e){const t=this.freeTasks,i=t.length?t.pop():new xQ(this.onError,r=&gt;t[t.length]=r);return i.task=e,i}constructor(e){this.onError=e,this.freeTasks=[]}}const JL=new bQ,wQ=new SQ(JL.registerPendingError);function EQ(n){JL.enqueueTask(wQ.create(n))}function TQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function MQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function AQ(n,e,t){return e&amp;&amp;MQ(n.prototype,e),n}function ju(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CQ(n,e){return NQ(n)||DQ(n,e)||OQ(n,e)||RQ()}function RQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OQ(n,e){if(n){if(typeof n==&quot;string&quot;)return E2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E2(n,e)}}function E2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function DQ(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function NQ(n){if(Array.isArray(n))return n}function IQ(n){var e=mQ().toString();switch(n){case xs.SOURCE:return&quot;S&quot;.concat(e);case xs.TARGET:return&quot;T&quot;.concat(e);default:throw new Error(&quot;Unknown Handler Role: &quot;.concat(n))}}function T2(n){switch(n[0]){case&quot;S&quot;:return xs.SOURCE;case&quot;T&quot;:return xs.TARGET;default:Wt(!1,&quot;Cannot parse handler ID: &quot;.concat(n))}}function M2(n,e){var t=n.entries(),i=!1;do{var r=t.next(),s=r.done,o=CQ(r.value,2),l=o[1];if(l===e)return!0;i=!!s}while(!i);return!1}var PQ=function(){function n(e){TQ(this,n),ju(this,&quot;types&quot;,new Map),ju(this,&quot;dragSources&quot;,new Map),ju(this,&quot;dropTargets&quot;,new Map),ju(this,&quot;pinnedSourceId&quot;,null),ju(this,&quot;pinnedSource&quot;,null),ju(this,&quot;store&quot;,void 0),this.store=e}return AQ(n,[{key:&quot;addSource&quot;,value:function(t,i){XS(t),gQ(i);var r=this.addHandler(xs.SOURCE,t,i);return this.store.dispatch(YJ(r)),r}},{key:&quot;addTarget&quot;,value:function(t,i){XS(t,!0),yQ(i);var r=this.addHandler(xs.TARGET,t,i);return this.store.dispatch(KJ(r)),r}},{key:&quot;containsHandler&quot;,value:function(t){return M2(this.dragSources,t)||M2(this.dropTargets,t)}},{key:&quot;getSource&quot;,value:function(t){var i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:!1;Wt(this.isSourceId(t),&quot;Expected a valid source ID.&quot;);var r=i&amp;&amp;t===this.pinnedSourceId,s=r?this.pinnedSource:this.dragSources.get(t);return s}},{key:&quot;getTarget&quot;,value:function(t){return Wt(this.isTargetId(t),&quot;Expected a valid target ID.&quot;),this.dropTargets.get(t)}},{key:&quot;getSourceType&quot;,value:function(t){return Wt(this.isSourceId(t),&quot;Expected a valid source ID.&quot;),this.types.get(t)}},{key:&quot;getTargetType&quot;,value:function(t){return Wt(this.isTargetId(t),&quot;Expected a valid target ID.&quot;),this.types.get(t)}},{key:&quot;isSourceId&quot;,value:function(t){var i=T2(t);return i===xs.SOURCE}},{key:&quot;isTargetId&quot;,value:function(t){var i=T2(t);return i===xs.TARGET}},{key:&quot;removeSource&quot;,value:function(t){var i=this;Wt(this.getSource(t),&quot;Expected an existing source.&quot;),this.store.dispatch($J(t)),EQ(function(){i.dragSources.delete(t),i.types.delete(t)})}},{key:&quot;removeTarget&quot;,value:function(t){Wt(this.getTarget(t),&quot;Expected an existing target.&quot;),this.store.dispatch(ZJ(t)),this.dropTargets.delete(t),this.types.delete(t)}},{key:&quot;pinSource&quot;,value:function(t){var i=this.getSource(t);Wt(i,&quot;Expected an existing source.&quot;),this.pinnedSourceId=t,this.pinnedSource=i}},{key:&quot;unpinSource&quot;,value:function(){Wt(this.pinnedSource,&quot;No source is pinned at the time.&quot;),this.pinnedSourceId=null,this.pinnedSource=null}},{key:&quot;addHandler&quot;,value:function(t,i,r){var s=IQ(t);return this.types.set(s,i),t===xs.SOURCE?this.dragSources.set(s,r):t===xs.TARGET&amp;&amp;this.dropTargets.set(s,r),s}}]),n}();function LQ(n){var e=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:void 0,t=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:{},i=arguments.length&gt;3&amp;&amp;arguments[3]!==void 0?arguments[3]:!1,r=UQ(i),s=new dQ(r,new PQ(r)),o=new HJ(r,s),l=n(o,e,t);return o.receiveBackend(l),o}function UQ(n){var e=typeof window&lt;&quot;u&quot;&amp;&amp;window.__REDUX_DEVTOOLS_EXTENSION__;return YL(oQ,n&amp;&amp;e&amp;&amp;e({name:&quot;dnd-core&quot;,instanceId:&quot;dnd-core&quot;}))}var kQ=[&quot;children&quot;];function FQ(n,e){return VQ(n)||HQ(n,e)||BQ(n,e)||zQ()}function zQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BQ(n,e){if(n){if(typeof n==&quot;string&quot;)return A2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A2(n,e)}}function A2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function HQ(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function VQ(n){if(Array.isArray(n))return n}function GQ(n,e){if(n==null)return{};var t=jQ(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r&lt;s.length;r++)i=s[r],!(e.indexOf(i)&gt;=0)&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i)&amp;&amp;(t[i]=n[i])}return t}function jQ(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s&lt;i.length;s++)r=i[s],!(e.indexOf(r)&gt;=0)&amp;&amp;(t[r]=n[r]);return t}var C2=0,Bg=Symbol.for(&quot;__REACT_DND_CONTEXT_INSTANCE__&quot;),WQ=re.memo(function(e){var t=e.children,i=GQ(e,kQ),r=XQ(i),s=FQ(r,2),o=s[0],l=s[1];return re.useEffect(function(){if(l){var u=QL();return++C2,function(){--C2===0&amp;&amp;(u[Bg]=null)}}},[]),P.jsx(XL.Provider,Object.assign({value:o},{children:t}),void 0)});function XQ(n){if(&quot;manager&quot;in n){var e={dragDropManager:n.manager};return[e,!1]}var t=qQ(n.backend,n.context,n.options,n.debugMode),i=!n.context;return[t,i]}function qQ(n){var e=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:QL(),t=arguments.length&gt;2?arguments[2]:void 0,i=arguments.length&gt;3?arguments[3]:void 0,r=e;return r[Bg]||(r[Bg]={dragDropManager:LQ(n,e,t,i)}),r[Bg]}function QL(){return typeof global&lt;&quot;u&quot;?global:window}function YQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function KQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function $Q(n,e,t){return e&amp;&amp;KQ(n.prototype,e),n}function R2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Bx=!1,Hx=!1,ZQ=function(){function n(e){YQ(this,n),R2(this,&quot;internalMonitor&quot;,void 0),R2(this,&quot;sourceId&quot;,null),this.internalMonitor=e.getMonitor()}return $Q(n,[{key:&quot;receiveHandlerId&quot;,value:function(t){this.sourceId=t}},{key:&quot;getHandlerId&quot;,value:function(){return this.sourceId}},{key:&quot;canDrag&quot;,value:function(){Wt(!Bx,&quot;You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor&quot;);try{return Bx=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Bx=!1}}},{key:&quot;isDragging&quot;,value:function(){if(!this.sourceId)return!1;Wt(!Hx,&quot;You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor&quot;);try{return Hx=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Hx=!1}}},{key:&quot;subscribeToStateChange&quot;,value:function(t,i){return this.internalMonitor.subscribeToStateChange(t,i)}},{key:&quot;isDraggingSource&quot;,value:function(t){return this.internalMonitor.isDraggingSource(t)}},{key:&quot;isOverTarget&quot;,value:function(t,i){return this.internalMonitor.isOverTarget(t,i)}},{key:&quot;getTargetIds&quot;,value:function(){return this.internalMonitor.getTargetIds()}},{key:&quot;isSourcePublic&quot;,value:function(){return this.internalMonitor.isSourcePublic()}},{key:&quot;getSourceId&quot;,value:function(){return this.internalMonitor.getSourceId()}},{key:&quot;subscribeToOffsetChange&quot;,value:function(t){return this.internalMonitor.subscribeToOffsetChange(t)}},{key:&quot;canDragSource&quot;,value:function(t){return this.internalMonitor.canDragSource(t)}},{key:&quot;canDropOnTarget&quot;,value:function(t){return this.internalMonitor.canDropOnTarget(t)}},{key:&quot;getItemType&quot;,value:function(){return this.internalMonitor.getItemType()}},{key:&quot;getItem&quot;,value:function(){return this.internalMonitor.getItem()}},{key:&quot;getDropResult&quot;,value:function(){return this.internalMonitor.getDropResult()}},{key:&quot;didDrop&quot;,value:function(){return this.internalMonitor.didDrop()}},{key:&quot;getInitialClientOffset&quot;,value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:&quot;getInitialSourceClientOffset&quot;,value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:&quot;getSourceClientOffset&quot;,value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:&quot;getClientOffset&quot;,value:function(){return this.internalMonitor.getClientOffset()}},{key:&quot;getDifferenceFromInitialOffset&quot;,value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),n}();function JQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function QQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function eee(n,e,t){return e&amp;&amp;QQ(n.prototype,e),n}function O2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Vx=!1,tee=function(){function n(e){JQ(this,n),O2(this,&quot;internalMonitor&quot;,void 0),O2(this,&quot;targetId&quot;,null),this.internalMonitor=e.getMonitor()}return eee(n,[{key:&quot;receiveHandlerId&quot;,value:function(t){this.targetId=t}},{key:&quot;getHandlerId&quot;,value:function(){return this.targetId}},{key:&quot;subscribeToStateChange&quot;,value:function(t,i){return this.internalMonitor.subscribeToStateChange(t,i)}},{key:&quot;canDrop&quot;,value:function(){if(!this.targetId)return!1;Wt(!Vx,&quot;You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor&quot;);try{return Vx=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Vx=!1}}},{key:&quot;isOver&quot;,value:function(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}},{key:&quot;getItemType&quot;,value:function(){return this.internalMonitor.getItemType()}},{key:&quot;getItem&quot;,value:function(){return this.internalMonitor.getItem()}},{key:&quot;getDropResult&quot;,value:function(){return this.internalMonitor.getDropResult()}},{key:&quot;didDrop&quot;,value:function(){return this.internalMonitor.didDrop()}},{key:&quot;getInitialClientOffset&quot;,value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:&quot;getInitialSourceClientOffset&quot;,value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:&quot;getSourceClientOffset&quot;,value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:&quot;getClientOffset&quot;,value:function(){return this.internalMonitor.getClientOffset()}},{key:&quot;getDifferenceFromInitialOffset&quot;,value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),n}();function nee(n){if(typeof n.type!=&quot;string&quot;){var e=n.type.displayName||n.type.name||&quot;the component&quot;;throw new Error(&quot;Only native element nodes can now be passed to React DnD connectors.&quot;+&quot;You can either wrap &quot;.concat(e,&quot; into a &lt;div&gt;, or turn it into a &quot;)+&quot;drag source or a drop target itself.&quot;)}}function iee(n){return function(){var e=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:null,t=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null;if(!re.isValidElement(e)){var i=e;return n(i,t),i}var r=e;nee(r);var s=t?function(o){return n(o,t)}:n;return ree(r,s)}}function e3(n){var e={};return Object.keys(n).forEach(function(t){var i=n[t];if(t.endsWith(&quot;Ref&quot;))e[t]=n[t];else{var r=iee(i);e[t]=function(){return r}}}),e}function D2(n,e){typeof n==&quot;function&quot;?n(e):n.current=e}function ree(n,e){var t=n.ref;return Wt(typeof t!=&quot;string&quot;,&quot;Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a &lt;span&gt; or &lt;div&gt;. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs&quot;),t?re.cloneElement(n,{ref:function(r){D2(t,r),D2(e,r)}}):re.cloneElement(n,{ref:e})}function Hg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?Hg=function(t){return typeof t}:Hg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},Hg(n)}function qS(n){return n!==null&amp;&amp;Hg(n)===&quot;object&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(n,&quot;current&quot;)}function YS(n,e,t,i){var r=void 0;if(r!==void 0)return!!r;if(n===e)return!0;if(typeof n!=&quot;object&quot;||!n||typeof e!=&quot;object&quot;||!e)return!1;var s=Object.keys(n),o=Object.keys(e);if(s.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(e),u=0;u&lt;s.length;u++){var h=s[u];if(!l(h))return!1;var f=n[h],p=e[h];if(r=void 0,r===!1||r===void 0&amp;&amp;f!==p)return!1}return!0}function see(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function oee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function aee(n,e,t){return e&amp;&amp;oee(n.prototype,e),n}function ur(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var lee=function(){function n(e){var t=this;see(this,n),ur(this,&quot;hooks&quot;,e3({dragSource:function(r,s){t.clearDragSource(),t.dragSourceOptions=s||null,qS(r)?t.dragSourceRef=r:t.dragSourceNode=r,t.reconnectDragSource()},dragPreview:function(r,s){t.clearDragPreview(),t.dragPreviewOptions=s||null,qS(r)?t.dragPreviewRef=r:t.dragPreviewNode=r,t.reconnectDragPreview()}})),ur(this,&quot;handlerId&quot;,null),ur(this,&quot;dragSourceRef&quot;,null),ur(this,&quot;dragSourceNode&quot;,void 0),ur(this,&quot;dragSourceOptionsInternal&quot;,null),ur(this,&quot;dragSourceUnsubscribe&quot;,void 0),ur(this,&quot;dragPreviewRef&quot;,null),ur(this,&quot;dragPreviewNode&quot;,void 0),ur(this,&quot;dragPreviewOptionsInternal&quot;,null),ur(this,&quot;dragPreviewUnsubscribe&quot;,void 0),ur(this,&quot;lastConnectedHandlerId&quot;,null),ur(this,&quot;lastConnectedDragSource&quot;,null),ur(this,&quot;lastConnectedDragSourceOptions&quot;,null),ur(this,&quot;lastConnectedDragPreview&quot;,null),ur(this,&quot;lastConnectedDragPreviewOptions&quot;,null),ur(this,&quot;backend&quot;,void 0),this.backend=e}return aee(n,[{key:&quot;receiveHandlerId&quot;,value:function(t){this.handlerId!==t&amp;&amp;(this.handlerId=t,this.reconnect())}},{key:&quot;connectTarget&quot;,get:function(){return this.dragSource}},{key:&quot;dragSourceOptions&quot;,get:function(){return this.dragSourceOptionsInternal},set:function(t){this.dragSourceOptionsInternal=t}},{key:&quot;dragPreviewOptions&quot;,get:function(){return this.dragPreviewOptionsInternal},set:function(t){this.dragPreviewOptionsInternal=t}},{key:&quot;reconnect&quot;,value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:&quot;reconnectDragSource&quot;,value:function(){var t=this.dragSource,i=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(i&amp;&amp;this.disconnectDragSource(),!!this.handlerId){if(!t){this.lastConnectedDragSource=t;return}i&amp;&amp;(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions))}}},{key:&quot;reconnectDragPreview&quot;,value:function(){var t=this.dragPreview,i=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(i&amp;&amp;this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}i&amp;&amp;(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}},{key:&quot;didHandlerIdChange&quot;,value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:&quot;didConnectedDragSourceChange&quot;,value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:&quot;didConnectedDragPreviewChange&quot;,value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:&quot;didDragSourceOptionsChange&quot;,value:function(){return!YS(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:&quot;didDragPreviewOptionsChange&quot;,value:function(){return!YS(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:&quot;disconnectDragSource&quot;,value:function(){this.dragSourceUnsubscribe&amp;&amp;(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:&quot;disconnectDragPreview&quot;,value:function(){this.dragPreviewUnsubscribe&amp;&amp;(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:&quot;dragSource&quot;,get:function(){return this.dragSourceNode||this.dragSourceRef&amp;&amp;this.dragSourceRef.current}},{key:&quot;dragPreview&quot;,get:function(){return this.dragPreviewNode||this.dragPreviewRef&amp;&amp;this.dragPreviewRef.current}},{key:&quot;clearDragSource&quot;,value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:&quot;clearDragPreview&quot;,value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),n}();function cee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function uee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function hee(n,e,t){return e&amp;&amp;uee(n.prototype,e),n}function po(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var fee=function(){function n(e){var t=this;cee(this,n),po(this,&quot;hooks&quot;,e3({dropTarget:function(r,s){t.clearDropTarget(),t.dropTargetOptions=s,qS(r)?t.dropTargetRef=r:t.dropTargetNode=r,t.reconnect()}})),po(this,&quot;handlerId&quot;,null),po(this,&quot;dropTargetRef&quot;,null),po(this,&quot;dropTargetNode&quot;,void 0),po(this,&quot;dropTargetOptionsInternal&quot;,null),po(this,&quot;unsubscribeDropTarget&quot;,void 0),po(this,&quot;lastConnectedHandlerId&quot;,null),po(this,&quot;lastConnectedDropTarget&quot;,null),po(this,&quot;lastConnectedDropTargetOptions&quot;,null),po(this,&quot;backend&quot;,void 0),this.backend=e}return hee(n,[{key:&quot;connectTarget&quot;,get:function(){return this.dropTarget}},{key:&quot;reconnect&quot;,value:function(){var t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&amp;&amp;this.disconnectDropTarget();var i=this.dropTarget;if(this.handlerId){if(!i){this.lastConnectedDropTarget=i;return}t&amp;&amp;(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=i,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,i,this.dropTargetOptions))}}},{key:&quot;receiveHandlerId&quot;,value:function(t){t!==this.handlerId&amp;&amp;(this.handlerId=t,this.reconnect())}},{key:&quot;dropTargetOptions&quot;,get:function(){return this.dropTargetOptionsInternal},set:function(t){this.dropTargetOptionsInternal=t}},{key:&quot;didHandlerIdChange&quot;,value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:&quot;didDropTargetChange&quot;,value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:&quot;didOptionsChange&quot;,value:function(){return!YS(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:&quot;disconnectDropTarget&quot;,value:function(){this.unsubscribeDropTarget&amp;&amp;(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:&quot;dropTarget&quot;,get:function(){return this.dropTargetNode||this.dropTargetRef&amp;&amp;this.dropTargetRef.current}},{key:&quot;clearDropTarget&quot;,value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),n}();function dee(n,e,t){var i=t.getRegistry(),r=i.addTarget(n,e);return[r,function(){return i.removeTarget(r)}]}function pee(n,e,t){var i=t.getRegistry(),r=i.addSource(n,e);return[r,function(){return i.removeSource(r)}]}var Pc=typeof window&lt;&quot;u&quot;?re.useLayoutEffect:re.useEffect;function Vg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?Vg=function(t){return typeof t}:Vg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},Vg(n)}function mee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function gee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function yee(n,e,t){return e&amp;&amp;gee(n.prototype,e),n}function Gx(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var _ee=function(){function n(e,t,i){mee(this,n),Gx(this,&quot;spec&quot;,void 0),Gx(this,&quot;monitor&quot;,void 0),Gx(this,&quot;connector&quot;,void 0),this.spec=e,this.monitor=t,this.connector=i}return yee(n,[{key:&quot;beginDrag&quot;,value:function(){var t,i=this.spec,r=this.monitor,s=null;return Vg(i.item)===&quot;object&quot;?s=i.item:typeof i.item==&quot;function&quot;?s=i.item(r):s={},(t=s)!==null&amp;&amp;t!==void 0?t:null}},{key:&quot;canDrag&quot;,value:function(){var t=this.spec,i=this.monitor;return typeof t.canDrag==&quot;boolean&quot;?t.canDrag:typeof t.canDrag==&quot;function&quot;?t.canDrag(i):!0}},{key:&quot;isDragging&quot;,value:function(t,i){var r=this.spec,s=this.monitor,o=r.isDragging;return o?o(s):i===t.getSourceId()}},{key:&quot;endDrag&quot;,value:function(){var t=this.spec,i=this.monitor,r=this.connector,s=t.end;s&amp;&amp;s(i.getItem(),i),r.reconnect()}}]),n}();function vee(n,e,t){var i=re.useMemo(function(){return new _ee(n,e,t)},[e,t]);return re.useEffect(function(){i.spec=n},[n]),i}function Hc(){var n=re.useContext(XL),e=n.dragDropManager;return Wt(e!=null,&quot;Expected drag drop context&quot;),e}function bee(n){return re.useMemo(function(){var e=n.type;return Wt(e!=null,&quot;spec.type must be defined&quot;),e},[n])}function xee(n,e){return Tee(n)||Eee(n,e)||wee(n,e)||See()}function See(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wee(n,e){if(n){if(typeof n==&quot;string&quot;)return N2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N2(n,e)}}function N2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function Eee(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function Tee(n){if(Array.isArray(n))return n}function Mee(n,e,t){var i=Hc(),r=vee(n,e,t),s=bee(n);Pc(function(){if(s!=null){var l=pee(s,r,i),u=xee(l,2),h=u[0],f=u[1];return e.receiveHandlerId(h),t.receiveHandlerId(h),f}},[i,e,t,r,s])}function Aee(n){return Dee(n)||Oee(n)||Ree(n)||Cee()}function Cee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ree(n,e){if(n){if(typeof n==&quot;string&quot;)return KS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KS(n,e)}}function Oee(n){if(typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]!=null||n[&quot;@@iterator&quot;]!=null)return Array.from(n)}function Dee(n){if(Array.isArray(n))return KS(n)}function KS(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function t3(n,e){var t=Aee(e||[]);return e==null&amp;&amp;typeof n!=&quot;function&quot;&amp;&amp;t.push(n),re.useMemo(function(){return typeof n==&quot;function&quot;?n():n},t)}function Nee(){var n=Hc();return re.useMemo(function(){return new ZQ(n)},[n])}function Iee(n,e){var t=Hc(),i=re.useMemo(function(){return new lee(t.getBackend())},[t]);return Pc(function(){return i.dragSourceOptions=n||null,i.reconnect(),function(){return i.disconnectDragSource()}},[i,n]),Pc(function(){return i.dragPreviewOptions=e||null,i.reconnect(),function(){return i.disconnectDragPreview()}},[i,e]),i}var jx,I2;function Pee(){return I2||(I2=1,jx=function n(e,t){if(e===t)return!0;if(e&amp;&amp;t&amp;&amp;typeof e==&quot;object&quot;&amp;&amp;typeof t==&quot;object&quot;){if(e.constructor!==t.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!n(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&amp;&amp;e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=i;r--!==0;){var o=s[r];if(!n(e[o],t[o]))return!1}return!0}return e!==e&amp;&amp;t!==t}),jx}var Lee=Pee();const Uee=Z0(Lee);function kee(n,e){return Hee(n)||Bee(n,e)||zee(n,e)||Fee()}function Fee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zee(n,e){if(n){if(typeof n==&quot;string&quot;)return P2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P2(n,e)}}function P2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function Bee(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function Hee(n){if(Array.isArray(n))return n}function n3(n,e,t){var i=re.useState(function(){return e(n)}),r=kee(i,2),s=r[0],o=r[1],l=re.useCallback(function(){var u=e(n);Uee(s,u)||(o(u),t&amp;&amp;t())},[s,n,t]);return Pc(l),[s,l]}function Vee(n,e){return Xee(n)||Wee(n,e)||jee(n,e)||Gee()}function Gee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jee(n,e){if(n){if(typeof n==&quot;string&quot;)return L2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L2(n,e)}}function L2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function Wee(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function Xee(n){if(Array.isArray(n))return n}function qee(n,e,t){var i=n3(n,e,t),r=Vee(i,2),s=r[0],o=r[1];return Pc(function(){var u=n.getHandlerId();if(u!=null)return n.subscribeToStateChange(o,{handlerIds:[u]})},[n,o]),s}function i3(n,e,t){return qee(e,n||function(){return{}},function(){return t.reconnect()})}function Yee(n){return re.useMemo(function(){return n.hooks.dragSource()},[n])}function Kee(n){return re.useMemo(function(){return n.hooks.dragPreview()},[n])}function $ee(n,e){var t=t3(n,e);Wt(!t.begin,&quot;useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)&quot;);var i=Nee(),r=Iee(t.options,t.previewOptions);return Mee(t,i,r),[i3(t.collect,i,r),Yee(r),Kee(r)]}function Zee(n){var e=n.accept;return re.useMemo(function(){return Wt(n.accept!=null,&quot;accept must be defined&quot;),Array.isArray(e)?e:[e]},[e])}function Jee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Qee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function ete(n,e,t){return e&amp;&amp;Qee(n.prototype,e),n}function U2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var tte=function(){function n(e,t){Jee(this,n),U2(this,&quot;spec&quot;,void 0),U2(this,&quot;monitor&quot;,void 0),this.spec=e,this.monitor=t}return ete(n,[{key:&quot;canDrop&quot;,value:function(){var t=this.spec,i=this.monitor;return t.canDrop?t.canDrop(i.getItem(),i):!0}},{key:&quot;hover&quot;,value:function(){var t=this.spec,i=this.monitor;t.hover&amp;&amp;t.hover(i.getItem(),i)}},{key:&quot;drop&quot;,value:function(){var t=this.spec,i=this.monitor;if(t.drop)return t.drop(i.getItem(),i)}}]),n}();function nte(n,e){var t=re.useMemo(function(){return new tte(n,e)},[e]);return re.useEffect(function(){t.spec=n},[n]),t}function ite(n,e){return ate(n)||ote(n,e)||ste(n,e)||rte()}function rte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ste(n,e){if(n){if(typeof n==&quot;string&quot;)return k2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k2(n,e)}}function k2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function ote(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function ate(n){if(Array.isArray(n))return n}function lte(n,e,t){var i=Hc(),r=nte(n,e),s=Zee(n);Pc(function(){var l=dee(s,r,i),u=ite(l,2),h=u[0],f=u[1];return e.receiveHandlerId(h),t.receiveHandlerId(h),f},[i,e,r,t,s.map(function(o){return o.toString()}).join(&quot;|&quot;)])}function cte(){var n=Hc();return re.useMemo(function(){return new tee(n)},[n])}function ute(n){var e=Hc(),t=re.useMemo(function(){return new fee(e.getBackend())},[e]);return Pc(function(){return t.dropTargetOptions=n||null,t.reconnect(),function(){return t.disconnectDropTarget()}},[n]),t}function hte(n){return re.useMemo(function(){return n.hooks.dropTarget()},[n])}function r3(n,e){var t=t3(n,e),i=cte(),r=ute(t.options);return lte(t,i,r),[i3(t.collect,i,r),hte(r)]}function fte(n,e){return gte(n)||mte(n,e)||pte(n,e)||dte()}function dte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pte(n,e){if(n){if(typeof n==&quot;string&quot;)return F2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F2(n,e)}}function F2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function mte(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function gte(n){if(Array.isArray(n))return n}function yte(n){var e=Hc(),t=e.getMonitor(),i=n3(t,n),r=fte(i,2),s=r[0],o=r[1];return re.useEffect(function(){return t.subscribeToOffsetChange(o)}),re.useEffect(function(){return t.subscribeToStateChange(o)}),s}function s3(n){var e=null,t=function(){return e==null&amp;&amp;(e=n()),e};return t}function _te(n,e){return n.filter(function(t){return t!==e})}function vte(n,e){var t=new Set,i=function(o){return t.add(o)};n.forEach(i),e.forEach(i);var r=[];return t.forEach(function(s){return r.push(s)}),r}function bte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function xte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Ste(n,e,t){return e&amp;&amp;xte(n.prototype,e),n}function z2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var wte=function(){function n(e){bte(this,n),z2(this,&quot;entered&quot;,[]),z2(this,&quot;isNodeInDocument&quot;,void 0),this.isNodeInDocument=e}return Ste(n,[{key:&quot;enter&quot;,value:function(t){var i=this,r=this.entered.length,s=function(l){return i.isNodeInDocument(l)&amp;&amp;(!l.contains||l.contains(t))};return this.entered=vte(this.entered.filter(s),[t]),r===0&amp;&amp;this.entered.length&gt;0}},{key:&quot;leave&quot;,value:function(t){var i=this.entered.length;return this.entered=_te(this.entered.filter(this.isNodeInDocument),t),i&gt;0&amp;&amp;this.entered.length===0}},{key:&quot;reset&quot;,value:function(){this.entered=[]}}]),n}(),Ete=s3(function(){return/firefox/i.test(navigator.userAgent)}),o3=s3(function(){return!!window.safari});function Tte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Mte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Ate(n,e,t){return e&amp;&amp;Mte(n.prototype,e),n}function Kf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var B2=function(){function n(e,t){Tte(this,n),Kf(this,&quot;xs&quot;,void 0),Kf(this,&quot;ys&quot;,void 0),Kf(this,&quot;c1s&quot;,void 0),Kf(this,&quot;c2s&quot;,void 0),Kf(this,&quot;c3s&quot;,void 0);for(var i=e.length,r=[],s=0;s&lt;i;s++)r.push(s);r.sort(function(D,C){return e[D]&lt;e[C]?-1:1});for(var o=[],l=[],u,h,f=0;f&lt;i-1;f++)u=e[f+1]-e[f],h=t[f+1]-t[f],o.push(u),l.push(h/u);for(var p=[l[0]],m=0;m&lt;o.length-1;m++){var g=l[m],v=l[m+1];if(g*v&lt;=0)p.push(0);else{u=o[m];var x=o[m+1],b=u+x;p.push(3*b/((b+x)/g+(b+u)/v))}}p.push(l[l.length-1]);for(var _=[],T=[],w,E=0;E&lt;p.length-1;E++){w=l[E];var R=p[E],N=1/o[E],A=R+p[E+1]-w-w;_.push((w-R-A)*N),T.push(A*N*N)}this.xs=e,this.ys=t,this.c1s=p,this.c2s=_,this.c3s=T}return Ate(n,[{key:&quot;interpolate&quot;,value:function(t){var i=this.xs,r=this.ys,s=this.c1s,o=this.c2s,l=this.c3s,u=i.length-1;if(t===i[u])return r[u];for(var h=0,f=l.length-1,p;h&lt;=f;){p=Math.floor(.5*(h+f));var m=i[p];if(m&lt;t)h=p+1;else if(m&gt;t)f=p-1;else return r[p]}u=Math.max(0,f);var g=t-i[u],v=g*g;return r[u]+s[u]*g+o[u]*v+l[u]*g*v}}]),n}(),Cte=1;function a3(n){var e=n.nodeType===Cte?n:n.parentElement;if(!e)return null;var t=e.getBoundingClientRect(),i=t.top,r=t.left;return{x:r,y:i}}function Eg(n){return{x:n.clientX,y:n.clientY}}function Rte(n){var e;return n.nodeName===&quot;IMG&quot;&amp;&amp;(Ete()||!((e=document.documentElement)!==null&amp;&amp;e!==void 0&amp;&amp;e.contains(n)))}function Ote(n,e,t,i){var r=n?e.width:t,s=n?e.height:i;return o3()&amp;&amp;n&amp;&amp;(s/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:s}}function Dte(n,e,t,i,r){var s=Rte(e),o=s?n:e,l=a3(o),u={x:t.x-l.x,y:t.y-l.y},h=n.offsetWidth,f=n.offsetHeight,p=i.anchorX,m=i.anchorY,g=Ote(s,e,h,f),v=g.dragPreviewWidth,x=g.dragPreviewHeight,b=function(){var A=new B2([0,.5,1],[u.y,u.y/f*x,u.y+x-f]),D=A.interpolate(m);return o3()&amp;&amp;s&amp;&amp;(D+=(window.devicePixelRatio-1)*x),D},_=function(){var A=new B2([0,.5,1],[u.x,u.x/h*v,u.x+v-h]);return A.interpolate(p)},T=r.offsetX,w=r.offsetY,E=T===0||T,R=w===0||w;return{x:E?T:_(),y:R?w:b()}}var l3=&quot;__NATIVE_FILE__&quot;,c3=&quot;__NATIVE_URL__&quot;,u3=&quot;__NATIVE_TEXT__&quot;,h3=&quot;__NATIVE_HTML__&quot;;const H2=Object.freeze(Object.defineProperty({__proto__:null,FILE:l3,HTML:h3,TEXT:u3,URL:c3},Symbol.toStringTag,{value:&quot;Module&quot;}));function Wx(n,e,t){var i=e.reduce(function(r,s){return r||n.getData(s)},&quot;&quot;);return i??t}var Wu;function Tg(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var $S=(Wu={},Tg(Wu,l3,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items},dataTransfer:function(e){return e}},matchesTypes:[&quot;Files&quot;]}),Tg(Wu,h3,{exposeProperties:{html:function(e,t){return Wx(e,t,&quot;&quot;)},dataTransfer:function(e){return e}},matchesTypes:[&quot;Html&quot;,&quot;text/html&quot;]}),Tg(Wu,c3,{exposeProperties:{urls:function(e,t){return Wx(e,t,&quot;&quot;).split(`
`)},dataTransfer:function(e){return e}},matchesTypes:[&quot;Url&quot;,&quot;text/uri-list&quot;]}),Tg(Wu,u3,{exposeProperties:{text:function(e,t){return Wx(e,t,&quot;&quot;)},dataTransfer:function(e){return e}},matchesTypes:[&quot;Text&quot;,&quot;text/plain&quot;]}),Wu);function Nte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Ite(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Pte(n,e,t){return e&amp;&amp;Ite(n.prototype,e),n}function V2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Lte=function(){function n(e){Nte(this,n),V2(this,&quot;item&quot;,void 0),V2(this,&quot;config&quot;,void 0),this.config=e,this.item={},this.initializeExposedProperties()}return Pte(n,[{key:&quot;initializeExposedProperties&quot;,value:function(){var t=this;Object.keys(this.config.exposeProperties).forEach(function(i){Object.defineProperty(t.item,i,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn&#x27;t allow reading &quot;`.concat(i,&#x27;&quot; until the drop event.&#x27;)),null}})})}},{key:&quot;loadDataTransfer&quot;,value:function(t){var i=this;if(t){var r={};Object.keys(this.config.exposeProperties).forEach(function(s){r[s]={value:i.config.exposeProperties[s](t,i.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,r)}}},{key:&quot;canDrag&quot;,value:function(){return!0}},{key:&quot;beginDrag&quot;,value:function(){return this.item}},{key:&quot;isDragging&quot;,value:function(t,i){return i===t.getSourceId()}},{key:&quot;endDrag&quot;,value:function(){}}]),n}();function Ute(n,e){var t=new Lte($S[n]);return t.loadDataTransfer(e),t}function Xx(n){if(!n)return null;var e=Array.prototype.slice.call(n.types||[]);return Object.keys($S).filter(function(t){var i=$S[t].matchesTypes;return i.some(function(r){return e.indexOf(r)&gt;-1})})[0]||null}function kte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Fte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function zte(n,e,t){return e&amp;&amp;Fte(n.prototype,e),n}function qx(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Bte=function(){function n(e,t){kte(this,n),qx(this,&quot;ownerDocument&quot;,null),qx(this,&quot;globalContext&quot;,void 0),qx(this,&quot;optionsArgs&quot;,void 0),this.globalContext=e,this.optionsArgs=t}return zte(n,[{key:&quot;window&quot;,get:function(){if(this.globalContext)return this.globalContext;if(typeof window&lt;&quot;u&quot;)return window}},{key:&quot;document&quot;,get:function(){var t;return(t=this.globalContext)!==null&amp;&amp;t!==void 0&amp;&amp;t.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:&quot;rootElement&quot;,get:function(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}}]),n}();function G2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function j2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G2(Object(t),!0).forEach(function(i){ln(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Hte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Vte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Gte(n,e,t){return e&amp;&amp;Vte(n.prototype,e),n}function ln(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var jte=function(){function n(e,t,i){var r=this;Hte(this,n),ln(this,&quot;options&quot;,void 0),ln(this,&quot;actions&quot;,void 0),ln(this,&quot;monitor&quot;,void 0),ln(this,&quot;registry&quot;,void 0),ln(this,&quot;enterLeaveCounter&quot;,void 0),ln(this,&quot;sourcePreviewNodes&quot;,new Map),ln(this,&quot;sourcePreviewNodeOptions&quot;,new Map),ln(this,&quot;sourceNodes&quot;,new Map),ln(this,&quot;sourceNodeOptions&quot;,new Map),ln(this,&quot;dragStartSourceIds&quot;,null),ln(this,&quot;dropTargetIds&quot;,[]),ln(this,&quot;dragEnterTargetIds&quot;,[]),ln(this,&quot;currentNativeSource&quot;,null),ln(this,&quot;currentNativeHandle&quot;,null),ln(this,&quot;currentDragSourceNode&quot;,null),ln(this,&quot;altKeyPressed&quot;,!1),ln(this,&quot;mouseMoveTimeoutTimer&quot;,null),ln(this,&quot;asyncEndDragFrameId&quot;,null),ln(this,&quot;dragOverTargetIds&quot;,null),ln(this,&quot;lastClientOffset&quot;,null),ln(this,&quot;hoverRafId&quot;,null),ln(this,&quot;getSourceClientOffset&quot;,function(s){var o=r.sourceNodes.get(s);return o&amp;&amp;a3(o)||null}),ln(this,&quot;endDragNativeItem&quot;,function(){r.isDraggingNativeItem()&amp;&amp;(r.actions.endDrag(),r.currentNativeHandle&amp;&amp;r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)}),ln(this,&quot;isNodeInDocument&quot;,function(s){return!!(s&amp;&amp;r.document&amp;&amp;r.document.body&amp;&amp;r.document.body.contains(s))}),ln(this,&quot;endDragIfSourceWasRemovedFromDOM&quot;,function(){var s=r.currentDragSourceNode;s==null||r.isNodeInDocument(s)||r.clearCurrentDragSourceNode()&amp;&amp;r.monitor.isDragging()&amp;&amp;r.actions.endDrag()}),ln(this,&quot;handleTopDragStartCapture&quot;,function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]}),ln(this,&quot;handleTopDragStart&quot;,function(s){if(!s.defaultPrevented){var o=r.dragStartSourceIds;r.dragStartSourceIds=null;var l=Eg(s);r.monitor.isDragging()&amp;&amp;r.actions.endDrag(),r.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:l});var u=s.dataTransfer,h=Xx(u);if(r.monitor.isDragging()){if(u&amp;&amp;typeof u.setDragImage==&quot;function&quot;){var f=r.monitor.getSourceId(),p=r.sourceNodes.get(f),m=r.sourcePreviewNodes.get(f)||p;if(m){var g=r.getCurrentSourcePreviewNodeOptions(),v=g.anchorX,x=g.anchorY,b=g.offsetX,_=g.offsetY,T={anchorX:v,anchorY:x},w={offsetX:b,offsetY:_},E=Dte(p,m,l,T,w);u.setDragImage(m,E.x,E.y)}}try{u==null||u.setData(&quot;application/json&quot;,{})}catch{}r.setCurrentDragSourceNode(s.target);var R=r.getCurrentSourcePreviewNodeOptions(),N=R.captureDraggingState;N?r.actions.publishDragSource():setTimeout(function(){return r.actions.publishDragSource()},0)}else if(h)r.beginDragNativeItem(h);else{if(u&amp;&amp;!u.types&amp;&amp;(s.target&amp;&amp;!s.target.hasAttribute||!s.target.hasAttribute(&quot;draggable&quot;)))return;s.preventDefault()}}}),ln(this,&quot;handleTopDragEndCapture&quot;,function(){r.clearCurrentDragSourceNode()&amp;&amp;r.monitor.isDragging()&amp;&amp;r.actions.endDrag()}),ln(this,&quot;handleTopDragEnterCapture&quot;,function(s){r.dragEnterTargetIds=[];var o=r.enterLeaveCounter.enter(s.target);if(!(!o||r.monitor.isDragging())){var l=s.dataTransfer,u=Xx(l);u&amp;&amp;r.beginDragNativeItem(u,l)}}),ln(this,&quot;handleTopDragEnter&quot;,function(s){var o=r.dragEnterTargetIds;if(r.dragEnterTargetIds=[],!!r.monitor.isDragging()){r.altKeyPressed=s.altKey,o.length&gt;0&amp;&amp;r.actions.hover(o,{clientOffset:Eg(s)});var l=o.some(function(u){return r.monitor.canDropOnTarget(u)});l&amp;&amp;(s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=r.getCurrentDropEffect()))}}),ln(this,&quot;handleTopDragOverCapture&quot;,function(){r.dragOverTargetIds=[]}),ln(this,&quot;handleTopDragOver&quot;,function(s){var o=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging()){s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=&quot;none&quot;);return}r.altKeyPressed=s.altKey,r.lastClientOffset=Eg(s),r.hoverRafId===null&amp;&amp;typeof requestAnimationFrame&lt;&quot;u&quot;&amp;&amp;(r.hoverRafId=requestAnimationFrame(function(){r.monitor.isDragging()&amp;&amp;r.actions.hover(o||[],{clientOffset:r.lastClientOffset}),r.hoverRafId=null}));var l=(o||[]).some(function(u){return r.monitor.canDropOnTarget(u)});l?(s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=&quot;none&quot;))}),ln(this,&quot;handleTopDragLeaveCapture&quot;,function(s){r.isDraggingNativeItem()&amp;&amp;s.preventDefault();var o=r.enterLeaveCounter.leave(s.target);o&amp;&amp;r.isDraggingNativeItem()&amp;&amp;setTimeout(function(){return r.endDragNativeItem()},0)}),ln(this,&quot;handleTopDropCapture&quot;,function(s){if(r.dropTargetIds=[],r.isDraggingNativeItem()){var o;s.preventDefault(),(o=r.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}else Xx(s.dataTransfer)&amp;&amp;s.preventDefault();r.enterLeaveCounter.reset()}),ln(this,&quot;handleTopDrop&quot;,function(s){var o=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(o,{clientOffset:Eg(s)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.monitor.isDragging()&amp;&amp;r.actions.endDrag()}),ln(this,&quot;handleSelectStart&quot;,function(s){var o=s.target;typeof o.dragDrop==&quot;function&quot;&amp;&amp;(o.tagName===&quot;INPUT&quot;||o.tagName===&quot;SELECT&quot;||o.tagName===&quot;TEXTAREA&quot;||o.isContentEditable||(s.preventDefault(),o.dragDrop()))}),this.options=new Bte(t,i),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new wte(this.isNodeInDocument)}return Gte(n,[{key:&quot;profile&quot;,value:function(){var t,i;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((i=this.dragOverTargetIds)===null||i===void 0?void 0:i.length)||0}}},{key:&quot;window&quot;,get:function(){return this.options.window}},{key:&quot;document&quot;,get:function(){return this.options.document}},{key:&quot;rootElement&quot;,get:function(){return this.options.rootElement}},{key:&quot;setup&quot;,value:function(){var t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error(&quot;Cannot have two HTML5 backends at the same time.&quot;);t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}},{key:&quot;teardown&quot;,value:function(){var t=this.rootElement;if(t!==void 0&amp;&amp;(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var i;(i=this.window)===null||i===void 0||i.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:&quot;connectDragPreview&quot;,value:function(t,i,r){var s=this;return this.sourcePreviewNodeOptions.set(t,r),this.sourcePreviewNodes.set(t,i),function(){s.sourcePreviewNodes.delete(t),s.sourcePreviewNodeOptions.delete(t)}}},{key:&quot;connectDragSource&quot;,value:function(t,i,r){var s=this;this.sourceNodes.set(t,i),this.sourceNodeOptions.set(t,r);var o=function(h){return s.handleDragStart(h,t)},l=function(h){return s.handleSelectStart(h)};return i.setAttribute(&quot;draggable&quot;,&quot;true&quot;),i.addEventListener(&quot;dragstart&quot;,o),i.addEventListener(&quot;selectstart&quot;,l),function(){s.sourceNodes.delete(t),s.sourceNodeOptions.delete(t),i.removeEventListener(&quot;dragstart&quot;,o),i.removeEventListener(&quot;selectstart&quot;,l),i.setAttribute(&quot;draggable&quot;,&quot;false&quot;)}}},{key:&quot;connectDropTarget&quot;,value:function(t,i){var r=this,s=function(h){return r.handleDragEnter(h,t)},o=function(h){return r.handleDragOver(h,t)},l=function(h){return r.handleDrop(h,t)};return i.addEventListener(&quot;dragenter&quot;,s),i.addEventListener(&quot;dragover&quot;,o),i.addEventListener(&quot;drop&quot;,l),function(){i.removeEventListener(&quot;dragenter&quot;,s),i.removeEventListener(&quot;dragover&quot;,o),i.removeEventListener(&quot;drop&quot;,l)}}},{key:&quot;addEventListeners&quot;,value:function(t){t.addEventListener&amp;&amp;(t.addEventListener(&quot;dragstart&quot;,this.handleTopDragStart),t.addEventListener(&quot;dragstart&quot;,this.handleTopDragStartCapture,!0),t.addEventListener(&quot;dragend&quot;,this.handleTopDragEndCapture,!0),t.addEventListener(&quot;dragenter&quot;,this.handleTopDragEnter),t.addEventListener(&quot;dragenter&quot;,this.handleTopDragEnterCapture,!0),t.addEventListener(&quot;dragleave&quot;,this.handleTopDragLeaveCapture,!0),t.addEventListener(&quot;dragover&quot;,this.handleTopDragOver),t.addEventListener(&quot;dragover&quot;,this.handleTopDragOverCapture,!0),t.addEventListener(&quot;drop&quot;,this.handleTopDrop),t.addEventListener(&quot;drop&quot;,this.handleTopDropCapture,!0))}},{key:&quot;removeEventListeners&quot;,value:function(t){t.removeEventListener&amp;&amp;(t.removeEventListener(&quot;dragstart&quot;,this.handleTopDragStart),t.removeEventListener(&quot;dragstart&quot;,this.handleTopDragStartCapture,!0),t.removeEventListener(&quot;dragend&quot;,this.handleTopDragEndCapture,!0),t.removeEventListener(&quot;dragenter&quot;,this.handleTopDragEnter),t.removeEventListener(&quot;dragenter&quot;,this.handleTopDragEnterCapture,!0),t.removeEventListener(&quot;dragleave&quot;,this.handleTopDragLeaveCapture,!0),t.removeEventListener(&quot;dragover&quot;,this.handleTopDragOver),t.removeEventListener(&quot;dragover&quot;,this.handleTopDragOverCapture,!0),t.removeEventListener(&quot;drop&quot;,this.handleTopDrop),t.removeEventListener(&quot;drop&quot;,this.handleTopDropCapture,!0))}},{key:&quot;getCurrentSourceNodeOptions&quot;,value:function(){var t=this.monitor.getSourceId(),i=this.sourceNodeOptions.get(t);return j2({dropEffect:this.altKeyPressed?&quot;copy&quot;:&quot;move&quot;},i||{})}},{key:&quot;getCurrentDropEffect&quot;,value:function(){return this.isDraggingNativeItem()?&quot;copy&quot;:this.getCurrentSourceNodeOptions().dropEffect}},{key:&quot;getCurrentSourcePreviewNodeOptions&quot;,value:function(){var t=this.monitor.getSourceId(),i=this.sourcePreviewNodeOptions.get(t);return j2({anchorX:.5,anchorY:.5,captureDraggingState:!1},i||{})}},{key:&quot;isDraggingNativeItem&quot;,value:function(){var t=this.monitor.getItemType();return Object.keys(H2).some(function(i){return H2[i]===t})}},{key:&quot;beginDragNativeItem&quot;,value:function(t,i){this.clearCurrentDragSourceNode(),this.currentNativeSource=Ute(t,i),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:&quot;setCurrentDragSourceNode&quot;,value:function(t){var i=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;var r=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var s;return(s=i.rootElement)===null||s===void 0?void 0:s.addEventListener(&quot;mousemove&quot;,i.endDragIfSourceWasRemovedFromDOM,!0)},r)}},{key:&quot;clearCurrentDragSourceNode&quot;,value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener(&quot;mousemove&quot;,this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:&quot;handleDragStart&quot;,value:function(t,i){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(i))}},{key:&quot;handleDragEnter&quot;,value:function(t,i){this.dragEnterTargetIds.unshift(i)}},{key:&quot;handleDragOver&quot;,value:function(t,i){this.dragOverTargetIds===null&amp;&amp;(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(i)}},{key:&quot;handleDrop&quot;,value:function(t,i){this.dropTargetIds.unshift(i)}}]),n}(),Mg;function Wte(){return Mg||(Mg=new Image,Mg.src=&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot;),Mg}var Xte=function(e,t,i){return new jte(e,t,i)};function qte(n){const e=ss(),t=e.selectedIds,[i,r,s]=$ee(()=&gt;({canDrag:()=&gt;n.isDraggable,type:&quot;NODE&quot;,item:()=&gt;{const o=e.isSelected(n.id)?Array.from(t):[n.id];return e.dispatch(xh.dragStart(n.id,o)),{id:n.id,dragIds:o}},end:()=&gt;{e.hideCursor(),e.dispatch(xh.dragEnd())}}),[t,n]);return re.useEffect(()=&gt;{s(Wte())},[s]),r}function Yte(n,e){const t=n.getBoundingClientRect(),i=e.x-Math.round(t.x),r=e.y-Math.round(t.y),s=t.height,o=r&lt;s/2,l=!o,u=s/4,h=r&gt;u&amp;&amp;r&lt;s-u;return{x:i,inTopHalf:o,inBottomHalf:l,inMiddle:h,atTop:!h&amp;&amp;o,atBottom:!h&amp;&amp;l}}function Kte(n,e,t,i){return n?n.isInternal?i.atTop?[e,n]:i.inMiddle?[n,n]:[n,t]:i.inTopHalf?[e,n]:[n,t]:[e,null]}function Ag(n,e){return{parentId:n||null,index:e}}function Xu(n,e){return{type:&quot;line&quot;,index:n,level:e}}function $te(n){return{type:&quot;highlight&quot;,id:n}}function Yx(n,e){var t;let i=n;for(;i.parent&amp;&amp;i.level&gt;e;)i=i.parent;const r=((t=i.parent)===null||t===void 0?void 0:t.id)||null,s=UL(i)+1;return{parentId:r,index:s}}function f3(n){var e;const t=Yte(n.element,n.offset),i=n.indent,r=Math.round(Math.max(0,t.x-i)/i),{node:s,nextNode:o,prevNode:l}=n,[u,h]=Kte(s,l,o,t);if(s&amp;&amp;s.isInternal&amp;&amp;t.inMiddle)return{drop:Ag(s.id,null),cursor:$te(s.id)};if(!u)return{drop:Ag((e=h==null?void 0:h.parent)===null||e===void 0?void 0:e.id,0),cursor:Xu(0,0)};if(NL(u)){const f=kg(r,(h==null?void 0:h.level)||0,u.level);return{drop:Yx(u,f),cursor:Xu(u.rowIndex+1,f)}}if(IL(u)){const f=kg(r,(h==null?void 0:h.level)||0,u.level);return{drop:Yx(u,f),cursor:Xu(u.rowIndex+1,f)}}if(PL(u)){const f=kg(r,0,u.level+1);return f&gt;u.level?{drop:Ag(u.id,0),cursor:Xu(u.rowIndex+1,f)}:{drop:Yx(u,f),cursor:Xu(u.rowIndex+1,f)}}return{drop:Ag(u==null?void 0:u.id,0),cursor:Xu(u.rowIndex+1,u.level+1)}}function Zte(n,e){const t=ss(),[i,r]=r3(()=&gt;({accept:&quot;NODE&quot;,canDrop:()=&gt;t.canDrop(),hover:(s,o)=&gt;{const l=o.getClientOffset();if(!n.current||!l)return;const{cursor:u,drop:h}=f3({element:n.current,offset:l,indent:t.indent,node:e,prevNode:e.prev,nextNode:e.next});h&amp;&amp;t.dispatch(xh.hovering(h.parentId,h.index)),o.canDrop()?u&amp;&amp;t.showCursor(u):t.hideCursor()},drop:(s,o)=&gt;{if(!o.canDrop())return null;let{parentId:l,index:u,dragIds:h}=t.state.dnd;HL(t.props.onMove,{dragIds:h,parentId:l===Hd?null:l,index:u===null?0:u,dragNodes:t.dragNodes,parentNode:t.get(l)}),t.open(l)}}),[e,n.current,t.props]);return r}function Jte(n){const e=ss(),t=e.at(n);if(!t)throw new Error(`Could not find node for index: ${n}`);return re.useMemo(()=&gt;{const i=t.clone();return e.visibleNodes[n]=i,i},[...Object.values(t.state),t])}const Qte=md.memo(function({index:e,style:t}){DL(),wZ();const i=ss(),r=Jte(e),s=re.useRef(null),o=qte(r),l=Zte(s,r),u=re.useCallback(x=&gt;{s.current=x,l(x)},[l]),h=i.indent*r.level,f=re.useMemo(()=&gt;({paddingLeft:h}),[h]),p=re.useMemo(()=&gt;{var x,b;return Object.assign(Object.assign({},t),{top:parseFloat(t.top)+((b=(x=i.props.padding)!==null&amp;&amp;x!==void 0?x:i.props.paddingTop)!==null&amp;&amp;b!==void 0?b:0)})},[t,i.props.padding,i.props.paddingTop]),m={role:&quot;treeitem&quot;,&quot;aria-level&quot;:r.level+1,&quot;aria-selected&quot;:r.isSelected,&quot;aria-expanded&quot;:r.isOpen,style:p,tabIndex:-1,className:i.props.rowClassName};re.useEffect(()=&gt;{var x;!r.isEditing&amp;&amp;r.isFocused&amp;&amp;((x=s.current)===null||x===void 0||x.focus({preventScroll:!0}))},[r.isEditing,r.isFocused,s.current]);const g=i.renderNode,v=i.renderRow;return P.jsx(v,{node:r,innerRef:u,attrs:m,children:P.jsx(g,{node:r,tree:i,style:f,dragHandle:o})})});let Kx=&quot;&quot;,W2=null;function d3(){DL();const n=ss();return P.jsx(&quot;div&quot;,{role:&quot;tree&quot;,style:{height:n.height,width:n.width,minHeight:0,minWidth:0},onContextMenu:n.props.onContextMenu,onClick:n.props.onClick,tabIndex:0,onFocus:e=&gt;{e.currentTarget.contains(e.relatedTarget)||n.onFocus()},onBlur:e=&gt;{e.currentTarget.contains(e.relatedTarget)||n.onBlur()},onKeyDown:e=&gt;{var t;if(n.isEditing)return;if(e.key===&quot;Backspace&quot;){if(!n.props.onDelete)return;const r=Array.from(n.selectedIds);if(r.length&gt;1){let s=n.mostRecentNode;for(;s&amp;&amp;s.isSelected;)s=s.nextSibling;s||(s=n.lastNode),n.focus(s,{scroll:!1}),n.delete(Array.from(r))}else{const s=n.focusedNode;if(s){const o=s.nextSibling,l=s.parent;n.focus(o||l,{scroll:!1}),n.delete(s)}}return}if(e.key===&quot;Tab&quot;&amp;&amp;!e.shiftKey){e.preventDefault(),kL(e.currentTarget);return}if(e.key===&quot;Tab&quot;&amp;&amp;e.shiftKey){e.preventDefault(),FL(e.currentTarget);return}if(e.key===&quot;ArrowDown&quot;){e.preventDefault();const r=n.nextNode;if(e.metaKey){n.select(n.focusedNode),n.activate(n.focusedNode);return}else if(!e.shiftKey||n.props.disableMultiSelection){n.focus(r);return}else{if(!r)return;const s=n.focusedNode;s?s.isSelected?n.selectContiguous(r):n.selectMulti(r):n.focus(n.firstNode);return}}if(e.key===&quot;ArrowUp&quot;){e.preventDefault();const r=n.prevNode;if(!e.shiftKey||n.props.disableMultiSelection){n.focus(r);return}else{if(!r)return;const s=n.focusedNode;s?s.isSelected?n.selectContiguous(r):n.selectMulti(r):n.focus(n.lastNode);return}}if(e.key===&quot;ArrowRight&quot;){const r=n.focusedNode;if(!r)return;r.isInternal&amp;&amp;r.isOpen?n.focus(n.nextNode):r.isInternal&amp;&amp;n.open(r.id);return}if(e.key===&quot;ArrowLeft&quot;){const r=n.focusedNode;if(!r||r.isRoot)return;r.isInternal&amp;&amp;r.isOpen?n.close(r.id):!((t=r.parent)===null||t===void 0)&amp;&amp;t.isRoot||n.focus(r.parent);return}if(e.key===&quot;a&quot;&amp;&amp;e.metaKey&amp;&amp;!n.props.disableMultiSelection){e.preventDefault(),n.selectAll();return}if(e.key===&quot;a&quot;&amp;&amp;!e.metaKey&amp;&amp;n.props.onCreate){n.createLeaf();return}if(e.key===&quot;A&quot;&amp;&amp;!e.metaKey){if(!n.props.onCreate)return;n.createInternal();return}if(e.key===&quot;Home&quot;){e.preventDefault(),n.focus(n.firstNode);return}if(e.key===&quot;End&quot;){e.preventDefault(),n.focus(n.lastNode);return}if(e.key===&quot;Enter&quot;){const r=n.focusedNode;if(!r||!r.isEditable||!n.props.onRename)return;setTimeout(()=&gt;{r&amp;&amp;n.edit(r)});return}if(e.key===&quot; &quot;){e.preventDefault();const r=n.focusedNode;if(!r)return;r.isLeaf?(r.select(),r.activate()):r.toggle();return}if(e.key===&quot;*&quot;){const r=n.focusedNode;if(!r)return;n.openSiblings(r);return}if(e.key===&quot;PageUp&quot;){e.preventDefault(),n.pageUp();return}e.key===&quot;PageDown&quot;&amp;&amp;(e.preventDefault(),n.pageDown()),clearTimeout(W2),Kx+=e.key,W2=setTimeout(()=&gt;{Kx=&quot;&quot;},600);const i=n.visibleNodes.find(r=&gt;{const s=r.data.name;return typeof s==&quot;string&quot;?s.toLowerCase().startsWith(Kx):!1});i&amp;&amp;n.focus(i.id)},children:P.jsx(oJ,{className:n.props.className,outerRef:n.listEl,itemCount:n.visibleNodes.length,height:n.height,width:n.width,itemSize:n.rowHeight,overscanCount:n.overscanCount,itemKey:e=&gt;{var t;return((t=n.visibleNodes[e])===null||t===void 0?void 0:t.id)||e},outerElementType:cJ,innerElementType:fJ,onScroll:n.props.onScroll,onItemsRendered:n.onItemsRendered.bind(n),ref:n.list,children:Qte})})}function X2(n){return n.isFiltered?tne(n.root,n.isMatch.bind(n)):ene(n.root)}function ene(n){const e=[];function t(i){var r;i.level&gt;=0&amp;&amp;e.push(i),i.isOpen&amp;&amp;((r=i.children)===null||r===void 0||r.forEach(t))}return t(n),e.forEach(p3),e}function tne(n,e){const t={},i=[];function r(o){if(!o.isRoot&amp;&amp;e(o)){t[o.id]=!0;let u=o.parent;for(;u;)t[u.id]=!0,u=u.parent}if(o.children)for(let u of o.children)r(u)}function s(o){var l;o.level&gt;=0&amp;&amp;t[o.id]&amp;&amp;i.push(o),o.isOpen&amp;&amp;((l=o.children)===null||l===void 0||l.forEach(s))}return r(n),s(n),i.forEach(p3),i}function p3(n,e){n.rowIndex=e}const q2=n=&gt;n.reduce((e,t,i)=&gt;(e[t.id]=i,e),{});var $x=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(i.next(f))}catch(p){o(p)}}function u(f){try{h(i.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):r(f.value).then(l,u)}h((i=i.apply(n,e||[])).next())})};const{safeRun:Xi,identify:Zo,identifyNull:zs}=RZ;class pd{constructor(e,t,i,r){this.store=e,this.props=t,this.list=i,this.listEl=r,this.visibleStartIndex=0,this.visibleStopIndex=0,this.root=n2(this),this.visibleNodes=X2(this),this.idToIndex=q2(this.visibleNodes)}update(e){this.props=e,this.root=n2(this),this.visibleNodes=X2(this),this.idToIndex=q2(this.visibleNodes)}dispatch(e){return this.store.dispatch(e)}get state(){return this.store.getState()}get openState(){return this.state.nodes.open.unfiltered}get width(){var e;return(e=this.props.width)!==null&amp;&amp;e!==void 0?e:300}get height(){var e;return(e=this.props.height)!==null&amp;&amp;e!==void 0?e:500}get indent(){var e;return(e=this.props.indent)!==null&amp;&amp;e!==void 0?e:24}get rowHeight(){var e;return(e=this.props.rowHeight)!==null&amp;&amp;e!==void 0?e:24}get overscanCount(){var e;return(e=this.props.overscanCount)!==null&amp;&amp;e!==void 0?e:1}get searchTerm(){return(this.props.searchTerm||&quot;&quot;).trim()}get matchFn(){var e;const t=(e=this.props.searchMatch)!==null&amp;&amp;e!==void 0?e:(i,r)=&gt;JSON.stringify(Object.values(i.data)).toLocaleLowerCase().includes(r.toLocaleLowerCase());return i=&gt;t(i,this.searchTerm)}accessChildren(e){var t;const i=this.props.childrenAccessor||&quot;children&quot;;return(t=nd(e,i))!==null&amp;&amp;t!==void 0?t:null}accessId(e){const t=this.props.idAccessor||&quot;id&quot;,i=nd(e,t);if(!i)throw new Error(&quot;Data must contain an &#x27;id&#x27; property or props.idAccessor must return a string&quot;);return i}get firstNode(){var e;return(e=this.visibleNodes[0])!==null&amp;&amp;e!==void 0?e:null}get lastNode(){var e;return(e=this.visibleNodes[this.visibleNodes.length-1])!==null&amp;&amp;e!==void 0?e:null}get focusedNode(){var e;return(e=this.get(this.state.nodes.focus.id))!==null&amp;&amp;e!==void 0?e:null}get mostRecentNode(){var e;return(e=this.get(this.state.nodes.selection.mostRecent))!==null&amp;&amp;e!==void 0?e:null}get nextNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e+1)}get prevNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e-1)}get(e){return e&amp;&amp;e in this.idToIndex&amp;&amp;this.visibleNodes[this.idToIndex[e]]||null}at(e){return this.visibleNodes[e]||null}nodesBetween(e,t){var i;if(e===null||t===null)return[];const r=(i=this.indexOf(e))!==null&amp;&amp;i!==void 0?i:0,s=this.indexOf(t);if(s===null)return[];const o=Math.min(r,s),l=Math.max(r,s);return this.visibleNodes.slice(o,l+1)}indexOf(e){const t=BL(e);return t?this.idToIndex[t]:null}get editingId(){return this.state.nodes.edit.id}createInternal(){return this.create({type:&quot;internal&quot;})}createLeaf(){return this.create({type:&quot;leaf&quot;})}create(){return $x(this,arguments,void 0,function*(e={}){var t,i;const r=e.parentId===void 0?jL(this):e.parentId,s=(t=e.index)!==null&amp;&amp;t!==void 0?t:GL(this),o=(i=e.type)!==null&amp;&amp;i!==void 0?i:&quot;leaf&quot;,l=yield Xi(this.props.onCreate,{type:o,parentId:r,index:s,parentNode:this.get(r)});l&amp;&amp;(this.focus(l),setTimeout(()=&gt;{this.edit(l).then(()=&gt;{this.select(l),this.activate(l)})}))})}delete(e){return $x(this,void 0,void 0,function*(){if(!e)return;const i=(Array.isArray(e)?e:[e]).map(Zo),r=i.map(s=&gt;this.get(s)).filter(s=&gt;!!s);yield Xi(this.props.onDelete,{nodes:r,ids:i})})}edit(e){const t=Zo(e);return this.resolveEdit({cancelled:!0}),this.scrollTo(t),this.dispatch(kx(t)),new Promise(i=&gt;{pd.editPromise=i})}submit(e,t){return $x(this,void 0,void 0,function*(){if(!e)return;const i=Zo(e);yield Xi(this.props.onRename,{id:i,name:t,node:this.get(i)}),this.dispatch(kx(null)),this.resolveEdit({cancelled:!1,value:t}),setTimeout(()=&gt;this.onFocus())})}reset(){this.dispatch(kx(null)),this.resolveEdit({cancelled:!0}),setTimeout(()=&gt;this.onFocus())}activate(e){const t=this.get(zs(e));t&amp;&amp;Xi(this.props.onActivate,t)}resolveEdit(e){const t=pd.editPromise;t&amp;&amp;t(e),pd.editPromise=null}get selectedIds(){return this.state.nodes.selection.ids}get selectedNodes(){let e=[];for(let t of Array.from(this.selectedIds)){const i=this.get(t);i&amp;&amp;e.push(i)}return e}focus(e,t={}){e&amp;&amp;(this.props.selectionFollowsFocus?this.select(e):(this.dispatch(Vu(Zo(e))),t.scroll!==!1&amp;&amp;this.scrollTo(e),this.focusedNode&amp;&amp;Xi(this.props.onFocus,this.focusedNode)))}pageUp(){var e,t;const i=this.visibleStartIndex,s=this.visibleStopIndex-i;let o=(t=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&amp;&amp;t!==void 0?t:0;o&gt;i?o=i:o=Math.max(i-s,0),this.focus(this.at(o))}pageDown(){var e,t;const i=this.visibleStartIndex,r=this.visibleStopIndex,s=r-i;let o=(t=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&amp;&amp;t!==void 0?t:0;o&lt;r?o=r:o=Math.min(o+s,this.visibleNodes.length-1),this.focus(this.at(o))}select(e,t={}){if(!e)return;const i=t.focus!==!1,r=Zo(e);i&amp;&amp;this.dispatch(Vu(r)),this.dispatch(Fs.only(r)),this.dispatch(Fs.anchor(r)),this.dispatch(Fs.mostRecent(r)),this.scrollTo(r,t.align),this.focusedNode&amp;&amp;i&amp;&amp;Xi(this.props.onFocus,this.focusedNode),Xi(this.props.onSelect,this.selectedNodes)}deselect(e){if(!e)return;const t=Zo(e);this.dispatch(Fs.remove(t)),Xi(this.props.onSelect,this.selectedNodes)}selectMulti(e){const t=this.get(zs(e));t&amp;&amp;(this.dispatch(Vu(t.id)),this.dispatch(Fs.add(t.id)),this.dispatch(Fs.anchor(t.id)),this.dispatch(Fs.mostRecent(t.id)),this.scrollTo(t),this.focusedNode&amp;&amp;Xi(this.props.onFocus,this.focusedNode),Xi(this.props.onSelect,this.selectedNodes))}selectContiguous(e){if(!e)return;const t=Zo(e),{anchor:i,mostRecent:r}=this.state.nodes.selection;this.dispatch(Vu(t)),this.dispatch(Fs.remove(this.nodesBetween(i,r))),this.dispatch(Fs.add(this.nodesBetween(i,zs(t)))),this.dispatch(Fs.mostRecent(t)),this.scrollTo(t),this.focusedNode&amp;&amp;Xi(this.props.onFocus,this.focusedNode),Xi(this.props.onSelect,this.selectedNodes)}deselectAll(){this.setSelection({ids:[],anchor:null,mostRecent:null}),Xi(this.props.onSelect,this.selectedNodes)}selectAll(){var e;this.setSelection({ids:Object.keys(this.idToIndex),anchor:this.firstNode,mostRecent:this.lastNode}),this.dispatch(Vu((e=this.lastNode)===null||e===void 0?void 0:e.id)),this.focusedNode&amp;&amp;Xi(this.props.onFocus,this.focusedNode),Xi(this.props.onSelect,this.selectedNodes)}setSelection(e){var t;const i=new Set((t=e.ids)===null||t===void 0?void 0:t.map(Zo)),r=zs(e.anchor),s=zs(e.mostRecent);this.dispatch(Fs.set({ids:i,anchor:r,mostRecent:s})),Xi(this.props.onSelect,this.selectedNodes)}get cursorParentId(){const{cursor:e}=this.state.dnd;switch(e.type){case&quot;highlight&quot;:return e.id;default:return null}}get cursorOverFolder(){return this.state.dnd.cursor.type===&quot;highlight&quot;}get dragNodes(){return this.state.dnd.dragIds.map(e=&gt;this.get(e)).filter(e=&gt;!!e)}get dragNode(){return this.get(this.state.nodes.drag.id)}get dragDestinationParent(){return this.get(this.state.nodes.drag.destinationParentId)}get dragDestinationIndex(){return this.state.nodes.drag.destinationIndex}canDrop(){var e;if(this.isFiltered)return!1;const t=(e=this.get(this.state.dnd.parentId))!==null&amp;&amp;e!==void 0?e:this.root,i=this.dragNodes,r=this.props.disableDrop;for(const s of i)if(!s||!t||s.isInternal&amp;&amp;LL(t,s))return!1;return typeof r==&quot;function&quot;?!r({parentNode:t,dragNodes:this.dragNodes,index:this.state.dnd.index||0}):typeof r==&quot;string&quot;?!t.data[r]:typeof r==&quot;boolean&quot;?!r:!0}hideCursor(){this.dispatch(xh.cursor({type:&quot;none&quot;}))}showCursor(e){this.dispatch(xh.cursor(e))}open(e){const t=zs(e);t&amp;&amp;(this.isOpen(t)||(this.dispatch(VS.open(t,this.isFiltered)),Xi(this.props.onToggle,t)))}close(e){const t=zs(e);t&amp;&amp;this.isOpen(t)&amp;&amp;(this.dispatch(VS.close(t,this.isFiltered)),Xi(this.props.onToggle,t))}toggle(e){const t=zs(e);if(t)return this.isOpen(t)?this.close(t):this.open(t)}openParents(e){const t=zs(e);if(!t)return;const i=s1(this.root,t);let r=i==null?void 0:i.parent;for(;r;)this.open(r.id),r=r.parent}openSiblings(e){const t=e.parent;if(!t)this.toggle(e.id);else if(t.children){const i=e.isOpen;for(let r of t.children)r.isInternal&amp;&amp;(i?this.close(r.id):this.open(r.id));this.scrollTo(this.focusedNode)}}openAll(){q0(this.root,e=&gt;{e.isInternal&amp;&amp;e.open()})}closeAll(){q0(this.root,e=&gt;{e.isInternal&amp;&amp;e.close()})}scrollTo(e,t=&quot;smart&quot;){if(!e)return;const i=Zo(e);return this.openParents(i),VL(()=&gt;i in this.idToIndex).then(()=&gt;{var r;const s=this.idToIndex[i];s!==void 0&amp;&amp;((r=this.list.current)===null||r===void 0||r.scrollToItem(s,t))}).catch(()=&gt;{})}get isEditing(){return this.state.nodes.edit.id!==null}get isFiltered(){var e;return!!(!((e=this.props.searchTerm)===null||e===void 0)&amp;&amp;e.trim())}get hasFocus(){return this.state.nodes.focus.treeFocused}get hasNoSelection(){return this.state.nodes.selection.ids.size===0}get hasOneSelection(){return this.state.nodes.selection.ids.size===1}get hasMultipleSelections(){return this.state.nodes.selection.ids.size&gt;1}isSelected(e){return e?this.state.nodes.selection.ids.has(e):!1}isOpen(e){var t,i,r;if(!e)return!1;if(e===Hd)return!0;const s=(t=this.props.openByDefault)!==null&amp;&amp;t!==void 0?t:!0;return this.isFiltered?(i=this.state.nodes.open.filtered[e])!==null&amp;&amp;i!==void 0?i:!0:(r=this.state.nodes.open.unfiltered[e])!==null&amp;&amp;r!==void 0?r:s}isEditable(e){const t=this.props.disableEdit||(()=&gt;!1);return!nd(e,t)}isDraggable(e){const t=this.props.disableDrag||(()=&gt;!1);return!nd(e,t)}isDragging(e){const t=zs(e);return t?this.state.nodes.drag.id===t:!1}isFocused(e){return this.hasFocus&amp;&amp;this.state.nodes.focus.id===e}isMatch(e){return this.matchFn(e)}willReceiveDrop(e){const t=zs(e);if(!t)return!1;const{destinationParentId:i,destinationIndex:r}=this.state.nodes.drag;return t===i&amp;&amp;r===null}onFocus(){const e=this.focusedNode||this.firstNode;e&amp;&amp;this.dispatch(Vu(e.id))}onBlur(){this.dispatch(zZ())}onItemsRendered(e){this.visibleStartIndex=e.visibleStartIndex,this.visibleStopIndex=e.visibleStopIndex}get renderContainer(){return this.props.renderContainer||d3}get renderRow(){return this.props.renderRow||PZ}get renderNode(){return this.props.children||LZ}get renderDragPreview(){return this.props.renderDragPreview||WL}get renderCursor(){return this.props.renderCursor||IZ}}function hr(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var nne=typeof Symbol==&quot;function&quot;&amp;&amp;Symbol.observable||&quot;@@observable&quot;,Y2=nne,Zx=()=&gt;Math.random().toString(36).substring(7).split(&quot;&quot;).join(&quot;.&quot;),ine={INIT:`@@redux/INIT${Zx()}`,REPLACE:`@@redux/REPLACE${Zx()}`,PROBE_UNKNOWN_ACTION:()=&gt;`@@redux/PROBE_UNKNOWN_ACTION${Zx()}`},$0=ine;function rne(n){if(typeof n!=&quot;object&quot;||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function m3(n,e,t){if(typeof n!=&quot;function&quot;)throw new Error(hr(2));if(typeof e==&quot;function&quot;&amp;&amp;typeof t==&quot;function&quot;||typeof t==&quot;function&quot;&amp;&amp;typeof arguments[3]==&quot;function&quot;)throw new Error(hr(0));if(typeof e==&quot;function&quot;&amp;&amp;typeof t&gt;&quot;u&quot;&amp;&amp;(t=e,e=void 0),typeof t&lt;&quot;u&quot;){if(typeof t!=&quot;function&quot;)throw new Error(hr(1));return t(m3)(n,e)}let i=n,r=e,s=new Map,o=s,l=0,u=!1;function h(){o===s&amp;&amp;(o=new Map,s.forEach((b,_)=&gt;{o.set(_,b)}))}function f(){if(u)throw new Error(hr(3));return r}function p(b){if(typeof b!=&quot;function&quot;)throw new Error(hr(4));if(u)throw new Error(hr(5));let _=!0;h();const T=l++;return o.set(T,b),function(){if(_){if(u)throw new Error(hr(6));_=!1,h(),o.delete(T),s=null}}}function m(b){if(!rne(b))throw new Error(hr(7));if(typeof b.type&gt;&quot;u&quot;)throw new Error(hr(8));if(typeof b.type!=&quot;string&quot;)throw new Error(hr(17));if(u)throw new Error(hr(9));try{u=!0,r=i(r,b)}finally{u=!1}return(s=o).forEach(T=&gt;{T()}),b}function g(b){if(typeof b!=&quot;function&quot;)throw new Error(hr(10));i=b,m({type:$0.REPLACE})}function v(){const b=p;return{subscribe(_){if(typeof _!=&quot;object&quot;||_===null)throw new Error(hr(11));function T(){const E=_;E.next&amp;&amp;E.next(f())}return T(),{unsubscribe:b(T)}},[Y2](){return this}}}return m({type:$0.INIT}),{dispatch:m,subscribe:p,getState:f,replaceReducer:g,[Y2]:v}}function sne(n){Object.keys(n).forEach(e=&gt;{const t=n[e];if(typeof t(void 0,{type:$0.INIT})&gt;&quot;u&quot;)throw new Error(hr(12));if(typeof t(void 0,{type:$0.PROBE_UNKNOWN_ACTION()})&gt;&quot;u&quot;)throw new Error(hr(13))})}function K2(n){const e=Object.keys(n),t={};for(let s=0;s&lt;e.length;s++){const o=e[s];typeof n[o]==&quot;function&quot;&amp;&amp;(t[o]=n[o])}const i=Object.keys(t);let r;try{sne(t)}catch(s){r=s}return function(o={},l){if(r)throw r;let u=!1;const h={};for(let f=0;f&lt;i.length;f++){const p=i[f],m=t[p],g=o[p],v=m(g,l);if(typeof v&gt;&quot;u&quot;)throw l&amp;&amp;l.type,new Error(hr(14));h[p]=v,u=u||v!==g}return u=u||i.length!==Object.keys(o).length,u?h:o}}function one(n=bh().nodes.drag,e){switch(e.type){case&quot;DND_DRAG_START&quot;:return Object.assign(Object.assign({},n),{id:e.id,selectedIds:e.dragIds});case&quot;DND_DRAG_END&quot;:return Object.assign(Object.assign({},n),{id:null,destinationParentId:null,destinationIndex:null,selectedIds:[]});case&quot;DND_HOVERING&quot;:return e.parentId!==n.destinationParentId||e.index!=n.destinationIndex?Object.assign(Object.assign({},n),{destinationParentId:e.parentId,destinationIndex:e.index}):n;default:return n}}const ane=K2({nodes:K2({focus:BZ,edit:FZ,open:HZ,selection:VZ,drag:one}),dnd:GZ}),lne=bh();function cne({treeProps:n,imperativeHandle:e,children:t}){const i=re.useRef(null),r=re.useRef(null),s=re.useRef(m3(ane,bh(n))),o=SZ.useSyncExternalStore(s.current.subscribe,s.current.getState,()=&gt;lne),l=re.useMemo(()=&gt;new pd(s.current,n,i,r),[]),u=re.useRef(0);return re.useMemo(()=&gt;{u.current+=1,l.update(n)},[...Object.values(n),o.nodes.open]),re.useImperativeHandle(e,()=&gt;l),re.useEffect(()=&gt;{l.props.selection?l.select(l.props.selection,{focus:!1}):l.deselectAll()},[l.props.selection]),re.useEffect(()=&gt;{l.props.searchTerm||s.current.dispatch(VS.clear(!0))},[l.props.searchTerm]),P.jsx(AL.Provider,{value:l,children:P.jsx(OL.Provider,{value:u.current,children:P.jsx(CL.Provider,{value:o.nodes,children:P.jsx(RL.Provider,{value:o.dnd,children:P.jsx(WQ,Object.assign({backend:Xte,options:{rootElement:l.props.dndRootElement||void 0}},n.dndManager&amp;&amp;{manager:n.dndManager},{children:t}))})})})})}function une(){const n=ss(),[,e]=r3(()=&gt;({accept:&quot;NODE&quot;,canDrop:(t,i)=&gt;i.isOver({shallow:!0})?n.canDrop():!1,hover:(t,i)=&gt;{if(!i.isOver({shallow:!0}))return;const r=i.getClientOffset();if(!n.listEl.current||!r)return;const{cursor:s,drop:o}=f3({element:n.listEl.current,offset:r,indent:n.indent,node:null,prevNode:n.visibleNodes[n.visibleNodes.length-1],nextNode:null});o&amp;&amp;n.dispatch(xh.hovering(o.parentId,o.index)),i.canDrop()?s&amp;&amp;n.showCursor(s):n.hideCursor()}}),[n]);e(n.listEl)}function hne(n){return une(),n.children}function fne(){const e=ss().props.renderContainer||d3;return P.jsx(P.Fragment,{children:P.jsx(e,{})})}function dne(){const n=ss(),{offset:e,mouse:t,item:i,isDragging:r}=yte(o=&gt;({offset:o.getSourceClientOffset(),mouse:o.getClientOffset(),item:o.getItem(),isDragging:o.isDragging()})),s=n.props.renderDragPreview||WL;return P.jsx(s,{offset:e,mouse:t,id:(i==null?void 0:i.id)||null,dragIds:(i==null?void 0:i.dragIds)||[],isDragging:r})}class pne{constructor(e){this.root=mne(e)}get data(){var e,t;return(t=(e=this.root.children)===null||e===void 0?void 0:e.map(i=&gt;i.data))!==null&amp;&amp;t!==void 0?t:[]}create(e){const t=e.parentId?this.find(e.parentId):this.root;if(!t)return null;t.addChild(e.data,e.index)}move(e){const t=this.find(e.id),i=e.parentId?this.find(e.parentId):this.root;!t||!i||(i.addChild(t.data,e.index),t.drop())}update(e){const t=this.find(e.id);t&amp;&amp;t.update(e.changes)}drop(e){const t=this.find(e.id);t&amp;&amp;t.drop()}find(e,t=this.root){if(!t)return null;if(t.id===e)return t;if(t.children){for(let i of t.children){const r=this.find(e,i);if(r)return r}return null}return null}}function mne(n){const e=new g3({id:&quot;ROOT&quot;},null);return e.children=n.map(t=&gt;f1(t,e)),e}function f1(n,e){const t=new g3(n,e);return n.children&amp;&amp;(t.children=n.children.map(i=&gt;f1(i,t))),t}class g3{constructor(e,t){this.data=e,this.parent=t,this.id=e.id}hasParent(){return!!this.parent}get childIndex(){return this.hasParent()?this.parent.children.indexOf(this):-1}addChild(e,t){var i,r;const s=f1(e,this);this.children=(i=this.children)!==null&amp;&amp;i!==void 0?i:[],this.children.splice(t,0,s),this.data.children=(r=this.data.children)!==null&amp;&amp;r!==void 0?r:[],this.data.children.splice(t,0,e)}removeChild(e){var t,i;(t=this.children)===null||t===void 0||t.splice(e,1),(i=this.data.children)===null||i===void 0||i.splice(e,1)}update(e){if(this.hasParent()){const t=this.childIndex;this.parent.addChild(Object.assign(Object.assign({},this.data),e),t),this.drop()}}drop(){this.hasParent()&amp;&amp;this.parent.removeChild(this.childIndex)}}let gne=0;function yne(n){const[e,t]=re.useState(n),i=re.useMemo(()=&gt;new pne(e),[e]);return[e,{onMove:h=&gt;{for(const f of h.dragIds)i.move({id:f,parentId:h.parentId,index:h.index});t(i.data)},onRename:({name:h,id:f})=&gt;{i.update({id:f,changes:{name:h}}),t(i.data)},onCreate:({parentId:h,index:f,type:p})=&gt;{const m={id:`simple-tree-id-${gne++}`,name:&quot;&quot;};return p===&quot;internal&quot;&amp;&amp;(m.children=[]),i.create({parentId:h,index:f,data:m}),t(i.data),m},onDelete:h=&gt;{h.ids.forEach(f=&gt;i.drop({id:f})),t(i.data)}}]}function _ne(n){if(n.initialData&amp;&amp;n.data)throw new Error(&quot;React Arborist Tree =&gt; Provide either a data or initialData prop, but not both.&quot;);if(n.initialData&amp;&amp;(n.onCreate||n.onDelete||n.onMove||n.onRename))throw new Error(`React Arborist Tree =&gt; You passed the initialData prop along with a data handler.
Use the data prop if you want to provide your own handlers.`);if(n.initialData){const[e,t]=yne(n.initialData);return Object.assign(Object.assign(Object.assign({},n),t),{data:e})}else return n}function vne(n,e){const t=_ne(n);return P.jsxs(cne,{treeProps:t,imperativeHandle:e,children:[P.jsx(hne,{children:P.jsx(fne,{})}),P.jsx(dne,{})]})}const bne=re.forwardRef(vne),xne=({style:n,node:e,dragHandle:t})=&gt;{const{data:i,isSelected:r,isOpen:s,children:o}=e;let l=!1;return o&amp;&amp;o.length&gt;0&amp;&amp;(l=!0),P.jsxs(&quot;div&quot;,{style:n,ref:t,className:`flex items-center cursor-pointer ${r?&quot;bg-blue-700&quot;:&quot;&quot;}`,children:[l&amp;&amp;P.jsx(&quot;div&quot;,{onClick:u=&gt;{u.stopPropagation(),e.toggle()},className:&quot;mr-2&quot;,children:s?&quot;▼&quot;:&quot;▶&quot;}),P.jsx(&quot;div&quot;,{className:&quot;whitespace-nowrap&quot;,children:i.name})]})};async function y3(n,e){if(e.push(n),n.children!=null&amp;&amp;n.children.length&gt;0)for(let t of n.children)await y3(t,e)}async function Sne(n){var t;let e=[];for(let i of n){let r=i.data.rangeId,s=i.data.node_name,o=(t=Sc.current)==null?void 0:t.get(i.data.model_key);if(!o){console.warn(&quot;No scene found for node:&quot;,i);continue}let l=o.getObjectByName(s);!l&amp;&amp;(l=o.getObjectByName(i.data.name.replace(&quot;/&quot;,&quot;&quot;)),!l)||e.push([l,r])}return e}async function wne(n){const e=Nh.getState();if(n.length&gt;0){let t=[];for(let o of n)await y3(o,t);let i=await Sne(t);e.clearSelectedObjects(),e.addBatchofMeshes(i);const s=t[t.length-1].data.name;yl.getState().setName(s)}else e.clearSelectedObjects()}const Ene=()=&gt;{const{treeData:n,setTree:e,searchTerm:t}=Oc(),[i,r]=re.useState(800),s=re.useRef(null),o=re.useRef(null),l=re.useRef(null),u=n?[{id:&quot;root&quot;,name:&quot;scene&quot;,children:[n]}]:[{id:&quot;root&quot;,name:&quot;scene&quot;,children:[]}];re.useEffect(()=&gt;{const f=()=&gt;{if(o.current&amp;&amp;l.current){const m=o.current.offsetHeight,g=l.current.offsetHeight;r(m-g)}},p=new ResizeObserver(()=&gt;f());return o.current&amp;&amp;p.observe(o.current),f(),()=&gt;{p.disconnect()}},[]),re.useEffect(()=&gt;{if(s.current){const f=s.current;e(f)}},[]);const h=f=&gt;{var p;(p=s.current)!=null&amp;&amp;p.isProgrammaticChange||(async()=&gt;await wne(f))()};return P.jsxs(&quot;div&quot;,{ref:o,className:&quot;h-full w-full flex flex-col max-h-screen pl-1 pr-2&quot;,children:[P.jsx(&quot;div&quot;,{ref:l,className:&quot;w-full pr-12 pt-1 &quot;,children:P.jsx(&quot;input&quot;,{className:&quot;w-full bg-gray-600 text-white rounded pl-1&quot;,onInput:f=&gt;{Oc.getState().setSearchTerm(f.target.value)}})}),P.jsx(&quot;div&quot;,{children:P.jsx(bne,{className:&quot;text-white scrollbar&quot;,width:&quot;100%&quot;,height:i,selectionFollowsFocus:!0,data:u,ref:s,disableDrag:!0,disableDrop:!0,disableEdit:!0,openByDefault:!1,disableMultiSelection:!1,searchTerm:t,searchMatch:(f,p)=&gt;f.data.name.toLowerCase().includes(p.toLowerCase()),onSelect:f=&gt;{h(f)},children:xne})})]})},Tne=()=&gt;{const[n,e]=re.useState(256),t=re.useRef(!1),{isTreeCollapsed:i}=Oc(),r=s=&gt;{if(i)return;t.current=!0;const o=s.clientX,l=n,u=f=&gt;{if(!t.current)return;const p=Math.min(400,Math.max(200,l+f.clientX-o));e(p)},h=()=&gt;{t.current=!1,window.removeEventListener(&quot;mousemove&quot;,u),window.removeEventListener(&quot;mouseup&quot;,h)};window.addEventListener(&quot;mousemove&quot;,u),window.addEventListener(&quot;mouseup&quot;,h)};return P.jsx(&quot;div&quot;,{className:&quot;relative flex h-full&quot;,children:!i&amp;&amp;P.jsxs(&quot;div&quot;,{style:{width:`${n}px`},className:&quot;flex-grow-0 flex-shrink-0 h-full bg-gray-800 overflow-auto relative&quot;,children:[P.jsx(Ene,{}),P.jsx(&quot;div&quot;,{className:&quot;absolute top-0 right-0 w-2 h-full cursor-ew-resize bg-gray-600&quot;,onMouseDown:r})]})})},Mne=n=&gt;P.jsx(&quot;svg&quot;,{fill:&quot;#ffffff&quot;,width:&quot;12px&quot;,height:&quot;12px&quot;,viewBox:&quot;0 0 24 24&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,enableBackground:&quot;new 0 0 24 24&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M8.5,6H6.7C8.2,4.7,10,4,12,4c0.3,0,0.6,0,0.9,0.1c0,0,0,0,0,0c0.5,0.1,1-0.3,1.1-0.9c0.1-0.5-0.3-1-0.9-1.1C12.7,2,12.4,2,12,2C9.6,2,7.3,2.9,5.5,4.4V3c0-0.6-0.4-1-1-1s-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1S9.1,6,8.5,6z M7,14.5c-0.6,0-1,0.4-1,1v1.8C4.7,15.8,4,14,4,12c0-0.3,0-0.6,0.1-0.9c0,0,0,0,0,0c0.1-0.5-0.3-1-0.9-1.1c-0.5-0.1-1,0.3-1.1,0.9C2,11.3,2,11.6,2,12c0,2.4,0.9,4.7,2.4,6.5H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h4c0.3,0,0.6-0.2,0.8-0.4c0,0,0,0,0,0c0,0,0,0,0,0c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.1,0-0.2c0,0,0-0.1,0-0.1v-4C8,14.9,7.6,14.5,7,14.5z M21,5.5c0.6,0,1-0.4,1-1s-0.4-1-1-1h-4c-0.1,0-0.1,0-0.2,0c0,0,0,0,0,0c-0.1,0-0.2,0.1-0.3,0.1c0,0,0,0,0,0c-0.1,0.1-0.2,0.1-0.2,0.2c0,0,0,0,0,0c0,0,0,0,0,0c0,0.1-0.1,0.2-0.1,0.2c0,0.1,0,0.1,0,0.2c0,0,0,0.1,0,0.1v4c0,0.6,0.4,1,1,1s1-0.4,1-1V6.7c1.3,1.4,2,3.3,2,5.3c0,0.3,0,0.6-0.1,0.9c-0.1,0.5,0.3,1,0.9,1.1c0,0,0.1,0,0.1,0c0.5,0,0.9-0.4,1-0.9c0-0.4,0.1-0.7,0.1-1.1c0-2.4-0.9-4.7-2.4-6.5H21z M20.3,16.5c-0.1-0.1-0.2-0.2-0.3-0.3c0,0,0,0,0,0c0,0,0,0,0,0c-0.1-0.1-0.2-0.1-0.3-0.1c0,0-0.1,0-0.1,0c0,0-0.1,0-0.1,0h-4c-0.6,0-1,0.4-1,1s0.4,1,1,1h1.8c-1.4,1.3-3.3,2-5.3,2c-0.3,0-0.6,0-0.9-0.1c0,0,0,0,0,0c-0.5-0.1-1,0.3-1.1,0.9s0.3,1,0.9,1.1c0.4,0,0.7,0.1,1.1,0.1c2.4,0,4.7-0.9,6.5-2.4V21c0,0.6,0.4,1,1,1s1-0.4,1-1v-4C20.5,16.8,20.4,16.6,20.3,16.5C20.3,16.5,20.3,16.5,20.3,16.5z&quot;})}),Ane=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;12px&quot;,height:&quot;12px&quot;,viewBox:&quot;0 0 16 16&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[P.jsx(&quot;path&quot;,{d:&quot;M4.70711 12.7071L8 16L11.2929 12.7071L8 9.41421L4.70711 12.7071Z&quot;,fill:&quot;#ffffff&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M3.29289 11.2929L6.58579 8L3.29289 4.70711L0 8L3.29289 11.2929Z&quot;,fill:&quot;#ffffff&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M4.70711 3.29289L8 0L11.2929 3.29289L8 6.58579L4.70711 3.29289Z&quot;,fill:&quot;#ffffff&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M12.7071 4.70711L9.41421 8L12.7071 11.2929L16 8L12.7071 4.70711Z&quot;,fill:&quot;#ffffff&quot;})]});function Cne({label:n,onRun:e,is_component:t}){return P.jsxs(&quot;div&quot;,{className:&quot;bg-gray-800 flex flex-col justify-center items-center rounded-t&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex px-1&quot;,children:t?P.jsx(Ane,{}):P.jsx(Mne,{})}),P.jsx(&quot;div&quot;,{className:&quot;flex text-center text-xs&quot;,children:n})]}),P.jsx(&quot;button&quot;,{className:&quot;nodrag flex relative bg-blue-700 hover:bg-blue-700/50 text-white text-xs px-4 rounded&quot;,onClick:e,children:&quot;Run&quot;})]})}const _3=({id:n,type:e,label:t,isConnectable:i=!0,style:r={position:&quot;absolute&quot;,background:&quot;#5aaf1a&quot;},onConnect:s,left_side:o=!0})=&gt;o?P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:[P.jsx(&quot;span&quot;,{className:&quot;m-auto ml-0 mr-0 relative&quot;,children:P.jsx(_l,{type:e,id:n,position:Mt.Left,style:r,isConnectable:i,onConnect:s})}),P.jsx(&quot;span&quot;,{className:&quot;pl-2 text-xs text-gray-300&quot;,children:t})]}):P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:[P.jsx(&quot;span&quot;,{className:&quot;pl-1 text-center text-xs text-gray-300&quot;,children:t}),P.jsx(&quot;span&quot;,{className:&quot;m-auto ml-1 mr-0 relative&quot;,children:P.jsx(_l,{type:e,id:n,position:Mt.Right,style:r,isConnectable:i,onConnect:s})})]});function Rne({param:n,paramId:e,paramName:t,paramDefaultValue:i,paramOptions:r}){var s,o;switch(n.type){case ii.STRING:const l=((s=i==null?void 0:i.stringValue)==null?void 0:s.toString())||&quot;&quot;;return P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center ml-1&quot;,id:e,children:[r&amp;&amp;r.length&gt;0?P.jsx(&quot;select&quot;,{defaultValue:l,className:&quot;nodrag m-auto ml-0 mr-0 text-gray-800 text-xs w-24 border border-gray-400 rounded&quot;,children:r.map((f,p)=&gt;P.jsx(&quot;option&quot;,{value:f.stringValue,children:f.stringValue},p))}):P.jsx(&quot;input&quot;,{type:&quot;text&quot;,defaultValue:l,className:&quot;nodrag m-auto ml-0 mr-0 text-gray-200 text-xs w-20 border border-gray-400 rounded bg-gray-800 p-0.5&quot;}),P.jsx(&quot;span&quot;,{className:&quot;pl-2 text-xs text-gray-300&quot;,children:t})]});case ii.FLOAT:const u=i==null?void 0:i.floatValue;return P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center w-26 ml-1&quot;,id:e,children:[r&amp;&amp;r.length&gt;0?P.jsx(&quot;select&quot;,{defaultValue:u,className:&quot;nodrag m-auto ml-0 mr-0 text-xs text-gray-200 bg-gray-800 p-0.5 w-24 border border-gray-400 rounded&quot;,children:r.map((f,p)=&gt;P.jsx(&quot;option&quot;,{value:f.floatValue,children:f.floatValue},p))}):P.jsx(&quot;input&quot;,{type:&quot;number&quot;,defaultValue:u!=null?u.toFixed(4):&quot;&quot;,className:&quot;flex flex-1 nodrag m-auto ml-0 mr-0 text-xs text-gray-200 bg-gray-800 p-0.5 w-20 border border-gray-400 rounded&quot;}),P.jsx(&quot;span&quot;,{className:&quot;flex-1 pl-2 text-xs text-gray-300&quot;,children:t})]});case ii.ARRAY:const h=i==null?void 0:i.arrayValueType;if(((o=n.defaultValue)==null?void 0:o.arrayAnyLength)===!1){const f=[];for(let p=0;p&lt;(i==null?void 0:i.arrayLength);p++){const m=i.arrayValue[p];m&amp;&amp;f.push(h===ii.FLOAT?m.floatValue:m.stringValue)}return P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center w-24 ml-1&quot;,id:e,children:[f.slice(0,3).map((p,m)=&gt;P.jsx(&quot;input&quot;,{type:&quot;number&quot;,defaultValue:typeof p==&quot;number&quot;?p.toFixed(3):&quot;&quot;,className:&quot;nodrag flex m-auto text-gray-800 border text-xs border-gray-400 rounded max-w-8&quot;},m)),P.jsx(&quot;span&quot;,{className:&quot;flex flex-1 pl-2 text-xs text-gray-300&quot;,children:t})]})}else{let f=&quot;&quot;;return h===ii.FLOAT?f=&quot;1.0;2.0;3.0&quot;:h===ii.INTEGER?f=&quot;1;2;3&quot;:console.error(`Unknown array value type: ${h}`),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center ml-1&quot;,id:e,children:[P.jsx(&quot;input&quot;,{type:&quot;text&quot;,pattern:&quot;[0-9]+(\\.[0-9]+)?(;\\s*[0-9]+(\\.[0-9]+)?)*&quot;,defaultValue:i==null?void 0:i.stringValue(),placeholder:f,className:&quot;nodrag m-auto ml-0 mr-0 text-gray-800 text-xs w-24 border border-gray-400 rounded&quot;}),P.jsx(&quot;span&quot;,{className:&quot;pl-2 text-xs text-gray-300&quot;,children:t})]})}default:return console.error(`Unknown parameter type: ${n.type}`),null}}function One({id:n,data:e}){const t=e.procedure,i=t.parameters.length,r=e.fileInputsMap,s=e.fileOutputsMap,o=[];for(let l=0;l&lt;i;l++){const u=t.parameters[l],h=u.name;h&amp;&amp;(r[h.toString()]?o.unshift(u):o.push(u))}return!i&amp;&amp;t.fileInputs.length===0?null:P.jsx(P.Fragment,{children:Array.from({length:i}).map((l,u)=&gt;{var T;const h=o[u];if(!h)return null;const f=(T=h.name)==null?void 0:T.toString();if(!f||s[f])return null;e.paramids||(e.paramids=[]);const p=e.paramids,m=h.defaultValue;let g=h.options.length,v=null;if(g&gt;0){v=[];for(let w=0;w&lt;g;w++)v[w]=h.options[w]}const x=t.name;if(!x)return console.error(&quot;Procedure name is not defined&quot;),null;const b=`${x}-${u}`,_=`param-${f}-${b}`;return p.includes(_)||p.push(_),r[f]?P.jsx(_3,{id:_,type:&quot;source&quot;,label:f||`Param ${u+1}`},b):P.jsx(Rne,{param:h,paramId:_,paramName:f,paramDefaultValue:m,paramOptions:v},b)})})}function Dne(n,e,t){var s,o;let i={};for(let l=0;l&lt;t.parameters.length;l++){let u=t.parameters[l],h=((s=u.name)==null?void 0:s.toString())||&quot;&quot;;i[h]=u}let r=[];for(let l of e){let u=document.getElementById(l);if(!u)continue;let h=u.getElementsByTagName(&quot;span&quot;)[0].innerText,f=i[h],p=f.type,m=ii[p],g=null;f.options.length&gt;0?g=u.getElementsByTagName(&quot;select&quot;):g=u.getElementsByTagName(&quot;input&quot;);let v=n.createString(h);if(g.length==1){let b=g[0].value,_=null;if(f.type===ii.STRING){let w=n.createString(b);Ht.startValue(n),Ht.addStringValue(n,w),_=Ht.endValue(n)}else if(f.type===ii.FLOAT){let w=parseFloat(b);Ht.startValue(n),Ht.addFloatValue(n,w),_=Ht.endValue(n)}else if(f.type===ii.INTEGER){let w=parseInt(b);Ht.startValue(n),Ht.addIntegerValue(n,w),_=Ht.endValue(n)}else if(f.type===ii.BOOLEAN){let w=b===&quot;true&quot;;Ht.startValue(n),Ht.addBooleanValue(n,w),_=Ht.endValue(n)}else{console.log(&quot;Unknown parameter type: &quot;,m);continue}Dn.startParameter(n),Dn.addName(n,v),Dn.addValue(n,_),Dn.addType(n,p);let T=Dn.endParameter(n);r.push(T);continue}else if(g.length&gt;1){let b=[],_=(o=f.defaultValue)==null?void 0:o.arrayValueType;for(let R of g){let N=R.value;if(Ht.startValue(n),_===ii.STRING){let D=n.createString(N);Ht.addStringValue(n,D)}else _===ii.FLOAT?Ht.addFloatValue(n,parseFloat(N)):_===ii.INTEGER?Ht.addIntegerValue(n,parseInt(N)):_===ii.BOOLEAN&amp;&amp;Ht.addBooleanValue(n,N===&quot;true&quot;);let A=Ht.endValue(n);b.push(A)}let T=Ht.createArrayValueVector(n,b);Ht.startValue(n),Ht.addArrayValue(n,T),_&amp;&amp;Ht.addArrayValueType(n,_);let w=Ht.endValue(n);Dn.startParameter(n),Dn.addName(n,v),Dn.addValue(n,w),Dn.addType(n,ii.ARRAY);let E=Dn.endParameter(n);r.push(E);continue}if(u.tagName===&quot;INPUT&quot;){Dn.startParameter(n);let b=Dn.endParameter(n);r.push(b);continue}u.getElementsByTagName(&quot;input&quot;)[0]&amp;&amp;r.push()}return r}async function Nne(n){var g,v,x,b,_;const e=Ks.getState().nodes,t=Ks.getState().edges,i=e.find(T=&gt;T.id===n.id);if(!i){console.error(&quot;Could not find this procedure node&quot;);return}let r=new Mo(1024),s=r.createString(((v=(g=i.data)==null?void 0:g.label)==null?void 0:v.toString())||&quot;&quot;),o=[],l=n.data.procedure;const u=t.filter(T=&gt;T.target.startsWith(&quot;file-object&quot;));if(u.length===0){console.error(&quot;No file object connected to this procedure&quot;);return}for(let T=0;T&lt;u.length;T++){const w=u[T],E=e.find(A=&gt;A.id===w.target);if(!E)continue;const R=(x=w.sourceHandle)==null?void 0:x.split(&quot;-&quot;)[1];let N=(b=E.data.filepath)==null?void 0:b.toString();console.log(E);for(let A=0;A&lt;l.fileInputs.length;A++){const D=l.fileInputs[A];if(R!==D.argName)continue;const C=(_=D.argName)==null?void 0:_.toString();let O=r.createString(N),L=r.createString(C);Ht.startValue(r),Ht.addStringValue(r,O);let V=Ht.endValue(r);Dn.startParameter(r),Dn.addName(r,L),Dn.addValue(r,V);let Z=Dn.endParameter(r);o.push(Z)}}if(n.data.paramids){let T=Dne(r,n.data.paramids,l);T&amp;&amp;o.push(...T)}let h=Yi.createParametersVector(r,o),f=r.createString(n.id.toString());Yi.startProcedureStart(r),Yi.addProcedureName(r,s),Yi.addProcedureIdString(r,f),Yi.addParameters(r,h);let p=Yi.endProcedureStart(r);Ss.startProcedureStore(r),Ss.addStartProcedure(r,p);let m=Ss.endProcedureStore(r);at.startMessage(r),window.TARGET_INSTANCE_ID?(console.log(&quot;Overriding TARGET_ID:&quot;,window.TARGET_INSTANCE_ID),at.addInstanceId(r,window.TARGET_INSTANCE_ID)):at.addInstanceId(r,Ei.instance_id),at.addCommandType(r,Bn.RUN_PROCEDURE),at.addTargetGroup(r,si.SERVER),at.addClientType(r,si.WEB),at.addProcedureStore(r,m),r.finish(at.endMessage(r)),await Ei.sendMessage(r.asUint8Array())}function Ine({id:n,data:e}){return P.jsxs(&quot;div&quot;,{className:&quot;bg-bl-background text-gray-200 rounded min-w-40 h-30&quot;,children:[P.jsx(Cne,{is_component:e.procedure.isComponent,label:e.label,onRun:()=&gt;Nne({id:n,data:e})}),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row w-full h-full py-2&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex flex-1 flex-col&quot;,children:P.jsx(One,{id:n,data:e})}),P.jsx(&quot;div&quot;,{className:&quot;flex flex-col&quot;,children:P.jsx(_3,{id:`${n}-file_object_output`,type:&quot;target&quot;,label:&quot;output_file&quot;,left_side:!1},`procedure-${n}-output`)})]})]})}const Pne=re.memo(Ine);async function Lne(n){console.log(&quot;start_file_in_local_app&quot;+n.name());let e=new Mo(1024),t=e.createString(n.name()),i=e.createString(n.filepath());fn.startFileObject(e),fn.addName(e,t),fn.addFilepath(e,i);let r=fn.endFileObject(e);hi.startServer(e),hi.addStartFileInLocalApp(e,r);let s=hi.endServer(e);at.startMessage(e),at.addInstanceId(e,Ei.instance_id),at.addCommandType(e,Bn.START_FILE_IN_LOCAL_APP),at.addTargetGroup(e,si.SERVER),at.addClientType(e,si.WEB),at.addServer(e,s),e.finish(at.endMessage(e)),await Ei.sendMessage(e.asUint8Array())}async function Une(n){console.log(&quot;get_file_object_from_server&quot;+n.name());let e=new Mo(1024);if(n.fileType()!==So.IFC){await Lne(n);return}let t=n.glbFile();if(!t){console.log(&quot;No GLB file found in the file object&quot;);return}let i=e.createString(t.name());hi.startServer(e),hi.addGetFileObjectByName(e,i);let r=hi.endServer(e);at.startMessage(e),at.addInstanceId(e,Ei.instance_id),at.addCommandType(e,Bn.VIEW_FILE_OBJECT),at.addTargetGroup(e,si.SERVER),at.addClientType(e,si.WEB),at.addServer(e,r),e.finish(at.endMessage(e)),await Ei.sendMessage(e.asUint8Array())}const kne=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;12px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;#000000&quot;,children:[P.jsx(&quot;path&quot;,{d:&quot;M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;})]}),Fne=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;12px&quot;,height:&quot;12px&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[P.jsx(&quot;path&quot;,{d:&quot;M15.0007 12C15.0007 13.6569 13.6576 15 12.0007 15C10.3439 15 9.00073 13.6569 9.00073 12C9.00073 10.3431 10.3439 9 12.0007 9C13.6576 9 15.0007 10.3431 15.0007 12Z&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M12.0012 5C7.52354 5 3.73326 7.94288 2.45898 12C3.73324 16.0571 7.52354 19 12.0012 19C16.4788 19 20.2691 16.0571 21.5434 12C20.2691 7.94291 16.4788 5 12.0012 5Z&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;2&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;})]});function zne(n){return P.jsxs(&quot;div&quot;,{className:&quot;bg-bl-background text-gray-200 rounded-md min-w-24&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;bg-gray-800 flex flex-row justify-center items-center px-1 rounded-t&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex-1&quot;,children:P.jsx(kne,{})}),P.jsx(&quot;div&quot;,{className:&quot;flex-1 text-center text-xs&quot;,children:n.data.label.toString()}),P.jsxs(&quot;div&quot;,{className:&quot;flex-1 text-xs&quot;,children:[&quot; [&quot;,n.data.filetype.toString(),&quot;]&quot;]})]}),P.jsx(&quot;div&quot;,{className:&quot;flex justify-center items-center text-xs p-1&quot;,children:P.jsx(&quot;button&quot;,{className:&quot;nodrag bg-blue-500 hover:bg-blue-700 text-white p-1 rounded&quot;,onClick:()=&gt;{Une(n.data.fileobject)},children:P.jsx(Fne,{})})}),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-col&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:P.jsx(&quot;span&quot;,{className:&quot;m-auto mr-0&quot;,children:P.jsx(_l,{type:&quot;target&quot;,id:`${n.id}-file_object_out`,position:Mt.Right,style:{position:&quot;absolute&quot;,background:&quot;#555&quot;},isConnectable:!0})})}),n.data.isProcedureOutput&amp;&amp;P.jsx(&quot;span&quot;,{className:&quot;m-auto mr-0&quot;,children:P.jsx(_l,{type:&quot;source&quot;,id:`${n.id}-procedure_in`,position:Mt.Left,style:{position:&quot;absolute&quot;,background:&quot;#555&quot;},isConnectable:!0})})]})]})}const Bne=re.memo(zne);async function Hne(n){n.nodes.length&gt;0&amp;&amp;await Vne(n.nodes),n.edges.length&gt;0&amp;&amp;await Gne(n.edges)}async function Vne(n){for(const e of n)e.type==&quot;file_object&quot;&amp;&amp;await jne(e),console.log(&quot;onDelete node&quot;,e)}async function Gne(n){console.log(&quot;onDelete edges&quot;,n)}async function jne(n){console.log(&quot;Deleting file object&quot;,n);let e=new Mo(1024),t=n.data.fileobject,i=e.createString(t.name()),r=e.createString(t.filepath());fn.startFileObject(e),fn.addName(e,i),fn.addFilepath(e,r),fn.addFileType(e,t.fileType()),fn.addGlbFile(e,t.glbFile()),fn.addIfcsqliteFile(e,t.ifcsqliteFile());let s=fn.endFileObject(e);hi.startServer(e),hi.addDeleteFileObject(e,s);let o=hi.endServer(e);at.startMessage(e),at.addServer(e,o),at.addInstanceId(e,Ei.instance_id),at.addCommandType(e,Bn.DELETE_FILE_OBJECT),at.addTargetGroup(e,si.SERVER),at.addClientType(e,si.WEB),e.finish(at.endMessage(e)),await Ei.sendMessage(e.asUint8Array())}async function Wne(){let n=new Mo(1024);at.startMessage(n),at.addInstanceId(n,Ei.instance_id),at.addCommandType(n,Bn.START_NEW_NODE_EDITOR),at.addTargetGroup(n,si.SERVER),at.addClientType(n,si.WEB),n.finish(at.endMessage(n)),await Ei.sendMessage(n.asUint8Array()),console.log(&quot;Starting new node editor&quot;),Ks.getState().setIsNodeEditorVisible(!1)}const Xne=n=&gt;P.jsxs(&quot;svg&quot;,{fill:&quot;#ffffff&quot;,width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 36 36&quot;,version:&quot;1.1&quot;,preserveAspectRatio:&quot;xMidYMid meet&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[P.jsx(&quot;title&quot;,{children:&quot;pop-out-line&quot;}),P.jsx(&quot;path&quot;,{className:&quot;clr-i-outline clr-i-outline-path-1&quot;,d:&quot;M27,33H5a2,2,0,0,1-2-2V9A2,2,0,0,1,5,7H15V9H5V31H27V21h2V31A2,2,0,0,1,27,33Z&quot;}),P.jsx(&quot;path&quot;,{className:&quot;clr-i-outline clr-i-outline-path-2&quot;,d:&quot;M18,3a1,1,0,0,0,0,2H29.59L15.74,18.85a1,1,0,1,0,1.41,1.41L31,6.41V18a1,1,0,0,0,2,0V3Z&quot;}),P.jsx(&quot;rect&quot;,{x:&quot;0&quot;,y:&quot;0&quot;,width:&quot;36&quot;,height:&quot;36&quot;,fillOpacity:&quot;0&quot;})]}),qne={procedure:Pne,file_object:Bne},$2=()=&gt;{const{nodes:n,edges:e,setNodes:t,setEdges:i,onNodesChange:r,onEdgesChange:s,onConnect:o,use_node_editor_only:l}=Ks(),u=P.jsxs(iK,{colorMode:&quot;dark&quot;,nodes:n,edges:e,onNodesChange:h=&gt;r(h),onEdgesChange:h=&gt;s(h),onConnect:o,nodeTypes:qne,onDelete:Hne,fitView:!0,children:[P.jsx(lK,{}),P.jsx(mK,{}),P.jsx(AK,{})]});return l?P.jsx(&quot;div&quot;,{style:{width:&quot;100%&quot;,height:&quot;100%&quot;,background:&quot;white&quot;,border:&quot;1px solid #ccc&quot;},children:u}):P.jsxs(i1,{default:{x:100,y:100,width:800,height:600},bounds:&quot;window&quot;,style:{zIndex:1e3,background:&quot;white&quot;,border:&quot;1px solid #ccc&quot;},dragHandleClassName:&quot;node-editor-drag-handle&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;node-editor-header node-editor-drag-handle bg-gray-800 text-white px-4 py-2 cursor-move&quot;,children:P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex p-1&quot;,children:&quot;Node Editor&quot;}),P.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-1 ml-2 rounded&quot;,onClick:()=&gt;EL(),children:P.jsx(r1,{})}),P.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-1 ml-2 rounded&quot;,onClick:()=&gt;Wne(),children:P.jsx(Xne,{})})]})}),P.jsx(&quot;div&quot;,{style:{width:&quot;100%&quot;,height:&quot;calc(100% - 40px)&quot;},children:u})]})};function Yne(){const{isOptionsVisible:n}=Bc(),{isNodeEditorVisible:e,use_node_editor_only:t}=Ks();return re.useEffect(()=&gt;{window.Jupyter&amp;&amp;window.Jupyter.notebook.kernel.comm_manager.register_target(&quot;ReactViewerWidget&quot;,function(r){r.on_msg(s=&gt;{console.log(&quot;Message from Python:&quot;,s.content.data)}),r.send({data:&quot;Hello from React!&quot;})})},[]),P.jsxs(&quot;div&quot;,{className:&quot;relative flex flex-row h-full w-full bg-gray-900&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;relative h-full&quot;,children:P.jsx(Tne,{})}),P.jsx(&quot;div&quot;,{className:&quot;relative top-0 left-0&quot;,children:P.jsx(uZ,{})}),P.jsx(&quot;div&quot;,{className:&quot;w-full h-full&quot;,children:t?P.jsx($2,{}):P.jsx(f$,{})}),e&amp;&amp;P.jsx($2,{}),n&amp;&amp;P.jsx(xZ,{})]})}async function Kne(){const n=WN.getState().webSocketAddress;if(window.DEACTIVATE_WS===!0){console.log(&quot;DEACTIVATE_WS is set to true, not connecting to websocket&quot;);return}try{await Ei.connect(n);for await(const e of Ei.messages())await dL(e)}catch(e){console.error(&quot;WebSocket connection failed:&quot;,e)}}Kne();window.B64GLTF?Bj():console.log(&quot;B64GLTF not attached.&quot;);const $ne=document.getElementById(&quot;root&quot;),Zne=Ok.createRoot($ne);Zne.render(P.jsx(Yne,{}));

&lt;/script&gt;
      &lt;style&gt;
*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: &quot;&quot;}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,Segoe UI Symbol,&quot;Noto Color Emoji&quot;;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.\!container{width:100%!important}.container{width:100%}@media (min-width: 640px){.\!container{max-width:640px!important}.container{max-width:640px}}@media (min-width: 768px){.\!container{max-width:768px!important}.container{max-width:768px}}@media (min-width: 1024px){.\!container{max-width:1024px!important}.container{max-width:1024px}}@media (min-width: 1280px){.\!container{max-width:1280px!important}.container{max-width:1280px}}@media (min-width: 1536px){.\!container{max-width:1536px!important}.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.absolute{position:absolute}.relative{position:relative}.left-0{left:0}.right-0{right:0}.right-5{right:1.25rem}.top-0{top:0}.top-80{top:20rem}.z-10{z-index:10}.m-auto{margin:auto}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.ml-0{margin-left:0}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.mr-0{margin-right:0}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.block{display:block}.flex{display:flex}.table-cell{display:table-cell}.table-row{display:table-row}.hidden{display:none}.h-2{height:.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-80{height:20rem}.h-full{height:100%}.max-h-96{max-height:24rem}.max-h-screen{max-height:100vh}.w-0{width:0px}.w-12{width:3rem}.w-2{width:.5rem}.w-20{width:5rem}.w-24{width:6rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-60{width:15rem}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-24{min-width:6rem}.min-w-40{min-width:10rem}.min-w-80{min-width:20rem}.min-w-\[100px\]{min-width:100px}.max-w-8{max-width:2rem}.max-w-full{max-width:100%}.max-w-md{max-width:28rem}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.flex-grow-0{flex-grow:0}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-ew-resize{cursor:ew-resize}.cursor-move{cursor:move}.cursor-pointer{cursor:pointer}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-x-2{-moz-column-gap:.5rem;column-gap:.5rem}.space-x-2&gt;:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1&gt;:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2&gt;:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-4&gt;:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.border-gray-400{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity))}.border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity))}.bg-bl-background{--tw-bg-opacity: 1;background-color:rgb(57 57 57 / var(--tw-bg-opacity))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity))}.bg-blue-700{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity))}.bg-blue-700\/30{background-color:#1d4ed84d}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity))}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-opacity-50{--tw-bg-opacity: .5}.p-0{padding:0}.p-0\.5{padding:.125rem}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.pl-1{padding-left:.25rem}.pl-2{padding-left:.5rem}.pr-1{padding-right:.25rem}.pr-12{padding-right:3rem}.pr-2{padding-right:.5rem}.pt-1{padding-top:.25rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity))}.text-gray-200{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.accent-blue-700{accent-color:#1d4ed8}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}html,body{height:100%;margin:0}#root{height:100%}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.scrollbar::-webkit-scrollbar{width:10px}.scrollbar::-webkit-scrollbar-corner{background-color:#1a1919}.scrollbar::-webkit-scrollbar-track{background-color:#212121b3}.scrollbar::-webkit-scrollbar-thumb{background-color:#374151e6;box-shadow:inset 0 0 6px #0000004d;outline:1px solid rgb(17,17,17)}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity))}.hover\:bg-blue-700\/50:hover{background-color:#1d4ed880}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}._GzYRV{line-height:1.2;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}._3eOF8{margin-right:5px;font-weight:700}._3eOF8+._3eOF8{margin-left:-5px}._1MFti{cursor:pointer}._f10Tu{font-size:1.2em;margin-right:5px;-webkit-user-select:none;-moz-user-select:none;user-select:none}._1UmXx:after{content:&quot;▸&quot;}._1LId0:after{content:&quot;▾&quot;}._1pNG9{margin-right:5px}._1pNG9:after{content:&quot;...&quot;;font-size:.8em}._2IvMF{background:#eee}._2bkNM{margin:0;padding:0 10px}._1BXBN{margin:0;padding:0}._1MGIk{font-weight:600;margin-right:5px;color:#000}._3uHL6{color:#000}._2T6PJ,._1Gho6{color:#df113a}._vGjyY{color:#2a3f3c}._1bQdo{color:#0b75f5}._3zQKs{color:#469038}._1xvuR{color:#43413d}._oLqym,._2AXVT,._2KJWg{color:#000}._11RoI{background:#002b36}._17H2C,._3QHg2,._3fDAz{color:#fdf6e3}._2bSDX{font-weight:bolder;margin-right:5px;color:#fdf6e3}._gsbQL{color:#fdf6e3}._LaAZe,._GTKgm{color:#81b5ac}._Chy1W{color:#cb4b16}._2bveF{color:#d33682}._2vRm-{color:#ae81ff}._1prJR{color:#268bd2}.react-flow{direction:ltr;--xy-edge-stroke-default: #b1b1b7;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #555;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(255, 255, 255, .5);--xy-minimap-background-color-default: #fff;--xy-minimap-mask-background-color-default: rgb(240, 240, 240, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #e2e2e2;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: transparent;--xy-background-pattern-dots-color-default: #91919a;--xy-background-pattern-lines-color-default: #eee;--xy-background-pattern-cross-color-default: #e2e2e2;background-color:var(--xy-background-color, var(--xy-background-color-default));--xy-node-color-default: inherit;--xy-node-border-default: 1px solid #1a192b;--xy-node-background-color-default: #fff;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #1a192b;--xy-node-border-radius-default: 3px;--xy-handle-background-color-default: #1a192b;--xy-handle-border-color-default: #fff;--xy-selection-background-color-default: rgba(0, 89, 220, .08);--xy-selection-border-default: 1px dotted rgba(0, 89, 220, .8);--xy-controls-button-background-color-default: #fefefe;--xy-controls-button-background-color-hover-default: #f4f4f4;--xy-controls-button-color-default: inherit;--xy-controls-button-color-hover-default: inherit;--xy-controls-button-border-color-default: #eee;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #ffffff;--xy-edge-label-color-default: inherit;--xy-resize-background-color-default: #3367d9}.react-flow.dark{--xy-edge-stroke-default: #3e3e3e;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #727272;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(150, 150, 150, .25);--xy-minimap-background-color-default: #141414;--xy-minimap-mask-background-color-default: rgb(60, 60, 60, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #2b2b2b;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: #141414;--xy-background-pattern-dots-color-default: #777;--xy-background-pattern-lines-color-default: #777;--xy-background-pattern-cross-color-default: #777;--xy-node-color-default: #f8f8f8;--xy-node-border-default: 1px solid #3c3c3c;--xy-node-background-color-default: #1e1e1e;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #999;--xy-handle-background-color-default: #bebebe;--xy-handle-border-color-default: #1e1e1e;--xy-selection-background-color-default: rgba(200, 200, 220, .08);--xy-selection-border-default: 1px dotted rgba(200, 200, 220, .8);--xy-controls-button-background-color-default: #2b2b2b;--xy-controls-button-background-color-hover-default: #3e3e3e;--xy-controls-button-color-default: #f8f8f8;--xy-controls-button-color-hover-default: #fff;--xy-controls-button-border-color-default: #5b5b5b;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #141414;--xy-edge-label-color-default: #f8f8f8}.react-flow__background{background-color:var(--xy-background-color, var(--xy-background-color-props, var(--xy-background-color-default)));pointer-events:none;z-index:-1}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1}.react-flow__pane.draggable{cursor:grab}.react-flow__pane.dragging{cursor:grabbing}.react-flow__pane.selection{cursor:pointer}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow__edge-path{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default));stroke-width:var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));fill:none}.react-flow__connection-path{stroke:var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));stroke-width:var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));fill:none}.react-flow .react-flow__edges{position:absolute}.react-flow .react-flow__edges svg{overflow:visible;position:absolute;pointer-events:none}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.selectable{cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge.selectable:focus .react-flow__edge-path,.react-flow__edge.selectable:focus-visible .react-flow__edge-path{stroke:var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default))}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}svg.react-flow__connectionline{z-index:1001;overflow:visible;position:absolute}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:default}.react-flow__node.selectable{cursor:pointer}.react-flow__node.draggable{cursor:grab;pointer-events:all}.react-flow__node.draggable.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background-color:var(--xy-handle-background-color, var(--xy-handle-background-color-default));border:1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));border-radius:100%}.react-flow__handle.connectingfrom{pointer-events:all}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:0;transform:translate(-50%,50%)}.react-flow__handle-top{top:0;left:50%;transform:translate(-50%,-50%)}.react-flow__handle-left{top:50%;left:0;transform:translate(-50%,-50%)}.react-flow__handle-right{top:50%;right:0;transform:translate(50%,-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.center{left:50%;transform:translate(-50%)}.react-flow__attribution{font-size:10px;background:var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;left:0;top:0}.react-flow__viewport-portal{position:absolute;width:100%;height:100%;left:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__minimap{background:var( --xy-minimap-background-color-props, var(--xy-minimap-background-color, var(--xy-minimap-background-color-default)) )}.react-flow__minimap-svg{display:block}.react-flow__minimap-mask{fill:var( --xy-minimap-mask-background-color-props, var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default)) );stroke:var( --xy-minimap-mask-stroke-color-props, var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default)) );stroke-width:var( --xy-minimap-mask-stroke-width-props, var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default)) )}.react-flow__minimap-node{fill:var( --xy-minimap-node-background-color-props, var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default)) );stroke:var( --xy-minimap-node-stroke-color-props, var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default)) );stroke-width:var( --xy-minimap-node-stroke-width-props, var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default)) )}.react-flow__background-pattern.dots{fill:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default)) )}.react-flow__background-pattern.lines{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default)) )}.react-flow__background-pattern.cross{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default)) )}.react-flow__controls{display:flex;flex-direction:column;box-shadow:var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default))}.react-flow__controls.horizontal{flex-direction:row}.react-flow__controls-button{display:flex;justify-content:center;align-items:center;height:26px;width:26px;padding:4px;border:none;background:var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));border-bottom:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) );color:var( --xy-controls-button-color-props, var(--xy-controls-button-color, var(--xy-controls-button-color-default)) );cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px;fill:currentColor}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-input,.react-flow__node-default,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:var(--xy-node-border-radius, var(--xy-node-border-radius-default));width:150px;font-size:12px;color:var(--xy-node-color, var(--xy-node-color-default));text-align:center;border:var(--xy-node-border, var(--xy-node-border-default));background-color:var(--xy-node-background-color, var(--xy-node-background-color-default))}.react-flow__node-input.selectable:hover,.react-flow__node-default.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default))}.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default))}.react-flow__node-group{background-color:var(--xy-node-group-background-color, var(--xy-node-group-background-color-default))}.react-flow__nodesselection-rect,.react-flow__selection{background:var(--xy-selection-background-color, var(--xy-selection-background-color-default));border:var(--xy-selection-border, var(--xy-selection-border-default))}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls-button:hover{background:var( --xy-controls-button-background-color-hover-props, var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default)) );color:var( --xy-controls-button-color-hover-props, var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default)) )}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__controls-button:last-child{border-bottom:none}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));transform:translate(-50%,-50%)}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}.react-flow__edge-textbg{fill:var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default))}.react-flow__edge-text{fill:var(--xy-edge-label-color, var(--xy-edge-label-color-default))}

&lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;root&quot; class=&quot;&quot;&gt;&lt;/div&gt;

        &lt;!-- Inject the startup config placeholder into a script --&gt;
        &lt;script&gt;window.B64GLTF = &quot;Z2xURgIAAACUQwAAmAUAAEpTT057InNjZW5lIjowLCJzY2VuZXMiOlt7Im5vZGVzIjpbMF0sImV4dHJhcyI6eyJkcmF3X3Jhbmdlc19ub2RlMCI6eyIxIjpbMCwxMzJdLCIyIjpbMTMyLDEzMl0sIjMiOlsyNjQsMTMyXSwiNCI6WzM5NiwxMzJdLCI1IjpbNTI4LDEzMl19LCJpZF9oaWVyYXJjaHkiOnsiNSI6WyJibTUiLCIwIl0sIjQiOlsiYm00IiwiMCJdLCIzIjpbImJtMyIsIjAiXSwiMiI6WyJibTIiLCIwIl0sIjEiOlsiYm0xIiwiMCJdLCIwIjpbIk15UGFydCIsIioiXX19fV0sImFzc2V0Ijp7InZlcnNpb24iOiIyLjAiLCJnZW5lcmF0b3IiOiJodHRwczovL2dpdGh1Yi5jb20vbWlrZWRoL3RyaW1lc2gifSwiYWNjZXNzb3JzIjpbeyJjb21wb25lbnRUeXBlIjo1MTI1LCJ0eXBlIjoiU0NBTEFSIiwiYnVmZmVyVmlldyI6MCwiY291bnQiOjY2MCwibWF4IjpbNjU5XSwibWluIjpbMF19LHsiY29tcG9uZW50VHlwZSI6NTEyNiwidHlwZSI6IlZFQzMiLCJieXRlT2Zmc2V0IjowLCJidWZmZXJWaWV3IjoxLCJjb3VudCI6NjYwLCJtYXgiOlsxLjAsMS4wLDQuMTUwMDAwMDk1MzY3NDMyXSwibWluIjpbLTEuMCwtMC4wNzUwMDAwMDI5ODAyMzIyNCwtMC4xNTAwMDAwMDU5NjA0NjQ0OF19LHsiY29tcG9uZW50VHlwZSI6NTEyNiwidHlwZSI6IlZFQzIiLCJieXRlT2Zmc2V0IjowLCJidWZmZXJWaWV3IjoyLCJjb3VudCI6NjYwLCJtYXgiOlswLjAsMS4wXSwibWluIjpbMC4wLDEuMF19XSwibWVzaGVzIjpbeyJuYW1lIjoibm9kZTAiLCJleHRyYXMiOnt9LCJwcmltaXRpdmVzIjpbeyJhdHRyaWJ1dGVzIjp7IlBPU0lUSU9OIjoxLCJURVhDT09SRF8wIjoyfSwiaW5kaWNlcyI6MCwibW9kZSI6NCwibWF0ZXJpYWwiOjB9XX1dLCJtYXRlcmlhbHMiOlt7InBick1ldGFsbGljUm91Z2huZXNzIjp7ImJhc2VDb2xvckZhY3RvciI6WzEuMCwxLjAsMS4wLDEuMF19LCJuYW1lIjoibWF0MCIsImRvdWJsZVNpZGVkIjp0cnVlfV0sIm5vZGVzIjpbeyJuYW1lIjoiTXlQYXJ0IiwiY2hpbGRyZW4iOlsxXX0seyJuYW1lIjoibm9kZTAiLCJtZXNoIjowfV0sImJ1ZmZlcnMiOlt7ImJ5dGVMZW5ndGgiOjE1ODQwfV0sImJ1ZmZlclZpZXdzIjpbeyJidWZmZXIiOjAsImJ5dGVPZmZzZXQiOjAsImJ5dGVMZW5ndGgiOjI2NDB9LHsiYnVmZmVyIjowLCJieXRlT2Zmc2V0IjoyNjQwLCJieXRlTGVuZ3RoIjo3OTIwfSx7ImJ1ZmZlciI6MCwiYnl0ZU9mZnNldCI6MTA1NjAsImJ5dGVMZW5ndGgiOjUyODB9XSwiZXh0ZW5zaW9uc1VzZWQiOlsiQURBX0VYVF9kYXRhIl0sImV4dGVuc2lvbnMiOnsiQURBX0VYVF9kYXRhIjp7InNpbXVsYXRpb25fb2JqZWN0cyI6W10sImRlc2lnbl9vYmplY3RzIjpbeyJuYW1lIjoiTXlQYXJ0IiwiZGVzY3JpcHRpb24iOiJQYXJ0IiwiZ3JvdXBzIjpbXSwibm9kZV9yZWZlcmVuY2VzIjp7ImZhY2VzIjpbIm5vZGUwIl19fV0sInZlcnNpb24iOiIxLjAuMCJ9fX0g4D0AAEJJTgAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAAJQAAACYAAAAnAAAAKAAAACkAAAAqAAAAKwAAACwAAAAtAAAALgAAAC8AAAAwAAAAMQAAADIAAAAzAAAANAAAADUAAAA2AAAANwAAADgAAAA5AAAAOgAAADsAAAA8AAAAPQAAAD4AAAA/AAAAQAAAAEEAAABCAAAAQwAAAEQAAABFAAAARgAAAEcAAABIAAAASQAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAAFAAAABRAAAAUgAAAFMAAABUAAAAVQAAAFYAAABXAAAAWAAAAFkAAABaAAAAWwAAAFwAAABdAAAAXgAAAF8AAABgAAAAYQAAAGIAAABjAAAAZAAAAGUAAABmAAAAZwAAAGgAAABpAAAAagAAAGsAAABsAAAAbQAAAG4AAABvAAAAcAAAAHEAAAByAAAAcwAAAHQAAAB1AAAAdgAAAHcAAAB4AAAAeQAAAHoAAAB7AAAAfAAAAH0AAAB+AAAAfwAAAIAAAACBAAAAggAAAIMAAACEAAAAhQAAAIYAAACHAAAAiAAAAIkAAACKAAAAiwAAAIwAAACNAAAAjgAAAI8AAACQAAAAkQAAAJIAAACTAAAAlAAAAJUAAACWAAAAlwAAAJgAAACZAAAAmgAAAJsAAACcAAAAnQAAAJ4AAACfAAAAoAAAAKEAAACiAAAAowAAAKQAAAClAAAApgAAAKcAAACoAAAAqQAAAKoAAACrAAAArAAAAK0AAACuAAAArwAAALAAAACxAAAAsgAAALMAAAC0AAAAtQAAALYAAAC3AAAAuAAAALkAAAC6AAAAuwAAALwAAAC9AAAAvgAAAL8AAADAAAAAwQAAAMIAAADDAAAAxAAAAMUAAADGAAAAxwAAAMgAAADJAAAAygAAAMsAAADMAAAAzQAAAM4AAADPAAAA0AAAANEAAADSAAAA0wAAANQAAADVAAAA1gAAANcAAADYAAAA2QAAANoAAADbAAAA3AAAAN0AAADeAAAA3wAAAOAAAADhAAAA4gAAAOMAAADkAAAA5QAAAOYAAADnAAAA6AAAAOkAAADqAAAA6wAAAOwAAADtAAAA7gAAAO8AAADwAAAA8QAAAPIAAADzAAAA9AAAAPUAAAD2AAAA9wAAAPgAAAD5AAAA+gAAAPsAAAD8AAAA/QAAAP4AAAD/AAAAAAEAAAEBAAACAQAAAwEAAAQBAAAFAQAABgEAAAcBAAAIAQAACQEAAAoBAAALAQAADAEAAA0BAAAOAQAADwEAABABAAARAQAAEgEAABMBAAAUAQAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAABwBAAAdAQAAHgEAAB8BAAAgAQAAIQEAACIBAAAjAQAAJAEAACUBAAAmAQAAJwEAACgBAAApAQAAKgEAACsBAAAsAQAALQEAAC4BAAAvAQAAMAEAADEBAAAyAQAAMwEAADQBAAA1AQAANgEAADcBAAA4AQAAOQEAADoBAAA7AQAAPAEAAD0BAAA+AQAAPwEAAEABAABBAQAAQgEAAEMBAABEAQAARQEAAEYBAABHAQAASAEAAEkBAABKAQAASwEAAEwBAABNAQAATgEAAE8BAABQAQAAUQEAAFIBAABTAQAAVAEAAFUBAABWAQAAVwEAAFgBAABZAQAAWgEAAFsBAABcAQAAXQEAAF4BAABfAQAAYAEAAGEBAABiAQAAYwEAAGQBAABlAQAAZgEAAGcBAABoAQAAaQEAAGoBAABrAQAAbAEAAG0BAABuAQAAbwEAAHABAABxAQAAcgEAAHMBAAB0AQAAdQEAAHYBAAB3AQAAeAEAAHkBAAB6AQAAewEAAHwBAAB9AQAAfgEAAH8BAACAAQAAgQEAAIIBAACDAQAAhAEAAIUBAACGAQAAhwEAAIgBAACJAQAAigEAAIsBAACMAQAAjQEAAI4BAACPAQAAkAEAAJEBAACSAQAAkwEAAJQBAACVAQAAlgEAAJcBAACYAQAAmQEAAJoBAACbAQAAnAEAAJ0BAACeAQAAnwEAAKABAAChAQAAogEAAKMBAACkAQAApQEAAKYBAACnAQAAqAEAAKkBAACqAQAAqwEAAKwBAACtAQAArgEAAK8BAACwAQAAsQEAALIBAACzAQAAtAEAALUBAAC2AQAAtwEAALgBAAC5AQAAugEAALsBAAC8AQAAvQEAAL4BAAC/AQAAwAEAAMEBAADCAQAAwwEAAMQBAADFAQAAxgEAAMcBAADIAQAAyQEAAMoBAADLAQAAzAEAAM0BAADOAQAAzwEAANABAADRAQAA0gEAANMBAADUAQAA1QEAANYBAADXAQAA2AEAANkBAADaAQAA2wEAANwBAADdAQAA3gEAAN8BAADgAQAA4QEAAOIBAADjAQAA5AEAAOUBAADmAQAA5wEAAOgBAADpAQAA6gEAAOsBAADsAQAA7QEAAO4BAADvAQAA8AEAAPEBAADyAQAA8wEAAPQBAAD1AQAA9gEAAPcBAAD4AQAA+QEAAPoBAAD7AQAA/AEAAP0BAAD+AQAA/wEAAAACAAABAgAAAgIAAAMCAAAEAgAABQIAAAYCAAAHAgAACAIAAAkCAAAKAgAACwIAAAwCAAANAgAADgIAAA8CAAAQAgAAEQIAABICAAATAgAAFAIAABUCAAAWAgAAFwIAABgCAAAZAgAAGgIAABsCAAAcAgAAHQIAAB4CAAAfAgAAIAIAACECAAAiAgAAIwIAACQCAAAlAgAAJgIAACcCAAAoAgAAKQIAACoCAAArAgAALAIAAC0CAAAuAgAALwIAADACAAAxAgAAMgIAADMCAAA0AgAANQIAADYCAAA3AgAAOAIAADkCAAA6AgAAOwIAADwCAAA9AgAAPgIAAD8CAABAAgAAQQIAAEICAABDAgAARAIAAEUCAABGAgAARwIAAEgCAABJAgAASgIAAEsCAABMAgAATQIAAE4CAABPAgAAUAIAAFECAABSAgAAUwIAAFQCAABVAgAAVgIAAFcCAABYAgAAWQIAAFoCAABbAgAAXAIAAF0CAABeAgAAXwIAAGACAABhAgAAYgIAAGMCAABkAgAAZQIAAGYCAABnAgAAaAIAAGkCAABqAgAAawIAAGwCAABtAgAAbgIAAG8CAABwAgAAcQIAAHICAABzAgAAdAIAAHUCAAB2AgAAdwIAAHgCAAB5AgAAegIAAHsCAAB8AgAAfQIAAH4CAAB/AgAAgAIAAIECAACCAgAAgwIAAIQCAACFAgAAhgIAAIcCAACIAgAAiQIAAIoCAACLAgAAjAIAAI0CAACOAgAAjwIAAJACAACRAgAAkgIAAJMCAAAAAAAAmpmZvZqZGT4AAAAAmpmZvamkDj4AAIA/mpmZvamkDj4AAAAAmpmZvZqZGT4AAIA/mpmZvamkDj4AAIA/mpmZvZqZGT4AAAAAmpmZPZqZGT4AAAAAmpmZvZqZGT4AAIA/mpmZvZqZGT4AAAAAmpmZPZqZGT4AAIA/mpmZvZqZGT4AAIA/mpmZPZqZGT4AAAAAmpmZPamkDj4AAAAAmpmZPZqZGT4AAIA/mpmZPZqZGT4AAAAAmpmZPamkDj4AAIA/mpmZPZqZGT4AAIA/mpmZPamkDj4AAAAAHqdoO6mkDj4AAAAAmpmZPamkDj4AAIA/mpmZPamkDj4AAAAAHqdoO6mkDj4AAIA/mpmZPamkDj4AAIA/HqdoO6mkDj4AAAAAHqdoO6mkDr4AAAAAHqdoO6mkDj4AAIA/HqdoO6mkDj4AAAAAHqdoO6mkDr4AAIA/HqdoO6mkDj4AAIA/HqdoO6mkDr4AAAAAmpmZPamkDr4AAAAAHqdoO6mkDr4AAIA/HqdoO6mkDr4AAAAAmpmZPamkDr4AAIA/HqdoO6mkDr4AAIA/mpmZPamkDr4AAAAAmpmZPZqZGb4AAAAAmpmZPamkDr4AAIA/mpmZPamkDr4AAAAAmpmZPZqZGb4AAIA/mpmZPamkDr4AAIA/mpmZPZqZGb4AAAAAmpmZvZqZGb4AAAAAmpmZPZqZGb4AAIA/mpmZPZqZGb4AAAAAmpmZvZqZGb4AAIA/mpmZPZqZGb4AAIA/mpmZvZqZGb4AAAAAmpmZvamkDr4AAAAAmpmZvZqZGb4AAIA/mpmZvZqZGb4AAAAAmpmZvamkDr4AAIA/mpmZvZqZGb4AAIA/mpmZvamkDr4AAAAAHqdou6mkDr4AAAAAmpmZvamkDr4AAIA/mpmZvamkDr4AAAAAHqdou6mkDr4AAIA/mpmZvamkDr4AAIA/Hqdou6mkDr4AAAAAHqdou6mkDj4AAAAAHqdou6mkDr4AAIA/Hqdou6mkDr4AAAAAHqdou6mkDj4AAIA/Hqdou6mkDr4AAIA/Hqdou6mkDj4AAAAAmpmZvamkDj4AAAAAHqdou6mkDj4AAIA/Hqdou6mkDj4AAAAAmpmZvamkDj4AAIA/Hqdou6mkDj4AAIA/mpmZvamkDj4AAAAAHqdoO6mkDr4AAAAAmpmZPamkDr4AAAAAmpmZPZqZGb4AAAAAmpmZvZqZGb4AAAAAHqdoO6mkDr4AAAAAmpmZPZqZGb4AAAAAmpmZvZqZGb4AAAAAHqdou6mkDr4AAAAAHqdoO6mkDr4AAAAAmpmZvamkDr4AAAAAHqdou6mkDr4AAAAAmpmZvZqZGb4AAAAAHqdoO6mkDj4AAAAAmpmZPZqZGT4AAAAAmpmZPamkDj4AAAAAHqdou6mkDj4AAAAAHqdoO6mkDj4AAAAAHqdoO6mkDr4AAAAAHqdou6mkDj4AAAAAHqdoO6mkDr4AAAAAHqdou6mkDr4AAAAAmpmZvZqZGT4AAAAAHqdou6mkDj4AAAAAmpmZvamkDj4AAAAAmpmZvZqZGT4AAAAAmpmZPZqZGT4AAAAAHqdoO6mkDj4AAAAAmpmZvZqZGT4AAAAAHqdoO6mkDj4AAAAAHqdou6mkDj4AAIA/HqdoO6mkDr4AAIA/mpmZPZqZGb4AAIA/mpmZPamkDr4AAIA/mpmZvZqZGb4AAIA/mpmZPZqZGb4AAIA/HqdoO6mkDr4AAIA/mpmZvZqZGb4AAIA/HqdoO6mkDr4AAIA/Hqdou6mkDr4AAIA/mpmZvamkDr4AAIA/mpmZvZqZGb4AAIA/Hqdou6mkDr4AAIA/HqdoO6mkDj4AAIA/mpmZPamkDj4AAIA/mpmZPZqZGT4AAIA/Hqdou6mkDj4AAIA/HqdoO6mkDr4AAIA/HqdoO6mkDj4AAIA/Hqdou6mkDj4AAIA/Hqdou6mkDr4AAIA/HqdoO6mkDr4AAIA/mpmZvZqZGT4AAIA/mpmZvamkDj4AAIA/Hqdou6mkDj4AAIA/mpmZvZqZGT4AAIA/HqdoO6mkDj4AAIA/mpmZPZqZGT4AAIA/mpmZvZqZGT4AAIA/Hqdou6mkDj4AAIA/HqdoO6mkDj4kOVk9JDlZvTMzkz8kOVk9JDlZvZXUkT+FmEI/YXEnP5XUkT8kOVk9JDlZvTMzkz+FmEI/YXEnP5XUkT+FmEI/YXEnPzMzkz8kOVm9JDlZPTMzkz8kOVk9JDlZvTMzkz+FmEI/YXEnPzMzkz8kOVm9JDlZPTMzkz+FmEI/YXEnPzMzkz9hcSc/hZhCPzMzkz8kOVm9JDlZPZXUkT8kOVm9JDlZPTMzkz9hcSc/hZhCPzMzkz8kOVm9JDlZPZXUkT9hcSc/hZhCPzMzkz9hcSc/hZhCP5XUkT+ogiS7qIIkO5XUkT8kOVm9JDlZPZXUkT9hcSc/hZhCP5XUkT+ogiS7qIIkO5XUkT9hcSc/hZhCP5XUkT9xYDQ/dqk1P5XUkT+ogiS7qIIkO9ZWXD+ogiS7qIIkO5XUkT9xYDQ/dqk1P5XUkT+ogiS7qIIkO9ZWXD9xYDQ/dqk1P5XUkT9xYDQ/dqk1P9ZWXD8kOVm9JDlZPdZWXD+ogiS7qIIkO9ZWXD9xYDQ/dqk1P9ZWXD8kOVm9JDlZPdZWXD9xYDQ/dqk1P9ZWXD9hcSc/hZhCP9ZWXD8kOVm9JDlZPZqZWT8kOVm9JDlZPdZWXD9hcSc/hZhCP9ZWXD8kOVm9JDlZPZqZWT9hcSc/hZhCP9ZWXD9hcSc/hZhCP5qZWT8kOVk9JDlZvZqZWT8kOVm9JDlZPZqZWT9hcSc/hZhCP5qZWT8kOVk9JDlZvZqZWT9hcSc/hZhCP5qZWT+FmEI/YXEnP5qZWT8kOVk9JDlZvdZWXD8kOVk9JDlZvZqZWT+FmEI/YXEnP5qZWT8kOVk9JDlZvdZWXD+FmEI/YXEnP5qZWT+FmEI/YXEnP9ZWXD+ogiQ7qIIku9ZWXD8kOVk9JDlZvdZWXD+FmEI/YXEnP9ZWXD+ogiQ7qIIku9ZWXD+FmEI/YXEnP9ZWXD92qTU/cWA0P9ZWXD+ogiQ7qIIku5XUkT+ogiQ7qIIku9ZWXD92qTU/cWA0P9ZWXD+ogiQ7qIIku5XUkT92qTU/cWA0P9ZWXD92qTU/cWA0P5XUkT8kOVk9JDlZvZXUkT+ogiQ7qIIku5XUkT92qTU/cWA0P5XUkT8kOVk9JDlZvZXUkT92qTU/cWA0P5XUkT+FmEI/YXEnP5XUkT+ogiS7qIIkO9ZWXD8kOVm9JDlZPdZWXD8kOVm9JDlZPZqZWT8kOVk9JDlZvZqZWT+ogiS7qIIkO9ZWXD8kOVm9JDlZPZqZWT8kOVk9JDlZvZqZWT+ogiQ7qIIku9ZWXD+ogiS7qIIkO9ZWXD8kOVk9JDlZvdZWXD+ogiQ7qIIku9ZWXD8kOVk9JDlZvZqZWT+ogiS7qIIkO5XUkT8kOVm9JDlZPTMzkz8kOVm9JDlZPZXUkT+ogiQ7qIIku5XUkT+ogiS7qIIkO5XUkT+ogiS7qIIkO9ZWXD+ogiQ7qIIku5XUkT+ogiS7qIIkO9ZWXD+ogiQ7qIIku9ZWXD8kOVk9JDlZvTMzkz+ogiQ7qIIku5XUkT8kOVk9JDlZvZXUkT8kOVk9JDlZvTMzkz8kOVm9JDlZPTMzkz+ogiS7qIIkO5XUkT8kOVk9JDlZvTMzkz+ogiS7qIIkO5XUkT+ogiQ7qIIku5XUkT9xYDQ/dqk1P9ZWXD9hcSc/hZhCP5qZWT9hcSc/hZhCP9ZWXD+FmEI/YXEnP5qZWT9hcSc/hZhCP5qZWT9xYDQ/dqk1P9ZWXD+FmEI/YXEnP5qZWT9xYDQ/dqk1P9ZWXD92qTU/cWA0P9ZWXD+FmEI/YXEnP9ZWXD+FmEI/YXEnP5qZWT92qTU/cWA0P9ZWXD9xYDQ/dqk1P5XUkT9hcSc/hZhCP5XUkT9hcSc/hZhCPzMzkz92qTU/cWA0P5XUkT9xYDQ/dqk1P9ZWXD9xYDQ/dqk1P5XUkT92qTU/cWA0P5XUkT92qTU/cWA0P9ZWXD9xYDQ/dqk1P9ZWXD+FmEI/YXEnPzMzkz+FmEI/YXEnP5XUkT92qTU/cWA0P5XUkT+FmEI/YXEnPzMzkz9xYDQ/dqk1P5XUkT9hcSc/hZhCPzMzkz+FmEI/YXEnPzMzkz92qTU/cWA0P5XUkT9xYDQ/dqk1P5XUkT+amZk9AAAAAJqZCUCamZk9AAAAAEvqCECamZk9AACAP0vqCECamZk9AAAAAJqZCUCamZk9AACAP0vqCECamZk9AACAP5qZCUCamZm9AAAAAJqZCUCamZk9AAAAAJqZCUCamZk9AACAP5qZCUCamZm9AAAAAJqZCUCamZk9AACAP5qZCUCamZm9AACAP5qZCUCamZm9AAAAAEvqCECamZm9AAAAAJqZCUCamZm9AACAP5qZCUCamZm9AAAAAEvqCECamZm9AACAP5qZCUCamZm9AACAP0vqCEAep2i7AAAAAEvqCECamZm9AAAAAEvqCECamZm9AACAP0vqCEAep2i7AAAAAEvqCECamZm9AACAP0vqCEAep2i7AACAP0vqCEAep2i7AAAAAGsr7j8ep2i7AAAAAEvqCEAep2i7AACAP0vqCEAep2i7AAAAAGsr7j8ep2i7AACAP0vqCEAep2i7AACAP2sr7j+amZm9AAAAAGsr7j8ep2i7AAAAAGsr7j8ep2i7AACAP2sr7j+amZm9AAAAAGsr7j8ep2i7AACAP2sr7j+amZm9AACAP2sr7j+amZm9AAAAAM3M7D+amZm9AAAAAGsr7j+amZm9AACAP2sr7j+amZm9AAAAAM3M7D+amZm9AACAP2sr7j+amZm9AACAP83M7D+amZk9AAAAAM3M7D+amZm9AAAAAM3M7D+amZm9AACAP83M7D+amZk9AAAAAM3M7D+amZm9AACAP83M7D+amZk9AACAP83M7D+amZk9AAAAAGsr7j+amZk9AAAAAM3M7D+amZk9AACAP83M7D+amZk9AAAAAGsr7j+amZk9AACAP83M7D+amZk9AACAP2sr7j8ep2g7AAAAAGsr7j+amZk9AAAAAGsr7j+amZk9AACAP2sr7j8ep2g7AAAAAGsr7j+amZk9AACAP2sr7j8ep2g7AACAP2sr7j8ep2g7AAAAAEvqCEAep2g7AAAAAGsr7j8ep2g7AACAP2sr7j8ep2g7AAAAAEvqCEAep2g7AACAP2sr7j8ep2g7AACAP0vqCECamZk9AAAAAEvqCEAep2g7AAAAAEvqCEAep2g7AACAP0vqCECamZk9AAAAAEvqCEAep2g7AACAP0vqCECamZk9AACAP0vqCEAep2i7AAAAAGsr7j+amZm9AAAAAGsr7j+amZm9AAAAAM3M7D+amZk9AAAAAM3M7D8ep2i7AAAAAGsr7j+amZm9AAAAAM3M7D+amZk9AAAAAM3M7D8ep2g7AAAAAGsr7j8ep2i7AAAAAGsr7j+amZk9AAAAAGsr7j8ep2g7AAAAAGsr7j+amZk9AAAAAM3M7D8ep2i7AAAAAEvqCECamZm9AAAAAJqZCUCamZm9AAAAAEvqCEAep2g7AAAAAEvqCEAep2i7AAAAAEvqCEAep2i7AAAAAGsr7j8ep2g7AAAAAEvqCEAep2i7AAAAAGsr7j8ep2g7AAAAAGsr7j+amZk9AAAAAJqZCUAep2g7AAAAAEvqCECamZk9AAAAAEvqCECamZk9AAAAAJqZCUCamZm9AAAAAJqZCUAep2i7AAAAAEvqCECamZk9AAAAAJqZCUAep2i7AAAAAEvqCEAep2g7AAAAAEvqCEAep2i7AACAP2sr7j+amZm9AACAP83M7D+amZm9AACAP2sr7j+amZk9AACAP83M7D+amZm9AACAP83M7D8ep2i7AACAP2sr7j+amZk9AACAP83M7D8ep2i7AACAP2sr7j8ep2g7AACAP2sr7j+amZk9AACAP2sr7j+amZk9AACAP83M7D8ep2g7AACAP2sr7j8ep2i7AACAP0vqCECamZm9AACAP0vqCECamZm9AACAP5qZCUAep2g7AACAP0vqCEAep2i7AACAP2sr7j8ep2i7AACAP0vqCEAep2g7AACAP0vqCEAep2g7AACAP2sr7j8ep2i7AACAP2sr7j+amZk9AACAP5qZCUCamZk9AACAP0vqCEAep2g7AACAP0vqCECamZk9AACAP5qZCUAep2i7AACAP0vqCECamZm9AACAP5qZCUCamZk9AACAP5qZCUAep2g7AACAP0vqCEAep2i7AACAP0vqCEAkOVk9JDlZPZqZSUAkOVk9JDlZPUvqSEBhcSe/hZhCP0vqSEAkOVk9JDlZPZqZSUBhcSe/hZhCP0vqSEBhcSe/hZhCP5qZSUAkOVm9JDlZvZqZSUAkOVk9JDlZPZqZSUBhcSe/hZhCP5qZSUAkOVm9JDlZvZqZSUBhcSe/hZhCP5qZSUCFmEK/YXEnP5qZSUAkOVm9JDlZvUvqSEAkOVm9JDlZvZqZSUCFmEK/YXEnP5qZSUAkOVm9JDlZvUvqSECFmEK/YXEnP5qZSUCFmEK/YXEnP0vqSECogiS7qIIku0vqSEAkOVm9JDlZvUvqSECFmEK/YXEnP0vqSECogiS7qIIku0vqSECFmEK/YXEnP0vqSEB2qTW/cWA0P0vqSECogiS7qIIku7UVN0CogiS7qIIku0vqSEB2qTW/cWA0P0vqSECogiS7qIIku7UVN0B2qTW/cWA0P0vqSEB2qTW/cWA0P7UVN0AkOVm9JDlZvbUVN0CogiS7qIIku7UVN0B2qTW/cWA0P7UVN0AkOVm9JDlZvbUVN0B2qTW/cWA0P7UVN0CFmEK/YXEnP7UVN0AkOVm9JDlZvWZmNkAkOVm9JDlZvbUVN0CFmEK/YXEnP7UVN0AkOVm9JDlZvWZmNkCFmEK/YXEnP7UVN0CFmEK/YXEnP2ZmNkAkOVk9JDlZPWZmNkAkOVm9JDlZvWZmNkCFmEK/YXEnP2ZmNkAkOVk9JDlZPWZmNkCFmEK/YXEnP2ZmNkBhcSe/hZhCP2ZmNkAkOVk9JDlZPbUVN0AkOVk9JDlZPWZmNkBhcSe/hZhCP2ZmNkAkOVk9JDlZPbUVN0BhcSe/hZhCP2ZmNkBhcSe/hZhCP7UVN0CogiQ7qIIkO7UVN0AkOVk9JDlZPbUVN0BhcSe/hZhCP7UVN0CogiQ7qIIkO7UVN0BhcSe/hZhCP7UVN0BxYDS/dqk1P7UVN0CogiQ7qIIkO0vqSECogiQ7qIIkO7UVN0BxYDS/dqk1P7UVN0CogiQ7qIIkO0vqSEBxYDS/dqk1P7UVN0BxYDS/dqk1P0vqSEAkOVk9JDlZPUvqSECogiQ7qIIkO0vqSEBxYDS/dqk1P0vqSEAkOVk9JDlZPUvqSEBxYDS/dqk1P0vqSEBhcSe/hZhCP0vqSECogiS7qIIku7UVN0AkOVm9JDlZvbUVN0AkOVm9JDlZvWZmNkAkOVk9JDlZPWZmNkCogiS7qIIku7UVN0AkOVm9JDlZvWZmNkAkOVk9JDlZPWZmNkCogiQ7qIIkO7UVN0CogiS7qIIku7UVN0AkOVk9JDlZPbUVN0CogiQ7qIIkO7UVN0AkOVk9JDlZPWZmNkCogiS7qIIku0vqSEAkOVm9JDlZvZqZSUAkOVm9JDlZvUvqSECogiQ7qIIkO0vqSECogiS7qIIku0vqSECogiS7qIIku7UVN0CogiQ7qIIkO0vqSECogiS7qIIku7UVN0CogiQ7qIIkO7UVN0AkOVk9JDlZPZqZSUCogiQ7qIIkO0vqSEAkOVk9JDlZPUvqSEAkOVk9JDlZPZqZSUAkOVm9JDlZvZqZSUCogiS7qIIku0vqSEAkOVk9JDlZPZqZSUCogiS7qIIku0vqSECogiQ7qIIkO0vqSEB2qTW/cWA0P7UVN0CFmEK/YXEnP2ZmNkCFmEK/YXEnP7UVN0BhcSe/hZhCP2ZmNkCFmEK/YXEnP2ZmNkB2qTW/cWA0P7UVN0BhcSe/hZhCP2ZmNkB2qTW/cWA0P7UVN0BxYDS/dqk1P7UVN0BhcSe/hZhCP7UVN0BhcSe/hZhCP2ZmNkBxYDS/dqk1P7UVN0B2qTW/cWA0P0vqSECFmEK/YXEnP0vqSECFmEK/YXEnP5qZSUBxYDS/dqk1P0vqSEB2qTW/cWA0P7UVN0B2qTW/cWA0P0vqSEBxYDS/dqk1P0vqSEBxYDS/dqk1P7UVN0B2qTW/cWA0P7UVN0BhcSe/hZhCP5qZSUBhcSe/hZhCP0vqSEBxYDS/dqk1P0vqSEBhcSe/hZhCP5qZSUB2qTW/cWA0P0vqSECFmEK/YXEnP5qZSUBhcSe/hZhCP5qZSUBxYDS/dqk1P0vqSEB2qTW/cWA0P0vqSEAAAAAAmpmZPc3MhEAAAAAAmpmZPSV1hEAAAIC/mpmZPSV1hEAAAAAAmpmZPc3MhEAAAIC/mpmZPSV1hEAAAIC/mpmZPc3MhEAAAAAAmpmZvc3MhEAAAAAAmpmZPc3MhEAAAIC/mpmZPc3MhEAAAAAAmpmZvc3MhEAAAIC/mpmZPc3MhEAAAIC/mpmZvc3MhEAAAAAAmpmZvSV1hEAAAAAAmpmZvc3MhEAAAIC/mpmZvc3MhEAAAAAAmpmZvSV1hEAAAIC/mpmZvc3MhEAAAIC/mpmZvSV1hEAAAAAAHqdouyV1hEAAAAAAmpmZvSV1hEAAAIC/mpmZvSV1hEAAAAAAHqdouyV1hEAAAIC/mpmZvSV1hEAAAIC/HqdouyV1hEAAAAAAHqdou7UVd0AAAAAAHqdouyV1hEAAAIC/HqdouyV1hEAAAAAAHqdou7UVd0AAAIC/HqdouyV1hEAAAIC/Hqdou7UVd0AAAAAAmpmZvbUVd0AAAAAAHqdou7UVd0AAAIC/Hqdou7UVd0AAAAAAmpmZvbUVd0AAAIC/Hqdou7UVd0AAAIC/mpmZvbUVd0AAAAAAmpmZvWZmdkAAAAAAmpmZvbUVd0AAAIC/mpmZvbUVd0AAAAAAmpmZvWZmdkAAAIC/mpmZvbUVd0AAAIC/mpmZvWZmdkAAAAAAmpmZPWZmdkAAAAAAmpmZvWZmdkAAAIC/mpmZvWZmdkAAAAAAmpmZPWZmdkAAAIC/mpmZvWZmdkAAAIC/mpmZPWZmdkAAAAAAmpmZPbUVd0AAAAAAmpmZPWZmdkAAAIC/mpmZPWZmdkAAAAAAmpmZPbUVd0AAAIC/mpmZPWZmdkAAAIC/mpmZPbUVd0AAAAAAHqdoO7UVd0AAAAAAmpmZPbUVd0AAAIC/mpmZPbUVd0AAAAAAHqdoO7UVd0AAAIC/mpmZPbUVd0AAAIC/HqdoO7UVd0AAAAAAHqdoOyV1hEAAAAAAHqdoO7UVd0AAAIC/HqdoO7UVd0AAAAAAHqdoOyV1hEAAAIC/HqdoO7UVd0AAAIC/HqdoOyV1hEAAAAAAmpmZPSV1hEAAAAAAHqdoOyV1hEAAAIC/HqdoOyV1hEAAAAAAmpmZPSV1hEAAAIC/HqdoOyV1hEAAAIC/mpmZPSV1hEAAAAAAHqdou7UVd0AAAAAAmpmZvbUVd0AAAAAAmpmZvWZmdkAAAAAAmpmZPWZmdkAAAAAAHqdou7UVd0AAAAAAmpmZvWZmdkAAAAAAmpmZPWZmdkAAAAAAHqdoO7UVd0AAAAAAHqdou7UVd0AAAAAAmpmZPbUVd0AAAAAAHqdoO7UVd0AAAAAAmpmZPWZmdkAAAAAAHqdouyV1hEAAAAAAmpmZvc3MhEAAAAAAmpmZvSV1hEAAAAAAHqdoOyV1hEAAAAAAHqdouyV1hEAAAAAAHqdou7UVd0AAAAAAHqdoOyV1hEAAAAAAHqdou7UVd0AAAAAAHqdoO7UVd0AAAAAAmpmZPc3MhEAAAAAAHqdoOyV1hEAAAAAAmpmZPSV1hEAAAAAAmpmZPc3MhEAAAAAAmpmZvc3MhEAAAAAAHqdouyV1hEAAAAAAmpmZPc3MhEAAAAAAHqdouyV1hEAAAAAAHqdoOyV1hEAAAIC/Hqdou7UVd0AAAIC/mpmZvWZmdkAAAIC/mpmZvbUVd0AAAIC/mpmZPWZmdkAAAIC/mpmZvWZmdkAAAIC/Hqdou7UVd0AAAIC/mpmZPWZmdkAAAIC/Hqdou7UVd0AAAIC/HqdoO7UVd0AAAIC/mpmZPbUVd0AAAIC/mpmZPWZmdkAAAIC/HqdoO7UVd0AAAIC/HqdouyV1hEAAAIC/mpmZvSV1hEAAAIC/mpmZvc3MhEAAAIC/HqdoOyV1hEAAAIC/Hqdou7UVd0AAAIC/HqdouyV1hEAAAIC/HqdoOyV1hEAAAIC/HqdoO7UVd0AAAIC/Hqdou7UVd0AAAIC/mpmZPc3MhEAAAIC/mpmZPSV1hEAAAIC/HqdoOyV1hEAAAIC/mpmZPc3MhEAAAIC/HqdouyV1hEAAAIC/mpmZvc3MhEAAAIC/mpmZPc3MhEAAAIC/HqdoOyV1hEAAAIC/HqdouyV1hEAAAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8=&quot;;&lt;/script&gt;&lt;script&gt;window.DEACTIVATE_WS = true;&lt;/script&gt;
        &lt;script&gt;window.UNIQUE_VERSION_ID = 1750792942150;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
" width="100%" height="500px" style="border:none;"></iframe></div></div>
</div>
<p>Copy and applying translations/rotations can also be given on a part level.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">w</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">pl</span> <span class="o">=</span> <span class="n">ada</span><span class="o">.</span><span class="n">Plate</span><span class="p">(</span><span class="s1">&#39;pl1&#39;</span><span class="p">,</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">w</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">w</span><span class="p">)],</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">beams</span> <span class="o">=</span> <span class="n">ada</span><span class="o">.</span><span class="n">Beam</span><span class="o">.</span><span class="n">array_from_list_of_coords</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">poly</span><span class="o">.</span><span class="n">points3d</span><span class="p">,</span><span class="s1">&#39;IPE300&#39;</span><span class="p">,</span> <span class="n">make_closed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">ada</span><span class="o">.</span><span class="n">Part</span><span class="p">(</span><span class="s1">&#39;myPart&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">pl</span><span class="p">,</span> <span class="o">*</span><span class="n">beams</span><span class="p">)</span>

<span class="n">p_top</span> <span class="o">=</span> <span class="n">ada</span><span class="o">.</span><span class="n">Part</span><span class="p">(</span><span class="s1">&#39;TopPart&#39;</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">copy_to</span><span class="p">(</span><span class="s1">&#39;my_copied_part&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="mi">45</span><span class="p">))</span>
<span class="n">p_top</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
        &lt;title&gt;ADA-PY Viewer&lt;/title&gt;
      &lt;script type=&quot;module&quot; crossorigin&gt;
var vk=Object.defineProperty;var bk=(n,e,t)=&gt;e in n?vk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var dt=(n,e,t)=&gt;bk(n,typeof e!=&quot;symbol&quot;?e+&quot;&quot;:e,t);(function(){const e=document.createElement(&quot;link&quot;).relList;if(e&amp;&amp;e.supports&amp;&amp;e.supports(&quot;modulepreload&quot;))return;for(const r of document.querySelectorAll(&#x27;link[rel=&quot;modulepreload&quot;]&#x27;))i(r);new MutationObserver(r=&gt;{for(const s of r)if(s.type===&quot;childList&quot;)for(const o of s.addedNodes)o.tagName===&quot;LINK&quot;&amp;&amp;o.rel===&quot;modulepreload&quot;&amp;&amp;i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&amp;&amp;(s.integrity=r.integrity),r.referrerPolicy&amp;&amp;(s.referrerPolicy=r.referrerPolicy),r.crossOrigin===&quot;use-credentials&quot;?s.credentials=&quot;include&quot;:r.crossOrigin===&quot;anonymous&quot;?s.credentials=&quot;omit&quot;:s.credentials=&quot;same-origin&quot;,s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Z0(n){return n&amp;&amp;n.__esModule&amp;&amp;Object.prototype.hasOwnProperty.call(n,&quot;default&quot;)?n.default:n}function xk(n){if(Object.prototype.hasOwnProperty.call(n,&quot;__esModule&quot;))return n;var e=n.default;if(typeof e==&quot;function&quot;){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var sb={exports:{}},Ef={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IM;function Sk(){if(IM)return Ef;IM=1;var n=Symbol.for(&quot;react.transitional.element&quot;),e=Symbol.for(&quot;react.fragment&quot;);function t(i,r,s){var o=null;if(s!==void 0&amp;&amp;(o=&quot;&quot;+s),r.key!==void 0&amp;&amp;(o=&quot;&quot;+r.key),&quot;key&quot;in r){s={};for(var l in r)l!==&quot;key&quot;&amp;&amp;(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:o,ref:r!==void 0?r:null,props:s}}return Ef.Fragment=e,Ef.jsx=t,Ef.jsxs=t,Ef}var PM;function wk(){return PM||(PM=1,sb.exports=Sk()),sb.exports}var P=wk(),ob={exports:{}},Tf={},ab={exports:{}},lb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LM;function Ek(){return LM||(LM=1,function(n){function e(I,j){var G=I.length;I.push(j);e:for(;0&lt;G;){var ee=G-1&gt;&gt;&gt;1,F=I[ee];if(0&lt;r(F,j))I[ee]=j,I[G]=F,G=ee;else break e}}function t(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var j=I[0],G=I.pop();if(G!==j){I[0]=G;e:for(var ee=0,F=I.length,ne=F&gt;&gt;&gt;1;ee&lt;ne;){var le=2*(ee+1)-1,ce=I[le],ie=le+1,oe=I[ie];if(0&gt;r(ce,G))ie&lt;F&amp;&amp;0&gt;r(oe,ce)?(I[ee]=oe,I[ie]=G,ee=ie):(I[ee]=ce,I[le]=G,ee=le);else if(ie&lt;F&amp;&amp;0&gt;r(oe,G))I[ee]=oe,I[ie]=G,ee=ie;else break e}}return j}function r(I,j){var G=I.sortIndex-j.sortIndex;return G!==0?G:I.id-j.id}if(n.unstable_now=void 0,typeof performance==&quot;object&quot;&amp;&amp;typeof performance.now==&quot;function&quot;){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var u=[],h=[],f=1,p=null,m=3,g=!1,v=!1,x=!1,b=!1,_=typeof setTimeout==&quot;function&quot;?setTimeout:null,T=typeof clearTimeout==&quot;function&quot;?clearTimeout:null,w=typeof setImmediate&lt;&quot;u&quot;?setImmediate:null;function E(I){for(var j=t(h);j!==null;){if(j.callback===null)i(h);else if(j.startTime&lt;=I)i(h),j.sortIndex=j.expirationTime,e(u,j);else break;j=t(h)}}function R(I){if(x=!1,E(I),!v)if(t(u)!==null)v=!0,N||(N=!0,V());else{var j=t(h);j!==null&amp;&amp;K(R,j.startTime-I)}}var N=!1,A=-1,D=5,C=-1;function O(){return b?!0:!(n.unstable_now()-C&lt;D)}function L(){if(b=!1,N){var I=n.unstable_now();C=I;var j=!0;try{e:{v=!1,x&amp;&amp;(x=!1,T(A),A=-1),g=!0;var G=m;try{t:{for(E(I),p=t(u);p!==null&amp;&amp;!(p.expirationTime&gt;I&amp;&amp;O());){var ee=p.callback;if(typeof ee==&quot;function&quot;){p.callback=null,m=p.priorityLevel;var F=ee(p.expirationTime&lt;=I);if(I=n.unstable_now(),typeof F==&quot;function&quot;){p.callback=F,E(I),j=!0;break t}p===t(u)&amp;&amp;i(u),E(I)}else i(u);p=t(u)}if(p!==null)j=!0;else{var ne=t(h);ne!==null&amp;&amp;K(R,ne.startTime-I),j=!1}}break e}finally{p=null,m=G,g=!1}j=void 0}}finally{j?V():N=!1}}}var V;if(typeof w==&quot;function&quot;)V=function(){w(L)};else if(typeof MessageChannel&lt;&quot;u&quot;){var Z=new MessageChannel,z=Z.port2;Z.port1.onmessage=L,V=function(){z.postMessage(null)}}else V=function(){_(L,0)};function K(I,j){A=_(function(){I(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0&gt;I||125&lt;I?console.error(&quot;forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported&quot;):D=0&lt;I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(I){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var G=m;m=j;try{return I()}finally{m=G}},n.unstable_requestPaint=function(){b=!0},n.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var G=m;m=I;try{return j()}finally{m=G}},n.unstable_scheduleCallback=function(I,j,G){var ee=n.unstable_now();switch(typeof G==&quot;object&quot;&amp;&amp;G!==null?(G=G.delay,G=typeof G==&quot;number&quot;&amp;&amp;0&lt;G?ee+G:ee):G=ee,I){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=G+F,I={id:f++,callback:j,priorityLevel:I,startTime:G,expirationTime:F,sortIndex:-1},G&gt;ee?(I.sortIndex=G,e(h,I),t(u)===null&amp;&amp;I===t(h)&amp;&amp;(x?(T(A),A=-1):x=!0,K(R,G-ee))):(I.sortIndex=F,e(u,I),v||g||(v=!0,N||(N=!0,V()))),I},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(I){var j=m;return function(){var G=m;m=j;try{return I.apply(this,arguments)}finally{m=G}}}}(lb)),lb}var UM;function Tk(){return UM||(UM=1,ab.exports=Ek()),ab.exports}var cb={exports:{}},qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kM;function Mk(){if(kM)return qt;kM=1;var n=Symbol.for(&quot;react.transitional.element&quot;),e=Symbol.for(&quot;react.portal&quot;),t=Symbol.for(&quot;react.fragment&quot;),i=Symbol.for(&quot;react.strict_mode&quot;),r=Symbol.for(&quot;react.profiler&quot;),s=Symbol.for(&quot;react.consumer&quot;),o=Symbol.for(&quot;react.context&quot;),l=Symbol.for(&quot;react.forward_ref&quot;),u=Symbol.for(&quot;react.suspense&quot;),h=Symbol.for(&quot;react.memo&quot;),f=Symbol.for(&quot;react.lazy&quot;),p=Symbol.iterator;function m(F){return F===null||typeof F!=&quot;object&quot;?null:(F=p&amp;&amp;F[p]||F[&quot;@@iterator&quot;],typeof F==&quot;function&quot;?F:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function b(F,ne,le){this.props=F,this.context=ne,this.refs=x,this.updater=le||g}b.prototype.isReactComponent={},b.prototype.setState=function(F,ne){if(typeof F!=&quot;object&quot;&amp;&amp;typeof F!=&quot;function&quot;&amp;&amp;F!=null)throw Error(&quot;takes an object of state variables to update or a function which returns an object of state variables.&quot;);this.updater.enqueueSetState(this,F,ne,&quot;setState&quot;)},b.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,&quot;forceUpdate&quot;)};function _(){}_.prototype=b.prototype;function T(F,ne,le){this.props=F,this.context=ne,this.refs=x,this.updater=le||g}var w=T.prototype=new _;w.constructor=T,v(w,b.prototype),w.isPureReactComponent=!0;var E=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function A(F,ne,le,ce,ie,oe){return le=oe.ref,{$$typeof:n,type:F,key:ne,ref:le!==void 0?le:null,props:oe}}function D(F,ne){return A(F.type,ne,void 0,void 0,void 0,F.props)}function C(F){return typeof F==&quot;object&quot;&amp;&amp;F!==null&amp;&amp;F.$$typeof===n}function O(F){var ne={&quot;=&quot;:&quot;=0&quot;,&quot;:&quot;:&quot;=2&quot;};return&quot;$&quot;+F.replace(/[=:]/g,function(le){return ne[le]})}var L=/\/+/g;function V(F,ne){return typeof F==&quot;object&quot;&amp;&amp;F!==null&amp;&amp;F.key!=null?O(&quot;&quot;+F.key):ne.toString(36)}function Z(){}function z(F){switch(F.status){case&quot;fulfilled&quot;:return F.value;case&quot;rejected&quot;:throw F.reason;default:switch(typeof F.status==&quot;string&quot;?F.then(Z,Z):(F.status=&quot;pending&quot;,F.then(function(ne){F.status===&quot;pending&quot;&amp;&amp;(F.status=&quot;fulfilled&quot;,F.value=ne)},function(ne){F.status===&quot;pending&quot;&amp;&amp;(F.status=&quot;rejected&quot;,F.reason=ne)})),F.status){case&quot;fulfilled&quot;:return F.value;case&quot;rejected&quot;:throw F.reason}}throw F}function K(F,ne,le,ce,ie){var oe=typeof F;(oe===&quot;undefined&quot;||oe===&quot;boolean&quot;)&amp;&amp;(F=null);var ae=!1;if(F===null)ae=!0;else switch(oe){case&quot;bigint&quot;:case&quot;string&quot;:case&quot;number&quot;:ae=!0;break;case&quot;object&quot;:switch(F.$$typeof){case n:case e:ae=!0;break;case f:return ae=F._init,K(ae(F._payload),ne,le,ce,ie)}}if(ae)return ie=ie(F),ae=ce===&quot;&quot;?&quot;.&quot;+V(F,0):ce,E(ie)?(le=&quot;&quot;,ae!=null&amp;&amp;(le=ae.replace(L,&quot;$&amp;/&quot;)+&quot;/&quot;),K(ie,ne,le,&quot;&quot;,function(He){return He})):ie!=null&amp;&amp;(C(ie)&amp;&amp;(ie=D(ie,le+(ie.key==null||F&amp;&amp;F.key===ie.key?&quot;&quot;:(&quot;&quot;+ie.key).replace(L,&quot;$&amp;/&quot;)+&quot;/&quot;)+ae)),ne.push(ie)),1;ae=0;var ue=ce===&quot;&quot;?&quot;.&quot;:ce+&quot;:&quot;;if(E(F))for(var ve=0;ve&lt;F.length;ve++)ce=F[ve],oe=ue+V(ce,ve),ae+=K(ce,ne,le,oe,ie);else if(ve=m(F),typeof ve==&quot;function&quot;)for(F=ve.call(F),ve=0;!(ce=F.next()).done;)ce=ce.value,oe=ue+V(ce,ve++),ae+=K(ce,ne,le,oe,ie);else if(oe===&quot;object&quot;){if(typeof F.then==&quot;function&quot;)return K(z(F),ne,le,ce,ie);throw ne=String(F),Error(&quot;Objects are not valid as a React child (found: &quot;+(ne===&quot;[object Object]&quot;?&quot;object with keys {&quot;+Object.keys(F).join(&quot;, &quot;)+&quot;}&quot;:ne)+&quot;). If you meant to render a collection of children, use an array instead.&quot;)}return ae}function I(F,ne,le){if(F==null)return F;var ce=[],ie=0;return K(F,ce,&quot;&quot;,&quot;&quot;,function(oe){return ne.call(le,oe,ie++)}),ce}function j(F){if(F._status===-1){var ne=F._result;ne=ne(),ne.then(function(le){(F._status===0||F._status===-1)&amp;&amp;(F._status=1,F._result=le)},function(le){(F._status===0||F._status===-1)&amp;&amp;(F._status=2,F._result=le)}),F._status===-1&amp;&amp;(F._status=0,F._result=ne)}if(F._status===1)return F._result.default;throw F._result}var G=typeof reportError==&quot;function&quot;?reportError:function(F){if(typeof window==&quot;object&quot;&amp;&amp;typeof window.ErrorEvent==&quot;function&quot;){var ne=new window.ErrorEvent(&quot;error&quot;,{bubbles:!0,cancelable:!0,message:typeof F==&quot;object&quot;&amp;&amp;F!==null&amp;&amp;typeof F.message==&quot;string&quot;?String(F.message):String(F),error:F});if(!window.dispatchEvent(ne))return}else if(typeof process==&quot;object&quot;&amp;&amp;typeof process.emit==&quot;function&quot;){process.emit(&quot;uncaughtException&quot;,F);return}console.error(F)};function ee(){}return qt.Children={map:I,forEach:function(F,ne,le){I(F,function(){ne.apply(this,arguments)},le)},count:function(F){var ne=0;return I(F,function(){ne++}),ne},toArray:function(F){return I(F,function(ne){return ne})||[]},only:function(F){if(!C(F))throw Error(&quot;React.Children.only expected to receive a single React element child.&quot;);return F}},qt.Component=b,qt.Fragment=t,qt.Profiler=r,qt.PureComponent=T,qt.StrictMode=i,qt.Suspense=u,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,qt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return R.H.useMemoCache(F)}},qt.cache=function(F){return function(){return F.apply(null,arguments)}},qt.cloneElement=function(F,ne,le){if(F==null)throw Error(&quot;The argument must be a React element, but you passed &quot;+F+&quot;.&quot;);var ce=v({},F.props),ie=F.key,oe=void 0;if(ne!=null)for(ae in ne.ref!==void 0&amp;&amp;(oe=void 0),ne.key!==void 0&amp;&amp;(ie=&quot;&quot;+ne.key),ne)!N.call(ne,ae)||ae===&quot;key&quot;||ae===&quot;__self&quot;||ae===&quot;__source&quot;||ae===&quot;ref&quot;&amp;&amp;ne.ref===void 0||(ce[ae]=ne[ae]);var ae=arguments.length-2;if(ae===1)ce.children=le;else if(1&lt;ae){for(var ue=Array(ae),ve=0;ve&lt;ae;ve++)ue[ve]=arguments[ve+2];ce.children=ue}return A(F.type,ie,void 0,void 0,oe,ce)},qt.createContext=function(F){return F={$$typeof:o,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:s,_context:F},F},qt.createElement=function(F,ne,le){var ce,ie={},oe=null;if(ne!=null)for(ce in ne.key!==void 0&amp;&amp;(oe=&quot;&quot;+ne.key),ne)N.call(ne,ce)&amp;&amp;ce!==&quot;key&quot;&amp;&amp;ce!==&quot;__self&quot;&amp;&amp;ce!==&quot;__source&quot;&amp;&amp;(ie[ce]=ne[ce]);var ae=arguments.length-2;if(ae===1)ie.children=le;else if(1&lt;ae){for(var ue=Array(ae),ve=0;ve&lt;ae;ve++)ue[ve]=arguments[ve+2];ie.children=ue}if(F&amp;&amp;F.defaultProps)for(ce in ae=F.defaultProps,ae)ie[ce]===void 0&amp;&amp;(ie[ce]=ae[ce]);return A(F,oe,void 0,void 0,null,ie)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(F){return{$$typeof:l,render:F}},qt.isValidElement=C,qt.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:j}},qt.memo=function(F,ne){return{$$typeof:h,type:F,compare:ne===void 0?null:ne}},qt.startTransition=function(F){var ne=R.T,le={};R.T=le;try{var ce=F(),ie=R.S;ie!==null&amp;&amp;ie(le,ce),typeof ce==&quot;object&quot;&amp;&amp;ce!==null&amp;&amp;typeof ce.then==&quot;function&quot;&amp;&amp;ce.then(ee,G)}catch(oe){G(oe)}finally{R.T=ne}},qt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},qt.use=function(F){return R.H.use(F)},qt.useActionState=function(F,ne,le){return R.H.useActionState(F,ne,le)},qt.useCallback=function(F,ne){return R.H.useCallback(F,ne)},qt.useContext=function(F){return R.H.useContext(F)},qt.useDebugValue=function(){},qt.useDeferredValue=function(F,ne){return R.H.useDeferredValue(F,ne)},qt.useEffect=function(F,ne,le){var ce=R.H;if(typeof le==&quot;function&quot;)throw Error(&quot;useEffect CRUD overload is not enabled in this build of React.&quot;);return ce.useEffect(F,ne)},qt.useId=function(){return R.H.useId()},qt.useImperativeHandle=function(F,ne,le){return R.H.useImperativeHandle(F,ne,le)},qt.useInsertionEffect=function(F,ne){return R.H.useInsertionEffect(F,ne)},qt.useLayoutEffect=function(F,ne){return R.H.useLayoutEffect(F,ne)},qt.useMemo=function(F,ne){return R.H.useMemo(F,ne)},qt.useOptimistic=function(F,ne){return R.H.useOptimistic(F,ne)},qt.useReducer=function(F,ne,le){return R.H.useReducer(F,ne,le)},qt.useRef=function(F){return R.H.useRef(F)},qt.useState=function(F){return R.H.useState(F)},qt.useSyncExternalStore=function(F,ne,le){return R.H.useSyncExternalStore(F,ne,le)},qt.useTransition=function(){return R.H.useTransition()},qt.version=&quot;19.1.0&quot;,qt}var FM;function Lc(){return FM||(FM=1,cb.exports=Mk()),cb.exports}var ub={exports:{}},or={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zM;function Ak(){if(zM)return or;zM=1;var n=Lc();function e(u){var h=&quot;https://react.dev/errors/&quot;+u;if(1&lt;arguments.length){h+=&quot;?args[]=&quot;+encodeURIComponent(arguments[1]);for(var f=2;f&lt;arguments.length;f++)h+=&quot;&amp;args[]=&quot;+encodeURIComponent(arguments[f])}return&quot;Minified React error #&quot;+u+&quot;; visit &quot;+h+&quot; for the full message or use the non-minified dev environment for full errors and additional helpful warnings.&quot;}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for(&quot;react.portal&quot;);function s(u,h,f){var p=3&lt;arguments.length&amp;&amp;arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:&quot;&quot;+p,children:u,containerInfo:h,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,h){if(u===&quot;font&quot;)return&quot;&quot;;if(typeof h==&quot;string&quot;)return h===&quot;use-credentials&quot;?h:&quot;&quot;}return or.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,or.createPortal=function(u,h){var f=2&lt;arguments.length&amp;&amp;arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&amp;&amp;h.nodeType!==9&amp;&amp;h.nodeType!==11)throw Error(e(299));return s(u,h,null,f)},or.flushSync=function(u){var h=o.T,f=i.p;try{if(o.T=null,i.p=2,u)return u()}finally{o.T=h,i.p=f,i.d.f()}},or.preconnect=function(u,h){typeof u==&quot;string&quot;&amp;&amp;(h?(h=h.crossOrigin,h=typeof h==&quot;string&quot;?h===&quot;use-credentials&quot;?h:&quot;&quot;:void 0):h=null,i.d.C(u,h))},or.prefetchDNS=function(u){typeof u==&quot;string&quot;&amp;&amp;i.d.D(u)},or.preinit=function(u,h){if(typeof u==&quot;string&quot;&amp;&amp;h&amp;&amp;typeof h.as==&quot;string&quot;){var f=h.as,p=l(f,h.crossOrigin),m=typeof h.integrity==&quot;string&quot;?h.integrity:void 0,g=typeof h.fetchPriority==&quot;string&quot;?h.fetchPriority:void 0;f===&quot;style&quot;?i.d.S(u,typeof h.precedence==&quot;string&quot;?h.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:g}):f===&quot;script&quot;&amp;&amp;i.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:g,nonce:typeof h.nonce==&quot;string&quot;?h.nonce:void 0})}},or.preinitModule=function(u,h){if(typeof u==&quot;string&quot;)if(typeof h==&quot;object&quot;&amp;&amp;h!==null){if(h.as==null||h.as===&quot;script&quot;){var f=l(h.as,h.crossOrigin);i.d.M(u,{crossOrigin:f,integrity:typeof h.integrity==&quot;string&quot;?h.integrity:void 0,nonce:typeof h.nonce==&quot;string&quot;?h.nonce:void 0})}}else h==null&amp;&amp;i.d.M(u)},or.preload=function(u,h){if(typeof u==&quot;string&quot;&amp;&amp;typeof h==&quot;object&quot;&amp;&amp;h!==null&amp;&amp;typeof h.as==&quot;string&quot;){var f=h.as,p=l(f,h.crossOrigin);i.d.L(u,f,{crossOrigin:p,integrity:typeof h.integrity==&quot;string&quot;?h.integrity:void 0,nonce:typeof h.nonce==&quot;string&quot;?h.nonce:void 0,type:typeof h.type==&quot;string&quot;?h.type:void 0,fetchPriority:typeof h.fetchPriority==&quot;string&quot;?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy==&quot;string&quot;?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet==&quot;string&quot;?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes==&quot;string&quot;?h.imageSizes:void 0,media:typeof h.media==&quot;string&quot;?h.media:void 0})}},or.preloadModule=function(u,h){if(typeof u==&quot;string&quot;)if(h){var f=l(h.as,h.crossOrigin);i.d.m(u,{as:typeof h.as==&quot;string&quot;&amp;&amp;h.as!==&quot;script&quot;?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity==&quot;string&quot;?h.integrity:void 0})}else i.d.m(u)},or.requestFormReset=function(u){i.d.r(u)},or.unstable_batchedUpdates=function(u,h){return u(h)},or.useFormState=function(u,h,f){return o.H.useFormState(u,h,f)},or.useFormStatus=function(){return o.H.useHostTransitionStatus()},or.version=&quot;19.1.0&quot;,or}var BM;function J0(){if(BM)return ub.exports;BM=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&gt;&quot;u&quot;||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=&quot;function&quot;))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ub.exports=Ak(),ub.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HM;function Ck(){if(HM)return Tf;HM=1;var n=Tk(),e=Lc(),t=J0();function i(a){var c=&quot;https://react.dev/errors/&quot;+a;if(1&lt;arguments.length){c+=&quot;?args[]=&quot;+encodeURIComponent(arguments[1]);for(var d=2;d&lt;arguments.length;d++)c+=&quot;&amp;args[]=&quot;+encodeURIComponent(arguments[d])}return&quot;Minified React error #&quot;+a+&quot;; visit &quot;+c+&quot; for the full message or use the non-minified dev environment for full errors and additional helpful warnings.&quot;}function r(a){return!(!a||a.nodeType!==1&amp;&amp;a.nodeType!==9&amp;&amp;a.nodeType!==11)}function s(a){var c=a,d=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&amp;4098)!==0&amp;&amp;(d=c.return),a=c.return;while(a)}return c.tag===3?d:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&amp;&amp;(a=a.alternate,a!==null&amp;&amp;(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(i(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(i(188));return c!==a?null:a}for(var d=a,y=c;;){var S=d.return;if(S===null)break;var M=S.alternate;if(M===null){if(y=S.return,y!==null){d=y;continue}break}if(S.child===M.child){for(M=S.child;M;){if(M===d)return l(S),a;if(M===y)return l(S),c;M=M.sibling}throw Error(i(188))}if(d.return!==y.return)d=S,y=M;else{for(var U=!1,W=S.child;W;){if(W===d){U=!0,d=S,y=M;break}if(W===y){U=!0,y=S,d=M;break}W=W.sibling}if(!U){for(W=M.child;W;){if(W===d){U=!0,d=M,y=S;break}if(W===y){U=!0,y=M,d=S;break}W=W.sibling}if(!U)throw Error(i(189))}}if(d.alternate!==y)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?a:c}function h(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=h(a),c!==null)return c;a=a.sibling}return null}var f=Object.assign,p=Symbol.for(&quot;react.element&quot;),m=Symbol.for(&quot;react.transitional.element&quot;),g=Symbol.for(&quot;react.portal&quot;),v=Symbol.for(&quot;react.fragment&quot;),x=Symbol.for(&quot;react.strict_mode&quot;),b=Symbol.for(&quot;react.profiler&quot;),_=Symbol.for(&quot;react.provider&quot;),T=Symbol.for(&quot;react.consumer&quot;),w=Symbol.for(&quot;react.context&quot;),E=Symbol.for(&quot;react.forward_ref&quot;),R=Symbol.for(&quot;react.suspense&quot;),N=Symbol.for(&quot;react.suspense_list&quot;),A=Symbol.for(&quot;react.memo&quot;),D=Symbol.for(&quot;react.lazy&quot;),C=Symbol.for(&quot;react.activity&quot;),O=Symbol.for(&quot;react.memo_cache_sentinel&quot;),L=Symbol.iterator;function V(a){return a===null||typeof a!=&quot;object&quot;?null:(a=L&amp;&amp;a[L]||a[&quot;@@iterator&quot;],typeof a==&quot;function&quot;?a:null)}var Z=Symbol.for(&quot;react.client.reference&quot;);function z(a){if(a==null)return null;if(typeof a==&quot;function&quot;)return a.$$typeof===Z?null:a.displayName||a.name||null;if(typeof a==&quot;string&quot;)return a;switch(a){case v:return&quot;Fragment&quot;;case b:return&quot;Profiler&quot;;case x:return&quot;StrictMode&quot;;case R:return&quot;Suspense&quot;;case N:return&quot;SuspenseList&quot;;case C:return&quot;Activity&quot;}if(typeof a==&quot;object&quot;)switch(a.$$typeof){case g:return&quot;Portal&quot;;case w:return(a.displayName||&quot;Context&quot;)+&quot;.Provider&quot;;case T:return(a._context.displayName||&quot;Context&quot;)+&quot;.Consumer&quot;;case E:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||&quot;&quot;,a=a!==&quot;&quot;?&quot;ForwardRef(&quot;+a+&quot;)&quot;:&quot;ForwardRef&quot;),a;case A:return c=a.displayName||null,c!==null?c:z(a.type)||&quot;Memo&quot;;case D:c=a._payload,a=a._init;try{return z(a(c))}catch{}}return null}var K=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},ee=[],F=-1;function ne(a){return{current:a}}function le(a){0&gt;F||(a.current=ee[F],ee[F]=null,F--)}function ce(a,c){F++,ee[F]=a.current,a.current=c}var ie=ne(null),oe=ne(null),ae=ne(null),ue=ne(null);function ve(a,c){switch(ce(ae,c),ce(oe,a),ce(ie,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&amp;&amp;(a=a.namespaceURI)?aM(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=aM(c),a=lM(c,a);else switch(a){case&quot;svg&quot;:a=1;break;case&quot;math&quot;:a=2;break;default:a=0}}le(ie),ce(ie,a)}function He(){le(ie),le(oe),le(ae)}function Xe(a){a.memoizedState!==null&amp;&amp;ce(ue,a);var c=ie.current,d=lM(c,a.type);c!==d&amp;&amp;(ce(oe,a),ce(ie,d))}function lt(a){oe.current===a&amp;&amp;(le(ie),le(oe)),ue.current===a&amp;&amp;(le(ue),vf._currentValue=G)}var We=Object.prototype.hasOwnProperty,Ye=n.unstable_scheduleCallback,Q=n.unstable_cancelCallback,Ve=n.unstable_shouldYield,Le=n.unstable_requestPaint,Fe=n.unstable_now,Ne=n.unstable_getCurrentPriorityLevel,mt=n.unstable_ImmediatePriority,ze=n.unstable_UserBlockingPriority,te=n.unstable_NormalPriority,H=n.unstable_LowPriority,pe=n.unstable_IdlePriority,Ce=n.log,Ue=n.unstable_setDisableYieldValue,Me=null,Ze=null;function qe(a){if(typeof Ce==&quot;function&quot;&amp;&amp;Ue(a),Ze&amp;&amp;typeof Ze.setStrictMode==&quot;function&quot;)try{Ze.setStrictMode(Me,a)}catch{}}var ut=Math.clz32?Math.clz32:ht,Ct=Math.log,je=Math.LN2;function ht(a){return a&gt;&gt;&gt;=0,a===0?32:31-(Ct(a)/je|0)|0}var St=256,Rt=4194304;function rt(a){var c=a&amp;42;if(c!==0)return c;switch(a&amp;-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&amp;4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&amp;62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Gt(a,c,d){var y=a.pendingLanes;if(y===0)return 0;var S=0,M=a.suspendedLanes,U=a.pingedLanes;a=a.warmLanes;var W=y&amp;134217727;return W!==0?(y=W&amp;~M,y!==0?S=rt(y):(U&amp;=W,U!==0?S=rt(U):d||(d=W&amp;~a,d!==0&amp;&amp;(S=rt(d))))):(W=y&amp;~M,W!==0?S=rt(W):U!==0?S=rt(U):d||(d=y&amp;~a,d!==0&amp;&amp;(S=rt(d)))),S===0?0:c!==0&amp;&amp;c!==S&amp;&amp;(c&amp;M)===0&amp;&amp;(M=S&amp;-S,d=c&amp;-c,M&gt;=d||M===32&amp;&amp;(d&amp;4194048)!==0)?c:S}function It(a,c){return(a.pendingLanes&amp;~(a.suspendedLanes&amp;~a.pingedLanes)&amp;c)===0}function gn(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function de(){var a=St;return St&lt;&lt;=1,(St&amp;4194048)===0&amp;&amp;(St=256),a}function tt(){var a=Rt;return Rt&lt;&lt;=1,(Rt&amp;62914560)===0&amp;&amp;(Rt=4194304),a}function Ae(a){for(var c=[],d=0;31&gt;d;d++)c.push(a);return c}function Pe(a,c){a.pendingLanes|=c,c!==268435456&amp;&amp;(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function st(a,c,d,y,S,M){var U=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&amp;=d,a.entangledLanes&amp;=d,a.errorRecoveryDisabledLanes&amp;=d,a.shellSuspendCounter=0;var W=a.entanglements,se=a.expirationTimes,_e=a.hiddenUpdates;for(d=U&amp;~d;0&lt;d;){var De=31-ut(d),ke=1&lt;&lt;De;W[De]=0,se[De]=-1;var xe=_e[De];if(xe!==null)for(_e[De]=null,De=0;De&lt;xe.length;De++){var Ee=xe[De];Ee!==null&amp;&amp;(Ee.lane&amp;=-536870913)}d&amp;=~ke}y!==0&amp;&amp;Qe(a,y,0),M!==0&amp;&amp;S===0&amp;&amp;a.tag!==0&amp;&amp;(a.suspendedLanes|=M&amp;~(U&amp;~c))}function Qe(a,c,d){a.pendingLanes|=c,a.suspendedLanes&amp;=~c;var y=31-ut(c);a.entangledLanes|=c,a.entanglements[y]=a.entanglements[y]|1073741824|d&amp;4194090}function Ut(a,c){var d=a.entangledLanes|=c;for(a=a.entanglements;d;){var y=31-ut(d),S=1&lt;&lt;y;S&amp;c|a[y]&amp;c&amp;&amp;(a[y]|=c),d&amp;=~S}}function wn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function jn(a){return a&amp;=-a,2&lt;a?8&lt;a?(a&amp;134217727)!==0?32:268435456:8:2}function zt(){var a=j.p;return a!==0?a:(a=window.event,a===void 0?32:AM(a.type))}function Bi(a,c){var d=j.p;try{return j.p=a,c()}finally{j.p=d}}var oi=Math.random().toString(36).slice(2),Zn=&quot;__reactFiber$&quot;+oi,pi=&quot;__reactProps$&quot;+oi,Hi=&quot;__reactContainer$&quot;+oi,Cs=&quot;__reactEvents$&quot;+oi,ya=&quot;__reactListeners$&quot;+oi,Co=&quot;__reactHandles$&quot;+oi,Rs=&quot;__reactResources$&quot;+oi,kr=&quot;__reactMarker$&quot;+oi;function os(a){delete a[Zn],delete a[pi],delete a[Cs],delete a[ya],delete a[Co]}function wr(a){var c=a[Zn];if(c)return c;for(var d=a.parentNode;d;){if(c=d[Hi]||d[Zn]){if(d=c.alternate,c.child!==null||d!==null&amp;&amp;d.child!==null)for(a=fM(a);a!==null;){if(d=a[Zn])return d;a=fM(a)}return c}a=d,d=a.parentNode}return null}function Er(a){if(a=a[Zn]||a[Hi]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Os(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(i(33))}function as(a){var c=a[Rs];return c||(c=a[Rs]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Wn(a){a[kr]=!0}var _a=new Set,va={};function Fr(a,c){q(a,c),q(a+&quot;Capture&quot;,c)}function q(a,c){for(va[a]=c,a=0;a&lt;c.length;a++)_a.add(c[a])}var fe=RegExp(&quot;^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$&quot;),be={},we={};function me(a){return We.call(we,a)?!0:We.call(be,a)?!1:fe.test(a)?we[a]=!0:(be[a]=!0,!1)}function Ge(a,c,d){if(me(c))if(d===null)a.removeAttribute(c);else{switch(typeof d){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:a.removeAttribute(c);return;case&quot;boolean&quot;:var y=c.toLowerCase().slice(0,5);if(y!==&quot;data-&quot;&amp;&amp;y!==&quot;aria-&quot;){a.removeAttribute(c);return}}a.setAttribute(c,&quot;&quot;+d)}}function Je(a,c,d){if(d===null)a.removeAttribute(c);else{switch(typeof d){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:case&quot;boolean&quot;:a.removeAttribute(c);return}a.setAttribute(c,&quot;&quot;+d)}}function et(a,c,d,y){if(y===null)a.removeAttribute(d);else{switch(typeof y){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:case&quot;boolean&quot;:a.removeAttribute(d);return}a.setAttributeNS(c,d,&quot;&quot;+y)}}var ft,Ot;function Et(a){if(ft===void 0)try{throw Error()}catch(d){var c=d.stack.trim().match(/\n( *(at )?)/);ft=c&amp;&amp;c[1]||&quot;&quot;,Ot=-1&lt;d.stack.indexOf(`
    at`)?&quot; (&lt;anonymous&gt;)&quot;:-1&lt;d.stack.indexOf(&quot;@&quot;)?&quot;@unknown:0:0&quot;:&quot;&quot;}return`
`+ft+a+Ot}var bt=!1;function Bt(a,c){if(!a||bt)return&quot;&quot;;bt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,&quot;props&quot;,{set:function(){throw Error()}}),typeof Reflect==&quot;object&quot;&amp;&amp;Reflect.construct){try{Reflect.construct(ke,[])}catch(Ee){var xe=Ee}Reflect.construct(a,[],ke)}else{try{ke.call()}catch(Ee){xe=Ee}a.call(ke.prototype)}}else{try{throw Error()}catch(Ee){xe=Ee}(ke=a())&amp;&amp;typeof ke.catch==&quot;function&quot;&amp;&amp;ke.catch(function(){})}}catch(Ee){if(Ee&amp;&amp;xe&amp;&amp;typeof Ee.stack==&quot;string&quot;)return[Ee.stack,xe.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName=&quot;DetermineComponentFrameRoot&quot;;var S=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,&quot;name&quot;);S&amp;&amp;S.configurable&amp;&amp;Object.defineProperty(y.DetermineComponentFrameRoot,&quot;name&quot;,{value:&quot;DetermineComponentFrameRoot&quot;});var M=y.DetermineComponentFrameRoot(),U=M[0],W=M[1];if(U&amp;&amp;W){var se=U.split(`
`),_e=W.split(`
`);for(S=y=0;y&lt;se.length&amp;&amp;!se[y].includes(&quot;DetermineComponentFrameRoot&quot;);)y++;for(;S&lt;_e.length&amp;&amp;!_e[S].includes(&quot;DetermineComponentFrameRoot&quot;);)S++;if(y===se.length||S===_e.length)for(y=se.length-1,S=_e.length-1;1&lt;=y&amp;&amp;0&lt;=S&amp;&amp;se[y]!==_e[S];)S--;for(;1&lt;=y&amp;&amp;0&lt;=S;y--,S--)if(se[y]!==_e[S]){if(y!==1||S!==1)do if(y--,S--,0&gt;S||se[y]!==_e[S]){var De=`
`+se[y].replace(&quot; at new &quot;,&quot; at &quot;);return a.displayName&amp;&amp;De.includes(&quot;&lt;anonymous&gt;&quot;)&amp;&amp;(De=De.replace(&quot;&lt;anonymous&gt;&quot;,a.displayName)),De}while(1&lt;=y&amp;&amp;0&lt;=S);break}}}finally{bt=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:&quot;&quot;)?Et(d):&quot;&quot;}function un(a){switch(a.tag){case 26:case 27:case 5:return Et(a.type);case 16:return Et(&quot;Lazy&quot;);case 13:return Et(&quot;Suspense&quot;);case 19:return Et(&quot;SuspenseList&quot;);case 0:case 15:return Bt(a.type,!1);case 11:return Bt(a.type.render,!1);case 1:return Bt(a.type,!0);case 31:return Et(&quot;Activity&quot;);default:return&quot;&quot;}}function In(a){try{var c=&quot;&quot;;do c+=un(a),a=a.return;while(a);return c}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Qt(a){switch(typeof a){case&quot;bigint&quot;:case&quot;boolean&quot;:case&quot;number&quot;:case&quot;string&quot;:case&quot;undefined&quot;:return a;case&quot;object&quot;:return a;default:return&quot;&quot;}}function $t(a){var c=a.type;return(a=a.nodeName)&amp;&amp;a.toLowerCase()===&quot;input&quot;&amp;&amp;(c===&quot;checkbox&quot;||c===&quot;radio&quot;)}function wt(a){var c=$t(a)?&quot;checked&quot;:&quot;value&quot;,d=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=&quot;&quot;+a[c];if(!a.hasOwnProperty(c)&amp;&amp;typeof d&lt;&quot;u&quot;&amp;&amp;typeof d.get==&quot;function&quot;&amp;&amp;typeof d.set==&quot;function&quot;){var S=d.get,M=d.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return S.call(this)},set:function(U){y=&quot;&quot;+U,M.call(this,U)}}),Object.defineProperty(a,c,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(U){y=&quot;&quot;+U},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Hn(a){a._valueTracker||(a._valueTracker=wt(a))}function rn(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var d=c.getValue(),y=&quot;&quot;;return a&amp;&amp;(y=$t(a)?a.checked?&quot;true&quot;:&quot;false&quot;:a.value),a=y,a!==d?(c.setValue(a),!0):!1}function Jn(a){if(a=a||(typeof document&lt;&quot;u&quot;?document:void 0),typeof a&gt;&quot;u&quot;)return null;try{return a.activeElement||a.body}catch{return a.body}}var Tn=/[\n&quot;\\]/g;function vn(a){return a.replace(Tn,function(c){return&quot;\\&quot;+c.charCodeAt(0).toString(16)+&quot; &quot;})}function Tr(a,c,d,y,S,M,U,W){a.name=&quot;&quot;,U!=null&amp;&amp;typeof U!=&quot;function&quot;&amp;&amp;typeof U!=&quot;symbol&quot;&amp;&amp;typeof U!=&quot;boolean&quot;?a.type=U:a.removeAttribute(&quot;type&quot;),c!=null?U===&quot;number&quot;?(c===0&amp;&amp;a.value===&quot;&quot;||a.value!=c)&amp;&amp;(a.value=&quot;&quot;+Qt(c)):a.value!==&quot;&quot;+Qt(c)&amp;&amp;(a.value=&quot;&quot;+Qt(c)):U!==&quot;submit&quot;&amp;&amp;U!==&quot;reset&quot;||a.removeAttribute(&quot;value&quot;),c!=null?Ni(a,U,Qt(c)):d!=null?Ni(a,U,Qt(d)):y!=null&amp;&amp;a.removeAttribute(&quot;value&quot;),S==null&amp;&amp;M!=null&amp;&amp;(a.defaultChecked=!!M),S!=null&amp;&amp;(a.checked=S&amp;&amp;typeof S!=&quot;function&quot;&amp;&amp;typeof S!=&quot;symbol&quot;),W!=null&amp;&amp;typeof W!=&quot;function&quot;&amp;&amp;typeof W!=&quot;symbol&quot;&amp;&amp;typeof W!=&quot;boolean&quot;?a.name=&quot;&quot;+Qt(W):a.removeAttribute(&quot;name&quot;)}function Mn(a,c,d,y,S,M,U,W){if(M!=null&amp;&amp;typeof M!=&quot;function&quot;&amp;&amp;typeof M!=&quot;symbol&quot;&amp;&amp;typeof M!=&quot;boolean&quot;&amp;&amp;(a.type=M),c!=null||d!=null){if(!(M!==&quot;submit&quot;&amp;&amp;M!==&quot;reset&quot;||c!=null))return;d=d!=null?&quot;&quot;+Qt(d):&quot;&quot;,c=c!=null?&quot;&quot;+Qt(c):d,W||c===a.value||(a.value=c),a.defaultValue=c}y=y??S,y=typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;&amp;&amp;!!y,a.checked=W?a.checked:!!y,a.defaultChecked=!!y,U!=null&amp;&amp;typeof U!=&quot;function&quot;&amp;&amp;typeof U!=&quot;symbol&quot;&amp;&amp;typeof U!=&quot;boolean&quot;&amp;&amp;(a.name=U)}function Ni(a,c,d){c===&quot;number&quot;&amp;&amp;Jn(a.ownerDocument)===a||a.defaultValue===&quot;&quot;+d||(a.defaultValue=&quot;&quot;+d)}function Qn(a,c,d,y){if(a=a.options,c){c={};for(var S=0;S&lt;d.length;S++)c[&quot;$&quot;+d[S]]=!0;for(d=0;d&lt;a.length;d++)S=c.hasOwnProperty(&quot;$&quot;+a[d].value),a[d].selected!==S&amp;&amp;(a[d].selected=S),S&amp;&amp;y&amp;&amp;(a[d].defaultSelected=!0)}else{for(d=&quot;&quot;+Qt(d),c=null,S=0;S&lt;a.length;S++){if(a[S].value===d){a[S].selected=!0,y&amp;&amp;(a[S].defaultSelected=!0);return}c!==null||a[S].disabled||(c=a[S])}c!==null&amp;&amp;(c.selected=!0)}}function ei(a,c,d){if(c!=null&amp;&amp;(c=&quot;&quot;+Qt(c),c!==a.value&amp;&amp;(a.value=c),d==null)){a.defaultValue!==c&amp;&amp;(a.defaultValue=c);return}a.defaultValue=d!=null?&quot;&quot;+Qt(d):&quot;&quot;}function ai(a,c,d,y){if(c==null){if(y!=null){if(d!=null)throw Error(i(92));if(K(y)){if(1&lt;y.length)throw Error(i(93));y=y[0]}d=y}d==null&amp;&amp;(d=&quot;&quot;),c=d}d=Qt(c),a.defaultValue=d,y=a.textContent,y===d&amp;&amp;y!==&quot;&quot;&amp;&amp;y!==null&amp;&amp;(a.value=y)}function zr(a,c){if(c){var d=a.firstChild;if(d&amp;&amp;d===a.lastChild&amp;&amp;d.nodeType===3){d.nodeValue=c;return}}a.textContent=c}var Ds=new Set(&quot;animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp&quot;.split(&quot; &quot;));function Dt(a,c,d){var y=c.indexOf(&quot;--&quot;)===0;d==null||typeof d==&quot;boolean&quot;||d===&quot;&quot;?y?a.setProperty(c,&quot;&quot;):c===&quot;float&quot;?a.cssFloat=&quot;&quot;:a[c]=&quot;&quot;:y?a.setProperty(c,d):typeof d!=&quot;number&quot;||d===0||Ds.has(c)?c===&quot;float&quot;?a.cssFloat=d:a[c]=(&quot;&quot;+d).trim():a[c]=d+&quot;px&quot;}function El(a,c,d){if(c!=null&amp;&amp;typeof c!=&quot;object&quot;)throw Error(i(62));if(a=a.style,d!=null){for(var y in d)!d.hasOwnProperty(y)||c!=null&amp;&amp;c.hasOwnProperty(y)||(y.indexOf(&quot;--&quot;)===0?a.setProperty(y,&quot;&quot;):y===&quot;float&quot;?a.cssFloat=&quot;&quot;:a[y]=&quot;&quot;);for(var S in c)y=c[S],c.hasOwnProperty(S)&amp;&amp;d[S]!==y&amp;&amp;Dt(a,S,y)}else for(var M in c)c.hasOwnProperty(M)&amp;&amp;Dt(a,M,c[M])}function B(a){if(a.indexOf(&quot;-&quot;)===-1)return!1;switch(a){case&quot;annotation-xml&quot;:case&quot;color-profile&quot;:case&quot;font-face&quot;:case&quot;font-face-src&quot;:case&quot;font-face-uri&quot;:case&quot;font-face-format&quot;:case&quot;font-face-name&quot;:case&quot;missing-glyph&quot;:return!1;default:return!0}}var k=new Map([[&quot;acceptCharset&quot;,&quot;accept-charset&quot;],[&quot;htmlFor&quot;,&quot;for&quot;],[&quot;httpEquiv&quot;,&quot;http-equiv&quot;],[&quot;crossOrigin&quot;,&quot;crossorigin&quot;],[&quot;accentHeight&quot;,&quot;accent-height&quot;],[&quot;alignmentBaseline&quot;,&quot;alignment-baseline&quot;],[&quot;arabicForm&quot;,&quot;arabic-form&quot;],[&quot;baselineShift&quot;,&quot;baseline-shift&quot;],[&quot;capHeight&quot;,&quot;cap-height&quot;],[&quot;clipPath&quot;,&quot;clip-path&quot;],[&quot;clipRule&quot;,&quot;clip-rule&quot;],[&quot;colorInterpolation&quot;,&quot;color-interpolation&quot;],[&quot;colorInterpolationFilters&quot;,&quot;color-interpolation-filters&quot;],[&quot;colorProfile&quot;,&quot;color-profile&quot;],[&quot;colorRendering&quot;,&quot;color-rendering&quot;],[&quot;dominantBaseline&quot;,&quot;dominant-baseline&quot;],[&quot;enableBackground&quot;,&quot;enable-background&quot;],[&quot;fillOpacity&quot;,&quot;fill-opacity&quot;],[&quot;fillRule&quot;,&quot;fill-rule&quot;],[&quot;floodColor&quot;,&quot;flood-color&quot;],[&quot;floodOpacity&quot;,&quot;flood-opacity&quot;],[&quot;fontFamily&quot;,&quot;font-family&quot;],[&quot;fontSize&quot;,&quot;font-size&quot;],[&quot;fontSizeAdjust&quot;,&quot;font-size-adjust&quot;],[&quot;fontStretch&quot;,&quot;font-stretch&quot;],[&quot;fontStyle&quot;,&quot;font-style&quot;],[&quot;fontVariant&quot;,&quot;font-variant&quot;],[&quot;fontWeight&quot;,&quot;font-weight&quot;],[&quot;glyphName&quot;,&quot;glyph-name&quot;],[&quot;glyphOrientationHorizontal&quot;,&quot;glyph-orientation-horizontal&quot;],[&quot;glyphOrientationVertical&quot;,&quot;glyph-orientation-vertical&quot;],[&quot;horizAdvX&quot;,&quot;horiz-adv-x&quot;],[&quot;horizOriginX&quot;,&quot;horiz-origin-x&quot;],[&quot;imageRendering&quot;,&quot;image-rendering&quot;],[&quot;letterSpacing&quot;,&quot;letter-spacing&quot;],[&quot;lightingColor&quot;,&quot;lighting-color&quot;],[&quot;markerEnd&quot;,&quot;marker-end&quot;],[&quot;markerMid&quot;,&quot;marker-mid&quot;],[&quot;markerStart&quot;,&quot;marker-start&quot;],[&quot;overlinePosition&quot;,&quot;overline-position&quot;],[&quot;overlineThickness&quot;,&quot;overline-thickness&quot;],[&quot;paintOrder&quot;,&quot;paint-order&quot;],[&quot;panose-1&quot;,&quot;panose-1&quot;],[&quot;pointerEvents&quot;,&quot;pointer-events&quot;],[&quot;renderingIntent&quot;,&quot;rendering-intent&quot;],[&quot;shapeRendering&quot;,&quot;shape-rendering&quot;],[&quot;stopColor&quot;,&quot;stop-color&quot;],[&quot;stopOpacity&quot;,&quot;stop-opacity&quot;],[&quot;strikethroughPosition&quot;,&quot;strikethrough-position&quot;],[&quot;strikethroughThickness&quot;,&quot;strikethrough-thickness&quot;],[&quot;strokeDasharray&quot;,&quot;stroke-dasharray&quot;],[&quot;strokeDashoffset&quot;,&quot;stroke-dashoffset&quot;],[&quot;strokeLinecap&quot;,&quot;stroke-linecap&quot;],[&quot;strokeLinejoin&quot;,&quot;stroke-linejoin&quot;],[&quot;strokeMiterlimit&quot;,&quot;stroke-miterlimit&quot;],[&quot;strokeOpacity&quot;,&quot;stroke-opacity&quot;],[&quot;strokeWidth&quot;,&quot;stroke-width&quot;],[&quot;textAnchor&quot;,&quot;text-anchor&quot;],[&quot;textDecoration&quot;,&quot;text-decoration&quot;],[&quot;textRendering&quot;,&quot;text-rendering&quot;],[&quot;transformOrigin&quot;,&quot;transform-origin&quot;],[&quot;underlinePosition&quot;,&quot;underline-position&quot;],[&quot;underlineThickness&quot;,&quot;underline-thickness&quot;],[&quot;unicodeBidi&quot;,&quot;unicode-bidi&quot;],[&quot;unicodeRange&quot;,&quot;unicode-range&quot;],[&quot;unitsPerEm&quot;,&quot;units-per-em&quot;],[&quot;vAlphabetic&quot;,&quot;v-alphabetic&quot;],[&quot;vHanging&quot;,&quot;v-hanging&quot;],[&quot;vIdeographic&quot;,&quot;v-ideographic&quot;],[&quot;vMathematical&quot;,&quot;v-mathematical&quot;],[&quot;vectorEffect&quot;,&quot;vector-effect&quot;],[&quot;vertAdvY&quot;,&quot;vert-adv-y&quot;],[&quot;vertOriginX&quot;,&quot;vert-origin-x&quot;],[&quot;vertOriginY&quot;,&quot;vert-origin-y&quot;],[&quot;wordSpacing&quot;,&quot;word-spacing&quot;],[&quot;writingMode&quot;,&quot;writing-mode&quot;],[&quot;xmlnsXlink&quot;,&quot;xmlns:xlink&quot;],[&quot;xHeight&quot;,&quot;x-height&quot;]]),$=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function X(a){return $.test(&quot;&quot;+a)?&quot;javascript:throw new Error(&#x27;React has blocked a javascript: URL as a security precaution.&#x27;)&quot;:a}var J=null;function Te(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&amp;&amp;(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Re=null,ot=null;function Ke(a){var c=Er(a);if(c&amp;&amp;(a=c.stateNode)){var d=a[pi]||null;e:switch(a=c.stateNode,c.type){case&quot;input&quot;:if(Tr(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),c=d.name,d.type===&quot;radio&quot;&amp;&amp;c!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll(&#x27;input[name=&quot;&#x27;+vn(&quot;&quot;+c)+&#x27;&quot;][type=&quot;radio&quot;]&#x27;),c=0;c&lt;d.length;c++){var y=d[c];if(y!==a&amp;&amp;y.form===a.form){var S=y[pi]||null;if(!S)throw Error(i(90));Tr(y,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(c=0;c&lt;d.length;c++)y=d[c],y.form===a.form&amp;&amp;rn(y)}break e;case&quot;textarea&quot;:ei(a,d.value,d.defaultValue);break e;case&quot;select&quot;:c=d.value,c!=null&amp;&amp;Qn(a,!!d.multiple,c,!1)}}}var nt=!1;function xt(a,c,d){if(nt)return a(c,d);nt=!0;try{var y=a(c);return y}finally{if(nt=!1,(Re!==null||ot!==null)&amp;&amp;(kp(),Re&amp;&amp;(c=Re,a=ot,ot=Re=null,Ke(c),a)))for(c=0;c&lt;a.length;c++)Ke(a[c])}}function Be(a,c){var d=a.stateNode;if(d===null)return null;var y=d[pi]||null;if(y===null)return null;d=y[c];e:switch(c){case&quot;onClick&quot;:case&quot;onClickCapture&quot;:case&quot;onDoubleClick&quot;:case&quot;onDoubleClickCapture&quot;:case&quot;onMouseDown&quot;:case&quot;onMouseDownCapture&quot;:case&quot;onMouseMove&quot;:case&quot;onMouseMoveCapture&quot;:case&quot;onMouseUp&quot;:case&quot;onMouseUpCapture&quot;:case&quot;onMouseEnter&quot;:(y=!y.disabled)||(a=a.type,y=!(a===&quot;button&quot;||a===&quot;input&quot;||a===&quot;select&quot;||a===&quot;textarea&quot;)),a=!y;break e;default:a=!1}if(a)return null;if(d&amp;&amp;typeof d!=&quot;function&quot;)throw Error(i(231,c,typeof d));return d}var pt=!(typeof window&gt;&quot;u&quot;||typeof window.document&gt;&quot;u&quot;||typeof window.document.createElement&gt;&quot;u&quot;),gt=!1;if(pt)try{var Tt={};Object.defineProperty(Tt,&quot;passive&quot;,{get:function(){gt=!0}}),window.addEventListener(&quot;test&quot;,Tt,Tt),window.removeEventListener(&quot;test&quot;,Tt,Tt)}catch{gt=!1}var _t=null,Fn=null,dn=null;function hn(){if(dn)return dn;var a,c=Fn,d=c.length,y,S=&quot;value&quot;in _t?_t.value:_t.textContent,M=S.length;for(a=0;a&lt;d&amp;&amp;c[a]===S[a];a++);var U=d-a;for(y=1;y&lt;=U&amp;&amp;c[d-y]===S[M-y];y++);return dn=S.slice(a,1&lt;y?1-y:void 0)}function sn(a){var c=a.keyCode;return&quot;charCode&quot;in a?(a=a.charCode,a===0&amp;&amp;c===13&amp;&amp;(a=13)):a=c,a===10&amp;&amp;(a=13),32&lt;=a||a===13?a:0}function Mr(){return!0}function Qi(){return!1}function mi(a){function c(d,y,S,M,U){this._reactName=d,this._targetInst=S,this.type=y,this.nativeEvent=M,this.target=U,this.currentTarget=null;for(var W in a)a.hasOwnProperty(W)&amp;&amp;(d=a[W],this[W]=d?d(M):M[W]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Mr:Qi,this.isPropagationStopped=Qi,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&amp;&amp;(d.preventDefault?d.preventDefault():typeof d.returnValue!=&quot;unknown&quot;&amp;&amp;(d.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var d=this.nativeEvent;d&amp;&amp;(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!=&quot;unknown&quot;&amp;&amp;(d.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),c}var Ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tl=mi(Ro),Ih=f({},Ro,{view:0,detail:0}),v3=mi(Ih),u_,h_,Ph,ip=f({},Ih,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d_,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return&quot;movementX&quot;in a?a.movementX:(a!==Ph&amp;&amp;(Ph&amp;&amp;a.type===&quot;mousemove&quot;?(u_=a.screenX-Ph.screenX,h_=a.screenY-Ph.screenY):h_=u_=0,Ph=a),u_)},movementY:function(a){return&quot;movementY&quot;in a?a.movementY:h_}}),d1=mi(ip),b3=f({},ip,{dataTransfer:0}),x3=mi(b3),S3=f({},Ih,{relatedTarget:0}),f_=mi(S3),w3=f({},Ro,{animationName:0,elapsedTime:0,pseudoElement:0}),E3=mi(w3),T3=f({},Ro,{clipboardData:function(a){return&quot;clipboardData&quot;in a?a.clipboardData:window.clipboardData}}),M3=mi(T3),A3=f({},Ro,{data:0}),p1=mi(A3),C3={Esc:&quot;Escape&quot;,Spacebar:&quot; &quot;,Left:&quot;ArrowLeft&quot;,Up:&quot;ArrowUp&quot;,Right:&quot;ArrowRight&quot;,Down:&quot;ArrowDown&quot;,Del:&quot;Delete&quot;,Win:&quot;OS&quot;,Menu:&quot;ContextMenu&quot;,Apps:&quot;ContextMenu&quot;,Scroll:&quot;ScrollLock&quot;,MozPrintableKey:&quot;Unidentified&quot;},R3={8:&quot;Backspace&quot;,9:&quot;Tab&quot;,12:&quot;Clear&quot;,13:&quot;Enter&quot;,16:&quot;Shift&quot;,17:&quot;Control&quot;,18:&quot;Alt&quot;,19:&quot;Pause&quot;,20:&quot;CapsLock&quot;,27:&quot;Escape&quot;,32:&quot; &quot;,33:&quot;PageUp&quot;,34:&quot;PageDown&quot;,35:&quot;End&quot;,36:&quot;Home&quot;,37:&quot;ArrowLeft&quot;,38:&quot;ArrowUp&quot;,39:&quot;ArrowRight&quot;,40:&quot;ArrowDown&quot;,45:&quot;Insert&quot;,46:&quot;Delete&quot;,112:&quot;F1&quot;,113:&quot;F2&quot;,114:&quot;F3&quot;,115:&quot;F4&quot;,116:&quot;F5&quot;,117:&quot;F6&quot;,118:&quot;F7&quot;,119:&quot;F8&quot;,120:&quot;F9&quot;,121:&quot;F10&quot;,122:&quot;F11&quot;,123:&quot;F12&quot;,144:&quot;NumLock&quot;,145:&quot;ScrollLock&quot;,224:&quot;Meta&quot;},O3={Alt:&quot;altKey&quot;,Control:&quot;ctrlKey&quot;,Meta:&quot;metaKey&quot;,Shift:&quot;shiftKey&quot;};function D3(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=O3[a])?!!c[a]:!1}function d_(){return D3}var N3=f({},Ih,{key:function(a){if(a.key){var c=C3[a.key]||a.key;if(c!==&quot;Unidentified&quot;)return c}return a.type===&quot;keypress&quot;?(a=sn(a),a===13?&quot;Enter&quot;:String.fromCharCode(a)):a.type===&quot;keydown&quot;||a.type===&quot;keyup&quot;?R3[a.keyCode]||&quot;Unidentified&quot;:&quot;&quot;},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d_,charCode:function(a){return a.type===&quot;keypress&quot;?sn(a):0},keyCode:function(a){return a.type===&quot;keydown&quot;||a.type===&quot;keyup&quot;?a.keyCode:0},which:function(a){return a.type===&quot;keypress&quot;?sn(a):a.type===&quot;keydown&quot;||a.type===&quot;keyup&quot;?a.keyCode:0}}),I3=mi(N3),P3=f({},ip,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m1=mi(P3),L3=f({},Ih,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d_}),U3=mi(L3),k3=f({},Ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),F3=mi(k3),z3=f({},ip,{deltaX:function(a){return&quot;deltaX&quot;in a?a.deltaX:&quot;wheelDeltaX&quot;in a?-a.wheelDeltaX:0},deltaY:function(a){return&quot;deltaY&quot;in a?a.deltaY:&quot;wheelDeltaY&quot;in a?-a.wheelDeltaY:&quot;wheelDelta&quot;in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),B3=mi(z3),H3=f({},Ro,{newState:0,oldState:0}),V3=mi(H3),G3=[9,13,27,32],p_=pt&amp;&amp;&quot;CompositionEvent&quot;in window,Lh=null;pt&amp;&amp;&quot;documentMode&quot;in document&amp;&amp;(Lh=document.documentMode);var j3=pt&amp;&amp;&quot;TextEvent&quot;in window&amp;&amp;!Lh,g1=pt&amp;&amp;(!p_||Lh&amp;&amp;8&lt;Lh&amp;&amp;11&gt;=Lh),y1=&quot; &quot;,_1=!1;function v1(a,c){switch(a){case&quot;keyup&quot;:return G3.indexOf(c.keyCode)!==-1;case&quot;keydown&quot;:return c.keyCode!==229;case&quot;keypress&quot;:case&quot;mousedown&quot;:case&quot;focusout&quot;:return!0;default:return!1}}function b1(a){return a=a.detail,typeof a==&quot;object&quot;&amp;&amp;&quot;data&quot;in a?a.data:null}var Vc=!1;function W3(a,c){switch(a){case&quot;compositionend&quot;:return b1(c);case&quot;keypress&quot;:return c.which!==32?null:(_1=!0,y1);case&quot;textInput&quot;:return a=c.data,a===y1&amp;&amp;_1?null:a;default:return null}}function X3(a,c){if(Vc)return a===&quot;compositionend&quot;||!p_&amp;&amp;v1(a,c)?(a=hn(),dn=Fn=_t=null,Vc=!1,a):null;switch(a){case&quot;paste&quot;:return null;case&quot;keypress&quot;:if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&amp;&amp;c.altKey){if(c.char&amp;&amp;1&lt;c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case&quot;compositionend&quot;:return g1&amp;&amp;c.locale!==&quot;ko&quot;?null:c.data;default:return null}}var q3={color:!0,date:!0,datetime:!0,&quot;datetime-local&quot;:!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x1(a){var c=a&amp;&amp;a.nodeName&amp;&amp;a.nodeName.toLowerCase();return c===&quot;input&quot;?!!q3[a.type]:c===&quot;textarea&quot;}function S1(a,c,d,y){Re?ot?ot.push(y):ot=[y]:Re=y,c=Gp(c,&quot;onChange&quot;),0&lt;c.length&amp;&amp;(d=new Tl(&quot;onChange&quot;,&quot;change&quot;,null,d,y),a.push({event:d,listeners:c}))}var Uh=null,kh=null;function Y3(a){nM(a,0)}function rp(a){var c=Os(a);if(rn(c))return a}function w1(a,c){if(a===&quot;change&quot;)return c}var E1=!1;if(pt){var m_;if(pt){var g_=&quot;oninput&quot;in document;if(!g_){var T1=document.createElement(&quot;div&quot;);T1.setAttribute(&quot;oninput&quot;,&quot;return;&quot;),g_=typeof T1.oninput==&quot;function&quot;}m_=g_}else m_=!1;E1=m_&amp;&amp;(!document.documentMode||9&lt;document.documentMode)}function M1(){Uh&amp;&amp;(Uh.detachEvent(&quot;onpropertychange&quot;,A1),kh=Uh=null)}function A1(a){if(a.propertyName===&quot;value&quot;&amp;&amp;rp(kh)){var c=[];S1(c,kh,a,Te(a)),xt(Y3,c)}}function K3(a,c,d){a===&quot;focusin&quot;?(M1(),Uh=c,kh=d,Uh.attachEvent(&quot;onpropertychange&quot;,A1)):a===&quot;focusout&quot;&amp;&amp;M1()}function $3(a){if(a===&quot;selectionchange&quot;||a===&quot;keyup&quot;||a===&quot;keydown&quot;)return rp(kh)}function Z3(a,c){if(a===&quot;click&quot;)return rp(c)}function J3(a,c){if(a===&quot;input&quot;||a===&quot;change&quot;)return rp(c)}function Q3(a,c){return a===c&amp;&amp;(a!==0||1/a===1/c)||a!==a&amp;&amp;c!==c}var Br=typeof Object.is==&quot;function&quot;?Object.is:Q3;function Fh(a,c){if(Br(a,c))return!0;if(typeof a!=&quot;object&quot;||a===null||typeof c!=&quot;object&quot;||c===null)return!1;var d=Object.keys(a),y=Object.keys(c);if(d.length!==y.length)return!1;for(y=0;y&lt;d.length;y++){var S=d[y];if(!We.call(c,S)||!Br(a[S],c[S]))return!1}return!0}function C1(a){for(;a&amp;&amp;a.firstChild;)a=a.firstChild;return a}function R1(a,c){var d=C1(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a&lt;=c&amp;&amp;y&gt;=c)return{node:d,offset:c-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=C1(d)}}function O1(a,c){return a&amp;&amp;c?a===c?!0:a&amp;&amp;a.nodeType===3?!1:c&amp;&amp;c.nodeType===3?O1(a,c.parentNode):&quot;contains&quot;in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&amp;16):!1:!1}function D1(a){a=a!=null&amp;&amp;a.ownerDocument!=null&amp;&amp;a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=Jn(a.document);c instanceof a.HTMLIFrameElement;){try{var d=typeof c.contentWindow.location.href==&quot;string&quot;}catch{d=!1}if(d)a=c.contentWindow;else break;c=Jn(a.document)}return c}function y_(a){var c=a&amp;&amp;a.nodeName&amp;&amp;a.nodeName.toLowerCase();return c&amp;&amp;(c===&quot;input&quot;&amp;&amp;(a.type===&quot;text&quot;||a.type===&quot;search&quot;||a.type===&quot;tel&quot;||a.type===&quot;url&quot;||a.type===&quot;password&quot;)||c===&quot;textarea&quot;||a.contentEditable===&quot;true&quot;)}var eU=pt&amp;&amp;&quot;documentMode&quot;in document&amp;&amp;11&gt;=document.documentMode,Gc=null,__=null,zh=null,v_=!1;function N1(a,c,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;v_||Gc==null||Gc!==Jn(y)||(y=Gc,&quot;selectionStart&quot;in y&amp;&amp;y_(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&amp;&amp;y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),zh&amp;&amp;Fh(zh,y)||(zh=y,y=Gp(__,&quot;onSelect&quot;),0&lt;y.length&amp;&amp;(c=new Tl(&quot;onSelect&quot;,&quot;select&quot;,null,c,d),a.push({event:c,listeners:y}),c.target=Gc)))}function Ml(a,c){var d={};return d[a.toLowerCase()]=c.toLowerCase(),d[&quot;Webkit&quot;+a]=&quot;webkit&quot;+c,d[&quot;Moz&quot;+a]=&quot;moz&quot;+c,d}var jc={animationend:Ml(&quot;Animation&quot;,&quot;AnimationEnd&quot;),animationiteration:Ml(&quot;Animation&quot;,&quot;AnimationIteration&quot;),animationstart:Ml(&quot;Animation&quot;,&quot;AnimationStart&quot;),transitionrun:Ml(&quot;Transition&quot;,&quot;TransitionRun&quot;),transitionstart:Ml(&quot;Transition&quot;,&quot;TransitionStart&quot;),transitioncancel:Ml(&quot;Transition&quot;,&quot;TransitionCancel&quot;),transitionend:Ml(&quot;Transition&quot;,&quot;TransitionEnd&quot;)},b_={},I1={};pt&amp;&amp;(I1=document.createElement(&quot;div&quot;).style,&quot;AnimationEvent&quot;in window||(delete jc.animationend.animation,delete jc.animationiteration.animation,delete jc.animationstart.animation),&quot;TransitionEvent&quot;in window||delete jc.transitionend.transition);function Al(a){if(b_[a])return b_[a];if(!jc[a])return a;var c=jc[a],d;for(d in c)if(c.hasOwnProperty(d)&amp;&amp;d in I1)return b_[a]=c[d];return a}var P1=Al(&quot;animationend&quot;),L1=Al(&quot;animationiteration&quot;),U1=Al(&quot;animationstart&quot;),tU=Al(&quot;transitionrun&quot;),nU=Al(&quot;transitionstart&quot;),iU=Al(&quot;transitioncancel&quot;),k1=Al(&quot;transitionend&quot;),F1=new Map,x_=&quot;abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel&quot;.split(&quot; &quot;);x_.push(&quot;scrollEnd&quot;);function Ns(a,c){F1.set(a,c),Fr(c,[a])}var z1=new WeakMap;function ls(a,c){if(typeof a==&quot;object&quot;&amp;&amp;a!==null){var d=z1.get(a);return d!==void 0?d:(c={value:a,source:c,stack:In(c)},z1.set(a,c),c)}return{value:a,source:c,stack:In(c)}}var cs=[],Wc=0,S_=0;function sp(){for(var a=Wc,c=S_=Wc=0;c&lt;a;){var d=cs[c];cs[c++]=null;var y=cs[c];cs[c++]=null;var S=cs[c];cs[c++]=null;var M=cs[c];if(cs[c++]=null,y!==null&amp;&amp;S!==null){var U=y.pending;U===null?S.next=S:(S.next=U.next,U.next=S),y.pending=S}M!==0&amp;&amp;B1(d,S,M)}}function op(a,c,d,y){cs[Wc++]=a,cs[Wc++]=c,cs[Wc++]=d,cs[Wc++]=y,S_|=y,a.lanes|=y,a=a.alternate,a!==null&amp;&amp;(a.lanes|=y)}function w_(a,c,d,y){return op(a,c,d,y),ap(a)}function Xc(a,c){return op(a,null,null,c),ap(a)}function B1(a,c,d){a.lanes|=d;var y=a.alternate;y!==null&amp;&amp;(y.lanes|=d);for(var S=!1,M=a.return;M!==null;)M.childLanes|=d,y=M.alternate,y!==null&amp;&amp;(y.childLanes|=d),M.tag===22&amp;&amp;(a=M.stateNode,a===null||a._visibility&amp;1||(S=!0)),a=M,M=M.return;return a.tag===3?(M=a.stateNode,S&amp;&amp;c!==null&amp;&amp;(S=31-ut(d),a=M.hiddenUpdates,y=a[S],y===null?a[S]=[c]:y.push(c),c.lane=d|536870912),M):null}function ap(a){if(50&lt;hf)throw hf=0,Rv=null,Error(i(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var qc={};function rU(a,c,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(a,c,d,y){return new rU(a,c,d,y)}function E_(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Oo(a,c){var d=a.alternate;return d===null?(d=Hr(a.tag,c,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=c,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&amp;65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,c=a.dependencies,d.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function H1(a,c){a.flags&amp;=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,c=d.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function lp(a,c,d,y,S,M){var U=0;if(y=a,typeof a==&quot;function&quot;)E_(a)&amp;&amp;(U=1);else if(typeof a==&quot;string&quot;)U=ok(a,d,ie.current)?26:a===&quot;html&quot;||a===&quot;head&quot;||a===&quot;body&quot;?27:5;else e:switch(a){case C:return a=Hr(31,d,c,S),a.elementType=C,a.lanes=M,a;case v:return Cl(d.children,S,M,c);case x:U=8,S|=24;break;case b:return a=Hr(12,d,c,S|2),a.elementType=b,a.lanes=M,a;case R:return a=Hr(13,d,c,S),a.elementType=R,a.lanes=M,a;case N:return a=Hr(19,d,c,S),a.elementType=N,a.lanes=M,a;default:if(typeof a==&quot;object&quot;&amp;&amp;a!==null)switch(a.$$typeof){case _:case w:U=10;break e;case T:U=9;break e;case E:U=11;break e;case A:U=14;break e;case D:U=16,y=null;break e}U=29,d=Error(i(130,a===null?&quot;null&quot;:typeof a,&quot;&quot;)),y=null}return c=Hr(U,d,c,S),c.elementType=a,c.type=y,c.lanes=M,c}function Cl(a,c,d,y){return a=Hr(7,a,y,c),a.lanes=d,a}function T_(a,c,d){return a=Hr(6,a,null,c),a.lanes=d,a}function M_(a,c,d){return c=Hr(4,a.children!==null?a.children:[],a.key,c),c.lanes=d,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Yc=[],Kc=0,cp=null,up=0,us=[],hs=0,Rl=null,Do=1,No=&quot;&quot;;function Ol(a,c){Yc[Kc++]=up,Yc[Kc++]=cp,cp=a,up=c}function V1(a,c,d){us[hs++]=Do,us[hs++]=No,us[hs++]=Rl,Rl=a;var y=Do;a=No;var S=32-ut(y)-1;y&amp;=~(1&lt;&lt;S),d+=1;var M=32-ut(c)+S;if(30&lt;M){var U=S-S%5;M=(y&amp;(1&lt;&lt;U)-1).toString(32),y&gt;&gt;=U,S-=U,Do=1&lt;&lt;32-ut(c)+S|d&lt;&lt;S|y,No=M+a}else Do=1&lt;&lt;M|d&lt;&lt;S|y,No=a}function A_(a){a.return!==null&amp;&amp;(Ol(a,1),V1(a,1,0))}function C_(a){for(;a===cp;)cp=Yc[--Kc],Yc[Kc]=null,up=Yc[--Kc],Yc[Kc]=null;for(;a===Rl;)Rl=us[--hs],us[hs]=null,No=us[--hs],us[hs]=null,Do=us[--hs],us[hs]=null}var dr=null,li=null,En=!1,Dl=null,no=!1,R_=Error(i(519));function Nl(a){var c=Error(i(418,&quot;&quot;));throw Vh(ls(c,a)),R_}function G1(a){var c=a.stateNode,d=a.type,y=a.memoizedProps;switch(c[Zn]=a,c[pi]=y,d){case&quot;dialog&quot;:an(&quot;cancel&quot;,c),an(&quot;close&quot;,c);break;case&quot;iframe&quot;:case&quot;object&quot;:case&quot;embed&quot;:an(&quot;load&quot;,c);break;case&quot;video&quot;:case&quot;audio&quot;:for(d=0;d&lt;df.length;d++)an(df[d],c);break;case&quot;source&quot;:an(&quot;error&quot;,c);break;case&quot;img&quot;:case&quot;image&quot;:case&quot;link&quot;:an(&quot;error&quot;,c),an(&quot;load&quot;,c);break;case&quot;details&quot;:an(&quot;toggle&quot;,c);break;case&quot;input&quot;:an(&quot;invalid&quot;,c),Mn(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Hn(c);break;case&quot;select&quot;:an(&quot;invalid&quot;,c);break;case&quot;textarea&quot;:an(&quot;invalid&quot;,c),ai(c,y.value,y.defaultValue,y.children),Hn(c)}d=y.children,typeof d!=&quot;string&quot;&amp;&amp;typeof d!=&quot;number&quot;&amp;&amp;typeof d!=&quot;bigint&quot;||c.textContent===&quot;&quot;+d||y.suppressHydrationWarning===!0||oM(c.textContent,d)?(y.popover!=null&amp;&amp;(an(&quot;beforetoggle&quot;,c),an(&quot;toggle&quot;,c)),y.onScroll!=null&amp;&amp;an(&quot;scroll&quot;,c),y.onScrollEnd!=null&amp;&amp;an(&quot;scrollend&quot;,c),y.onClick!=null&amp;&amp;(c.onclick=jp),c=!0):c=!1,c||Nl(a)}function j1(a){for(dr=a.return;dr;)switch(dr.tag){case 5:case 13:no=!1;return;case 27:case 3:no=!0;return;default:dr=dr.return}}function Bh(a){if(a!==dr)return!1;if(!En)return j1(a),En=!0,!1;var c=a.tag,d;if((d=c!==3&amp;&amp;c!==27)&amp;&amp;((d=c===5)&amp;&amp;(d=a.type,d=!(d!==&quot;form&quot;&amp;&amp;d!==&quot;button&quot;)||Wv(a.type,a.memoizedProps)),d=!d),d&amp;&amp;li&amp;&amp;Nl(a),j1(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(d=a.data,d===&quot;/$&quot;){if(c===0){li=Ps(a.nextSibling);break e}c--}else d!==&quot;$&quot;&amp;&amp;d!==&quot;$!&quot;&amp;&amp;d!==&quot;$?&quot;||c++;a=a.nextSibling}li=null}}else c===27?(c=li,La(a.type)?(a=Kv,Kv=null,li=a):li=c):li=dr?Ps(a.stateNode.nextSibling):null;return!0}function Hh(){li=dr=null,En=!1}function W1(){var a=Dl;return a!==null&amp;&amp;(Rr===null?Rr=a:Rr.push.apply(Rr,a),Dl=null),a}function Vh(a){Dl===null?Dl=[a]:Dl.push(a)}var O_=ne(null),Il=null,Io=null;function ba(a,c,d){ce(O_,c._currentValue),c._currentValue=d}function Po(a){a._currentValue=O_.current,le(O_)}function D_(a,c,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&amp;c)!==c?(a.childLanes|=c,y!==null&amp;&amp;(y.childLanes|=c)):y!==null&amp;&amp;(y.childLanes&amp;c)!==c&amp;&amp;(y.childLanes|=c),a===d)break;a=a.return}}function N_(a,c,d,y){var S=a.child;for(S!==null&amp;&amp;(S.return=a);S!==null;){var M=S.dependencies;if(M!==null){var U=S.child;M=M.firstContext;e:for(;M!==null;){var W=M;M=S;for(var se=0;se&lt;c.length;se++)if(W.context===c[se]){M.lanes|=d,W=M.alternate,W!==null&amp;&amp;(W.lanes|=d),D_(M.return,d,a),y||(U=null);break e}M=W.next}}else if(S.tag===18){if(U=S.return,U===null)throw Error(i(341));U.lanes|=d,M=U.alternate,M!==null&amp;&amp;(M.lanes|=d),D_(U,d,a),U=null}else U=S.child;if(U!==null)U.return=S;else for(U=S;U!==null;){if(U===a){U=null;break}if(S=U.sibling,S!==null){S.return=U.return,U=S;break}U=U.return}S=U}}function Gh(a,c,d,y){a=null;for(var S=c,M=!1;S!==null;){if(!M){if((S.flags&amp;524288)!==0)M=!0;else if((S.flags&amp;262144)!==0)break}if(S.tag===10){var U=S.alternate;if(U===null)throw Error(i(387));if(U=U.memoizedProps,U!==null){var W=S.type;Br(S.pendingProps.value,U.value)||(a!==null?a.push(W):a=[W])}}else if(S===ue.current){if(U=S.alternate,U===null)throw Error(i(387));U.memoizedState.memoizedState!==S.memoizedState.memoizedState&amp;&amp;(a!==null?a.push(vf):a=[vf])}S=S.return}a!==null&amp;&amp;N_(c,a,d,y),c.flags|=262144}function hp(a){for(a=a.firstContext;a!==null;){if(!Br(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Pl(a){Il=a,Io=null,a=a.dependencies,a!==null&amp;&amp;(a.firstContext=null)}function sr(a){return X1(Il,a)}function fp(a,c){return Il===null&amp;&amp;Pl(a),X1(a,c)}function X1(a,c){var d=c._currentValue;if(c={context:c,memoizedValue:d,next:null},Io===null){if(a===null)throw Error(i(308));Io=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Io=Io.next=c;return d}var sU=typeof AbortController&lt;&quot;u&quot;?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(d,y){a.push(y)}};this.abort=function(){c.aborted=!0,a.forEach(function(d){return d()})}},oU=n.unstable_scheduleCallback,aU=n.unstable_NormalPriority,Ii={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function I_(){return{controller:new sU,data:new Map,refCount:0}}function jh(a){a.refCount--,a.refCount===0&amp;&amp;oU(aU,function(){a.controller.abort()})}var Wh=null,P_=0,$c=0,Zc=null;function lU(a,c){if(Wh===null){var d=Wh=[];P_=0,$c=Uv(),Zc={status:&quot;pending&quot;,value:void 0,then:function(y){d.push(y)}}}return P_++,c.then(q1,q1),c}function q1(){if(--P_===0&amp;&amp;Wh!==null){Zc!==null&amp;&amp;(Zc.status=&quot;fulfilled&quot;);var a=Wh;Wh=null,$c=0,Zc=null;for(var c=0;c&lt;a.length;c++)(0,a[c])()}}function cU(a,c){var d=[],y={status:&quot;pending&quot;,value:null,reason:null,then:function(S){d.push(S)}};return a.then(function(){y.status=&quot;fulfilled&quot;,y.value=c;for(var S=0;S&lt;d.length;S++)(0,d[S])(c)},function(S){for(y.status=&quot;rejected&quot;,y.reason=S,S=0;S&lt;d.length;S++)(0,d[S])(void 0)}),y}var Y1=I.S;I.S=function(a,c){typeof c==&quot;object&quot;&amp;&amp;c!==null&amp;&amp;typeof c.then==&quot;function&quot;&amp;&amp;lU(a,c),Y1!==null&amp;&amp;Y1(a,c)};var Ll=ne(null);function L_(){var a=Ll.current;return a!==null?a:Vn.pooledCache}function dp(a,c){c===null?ce(Ll,Ll.current):ce(Ll,c.pool)}function K1(){var a=L_();return a===null?null:{parent:Ii._currentValue,pool:a}}var Xh=Error(i(460)),$1=Error(i(474)),pp=Error(i(542)),U_={then:function(){}};function Z1(a){return a=a.status,a===&quot;fulfilled&quot;||a===&quot;rejected&quot;}function mp(){}function J1(a,c,d){switch(d=a[d],d===void 0?a.push(c):d!==c&amp;&amp;(c.then(mp,mp),c=d),c.status){case&quot;fulfilled&quot;:return c.value;case&quot;rejected&quot;:throw a=c.reason,eE(a),a;default:if(typeof c.status==&quot;string&quot;)c.then(mp,mp);else{if(a=Vn,a!==null&amp;&amp;100&lt;a.shellSuspendCounter)throw Error(i(482));a=c,a.status=&quot;pending&quot;,a.then(function(y){if(c.status===&quot;pending&quot;){var S=c;S.status=&quot;fulfilled&quot;,S.value=y}},function(y){if(c.status===&quot;pending&quot;){var S=c;S.status=&quot;rejected&quot;,S.reason=y}})}switch(c.status){case&quot;fulfilled&quot;:return c.value;case&quot;rejected&quot;:throw a=c.reason,eE(a),a}throw qh=c,Xh}}var qh=null;function Q1(){if(qh===null)throw Error(i(459));var a=qh;return qh=null,a}function eE(a){if(a===Xh||a===pp)throw Error(i(483))}var xa=!1;function k_(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function F_(a,c){a=a.updateQueue,c.updateQueue===a&amp;&amp;(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Sa(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function wa(a,c,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Cn&amp;2)!==0){var S=y.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),y.pending=c,c=ap(a),B1(a,null,d),c}return op(a,y,c,d),ap(a)}function Yh(a,c,d){if(c=c.updateQueue,c!==null&amp;&amp;(c=c.shared,(d&amp;4194048)!==0)){var y=c.lanes;y&amp;=a.pendingLanes,d|=y,c.lanes=d,Ut(a,d)}}function z_(a,c){var d=a.updateQueue,y=a.alternate;if(y!==null&amp;&amp;(y=y.updateQueue,d===y)){var S=null,M=null;if(d=d.firstBaseUpdate,d!==null){do{var U={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};M===null?S=M=U:M=M.next=U,d=d.next}while(d!==null);M===null?S=M=c:M=M.next=c}else S=M=c;d={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:M,shared:y.shared,callbacks:y.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=c}var B_=!1;function Kh(){if(B_){var a=Zc;if(a!==null)throw a}}function $h(a,c,d,y){B_=!1;var S=a.updateQueue;xa=!1;var M=S.firstBaseUpdate,U=S.lastBaseUpdate,W=S.shared.pending;if(W!==null){S.shared.pending=null;var se=W,_e=se.next;se.next=null,U===null?M=_e:U.next=_e,U=se;var De=a.alternate;De!==null&amp;&amp;(De=De.updateQueue,W=De.lastBaseUpdate,W!==U&amp;&amp;(W===null?De.firstBaseUpdate=_e:W.next=_e,De.lastBaseUpdate=se))}if(M!==null){var ke=S.baseState;U=0,De=_e=se=null,W=M;do{var xe=W.lane&amp;-536870913,Ee=xe!==W.lane;if(Ee?(pn&amp;xe)===xe:(y&amp;xe)===xe){xe!==0&amp;&amp;xe===$c&amp;&amp;(B_=!0),De!==null&amp;&amp;(De=De.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var kt=a,Nt=W;xe=c;var Un=d;switch(Nt.tag){case 1:if(kt=Nt.payload,typeof kt==&quot;function&quot;){ke=kt.call(Un,ke,xe);break e}ke=kt;break e;case 3:kt.flags=kt.flags&amp;-65537|128;case 0:if(kt=Nt.payload,xe=typeof kt==&quot;function&quot;?kt.call(Un,ke,xe):kt,xe==null)break e;ke=f({},ke,xe);break e;case 2:xa=!0}}xe=W.callback,xe!==null&amp;&amp;(a.flags|=64,Ee&amp;&amp;(a.flags|=8192),Ee=S.callbacks,Ee===null?S.callbacks=[xe]:Ee.push(xe))}else Ee={lane:xe,tag:W.tag,payload:W.payload,callback:W.callback,next:null},De===null?(_e=De=Ee,se=ke):De=De.next=Ee,U|=xe;if(W=W.next,W===null){if(W=S.shared.pending,W===null)break;Ee=W,W=Ee.next,Ee.next=null,S.lastBaseUpdate=Ee,S.shared.pending=null}}while(!0);De===null&amp;&amp;(se=ke),S.baseState=se,S.firstBaseUpdate=_e,S.lastBaseUpdate=De,M===null&amp;&amp;(S.shared.lanes=0),Da|=U,a.lanes=U,a.memoizedState=ke}}function tE(a,c){if(typeof a!=&quot;function&quot;)throw Error(i(191,a));a.call(c)}function nE(a,c){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a&lt;d.length;a++)tE(d[a],c)}var Jc=ne(null),gp=ne(0);function iE(a,c){a=Ho,ce(gp,a),ce(Jc,c),Ho=a|c.baseLanes}function H_(){ce(gp,Ho),ce(Jc,Jc.current)}function V_(){Ho=gp.current,le(Jc),le(gp)}var Ea=0,en=null,Pn=null,Ti=null,yp=!1,Qc=!1,Ul=!1,_p=0,Zh=0,eu=null,uU=0;function gi(){throw Error(i(321))}function G_(a,c){if(c===null)return!1;for(var d=0;d&lt;c.length&amp;&amp;d&lt;a.length;d++)if(!Br(a[d],c[d]))return!1;return!0}function j_(a,c,d,y,S,M){return Ea=M,en=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,I.H=a===null||a.memoizedState===null?BE:HE,Ul=!1,M=d(y,S),Ul=!1,Qc&amp;&amp;(M=sE(c,d,y,S)),rE(a),M}function rE(a){I.H=Ep;var c=Pn!==null&amp;&amp;Pn.next!==null;if(Ea=0,Ti=Pn=en=null,yp=!1,Zh=0,eu=null,c)throw Error(i(300));a===null||Vi||(a=a.dependencies,a!==null&amp;&amp;hp(a)&amp;&amp;(Vi=!0))}function sE(a,c,d,y){en=a;var S=0;do{if(Qc&amp;&amp;(eu=null),Zh=0,Qc=!1,25&lt;=S)throw Error(i(301));if(S+=1,Ti=Pn=null,a.updateQueue!=null){var M=a.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&amp;&amp;(M.memoCache.index=0)}I.H=yU,M=c(d,y)}while(Qc);return M}function hU(){var a=I.H,c=a.useState()[0];return c=typeof c.then==&quot;function&quot;?Jh(c):c,a=a.useState()[0],(Pn!==null?Pn.memoizedState:null)!==a&amp;&amp;(en.flags|=1024),c}function W_(){var a=_p!==0;return _p=0,a}function X_(a,c,d){c.updateQueue=a.updateQueue,c.flags&amp;=-2053,a.lanes&amp;=~d}function q_(a){if(yp){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&amp;&amp;(c.pending=null),a=a.next}yp=!1}Ea=0,Ti=Pn=en=null,Qc=!1,Zh=_p=0,eu=null}function Ar(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?en.memoizedState=Ti=a:Ti=Ti.next=a,Ti}function Mi(){if(Pn===null){var a=en.alternate;a=a!==null?a.memoizedState:null}else a=Pn.next;var c=Ti===null?en.memoizedState:Ti.next;if(c!==null)Ti=c,Pn=a;else{if(a===null)throw en.alternate===null?Error(i(467)):Error(i(310));Pn=a,a={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Ti===null?en.memoizedState=Ti=a:Ti=Ti.next=a}return Ti}function Y_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jh(a){var c=Zh;return Zh+=1,eu===null&amp;&amp;(eu=[]),a=J1(eu,a,c),c=en,(Ti===null?c.memoizedState:Ti.next)===null&amp;&amp;(c=c.alternate,I.H=c===null||c.memoizedState===null?BE:HE),a}function vp(a){if(a!==null&amp;&amp;typeof a==&quot;object&quot;){if(typeof a.then==&quot;function&quot;)return Jh(a);if(a.$$typeof===w)return sr(a)}throw Error(i(438,String(a)))}function K_(a){var c=null,d=en.updateQueue;if(d!==null&amp;&amp;(c=d.memoCache),c==null){var y=en.alternate;y!==null&amp;&amp;(y=y.updateQueue,y!==null&amp;&amp;(y=y.memoCache,y!=null&amp;&amp;(c={data:y.data.map(function(S){return S.slice()}),index:0})))}if(c==null&amp;&amp;(c={data:[],index:0}),d===null&amp;&amp;(d=Y_(),en.updateQueue=d),d.memoCache=c,d=c.data[c.index],d===void 0)for(d=c.data[c.index]=Array(a),y=0;y&lt;a;y++)d[y]=O;return c.index++,d}function Lo(a,c){return typeof c==&quot;function&quot;?c(a):c}function bp(a){var c=Mi();return $_(c,Pn,a)}function $_(a,c,d){var y=a.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=d;var S=a.baseQueue,M=y.pending;if(M!==null){if(S!==null){var U=S.next;S.next=M.next,M.next=U}c.baseQueue=S=M,y.pending=null}if(M=a.baseState,S===null)a.memoizedState=M;else{c=S.next;var W=U=null,se=null,_e=c,De=!1;do{var ke=_e.lane&amp;-536870913;if(ke!==_e.lane?(pn&amp;ke)===ke:(Ea&amp;ke)===ke){var xe=_e.revertLane;if(xe===0)se!==null&amp;&amp;(se=se.next={lane:0,revertLane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),ke===$c&amp;&amp;(De=!0);else if((Ea&amp;xe)===xe){_e=_e.next,xe===$c&amp;&amp;(De=!0);continue}else ke={lane:0,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},se===null?(W=se=ke,U=M):se=se.next=ke,en.lanes|=xe,Da|=xe;ke=_e.action,Ul&amp;&amp;d(M,ke),M=_e.hasEagerState?_e.eagerState:d(M,ke)}else xe={lane:ke,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},se===null?(W=se=xe,U=M):se=se.next=xe,en.lanes|=ke,Da|=ke;_e=_e.next}while(_e!==null&amp;&amp;_e!==c);if(se===null?U=M:se.next=W,!Br(M,a.memoizedState)&amp;&amp;(Vi=!0,De&amp;&amp;(d=Zc,d!==null)))throw d;a.memoizedState=M,a.baseState=U,a.baseQueue=se,y.lastRenderedState=M}return S===null&amp;&amp;(y.lanes=0),[a.memoizedState,y.dispatch]}function Z_(a){var c=Mi(),d=c.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=a;var y=d.dispatch,S=d.pending,M=c.memoizedState;if(S!==null){d.pending=null;var U=S=S.next;do M=a(M,U.action),U=U.next;while(U!==S);Br(M,c.memoizedState)||(Vi=!0),c.memoizedState=M,c.baseQueue===null&amp;&amp;(c.baseState=M),d.lastRenderedState=M}return[M,y]}function oE(a,c,d){var y=en,S=Mi(),M=En;if(M){if(d===void 0)throw Error(i(407));d=d()}else d=c();var U=!Br((Pn||S).memoizedState,d);U&amp;&amp;(S.memoizedState=d,Vi=!0),S=S.queue;var W=cE.bind(null,y,S,a);if(Qh(2048,8,W,[a]),S.getSnapshot!==c||U||Ti!==null&amp;&amp;Ti.memoizedState.tag&amp;1){if(y.flags|=2048,tu(9,xp(),lE.bind(null,y,S,d,c),null),Vn===null)throw Error(i(349));M||(Ea&amp;124)!==0||aE(y,c,d)}return d}function aE(a,c,d){a.flags|=16384,a={getSnapshot:c,value:d},c=en.updateQueue,c===null?(c=Y_(),en.updateQueue=c,c.stores=[a]):(d=c.stores,d===null?c.stores=[a]:d.push(a))}function lE(a,c,d,y){c.value=d,c.getSnapshot=y,uE(c)&amp;&amp;hE(a)}function cE(a,c,d){return d(function(){uE(c)&amp;&amp;hE(a)})}function uE(a){var c=a.getSnapshot;a=a.value;try{var d=c();return!Br(a,d)}catch{return!0}}function hE(a){var c=Xc(a,2);c!==null&amp;&amp;Xr(c,a,2)}function J_(a){var c=Ar();if(typeof a==&quot;function&quot;){var d=a;if(a=d(),Ul){qe(!0);try{d()}finally{qe(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:a},c}function fE(a,c,d,y){return a.baseState=d,$_(a,Pn,typeof y==&quot;function&quot;?y:Lo)}function fU(a,c,d,y,S){if(wp(a))throw Error(i(485));if(a=c.action,a!==null){var M={payload:S,action:a,next:null,isTransition:!0,status:&quot;pending&quot;,value:null,reason:null,listeners:[],then:function(U){M.listeners.push(U)}};I.T!==null?d(!0):M.isTransition=!1,y(M),d=c.pending,d===null?(M.next=c.pending=M,dE(c,M)):(M.next=d.next,c.pending=d.next=M)}}function dE(a,c){var d=c.action,y=c.payload,S=a.state;if(c.isTransition){var M=I.T,U={};I.T=U;try{var W=d(S,y),se=I.S;se!==null&amp;&amp;se(U,W),pE(a,c,W)}catch(_e){Q_(a,c,_e)}finally{I.T=M}}else try{M=d(S,y),pE(a,c,M)}catch(_e){Q_(a,c,_e)}}function pE(a,c,d){d!==null&amp;&amp;typeof d==&quot;object&quot;&amp;&amp;typeof d.then==&quot;function&quot;?d.then(function(y){mE(a,c,y)},function(y){return Q_(a,c,y)}):mE(a,c,d)}function mE(a,c,d){c.status=&quot;fulfilled&quot;,c.value=d,gE(c),a.state=d,c=a.pending,c!==null&amp;&amp;(d=c.next,d===c?a.pending=null:(d=d.next,c.next=d,dE(a,d)))}function Q_(a,c,d){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do c.status=&quot;rejected&quot;,c.reason=d,gE(c),c=c.next;while(c!==y)}a.action=null}function gE(a){a=a.listeners;for(var c=0;c&lt;a.length;c++)(0,a[c])()}function yE(a,c){return c}function _E(a,c){if(En){var d=Vn.formState;if(d!==null){e:{var y=en;if(En){if(li){t:{for(var S=li,M=no;S.nodeType!==8;){if(!M){S=null;break t}if(S=Ps(S.nextSibling),S===null){S=null;break t}}M=S.data,S=M===&quot;F!&quot;||M===&quot;F&quot;?S:null}if(S){li=Ps(S.nextSibling),y=S.data===&quot;F!&quot;;break e}}Nl(y)}y=!1}y&amp;&amp;(c=d[0])}}return d=Ar(),d.memoizedState=d.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yE,lastRenderedState:c},d.queue=y,d=kE.bind(null,en,y),y.dispatch=d,y=J_(!1),M=rv.bind(null,en,!1,y.queue),y=Ar(),S={state:c,dispatch:null,action:a,pending:null},y.queue=S,d=fU.bind(null,en,S,M,d),S.dispatch=d,y.memoizedState=a,[c,d,!1]}function vE(a){var c=Mi();return bE(c,Pn,a)}function bE(a,c,d){if(c=$_(a,c,yE)[0],a=bp(Lo)[0],typeof c==&quot;object&quot;&amp;&amp;c!==null&amp;&amp;typeof c.then==&quot;function&quot;)try{var y=Jh(c)}catch(U){throw U===Xh?pp:U}else y=c;c=Mi();var S=c.queue,M=S.dispatch;return d!==c.memoizedState&amp;&amp;(en.flags|=2048,tu(9,xp(),dU.bind(null,S,d),null)),[y,M,a]}function dU(a,c){a.action=c}function xE(a){var c=Mi(),d=Pn;if(d!==null)return bE(c,d,a);Mi(),c=c.memoizedState,d=Mi();var y=d.queue.dispatch;return d.memoizedState=a,[c,y,!1]}function tu(a,c,d,y){return a={tag:a,create:d,deps:y,inst:c,next:null},c=en.updateQueue,c===null&amp;&amp;(c=Y_(),en.updateQueue=c),d=c.lastEffect,d===null?c.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,c.lastEffect=a),a}function xp(){return{destroy:void 0,resource:void 0}}function SE(){return Mi().memoizedState}function Sp(a,c,d,y){var S=Ar();y=y===void 0?null:y,en.flags|=a,S.memoizedState=tu(1|c,xp(),d,y)}function Qh(a,c,d,y){var S=Mi();y=y===void 0?null:y;var M=S.memoizedState.inst;Pn!==null&amp;&amp;y!==null&amp;&amp;G_(y,Pn.memoizedState.deps)?S.memoizedState=tu(c,M,d,y):(en.flags|=a,S.memoizedState=tu(1|c,M,d,y))}function wE(a,c){Sp(8390656,8,a,c)}function EE(a,c){Qh(2048,8,a,c)}function TE(a,c){return Qh(4,2,a,c)}function ME(a,c){return Qh(4,4,a,c)}function AE(a,c){if(typeof c==&quot;function&quot;){a=a();var d=c(a);return function(){typeof d==&quot;function&quot;?d():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function CE(a,c,d){d=d!=null?d.concat([a]):null,Qh(4,4,AE.bind(null,c,a),d)}function ev(){}function RE(a,c){var d=Mi();c=c===void 0?null:c;var y=d.memoizedState;return c!==null&amp;&amp;G_(c,y[1])?y[0]:(d.memoizedState=[a,c],a)}function OE(a,c){var d=Mi();c=c===void 0?null:c;var y=d.memoizedState;if(c!==null&amp;&amp;G_(c,y[1]))return y[0];if(y=a(),Ul){qe(!0);try{a()}finally{qe(!1)}}return d.memoizedState=[y,c],y}function tv(a,c,d){return d===void 0||(Ea&amp;1073741824)!==0?a.memoizedState=c:(a.memoizedState=d,a=IT(),en.lanes|=a,Da|=a,d)}function DE(a,c,d,y){return Br(d,c)?d:Jc.current!==null?(a=tv(a,d,y),Br(a,c)||(Vi=!0),a):(Ea&amp;42)===0?(Vi=!0,a.memoizedState=d):(a=IT(),en.lanes|=a,Da|=a,c)}function NE(a,c,d,y,S){var M=j.p;j.p=M!==0&amp;&amp;8&gt;M?M:8;var U=I.T,W={};I.T=W,rv(a,!1,c,d);try{var se=S(),_e=I.S;if(_e!==null&amp;&amp;_e(W,se),se!==null&amp;&amp;typeof se==&quot;object&quot;&amp;&amp;typeof se.then==&quot;function&quot;){var De=cU(se,y);ef(a,c,De,Wr(a))}else ef(a,c,y,Wr(a))}catch(ke){ef(a,c,{then:function(){},status:&quot;rejected&quot;,reason:ke},Wr())}finally{j.p=M,I.T=U}}function pU(){}function nv(a,c,d,y){if(a.tag!==5)throw Error(i(476));var S=IE(a).queue;NE(a,S,c,G,d===null?pU:function(){return PE(a),d(y)})}function IE(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:G},next:null};var d={};return c.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:d},next:null},a.memoizedState=c,a=a.alternate,a!==null&amp;&amp;(a.memoizedState=c),c}function PE(a){var c=IE(a).next.queue;ef(a,c,{},Wr())}function iv(){return sr(vf)}function LE(){return Mi().memoizedState}function UE(){return Mi().memoizedState}function mU(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var d=Wr();a=Sa(d);var y=wa(c,a,d);y!==null&amp;&amp;(Xr(y,c,d),Yh(y,c,d)),c={cache:I_()},a.payload=c;return}c=c.return}}function gU(a,c,d){var y=Wr();d={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},wp(a)?FE(c,d):(d=w_(a,c,d,y),d!==null&amp;&amp;(Xr(d,a,y),zE(d,c,y)))}function kE(a,c,d){var y=Wr();ef(a,c,d,y)}function ef(a,c,d,y){var S={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(wp(a))FE(c,S);else{var M=a.alternate;if(a.lanes===0&amp;&amp;(M===null||M.lanes===0)&amp;&amp;(M=c.lastRenderedReducer,M!==null))try{var U=c.lastRenderedState,W=M(U,d);if(S.hasEagerState=!0,S.eagerState=W,Br(W,U))return op(a,c,S,0),Vn===null&amp;&amp;sp(),!1}catch{}finally{}if(d=w_(a,c,S,y),d!==null)return Xr(d,a,y),zE(d,c,y),!0}return!1}function rv(a,c,d,y){if(y={lane:2,revertLane:Uv(),action:y,hasEagerState:!1,eagerState:null,next:null},wp(a)){if(c)throw Error(i(479))}else c=w_(a,d,y,2),c!==null&amp;&amp;Xr(c,a,2)}function wp(a){var c=a.alternate;return a===en||c!==null&amp;&amp;c===en}function FE(a,c){Qc=yp=!0;var d=a.pending;d===null?c.next=c:(c.next=d.next,d.next=c),a.pending=c}function zE(a,c,d){if((d&amp;4194048)!==0){var y=c.lanes;y&amp;=a.pendingLanes,d|=y,c.lanes=d,Ut(a,d)}}var Ep={readContext:sr,use:vp,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useLayoutEffect:gi,useInsertionEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useSyncExternalStore:gi,useId:gi,useHostTransitionStatus:gi,useFormState:gi,useActionState:gi,useOptimistic:gi,useMemoCache:gi,useCacheRefresh:gi},BE={readContext:sr,use:vp,useCallback:function(a,c){return Ar().memoizedState=[a,c===void 0?null:c],a},useContext:sr,useEffect:wE,useImperativeHandle:function(a,c,d){d=d!=null?d.concat([a]):null,Sp(4194308,4,AE.bind(null,c,a),d)},useLayoutEffect:function(a,c){return Sp(4194308,4,a,c)},useInsertionEffect:function(a,c){Sp(4,2,a,c)},useMemo:function(a,c){var d=Ar();c=c===void 0?null:c;var y=a();if(Ul){qe(!0);try{a()}finally{qe(!1)}}return d.memoizedState=[y,c],y},useReducer:function(a,c,d){var y=Ar();if(d!==void 0){var S=d(c);if(Ul){qe(!0);try{d(c)}finally{qe(!1)}}}else S=c;return y.memoizedState=y.baseState=S,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:S},y.queue=a,a=a.dispatch=gU.bind(null,en,a),[y.memoizedState,a]},useRef:function(a){var c=Ar();return a={current:a},c.memoizedState=a},useState:function(a){a=J_(a);var c=a.queue,d=kE.bind(null,en,c);return c.dispatch=d,[a.memoizedState,d]},useDebugValue:ev,useDeferredValue:function(a,c){var d=Ar();return tv(d,a,c)},useTransition:function(){var a=J_(!1);return a=NE.bind(null,en,a.queue,!0,!1),Ar().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,d){var y=en,S=Ar();if(En){if(d===void 0)throw Error(i(407));d=d()}else{if(d=c(),Vn===null)throw Error(i(349));(pn&amp;124)!==0||aE(y,c,d)}S.memoizedState=d;var M={value:d,getSnapshot:c};return S.queue=M,wE(cE.bind(null,y,M,a),[a]),y.flags|=2048,tu(9,xp(),lE.bind(null,y,M,d,c),null),d},useId:function(){var a=Ar(),c=Vn.identifierPrefix;if(En){var d=No,y=Do;d=(y&amp;~(1&lt;&lt;32-ut(y)-1)).toString(32)+d,c=&quot;«&quot;+c+&quot;R&quot;+d,d=_p++,0&lt;d&amp;&amp;(c+=&quot;H&quot;+d.toString(32)),c+=&quot;»&quot;}else d=uU++,c=&quot;«&quot;+c+&quot;r&quot;+d.toString(32)+&quot;»&quot;;return a.memoizedState=c},useHostTransitionStatus:iv,useFormState:_E,useActionState:_E,useOptimistic:function(a){var c=Ar();c.memoizedState=c.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=d,c=rv.bind(null,en,!0,d),d.dispatch=c,[a,c]},useMemoCache:K_,useCacheRefresh:function(){return Ar().memoizedState=mU.bind(null,en)}},HE={readContext:sr,use:vp,useCallback:RE,useContext:sr,useEffect:EE,useImperativeHandle:CE,useInsertionEffect:TE,useLayoutEffect:ME,useMemo:OE,useReducer:bp,useRef:SE,useState:function(){return bp(Lo)},useDebugValue:ev,useDeferredValue:function(a,c){var d=Mi();return DE(d,Pn.memoizedState,a,c)},useTransition:function(){var a=bp(Lo)[0],c=Mi().memoizedState;return[typeof a==&quot;boolean&quot;?a:Jh(a),c]},useSyncExternalStore:oE,useId:LE,useHostTransitionStatus:iv,useFormState:vE,useActionState:vE,useOptimistic:function(a,c){var d=Mi();return fE(d,Pn,a,c)},useMemoCache:K_,useCacheRefresh:UE},yU={readContext:sr,use:vp,useCallback:RE,useContext:sr,useEffect:EE,useImperativeHandle:CE,useInsertionEffect:TE,useLayoutEffect:ME,useMemo:OE,useReducer:Z_,useRef:SE,useState:function(){return Z_(Lo)},useDebugValue:ev,useDeferredValue:function(a,c){var d=Mi();return Pn===null?tv(d,a,c):DE(d,Pn.memoizedState,a,c)},useTransition:function(){var a=Z_(Lo)[0],c=Mi().memoizedState;return[typeof a==&quot;boolean&quot;?a:Jh(a),c]},useSyncExternalStore:oE,useId:LE,useHostTransitionStatus:iv,useFormState:xE,useActionState:xE,useOptimistic:function(a,c){var d=Mi();return Pn!==null?fE(d,Pn,a,c):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:K_,useCacheRefresh:UE},nu=null,tf=0;function Tp(a){var c=tf;return tf+=1,nu===null&amp;&amp;(nu=[]),J1(nu,a,c)}function nf(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function Mp(a,c){throw c.$$typeof===p?Error(i(525)):(a=Object.prototype.toString.call(c),Error(i(31,a===&quot;[object Object]&quot;?&quot;object with keys {&quot;+Object.keys(c).join(&quot;, &quot;)+&quot;}&quot;:a)))}function VE(a){var c=a._init;return c(a._payload)}function GE(a){function c(ge,he){if(a){var ye=ge.deletions;ye===null?(ge.deletions=[he],ge.flags|=16):ye.push(he)}}function d(ge,he){if(!a)return null;for(;he!==null;)c(ge,he),he=he.sibling;return null}function y(ge){for(var he=new Map;ge!==null;)ge.key!==null?he.set(ge.key,ge):he.set(ge.index,ge),ge=ge.sibling;return he}function S(ge,he){return ge=Oo(ge,he),ge.index=0,ge.sibling=null,ge}function M(ge,he,ye){return ge.index=ye,a?(ye=ge.alternate,ye!==null?(ye=ye.index,ye&lt;he?(ge.flags|=67108866,he):ye):(ge.flags|=67108866,he)):(ge.flags|=1048576,he)}function U(ge){return a&amp;&amp;ge.alternate===null&amp;&amp;(ge.flags|=67108866),ge}function W(ge,he,ye,Ie){return he===null||he.tag!==6?(he=T_(ye,ge.mode,Ie),he.return=ge,he):(he=S(he,ye),he.return=ge,he)}function se(ge,he,ye,Ie){var vt=ye.type;return vt===v?De(ge,he,ye.props.children,Ie,ye.key):he!==null&amp;&amp;(he.elementType===vt||typeof vt==&quot;object&quot;&amp;&amp;vt!==null&amp;&amp;vt.$$typeof===D&amp;&amp;VE(vt)===he.type)?(he=S(he,ye.props),nf(he,ye),he.return=ge,he):(he=lp(ye.type,ye.key,ye.props,null,ge.mode,Ie),nf(he,ye),he.return=ge,he)}function _e(ge,he,ye,Ie){return he===null||he.tag!==4||he.stateNode.containerInfo!==ye.containerInfo||he.stateNode.implementation!==ye.implementation?(he=M_(ye,ge.mode,Ie),he.return=ge,he):(he=S(he,ye.children||[]),he.return=ge,he)}function De(ge,he,ye,Ie,vt){return he===null||he.tag!==7?(he=Cl(ye,ge.mode,Ie,vt),he.return=ge,he):(he=S(he,ye),he.return=ge,he)}function ke(ge,he,ye){if(typeof he==&quot;string&quot;&amp;&amp;he!==&quot;&quot;||typeof he==&quot;number&quot;||typeof he==&quot;bigint&quot;)return he=T_(&quot;&quot;+he,ge.mode,ye),he.return=ge,he;if(typeof he==&quot;object&quot;&amp;&amp;he!==null){switch(he.$$typeof){case m:return ye=lp(he.type,he.key,he.props,null,ge.mode,ye),nf(ye,he),ye.return=ge,ye;case g:return he=M_(he,ge.mode,ye),he.return=ge,he;case D:var Ie=he._init;return he=Ie(he._payload),ke(ge,he,ye)}if(K(he)||V(he))return he=Cl(he,ge.mode,ye,null),he.return=ge,he;if(typeof he.then==&quot;function&quot;)return ke(ge,Tp(he),ye);if(he.$$typeof===w)return ke(ge,fp(ge,he),ye);Mp(ge,he)}return null}function xe(ge,he,ye,Ie){var vt=he!==null?he.key:null;if(typeof ye==&quot;string&quot;&amp;&amp;ye!==&quot;&quot;||typeof ye==&quot;number&quot;||typeof ye==&quot;bigint&quot;)return vt!==null?null:W(ge,he,&quot;&quot;+ye,Ie);if(typeof ye==&quot;object&quot;&amp;&amp;ye!==null){switch(ye.$$typeof){case m:return ye.key===vt?se(ge,he,ye,Ie):null;case g:return ye.key===vt?_e(ge,he,ye,Ie):null;case D:return vt=ye._init,ye=vt(ye._payload),xe(ge,he,ye,Ie)}if(K(ye)||V(ye))return vt!==null?null:De(ge,he,ye,Ie,null);if(typeof ye.then==&quot;function&quot;)return xe(ge,he,Tp(ye),Ie);if(ye.$$typeof===w)return xe(ge,he,fp(ge,ye),Ie);Mp(ge,ye)}return null}function Ee(ge,he,ye,Ie,vt){if(typeof Ie==&quot;string&quot;&amp;&amp;Ie!==&quot;&quot;||typeof Ie==&quot;number&quot;||typeof Ie==&quot;bigint&quot;)return ge=ge.get(ye)||null,W(he,ge,&quot;&quot;+Ie,vt);if(typeof Ie==&quot;object&quot;&amp;&amp;Ie!==null){switch(Ie.$$typeof){case m:return ge=ge.get(Ie.key===null?ye:Ie.key)||null,se(he,ge,Ie,vt);case g:return ge=ge.get(Ie.key===null?ye:Ie.key)||null,_e(he,ge,Ie,vt);case D:var tn=Ie._init;return Ie=tn(Ie._payload),Ee(ge,he,ye,Ie,vt)}if(K(Ie)||V(Ie))return ge=ge.get(ye)||null,De(he,ge,Ie,vt,null);if(typeof Ie.then==&quot;function&quot;)return Ee(ge,he,ye,Tp(Ie),vt);if(Ie.$$typeof===w)return Ee(ge,he,ye,fp(he,Ie),vt);Mp(he,Ie)}return null}function kt(ge,he,ye,Ie){for(var vt=null,tn=null,At=he,Pt=he=0,ji=null;At!==null&amp;&amp;Pt&lt;ye.length;Pt++){At.index&gt;Pt?(ji=At,At=null):ji=At.sibling;var bn=xe(ge,At,ye[Pt],Ie);if(bn===null){At===null&amp;&amp;(At=ji);break}a&amp;&amp;At&amp;&amp;bn.alternate===null&amp;&amp;c(ge,At),he=M(bn,he,Pt),tn===null?vt=bn:tn.sibling=bn,tn=bn,At=ji}if(Pt===ye.length)return d(ge,At),En&amp;&amp;Ol(ge,Pt),vt;if(At===null){for(;Pt&lt;ye.length;Pt++)At=ke(ge,ye[Pt],Ie),At!==null&amp;&amp;(he=M(At,he,Pt),tn===null?vt=At:tn.sibling=At,tn=At);return En&amp;&amp;Ol(ge,Pt),vt}for(At=y(At);Pt&lt;ye.length;Pt++)ji=Ee(At,ge,Pt,ye[Pt],Ie),ji!==null&amp;&amp;(a&amp;&amp;ji.alternate!==null&amp;&amp;At.delete(ji.key===null?Pt:ji.key),he=M(ji,he,Pt),tn===null?vt=ji:tn.sibling=ji,tn=ji);return a&amp;&amp;At.forEach(function(Ba){return c(ge,Ba)}),En&amp;&amp;Ol(ge,Pt),vt}function Nt(ge,he,ye,Ie){if(ye==null)throw Error(i(151));for(var vt=null,tn=null,At=he,Pt=he=0,ji=null,bn=ye.next();At!==null&amp;&amp;!bn.done;Pt++,bn=ye.next()){At.index&gt;Pt?(ji=At,At=null):ji=At.sibling;var Ba=xe(ge,At,bn.value,Ie);if(Ba===null){At===null&amp;&amp;(At=ji);break}a&amp;&amp;At&amp;&amp;Ba.alternate===null&amp;&amp;c(ge,At),he=M(Ba,he,Pt),tn===null?vt=Ba:tn.sibling=Ba,tn=Ba,At=ji}if(bn.done)return d(ge,At),En&amp;&amp;Ol(ge,Pt),vt;if(At===null){for(;!bn.done;Pt++,bn=ye.next())bn=ke(ge,bn.value,Ie),bn!==null&amp;&amp;(he=M(bn,he,Pt),tn===null?vt=bn:tn.sibling=bn,tn=bn);return En&amp;&amp;Ol(ge,Pt),vt}for(At=y(At);!bn.done;Pt++,bn=ye.next())bn=Ee(At,ge,Pt,bn.value,Ie),bn!==null&amp;&amp;(a&amp;&amp;bn.alternate!==null&amp;&amp;At.delete(bn.key===null?Pt:bn.key),he=M(bn,he,Pt),tn===null?vt=bn:tn.sibling=bn,tn=bn);return a&amp;&amp;At.forEach(function(_k){return c(ge,_k)}),En&amp;&amp;Ol(ge,Pt),vt}function Un(ge,he,ye,Ie){if(typeof ye==&quot;object&quot;&amp;&amp;ye!==null&amp;&amp;ye.type===v&amp;&amp;ye.key===null&amp;&amp;(ye=ye.props.children),typeof ye==&quot;object&quot;&amp;&amp;ye!==null){switch(ye.$$typeof){case m:e:{for(var vt=ye.key;he!==null;){if(he.key===vt){if(vt=ye.type,vt===v){if(he.tag===7){d(ge,he.sibling),Ie=S(he,ye.props.children),Ie.return=ge,ge=Ie;break e}}else if(he.elementType===vt||typeof vt==&quot;object&quot;&amp;&amp;vt!==null&amp;&amp;vt.$$typeof===D&amp;&amp;VE(vt)===he.type){d(ge,he.sibling),Ie=S(he,ye.props),nf(Ie,ye),Ie.return=ge,ge=Ie;break e}d(ge,he);break}else c(ge,he);he=he.sibling}ye.type===v?(Ie=Cl(ye.props.children,ge.mode,Ie,ye.key),Ie.return=ge,ge=Ie):(Ie=lp(ye.type,ye.key,ye.props,null,ge.mode,Ie),nf(Ie,ye),Ie.return=ge,ge=Ie)}return U(ge);case g:e:{for(vt=ye.key;he!==null;){if(he.key===vt)if(he.tag===4&amp;&amp;he.stateNode.containerInfo===ye.containerInfo&amp;&amp;he.stateNode.implementation===ye.implementation){d(ge,he.sibling),Ie=S(he,ye.children||[]),Ie.return=ge,ge=Ie;break e}else{d(ge,he);break}else c(ge,he);he=he.sibling}Ie=M_(ye,ge.mode,Ie),Ie.return=ge,ge=Ie}return U(ge);case D:return vt=ye._init,ye=vt(ye._payload),Un(ge,he,ye,Ie)}if(K(ye))return kt(ge,he,ye,Ie);if(V(ye)){if(vt=V(ye),typeof vt!=&quot;function&quot;)throw Error(i(150));return ye=vt.call(ye),Nt(ge,he,ye,Ie)}if(typeof ye.then==&quot;function&quot;)return Un(ge,he,Tp(ye),Ie);if(ye.$$typeof===w)return Un(ge,he,fp(ge,ye),Ie);Mp(ge,ye)}return typeof ye==&quot;string&quot;&amp;&amp;ye!==&quot;&quot;||typeof ye==&quot;number&quot;||typeof ye==&quot;bigint&quot;?(ye=&quot;&quot;+ye,he!==null&amp;&amp;he.tag===6?(d(ge,he.sibling),Ie=S(he,ye),Ie.return=ge,ge=Ie):(d(ge,he),Ie=T_(ye,ge.mode,Ie),Ie.return=ge,ge=Ie),U(ge)):d(ge,he)}return function(ge,he,ye,Ie){try{tf=0;var vt=Un(ge,he,ye,Ie);return nu=null,vt}catch(At){if(At===Xh||At===pp)throw At;var tn=Hr(29,At,null,ge.mode);return tn.lanes=Ie,tn.return=ge,tn}finally{}}}var iu=GE(!0),jE=GE(!1),fs=ne(null),io=null;function Ta(a){var c=a.alternate;ce(Pi,Pi.current&amp;1),ce(fs,a),io===null&amp;&amp;(c===null||Jc.current!==null||c.memoizedState!==null)&amp;&amp;(io=a)}function WE(a){if(a.tag===22){if(ce(Pi,Pi.current),ce(fs,a),io===null){var c=a.alternate;c!==null&amp;&amp;c.memoizedState!==null&amp;&amp;(io=a)}}else Ma()}function Ma(){ce(Pi,Pi.current),ce(fs,fs.current)}function Uo(a){le(fs),io===a&amp;&amp;(io=null),le(Pi)}var Pi=ne(0);function Ap(a){for(var c=a;c!==null;){if(c.tag===13){var d=c.memoizedState;if(d!==null&amp;&amp;(d=d.dehydrated,d===null||d.data===&quot;$?&quot;||Yv(d)))return c}else if(c.tag===19&amp;&amp;c.memoizedProps.revealOrder!==void 0){if((c.flags&amp;128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function sv(a,c,d,y){c=a.memoizedState,d=d(y,c),d=d==null?c:f({},c,d),a.memoizedState=d,a.lanes===0&amp;&amp;(a.updateQueue.baseState=d)}var ov={enqueueSetState:function(a,c,d){a=a._reactInternals;var y=Wr(),S=Sa(y);S.payload=c,d!=null&amp;&amp;(S.callback=d),c=wa(a,S,y),c!==null&amp;&amp;(Xr(c,a,y),Yh(c,a,y))},enqueueReplaceState:function(a,c,d){a=a._reactInternals;var y=Wr(),S=Sa(y);S.tag=1,S.payload=c,d!=null&amp;&amp;(S.callback=d),c=wa(a,S,y),c!==null&amp;&amp;(Xr(c,a,y),Yh(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var d=Wr(),y=Sa(d);y.tag=2,c!=null&amp;&amp;(y.callback=c),c=wa(a,y,d),c!==null&amp;&amp;(Xr(c,a,d),Yh(c,a,d))}};function XE(a,c,d,y,S,M,U){return a=a.stateNode,typeof a.shouldComponentUpdate==&quot;function&quot;?a.shouldComponentUpdate(y,M,U):c.prototype&amp;&amp;c.prototype.isPureReactComponent?!Fh(d,y)||!Fh(S,M):!0}function qE(a,c,d,y){a=c.state,typeof c.componentWillReceiveProps==&quot;function&quot;&amp;&amp;c.componentWillReceiveProps(d,y),typeof c.UNSAFE_componentWillReceiveProps==&quot;function&quot;&amp;&amp;c.UNSAFE_componentWillReceiveProps(d,y),c.state!==a&amp;&amp;ov.enqueueReplaceState(c,c.state,null)}function kl(a,c){var d=c;if(&quot;ref&quot;in c){d={};for(var y in c)y!==&quot;ref&quot;&amp;&amp;(d[y]=c[y])}if(a=a.defaultProps){d===c&amp;&amp;(d=f({},d));for(var S in a)d[S]===void 0&amp;&amp;(d[S]=a[S])}return d}var Cp=typeof reportError==&quot;function&quot;?reportError:function(a){if(typeof window==&quot;object&quot;&amp;&amp;typeof window.ErrorEvent==&quot;function&quot;){var c=new window.ErrorEvent(&quot;error&quot;,{bubbles:!0,cancelable:!0,message:typeof a==&quot;object&quot;&amp;&amp;a!==null&amp;&amp;typeof a.message==&quot;string&quot;?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process==&quot;object&quot;&amp;&amp;typeof process.emit==&quot;function&quot;){process.emit(&quot;uncaughtException&quot;,a);return}console.error(a)};function YE(a){Cp(a)}function KE(a){console.error(a)}function $E(a){Cp(a)}function Rp(a,c){try{var d=a.onUncaughtError;d(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function ZE(a,c,d){try{var y=a.onCaughtError;y(d.value,{componentStack:d.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function av(a,c,d){return d=Sa(d),d.tag=3,d.payload={element:null},d.callback=function(){Rp(a,c)},d}function JE(a){return a=Sa(a),a.tag=3,a}function QE(a,c,d,y){var S=d.type.getDerivedStateFromError;if(typeof S==&quot;function&quot;){var M=y.value;a.payload=function(){return S(M)},a.callback=function(){ZE(c,d,y)}}var U=d.stateNode;U!==null&amp;&amp;typeof U.componentDidCatch==&quot;function&quot;&amp;&amp;(a.callback=function(){ZE(c,d,y),typeof S!=&quot;function&quot;&amp;&amp;(Na===null?Na=new Set([this]):Na.add(this));var W=y.stack;this.componentDidCatch(y.value,{componentStack:W!==null?W:&quot;&quot;})})}function _U(a,c,d,y,S){if(d.flags|=32768,y!==null&amp;&amp;typeof y==&quot;object&quot;&amp;&amp;typeof y.then==&quot;function&quot;){if(c=d.alternate,c!==null&amp;&amp;Gh(c,d,S,!0),d=fs.current,d!==null){switch(d.tag){case 13:return io===null?Dv():d.alternate===null&amp;&amp;ci===0&amp;&amp;(ci=3),d.flags&amp;=-257,d.flags|=65536,d.lanes=S,y===U_?d.flags|=16384:(c=d.updateQueue,c===null?d.updateQueue=new Set([y]):c.add(y),Iv(a,y,S)),!1;case 22:return d.flags|=65536,y===U_?d.flags|=16384:(c=d.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},d.updateQueue=c):(d=c.retryQueue,d===null?c.retryQueue=new Set([y]):d.add(y)),Iv(a,y,S)),!1}throw Error(i(435,d.tag))}return Iv(a,y,S),Dv(),!1}if(En)return c=fs.current,c!==null?((c.flags&amp;65536)===0&amp;&amp;(c.flags|=256),c.flags|=65536,c.lanes=S,y!==R_&amp;&amp;(a=Error(i(422),{cause:y}),Vh(ls(a,d)))):(y!==R_&amp;&amp;(c=Error(i(423),{cause:y}),Vh(ls(c,d))),a=a.current.alternate,a.flags|=65536,S&amp;=-S,a.lanes|=S,y=ls(y,d),S=av(a.stateNode,y,S),z_(a,S),ci!==4&amp;&amp;(ci=2)),!1;var M=Error(i(520),{cause:y});if(M=ls(M,d),uf===null?uf=[M]:uf.push(M),ci!==4&amp;&amp;(ci=2),c===null)return!0;y=ls(y,d),d=c;do{switch(d.tag){case 3:return d.flags|=65536,a=S&amp;-S,d.lanes|=a,a=av(d.stateNode,y,a),z_(d,a),!1;case 1:if(c=d.type,M=d.stateNode,(d.flags&amp;128)===0&amp;&amp;(typeof c.getDerivedStateFromError==&quot;function&quot;||M!==null&amp;&amp;typeof M.componentDidCatch==&quot;function&quot;&amp;&amp;(Na===null||!Na.has(M))))return d.flags|=65536,S&amp;=-S,d.lanes|=S,S=JE(S),QE(S,a,d,y),z_(d,S),!1}d=d.return}while(d!==null);return!1}var eT=Error(i(461)),Vi=!1;function er(a,c,d,y){c.child=a===null?jE(c,null,d,y):iu(c,a.child,d,y)}function tT(a,c,d,y,S){d=d.render;var M=c.ref;if(&quot;ref&quot;in y){var U={};for(var W in y)W!==&quot;ref&quot;&amp;&amp;(U[W]=y[W])}else U=y;return Pl(c),y=j_(a,c,d,U,M,S),W=W_(),a!==null&amp;&amp;!Vi?(X_(a,c,S),ko(a,c,S)):(En&amp;&amp;W&amp;&amp;A_(c),c.flags|=1,er(a,c,y,S),c.child)}function nT(a,c,d,y,S){if(a===null){var M=d.type;return typeof M==&quot;function&quot;&amp;&amp;!E_(M)&amp;&amp;M.defaultProps===void 0&amp;&amp;d.compare===null?(c.tag=15,c.type=M,iT(a,c,M,y,S)):(a=lp(d.type,null,y,c,c.mode,S),a.ref=c.ref,a.return=c,c.child=a)}if(M=a.child,!mv(a,S)){var U=M.memoizedProps;if(d=d.compare,d=d!==null?d:Fh,d(U,y)&amp;&amp;a.ref===c.ref)return ko(a,c,S)}return c.flags|=1,a=Oo(M,y),a.ref=c.ref,a.return=c,c.child=a}function iT(a,c,d,y,S){if(a!==null){var M=a.memoizedProps;if(Fh(M,y)&amp;&amp;a.ref===c.ref)if(Vi=!1,c.pendingProps=y=M,mv(a,S))(a.flags&amp;131072)!==0&amp;&amp;(Vi=!0);else return c.lanes=a.lanes,ko(a,c,S)}return lv(a,c,d,y,S)}function rT(a,c,d){var y=c.pendingProps,S=y.children,M=a!==null?a.memoizedState:null;if(y.mode===&quot;hidden&quot;){if((c.flags&amp;128)!==0){if(y=M!==null?M.baseLanes|d:d,a!==null){for(S=c.child=a.child,M=0;S!==null;)M=M|S.lanes|S.childLanes,S=S.sibling;c.childLanes=M&amp;~y}else c.childLanes=0,c.child=null;return sT(a,c,y,d)}if((d&amp;536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&amp;&amp;dp(c,M!==null?M.cachePool:null),M!==null?iE(c,M):H_(),WE(c);else return c.lanes=c.childLanes=536870912,sT(a,c,M!==null?M.baseLanes|d:d,d)}else M!==null?(dp(c,M.cachePool),iE(c,M),Ma(),c.memoizedState=null):(a!==null&amp;&amp;dp(c,null),H_(),Ma());return er(a,c,S,d),c.child}function sT(a,c,d,y){var S=L_();return S=S===null?null:{parent:Ii._currentValue,pool:S},c.memoizedState={baseLanes:d,cachePool:S},a!==null&amp;&amp;dp(c,null),H_(),WE(c),a!==null&amp;&amp;Gh(a,c,y,!0),null}function Op(a,c){var d=c.ref;if(d===null)a!==null&amp;&amp;a.ref!==null&amp;&amp;(c.flags|=4194816);else{if(typeof d!=&quot;function&quot;&amp;&amp;typeof d!=&quot;object&quot;)throw Error(i(284));(a===null||a.ref!==d)&amp;&amp;(c.flags|=4194816)}}function lv(a,c,d,y,S){return Pl(c),d=j_(a,c,d,y,void 0,S),y=W_(),a!==null&amp;&amp;!Vi?(X_(a,c,S),ko(a,c,S)):(En&amp;&amp;y&amp;&amp;A_(c),c.flags|=1,er(a,c,d,S),c.child)}function oT(a,c,d,y,S,M){return Pl(c),c.updateQueue=null,d=sE(c,y,d,S),rE(a),y=W_(),a!==null&amp;&amp;!Vi?(X_(a,c,M),ko(a,c,M)):(En&amp;&amp;y&amp;&amp;A_(c),c.flags|=1,er(a,c,d,M),c.child)}function aT(a,c,d,y,S){if(Pl(c),c.stateNode===null){var M=qc,U=d.contextType;typeof U==&quot;object&quot;&amp;&amp;U!==null&amp;&amp;(M=sr(U)),M=new d(y,M),c.memoizedState=M.state!==null&amp;&amp;M.state!==void 0?M.state:null,M.updater=ov,c.stateNode=M,M._reactInternals=c,M=c.stateNode,M.props=y,M.state=c.memoizedState,M.refs={},k_(c),U=d.contextType,M.context=typeof U==&quot;object&quot;&amp;&amp;U!==null?sr(U):qc,M.state=c.memoizedState,U=d.getDerivedStateFromProps,typeof U==&quot;function&quot;&amp;&amp;(sv(c,d,U,y),M.state=c.memoizedState),typeof d.getDerivedStateFromProps==&quot;function&quot;||typeof M.getSnapshotBeforeUpdate==&quot;function&quot;||typeof M.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof M.componentWillMount!=&quot;function&quot;||(U=M.state,typeof M.componentWillMount==&quot;function&quot;&amp;&amp;M.componentWillMount(),typeof M.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;M.UNSAFE_componentWillMount(),U!==M.state&amp;&amp;ov.enqueueReplaceState(M,M.state,null),$h(c,y,M,S),Kh(),M.state=c.memoizedState),typeof M.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308),y=!0}else if(a===null){M=c.stateNode;var W=c.memoizedProps,se=kl(d,W);M.props=se;var _e=M.context,De=d.contextType;U=qc,typeof De==&quot;object&quot;&amp;&amp;De!==null&amp;&amp;(U=sr(De));var ke=d.getDerivedStateFromProps;De=typeof ke==&quot;function&quot;||typeof M.getSnapshotBeforeUpdate==&quot;function&quot;,W=c.pendingProps!==W,De||typeof M.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof M.componentWillReceiveProps!=&quot;function&quot;||(W||_e!==U)&amp;&amp;qE(c,M,y,U),xa=!1;var xe=c.memoizedState;M.state=xe,$h(c,y,M,S),Kh(),_e=c.memoizedState,W||xe!==_e||xa?(typeof ke==&quot;function&quot;&amp;&amp;(sv(c,d,ke,y),_e=c.memoizedState),(se=xa||XE(c,d,se,y,xe,_e,U))?(De||typeof M.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof M.componentWillMount!=&quot;function&quot;||(typeof M.componentWillMount==&quot;function&quot;&amp;&amp;M.componentWillMount(),typeof M.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;M.UNSAFE_componentWillMount()),typeof M.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308)):(typeof M.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=_e),M.props=y,M.state=_e,M.context=U,y=se):(typeof M.componentDidMount==&quot;function&quot;&amp;&amp;(c.flags|=4194308),y=!1)}else{M=c.stateNode,F_(a,c),U=c.memoizedProps,De=kl(d,U),M.props=De,ke=c.pendingProps,xe=M.context,_e=d.contextType,se=qc,typeof _e==&quot;object&quot;&amp;&amp;_e!==null&amp;&amp;(se=sr(_e)),W=d.getDerivedStateFromProps,(_e=typeof W==&quot;function&quot;||typeof M.getSnapshotBeforeUpdate==&quot;function&quot;)||typeof M.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof M.componentWillReceiveProps!=&quot;function&quot;||(U!==ke||xe!==se)&amp;&amp;qE(c,M,y,se),xa=!1,xe=c.memoizedState,M.state=xe,$h(c,y,M,S),Kh();var Ee=c.memoizedState;U!==ke||xe!==Ee||xa||a!==null&amp;&amp;a.dependencies!==null&amp;&amp;hp(a.dependencies)?(typeof W==&quot;function&quot;&amp;&amp;(sv(c,d,W,y),Ee=c.memoizedState),(De=xa||XE(c,d,De,y,xe,Ee,se)||a!==null&amp;&amp;a.dependencies!==null&amp;&amp;hp(a.dependencies))?(_e||typeof M.UNSAFE_componentWillUpdate!=&quot;function&quot;&amp;&amp;typeof M.componentWillUpdate!=&quot;function&quot;||(typeof M.componentWillUpdate==&quot;function&quot;&amp;&amp;M.componentWillUpdate(y,Ee,se),typeof M.UNSAFE_componentWillUpdate==&quot;function&quot;&amp;&amp;M.UNSAFE_componentWillUpdate(y,Ee,se)),typeof M.componentDidUpdate==&quot;function&quot;&amp;&amp;(c.flags|=4),typeof M.getSnapshotBeforeUpdate==&quot;function&quot;&amp;&amp;(c.flags|=1024)):(typeof M.componentDidUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=4),typeof M.getSnapshotBeforeUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Ee),M.props=y,M.state=Ee,M.context=se,y=De):(typeof M.componentDidUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=4),typeof M.getSnapshotBeforeUpdate!=&quot;function&quot;||U===a.memoizedProps&amp;&amp;xe===a.memoizedState||(c.flags|=1024),y=!1)}return M=y,Op(a,c),y=(c.flags&amp;128)!==0,M||y?(M=c.stateNode,d=y&amp;&amp;typeof d.getDerivedStateFromError!=&quot;function&quot;?null:M.render(),c.flags|=1,a!==null&amp;&amp;y?(c.child=iu(c,a.child,null,S),c.child=iu(c,null,d,S)):er(a,c,d,S),c.memoizedState=M.state,a=c.child):a=ko(a,c,S),a}function lT(a,c,d,y){return Hh(),c.flags|=256,er(a,c,d,y),c.child}var cv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uv(a){return{baseLanes:a,cachePool:K1()}}function hv(a,c,d){return a=a!==null?a.childLanes&amp;~d:0,c&amp;&amp;(a|=ds),a}function cT(a,c,d){var y=c.pendingProps,S=!1,M=(c.flags&amp;128)!==0,U;if((U=M)||(U=a!==null&amp;&amp;a.memoizedState===null?!1:(Pi.current&amp;2)!==0),U&amp;&amp;(S=!0,c.flags&amp;=-129),U=(c.flags&amp;32)!==0,c.flags&amp;=-33,a===null){if(En){if(S?Ta(c):Ma(),En){var W=li,se;if(se=W){e:{for(se=W,W=no;se.nodeType!==8;){if(!W){W=null;break e}if(se=Ps(se.nextSibling),se===null){W=null;break e}}W=se}W!==null?(c.memoizedState={dehydrated:W,treeContext:Rl!==null?{id:Do,overflow:No}:null,retryLane:536870912,hydrationErrors:null},se=Hr(18,null,null,0),se.stateNode=W,se.return=c,c.child=se,dr=c,li=null,se=!0):se=!1}se||Nl(c)}if(W=c.memoizedState,W!==null&amp;&amp;(W=W.dehydrated,W!==null))return Yv(W)?c.lanes=32:c.lanes=536870912,null;Uo(c)}return W=y.children,y=y.fallback,S?(Ma(),S=c.mode,W=Dp({mode:&quot;hidden&quot;,children:W},S),y=Cl(y,S,d,null),W.return=c,y.return=c,W.sibling=y,c.child=W,S=c.child,S.memoizedState=uv(d),S.childLanes=hv(a,U,d),c.memoizedState=cv,y):(Ta(c),fv(c,W))}if(se=a.memoizedState,se!==null&amp;&amp;(W=se.dehydrated,W!==null)){if(M)c.flags&amp;256?(Ta(c),c.flags&amp;=-257,c=dv(a,c,d)):c.memoizedState!==null?(Ma(),c.child=a.child,c.flags|=128,c=null):(Ma(),S=y.fallback,W=c.mode,y=Dp({mode:&quot;visible&quot;,children:y.children},W),S=Cl(S,W,d,null),S.flags|=2,y.return=c,S.return=c,y.sibling=S,c.child=y,iu(c,a.child,null,d),y=c.child,y.memoizedState=uv(d),y.childLanes=hv(a,U,d),c.memoizedState=cv,c=S);else if(Ta(c),Yv(W)){if(U=W.nextSibling&amp;&amp;W.nextSibling.dataset,U)var _e=U.dgst;U=_e,y=Error(i(419)),y.stack=&quot;&quot;,y.digest=U,Vh({value:y,source:null,stack:null}),c=dv(a,c,d)}else if(Vi||Gh(a,c,d,!1),U=(d&amp;a.childLanes)!==0,Vi||U){if(U=Vn,U!==null&amp;&amp;(y=d&amp;-d,y=(y&amp;42)!==0?1:wn(y),y=(y&amp;(U.suspendedLanes|d))!==0?0:y,y!==0&amp;&amp;y!==se.retryLane))throw se.retryLane=y,Xc(a,y),Xr(U,a,y),eT;W.data===&quot;$?&quot;||Dv(),c=dv(a,c,d)}else W.data===&quot;$?&quot;?(c.flags|=192,c.child=a.child,c=null):(a=se.treeContext,li=Ps(W.nextSibling),dr=c,En=!0,Dl=null,no=!1,a!==null&amp;&amp;(us[hs++]=Do,us[hs++]=No,us[hs++]=Rl,Do=a.id,No=a.overflow,Rl=c),c=fv(c,y.children),c.flags|=4096);return c}return S?(Ma(),S=y.fallback,W=c.mode,se=a.child,_e=se.sibling,y=Oo(se,{mode:&quot;hidden&quot;,children:y.children}),y.subtreeFlags=se.subtreeFlags&amp;65011712,_e!==null?S=Oo(_e,S):(S=Cl(S,W,d,null),S.flags|=2),S.return=c,y.return=c,y.sibling=S,c.child=y,y=S,S=c.child,W=a.child.memoizedState,W===null?W=uv(d):(se=W.cachePool,se!==null?(_e=Ii._currentValue,se=se.parent!==_e?{parent:_e,pool:_e}:se):se=K1(),W={baseLanes:W.baseLanes|d,cachePool:se}),S.memoizedState=W,S.childLanes=hv(a,U,d),c.memoizedState=cv,y):(Ta(c),d=a.child,a=d.sibling,d=Oo(d,{mode:&quot;visible&quot;,children:y.children}),d.return=c,d.sibling=null,a!==null&amp;&amp;(U=c.deletions,U===null?(c.deletions=[a],c.flags|=16):U.push(a)),c.child=d,c.memoizedState=null,d)}function fv(a,c){return c=Dp({mode:&quot;visible&quot;,children:c},a.mode),c.return=a,a.child=c}function Dp(a,c){return a=Hr(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function dv(a,c,d){return iu(c,a.child,null,d),a=fv(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function uT(a,c,d){a.lanes|=c;var y=a.alternate;y!==null&amp;&amp;(y.lanes|=c),D_(a.return,c,d)}function pv(a,c,d,y,S){var M=a.memoizedState;M===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:S}:(M.isBackwards=c,M.rendering=null,M.renderingStartTime=0,M.last=y,M.tail=d,M.tailMode=S)}function hT(a,c,d){var y=c.pendingProps,S=y.revealOrder,M=y.tail;if(er(a,c,y.children,d),y=Pi.current,(y&amp;2)!==0)y=y&amp;1|2,c.flags|=128;else{if(a!==null&amp;&amp;(a.flags&amp;128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&amp;&amp;uT(a,d,c);else if(a.tag===19)uT(a,d,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&amp;=1}switch(ce(Pi,y),S){case&quot;forwards&quot;:for(d=c.child,S=null;d!==null;)a=d.alternate,a!==null&amp;&amp;Ap(a)===null&amp;&amp;(S=d),d=d.sibling;d=S,d===null?(S=c.child,c.child=null):(S=d.sibling,d.sibling=null),pv(c,!1,S,d,M);break;case&quot;backwards&quot;:for(d=null,S=c.child,c.child=null;S!==null;){if(a=S.alternate,a!==null&amp;&amp;Ap(a)===null){c.child=S;break}a=S.sibling,S.sibling=d,d=S,S=a}pv(c,!0,d,null,M);break;case&quot;together&quot;:pv(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ko(a,c,d){if(a!==null&amp;&amp;(c.dependencies=a.dependencies),Da|=c.lanes,(d&amp;c.childLanes)===0)if(a!==null){if(Gh(a,c,d,!1),(d&amp;c.childLanes)===0)return null}else return null;if(a!==null&amp;&amp;c.child!==a.child)throw Error(i(153));if(c.child!==null){for(a=c.child,d=Oo(a,a.pendingProps),c.child=d,d.return=c;a.sibling!==null;)a=a.sibling,d=d.sibling=Oo(a,a.pendingProps),d.return=c;d.sibling=null}return c.child}function mv(a,c){return(a.lanes&amp;c)!==0?!0:(a=a.dependencies,!!(a!==null&amp;&amp;hp(a)))}function vU(a,c,d){switch(c.tag){case 3:ve(c,c.stateNode.containerInfo),ba(c,Ii,a.memoizedState.cache),Hh();break;case 27:case 5:Xe(c);break;case 4:ve(c,c.stateNode.containerInfo);break;case 10:ba(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(Ta(c),c.flags|=128,null):(d&amp;c.child.childLanes)!==0?cT(a,c,d):(Ta(c),a=ko(a,c,d),a!==null?a.sibling:null);Ta(c);break;case 19:var S=(a.flags&amp;128)!==0;if(y=(d&amp;c.childLanes)!==0,y||(Gh(a,c,d,!1),y=(d&amp;c.childLanes)!==0),S){if(y)return hT(a,c,d);c.flags|=128}if(S=c.memoizedState,S!==null&amp;&amp;(S.rendering=null,S.tail=null,S.lastEffect=null),ce(Pi,Pi.current),y)break;return null;case 22:case 23:return c.lanes=0,rT(a,c,d);case 24:ba(c,Ii,a.memoizedState.cache)}return ko(a,c,d)}function fT(a,c,d){if(a!==null)if(a.memoizedProps!==c.pendingProps)Vi=!0;else{if(!mv(a,d)&amp;&amp;(c.flags&amp;128)===0)return Vi=!1,vU(a,c,d);Vi=(a.flags&amp;131072)!==0}else Vi=!1,En&amp;&amp;(c.flags&amp;1048576)!==0&amp;&amp;V1(c,up,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var y=c.elementType,S=y._init;if(y=S(y._payload),c.type=y,typeof y==&quot;function&quot;)E_(y)?(a=kl(y,a),c.tag=1,c=aT(null,c,y,a,d)):(c.tag=0,c=lv(null,c,y,a,d));else{if(y!=null){if(S=y.$$typeof,S===E){c.tag=11,c=tT(null,c,y,a,d);break e}else if(S===A){c.tag=14,c=nT(null,c,y,a,d);break e}}throw c=z(y)||y,Error(i(306,c,&quot;&quot;))}}return c;case 0:return lv(a,c,c.type,c.pendingProps,d);case 1:return y=c.type,S=kl(y,c.pendingProps),aT(a,c,y,S,d);case 3:e:{if(ve(c,c.stateNode.containerInfo),a===null)throw Error(i(387));y=c.pendingProps;var M=c.memoizedState;S=M.element,F_(a,c),$h(c,y,null,d);var U=c.memoizedState;if(y=U.cache,ba(c,Ii,y),y!==M.cache&amp;&amp;N_(c,[Ii],d,!0),Kh(),y=U.element,M.isDehydrated)if(M={element:y,isDehydrated:!1,cache:U.cache},c.updateQueue.baseState=M,c.memoizedState=M,c.flags&amp;256){c=lT(a,c,y,d);break e}else if(y!==S){S=ls(Error(i(424)),c),Vh(S),c=lT(a,c,y,d);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName===&quot;HTML&quot;?a.ownerDocument.body:a}for(li=Ps(a.firstChild),dr=c,En=!0,Dl=null,no=!0,d=jE(c,null,y,d),c.child=d;d;)d.flags=d.flags&amp;-3|4096,d=d.sibling}else{if(Hh(),y===S){c=ko(a,c,d);break e}er(a,c,y,d)}c=c.child}return c;case 26:return Op(a,c),a===null?(d=gM(c.type,null,c.pendingProps,null))?c.memoizedState=d:En||(d=c.type,a=c.pendingProps,y=Wp(ae.current).createElement(d),y[Zn]=c,y[pi]=a,nr(y,d,a),Wn(y),c.stateNode=y):c.memoizedState=gM(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Xe(c),a===null&amp;&amp;En&amp;&amp;(y=c.stateNode=dM(c.type,c.pendingProps,ae.current),dr=c,no=!0,S=li,La(c.type)?(Kv=S,li=Ps(y.firstChild)):li=S),er(a,c,c.pendingProps.children,d),Op(a,c),a===null&amp;&amp;(c.flags|=4194304),c.child;case 5:return a===null&amp;&amp;En&amp;&amp;((S=y=li)&amp;&amp;(y=qU(y,c.type,c.pendingProps,no),y!==null?(c.stateNode=y,dr=c,li=Ps(y.firstChild),no=!1,S=!0):S=!1),S||Nl(c)),Xe(c),S=c.type,M=c.pendingProps,U=a!==null?a.memoizedProps:null,y=M.children,Wv(S,M)?y=null:U!==null&amp;&amp;Wv(S,U)&amp;&amp;(c.flags|=32),c.memoizedState!==null&amp;&amp;(S=j_(a,c,hU,null,null,d),vf._currentValue=S),Op(a,c),er(a,c,y,d),c.child;case 6:return a===null&amp;&amp;En&amp;&amp;((a=d=li)&amp;&amp;(d=YU(d,c.pendingProps,no),d!==null?(c.stateNode=d,dr=c,li=null,a=!0):a=!1),a||Nl(c)),null;case 13:return cT(a,c,d);case 4:return ve(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=iu(c,null,y,d):er(a,c,y,d),c.child;case 11:return tT(a,c,c.type,c.pendingProps,d);case 7:return er(a,c,c.pendingProps,d),c.child;case 8:return er(a,c,c.pendingProps.children,d),c.child;case 12:return er(a,c,c.pendingProps.children,d),c.child;case 10:return y=c.pendingProps,ba(c,c.type,y.value),er(a,c,y.children,d),c.child;case 9:return S=c.type._context,y=c.pendingProps.children,Pl(c),S=sr(S),y=y(S),c.flags|=1,er(a,c,y,d),c.child;case 14:return nT(a,c,c.type,c.pendingProps,d);case 15:return iT(a,c,c.type,c.pendingProps,d);case 19:return hT(a,c,d);case 31:return y=c.pendingProps,d=c.mode,y={mode:y.mode,children:y.children},a===null?(d=Dp(y,d),d.ref=c.ref,c.child=d,d.return=c,c=d):(d=Oo(a.child,y),d.ref=c.ref,c.child=d,d.return=c,c=d),c;case 22:return rT(a,c,d);case 24:return Pl(c),y=sr(Ii),a===null?(S=L_(),S===null&amp;&amp;(S=Vn,M=I_(),S.pooledCache=M,M.refCount++,M!==null&amp;&amp;(S.pooledCacheLanes|=d),S=M),c.memoizedState={parent:y,cache:S},k_(c),ba(c,Ii,S)):((a.lanes&amp;d)!==0&amp;&amp;(F_(a,c),$h(c,null,null,d),Kh()),S=a.memoizedState,M=c.memoizedState,S.parent!==y?(S={parent:y,cache:y},c.memoizedState=S,c.lanes===0&amp;&amp;(c.memoizedState=c.updateQueue.baseState=S),ba(c,Ii,y)):(y=M.cache,ba(c,Ii,y),y!==S.cache&amp;&amp;N_(c,[Ii],d,!0))),er(a,c,c.pendingProps.children,d),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Fo(a){a.flags|=4}function dT(a,c){if(c.type!==&quot;stylesheet&quot;||(c.state.loading&amp;4)!==0)a.flags&amp;=-16777217;else if(a.flags|=16777216,!xM(c)){if(c=fs.current,c!==null&amp;&amp;((pn&amp;4194048)===pn?io!==null:(pn&amp;62914560)!==pn&amp;&amp;(pn&amp;536870912)===0||c!==io))throw qh=U_,$1;a.flags|=8192}}function Np(a,c){c!==null&amp;&amp;(a.flags|=4),a.flags&amp;16384&amp;&amp;(c=a.tag!==22?tt():536870912,a.lanes|=c,au|=c)}function rf(a,c){if(!En)switch(a.tailMode){case&quot;hidden&quot;:c=a.tail;for(var d=null;c!==null;)c.alternate!==null&amp;&amp;(d=c),c=c.sibling;d===null?a.tail=null:d.sibling=null;break;case&quot;collapsed&quot;:d=a.tail;for(var y=null;d!==null;)d.alternate!==null&amp;&amp;(y=d),d=d.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function ti(a){var c=a.alternate!==null&amp;&amp;a.alternate.child===a.child,d=0,y=0;if(c)for(var S=a.child;S!==null;)d|=S.lanes|S.childLanes,y|=S.subtreeFlags&amp;65011712,y|=S.flags&amp;65011712,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)d|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=y,a.childLanes=d,c}function bU(a,c,d){var y=c.pendingProps;switch(C_(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(c),null;case 1:return ti(c),null;case 3:return d=c.stateNode,y=null,a!==null&amp;&amp;(y=a.memoizedState.cache),c.memoizedState.cache!==y&amp;&amp;(c.flags|=2048),Po(Ii),He(),d.pendingContext&amp;&amp;(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&amp;&amp;(Bh(c)?Fo(c):a===null||a.memoizedState.isDehydrated&amp;&amp;(c.flags&amp;256)===0||(c.flags|=1024,W1())),ti(c),null;case 26:return d=c.memoizedState,a===null?(Fo(c),d!==null?(ti(c),dT(c,d)):(ti(c),c.flags&amp;=-16777217)):d?d!==a.memoizedState?(Fo(c),ti(c),dT(c,d)):(ti(c),c.flags&amp;=-16777217):(a.memoizedProps!==y&amp;&amp;Fo(c),ti(c),c.flags&amp;=-16777217),null;case 27:lt(c),d=ae.current;var S=c.type;if(a!==null&amp;&amp;c.stateNode!=null)a.memoizedProps!==y&amp;&amp;Fo(c);else{if(!y){if(c.stateNode===null)throw Error(i(166));return ti(c),null}a=ie.current,Bh(c)?G1(c):(a=dM(S,y,d),c.stateNode=a,Fo(c))}return ti(c),null;case 5:if(lt(c),d=c.type,a!==null&amp;&amp;c.stateNode!=null)a.memoizedProps!==y&amp;&amp;Fo(c);else{if(!y){if(c.stateNode===null)throw Error(i(166));return ti(c),null}if(a=ie.current,Bh(c))G1(c);else{switch(S=Wp(ae.current),a){case 1:a=S.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,d);break;case 2:a=S.createElementNS(&quot;http://www.w3.org/1998/Math/MathML&quot;,d);break;default:switch(d){case&quot;svg&quot;:a=S.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,d);break;case&quot;math&quot;:a=S.createElementNS(&quot;http://www.w3.org/1998/Math/MathML&quot;,d);break;case&quot;script&quot;:a=S.createElement(&quot;div&quot;),a.innerHTML=&quot;&lt;script&gt;&lt;\/script&gt;&quot;,a=a.removeChild(a.firstChild);break;case&quot;select&quot;:a=typeof y.is==&quot;string&quot;?S.createElement(&quot;select&quot;,{is:y.is}):S.createElement(&quot;select&quot;),y.multiple?a.multiple=!0:y.size&amp;&amp;(a.size=y.size);break;default:a=typeof y.is==&quot;string&quot;?S.createElement(d,{is:y.is}):S.createElement(d)}}a[Zn]=c,a[pi]=y;e:for(S=c.child;S!==null;){if(S.tag===5||S.tag===6)a.appendChild(S.stateNode);else if(S.tag!==4&amp;&amp;S.tag!==27&amp;&amp;S.child!==null){S.child.return=S,S=S.child;continue}if(S===c)break e;for(;S.sibling===null;){if(S.return===null||S.return===c)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}c.stateNode=a;e:switch(nr(a,d,y),d){case&quot;button&quot;:case&quot;input&quot;:case&quot;select&quot;:case&quot;textarea&quot;:a=!!y.autoFocus;break e;case&quot;img&quot;:a=!0;break e;default:a=!1}a&amp;&amp;Fo(c)}}return ti(c),c.flags&amp;=-16777217,null;case 6:if(a&amp;&amp;c.stateNode!=null)a.memoizedProps!==y&amp;&amp;Fo(c);else{if(typeof y!=&quot;string&quot;&amp;&amp;c.stateNode===null)throw Error(i(166));if(a=ae.current,Bh(c)){if(a=c.stateNode,d=c.memoizedProps,y=null,S=dr,S!==null)switch(S.tag){case 27:case 5:y=S.memoizedProps}a[Zn]=c,a=!!(a.nodeValue===d||y!==null&amp;&amp;y.suppressHydrationWarning===!0||oM(a.nodeValue,d)),a||Nl(c)}else a=Wp(a).createTextNode(y),a[Zn]=c,c.stateNode=a}return ti(c),null;case 13:if(y=c.memoizedState,a===null||a.memoizedState!==null&amp;&amp;a.memoizedState.dehydrated!==null){if(S=Bh(c),y!==null&amp;&amp;y.dehydrated!==null){if(a===null){if(!S)throw Error(i(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(i(317));S[Zn]=c}else Hh(),(c.flags&amp;128)===0&amp;&amp;(c.memoizedState=null),c.flags|=4;ti(c),S=!1}else S=W1(),a!==null&amp;&amp;a.memoizedState!==null&amp;&amp;(a.memoizedState.hydrationErrors=S),S=!0;if(!S)return c.flags&amp;256?(Uo(c),c):(Uo(c),null)}if(Uo(c),(c.flags&amp;128)!==0)return c.lanes=d,c;if(d=y!==null,a=a!==null&amp;&amp;a.memoizedState!==null,d){y=c.child,S=null,y.alternate!==null&amp;&amp;y.alternate.memoizedState!==null&amp;&amp;y.alternate.memoizedState.cachePool!==null&amp;&amp;(S=y.alternate.memoizedState.cachePool.pool);var M=null;y.memoizedState!==null&amp;&amp;y.memoizedState.cachePool!==null&amp;&amp;(M=y.memoizedState.cachePool.pool),M!==S&amp;&amp;(y.flags|=2048)}return d!==a&amp;&amp;d&amp;&amp;(c.child.flags|=8192),Np(c,c.updateQueue),ti(c),null;case 4:return He(),a===null&amp;&amp;Bv(c.stateNode.containerInfo),ti(c),null;case 10:return Po(c.type),ti(c),null;case 19:if(le(Pi),S=c.memoizedState,S===null)return ti(c),null;if(y=(c.flags&amp;128)!==0,M=S.rendering,M===null)if(y)rf(S,!1);else{if(ci!==0||a!==null&amp;&amp;(a.flags&amp;128)!==0)for(a=c.child;a!==null;){if(M=Ap(a),M!==null){for(c.flags|=128,rf(S,!1),a=M.updateQueue,c.updateQueue=a,Np(c,a),c.subtreeFlags=0,a=d,d=c.child;d!==null;)H1(d,a),d=d.sibling;return ce(Pi,Pi.current&amp;1|2),c.child}a=a.sibling}S.tail!==null&amp;&amp;Fe()&gt;Lp&amp;&amp;(c.flags|=128,y=!0,rf(S,!1),c.lanes=4194304)}else{if(!y)if(a=Ap(M),a!==null){if(c.flags|=128,y=!0,a=a.updateQueue,c.updateQueue=a,Np(c,a),rf(S,!0),S.tail===null&amp;&amp;S.tailMode===&quot;hidden&quot;&amp;&amp;!M.alternate&amp;&amp;!En)return ti(c),null}else 2*Fe()-S.renderingStartTime&gt;Lp&amp;&amp;d!==536870912&amp;&amp;(c.flags|=128,y=!0,rf(S,!1),c.lanes=4194304);S.isBackwards?(M.sibling=c.child,c.child=M):(a=S.last,a!==null?a.sibling=M:c.child=M,S.last=M)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=Fe(),c.sibling=null,a=Pi.current,ce(Pi,y?a&amp;1|2:a&amp;1),c):(ti(c),null);case 22:case 23:return Uo(c),V_(),y=c.memoizedState!==null,a!==null?a.memoizedState!==null!==y&amp;&amp;(c.flags|=8192):y&amp;&amp;(c.flags|=8192),y?(d&amp;536870912)!==0&amp;&amp;(c.flags&amp;128)===0&amp;&amp;(ti(c),c.subtreeFlags&amp;6&amp;&amp;(c.flags|=8192)):ti(c),d=c.updateQueue,d!==null&amp;&amp;Np(c,d.retryQueue),d=null,a!==null&amp;&amp;a.memoizedState!==null&amp;&amp;a.memoizedState.cachePool!==null&amp;&amp;(d=a.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&amp;&amp;c.memoizedState.cachePool!==null&amp;&amp;(y=c.memoizedState.cachePool.pool),y!==d&amp;&amp;(c.flags|=2048),a!==null&amp;&amp;le(Ll),null;case 24:return d=null,a!==null&amp;&amp;(d=a.memoizedState.cache),c.memoizedState.cache!==d&amp;&amp;(c.flags|=2048),Po(Ii),ti(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function xU(a,c){switch(C_(c),c.tag){case 1:return a=c.flags,a&amp;65536?(c.flags=a&amp;-65537|128,c):null;case 3:return Po(Ii),He(),a=c.flags,(a&amp;65536)!==0&amp;&amp;(a&amp;128)===0?(c.flags=a&amp;-65537|128,c):null;case 26:case 27:case 5:return lt(c),null;case 13:if(Uo(c),a=c.memoizedState,a!==null&amp;&amp;a.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Hh()}return a=c.flags,a&amp;65536?(c.flags=a&amp;-65537|128,c):null;case 19:return le(Pi),null;case 4:return He(),null;case 10:return Po(c.type),null;case 22:case 23:return Uo(c),V_(),a!==null&amp;&amp;le(Ll),a=c.flags,a&amp;65536?(c.flags=a&amp;-65537|128,c):null;case 24:return Po(Ii),null;case 25:return null;default:return null}}function pT(a,c){switch(C_(c),c.tag){case 3:Po(Ii),He();break;case 26:case 27:case 5:lt(c);break;case 4:He();break;case 13:Uo(c);break;case 19:le(Pi);break;case 10:Po(c.type);break;case 22:case 23:Uo(c),V_(),a!==null&amp;&amp;le(Ll);break;case 24:Po(Ii)}}function sf(a,c){try{var d=c.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var S=y.next;d=S;do{if((d.tag&amp;a)===a){y=void 0;var M=d.create,U=d.inst;y=M(),U.destroy=y}d=d.next}while(d!==S)}}catch(W){zn(c,c.return,W)}}function Aa(a,c,d){try{var y=c.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var M=S.next;y=M;do{if((y.tag&amp;a)===a){var U=y.inst,W=U.destroy;if(W!==void 0){U.destroy=void 0,S=c;var se=d,_e=W;try{_e()}catch(De){zn(S,se,De)}}}y=y.next}while(y!==M)}}catch(De){zn(c,c.return,De)}}function mT(a){var c=a.updateQueue;if(c!==null){var d=a.stateNode;try{nE(c,d)}catch(y){zn(a,a.return,y)}}}function gT(a,c,d){d.props=kl(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(y){zn(a,c,y)}}function of(a,c){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof d==&quot;function&quot;?a.refCleanup=d(y):d.current=y}}catch(S){zn(a,c,S)}}function ro(a,c){var d=a.ref,y=a.refCleanup;if(d!==null)if(typeof y==&quot;function&quot;)try{y()}catch(S){zn(a,c,S)}finally{a.refCleanup=null,a=a.alternate,a!=null&amp;&amp;(a.refCleanup=null)}else if(typeof d==&quot;function&quot;)try{d(null)}catch(S){zn(a,c,S)}else d.current=null}function yT(a){var c=a.type,d=a.memoizedProps,y=a.stateNode;try{e:switch(c){case&quot;button&quot;:case&quot;input&quot;:case&quot;select&quot;:case&quot;textarea&quot;:d.autoFocus&amp;&amp;y.focus();break e;case&quot;img&quot;:d.src?y.src=d.src:d.srcSet&amp;&amp;(y.srcset=d.srcSet)}}catch(S){zn(a,a.return,S)}}function gv(a,c,d){try{var y=a.stateNode;VU(y,a.type,d,c),y[pi]=c}catch(S){zn(a,a.return,S)}}function _T(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&amp;&amp;La(a.type)||a.tag===4}function yv(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||_T(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&amp;&amp;a.tag!==6&amp;&amp;a.tag!==18;){if(a.tag===27&amp;&amp;La(a.type)||a.flags&amp;2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&amp;2))return a.stateNode}}function _v(a,c,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?(d.nodeType===9?d.body:d.nodeName===&quot;HTML&quot;?d.ownerDocument.body:d).insertBefore(a,c):(c=d.nodeType===9?d.body:d.nodeName===&quot;HTML&quot;?d.ownerDocument.body:d,c.appendChild(a),d=d._reactRootContainer,d!=null||c.onclick!==null||(c.onclick=jp));else if(y!==4&amp;&amp;(y===27&amp;&amp;La(a.type)&amp;&amp;(d=a.stateNode,c=null),a=a.child,a!==null))for(_v(a,c,d),a=a.sibling;a!==null;)_v(a,c,d),a=a.sibling}function Ip(a,c,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?d.insertBefore(a,c):d.appendChild(a);else if(y!==4&amp;&amp;(y===27&amp;&amp;La(a.type)&amp;&amp;(d=a.stateNode),a=a.child,a!==null))for(Ip(a,c,d),a=a.sibling;a!==null;)Ip(a,c,d),a=a.sibling}function vT(a){var c=a.stateNode,d=a.memoizedProps;try{for(var y=a.type,S=c.attributes;S.length;)c.removeAttributeNode(S[0]);nr(c,y,d),c[Zn]=a,c[pi]=d}catch(M){zn(a,a.return,M)}}var zo=!1,yi=!1,vv=!1,bT=typeof WeakSet==&quot;function&quot;?WeakSet:Set,Gi=null;function SU(a,c){if(a=a.containerInfo,Gv=Zp,a=D1(a),y_(a)){if(&quot;selectionStart&quot;in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&amp;&amp;d.defaultView||window;var y=d.getSelection&amp;&amp;d.getSelection();if(y&amp;&amp;y.rangeCount!==0){d=y.anchorNode;var S=y.anchorOffset,M=y.focusNode;y=y.focusOffset;try{d.nodeType,M.nodeType}catch{d=null;break e}var U=0,W=-1,se=-1,_e=0,De=0,ke=a,xe=null;t:for(;;){for(var Ee;ke!==d||S!==0&amp;&amp;ke.nodeType!==3||(W=U+S),ke!==M||y!==0&amp;&amp;ke.nodeType!==3||(se=U+y),ke.nodeType===3&amp;&amp;(U+=ke.nodeValue.length),(Ee=ke.firstChild)!==null;)xe=ke,ke=Ee;for(;;){if(ke===a)break t;if(xe===d&amp;&amp;++_e===S&amp;&amp;(W=U),xe===M&amp;&amp;++De===y&amp;&amp;(se=U),(Ee=ke.nextSibling)!==null)break;ke=xe,xe=ke.parentNode}ke=Ee}d=W===-1||se===-1?null:{start:W,end:se}}else d=null}d=d||{start:0,end:0}}else d=null;for(jv={focusedElem:a,selectionRange:d},Zp=!1,Gi=c;Gi!==null;)if(c=Gi,a=c.child,(c.subtreeFlags&amp;1024)!==0&amp;&amp;a!==null)a.return=c,Gi=a;else for(;Gi!==null;){switch(c=Gi,M=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&amp;1024)!==0&amp;&amp;M!==null){a=void 0,d=c,S=M.memoizedProps,M=M.memoizedState,y=d.stateNode;try{var kt=kl(d.type,S,d.elementType===d.type);a=y.getSnapshotBeforeUpdate(kt,M),y.__reactInternalSnapshotBeforeUpdate=a}catch(Nt){zn(d,d.return,Nt)}}break;case 3:if((a&amp;1024)!==0){if(a=c.stateNode.containerInfo,d=a.nodeType,d===9)qv(a);else if(d===1)switch(a.nodeName){case&quot;HEAD&quot;:case&quot;HTML&quot;:case&quot;BODY&quot;:qv(a);break;default:a.textContent=&quot;&quot;}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&amp;1024)!==0)throw Error(i(163))}if(a=c.sibling,a!==null){a.return=c.return,Gi=a;break}Gi=c.return}}function xT(a,c,d){var y=d.flags;switch(d.tag){case 0:case 11:case 15:Ca(a,d),y&amp;4&amp;&amp;sf(5,d);break;case 1:if(Ca(a,d),y&amp;4)if(a=d.stateNode,c===null)try{a.componentDidMount()}catch(U){zn(d,d.return,U)}else{var S=kl(d.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(S,c,a.__reactInternalSnapshotBeforeUpdate)}catch(U){zn(d,d.return,U)}}y&amp;64&amp;&amp;mT(d),y&amp;512&amp;&amp;of(d,d.return);break;case 3:if(Ca(a,d),y&amp;64&amp;&amp;(a=d.updateQueue,a!==null)){if(c=null,d.child!==null)switch(d.child.tag){case 27:case 5:c=d.child.stateNode;break;case 1:c=d.child.stateNode}try{nE(a,c)}catch(U){zn(d,d.return,U)}}break;case 27:c===null&amp;&amp;y&amp;4&amp;&amp;vT(d);case 26:case 5:Ca(a,d),c===null&amp;&amp;y&amp;4&amp;&amp;yT(d),y&amp;512&amp;&amp;of(d,d.return);break;case 12:Ca(a,d);break;case 13:Ca(a,d),y&amp;4&amp;&amp;ET(a,d),y&amp;64&amp;&amp;(a=d.memoizedState,a!==null&amp;&amp;(a=a.dehydrated,a!==null&amp;&amp;(d=DU.bind(null,d),KU(a,d))));break;case 22:if(y=d.memoizedState!==null||zo,!y){c=c!==null&amp;&amp;c.memoizedState!==null||yi,S=zo;var M=yi;zo=y,(yi=c)&amp;&amp;!M?Ra(a,d,(d.subtreeFlags&amp;8772)!==0):Ca(a,d),zo=S,yi=M}break;case 30:break;default:Ca(a,d)}}function ST(a){var c=a.alternate;c!==null&amp;&amp;(a.alternate=null,ST(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&amp;&amp;(c=a.stateNode,c!==null&amp;&amp;os(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Xn=null,Cr=!1;function Bo(a,c,d){for(d=d.child;d!==null;)wT(a,c,d),d=d.sibling}function wT(a,c,d){if(Ze&amp;&amp;typeof Ze.onCommitFiberUnmount==&quot;function&quot;)try{Ze.onCommitFiberUnmount(Me,d)}catch{}switch(d.tag){case 26:yi||ro(d,c),Bo(a,c,d),d.memoizedState?d.memoizedState.count--:d.stateNode&amp;&amp;(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:yi||ro(d,c);var y=Xn,S=Cr;La(d.type)&amp;&amp;(Xn=d.stateNode,Cr=!1),Bo(a,c,d),mf(d.stateNode),Xn=y,Cr=S;break;case 5:yi||ro(d,c);case 6:if(y=Xn,S=Cr,Xn=null,Bo(a,c,d),Xn=y,Cr=S,Xn!==null)if(Cr)try{(Xn.nodeType===9?Xn.body:Xn.nodeName===&quot;HTML&quot;?Xn.ownerDocument.body:Xn).removeChild(d.stateNode)}catch(M){zn(d,c,M)}else try{Xn.removeChild(d.stateNode)}catch(M){zn(d,c,M)}break;case 18:Xn!==null&amp;&amp;(Cr?(a=Xn,hM(a.nodeType===9?a.body:a.nodeName===&quot;HTML&quot;?a.ownerDocument.body:a,d.stateNode),wf(a)):hM(Xn,d.stateNode));break;case 4:y=Xn,S=Cr,Xn=d.stateNode.containerInfo,Cr=!0,Bo(a,c,d),Xn=y,Cr=S;break;case 0:case 11:case 14:case 15:yi||Aa(2,d,c),yi||Aa(4,d,c),Bo(a,c,d);break;case 1:yi||(ro(d,c),y=d.stateNode,typeof y.componentWillUnmount==&quot;function&quot;&amp;&amp;gT(d,c,y)),Bo(a,c,d);break;case 21:Bo(a,c,d);break;case 22:yi=(y=yi)||d.memoizedState!==null,Bo(a,c,d),yi=y;break;default:Bo(a,c,d)}}function ET(a,c){if(c.memoizedState===null&amp;&amp;(a=c.alternate,a!==null&amp;&amp;(a=a.memoizedState,a!==null&amp;&amp;(a=a.dehydrated,a!==null))))try{wf(a)}catch(d){zn(c,c.return,d)}}function wU(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&amp;&amp;(c=a.stateNode=new bT),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&amp;&amp;(c=a._retryCache=new bT),c;default:throw Error(i(435,a.tag))}}function bv(a,c){var d=wU(a);c.forEach(function(y){var S=NU.bind(null,a,y);d.has(y)||(d.add(y),y.then(S,S))})}function Vr(a,c){var d=c.deletions;if(d!==null)for(var y=0;y&lt;d.length;y++){var S=d[y],M=a,U=c,W=U;e:for(;W!==null;){switch(W.tag){case 27:if(La(W.type)){Xn=W.stateNode,Cr=!1;break e}break;case 5:Xn=W.stateNode,Cr=!1;break e;case 3:case 4:Xn=W.stateNode.containerInfo,Cr=!0;break e}W=W.return}if(Xn===null)throw Error(i(160));wT(M,U,S),Xn=null,Cr=!1,M=S.alternate,M!==null&amp;&amp;(M.return=null),S.return=null}if(c.subtreeFlags&amp;13878)for(c=c.child;c!==null;)TT(c,a),c=c.sibling}var Is=null;function TT(a,c){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Vr(c,a),Gr(a),y&amp;4&amp;&amp;(Aa(3,a,a.return),sf(3,a),Aa(5,a,a.return));break;case 1:Vr(c,a),Gr(a),y&amp;512&amp;&amp;(yi||d===null||ro(d,d.return)),y&amp;64&amp;&amp;zo&amp;&amp;(a=a.updateQueue,a!==null&amp;&amp;(y=a.callbacks,y!==null&amp;&amp;(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?y:d.concat(y))));break;case 26:var S=Is;if(Vr(c,a),Gr(a),y&amp;512&amp;&amp;(yi||d===null||ro(d,d.return)),y&amp;4){var M=d!==null?d.memoizedState:null;if(y=a.memoizedState,d===null)if(y===null)if(a.stateNode===null){e:{y=a.type,d=a.memoizedProps,S=S.ownerDocument||S;t:switch(y){case&quot;title&quot;:M=S.getElementsByTagName(&quot;title&quot;)[0],(!M||M[kr]||M[Zn]||M.namespaceURI===&quot;http://www.w3.org/2000/svg&quot;||M.hasAttribute(&quot;itemprop&quot;))&amp;&amp;(M=S.createElement(y),S.head.insertBefore(M,S.querySelector(&quot;head &gt; title&quot;))),nr(M,y,d),M[Zn]=a,Wn(M),y=M;break e;case&quot;link&quot;:var U=vM(&quot;link&quot;,&quot;href&quot;,S).get(y+(d.href||&quot;&quot;));if(U){for(var W=0;W&lt;U.length;W++)if(M=U[W],M.getAttribute(&quot;href&quot;)===(d.href==null||d.href===&quot;&quot;?null:d.href)&amp;&amp;M.getAttribute(&quot;rel&quot;)===(d.rel==null?null:d.rel)&amp;&amp;M.getAttribute(&quot;title&quot;)===(d.title==null?null:d.title)&amp;&amp;M.getAttribute(&quot;crossorigin&quot;)===(d.crossOrigin==null?null:d.crossOrigin)){U.splice(W,1);break t}}M=S.createElement(y),nr(M,y,d),S.head.appendChild(M);break;case&quot;meta&quot;:if(U=vM(&quot;meta&quot;,&quot;content&quot;,S).get(y+(d.content||&quot;&quot;))){for(W=0;W&lt;U.length;W++)if(M=U[W],M.getAttribute(&quot;content&quot;)===(d.content==null?null:&quot;&quot;+d.content)&amp;&amp;M.getAttribute(&quot;name&quot;)===(d.name==null?null:d.name)&amp;&amp;M.getAttribute(&quot;property&quot;)===(d.property==null?null:d.property)&amp;&amp;M.getAttribute(&quot;http-equiv&quot;)===(d.httpEquiv==null?null:d.httpEquiv)&amp;&amp;M.getAttribute(&quot;charset&quot;)===(d.charSet==null?null:d.charSet)){U.splice(W,1);break t}}M=S.createElement(y),nr(M,y,d),S.head.appendChild(M);break;default:throw Error(i(468,y))}M[Zn]=a,Wn(M),y=M}a.stateNode=y}else bM(S,a.type,a.stateNode);else a.stateNode=_M(S,y,a.memoizedProps);else M!==y?(M===null?d.stateNode!==null&amp;&amp;(d=d.stateNode,d.parentNode.removeChild(d)):M.count--,y===null?bM(S,a.type,a.stateNode):_M(S,y,a.memoizedProps)):y===null&amp;&amp;a.stateNode!==null&amp;&amp;gv(a,a.memoizedProps,d.memoizedProps)}break;case 27:Vr(c,a),Gr(a),y&amp;512&amp;&amp;(yi||d===null||ro(d,d.return)),d!==null&amp;&amp;y&amp;4&amp;&amp;gv(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Vr(c,a),Gr(a),y&amp;512&amp;&amp;(yi||d===null||ro(d,d.return)),a.flags&amp;32){S=a.stateNode;try{zr(S,&quot;&quot;)}catch(Ee){zn(a,a.return,Ee)}}y&amp;4&amp;&amp;a.stateNode!=null&amp;&amp;(S=a.memoizedProps,gv(a,S,d!==null?d.memoizedProps:S)),y&amp;1024&amp;&amp;(vv=!0);break;case 6:if(Vr(c,a),Gr(a),y&amp;4){if(a.stateNode===null)throw Error(i(162));y=a.memoizedProps,d=a.stateNode;try{d.nodeValue=y}catch(Ee){zn(a,a.return,Ee)}}break;case 3:if(Yp=null,S=Is,Is=Xp(c.containerInfo),Vr(c,a),Is=S,Gr(a),y&amp;4&amp;&amp;d!==null&amp;&amp;d.memoizedState.isDehydrated)try{wf(c.containerInfo)}catch(Ee){zn(a,a.return,Ee)}vv&amp;&amp;(vv=!1,MT(a));break;case 4:y=Is,Is=Xp(a.stateNode.containerInfo),Vr(c,a),Gr(a),Is=y;break;case 12:Vr(c,a),Gr(a);break;case 13:Vr(c,a),Gr(a),a.child.flags&amp;8192&amp;&amp;a.memoizedState!==null!=(d!==null&amp;&amp;d.memoizedState!==null)&amp;&amp;(Mv=Fe()),y&amp;4&amp;&amp;(y=a.updateQueue,y!==null&amp;&amp;(a.updateQueue=null,bv(a,y)));break;case 22:S=a.memoizedState!==null;var se=d!==null&amp;&amp;d.memoizedState!==null,_e=zo,De=yi;if(zo=_e||S,yi=De||se,Vr(c,a),yi=De,zo=_e,Gr(a),y&amp;8192)e:for(c=a.stateNode,c._visibility=S?c._visibility&amp;-2:c._visibility|1,S&amp;&amp;(d===null||se||zo||yi||Fl(a)),d=null,c=a;;){if(c.tag===5||c.tag===26){if(d===null){se=d=c;try{if(M=se.stateNode,S)U=M.style,typeof U.setProperty==&quot;function&quot;?U.setProperty(&quot;display&quot;,&quot;none&quot;,&quot;important&quot;):U.display=&quot;none&quot;;else{W=se.stateNode;var ke=se.memoizedProps.style,xe=ke!=null&amp;&amp;ke.hasOwnProperty(&quot;display&quot;)?ke.display:null;W.style.display=xe==null||typeof xe==&quot;boolean&quot;?&quot;&quot;:(&quot;&quot;+xe).trim()}}catch(Ee){zn(se,se.return,Ee)}}}else if(c.tag===6){if(d===null){se=c;try{se.stateNode.nodeValue=S?&quot;&quot;:se.memoizedProps}catch(Ee){zn(se,se.return,Ee)}}}else if((c.tag!==22&amp;&amp;c.tag!==23||c.memoizedState===null||c===a)&amp;&amp;c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;d===c&amp;&amp;(d=null),c=c.return}d===c&amp;&amp;(d=null),c.sibling.return=c.return,c=c.sibling}y&amp;4&amp;&amp;(y=a.updateQueue,y!==null&amp;&amp;(d=y.retryQueue,d!==null&amp;&amp;(y.retryQueue=null,bv(a,d))));break;case 19:Vr(c,a),Gr(a),y&amp;4&amp;&amp;(y=a.updateQueue,y!==null&amp;&amp;(a.updateQueue=null,bv(a,y)));break;case 30:break;case 21:break;default:Vr(c,a),Gr(a)}}function Gr(a){var c=a.flags;if(c&amp;2){try{for(var d,y=a.return;y!==null;){if(_T(y)){d=y;break}y=y.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var S=d.stateNode,M=yv(a);Ip(a,M,S);break;case 5:var U=d.stateNode;d.flags&amp;32&amp;&amp;(zr(U,&quot;&quot;),d.flags&amp;=-33);var W=yv(a);Ip(a,W,U);break;case 3:case 4:var se=d.stateNode.containerInfo,_e=yv(a);_v(a,_e,se);break;default:throw Error(i(161))}}catch(De){zn(a,a.return,De)}a.flags&amp;=-3}c&amp;4096&amp;&amp;(a.flags&amp;=-4097)}function MT(a){if(a.subtreeFlags&amp;1024)for(a=a.child;a!==null;){var c=a;MT(c),c.tag===5&amp;&amp;c.flags&amp;1024&amp;&amp;c.stateNode.reset(),a=a.sibling}}function Ca(a,c){if(c.subtreeFlags&amp;8772)for(c=c.child;c!==null;)xT(a,c.alternate,c),c=c.sibling}function Fl(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Aa(4,c,c.return),Fl(c);break;case 1:ro(c,c.return);var d=c.stateNode;typeof d.componentWillUnmount==&quot;function&quot;&amp;&amp;gT(c,c.return,d),Fl(c);break;case 27:mf(c.stateNode);case 26:case 5:ro(c,c.return),Fl(c);break;case 22:c.memoizedState===null&amp;&amp;Fl(c);break;case 30:Fl(c);break;default:Fl(c)}a=a.sibling}}function Ra(a,c,d){for(d=d&amp;&amp;(c.subtreeFlags&amp;8772)!==0,c=c.child;c!==null;){var y=c.alternate,S=a,M=c,U=M.flags;switch(M.tag){case 0:case 11:case 15:Ra(S,M,d),sf(4,M);break;case 1:if(Ra(S,M,d),y=M,S=y.stateNode,typeof S.componentDidMount==&quot;function&quot;)try{S.componentDidMount()}catch(_e){zn(y,y.return,_e)}if(y=M,S=y.updateQueue,S!==null){var W=y.stateNode;try{var se=S.shared.hiddenCallbacks;if(se!==null)for(S.shared.hiddenCallbacks=null,S=0;S&lt;se.length;S++)tE(se[S],W)}catch(_e){zn(y,y.return,_e)}}d&amp;&amp;U&amp;64&amp;&amp;mT(M),of(M,M.return);break;case 27:vT(M);case 26:case 5:Ra(S,M,d),d&amp;&amp;y===null&amp;&amp;U&amp;4&amp;&amp;yT(M),of(M,M.return);break;case 12:Ra(S,M,d);break;case 13:Ra(S,M,d),d&amp;&amp;U&amp;4&amp;&amp;ET(S,M);break;case 22:M.memoizedState===null&amp;&amp;Ra(S,M,d),of(M,M.return);break;case 30:break;default:Ra(S,M,d)}c=c.sibling}}function xv(a,c){var d=null;a!==null&amp;&amp;a.memoizedState!==null&amp;&amp;a.memoizedState.cachePool!==null&amp;&amp;(d=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&amp;&amp;c.memoizedState.cachePool!==null&amp;&amp;(a=c.memoizedState.cachePool.pool),a!==d&amp;&amp;(a!=null&amp;&amp;a.refCount++,d!=null&amp;&amp;jh(d))}function Sv(a,c){a=null,c.alternate!==null&amp;&amp;(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&amp;&amp;(c.refCount++,a!=null&amp;&amp;jh(a))}function so(a,c,d,y){if(c.subtreeFlags&amp;10256)for(c=c.child;c!==null;)AT(a,c,d,y),c=c.sibling}function AT(a,c,d,y){var S=c.flags;switch(c.tag){case 0:case 11:case 15:so(a,c,d,y),S&amp;2048&amp;&amp;sf(9,c);break;case 1:so(a,c,d,y);break;case 3:so(a,c,d,y),S&amp;2048&amp;&amp;(a=null,c.alternate!==null&amp;&amp;(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&amp;&amp;(c.refCount++,a!=null&amp;&amp;jh(a)));break;case 12:if(S&amp;2048){so(a,c,d,y),a=c.stateNode;try{var M=c.memoizedProps,U=M.id,W=M.onPostCommit;typeof W==&quot;function&quot;&amp;&amp;W(U,c.alternate===null?&quot;mount&quot;:&quot;update&quot;,a.passiveEffectDuration,-0)}catch(se){zn(c,c.return,se)}}else so(a,c,d,y);break;case 13:so(a,c,d,y);break;case 23:break;case 22:M=c.stateNode,U=c.alternate,c.memoizedState!==null?M._visibility&amp;2?so(a,c,d,y):af(a,c):M._visibility&amp;2?so(a,c,d,y):(M._visibility|=2,ru(a,c,d,y,(c.subtreeFlags&amp;10256)!==0)),S&amp;2048&amp;&amp;xv(U,c);break;case 24:so(a,c,d,y),S&amp;2048&amp;&amp;Sv(c.alternate,c);break;default:so(a,c,d,y)}}function ru(a,c,d,y,S){for(S=S&amp;&amp;(c.subtreeFlags&amp;10256)!==0,c=c.child;c!==null;){var M=a,U=c,W=d,se=y,_e=U.flags;switch(U.tag){case 0:case 11:case 15:ru(M,U,W,se,S),sf(8,U);break;case 23:break;case 22:var De=U.stateNode;U.memoizedState!==null?De._visibility&amp;2?ru(M,U,W,se,S):af(M,U):(De._visibility|=2,ru(M,U,W,se,S)),S&amp;&amp;_e&amp;2048&amp;&amp;xv(U.alternate,U);break;case 24:ru(M,U,W,se,S),S&amp;&amp;_e&amp;2048&amp;&amp;Sv(U.alternate,U);break;default:ru(M,U,W,se,S)}c=c.sibling}}function af(a,c){if(c.subtreeFlags&amp;10256)for(c=c.child;c!==null;){var d=a,y=c,S=y.flags;switch(y.tag){case 22:af(d,y),S&amp;2048&amp;&amp;xv(y.alternate,y);break;case 24:af(d,y),S&amp;2048&amp;&amp;Sv(y.alternate,y);break;default:af(d,y)}c=c.sibling}}var lf=8192;function su(a){if(a.subtreeFlags&amp;lf)for(a=a.child;a!==null;)CT(a),a=a.sibling}function CT(a){switch(a.tag){case 26:su(a),a.flags&amp;lf&amp;&amp;a.memoizedState!==null&amp;&amp;lk(Is,a.memoizedState,a.memoizedProps);break;case 5:su(a);break;case 3:case 4:var c=Is;Is=Xp(a.stateNode.containerInfo),su(a),Is=c;break;case 22:a.memoizedState===null&amp;&amp;(c=a.alternate,c!==null&amp;&amp;c.memoizedState!==null?(c=lf,lf=16777216,su(a),lf=c):su(a));break;default:su(a)}}function RT(a){var c=a.alternate;if(c!==null&amp;&amp;(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function cf(a){var c=a.deletions;if((a.flags&amp;16)!==0){if(c!==null)for(var d=0;d&lt;c.length;d++){var y=c[d];Gi=y,DT(y,a)}RT(a)}if(a.subtreeFlags&amp;10256)for(a=a.child;a!==null;)OT(a),a=a.sibling}function OT(a){switch(a.tag){case 0:case 11:case 15:cf(a),a.flags&amp;2048&amp;&amp;Aa(9,a,a.return);break;case 3:cf(a);break;case 12:cf(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&amp;&amp;c._visibility&amp;2&amp;&amp;(a.return===null||a.return.tag!==13)?(c._visibility&amp;=-3,Pp(a)):cf(a);break;default:cf(a)}}function Pp(a){var c=a.deletions;if((a.flags&amp;16)!==0){if(c!==null)for(var d=0;d&lt;c.length;d++){var y=c[d];Gi=y,DT(y,a)}RT(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Aa(8,c,c.return),Pp(c);break;case 22:d=c.stateNode,d._visibility&amp;2&amp;&amp;(d._visibility&amp;=-3,Pp(c));break;default:Pp(c)}a=a.sibling}}function DT(a,c){for(;Gi!==null;){var d=Gi;switch(d.tag){case 0:case 11:case 15:Aa(8,d,c);break;case 23:case 22:if(d.memoizedState!==null&amp;&amp;d.memoizedState.cachePool!==null){var y=d.memoizedState.cachePool.pool;y!=null&amp;&amp;y.refCount++}break;case 24:jh(d.memoizedState.cache)}if(y=d.child,y!==null)y.return=d,Gi=y;else e:for(d=a;Gi!==null;){y=Gi;var S=y.sibling,M=y.return;if(ST(y),y===d){Gi=null;break e}if(S!==null){S.return=M,Gi=S;break e}Gi=M}}}var EU={getCacheForType:function(a){var c=sr(Ii),d=c.data.get(a);return d===void 0&amp;&amp;(d=a(),c.data.set(a,d)),d}},TU=typeof WeakMap==&quot;function&quot;?WeakMap:Map,Cn=0,Vn=null,on=null,pn=0,Rn=0,jr=null,Oa=!1,ou=!1,wv=!1,Ho=0,ci=0,Da=0,zl=0,Ev=0,ds=0,au=0,uf=null,Rr=null,Tv=!1,Mv=0,Lp=1/0,Up=null,Na=null,tr=0,Ia=null,lu=null,cu=0,Av=0,Cv=null,NT=null,hf=0,Rv=null;function Wr(){if((Cn&amp;2)!==0&amp;&amp;pn!==0)return pn&amp;-pn;if(I.T!==null){var a=$c;return a!==0?a:Uv()}return zt()}function IT(){ds===0&amp;&amp;(ds=(pn&amp;536870912)===0||En?de():536870912);var a=fs.current;return a!==null&amp;&amp;(a.flags|=32),ds}function Xr(a,c,d){(a===Vn&amp;&amp;(Rn===2||Rn===9)||a.cancelPendingCommit!==null)&amp;&amp;(uu(a,0),Pa(a,pn,ds,!1)),Pe(a,d),((Cn&amp;2)===0||a!==Vn)&amp;&amp;(a===Vn&amp;&amp;((Cn&amp;2)===0&amp;&amp;(zl|=d),ci===4&amp;&amp;Pa(a,pn,ds,!1)),oo(a))}function PT(a,c,d){if((Cn&amp;6)!==0)throw Error(i(327));var y=!d&amp;&amp;(c&amp;124)===0&amp;&amp;(c&amp;a.expiredLanes)===0||It(a,c),S=y?CU(a,c):Nv(a,c,!0),M=y;do{if(S===0){ou&amp;&amp;!y&amp;&amp;Pa(a,c,0,!1);break}else{if(d=a.current.alternate,M&amp;&amp;!MU(d)){S=Nv(a,c,!1),M=!1;continue}if(S===2){if(M=c,a.errorRecoveryDisabledLanes&amp;M)var U=0;else U=a.pendingLanes&amp;-536870913,U=U!==0?U:U&amp;536870912?536870912:0;if(U!==0){c=U;e:{var W=a;S=uf;var se=W.current.memoizedState.isDehydrated;if(se&amp;&amp;(uu(W,U).flags|=256),U=Nv(W,U,!1),U!==2){if(wv&amp;&amp;!se){W.errorRecoveryDisabledLanes|=M,zl|=M,S=4;break e}M=Rr,Rr=S,M!==null&amp;&amp;(Rr===null?Rr=M:Rr.push.apply(Rr,M))}S=U}if(M=!1,S!==2)continue}}if(S===1){uu(a,0),Pa(a,c,0,!0);break}e:{switch(y=a,M=S,M){case 0:case 1:throw Error(i(345));case 4:if((c&amp;4194048)!==c)break;case 6:Pa(y,c,ds,!Oa);break e;case 2:Rr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&amp;62914560)===c&amp;&amp;(S=Mv+300-Fe(),10&lt;S)){if(Pa(y,c,ds,!Oa),Gt(y,0,!0)!==0)break e;y.timeoutHandle=cM(LT.bind(null,y,d,Rr,Up,Tv,c,ds,zl,au,Oa,M,2,-0,0),S);break e}LT(y,d,Rr,Up,Tv,c,ds,zl,au,Oa,M,0,-0,0)}}break}while(!0);oo(a)}function LT(a,c,d,y,S,M,U,W,se,_e,De,ke,xe,Ee){if(a.timeoutHandle=-1,ke=c.subtreeFlags,(ke&amp;8192||(ke&amp;16785408)===16785408)&amp;&amp;(_f={stylesheets:null,count:0,unsuspend:ak},CT(c),ke=ck(),ke!==null)){a.cancelPendingCommit=ke(VT.bind(null,a,c,M,d,y,S,U,W,se,De,1,xe,Ee)),Pa(a,M,U,!_e);return}VT(a,c,M,d,y,S,U,W,se)}function MU(a){for(var c=a;;){var d=c.tag;if((d===0||d===11||d===15)&amp;&amp;c.flags&amp;16384&amp;&amp;(d=c.updateQueue,d!==null&amp;&amp;(d=d.stores,d!==null)))for(var y=0;y&lt;d.length;y++){var S=d[y],M=S.getSnapshot;S=S.value;try{if(!Br(M(),S))return!1}catch{return!1}}if(d=c.child,c.subtreeFlags&amp;16384&amp;&amp;d!==null)d.return=c,c=d;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Pa(a,c,d,y){c&amp;=~Ev,c&amp;=~zl,a.suspendedLanes|=c,a.pingedLanes&amp;=~c,y&amp;&amp;(a.warmLanes|=c),y=a.expirationTimes;for(var S=c;0&lt;S;){var M=31-ut(S),U=1&lt;&lt;M;y[M]=-1,S&amp;=~U}d!==0&amp;&amp;Qe(a,d,c)}function kp(){return(Cn&amp;6)===0?(ff(0),!1):!0}function Ov(){if(on!==null){if(Rn===0)var a=on.return;else a=on,Io=Il=null,q_(a),nu=null,tf=0,a=on;for(;a!==null;)pT(a.alternate,a),a=a.return;on=null}}function uu(a,c){var d=a.timeoutHandle;d!==-1&amp;&amp;(a.timeoutHandle=-1,jU(d)),d=a.cancelPendingCommit,d!==null&amp;&amp;(a.cancelPendingCommit=null,d()),Ov(),Vn=a,on=d=Oo(a.current,null),pn=c,Rn=0,jr=null,Oa=!1,ou=It(a,c),wv=!1,au=ds=Ev=zl=Da=ci=0,Rr=uf=null,Tv=!1,(c&amp;8)!==0&amp;&amp;(c|=c&amp;32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&amp;=c;0&lt;y;){var S=31-ut(y),M=1&lt;&lt;S;c|=a[S],y&amp;=~M}return Ho=c,sp(),d}function UT(a,c){en=null,I.H=Ep,c===Xh||c===pp?(c=Q1(),Rn=3):c===$1?(c=Q1(),Rn=4):Rn=c===eT?8:c!==null&amp;&amp;typeof c==&quot;object&quot;&amp;&amp;typeof c.then==&quot;function&quot;?6:1,jr=c,on===null&amp;&amp;(ci=1,Rp(a,ls(c,a.current)))}function kT(){var a=I.H;return I.H=Ep,a===null?Ep:a}function FT(){var a=I.A;return I.A=EU,a}function Dv(){ci=4,Oa||(pn&amp;4194048)!==pn&amp;&amp;fs.current!==null||(ou=!0),(Da&amp;134217727)===0&amp;&amp;(zl&amp;134217727)===0||Vn===null||Pa(Vn,pn,ds,!1)}function Nv(a,c,d){var y=Cn;Cn|=2;var S=kT(),M=FT();(Vn!==a||pn!==c)&amp;&amp;(Up=null,uu(a,c)),c=!1;var U=ci;e:do try{if(Rn!==0&amp;&amp;on!==null){var W=on,se=jr;switch(Rn){case 8:Ov(),U=6;break e;case 3:case 2:case 9:case 6:fs.current===null&amp;&amp;(c=!0);var _e=Rn;if(Rn=0,jr=null,hu(a,W,se,_e),d&amp;&amp;ou){U=0;break e}break;default:_e=Rn,Rn=0,jr=null,hu(a,W,se,_e)}}AU(),U=ci;break}catch(De){UT(a,De)}while(!0);return c&amp;&amp;a.shellSuspendCounter++,Io=Il=null,Cn=y,I.H=S,I.A=M,on===null&amp;&amp;(Vn=null,pn=0,sp()),U}function AU(){for(;on!==null;)zT(on)}function CU(a,c){var d=Cn;Cn|=2;var y=kT(),S=FT();Vn!==a||pn!==c?(Up=null,Lp=Fe()+500,uu(a,c)):ou=It(a,c);e:do try{if(Rn!==0&amp;&amp;on!==null){c=on;var M=jr;t:switch(Rn){case 1:Rn=0,jr=null,hu(a,c,M,1);break;case 2:case 9:if(Z1(M)){Rn=0,jr=null,BT(c);break}c=function(){Rn!==2&amp;&amp;Rn!==9||Vn!==a||(Rn=7),oo(a)},M.then(c,c);break e;case 3:Rn=7;break e;case 4:Rn=5;break e;case 7:Z1(M)?(Rn=0,jr=null,BT(c)):(Rn=0,jr=null,hu(a,c,M,7));break;case 5:var U=null;switch(on.tag){case 26:U=on.memoizedState;case 5:case 27:var W=on;if(!U||xM(U)){Rn=0,jr=null;var se=W.sibling;if(se!==null)on=se;else{var _e=W.return;_e!==null?(on=_e,Fp(_e)):on=null}break t}}Rn=0,jr=null,hu(a,c,M,5);break;case 6:Rn=0,jr=null,hu(a,c,M,6);break;case 8:Ov(),ci=6;break e;default:throw Error(i(462))}}RU();break}catch(De){UT(a,De)}while(!0);return Io=Il=null,I.H=y,I.A=S,Cn=d,on!==null?0:(Vn=null,pn=0,sp(),ci)}function RU(){for(;on!==null&amp;&amp;!Ve();)zT(on)}function zT(a){var c=fT(a.alternate,a,Ho);a.memoizedProps=a.pendingProps,c===null?Fp(a):on=c}function BT(a){var c=a,d=c.alternate;switch(c.tag){case 15:case 0:c=oT(d,c,c.pendingProps,c.type,void 0,pn);break;case 11:c=oT(d,c,c.pendingProps,c.type.render,c.ref,pn);break;case 5:q_(c);default:pT(d,c),c=on=H1(c,Ho),c=fT(d,c,Ho)}a.memoizedProps=a.pendingProps,c===null?Fp(a):on=c}function hu(a,c,d,y){Io=Il=null,q_(c),nu=null,tf=0;var S=c.return;try{if(_U(a,S,c,d,pn)){ci=1,Rp(a,ls(d,a.current)),on=null;return}}catch(M){if(S!==null)throw on=S,M;ci=1,Rp(a,ls(d,a.current)),on=null;return}c.flags&amp;32768?(En||y===1?a=!0:ou||(pn&amp;536870912)!==0?a=!1:(Oa=a=!0,(y===2||y===9||y===3||y===6)&amp;&amp;(y=fs.current,y!==null&amp;&amp;y.tag===13&amp;&amp;(y.flags|=16384))),HT(c,a)):Fp(c)}function Fp(a){var c=a;do{if((c.flags&amp;32768)!==0){HT(c,Oa);return}a=c.return;var d=bU(c.alternate,c,Ho);if(d!==null){on=d;return}if(c=c.sibling,c!==null){on=c;return}on=c=a}while(c!==null);ci===0&amp;&amp;(ci=5)}function HT(a,c){do{var d=xU(a.alternate,a);if(d!==null){d.flags&amp;=32767,on=d;return}if(d=a.return,d!==null&amp;&amp;(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!c&amp;&amp;(a=a.sibling,a!==null)){on=a;return}on=a=d}while(a!==null);ci=6,on=null}function VT(a,c,d,y,S,M,U,W,se){a.cancelPendingCommit=null;do zp();while(tr!==0);if((Cn&amp;6)!==0)throw Error(i(327));if(c!==null){if(c===a.current)throw Error(i(177));if(M=c.lanes|c.childLanes,M|=S_,st(a,d,M,U,W,se),a===Vn&amp;&amp;(on=Vn=null,pn=0),lu=c,Ia=a,cu=d,Av=M,Cv=S,NT=y,(c.subtreeFlags&amp;10256)!==0||(c.flags&amp;10256)!==0?(a.callbackNode=null,a.callbackPriority=0,IU(te,function(){return qT(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(c.flags&amp;13878)!==0,(c.subtreeFlags&amp;13878)!==0||y){y=I.T,I.T=null,S=j.p,j.p=2,U=Cn,Cn|=4;try{SU(a,c,d)}finally{Cn=U,j.p=S,I.T=y}}tr=1,GT(),jT(),WT()}}function GT(){if(tr===1){tr=0;var a=Ia,c=lu,d=(c.flags&amp;13878)!==0;if((c.subtreeFlags&amp;13878)!==0||d){d=I.T,I.T=null;var y=j.p;j.p=2;var S=Cn;Cn|=4;try{TT(c,a);var M=jv,U=D1(a.containerInfo),W=M.focusedElem,se=M.selectionRange;if(U!==W&amp;&amp;W&amp;&amp;W.ownerDocument&amp;&amp;O1(W.ownerDocument.documentElement,W)){if(se!==null&amp;&amp;y_(W)){var _e=se.start,De=se.end;if(De===void 0&amp;&amp;(De=_e),&quot;selectionStart&quot;in W)W.selectionStart=_e,W.selectionEnd=Math.min(De,W.value.length);else{var ke=W.ownerDocument||document,xe=ke&amp;&amp;ke.defaultView||window;if(xe.getSelection){var Ee=xe.getSelection(),kt=W.textContent.length,Nt=Math.min(se.start,kt),Un=se.end===void 0?Nt:Math.min(se.end,kt);!Ee.extend&amp;&amp;Nt&gt;Un&amp;&amp;(U=Un,Un=Nt,Nt=U);var ge=R1(W,Nt),he=R1(W,Un);if(ge&amp;&amp;he&amp;&amp;(Ee.rangeCount!==1||Ee.anchorNode!==ge.node||Ee.anchorOffset!==ge.offset||Ee.focusNode!==he.node||Ee.focusOffset!==he.offset)){var ye=ke.createRange();ye.setStart(ge.node,ge.offset),Ee.removeAllRanges(),Nt&gt;Un?(Ee.addRange(ye),Ee.extend(he.node,he.offset)):(ye.setEnd(he.node,he.offset),Ee.addRange(ye))}}}}for(ke=[],Ee=W;Ee=Ee.parentNode;)Ee.nodeType===1&amp;&amp;ke.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof W.focus==&quot;function&quot;&amp;&amp;W.focus(),W=0;W&lt;ke.length;W++){var Ie=ke[W];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}Zp=!!Gv,jv=Gv=null}finally{Cn=S,j.p=y,I.T=d}}a.current=c,tr=2}}function jT(){if(tr===2){tr=0;var a=Ia,c=lu,d=(c.flags&amp;8772)!==0;if((c.subtreeFlags&amp;8772)!==0||d){d=I.T,I.T=null;var y=j.p;j.p=2;var S=Cn;Cn|=4;try{xT(a,c.alternate,c)}finally{Cn=S,j.p=y,I.T=d}}tr=3}}function WT(){if(tr===4||tr===3){tr=0,Le();var a=Ia,c=lu,d=cu,y=NT;(c.subtreeFlags&amp;10256)!==0||(c.flags&amp;10256)!==0?tr=5:(tr=0,lu=Ia=null,XT(a,a.pendingLanes));var S=a.pendingLanes;if(S===0&amp;&amp;(Na=null),jn(d),c=c.stateNode,Ze&amp;&amp;typeof Ze.onCommitFiberRoot==&quot;function&quot;)try{Ze.onCommitFiberRoot(Me,c,void 0,(c.current.flags&amp;128)===128)}catch{}if(y!==null){c=I.T,S=j.p,j.p=2,I.T=null;try{for(var M=a.onRecoverableError,U=0;U&lt;y.length;U++){var W=y[U];M(W.value,{componentStack:W.stack})}}finally{I.T=c,j.p=S}}(cu&amp;3)!==0&amp;&amp;zp(),oo(a),S=a.pendingLanes,(d&amp;4194090)!==0&amp;&amp;(S&amp;42)!==0?a===Rv?hf++:(hf=0,Rv=a):hf=0,ff(0)}}function XT(a,c){(a.pooledCacheLanes&amp;=c)===0&amp;&amp;(c=a.pooledCache,c!=null&amp;&amp;(a.pooledCache=null,jh(c)))}function zp(a){return GT(),jT(),WT(),qT()}function qT(){if(tr!==5)return!1;var a=Ia,c=Av;Av=0;var d=jn(cu),y=I.T,S=j.p;try{j.p=32&gt;d?32:d,I.T=null,d=Cv,Cv=null;var M=Ia,U=cu;if(tr=0,lu=Ia=null,cu=0,(Cn&amp;6)!==0)throw Error(i(331));var W=Cn;if(Cn|=4,OT(M.current),AT(M,M.current,U,d),Cn=W,ff(0,!1),Ze&amp;&amp;typeof Ze.onPostCommitFiberRoot==&quot;function&quot;)try{Ze.onPostCommitFiberRoot(Me,M)}catch{}return!0}finally{j.p=S,I.T=y,XT(a,c)}}function YT(a,c,d){c=ls(d,c),c=av(a.stateNode,c,2),a=wa(a,c,2),a!==null&amp;&amp;(Pe(a,2),oo(a))}function zn(a,c,d){if(a.tag===3)YT(a,a,d);else for(;c!==null;){if(c.tag===3){YT(c,a,d);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError==&quot;function&quot;||typeof y.componentDidCatch==&quot;function&quot;&amp;&amp;(Na===null||!Na.has(y))){a=ls(d,a),d=JE(2),y=wa(c,d,2),y!==null&amp;&amp;(QE(d,y,c,a),Pe(y,2),oo(y));break}}c=c.return}}function Iv(a,c,d){var y=a.pingCache;if(y===null){y=a.pingCache=new TU;var S=new Set;y.set(c,S)}else S=y.get(c),S===void 0&amp;&amp;(S=new Set,y.set(c,S));S.has(d)||(wv=!0,S.add(d),a=OU.bind(null,a,c,d),c.then(a,a))}function OU(a,c,d){var y=a.pingCache;y!==null&amp;&amp;y.delete(c),a.pingedLanes|=a.suspendedLanes&amp;d,a.warmLanes&amp;=~d,Vn===a&amp;&amp;(pn&amp;d)===d&amp;&amp;(ci===4||ci===3&amp;&amp;(pn&amp;62914560)===pn&amp;&amp;300&gt;Fe()-Mv?(Cn&amp;2)===0&amp;&amp;uu(a,0):Ev|=d,au===pn&amp;&amp;(au=0)),oo(a)}function KT(a,c){c===0&amp;&amp;(c=tt()),a=Xc(a,c),a!==null&amp;&amp;(Pe(a,c),oo(a))}function DU(a){var c=a.memoizedState,d=0;c!==null&amp;&amp;(d=c.retryLane),KT(a,d)}function NU(a,c){var d=0;switch(a.tag){case 13:var y=a.stateNode,S=a.memoizedState;S!==null&amp;&amp;(d=S.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&amp;&amp;y.delete(c),KT(a,d)}function IU(a,c){return Ye(a,c)}var Bp=null,fu=null,Pv=!1,Hp=!1,Lv=!1,Bl=0;function oo(a){a!==fu&amp;&amp;a.next===null&amp;&amp;(fu===null?Bp=fu=a:fu=fu.next=a),Hp=!0,Pv||(Pv=!0,LU())}function ff(a,c){if(!Lv&amp;&amp;Hp){Lv=!0;do for(var d=!1,y=Bp;y!==null;){if(a!==0){var S=y.pendingLanes;if(S===0)var M=0;else{var U=y.suspendedLanes,W=y.pingedLanes;M=(1&lt;&lt;31-ut(42|a)+1)-1,M&amp;=S&amp;~(U&amp;~W),M=M&amp;201326741?M&amp;201326741|1:M?M|2:0}M!==0&amp;&amp;(d=!0,QT(y,M))}else M=pn,M=Gt(y,y===Vn?M:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(M&amp;3)===0||It(y,M)||(d=!0,QT(y,M));y=y.next}while(d);Lv=!1}}function PU(){$T()}function $T(){Hp=Pv=!1;var a=0;Bl!==0&amp;&amp;(GU()&amp;&amp;(a=Bl),Bl=0);for(var c=Fe(),d=null,y=Bp;y!==null;){var S=y.next,M=ZT(y,c);M===0?(y.next=null,d===null?Bp=S:d.next=S,S===null&amp;&amp;(fu=d)):(d=y,(a!==0||(M&amp;3)!==0)&amp;&amp;(Hp=!0)),y=S}ff(a)}function ZT(a,c){for(var d=a.suspendedLanes,y=a.pingedLanes,S=a.expirationTimes,M=a.pendingLanes&amp;-62914561;0&lt;M;){var U=31-ut(M),W=1&lt;&lt;U,se=S[U];se===-1?((W&amp;d)===0||(W&amp;y)!==0)&amp;&amp;(S[U]=gn(W,c)):se&lt;=c&amp;&amp;(a.expiredLanes|=W),M&amp;=~W}if(c=Vn,d=pn,d=Gt(a,a===c?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,d===0||a===c&amp;&amp;(Rn===2||Rn===9)||a.cancelPendingCommit!==null)return y!==null&amp;&amp;y!==null&amp;&amp;Q(y),a.callbackNode=null,a.callbackPriority=0;if((d&amp;3)===0||It(a,d)){if(c=d&amp;-d,c===a.callbackPriority)return c;switch(y!==null&amp;&amp;Q(y),jn(d)){case 2:case 8:d=ze;break;case 32:d=te;break;case 268435456:d=pe;break;default:d=te}return y=JT.bind(null,a),d=Ye(d,y),a.callbackPriority=c,a.callbackNode=d,c}return y!==null&amp;&amp;y!==null&amp;&amp;Q(y),a.callbackPriority=2,a.callbackNode=null,2}function JT(a,c){if(tr!==0&amp;&amp;tr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(zp()&amp;&amp;a.callbackNode!==d)return null;var y=pn;return y=Gt(a,a===Vn?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(PT(a,y,c),ZT(a,Fe()),a.callbackNode!=null&amp;&amp;a.callbackNode===d?JT.bind(null,a):null)}function QT(a,c){if(zp())return null;PT(a,c,!0)}function LU(){WU(function(){(Cn&amp;6)!==0?Ye(mt,PU):$T()})}function Uv(){return Bl===0&amp;&amp;(Bl=de()),Bl}function eM(a){return a==null||typeof a==&quot;symbol&quot;||typeof a==&quot;boolean&quot;?null:typeof a==&quot;function&quot;?a:X(&quot;&quot;+a)}function tM(a,c){var d=c.ownerDocument.createElement(&quot;input&quot;);return d.name=c.name,d.value=c.value,a.id&amp;&amp;d.setAttribute(&quot;form&quot;,a.id),c.parentNode.insertBefore(d,c),a=new FormData(a),d.parentNode.removeChild(d),a}function UU(a,c,d,y,S){if(c===&quot;submit&quot;&amp;&amp;d&amp;&amp;d.stateNode===S){var M=eM((S[pi]||null).action),U=y.submitter;U&amp;&amp;(c=(c=U[pi]||null)?eM(c.formAction):U.getAttribute(&quot;formAction&quot;),c!==null&amp;&amp;(M=c,U=null));var W=new Tl(&quot;action&quot;,&quot;action&quot;,null,y,S);a.push({event:W,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Bl!==0){var se=U?tM(S,U):new FormData(S);nv(d,{pending:!0,data:se,method:S.method,action:M},null,se)}}else typeof M==&quot;function&quot;&amp;&amp;(W.preventDefault(),se=U?tM(S,U):new FormData(S),nv(d,{pending:!0,data:se,method:S.method,action:M},M,se))},currentTarget:S}]})}}for(var kv=0;kv&lt;x_.length;kv++){var Fv=x_[kv],kU=Fv.toLowerCase(),FU=Fv[0].toUpperCase()+Fv.slice(1);Ns(kU,&quot;on&quot;+FU)}Ns(P1,&quot;onAnimationEnd&quot;),Ns(L1,&quot;onAnimationIteration&quot;),Ns(U1,&quot;onAnimationStart&quot;),Ns(&quot;dblclick&quot;,&quot;onDoubleClick&quot;),Ns(&quot;focusin&quot;,&quot;onFocus&quot;),Ns(&quot;focusout&quot;,&quot;onBlur&quot;),Ns(tU,&quot;onTransitionRun&quot;),Ns(nU,&quot;onTransitionStart&quot;),Ns(iU,&quot;onTransitionCancel&quot;),Ns(k1,&quot;onTransitionEnd&quot;),q(&quot;onMouseEnter&quot;,[&quot;mouseout&quot;,&quot;mouseover&quot;]),q(&quot;onMouseLeave&quot;,[&quot;mouseout&quot;,&quot;mouseover&quot;]),q(&quot;onPointerEnter&quot;,[&quot;pointerout&quot;,&quot;pointerover&quot;]),q(&quot;onPointerLeave&quot;,[&quot;pointerout&quot;,&quot;pointerover&quot;]),Fr(&quot;onChange&quot;,&quot;change click focusin focusout input keydown keyup selectionchange&quot;.split(&quot; &quot;)),Fr(&quot;onSelect&quot;,&quot;focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange&quot;.split(&quot; &quot;)),Fr(&quot;onBeforeInput&quot;,[&quot;compositionend&quot;,&quot;keypress&quot;,&quot;textInput&quot;,&quot;paste&quot;]),Fr(&quot;onCompositionEnd&quot;,&quot;compositionend focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;)),Fr(&quot;onCompositionStart&quot;,&quot;compositionstart focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;)),Fr(&quot;onCompositionUpdate&quot;,&quot;compositionupdate focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;));var df=&quot;abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting&quot;.split(&quot; &quot;),zU=new Set(&quot;beforetoggle cancel close invalid load scroll scrollend toggle&quot;.split(&quot; &quot;).concat(df));function nM(a,c){c=(c&amp;4)!==0;for(var d=0;d&lt;a.length;d++){var y=a[d],S=y.event;y=y.listeners;e:{var M=void 0;if(c)for(var U=y.length-1;0&lt;=U;U--){var W=y[U],se=W.instance,_e=W.currentTarget;if(W=W.listener,se!==M&amp;&amp;S.isPropagationStopped())break e;M=W,S.currentTarget=_e;try{M(S)}catch(De){Cp(De)}S.currentTarget=null,M=se}else for(U=0;U&lt;y.length;U++){if(W=y[U],se=W.instance,_e=W.currentTarget,W=W.listener,se!==M&amp;&amp;S.isPropagationStopped())break e;M=W,S.currentTarget=_e;try{M(S)}catch(De){Cp(De)}S.currentTarget=null,M=se}}}}function an(a,c){var d=c[Cs];d===void 0&amp;&amp;(d=c[Cs]=new Set);var y=a+&quot;__bubble&quot;;d.has(y)||(iM(c,a,2,!1),d.add(y))}function zv(a,c,d){var y=0;c&amp;&amp;(y|=4),iM(d,a,y,c)}var Vp=&quot;_reactListening&quot;+Math.random().toString(36).slice(2);function Bv(a){if(!a[Vp]){a[Vp]=!0,_a.forEach(function(d){d!==&quot;selectionchange&quot;&amp;&amp;(zU.has(d)||zv(d,!1,a),zv(d,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Vp]||(c[Vp]=!0,zv(&quot;selectionchange&quot;,!1,c))}}function iM(a,c,d,y){switch(AM(c)){case 2:var S=fk;break;case 8:S=dk;break;default:S=eb}d=S.bind(null,c,d,a),S=void 0,!gt||c!==&quot;touchstart&quot;&amp;&amp;c!==&quot;touchmove&quot;&amp;&amp;c!==&quot;wheel&quot;||(S=!0),y?S!==void 0?a.addEventListener(c,d,{capture:!0,passive:S}):a.addEventListener(c,d,!0):S!==void 0?a.addEventListener(c,d,{passive:S}):a.addEventListener(c,d,!1)}function Hv(a,c,d,y,S){var M=y;if((c&amp;1)===0&amp;&amp;(c&amp;2)===0&amp;&amp;y!==null)e:for(;;){if(y===null)return;var U=y.tag;if(U===3||U===4){var W=y.stateNode.containerInfo;if(W===S)break;if(U===4)for(U=y.return;U!==null;){var se=U.tag;if((se===3||se===4)&amp;&amp;U.stateNode.containerInfo===S)return;U=U.return}for(;W!==null;){if(U=wr(W),U===null)return;if(se=U.tag,se===5||se===6||se===26||se===27){y=M=U;continue e}W=W.parentNode}}y=y.return}xt(function(){var _e=M,De=Te(d),ke=[];e:{var xe=F1.get(a);if(xe!==void 0){var Ee=Tl,kt=a;switch(a){case&quot;keypress&quot;:if(sn(d)===0)break e;case&quot;keydown&quot;:case&quot;keyup&quot;:Ee=I3;break;case&quot;focusin&quot;:kt=&quot;focus&quot;,Ee=f_;break;case&quot;focusout&quot;:kt=&quot;blur&quot;,Ee=f_;break;case&quot;beforeblur&quot;:case&quot;afterblur&quot;:Ee=f_;break;case&quot;click&quot;:if(d.button===2)break e;case&quot;auxclick&quot;:case&quot;dblclick&quot;:case&quot;mousedown&quot;:case&quot;mousemove&quot;:case&quot;mouseup&quot;:case&quot;mouseout&quot;:case&quot;mouseover&quot;:case&quot;contextmenu&quot;:Ee=d1;break;case&quot;drag&quot;:case&quot;dragend&quot;:case&quot;dragenter&quot;:case&quot;dragexit&quot;:case&quot;dragleave&quot;:case&quot;dragover&quot;:case&quot;dragstart&quot;:case&quot;drop&quot;:Ee=x3;break;case&quot;touchcancel&quot;:case&quot;touchend&quot;:case&quot;touchmove&quot;:case&quot;touchstart&quot;:Ee=U3;break;case P1:case L1:case U1:Ee=E3;break;case k1:Ee=F3;break;case&quot;scroll&quot;:case&quot;scrollend&quot;:Ee=v3;break;case&quot;wheel&quot;:Ee=B3;break;case&quot;copy&quot;:case&quot;cut&quot;:case&quot;paste&quot;:Ee=M3;break;case&quot;gotpointercapture&quot;:case&quot;lostpointercapture&quot;:case&quot;pointercancel&quot;:case&quot;pointerdown&quot;:case&quot;pointermove&quot;:case&quot;pointerout&quot;:case&quot;pointerover&quot;:case&quot;pointerup&quot;:Ee=m1;break;case&quot;toggle&quot;:case&quot;beforetoggle&quot;:Ee=V3}var Nt=(c&amp;4)!==0,Un=!Nt&amp;&amp;(a===&quot;scroll&quot;||a===&quot;scrollend&quot;),ge=Nt?xe!==null?xe+&quot;Capture&quot;:null:xe;Nt=[];for(var he=_e,ye;he!==null;){var Ie=he;if(ye=Ie.stateNode,Ie=Ie.tag,Ie!==5&amp;&amp;Ie!==26&amp;&amp;Ie!==27||ye===null||ge===null||(Ie=Be(he,ge),Ie!=null&amp;&amp;Nt.push(pf(he,Ie,ye))),Un)break;he=he.return}0&lt;Nt.length&amp;&amp;(xe=new Ee(xe,kt,null,d,De),ke.push({event:xe,listeners:Nt}))}}if((c&amp;7)===0){e:{if(xe=a===&quot;mouseover&quot;||a===&quot;pointerover&quot;,Ee=a===&quot;mouseout&quot;||a===&quot;pointerout&quot;,xe&amp;&amp;d!==J&amp;&amp;(kt=d.relatedTarget||d.fromElement)&amp;&amp;(wr(kt)||kt[Hi]))break e;if((Ee||xe)&amp;&amp;(xe=De.window===De?De:(xe=De.ownerDocument)?xe.defaultView||xe.parentWindow:window,Ee?(kt=d.relatedTarget||d.toElement,Ee=_e,kt=kt?wr(kt):null,kt!==null&amp;&amp;(Un=s(kt),Nt=kt.tag,kt!==Un||Nt!==5&amp;&amp;Nt!==27&amp;&amp;Nt!==6)&amp;&amp;(kt=null)):(Ee=null,kt=_e),Ee!==kt)){if(Nt=d1,Ie=&quot;onMouseLeave&quot;,ge=&quot;onMouseEnter&quot;,he=&quot;mouse&quot;,(a===&quot;pointerout&quot;||a===&quot;pointerover&quot;)&amp;&amp;(Nt=m1,Ie=&quot;onPointerLeave&quot;,ge=&quot;onPointerEnter&quot;,he=&quot;pointer&quot;),Un=Ee==null?xe:Os(Ee),ye=kt==null?xe:Os(kt),xe=new Nt(Ie,he+&quot;leave&quot;,Ee,d,De),xe.target=Un,xe.relatedTarget=ye,Ie=null,wr(De)===_e&amp;&amp;(Nt=new Nt(ge,he+&quot;enter&quot;,kt,d,De),Nt.target=ye,Nt.relatedTarget=Un,Ie=Nt),Un=Ie,Ee&amp;&amp;kt)t:{for(Nt=Ee,ge=kt,he=0,ye=Nt;ye;ye=du(ye))he++;for(ye=0,Ie=ge;Ie;Ie=du(Ie))ye++;for(;0&lt;he-ye;)Nt=du(Nt),he--;for(;0&lt;ye-he;)ge=du(ge),ye--;for(;he--;){if(Nt===ge||ge!==null&amp;&amp;Nt===ge.alternate)break t;Nt=du(Nt),ge=du(ge)}Nt=null}else Nt=null;Ee!==null&amp;&amp;rM(ke,xe,Ee,Nt,!1),kt!==null&amp;&amp;Un!==null&amp;&amp;rM(ke,Un,kt,Nt,!0)}}e:{if(xe=_e?Os(_e):window,Ee=xe.nodeName&amp;&amp;xe.nodeName.toLowerCase(),Ee===&quot;select&quot;||Ee===&quot;input&quot;&amp;&amp;xe.type===&quot;file&quot;)var vt=w1;else if(x1(xe))if(E1)vt=J3;else{vt=$3;var tn=K3}else Ee=xe.nodeName,!Ee||Ee.toLowerCase()!==&quot;input&quot;||xe.type!==&quot;checkbox&quot;&amp;&amp;xe.type!==&quot;radio&quot;?_e&amp;&amp;B(_e.elementType)&amp;&amp;(vt=w1):vt=Z3;if(vt&amp;&amp;(vt=vt(a,_e))){S1(ke,vt,d,De);break e}tn&amp;&amp;tn(a,xe,_e),a===&quot;focusout&quot;&amp;&amp;_e&amp;&amp;xe.type===&quot;number&quot;&amp;&amp;_e.memoizedProps.value!=null&amp;&amp;Ni(xe,&quot;number&quot;,xe.value)}switch(tn=_e?Os(_e):window,a){case&quot;focusin&quot;:(x1(tn)||tn.contentEditable===&quot;true&quot;)&amp;&amp;(Gc=tn,__=_e,zh=null);break;case&quot;focusout&quot;:zh=__=Gc=null;break;case&quot;mousedown&quot;:v_=!0;break;case&quot;contextmenu&quot;:case&quot;mouseup&quot;:case&quot;dragend&quot;:v_=!1,N1(ke,d,De);break;case&quot;selectionchange&quot;:if(eU)break;case&quot;keydown&quot;:case&quot;keyup&quot;:N1(ke,d,De)}var At;if(p_)e:{switch(a){case&quot;compositionstart&quot;:var Pt=&quot;onCompositionStart&quot;;break e;case&quot;compositionend&quot;:Pt=&quot;onCompositionEnd&quot;;break e;case&quot;compositionupdate&quot;:Pt=&quot;onCompositionUpdate&quot;;break e}Pt=void 0}else Vc?v1(a,d)&amp;&amp;(Pt=&quot;onCompositionEnd&quot;):a===&quot;keydown&quot;&amp;&amp;d.keyCode===229&amp;&amp;(Pt=&quot;onCompositionStart&quot;);Pt&amp;&amp;(g1&amp;&amp;d.locale!==&quot;ko&quot;&amp;&amp;(Vc||Pt!==&quot;onCompositionStart&quot;?Pt===&quot;onCompositionEnd&quot;&amp;&amp;Vc&amp;&amp;(At=hn()):(_t=De,Fn=&quot;value&quot;in _t?_t.value:_t.textContent,Vc=!0)),tn=Gp(_e,Pt),0&lt;tn.length&amp;&amp;(Pt=new p1(Pt,a,null,d,De),ke.push({event:Pt,listeners:tn}),At?Pt.data=At:(At=b1(d),At!==null&amp;&amp;(Pt.data=At)))),(At=j3?W3(a,d):X3(a,d))&amp;&amp;(Pt=Gp(_e,&quot;onBeforeInput&quot;),0&lt;Pt.length&amp;&amp;(tn=new p1(&quot;onBeforeInput&quot;,&quot;beforeinput&quot;,null,d,De),ke.push({event:tn,listeners:Pt}),tn.data=At)),UU(ke,a,_e,d,De)}nM(ke,c)})}function pf(a,c,d){return{instance:a,listener:c,currentTarget:d}}function Gp(a,c){for(var d=c+&quot;Capture&quot;,y=[];a!==null;){var S=a,M=S.stateNode;if(S=S.tag,S!==5&amp;&amp;S!==26&amp;&amp;S!==27||M===null||(S=Be(a,d),S!=null&amp;&amp;y.unshift(pf(a,S,M)),S=Be(a,c),S!=null&amp;&amp;y.push(pf(a,S,M))),a.tag===3)return y;a=a.return}return[]}function du(a){if(a===null)return null;do a=a.return;while(a&amp;&amp;a.tag!==5&amp;&amp;a.tag!==27);return a||null}function rM(a,c,d,y,S){for(var M=c._reactName,U=[];d!==null&amp;&amp;d!==y;){var W=d,se=W.alternate,_e=W.stateNode;if(W=W.tag,se!==null&amp;&amp;se===y)break;W!==5&amp;&amp;W!==26&amp;&amp;W!==27||_e===null||(se=_e,S?(_e=Be(d,M),_e!=null&amp;&amp;U.unshift(pf(d,_e,se))):S||(_e=Be(d,M),_e!=null&amp;&amp;U.push(pf(d,_e,se)))),d=d.return}U.length!==0&amp;&amp;a.push({event:c,listeners:U})}var BU=/\r\n?/g,HU=/\u0000|\uFFFD/g;function sM(a){return(typeof a==&quot;string&quot;?a:&quot;&quot;+a).replace(BU,`
`).replace(HU,&quot;&quot;)}function oM(a,c){return c=sM(c),sM(a)===c}function jp(){}function Ln(a,c,d,y,S,M){switch(d){case&quot;children&quot;:typeof y==&quot;string&quot;?c===&quot;body&quot;||c===&quot;textarea&quot;&amp;&amp;y===&quot;&quot;||zr(a,y):(typeof y==&quot;number&quot;||typeof y==&quot;bigint&quot;)&amp;&amp;c!==&quot;body&quot;&amp;&amp;zr(a,&quot;&quot;+y);break;case&quot;className&quot;:Je(a,&quot;class&quot;,y);break;case&quot;tabIndex&quot;:Je(a,&quot;tabindex&quot;,y);break;case&quot;dir&quot;:case&quot;role&quot;:case&quot;viewBox&quot;:case&quot;width&quot;:case&quot;height&quot;:Je(a,d,y);break;case&quot;style&quot;:El(a,y,M);break;case&quot;data&quot;:if(c!==&quot;object&quot;){Je(a,&quot;data&quot;,y);break}case&quot;src&quot;:case&quot;href&quot;:if(y===&quot;&quot;&amp;&amp;(c!==&quot;a&quot;||d!==&quot;href&quot;)){a.removeAttribute(d);break}if(y==null||typeof y==&quot;function&quot;||typeof y==&quot;symbol&quot;||typeof y==&quot;boolean&quot;){a.removeAttribute(d);break}y=X(&quot;&quot;+y),a.setAttribute(d,y);break;case&quot;action&quot;:case&quot;formAction&quot;:if(typeof y==&quot;function&quot;){a.setAttribute(d,&quot;javascript:throw new Error(&#x27;A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\&#x27;re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().&#x27;)&quot;);break}else typeof M==&quot;function&quot;&amp;&amp;(d===&quot;formAction&quot;?(c!==&quot;input&quot;&amp;&amp;Ln(a,c,&quot;name&quot;,S.name,S,null),Ln(a,c,&quot;formEncType&quot;,S.formEncType,S,null),Ln(a,c,&quot;formMethod&quot;,S.formMethod,S,null),Ln(a,c,&quot;formTarget&quot;,S.formTarget,S,null)):(Ln(a,c,&quot;encType&quot;,S.encType,S,null),Ln(a,c,&quot;method&quot;,S.method,S,null),Ln(a,c,&quot;target&quot;,S.target,S,null)));if(y==null||typeof y==&quot;symbol&quot;||typeof y==&quot;boolean&quot;){a.removeAttribute(d);break}y=X(&quot;&quot;+y),a.setAttribute(d,y);break;case&quot;onClick&quot;:y!=null&amp;&amp;(a.onclick=jp);break;case&quot;onScroll&quot;:y!=null&amp;&amp;an(&quot;scroll&quot;,a);break;case&quot;onScrollEnd&quot;:y!=null&amp;&amp;an(&quot;scrollend&quot;,a);break;case&quot;dangerouslySetInnerHTML&quot;:if(y!=null){if(typeof y!=&quot;object&quot;||!(&quot;__html&quot;in y))throw Error(i(61));if(d=y.__html,d!=null){if(S.children!=null)throw Error(i(60));a.innerHTML=d}}break;case&quot;multiple&quot;:a.multiple=y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;;break;case&quot;muted&quot;:a.muted=y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;;break;case&quot;suppressContentEditableWarning&quot;:case&quot;suppressHydrationWarning&quot;:case&quot;defaultValue&quot;:case&quot;defaultChecked&quot;:case&quot;innerHTML&quot;:case&quot;ref&quot;:break;case&quot;autoFocus&quot;:break;case&quot;xlinkHref&quot;:if(y==null||typeof y==&quot;function&quot;||typeof y==&quot;boolean&quot;||typeof y==&quot;symbol&quot;){a.removeAttribute(&quot;xlink:href&quot;);break}d=X(&quot;&quot;+y),a.setAttributeNS(&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:href&quot;,d);break;case&quot;contentEditable&quot;:case&quot;spellCheck&quot;:case&quot;draggable&quot;:case&quot;value&quot;:case&quot;autoReverse&quot;:case&quot;externalResourcesRequired&quot;:case&quot;focusable&quot;:case&quot;preserveAlpha&quot;:y!=null&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;?a.setAttribute(d,&quot;&quot;+y):a.removeAttribute(d);break;case&quot;inert&quot;:case&quot;allowFullScreen&quot;:case&quot;async&quot;:case&quot;autoPlay&quot;:case&quot;controls&quot;:case&quot;default&quot;:case&quot;defer&quot;:case&quot;disabled&quot;:case&quot;disablePictureInPicture&quot;:case&quot;disableRemotePlayback&quot;:case&quot;formNoValidate&quot;:case&quot;hidden&quot;:case&quot;loop&quot;:case&quot;noModule&quot;:case&quot;noValidate&quot;:case&quot;open&quot;:case&quot;playsInline&quot;:case&quot;readOnly&quot;:case&quot;required&quot;:case&quot;reversed&quot;:case&quot;scoped&quot;:case&quot;seamless&quot;:case&quot;itemScope&quot;:y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;?a.setAttribute(d,&quot;&quot;):a.removeAttribute(d);break;case&quot;capture&quot;:case&quot;download&quot;:y===!0?a.setAttribute(d,&quot;&quot;):y!==!1&amp;&amp;y!=null&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;?a.setAttribute(d,y):a.removeAttribute(d);break;case&quot;cols&quot;:case&quot;rows&quot;:case&quot;size&quot;:case&quot;span&quot;:y!=null&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;&amp;&amp;!isNaN(y)&amp;&amp;1&lt;=y?a.setAttribute(d,y):a.removeAttribute(d);break;case&quot;rowSpan&quot;:case&quot;start&quot;:y==null||typeof y==&quot;function&quot;||typeof y==&quot;symbol&quot;||isNaN(y)?a.removeAttribute(d):a.setAttribute(d,y);break;case&quot;popover&quot;:an(&quot;beforetoggle&quot;,a),an(&quot;toggle&quot;,a),Ge(a,&quot;popover&quot;,y);break;case&quot;xlinkActuate&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:actuate&quot;,y);break;case&quot;xlinkArcrole&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:arcrole&quot;,y);break;case&quot;xlinkRole&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:role&quot;,y);break;case&quot;xlinkShow&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:show&quot;,y);break;case&quot;xlinkTitle&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:title&quot;,y);break;case&quot;xlinkType&quot;:et(a,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:type&quot;,y);break;case&quot;xmlBase&quot;:et(a,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:base&quot;,y);break;case&quot;xmlLang&quot;:et(a,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:lang&quot;,y);break;case&quot;xmlSpace&quot;:et(a,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:space&quot;,y);break;case&quot;is&quot;:Ge(a,&quot;is&quot;,y);break;case&quot;innerText&quot;:case&quot;textContent&quot;:break;default:(!(2&lt;d.length)||d[0]!==&quot;o&quot;&amp;&amp;d[0]!==&quot;O&quot;||d[1]!==&quot;n&quot;&amp;&amp;d[1]!==&quot;N&quot;)&amp;&amp;(d=k.get(d)||d,Ge(a,d,y))}}function Vv(a,c,d,y,S,M){switch(d){case&quot;style&quot;:El(a,y,M);break;case&quot;dangerouslySetInnerHTML&quot;:if(y!=null){if(typeof y!=&quot;object&quot;||!(&quot;__html&quot;in y))throw Error(i(61));if(d=y.__html,d!=null){if(S.children!=null)throw Error(i(60));a.innerHTML=d}}break;case&quot;children&quot;:typeof y==&quot;string&quot;?zr(a,y):(typeof y==&quot;number&quot;||typeof y==&quot;bigint&quot;)&amp;&amp;zr(a,&quot;&quot;+y);break;case&quot;onScroll&quot;:y!=null&amp;&amp;an(&quot;scroll&quot;,a);break;case&quot;onScrollEnd&quot;:y!=null&amp;&amp;an(&quot;scrollend&quot;,a);break;case&quot;onClick&quot;:y!=null&amp;&amp;(a.onclick=jp);break;case&quot;suppressContentEditableWarning&quot;:case&quot;suppressHydrationWarning&quot;:case&quot;innerHTML&quot;:case&quot;ref&quot;:break;case&quot;innerText&quot;:case&quot;textContent&quot;:break;default:if(!va.hasOwnProperty(d))e:{if(d[0]===&quot;o&quot;&amp;&amp;d[1]===&quot;n&quot;&amp;&amp;(S=d.endsWith(&quot;Capture&quot;),c=d.slice(2,S?d.length-7:void 0),M=a[pi]||null,M=M!=null?M[d]:null,typeof M==&quot;function&quot;&amp;&amp;a.removeEventListener(c,M,S),typeof y==&quot;function&quot;)){typeof M!=&quot;function&quot;&amp;&amp;M!==null&amp;&amp;(d in a?a[d]=null:a.hasAttribute(d)&amp;&amp;a.removeAttribute(d)),a.addEventListener(c,y,S);break e}d in a?a[d]=y:y===!0?a.setAttribute(d,&quot;&quot;):Ge(a,d,y)}}}function nr(a,c,d){switch(c){case&quot;div&quot;:case&quot;span&quot;:case&quot;svg&quot;:case&quot;path&quot;:case&quot;a&quot;:case&quot;g&quot;:case&quot;p&quot;:case&quot;li&quot;:break;case&quot;img&quot;:an(&quot;error&quot;,a),an(&quot;load&quot;,a);var y=!1,S=!1,M;for(M in d)if(d.hasOwnProperty(M)){var U=d[M];if(U!=null)switch(M){case&quot;src&quot;:y=!0;break;case&quot;srcSet&quot;:S=!0;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:throw Error(i(137,c));default:Ln(a,c,M,U,d,null)}}S&amp;&amp;Ln(a,c,&quot;srcSet&quot;,d.srcSet,d,null),y&amp;&amp;Ln(a,c,&quot;src&quot;,d.src,d,null);return;case&quot;input&quot;:an(&quot;invalid&quot;,a);var W=M=U=S=null,se=null,_e=null;for(y in d)if(d.hasOwnProperty(y)){var De=d[y];if(De!=null)switch(y){case&quot;name&quot;:S=De;break;case&quot;type&quot;:U=De;break;case&quot;checked&quot;:se=De;break;case&quot;defaultChecked&quot;:_e=De;break;case&quot;value&quot;:M=De;break;case&quot;defaultValue&quot;:W=De;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(De!=null)throw Error(i(137,c));break;default:Ln(a,c,y,De,d,null)}}Mn(a,M,W,se,_e,U,S,!1),Hn(a);return;case&quot;select&quot;:an(&quot;invalid&quot;,a),y=U=M=null;for(S in d)if(d.hasOwnProperty(S)&amp;&amp;(W=d[S],W!=null))switch(S){case&quot;value&quot;:M=W;break;case&quot;defaultValue&quot;:U=W;break;case&quot;multiple&quot;:y=W;default:Ln(a,c,S,W,d,null)}c=M,d=U,a.multiple=!!y,c!=null?Qn(a,!!y,c,!1):d!=null&amp;&amp;Qn(a,!!y,d,!0);return;case&quot;textarea&quot;:an(&quot;invalid&quot;,a),M=S=y=null;for(U in d)if(d.hasOwnProperty(U)&amp;&amp;(W=d[U],W!=null))switch(U){case&quot;value&quot;:y=W;break;case&quot;defaultValue&quot;:S=W;break;case&quot;children&quot;:M=W;break;case&quot;dangerouslySetInnerHTML&quot;:if(W!=null)throw Error(i(91));break;default:Ln(a,c,U,W,d,null)}ai(a,y,S,M),Hn(a);return;case&quot;option&quot;:for(se in d)if(d.hasOwnProperty(se)&amp;&amp;(y=d[se],y!=null))switch(se){case&quot;selected&quot;:a.selected=y&amp;&amp;typeof y!=&quot;function&quot;&amp;&amp;typeof y!=&quot;symbol&quot;;break;default:Ln(a,c,se,y,d,null)}return;case&quot;dialog&quot;:an(&quot;beforetoggle&quot;,a),an(&quot;toggle&quot;,a),an(&quot;cancel&quot;,a),an(&quot;close&quot;,a);break;case&quot;iframe&quot;:case&quot;object&quot;:an(&quot;load&quot;,a);break;case&quot;video&quot;:case&quot;audio&quot;:for(y=0;y&lt;df.length;y++)an(df[y],a);break;case&quot;image&quot;:an(&quot;error&quot;,a),an(&quot;load&quot;,a);break;case&quot;details&quot;:an(&quot;toggle&quot;,a);break;case&quot;embed&quot;:case&quot;source&quot;:case&quot;link&quot;:an(&quot;error&quot;,a),an(&quot;load&quot;,a);case&quot;area&quot;:case&quot;base&quot;:case&quot;br&quot;:case&quot;col&quot;:case&quot;hr&quot;:case&quot;keygen&quot;:case&quot;meta&quot;:case&quot;param&quot;:case&quot;track&quot;:case&quot;wbr&quot;:case&quot;menuitem&quot;:for(_e in d)if(d.hasOwnProperty(_e)&amp;&amp;(y=d[_e],y!=null))switch(_e){case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:throw Error(i(137,c));default:Ln(a,c,_e,y,d,null)}return;default:if(B(c)){for(De in d)d.hasOwnProperty(De)&amp;&amp;(y=d[De],y!==void 0&amp;&amp;Vv(a,c,De,y,d,void 0));return}}for(W in d)d.hasOwnProperty(W)&amp;&amp;(y=d[W],y!=null&amp;&amp;Ln(a,c,W,y,d,null))}function VU(a,c,d,y){switch(c){case&quot;div&quot;:case&quot;span&quot;:case&quot;svg&quot;:case&quot;path&quot;:case&quot;a&quot;:case&quot;g&quot;:case&quot;p&quot;:case&quot;li&quot;:break;case&quot;input&quot;:var S=null,M=null,U=null,W=null,se=null,_e=null,De=null;for(Ee in d){var ke=d[Ee];if(d.hasOwnProperty(Ee)&amp;&amp;ke!=null)switch(Ee){case&quot;checked&quot;:break;case&quot;value&quot;:break;case&quot;defaultValue&quot;:se=ke;default:y.hasOwnProperty(Ee)||Ln(a,c,Ee,null,y,ke)}}for(var xe in y){var Ee=y[xe];if(ke=d[xe],y.hasOwnProperty(xe)&amp;&amp;(Ee!=null||ke!=null))switch(xe){case&quot;type&quot;:M=Ee;break;case&quot;name&quot;:S=Ee;break;case&quot;checked&quot;:_e=Ee;break;case&quot;defaultChecked&quot;:De=Ee;break;case&quot;value&quot;:U=Ee;break;case&quot;defaultValue&quot;:W=Ee;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(Ee!=null)throw Error(i(137,c));break;default:Ee!==ke&amp;&amp;Ln(a,c,xe,Ee,y,ke)}}Tr(a,U,W,se,_e,De,M,S);return;case&quot;select&quot;:Ee=U=W=xe=null;for(M in d)if(se=d[M],d.hasOwnProperty(M)&amp;&amp;se!=null)switch(M){case&quot;value&quot;:break;case&quot;multiple&quot;:Ee=se;default:y.hasOwnProperty(M)||Ln(a,c,M,null,y,se)}for(S in y)if(M=y[S],se=d[S],y.hasOwnProperty(S)&amp;&amp;(M!=null||se!=null))switch(S){case&quot;value&quot;:xe=M;break;case&quot;defaultValue&quot;:W=M;break;case&quot;multiple&quot;:U=M;default:M!==se&amp;&amp;Ln(a,c,S,M,y,se)}c=W,d=U,y=Ee,xe!=null?Qn(a,!!d,xe,!1):!!y!=!!d&amp;&amp;(c!=null?Qn(a,!!d,c,!0):Qn(a,!!d,d?[]:&quot;&quot;,!1));return;case&quot;textarea&quot;:Ee=xe=null;for(W in d)if(S=d[W],d.hasOwnProperty(W)&amp;&amp;S!=null&amp;&amp;!y.hasOwnProperty(W))switch(W){case&quot;value&quot;:break;case&quot;children&quot;:break;default:Ln(a,c,W,null,y,S)}for(U in y)if(S=y[U],M=d[U],y.hasOwnProperty(U)&amp;&amp;(S!=null||M!=null))switch(U){case&quot;value&quot;:xe=S;break;case&quot;defaultValue&quot;:Ee=S;break;case&quot;children&quot;:break;case&quot;dangerouslySetInnerHTML&quot;:if(S!=null)throw Error(i(91));break;default:S!==M&amp;&amp;Ln(a,c,U,S,y,M)}ei(a,xe,Ee);return;case&quot;option&quot;:for(var kt in d)if(xe=d[kt],d.hasOwnProperty(kt)&amp;&amp;xe!=null&amp;&amp;!y.hasOwnProperty(kt))switch(kt){case&quot;selected&quot;:a.selected=!1;break;default:Ln(a,c,kt,null,y,xe)}for(se in y)if(xe=y[se],Ee=d[se],y.hasOwnProperty(se)&amp;&amp;xe!==Ee&amp;&amp;(xe!=null||Ee!=null))switch(se){case&quot;selected&quot;:a.selected=xe&amp;&amp;typeof xe!=&quot;function&quot;&amp;&amp;typeof xe!=&quot;symbol&quot;;break;default:Ln(a,c,se,xe,y,Ee)}return;case&quot;img&quot;:case&quot;link&quot;:case&quot;area&quot;:case&quot;base&quot;:case&quot;br&quot;:case&quot;col&quot;:case&quot;embed&quot;:case&quot;hr&quot;:case&quot;keygen&quot;:case&quot;meta&quot;:case&quot;param&quot;:case&quot;source&quot;:case&quot;track&quot;:case&quot;wbr&quot;:case&quot;menuitem&quot;:for(var Nt in d)xe=d[Nt],d.hasOwnProperty(Nt)&amp;&amp;xe!=null&amp;&amp;!y.hasOwnProperty(Nt)&amp;&amp;Ln(a,c,Nt,null,y,xe);for(_e in y)if(xe=y[_e],Ee=d[_e],y.hasOwnProperty(_e)&amp;&amp;xe!==Ee&amp;&amp;(xe!=null||Ee!=null))switch(_e){case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(xe!=null)throw Error(i(137,c));break;default:Ln(a,c,_e,xe,y,Ee)}return;default:if(B(c)){for(var Un in d)xe=d[Un],d.hasOwnProperty(Un)&amp;&amp;xe!==void 0&amp;&amp;!y.hasOwnProperty(Un)&amp;&amp;Vv(a,c,Un,void 0,y,xe);for(De in y)xe=y[De],Ee=d[De],!y.hasOwnProperty(De)||xe===Ee||xe===void 0&amp;&amp;Ee===void 0||Vv(a,c,De,xe,y,Ee);return}}for(var ge in d)xe=d[ge],d.hasOwnProperty(ge)&amp;&amp;xe!=null&amp;&amp;!y.hasOwnProperty(ge)&amp;&amp;Ln(a,c,ge,null,y,xe);for(ke in y)xe=y[ke],Ee=d[ke],!y.hasOwnProperty(ke)||xe===Ee||xe==null&amp;&amp;Ee==null||Ln(a,c,ke,xe,y,Ee)}var Gv=null,jv=null;function Wp(a){return a.nodeType===9?a:a.ownerDocument}function aM(a){switch(a){case&quot;http://www.w3.org/2000/svg&quot;:return 1;case&quot;http://www.w3.org/1998/Math/MathML&quot;:return 2;default:return 0}}function lM(a,c){if(a===0)switch(c){case&quot;svg&quot;:return 1;case&quot;math&quot;:return 2;default:return 0}return a===1&amp;&amp;c===&quot;foreignObject&quot;?0:a}function Wv(a,c){return a===&quot;textarea&quot;||a===&quot;noscript&quot;||typeof c.children==&quot;string&quot;||typeof c.children==&quot;number&quot;||typeof c.children==&quot;bigint&quot;||typeof c.dangerouslySetInnerHTML==&quot;object&quot;&amp;&amp;c.dangerouslySetInnerHTML!==null&amp;&amp;c.dangerouslySetInnerHTML.__html!=null}var Xv=null;function GU(){var a=window.event;return a&amp;&amp;a.type===&quot;popstate&quot;?a===Xv?!1:(Xv=a,!0):(Xv=null,!1)}var cM=typeof setTimeout==&quot;function&quot;?setTimeout:void 0,jU=typeof clearTimeout==&quot;function&quot;?clearTimeout:void 0,uM=typeof Promise==&quot;function&quot;?Promise:void 0,WU=typeof queueMicrotask==&quot;function&quot;?queueMicrotask:typeof uM&lt;&quot;u&quot;?function(a){return uM.resolve(null).then(a).catch(XU)}:cM;function XU(a){setTimeout(function(){throw a})}function La(a){return a===&quot;head&quot;}function hM(a,c){var d=c,y=0,S=0;do{var M=d.nextSibling;if(a.removeChild(d),M&amp;&amp;M.nodeType===8)if(d=M.data,d===&quot;/$&quot;){if(0&lt;y&amp;&amp;8&gt;y){d=y;var U=a.ownerDocument;if(d&amp;1&amp;&amp;mf(U.documentElement),d&amp;2&amp;&amp;mf(U.body),d&amp;4)for(d=U.head,mf(d),U=d.firstChild;U;){var W=U.nextSibling,se=U.nodeName;U[kr]||se===&quot;SCRIPT&quot;||se===&quot;STYLE&quot;||se===&quot;LINK&quot;&amp;&amp;U.rel.toLowerCase()===&quot;stylesheet&quot;||d.removeChild(U),U=W}}if(S===0){a.removeChild(M),wf(c);return}S--}else d===&quot;$&quot;||d===&quot;$?&quot;||d===&quot;$!&quot;?S++:y=d.charCodeAt(0)-48;else y=0;d=M}while(d);wf(c)}function qv(a){var c=a.firstChild;for(c&amp;&amp;c.nodeType===10&amp;&amp;(c=c.nextSibling);c;){var d=c;switch(c=c.nextSibling,d.nodeName){case&quot;HTML&quot;:case&quot;HEAD&quot;:case&quot;BODY&quot;:qv(d),os(d);continue;case&quot;SCRIPT&quot;:case&quot;STYLE&quot;:continue;case&quot;LINK&quot;:if(d.rel.toLowerCase()===&quot;stylesheet&quot;)continue}a.removeChild(d)}}function qU(a,c,d,y){for(;a.nodeType===1;){var S=d;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&amp;&amp;(a.nodeName!==&quot;INPUT&quot;||a.type!==&quot;hidden&quot;))break}else if(y){if(!a[kr])switch(c){case&quot;meta&quot;:if(!a.hasAttribute(&quot;itemprop&quot;))break;return a;case&quot;link&quot;:if(M=a.getAttribute(&quot;rel&quot;),M===&quot;stylesheet&quot;&amp;&amp;a.hasAttribute(&quot;data-precedence&quot;))break;if(M!==S.rel||a.getAttribute(&quot;href&quot;)!==(S.href==null||S.href===&quot;&quot;?null:S.href)||a.getAttribute(&quot;crossorigin&quot;)!==(S.crossOrigin==null?null:S.crossOrigin)||a.getAttribute(&quot;title&quot;)!==(S.title==null?null:S.title))break;return a;case&quot;style&quot;:if(a.hasAttribute(&quot;data-precedence&quot;))break;return a;case&quot;script&quot;:if(M=a.getAttribute(&quot;src&quot;),(M!==(S.src==null?null:S.src)||a.getAttribute(&quot;type&quot;)!==(S.type==null?null:S.type)||a.getAttribute(&quot;crossorigin&quot;)!==(S.crossOrigin==null?null:S.crossOrigin))&amp;&amp;M&amp;&amp;a.hasAttribute(&quot;async&quot;)&amp;&amp;!a.hasAttribute(&quot;itemprop&quot;))break;return a;default:return a}}else if(c===&quot;input&quot;&amp;&amp;a.type===&quot;hidden&quot;){var M=S.name==null?null:&quot;&quot;+S.name;if(S.type===&quot;hidden&quot;&amp;&amp;a.getAttribute(&quot;name&quot;)===M)return a}else return a;if(a=Ps(a.nextSibling),a===null)break}return null}function YU(a,c,d){if(c===&quot;&quot;)return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!==&quot;INPUT&quot;||a.type!==&quot;hidden&quot;)&amp;&amp;!d||(a=Ps(a.nextSibling),a===null))return null;return a}function Yv(a){return a.data===&quot;$!&quot;||a.data===&quot;$?&quot;&amp;&amp;a.ownerDocument.readyState===&quot;complete&quot;}function KU(a,c){var d=a.ownerDocument;if(a.data!==&quot;$?&quot;||d.readyState===&quot;complete&quot;)c();else{var y=function(){c(),d.removeEventListener(&quot;DOMContentLoaded&quot;,y)};d.addEventListener(&quot;DOMContentLoaded&quot;,y),a._reactRetry=y}}function Ps(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c===&quot;$&quot;||c===&quot;$!&quot;||c===&quot;$?&quot;||c===&quot;F!&quot;||c===&quot;F&quot;)break;if(c===&quot;/$&quot;)return null}}return a}var Kv=null;function fM(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var d=a.data;if(d===&quot;$&quot;||d===&quot;$!&quot;||d===&quot;$?&quot;){if(c===0)return a;c--}else d===&quot;/$&quot;&amp;&amp;c++}a=a.previousSibling}return null}function dM(a,c,d){switch(c=Wp(d),a){case&quot;html&quot;:if(a=c.documentElement,!a)throw Error(i(452));return a;case&quot;head&quot;:if(a=c.head,!a)throw Error(i(453));return a;case&quot;body&quot;:if(a=c.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function mf(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);os(a)}var ps=new Map,pM=new Set;function Xp(a){return typeof a.getRootNode==&quot;function&quot;?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Vo=j.d;j.d={f:$U,r:ZU,D:JU,C:QU,L:ek,m:tk,X:ik,S:nk,M:rk};function $U(){var a=Vo.f(),c=kp();return a||c}function ZU(a){var c=Er(a);c!==null&amp;&amp;c.tag===5&amp;&amp;c.type===&quot;form&quot;?PE(c):Vo.r(a)}var pu=typeof document&gt;&quot;u&quot;?null:document;function mM(a,c,d){var y=pu;if(y&amp;&amp;typeof c==&quot;string&quot;&amp;&amp;c){var S=vn(c);S=&#x27;link[rel=&quot;&#x27;+a+&#x27;&quot;][href=&quot;&#x27;+S+&#x27;&quot;]&#x27;,typeof d==&quot;string&quot;&amp;&amp;(S+=&#x27;[crossorigin=&quot;&#x27;+d+&#x27;&quot;]&#x27;),pM.has(S)||(pM.add(S),a={rel:a,crossOrigin:d,href:c},y.querySelector(S)===null&amp;&amp;(c=y.createElement(&quot;link&quot;),nr(c,&quot;link&quot;,a),Wn(c),y.head.appendChild(c)))}}function JU(a){Vo.D(a),mM(&quot;dns-prefetch&quot;,a,null)}function QU(a,c){Vo.C(a,c),mM(&quot;preconnect&quot;,a,c)}function ek(a,c,d){Vo.L(a,c,d);var y=pu;if(y&amp;&amp;a&amp;&amp;c){var S=&#x27;link[rel=&quot;preload&quot;][as=&quot;&#x27;+vn(c)+&#x27;&quot;]&#x27;;c===&quot;image&quot;&amp;&amp;d&amp;&amp;d.imageSrcSet?(S+=&#x27;[imagesrcset=&quot;&#x27;+vn(d.imageSrcSet)+&#x27;&quot;]&#x27;,typeof d.imageSizes==&quot;string&quot;&amp;&amp;(S+=&#x27;[imagesizes=&quot;&#x27;+vn(d.imageSizes)+&#x27;&quot;]&#x27;)):S+=&#x27;[href=&quot;&#x27;+vn(a)+&#x27;&quot;]&#x27;;var M=S;switch(c){case&quot;style&quot;:M=mu(a);break;case&quot;script&quot;:M=gu(a)}ps.has(M)||(a=f({rel:&quot;preload&quot;,href:c===&quot;image&quot;&amp;&amp;d&amp;&amp;d.imageSrcSet?void 0:a,as:c},d),ps.set(M,a),y.querySelector(S)!==null||c===&quot;style&quot;&amp;&amp;y.querySelector(gf(M))||c===&quot;script&quot;&amp;&amp;y.querySelector(yf(M))||(c=y.createElement(&quot;link&quot;),nr(c,&quot;link&quot;,a),Wn(c),y.head.appendChild(c)))}}function tk(a,c){Vo.m(a,c);var d=pu;if(d&amp;&amp;a){var y=c&amp;&amp;typeof c.as==&quot;string&quot;?c.as:&quot;script&quot;,S=&#x27;link[rel=&quot;modulepreload&quot;][as=&quot;&#x27;+vn(y)+&#x27;&quot;][href=&quot;&#x27;+vn(a)+&#x27;&quot;]&#x27;,M=S;switch(y){case&quot;audioworklet&quot;:case&quot;paintworklet&quot;:case&quot;serviceworker&quot;:case&quot;sharedworker&quot;:case&quot;worker&quot;:case&quot;script&quot;:M=gu(a)}if(!ps.has(M)&amp;&amp;(a=f({rel:&quot;modulepreload&quot;,href:a},c),ps.set(M,a),d.querySelector(S)===null)){switch(y){case&quot;audioworklet&quot;:case&quot;paintworklet&quot;:case&quot;serviceworker&quot;:case&quot;sharedworker&quot;:case&quot;worker&quot;:case&quot;script&quot;:if(d.querySelector(yf(M)))return}y=d.createElement(&quot;link&quot;),nr(y,&quot;link&quot;,a),Wn(y),d.head.appendChild(y)}}}function nk(a,c,d){Vo.S(a,c,d);var y=pu;if(y&amp;&amp;a){var S=as(y).hoistableStyles,M=mu(a);c=c||&quot;default&quot;;var U=S.get(M);if(!U){var W={loading:0,preload:null};if(U=y.querySelector(gf(M)))W.loading=5;else{a=f({rel:&quot;stylesheet&quot;,href:a,&quot;data-precedence&quot;:c},d),(d=ps.get(M))&amp;&amp;$v(a,d);var se=U=y.createElement(&quot;link&quot;);Wn(se),nr(se,&quot;link&quot;,a),se._p=new Promise(function(_e,De){se.onload=_e,se.onerror=De}),se.addEventListener(&quot;load&quot;,function(){W.loading|=1}),se.addEventListener(&quot;error&quot;,function(){W.loading|=2}),W.loading|=4,qp(U,c,y)}U={type:&quot;stylesheet&quot;,instance:U,count:1,state:W},S.set(M,U)}}}function ik(a,c){Vo.X(a,c);var d=pu;if(d&amp;&amp;a){var y=as(d).hoistableScripts,S=gu(a),M=y.get(S);M||(M=d.querySelector(yf(S)),M||(a=f({src:a,async:!0},c),(c=ps.get(S))&amp;&amp;Zv(a,c),M=d.createElement(&quot;script&quot;),Wn(M),nr(M,&quot;link&quot;,a),d.head.appendChild(M)),M={type:&quot;script&quot;,instance:M,count:1,state:null},y.set(S,M))}}function rk(a,c){Vo.M(a,c);var d=pu;if(d&amp;&amp;a){var y=as(d).hoistableScripts,S=gu(a),M=y.get(S);M||(M=d.querySelector(yf(S)),M||(a=f({src:a,async:!0,type:&quot;module&quot;},c),(c=ps.get(S))&amp;&amp;Zv(a,c),M=d.createElement(&quot;script&quot;),Wn(M),nr(M,&quot;link&quot;,a),d.head.appendChild(M)),M={type:&quot;script&quot;,instance:M,count:1,state:null},y.set(S,M))}}function gM(a,c,d,y){var S=(S=ae.current)?Xp(S):null;if(!S)throw Error(i(446));switch(a){case&quot;meta&quot;:case&quot;title&quot;:return null;case&quot;style&quot;:return typeof d.precedence==&quot;string&quot;&amp;&amp;typeof d.href==&quot;string&quot;?(c=mu(d.href),d=as(S).hoistableStyles,y=d.get(c),y||(y={type:&quot;style&quot;,instance:null,count:0,state:null},d.set(c,y)),y):{type:&quot;void&quot;,instance:null,count:0,state:null};case&quot;link&quot;:if(d.rel===&quot;stylesheet&quot;&amp;&amp;typeof d.href==&quot;string&quot;&amp;&amp;typeof d.precedence==&quot;string&quot;){a=mu(d.href);var M=as(S).hoistableStyles,U=M.get(a);if(U||(S=S.ownerDocument||S,U={type:&quot;stylesheet&quot;,instance:null,count:0,state:{loading:0,preload:null}},M.set(a,U),(M=S.querySelector(gf(a)))&amp;&amp;!M._p&amp;&amp;(U.instance=M,U.state.loading=5),ps.has(a)||(d={rel:&quot;preload&quot;,as:&quot;style&quot;,href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ps.set(a,d),M||sk(S,a,d,U.state))),c&amp;&amp;y===null)throw Error(i(528,&quot;&quot;));return U}if(c&amp;&amp;y!==null)throw Error(i(529,&quot;&quot;));return null;case&quot;script&quot;:return c=d.async,d=d.src,typeof d==&quot;string&quot;&amp;&amp;c&amp;&amp;typeof c!=&quot;function&quot;&amp;&amp;typeof c!=&quot;symbol&quot;?(c=gu(d),d=as(S).hoistableScripts,y=d.get(c),y||(y={type:&quot;script&quot;,instance:null,count:0,state:null},d.set(c,y)),y):{type:&quot;void&quot;,instance:null,count:0,state:null};default:throw Error(i(444,a))}}function mu(a){return&#x27;href=&quot;&#x27;+vn(a)+&#x27;&quot;&#x27;}function gf(a){return&#x27;link[rel=&quot;stylesheet&quot;][&#x27;+a+&quot;]&quot;}function yM(a){return f({},a,{&quot;data-precedence&quot;:a.precedence,precedence:null})}function sk(a,c,d,y){a.querySelector(&#x27;link[rel=&quot;preload&quot;][as=&quot;style&quot;][&#x27;+c+&quot;]&quot;)?y.loading=1:(c=a.createElement(&quot;link&quot;),y.preload=c,c.addEventListener(&quot;load&quot;,function(){return y.loading|=1}),c.addEventListener(&quot;error&quot;,function(){return y.loading|=2}),nr(c,&quot;link&quot;,d),Wn(c),a.head.appendChild(c))}function gu(a){return&#x27;[src=&quot;&#x27;+vn(a)+&#x27;&quot;]&#x27;}function yf(a){return&quot;script[async]&quot;+a}function _M(a,c,d){if(c.count++,c.instance===null)switch(c.type){case&quot;style&quot;:var y=a.querySelector(&#x27;style[data-href~=&quot;&#x27;+vn(d.href)+&#x27;&quot;]&#x27;);if(y)return c.instance=y,Wn(y),y;var S=f({},d,{&quot;data-href&quot;:d.href,&quot;data-precedence&quot;:d.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement(&quot;style&quot;),Wn(y),nr(y,&quot;style&quot;,S),qp(y,d.precedence,a),c.instance=y;case&quot;stylesheet&quot;:S=mu(d.href);var M=a.querySelector(gf(S));if(M)return c.state.loading|=4,c.instance=M,Wn(M),M;y=yM(d),(S=ps.get(S))&amp;&amp;$v(y,S),M=(a.ownerDocument||a).createElement(&quot;link&quot;),Wn(M);var U=M;return U._p=new Promise(function(W,se){U.onload=W,U.onerror=se}),nr(M,&quot;link&quot;,y),c.state.loading|=4,qp(M,d.precedence,a),c.instance=M;case&quot;script&quot;:return M=gu(d.src),(S=a.querySelector(yf(M)))?(c.instance=S,Wn(S),S):(y=d,(S=ps.get(M))&amp;&amp;(y=f({},d),Zv(y,S)),a=a.ownerDocument||a,S=a.createElement(&quot;script&quot;),Wn(S),nr(S,&quot;link&quot;,y),a.head.appendChild(S),c.instance=S);case&quot;void&quot;:return null;default:throw Error(i(443,c.type))}else c.type===&quot;stylesheet&quot;&amp;&amp;(c.state.loading&amp;4)===0&amp;&amp;(y=c.instance,c.state.loading|=4,qp(y,d.precedence,a));return c.instance}function qp(a,c,d){for(var y=d.querySelectorAll(&#x27;link[rel=&quot;stylesheet&quot;][data-precedence],style[data-precedence]&#x27;),S=y.length?y[y.length-1]:null,M=S,U=0;U&lt;y.length;U++){var W=y[U];if(W.dataset.precedence===c)M=W;else if(M!==S)break}M?M.parentNode.insertBefore(a,M.nextSibling):(c=d.nodeType===9?d.head:d,c.insertBefore(a,c.firstChild))}function $v(a,c){a.crossOrigin==null&amp;&amp;(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&amp;&amp;(a.referrerPolicy=c.referrerPolicy),a.title==null&amp;&amp;(a.title=c.title)}function Zv(a,c){a.crossOrigin==null&amp;&amp;(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&amp;&amp;(a.referrerPolicy=c.referrerPolicy),a.integrity==null&amp;&amp;(a.integrity=c.integrity)}var Yp=null;function vM(a,c,d){if(Yp===null){var y=new Map,S=Yp=new Map;S.set(d,y)}else S=Yp,y=S.get(d),y||(y=new Map,S.set(d,y));if(y.has(a))return y;for(y.set(a,null),d=d.getElementsByTagName(a),S=0;S&lt;d.length;S++){var M=d[S];if(!(M[kr]||M[Zn]||a===&quot;link&quot;&amp;&amp;M.getAttribute(&quot;rel&quot;)===&quot;stylesheet&quot;)&amp;&amp;M.namespaceURI!==&quot;http://www.w3.org/2000/svg&quot;){var U=M.getAttribute(c)||&quot;&quot;;U=a+U;var W=y.get(U);W?W.push(M):y.set(U,[M])}}return y}function bM(a,c,d){a=a.ownerDocument||a,a.head.insertBefore(d,c===&quot;title&quot;?a.querySelector(&quot;head &gt; title&quot;):null)}function ok(a,c,d){if(d===1||c.itemProp!=null)return!1;switch(a){case&quot;meta&quot;:case&quot;title&quot;:return!0;case&quot;style&quot;:if(typeof c.precedence!=&quot;string&quot;||typeof c.href!=&quot;string&quot;||c.href===&quot;&quot;)break;return!0;case&quot;link&quot;:if(typeof c.rel!=&quot;string&quot;||typeof c.href!=&quot;string&quot;||c.href===&quot;&quot;||c.onLoad||c.onError)break;switch(c.rel){case&quot;stylesheet&quot;:return a=c.disabled,typeof c.precedence==&quot;string&quot;&amp;&amp;a==null;default:return!0}case&quot;script&quot;:if(c.async&amp;&amp;typeof c.async!=&quot;function&quot;&amp;&amp;typeof c.async!=&quot;symbol&quot;&amp;&amp;!c.onLoad&amp;&amp;!c.onError&amp;&amp;c.src&amp;&amp;typeof c.src==&quot;string&quot;)return!0}return!1}function xM(a){return!(a.type===&quot;stylesheet&quot;&amp;&amp;(a.state.loading&amp;3)===0)}var _f=null;function ak(){}function lk(a,c,d){if(_f===null)throw Error(i(475));var y=_f;if(c.type===&quot;stylesheet&quot;&amp;&amp;(typeof d.media!=&quot;string&quot;||matchMedia(d.media).matches!==!1)&amp;&amp;(c.state.loading&amp;4)===0){if(c.instance===null){var S=mu(d.href),M=a.querySelector(gf(S));if(M){a=M._p,a!==null&amp;&amp;typeof a==&quot;object&quot;&amp;&amp;typeof a.then==&quot;function&quot;&amp;&amp;(y.count++,y=Kp.bind(y),a.then(y,y)),c.state.loading|=4,c.instance=M,Wn(M);return}M=a.ownerDocument||a,d=yM(d),(S=ps.get(S))&amp;&amp;$v(d,S),M=M.createElement(&quot;link&quot;),Wn(M);var U=M;U._p=new Promise(function(W,se){U.onload=W,U.onerror=se}),nr(M,&quot;link&quot;,d),c.instance=M}y.stylesheets===null&amp;&amp;(y.stylesheets=new Map),y.stylesheets.set(c,a),(a=c.state.preload)&amp;&amp;(c.state.loading&amp;3)===0&amp;&amp;(y.count++,c=Kp.bind(y),a.addEventListener(&quot;load&quot;,c),a.addEventListener(&quot;error&quot;,c))}}function ck(){if(_f===null)throw Error(i(475));var a=_f;return a.stylesheets&amp;&amp;a.count===0&amp;&amp;Jv(a,a.stylesheets),0&lt;a.count?function(c){var d=setTimeout(function(){if(a.stylesheets&amp;&amp;Jv(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(d)}}:null}function Kp(){if(this.count--,this.count===0){if(this.stylesheets)Jv(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var $p=null;function Jv(a,c){a.stylesheets=null,a.unsuspend!==null&amp;&amp;(a.count++,$p=new Map,c.forEach(uk,a),$p=null,Kp.call(a))}function uk(a,c){if(!(c.state.loading&amp;4)){var d=$p.get(a);if(d)var y=d.get(null);else{d=new Map,$p.set(a,d);for(var S=a.querySelectorAll(&quot;link[data-precedence],style[data-precedence]&quot;),M=0;M&lt;S.length;M++){var U=S[M];(U.nodeName===&quot;LINK&quot;||U.getAttribute(&quot;media&quot;)!==&quot;not all&quot;)&amp;&amp;(d.set(U.dataset.precedence,U),y=U)}y&amp;&amp;d.set(null,y)}S=c.instance,U=S.getAttribute(&quot;data-precedence&quot;),M=d.get(U)||y,M===y&amp;&amp;d.set(null,S),d.set(U,S),this.count++,y=Kp.bind(this),S.addEventListener(&quot;load&quot;,y),S.addEventListener(&quot;error&quot;,y),M?M.parentNode.insertBefore(S,M.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(S,a.firstChild)),c.state.loading|=4}}var vf={$$typeof:w,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function hk(a,c,d,y,S,M,U,W){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=y,this.onUncaughtError=S,this.onCaughtError=M,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function SM(a,c,d,y,S,M,U,W,se,_e,De,ke){return a=new hk(a,c,d,U,W,se,_e,ke),c=1,M===!0&amp;&amp;(c|=24),M=Hr(3,null,null,c),a.current=M,M.stateNode=a,c=I_(),c.refCount++,a.pooledCache=c,c.refCount++,M.memoizedState={element:y,isDehydrated:d,cache:c},k_(M),a}function wM(a){return a?(a=qc,a):qc}function EM(a,c,d,y,S,M){S=wM(S),y.context===null?y.context=S:y.pendingContext=S,y=Sa(c),y.payload={element:d},M=M===void 0?null:M,M!==null&amp;&amp;(y.callback=M),d=wa(a,y,c),d!==null&amp;&amp;(Xr(d,a,c),Yh(d,a,c))}function TM(a,c){if(a=a.memoizedState,a!==null&amp;&amp;a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&amp;&amp;d&lt;c?d:c}}function Qv(a,c){TM(a,c),(a=a.alternate)&amp;&amp;TM(a,c)}function MM(a){if(a.tag===13){var c=Xc(a,67108864);c!==null&amp;&amp;Xr(c,a,67108864),Qv(a,67108864)}}var Zp=!0;function fk(a,c,d,y){var S=I.T;I.T=null;var M=j.p;try{j.p=2,eb(a,c,d,y)}finally{j.p=M,I.T=S}}function dk(a,c,d,y){var S=I.T;I.T=null;var M=j.p;try{j.p=8,eb(a,c,d,y)}finally{j.p=M,I.T=S}}function eb(a,c,d,y){if(Zp){var S=tb(y);if(S===null)Hv(a,c,y,Jp,d),CM(a,y);else if(mk(S,a,c,d,y))y.stopPropagation();else if(CM(a,y),c&amp;4&amp;&amp;-1&lt;pk.indexOf(a)){for(;S!==null;){var M=Er(S);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var U=rt(M.pendingLanes);if(U!==0){var W=M;for(W.pendingLanes|=2,W.entangledLanes|=2;U;){var se=1&lt;&lt;31-ut(U);W.entanglements[1]|=se,U&amp;=~se}oo(M),(Cn&amp;6)===0&amp;&amp;(Lp=Fe()+500,ff(0))}}break;case 13:W=Xc(M,2),W!==null&amp;&amp;Xr(W,M,2),kp(),Qv(M,2)}if(M=tb(y),M===null&amp;&amp;Hv(a,c,y,Jp,d),M===S)break;S=M}S!==null&amp;&amp;y.stopPropagation()}else Hv(a,c,y,null,d)}}function tb(a){return a=Te(a),nb(a)}var Jp=null;function nb(a){if(Jp=null,a=wr(a),a!==null){var c=s(a);if(c===null)a=null;else{var d=c.tag;if(d===13){if(a=o(c),a!==null)return a;a=null}else if(d===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&amp;&amp;(a=null)}}return Jp=a,null}function AM(a){switch(a){case&quot;beforetoggle&quot;:case&quot;cancel&quot;:case&quot;click&quot;:case&quot;close&quot;:case&quot;contextmenu&quot;:case&quot;copy&quot;:case&quot;cut&quot;:case&quot;auxclick&quot;:case&quot;dblclick&quot;:case&quot;dragend&quot;:case&quot;dragstart&quot;:case&quot;drop&quot;:case&quot;focusin&quot;:case&quot;focusout&quot;:case&quot;input&quot;:case&quot;invalid&quot;:case&quot;keydown&quot;:case&quot;keypress&quot;:case&quot;keyup&quot;:case&quot;mousedown&quot;:case&quot;mouseup&quot;:case&quot;paste&quot;:case&quot;pause&quot;:case&quot;play&quot;:case&quot;pointercancel&quot;:case&quot;pointerdown&quot;:case&quot;pointerup&quot;:case&quot;ratechange&quot;:case&quot;reset&quot;:case&quot;resize&quot;:case&quot;seeked&quot;:case&quot;submit&quot;:case&quot;toggle&quot;:case&quot;touchcancel&quot;:case&quot;touchend&quot;:case&quot;touchstart&quot;:case&quot;volumechange&quot;:case&quot;change&quot;:case&quot;selectionchange&quot;:case&quot;textInput&quot;:case&quot;compositionstart&quot;:case&quot;compositionend&quot;:case&quot;compositionupdate&quot;:case&quot;beforeblur&quot;:case&quot;afterblur&quot;:case&quot;beforeinput&quot;:case&quot;blur&quot;:case&quot;fullscreenchange&quot;:case&quot;focus&quot;:case&quot;hashchange&quot;:case&quot;popstate&quot;:case&quot;select&quot;:case&quot;selectstart&quot;:return 2;case&quot;drag&quot;:case&quot;dragenter&quot;:case&quot;dragexit&quot;:case&quot;dragleave&quot;:case&quot;dragover&quot;:case&quot;mousemove&quot;:case&quot;mouseout&quot;:case&quot;mouseover&quot;:case&quot;pointermove&quot;:case&quot;pointerout&quot;:case&quot;pointerover&quot;:case&quot;scroll&quot;:case&quot;touchmove&quot;:case&quot;wheel&quot;:case&quot;mouseenter&quot;:case&quot;mouseleave&quot;:case&quot;pointerenter&quot;:case&quot;pointerleave&quot;:return 8;case&quot;message&quot;:switch(Ne()){case mt:return 2;case ze:return 8;case te:case H:return 32;case pe:return 268435456;default:return 32}default:return 32}}var ib=!1,Ua=null,ka=null,Fa=null,bf=new Map,xf=new Map,za=[],pk=&quot;mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset&quot;.split(&quot; &quot;);function CM(a,c){switch(a){case&quot;focusin&quot;:case&quot;focusout&quot;:Ua=null;break;case&quot;dragenter&quot;:case&quot;dragleave&quot;:ka=null;break;case&quot;mouseover&quot;:case&quot;mouseout&quot;:Fa=null;break;case&quot;pointerover&quot;:case&quot;pointerout&quot;:bf.delete(c.pointerId);break;case&quot;gotpointercapture&quot;:case&quot;lostpointercapture&quot;:xf.delete(c.pointerId)}}function Sf(a,c,d,y,S,M){return a===null||a.nativeEvent!==M?(a={blockedOn:c,domEventName:d,eventSystemFlags:y,nativeEvent:M,targetContainers:[S]},c!==null&amp;&amp;(c=Er(c),c!==null&amp;&amp;MM(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,S!==null&amp;&amp;c.indexOf(S)===-1&amp;&amp;c.push(S),a)}function mk(a,c,d,y,S){switch(c){case&quot;focusin&quot;:return Ua=Sf(Ua,a,c,d,y,S),!0;case&quot;dragenter&quot;:return ka=Sf(ka,a,c,d,y,S),!0;case&quot;mouseover&quot;:return Fa=Sf(Fa,a,c,d,y,S),!0;case&quot;pointerover&quot;:var M=S.pointerId;return bf.set(M,Sf(bf.get(M)||null,a,c,d,y,S)),!0;case&quot;gotpointercapture&quot;:return M=S.pointerId,xf.set(M,Sf(xf.get(M)||null,a,c,d,y,S)),!0}return!1}function RM(a){var c=wr(a.target);if(c!==null){var d=s(c);if(d!==null){if(c=d.tag,c===13){if(c=o(d),c!==null){a.blockedOn=c,Bi(a.priority,function(){if(d.tag===13){var y=Wr();y=wn(y);var S=Xc(d,y);S!==null&amp;&amp;Xr(S,d,y),Qv(d,y)}});return}}else if(c===3&amp;&amp;d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Qp(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0&lt;c.length;){var d=tb(a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);J=y,d.target.dispatchEvent(y),J=null}else return c=Er(d),c!==null&amp;&amp;MM(c),a.blockedOn=d,!1;c.shift()}return!0}function OM(a,c,d){Qp(a)&amp;&amp;d.delete(c)}function gk(){ib=!1,Ua!==null&amp;&amp;Qp(Ua)&amp;&amp;(Ua=null),ka!==null&amp;&amp;Qp(ka)&amp;&amp;(ka=null),Fa!==null&amp;&amp;Qp(Fa)&amp;&amp;(Fa=null),bf.forEach(OM),xf.forEach(OM)}function em(a,c){a.blockedOn===c&amp;&amp;(a.blockedOn=null,ib||(ib=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gk)))}var tm=null;function DM(a){tm!==a&amp;&amp;(tm=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){tm===a&amp;&amp;(tm=null);for(var c=0;c&lt;a.length;c+=3){var d=a[c],y=a[c+1],S=a[c+2];if(typeof y!=&quot;function&quot;){if(nb(y||d)===null)continue;break}var M=Er(d);M!==null&amp;&amp;(a.splice(c,3),c-=3,nv(M,{pending:!0,data:S,method:d.method,action:y},y,S))}}))}function wf(a){function c(se){return em(se,a)}Ua!==null&amp;&amp;em(Ua,a),ka!==null&amp;&amp;em(ka,a),Fa!==null&amp;&amp;em(Fa,a),bf.forEach(c),xf.forEach(c);for(var d=0;d&lt;za.length;d++){var y=za[d];y.blockedOn===a&amp;&amp;(y.blockedOn=null)}for(;0&lt;za.length&amp;&amp;(d=za[0],d.blockedOn===null);)RM(d),d.blockedOn===null&amp;&amp;za.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(y=0;y&lt;d.length;y+=3){var S=d[y],M=d[y+1],U=S[pi]||null;if(typeof M==&quot;function&quot;)U||DM(d);else if(U){var W=null;if(M&amp;&amp;M.hasAttribute(&quot;formAction&quot;)){if(S=M,U=M[pi]||null)W=U.formAction;else if(nb(S)!==null)continue}else W=U.action;typeof W==&quot;function&quot;?d[y+1]=W:(d.splice(y,3),y-=3),DM(d)}}}function rb(a){this._internalRoot=a}nm.prototype.render=rb.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(i(409));var d=c.current,y=Wr();EM(d,y,a,c,null,null)},nm.prototype.unmount=rb.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;EM(a.current,2,null,a,null,null),kp(),c[Hi]=null}};function nm(a){this._internalRoot=a}nm.prototype.unstable_scheduleHydration=function(a){if(a){var c=zt();a={blockedOn:null,target:a,priority:c};for(var d=0;d&lt;za.length&amp;&amp;c!==0&amp;&amp;c&lt;za[d].priority;d++);za.splice(d,0,a),d===0&amp;&amp;RM(a)}};var NM=e.version;if(NM!==&quot;19.1.0&quot;)throw Error(i(527,NM,&quot;19.1.0&quot;));j.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render==&quot;function&quot;?Error(i(188)):(a=Object.keys(a).join(&quot;,&quot;),Error(i(268,a)));return a=u(c),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var yk={bundleType:0,version:&quot;19.1.0&quot;,rendererPackageName:&quot;react-dom&quot;,currentDispatcherRef:I,reconcilerVersion:&quot;19.1.0&quot;};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&lt;&quot;u&quot;){var im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!im.isDisabled&amp;&amp;im.supportsFiber)try{Me=im.inject(yk),Ze=im}catch{}}return Tf.createRoot=function(a,c){if(!r(a))throw Error(i(299));var d=!1,y=&quot;&quot;,S=YE,M=KE,U=$E,W=null;return c!=null&amp;&amp;(c.unstable_strictMode===!0&amp;&amp;(d=!0),c.identifierPrefix!==void 0&amp;&amp;(y=c.identifierPrefix),c.onUncaughtError!==void 0&amp;&amp;(S=c.onUncaughtError),c.onCaughtError!==void 0&amp;&amp;(M=c.onCaughtError),c.onRecoverableError!==void 0&amp;&amp;(U=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&amp;&amp;(W=c.unstable_transitionCallbacks)),c=SM(a,1,!1,null,null,d,y,S,M,U,W,null),a[Hi]=c.current,Bv(a),new rb(c)},Tf.hydrateRoot=function(a,c,d){if(!r(a))throw Error(i(299));var y=!1,S=&quot;&quot;,M=YE,U=KE,W=$E,se=null,_e=null;return d!=null&amp;&amp;(d.unstable_strictMode===!0&amp;&amp;(y=!0),d.identifierPrefix!==void 0&amp;&amp;(S=d.identifierPrefix),d.onUncaughtError!==void 0&amp;&amp;(M=d.onUncaughtError),d.onCaughtError!==void 0&amp;&amp;(U=d.onCaughtError),d.onRecoverableError!==void 0&amp;&amp;(W=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&amp;&amp;(se=d.unstable_transitionCallbacks),d.formState!==void 0&amp;&amp;(_e=d.formState)),c=SM(a,1,!0,c,d??null,y,S,M,U,W,se,_e),c.context=wM(null),d=c.current,y=Wr(),y=wn(y),S=Sa(y),S.callback=null,wa(d,S,y),d=y,c.current.lanes=d,Pe(c,d),oo(c),a[Hi]=c.current,Bv(a),new nm(c)},Tf.version=&quot;19.1.0&quot;,Tf}var VM;function Rk(){if(VM)return ob.exports;VM=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&gt;&quot;u&quot;||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=&quot;function&quot;))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ob.exports=Ck(),ob.exports}var Ok=Rk(),re=Lc();const md=Z0(re),GM=n=&gt;{let e;const t=new Set,i=(h,f)=&gt;{const p=typeof h==&quot;function&quot;?h(e):h;if(!Object.is(p,e)){const m=e;e=f??(typeof p!=&quot;object&quot;||p===null)?p:Object.assign({},e,p),t.forEach(g=&gt;g(e,m))}},r=()=&gt;e,l={setState:i,getState:r,getInitialState:()=&gt;u,subscribe:h=&gt;(t.add(h),()=&gt;t.delete(h))},u=e=n(i,r,l);return l},Dk=n=&gt;n?GM(n):GM,Nk=n=&gt;n;function Ik(n,e=Nk){const t=md.useSyncExternalStore(n.subscribe,()=&gt;e(n.getState()),()=&gt;e(n.getInitialState()));return md.useDebugValue(t),t}const jM=n=&gt;{const e=Dk(n),t=i=&gt;Ik(e,i);return Object.assign(t,e),t},Eo=n=&gt;n?jM(n):jM,ZS=Eo(n=&gt;({min:0,max:100,step:10,minColor:&quot;rgb(255, 0, 0)&quot;,maxColor:&quot;rgb(0, 255, 0)&quot;,setMin:e=&gt;n({min:e}),setMax:e=&gt;n({max:e}),setStep:e=&gt;n({step:e}),setMinColor:e=&gt;n({minColor:e}),setMaxColor:e=&gt;n({maxColor:e}),colorPalette:[[0,149/255,239/255],[1,0,0]],setColorPalette:e=&gt;n({colorPalette:e}),showLegend:!1,setShowLegend:e=&gt;n({showLegend:e})})),Pk=()=&gt;{const{min:n,max:e,step:t,colorPalette:i,showLegend:r}=ZS(),s=`rgb(${i[0].map(u=&gt;u*255).join(&quot;, &quot;)})`,o=`rgb(${i[1].map(u=&gt;u*255).join(&quot;, &quot;)})`,l={backgroundImage:`linear-gradient(to top, ${s}, ${o})`};return P.jsx(&quot;div&quot;,{className:r?&quot;w-20 h-80&quot;:&quot;w-0&quot;,children:P.jsx(&quot;div&quot;,{className:&quot;w-full h-full&quot;,style:l})})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Q0=&quot;176&quot;,_c={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},uc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Z2=0,Jx=1,J2=2,Lk=3,Uk=0,JS=1,Q2=2,mo=3,Qr=0,xr=1,Ki=2,la=0,vc=1,Qx=2,eS=3,tS=4,eD=5,il=100,tD=101,nD=102,iD=103,rD=104,sD=200,oD=201,aD=202,lD=203,Gg=204,jg=205,cD=206,uD=207,hD=208,fD=209,dD=210,pD=211,mD=212,gD=213,yD=214,Wg=0,Xg=1,qg=2,Tc=3,Yg=4,Kg=5,$g=6,Zg=7,Vd=0,_D=1,vD=2,ca=0,bD=1,xD=2,SD=3,wD=4,ED=5,TD=6,MD=7,nS=&quot;attached&quot;,AD=&quot;detached&quot;,ey=300,fa=301,fl=302,gd=303,yd=304,Sh=306,ws=1e3,rr=1001,ih=1002,xi=1003,ty=1004,kk=1004,hc=1005,Fk=1005,fi=1006,Ju=1007,zk=1007,Zr=1008,Bk=1008,es=1009,QS=1010,ew=1011,rh=1012,ny=1013,da=1014,Pr=1015,wh=1016,iy=1017,ry=1018,sh=1020,tw=35902,nw=1021,iw=1022,vr=1023,oh=1026,ah=1027,Gd=1028,jd=1029,rw=1030,sy=1031,Hk=1032,oy=1033,id=33776,rd=33777,sd=33778,od=33779,Jg=35840,Qg=35841,e0=35842,t0=35843,n0=36196,i0=37492,r0=37496,s0=37808,o0=37809,a0=37810,l0=37811,c0=37812,u0=37813,h0=37814,f0=37815,d0=37816,p0=37817,m0=37818,g0=37819,y0=37820,_0=37821,ad=36492,v0=36494,b0=36495,sw=36283,x0=36284,S0=36285,w0=36286,CD=2200,RD=2201,OD=2202,lh=2300,ch=2301,Cg=2302,fc=2400,dc=2401,_d=2402,ay=2500,ow=2501,DD=0,aw=1,E0=2,ND=3200,ID=3201,Vk=3202,Gk=3203,vl=0,PD=1,ta=&quot;&quot;,Nn=&quot;srgb&quot;,fr=&quot;srgb-linear&quot;,vd=&quot;linear&quot;,On=&quot;srgb&quot;,jk=0,ic=7680,Wk=7681,Xk=7682,qk=7683,Yk=34055,Kk=34056,$k=5386,Zk=512,Jk=513,Qk=514,eF=515,tF=516,nF=517,iF=518,iS=519,LD=512,UD=513,kD=514,lw=515,FD=516,zD=517,BD=518,HD=519,bd=35044,rF=35048,sF=35040,oF=35045,aF=35049,lF=35041,cF=35046,uF=35050,hF=35042,fF=&quot;100&quot;,rS=&quot;300 es&quot;,Es=2e3,xd=2001,dF={COMPUTE:&quot;compute&quot;,RENDER:&quot;render&quot;},pF={PERSPECTIVE:&quot;perspective&quot;,LINEAR:&quot;linear&quot;,FLAT:&quot;flat&quot;},mF={NORMAL:&quot;normal&quot;,CENTROID:&quot;centroid&quot;,SAMPLE:&quot;sample&quot;,FLAT_FIRST:&quot;flat first&quot;,FLAT_EITHER:&quot;flat either&quot;};let To=class{addEventListener(e,t){this._listeners===void 0&amp;&amp;(this._listeners={});const i=this._listeners;i[e]===void 0&amp;&amp;(i[e]=[]),i[e].indexOf(t)===-1&amp;&amp;i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&amp;&amp;i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&amp;&amp;r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s&lt;o;s++)r[s].call(this,e);e.target=null}}};const ar=[&quot;00&quot;,&quot;01&quot;,&quot;02&quot;,&quot;03&quot;,&quot;04&quot;,&quot;05&quot;,&quot;06&quot;,&quot;07&quot;,&quot;08&quot;,&quot;09&quot;,&quot;0a&quot;,&quot;0b&quot;,&quot;0c&quot;,&quot;0d&quot;,&quot;0e&quot;,&quot;0f&quot;,&quot;10&quot;,&quot;11&quot;,&quot;12&quot;,&quot;13&quot;,&quot;14&quot;,&quot;15&quot;,&quot;16&quot;,&quot;17&quot;,&quot;18&quot;,&quot;19&quot;,&quot;1a&quot;,&quot;1b&quot;,&quot;1c&quot;,&quot;1d&quot;,&quot;1e&quot;,&quot;1f&quot;,&quot;20&quot;,&quot;21&quot;,&quot;22&quot;,&quot;23&quot;,&quot;24&quot;,&quot;25&quot;,&quot;26&quot;,&quot;27&quot;,&quot;28&quot;,&quot;29&quot;,&quot;2a&quot;,&quot;2b&quot;,&quot;2c&quot;,&quot;2d&quot;,&quot;2e&quot;,&quot;2f&quot;,&quot;30&quot;,&quot;31&quot;,&quot;32&quot;,&quot;33&quot;,&quot;34&quot;,&quot;35&quot;,&quot;36&quot;,&quot;37&quot;,&quot;38&quot;,&quot;39&quot;,&quot;3a&quot;,&quot;3b&quot;,&quot;3c&quot;,&quot;3d&quot;,&quot;3e&quot;,&quot;3f&quot;,&quot;40&quot;,&quot;41&quot;,&quot;42&quot;,&quot;43&quot;,&quot;44&quot;,&quot;45&quot;,&quot;46&quot;,&quot;47&quot;,&quot;48&quot;,&quot;49&quot;,&quot;4a&quot;,&quot;4b&quot;,&quot;4c&quot;,&quot;4d&quot;,&quot;4e&quot;,&quot;4f&quot;,&quot;50&quot;,&quot;51&quot;,&quot;52&quot;,&quot;53&quot;,&quot;54&quot;,&quot;55&quot;,&quot;56&quot;,&quot;57&quot;,&quot;58&quot;,&quot;59&quot;,&quot;5a&quot;,&quot;5b&quot;,&quot;5c&quot;,&quot;5d&quot;,&quot;5e&quot;,&quot;5f&quot;,&quot;60&quot;,&quot;61&quot;,&quot;62&quot;,&quot;63&quot;,&quot;64&quot;,&quot;65&quot;,&quot;66&quot;,&quot;67&quot;,&quot;68&quot;,&quot;69&quot;,&quot;6a&quot;,&quot;6b&quot;,&quot;6c&quot;,&quot;6d&quot;,&quot;6e&quot;,&quot;6f&quot;,&quot;70&quot;,&quot;71&quot;,&quot;72&quot;,&quot;73&quot;,&quot;74&quot;,&quot;75&quot;,&quot;76&quot;,&quot;77&quot;,&quot;78&quot;,&quot;79&quot;,&quot;7a&quot;,&quot;7b&quot;,&quot;7c&quot;,&quot;7d&quot;,&quot;7e&quot;,&quot;7f&quot;,&quot;80&quot;,&quot;81&quot;,&quot;82&quot;,&quot;83&quot;,&quot;84&quot;,&quot;85&quot;,&quot;86&quot;,&quot;87&quot;,&quot;88&quot;,&quot;89&quot;,&quot;8a&quot;,&quot;8b&quot;,&quot;8c&quot;,&quot;8d&quot;,&quot;8e&quot;,&quot;8f&quot;,&quot;90&quot;,&quot;91&quot;,&quot;92&quot;,&quot;93&quot;,&quot;94&quot;,&quot;95&quot;,&quot;96&quot;,&quot;97&quot;,&quot;98&quot;,&quot;99&quot;,&quot;9a&quot;,&quot;9b&quot;,&quot;9c&quot;,&quot;9d&quot;,&quot;9e&quot;,&quot;9f&quot;,&quot;a0&quot;,&quot;a1&quot;,&quot;a2&quot;,&quot;a3&quot;,&quot;a4&quot;,&quot;a5&quot;,&quot;a6&quot;,&quot;a7&quot;,&quot;a8&quot;,&quot;a9&quot;,&quot;aa&quot;,&quot;ab&quot;,&quot;ac&quot;,&quot;ad&quot;,&quot;ae&quot;,&quot;af&quot;,&quot;b0&quot;,&quot;b1&quot;,&quot;b2&quot;,&quot;b3&quot;,&quot;b4&quot;,&quot;b5&quot;,&quot;b6&quot;,&quot;b7&quot;,&quot;b8&quot;,&quot;b9&quot;,&quot;ba&quot;,&quot;bb&quot;,&quot;bc&quot;,&quot;bd&quot;,&quot;be&quot;,&quot;bf&quot;,&quot;c0&quot;,&quot;c1&quot;,&quot;c2&quot;,&quot;c3&quot;,&quot;c4&quot;,&quot;c5&quot;,&quot;c6&quot;,&quot;c7&quot;,&quot;c8&quot;,&quot;c9&quot;,&quot;ca&quot;,&quot;cb&quot;,&quot;cc&quot;,&quot;cd&quot;,&quot;ce&quot;,&quot;cf&quot;,&quot;d0&quot;,&quot;d1&quot;,&quot;d2&quot;,&quot;d3&quot;,&quot;d4&quot;,&quot;d5&quot;,&quot;d6&quot;,&quot;d7&quot;,&quot;d8&quot;,&quot;d9&quot;,&quot;da&quot;,&quot;db&quot;,&quot;dc&quot;,&quot;dd&quot;,&quot;de&quot;,&quot;df&quot;,&quot;e0&quot;,&quot;e1&quot;,&quot;e2&quot;,&quot;e3&quot;,&quot;e4&quot;,&quot;e5&quot;,&quot;e6&quot;,&quot;e7&quot;,&quot;e8&quot;,&quot;e9&quot;,&quot;ea&quot;,&quot;eb&quot;,&quot;ec&quot;,&quot;ed&quot;,&quot;ee&quot;,&quot;ef&quot;,&quot;f0&quot;,&quot;f1&quot;,&quot;f2&quot;,&quot;f3&quot;,&quot;f4&quot;,&quot;f5&quot;,&quot;f6&quot;,&quot;f7&quot;,&quot;f8&quot;,&quot;f9&quot;,&quot;fa&quot;,&quot;fb&quot;,&quot;fc&quot;,&quot;fd&quot;,&quot;fe&quot;,&quot;ff&quot;];let WM=1234567;const bc=Math.PI/180,uh=180/Math.PI;function Jr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ar[n&amp;255]+ar[n&gt;&gt;8&amp;255]+ar[n&gt;&gt;16&amp;255]+ar[n&gt;&gt;24&amp;255]+&quot;-&quot;+ar[e&amp;255]+ar[e&gt;&gt;8&amp;255]+&quot;-&quot;+ar[e&gt;&gt;16&amp;15|64]+ar[e&gt;&gt;24&amp;255]+&quot;-&quot;+ar[t&amp;63|128]+ar[t&gt;&gt;8&amp;255]+&quot;-&quot;+ar[t&gt;&gt;16&amp;255]+ar[t&gt;&gt;24&amp;255]+ar[i&amp;255]+ar[i&gt;&gt;8&amp;255]+ar[i&gt;&gt;16&amp;255]+ar[i&gt;&gt;24&amp;255]).toLowerCase()}function Vt(n,e,t){return Math.max(e,Math.min(t,n))}function cw(n,e){return(n%e+e)%e}function gF(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function yF(n,e,t){return n!==e?(t-n)/(e-n):0}function ld(n,e,t){return(1-t)*n+t*e}function _F(n,e,t,i){return ld(n,e,1-Math.exp(-t*i))}function vF(n,e=1){return e-Math.abs(cw(n,e*2)-e)}function bF(n,e,t){return n&lt;=e?0:n&gt;=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function xF(n,e,t){return n&lt;=e?0:n&gt;=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function SF(n,e){return n+Math.floor(Math.random()*(e-n+1))}function wF(n,e){return n+Math.random()*(e-n)}function EF(n){return n*(.5-Math.random())}function TF(n){n!==void 0&amp;&amp;(WM=n);let e=WM+=1831565813;return e=Math.imul(e^e&gt;&gt;&gt;15,e|1),e^=e+Math.imul(e^e&gt;&gt;&gt;7,e|61),((e^e&gt;&gt;&gt;14)&gt;&gt;&gt;0)/4294967296}function MF(n){return n*bc}function AF(n){return n*uh}function CF(n){return(n&amp;n-1)===0&amp;&amp;n!==0}function RF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function OF(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function DF(n,e,t,i,r){const s=Math.cos,o=Math.sin,l=s(t/2),u=o(t/2),h=s((e+i)/2),f=o((e+i)/2),p=s((e-i)/2),m=o((e-i)/2),g=s((i-e)/2),v=o((i-e)/2);switch(r){case&quot;XYX&quot;:n.set(l*f,u*p,u*m,l*h);break;case&quot;YZY&quot;:n.set(u*m,l*f,u*p,l*h);break;case&quot;ZXZ&quot;:n.set(u*p,u*m,l*f,l*h);break;case&quot;XZX&quot;:n.set(l*f,u*v,u*g,l*h);break;case&quot;YXY&quot;:n.set(u*g,l*f,u*v,l*h);break;case&quot;ZYZ&quot;:n.set(u*v,u*g,l*f,l*h);break;default:console.warn(&quot;THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: &quot;+r)}}function yr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error(&quot;Invalid component type.&quot;)}}function Xt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error(&quot;Invalid component type.&quot;)}}const rl={DEG2RAD:bc,RAD2DEG:uh,generateUUID:Jr,clamp:Vt,euclideanModulo:cw,mapLinear:gF,inverseLerp:yF,lerp:ld,damp:_F,pingpong:vF,smoothstep:bF,smootherstep:xF,randInt:SF,randFloat:wF,randFloatSpread:EF,seededRandom:TF,degToRad:MF,radToDeg:AF,isPowerOfTwo:CF,ceilPowerOfTwo:RF,floorPowerOfTwo:OF,setQuaternionFromProperEuler:DF,normalize:Xt,denormalize:yr};class Oe{constructor(e=0,t=0){Oe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error(&quot;index is out of range: &quot;+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error(&quot;index is out of range: &quot;+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Vt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&amp;&amp;e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jt{constructor(e,t,i,r,s,o,l,u,h){jt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&amp;&amp;this.set(e,t,i,r,s,o,l,u,h)}set(e,t,i,r,s,o,l,u,h){const f=this.elements;return f[0]=e,f[1]=r,f[2]=l,f[3]=t,f[4]=s,f[5]=u,f[6]=i,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[3],u=i[6],h=i[1],f=i[4],p=i[7],m=i[2],g=i[5],v=i[8],x=r[0],b=r[3],_=r[6],T=r[1],w=r[4],E=r[7],R=r[2],N=r[5],A=r[8];return s[0]=o*x+l*T+u*R,s[3]=o*b+l*w+u*N,s[6]=o*_+l*E+u*A,s[1]=h*x+f*T+p*R,s[4]=h*b+f*w+p*N,s[7]=h*_+f*E+p*A,s[2]=m*x+g*T+v*R,s[5]=m*b+g*w+v*N,s[8]=m*_+g*E+v*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8];return t*o*f-t*l*h-i*s*f+i*l*u+r*s*h-r*o*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8],p=f*o-l*h,m=l*u-f*s,g=h*s-o*u,v=t*p+i*m+r*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=p*x,e[1]=(r*h-f*i)*x,e[2]=(l*i-r*o)*x,e[3]=m*x,e[4]=(f*t-r*u)*x,e[5]=(r*s-l*t)*x,e[6]=g*x,e[7]=(i*u-h*t)*x,e[8]=(o*t-i*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,l){const u=Math.cos(s),h=Math.sin(s);return this.set(i*u,i*h,-i*(u*o+h*l)+o+e,-r*h,r*u,-r*(-h*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(hb.makeScale(e,t)),this}rotate(e){return this.premultiply(hb.makeRotation(-e)),this}translate(e,t){return this.premultiply(hb.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r&lt;9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i&lt;9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const hb=new jt;function VD(n){for(let e=n.length-1;e&gt;=0;--e)if(n[e]&gt;=65535)return!0;return!1}const NF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Yu(n,e){return new NF[n](e)}function Sd(n){return document.createElementNS(&quot;http://www.w3.org/1999/xhtml&quot;,n)}function GD(){const n=Sd(&quot;canvas&quot;);return n.style.display=&quot;block&quot;,n}const XM={};function Rg(n){n in XM||(XM[n]=!0,console.warn(n))}function IF(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function PF(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function LF(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const qM=new jt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),YM=new jt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function UF(){const n={enabled:!0,workingColorSpace:fr,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===On&amp;&amp;(r.r=ua(r.r),r.g=ua(r.g),r.b=ua(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&amp;&amp;(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===On&amp;&amp;(r.r=Qu(r.r),r.g=Qu(r.g),r.b=Qu(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===ta?vd:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[fr]:{primaries:e,whitePoint:i,transfer:vd,toXYZ:qM,fromXYZ:YM,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Nn},outputColorSpaceConfig:{drawingBufferColorSpace:Nn}},[Nn]:{primaries:e,whitePoint:i,transfer:On,toXYZ:qM,fromXYZ:YM,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Nn}}}),n}const Zt=UF();function ua(n){return n&lt;.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Qu(n){return n&lt;.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let yu;class jD{static getDataURL(e,t=&quot;image/png&quot;){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement&gt;&quot;u&quot;)return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{yu===void 0&amp;&amp;(yu=Sd(&quot;canvas&quot;)),yu.width=e.width,yu.height=e.height;const r=yu.getContext(&quot;2d&quot;);e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=yu}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;e instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;e instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;e instanceof ImageBitmap){const t=Sd(&quot;canvas&quot;);t.width=e.width,t.height=e.height;const i=t.getContext(&quot;2d&quot;);i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o&lt;s.length;o++)s[o]=ua(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i&lt;t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(ua(t[i]/255)*255):t[i]=ua(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn(&quot;THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.&quot;),e}}let kF=0;class ll{constructor(e=null){this.isSource=!0,Object.defineProperty(this,&quot;id&quot;,{value:kF++}),this.uuid=Jr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&amp;&amp;this.version++}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;;if(!t&amp;&amp;e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:&quot;&quot;},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o&lt;l;o++)r[o].isDataTexture?s.push(fb(r[o].image)):s.push(fb(r[o]))}else s=fb(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function fb(n){return typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;n instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;n instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;n instanceof ImageBitmap?jD.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn(&quot;THREE.Texture: Unable to serialize Texture.&quot;),{})}let FF=0;class Kn extends To{constructor(e=Kn.DEFAULT_IMAGE,t=Kn.DEFAULT_MAPPING,i=rr,r=rr,s=fi,o=Zr,l=vr,u=es,h=Kn.DEFAULT_ANISOTROPY,f=ta){super(),this.isTexture=!0,Object.defineProperty(this,&quot;id&quot;,{value:FF++}),this.uuid=Jr(),this.name=&quot;&quot;,this.source=new ll(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Oe(0,0),this.repeat=new Oe(1,1),this.center=new Oe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;;if(!t&amp;&amp;e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:&quot;Texture&quot;,generator:&quot;Texture.toJSON&quot;},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length&gt;0&amp;&amp;(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}transformUv(e){if(this.mapping!==ey)return e;if(e.applyMatrix3(this.matrix),e.x&lt;0||e.x&gt;1)switch(this.wrapS){case ws:e.x=e.x-Math.floor(e.x);break;case rr:e.x=e.x&lt;0?0:1;break;case ih:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y&lt;0||e.y&gt;1)switch(this.wrapT){case ws:e.y=e.y-Math.floor(e.y);break;case rr:e.y=e.y&lt;0?0:1;break;case ih:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&amp;&amp;(e.y=1-e.y),e}set needsUpdate(e){e===!0&amp;&amp;(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&amp;&amp;this.pmremVersion++}}Kn.DEFAULT_IMAGE=null;Kn.DEFAULT_MAPPING=ey;Kn.DEFAULT_ANISOTROPY=1;class yn{constructor(e=0,t=0,i=0,r=1){yn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error(&quot;index is out of range: &quot;+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(&quot;index is out of range: &quot;+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t&lt;1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const u=e.elements,h=u[0],f=u[4],p=u[8],m=u[1],g=u[5],v=u[9],x=u[2],b=u[6],_=u[10];if(Math.abs(f-m)&lt;.01&amp;&amp;Math.abs(p-x)&lt;.01&amp;&amp;Math.abs(v-b)&lt;.01){if(Math.abs(f+m)&lt;.1&amp;&amp;Math.abs(p+x)&lt;.1&amp;&amp;Math.abs(v+b)&lt;.1&amp;&amp;Math.abs(h+g+_-3)&lt;.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(h+1)/2,E=(g+1)/2,R=(_+1)/2,N=(f+m)/4,A=(p+x)/4,D=(v+b)/4;return w&gt;E&amp;&amp;w&gt;R?w&lt;.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=N/i,s=A/i):E&gt;R?E&lt;.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=N/r,s=D/r):R&lt;.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(R),i=A/s,r=D/s),this.set(i,r,s,t),this}let T=Math.sqrt((b-v)*(b-v)+(p-x)*(p-x)+(m-f)*(m-f));return Math.abs(T)&lt;.001&amp;&amp;(T=1),this.x=(b-v)/T,this.y=(p-x)/T,this.z=(m-f)/T,this.w=Math.acos((h+g+_-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this.w=Vt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this.w=Vt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&amp;&amp;e.y===this.y&amp;&amp;e.z===this.z&amp;&amp;e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ly extends To{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new yn(0,0,e,t),this.scissorTest=!1,this.viewport=new yn(0,0,e,t);const r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:fi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);const s=new Kn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let l=0;l&lt;o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&amp;&amp;(this._depthTexture.renderTarget=null),e!==null&amp;&amp;(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r&lt;s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t&lt;i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new ll(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&amp;&amp;(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}}class Js extends ly{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Wd extends Kn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=xi,this.minFilter=xi,this.wrapR=rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class zF extends Js{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Wd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class cy extends Kn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=xi,this.minFilter=xi,this.wrapR=rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class BF extends Js{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new cy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Si{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,l){let u=i[r+0],h=i[r+1],f=i[r+2],p=i[r+3];const m=s[o+0],g=s[o+1],v=s[o+2],x=s[o+3];if(l===0){e[t+0]=u,e[t+1]=h,e[t+2]=f,e[t+3]=p;return}if(l===1){e[t+0]=m,e[t+1]=g,e[t+2]=v,e[t+3]=x;return}if(p!==x||u!==m||h!==g||f!==v){let b=1-l;const _=u*m+h*g+f*v+p*x,T=_&gt;=0?1:-1,w=1-_*_;if(w&gt;Number.EPSILON){const R=Math.sqrt(w),N=Math.atan2(R,_*T);b=Math.sin(b*N)/R,l=Math.sin(l*N)/R}const E=l*T;if(u=u*b+m*E,h=h*b+g*E,f=f*b+v*E,p=p*b+x*E,b===1-l){const R=1/Math.sqrt(u*u+h*h+f*f+p*p);u*=R,h*=R,f*=R,p*=R}}e[t]=u,e[t+1]=h,e[t+2]=f,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const l=i[r],u=i[r+1],h=i[r+2],f=i[r+3],p=s[o],m=s[o+1],g=s[o+2],v=s[o+3];return e[t]=l*v+f*p+u*g-h*m,e[t+1]=u*v+f*m+h*p-l*g,e[t+2]=h*v+f*g+l*m-u*p,e[t+3]=f*v-l*p-u*m-h*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,u=Math.sin,h=l(i/2),f=l(r/2),p=l(s/2),m=u(i/2),g=u(r/2),v=u(s/2);switch(o){case&quot;XYZ&quot;:this._x=m*f*p+h*g*v,this._y=h*g*p-m*f*v,this._z=h*f*v+m*g*p,this._w=h*f*p-m*g*v;break;case&quot;YXZ&quot;:this._x=m*f*p+h*g*v,this._y=h*g*p-m*f*v,this._z=h*f*v-m*g*p,this._w=h*f*p+m*g*v;break;case&quot;ZXY&quot;:this._x=m*f*p-h*g*v,this._y=h*g*p+m*f*v,this._z=h*f*v+m*g*p,this._w=h*f*p-m*g*v;break;case&quot;ZYX&quot;:this._x=m*f*p-h*g*v,this._y=h*g*p+m*f*v,this._z=h*f*v-m*g*p,this._w=h*f*p+m*g*v;break;case&quot;YZX&quot;:this._x=m*f*p+h*g*v,this._y=h*g*p+m*f*v,this._z=h*f*v-m*g*p,this._w=h*f*p-m*g*v;break;case&quot;XZY&quot;:this._x=m*f*p-h*g*v,this._y=h*g*p-m*f*v,this._z=h*f*v+m*g*p,this._w=h*f*p+m*g*v;break;default:console.warn(&quot;THREE.Quaternion: .setFromEuler() encountered an unknown order: &quot;+o)}return t===!0&amp;&amp;this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],l=t[5],u=t[9],h=t[2],f=t[6],p=t[10],m=i+l+p;if(m&gt;0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(f-u)*g,this._y=(s-h)*g,this._z=(o-r)*g}else if(i&gt;l&amp;&amp;i&gt;p){const g=2*Math.sqrt(1+i-l-p);this._w=(f-u)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+h)/g}else if(l&gt;p){const g=2*Math.sqrt(1+l-i-p);this._w=(s-h)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(u+f)/g}else{const g=2*Math.sqrt(1+p-i-l);this._w=(o-r)/g,this._x=(s+h)/g,this._y=(u+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i&lt;Number.EPSILON?(i=0,Math.abs(e.x)&gt;Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,l=t._x,u=t._y,h=t._z,f=t._w;return this._x=i*f+o*l+r*h-s*u,this._y=r*f+o*u+s*l-i*h,this._z=s*f+o*h+i*u-r*l,this._w=o*f-i*l-r*u-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+i*e._x+r*e._y+s*e._z;if(l&lt;0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l&gt;=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const u=1-l*l;if(u&lt;=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const h=Math.sqrt(u),f=Math.atan2(h,l),p=Math.sin((1-t)*f)/h,m=Math.sin(t*f)/h;return this._w=o*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&amp;&amp;e._y===this._y&amp;&amp;e._z===this._z&amp;&amp;e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,i=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&amp;&amp;(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error(&quot;index is out of range: &quot;+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(&quot;index is out of range: &quot;+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(KM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(KM.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,l=e.z,u=e.w,h=2*(o*r-l*i),f=2*(l*t-s*r),p=2*(s*i-o*t);return this.x=t+u*h+o*p-l*f,this.y=i+u*f+l*h-s*p,this.z=r+u*p+s*f-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Vt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*o-i*u,this.z=i*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return db.copy(this).projectOnVector(e),this.sub(db)}reflect(e){return this.sub(db.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Vt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&amp;&amp;e.y===this.y&amp;&amp;e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const db=new Y,KM=new Si;class Ri{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t&lt;i;t+=3)this.expandByPoint(Ls.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t&lt;i;t++)this.expandByPoint(Ls.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t&lt;i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ls.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x&lt;this.min.x||this.max.y&lt;this.min.y||this.max.z&lt;this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute(&quot;position&quot;);if(t===!0&amp;&amp;s!==void 0&amp;&amp;e.isInstancedMesh!==!0)for(let o=0,l=s.count;o&lt;l;o++)e.isMesh===!0?e.getVertexPosition(o,Ls):Ls.fromBufferAttribute(s,o),Ls.applyMatrix4(e.matrixWorld),this.expandByPoint(Ls);else e.boundingBox!==void 0?(e.boundingBox===null&amp;&amp;e.computeBoundingBox(),rm.copy(e.boundingBox)):(i.boundingBox===null&amp;&amp;i.computeBoundingBox(),rm.copy(i.boundingBox)),rm.applyMatrix4(e.matrixWorld),this.union(rm)}const r=e.children;for(let s=0,o=r.length;s&lt;o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x&gt;=this.min.x&amp;&amp;e.x&lt;=this.max.x&amp;&amp;e.y&gt;=this.min.y&amp;&amp;e.y&lt;=this.max.y&amp;&amp;e.z&gt;=this.min.z&amp;&amp;e.z&lt;=this.max.z}containsBox(e){return this.min.x&lt;=e.min.x&amp;&amp;e.max.x&lt;=this.max.x&amp;&amp;this.min.y&lt;=e.min.y&amp;&amp;e.max.y&lt;=this.max.y&amp;&amp;this.min.z&lt;=e.min.z&amp;&amp;e.max.z&lt;=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x&gt;=this.min.x&amp;&amp;e.min.x&lt;=this.max.x&amp;&amp;e.max.y&gt;=this.min.y&amp;&amp;e.min.y&lt;=this.max.y&amp;&amp;e.max.z&gt;=this.min.z&amp;&amp;e.min.z&lt;=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ls),Ls.distanceToSquared(e.center)&lt;=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x&gt;0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y&gt;0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z&gt;0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t&lt;=-e.constant&amp;&amp;i&gt;=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Mf),sm.subVectors(this.max,Mf),_u.subVectors(e.a,Mf),vu.subVectors(e.b,Mf),bu.subVectors(e.c,Mf),Ha.subVectors(vu,_u),Va.subVectors(bu,vu),Hl.subVectors(_u,bu);let t=[0,-Ha.z,Ha.y,0,-Va.z,Va.y,0,-Hl.z,Hl.y,Ha.z,0,-Ha.x,Va.z,0,-Va.x,Hl.z,0,-Hl.x,-Ha.y,Ha.x,0,-Va.y,Va.x,0,-Hl.y,Hl.x,0];return!pb(t,_u,vu,bu,sm)||(t=[1,0,0,0,1,0,0,0,1],!pb(t,_u,vu,bu,sm))?!1:(om.crossVectors(Ha,Va),t=[om.x,om.y,om.z],pb(t,_u,vu,bu,sm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ls).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ls).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&amp;&amp;this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Go[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Go[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Go[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Go[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Go[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Go[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Go[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Go[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Go),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&amp;&amp;e.max.equals(this.max)}}const Go=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Ls=new Y,rm=new Ri,_u=new Y,vu=new Y,bu=new Y,Ha=new Y,Va=new Y,Hl=new Y,Mf=new Y,sm=new Y,om=new Y,Vl=new Y;function pb(n,e,t,i,r){for(let s=0,o=n.length-3;s&lt;=o;s+=3){Vl.fromArray(n,s);const l=r.x*Math.abs(Vl.x)+r.y*Math.abs(Vl.y)+r.z*Math.abs(Vl.z),u=e.dot(Vl),h=t.dot(Vl),f=i.dot(Vl);if(Math.max(-Math.max(u,h,f),Math.min(u,h,f))&gt;l)return!1}return!0}const HF=new Ri,Af=new Y,mb=new Y;class wi{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):HF.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s&lt;o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius&lt;0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)&lt;=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)&lt;=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))&lt;=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i&gt;this.radius*this.radius&amp;&amp;(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Af.subVectors(e,this.center);const t=Af.lengthSq();if(t&gt;this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Af,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(mb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Af.copy(e.center).add(mb)),this.expandByPoint(Af.copy(e.center).sub(mb))),this)}equals(e){return e.center.equals(this.center)&amp;&amp;e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const jo=new Y,gb=new Y,am=new Y,Ga=new Y,yb=new Y,lm=new Y,_b=new Y;class bl{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,jo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i&lt;0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=jo.subVectors(e,this.origin).dot(this.direction);return t&lt;0?this.origin.distanceToSquared(e):(jo.copy(this.origin).addScaledVector(this.direction,t),jo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){gb.copy(e).add(t).multiplyScalar(.5),am.copy(t).sub(e).normalize(),Ga.copy(this.origin).sub(gb);const s=e.distanceTo(t)*.5,o=-this.direction.dot(am),l=Ga.dot(this.direction),u=-Ga.dot(am),h=Ga.lengthSq(),f=Math.abs(1-o*o);let p,m,g,v;if(f&gt;0)if(p=o*u-l,m=o*l-u,v=s*f,p&gt;=0)if(m&gt;=-v)if(m&lt;=v){const x=1/f;p*=x,m*=x,g=p*(p+o*m+2*l)+m*(o*p+m+2*u)+h}else m=s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*u)+h;else m=-s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*u)+h;else m&lt;=-v?(p=Math.max(0,-(-o*s+l)),m=p&gt;0?-s:Math.min(Math.max(-s,-u),s),g=-p*p+m*(m+2*u)+h):m&lt;=v?(p=0,m=Math.min(Math.max(-s,-u),s),g=m*(m+2*u)+h):(p=Math.max(0,-(o*s+l)),m=p&gt;0?s:Math.min(Math.max(-s,-u),s),g=-p*p+m*(m+2*u)+h);else m=o&gt;0?-s:s,p=Math.max(0,-(o*m+l)),g=-p*p+m*(m+2*u)+h;return i&amp;&amp;i.copy(this.origin).addScaledVector(this.direction,p),r&amp;&amp;r.copy(gb).addScaledVector(am,m),g}intersectSphere(e,t){jo.subVectors(e.center,this.origin);const i=jo.dot(this.direction),r=jo.dot(jo)-i*i,s=e.radius*e.radius;if(r&gt;s)return null;const o=Math.sqrt(s-r),l=i-o,u=i+o;return u&lt;0?null:l&lt;0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)&lt;=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i&gt;=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t&lt;0}intersectBox(e,t){let i,r,s,o,l,u;const h=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,m=this.origin;return h&gt;=0?(i=(e.min.x-m.x)*h,r=(e.max.x-m.x)*h):(i=(e.max.x-m.x)*h,r=(e.min.x-m.x)*h),f&gt;=0?(s=(e.min.y-m.y)*f,o=(e.max.y-m.y)*f):(s=(e.max.y-m.y)*f,o=(e.min.y-m.y)*f),i&gt;o||s&gt;r||((s&gt;i||isNaN(i))&amp;&amp;(i=s),(o&lt;r||isNaN(r))&amp;&amp;(r=o),p&gt;=0?(l=(e.min.z-m.z)*p,u=(e.max.z-m.z)*p):(l=(e.max.z-m.z)*p,u=(e.min.z-m.z)*p),i&gt;u||l&gt;r)||((l&gt;i||i!==i)&amp;&amp;(i=l),(u&lt;r||r!==r)&amp;&amp;(r=u),r&lt;0)?null:this.at(i&gt;=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,jo)!==null}intersectTriangle(e,t,i,r,s){yb.subVectors(t,e),lm.subVectors(i,e),_b.crossVectors(yb,lm);let o=this.direction.dot(_b),l;if(o&gt;0){if(r)return null;l=1}else if(o&lt;0)l=-1,o=-o;else return null;Ga.subVectors(this.origin,e);const u=l*this.direction.dot(lm.crossVectors(Ga,lm));if(u&lt;0)return null;const h=l*this.direction.dot(yb.cross(Ga));if(h&lt;0||u+h&gt;o)return null;const f=-l*Ga.dot(_b);return f&lt;0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&amp;&amp;e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class yt{constructor(e,t,i,r,s,o,l,u,h,f,p,m,g,v,x,b){yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&amp;&amp;this.set(e,t,i,r,s,o,l,u,h,f,p,m,g,v,x,b)}set(e,t,i,r,s,o,l,u,h,f,p,m,g,v,x,b){const _=this.elements;return _[0]=e,_[4]=t,_[8]=i,_[12]=r,_[1]=s,_[5]=o,_[9]=l,_[13]=u,_[2]=h,_[6]=f,_[10]=p,_[14]=m,_[3]=g,_[7]=v,_[11]=x,_[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new yt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/xu.setFromMatrixColumn(e,0).length(),s=1/xu.setFromMatrixColumn(e,1).length(),o=1/xu.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),l=Math.sin(i),u=Math.cos(r),h=Math.sin(r),f=Math.cos(s),p=Math.sin(s);if(e.order===&quot;XYZ&quot;){const m=o*f,g=o*p,v=l*f,x=l*p;t[0]=u*f,t[4]=-u*p,t[8]=h,t[1]=g+v*h,t[5]=m-x*h,t[9]=-l*u,t[2]=x-m*h,t[6]=v+g*h,t[10]=o*u}else if(e.order===&quot;YXZ&quot;){const m=u*f,g=u*p,v=h*f,x=h*p;t[0]=m+x*l,t[4]=v*l-g,t[8]=o*h,t[1]=o*p,t[5]=o*f,t[9]=-l,t[2]=g*l-v,t[6]=x+m*l,t[10]=o*u}else if(e.order===&quot;ZXY&quot;){const m=u*f,g=u*p,v=h*f,x=h*p;t[0]=m-x*l,t[4]=-o*p,t[8]=v+g*l,t[1]=g+v*l,t[5]=o*f,t[9]=x-m*l,t[2]=-o*h,t[6]=l,t[10]=o*u}else if(e.order===&quot;ZYX&quot;){const m=o*f,g=o*p,v=l*f,x=l*p;t[0]=u*f,t[4]=v*h-g,t[8]=m*h+x,t[1]=u*p,t[5]=x*h+m,t[9]=g*h-v,t[2]=-h,t[6]=l*u,t[10]=o*u}else if(e.order===&quot;YZX&quot;){const m=o*u,g=o*h,v=l*u,x=l*h;t[0]=u*f,t[4]=x-m*p,t[8]=v*p+g,t[1]=p,t[5]=o*f,t[9]=-l*f,t[2]=-h*f,t[6]=g*p+v,t[10]=m-x*p}else if(e.order===&quot;XZY&quot;){const m=o*u,g=o*h,v=l*u,x=l*h;t[0]=u*f,t[4]=-p,t[8]=h*f,t[1]=m*p+x,t[5]=o*f,t[9]=g*p-v,t[2]=v*p-g,t[6]=l*f,t[10]=x*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(VF,e,GF)}lookAt(e,t,i){const r=this.elements;return qr.subVectors(e,t),qr.lengthSq()===0&amp;&amp;(qr.z=1),qr.normalize(),ja.crossVectors(i,qr),ja.lengthSq()===0&amp;&amp;(Math.abs(i.z)===1?qr.x+=1e-4:qr.z+=1e-4,qr.normalize(),ja.crossVectors(i,qr)),ja.normalize(),cm.crossVectors(qr,ja),r[0]=ja.x,r[4]=cm.x,r[8]=qr.x,r[1]=ja.y,r[5]=cm.y,r[9]=qr.y,r[2]=ja.z,r[6]=cm.z,r[10]=qr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],l=i[4],u=i[8],h=i[12],f=i[1],p=i[5],m=i[9],g=i[13],v=i[2],x=i[6],b=i[10],_=i[14],T=i[3],w=i[7],E=i[11],R=i[15],N=r[0],A=r[4],D=r[8],C=r[12],O=r[1],L=r[5],V=r[9],Z=r[13],z=r[2],K=r[6],I=r[10],j=r[14],G=r[3],ee=r[7],F=r[11],ne=r[15];return s[0]=o*N+l*O+u*z+h*G,s[4]=o*A+l*L+u*K+h*ee,s[8]=o*D+l*V+u*I+h*F,s[12]=o*C+l*Z+u*j+h*ne,s[1]=f*N+p*O+m*z+g*G,s[5]=f*A+p*L+m*K+g*ee,s[9]=f*D+p*V+m*I+g*F,s[13]=f*C+p*Z+m*j+g*ne,s[2]=v*N+x*O+b*z+_*G,s[6]=v*A+x*L+b*K+_*ee,s[10]=v*D+x*V+b*I+_*F,s[14]=v*C+x*Z+b*j+_*ne,s[3]=T*N+w*O+E*z+R*G,s[7]=T*A+w*L+E*K+R*ee,s[11]=T*D+w*V+E*I+R*F,s[15]=T*C+w*Z+E*j+R*ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],l=e[5],u=e[9],h=e[13],f=e[2],p=e[6],m=e[10],g=e[14],v=e[3],x=e[7],b=e[11],_=e[15];return v*(+s*u*p-r*h*p-s*l*m+i*h*m+r*l*g-i*u*g)+x*(+t*u*g-t*h*m+s*o*m-r*o*g+r*h*f-s*u*f)+b*(+t*h*p-t*l*g-s*o*p+i*o*g+s*l*f-i*h*f)+_*(-r*l*f-t*u*p+t*l*m+r*o*p-i*o*m+i*u*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],f=e[8],p=e[9],m=e[10],g=e[11],v=e[12],x=e[13],b=e[14],_=e[15],T=p*b*h-x*m*h+x*u*g-l*b*g-p*u*_+l*m*_,w=v*m*h-f*b*h-v*u*g+o*b*g+f*u*_-o*m*_,E=f*x*h-v*p*h+v*l*g-o*x*g-f*l*_+o*p*_,R=v*p*u-f*x*u-v*l*m+o*x*m+f*l*b-o*p*b,N=t*T+i*w+r*E+s*R;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/N;return e[0]=T*A,e[1]=(x*m*s-p*b*s-x*r*g+i*b*g+p*r*_-i*m*_)*A,e[2]=(l*b*s-x*u*s+x*r*h-i*b*h-l*r*_+i*u*_)*A,e[3]=(p*u*s-l*m*s-p*r*h+i*m*h+l*r*g-i*u*g)*A,e[4]=w*A,e[5]=(f*b*s-v*m*s+v*r*g-t*b*g-f*r*_+t*m*_)*A,e[6]=(v*u*s-o*b*s-v*r*h+t*b*h+o*r*_-t*u*_)*A,e[7]=(o*m*s-f*u*s+f*r*h-t*m*h-o*r*g+t*u*g)*A,e[8]=E*A,e[9]=(v*p*s-f*x*s-v*i*g+t*x*g+f*i*_-t*p*_)*A,e[10]=(o*x*s-v*l*s+v*i*h-t*x*h-o*i*_+t*l*_)*A,e[11]=(f*l*s-o*p*s-f*i*h+t*p*h+o*i*g-t*l*g)*A,e[12]=R*A,e[13]=(f*x*r-v*p*r+v*i*m-t*x*m-f*i*b+t*p*b)*A,e[14]=(v*l*r-o*x*r-v*i*u+t*x*u+o*i*b-t*l*b)*A,e[15]=(o*p*r-f*l*r+f*i*u-t*p*u-o*i*m+t*l*m)*A,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,l=e.y,u=e.z,h=s*o,f=s*l;return this.set(h*o+i,h*l-r*u,h*u+r*l,0,h*l+r*u,f*l+i,f*u-r*o,0,h*u-r*l,f*u+r*o,s*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,l=t._z,u=t._w,h=s+s,f=o+o,p=l+l,m=s*h,g=s*f,v=s*p,x=o*f,b=o*p,_=l*p,T=u*h,w=u*f,E=u*p,R=i.x,N=i.y,A=i.z;return r[0]=(1-(x+_))*R,r[1]=(g+E)*R,r[2]=(v-w)*R,r[3]=0,r[4]=(g-E)*N,r[5]=(1-(m+_))*N,r[6]=(b+T)*N,r[7]=0,r[8]=(v+w)*A,r[9]=(b-T)*A,r[10]=(1-(m+x))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=xu.set(r[0],r[1],r[2]).length();const o=xu.set(r[4],r[5],r[6]).length(),l=xu.set(r[8],r[9],r[10]).length();this.determinant()&lt;0&amp;&amp;(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Us.copy(this);const h=1/s,f=1/o,p=1/l;return Us.elements[0]*=h,Us.elements[1]*=h,Us.elements[2]*=h,Us.elements[4]*=f,Us.elements[5]*=f,Us.elements[6]*=f,Us.elements[8]*=p,Us.elements[9]*=p,Us.elements[10]*=p,t.setFromRotationMatrix(Us),i.x=s,i.y=o,i.z=l,this}makePerspective(e,t,i,r,s,o,l=Es){const u=this.elements,h=2*s/(t-e),f=2*s/(i-r),p=(t+e)/(t-e),m=(i+r)/(i-r);let g,v;if(l===Es)g=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(l===xd)g=-o/(o-s),v=-o*s/(o-s);else throw new Error(&quot;THREE.Matrix4.makePerspective(): Invalid coordinate system: &quot;+l);return u[0]=h,u[4]=0,u[8]=p,u[12]=0,u[1]=0,u[5]=f,u[9]=m,u[13]=0,u[2]=0,u[6]=0,u[10]=g,u[14]=v,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,s,o,l=Es){const u=this.elements,h=1/(t-e),f=1/(i-r),p=1/(o-s),m=(t+e)*h,g=(i+r)*f;let v,x;if(l===Es)v=(o+s)*p,x=-2*p;else if(l===xd)v=s*p,x=-1*p;else throw new Error(&quot;THREE.Matrix4.makeOrthographic(): Invalid coordinate system: &quot;+l);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-m,u[1]=0,u[5]=2*f,u[9]=0,u[13]=-g,u[2]=0,u[6]=0,u[10]=x,u[14]=-v,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r&lt;16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i&lt;16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const xu=new Y,Us=new yt,VF=new Y(0,0,0),GF=new Y(1,1,1),ja=new Y,cm=new Y,qr=new Y,$M=new yt,ZM=new Si;class Sr{constructor(e=0,t=0,i=0,r=Sr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],u=r[1],h=r[5],f=r[9],p=r[2],m=r[6],g=r[10];switch(t){case&quot;XYZ&quot;:this._y=Math.asin(Vt(l,-1,1)),Math.abs(l)&lt;.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,h),this._z=0);break;case&quot;YXZ&quot;:this._x=Math.asin(-Vt(f,-1,1)),Math.abs(f)&lt;.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-p,s),this._z=0);break;case&quot;ZXY&quot;:this._x=Math.asin(Vt(m,-1,1)),Math.abs(m)&lt;.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(u,s));break;case&quot;ZYX&quot;:this._y=Math.asin(-Vt(p,-1,1)),Math.abs(p)&lt;.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case&quot;YZX&quot;:this._z=Math.asin(Vt(u,-1,1)),Math.abs(u)&lt;.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(l,g));break;case&quot;XZY&quot;:this._z=Math.asin(-Vt(o,-1,1)),Math.abs(o)&lt;.9999999?(this._x=Math.atan2(m,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn(&quot;THREE.Euler: .setFromRotationMatrix() encountered an unknown order: &quot;+t)}return this._order=t,i===!0&amp;&amp;this._onChangeCallback(),this}setFromQuaternion(e,t,i){return $M.makeRotationFromQuaternion(e),this.setFromRotationMatrix($M,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ZM.setFromEuler(this),this.setFromQuaternion(ZM,e)}equals(e){return e._x===this._x&amp;&amp;e._y===this._y&amp;&amp;e._z===this._z&amp;&amp;e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&amp;&amp;(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Sr.DEFAULT_ORDER=&quot;XYZ&quot;;class uy{constructor(){this.mask=1}set(e){this.mask=(1&lt;&lt;e|0)&gt;&gt;&gt;0}enable(e){this.mask|=1&lt;&lt;e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1&lt;&lt;e|0}disable(e){this.mask&amp;=~(1&lt;&lt;e|0)}disableAll(){this.mask=0}test(e){return(this.mask&amp;e.mask)!==0}isEnabled(e){return(this.mask&amp;(1&lt;&lt;e|0))!==0}}let jF=0;const JM=new Y,Su=new Si,Wo=new yt,um=new Y,Cf=new Y,WF=new Y,XF=new Si,QM=new Y(1,0,0),eA=new Y(0,1,0),tA=new Y(0,0,1),nA={type:&quot;added&quot;},qF={type:&quot;removed&quot;},wu={type:&quot;childadded&quot;,child:null},vb={type:&quot;childremoved&quot;,child:null};class nn extends To{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,&quot;id&quot;,{value:jF++}),this.uuid=Jr(),this.name=&quot;&quot;,this.type=&quot;Object3D&quot;,this.parent=null,this.children=[],this.up=nn.DEFAULT_UP.clone();const e=new Y,t=new Sr,i=new Si,r=new Y(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new yt},normalMatrix:{value:new jt}}),this.matrix=new yt,this.matrixWorld=new yt,this.matrixAutoUpdate=nn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new uy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Su.setFromAxisAngle(e,t),this.quaternion.multiply(Su),this}rotateOnWorldAxis(e,t){return Su.setFromAxisAngle(e,t),this.quaternion.premultiply(Su),this}rotateX(e){return this.rotateOnAxis(QM,e)}rotateY(e){return this.rotateOnAxis(eA,e)}rotateZ(e){return this.rotateOnAxis(tA,e)}translateOnAxis(e,t){return JM.copy(e).applyQuaternion(this.quaternion),this.position.add(JM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(QM,e)}translateY(e){return this.translateOnAxis(eA,e)}translateZ(e){return this.translateOnAxis(tA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Wo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?um.copy(e):um.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Cf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wo.lookAt(Cf,um,this.up):Wo.lookAt(um,Cf,this.up),this.quaternion.setFromRotationMatrix(Wo),r&amp;&amp;(Wo.extractRotation(r.matrixWorld),Su.setFromRotationMatrix(Wo),this.quaternion.premultiply(Su.invert()))}add(e){if(arguments.length&gt;1){for(let t=0;t&lt;arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error(&quot;THREE.Object3D.add: object can&#x27;t be added as a child of itself.&quot;,e),this):(e&amp;&amp;e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(nA),wu.child=e,this.dispatchEvent(wu),wu.child=null):console.error(&quot;THREE.Object3D.add: object not an instance of THREE.Object3D.&quot;,e),this)}remove(e){if(arguments.length&gt;1){for(let i=0;i&lt;arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&amp;&amp;(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qF),vb.child=e,this.dispatchEvent(vb),vb.child=null),this}removeFromParent(){const e=this.parent;return e!==null&amp;&amp;e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Wo.copy(this.matrixWorld).invert(),e.parent!==null&amp;&amp;(e.parent.updateWorldMatrix(!0,!1),Wo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Wo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(nA),wu.child=e,this.dispatchEvent(wu),wu.child=null,this}getObjectById(e){return this.getObjectByProperty(&quot;id&quot;,e)}getObjectByName(e){return this.getObjectByProperty(&quot;name&quot;,e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i&lt;r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&amp;&amp;i.push(this);const r=this.children;for(let s=0,o=r.length;s&lt;o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cf,e,WF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cf,XF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i&lt;r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i&lt;r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&amp;&amp;(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&amp;&amp;(this.matrixWorldAutoUpdate===!0&amp;&amp;(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i&lt;r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&amp;&amp;i!==null&amp;&amp;i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),this.matrixWorldAutoUpdate===!0&amp;&amp;(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s&lt;o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;,i={};t&amp;&amp;(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:&quot;Object&quot;,generator:&quot;Object3D.toJSON&quot;});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==&quot;&quot;&amp;&amp;(r.name=this.name),this.castShadow===!0&amp;&amp;(r.castShadow=!0),this.receiveShadow===!0&amp;&amp;(r.receiveShadow=!0),this.visible===!1&amp;&amp;(r.visible=!1),this.frustumCulled===!1&amp;&amp;(r.frustumCulled=!1),this.renderOrder!==0&amp;&amp;(r.renderOrder=this.renderOrder),Object.keys(this.userData).length&gt;0&amp;&amp;(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&amp;&amp;(r.matrixAutoUpdate=!1),this.isInstancedMesh&amp;&amp;(r.type=&quot;InstancedMesh&quot;,r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&amp;&amp;(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&amp;&amp;(r.type=&quot;BatchedMesh&quot;,r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(l=&gt;({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),r.instanceInfo=this._instanceInfo.map(l=&gt;({...l})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&amp;&amp;(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&amp;&amp;(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&amp;&amp;(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&amp;&amp;(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&amp;&amp;(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&amp;&amp;(r.background=this.background.toJSON(e).uuid)),this.environment&amp;&amp;this.environment.isTexture&amp;&amp;this.environment.isRenderTargetTexture!==!0&amp;&amp;(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&amp;&amp;l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let h=0,f=u.length;h&lt;f;h++){const p=u[h];s(e.shapes,p)}else s(e.shapes,u)}}if(this.isSkinnedMesh&amp;&amp;(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&amp;&amp;(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,h=this.material.length;u&lt;h;u++)l.push(s(e.materials,this.material[u]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length&gt;0){r.children=[];for(let l=0;l&lt;this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length&gt;0){r.animations=[];for(let l=0;l&lt;this.animations.length;l++){const u=this.animations[l];r.animations.push(s(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),h=o(e.textures),f=o(e.images),p=o(e.shapes),m=o(e.skeletons),g=o(e.animations),v=o(e.nodes);l.length&gt;0&amp;&amp;(i.geometries=l),u.length&gt;0&amp;&amp;(i.materials=u),h.length&gt;0&amp;&amp;(i.textures=h),f.length&gt;0&amp;&amp;(i.images=f),p.length&gt;0&amp;&amp;(i.shapes=p),m.length&gt;0&amp;&amp;(i.skeletons=m),g.length&gt;0&amp;&amp;(i.animations=g),v.length&gt;0&amp;&amp;(i.nodes=v)}return i.object=r,i;function o(l){const u=[];for(const h in l){const f=l[h];delete f.metadata,u.push(f)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i&lt;e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}nn.DEFAULT_UP=new Y(0,1,0);nn.DEFAULT_MATRIX_AUTO_UPDATE=!0;nn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ks=new Y,Xo=new Y,bb=new Y,qo=new Y,Eu=new Y,Tu=new Y,iA=new Y,xb=new Y,Sb=new Y,wb=new Y,Eb=new yn,Tb=new yn,Mb=new yn;class _r{constructor(e=new Y,t=new Y,i=new Y){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ks.subVectors(e,t),r.cross(ks);const s=r.lengthSq();return s&gt;0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ks.subVectors(r,t),Xo.subVectors(i,t),bb.subVectors(e,t);const o=ks.dot(ks),l=ks.dot(Xo),u=ks.dot(bb),h=Xo.dot(Xo),f=Xo.dot(bb),p=o*h-l*l;if(p===0)return s.set(0,0,0),null;const m=1/p,g=(h*u-l*f)*m,v=(o*f-l*u)*m;return s.set(1-g-v,v,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,qo)===null?!1:qo.x&gt;=0&amp;&amp;qo.y&gt;=0&amp;&amp;qo.x+qo.y&lt;=1}static getInterpolation(e,t,i,r,s,o,l,u){return this.getBarycoord(e,t,i,r,qo)===null?(u.x=0,u.y=0,&quot;z&quot;in u&amp;&amp;(u.z=0),&quot;w&quot;in u&amp;&amp;(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,qo.x),u.addScaledVector(o,qo.y),u.addScaledVector(l,qo.z),u)}static getInterpolatedAttribute(e,t,i,r,s,o){return Eb.setScalar(0),Tb.setScalar(0),Mb.setScalar(0),Eb.fromBufferAttribute(e,t),Tb.fromBufferAttribute(e,i),Mb.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Eb,s.x),o.addScaledVector(Tb,s.y),o.addScaledVector(Mb,s.z),o}static isFrontFacing(e,t,i,r){return ks.subVectors(i,t),Xo.subVectors(e,t),ks.cross(Xo).dot(r)&lt;0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ks.subVectors(this.c,this.b),Xo.subVectors(this.a,this.b),ks.cross(Xo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return _r.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return _r.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return _r.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return _r.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return _r.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,l;Eu.subVectors(r,i),Tu.subVectors(s,i),xb.subVectors(e,i);const u=Eu.dot(xb),h=Tu.dot(xb);if(u&lt;=0&amp;&amp;h&lt;=0)return t.copy(i);Sb.subVectors(e,r);const f=Eu.dot(Sb),p=Tu.dot(Sb);if(f&gt;=0&amp;&amp;p&lt;=f)return t.copy(r);const m=u*p-f*h;if(m&lt;=0&amp;&amp;u&gt;=0&amp;&amp;f&lt;=0)return o=u/(u-f),t.copy(i).addScaledVector(Eu,o);wb.subVectors(e,s);const g=Eu.dot(wb),v=Tu.dot(wb);if(v&gt;=0&amp;&amp;g&lt;=v)return t.copy(s);const x=g*h-u*v;if(x&lt;=0&amp;&amp;h&gt;=0&amp;&amp;v&lt;=0)return l=h/(h-v),t.copy(i).addScaledVector(Tu,l);const b=f*v-g*p;if(b&lt;=0&amp;&amp;p-f&gt;=0&amp;&amp;g-v&gt;=0)return iA.subVectors(s,r),l=(p-f)/(p-f+(g-v)),t.copy(r).addScaledVector(iA,l);const _=1/(b+x+m);return o=x*_,l=m*_,t.copy(i).addScaledVector(Eu,o).addScaledVector(Tu,l)}equals(e){return e.a.equals(this.a)&amp;&amp;e.b.equals(this.b)&amp;&amp;e.c.equals(this.c)}}const WD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wa={h:0,s:0,l:0},hm={h:0,s:0,l:0};function Ab(n,e,t){return t&lt;0&amp;&amp;(t+=1),t&gt;1&amp;&amp;(t-=1),t&lt;1/6?n+(e-n)*6*t:t&lt;1/2?e:t&lt;2/3?n+(e-n)*6*(2/3-t):n}let $e=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&amp;&amp;i===void 0){const r=e;r&amp;&amp;r.isColor?this.copy(r):typeof r==&quot;number&quot;?this.setHex(r):typeof r==&quot;string&quot;&amp;&amp;this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Nn){return e=Math.floor(e),this.r=(e&gt;&gt;16&amp;255)/255,this.g=(e&gt;&gt;8&amp;255)/255,this.b=(e&amp;255)/255,Zt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Zt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Zt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Zt.workingColorSpace){if(e=cw(e,1),t=Vt(t,0,1),i=Vt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i&lt;=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Ab(o,s,e+1/3),this.g=Ab(o,s,e),this.b=Ab(o,s,e-1/3)}return Zt.toWorkingColorSpace(this,r),this}setStyle(e,t=Nn){function i(s){s!==void 0&amp;&amp;parseFloat(s)&lt;1&amp;&amp;console.warn(&quot;THREE.Color: Alpha component of &quot;+e+&quot; will be ignored.&quot;)}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case&quot;rgb&quot;:case&quot;rgba&quot;:if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case&quot;hsl&quot;:case&quot;hsla&quot;:if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn(&quot;THREE.Color: Unknown color model &quot;+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn(&quot;THREE.Color: Invalid hex color &quot;+e)}else if(e&amp;&amp;e.length&gt;0)return this.setColorName(e,t);return this}setColorName(e,t=Nn){const i=WD[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn(&quot;THREE.Color: Unknown color &quot;+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ua(e.r),this.g=ua(e.g),this.b=ua(e.b),this}copyLinearToSRGB(e){return this.r=Qu(e.r),this.g=Qu(e.g),this.b=Qu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Nn){return Zt.fromWorkingColorSpace(lr.copy(this),e),Math.round(Vt(lr.r*255,0,255))*65536+Math.round(Vt(lr.g*255,0,255))*256+Math.round(Vt(lr.b*255,0,255))}getHexString(e=Nn){return(&quot;000000&quot;+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Zt.workingColorSpace){Zt.fromWorkingColorSpace(lr.copy(this),t);const i=lr.r,r=lr.g,s=lr.b,o=Math.max(i,r,s),l=Math.min(i,r,s);let u,h;const f=(l+o)/2;if(l===o)u=0,h=0;else{const p=o-l;switch(h=f&lt;=.5?p/(o+l):p/(2-o-l),o){case i:u=(r-s)/p+(r&lt;s?6:0);break;case r:u=(s-i)/p+2;break;case s:u=(i-r)/p+4;break}u/=6}return e.h=u,e.s=h,e.l=f,e}getRGB(e,t=Zt.workingColorSpace){return Zt.fromWorkingColorSpace(lr.copy(this),t),e.r=lr.r,e.g=lr.g,e.b=lr.b,e}getStyle(e=Nn){Zt.fromWorkingColorSpace(lr.copy(this),e);const t=lr.r,i=lr.g,r=lr.b;return e!==Nn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Wa),this.setHSL(Wa.h+e,Wa.s+t,Wa.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Wa),e.getHSL(hm);const i=ld(Wa.h,hm.h,t),r=ld(Wa.s,hm.s,t),s=ld(Wa.l,hm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&amp;&amp;e.g===this.g&amp;&amp;e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const lr=new $e;$e.NAMES=WD;let YF=0;class Oi extends To{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,&quot;id&quot;,{value:YF++}),this.uuid=Jr(),this.name=&quot;&quot;,this.type=&quot;Material&quot;,this.blending=vc,this.side=Qr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Gg,this.blendDst=jg,this.blendEquation=il,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $e(0,0,0),this.blendAlpha=0,this.depthFunc=Tc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ic,this.stencilZFail=ic,this.stencilZPass=ic,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest&gt;0!=e&gt;0&amp;&amp;this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter &#x27;${t}&#x27; has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: &#x27;${t}&#x27; is not a property of THREE.${this.type}.`);continue}r&amp;&amp;r.isColor?r.set(i):r&amp;&amp;r.isVector3&amp;&amp;i&amp;&amp;i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e==&quot;string&quot;;t&amp;&amp;(e={textures:{},images:{}});const i={metadata:{version:4.6,type:&quot;Material&quot;,generator:&quot;Material.toJSON&quot;}};i.uuid=this.uuid,i.type=this.type,this.name!==&quot;&quot;&amp;&amp;(i.name=this.name),this.color&amp;&amp;this.color.isColor&amp;&amp;(i.color=this.color.getHex()),this.roughness!==void 0&amp;&amp;(i.roughness=this.roughness),this.metalness!==void 0&amp;&amp;(i.metalness=this.metalness),this.sheen!==void 0&amp;&amp;(i.sheen=this.sheen),this.sheenColor&amp;&amp;this.sheenColor.isColor&amp;&amp;(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&amp;&amp;(i.sheenRoughness=this.sheenRoughness),this.emissive&amp;&amp;this.emissive.isColor&amp;&amp;(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&amp;&amp;this.emissiveIntensity!==1&amp;&amp;(i.emissiveIntensity=this.emissiveIntensity),this.specular&amp;&amp;this.specular.isColor&amp;&amp;(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&amp;&amp;(i.specularIntensity=this.specularIntensity),this.specularColor&amp;&amp;this.specularColor.isColor&amp;&amp;(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&amp;&amp;(i.shininess=this.shininess),this.clearcoat!==void 0&amp;&amp;(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&amp;&amp;(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&amp;&amp;this.clearcoatMap.isTexture&amp;&amp;(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&amp;&amp;this.clearcoatRoughnessMap.isTexture&amp;&amp;(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&amp;&amp;this.clearcoatNormalMap.isTexture&amp;&amp;(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&amp;&amp;(i.dispersion=this.dispersion),this.iridescence!==void 0&amp;&amp;(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&amp;&amp;(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&amp;&amp;(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&amp;&amp;this.iridescenceMap.isTexture&amp;&amp;(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&amp;&amp;this.iridescenceThicknessMap.isTexture&amp;&amp;(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&amp;&amp;(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&amp;&amp;(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&amp;&amp;this.anisotropyMap.isTexture&amp;&amp;(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&amp;&amp;this.map.isTexture&amp;&amp;(i.map=this.map.toJSON(e).uuid),this.matcap&amp;&amp;this.matcap.isTexture&amp;&amp;(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&amp;&amp;this.alphaMap.isTexture&amp;&amp;(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&amp;&amp;this.lightMap.isTexture&amp;&amp;(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&amp;&amp;this.aoMap.isTexture&amp;&amp;(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&amp;&amp;this.bumpMap.isTexture&amp;&amp;(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&amp;&amp;this.normalMap.isTexture&amp;&amp;(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&amp;&amp;this.displacementMap.isTexture&amp;&amp;(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&amp;&amp;this.roughnessMap.isTexture&amp;&amp;(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&amp;&amp;this.metalnessMap.isTexture&amp;&amp;(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&amp;&amp;this.emissiveMap.isTexture&amp;&amp;(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&amp;&amp;this.specularMap.isTexture&amp;&amp;(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&amp;&amp;this.specularIntensityMap.isTexture&amp;&amp;(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&amp;&amp;this.specularColorMap.isTexture&amp;&amp;(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&amp;&amp;this.envMap.isTexture&amp;&amp;(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&amp;&amp;(i.combine=this.combine)),this.envMapRotation!==void 0&amp;&amp;(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&amp;&amp;(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&amp;&amp;(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&amp;&amp;(i.refractionRatio=this.refractionRatio),this.gradientMap&amp;&amp;this.gradientMap.isTexture&amp;&amp;(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&amp;&amp;(i.transmission=this.transmission),this.transmissionMap&amp;&amp;this.transmissionMap.isTexture&amp;&amp;(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&amp;&amp;(i.thickness=this.thickness),this.thicknessMap&amp;&amp;this.thicknessMap.isTexture&amp;&amp;(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&amp;&amp;this.attenuationDistance!==1/0&amp;&amp;(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&amp;&amp;(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&amp;&amp;(i.size=this.size),this.shadowSide!==null&amp;&amp;(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&amp;&amp;(i.sizeAttenuation=this.sizeAttenuation),this.blending!==vc&amp;&amp;(i.blending=this.blending),this.side!==Qr&amp;&amp;(i.side=this.side),this.vertexColors===!0&amp;&amp;(i.vertexColors=!0),this.opacity&lt;1&amp;&amp;(i.opacity=this.opacity),this.transparent===!0&amp;&amp;(i.transparent=!0),this.blendSrc!==Gg&amp;&amp;(i.blendSrc=this.blendSrc),this.blendDst!==jg&amp;&amp;(i.blendDst=this.blendDst),this.blendEquation!==il&amp;&amp;(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&amp;&amp;(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&amp;&amp;(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&amp;&amp;(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&amp;&amp;this.blendColor.isColor&amp;&amp;(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&amp;&amp;(i.blendAlpha=this.blendAlpha),this.depthFunc!==Tc&amp;&amp;(i.depthFunc=this.depthFunc),this.depthTest===!1&amp;&amp;(i.depthTest=this.depthTest),this.depthWrite===!1&amp;&amp;(i.depthWrite=this.depthWrite),this.colorWrite===!1&amp;&amp;(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&amp;&amp;(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==iS&amp;&amp;(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&amp;&amp;(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&amp;&amp;(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ic&amp;&amp;(i.stencilFail=this.stencilFail),this.stencilZFail!==ic&amp;&amp;(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ic&amp;&amp;(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&amp;&amp;(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&amp;&amp;this.rotation!==0&amp;&amp;(i.rotation=this.rotation),this.polygonOffset===!0&amp;&amp;(i.polygonOffset=!0),this.polygonOffsetFactor!==0&amp;&amp;(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&amp;&amp;(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&amp;&amp;this.linewidth!==1&amp;&amp;(i.linewidth=this.linewidth),this.dashSize!==void 0&amp;&amp;(i.dashSize=this.dashSize),this.gapSize!==void 0&amp;&amp;(i.gapSize=this.gapSize),this.scale!==void 0&amp;&amp;(i.scale=this.scale),this.dithering===!0&amp;&amp;(i.dithering=!0),this.alphaTest&gt;0&amp;&amp;(i.alphaTest=this.alphaTest),this.alphaHash===!0&amp;&amp;(i.alphaHash=!0),this.alphaToCoverage===!0&amp;&amp;(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&amp;&amp;(i.premultipliedAlpha=!0),this.forceSinglePass===!0&amp;&amp;(i.forceSinglePass=!0),this.wireframe===!0&amp;&amp;(i.wireframe=!0),this.wireframeLinewidth&gt;1&amp;&amp;(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!==&quot;round&quot;&amp;&amp;(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!==&quot;round&quot;&amp;&amp;(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&amp;&amp;(i.flatShading=!0),this.visible===!1&amp;&amp;(i.visible=!1),this.toneMapped===!1&amp;&amp;(i.toneMapped=!1),this.fog===!1&amp;&amp;(i.fog=!1),Object.keys(this.userData).length&gt;0&amp;&amp;(i.userData=this.userData);function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length&gt;0&amp;&amp;(i.textures=s),o.length&gt;0&amp;&amp;(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}set needsUpdate(e){e===!0&amp;&amp;this.version++}}class $i extends Oi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type=&quot;MeshBasicMaterial&quot;,this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=Vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const na=KF();function KF(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u&lt;256;++u){const h=u-127;h&lt;-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):h&lt;-14?(i[u]=1024&gt;&gt;-h-14,i[u|256]=1024&gt;&gt;-h-14|32768,r[u]=-h-1,r[u|256]=-h-1):h&lt;=15?(i[u]=h+15&lt;&lt;10,i[u|256]=h+15&lt;&lt;10|32768,r[u]=13,r[u|256]=13):h&lt;128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u&lt;1024;++u){let h=u&lt;&lt;13,f=0;for(;(h&amp;8388608)===0;)h&lt;&lt;=1,f-=8388608;h&amp;=-8388609,f+=947912704,s[u]=h|f}for(let u=1024;u&lt;2048;++u)s[u]=939524096+(u-1024&lt;&lt;13);for(let u=1;u&lt;31;++u)o[u]=u&lt;&lt;23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u&lt;63;++u)o[u]=2147483648+(u-32&lt;&lt;23);o[63]=3347054592;for(let u=1;u&lt;64;++u)u!==32&amp;&amp;(l[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function Ir(n){Math.abs(n)&gt;65504&amp;&amp;console.warn(&quot;THREE.DataUtils.toHalfFloat(): Value out of range.&quot;),n=Vt(n,-65504,65504),na.floatView[0]=n;const e=na.uint32View[0],t=e&gt;&gt;23&amp;511;return na.baseTable[t]+((e&amp;8388607)&gt;&gt;na.shiftTable[t])}function $f(n){const e=n&gt;&gt;10;return na.uint32View[0]=na.mantissaTable[na.offsetTable[e]+(n&amp;1023)]+na.exponentTable[e],na.floatView[0]}class $F{static toHalfFloat(e){return Ir(e)}static fromHalfFloat(e){return $f(e)}}const Ai=new Y,fm=new Oe;let ZF=0;class Jt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError(&quot;THREE.BufferAttribute: array should be a Typed Array.&quot;);this.isBufferAttribute=!0,Object.defineProperty(this,&quot;id&quot;,{value:ZF++}),this.name=&quot;&quot;,this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=bd,this.updateRanges=[],this.gpuType=Pr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&amp;&amp;this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r&lt;s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t&lt;i;t++)fm.fromBufferAttribute(this,t),fm.applyMatrix3(e),this.setXY(t,fm.x,fm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t&lt;i;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix3(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t&lt;i;t++)Ai.fromBufferAttribute(this,t),Ai.applyMatrix4(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t&lt;i;t++)Ai.fromBufferAttribute(this,t),Ai.applyNormalMatrix(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}transformDirection(e){for(let t=0,i=this.count;t&lt;i;t++)Ai.fromBufferAttribute(this,t),Ai.transformDirection(e),this.setXYZ(t,Ai.x,Ai.y,Ai.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&amp;&amp;(i=yr(i,this.array)),i}setComponent(e,t,i){return this.normalized&amp;&amp;(i=Xt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setX(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setY(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setZ(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setW(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array),s=Xt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==&quot;&quot;&amp;&amp;(e.name=this.name),this.usage!==bd&amp;&amp;(e.usage=this.usage),e}}class JF extends Jt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class QF extends Jt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class ez extends Jt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class tz extends Jt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class uw extends Jt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class nz extends Jt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class hw extends Jt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class iz extends Jt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=$f(this.array[e*this.itemSize]);return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setX(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize]=Ir(t),this}getY(e){let t=$f(this.array[e*this.itemSize+1]);return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setY(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+1]=Ir(t),this}getZ(e){let t=$f(this.array[e*this.itemSize+2]);return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setZ(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+2]=Ir(t),this}getW(e){let t=$f(this.array[e*this.itemSize+3]);return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setW(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.array[e*this.itemSize+3]=Ir(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array)),this.array[e+0]=Ir(t),this.array[e+1]=Ir(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array)),this.array[e+0]=Ir(t),this.array[e+1]=Ir(i),this.array[e+2]=Ir(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array),s=Xt(s,this.array)),this.array[e+0]=Ir(t),this.array[e+1]=Ir(i),this.array[e+2]=Ir(r),this.array[e+3]=Ir(s),this}}class ct extends Jt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let rz=0;const ms=new yt,Cb=new nn,Mu=new Y,Yr=new Ri,Rf=new Ri,Wi=new Y;class Lt extends To{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,&quot;id&quot;,{value:rz++}),this.uuid=Jr(),this.name=&quot;&quot;,this.type=&quot;BufferGeometry&quot;,this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(VD(e)?hw:uw)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&amp;&amp;(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new jt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&amp;&amp;(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&amp;&amp;this.computeBoundingBox(),this.boundingSphere!==null&amp;&amp;this.computeBoundingSphere(),this}applyQuaternion(e){return ms.makeRotationFromQuaternion(e),this.applyMatrix4(ms),this}rotateX(e){return ms.makeRotationX(e),this.applyMatrix4(ms),this}rotateY(e){return ms.makeRotationY(e),this.applyMatrix4(ms),this}rotateZ(e){return ms.makeRotationZ(e),this.applyMatrix4(ms),this}translate(e,t,i){return ms.makeTranslation(e,t,i),this.applyMatrix4(ms),this}scale(e,t,i){return ms.makeScale(e,t,i),this.applyMatrix4(ms),this}lookAt(e){return Cb.lookAt(e),Cb.updateMatrix(),this.applyMatrix4(Cb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Mu).negate(),this.translate(Mu.x,Mu.y,Mu.z),this}setFromPoints(e){const t=this.getAttribute(&quot;position&quot;);if(t===void 0){const i=[];for(let r=0,s=e.length;r&lt;s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute(&quot;position&quot;,new ct(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r&lt;i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length&gt;t.count&amp;&amp;console.warn(&quot;THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry.&quot;),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&amp;&amp;(this.boundingBox=new Ri);const e=this.attributes.position,t=this.morphAttributes.position;if(e&amp;&amp;e.isGLBufferAttribute){console.error(&quot;THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.&quot;,this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i&lt;r;i++){const s=t[i];Yr.setFromBufferAttribute(s),this.morphTargetsRelative?(Wi.addVectors(this.boundingBox.min,Yr.min),this.boundingBox.expandByPoint(Wi),Wi.addVectors(this.boundingBox.max,Yr.max),this.boundingBox.expandByPoint(Wi)):(this.boundingBox.expandByPoint(Yr.min),this.boundingBox.expandByPoint(Yr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&amp;&amp;console.error(&#x27;THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The &quot;position&quot; attribute is likely to have NaN values.&#x27;,this)}computeBoundingSphere(){this.boundingSphere===null&amp;&amp;(this.boundingSphere=new wi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&amp;&amp;e.isGLBufferAttribute){console.error(&quot;THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.&quot;,this),this.boundingSphere.set(new Y,1/0);return}if(e){const i=this.boundingSphere.center;if(Yr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s&lt;o;s++){const l=t[s];Rf.setFromBufferAttribute(l),this.morphTargetsRelative?(Wi.addVectors(Yr.min,Rf.min),Yr.expandByPoint(Wi),Wi.addVectors(Yr.max,Rf.max),Yr.expandByPoint(Wi)):(Yr.expandByPoint(Rf.min),Yr.expandByPoint(Rf.max))}Yr.getCenter(i);let r=0;for(let s=0,o=e.count;s&lt;o;s++)Wi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Wi));if(t)for(let s=0,o=t.length;s&lt;o;s++){const l=t[s],u=this.morphTargetsRelative;for(let h=0,f=l.count;h&lt;f;h++)Wi.fromBufferAttribute(l,h),u&amp;&amp;(Mu.fromBufferAttribute(e,h),Wi.add(Mu)),r=Math.max(r,i.distanceToSquared(Wi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&amp;&amp;console.error(&#x27;THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The &quot;position&quot; attribute is likely to have NaN values.&#x27;,this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error(&quot;THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)&quot;);return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute(&quot;tangent&quot;)===!1&amp;&amp;this.setAttribute(&quot;tangent&quot;,new Jt(new Float32Array(4*i.count),4));const o=this.getAttribute(&quot;tangent&quot;),l=[],u=[];for(let D=0;D&lt;i.count;D++)l[D]=new Y,u[D]=new Y;const h=new Y,f=new Y,p=new Y,m=new Oe,g=new Oe,v=new Oe,x=new Y,b=new Y;function _(D,C,O){h.fromBufferAttribute(i,D),f.fromBufferAttribute(i,C),p.fromBufferAttribute(i,O),m.fromBufferAttribute(s,D),g.fromBufferAttribute(s,C),v.fromBufferAttribute(s,O),f.sub(h),p.sub(h),g.sub(m),v.sub(m);const L=1/(g.x*v.y-v.x*g.y);isFinite(L)&amp;&amp;(x.copy(f).multiplyScalar(v.y).addScaledVector(p,-g.y).multiplyScalar(L),b.copy(p).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(L),l[D].add(x),l[C].add(x),l[O].add(x),u[D].add(b),u[C].add(b),u[O].add(b))}let T=this.groups;T.length===0&amp;&amp;(T=[{start:0,count:e.count}]);for(let D=0,C=T.length;D&lt;C;++D){const O=T[D],L=O.start,V=O.count;for(let Z=L,z=L+V;Z&lt;z;Z+=3)_(e.getX(Z+0),e.getX(Z+1),e.getX(Z+2))}const w=new Y,E=new Y,R=new Y,N=new Y;function A(D){R.fromBufferAttribute(r,D),N.copy(R);const C=l[D];w.copy(C),w.sub(R.multiplyScalar(R.dot(C))).normalize(),E.crossVectors(N,C);const L=E.dot(u[D])&lt;0?-1:1;o.setXYZW(D,w.x,w.y,w.z,L)}for(let D=0,C=T.length;D&lt;C;++D){const O=T[D],L=O.start,V=O.count;for(let Z=L,z=L+V;Z&lt;z;Z+=3)A(e.getX(Z+0)),A(e.getX(Z+1)),A(e.getX(Z+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute(&quot;position&quot;);if(t!==void 0){let i=this.getAttribute(&quot;normal&quot;);if(i===void 0)i=new Jt(new Float32Array(t.count*3),3),this.setAttribute(&quot;normal&quot;,i);else for(let m=0,g=i.count;m&lt;g;m++)i.setXYZ(m,0,0,0);const r=new Y,s=new Y,o=new Y,l=new Y,u=new Y,h=new Y,f=new Y,p=new Y;if(e)for(let m=0,g=e.count;m&lt;g;m+=3){const v=e.getX(m+0),x=e.getX(m+1),b=e.getX(m+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,b),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),l.fromBufferAttribute(i,v),u.fromBufferAttribute(i,x),h.fromBufferAttribute(i,b),l.add(f),u.add(f),h.add(f),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z),i.setXYZ(b,h.x,h.y,h.z)}else for(let m=0,g=t.count;m&lt;g;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t&lt;i;t++)Wi.fromBufferAttribute(e,t),Wi.normalize(),e.setXYZ(t,Wi.x,Wi.y,Wi.z)}toNonIndexed(){function e(l,u){const h=l.array,f=l.itemSize,p=l.normalized,m=new h.constructor(u.length*f);let g=0,v=0;for(let x=0,b=u.length;x&lt;b;x++){l.isInterleavedBufferAttribute?g=u[x]*l.data.stride+l.offset:g=u[x]*f;for(let _=0;_&lt;f;_++)m[v++]=h[g++]}return new Jt(m,f,p)}if(this.index===null)return console.warn(&quot;THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.&quot;),this;const t=new Lt,i=this.index.array,r=this.attributes;for(const l in r){const u=r[l],h=e(u,i);t.setAttribute(l,h)}const s=this.morphAttributes;for(const l in s){const u=[],h=s[l];for(let f=0,p=h.length;f&lt;p;f++){const m=h[f],g=e(m,i);u.push(g)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l&lt;u;l++){const h=o[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:&quot;BufferGeometry&quot;,generator:&quot;BufferGeometry.toJSON&quot;}};if(e.uuid=this.uuid,e.type=this.type,this.name!==&quot;&quot;&amp;&amp;(e.name=this.name),Object.keys(this.userData).length&gt;0&amp;&amp;(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&amp;&amp;(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&amp;&amp;(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const h=i[u];e.data.attributes[u]=h.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],f=[];for(let p=0,m=h.length;p&lt;m;p++){const g=h[p];f.push(g.toJSON(e.data))}f.length&gt;0&amp;&amp;(r[u]=f,s=!0)}s&amp;&amp;(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length&gt;0&amp;&amp;(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&amp;&amp;(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&amp;&amp;this.setIndex(i.clone());const r=e.attributes;for(const h in r){const f=r[h];this.setAttribute(h,f.clone(t))}const s=e.morphAttributes;for(const h in s){const f=[],p=s[h];for(let m=0,g=p.length;m&lt;g;m++)f.push(p[m].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h&lt;f;h++){const p=o[h];this.addGroup(p.start,p.count,p.materialIndex)}const l=e.boundingBox;l!==null&amp;&amp;(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&amp;&amp;(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}}const rA=new yt,Gl=new bl,dm=new wi,sA=new Y,pm=new Y,mm=new Y,gm=new Y,Rb=new Y,ym=new Y,oA=new Y,_m=new Y;let Sn=class extends nn{constructor(e=new Lt,t=new $i){super(),this.isMesh=!0,this.type=&quot;Mesh&quot;,this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&amp;&amp;(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&amp;&amp;(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length&gt;0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s&lt;o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&amp;&amp;l){ym.set(0,0,0);for(let u=0,h=s.length;u&lt;h;u++){const f=l[u],p=s[u];f!==0&amp;&amp;(Rb.fromBufferAttribute(p,e),o?ym.addScaledVector(Rb,f):ym.addScaledVector(Rb.sub(t),f))}t.add(ym)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&amp;&amp;(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),dm.copy(i.boundingSphere),dm.applyMatrix4(s),Gl.copy(e.ray).recast(e.near),!(dm.containsPoint(Gl.origin)===!1&amp;&amp;(Gl.intersectSphere(dm,sA)===null||Gl.origin.distanceToSquared(sA)&gt;(e.far-e.near)**2))&amp;&amp;(rA.copy(s).invert(),Gl.copy(e.ray).applyMatrix4(rA),!(i.boundingBox!==null&amp;&amp;Gl.intersectsBox(i.boundingBox)===!1)&amp;&amp;this._computeIntersections(e,t,Gl)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,l=s.index,u=s.attributes.position,h=s.attributes.uv,f=s.attributes.uv1,p=s.attributes.normal,m=s.groups,g=s.drawRange;if(l!==null)if(Array.isArray(o))for(let v=0,x=m.length;v&lt;x;v++){const b=m[v],_=o[b.materialIndex],T=Math.max(b.start,g.start),w=Math.min(l.count,Math.min(b.start+b.count,g.start+g.count));for(let E=T,R=w;E&lt;R;E+=3){const N=l.getX(E),A=l.getX(E+1),D=l.getX(E+2);r=vm(this,_,e,i,h,f,p,N,A,D),r&amp;&amp;(r.faceIndex=Math.floor(E/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),x=Math.min(l.count,g.start+g.count);for(let b=v,_=x;b&lt;_;b+=3){const T=l.getX(b),w=l.getX(b+1),E=l.getX(b+2);r=vm(this,o,e,i,h,f,p,T,w,E),r&amp;&amp;(r.faceIndex=Math.floor(b/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(o))for(let v=0,x=m.length;v&lt;x;v++){const b=m[v],_=o[b.materialIndex],T=Math.max(b.start,g.start),w=Math.min(u.count,Math.min(b.start+b.count,g.start+g.count));for(let E=T,R=w;E&lt;R;E+=3){const N=E,A=E+1,D=E+2;r=vm(this,_,e,i,h,f,p,N,A,D),r&amp;&amp;(r.faceIndex=Math.floor(E/3),r.face.materialIndex=b.materialIndex,t.push(r))}}else{const v=Math.max(0,g.start),x=Math.min(u.count,g.start+g.count);for(let b=v,_=x;b&lt;_;b+=3){const T=b,w=b+1,E=b+2;r=vm(this,o,e,i,h,f,p,T,w,E),r&amp;&amp;(r.faceIndex=Math.floor(b/3),t.push(r))}}}};function sz(n,e,t,i,r,s,o,l){let u;if(e.side===xr?u=i.intersectTriangle(o,s,r,!0,l):u=i.intersectTriangle(r,s,o,e.side===Qr,l),u===null)return null;_m.copy(l),_m.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(_m);return h&lt;t.near||h&gt;t.far?null:{distance:h,point:_m.clone(),object:n}}function vm(n,e,t,i,r,s,o,l,u,h){n.getVertexPosition(l,pm),n.getVertexPosition(u,mm),n.getVertexPosition(h,gm);const f=sz(n,e,t,i,pm,mm,gm,oA);if(f){const p=new Y;_r.getBarycoord(oA,pm,mm,gm,p),r&amp;&amp;(f.uv=_r.getInterpolatedAttribute(r,l,u,h,p,new Oe)),s&amp;&amp;(f.uv1=_r.getInterpolatedAttribute(s,l,u,h,p,new Oe)),o&amp;&amp;(f.normal=_r.getInterpolatedAttribute(o,l,u,h,p,new Y),f.normal.dot(i.direction)&gt;0&amp;&amp;f.normal.multiplyScalar(-1));const m={a:l,b:u,c:h,normal:new Y,materialIndex:0};_r.getNormal(pm,mm,gm,m.normal),f.face=m,f.barycoord=p}return f}class xl extends Lt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type=&quot;BoxGeometry&quot;,this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],h=[],f=[],p=[];let m=0,g=0;v(&quot;z&quot;,&quot;y&quot;,&quot;x&quot;,-1,-1,i,t,e,o,s,0),v(&quot;z&quot;,&quot;y&quot;,&quot;x&quot;,1,-1,i,t,-e,o,s,1),v(&quot;x&quot;,&quot;z&quot;,&quot;y&quot;,1,1,e,i,t,r,o,2),v(&quot;x&quot;,&quot;z&quot;,&quot;y&quot;,1,-1,e,i,-t,r,o,3),v(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,1,-1,e,t,i,r,s,4),v(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,-1,-1,e,t,-i,r,s,5),this.setIndex(u),this.setAttribute(&quot;position&quot;,new ct(h,3)),this.setAttribute(&quot;normal&quot;,new ct(f,3)),this.setAttribute(&quot;uv&quot;,new ct(p,2));function v(x,b,_,T,w,E,R,N,A,D,C){const O=E/A,L=R/D,V=E/2,Z=R/2,z=N/2,K=A+1,I=D+1;let j=0,G=0;const ee=new Y;for(let F=0;F&lt;I;F++){const ne=F*L-Z;for(let le=0;le&lt;K;le++){const ce=le*O-V;ee[x]=ce*T,ee[b]=ne*w,ee[_]=z,h.push(ee.x,ee.y,ee.z),ee[x]=0,ee[b]=0,ee[_]=N&gt;0?1:-1,f.push(ee.x,ee.y,ee.z),p.push(le/A),p.push(1-F/D),j+=1}}for(let F=0;F&lt;D;F++)for(let ne=0;ne&lt;A;ne++){const le=m+ne+K*F,ce=m+ne+K*(F+1),ie=m+(ne+1)+K*(F+1),oe=m+(ne+1)+K*F;u.push(le,ce,oe),u.push(ce,ie,oe),G+=6}l.addGroup(g,G,C),g+=G,m+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hh(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&amp;&amp;(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn(&quot;UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms().&quot;),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function gr(n){const e={};for(let t=0;t&lt;n.length;t++){const i=hh(n[t]);for(const r in i)e[r]=i[r]}return e}function oz(n){const e=[];for(let t=0;t&lt;n.length;t++)e.push(n[t].clone());return e}function XD(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Zt.workingColorSpace}const qD={clone:hh,merge:gr};var az=`void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,lz=`void main() {
    gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ts extends Oi{constructor(e){super(),this.isShaderMaterial=!0,this.type=&quot;ShaderMaterial&quot;,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=az,this.fragmentShader=lz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&amp;&amp;this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hh(e.uniforms),this.uniformsGroups=oz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&amp;&amp;o.isTexture?t.uniforms[r]={type:&quot;t&quot;,value:o.toJSON(e).uuid}:o&amp;&amp;o.isColor?t.uniforms[r]={type:&quot;c&quot;,value:o.getHex()}:o&amp;&amp;o.isVector2?t.uniforms[r]={type:&quot;v2&quot;,value:o.toArray()}:o&amp;&amp;o.isVector3?t.uniforms[r]={type:&quot;v3&quot;,value:o.toArray()}:o&amp;&amp;o.isVector4?t.uniforms[r]={type:&quot;v4&quot;,value:o.toArray()}:o&amp;&amp;o.isMatrix3?t.uniforms[r]={type:&quot;m3&quot;,value:o.toArray()}:o&amp;&amp;o.isMatrix4?t.uniforms[r]={type:&quot;m4&quot;,value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length&gt;0&amp;&amp;(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&amp;&amp;(i[r]=!0);return Object.keys(i).length&gt;0&amp;&amp;(t.extensions=i),t}}class hy extends nn{constructor(){super(),this.isCamera=!0,this.type=&quot;Camera&quot;,this.matrixWorldInverse=new yt,this.projectionMatrix=new yt,this.projectionMatrixInverse=new yt,this.coordinateSystem=Es}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Xa=new Y,aA=new Oe,lA=new Oe;class Yn extends hy{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type=&quot;PerspectiveCamera&quot;,this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=uh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return uh*2*Math.atan(Math.tan(bc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Xa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Xa.x,Xa.y).multiplyScalar(-e/Xa.z),Xa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Xa.x,Xa.y).multiplyScalar(-e/Xa.z)}getViewSize(e,t){return this.getViewBounds(e,aA,lA),t.subVectors(lA,aA)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&amp;&amp;(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&amp;&amp;(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(bc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&amp;&amp;this.view.enabled){const u=o.fullWidth,h=o.fullHeight;s+=o.offsetX*r/u,t-=o.offsetY*i/h,r*=o.width/u,i*=o.height/h}const l=this.filmOffset;l!==0&amp;&amp;(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&amp;&amp;(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Au=-90,Cu=1;class YD extends nn{constructor(e,t,i){super(),this.type=&quot;CubeCamera&quot;,this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Yn(Au,Cu,e,t);r.layers=this.layers,this.add(r);const s=new Yn(Au,Cu,e,t);s.layers=this.layers,this.add(s);const o=new Yn(Au,Cu,e,t);o.layers=this.layers,this.add(o);const l=new Yn(Au,Cu,e,t);l.layers=this.layers,this.add(l);const u=new Yn(Au,Cu,e,t);u.layers=this.layers,this.add(u);const h=new Yn(Au,Cu,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,l,u]=t;for(const h of t)this.remove(h);if(e===Es)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===xd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error(&quot;THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: &quot;+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&amp;&amp;this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&amp;&amp;(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,u,h,f]=this.children,p=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const x=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,u),e.setRenderTarget(i,4,r),e.render(t,h),i.texture.generateMipmaps=x,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(p,m,g),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Xd extends Kn{constructor(e=[],t=fa,i,r,s,o,l,u,h,f){super(e,t,i,r,s,o,l,u,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class KD extends Js{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Xd(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:fi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

                            varying vec3 vWorldDirection;

                            vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

                                    return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

                            }

                            void main() {

                                    vWorldDirection = transformDirection( position, modelMatrix );

                                    #include &lt;begin_vertex&gt;
                                    #include &lt;project_vertex&gt;

                            }
                    `,fragmentShader:`

                            uniform sampler2D tEquirect;

                            varying vec3 vWorldDirection;

                            #include &lt;common&gt;

                            void main() {

                                    vec3 direction = normalize( vWorldDirection );

                                    vec2 sampleUV = equirectUv( direction );

                                    gl_FragColor = texture2D( tEquirect, sampleUV );

                            }
                    `},r=new xl(5,5,5),s=new Ts({name:&quot;CubemapFromEquirect&quot;,uniforms:hh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:xr,blending:la});s.uniforms.tEquirect.value=t;const o=new Sn(r,s),l=t.minFilter;return t.minFilter===Zr&amp;&amp;(t.minFilter=fi),new YD(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o&lt;6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class br extends nn{constructor(){super(),this.isGroup=!0,this.type=&quot;Group&quot;}}const cz={type:&quot;move&quot;};class Og{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&amp;&amp;(this._hand=new br,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&amp;&amp;(this._targetRay=new br,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&amp;&amp;(this._grip=new br,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&amp;&amp;this._targetRay.dispatchEvent(e),this._grip!==null&amp;&amp;this._grip.dispatchEvent(e),this._hand!==null&amp;&amp;this._hand.dispatchEvent(e),this}connect(e){if(e&amp;&amp;e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:&quot;connected&quot;,data:e}),this}disconnect(e){return this.dispatchEvent({type:&quot;disconnected&quot;,data:e}),this._targetRay!==null&amp;&amp;(this._targetRay.visible=!1),this._grip!==null&amp;&amp;(this._grip.visible=!1),this._hand!==null&amp;&amp;(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,h=this._hand;if(e&amp;&amp;t.session.visibilityState!==&quot;visible-blurred&quot;){if(h&amp;&amp;e.hand){o=!0;for(const x of e.hand.values()){const b=t.getJointPose(x,i),_=this._getHandJoint(h,x);b!==null&amp;&amp;(_.matrix.fromArray(b.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=b.radius),_.visible=b!==null}const f=h.joints[&quot;index-finger-tip&quot;],p=h.joints[&quot;thumb-tip&quot;],m=f.position.distanceTo(p.position),g=.02,v=.005;h.inputState.pinching&amp;&amp;m&gt;g+v?(h.inputState.pinching=!1,this.dispatchEvent({type:&quot;pinchend&quot;,handedness:e.handedness,target:this})):!h.inputState.pinching&amp;&amp;m&lt;=g-v&amp;&amp;(h.inputState.pinching=!0,this.dispatchEvent({type:&quot;pinchstart&quot;,handedness:e.handedness,target:this}))}else u!==null&amp;&amp;e.gripSpace&amp;&amp;(s=t.getPose(e.gripSpace,i),s!==null&amp;&amp;(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&amp;&amp;(r=t.getPose(e.targetRaySpace,i),r===null&amp;&amp;s!==null&amp;&amp;(r=s),r!==null&amp;&amp;(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(cz)))}return l!==null&amp;&amp;(l.visible=r!==null),u!==null&amp;&amp;(u.visible=s!==null),h!==null&amp;&amp;(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new br;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class fy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name=&quot;&quot;,this.color=new $e(e),this.density=t}clone(){return new fy(this.color,this.density)}toJSON(){return{type:&quot;FogExp2&quot;,name:this.name,color:this.color.getHex(),density:this.density}}}class dy{constructor(e,t=1,i=1e3){this.isFog=!0,this.name=&quot;&quot;,this.color=new $e(e),this.near=t,this.far=i}clone(){return new dy(this.color,this.near,this.far)}toJSON(){return{type:&quot;Fog&quot;,name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let py=class extends nn{constructor(){super(),this.isScene=!0,this.type=&quot;Scene&quot;,this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Sr,this.environmentIntensity=1,this.environmentRotation=new Sr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;observe&quot;,{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&amp;&amp;(this.background=e.background.clone()),e.environment!==null&amp;&amp;(this.environment=e.environment.clone()),e.fog!==null&amp;&amp;(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&amp;&amp;(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&amp;&amp;(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness&gt;0&amp;&amp;(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&amp;&amp;(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&amp;&amp;(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class qd{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=bd,this.updateRanges=[],this.version=0,this.uuid=Jr()}onUploadCallback(){}set needsUpdate(e){e===!0&amp;&amp;this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r&lt;s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&amp;&amp;(e.arrayBuffers={}),this.array.buffer._uuid===void 0&amp;&amp;(this.array.buffer._uuid=Jr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&amp;&amp;(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&amp;&amp;(e.arrayBuffers={}),this.array.buffer._uuid===void 0&amp;&amp;(this.array.buffer._uuid=Jr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&amp;&amp;(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const pr=new Y;class dl{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name=&quot;&quot;,this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t&lt;i;t++)pr.fromBufferAttribute(this,t),pr.applyMatrix4(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t&lt;i;t++)pr.fromBufferAttribute(this,t),pr.applyNormalMatrix(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}transformDirection(e){for(let t=0,i=this.count;t&lt;i;t++)pr.fromBufferAttribute(this,t),pr.transformDirection(e),this.setXYZ(t,pr.x,pr.y,pr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&amp;&amp;(i=yr(i,this.array)),i}setComponent(e,t,i){return this.normalized&amp;&amp;(i=Xt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&amp;&amp;(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&amp;&amp;(t=yr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&amp;&amp;(t=Xt(t,this.array),i=Xt(i,this.array),r=Xt(r,this.array),s=Xt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log(&quot;THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.&quot;);const t=[];for(let i=0;i&lt;this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s&lt;this.itemSize;s++)t.push(this.data.array[r+s])}return new Jt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&amp;&amp;(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&amp;&amp;(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new dl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log(&quot;THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.&quot;);const t=[];for(let i=0;i&lt;this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s&lt;this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&amp;&amp;(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&amp;&amp;(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class fw extends Oi{constructor(e){super(),this.isSpriteMaterial=!0,this.type=&quot;SpriteMaterial&quot;,this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ru;const Of=new Y,Ou=new Y,Du=new Y,Nu=new Oe,Df=new Oe,$D=new yt,bm=new Y,Nf=new Y,xm=new Y,cA=new Oe,Ob=new Oe,uA=new Oe;class ZD extends nn{constructor(e=new fw){if(super(),this.isSprite=!0,this.type=&quot;Sprite&quot;,Ru===void 0){Ru=new Lt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new qd(t,5);Ru.setIndex([0,1,2,0,2,3]),Ru.setAttribute(&quot;position&quot;,new dl(i,3,0,!1)),Ru.setAttribute(&quot;uv&quot;,new dl(i,2,3,!1))}this.geometry=Ru,this.material=e,this.center=new Oe(.5,.5)}raycast(e,t){e.camera===null&amp;&amp;console.error(&#x27;THREE.Sprite: &quot;Raycaster.camera&quot; needs to be set in order to raycast against sprites.&#x27;),Ou.setFromMatrixScale(this.matrixWorld),$D.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Du.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&amp;&amp;this.material.sizeAttenuation===!1&amp;&amp;Ou.multiplyScalar(-Du.z);const i=this.material.rotation;let r,s;i!==0&amp;&amp;(s=Math.cos(i),r=Math.sin(i));const o=this.center;Sm(bm.set(-.5,-.5,0),Du,o,Ou,r,s),Sm(Nf.set(.5,-.5,0),Du,o,Ou,r,s),Sm(xm.set(.5,.5,0),Du,o,Ou,r,s),cA.set(0,0),Ob.set(1,0),uA.set(1,1);let l=e.ray.intersectTriangle(bm,Nf,xm,!1,Of);if(l===null&amp;&amp;(Sm(Nf.set(-.5,.5,0),Du,o,Ou,r,s),Ob.set(0,1),l=e.ray.intersectTriangle(bm,xm,Nf,!1,Of),l===null))return;const u=e.ray.origin.distanceTo(Of);u&lt;e.near||u&gt;e.far||t.push({distance:u,point:Of.clone(),uv:_r.getInterpolation(Of,bm,Nf,xm,cA,Ob,uA,new Oe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&amp;&amp;this.center.copy(e.center),this.material=e.material,this}}function Sm(n,e,t,i,r,s){Nu.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Df.x=s*Nu.x-r*Nu.y,Df.y=r*Nu.x+s*Nu.y):Df.copy(Nu),n.copy(e),n.x+=Df.x,n.y+=Df.y,n.applyMatrix4($D)}const wm=new Y,hA=new Y;class JD extends nn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type=&quot;LOD&quot;,Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i&lt;r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s&lt;r.length&amp;&amp;!(t&lt;r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i&lt;t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length&gt;0){let i,r;for(i=1,r=t.length;i&lt;r;i++){let s=t[i].distance;if(t[i].object.visible&amp;&amp;(s-=s*t[i].hysteresis),e&lt;s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length&gt;0){wm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(wm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length&gt;1){wm.setFromMatrixPosition(e.matrixWorld),hA.setFromMatrixPosition(this.matrixWorld);const i=wm.distanceTo(hA)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r&lt;s;r++){let o=t[r].distance;if(t[r].object.visible&amp;&amp;(o-=o*t[r].hysteresis),i&gt;=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r&lt;s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&amp;&amp;(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r&lt;s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const fA=new Y,dA=new yn,pA=new yn,uz=new Y,mA=new yt,Em=new Y,Db=new wi,gA=new yt,Nb=new bl;class my extends Sn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type=&quot;SkinnedMesh&quot;,this.bindMode=nS,this.bindMatrix=new yt,this.bindMatrixInverse=new yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&amp;&amp;(this.boundingBox=new Ri),this.boundingBox.makeEmpty();const t=e.getAttribute(&quot;position&quot;);for(let i=0;i&lt;t.count;i++)this.getVertexPosition(i,Em),this.boundingBox.expandByPoint(Em)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&amp;&amp;(this.boundingSphere=new wi),this.boundingSphere.makeEmpty();const t=e.getAttribute(&quot;position&quot;);for(let i=0;i&lt;t.count;i++)this.getVertexPosition(i,Em),this.boundingSphere.expandByPoint(Em)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&amp;&amp;(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&amp;&amp;(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&amp;&amp;(this.boundingSphere===null&amp;&amp;this.computeBoundingSphere(),Db.copy(this.boundingSphere),Db.applyMatrix4(r),e.ray.intersectsSphere(Db)!==!1&amp;&amp;(gA.copy(r).invert(),Nb.copy(e.ray).applyMatrix4(gA),!(this.boundingBox!==null&amp;&amp;Nb.intersectsBox(this.boundingBox)===!1)&amp;&amp;this._computeIntersections(e,t,Nb)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&amp;&amp;(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i&lt;r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===nS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===AD?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn(&quot;THREE.SkinnedMesh: Unrecognized bindMode: &quot;+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;dA.fromBufferAttribute(r.attributes.skinIndex,e),pA.fromBufferAttribute(r.attributes.skinWeight,e),fA.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s&lt;4;s++){const o=pA.getComponent(s);if(o!==0){const l=dA.getComponent(s);mA.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(uz.copy(fA).applyMatrix4(mA),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Yd extends nn{constructor(){super(),this.isBone=!0,this.type=&quot;Bone&quot;}}class $s extends Kn{constructor(e=null,t=1,i=1,r,s,o,l,u,h=xi,f=xi,p,m){super(null,o,l,u,h,f,r,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const yA=new yt,hz=new yt;class Eh{constructor(e=[],t=[]){this.uuid=Jr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn(&quot;THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.&quot;),this.boneInverses=[];for(let i=0,r=this.bones.length;i&lt;r;i++)this.boneInverses.push(new yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e&lt;t;e++){const i=new yt;this.bones[e]&amp;&amp;i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e&lt;t;e++){const i=this.bones[e];i&amp;&amp;i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e&lt;t;e++){const i=this.bones[e];i&amp;&amp;(i.parent&amp;&amp;i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s&lt;o;s++){const l=e[s]?e[s].matrixWorld:hz;yA.multiplyMatrices(l,t[s]),yA.toArray(i,s*16)}r!==null&amp;&amp;(r.needsUpdate=!0)}clone(){return new Eh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new $s(t,e,e,vr,Pr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t&lt;i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&amp;&amp;(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i&lt;r;i++){const s=e.bones[i];let o=t[s];o===void 0&amp;&amp;(console.warn(&quot;THREE.Skeleton: No bone found with UUID:&quot;,s),o=new Yd),this.bones.push(o),this.boneInverses.push(new yt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:&quot;Skeleton&quot;,generator:&quot;Skeleton.toJSON&quot;},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r&lt;s;r++){const o=t[r];e.bones.push(o.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Mc extends Jt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Iu=new yt,_A=new yt,Tm=[],vA=new Ri,fz=new yt,If=new Sn,Pf=new wi;class dw extends Sn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Mc(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r&lt;i;r++)this.setMatrixAt(r,fz)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&amp;&amp;(this.boundingBox=new Ri),e.boundingBox===null&amp;&amp;e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i&lt;t;i++)this.getMatrixAt(i,Iu),vA.copy(e.boundingBox).applyMatrix4(Iu),this.boundingBox.union(vA)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&amp;&amp;(this.boundingSphere=new wi),e.boundingSphere===null&amp;&amp;e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i&lt;t;i++)this.getMatrixAt(i,Iu),Pf.copy(e.boundingSphere).applyMatrix4(Iu),this.boundingSphere.union(Pf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&amp;&amp;(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&amp;&amp;(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&amp;&amp;(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&amp;&amp;(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let l=0;l&lt;i.length;l++)i[l]=r[o+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(If.geometry=this.geometry,If.material=this.material,If.material!==void 0&amp;&amp;(this.boundingSphere===null&amp;&amp;this.computeBoundingSphere(),Pf.copy(this.boundingSphere),Pf.applyMatrix4(i),e.ray.intersectsSphere(Pf)!==!1))for(let s=0;s&lt;r;s++){this.getMatrixAt(s,Iu),_A.multiplyMatrices(i,Iu),If.matrixWorld=_A,If.raycast(e,Tm);for(let o=0,l=Tm.length;o&lt;l;o++){const u=Tm[o];u.instanceId=s,u.object=this,t.push(u)}Tm.length=0}}setColorAt(e,t){this.instanceColor===null&amp;&amp;(this.instanceColor=new Mc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&amp;&amp;(this.morphTexture=new $s(new Float32Array(r*this.count),r,this.count,Gd,Pr));const s=this.morphTexture.source.data.data;let o=0;for(let h=0;h&lt;i.length;h++)o+=i[h];const l=this.geometry.morphTargetsRelative?1:1-o,u=r*e;s[u]=l,s.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:&quot;dispose&quot;}),this.morphTexture!==null&amp;&amp;(this.morphTexture.dispose(),this.morphTexture=null)}}const Ib=new Y,dz=new Y,pz=new jt;class Qo{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Ib.subVectors(i,t).cross(dz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Ib),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s&lt;0||s&gt;1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t&lt;0&amp;&amp;i&gt;0||i&lt;0&amp;&amp;t&gt;0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||pz.getNormalMatrix(e),r=this.coplanarPoint(Ib).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&amp;&amp;e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const jl=new wi,Mm=new Y;class Th{constructor(e=new Qo,t=new Qo,i=new Qo,r=new Qo,s=new Qo,o=new Qo){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i&lt;6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Es){const i=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],u=r[3],h=r[4],f=r[5],p=r[6],m=r[7],g=r[8],v=r[9],x=r[10],b=r[11],_=r[12],T=r[13],w=r[14],E=r[15];if(i[0].setComponents(u-s,m-h,b-g,E-_).normalize(),i[1].setComponents(u+s,m+h,b+g,E+_).normalize(),i[2].setComponents(u+o,m+f,b+v,E+T).normalize(),i[3].setComponents(u-o,m-f,b-v,E-T).normalize(),i[4].setComponents(u-l,m-p,b-x,E-w).normalize(),t===Es)i[5].setComponents(u+l,m+p,b+x,E+w).normalize();else if(t===xd)i[5].setComponents(l,p,x,w).normalize();else throw new Error(&quot;THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: &quot;+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&amp;&amp;e.computeBoundingSphere(),jl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&amp;&amp;t.computeBoundingSphere(),jl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(jl)}intersectsSprite(e){return jl.center.set(0,0,0),jl.radius=.7071067811865476,jl.applyMatrix4(e.matrixWorld),this.intersectsSphere(jl)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s&lt;6;s++)if(t[s].distanceToPoint(i)&lt;r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i&lt;6;i++){const r=t[i];if(Mm.x=r.normal.x&gt;0?e.max.x:e.min.x,Mm.y=r.normal.y&gt;0?e.max.y:e.min.y,Mm.z=r.normal.z&gt;0?e.max.z:e.min.z,r.distanceToPoint(Mm)&lt;0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i&lt;6;i++)if(t[i].distanceToPoint(e)&lt;0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ao=new yt,lo=new Th;class gy{constructor(){this.coordinateSystem=Es}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i&lt;t.cameras.length;i++){const r=t.cameras[i];if(ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),lo.setFromProjectionMatrix(ao,this.coordinateSystem),lo.containsPoint(e))return!0}return!1}clone(){return new gy}}function Pb(n,e){return n-e}function mz(n,e){return n.z-e.z}function gz(n,e){return e.z-n.z}class yz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index&gt;=s.length&amp;&amp;s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];o.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const Or=new yt,_z=new $e(1,1,1),bA=new Th,vz=new gy,Am=new Ri,Wl=new wi,Lf=new Y,xA=new Y,bz=new Y,Lb=new yz,cr=new Sn,Cm=[];function xz(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s&lt;r;s++)for(let o=0;o&lt;i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Xl(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i&lt;t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class QD extends Sn{constructor(e,t,i=t*2,r){super(new Lt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new $s(t,e,e,vr,Pr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new $s(t,e,e,jd,da);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new $s(t,e,e,vr,Pr);i.colorSpace=Zt.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:u,normalized:h}=o,f=new l.constructor(i*u),p=new Jt(f,u,h);t.setAttribute(s,p)}if(e.getIndex()!==null){const s=i&gt;65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Jt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error(&#x27;THREE.BatchedMesh: All geometries must consistently have &quot;index&quot;.&#x27;);for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing &quot;${i}&quot;. All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error(&quot;THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.&quot;)}}validateInstanceId(e){const t=this._instanceInfo;if(e&lt;0||e&gt;=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e&lt;0||e&gt;=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&amp;&amp;(this.boundingBox=new Ri);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i&lt;r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Or),this.getBoundingBoxAt(s,Am).applyMatrix4(Or),e.union(Am)}}computeBoundingSphere(){this.boundingSphere===null&amp;&amp;(this.boundingSphere=new wi);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i&lt;r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Or),this.getBoundingSphereAt(s,Wl).applyMatrix4(Or),e.union(Wl)}}addInstance(e){if(this._instanceInfo.length&gt;=this.maxInstanceCount&amp;&amp;this._availableInstanceIds.length===0)throw new Error(&quot;THREE.BatchedMesh: Maximum item count reached.&quot;);const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length&gt;0?(this._availableInstanceIds.sort(Pb),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Or.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&amp;&amp;(_z.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute(&quot;position&quot;).count:t;const o=e.getIndex();if(o!==null&amp;&amp;(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&amp;&amp;r.indexStart+r.reservedIndexCount&gt;this._maxIndexCount||r.vertexStart+r.reservedVertexCount&gt;this._maxVertexCount)throw new Error(&quot;THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.&quot;);let u;return this._availableGeometryIds.length&gt;0?(this._availableGeometryIds.sort(Pb),u=this._availableGeometryIds.shift(),s[u]=r):(u=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(u,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(e,t){if(e&gt;=this._geometryCount)throw new Error(&quot;THREE.BatchedMesh: Maximum geometry count reached.&quot;);this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),l=this._geometryInfo[e];if(r&amp;&amp;o.count&gt;l.reservedIndexCount||t.attributes.position.count&gt;l.reservedVertexCount)throw new Error(&quot;THREE.BatchedMesh: Reserved space not large enough for provided geometry.&quot;);const u=l.vertexStart,h=l.reservedVertexCount;l.vertexCount=t.getAttribute(&quot;position&quot;).count;for(const f in i.attributes){const p=t.getAttribute(f),m=i.getAttribute(f);xz(p,m,u);const g=p.itemSize;for(let v=p.count,x=h;v&lt;x;v++){const b=u+v;for(let _=0;_&lt;g;_++)m.setComponent(b,_,0)}m.needsUpdate=!0,m.addUpdateRange(u*g,h*g)}if(r){const f=l.indexStart,p=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let m=0;m&lt;o.count;m++)s.setX(f+m,u+o.getX(m));for(let m=o.count,g=p;m&lt;g;m++)s.setX(f+m,u);s.needsUpdate=!0,s.addUpdateRange(f,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&amp;&amp;(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&amp;&amp;(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e&gt;=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r&lt;s;r++)i[r].active&amp;&amp;i[r].geometryIndex===e&amp;&amp;this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,l)=&gt;l).sort((o,l)=&gt;i[o].vertexStart-i[l].vertexStart),s=this.geometry;for(let o=0,l=i.length;o&lt;l;o++){const u=r[o],h=i[u];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==t){const{indexStart:f,vertexStart:p,reservedIndexCount:m}=h,g=s.index,v=g.array,x=e-p;for(let b=f;b&lt;f+m;b++)v[b]=v[b]+x;g.array.copyWithin(t,f,f+m),g.addUpdateRange(t,m),h.indexStart=t}t+=h.reservedIndexCount}if(h.vertexStart!==e){const{vertexStart:f,reservedVertexCount:p}=h,m=s.attributes;for(const g in m){const v=m[g],{array:x,itemSize:b}=v;x.copyWithin(e*b,f*b,(f+p)*b),v.addUpdateRange(e*b,p*b)}h.vertexStart=e}e+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e&gt;=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Ri,o=i.index,l=i.attributes.position;for(let u=r.start,h=r.start+r.count;u&lt;h;u++){let f=u;o&amp;&amp;(f=o.getX(f)),s.expandByPoint(Lf.fromBufferAttribute(l,f))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e&gt;=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new wi;this.getBoundingBoxAt(e,Am),Am.getCenter(s.center);const o=i.index,l=i.attributes.position;let u=0;for(let h=r.start,f=r.start+r.count;h&lt;f;h++){let p=h;o&amp;&amp;(p=o.getX(p)),Lf.fromBufferAttribute(l,p),u=Math.max(u,s.center.distanceToSquared(Lf))}s.radius=Math.sqrt(u),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&amp;&amp;this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(Pb);t[t.length-1]===i.length;)i.pop(),t.pop();if(e&lt;i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Xl(this._multiDrawCounts,r),Xl(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Xl(o.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),Xl(l.image.data,this._matricesTexture.image.data),u&amp;&amp;(u.dispose(),this._initColorsTexture(),Xl(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=&gt;l.active);if(Math.max(...i.map(l=&gt;l.vertexStart+l.reservedVertexCount))&gt;e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&amp;&amp;Math.max(...i.map(u=&gt;u.indexStart+u.reservedIndexCount))&gt;t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&amp;&amp;(this._geometryInitialized=!1,this.geometry=new Lt,this._initializeGeometry(s));const o=this.geometry;s.index&amp;&amp;Xl(s.index.array,o.index.array);for(const l in s.attributes)Xl(s.attributes[l].array,o.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;cr.material=this.material,cr.geometry.index=o.index,cr.geometry.attributes=o.attributes,cr.geometry.boundingBox===null&amp;&amp;(cr.geometry.boundingBox=new Ri),cr.geometry.boundingSphere===null&amp;&amp;(cr.geometry.boundingSphere=new wi);for(let l=0,u=i.length;l&lt;u;l++){if(!i[l].visible||!i[l].active)continue;const h=i[l].geometryIndex,f=r[h];cr.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(l,cr.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,cr.geometry.boundingBox),this.getBoundingSphereAt(h,cr.geometry.boundingSphere),cr.raycast(e,Cm);for(let p=0,m=Cm.length;p&lt;m;p++){const g=Cm[p];g.object=this,g.batchId=l,t.push(g)}Cm.length=0}cr.material=null,cr.geometry.index=null,cr.geometry.attributes={},cr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=&gt;({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=&gt;({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&amp;&amp;(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&amp;&amp;(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&amp;&amp;!this.perObjectFrustumCulled&amp;&amp;!this.sortObjects)return;const o=r.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,u=this._instanceInfo,h=this._multiDrawStarts,f=this._multiDrawCounts,p=this._geometryInfo,m=this.perObjectFrustumCulled,g=this._indirectTexture,v=g.image.data,x=i.isArrayCamera?vz:bA;m&amp;&amp;!i.isArrayCamera&amp;&amp;(Or.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),bA.setFromProjectionMatrix(Or,e.coordinateSystem));let b=0;if(this.sortObjects){Or.copy(this.matrixWorld).invert(),Lf.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Or),xA.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Or);for(let w=0,E=u.length;w&lt;E;w++)if(u[w].visible&amp;&amp;u[w].active){const R=u[w].geometryIndex;this.getMatrixAt(w,Or),this.getBoundingSphereAt(R,Wl).applyMatrix4(Or);let N=!1;if(m&amp;&amp;(N=!x.intersectsSphere(Wl,i)),!N){const A=p[R],D=bz.subVectors(Wl.center,Lf).dot(xA);Lb.push(A.start,A.count,D,w)}}const _=Lb.list,T=this.customSort;T===null?_.sort(s.transparent?gz:mz):T.call(this,_,i);for(let w=0,E=_.length;w&lt;E;w++){const R=_[w];h[b]=R.start*l,f[b]=R.count,v[b]=R.index,b++}Lb.reset()}else for(let _=0,T=u.length;_&lt;T;_++)if(u[_].visible&amp;&amp;u[_].active){const w=u[_].geometryIndex;let E=!1;if(m&amp;&amp;(this.getMatrixAt(_,Or),this.getBoundingSphereAt(w,Wl).applyMatrix4(Or),E=!x.intersectsSphere(Wl,i)),!E){const R=p[w];h[b]=R.start*l,f[b]=R.count,v[b]=_,b++}}g.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Zi extends Oi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type=&quot;LineBasicMaterial&quot;,this.color=new $e(16777215),this.map=null,this.linewidth=1,this.linecap=&quot;round&quot;,this.linejoin=&quot;round&quot;,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const T0=new Y,M0=new Y,SA=new yt,Uf=new bl,Rm=new wi,Ub=new Y,wA=new Y;class xo extends nn{constructor(e=new Lt,t=new Zi){super(),this.isLine=!0,this.type=&quot;Line&quot;,this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r&lt;s;r++)T0.fromBufferAttribute(t,r-1),M0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=T0.distanceTo(M0);e.setAttribute(&quot;lineDistance&quot;,new ct(i,1))}else console.warn(&quot;THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.&quot;);return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),Rm.copy(i.boundingSphere),Rm.applyMatrix4(r),Rm.radius+=s,e.ray.intersectsSphere(Rm)===!1)return;SA.copy(r).invert(),Uf.copy(e.ray).applyMatrix4(SA);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){const g=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let x=g,b=v-1;x&lt;b;x+=h){const _=f.getX(x),T=f.getX(x+1),w=Om(this,e,Uf,u,_,T,x);w&amp;&amp;t.push(w)}if(this.isLineLoop){const x=f.getX(v-1),b=f.getX(g),_=Om(this,e,Uf,u,x,b,v-1);_&amp;&amp;t.push(_)}}else{const g=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let x=g,b=v-1;x&lt;b;x+=h){const _=Om(this,e,Uf,u,x,x+1,x);_&amp;&amp;t.push(_)}if(this.isLineLoop){const x=Om(this,e,Uf,u,v-1,g,v-1);x&amp;&amp;t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length&gt;0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s&lt;o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Om(n,e,t,i,r,s,o){const l=n.geometry.attributes.position;if(T0.fromBufferAttribute(l,r),M0.fromBufferAttribute(l,s),t.distanceSqToSegment(T0,M0,Ub,wA)&gt;i)return;Ub.applyMatrix4(n.matrixWorld);const h=e.ray.origin.distanceTo(Ub);if(!(h&lt;e.near||h&gt;e.far))return{distance:h,point:wA.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const EA=new Y,TA=new Y;class Ur extends xo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type=&quot;LineSegments&quot;}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r&lt;s;r+=2)EA.fromBufferAttribute(t,r),TA.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+EA.distanceTo(TA);e.setAttribute(&quot;lineDistance&quot;,new ct(i,1))}else console.warn(&quot;THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.&quot;);return this}}class pw extends xo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type=&quot;LineLoop&quot;}}class yy extends Oi{constructor(e){super(),this.isPointsMaterial=!0,this.type=&quot;PointsMaterial&quot;,this.color=new $e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const MA=new yt,sS=new bl,Dm=new wi,Nm=new Y;class _y extends nn{constructor(e=new Lt,t=new yy){super(),this.isPoints=!0,this.type=&quot;Points&quot;,this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),Dm.copy(i.boundingSphere),Dm.applyMatrix4(r),Dm.radius+=s,e.ray.intersectsSphere(Dm)===!1)return;MA.copy(r).invert(),sS.copy(e.ray).applyMatrix4(MA);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let v=m,x=g;v&lt;x;v++){const b=h.getX(v);Nm.fromBufferAttribute(p,b),AA(Nm,b,u,r,e,t,this)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let v=m,x=g;v&lt;x;v++)Nm.fromBufferAttribute(p,v),AA(Nm,v,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length&gt;0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s&lt;o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function AA(n,e,t,i,r,s,o){const l=sS.distanceSqToPoint(n);if(l&lt;t){const u=new Y;sS.closestPointToPoint(n,u),u.applyMatrix4(i);const h=r.ray.origin.distanceTo(u);if(h&lt;r.near||h&gt;r.far)return;s.push({distance:h,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class eN extends Kn{constructor(e,t,i,r,s=fi,o=fi,l,u,h){super(e,t,i,r,s,o,l,u,h),this.isVideoTexture=!0,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}&quot;requestVideoFrameCallback&quot;in e&amp;&amp;e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;&quot;requestVideoFrameCallback&quot;in e===!1&amp;&amp;e.readyState&gt;=e.HAVE_CURRENT_DATA&amp;&amp;(this.needsUpdate=!0)}}class Sz extends eN{constructor(e,t,i,r,s,o,l,u){super({},e,t,i,r,s,o,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class wz extends Kn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=xi,this.minFilter=xi,this.generateMipmaps=!1,this.needsUpdate=!0}}class vy extends Kn{constructor(e,t,i,r,s,o,l,u,h,f,p,m){super(null,o,l,u,h,f,r,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ez extends vy{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=rr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Tz extends vy{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,fa),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Mz extends Kn{constructor(e,t,i,r,s,o,l,u,h){super(e,t,i,r,s,o,l,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class by extends Kn{constructor(e,t,i=da,r,s,o,l=xi,u=xi,h,f=oh){if(f!==oh&amp;&amp;f!==ah)throw new Error(&quot;DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat&quot;);super(null,r,s,o,l,u,f,i,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new ll(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&amp;&amp;(t.compareFunction=this.compareFunction),t}}class Az extends by{constructor(e=1,t=1,i=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:i},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class xy extends Lt{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type=&quot;CapsuleGeometry&quot;,this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],l=[],u=[],h=[],f=t/2,p=Math.PI/2*e,m=t,g=2*p+m,v=i*2+s,x=r+1,b=new Y,_=new Y;for(let T=0;T&lt;=v;T++){let w=0,E=0,R=0,N=0;if(T&lt;=i){const C=T/i,O=C*Math.PI/2;E=-f-e*Math.cos(O),R=e*Math.sin(O),N=-e*Math.cos(O),w=C*p}else if(T&lt;=i+s){const C=(T-i)/s;E=-f+C*t,R=e,N=0,w=p+C*m}else{const C=(T-i-s)/i,O=C*Math.PI/2;E=f+e*Math.sin(O),R=e*Math.cos(O),N=e*Math.sin(O),w=p+m+C*p}const A=Math.max(0,Math.min(1,w/g));let D=0;T===0?D=.5/r:T===v&amp;&amp;(D=-.5/r);for(let C=0;C&lt;=r;C++){const O=C/r,L=O*Math.PI*2,V=Math.sin(L),Z=Math.cos(L);_.x=-R*Z,_.y=E,_.z=R*V,l.push(_.x,_.y,_.z),b.set(-R*Z,N,R*V),b.normalize(),u.push(b.x,b.y,b.z),h.push(O+D,A)}if(T&gt;0){const C=(T-1)*x;for(let O=0;O&lt;r;O++){const L=C+O,V=C+O+1,Z=T*x+O,z=T*x+O+1;o.push(L,V,Z),o.push(V,z,Z)}}}this.setIndex(o),this.setAttribute(&quot;position&quot;,new ct(l,3)),this.setAttribute(&quot;normal&quot;,new ct(u,3)),this.setAttribute(&quot;uv&quot;,new ct(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xy(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Sy extends Lt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type=&quot;CircleGeometry&quot;,this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],u=[],h=new Y,f=new Oe;o.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let p=0,m=3;p&lt;=t;p++,m+=3){const g=i+p/t*r;h.x=e*Math.cos(g),h.y=e*Math.sin(g),o.push(h.x,h.y,h.z),l.push(0,0,1),f.x=(o[m]/e+1)/2,f.y=(o[m+1]/e+1)/2,u.push(f.x,f.y)}for(let p=1;p&lt;=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute(&quot;position&quot;,new ct(o,3)),this.setAttribute(&quot;normal&quot;,new ct(l,3)),this.setAttribute(&quot;uv&quot;,new ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sy(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Mh extends Lt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,l=0,u=Math.PI*2){super(),this.type=&quot;CylinderGeometry&quot;,this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u};const h=this;r=Math.floor(r),s=Math.floor(s);const f=[],p=[],m=[],g=[];let v=0;const x=[],b=i/2;let _=0;T(),o===!1&amp;&amp;(e&gt;0&amp;&amp;w(!0),t&gt;0&amp;&amp;w(!1)),this.setIndex(f),this.setAttribute(&quot;position&quot;,new ct(p,3)),this.setAttribute(&quot;normal&quot;,new ct(m,3)),this.setAttribute(&quot;uv&quot;,new ct(g,2));function T(){const E=new Y,R=new Y;let N=0;const A=(t-e)/i;for(let D=0;D&lt;=s;D++){const C=[],O=D/s,L=O*(t-e)+e;for(let V=0;V&lt;=r;V++){const Z=V/r,z=Z*u+l,K=Math.sin(z),I=Math.cos(z);R.x=L*K,R.y=-O*i+b,R.z=L*I,p.push(R.x,R.y,R.z),E.set(K,A,I).normalize(),m.push(E.x,E.y,E.z),g.push(Z,1-O),C.push(v++)}x.push(C)}for(let D=0;D&lt;r;D++)for(let C=0;C&lt;s;C++){const O=x[C][D],L=x[C+1][D],V=x[C+1][D+1],Z=x[C][D+1];(e&gt;0||C!==0)&amp;&amp;(f.push(O,L,Z),N+=3),(t&gt;0||C!==s-1)&amp;&amp;(f.push(L,V,Z),N+=3)}h.addGroup(_,N,0),_+=N}function w(E){const R=v,N=new Oe,A=new Y;let D=0;const C=E===!0?e:t,O=E===!0?1:-1;for(let V=1;V&lt;=r;V++)p.push(0,b*O,0),m.push(0,O,0),g.push(.5,.5),v++;const L=v;for(let V=0;V&lt;=r;V++){const z=V/r*u+l,K=Math.cos(z),I=Math.sin(z);A.x=C*I,A.y=b*O,A.z=C*K,p.push(A.x,A.y,A.z),m.push(0,O,0),N.x=K*.5+.5,N.y=I*.5*O+.5,g.push(N.x,N.y),v++}for(let V=0;V&lt;r;V++){const Z=R+V,z=L+V;E===!0?f.push(z,z+1,Z):f.push(z+1,z,Z),D+=3}h.addGroup(_,D,E===!0?1:2),_+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Kd extends Mh{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,i,r,s,o,l),this.type=&quot;ConeGeometry&quot;,this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Kd(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Sl extends Lt{constructor(e=[],t=[],i=1,r=0){super(),this.type=&quot;PolyhedronGeometry&quot;,this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];l(r),h(i),f(),this.setAttribute(&quot;position&quot;,new ct(s,3)),this.setAttribute(&quot;normal&quot;,new ct(s.slice(),3)),this.setAttribute(&quot;uv&quot;,new ct(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(T){const w=new Y,E=new Y,R=new Y;for(let N=0;N&lt;t.length;N+=3)g(t[N+0],w),g(t[N+1],E),g(t[N+2],R),u(w,E,R,T)}function u(T,w,E,R){const N=R+1,A=[];for(let D=0;D&lt;=N;D++){A[D]=[];const C=T.clone().lerp(E,D/N),O=w.clone().lerp(E,D/N),L=N-D;for(let V=0;V&lt;=L;V++)V===0&amp;&amp;D===N?A[D][V]=C:A[D][V]=C.clone().lerp(O,V/L)}for(let D=0;D&lt;N;D++)for(let C=0;C&lt;2*(N-D)-1;C++){const O=Math.floor(C/2);C%2===0?(m(A[D][O+1]),m(A[D+1][O]),m(A[D][O])):(m(A[D][O+1]),m(A[D+1][O+1]),m(A[D+1][O]))}}function h(T){const w=new Y;for(let E=0;E&lt;s.length;E+=3)w.x=s[E+0],w.y=s[E+1],w.z=s[E+2],w.normalize().multiplyScalar(T),s[E+0]=w.x,s[E+1]=w.y,s[E+2]=w.z}function f(){const T=new Y;for(let w=0;w&lt;s.length;w+=3){T.x=s[w+0],T.y=s[w+1],T.z=s[w+2];const E=b(T)/2/Math.PI+.5,R=_(T)/Math.PI+.5;o.push(E,1-R)}v(),p()}function p(){for(let T=0;T&lt;o.length;T+=6){const w=o[T+0],E=o[T+2],R=o[T+4],N=Math.max(w,E,R),A=Math.min(w,E,R);N&gt;.9&amp;&amp;A&lt;.1&amp;&amp;(w&lt;.2&amp;&amp;(o[T+0]+=1),E&lt;.2&amp;&amp;(o[T+2]+=1),R&lt;.2&amp;&amp;(o[T+4]+=1))}}function m(T){s.push(T.x,T.y,T.z)}function g(T,w){const E=T*3;w.x=e[E+0],w.y=e[E+1],w.z=e[E+2]}function v(){const T=new Y,w=new Y,E=new Y,R=new Y,N=new Oe,A=new Oe,D=new Oe;for(let C=0,O=0;C&lt;s.length;C+=9,O+=6){T.set(s[C+0],s[C+1],s[C+2]),w.set(s[C+3],s[C+4],s[C+5]),E.set(s[C+6],s[C+7],s[C+8]),N.set(o[O+0],o[O+1]),A.set(o[O+2],o[O+3]),D.set(o[O+4],o[O+5]),R.copy(T).add(w).add(E).divideScalar(3);const L=b(R);x(N,O+0,T,L),x(A,O+2,w,L),x(D,O+4,E,L)}}function x(T,w,E,R){R&lt;0&amp;&amp;T.x===1&amp;&amp;(o[w]=T.x-1),E.x===0&amp;&amp;E.z===0&amp;&amp;(o[w]=R/2/Math.PI+.5)}function b(T){return Math.atan2(T.z,-T.x)}function _(T){return Math.atan2(-T.y,Math.sqrt(T.x*T.x+T.z*T.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sl(e.vertices,e.indices,e.radius,e.details)}}class wy extends Sl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type=&quot;DodecahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new wy(e.radius,e.detail)}}const Im=new Y,Pm=new Y,kb=new Y,Lm=new _r;class mw extends Lt{constructor(e=null,t=1){if(super(),this.type=&quot;EdgesGeometry&quot;,this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(bc*t),o=e.getIndex(),l=e.getAttribute(&quot;position&quot;),u=o?o.count:l.count,h=[0,0,0],f=[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;],p=new Array(3),m={},g=[];for(let v=0;v&lt;u;v+=3){o?(h[0]=o.getX(v),h[1]=o.getX(v+1),h[2]=o.getX(v+2)):(h[0]=v,h[1]=v+1,h[2]=v+2);const{a:x,b,c:_}=Lm;if(x.fromBufferAttribute(l,h[0]),b.fromBufferAttribute(l,h[1]),_.fromBufferAttribute(l,h[2]),Lm.getNormal(kb),p[0]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,p[1]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,p[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let T=0;T&lt;3;T++){const w=(T+1)%3,E=p[T],R=p[w],N=Lm[f[T]],A=Lm[f[w]],D=`${E}_${R}`,C=`${R}_${E}`;C in m&amp;&amp;m[C]?(kb.dot(m[C].normal)&lt;=s&amp;&amp;(g.push(N.x,N.y,N.z),g.push(A.x,A.y,A.z)),m[C]=null):D in m||(m[D]={index0:h[T],index1:h[w],normal:kb.clone()})}}for(const v in m)if(m[v]){const{index0:x,index1:b}=m[v];Im.fromBufferAttribute(l,x),Pm.fromBufferAttribute(l,b),g.push(Im.x,Im.y,Im.z),g.push(Pm.x,Pm.y,Pm.z)}this.setAttribute(&quot;position&quot;,new ct(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Qs{constructor(){this.type=&quot;Curve&quot;,this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn(&quot;THREE.Curve: .getPoint() not implemented.&quot;)}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i&lt;=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i&lt;=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&amp;&amp;this.cacheArcLengths.length===e+1&amp;&amp;!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o&lt;=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let l=0,u=s-1,h;for(;l&lt;=u;)if(r=Math.floor(l+(u-l)/2),h=i[r]-o,h&lt;0)l=r+1;else if(h&gt;0)u=r-1;else{u=r;break}if(r=u,i[r]===o)return r/(s-1);const f=i[r],m=i[r+1]-f,g=(o-f)/m;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r&lt;0&amp;&amp;(r=0),s&gt;1&amp;&amp;(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=t||(o.isVector2?new Oe:new Y);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new Y,r=[],s=[],o=[],l=new Y,u=new yt;for(let g=0;g&lt;=e;g++){const v=g/e;r[g]=this.getTangentAt(v,new Y)}s[0]=new Y,o[0]=new Y;let h=Number.MAX_VALUE;const f=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);f&lt;=h&amp;&amp;(h=f,i.set(1,0,0)),p&lt;=h&amp;&amp;(h=p,i.set(0,1,0)),m&lt;=h&amp;&amp;i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let g=1;g&lt;=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),l.crossVectors(r[g-1],r[g]),l.length()&gt;Number.EPSILON){l.normalize();const v=Math.acos(Vt(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(u.makeRotationAxis(l,v))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(Vt(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(l.crossVectors(s[0],s[e]))&gt;0&amp;&amp;(g=-g);for(let v=1;v&lt;=e;v++)s[v].applyMatrix4(u.makeRotationAxis(r[v],g*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:&quot;Curve&quot;,generator:&quot;Curve.toJSON&quot;}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ey extends Qs{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type=&quot;EllipseCurve&quot;,this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new Oe){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)&lt;Number.EPSILON;for(;s&lt;0;)s+=r;for(;s&gt;r;)s-=r;s&lt;Number.EPSILON&amp;&amp;(o?s=0:s=r),this.aClockwise===!0&amp;&amp;!o&amp;&amp;(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=u-this.aX,g=h-this.aY;u=m*f-g*p+this.aX,h=m*p+g*f+this.aY}return i.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class tN extends Ey{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type=&quot;ArcCurve&quot;}}function gw(){let n=0,e=0,t=0,i=0;function r(s,o,l,u){n=s,e=l,t=-3*s+3*o-2*l-u,i=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,h){r(o,l,h*(l-s),h*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,h,f,p){let m=(o-s)/h-(l-s)/(h+f)+(l-o)/f,g=(l-o)/f-(u-o)/(f+p)+(u-l)/p;m*=f,g*=f,r(o,l,m,g)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+i*l}}}const Um=new Y,Fb=new gw,zb=new gw,Bb=new gw;class nN extends Qs{constructor(e=[],t=!1,i=&quot;centripetal&quot;,r=.5){super(),this.isCatmullRomCurve3=!0,this.type=&quot;CatmullRomCurve3&quot;,this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new Y){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),u=o-l;this.closed?l+=l&gt;0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&amp;&amp;l===s-1&amp;&amp;(l=s-2,u=1);let h,f;this.closed||l&gt;0?h=r[(l-1)%s]:(Um.subVectors(r[0],r[1]).add(r[0]),h=Um);const p=r[l%s],m=r[(l+1)%s];if(this.closed||l+2&lt;s?f=r[(l+2)%s]:(Um.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Um),this.curveType===&quot;centripetal&quot;||this.curveType===&quot;chordal&quot;){const g=this.curveType===&quot;chordal&quot;?.5:.25;let v=Math.pow(h.distanceToSquared(p),g),x=Math.pow(p.distanceToSquared(m),g),b=Math.pow(m.distanceToSquared(f),g);x&lt;1e-4&amp;&amp;(x=1),v&lt;1e-4&amp;&amp;(v=x),b&lt;1e-4&amp;&amp;(b=x),Fb.initNonuniformCatmullRom(h.x,p.x,m.x,f.x,v,x,b),zb.initNonuniformCatmullRom(h.y,p.y,m.y,f.y,v,x,b),Bb.initNonuniformCatmullRom(h.z,p.z,m.z,f.z,v,x,b)}else this.curveType===&quot;catmullrom&quot;&amp;&amp;(Fb.initCatmullRom(h.x,p.x,m.x,f.x,this.tension),zb.initCatmullRom(h.y,p.y,m.y,f.y,this.tension),Bb.initCatmullRom(h.z,p.z,m.z,f.z,this.tension));return i.set(Fb.calc(u),zb.calc(u),Bb.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t&lt;i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(new Y().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function CA(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,l=n*n,u=n*l;return(2*t-2*i+s+o)*u+(-3*t+3*i-2*s-o)*l+s*n+t}function Cz(n,e){const t=1-n;return t*t*e}function Rz(n,e){return 2*(1-n)*n*e}function Oz(n,e){return n*n*e}function cd(n,e,t,i){return Cz(n,e)+Rz(n,t)+Oz(n,i)}function Dz(n,e){const t=1-n;return t*t*t*e}function Nz(n,e){const t=1-n;return 3*t*t*n*e}function Iz(n,e){return 3*(1-n)*n*n*e}function Pz(n,e){return n*n*n*e}function ud(n,e,t,i,r){return Dz(n,e)+Nz(n,t)+Iz(n,i)+Pz(n,r)}class yw extends Qs{constructor(e=new Oe,t=new Oe,i=new Oe,r=new Oe){super(),this.isCubicBezierCurve=!0,this.type=&quot;CubicBezierCurve&quot;,this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Oe){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(ud(e,r.x,s.x,o.x,l.x),ud(e,r.y,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iN extends Qs{constructor(e=new Y,t=new Y,i=new Y,r=new Y){super(),this.isCubicBezierCurve3=!0,this.type=&quot;CubicBezierCurve3&quot;,this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Y){const i=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return i.set(ud(e,r.x,s.x,o.x,l.x),ud(e,r.y,s.y,o.y,l.y),ud(e,r.z,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class _w extends Qs{constructor(e=new Oe,t=new Oe){super(),this.isLineCurve=!0,this.type=&quot;LineCurve&quot;,this.v1=e,this.v2=t}getPoint(e,t=new Oe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Oe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rN extends Qs{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type=&quot;LineCurve3&quot;,this.v1=e,this.v2=t}getPoint(e,t=new Y){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vw extends Qs{constructor(e=new Oe,t=new Oe,i=new Oe){super(),this.isQuadraticBezierCurve=!0,this.type=&quot;QuadraticBezierCurve&quot;,this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Oe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(cd(e,r.x,s.x,o.x),cd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bw extends Qs{constructor(e=new Y,t=new Y,i=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type=&quot;QuadraticBezierCurve3&quot;,this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Y){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(cd(e,r.x,s.x,o.x),cd(e,r.y,s.y,o.y),cd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xw extends Qs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type=&quot;SplineCurve&quot;,this.points=e}getPoint(e,t=new Oe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,u=r[o===0?o:o-1],h=r[o],f=r[o&gt;r.length-2?r.length-1:o+1],p=r[o&gt;r.length-3?r.length-1:o+2];return i.set(CA(l,u.x,h.x,f.x,p.x),CA(l,u.y,h.y,f.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t&lt;i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t&lt;i;t++){const r=e.points[t];this.points.push(new Oe().fromArray(r))}return this}}var A0=Object.freeze({__proto__:null,ArcCurve:tN,CatmullRomCurve3:nN,CubicBezierCurve:yw,CubicBezierCurve3:iN,EllipseCurve:Ey,LineCurve:_w,LineCurve3:rN,QuadraticBezierCurve:vw,QuadraticBezierCurve3:bw,SplineCurve:xw});class sN extends Qs{constructor(){super(),this.type=&quot;CurvePath&quot;,this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?&quot;LineCurve&quot;:&quot;LineCurve3&quot;;this.curves.push(new A0[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s&lt;r.length;){if(r[s]&gt;=i){const o=r[s]-i,l=this.curves[s],u=l.getLength(),h=u===0?0:1-o/u;return l.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&amp;&amp;this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i&lt;r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i&lt;=e;i++)t.push(this.getPoint(i/e));return this.autoClose&amp;&amp;t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r&lt;s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(l);for(let h=0;h&lt;u.length;h++){const f=u[h];i&amp;&amp;i.equals(f)||(t.push(f),i=f)}}return this.autoClose&amp;&amp;t.length&gt;1&amp;&amp;!t[t.length-1].equals(t[0])&amp;&amp;t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t&lt;i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t&lt;i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t&lt;i;t++){const r=e.curves[t];this.curves.push(new A0[r.type]().fromJSON(r))}return this}}class C0 extends sN{constructor(e){super(),this.type=&quot;Path&quot;,this.currentPoint=new Oe,e&amp;&amp;this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t&lt;i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new _w(this.currentPoint.clone(),new Oe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new vw(this.currentPoint.clone(),new Oe(e,t),new Oe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const l=new yw(this.currentPoint.clone(),new Oe(e,t),new Oe(i,r),new Oe(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new xw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,l,u){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,i,r,s,o,l,u),this}absellipse(e,t,i,r,s,o,l,u){const h=new Ey(e,t,i,r,s,o,l,u);if(this.curves.length&gt;0){const p=h.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class xc extends C0{constructor(e){super(e),this.uuid=Jr(),this.type=&quot;Shape&quot;,this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i&lt;r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t&lt;i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t&lt;i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t&lt;i;t++){const r=e.holes[t];this.holes.push(new C0().fromJSON(r))}return this}}function Lz(n,e,t=2){const i=e&amp;&amp;e.length,r=i?e[0]*t:n.length;let s=oN(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,h;if(i&amp;&amp;(s=Bz(n,e,s,t)),n.length&gt;80*t){l=1/0,u=1/0;let f=-1/0,p=-1/0;for(let m=t;m&lt;r;m+=t){const g=n[m],v=n[m+1];g&lt;l&amp;&amp;(l=g),v&lt;u&amp;&amp;(u=v),g&gt;f&amp;&amp;(f=g),v&gt;p&amp;&amp;(p=v)}h=Math.max(f-l,p-u),h=h!==0?32767/h:0}return wd(s,o,t,l,u,h,0),o}function oN(n,e,t,i,r){let s;if(r===Zz(n,e,t,i)&gt;0)for(let o=e;o&lt;t;o+=i)s=RA(o/i|0,n[o],n[o+1],s);else for(let o=t-i;o&gt;=e;o-=i)s=RA(o/i|0,n[o],n[o+1],s);return s&amp;&amp;fh(s,s.next)&amp;&amp;(Td(s),s=s.next),s}function Ac(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&amp;&amp;(fh(t,t.next)||ri(t.prev,t,t.next)===0)){if(Td(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function wd(n,e,t,i,r,s,o){if(!n)return;!o&amp;&amp;s&amp;&amp;Wz(n,i,r,s);let l=n;for(;n.prev!==n.next;){const u=n.prev,h=n.next;if(s?kz(n,i,r,s):Uz(n)){e.push(u.i,n.i,h.i),Td(n),n=h.next,l=h.next;continue}if(n=h,n===l){o?o===1?(n=Fz(Ac(n),e),wd(n,e,t,i,r,s,2)):o===2&amp;&amp;zz(n,e,t,i,r,s):wd(Ac(n),e,t,i,r,s,1);break}}}function Uz(n){const e=n.prev,t=n,i=n.next;if(ri(e,t,i)&gt;=0)return!1;const r=e.x,s=t.x,o=i.x,l=e.y,u=t.y,h=i.y,f=Math.min(r,s,o),p=Math.min(l,u,h),m=Math.max(r,s,o),g=Math.max(l,u,h);let v=i.next;for(;v!==e;){if(v.x&gt;=f&amp;&amp;v.x&lt;=m&amp;&amp;v.y&gt;=p&amp;&amp;v.y&lt;=g&amp;&amp;Zf(r,l,s,u,o,h,v.x,v.y)&amp;&amp;ri(v.prev,v,v.next)&gt;=0)return!1;v=v.next}return!0}function kz(n,e,t,i){const r=n.prev,s=n,o=n.next;if(ri(r,s,o)&gt;=0)return!1;const l=r.x,u=s.x,h=o.x,f=r.y,p=s.y,m=o.y,g=Math.min(l,u,h),v=Math.min(f,p,m),x=Math.max(l,u,h),b=Math.max(f,p,m),_=oS(g,v,e,t,i),T=oS(x,b,e,t,i);let w=n.prevZ,E=n.nextZ;for(;w&amp;&amp;w.z&gt;=_&amp;&amp;E&amp;&amp;E.z&lt;=T;){if(w.x&gt;=g&amp;&amp;w.x&lt;=x&amp;&amp;w.y&gt;=v&amp;&amp;w.y&lt;=b&amp;&amp;w!==r&amp;&amp;w!==o&amp;&amp;Zf(l,f,u,p,h,m,w.x,w.y)&amp;&amp;ri(w.prev,w,w.next)&gt;=0||(w=w.prevZ,E.x&gt;=g&amp;&amp;E.x&lt;=x&amp;&amp;E.y&gt;=v&amp;&amp;E.y&lt;=b&amp;&amp;E!==r&amp;&amp;E!==o&amp;&amp;Zf(l,f,u,p,h,m,E.x,E.y)&amp;&amp;ri(E.prev,E,E.next)&gt;=0))return!1;E=E.nextZ}for(;w&amp;&amp;w.z&gt;=_;){if(w.x&gt;=g&amp;&amp;w.x&lt;=x&amp;&amp;w.y&gt;=v&amp;&amp;w.y&lt;=b&amp;&amp;w!==r&amp;&amp;w!==o&amp;&amp;Zf(l,f,u,p,h,m,w.x,w.y)&amp;&amp;ri(w.prev,w,w.next)&gt;=0)return!1;w=w.prevZ}for(;E&amp;&amp;E.z&lt;=T;){if(E.x&gt;=g&amp;&amp;E.x&lt;=x&amp;&amp;E.y&gt;=v&amp;&amp;E.y&lt;=b&amp;&amp;E!==r&amp;&amp;E!==o&amp;&amp;Zf(l,f,u,p,h,m,E.x,E.y)&amp;&amp;ri(E.prev,E,E.next)&gt;=0)return!1;E=E.nextZ}return!0}function Fz(n,e){let t=n;do{const i=t.prev,r=t.next.next;!fh(i,r)&amp;&amp;lN(i,t,t.next,r)&amp;&amp;Ed(i,r)&amp;&amp;Ed(r,i)&amp;&amp;(e.push(i.i,t.i,r.i),Td(t),Td(t.next),t=n=r),t=t.next}while(t!==n);return Ac(t)}function zz(n,e,t,i,r,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&amp;&amp;Yz(o,l)){let u=cN(o,l);o=Ac(o,o.next),u=Ac(u,u.next),wd(o,e,t,i,r,s,0),wd(u,e,t,i,r,s,0);return}l=l.next}o=o.next}while(o!==n)}function Bz(n,e,t,i){const r=[];for(let s=0,o=e.length;s&lt;o;s++){const l=e[s]*i,u=s&lt;o-1?e[s+1]*i:n.length,h=oN(n,l,u,i,!1);h===h.next&amp;&amp;(h.steiner=!0),r.push(qz(h))}r.sort(Hz);for(let s=0;s&lt;r.length;s++)t=Vz(r[s],t);return t}function Hz(n,e){let t=n.x-e.x;if(t===0&amp;&amp;(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function Vz(n,e){const t=Gz(n,e);if(!t)return e;const i=cN(t,n);return Ac(i,i.next),Ac(t,t.next)}function Gz(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;if(fh(n,t))return t;do{if(fh(n,t.next))return t.next;if(r&lt;=t.y&amp;&amp;r&gt;=t.next.y&amp;&amp;t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p&lt;=i&amp;&amp;p&gt;s&amp;&amp;(s=p,o=t.x&lt;t.next.x?t:t.next,p===i))return o}t=t.next}while(t!==e);if(!o)return null;const l=o,u=o.x,h=o.y;let f=1/0;t=o;do{if(i&gt;=t.x&amp;&amp;t.x&gt;=u&amp;&amp;i!==t.x&amp;&amp;aN(r&lt;h?i:s,r,u,h,r&lt;h?s:i,r,t.x,t.y)){const p=Math.abs(r-t.y)/(i-t.x);Ed(t,n)&amp;&amp;(p&lt;f||p===f&amp;&amp;(t.x&gt;o.x||t.x===o.x&amp;&amp;jz(o,t)))&amp;&amp;(o=t,f=p)}t=t.next}while(t!==l);return o}function jz(n,e){return ri(n.prev,n,e.prev)&lt;0&amp;&amp;ri(e.next,n,n.next)&lt;0}function Wz(n,e,t,i){let r=n;do r.z===0&amp;&amp;(r.z=oS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Xz(r)}function Xz(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let o=i,l=0;for(let h=0;h&lt;t&amp;&amp;(l++,o=o.nextZ,!!o);h++);let u=t;for(;l&gt;0||u&gt;0&amp;&amp;o;)l!==0&amp;&amp;(u===0||!o||i.z&lt;=o.z)?(r=i,i=i.nextZ,l--):(r=o,o=o.nextZ,u--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=o}s.nextZ=null,t*=2}while(e&gt;1);return n}function oS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n&lt;&lt;8)&amp;16711935,n=(n|n&lt;&lt;4)&amp;252645135,n=(n|n&lt;&lt;2)&amp;858993459,n=(n|n&lt;&lt;1)&amp;1431655765,e=(e|e&lt;&lt;8)&amp;16711935,e=(e|e&lt;&lt;4)&amp;252645135,e=(e|e&lt;&lt;2)&amp;858993459,e=(e|e&lt;&lt;1)&amp;1431655765,n|e&lt;&lt;1}function qz(n){let e=n,t=n;do(e.x&lt;t.x||e.x===t.x&amp;&amp;e.y&lt;t.y)&amp;&amp;(t=e),e=e.next;while(e!==n);return t}function aN(n,e,t,i,r,s,o,l){return(r-o)*(e-l)&gt;=(n-o)*(s-l)&amp;&amp;(n-o)*(i-l)&gt;=(t-o)*(e-l)&amp;&amp;(t-o)*(s-l)&gt;=(r-o)*(i-l)}function Zf(n,e,t,i,r,s,o,l){return!(n===o&amp;&amp;e===l)&amp;&amp;aN(n,e,t,i,r,s,o,l)}function Yz(n,e){return n.next.i!==e.i&amp;&amp;n.prev.i!==e.i&amp;&amp;!Kz(n,e)&amp;&amp;(Ed(n,e)&amp;&amp;Ed(e,n)&amp;&amp;$z(n,e)&amp;&amp;(ri(n.prev,n,e.prev)||ri(n,e.prev,e))||fh(n,e)&amp;&amp;ri(n.prev,n,n.next)&gt;0&amp;&amp;ri(e.prev,e,e.next)&gt;0)}function ri(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function fh(n,e){return n.x===e.x&amp;&amp;n.y===e.y}function lN(n,e,t,i){const r=Fm(ri(n,e,t)),s=Fm(ri(n,e,i)),o=Fm(ri(t,i,n)),l=Fm(ri(t,i,e));return!!(r!==s&amp;&amp;o!==l||r===0&amp;&amp;km(n,t,e)||s===0&amp;&amp;km(n,i,e)||o===0&amp;&amp;km(t,n,i)||l===0&amp;&amp;km(t,e,i))}function km(n,e,t){return e.x&lt;=Math.max(n.x,t.x)&amp;&amp;e.x&gt;=Math.min(n.x,t.x)&amp;&amp;e.y&lt;=Math.max(n.y,t.y)&amp;&amp;e.y&gt;=Math.min(n.y,t.y)}function Fm(n){return n&gt;0?1:n&lt;0?-1:0}function Kz(n,e){let t=n;do{if(t.i!==n.i&amp;&amp;t.next.i!==n.i&amp;&amp;t.i!==e.i&amp;&amp;t.next.i!==e.i&amp;&amp;lN(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ed(n,e){return ri(n.prev,n,n.next)&lt;0?ri(n,e,n.next)&gt;=0&amp;&amp;ri(n,n.prev,e)&gt;=0:ri(n,e,n.prev)&lt;0||ri(n,n.next,e)&lt;0}function $z(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y&gt;s!=t.next.y&gt;s&amp;&amp;t.next.y!==t.y&amp;&amp;r&lt;(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&amp;&amp;(i=!i),t=t.next;while(t!==n);return i}function cN(n,e){const t=aS(n.i,n.x,n.y),i=aS(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function RA(n,e,t,i){const r=aS(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Td(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&amp;&amp;(n.prevZ.nextZ=n.nextZ),n.nextZ&amp;&amp;(n.nextZ.prevZ=n.prevZ)}function aS(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Zz(n,e,t,i){let r=0;for(let s=e,o=t-i;s&lt;t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Jz{static triangulate(e,t,i=2){return Lz(e,t,i)}}class qs{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s&lt;t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return qs.area(e)&lt;0}static triangulateShape(e,t){const i=[],r=[],s=[];OA(e),DA(i,e);let o=e.length;t.forEach(OA);for(let u=0;u&lt;t.length;u++)r.push(o),o+=t[u].length,DA(i,t[u]);const l=Jz.triangulate(i,r);for(let u=0;u&lt;l.length;u+=3)s.push(l.slice(u,u+3));return s}}function OA(n){const e=n.length;e&gt;2&amp;&amp;n[e-1].equals(n[0])&amp;&amp;n.pop()}function DA(n,e){for(let t=0;t&lt;e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ty extends Lt{constructor(e=new xc([new Oe(.5,.5),new Oe(-.5,.5),new Oe(-.5,-.5),new Oe(.5,-.5)]),t={}){super(),this.type=&quot;ExtrudeGeometry&quot;,this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,u=e.length;l&lt;u;l++){const h=e[l];o(h)}this.setAttribute(&quot;position&quot;,new ct(r,3)),this.setAttribute(&quot;uv&quot;,new ct(s,2)),this.computeVertexNormals();function o(l){const u=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:g-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,b=t.bevelSegments!==void 0?t.bevelSegments:3;const _=t.extrudePath,T=t.UVGenerator!==void 0?t.UVGenerator:Qz;let w,E=!1,R,N,A,D;_&amp;&amp;(w=_.getSpacedPoints(f),E=!0,m=!1,R=_.computeFrenetFrames(f,!1),N=new Y,A=new Y,D=new Y),m||(b=0,g=0,v=0,x=0);const C=l.extractPoints(h);let O=C.shape;const L=C.holes;if(!qs.isClockWise(O)){O=O.reverse();for(let Q=0,Ve=L.length;Q&lt;Ve;Q++){const Le=L[Q];qs.isClockWise(Le)&amp;&amp;(L[Q]=Le.reverse())}}function Z(Q){const Le=10000000000000001e-36;let Fe=Q[0];for(let Ne=1;Ne&lt;=Q.length;Ne++){const mt=Ne%Q.length,ze=Q[mt],te=ze.x-Fe.x,H=ze.y-Fe.y,pe=te*te+H*H,Ce=Math.max(Math.abs(ze.x),Math.abs(ze.y),Math.abs(Fe.x),Math.abs(Fe.y)),Ue=Le*Ce*Ce;if(pe&lt;=Ue){Q.splice(mt,1),Ne--;continue}Fe=ze}}Z(O),L.forEach(Z);const z=L.length,K=O;for(let Q=0;Q&lt;z;Q++){const Ve=L[Q];O=O.concat(Ve)}function I(Q,Ve,Le){return Ve||console.error(&quot;THREE.ExtrudeGeometry: vec does not exist&quot;),Q.clone().addScaledVector(Ve,Le)}const j=O.length;function G(Q,Ve,Le){let Fe,Ne,mt;const ze=Q.x-Ve.x,te=Q.y-Ve.y,H=Le.x-Q.x,pe=Le.y-Q.y,Ce=ze*ze+te*te,Ue=ze*pe-te*H;if(Math.abs(Ue)&gt;Number.EPSILON){const Me=Math.sqrt(Ce),Ze=Math.sqrt(H*H+pe*pe),qe=Ve.x-te/Me,ut=Ve.y+ze/Me,Ct=Le.x-pe/Ze,je=Le.y+H/Ze,ht=((Ct-qe)*pe-(je-ut)*H)/(ze*pe-te*H);Fe=qe+ze*ht-Q.x,Ne=ut+te*ht-Q.y;const St=Fe*Fe+Ne*Ne;if(St&lt;=2)return new Oe(Fe,Ne);mt=Math.sqrt(St/2)}else{let Me=!1;ze&gt;Number.EPSILON?H&gt;Number.EPSILON&amp;&amp;(Me=!0):ze&lt;-Number.EPSILON?H&lt;-Number.EPSILON&amp;&amp;(Me=!0):Math.sign(te)===Math.sign(pe)&amp;&amp;(Me=!0),Me?(Fe=-te,Ne=ze,mt=Math.sqrt(Ce)):(Fe=ze,Ne=te,mt=Math.sqrt(Ce/2))}return new Oe(Fe/mt,Ne/mt)}const ee=[];for(let Q=0,Ve=K.length,Le=Ve-1,Fe=Q+1;Q&lt;Ve;Q++,Le++,Fe++)Le===Ve&amp;&amp;(Le=0),Fe===Ve&amp;&amp;(Fe=0),ee[Q]=G(K[Q],K[Le],K[Fe]);const F=[];let ne,le=ee.concat();for(let Q=0,Ve=z;Q&lt;Ve;Q++){const Le=L[Q];ne=[];for(let Fe=0,Ne=Le.length,mt=Ne-1,ze=Fe+1;Fe&lt;Ne;Fe++,mt++,ze++)mt===Ne&amp;&amp;(mt=0),ze===Ne&amp;&amp;(ze=0),ne[Fe]=G(Le[Fe],Le[mt],Le[ze]);F.push(ne),le=le.concat(ne)}let ce;if(b===0)ce=qs.triangulateShape(K,L);else{const Q=[],Ve=[];for(let Le=0;Le&lt;b;Le++){const Fe=Le/b,Ne=g*Math.cos(Fe*Math.PI/2),mt=v*Math.sin(Fe*Math.PI/2)+x;for(let ze=0,te=K.length;ze&lt;te;ze++){const H=I(K[ze],ee[ze],mt);He(H.x,H.y,-Ne),Fe===0&amp;&amp;Q.push(H)}for(let ze=0,te=z;ze&lt;te;ze++){const H=L[ze];ne=F[ze];const pe=[];for(let Ce=0,Ue=H.length;Ce&lt;Ue;Ce++){const Me=I(H[Ce],ne[Ce],mt);He(Me.x,Me.y,-Ne),Fe===0&amp;&amp;pe.push(Me)}Fe===0&amp;&amp;Ve.push(pe)}}ce=qs.triangulateShape(Q,Ve)}const ie=ce.length,oe=v+x;for(let Q=0;Q&lt;j;Q++){const Ve=m?I(O[Q],le[Q],oe):O[Q];E?(A.copy(R.normals[0]).multiplyScalar(Ve.x),N.copy(R.binormals[0]).multiplyScalar(Ve.y),D.copy(w[0]).add(A).add(N),He(D.x,D.y,D.z)):He(Ve.x,Ve.y,0)}for(let Q=1;Q&lt;=f;Q++)for(let Ve=0;Ve&lt;j;Ve++){const Le=m?I(O[Ve],le[Ve],oe):O[Ve];E?(A.copy(R.normals[Q]).multiplyScalar(Le.x),N.copy(R.binormals[Q]).multiplyScalar(Le.y),D.copy(w[Q]).add(A).add(N),He(D.x,D.y,D.z)):He(Le.x,Le.y,p/f*Q)}for(let Q=b-1;Q&gt;=0;Q--){const Ve=Q/b,Le=g*Math.cos(Ve*Math.PI/2),Fe=v*Math.sin(Ve*Math.PI/2)+x;for(let Ne=0,mt=K.length;Ne&lt;mt;Ne++){const ze=I(K[Ne],ee[Ne],Fe);He(ze.x,ze.y,p+Le)}for(let Ne=0,mt=L.length;Ne&lt;mt;Ne++){const ze=L[Ne];ne=F[Ne];for(let te=0,H=ze.length;te&lt;H;te++){const pe=I(ze[te],ne[te],Fe);E?He(pe.x,pe.y+w[f-1].y,w[f-1].x+Le):He(pe.x,pe.y,p+Le)}}}ae(),ue();function ae(){const Q=r.length/3;if(m){let Ve=0,Le=j*Ve;for(let Fe=0;Fe&lt;ie;Fe++){const Ne=ce[Fe];Xe(Ne[2]+Le,Ne[1]+Le,Ne[0]+Le)}Ve=f+b*2,Le=j*Ve;for(let Fe=0;Fe&lt;ie;Fe++){const Ne=ce[Fe];Xe(Ne[0]+Le,Ne[1]+Le,Ne[2]+Le)}}else{for(let Ve=0;Ve&lt;ie;Ve++){const Le=ce[Ve];Xe(Le[2],Le[1],Le[0])}for(let Ve=0;Ve&lt;ie;Ve++){const Le=ce[Ve];Xe(Le[0]+j*f,Le[1]+j*f,Le[2]+j*f)}}i.addGroup(Q,r.length/3-Q,0)}function ue(){const Q=r.length/3;let Ve=0;ve(K,Ve),Ve+=K.length;for(let Le=0,Fe=L.length;Le&lt;Fe;Le++){const Ne=L[Le];ve(Ne,Ve),Ve+=Ne.length}i.addGroup(Q,r.length/3-Q,1)}function ve(Q,Ve){let Le=Q.length;for(;--Le&gt;=0;){const Fe=Le;let Ne=Le-1;Ne&lt;0&amp;&amp;(Ne=Q.length-1);for(let mt=0,ze=f+b*2;mt&lt;ze;mt++){const te=j*mt,H=j*(mt+1),pe=Ve+Fe+te,Ce=Ve+Ne+te,Ue=Ve+Ne+H,Me=Ve+Fe+H;lt(pe,Ce,Ue,Me)}}}function He(Q,Ve,Le){u.push(Q),u.push(Ve),u.push(Le)}function Xe(Q,Ve,Le){We(Q),We(Ve),We(Le);const Fe=r.length/3,Ne=T.generateTopUV(i,r,Fe-3,Fe-2,Fe-1);Ye(Ne[0]),Ye(Ne[1]),Ye(Ne[2])}function lt(Q,Ve,Le,Fe){We(Q),We(Ve),We(Fe),We(Ve),We(Le),We(Fe);const Ne=r.length/3,mt=T.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);Ye(mt[0]),Ye(mt[1]),Ye(mt[3]),Ye(mt[1]),Ye(mt[2]),Ye(mt[3])}function We(Q){r.push(u[Q*3+0]),r.push(u[Q*3+1]),r.push(u[Q*3+2])}function Ye(Q){s.push(Q.x),s.push(Q.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return eB(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s&lt;o;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&amp;&amp;(e.options.extrudePath=new A0[r.type]().fromJSON(r)),new Ty(i,e.options)}}const Qz={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],l=e[i*3],u=e[i*3+1],h=e[r*3],f=e[r*3+1];return[new Oe(s,o),new Oe(l,u),new Oe(h,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],l=e[t*3+1],u=e[t*3+2],h=e[i*3],f=e[i*3+1],p=e[i*3+2],m=e[r*3],g=e[r*3+1],v=e[r*3+2],x=e[s*3],b=e[s*3+1],_=e[s*3+2];return Math.abs(l-f)&lt;Math.abs(o-h)?[new Oe(o,1-u),new Oe(h,1-p),new Oe(m,1-v),new Oe(x,1-_)]:[new Oe(l,1-u),new Oe(f,1-p),new Oe(g,1-v),new Oe(b,1-_)]}};function eB(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i&lt;r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&amp;&amp;(t.options.extrudePath=e.extrudePath.toJSON()),t}class My extends Sl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type=&quot;IcosahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new My(e.radius,e.detail)}}class Ay extends Lt{constructor(e=[new Oe(0,-.5),new Oe(.5,0),new Oe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type=&quot;LatheGeometry&quot;,this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Vt(r,0,Math.PI*2);const s=[],o=[],l=[],u=[],h=[],f=1/t,p=new Y,m=new Oe,g=new Y,v=new Y,x=new Y;let b=0,_=0;for(let T=0;T&lt;=e.length-1;T++)switch(T){case 0:b=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,g.x=_*1,g.y=-b,g.z=_*0,x.copy(g),g.normalize(),u.push(g.x,g.y,g.z);break;case e.length-1:u.push(x.x,x.y,x.z);break;default:b=e[T+1].x-e[T].x,_=e[T+1].y-e[T].y,g.x=_*1,g.y=-b,g.z=_*0,v.copy(g),g.x+=x.x,g.y+=x.y,g.z+=x.z,g.normalize(),u.push(g.x,g.y,g.z),x.copy(v)}for(let T=0;T&lt;=t;T++){const w=i+T*f*r,E=Math.sin(w),R=Math.cos(w);for(let N=0;N&lt;=e.length-1;N++){p.x=e[N].x*E,p.y=e[N].y,p.z=e[N].x*R,o.push(p.x,p.y,p.z),m.x=T/t,m.y=N/(e.length-1),l.push(m.x,m.y);const A=u[3*N+0]*E,D=u[3*N+1],C=u[3*N+0]*R;h.push(A,D,C)}}for(let T=0;T&lt;t;T++)for(let w=0;w&lt;e.length-1;w++){const E=w+T*e.length,R=E,N=E+e.length,A=E+e.length+1,D=E+1;s.push(R,N,D),s.push(A,D,N)}this.setIndex(s),this.setAttribute(&quot;position&quot;,new ct(o,3)),this.setAttribute(&quot;uv&quot;,new ct(l,2)),this.setAttribute(&quot;normal&quot;,new ct(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ay(e.points,e.segments,e.phiStart,e.phiLength)}}class $d extends Sl{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type=&quot;OctahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new $d(e.radius,e.detail)}}class Ah extends Lt{constructor(e=1,t=1,i=1,r=1){super(),this.type=&quot;PlaneGeometry&quot;,this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(i),u=Math.floor(r),h=l+1,f=u+1,p=e/l,m=t/u,g=[],v=[],x=[],b=[];for(let _=0;_&lt;f;_++){const T=_*m-o;for(let w=0;w&lt;h;w++){const E=w*p-s;v.push(E,-T,0),x.push(0,0,1),b.push(w/l),b.push(1-_/u)}}for(let _=0;_&lt;u;_++)for(let T=0;T&lt;l;T++){const w=T+h*_,E=T+h*(_+1),R=T+1+h*(_+1),N=T+1+h*_;g.push(w,E,N),g.push(E,R,N)}this.setIndex(g),this.setAttribute(&quot;position&quot;,new ct(v,3)),this.setAttribute(&quot;normal&quot;,new ct(x,3)),this.setAttribute(&quot;uv&quot;,new ct(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ah(e.width,e.height,e.widthSegments,e.heightSegments)}}class Cy extends Lt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type=&quot;RingGeometry&quot;,this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const l=[],u=[],h=[],f=[];let p=e;const m=(t-e)/r,g=new Y,v=new Oe;for(let x=0;x&lt;=r;x++){for(let b=0;b&lt;=i;b++){const _=s+b/i*o;g.x=p*Math.cos(_),g.y=p*Math.sin(_),u.push(g.x,g.y,g.z),h.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,f.push(v.x,v.y)}p+=m}for(let x=0;x&lt;r;x++){const b=x*(i+1);for(let _=0;_&lt;i;_++){const T=_+b,w=T,E=T+i+1,R=T+i+2,N=T+1;l.push(w,E,N),l.push(E,R,N)}}this.setIndex(l),this.setAttribute(&quot;position&quot;,new ct(u,3)),this.setAttribute(&quot;normal&quot;,new ct(h,3)),this.setAttribute(&quot;uv&quot;,new ct(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ry extends Lt{constructor(e=new xc([new Oe(0,.5),new Oe(-.5,-.5),new Oe(.5,-.5)]),t=12){super(),this.type=&quot;ShapeGeometry&quot;,this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let l=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f&lt;e.length;f++)h(e[f]),this.addGroup(l,u,f),l+=u,u=0;this.setIndex(i),this.setAttribute(&quot;position&quot;,new ct(r,3)),this.setAttribute(&quot;normal&quot;,new ct(s,3)),this.setAttribute(&quot;uv&quot;,new ct(o,2));function h(f){const p=r.length/3,m=f.extractPoints(t);let g=m.shape;const v=m.holes;qs.isClockWise(g)===!1&amp;&amp;(g=g.reverse());for(let b=0,_=v.length;b&lt;_;b++){const T=v[b];qs.isClockWise(T)===!0&amp;&amp;(v[b]=T.reverse())}const x=qs.triangulateShape(g,v);for(let b=0,_=v.length;b&lt;_;b++){const T=v[b];g=g.concat(T)}for(let b=0,_=g.length;b&lt;_;b++){const T=g[b];r.push(T.x,T.y,0),s.push(0,0,1),o.push(T.x,T.y)}for(let b=0,_=x.length;b&lt;_;b++){const T=x[b],w=T[0]+p,E=T[1]+p,R=T[2]+p;i.push(w,E,R),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return tB(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r&lt;s;r++){const o=t[e.shapes[r]];i.push(o)}return new Ry(i,e.curveSegments)}}function tB(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t&lt;i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Ch extends Lt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type=&quot;SphereGeometry&quot;,this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(o+l,Math.PI);let h=0;const f=[],p=new Y,m=new Y,g=[],v=[],x=[],b=[];for(let _=0;_&lt;=i;_++){const T=[],w=_/i;let E=0;_===0&amp;&amp;o===0?E=.5/t:_===i&amp;&amp;u===Math.PI&amp;&amp;(E=-.5/t);for(let R=0;R&lt;=t;R++){const N=R/t;p.x=-e*Math.cos(r+N*s)*Math.sin(o+w*l),p.y=e*Math.cos(o+w*l),p.z=e*Math.sin(r+N*s)*Math.sin(o+w*l),v.push(p.x,p.y,p.z),m.copy(p).normalize(),x.push(m.x,m.y,m.z),b.push(N+E,1-w),T.push(h++)}f.push(T)}for(let _=0;_&lt;i;_++)for(let T=0;T&lt;t;T++){const w=f[_][T+1],E=f[_][T],R=f[_+1][T],N=f[_+1][T+1];(_!==0||o&gt;0)&amp;&amp;g.push(w,E,N),(_!==i-1||u&lt;Math.PI)&amp;&amp;g.push(E,R,N)}this.setIndex(g),this.setAttribute(&quot;position&quot;,new ct(v,3)),this.setAttribute(&quot;normal&quot;,new ct(x,3)),this.setAttribute(&quot;uv&quot;,new ct(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ch(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Oy extends Sl{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type=&quot;TetrahedronGeometry&quot;,this.parameters={radius:e,detail:t}}static fromJSON(e){return new Oy(e.radius,e.detail)}}class Dy extends Lt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type=&quot;TorusGeometry&quot;,this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],u=[],h=[],f=new Y,p=new Y,m=new Y;for(let g=0;g&lt;=i;g++)for(let v=0;v&lt;=r;v++){const x=v/r*s,b=g/i*Math.PI*2;p.x=(e+t*Math.cos(b))*Math.cos(x),p.y=(e+t*Math.cos(b))*Math.sin(x),p.z=t*Math.sin(b),l.push(p.x,p.y,p.z),f.x=e*Math.cos(x),f.y=e*Math.sin(x),m.subVectors(p,f).normalize(),u.push(m.x,m.y,m.z),h.push(v/r),h.push(g/i)}for(let g=1;g&lt;=i;g++)for(let v=1;v&lt;=r;v++){const x=(r+1)*g+v-1,b=(r+1)*(g-1)+v-1,_=(r+1)*(g-1)+v,T=(r+1)*g+v;o.push(x,b,T),o.push(b,_,T)}this.setIndex(o),this.setAttribute(&quot;position&quot;,new ct(l,3)),this.setAttribute(&quot;normal&quot;,new ct(u,3)),this.setAttribute(&quot;uv&quot;,new ct(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dy(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ny extends Lt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type=&quot;TorusKnotGeometry&quot;,this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const l=[],u=[],h=[],f=[],p=new Y,m=new Y,g=new Y,v=new Y,x=new Y,b=new Y,_=new Y;for(let w=0;w&lt;=i;++w){const E=w/i*s*Math.PI*2;T(E,s,o,e,g),T(E+.01,s,o,e,v),b.subVectors(v,g),_.addVectors(v,g),x.crossVectors(b,_),_.crossVectors(x,b),x.normalize(),_.normalize();for(let R=0;R&lt;=r;++R){const N=R/r*Math.PI*2,A=-t*Math.cos(N),D=t*Math.sin(N);p.x=g.x+(A*_.x+D*x.x),p.y=g.y+(A*_.y+D*x.y),p.z=g.z+(A*_.z+D*x.z),u.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),h.push(m.x,m.y,m.z),f.push(w/i),f.push(R/r)}}for(let w=1;w&lt;=i;w++)for(let E=1;E&lt;=r;E++){const R=(r+1)*(w-1)+(E-1),N=(r+1)*w+(E-1),A=(r+1)*w+E,D=(r+1)*(w-1)+E;l.push(R,N,D),l.push(N,A,D)}this.setIndex(l),this.setAttribute(&quot;position&quot;,new ct(u,3)),this.setAttribute(&quot;normal&quot;,new ct(h,3)),this.setAttribute(&quot;uv&quot;,new ct(f,2));function T(w,E,R,N,A){const D=Math.cos(w),C=Math.sin(w),O=R/E*w,L=Math.cos(O);A.x=N*(2+L)*.5*D,A.y=N*(2+L)*C*.5,A.z=N*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ny(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Iy extends Lt{constructor(e=new bw(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type=&quot;TubeGeometry&quot;,this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new Y,u=new Y,h=new Oe;let f=new Y;const p=[],m=[],g=[],v=[];x(),this.setIndex(v),this.setAttribute(&quot;position&quot;,new ct(p,3)),this.setAttribute(&quot;normal&quot;,new ct(m,3)),this.setAttribute(&quot;uv&quot;,new ct(g,2));function x(){for(let w=0;w&lt;t;w++)b(w);b(s===!1?t:0),T(),_()}function b(w){f=e.getPointAt(w/t,f);const E=o.normals[w],R=o.binormals[w];for(let N=0;N&lt;=r;N++){const A=N/r*Math.PI*2,D=Math.sin(A),C=-Math.cos(A);u.x=C*E.x+D*R.x,u.y=C*E.y+D*R.y,u.z=C*E.z+D*R.z,u.normalize(),m.push(u.x,u.y,u.z),l.x=f.x+i*u.x,l.y=f.y+i*u.y,l.z=f.z+i*u.z,p.push(l.x,l.y,l.z)}}function _(){for(let w=1;w&lt;=t;w++)for(let E=1;E&lt;=r;E++){const R=(r+1)*(w-1)+(E-1),N=(r+1)*w+(E-1),A=(r+1)*w+E,D=(r+1)*(w-1)+E;v.push(R,N,D),v.push(N,A,D)}}function T(){for(let w=0;w&lt;=t;w++)for(let E=0;E&lt;=r;E++)h.x=w/t,h.y=E/r,g.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Iy(new A0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class uN extends Lt{constructor(e=null){if(super(),this.type=&quot;WireframeGeometry&quot;,this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new Y,s=new Y;if(e.index!==null){const o=e.attributes.position,l=e.index;let u=e.groups;u.length===0&amp;&amp;(u=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,f=u.length;h&lt;f;++h){const p=u[h],m=p.start,g=p.count;for(let v=m,x=m+g;v&lt;x;v+=3)for(let b=0;b&lt;3;b++){const _=l.getX(v+b),T=l.getX(v+(b+1)%3);r.fromBufferAttribute(o,_),s.fromBufferAttribute(o,T),NA(r,s,i)===!0&amp;&amp;(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,u=o.count/3;l&lt;u;l++)for(let h=0;h&lt;3;h++){const f=3*l+h,p=3*l+(h+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,p),NA(r,s,i)===!0&amp;&amp;(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute(&quot;position&quot;,new ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function NA(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var IA=Object.freeze({__proto__:null,BoxGeometry:xl,CapsuleGeometry:xy,CircleGeometry:Sy,ConeGeometry:Kd,CylinderGeometry:Mh,DodecahedronGeometry:wy,EdgesGeometry:mw,ExtrudeGeometry:Ty,IcosahedronGeometry:My,LatheGeometry:Ay,OctahedronGeometry:$d,PlaneGeometry:Ah,PolyhedronGeometry:Sl,RingGeometry:Cy,ShapeGeometry:Ry,SphereGeometry:Ch,TetrahedronGeometry:Oy,TorusGeometry:Dy,TorusKnotGeometry:Ny,TubeGeometry:Iy,WireframeGeometry:uN});class hN extends Oi{constructor(e){super(),this.isShadowMaterial=!0,this.type=&quot;ShadowMaterial&quot;,this.color=new $e(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class fN extends Ts{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type=&quot;RawShaderMaterial&quot;}}class ts extends Oi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type=&quot;MeshStandardMaterial&quot;,this.defines={STANDARD:&quot;&quot;},this.color=new $e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:&quot;&quot;},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rs extends ts{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:&quot;&quot;,PHYSICAL:&quot;&quot;},this.type=&quot;MeshPhysicalMaterial&quot;,this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Oe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,&quot;reflectivity&quot;,{get:function(){return Vt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $e(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $e(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $e(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy&gt;0!=e&gt;0&amp;&amp;this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat&gt;0!=e&gt;0&amp;&amp;this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence&gt;0!=e&gt;0&amp;&amp;this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion&gt;0!=e&gt;0&amp;&amp;this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen&gt;0!=e&gt;0&amp;&amp;this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission&gt;0!=e&gt;0&amp;&amp;this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:&quot;&quot;,PHYSICAL:&quot;&quot;},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class cl extends Oi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type=&quot;MeshPhongMaterial&quot;,this.color=new $e(16777215),this.specular=new $e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=Vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sw extends Oi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:&quot;&quot;},this.type=&quot;MeshToonMaterial&quot;,this.color=new $e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class dN extends Oi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type=&quot;MeshNormalMaterial&quot;,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Py extends Oi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type=&quot;MeshLambertMaterial&quot;,this.color=new $e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=Vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ww extends Oi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type=&quot;MeshDepthMaterial&quot;,this.depthPacking=ND,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ew extends Oi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type=&quot;MeshDistanceMaterial&quot;,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class pN extends Oi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:&quot;&quot;},this.type=&quot;MeshMatcapMaterial&quot;,this.color=new $e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vl,this.normalScale=new Oe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:&quot;&quot;},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mN extends Zi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type=&quot;LineDashedMaterial&quot;,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function pc(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT==&quot;number&quot;?new e(n):Array.prototype.slice.call(n)}function gN(n){return ArrayBuffer.isView(n)&amp;&amp;!(n instanceof DataView)}function yN(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function lS(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const l=t[s]*e;for(let u=0;u!==e;++u)r[o++]=n[l+u]}return r}function Tw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&amp;&amp;s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&amp;&amp;(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&amp;&amp;(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&amp;&amp;(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function nB(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let u=0;u&lt;s.tracks.length;++u){const h=s.tracks[u],f=h.getValueSize(),p=[],m=[];for(let g=0;g&lt;h.times.length;++g){const v=h.times[g]*r;if(!(v&lt;t||v&gt;=i)){p.push(h.times[g]);for(let x=0;x&lt;f;++x)m.push(h.values[g*f+x])}}p.length!==0&amp;&amp;(h.times=pc(p,h.times.constructor),h.values=pc(m,h.values.constructor),o.push(h))}s.tracks=o;let l=1/0;for(let u=0;u&lt;s.tracks.length;++u)l&gt;s.tracks[u].times[0]&amp;&amp;(l=s.tracks[u].times[0]);for(let u=0;u&lt;s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function iB(n,e=0,t=n,i=30){i&lt;=0&amp;&amp;(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o&lt;r;++o){const l=t.tracks[o],u=l.ValueTypeName;if(u===&quot;bool&quot;||u===&quot;string&quot;)continue;const h=n.tracks.find(function(_){return _.name===l.name&amp;&amp;_.ValueTypeName===u});if(h===void 0)continue;let f=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&amp;&amp;(f=p/3);let m=0;const g=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&amp;&amp;(m=g/3);const v=l.times.length-1;let x;if(s&lt;=l.times[0]){const _=f,T=p-f;x=l.values.slice(_,T)}else if(s&gt;=l.times[v]){const _=v*p+f,T=_+p-f;x=l.values.slice(_,T)}else{const _=l.createInterpolant(),T=f,w=p-f;_.evaluate(s),x=_.resultBuffer.slice(T,w)}u===&quot;quaternion&quot;&amp;&amp;new Si().fromArray(x).normalize().conjugate().toArray(x);const b=h.times.length;for(let _=0;_&lt;b;++_){const T=_*g+m;if(u===&quot;quaternion&quot;)Si.multiplyQuaternionsFlat(h.values,T,x,0,h.values,T);else{const w=g-m*2;for(let E=0;E&lt;w;++E)h.values[T+E]-=x[E]}}}return n.blendMode=ow,n}class rB{static convertArray(e,t){return pc(e,t)}static isTypedArray(e){return gN(e)}static getKeyframeOrder(e){return yN(e)}static sortedArray(e,t,i){return lS(e,t,i)}static flattenJSON(e,t,i,r){Tw(e,t,i,r)}static subclip(e,t,i,r,s=30){return nB(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return iB(e,t,i,r)}}class Rh{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e&lt;r)){for(let l=i+2;;){if(r===void 0){if(e&lt;s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e&lt;r)break t}o=t.length;break n}if(!(e&gt;=s)){const l=t[1];e&lt;l&amp;&amp;(i=2,s=l);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=s,s=t[--i-1],e&gt;=s)break t}o=i,i=0;break n}break e}for(;i&lt;o;){const l=i+o&gt;&gt;&gt;1;e&lt;t[l]?o=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error(&quot;call to abstract method&quot;)}intervalChanged_(){}}class _N extends Rh{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fc,endingEnd:fc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],u=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case dc:s=e,l=2*t-i;break;case _d:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(u===void 0)switch(this.getSettings_().endingEnd){case dc:o=e,u=2*i-t;break;case _d:o=1,u=i+r[1]-r[0];break;default:o=e-1,u=t}const h=(i-t)*.5,f=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(u-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,f=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,v=(i-t)/(r-t),x=v*v,b=x*v,_=-m*b+2*m*x-m*v,T=(1+m)*b+(-1.5-2*m)*x+(-.5+m)*v+1,w=(-1-g)*b+(1.5+g)*x+.5*v,E=g*b-g*x;for(let R=0;R!==l;++R)s[R]=_*o[f+R]+T*o[h+R]+w*o[u+R]+E*o[p+R];return s}}class Mw extends Rh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,f=(i-t)/(r-t),p=1-f;for(let m=0;m!==l;++m)s[m]=o[h+m]*p+o[u+m]*f;return s}}class vN extends Rh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class As{constructor(e,t,i,r){if(e===void 0)throw new Error(&quot;THREE.KeyframeTrack: track name is undefined&quot;);if(t===void 0||t.length===0)throw new Error(&quot;THREE.KeyframeTrack: no keyframes in track named &quot;+e);this.name=e,this.times=pc(t,this.TimeBufferType),this.values=pc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:pc(e.times,Array),values:pc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&amp;&amp;(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new vN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Mw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new _N(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case lh:t=this.InterpolantFactoryMethodDiscrete;break;case ch:t=this.InterpolantFactoryMethodLinear;break;case Cg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i=&quot;unsupported interpolation for &quot;+this.ValueTypeName+&quot; keyframe track named &quot;+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn(&quot;THREE.KeyframeTrack:&quot;,i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lh;case this.InterpolantFactoryMethodLinear:return ch;case this.InterpolantFactoryMethodSmooth:return Cg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&amp;&amp;i[s]&lt;e;)++s;for(;o!==-1&amp;&amp;i[o]&gt;t;)--o;if(++o,s!==0||o!==r){s&gt;=o&amp;&amp;(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&amp;&amp;(console.error(&quot;THREE.KeyframeTrack: Invalid value size in track.&quot;,this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&amp;&amp;(console.error(&quot;THREE.KeyframeTrack: Track is empty.&quot;,this),e=!1);let o=null;for(let l=0;l!==s;l++){const u=i[l];if(typeof u==&quot;number&quot;&amp;&amp;isNaN(u)){console.error(&quot;THREE.KeyframeTrack: Time is not a valid number.&quot;,this,l,u),e=!1;break}if(o!==null&amp;&amp;o&gt;u){console.error(&quot;THREE.KeyframeTrack: Out of order keys.&quot;,this,l,u,o),e=!1;break}o=u}if(r!==void 0&amp;&amp;gN(r))for(let l=0,u=r.length;l!==u;++l){const h=r[l];if(isNaN(h)){console.error(&quot;THREE.KeyframeTrack: Value is not a valid number.&quot;,this,l,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Cg,s=e.length-1;let o=1;for(let l=1;l&lt;s;++l){let u=!1;const h=e[l],f=e[l+1];if(h!==f&amp;&amp;(l!==1||h!==e[0]))if(r)u=!0;else{const p=l*i,m=p-i,g=p+i;for(let v=0;v!==i;++v){const x=t[p+v];if(x!==t[m+v]||x!==t[g+v]){u=!0;break}}}if(u){if(l!==o){e[o]=e[l];const p=l*i,m=o*i;for(let g=0;g!==i;++g)t[m+g]=t[p+g]}++o}}if(s&gt;0){e[o]=e[s];for(let l=s*i,u=o*i,h=0;h!==i;++h)t[u+h]=t[l+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}As.prototype.ValueTypeName=&quot;&quot;;As.prototype.TimeBufferType=Float32Array;As.prototype.ValueBufferType=Float32Array;As.prototype.DefaultInterpolation=ch;class Uc extends As{constructor(e,t,i){super(e,t,i)}}Uc.prototype.ValueTypeName=&quot;bool&quot;;Uc.prototype.ValueBufferType=Array;Uc.prototype.DefaultInterpolation=lh;Uc.prototype.InterpolantFactoryMethodLinear=void 0;Uc.prototype.InterpolantFactoryMethodSmooth=void 0;class Aw extends As{constructor(e,t,i,r){super(e,t,i,r)}}Aw.prototype.ValueTypeName=&quot;color&quot;;class Cc extends As{constructor(e,t,i,r){super(e,t,i,r)}}Cc.prototype.ValueTypeName=&quot;number&quot;;class bN extends Rh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(i-t)/(r-t);let h=e*l;for(let f=h+l;h!==f;h+=4)Si.slerpFlat(s,0,o,h-l,o,h,u);return s}}class pl extends As{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new bN(this.times,this.values,this.getValueSize(),e)}}pl.prototype.ValueTypeName=&quot;quaternion&quot;;pl.prototype.InterpolantFactoryMethodSmooth=void 0;class kc extends As{constructor(e,t,i){super(e,t,i)}}kc.prototype.ValueTypeName=&quot;string&quot;;kc.prototype.ValueBufferType=Array;kc.prototype.DefaultInterpolation=lh;kc.prototype.InterpolantFactoryMethodLinear=void 0;kc.prototype.InterpolantFactoryMethodSmooth=void 0;class pa extends As{constructor(e,t,i,r){super(e,t,i,r)}}pa.prototype.ValueTypeName=&quot;vector&quot;;class ml{constructor(e=&quot;&quot;,t=-1,i=[],r=ay){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Jr(),this.duration&lt;0&amp;&amp;this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,l=i.length;o!==l;++o)t.push(oB(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(As.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let l=0;l&lt;s;l++){let u=[],h=[];u.push((l+s-1)%s,l,(l+1)%s),h.push(0,1,0);const f=yN(u);u=lS(u,1,f),h=lS(h,1,f),!r&amp;&amp;u[0]===0&amp;&amp;(u.push(s),h.push(h[0])),o.push(new Cc(&quot;.morphTargetInfluences[&quot;+t[l].name+&quot;]&quot;,u,h).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&amp;&amp;r.geometry.animations||r.animations}for(let r=0;r&lt;i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l&lt;u;l++){const h=e[l],f=h.name.match(s);if(f&amp;&amp;f.length&gt;1){const p=f[1];let m=r[p];m||(r[p]=m=[]),m.push(h)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return o}static parseAnimation(e,t){if(console.warn(&quot;THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185&quot;),!e)return console.error(&quot;THREE.AnimationClip: No animation in JSONLoader data.&quot;),null;const i=function(p,m,g,v,x){if(g.length!==0){const b=[],_=[];Tw(g,b,_,v),b.length!==0&amp;&amp;x.push(new p(m,b,_))}},r=[],s=e.name||&quot;default&quot;,o=e.fps||30,l=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let p=0;p&lt;h.length;p++){const m=h[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let v;for(v=0;v&lt;m.length;v++)if(m[v].morphTargets)for(let x=0;x&lt;m[v].morphTargets.length;x++)g[m[v].morphTargets[x]]=-1;for(const x in g){const b=[],_=[];for(let T=0;T!==m[v].morphTargets.length;++T){const w=m[v];b.push(w.time),_.push(w.morphTarget===x?1:0)}r.push(new Cc(&quot;.morphTargetInfluence[&quot;+x+&quot;]&quot;,b,_))}u=g.length*o}else{const g=&quot;.bones[&quot;+t[p].name+&quot;]&quot;;i(pa,g+&quot;.position&quot;,m,&quot;pos&quot;,r),i(pl,g+&quot;.quaternion&quot;,m,&quot;rot&quot;,r),i(pa,g+&quot;.scale&quot;,m,&quot;scl&quot;,r)}}return r.length===0?null:new this(s,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e&lt;this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t&lt;this.tracks.length;t++)e=e&amp;&amp;this.tracks[t].validate();return e}optimize(){for(let e=0;e&lt;this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t&lt;this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function sB(n){switch(n.toLowerCase()){case&quot;scalar&quot;:case&quot;double&quot;:case&quot;float&quot;:case&quot;number&quot;:case&quot;integer&quot;:return Cc;case&quot;vector&quot;:case&quot;vector2&quot;:case&quot;vector3&quot;:case&quot;vector4&quot;:return pa;case&quot;color&quot;:return Aw;case&quot;quaternion&quot;:return pl;case&quot;bool&quot;:case&quot;boolean&quot;:return Uc;case&quot;string&quot;:return kc}throw new Error(&quot;THREE.KeyframeTrack: Unsupported typeName: &quot;+n)}function oB(n){if(n.type===void 0)throw new Error(&quot;THREE.KeyframeTrack: track type undefined, can not parse&quot;);const e=sB(n.type);if(n.times===void 0){const t=[],i=[];Tw(n.keys,t,i,&quot;value&quot;),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const oa={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&amp;&amp;(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Cw{constructor(e,t,i){const r=this;let s=!1,o=0,l=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){l++,s===!1&amp;&amp;r.onStart!==void 0&amp;&amp;r.onStart(f,o,l),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&amp;&amp;r.onProgress(f,o,l),o===l&amp;&amp;(s=!1,r.onLoad!==void 0&amp;&amp;r.onLoad())},this.itemError=function(f){r.onError!==void 0&amp;&amp;r.onError(f)},this.resolveURL=function(f){return u?u(f):f},this.setURLModifier=function(f){return u=f,this},this.addHandler=function(f,p){return h.push(f,p),this},this.removeHandler=function(f){const p=h.indexOf(f);return p!==-1&amp;&amp;h.splice(p,2),this},this.getHandler=function(f){for(let p=0,m=h.length;p&lt;m;p+=2){const g=h[p],v=h[p+1];if(g.global&amp;&amp;(g.lastIndex=0),g.test(f))return v}return null}}}const Rw=new Cw;class Ji{constructor(e){this.manager=e!==void 0?e:Rw,this.crossOrigin=&quot;anonymous&quot;,this.withCredentials=!1,this.path=&quot;&quot;,this.resourcePath=&quot;&quot;,this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ji.DEFAULT_MATERIAL_NAME=&quot;__DEFAULT&quot;;const Yo={};class aB extends Error{constructor(e,t){super(e),this.response=t}}class ns extends Ji{constructor(e){super(e),this.mimeType=&quot;&quot;,this.responseType=&quot;&quot;}load(e,t,i,r){e===void 0&amp;&amp;(e=&quot;&quot;),this.path!==void 0&amp;&amp;(e=this.path+e),e=this.manager.resolveURL(e);const s=oa.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=&gt;{t&amp;&amp;t(s),this.manager.itemEnd(e)},0),s;if(Yo[e]!==void 0){Yo[e].push({onLoad:t,onProgress:i,onError:r});return}Yo[e]=[],Yo[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?&quot;include&quot;:&quot;same-origin&quot;}),l=this.mimeType,u=this.responseType;fetch(o).then(h=&gt;{if(h.status===200||h.status===0){if(h.status===0&amp;&amp;console.warn(&quot;THREE.FileLoader: HTTP Status 0 received.&quot;),typeof ReadableStream&gt;&quot;u&quot;||h.body===void 0||h.body.getReader===void 0)return h;const f=Yo[e],p=h.body.getReader(),m=h.headers.get(&quot;X-File-Size&quot;)||h.headers.get(&quot;Content-Length&quot;),g=m?parseInt(m):0,v=g!==0;let x=0;const b=new ReadableStream({start(_){T();function T(){p.read().then(({done:w,value:E})=&gt;{if(w)_.close();else{x+=E.byteLength;const R=new ProgressEvent(&quot;progress&quot;,{lengthComputable:v,loaded:x,total:g});for(let N=0,A=f.length;N&lt;A;N++){const D=f[N];D.onProgress&amp;&amp;D.onProgress(R)}_.enqueue(E),T()}},w=&gt;{_.error(w)})}}});return new Response(b)}else throw new aB(`fetch for &quot;${h.url}&quot; responded with ${h.status}: ${h.statusText}`,h)}).then(h=&gt;{switch(u){case&quot;arraybuffer&quot;:return h.arrayBuffer();case&quot;blob&quot;:return h.blob();case&quot;document&quot;:return h.text().then(f=&gt;new DOMParser().parseFromString(f,l));case&quot;json&quot;:return h.json();default:if(l===&quot;&quot;)return h.text();{const p=/charset=&quot;?([^;&quot;\s]*)&quot;?/i.exec(l),m=p&amp;&amp;p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return h.arrayBuffer().then(v=&gt;g.decode(v))}}}).then(h=&gt;{oa.add(e,h);const f=Yo[e];delete Yo[e];for(let p=0,m=f.length;p&lt;m;p++){const g=f[p];g.onLoad&amp;&amp;g.onLoad(h)}}).catch(h=&gt;{const f=Yo[e];if(f===void 0)throw this.manager.itemError(e),h;delete Yo[e];for(let p=0,m=f.length;p&lt;m;p++){const g=f[p];g.onError&amp;&amp;g.onError(h)}this.manager.itemError(e)}).finally(()=&gt;{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ns(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i&lt;e.length;i++){const r=ml.parse(e[i]);t.push(r)}return t}}class cB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],l=new vy,u=new ns(this.manager);u.setPath(this.path),u.setResponseType(&quot;arraybuffer&quot;),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let h=0;function f(p){u.load(e[p],function(m){const g=s.parse(m,!0);o[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},h+=1,h===6&amp;&amp;(g.mipmapCount===1&amp;&amp;(l.minFilter=fi),l.image=o,l.format=g.format,l.needsUpdate=!0,t&amp;&amp;t(l))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p&lt;m;++p)f(p);else u.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let v=0;v&lt;g;v++){o[v]={mipmaps:[]};for(let x=0;x&lt;m.mipmapCount;x++)o[v].mipmaps.push(m.mipmaps[v*m.mipmapCount+x]),o[v].format=m.format,o[v].width=m.width,o[v].height=m.height}l.image=o}else l.image.width=m.width,l.image.height=m.height,l.mipmaps=m.mipmaps;m.mipmapCount===1&amp;&amp;(l.minFilter=fi),l.format=m.format,l.needsUpdate=!0,t&amp;&amp;t(l)},i,r);return l}}class Md extends Ji{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&amp;&amp;(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=oa.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&amp;&amp;t(o),s.manager.itemEnd(e)},0),o;const l=Sd(&quot;img&quot;);function u(){f(),oa.add(e,this),t&amp;&amp;t(this),s.manager.itemEnd(e)}function h(p){f(),r&amp;&amp;r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){l.removeEventListener(&quot;load&quot;,u,!1),l.removeEventListener(&quot;error&quot;,h,!1)}return l.addEventListener(&quot;load&quot;,u,!1),l.addEventListener(&quot;error&quot;,h,!1),e.slice(0,5)!==&quot;data:&quot;&amp;&amp;this.crossOrigin!==void 0&amp;&amp;(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class uB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=new Xd;s.colorSpace=Nn;const o=new Md(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function u(h){o.load(e[h],function(f){s.images[h]=f,l++,l===6&amp;&amp;(s.needsUpdate=!0,t&amp;&amp;t(s))},void 0,r)}for(let h=0;h&lt;e.length;++h)u(h);return s}}class xN extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new $s,l=new ns(this.manager);return l.setResponseType(&quot;arraybuffer&quot;),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let h;try{h=s.parse(u)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&amp;&amp;(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:rr,o.wrapT=h.wrapT!==void 0?h.wrapT:rr,o.magFilter=h.magFilter!==void 0?h.magFilter:fi,o.minFilter=h.minFilter!==void 0?h.minFilter:fi,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&amp;&amp;(o.colorSpace=h.colorSpace),h.flipY!==void 0&amp;&amp;(o.flipY=h.flipY),h.format!==void 0&amp;&amp;(o.format=h.format),h.type!==void 0&amp;&amp;(o.type=h.type),h.mipmaps!==void 0&amp;&amp;(o.mipmaps=h.mipmaps,o.minFilter=Zr),h.mipmapCount===1&amp;&amp;(o.minFilter=fi),h.generateMipmaps!==void 0&amp;&amp;(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,t&amp;&amp;t(o,h)},i,r),o}}class Ly extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=new Kn,o=new Md(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&amp;&amp;t(s)},i,r),s}}class wl extends nn{constructor(e,t=1){super(),this.isLight=!0,this.type=&quot;Light&quot;,this.color=new $e(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&amp;&amp;(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&amp;&amp;(t.object.distance=this.distance),this.angle!==void 0&amp;&amp;(t.object.angle=this.angle),this.decay!==void 0&amp;&amp;(t.object.decay=this.decay),this.penumbra!==void 0&amp;&amp;(t.object.penumbra=this.penumbra),this.shadow!==void 0&amp;&amp;(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&amp;&amp;(t.object.target=this.target.uuid),t}}class SN extends wl{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type=&quot;HemisphereLight&quot;,this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $e(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Hb=new yt,PA=new Y,LA=new Y;class Ow{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Oe(512,512),this.mapType=es,this.map=null,this.mapPass=null,this.matrix=new yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Th,this._frameExtents=new Oe(1,1),this._viewportCount=1,this._viewports=[new yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;PA.setFromMatrixPosition(e.matrixWorld),t.position.copy(PA),LA.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(LA),t.updateMatrixWorld(),Hb.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hb),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Hb)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&amp;&amp;this.map.dispose(),this.mapPass&amp;&amp;this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&amp;&amp;(e.intensity=this.intensity),this.bias!==0&amp;&amp;(e.bias=this.bias),this.normalBias!==0&amp;&amp;(e.normalBias=this.normalBias),this.radius!==1&amp;&amp;(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&amp;&amp;(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class hB extends Ow{constructor(){super(new Yn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=uh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&amp;&amp;(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Uy extends wl{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type=&quot;SpotLight&quot;,this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new hB}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const UA=new yt,kf=new Y,Vb=new Y;class fB extends Ow{constructor(){super(new Yn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Oe(4,2),this._viewportCount=6,this._viewports=[new yn(2,1,1,1),new yn(0,1,1,1),new yn(3,1,1,1),new yn(1,1,1,1),new yn(3,0,1,1),new yn(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&amp;&amp;(i.far=s,i.updateProjectionMatrix()),kf.setFromMatrixPosition(e.matrixWorld),i.position.copy(kf),Vb.copy(i.position),Vb.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Vb),i.updateMatrixWorld(),r.makeTranslation(-kf.x,-kf.y,-kf.z),UA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UA)}}class ky extends wl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type=&quot;PointLight&quot;,this.distance=i,this.decay=r,this.shadow=new fB}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Fc extends hy{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type=&quot;OrthographicCamera&quot;,this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&amp;&amp;(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&amp;&amp;(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,l=r+t,u=r-t;if(this.view!==null&amp;&amp;this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,l-=f*this.view.offsetY,u=l-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&amp;&amp;(t.object.view=Object.assign({},this.view)),t}}class dB extends Ow{constructor(){super(new Fc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Zd extends wl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type=&quot;DirectionalLight&quot;,this.position.copy(nn.DEFAULT_UP),this.updateMatrix(),this.target=new nn,this.shadow=new dB}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Fy extends wl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type=&quot;AmbientLight&quot;}}class wN extends wl{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type=&quot;RectAreaLight&quot;,this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class EN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e&lt;9;e++)this.coefficients.push(new Y)}set(e){for(let t=0;t&lt;9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e&lt;9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t&lt;9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i&lt;9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t&lt;9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i&lt;9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t&lt;9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r&lt;9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r&lt;9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class TN extends wl{constructor(e=new EN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class zy extends Ji{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ns(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&amp;&amp;console.warn(&quot;THREE.MaterialLoader: Undefined texture&quot;,s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&amp;&amp;(r.uuid=e.uuid),e.name!==void 0&amp;&amp;(r.name=e.name),e.color!==void 0&amp;&amp;r.color!==void 0&amp;&amp;r.color.setHex(e.color),e.roughness!==void 0&amp;&amp;(r.roughness=e.roughness),e.metalness!==void 0&amp;&amp;(r.metalness=e.metalness),e.sheen!==void 0&amp;&amp;(r.sheen=e.sheen),e.sheenColor!==void 0&amp;&amp;(r.sheenColor=new $e().setHex(e.sheenColor)),e.sheenRoughness!==void 0&amp;&amp;(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&amp;&amp;r.emissive!==void 0&amp;&amp;r.emissive.setHex(e.emissive),e.specular!==void 0&amp;&amp;r.specular!==void 0&amp;&amp;r.specular.setHex(e.specular),e.specularIntensity!==void 0&amp;&amp;(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&amp;&amp;r.specularColor!==void 0&amp;&amp;r.specularColor.setHex(e.specularColor),e.shininess!==void 0&amp;&amp;(r.shininess=e.shininess),e.clearcoat!==void 0&amp;&amp;(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&amp;&amp;(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&amp;&amp;(r.dispersion=e.dispersion),e.iridescence!==void 0&amp;&amp;(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&amp;&amp;(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&amp;&amp;(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&amp;&amp;(r.transmission=e.transmission),e.thickness!==void 0&amp;&amp;(r.thickness=e.thickness),e.attenuationDistance!==void 0&amp;&amp;(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&amp;&amp;r.attenuationColor!==void 0&amp;&amp;r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&amp;&amp;(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&amp;&amp;(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&amp;&amp;(r.fog=e.fog),e.flatShading!==void 0&amp;&amp;(r.flatShading=e.flatShading),e.blending!==void 0&amp;&amp;(r.blending=e.blending),e.combine!==void 0&amp;&amp;(r.combine=e.combine),e.side!==void 0&amp;&amp;(r.side=e.side),e.shadowSide!==void 0&amp;&amp;(r.shadowSide=e.shadowSide),e.opacity!==void 0&amp;&amp;(r.opacity=e.opacity),e.transparent!==void 0&amp;&amp;(r.transparent=e.transparent),e.alphaTest!==void 0&amp;&amp;(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&amp;&amp;(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&amp;&amp;(r.depthFunc=e.depthFunc),e.depthTest!==void 0&amp;&amp;(r.depthTest=e.depthTest),e.depthWrite!==void 0&amp;&amp;(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&amp;&amp;(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&amp;&amp;(r.blendSrc=e.blendSrc),e.blendDst!==void 0&amp;&amp;(r.blendDst=e.blendDst),e.blendEquation!==void 0&amp;&amp;(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&amp;&amp;(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&amp;&amp;(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&amp;&amp;(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&amp;&amp;r.blendColor!==void 0&amp;&amp;r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&amp;&amp;(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&amp;&amp;(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&amp;&amp;(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&amp;&amp;(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&amp;&amp;(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&amp;&amp;(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&amp;&amp;(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&amp;&amp;(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&amp;&amp;(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&amp;&amp;(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&amp;&amp;(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&amp;&amp;(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&amp;&amp;(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&amp;&amp;(r.rotation=e.rotation),e.linewidth!==void 0&amp;&amp;(r.linewidth=e.linewidth),e.dashSize!==void 0&amp;&amp;(r.dashSize=e.dashSize),e.gapSize!==void 0&amp;&amp;(r.gapSize=e.gapSize),e.scale!==void 0&amp;&amp;(r.scale=e.scale),e.polygonOffset!==void 0&amp;&amp;(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&amp;&amp;(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&amp;&amp;(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&amp;&amp;(r.dithering=e.dithering),e.alphaToCoverage!==void 0&amp;&amp;(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&amp;&amp;(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&amp;&amp;(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&amp;&amp;(r.visible=e.visible),e.toneMapped!==void 0&amp;&amp;(r.toneMapped=e.toneMapped),e.userData!==void 0&amp;&amp;(r.userData=e.userData),e.vertexColors!==void 0&amp;&amp;(typeof e.vertexColors==&quot;number&quot;?r.vertexColors=e.vertexColors&gt;0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case&quot;t&quot;:r.uniforms[s].value=i(o.value);break;case&quot;c&quot;:r.uniforms[s].value=new $e().setHex(o.value);break;case&quot;v2&quot;:r.uniforms[s].value=new Oe().fromArray(o.value);break;case&quot;v3&quot;:r.uniforms[s].value=new Y().fromArray(o.value);break;case&quot;v4&quot;:r.uniforms[s].value=new yn().fromArray(o.value);break;case&quot;m3&quot;:r.uniforms[s].value=new jt().fromArray(o.value);break;case&quot;m4&quot;:r.uniforms[s].value=new yt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&amp;&amp;(r.defines=e.defines),e.vertexShader!==void 0&amp;&amp;(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&amp;&amp;(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&amp;&amp;(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&amp;&amp;(r.lights=e.lights),e.clipping!==void 0&amp;&amp;(r.clipping=e.clipping),e.size!==void 0&amp;&amp;(r.size=e.size),e.sizeAttenuation!==void 0&amp;&amp;(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&amp;&amp;(r.map=i(e.map)),e.matcap!==void 0&amp;&amp;(r.matcap=i(e.matcap)),e.alphaMap!==void 0&amp;&amp;(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&amp;&amp;(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&amp;&amp;(r.bumpScale=e.bumpScale),e.normalMap!==void 0&amp;&amp;(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&amp;&amp;(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&amp;&amp;(s=[s,s]),r.normalScale=new Oe().fromArray(s)}return e.displacementMap!==void 0&amp;&amp;(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&amp;&amp;(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&amp;&amp;(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&amp;&amp;(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&amp;&amp;(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&amp;&amp;(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&amp;&amp;(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&amp;&amp;(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&amp;&amp;(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&amp;&amp;(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&amp;&amp;(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&amp;&amp;r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&amp;&amp;(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&amp;&amp;(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&amp;&amp;(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&amp;&amp;(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&amp;&amp;(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&amp;&amp;(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&amp;&amp;(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&amp;&amp;(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&amp;&amp;(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&amp;&amp;(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&amp;&amp;(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&amp;&amp;(r.clearcoatNormalScale=new Oe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&amp;&amp;(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&amp;&amp;(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&amp;&amp;(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&amp;&amp;(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&amp;&amp;(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&amp;&amp;(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&amp;&amp;(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return zy.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:hN,SpriteMaterial:fw,RawShaderMaterial:fN,ShaderMaterial:Ts,PointsMaterial:yy,MeshPhysicalMaterial:rs,MeshStandardMaterial:ts,MeshPhongMaterial:cl,MeshToonMaterial:Sw,MeshNormalMaterial:dN,MeshLambertMaterial:Py,MeshDepthMaterial:ww,MeshDistanceMaterial:Ew,MeshBasicMaterial:$i,MeshMatcapMaterial:pN,LineDashedMaterial:mN,LineBasicMaterial:Zi,Material:Oi};return new t[e]}}class vo{static extractUrlBase(e){const t=e.lastIndexOf(&quot;/&quot;);return t===-1?&quot;./&quot;:e.slice(0,t+1)}static resolveURL(e,t){return typeof e!=&quot;string&quot;||e===&quot;&quot;?&quot;&quot;:(/^https?:\/\//i.test(t)&amp;&amp;/^\//.test(e)&amp;&amp;(t=t.replace(/(^https?:\/\/[^\/]+).*/i,&quot;$1&quot;)),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class MN extends Lt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type=&quot;InstancedBufferGeometry&quot;,this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class AN extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ns(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,v){if(t[v]!==void 0)return t[v];const b=g.interleavedBuffers[v],_=s(g,b.buffer),T=Yu(b.type,_),w=new qd(T,b.stride);return w.uuid=b.uuid,t[v]=w,w}function s(g,v){if(i[v]!==void 0)return i[v];const b=g.arrayBuffers[v],_=new Uint32Array(b).buffer;return i[v]=_,_}const o=e.isInstancedBufferGeometry?new MN:new Lt,l=e.data.index;if(l!==void 0){const g=Yu(l.type,l.array);o.setIndex(new Jt(g,1))}const u=e.data.attributes;for(const g in u){const v=u[g];let x;if(v.isInterleavedBufferAttribute){const b=r(e.data,v.data);x=new dl(b,v.itemSize,v.offset,v.normalized)}else{const b=Yu(v.type,v.array),_=v.isInstancedBufferAttribute?Mc:Jt;x=new _(b,v.itemSize,v.normalized)}v.name!==void 0&amp;&amp;(x.name=v.name),v.usage!==void 0&amp;&amp;x.setUsage(v.usage),o.setAttribute(g,x)}const h=e.data.morphAttributes;if(h)for(const g in h){const v=h[g],x=[];for(let b=0,_=v.length;b&lt;_;b++){const T=v[b];let w;if(T.isInterleavedBufferAttribute){const E=r(e.data,T.data);w=new dl(E,T.itemSize,T.offset,T.normalized)}else{const E=Yu(T.type,T.array);w=new Jt(E,T.itemSize,T.normalized)}T.name!==void 0&amp;&amp;(w.name=T.name),x.push(w)}o.morphAttributes[g]=x}e.data.morphTargetsRelative&amp;&amp;(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let g=0,v=p.length;g!==v;++g){const x=p[g];o.addGroup(x.start,x.count,x.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new Y;m.center!==void 0&amp;&amp;g.fromArray(m.center),o.boundingSphere=new wi(g,m.radius)}return e.name&amp;&amp;(o.name=e.name),e.userData&amp;&amp;(o.userData=e.userData),o}}class pB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===&quot;&quot;?vo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new ns(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(p){r!==void 0&amp;&amp;r(p),console.error(&quot;THREE:ObjectLoader: Can&#x27;t parse &quot;+e+&quot;.&quot;,p.message);return}const f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()===&quot;geometry&quot;){r!==void 0&amp;&amp;r(new Error(&quot;THREE.ObjectLoader: Can&#x27;t load &quot;+e)),console.error(&quot;THREE.ObjectLoader: Can&#x27;t load &quot;+e);return}s.parse(h,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===&quot;&quot;?vo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ns(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()===&quot;geometry&quot;)throw new Error(&quot;THREE.ObjectLoader: Can&#x27;t load &quot;+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&amp;&amp;t(h)}),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,i),f=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,f),this.bindLightTargets(h),t!==void 0){let p=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){p=!0;break}p===!1&amp;&amp;t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,r,l,o,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i&lt;r;i++){const s=new xc().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&amp;&amp;(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s&lt;o;s++){const l=new Eh().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new AN;for(let s=0,o=e.length;s&lt;o;s++){let l;const u=e[s];switch(u.type){case&quot;BufferGeometry&quot;:case&quot;InstancedBufferGeometry&quot;:l=r.parse(u);break;default:u.type in IA?l=IA[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type &quot;${u.type}&quot;`)}l.uuid=u.uuid,u.name!==void 0&amp;&amp;(l.name=u.name),u.userData!==void 0&amp;&amp;(l.userData=u.userData),i[u.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new zy;s.setTextures(t);for(let o=0,l=e.length;o&lt;l;o++){const u=e[o];i[u.uuid]===void 0&amp;&amp;(i[u.uuid]=s.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i&lt;e.length;i++){const r=e[i],s=ml.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(u){return i.manager.itemStart(u),s.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function l(u){if(typeof u==&quot;string&quot;){const h=u,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return o(f)}else return u.data?{data:Yu(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&amp;&amp;e.length&gt;0){const u=new Cw(t);s=new Md(u),s.setCrossOrigin(this.crossOrigin);for(let h=0,f=e.length;h&lt;f;h++){const p=e[h],m=p.url;if(Array.isArray(m)){const g=[];for(let v=0,x=m.length;v&lt;x;v++){const b=m[v],_=l(b);_!==null&amp;&amp;(_ instanceof HTMLImageElement?g.push(_):g.push(new $s(_.data,_.width,_.height)))}r[p.uuid]=new ll(g)}else{const g=l(p.url);r[p.uuid]=new ll(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o==&quot;string&quot;){const l=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(u)}else return o.data?{data:Yu(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&amp;&amp;e.length&gt;0){r=new Md(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o&lt;l;o++){const u=e[o],h=u.url;if(Array.isArray(h)){const f=[];for(let p=0,m=h.length;p&lt;m;p++){const g=h[p],v=await s(g);v!==null&amp;&amp;(v instanceof HTMLImageElement?f.push(v):f.push(new $s(v.data,v.width,v.height)))}i[u.uuid]=new ll(f)}else{const f=await s(u.url);i[u.uuid]=new ll(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s==&quot;number&quot;?s:(console.warn(&quot;THREE.ObjectLoader.parseTexture: Constant should be in numeric form.&quot;,s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s&lt;o;s++){const l=e[s];l.image===void 0&amp;&amp;console.warn(&#x27;THREE.ObjectLoader: No &quot;image&quot; specified for&#x27;,l.uuid),t[l.image]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined image&quot;,l.image);const u=t[l.image],h=u.data;let f;Array.isArray(h)?(f=new Xd,h.length===6&amp;&amp;(f.needsUpdate=!0)):(h&amp;&amp;h.data?f=new $s:f=new Kn,h&amp;&amp;(f.needsUpdate=!0)),f.source=u,f.uuid=l.uuid,l.name!==void 0&amp;&amp;(f.name=l.name),l.mapping!==void 0&amp;&amp;(f.mapping=i(l.mapping,mB)),l.channel!==void 0&amp;&amp;(f.channel=l.channel),l.offset!==void 0&amp;&amp;f.offset.fromArray(l.offset),l.repeat!==void 0&amp;&amp;f.repeat.fromArray(l.repeat),l.center!==void 0&amp;&amp;f.center.fromArray(l.center),l.rotation!==void 0&amp;&amp;(f.rotation=l.rotation),l.wrap!==void 0&amp;&amp;(f.wrapS=i(l.wrap[0],kA),f.wrapT=i(l.wrap[1],kA)),l.format!==void 0&amp;&amp;(f.format=l.format),l.internalFormat!==void 0&amp;&amp;(f.internalFormat=l.internalFormat),l.type!==void 0&amp;&amp;(f.type=l.type),l.colorSpace!==void 0&amp;&amp;(f.colorSpace=l.colorSpace),l.minFilter!==void 0&amp;&amp;(f.minFilter=i(l.minFilter,FA)),l.magFilter!==void 0&amp;&amp;(f.magFilter=i(l.magFilter,FA)),l.anisotropy!==void 0&amp;&amp;(f.anisotropy=l.anisotropy),l.flipY!==void 0&amp;&amp;(f.flipY=l.flipY),l.generateMipmaps!==void 0&amp;&amp;(f.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&amp;&amp;(f.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&amp;&amp;(f.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&amp;&amp;(f.compareFunction=l.compareFunction),l.userData!==void 0&amp;&amp;(f.userData=l.userData),r[l.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function l(m){return t[m]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined geometry&quot;,m),t[m]}function u(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let v=0,x=m.length;v&lt;x;v++){const b=m[v];i[b]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined material&quot;,b),g.push(i[b])}return g}return i[m]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined material&quot;,m),i[m]}}function h(m){return r[m]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined texture&quot;,m),r[m]}let f,p;switch(e.type){case&quot;Scene&quot;:o=new py,e.background!==void 0&amp;&amp;(Number.isInteger(e.background)?o.background=new $e(e.background):o.background=h(e.background)),e.environment!==void 0&amp;&amp;(o.environment=h(e.environment)),e.fog!==void 0&amp;&amp;(e.fog.type===&quot;Fog&quot;?o.fog=new dy(e.fog.color,e.fog.near,e.fog.far):e.fog.type===&quot;FogExp2&quot;&amp;&amp;(o.fog=new fy(e.fog.color,e.fog.density)),e.fog.name!==&quot;&quot;&amp;&amp;(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&amp;&amp;(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&amp;&amp;(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&amp;&amp;o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&amp;&amp;(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&amp;&amp;o.environmentRotation.fromArray(e.environmentRotation);break;case&quot;PerspectiveCamera&quot;:o=new Yn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&amp;&amp;(o.focus=e.focus),e.zoom!==void 0&amp;&amp;(o.zoom=e.zoom),e.filmGauge!==void 0&amp;&amp;(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&amp;&amp;(o.filmOffset=e.filmOffset),e.view!==void 0&amp;&amp;(o.view=Object.assign({},e.view));break;case&quot;OrthographicCamera&quot;:o=new Fc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&amp;&amp;(o.zoom=e.zoom),e.view!==void 0&amp;&amp;(o.view=Object.assign({},e.view));break;case&quot;AmbientLight&quot;:o=new Fy(e.color,e.intensity);break;case&quot;DirectionalLight&quot;:o=new Zd(e.color,e.intensity),o.target=e.target||&quot;&quot;;break;case&quot;PointLight&quot;:o=new ky(e.color,e.intensity,e.distance,e.decay);break;case&quot;RectAreaLight&quot;:o=new wN(e.color,e.intensity,e.width,e.height);break;case&quot;SpotLight&quot;:o=new Uy(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||&quot;&quot;;break;case&quot;HemisphereLight&quot;:o=new SN(e.color,e.groundColor,e.intensity);break;case&quot;LightProbe&quot;:o=new TN().fromJSON(e);break;case&quot;SkinnedMesh&quot;:f=l(e.geometry),p=u(e.material),o=new my(f,p),e.bindMode!==void 0&amp;&amp;(o.bindMode=e.bindMode),e.bindMatrix!==void 0&amp;&amp;o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&amp;&amp;(o.skeleton=e.skeleton);break;case&quot;Mesh&quot;:f=l(e.geometry),p=u(e.material),o=new Sn(f,p);break;case&quot;InstancedMesh&quot;:f=l(e.geometry),p=u(e.material);const m=e.count,g=e.instanceMatrix,v=e.instanceColor;o=new dw(f,p,m),o.instanceMatrix=new Mc(new Float32Array(g.array),16),v!==void 0&amp;&amp;(o.instanceColor=new Mc(new Float32Array(v.array),v.itemSize));break;case&quot;BatchedMesh&quot;:f=l(e.geometry),p=u(e.material),o=new QD(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(x=&gt;{let b=null,_=null;return x.boundingBox!==void 0&amp;&amp;(b=new Ri,b.min.fromArray(x.boundingBox.min),b.max.fromArray(x.boundingBox.max)),x.boundingSphere!==void 0&amp;&amp;(_=new wi,_.radius=x.boundingSphere.radius,_.center.fromArray(x.boundingSphere.center)),{...x,boundingBox:b,boundingSphere:_}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=h(e.matricesTexture.uuid),o._indirectTexture=h(e.indirectTexture.uuid),e.colorsTexture!==void 0&amp;&amp;(o._colorsTexture=h(e.colorsTexture.uuid)),e.boundingSphere!==void 0&amp;&amp;(o.boundingSphere=new wi,o.boundingSphere.center.fromArray(e.boundingSphere.center),o.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&amp;&amp;(o.boundingBox=new Ri,o.boundingBox.min.fromArray(e.boundingBox.min),o.boundingBox.max.fromArray(e.boundingBox.max));break;case&quot;LOD&quot;:o=new JD;break;case&quot;Line&quot;:o=new xo(l(e.geometry),u(e.material));break;case&quot;LineLoop&quot;:o=new pw(l(e.geometry),u(e.material));break;case&quot;LineSegments&quot;:o=new Ur(l(e.geometry),u(e.material));break;case&quot;PointCloud&quot;:case&quot;Points&quot;:o=new _y(l(e.geometry),u(e.material));break;case&quot;Sprite&quot;:o=new ZD(u(e.material));break;case&quot;Group&quot;:o=new br;break;case&quot;Bone&quot;:o=new Yd;break;default:o=new nn}if(o.uuid=e.uuid,e.name!==void 0&amp;&amp;(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&amp;&amp;(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&amp;&amp;o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&amp;&amp;o.position.fromArray(e.position),e.rotation!==void 0&amp;&amp;o.rotation.fromArray(e.rotation),e.quaternion!==void 0&amp;&amp;o.quaternion.fromArray(e.quaternion),e.scale!==void 0&amp;&amp;o.scale.fromArray(e.scale)),e.up!==void 0&amp;&amp;o.up.fromArray(e.up),e.castShadow!==void 0&amp;&amp;(o.castShadow=e.castShadow),e.receiveShadow!==void 0&amp;&amp;(o.receiveShadow=e.receiveShadow),e.shadow&amp;&amp;(e.shadow.intensity!==void 0&amp;&amp;(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&amp;&amp;(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&amp;&amp;(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&amp;&amp;(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&amp;&amp;o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&amp;&amp;(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&amp;&amp;(o.visible=e.visible),e.frustumCulled!==void 0&amp;&amp;(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&amp;&amp;(o.renderOrder=e.renderOrder),e.userData!==void 0&amp;&amp;(o.userData=e.userData),e.layers!==void 0&amp;&amp;(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g&lt;m.length;g++)o.add(this.parseObject(m[g],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g&lt;m.length;g++){const v=m[g];o.animations.push(s[v])}}if(e.type===&quot;LOD&quot;){e.autoUpdate!==void 0&amp;&amp;(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g&lt;m.length;g++){const v=m[g],x=o.getObjectByProperty(&quot;uuid&quot;,v.object);x!==void 0&amp;&amp;o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&amp;&amp;e.traverse(function(i){if(i.isSkinnedMesh===!0&amp;&amp;i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn(&quot;THREE.ObjectLoader: No skeleton found with UUID:&quot;,i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty(&quot;uuid&quot;,i);r!==void 0?t.target=r:t.target=new nn}})}}const mB={UVMapping:ey,CubeReflectionMapping:fa,CubeRefractionMapping:fl,EquirectangularReflectionMapping:gd,EquirectangularRefractionMapping:yd,CubeUVReflectionMapping:Sh},kA={RepeatWrapping:ws,ClampToEdgeWrapping:rr,MirroredRepeatWrapping:ih},FA={NearestFilter:xi,NearestMipmapNearestFilter:ty,NearestMipmapLinearFilter:hc,LinearFilter:fi,LinearMipmapNearestFilter:Ju,LinearMipmapLinearFilter:Zr};class CN extends Ji{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap&gt;&quot;u&quot;&amp;&amp;console.warn(&quot;THREE.ImageBitmapLoader: createImageBitmap() not supported.&quot;),typeof fetch&gt;&quot;u&quot;&amp;&amp;console.warn(&quot;THREE.ImageBitmapLoader: fetch() not supported.&quot;),this.options={premultiplyAlpha:&quot;none&quot;}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&amp;&amp;(e=&quot;&quot;),this.path!==void 0&amp;&amp;(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=oa.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(h=&gt;{t&amp;&amp;t(h),s.manager.itemEnd(e)}).catch(h=&gt;{r&amp;&amp;r(h)});return}return setTimeout(function(){t&amp;&amp;t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin===&quot;anonymous&quot;?&quot;same-origin&quot;:&quot;include&quot;,l.headers=this.requestHeader;const u=fetch(e,l).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:&quot;none&quot;}))}).then(function(h){return oa.add(e,h),t&amp;&amp;t(h),s.manager.itemEnd(e),h}).catch(function(h){r&amp;&amp;r(h),oa.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});oa.add(e,u),s.manager.itemStart(e)}}let zm;class Dw{static getContext(){return zm===void 0&amp;&amp;(zm=new(window.AudioContext||window.webkitAudioContext)),zm}static setContext(e){zm=e}}class gB extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ns(this.manager);o.setResponseType(&quot;arraybuffer&quot;),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const h=u.slice(0);Dw.getContext().decodeAudioData(h,function(p){t(p)}).catch(l)}catch(h){l(h)}},i,r);function l(u){r?r(u):console.error(u),s.manager.itemError(e)}}}const zA=new yt,BA=new yt,ql=new yt;class yB{constructor(){this.type=&quot;StereoCamera&quot;,this.aspect=1,this.eyeSep=.064,this.cameraL=new Yn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ql.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(bc*t.fov*.5)/t.zoom;let l,u;BA.elements[12]=-r,zA.elements[12]=r,l=-o*t.aspect+s,u=o*t.aspect+s,ql.elements[0]=2*t.near/(u-l),ql.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(ql),l=-o*t.aspect-s,u=o*t.aspect-s,ql.elements[0]=2*t.near/(u-l),ql.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(ql)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(BA),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(zA)}}class RN extends Yn{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Nw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=HA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&amp;&amp;!this.running)return this.start(),0;if(this.running){const t=HA();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function HA(){return performance.now()}const Yl=new Y,VA=new Si,_B=new Y,Kl=new Y;class vB extends nn{constructor(){super(),this.type=&quot;AudioListener&quot;,this.context=Dw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Nw}getInput(){return this.gain}removeFilter(){return this.filter!==null&amp;&amp;(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yl,VA,_B),Kl.set(0,0,-1).applyQuaternion(VA),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yl.x,r),t.positionY.linearRampToValueAtTime(Yl.y,r),t.positionZ.linearRampToValueAtTime(Yl.z,r),t.forwardX.linearRampToValueAtTime(Kl.x,r),t.forwardY.linearRampToValueAtTime(Kl.y,r),t.forwardZ.linearRampToValueAtTime(Kl.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Yl.x,Yl.y,Yl.z),t.setOrientation(Kl.x,Kl.y,Kl.z,i.x,i.y,i.z)}}class ON extends nn{constructor(e){super(),this.type=&quot;Audio&quot;,this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType=&quot;empty&quot;,this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType=&quot;audioNode&quot;,this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType=&quot;mediaNode&quot;,this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType=&quot;mediaStreamNode&quot;,this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType=&quot;buffer&quot;,this.autoplay&amp;&amp;this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn(&quot;THREE.Audio: Audio is already playing.&quot;);return}if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.isPlaying===!0&amp;&amp;(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&amp;&amp;(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this._progress=0,this.source!==null&amp;&amp;(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length&gt;0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e&lt;t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length&gt;0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e&lt;t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&amp;&amp;this.source.detune!==void 0&amp;&amp;this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.playbackRate=e,this.isPlaying===!0&amp;&amp;this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.loop=e,this.isPlaying===!0&amp;&amp;(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!==&quot;buffer&quot;?(console.warn(&quot;THREE.Audio: Audio source type cannot be copied.&quot;),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const $l=new Y,GA=new Si,bB=new Y,Zl=new Y;class xB extends ON{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel=&quot;HRTF&quot;,this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&amp;&amp;this.isPlaying===!1)return;this.matrixWorld.decompose($l,GA,bB),Zl.set(0,0,1).applyQuaternion(GA);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime($l.x,i),t.positionY.linearRampToValueAtTime($l.y,i),t.positionZ.linearRampToValueAtTime($l.z,i),t.orientationX.linearRampToValueAtTime(Zl.x,i),t.orientationY.linearRampToValueAtTime(Zl.y,i),t.orientationZ.linearRampToValueAtTime(Zl.z,i)}else t.setPosition($l.x,$l.y,$l.z),t.setOrientation(Zl.x,Zl.y,Zl.z)}}class SB{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i&lt;t.length;i++)e+=t[i];return e/t.length}}class DN{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case&quot;quaternion&quot;:r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case&quot;string&quot;:case&quot;bool&quot;:r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)i[s+l]=i[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&amp;&amp;this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s&lt;1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-s,t)}o&gt;0&amp;&amp;this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(i[u]!==i[u+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i&lt;t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i&lt;this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r&gt;=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Si.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Si.multiplyQuaternionsFlat(e,o,e,t,e,i),Si.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*o+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[i+o]*r}}}const Iw=&quot;\\[\\]\\.:\\/&quot;,wB=new RegExp(&quot;[&quot;+Iw+&quot;]&quot;,&quot;g&quot;),Pw=&quot;[^&quot;+Iw+&quot;]&quot;,EB=&quot;[^&quot;+Iw.replace(&quot;\\.&quot;,&quot;&quot;)+&quot;]&quot;,TB=/((?:WC+[\/:])*)/.source.replace(&quot;WC&quot;,Pw),MB=/(WCOD+)?/.source.replace(&quot;WCOD&quot;,EB),AB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace(&quot;WC&quot;,Pw),CB=/\.(WC+)(?:\[(.+)\])?/.source.replace(&quot;WC&quot;,Pw),RB=new RegExp(&quot;^&quot;+TB+MB+AB+CB+&quot;$&quot;),OB=[&quot;material&quot;,&quot;materials&quot;,&quot;bones&quot;,&quot;map&quot;];class DB{constructor(e,t,i){const r=i||mn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&amp;&amp;r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class mn{constructor(e,t,i){this.path=t,this.parsedPath=i||mn.parseTrackName(t),this.node=mn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&amp;&amp;e.isAnimationObjectGroup?new mn.Composite(e,t,i):new mn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,&quot;_&quot;).replace(wB,&quot;&quot;)}static parseTrackName(e){const t=RB.exec(e);if(t===null)throw new Error(&quot;PropertyBinding: Cannot parse trackName: &quot;+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&amp;&amp;i.nodeName.lastIndexOf(&quot;.&quot;);if(r!==void 0&amp;&amp;r!==-1){const s=i.nodeName.substring(r+1);OB.indexOf(s)!==-1&amp;&amp;(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error(&quot;PropertyBinding: can not parse propertyName from trackName: &quot;+e);return i}static findNode(e,t){if(t===void 0||t===&quot;&quot;||t===&quot;.&quot;||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o&lt;s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const u=i(l.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=mn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn(&quot;THREE.PropertyBinding: No target node found for track: &quot;+this.path+&quot;.&quot;);return}if(i){let h=t.objectIndex;switch(i){case&quot;materials&quot;:if(!e.material){console.error(&quot;THREE.PropertyBinding: Can not bind to material as node does not have a material.&quot;,this);return}if(!e.material.materials){console.error(&quot;THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.&quot;,this);return}e=e.material.materials;break;case&quot;bones&quot;:if(!e.skeleton){console.error(&quot;THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.&quot;,this);return}e=e.skeleton.bones;for(let f=0;f&lt;e.length;f++)if(e[f].name===h){h=f;break}break;case&quot;map&quot;:if(&quot;map&quot;in e){e=e.map;break}if(!e.material){console.error(&quot;THREE.PropertyBinding: Can not bind to material as node does not have a material.&quot;,this);return}if(!e.material.map){console.error(&quot;THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.&quot;,this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error(&quot;THREE.PropertyBinding: Can not bind to objectName of node undefined.&quot;,this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error(&quot;THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.&quot;,this,e);return}e=e[h]}}const o=e[r];if(o===void 0){const h=t.nodeName;console.error(&quot;THREE.PropertyBinding: Trying to update property for track: &quot;+h+&quot;.&quot;+r+&quot; but it wasn&#x27;t found.&quot;,e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&amp;&amp;(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r===&quot;morphTargetInfluences&quot;){if(!e.geometry){console.error(&quot;THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.&quot;,this);return}if(!e.geometry.morphAttributes){console.error(&quot;THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.&quot;,this);return}e.morphTargetDictionary[s]!==void 0&amp;&amp;(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&amp;&amp;o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mn.Composite=DB;mn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mn.prototype.GetterByBindingType=[mn.prototype._getValue_direct,mn.prototype._getValue_array,mn.prototype._getValue_arrayElement,mn.prototype._getValue_toArray];mn.prototype.SetterByBindingTypeAndVersioning=[[mn.prototype._setValue_direct,mn.prototype._setValue_direct_setNeedsUpdate,mn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_array,mn.prototype._setValue_array_setNeedsUpdate,mn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_arrayElement,mn.prototype._setValue_arrayElement_setNeedsUpdate,mn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mn.prototype._setValue_fromArray,mn.prototype._setValue_fromArray_setNeedsUpdate,mn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class NB{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Jr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,u=e.length,h=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const m=arguments[f],g=m.uuid;let v=t[g];if(v===void 0){v=u++,t[g]=v,e.push(m);for(let x=0,b=o;x!==b;++x)s[x].push(new mn(m,i[x],r[x]))}else if(v&lt;h){l=e[v];const x=--h,b=e[x];t[b.uuid]=v,e[v]=b,t[g]=x,e[x]=m;for(let _=0,T=o;_!==T;++_){const w=s[_],E=w[x];let R=w[v];w[v]=E,R===void 0&amp;&amp;(R=new mn(m,i[_],r[_])),w[x]=R}}else e[v]!==l&amp;&amp;console.error(&quot;THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.&quot;)}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],h=u.uuid,f=t[h];if(f!==void 0&amp;&amp;f&gt;=s){const p=s++,m=e[p];t[m.uuid]=f,e[f]=m,t[h]=p,e[p]=u;for(let g=0,v=r;g!==v;++g){const x=i[g],b=x[p],_=x[f];x[f]=b,x[p]=_}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],f=h.uuid,p=t[f];if(p!==void 0)if(delete t[f],p&lt;s){const m=--s,g=e[m],v=--o,x=e[v];t[g.uuid]=p,e[p]=g,t[x.uuid]=m,e[m]=x,e.pop();for(let b=0,_=r;b!==_;++b){const T=i[b],w=T[m],E=T[v];T[p]=w,T[m]=E,T.pop()}}else{const m=--o,g=e[m];m&gt;0&amp;&amp;(t[g.uuid]=p),e[p]=g,e.pop();for(let v=0,x=r;v!==x;++v){const b=i[v];b[p]=b[m],b.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,u=this._objects,h=u.length,f=this.nCachedObjects_,p=new Array(h);r=s.length,i[e]=r,o.push(e),l.push(t),s.push(p);for(let m=f,g=u.length;m!==g;++m){const v=u[m];p[m]=new mn(v,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,u=o[l],h=e[l];t[h]=i,o[i]=u,o.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class NN{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),u={endingStart:fc,endingEnd:fc};for(let h=0;h!==o;++h){const f=s[h].createInterpolant(null);l[h]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=RD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&amp;&amp;!this.paused&amp;&amp;this.timeScale!==0&amp;&amp;this._startTime===null&amp;&amp;this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&amp;&amp;(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&amp;&amp;(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=s,u[1]=s+i,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&amp;&amp;(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*i;u&lt;0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l&gt;0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case ow:for(let f=0,p=u.length;f!==p;++f)u[f].evaluate(o),h[f].accumulateAdditive(l);break;case ay:default:for(let f=0,p=u.length;f!==p;++f)u[f].evaluate(o),h[f].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e&gt;i.parameterPositions[1]&amp;&amp;(this.stopFading(),r===0&amp;&amp;(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e&gt;i.parameterPositions[1]&amp;&amp;(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===OD;if(e===0)return s===-1?r:o&amp;&amp;(s&amp;1)===1?t-r:r;if(i===CD){s===-1&amp;&amp;(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r&gt;=t)r=t;else if(r&lt;0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:&quot;finished&quot;,action:this,direction:e&lt;0?-1:1})}}else{if(s===-1&amp;&amp;(e&gt;=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r&gt;=t||r&lt;0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u&lt;=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e&gt;0?t:0,this.time=r,this._mixer.dispatchEvent({type:&quot;finished&quot;,action:this,direction:e&gt;0?1:-1});else{if(u===1){const h=e&lt;0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:&quot;loop&quot;,action:this,loopDelta:l})}}else this.time=r;if(o&amp;&amp;(s&amp;1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=dc,r.endingEnd=dc):(e?r.endingStart=this.zeroSlopeAtStart?dc:fc:r.endingStart=_d,t?r.endingEnd=this.zeroSlopeAtEnd?dc:fc:r.endingEnd=_d)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&amp;&amp;(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=i,this}}const IB=new Float32Array(1);class IN extends To{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,u=i.uuid,h=this._bindingsByRootAndName;let f=h[u];f===void 0&amp;&amp;(f={},h[u]=f);for(let p=0;p!==s;++p){const m=r[p],g=m.name;let v=f[g];if(v!==void 0)++v.referenceCount,o[p]=v;else{if(v=o[p],v!==void 0){v._cacheIndex===null&amp;&amp;(++v.referenceCount,this._addInactiveBinding(v,u,g));continue}const x=t&amp;&amp;t._propertyBindings[p].binding.parsedPath;v=new DN(mn.create(i,g,x),m.ValueTypeName,m.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,u,g),o[p]=v}l[p].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&amp;&amp;s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&amp;&amp;(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&amp;&amp;(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&amp;&amp;t&lt;this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],u=l.knownActions,h=u[u.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,u[f]=h,u.pop(),e._byClipCacheIndex=null;const p=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],u.length===0&amp;&amp;delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&amp;&amp;this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&amp;&amp;(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,l=o[r],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete l[s],Object.keys(l).length===0&amp;&amp;delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&amp;&amp;(i=new Mw(new Float32Array(2),new Float32Array(2),1,IB),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e==&quot;string&quot;?ml.findByName(r,e):e;const l=o!==null?o.uuid:e,u=this._actionsByClip[l];let h=null;if(i===void 0&amp;&amp;(o!==null?i=o.blendMode:i=ay),u!==void 0){const p=u.actionByRoot[s];if(p!==void 0&amp;&amp;p.blendMode===i)return p;h=u.knownActions[0],o===null&amp;&amp;(o=h._clip)}if(o===null)return null;const f=new NN(this,o,t,i);return this._bindAction(f,h),this._addInactiveAction(f,l,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e==&quot;string&quot;?ml.findByName(i,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&amp;&amp;l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i&gt;=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==i;++h)t[h]._update(r,e,s,o);const l=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)l[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t&lt;this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let l=0,u=o.length;l!==u;++l){const h=o[l];this._deactivateAction(h);const f=h._cacheIndex,p=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=f,t[f]=p,t.pop(),this._removeInactiveBindingsForAction(h)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const l=i[o].actionByRoot,u=l[t];u!==void 0&amp;&amp;(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&amp;&amp;(this._deactivateAction(i),this._removeInactiveAction(i))}}class PB extends ly{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new cy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class LB extends ly{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Wd(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Lw{constructor(e){this.value=e}clone(){return new Lw(this.value.clone===void 0?this.value:this.value.clone())}}let UB=0;class kB extends To{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,&quot;id&quot;,{value:UB++}),this.name=&quot;&quot;,this.usage=bd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&amp;&amp;this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i&lt;r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o&lt;s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class FB extends qd{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class zB{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name=&quot;&quot;,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&amp;&amp;this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const jA=new yt;class PN{constructor(e,t,i=0,r=1/0){this.ray=new bl(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new uy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error(&quot;THREE.Raycaster: Unsupported camera type: &quot;+t.type)}setFromXRController(e){return jA.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(jA),this}intersectObject(e,t=!0,i=[]){return cS(e,this,i,t),i.sort(WA),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r&lt;s;r++)cS(e[r],this,i,t);return i.sort(WA),i}}function WA(n,e){return n.distance-e.distance}function cS(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&amp;&amp;n.raycast(e,t)===!1&amp;&amp;(r=!1),r===!0&amp;&amp;i===!0){const s=n.children;for(let o=0,l=s.length;o&lt;l;o++)cS(s[o],e,t,!0)}}class uS{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Vt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Vt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class BB{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Uw{constructor(e,t,i,r){Uw.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&amp;&amp;this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i&lt;4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const XA=new Oe;class HB{constructor(e=new Oe(1/0,1/0),t=new Oe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t&lt;i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=XA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x&lt;this.min.x||this.max.y&lt;this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x&gt;=this.min.x&amp;&amp;e.x&lt;=this.max.x&amp;&amp;e.y&gt;=this.min.y&amp;&amp;e.y&lt;=this.max.y}containsBox(e){return this.min.x&lt;=e.min.x&amp;&amp;e.max.x&lt;=this.max.x&amp;&amp;this.min.y&lt;=e.min.y&amp;&amp;e.max.y&lt;=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x&gt;=this.min.x&amp;&amp;e.min.x&lt;=this.max.x&amp;&amp;e.max.y&gt;=this.min.y&amp;&amp;e.min.y&lt;=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,XA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&amp;&amp;this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&amp;&amp;e.max.equals(this.max)}}const qA=new Y,Bm=new Y;class VB{constructor(e=new Y,t=new Y){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){qA.subVectors(e,this.start),Bm.subVectors(this.end,this.start);const i=Bm.dot(Bm);let s=Bm.dot(qA)/i;return t&amp;&amp;(s=Vt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&amp;&amp;e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const YA=new Y;class GB extends nn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type=&quot;SpotLightHelper&quot;;const i=new Lt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,u=32;o&lt;u;o++,l++){const h=o/u*Math.PI*2,f=l/u*Math.PI*2;r.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}i.setAttribute(&quot;position&quot;,new ct(r,3));const s=new Zi({fog:!1,toneMapped:!1});this.cone=new Ur(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),YA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(YA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qa=new Y,Hm=new yt,Gb=new yt;class jB extends Ur{constructor(e){const t=LN(e),i=new Lt,r=[],s=[],o=new $e(0,0,1),l=new $e(0,1,0);for(let h=0;h&lt;t.length;h++){const f=t[h];f.parent&amp;&amp;f.parent.isBone&amp;&amp;(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}i.setAttribute(&quot;position&quot;,new ct(r,3)),i.setAttribute(&quot;color&quot;,new ct(s,3));const u=new Zi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type=&quot;SkeletonHelper&quot;,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute(&quot;position&quot;);Gb.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s&lt;t.length;s++){const l=t[s];l.parent&amp;&amp;l.parent.isBone&amp;&amp;(Hm.multiplyMatrices(Gb,l.matrixWorld),qa.setFromMatrixPosition(Hm),r.setXYZ(o,qa.x,qa.y,qa.z),Hm.multiplyMatrices(Gb,l.parent.matrixWorld),qa.setFromMatrixPosition(Hm),r.setXYZ(o+1,qa.x,qa.y,qa.z),o+=2)}i.getAttribute(&quot;position&quot;).needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function LN(n){const e=[];n.isBone===!0&amp;&amp;e.push(n);for(let t=0;t&lt;n.children.length;t++)e.push(...LN(n.children[t]));return e}class WB extends Sn{constructor(e,t,i){const r=new Ch(t,4,2),s=new $i({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type=&quot;PointLightHelper&quot;,this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const XB=new Y,KA=new $e,$A=new $e;class qB extends nn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type=&quot;HemisphereLightHelper&quot;;const r=new $d(t);r.rotateY(Math.PI*.5),this.material=new $i({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&amp;&amp;(this.material.vertexColors=!0);const s=r.getAttribute(&quot;position&quot;),o=new Float32Array(s.count*3);r.setAttribute(&quot;color&quot;,new Jt(o,3)),this.add(new Sn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute(&quot;color&quot;);KA.copy(this.light.color),$A.copy(this.light.groundColor);for(let i=0,r=t.count;i&lt;r;i++){const s=i&lt;r/2?KA:$A;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(XB.setFromMatrixPosition(this.light.matrixWorld).negate())}}class UN extends Ur{constructor(e=10,t=10,i=4473924,r=8947848){i=new $e(i),r=new $e(r);const s=t/2,o=e/t,l=e/2,u=[],h=[];for(let m=0,g=0,v=-l;m&lt;=t;m++,v+=o){u.push(-l,0,v,l,0,v),u.push(v,0,-l,v,0,l);const x=m===s?i:r;x.toArray(h,g),g+=3,x.toArray(h,g),g+=3,x.toArray(h,g),g+=3,x.toArray(h,g),g+=3}const f=new Lt;f.setAttribute(&quot;position&quot;,new ct(u,3)),f.setAttribute(&quot;color&quot;,new ct(h,3));const p=new Zi({vertexColors:!0,toneMapped:!1});super(f,p),this.type=&quot;GridHelper&quot;}dispose(){this.geometry.dispose(),this.material.dispose()}}class YB extends Ur{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new $e(s),o=new $e(o);const l=[],u=[];if(t&gt;1)for(let p=0;p&lt;t;p++){const m=p/t*(Math.PI*2),g=Math.sin(m)*e,v=Math.cos(m)*e;l.push(0,0,0),l.push(g,0,v);const x=p&amp;1?s:o;u.push(x.r,x.g,x.b),u.push(x.r,x.g,x.b)}for(let p=0;p&lt;i;p++){const m=p&amp;1?s:o,g=e-e/i*p;for(let v=0;v&lt;r;v++){let x=v/r*(Math.PI*2),b=Math.sin(x)*g,_=Math.cos(x)*g;l.push(b,0,_),u.push(m.r,m.g,m.b),x=(v+1)/r*(Math.PI*2),b=Math.sin(x)*g,_=Math.cos(x)*g,l.push(b,0,_),u.push(m.r,m.g,m.b)}}const h=new Lt;h.setAttribute(&quot;position&quot;,new ct(l,3)),h.setAttribute(&quot;color&quot;,new ct(u,3));const f=new Zi({vertexColors:!0,toneMapped:!1});super(h,f),this.type=&quot;PolarGridHelper&quot;}dispose(){this.geometry.dispose(),this.material.dispose()}}const ZA=new Y,Vm=new Y,JA=new Y;class KB extends nn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type=&quot;DirectionalLightHelper&quot;,t===void 0&amp;&amp;(t=1);let r=new Lt;r.setAttribute(&quot;position&quot;,new ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Zi({fog:!1,toneMapped:!1});this.lightPlane=new xo(r,s),this.add(this.lightPlane),r=new Lt,r.setAttribute(&quot;position&quot;,new ct([0,0,0,0,0,1],3)),this.targetLine=new xo(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ZA.setFromMatrixPosition(this.light.matrixWorld),Vm.setFromMatrixPosition(this.light.target.matrixWorld),JA.subVectors(Vm,ZA),this.lightPlane.lookAt(Vm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Vm),this.targetLine.scale.z=JA.length()}}const Gm=new Y,ui=new hy;class $B extends Ur{constructor(e){const t=new Lt,i=new Zi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l(&quot;n1&quot;,&quot;n2&quot;),l(&quot;n2&quot;,&quot;n4&quot;),l(&quot;n4&quot;,&quot;n3&quot;),l(&quot;n3&quot;,&quot;n1&quot;),l(&quot;f1&quot;,&quot;f2&quot;),l(&quot;f2&quot;,&quot;f4&quot;),l(&quot;f4&quot;,&quot;f3&quot;),l(&quot;f3&quot;,&quot;f1&quot;),l(&quot;n1&quot;,&quot;f1&quot;),l(&quot;n2&quot;,&quot;f2&quot;),l(&quot;n3&quot;,&quot;f3&quot;),l(&quot;n4&quot;,&quot;f4&quot;),l(&quot;p&quot;,&quot;n1&quot;),l(&quot;p&quot;,&quot;n2&quot;),l(&quot;p&quot;,&quot;n3&quot;),l(&quot;p&quot;,&quot;n4&quot;),l(&quot;u1&quot;,&quot;u2&quot;),l(&quot;u2&quot;,&quot;u3&quot;),l(&quot;u3&quot;,&quot;u1&quot;),l(&quot;c&quot;,&quot;t&quot;),l(&quot;p&quot;,&quot;c&quot;),l(&quot;cn1&quot;,&quot;cn2&quot;),l(&quot;cn3&quot;,&quot;cn4&quot;),l(&quot;cf1&quot;,&quot;cf2&quot;),l(&quot;cf3&quot;,&quot;cf4&quot;);function l(v,x){u(v),u(x)}function u(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&amp;&amp;(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute(&quot;position&quot;,new ct(r,3)),t.setAttribute(&quot;color&quot;,new ct(s,3)),super(t,i),this.type=&quot;CameraHelper&quot;,this.camera=e,this.camera.updateProjectionMatrix&amp;&amp;this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new $e(16755200),f=new $e(16711680),p=new $e(43775),m=new $e(16777215),g=new $e(3355443);this.setColors(h,f,p,m,g)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute(&quot;color&quot;);l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;ui.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Es?-1:0;_i(&quot;c&quot;,t,e,ui,0,0,s),_i(&quot;t&quot;,t,e,ui,0,0,1),_i(&quot;n1&quot;,t,e,ui,-1,-1,s),_i(&quot;n2&quot;,t,e,ui,i,-1,s),_i(&quot;n3&quot;,t,e,ui,-1,r,s),_i(&quot;n4&quot;,t,e,ui,i,r,s),_i(&quot;f1&quot;,t,e,ui,-1,-1,1),_i(&quot;f2&quot;,t,e,ui,i,-1,1),_i(&quot;f3&quot;,t,e,ui,-1,r,1),_i(&quot;f4&quot;,t,e,ui,i,r,1),_i(&quot;u1&quot;,t,e,ui,i*.7,r*1.1,s),_i(&quot;u2&quot;,t,e,ui,-1*.7,r*1.1,s),_i(&quot;u3&quot;,t,e,ui,0,r*2,s),_i(&quot;cf1&quot;,t,e,ui,-1,0,1),_i(&quot;cf2&quot;,t,e,ui,i,0,1),_i(&quot;cf3&quot;,t,e,ui,0,-1,1),_i(&quot;cf4&quot;,t,e,ui,0,r,1),_i(&quot;cn1&quot;,t,e,ui,-1,0,s),_i(&quot;cn2&quot;,t,e,ui,i,0,s),_i(&quot;cn3&quot;,t,e,ui,0,-1,s),_i(&quot;cn4&quot;,t,e,ui,0,r,s),e.getAttribute(&quot;position&quot;).needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function _i(n,e,t,i,r,s,o){Gm.set(r,s,o).unproject(i);const l=e[n];if(l!==void 0){const u=t.getAttribute(&quot;position&quot;);for(let h=0,f=l.length;h&lt;f;h++)u.setXYZ(l[h],Gm.x,Gm.y,Gm.z)}}const jm=new Ri;class ZB extends Ur{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Lt;s.setIndex(new Jt(i,1)),s.setAttribute(&quot;position&quot;,new Jt(r,3)),super(s,new Zi({color:t,toneMapped:!1})),this.object=e,this.type=&quot;BoxHelper&quot;,this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&amp;&amp;jm.setFromObject(this.object),jm.isEmpty())return;const e=jm.min,t=jm.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class JB extends Ur{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Lt;s.setIndex(new Jt(i,1)),s.setAttribute(&quot;position&quot;,new ct(r,3)),super(s,new Zi({color:t,toneMapped:!1})),this.box=e,this.type=&quot;Box3Helper&quot;,this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class QB extends xo{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Lt;o.setAttribute(&quot;position&quot;,new ct(s,3)),o.computeBoundingSphere(),super(o,new Zi({color:r,toneMapped:!1})),this.type=&quot;PlaneHelper&quot;,this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Lt;u.setAttribute(&quot;position&quot;,new ct(l,3)),u.computeBoundingSphere(),this.add(new Sn(u,new $i({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const QA=new Y;let Wm,jb;class e4 extends nn{constructor(e=new Y(0,0,1),t=new Y(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type=&quot;ArrowHelper&quot;,Wm===void 0&amp;&amp;(Wm=new Lt,Wm.setAttribute(&quot;position&quot;,new ct([0,0,0,0,1,0],3)),jb=new Kd(.5,1,5,1),jb.translate(0,-.5,0)),this.position.copy(t),this.line=new xo(Wm,new Zi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Sn(jb,new $i({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y&gt;.99999)this.quaternion.set(0,0,0,1);else if(e.y&lt;-.99999)this.quaternion.set(1,0,0,0);else{QA.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(QA,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class t4 extends Ur{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Lt;r.setAttribute(&quot;position&quot;,new ct(t,3)),r.setAttribute(&quot;color&quot;,new ct(i,3));const s=new Zi({vertexColors:!0,toneMapped:!1});super(r,s),this.type=&quot;AxesHelper&quot;}setColors(e,t,i){const r=new $e,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class n4{constructor(){this.type=&quot;ShapePath&quot;,this.color=new $e,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new C0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(_){const T=[];for(let w=0,E=_.length;w&lt;E;w++){const R=_[w],N=new xc;N.curves=R.curves,T.push(N)}return T}function i(_,T){const w=T.length;let E=!1;for(let R=w-1,N=0;N&lt;w;R=N++){let A=T[R],D=T[N],C=D.x-A.x,O=D.y-A.y;if(Math.abs(O)&gt;Number.EPSILON){if(O&lt;0&amp;&amp;(A=T[N],C=-C,D=T[R],O=-O),_.y&lt;A.y||_.y&gt;D.y)continue;if(_.y===A.y){if(_.x===A.x)return!0}else{const L=O*(_.x-A.x)-C*(_.y-A.y);if(L===0)return!0;if(L&lt;0)continue;E=!E}}else{if(_.y!==A.y)continue;if(D.x&lt;=_.x&amp;&amp;_.x&lt;=A.x||A.x&lt;=_.x&amp;&amp;_.x&lt;=D.x)return!0}}return E}const r=qs.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,u;const h=[];if(s.length===1)return l=s[0],u=new xc,u.curves=l.curves,h.push(u),h;let f=!r(s[0].getPoints());f=e?!f:f;const p=[],m=[];let g=[],v=0,x;m[v]=void 0,g[v]=[];for(let _=0,T=s.length;_&lt;T;_++)l=s[_],x=l.getPoints(),o=r(x),o=e?!o:o,o?(!f&amp;&amp;m[v]&amp;&amp;v++,m[v]={s:new xc,p:x},m[v].s.curves=l.curves,f&amp;&amp;v++,g[v]=[]):g[v].push({h:l,p:x[0]});if(!m[0])return t(s);if(m.length&gt;1){let _=!1,T=0;for(let w=0,E=m.length;w&lt;E;w++)p[w]=[];for(let w=0,E=m.length;w&lt;E;w++){const R=g[w];for(let N=0;N&lt;R.length;N++){const A=R[N];let D=!0;for(let C=0;C&lt;m.length;C++)i(A.p,m[C].p)&amp;&amp;(w!==C&amp;&amp;T++,D?(D=!1,p[C].push(A)):_=!0);D&amp;&amp;p[w].push(A)}}T&gt;0&amp;&amp;_===!1&amp;&amp;(g=p)}let b;for(let _=0,T=m.length;_&lt;T;_++){u=m[_].s,h.push(u),b=g[_];for(let w=0,E=b.length;w&lt;E;w++)u.holes.push(b[w].h)}return h}}let kN=class extends To{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn(&quot;THREE.Controls: connect() now requires an element.&quot;);return}this.domElement!==null&amp;&amp;this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function i4(n,e){const t=n.image&amp;&amp;n.image.width?n.image.width/n.image.height:1;return t&gt;e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function r4(n,e){const t=n.image&amp;&amp;n.image.width?n.image.width/n.image.height:1;return t&gt;e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function s4(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function hS(n,e,t,i){const r=o4(i);switch(t){case nw:return n*e;case Gd:return n*e/r.components*r.byteLength;case jd:return n*e/r.components*r.byteLength;case rw:return n*e*2/r.components*r.byteLength;case sy:return n*e*2/r.components*r.byteLength;case iw:return n*e*3/r.components*r.byteLength;case vr:return n*e*4/r.components*r.byteLength;case oy:return n*e*4/r.components*r.byteLength;case id:case rd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case sd:case od:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Qg:case t0:return Math.max(n,16)*Math.max(e,8)/4;case Jg:case e0:return Math.max(n,8)*Math.max(e,8)/2;case n0:case i0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case r0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case s0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case o0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case a0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case l0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case c0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case u0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case h0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case f0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case d0:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case p0:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case m0:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case g0:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case y0:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case _0:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case ad:case v0:case b0:return Math.ceil(n/4)*Math.ceil(e/4)*16;case sw:case x0:return Math.ceil(n/4)*Math.ceil(e/4)*8;case S0:case w0:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function o4(n){switch(n){case es:case QS:return{byteLength:1,components:1};case rh:case ew:case wh:return{byteLength:2,components:1};case iy:case ry:return{byteLength:2,components:4};case da:case ny:case Pr:return{byteLength:4,components:1};case tw:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class a4{static contain(e,t){return i4(e,t)}static cover(e,t){return r4(e,t)}static fill(e){return s4(e)}static getByteLength(e,t,i,r){return hS(e,t,i,r)}}typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;register&quot;,{detail:{revision:Q0}}));typeof window&lt;&quot;u&quot;&amp;&amp;(window.__THREE__?console.warn(&quot;WARNING: Multiple instances of Three.js being imported.&quot;):window.__THREE__=Q0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function FN(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&amp;&amp;t!==null&amp;&amp;(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function l4(n){const e=new WeakMap;function t(l,u){const h=l.array,f=l.usage,p=h.byteLength,m=n.createBuffer();n.bindBuffer(u,m),n.bufferData(u,h,f),l.onUploadCallback();let g;if(h instanceof Float32Array)g=n.FLOAT;else if(h instanceof Uint16Array)l.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)g=n.SHORT;else if(h instanceof Uint32Array)g=n.UNSIGNED_INT;else if(h instanceof Int32Array)g=n.INT;else if(h instanceof Int8Array)g=n.BYTE;else if(h instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error(&quot;THREE.WebGLAttributes: Unsupported buffer data format: &quot;+h);return{buffer:m,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version,size:p}}function i(l,u,h){const f=u.array,p=u.updateRanges;if(n.bindBuffer(h,l),p.length===0)n.bufferSubData(h,0,f);else{p.sort((g,v)=&gt;g.start-v.start);let m=0;for(let g=1;g&lt;p.length;g++){const v=p[m],x=p[g];x.start&lt;=v.start+v.count+1?v.count=Math.max(v.count,x.start+x.count-v.start):(++m,p[m]=x)}p.length=m+1;for(let g=0,v=p.length;g&lt;v;g++){const x=p[g];n.bufferSubData(h,x.start*f.BYTES_PER_ELEMENT,f,x.start,x.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&amp;&amp;(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&amp;&amp;(l=l.data);const u=e.get(l);u&amp;&amp;(n.deleteBuffer(u.buffer),e.delete(l))}function o(l,u){if(l.isInterleavedBufferAttribute&amp;&amp;(l=l.data),l.isGLBufferAttribute){const f=e.get(l);(!f||f.version&lt;l.version)&amp;&amp;e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const h=e.get(l);if(h===void 0)e.set(l,t(l,u));else if(h.version&lt;l.version){if(h.size!==l.array.byteLength)throw new Error(&quot;THREE.WebGLAttributes: The size of the buffer attribute&#x27;s array buffer does not match the original size. Resizing buffer attributes is not supported.&quot;);i(h.buffer,l,u),h.version=l.version}}return{get:r,remove:s,update:o}}var c4=`#ifdef USE_ALPHAHASH
    if ( diffuseColor.a &lt; getAlphaHashThreshold( vPosition ) ) discard;
#endif`,u4=`#ifdef USE_ALPHAHASH
    const float ALPHA_HASH_SCALE = 0.05;
    float hash2D( vec2 value ) {
            return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
    }
    float hash3D( vec3 value ) {
            return hash2D( vec2( hash2D( value.xy ), value.z ) );
    }
    float getAlphaHashThreshold( vec3 position ) {
            float maxDeriv = max(
                    length( dFdx( position.xyz ) ),
                    length( dFdy( position.xyz ) )
            );
            float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
            vec2 pixScales = vec2(
                    exp2( floor( log2( pixScale ) ) ),
                    exp2( ceil( log2( pixScale ) ) )
            );
            vec2 alpha = vec2(
                    hash3D( floor( pixScales.x * position.xyz ) ),
                    hash3D( floor( pixScales.y * position.xyz ) )
            );
            float lerpFactor = fract( log2( pixScale ) );
            float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
            float a = min( lerpFactor, 1.0 - lerpFactor );
            vec3 cases = vec3(
                    x * x / ( 2.0 * a * ( 1.0 - a ) ),
                    ( x - 0.5 * a ) / ( 1.0 - a ),
                    1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
            );
            float threshold = ( x &lt; ( 1.0 - a ) )
                    ? ( ( x &lt; a ) ? cases.x : cases.y )
                    : cases.z;
            return clamp( threshold , 1.0e-6, 1.0 );
    }
#endif`,h4=`#ifdef USE_ALPHAMAP
    diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,f4=`#ifdef USE_ALPHAMAP
    uniform sampler2D alphaMap;
#endif`,d4=`#ifdef USE_ALPHATEST
    #ifdef ALPHA_TO_COVERAGE
    diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
    if ( diffuseColor.a == 0.0 ) discard;
    #else
    if ( diffuseColor.a &lt; alphaTest ) discard;
    #endif
#endif`,p4=`#ifdef USE_ALPHATEST
    uniform float alphaTest;
#endif`,m4=`#ifdef USE_AOMAP
    float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
    reflectedLight.indirectDiffuse *= ambientOcclusion;
    #if defined( USE_CLEARCOAT )
            clearcoatSpecularIndirect *= ambientOcclusion;
    #endif
    #if defined( USE_SHEEN )
            sheenSpecularIndirect *= ambientOcclusion;
    #endif
    #if defined( USE_ENVMAP ) &amp;&amp; defined( STANDARD )
            float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
            reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
    #endif
#endif`,g4=`#ifdef USE_AOMAP
    uniform sampler2D aoMap;
    uniform float aoMapIntensity;
#endif`,y4=`#ifdef USE_BATCHING
    #if ! defined( GL_ANGLE_multi_draw )
    #define gl_DrawID _gl_DrawID
    uniform int _gl_DrawID;
    #endif
    uniform highp sampler2D batchingTexture;
    uniform highp usampler2D batchingIdTexture;
    mat4 getBatchingMatrix( const in float i ) {
            int size = textureSize( batchingTexture, 0 ).x;
            int j = int( i ) * 4;
            int x = j % size;
            int y = j / size;
            vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
            vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
            vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
            vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
            return mat4( v1, v2, v3, v4 );
    }
    float getIndirectIndex( const in int i ) {
            int size = textureSize( batchingIdTexture, 0 ).x;
            int x = i % size;
            int y = i / size;
            return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
    }
#endif
#ifdef USE_BATCHING_COLOR
    uniform sampler2D batchingColorTexture;
    vec3 getBatchingColor( const in float i ) {
            int size = textureSize( batchingColorTexture, 0 ).x;
            int j = int( i );
            int x = j % size;
            int y = j / size;
            return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
    }
#endif`,_4=`#ifdef USE_BATCHING
    mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,v4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
    vPosition = vec3( position );
#endif`,b4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
    vec3 objectTangent = vec3( tangent.xyz );
#endif`,x4=`float G_BlinnPhong_Implicit( ) {
    return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
    return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
    vec3 halfDir = normalize( lightDir + viewDir );
    float dotNH = saturate( dot( normal, halfDir ) );
    float dotVH = saturate( dot( viewDir, halfDir ) );
    vec3 F = F_Schlick( specularColor, 1.0, dotVH );
    float G = G_BlinnPhong_Implicit( );
    float D = D_BlinnPhong( shininess, dotNH );
    return F * ( G * D );
} // validated`,S4=`#ifdef USE_IRIDESCENCE
    const mat3 XYZ_TO_REC709 = mat3(
             3.2404542, -0.9692660,  0.0556434,
            -1.5371385,  1.8760108, -0.2040259,
            -0.4985314,  0.0415560,  1.0572252
    );
    vec3 Fresnel0ToIor( vec3 fresnel0 ) {
            vec3 sqrtF0 = sqrt( fresnel0 );
            return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
    }
    vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
            return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
    }
    float IorToFresnel0( float transmittedIor, float incidentIor ) {
            return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
    }
    vec3 evalSensitivity( float OPD, vec3 shift ) {
            float phase = 2.0 * PI * OPD * 1.0e-9;
            vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
            vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
            vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
            vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
            xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
            xyz /= 1.0685e-7;
            vec3 rgb = XYZ_TO_REC709 * xyz;
            return rgb;
    }
    vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
            vec3 I;
            float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
            float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
            float cosTheta2Sq = 1.0 - sinTheta2Sq;
            if ( cosTheta2Sq &lt; 0.0 ) {
                    return vec3( 1.0 );
            }
            float cosTheta2 = sqrt( cosTheta2Sq );
            float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
            float R12 = F_Schlick( R0, 1.0, cosTheta1 );
            float T121 = 1.0 - R12;
            float phi12 = 0.0;
            if ( iridescenceIOR &lt; outsideIOR ) phi12 = PI;
            float phi21 = PI - phi12;
            vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );           vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
            vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
            vec3 phi23 = vec3( 0.0 );
            if ( baseIOR[ 0 ] &lt; iridescenceIOR ) phi23[ 0 ] = PI;
            if ( baseIOR[ 1 ] &lt; iridescenceIOR ) phi23[ 1 ] = PI;
            if ( baseIOR[ 2 ] &lt; iridescenceIOR ) phi23[ 2 ] = PI;
            float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
            vec3 phi = vec3( phi21 ) + phi23;
            vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
            vec3 r123 = sqrt( R123 );
            vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
            vec3 C0 = R12 + Rs;
            I = C0;
            vec3 Cm = Rs - T121;
            for ( int m = 1; m &lt;= 2; ++ m ) {
                    Cm *= r123;
                    vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
                    I += Cm * Sm;
            }
            return max( I, vec3( 0.0 ) );
    }
#endif`,w4=`#ifdef USE_BUMPMAP
    uniform sampler2D bumpMap;
    uniform float bumpScale;
    vec2 dHdxy_fwd() {
            vec2 dSTdx = dFdx( vBumpMapUv );
            vec2 dSTdy = dFdy( vBumpMapUv );
            float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
            float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
            float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
            return vec2( dBx, dBy );
    }
    vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
            vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
            vec3 vN = surf_norm;
            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * surf_norm - vGrad );
    }
#endif`,E4=`#if NUM_CLIPPING_PLANES &gt; 0
    vec4 plane;
    #ifdef ALPHA_TO_COVERAGE
            float distanceToPlane, distanceGradient;
            float clipOpacity = 1.0;
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; UNION_CLIPPING_PLANES; i ++ ) {
                    plane = clippingPlanes[ i ];
                    distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
                    distanceGradient = fwidth( distanceToPlane ) / 2.0;
                    clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
                    if ( clipOpacity == 0.0 ) discard;
            }
            #pragma unroll_loop_end
            #if UNION_CLIPPING_PLANES &lt; NUM_CLIPPING_PLANES
                    float unionClipOpacity = 1.0;
                    #pragma unroll_loop_start
                    for ( int i = UNION_CLIPPING_PLANES; i &lt; NUM_CLIPPING_PLANES; i ++ ) {
                            plane = clippingPlanes[ i ];
                            distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
                            distanceGradient = fwidth( distanceToPlane ) / 2.0;
                            unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
                    }
                    #pragma unroll_loop_end
                    clipOpacity *= 1.0 - unionClipOpacity;
            #endif
            diffuseColor.a *= clipOpacity;
            if ( diffuseColor.a == 0.0 ) discard;
    #else
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; UNION_CLIPPING_PLANES; i ++ ) {
                    plane = clippingPlanes[ i ];
                    if ( dot( vClipPosition, plane.xyz ) &gt; plane.w ) discard;
            }
            #pragma unroll_loop_end
            #if UNION_CLIPPING_PLANES &lt; NUM_CLIPPING_PLANES
                    bool clipped = true;
                    #pragma unroll_loop_start
                    for ( int i = UNION_CLIPPING_PLANES; i &lt; NUM_CLIPPING_PLANES; i ++ ) {
                            plane = clippingPlanes[ i ];
                            clipped = ( dot( vClipPosition, plane.xyz ) &gt; plane.w ) &amp;&amp; clipped;
                    }
                    #pragma unroll_loop_end
                    if ( clipped ) discard;
            #endif
    #endif
#endif`,T4=`#if NUM_CLIPPING_PLANES &gt; 0
    varying vec3 vClipPosition;
    uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,M4=`#if NUM_CLIPPING_PLANES &gt; 0
    varying vec3 vClipPosition;
#endif`,A4=`#if NUM_CLIPPING_PLANES &gt; 0
    vClipPosition = - mvPosition.xyz;
#endif`,C4=`#if defined( USE_COLOR_ALPHA )
    diffuseColor *= vColor;
#elif defined( USE_COLOR )
    diffuseColor.rgb *= vColor;
#endif`,R4=`#if defined( USE_COLOR_ALPHA )
    varying vec4 vColor;
#elif defined( USE_COLOR )
    varying vec3 vColor;
#endif`,O4=`#if defined( USE_COLOR_ALPHA )
    varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
    varying vec3 vColor;
#endif`,D4=`#if defined( USE_COLOR_ALPHA )
    vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
    vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
    vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
    vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
    vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
    vColor.xyz *= batchingColor.xyz;
#endif`,N4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
    return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
    float precisionSafeLength( vec3 v ) { return length( v ); }
#else
    float precisionSafeLength( vec3 v ) {
            float maxComponent = max3( abs( v ) );
            return length( v / maxComponent ) * maxComponent;
    }
#endif
struct IncidentLight {
    vec3 color;
    vec3 direction;
    bool visible;
};
struct ReflectedLight {
    vec3 directDiffuse;
    vec3 directSpecular;
    vec3 indirectDiffuse;
    vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
    varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
    return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
    return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
    mat3 tmp;
    tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
    tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
    tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
    return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
    return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
    float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
    float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
    return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
    return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
    float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
    return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
    float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
    return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,I4=`#ifdef ENVMAP_TYPE_CUBE_UV
    #define cubeUV_minMipLevel 4.0
    #define cubeUV_minTileSize 16.0
    float getFace( vec3 direction ) {
            vec3 absDirection = abs( direction );
            float face = - 1.0;
            if ( absDirection.x &gt; absDirection.z ) {
                    if ( absDirection.x &gt; absDirection.y )
                            face = direction.x &gt; 0.0 ? 0.0 : 3.0;
                    else
                            face = direction.y &gt; 0.0 ? 1.0 : 4.0;
            } else {
                    if ( absDirection.z &gt; absDirection.y )
                            face = direction.z &gt; 0.0 ? 2.0 : 5.0;
                    else
                            face = direction.y &gt; 0.0 ? 1.0 : 4.0;
            }
            return face;
    }
    vec2 getUV( vec3 direction, float face ) {
            vec2 uv;
            if ( face == 0.0 ) {
                    uv = vec2( direction.z, direction.y ) / abs( direction.x );
            } else if ( face == 1.0 ) {
                    uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
            } else if ( face == 2.0 ) {
                    uv = vec2( - direction.x, direction.y ) / abs( direction.z );
            } else if ( face == 3.0 ) {
                    uv = vec2( - direction.z, direction.y ) / abs( direction.x );
            } else if ( face == 4.0 ) {
                    uv = vec2( - direction.x, direction.z ) / abs( direction.y );
            } else {
                    uv = vec2( direction.x, direction.y ) / abs( direction.z );
            }
            return 0.5 * ( uv + 1.0 );
    }
    vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
            float face = getFace( direction );
            float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
            mipInt = max( mipInt, cubeUV_minMipLevel );
            float faceSize = exp2( mipInt );
            highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
            if ( face &gt; 2.0 ) {
                    uv.y += faceSize;
                    face -= 3.0;
            }
            uv.x += face * faceSize;
            uv.x += filterInt * 3.0 * cubeUV_minTileSize;
            uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
            uv.x *= CUBEUV_TEXEL_WIDTH;
            uv.y *= CUBEUV_TEXEL_HEIGHT;
            #ifdef texture2DGradEXT
                    return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
            #else
                    return texture2D( envMap, uv ).rgb;
            #endif
    }
    #define cubeUV_r0 1.0
    #define cubeUV_m0 - 2.0
    #define cubeUV_r1 0.8
    #define cubeUV_m1 - 1.0
    #define cubeUV_r4 0.4
    #define cubeUV_m4 2.0
    #define cubeUV_r5 0.305
    #define cubeUV_m5 3.0
    #define cubeUV_r6 0.21
    #define cubeUV_m6 4.0
    float roughnessToMip( float roughness ) {
            float mip = 0.0;
            if ( roughness &gt;= cubeUV_r1 ) {
                    mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
            } else if ( roughness &gt;= cubeUV_r4 ) {
                    mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
            } else if ( roughness &gt;= cubeUV_r5 ) {
                    mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
            } else if ( roughness &gt;= cubeUV_r6 ) {
                    mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
            } else {
                    mip = - 2.0 * log2( 1.16 * roughness );         }
            return mip;
    }
    vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
            float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
            float mipF = fract( mip );
            float mipInt = floor( mip );
            vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
            if ( mipF == 0.0 ) {
                    return vec4( color0, 1.0 );
            } else {
                    vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
                    return vec4( mix( color0, color1, mipF ), 1.0 );
            }
    }
#endif`,P4=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
    vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
    mat3 bm = mat3( batchingMatrix );
    transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
    transformedNormal = bm * transformedNormal;
    #ifdef USE_TANGENT
            transformedTangent = bm * transformedTangent;
    #endif
#endif
#ifdef USE_INSTANCING
    mat3 im = mat3( instanceMatrix );
    transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
    transformedNormal = im * transformedNormal;
    #ifdef USE_TANGENT
            transformedTangent = im * transformedTangent;
    #endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
    transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
    transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
    #ifdef FLIP_SIDED
            transformedTangent = - transformedTangent;
    #endif
#endif`,L4=`#ifdef USE_DISPLACEMENTMAP
    uniform sampler2D displacementMap;
    uniform float displacementScale;
    uniform float displacementBias;
#endif`,U4=`#ifdef USE_DISPLACEMENTMAP
    transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,k4=`#ifdef USE_EMISSIVEMAP
    vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
    #ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
            emissiveColor = sRGBTransferEOTF( emissiveColor );
    #endif
    totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,F4=`#ifdef USE_EMISSIVEMAP
    uniform sampler2D emissiveMap;
#endif`,z4=&quot;gl_FragColor = linearToOutputTexel( gl_FragColor );&quot;,B4=`vec4 LinearTransferOETF( in vec4 value ) {
    return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
    return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
    return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,H4=`#ifdef USE_ENVMAP
    #ifdef ENV_WORLDPOS
            vec3 cameraToFrag;
            if ( isOrthographic ) {
                    cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
            } else {
                    cameraToFrag = normalize( vWorldPosition - cameraPosition );
            }
            vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
            #ifdef ENVMAP_MODE_REFLECTION
                    vec3 reflectVec = reflect( cameraToFrag, worldNormal );
            #else
                    vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
            #endif
    #else
            vec3 reflectVec = vReflect;
    #endif
    #ifdef ENVMAP_TYPE_CUBE
            vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
    #else
            vec4 envColor = vec4( 0.0 );
    #endif
    #ifdef ENVMAP_BLENDING_MULTIPLY
            outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
    #elif defined( ENVMAP_BLENDING_MIX )
            outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
    #elif defined( ENVMAP_BLENDING_ADD )
            outgoingLight += envColor.xyz * specularStrength * reflectivity;
    #endif
#endif`,V4=`#ifdef USE_ENVMAP
    uniform float envMapIntensity;
    uniform float flipEnvMap;
    uniform mat3 envMapRotation;
    #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube envMap;
    #else
            uniform sampler2D envMap;
    #endif

#endif`,G4=`#ifdef USE_ENVMAP
    uniform float reflectivity;
    #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
            #define ENV_WORLDPOS
    #endif
    #ifdef ENV_WORLDPOS
            varying vec3 vWorldPosition;
            uniform float refractionRatio;
    #else
            varying vec3 vReflect;
    #endif
#endif`,j4=`#ifdef USE_ENVMAP
    #if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
            #define ENV_WORLDPOS
    #endif
    #ifdef ENV_WORLDPOS

            varying vec3 vWorldPosition;
    #else
            varying vec3 vReflect;
            uniform float refractionRatio;
    #endif
#endif`,W4=`#ifdef USE_ENVMAP
    #ifdef ENV_WORLDPOS
            vWorldPosition = worldPosition.xyz;
    #else
            vec3 cameraToVertex;
            if ( isOrthographic ) {
                    cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
            } else {
                    cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
            }
            vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
            #ifdef ENVMAP_MODE_REFLECTION
                    vReflect = reflect( cameraToVertex, worldNormal );
            #else
                    vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
            #endif
    #endif
#endif`,X4=`#ifdef USE_FOG
    vFogDepth = - mvPosition.z;
#endif`,q4=`#ifdef USE_FOG
    varying float vFogDepth;
#endif`,Y4=`#ifdef USE_FOG
    #ifdef FOG_EXP2
            float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
    #else
            float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
    #endif
    gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,K4=`#ifdef USE_FOG
    uniform vec3 fogColor;
    varying float vFogDepth;
    #ifdef FOG_EXP2
            uniform float fogDensity;
    #else
            uniform float fogNear;
            uniform float fogFar;
    #endif
#endif`,$4=`#ifdef USE_GRADIENTMAP
    uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
    float dotNL = dot( normal, lightDirection );
    vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
    #ifdef USE_GRADIENTMAP
            return vec3( texture2D( gradientMap, coord ).r );
    #else
            vec2 fw = fwidth( coord ) * 0.5;
            return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
    #endif
}`,Z4=`#ifdef USE_LIGHTMAP
    uniform sampler2D lightMap;
    uniform float lightMapIntensity;
#endif`,J4=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Q4=`varying vec3 vViewPosition;
struct LambertMaterial {
    vec3 diffuseColor;
    float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
    float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
    vec3 irradiance = dotNL * directLight.color;
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct                           RE_Direct_Lambert
#define RE_IndirectDiffuse          RE_IndirectDiffuse_Lambert`,eH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
    uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
    float x = normal.x, y = normal.y, z = normal.z;
    vec3 result = shCoefficients[ 0 ] * 0.886227;
    result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
    result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
    result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
    result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
    result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
    result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
    result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
    result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
    return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
    vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
    vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
    return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
    vec3 irradiance = ambientLightColor;
    return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
    float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
    if ( cutoffDistance &gt; 0.0 ) {
            distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
    }
    return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
    return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS &gt; 0
    struct DirectionalLight {
            vec3 direction;
            vec3 color;
    };
    uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
    void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
            light.color = directionalLight.color;
            light.direction = directionalLight.direction;
            light.visible = true;
    }
#endif
#if NUM_POINT_LIGHTS &gt; 0
    struct PointLight {
            vec3 position;
            vec3 color;
            float distance;
            float decay;
    };
    uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
    void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
            vec3 lVector = pointLight.position - geometryPosition;
            light.direction = normalize( lVector );
            float lightDistance = length( lVector );
            light.color = pointLight.color;
            light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
            light.visible = ( light.color != vec3( 0.0 ) );
    }
#endif
#if NUM_SPOT_LIGHTS &gt; 0
    struct SpotLight {
            vec3 position;
            vec3 direction;
            vec3 color;
            float distance;
            float decay;
            float coneCos;
            float penumbraCos;
    };
    uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
    void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
            vec3 lVector = spotLight.position - geometryPosition;
            light.direction = normalize( lVector );
            float angleCos = dot( light.direction, spotLight.direction );
            float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
            if ( spotAttenuation &gt; 0.0 ) {
                    float lightDistance = length( lVector );
                    light.color = spotLight.color * spotAttenuation;
                    light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
                    light.visible = ( light.color != vec3( 0.0 ) );
            } else {
                    light.color = vec3( 0.0 );
                    light.visible = false;
            }
    }
#endif
#if NUM_RECT_AREA_LIGHTS &gt; 0
    struct RectAreaLight {
            vec3 color;
            vec3 position;
            vec3 halfWidth;
            vec3 halfHeight;
    };
    uniform sampler2D ltc_1;        uniform sampler2D ltc_2;
    uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS &gt; 0
    struct HemisphereLight {
            vec3 direction;
            vec3 skyColor;
            vec3 groundColor;
    };
    uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
    vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
            float dotNL = dot( normal, hemiLight.direction );
            float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
            vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
            return irradiance;
    }
#endif`,tH=`#ifdef USE_ENVMAP
    vec3 getIBLIrradiance( const in vec3 normal ) {
            #ifdef ENVMAP_TYPE_CUBE_UV
                    vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
                    vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
                    return PI * envMapColor.rgb * envMapIntensity;
            #else
                    return vec3( 0.0 );
            #endif
    }
    vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
            #ifdef ENVMAP_TYPE_CUBE_UV
                    vec3 reflectVec = reflect( - viewDir, normal );
                    reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
                    reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
                    vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
                    return envMapColor.rgb * envMapIntensity;
            #else
                    return vec3( 0.0 );
            #endif
    }
    #ifdef USE_ANISOTROPY
            vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
                    #ifdef ENVMAP_TYPE_CUBE_UV
                            vec3 bentNormal = cross( bitangent, viewDir );
                            bentNormal = normalize( cross( bentNormal, bitangent ) );
                            bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
                            return getIBLRadiance( viewDir, bentNormal, roughness );
                    #else
                            return vec3( 0.0 );
                    #endif
            }
    #endif
#endif`,nH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,iH=`varying vec3 vViewPosition;
struct ToonMaterial {
    vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
    vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct                           RE_Direct_Toon
#define RE_IndirectDiffuse          RE_IndirectDiffuse_Toon`,rH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
    vec3 diffuseColor;
    vec3 specularColor;
    float specularShininess;
    float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
    float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
    vec3 irradiance = dotNL * directLight.color;
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
    reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct                           RE_Direct_BlinnPhong
#define RE_IndirectDiffuse          RE_IndirectDiffuse_BlinnPhong`,oH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
    material.ior = ior;
    #ifdef USE_SPECULAR
            float specularIntensityFactor = specularIntensity;
            vec3 specularColorFactor = specularColor;
            #ifdef USE_SPECULAR_COLORMAP
                    specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
            #endif
            #ifdef USE_SPECULAR_INTENSITYMAP
                    specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
            #endif
            material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
    #else
            float specularIntensityFactor = 1.0;
            vec3 specularColorFactor = vec3( 1.0 );
            material.specularF90 = 1.0;
    #endif
    material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
    material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
    material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
    material.clearcoat = clearcoat;
    material.clearcoatRoughness = clearcoatRoughness;
    material.clearcoatF0 = vec3( 0.04 );
    material.clearcoatF90 = 1.0;
    #ifdef USE_CLEARCOATMAP
            material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
    #endif
    #ifdef USE_CLEARCOAT_ROUGHNESSMAP
            material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
    #endif
    material.clearcoat = saturate( material.clearcoat );    material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
    material.clearcoatRoughness += geometryRoughness;
    material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
    material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
    material.iridescence = iridescence;
    material.iridescenceIOR = iridescenceIOR;
    #ifdef USE_IRIDESCENCEMAP
            material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
    #endif
    #ifdef USE_IRIDESCENCE_THICKNESSMAP
            material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
    #else
            material.iridescenceThickness = iridescenceThicknessMaximum;
    #endif
#endif
#ifdef USE_SHEEN
    material.sheenColor = sheenColor;
    #ifdef USE_SHEEN_COLORMAP
            material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
    #endif
    material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
    #ifdef USE_SHEEN_ROUGHNESSMAP
            material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
    #endif
#endif
#ifdef USE_ANISOTROPY
    #ifdef USE_ANISOTROPYMAP
            mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
            vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
            vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
    #else
            vec2 anisotropyV = anisotropyVector;
    #endif
    material.anisotropy = length( anisotropyV );
    if( material.anisotropy == 0.0 ) {
            anisotropyV = vec2( 1.0, 0.0 );
    } else {
            anisotropyV /= material.anisotropy;
            material.anisotropy = saturate( material.anisotropy );
    }
    material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
    material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
    material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,aH=`struct PhysicalMaterial {
    vec3 diffuseColor;
    float roughness;
    vec3 specularColor;
    float specularF90;
    float dispersion;
    #ifdef USE_CLEARCOAT
            float clearcoat;
            float clearcoatRoughness;
            vec3 clearcoatF0;
            float clearcoatF90;
    #endif
    #ifdef USE_IRIDESCENCE
            float iridescence;
            float iridescenceIOR;
            float iridescenceThickness;
            vec3 iridescenceFresnel;
            vec3 iridescenceF0;
    #endif
    #ifdef USE_SHEEN
            vec3 sheenColor;
            float sheenRoughness;
    #endif
    #ifdef IOR
            float ior;
    #endif
    #ifdef USE_TRANSMISSION
            float transmission;
            float transmissionAlpha;
            float thickness;
            float attenuationDistance;
            vec3 attenuationColor;
    #endif
    #ifdef USE_ANISOTROPY
            float anisotropy;
            float alphaT;
            vec3 anisotropyT;
            vec3 anisotropyB;
    #endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
    float a2 = pow2( alpha );
    float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
    float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
    return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
    float a2 = pow2( alpha );
    float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
    return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
    float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
            float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
            float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
            float v = 0.5 / ( gv + gl );
            return saturate(v);
    }
    float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
            float a2 = alphaT * alphaB;
            highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
            highp float v2 = dot( v, v );
            float w2 = a2 / v2;
            return RECIPROCAL_PI * a2 * pow2 ( w2 );
    }
#endif
#ifdef USE_CLEARCOAT
    vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
            vec3 f0 = material.clearcoatF0;
            float f90 = material.clearcoatF90;
            float roughness = material.clearcoatRoughness;
            float alpha = pow2( roughness );
            vec3 halfDir = normalize( lightDir + viewDir );
            float dotNL = saturate( dot( normal, lightDir ) );
            float dotNV = saturate( dot( normal, viewDir ) );
            float dotNH = saturate( dot( normal, halfDir ) );
            float dotVH = saturate( dot( viewDir, halfDir ) );
            vec3 F = F_Schlick( f0, f90, dotVH );
            float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
            float D = D_GGX( alpha, dotNH );
            return F * ( V * D );
    }
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
    vec3 f0 = material.specularColor;
    float f90 = material.specularF90;
    float roughness = material.roughness;
    float alpha = pow2( roughness );
    vec3 halfDir = normalize( lightDir + viewDir );
    float dotNL = saturate( dot( normal, lightDir ) );
    float dotNV = saturate( dot( normal, viewDir ) );
    float dotNH = saturate( dot( normal, halfDir ) );
    float dotVH = saturate( dot( viewDir, halfDir ) );
    vec3 F = F_Schlick( f0, f90, dotVH );
    #ifdef USE_IRIDESCENCE
            F = mix( F, material.iridescenceFresnel, material.iridescence );
    #endif
    #ifdef USE_ANISOTROPY
            float dotTL = dot( material.anisotropyT, lightDir );
            float dotTV = dot( material.anisotropyT, viewDir );
            float dotTH = dot( material.anisotropyT, halfDir );
            float dotBL = dot( material.anisotropyB, lightDir );
            float dotBV = dot( material.anisotropyB, viewDir );
            float dotBH = dot( material.anisotropyB, halfDir );
            float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
            float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
    #else
            float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
            float D = D_GGX( alpha, dotNH );
    #endif
    return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
    const float LUT_SIZE = 64.0;
    const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
    const float LUT_BIAS = 0.5 / LUT_SIZE;
    float dotNV = saturate( dot( N, V ) );
    vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
    uv = uv * LUT_SCALE + LUT_BIAS;
    return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
    float l = length( f );
    return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
    float x = dot( v1, v2 );
    float y = abs( x );
    float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
    float b = 3.4175940 + ( 4.1616724 + y ) * y;
    float v = a / b;
    float theta_sintheta = ( x &gt; 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
    return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
    vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
    vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
    vec3 lightNormal = cross( v1, v2 );
    if( dot( lightNormal, P - rectCoords[ 0 ] ) &lt; 0.0 ) return vec3( 0.0 );
    vec3 T1, T2;
    T1 = normalize( V - N * dot( V, N ) );
    T2 = - cross( N, T1 );
    mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
    vec3 coords[ 4 ];
    coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
    coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
    coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
    coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
    coords[ 0 ] = normalize( coords[ 0 ] );
    coords[ 1 ] = normalize( coords[ 1 ] );
    coords[ 2 ] = normalize( coords[ 2 ] );
    coords[ 3 ] = normalize( coords[ 3 ] );
    vec3 vectorFormFactor = vec3( 0.0 );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
    vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
    float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
    return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
    float alpha = pow2( roughness );
    float invAlpha = 1.0 / alpha;
    float cos2h = dotNH * dotNH;
    float sin2h = max( 1.0 - cos2h, 0.0078125 );
    return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
    return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
    vec3 halfDir = normalize( lightDir + viewDir );
    float dotNL = saturate( dot( normal, lightDir ) );
    float dotNV = saturate( dot( normal, viewDir ) );
    float dotNH = saturate( dot( normal, halfDir ) );
    float D = D_Charlie( sheenRoughness, dotNH );
    float V = V_Neubelt( dotNV, dotNL );
    return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
    float dotNV = saturate( dot( normal, viewDir ) );
    float r2 = roughness * roughness;
    float a = roughness &lt; 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
    float b = roughness &lt; 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
    float DG = exp( a * dotNV + b ) + ( roughness &lt; 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
    return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
    float dotNV = saturate( dot( normal, viewDir ) );
    const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
    const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
    vec4 r = roughness * c0 + c1;
    float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
    vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
    return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
    vec2 fab = DFGApprox( normal, viewDir, roughness );
    return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
    vec2 fab = DFGApprox( normal, viewDir, roughness );
    #ifdef USE_IRIDESCENCE
            vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
    #else
            vec3 Fr = specularColor;
    #endif
    vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
    float Ess = fab.x + fab.y;
    float Ems = 1.0 - Ess;
    vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;       vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
    singleScatter += FssEss;
    multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS &gt; 0
    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
            vec3 normal = geometryNormal;
            vec3 viewDir = geometryViewDir;
            vec3 position = geometryPosition;
            vec3 lightPos = rectAreaLight.position;
            vec3 halfWidth = rectAreaLight.halfWidth;
            vec3 halfHeight = rectAreaLight.halfHeight;
            vec3 lightColor = rectAreaLight.color;
            float roughness = material.roughness;
            vec3 rectCoords[ 4 ];
            rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;            rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
            rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
            rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
            vec2 uv = LTC_Uv( normal, viewDir, roughness );
            vec4 t1 = texture2D( ltc_1, uv );
            vec4 t2 = texture2D( ltc_2, uv );
            mat3 mInv = mat3(
                    vec3( t1.x, 0, t1.y ),
                    vec3(    0, 1,    0 ),
                    vec3( t1.z, 0, t1.w )
            );
            vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
            reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
            reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
    }
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
    float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
    vec3 irradiance = dotNL * directLight.color;
    #ifdef USE_CLEARCOAT
            float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
            vec3 ccIrradiance = dotNLcc * directLight.color;
            clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
    #endif
    #ifdef USE_SHEEN
            sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
    #endif
    reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
    reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
    #ifdef USE_CLEARCOAT
            clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
    #endif
    #ifdef USE_SHEEN
            sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
    #endif
    vec3 singleScattering = vec3( 0.0 );
    vec3 multiScattering = vec3( 0.0 );
    vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
    #ifdef USE_IRIDESCENCE
            computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
    #else
            computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
    #endif
    vec3 totalScattering = singleScattering + multiScattering;
    vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
    reflectedLight.indirectSpecular += radiance * singleScattering;
    reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
    reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct                           RE_Direct_Physical
#define RE_Direct_RectArea          RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse          RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular         RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
    return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
    geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
    float dotNVi = saturate( dot( normal, geometryViewDir ) );
    if ( material.iridescenceThickness == 0.0 ) {
            material.iridescence = 0.0;
    } else {
            material.iridescence = saturate( material.iridescence );
    }
    if ( material.iridescence &gt; 0.0 ) {
            material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
            material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
    }
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) &amp;&amp; NUM_POINT_LIGHT_SHADOWS &gt; 0
    PointLightShadow pointLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_POINT_LIGHTS; i ++ ) {
            pointLight = pointLights[ i ];
            getPointLightInfo( pointLight, geometryPosition, directLight );
            #if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_POINT_LIGHT_SHADOWS )
            pointLightShadow = pointLightShadows[ i ];
            directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
            #endif
            RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
    SpotLight spotLight;
    vec4 spotColor;
    vec3 spotLightCoord;
    bool inSpotLightMap;
    #if defined( USE_SHADOWMAP ) &amp;&amp; NUM_SPOT_LIGHT_SHADOWS &gt; 0
    SpotLightShadow spotLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_SPOT_LIGHTS; i ++ ) {
            spotLight = spotLights[ i ];
            getSpotLightInfo( spotLight, geometryPosition, directLight );
            #if ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
            #define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
            #elif ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
            #define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
            #else
            #define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
            #endif
            #if ( SPOT_LIGHT_MAP_INDEX &lt; NUM_SPOT_LIGHT_MAPS )
                    spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
                    inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
                    spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
                    directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
            #endif
            #undef SPOT_LIGHT_MAP_INDEX
            #if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
            spotLightShadow = spotLightShadows[ i ];
            directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
            #endif
            RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) &amp;&amp; NUM_DIR_LIGHT_SHADOWS &gt; 0
    DirectionalLightShadow directionalLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_DIR_LIGHTS; i ++ ) {
            directionalLight = directionalLights[ i ];
            getDirectionalLightInfo( directionalLight, directLight );
            #if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_DIR_LIGHT_SHADOWS )
            directionalLightShadow = directionalLightShadows[ i ];
            directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
            #endif
            RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct_RectArea )
    RectAreaLight rectAreaLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_RECT_AREA_LIGHTS; i ++ ) {
            rectAreaLight = rectAreaLights[ i ];
            RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
    }
    #pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
    vec3 iblIrradiance = vec3( 0.0 );
    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
    #if defined( USE_LIGHT_PROBES )
            irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
    #endif
    #if ( NUM_HEMI_LIGHTS &gt; 0 )
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; NUM_HEMI_LIGHTS; i ++ ) {
                    irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
            }
            #pragma unroll_loop_end
    #endif
#endif
#if defined( RE_IndirectSpecular )
    vec3 radiance = vec3( 0.0 );
    vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,cH=`#if defined( RE_IndirectDiffuse )
    #ifdef USE_LIGHTMAP
            vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
            vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
            irradiance += lightMapIrradiance;
    #endif
    #if defined( USE_ENVMAP ) &amp;&amp; defined( STANDARD ) &amp;&amp; defined( ENVMAP_TYPE_CUBE_UV )
            iblIrradiance += getIBLIrradiance( geometryNormal );
    #endif
#endif
#if defined( USE_ENVMAP ) &amp;&amp; defined( RE_IndirectSpecular )
    #ifdef USE_ANISOTROPY
            radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
    #else
            radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
    #endif
    #ifdef USE_CLEARCOAT
            clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
    #endif
#endif`,uH=`#if defined( RE_IndirectDiffuse )
    RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
    RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,hH=`#if defined( USE_LOGDEPTHBUF )
    gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,fH=`#if defined( USE_LOGDEPTHBUF )
    uniform float logDepthBufFC;
    varying float vFragDepth;
    varying float vIsPerspective;
#endif`,dH=`#ifdef USE_LOGDEPTHBUF
    varying float vFragDepth;
    varying float vIsPerspective;
#endif`,pH=`#ifdef USE_LOGDEPTHBUF
    vFragDepth = 1.0 + gl_Position.w;
    vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,mH=`#ifdef USE_MAP
    vec4 sampledDiffuseColor = texture2D( map, vMapUv );
    #ifdef DECODE_VIDEO_TEXTURE
            sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
    #endif
    diffuseColor *= sampledDiffuseColor;
#endif`,gH=`#ifdef USE_MAP
    uniform sampler2D map;
#endif`,yH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
    #if defined( USE_POINTS_UV )
            vec2 uv = vUv;
    #else
            vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
    #endif
#endif
#ifdef USE_MAP
    diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
    diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_H=`#if defined( USE_POINTS_UV )
    varying vec2 vUv;
#else
    #if defined( USE_MAP ) || defined( USE_ALPHAMAP )
            uniform mat3 uvTransform;
    #endif
#endif
#ifdef USE_MAP
    uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
    uniform sampler2D alphaMap;
#endif`,vH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
    vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
    metalnessFactor *= texelMetalness.b;
#endif`,bH=`#ifdef USE_METALNESSMAP
    uniform sampler2D metalnessMap;
#endif`,xH=`#ifdef USE_INSTANCING_MORPH
    float morphTargetInfluences[ MORPHTARGETS_COUNT ];
    float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
    }
#endif`,SH=`#if defined( USE_MORPHCOLORS )
    vColor *= morphTargetBaseInfluence;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            #if defined( USE_COLOR_ALPHA )
                    if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
            #elif defined( USE_COLOR )
                    if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
            #endif
    }
#endif`,wH=`#ifdef USE_MORPHNORMALS
    objectNormal *= morphTargetBaseInfluence;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
    }
#endif`,EH=`#ifdef USE_MORPHTARGETS
    #ifndef USE_INSTANCING_MORPH
            uniform float morphTargetBaseInfluence;
            uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
    #endif
    uniform sampler2DArray morphTargetsTexture;
    uniform ivec2 morphTargetsTextureSize;
    vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
            int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
            int y = texelIndex / morphTargetsTextureSize.x;
            int x = texelIndex - y * morphTargetsTextureSize.x;
            ivec3 morphUV = ivec3( x, y, morphTargetIndex );
            return texelFetch( morphTargetsTexture, morphUV, 0 );
    }
#endif`,TH=`#ifdef USE_MORPHTARGETS
    transformed *= morphTargetBaseInfluence;
    for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
            if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
    }
#endif`,MH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
    vec3 fdx = dFdx( vViewPosition );
    vec3 fdy = dFdy( vViewPosition );
    vec3 normal = normalize( cross( fdx, fdy ) );
#else
    vec3 normal = normalize( vNormal );
    #ifdef DOUBLE_SIDED
            normal *= faceDirection;
    #endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
    #ifdef USE_TANGENT
            mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
    #else
            mat3 tbn = getTangentFrame( - vViewPosition, normal,
            #if defined( USE_NORMALMAP )
                    vNormalMapUv
            #elif defined( USE_CLEARCOAT_NORMALMAP )
                    vClearcoatNormalMapUv
            #else
                    vUv
            #endif
            );
    #endif
    #if defined( DOUBLE_SIDED ) &amp;&amp; ! defined( FLAT_SHADED )
            tbn[0] *= faceDirection;
            tbn[1] *= faceDirection;
    #endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    #ifdef USE_TANGENT
            mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
    #else
            mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
    #endif
    #if defined( DOUBLE_SIDED ) &amp;&amp; ! defined( FLAT_SHADED )
            tbn2[0] *= faceDirection;
            tbn2[1] *= faceDirection;
    #endif
#endif
vec3 nonPerturbedNormal = normal;`,AH=`#ifdef USE_NORMALMAP_OBJECTSPACE
    normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
    #ifdef FLIP_SIDED
            normal = - normal;
    #endif
    #ifdef DOUBLE_SIDED
            normal = normal * faceDirection;
    #endif
    normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
    vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;
    normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
    normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,CH=`#ifndef FLAT_SHADED
    varying vec3 vNormal;
    #ifdef USE_TANGENT
            varying vec3 vTangent;
            varying vec3 vBitangent;
    #endif
#endif`,RH=`#ifndef FLAT_SHADED
    varying vec3 vNormal;
    #ifdef USE_TANGENT
            varying vec3 vTangent;
            varying vec3 vBitangent;
    #endif
#endif`,OH=`#ifndef FLAT_SHADED
    vNormal = normalize( transformedNormal );
    #ifdef USE_TANGENT
            vTangent = normalize( transformedTangent );
            vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
    #endif
#endif`,DH=`#ifdef USE_NORMALMAP
    uniform sampler2D normalMap;
    uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
    uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) &amp;&amp; ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
    mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
            vec3 q0 = dFdx( eye_pos.xyz );
            vec3 q1 = dFdy( eye_pos.xyz );
            vec2 st0 = dFdx( uv.st );
            vec2 st1 = dFdy( uv.st );
            vec3 N = surf_norm;
            vec3 q1perp = cross( q1, N );
            vec3 q0perp = cross( N, q0 );
            vec3 T = q1perp * st0.x + q0perp * st1.x;
            vec3 B = q1perp * st0.y + q0perp * st1.y;
            float det = max( dot( T, T ), dot( B, B ) );
            float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
            return mat3( T * scale, B * scale, N );
    }
#endif`,NH=`#ifdef USE_CLEARCOAT
    vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,IH=`#ifdef USE_CLEARCOAT_NORMALMAP
    vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
    clearcoatMapN.xy *= clearcoatNormalScale;
    clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,PH=`#ifdef USE_CLEARCOATMAP
    uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    uniform sampler2D clearcoatNormalMap;
    uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    uniform sampler2D clearcoatRoughnessMap;
#endif`,LH=`#ifdef USE_IRIDESCENCEMAP
    uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    uniform sampler2D iridescenceThicknessMap;
#endif`,UH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,kH=`vec3 packNormalToRGB( const in vec3 normal ) {
    return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
    return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
    if( v &lt;= 0.0 )
            return vec4( 0., 0., 0., 0. );
    if( v &gt;= 1.0 )
            return vec4( 1., 1., 1., 1. );
    float vuf;
    float af = modf( v * PackFactors.a, vuf );
    float bf = modf( vuf * ShiftRight8, vuf );
    float gf = modf( vuf * ShiftRight8, vuf );
    return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
    if( v &lt;= 0.0 )
            return vec3( 0., 0., 0. );
    if( v &gt;= 1.0 )
            return vec3( 1., 1., 1. );
    float vuf;
    float bf = modf( v * PackFactors.b, vuf );
    float gf = modf( vuf * ShiftRight8, vuf );
    return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
    if( v &lt;= 0.0 )
            return vec2( 0., 0. );
    if( v &gt;= 1.0 )
            return vec2( 1., 1. );
    float vuf;
    float gf = modf( v * 256., vuf );
    return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
    return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
    return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
    return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
    vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
    return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
    return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
    return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
    return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
    return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
    return ( near * far ) / ( ( far - near ) * depth - far );
}`,FH=`#ifdef PREMULTIPLIED_ALPHA
    gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
    mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
    mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,BH=`#ifdef DITHERING
    gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HH=`#ifdef DITHERING
    vec3 dithering( vec3 color ) {
            float grid_position = rand( gl_FragCoord.xy );
            vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
            dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
            return color + dither_shift_RGB;
    }
#endif`,VH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
    vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
    roughnessFactor *= texelRoughness.g;
#endif`,GH=`#ifdef USE_ROUGHNESSMAP
    uniform sampler2D roughnessMap;
#endif`,jH=`#if NUM_SPOT_LIGHT_COORDS &gt; 0
    varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS &gt; 0
    uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
            uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
            varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
            struct DirectionalLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
    #endif
    #if NUM_SPOT_LIGHT_SHADOWS &gt; 0
            uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
            struct SpotLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
            uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
            varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
            struct PointLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
                    float shadowCameraNear;
                    float shadowCameraFar;
            };
            uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
    #endif
    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
            return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
    }
    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
            return unpackRGBATo2Half( texture2D( shadow, uv ) );
    }
    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
            float occlusion = 1.0;
            vec2 distribution = texture2DDistribution( shadow, uv );
            float hard_shadow = step( compare , distribution.x );
            if (hard_shadow != 1.0 ) {
                    float distance = compare - distribution.x ;
                    float variance = max( 0.00000, distribution.y * distribution.y );
                    float softness_probability = variance / (variance + distance * distance );                      softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );                      occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
            }
            return occlusion;
    }
    float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
            float shadow = 1.0;
            shadowCoord.xyz /= shadowCoord.w;
            shadowCoord.z += shadowBias;
            bool inFrustum = shadowCoord.x &gt;= 0.0 &amp;&amp; shadowCoord.x &lt;= 1.0 &amp;&amp; shadowCoord.y &gt;= 0.0 &amp;&amp; shadowCoord.y &lt;= 1.0;
            bool frustumTest = inFrustum &amp;&amp; shadowCoord.z &lt;= 1.0;
            if ( frustumTest ) {
            #if defined( SHADOWMAP_TYPE_PCF )
                    vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
                    float dx0 = - texelSize.x * shadowRadius;
                    float dy0 = - texelSize.y * shadowRadius;
                    float dx1 = + texelSize.x * shadowRadius;
                    float dy1 = + texelSize.y * shadowRadius;
                    float dx2 = dx0 / 2.0;
                    float dy2 = dy0 / 2.0;
                    float dx3 = dx1 / 2.0;
                    float dy3 = dy1 / 2.0;
                    shadow = (
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
                    ) * ( 1.0 / 17.0 );
            #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
                    vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
                    float dx = texelSize.x;
                    float dy = texelSize.y;
                    vec2 uv = shadowCoord.xy;
                    vec2 f = fract( uv * shadowMapSize + 0.5 );
                    uv -= f * texelSize;
                    shadow = (
                            texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                            texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                            texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                                     f.x ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                                     f.x ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                                     f.y ) +
                            mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                                     f.y ) +
                            mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                                              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                                              f.x ),
                                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                                              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                                              f.x ),
                                     f.y )
                    ) * ( 1.0 / 9.0 );
            #elif defined( SHADOWMAP_TYPE_VSM )
                    shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
            #else
                    shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
            #endif
            }
            return mix( 1.0, shadow, shadowIntensity );
    }
    vec2 cubeToUV( vec3 v, float texelSizeY ) {
            vec3 absV = abs( v );
            float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
            absV *= scaleToCube;
            v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
            vec2 planar = v.xy;
            float almostATexel = 1.5 * texelSizeY;
            float almostOne = 1.0 - almostATexel;
            if ( absV.z &gt;= almostOne ) {
                    if ( v.z &gt; 0.0 )
                            planar.x = 4.0 - v.x;
            } else if ( absV.x &gt;= almostOne ) {
                    float signX = sign( v.x );
                    planar.x = v.z * signX + 2.0 * signX;
            } else if ( absV.y &gt;= almostOne ) {
                    float signY = sign( v.y );
                    planar.x = v.x + 2.0 * signY + 2.0;
                    planar.y = v.z * signY - 2.0;
            }
            return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
    }
    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
            float shadow = 1.0;
            vec3 lightToPosition = shadowCoord.xyz;

            float lightToPositionLength = length( lightToPosition );
            if ( lightToPositionLength - shadowCameraFar &lt;= 0.0 &amp;&amp; lightToPositionLength - shadowCameraNear &gt;= 0.0 ) {
                    float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );                       dp += shadowBias;
                    vec3 bd3D = normalize( lightToPosition );
                    vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
                    #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
                            vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
                            shadow = (
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
                                    texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
                            ) * ( 1.0 / 9.0 );
                    #else
                            shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
                    #endif
            }
            return mix( 1.0, shadow, shadowIntensity );
    }
#endif`,WH=`#if NUM_SPOT_LIGHT_COORDS &gt; 0
    uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
    varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
            uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
            varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
            struct DirectionalLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
    #endif
    #if NUM_SPOT_LIGHT_SHADOWS &gt; 0
            struct SpotLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
            };
            uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
            uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
            varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
            struct PointLightShadow {
                    float shadowIntensity;
                    float shadowBias;
                    float shadowNormalBias;
                    float shadowRadius;
                    vec2 shadowMapSize;
                    float shadowCameraNear;
                    float shadowCameraFar;
            };
            uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
    #endif
#endif`,XH=`#if ( defined( USE_SHADOWMAP ) &amp;&amp; ( NUM_DIR_LIGHT_SHADOWS &gt; 0 || NUM_POINT_LIGHT_SHADOWS &gt; 0 ) ) || ( NUM_SPOT_LIGHT_COORDS &gt; 0 )
    vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
    vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; NUM_DIR_LIGHT_SHADOWS; i ++ ) {
                    shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
                    vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
            }
            #pragma unroll_loop_end
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
            #pragma unroll_loop_start
            for ( int i = 0; i &lt; NUM_POINT_LIGHT_SHADOWS; i ++ ) {
                    shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
                    vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
            }
            #pragma unroll_loop_end
    #endif
#endif
#if NUM_SPOT_LIGHT_COORDS &gt; 0
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_SPOT_LIGHT_COORDS; i ++ ) {
            shadowWorldPosition = worldPosition;
            #if ( defined( USE_SHADOWMAP ) &amp;&amp; UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
                    shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
            #endif
            vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
    }
    #pragma unroll_loop_end
#endif`,qH=`float getShadowMask() {
    float shadow = 1.0;
    #ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS &gt; 0
    DirectionalLightShadow directionalLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_DIR_LIGHT_SHADOWS; i ++ ) {
            directionalLight = directionalLightShadows[ i ];
            shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
    }
    #pragma unroll_loop_end
    #endif
    #if NUM_SPOT_LIGHT_SHADOWS &gt; 0
    SpotLightShadow spotLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
            spotLight = spotLightShadows[ i ];
            shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
    }
    #pragma unroll_loop_end
    #endif
    #if NUM_POINT_LIGHT_SHADOWS &gt; 0
    PointLightShadow pointLight;
    #pragma unroll_loop_start
    for ( int i = 0; i &lt; NUM_POINT_LIGHT_SHADOWS; i ++ ) {
            pointLight = pointLightShadows[ i ];
            shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
    }
    #pragma unroll_loop_end
    #endif
    #endif
    return shadow;
}`,YH=`#ifdef USE_SKINNING
    mat4 boneMatX = getBoneMatrix( skinIndex.x );
    mat4 boneMatY = getBoneMatrix( skinIndex.y );
    mat4 boneMatZ = getBoneMatrix( skinIndex.z );
    mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,KH=`#ifdef USE_SKINNING
    uniform mat4 bindMatrix;
    uniform mat4 bindMatrixInverse;
    uniform highp sampler2D boneTexture;
    mat4 getBoneMatrix( const in float i ) {
            int size = textureSize( boneTexture, 0 ).x;
            int j = int( i ) * 4;
            int x = j % size;
            int y = j / size;
            vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
            vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
            vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
            vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
            return mat4( v1, v2, v3, v4 );
    }
#endif`,$H=`#ifdef USE_SKINNING
    vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
    vec4 skinned = vec4( 0.0 );
    skinned += boneMatX * skinVertex * skinWeight.x;
    skinned += boneMatY * skinVertex * skinWeight.y;
    skinned += boneMatZ * skinVertex * skinWeight.z;
    skinned += boneMatW * skinVertex * skinWeight.w;
    transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ZH=`#ifdef USE_SKINNING
    mat4 skinMatrix = mat4( 0.0 );
    skinMatrix += skinWeight.x * boneMatX;
    skinMatrix += skinWeight.y * boneMatY;
    skinMatrix += skinWeight.z * boneMatZ;
    skinMatrix += skinWeight.w * boneMatW;
    skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
    objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
    #ifdef USE_TANGENT
            objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
    #endif
#endif`,JH=`float specularStrength;
#ifdef USE_SPECULARMAP
    vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
    specularStrength = texelSpecular.r;
#else
    specularStrength = 1.0;
#endif`,QH=`#ifdef USE_SPECULARMAP
    uniform sampler2D specularMap;
#endif`,eV=`#if defined( TONE_MAPPING )
    gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
    return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
    color *= toneMappingExposure;
    return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
    color *= toneMappingExposure;
    color = max( vec3( 0.0 ), color - 0.004 );
    return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
    vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
    vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
    return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
    const mat3 ACESInputMat = mat3(
            vec3( 0.59719, 0.07600, 0.02840 ),              vec3( 0.35458, 0.90834, 0.13383 ),
            vec3( 0.04823, 0.01566, 0.83777 )
    );
    const mat3 ACESOutputMat = mat3(
            vec3(  1.60475, -0.10208, -0.00327 ),           vec3( -0.53108,  1.10813, -0.07276 ),
            vec3( -0.07367, -0.00605,  1.07602 )
    );
    color *= toneMappingExposure / 0.6;
    color = ACESInputMat * color;
    color = RRTAndODTFit( color );
    color = ACESOutputMat * color;
    return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
    vec3( 1.6605, - 0.1246, - 0.0182 ),
    vec3( - 0.5876, 1.1329, - 0.1006 ),
    vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
    vec3( 0.6274, 0.0691, 0.0164 ),
    vec3( 0.3293, 0.9195, 0.0880 ),
    vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
    vec3 x2 = x * x;
    vec3 x4 = x2 * x2;
    return + 15.5 * x4 * x2
            - 40.14 * x4 * x
            + 31.96 * x4
            - 6.868 * x2 * x
            + 0.4298 * x2
            + 0.1191 * x
            - 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
    const mat3 AgXInsetMatrix = mat3(
            vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
            vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
            vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
    );
    const mat3 AgXOutsetMatrix = mat3(
            vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
            vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
            vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
    );
    const float AgxMinEv = - 12.47393;      const float AgxMaxEv = 4.026069;
    color *= toneMappingExposure;
    color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
    color = AgXInsetMatrix * color;
    color = max( color, 1e-10 );    color = log2( color );
    color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
    color = clamp( color, 0.0, 1.0 );
    color = agxDefaultContrastApprox( color );
    color = AgXOutsetMatrix * color;
    color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
    color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
    color = clamp( color, 0.0, 1.0 );
    return color;
}
vec3 NeutralToneMapping( vec3 color ) {
    const float StartCompression = 0.8 - 0.04;
    const float Desaturation = 0.15;
    color *= toneMappingExposure;
    float x = min( color.r, min( color.g, color.b ) );
    float offset = x &lt; 0.08 ? x - 6.25 * x * x : 0.04;
    color -= offset;
    float peak = max( color.r, max( color.g, color.b ) );
    if ( peak &lt; StartCompression ) return color;
    float d = 1. - StartCompression;
    float newPeak = 1. - d * d / ( peak + d - StartCompression );
    color *= newPeak / peak;
    float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
    return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,nV=`#ifdef USE_TRANSMISSION
    material.transmission = transmission;
    material.transmissionAlpha = 1.0;
    material.thickness = thickness;
    material.attenuationDistance = attenuationDistance;
    material.attenuationColor = attenuationColor;
    #ifdef USE_TRANSMISSIONMAP
            material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
    #endif
    #ifdef USE_THICKNESSMAP
            material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
    #endif
    vec3 pos = vWorldPosition;
    vec3 v = normalize( cameraPosition - pos );
    vec3 n = inverseTransformDirection( normal, viewMatrix );
    vec4 transmitted = getIBLVolumeRefraction(
            n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
            material.attenuationColor, material.attenuationDistance );
    material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
    totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,iV=`#ifdef USE_TRANSMISSION
    uniform float transmission;
    uniform float thickness;
    uniform float attenuationDistance;
    uniform vec3 attenuationColor;
    #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
    #endif
    #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
    #endif
    uniform vec2 transmissionSamplerSize;
    uniform sampler2D transmissionSamplerMap;
    uniform mat4 modelMatrix;
    uniform mat4 projectionMatrix;
    varying vec3 vWorldPosition;
    float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
    }
    float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
    }
    float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
    }
    float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
    }
    float g0( float a ) {
            return w0( a ) + w1( a );
    }
    float g1( float a ) {
            return w2( a ) + w3( a );
    }
    float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
    }
    float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
    }
    vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
                    g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
    }
    vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
    }
    vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            return normalize( refractionVector ) * thickness * modelScale;
    }
    float applyIorToRoughness( const in float roughness, const in float ior ) {
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
    }
    vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
            return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
    }
    vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
                    return vec3( 1.0 );
            } else {
                    vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
                    vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );                    return transmittance;
            }
    }
    vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec4 transmittedLight;
            vec3 transmittance;
            #ifdef USE_DISPERSION
                    float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
                    vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
                    for ( int i = 0; i &lt; 3; i ++ ) {
                            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
                            vec3 refractedRayExit = position + transmissionRay;
                            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
                            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
                            refractionCoords += 1.0;
                            refractionCoords /= 2.0;
                            vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
                            transmittedLight[ i ] = transmissionSample[ i ];
                            transmittedLight.a += transmissionSample.a;
                            transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
                    }
                    transmittedLight.a /= 3.0;
            #else
                    vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
                    vec3 refractedRayExit = position + transmissionRay;
                    vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
                    vec2 refractionCoords = ndcPos.xy / ndcPos.w;
                    refractionCoords += 1.0;
                    refractionCoords /= 2.0;
                    transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
                    transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
            #endif
            vec3 attenuatedColor = transmittance * transmittedLight.rgb;
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
            return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
    }
#endif`,rV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
    varying vec2 vUv;
#endif
#ifdef USE_MAP
    varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
    varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
    varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
    varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
    varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
    varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
    varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
    varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
    varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
    varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
    varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
    varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
    varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
    varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
    varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
    varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
    varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
    uniform mat3 transmissionMapTransform;
    varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
    uniform mat3 thicknessMapTransform;
    varying vec2 vThicknessMapUv;
#endif`,sV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
    varying vec2 vUv;
#endif
#ifdef USE_MAP
    uniform mat3 mapTransform;
    varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
    uniform mat3 alphaMapTransform;
    varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
    uniform mat3 lightMapTransform;
    varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
    uniform mat3 aoMapTransform;
    varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
    uniform mat3 bumpMapTransform;
    varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
    uniform mat3 normalMapTransform;
    varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
    uniform mat3 displacementMapTransform;
    varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
    uniform mat3 emissiveMapTransform;
    varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
    uniform mat3 metalnessMapTransform;
    varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
    uniform mat3 roughnessMapTransform;
    varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
    uniform mat3 anisotropyMapTransform;
    varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
    uniform mat3 clearcoatMapTransform;
    varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    uniform mat3 clearcoatNormalMapTransform;
    varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    uniform mat3 clearcoatRoughnessMapTransform;
    varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
    uniform mat3 sheenColorMapTransform;
    varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
    uniform mat3 sheenRoughnessMapTransform;
    varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
    uniform mat3 iridescenceMapTransform;
    varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    uniform mat3 iridescenceThicknessMapTransform;
    varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
    uniform mat3 specularMapTransform;
    varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
    uniform mat3 specularColorMapTransform;
    varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
    uniform mat3 specularIntensityMapTransform;
    varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
    uniform mat3 transmissionMapTransform;
    varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
    uniform mat3 thicknessMapTransform;
    varying vec2 vThicknessMapUv;
#endif`,oV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
    vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
    vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
    vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
    vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
    vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
    vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
    vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
    vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
    vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
    vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
    vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
    vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
    vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
    vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
    vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
    vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
    vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
    vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
    vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
    vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
    vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
    vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
    vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
    vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,aV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS &gt; 0
    vec4 worldPosition = vec4( transformed, 1.0 );
    #ifdef USE_BATCHING
            worldPosition = batchingMatrix * worldPosition;
    #endif
    #ifdef USE_INSTANCING
            worldPosition = instanceMatrix * worldPosition;
    #endif
    worldPosition = modelMatrix * worldPosition;
#endif`;const lV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
    vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
    vec4 texColor = texture2D( t2D, vUv );
    #ifdef DECODE_VIDEO_TEXTURE
            texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
    #endif
    texColor.rgb *= backgroundIntensity;
    gl_FragColor = texColor;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,uV=`varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vWorldDirection = transformDirection( position, modelMatrix );
    #include &lt;begin_vertex&gt;
    #include &lt;project_vertex&gt;
    gl_Position.z = gl_Position.w;
}`,hV=`#ifdef ENVMAP_TYPE_CUBE
    uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
    uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include &lt;cube_uv_reflection_fragment&gt;
void main() {
    #ifdef ENVMAP_TYPE_CUBE
            vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
    #elif defined( ENVMAP_TYPE_CUBE_UV )
            vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
    #else
            vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #endif
    texColor.rgb *= backgroundIntensity;
    gl_FragColor = texColor;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,fV=`varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vWorldDirection = transformDirection( position, modelMatrix );
    #include &lt;begin_vertex&gt;
    #include &lt;project_vertex&gt;
    gl_Position.z = gl_Position.w;
}`,dV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
    vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
    gl_FragColor = texColor;
    gl_FragColor.a *= opacity;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,pV=`#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
varying vec2 vHighPrecisionZW;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #ifdef USE_DISPLACEMENTMAP
            #include &lt;beginnormal_vertex&gt;
            #include &lt;morphnormal_vertex&gt;
            #include &lt;skinnormal_vertex&gt;
    #endif
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vHighPrecisionZW = gl_Position.zw;
}`,mV=`#if DEPTH_PACKING == 3200
    uniform float opacity;
#endif
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
varying vec2 vHighPrecisionZW;
void main() {
    vec4 diffuseColor = vec4( 1.0 );
    #include &lt;clipping_planes_fragment&gt;
    #if DEPTH_PACKING == 3200
            diffuseColor.a = opacity;
    #endif
    #include &lt;map_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
    #if DEPTH_PACKING == 3200
            gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
    #elif DEPTH_PACKING == 3201
            gl_FragColor = packDepthToRGBA( fragCoordZ );
    #elif DEPTH_PACKING == 3202
            gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
    #elif DEPTH_PACKING == 3203
            gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
    #endif
}`,gV=`#define DISTANCE
varying vec3 vWorldPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #ifdef USE_DISPLACEMENTMAP
            #include &lt;beginnormal_vertex&gt;
            #include &lt;morphnormal_vertex&gt;
            #include &lt;skinnormal_vertex&gt;
    #endif
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vWorldPosition = worldPosition.xyz;
}`,yV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main () {
    vec4 diffuseColor = vec4( 1.0 );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    float dist = length( vWorldPosition - referencePosition );
    dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
    dist = saturate( dist );
    gl_FragColor = packDepthToRGBA( dist );
}`,_V=`varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vWorldDirection = transformDirection( position, modelMatrix );
    #include &lt;begin_vertex&gt;
    #include &lt;project_vertex&gt;
}`,vV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include &lt;common&gt;
void main() {
    vec3 direction = normalize( vWorldDirection );
    vec2 sampleUV = equirectUv( direction );
    gl_FragColor = texture2D( tEquirect, sampleUV );
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
}`,bV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include &lt;common&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    vLineDistance = scale * lineDistance;
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,xV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include &lt;common&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    if ( mod( vLineDistance, totalSize ) &gt; dashSize ) {
            discard;
    }
    vec3 outgoingLight = vec3( 0.0 );
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    outgoingLight = diffuseColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
}`,SV=`#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;envmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
            #include &lt;beginnormal_vertex&gt;
            #include &lt;morphnormal_vertex&gt;
            #include &lt;skinbase_vertex&gt;
            #include &lt;skinnormal_vertex&gt;
            #include &lt;defaultnormal_vertex&gt;
    #endif
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;envmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,wV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
    varying vec3 vNormal;
#endif
#include &lt;common&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;specularmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;specularmap_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    #ifdef USE_LIGHTMAP
            vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
            reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
    #else
            reflectedLight.indirectDiffuse += vec3( 1.0 );
    #endif
    #include &lt;aomap_fragment&gt;
    reflectedLight.indirectDiffuse *= diffuseColor.rgb;
    vec3 outgoingLight = reflectedLight.indirectDiffuse;
    #include &lt;envmap_fragment&gt;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,EV=`#define LAMBERT
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;envmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;envmap_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,TV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_lambert_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;specularmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;specularmap_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_lambert_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
    #include &lt;envmap_fragment&gt;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,MV=`#define MATCAP
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;fog_vertex&gt;
    vViewPosition = - mvPosition.xyz;
}`,AV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    vec3 viewDir = normalize( vViewPosition );
    vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
    vec3 y = cross( viewDir, x );
    vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
    #ifdef USE_MATCAP
            vec4 matcapColor = texture2D( matcap, uv );
    #else
            vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
    #endif
    vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,CV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
    varying vec3 vViewPosition;
#endif
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
    vViewPosition = - mvPosition.xyz;
#endif
}`,RV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
    varying vec3 vViewPosition;
#endif
#include &lt;packing&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
    #include &lt;clipping_planes_fragment&gt;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
    #ifdef OPAQUE
            gl_FragColor.a = 1.0;
    #endif
}`,OV=`#define PHONG
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;envmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;envmap_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,DV=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_phong_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;specularmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;specularmap_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_phong_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
    #include &lt;envmap_fragment&gt;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,NV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
    varying vec3 vWorldPosition;
#endif
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
#ifdef USE_TRANSMISSION
    vWorldPosition = worldPosition.xyz;
#endif
}`,IV=`#define STANDARD
#ifdef PHYSICAL
    #define IOR
    #define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
    uniform float ior;
#endif
#ifdef USE_SPECULAR
    uniform float specularIntensity;
    uniform vec3 specularColor;
    #ifdef USE_SPECULAR_COLORMAP
            uniform sampler2D specularColorMap;
    #endif
    #ifdef USE_SPECULAR_INTENSITYMAP
            uniform sampler2D specularIntensityMap;
    #endif
#endif
#ifdef USE_CLEARCOAT
    uniform float clearcoat;
    uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
    uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
    uniform float iridescence;
    uniform float iridescenceIOR;
    uniform float iridescenceThicknessMinimum;
    uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
    uniform vec3 sheenColor;
    uniform float sheenRoughness;
    #ifdef USE_SHEEN_COLORMAP
            uniform sampler2D sheenColorMap;
    #endif
    #ifdef USE_SHEEN_ROUGHNESSMAP
            uniform sampler2D sheenRoughnessMap;
    #endif
#endif
#ifdef USE_ANISOTROPY
    uniform vec2 anisotropyVector;
    #ifdef USE_ANISOTROPYMAP
            uniform sampler2D anisotropyMap;
    #endif
#endif
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;iridescence_fragment&gt;
#include &lt;cube_uv_reflection_fragment&gt;
#include &lt;envmap_common_pars_fragment&gt;
#include &lt;envmap_physical_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_physical_pars_fragment&gt;
#include &lt;transmission_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;clearcoat_pars_fragment&gt;
#include &lt;iridescence_pars_fragment&gt;
#include &lt;roughnessmap_pars_fragment&gt;
#include &lt;metalnessmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;roughnessmap_fragment&gt;
    #include &lt;metalnessmap_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;clearcoat_normal_fragment_begin&gt;
    #include &lt;clearcoat_normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_physical_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
    vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
    #include &lt;transmission_fragment&gt;
    vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
    #ifdef USE_SHEEN
            float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
            outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
    #endif
    #ifdef USE_CLEARCOAT
            float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
            vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
            outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
    #endif
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,PV=`#define TOON
varying vec3 vViewPosition;
#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;displacementmap_pars_vertex&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;normal_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;normal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;displacementmap_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    vViewPosition = - mvPosition.xyz;
    #include &lt;worldpos_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,LV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;dithering_pars_fragment&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;aomap_pars_fragment&gt;
#include &lt;lightmap_pars_fragment&gt;
#include &lt;emissivemap_pars_fragment&gt;
#include &lt;gradientmap_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;normal_pars_fragment&gt;
#include &lt;lights_toon_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;bumpmap_pars_fragment&gt;
#include &lt;normalmap_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    vec3 totalEmissiveRadiance = emissive;
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    #include &lt;normal_fragment_begin&gt;
    #include &lt;normal_fragment_maps&gt;
    #include &lt;emissivemap_fragment&gt;
    #include &lt;lights_toon_fragment&gt;
    #include &lt;lights_fragment_begin&gt;
    #include &lt;lights_fragment_maps&gt;
    #include &lt;lights_fragment_end&gt;
    #include &lt;aomap_fragment&gt;
    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
    #include &lt;dithering_fragment&gt;
}`,UV=`uniform float size;
uniform float scale;
#include &lt;common&gt;
#include &lt;color_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
#ifdef USE_POINTS_UV
    varying vec2 vUv;
    uniform mat3 uvTransform;
#endif
void main() {
    #ifdef USE_POINTS_UV
            vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    #endif
    #include &lt;color_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphcolor_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;project_vertex&gt;
    gl_PointSize = size;
    #ifdef USE_SIZEATTENUATION
            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
    #endif
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,kV=`uniform vec3 diffuse;
uniform float opacity;
#include &lt;common&gt;
#include &lt;color_pars_fragment&gt;
#include &lt;map_particle_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    vec3 outgoingLight = vec3( 0.0 );
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_particle_fragment&gt;
    #include &lt;color_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    outgoingLight = diffuseColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
    #include &lt;premultiplied_alpha_fragment&gt;
}`,FV=`#include &lt;common&gt;
#include &lt;batching_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;morphtarget_pars_vertex&gt;
#include &lt;skinning_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;shadowmap_pars_vertex&gt;
void main() {
    #include &lt;batching_vertex&gt;
    #include &lt;beginnormal_vertex&gt;
    #include &lt;morphinstance_vertex&gt;
    #include &lt;morphnormal_vertex&gt;
    #include &lt;skinbase_vertex&gt;
    #include &lt;skinnormal_vertex&gt;
    #include &lt;defaultnormal_vertex&gt;
    #include &lt;begin_vertex&gt;
    #include &lt;morphtarget_vertex&gt;
    #include &lt;skinning_vertex&gt;
    #include &lt;project_vertex&gt;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;worldpos_vertex&gt;
    #include &lt;shadowmap_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,zV=`uniform vec3 color;
uniform float opacity;
#include &lt;common&gt;
#include &lt;packing&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;bsdfs&gt;
#include &lt;lights_pars_begin&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;shadowmap_pars_fragment&gt;
#include &lt;shadowmask_pars_fragment&gt;
void main() {
    #include &lt;logdepthbuf_fragment&gt;
    gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
}`,BV=`uniform float rotation;
uniform vec2 center;
#include &lt;common&gt;
#include &lt;uv_pars_vertex&gt;
#include &lt;fog_pars_vertex&gt;
#include &lt;logdepthbuf_pars_vertex&gt;
#include &lt;clipping_planes_pars_vertex&gt;
void main() {
    #include &lt;uv_vertex&gt;
    vec4 mvPosition = modelViewMatrix[ 3 ];
    vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
    #ifndef USE_SIZEATTENUATION
            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;
    #endif
    vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
    vec2 rotatedPosition;
    rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
    rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
    mvPosition.xy += rotatedPosition;
    gl_Position = projectionMatrix * mvPosition;
    #include &lt;logdepthbuf_vertex&gt;
    #include &lt;clipping_planes_vertex&gt;
    #include &lt;fog_vertex&gt;
}`,HV=`uniform vec3 diffuse;
uniform float opacity;
#include &lt;common&gt;
#include &lt;uv_pars_fragment&gt;
#include &lt;map_pars_fragment&gt;
#include &lt;alphamap_pars_fragment&gt;
#include &lt;alphatest_pars_fragment&gt;
#include &lt;alphahash_pars_fragment&gt;
#include &lt;fog_pars_fragment&gt;
#include &lt;logdepthbuf_pars_fragment&gt;
#include &lt;clipping_planes_pars_fragment&gt;
void main() {
    vec4 diffuseColor = vec4( diffuse, opacity );
    #include &lt;clipping_planes_fragment&gt;
    vec3 outgoingLight = vec3( 0.0 );
    #include &lt;logdepthbuf_fragment&gt;
    #include &lt;map_fragment&gt;
    #include &lt;alphamap_fragment&gt;
    #include &lt;alphatest_fragment&gt;
    #include &lt;alphahash_fragment&gt;
    outgoingLight = diffuseColor.rgb;
    #include &lt;opaque_fragment&gt;
    #include &lt;tonemapping_fragment&gt;
    #include &lt;colorspace_fragment&gt;
    #include &lt;fog_fragment&gt;
}`,Kt={alphahash_fragment:c4,alphahash_pars_fragment:u4,alphamap_fragment:h4,alphamap_pars_fragment:f4,alphatest_fragment:d4,alphatest_pars_fragment:p4,aomap_fragment:m4,aomap_pars_fragment:g4,batching_pars_vertex:y4,batching_vertex:_4,begin_vertex:v4,beginnormal_vertex:b4,bsdfs:x4,iridescence_fragment:S4,bumpmap_pars_fragment:w4,clipping_planes_fragment:E4,clipping_planes_pars_fragment:T4,clipping_planes_pars_vertex:M4,clipping_planes_vertex:A4,color_fragment:C4,color_pars_fragment:R4,color_pars_vertex:O4,color_vertex:D4,common:N4,cube_uv_reflection_fragment:I4,defaultnormal_vertex:P4,displacementmap_pars_vertex:L4,displacementmap_vertex:U4,emissivemap_fragment:k4,emissivemap_pars_fragment:F4,colorspace_fragment:z4,colorspace_pars_fragment:B4,envmap_fragment:H4,envmap_common_pars_fragment:V4,envmap_pars_fragment:G4,envmap_pars_vertex:j4,envmap_physical_pars_fragment:tH,envmap_vertex:W4,fog_vertex:X4,fog_pars_vertex:q4,fog_fragment:Y4,fog_pars_fragment:K4,gradientmap_pars_fragment:$4,lightmap_pars_fragment:Z4,lights_lambert_fragment:J4,lights_lambert_pars_fragment:Q4,lights_pars_begin:eH,lights_toon_fragment:nH,lights_toon_pars_fragment:iH,lights_phong_fragment:rH,lights_phong_pars_fragment:sH,lights_physical_fragment:oH,lights_physical_pars_fragment:aH,lights_fragment_begin:lH,lights_fragment_maps:cH,lights_fragment_end:uH,logdepthbuf_fragment:hH,logdepthbuf_pars_fragment:fH,logdepthbuf_pars_vertex:dH,logdepthbuf_vertex:pH,map_fragment:mH,map_pars_fragment:gH,map_particle_fragment:yH,map_particle_pars_fragment:_H,metalnessmap_fragment:vH,metalnessmap_pars_fragment:bH,morphinstance_vertex:xH,morphcolor_vertex:SH,morphnormal_vertex:wH,morphtarget_pars_vertex:EH,morphtarget_vertex:TH,normal_fragment_begin:MH,normal_fragment_maps:AH,normal_pars_fragment:CH,normal_pars_vertex:RH,normal_vertex:OH,normalmap_pars_fragment:DH,clearcoat_normal_fragment_begin:NH,clearcoat_normal_fragment_maps:IH,clearcoat_pars_fragment:PH,iridescence_pars_fragment:LH,opaque_fragment:UH,packing:kH,premultiplied_alpha_fragment:FH,project_vertex:zH,dithering_fragment:BH,dithering_pars_fragment:HH,roughnessmap_fragment:VH,roughnessmap_pars_fragment:GH,shadowmap_pars_fragment:jH,shadowmap_pars_vertex:WH,shadowmap_vertex:XH,shadowmask_pars_fragment:qH,skinbase_vertex:YH,skinning_pars_vertex:KH,skinning_vertex:$H,skinnormal_vertex:ZH,specularmap_fragment:JH,specularmap_pars_fragment:QH,tonemapping_fragment:eV,tonemapping_pars_fragment:tV,transmission_fragment:nV,transmission_pars_fragment:iV,uv_pars_fragment:rV,uv_pars_vertex:sV,uv_vertex:oV,worldpos_vertex:aV,background_vert:lV,background_frag:cV,backgroundCube_vert:uV,backgroundCube_frag:hV,cube_vert:fV,cube_frag:dV,depth_vert:pV,depth_frag:mV,distanceRGBA_vert:gV,distanceRGBA_frag:yV,equirect_vert:_V,equirect_frag:vV,linedashed_vert:bV,linedashed_frag:xV,meshbasic_vert:SV,meshbasic_frag:wV,meshlambert_vert:EV,meshlambert_frag:TV,meshmatcap_vert:MV,meshmatcap_frag:AV,meshnormal_vert:CV,meshnormal_frag:RV,meshphong_vert:OV,meshphong_frag:DV,meshphysical_vert:NV,meshphysical_frag:IV,meshtoon_vert:PV,meshtoon_frag:LV,points_vert:UV,points_frag:kV,shadow_vert:FV,shadow_frag:zV,sprite_vert:BV,sprite_frag:HV},it={common:{diffuse:{value:new $e(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jt},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jt}},envmap:{envMap:{value:null},envMapRotation:{value:new jt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jt},normalScale:{value:new Oe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $e(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0},uvTransform:{value:new jt}},sprite:{diffuse:{value:new $e(16777215)},opacity:{value:1},center:{value:new Oe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jt},alphaMap:{value:null},alphaMapTransform:{value:new jt},alphaTest:{value:0}}},Ws={basic:{uniforms:gr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:Kt.meshbasic_vert,fragmentShader:Kt.meshbasic_frag},lambert:{uniforms:gr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new $e(0)}}]),vertexShader:Kt.meshlambert_vert,fragmentShader:Kt.meshlambert_frag},phong:{uniforms:gr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new $e(0)},specular:{value:new $e(1118481)},shininess:{value:30}}]),vertexShader:Kt.meshphong_vert,fragmentShader:Kt.meshphong_frag},standard:{uniforms:gr([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new $e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Kt.meshphysical_vert,fragmentShader:Kt.meshphysical_frag},toon:{uniforms:gr([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new $e(0)}}]),vertexShader:Kt.meshtoon_vert,fragmentShader:Kt.meshtoon_frag},matcap:{uniforms:gr([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:Kt.meshmatcap_vert,fragmentShader:Kt.meshmatcap_frag},points:{uniforms:gr([it.points,it.fog]),vertexShader:Kt.points_vert,fragmentShader:Kt.points_frag},dashed:{uniforms:gr([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Kt.linedashed_vert,fragmentShader:Kt.linedashed_frag},depth:{uniforms:gr([it.common,it.displacementmap]),vertexShader:Kt.depth_vert,fragmentShader:Kt.depth_frag},normal:{uniforms:gr([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:Kt.meshnormal_vert,fragmentShader:Kt.meshnormal_frag},sprite:{uniforms:gr([it.sprite,it.fog]),vertexShader:Kt.sprite_vert,fragmentShader:Kt.sprite_frag},background:{uniforms:{uvTransform:{value:new jt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Kt.background_vert,fragmentShader:Kt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new jt}},vertexShader:Kt.backgroundCube_vert,fragmentShader:Kt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Kt.cube_vert,fragmentShader:Kt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Kt.equirect_vert,fragmentShader:Kt.equirect_frag},distanceRGBA:{uniforms:gr([it.common,it.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Kt.distanceRGBA_vert,fragmentShader:Kt.distanceRGBA_frag},shadow:{uniforms:gr([it.lights,it.fog,{color:{value:new $e(0)},opacity:{value:1}}]),vertexShader:Kt.shadow_vert,fragmentShader:Kt.shadow_frag}};Ws.physical={uniforms:gr([Ws.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jt},clearcoatNormalScale:{value:new Oe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jt},sheen:{value:0},sheenColor:{value:new $e(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jt},transmissionSamplerSize:{value:new Oe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jt},attenuationDistance:{value:0},attenuationColor:{value:new $e(0)},specularColor:{value:new $e(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jt},anisotropyVector:{value:new Oe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jt}}]),vertexShader:Kt.meshphysical_vert,fragmentShader:Kt.meshphysical_frag};const Xm={r:0,b:0,g:0},Jl=new Sr,VV=new yt;function GV(n,e,t,i,r,s,o){const l=new $e(0);let u=s===!0?0:1,h,f,p=null,m=0,g=null;function v(w){let E=w.isScene===!0?w.background:null;return E&amp;&amp;E.isTexture&amp;&amp;(E=(w.backgroundBlurriness&gt;0?t:e).get(E)),E}function x(w){let E=!1;const R=v(w);R===null?_(l,u):R&amp;&amp;R.isColor&amp;&amp;(_(R,1),E=!0);const N=n.xr.getEnvironmentBlendMode();N===&quot;additive&quot;?i.buffers.color.setClear(0,0,0,1,o):N===&quot;alpha-blend&quot;&amp;&amp;i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&amp;&amp;(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(w,E){const R=v(E);R&amp;&amp;(R.isCubeTexture||R.mapping===Sh)?(f===void 0&amp;&amp;(f=new Sn(new xl(1,1,1),new Ts({name:&quot;BackgroundCubeMaterial&quot;,uniforms:hh(Ws.backgroundCube.uniforms),vertexShader:Ws.backgroundCube.vertexShader,fragmentShader:Ws.backgroundCube.fragmentShader,side:xr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute(&quot;normal&quot;),f.geometry.deleteAttribute(&quot;uv&quot;),f.onBeforeRender=function(N,A,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(f.material,&quot;envMap&quot;,{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Jl.copy(E.backgroundRotation),Jl.x*=-1,Jl.y*=-1,Jl.z*=-1,R.isCubeTexture&amp;&amp;R.isRenderTargetTexture===!1&amp;&amp;(Jl.y*=-1,Jl.z*=-1),f.material.uniforms.envMap.value=R,f.material.uniforms.flipEnvMap.value=R.isCubeTexture&amp;&amp;R.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(VV.makeRotationFromEuler(Jl)),f.material.toneMapped=Zt.getTransfer(R.colorSpace)!==On,(p!==R||m!==R.version||g!==n.toneMapping)&amp;&amp;(f.material.needsUpdate=!0,p=R,m=R.version,g=n.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null)):R&amp;&amp;R.isTexture&amp;&amp;(h===void 0&amp;&amp;(h=new Sn(new Ah(2,2),new Ts({name:&quot;BackgroundMaterial&quot;,uniforms:hh(Ws.background.uniforms),vertexShader:Ws.background.vertexShader,fragmentShader:Ws.background.fragmentShader,side:Qr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute(&quot;normal&quot;),Object.defineProperty(h.material,&quot;map&quot;,{get:function(){return this.uniforms.t2D.value}}),r.update(h)),h.material.uniforms.t2D.value=R,h.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,h.material.toneMapped=Zt.getTransfer(R.colorSpace)!==On,R.matrixAutoUpdate===!0&amp;&amp;R.updateMatrix(),h.material.uniforms.uvTransform.value.copy(R.matrix),(p!==R||m!==R.version||g!==n.toneMapping)&amp;&amp;(h.material.needsUpdate=!0,p=R,m=R.version,g=n.toneMapping),h.layers.enableAll(),w.unshift(h,h.geometry,h.material,0,0,null))}function _(w,E){w.getRGB(Xm,XD(n)),i.buffers.color.setClear(Xm.r,Xm.g,Xm.b,E,o)}function T(){f!==void 0&amp;&amp;(f.geometry.dispose(),f.material.dispose(),f=void 0),h!==void 0&amp;&amp;(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return l},setClearColor:function(w,E=1){l.set(w),u=E,_(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(w){u=w,_(l,u)},render:x,addToRenderList:b,dispose:T}}function jV(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let s=r,o=!1;function l(O,L,V,Z,z){let K=!1;const I=p(Z,V,L);s!==I&amp;&amp;(s=I,h(s.object)),K=g(O,Z,V,z),K&amp;&amp;v(O,Z,V,z),z!==null&amp;&amp;e.update(z,n.ELEMENT_ARRAY_BUFFER),(K||o)&amp;&amp;(o=!1,E(O,L,V,Z),z!==null&amp;&amp;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(z).buffer))}function u(){return n.createVertexArray()}function h(O){return n.bindVertexArray(O)}function f(O){return n.deleteVertexArray(O)}function p(O,L,V){const Z=V.wireframe===!0;let z=i[O.id];z===void 0&amp;&amp;(z={},i[O.id]=z);let K=z[L.id];K===void 0&amp;&amp;(K={},z[L.id]=K);let I=K[Z];return I===void 0&amp;&amp;(I=m(u()),K[Z]=I),I}function m(O){const L=[],V=[],Z=[];for(let z=0;z&lt;t;z++)L[z]=0,V[z]=0,Z[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:V,attributeDivisors:Z,object:O,attributes:{},index:null}}function g(O,L,V,Z){const z=s.attributes,K=L.attributes;let I=0;const j=V.getAttributes();for(const G in j)if(j[G].location&gt;=0){const F=z[G];let ne=K[G];if(ne===void 0&amp;&amp;(G===&quot;instanceMatrix&quot;&amp;&amp;O.instanceMatrix&amp;&amp;(ne=O.instanceMatrix),G===&quot;instanceColor&quot;&amp;&amp;O.instanceColor&amp;&amp;(ne=O.instanceColor)),F===void 0||F.attribute!==ne||ne&amp;&amp;F.data!==ne.data)return!0;I++}return s.attributesNum!==I||s.index!==Z}function v(O,L,V,Z){const z={},K=L.attributes;let I=0;const j=V.getAttributes();for(const G in j)if(j[G].location&gt;=0){let F=K[G];F===void 0&amp;&amp;(G===&quot;instanceMatrix&quot;&amp;&amp;O.instanceMatrix&amp;&amp;(F=O.instanceMatrix),G===&quot;instanceColor&quot;&amp;&amp;O.instanceColor&amp;&amp;(F=O.instanceColor));const ne={};ne.attribute=F,F&amp;&amp;F.data&amp;&amp;(ne.data=F.data),z[G]=ne,I++}s.attributes=z,s.attributesNum=I,s.index=Z}function x(){const O=s.newAttributes;for(let L=0,V=O.length;L&lt;V;L++)O[L]=0}function b(O){_(O,0)}function _(O,L){const V=s.newAttributes,Z=s.enabledAttributes,z=s.attributeDivisors;V[O]=1,Z[O]===0&amp;&amp;(n.enableVertexAttribArray(O),Z[O]=1),z[O]!==L&amp;&amp;(n.vertexAttribDivisor(O,L),z[O]=L)}function T(){const O=s.newAttributes,L=s.enabledAttributes;for(let V=0,Z=L.length;V&lt;Z;V++)L[V]!==O[V]&amp;&amp;(n.disableVertexAttribArray(V),L[V]=0)}function w(O,L,V,Z,z,K,I){I===!0?n.vertexAttribIPointer(O,L,V,z,K):n.vertexAttribPointer(O,L,V,Z,z,K)}function E(O,L,V,Z){x();const z=Z.attributes,K=V.getAttributes(),I=L.defaultAttributeValues;for(const j in K){const G=K[j];if(G.location&gt;=0){let ee=z[j];if(ee===void 0&amp;&amp;(j===&quot;instanceMatrix&quot;&amp;&amp;O.instanceMatrix&amp;&amp;(ee=O.instanceMatrix),j===&quot;instanceColor&quot;&amp;&amp;O.instanceColor&amp;&amp;(ee=O.instanceColor)),ee!==void 0){const F=ee.normalized,ne=ee.itemSize,le=e.get(ee);if(le===void 0)continue;const ce=le.buffer,ie=le.type,oe=le.bytesPerElement,ae=ie===n.INT||ie===n.UNSIGNED_INT||ee.gpuType===ny;if(ee.isInterleavedBufferAttribute){const ue=ee.data,ve=ue.stride,He=ee.offset;if(ue.isInstancedInterleavedBuffer){for(let Xe=0;Xe&lt;G.locationSize;Xe++)_(G.location+Xe,ue.meshPerAttribute);O.isInstancedMesh!==!0&amp;&amp;Z._maxInstanceCount===void 0&amp;&amp;(Z._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let Xe=0;Xe&lt;G.locationSize;Xe++)b(G.location+Xe);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let Xe=0;Xe&lt;G.locationSize;Xe++)w(G.location+Xe,ne/G.locationSize,ie,F,ve*oe,(He+ne/G.locationSize*Xe)*oe,ae)}else{if(ee.isInstancedBufferAttribute){for(let ue=0;ue&lt;G.locationSize;ue++)_(G.location+ue,ee.meshPerAttribute);O.isInstancedMesh!==!0&amp;&amp;Z._maxInstanceCount===void 0&amp;&amp;(Z._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let ue=0;ue&lt;G.locationSize;ue++)b(G.location+ue);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let ue=0;ue&lt;G.locationSize;ue++)w(G.location+ue,ne/G.locationSize,ie,F,ne*oe,ne/G.locationSize*ue*oe,ae)}}else if(I!==void 0){const F=I[j];if(F!==void 0)switch(F.length){case 2:n.vertexAttrib2fv(G.location,F);break;case 3:n.vertexAttrib3fv(G.location,F);break;case 4:n.vertexAttrib4fv(G.location,F);break;default:n.vertexAttrib1fv(G.location,F)}}}}T()}function R(){D();for(const O in i){const L=i[O];for(const V in L){const Z=L[V];for(const z in Z)f(Z[z].object),delete Z[z];delete L[V]}delete i[O]}}function N(O){if(i[O.id]===void 0)return;const L=i[O.id];for(const V in L){const Z=L[V];for(const z in Z)f(Z[z].object),delete Z[z];delete L[V]}delete i[O.id]}function A(O){for(const L in i){const V=i[L];if(V[O.id]===void 0)continue;const Z=V[O.id];for(const z in Z)f(Z[z].object),delete Z[z];delete V[O.id]}}function D(){C(),o=!0,s!==r&amp;&amp;(s=r,h(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:D,resetDefaultState:C,dispose:R,releaseStatesOfGeometry:N,releaseStatesOfProgram:A,initAttributes:x,enableAttribute:b,disableUnusedAttributes:T}}function WV(n,e,t){let i;function r(h){i=h}function s(h,f){n.drawArrays(i,h,f),t.update(f,i,1)}function o(h,f,p){p!==0&amp;&amp;(n.drawArraysInstanced(i,h,f,p),t.update(f,i,p))}function l(h,f,p){if(p===0)return;e.get(&quot;WEBGL_multi_draw&quot;).multiDrawArraysWEBGL(i,h,0,f,0,p);let g=0;for(let v=0;v&lt;p;v++)g+=f[v];t.update(g,i,1)}function u(h,f,p,m){if(p===0)return;const g=e.get(&quot;WEBGL_multi_draw&quot;);if(g===null)for(let v=0;v&lt;h.length;v++)o(h[v],f[v],m[v]);else{g.multiDrawArraysInstancedWEBGL(i,h,0,f,0,m,0,p);let v=0;for(let x=0;x&lt;p;x++)v+=f[x]*m[x];t.update(v,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function XV(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has(&quot;EXT_texture_filter_anisotropic&quot;)===!0){const A=e.get(&quot;EXT_texture_filter_anisotropic&quot;);r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(A){return!(A!==vr&amp;&amp;i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(A){const D=A===wh&amp;&amp;(e.has(&quot;EXT_color_buffer_half_float&quot;)||e.has(&quot;EXT_color_buffer_float&quot;));return!(A!==es&amp;&amp;i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&amp;&amp;A!==Pr&amp;&amp;!D)}function u(A){if(A===&quot;highp&quot;){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision&gt;0&amp;&amp;n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision&gt;0)return&quot;highp&quot;;A=&quot;mediump&quot;}return A===&quot;mediump&quot;&amp;&amp;n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision&gt;0&amp;&amp;n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision&gt;0?&quot;mediump&quot;:&quot;lowp&quot;}let h=t.precision!==void 0?t.precision:&quot;highp&quot;;const f=u(h);f!==h&amp;&amp;(console.warn(&quot;THREE.WebGLRenderer:&quot;,h,&quot;not supported, using&quot;,f,&quot;instead.&quot;),h=f);const p=t.logarithmicDepthBuffer===!0,m=t.reverseDepthBuffer===!0&amp;&amp;e.has(&quot;EXT_clip_control&quot;),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),R=v&gt;0,N=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:o,textureTypeReadable:l,precision:h,logarithmicDepthBuffer:p,reverseDepthBuffer:m,maxTextures:g,maxVertexTextures:v,maxTextureSize:x,maxCubemapSize:b,maxAttributes:_,maxVertexUniforms:T,maxVaryings:w,maxFragmentUniforms:E,vertexTextures:R,maxSamples:N}}function qV(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Qo,l=new jt,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const g=p.length!==0||m||i!==0||r;return r=m,i=p.length,g},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=f(p,m,0)},this.setState=function(p,m,g){const v=p.clippingPlanes,x=p.clipIntersection,b=p.clipShadows,_=n.get(p);if(!r||v===null||v.length===0||s&amp;&amp;!b)s?f(null):h();else{const T=s?0:i,w=T*4;let E=_.clippingState||null;u.value=E,E=f(v,m,w,g);for(let R=0;R!==w;++R)E[R]=t[R];_.clippingState=E,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=T}};function h(){u.value!==t&amp;&amp;(u.value=t,u.needsUpdate=i&gt;0),e.numPlanes=i,e.numIntersection=0}function f(p,m,g,v){const x=p!==null?p.length:0;let b=null;if(x!==0){if(b=u.value,v!==!0||b===null){const _=g+x*4,T=m.matrixWorldInverse;l.getNormalMatrix(T),(b===null||b.length&lt;_)&amp;&amp;(b=new Float32Array(_));for(let w=0,E=g;w!==x;++w,E+=4)o.copy(p[w]).applyMatrix4(T,l),o.normal.toArray(b,E),b[E+3]=o.constant}u.value=b,u.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,b}}function YV(n){let e=new WeakMap;function t(o,l){return l===gd?o.mapping=fa:l===yd&amp;&amp;(o.mapping=fl),o}function i(o){if(o&amp;&amp;o.isTexture){const l=o.mapping;if(l===gd||l===yd)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&amp;&amp;u.height&gt;0){const h=new KD(u.height);return h.fromEquirectangularTexture(n,o),e.set(o,h),o.addEventListener(&quot;dispose&quot;,r),t(h.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener(&quot;dispose&quot;,r);const u=e.get(l);u!==void 0&amp;&amp;(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Ku=4,eC=[.125,.215,.35,.446,.526,.582],ac=20,Wb=new Fc,tC=new $e;let Xb=null,qb=0,Yb=0,Kb=!1;const rc=(1+Math.sqrt(5))/2,Pu=1/rc,nC=[new Y(-rc,Pu,0),new Y(rc,Pu,0),new Y(-Pu,0,rc),new Y(Pu,0,rc),new Y(0,rc,-Pu),new Y(0,rc,Pu),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)],KV=new Y;class fS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:l=KV}=s;Xb=this._renderer.getRenderTarget(),qb=this._renderer.getActiveCubeFace(),Yb=this._renderer.getActiveMipmapLevel(),Kb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,i,r,u,l),t&gt;0&amp;&amp;this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&amp;&amp;(this._cubemapMaterial=sC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&amp;&amp;(this._equirectMaterial=rC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&amp;&amp;this._cubemapMaterial.dispose(),this._equirectMaterial!==null&amp;&amp;this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&amp;&amp;this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&amp;&amp;this._pingPongRenderTarget.dispose();for(let e=0;e&lt;this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Xb,qb,Yb),this._renderer.xr.enabled=Kb,e.scissorTest=!1,qm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===fa||e.mapping===fl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Xb=this._renderer.getRenderTarget(),qb=this._renderer.getActiveCubeFace(),Yb=this._renderer.getActiveMipmapLevel(),Kb=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:fi,minFilter:fi,generateMipmaps:!1,type:wh,format:vr,colorSpace:fr,depthBuffer:!1},r=iC(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&amp;&amp;this._dispose(),this._pingPongRenderTarget=iC(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$V(s)),this._blurMaterial=ZV(s,e,t)}return r}_compileMaterial(e){const t=new Sn(this._lodPlanes[0],e);this._renderer.compile(t,Wb)}_sceneToCubeUV(e,t,i,r,s){const u=new Yn(90,1,t,i),h=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,g=p.toneMapping;p.getClearColor(tC),p.toneMapping=ca,p.autoClear=!1;const v=new $i({name:&quot;PMREM.Background&quot;,side:xr,depthWrite:!1,depthTest:!1}),x=new Sn(new xl,v);let b=!1;const _=e.background;_?_.isColor&amp;&amp;(v.color.copy(_),e.background=null,b=!0):(v.color.copy(tC),b=!0);for(let T=0;T&lt;6;T++){const w=T%3;w===0?(u.up.set(0,h[T],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+f[T],s.y,s.z)):w===1?(u.up.set(0,0,h[T]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+f[T],s.z)):(u.up.set(0,h[T],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+f[T]));const E=this._cubeSize;qm(r,w*E,T&gt;2?E:0,E,E),p.setRenderTarget(r),b&amp;&amp;p.render(x,u),p.render(e,u)}x.geometry.dispose(),x.material.dispose(),p.toneMapping=g,p.autoClear=m,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===fa||e.mapping===fl;r?(this._cubemapMaterial===null&amp;&amp;(this._cubemapMaterial=sC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&amp;&amp;(this._equirectMaterial=rC());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Sn(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;qm(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(o,Wb)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s&lt;r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=nC[(r-s-1)%nC.length];this._blur(e,s-1,s,o,l)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,&quot;latitudinal&quot;,s),this._halfBlur(o,e,i,i,r,&quot;longitudinal&quot;,s)}_halfBlur(e,t,i,r,s,o,l){const u=this._renderer,h=this._blurMaterial;o!==&quot;latitudinal&quot;&amp;&amp;o!==&quot;longitudinal&quot;&amp;&amp;console.error(&quot;blur direction must be either latitudinal or longitudinal!&quot;);const f=3,p=new Sn(this._lodPlanes[r],h),m=h.uniforms,g=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*ac-1),x=s/v,b=isFinite(s)?1+Math.floor(f*x):ac;b&gt;ac&amp;&amp;console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${ac}`);const _=[];let T=0;for(let A=0;A&lt;ac;++A){const D=A/x,C=Math.exp(-D*D/2);_.push(C),A===0?T+=C:A&lt;b&amp;&amp;(T+=2*C)}for(let A=0;A&lt;_.length;A++)_[A]=_[A]/T;m.envMap.value=e.texture,m.samples.value=b,m.weights.value=_,m.latitudinal.value=o===&quot;latitudinal&quot;,l&amp;&amp;(m.poleAxis.value=l);const{_lodMax:w}=this;m.dTheta.value=v,m.mipInt.value=w-i;const E=this._sizeLods[r],R=3*E*(r&gt;w-Ku?r-w+Ku:0),N=4*(this._cubeSize-E);qm(t,R,N,3*E,2*E),u.setRenderTarget(t),u.render(p,Wb)}}function $V(n){const e=[],t=[],i=[];let r=n;const s=n-Ku+1+eC.length;for(let o=0;o&lt;s;o++){const l=Math.pow(2,r);t.push(l);let u=1/l;o&gt;n-Ku?u=eC[o-n+Ku-1]:o===0&amp;&amp;(u=0),i.push(u);const h=1/(l-2),f=-h,p=1+h,m=[f,f,p,f,p,p,f,f,p,p,f,p],g=6,v=6,x=3,b=2,_=1,T=new Float32Array(x*v*g),w=new Float32Array(b*v*g),E=new Float32Array(_*v*g);for(let N=0;N&lt;g;N++){const A=N%3*2/3-1,D=N&gt;2?0:-1,C=[A,D,0,A+2/3,D,0,A+2/3,D+1,0,A,D,0,A+2/3,D+1,0,A,D+1,0];T.set(C,x*v*N),w.set(m,b*v*N);const O=[N,N,N,N,N,N];E.set(O,_*v*N)}const R=new Lt;R.setAttribute(&quot;position&quot;,new Jt(T,x)),R.setAttribute(&quot;uv&quot;,new Jt(w,b)),R.setAttribute(&quot;faceIndex&quot;,new Jt(E,_)),e.push(R),r&gt;Ku&amp;&amp;r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function iC(n,e,t){const i=new Js(n,e,t);return i.texture.mapping=Sh,i.texture.name=&quot;PMREM.cubeUv&quot;,i.scissorTest=!0,i}function qm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function ZV(n,e,t){const i=new Float32Array(ac),r=new Y(0,1,0);return new Ts({name:&quot;SphericalGaussianBlur&quot;,defines:{n:ac,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:kw(),fragmentShader:`

                    precision mediump float;
                    precision mediump int;

                    varying vec3 vOutputDirection;

                    uniform sampler2D envMap;
                    uniform int samples;
                    uniform float weights[ n ];
                    uniform bool latitudinal;
                    uniform float dTheta;
                    uniform float mipInt;
                    uniform vec3 poleAxis;

                    #define ENVMAP_TYPE_CUBE_UV
                    #include &lt;cube_uv_reflection_fragment&gt;

                    vec3 getSample( float theta, vec3 axis ) {

                            float cosTheta = cos( theta );
                            // Rodrigues&#x27; axis-angle rotation
                            vec3 sampleDirection = vOutputDirection * cosTheta
                                    + cross( axis, vOutputDirection ) * sin( theta )
                                    + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

                            return bilinearCubeUV( envMap, sampleDirection, mipInt );

                    }

                    void main() {

                            vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

                            if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

                                    axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

                            }

                            axis = normalize( axis );

                            gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
                            gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

                            for ( int i = 1; i &lt; n; i++ ) {

                                    if ( i &gt;= samples ) {

                                            break;

                                    }

                                    float theta = dTheta * float( i );
                                    gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
                                    gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

                            }

                    }
            `,blending:la,depthTest:!1,depthWrite:!1})}function rC(){return new Ts({name:&quot;EquirectangularToCubeUV&quot;,uniforms:{envMap:{value:null}},vertexShader:kw(),fragmentShader:`

                    precision mediump float;
                    precision mediump int;

                    varying vec3 vOutputDirection;

                    uniform sampler2D envMap;

                    #include &lt;common&gt;

                    void main() {

                            vec3 outputDirection = normalize( vOutputDirection );
                            vec2 uv = equirectUv( outputDirection );

                            gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

                    }
            `,blending:la,depthTest:!1,depthWrite:!1})}function sC(){return new Ts({name:&quot;CubemapToCubeUV&quot;,uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:kw(),fragmentShader:`

                    precision mediump float;
                    precision mediump int;

                    uniform float flipEnvMap;

                    varying vec3 vOutputDirection;

                    uniform samplerCube envMap;

                    void main() {

                            gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

                    }
            `,blending:la,depthTest:!1,depthWrite:!1})}function kw(){return`

            precision mediump float;
            precision mediump int;

            attribute float faceIndex;

            varying vec3 vOutputDirection;

            // RH coordinate system; PMREM face-indexing convention
            vec3 getDirection( vec2 uv, float face ) {

                    uv = 2.0 * uv - 1.0;

                    vec3 direction = vec3( uv, 1.0 );

                    if ( face == 0.0 ) {

                            direction = direction.zyx; // ( 1, v, u ) pos x

                    } else if ( face == 1.0 ) {

                            direction = direction.xzy;
                            direction.xz *= -1.0; // ( -u, 1, -v ) pos y

                    } else if ( face == 2.0 ) {

                            direction.x *= -1.0; // ( -u, v, 1 ) pos z

                    } else if ( face == 3.0 ) {

                            direction = direction.zyx;
                            direction.xz *= -1.0; // ( -1, v, -u ) neg x

                    } else if ( face == 4.0 ) {

                            direction = direction.xzy;
                            direction.xy *= -1.0; // ( -u, -1, v ) neg y

                    } else if ( face == 5.0 ) {

                            direction.z *= -1.0; // ( u, v, -1 ) neg z

                    }

                    return direction;

            }

            void main() {

                    vOutputDirection = getDirection( uv, faceIndex );
                    gl_Position = vec4( position, 1.0 );

            }
    `}function JV(n){let e=new WeakMap,t=null;function i(l){if(l&amp;&amp;l.isTexture){const u=l.mapping,h=u===gd||u===yd,f=u===fa||u===fl;if(h||f){let p=e.get(l);const m=p!==void 0?p.texture.pmremVersion:0;if(l.isRenderTargetTexture&amp;&amp;l.pmremVersion!==m)return t===null&amp;&amp;(t=new fS(n)),p=h?t.fromEquirectangular(l,p):t.fromCubemap(l,p),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),p.texture;if(p!==void 0)return p.texture;{const g=l.image;return h&amp;&amp;g&amp;&amp;g.height&gt;0||f&amp;&amp;g&amp;&amp;r(g)?(t===null&amp;&amp;(t=new fS(n)),p=h?t.fromEquirectangular(l):t.fromCubemap(l),p.texture.pmremVersion=l.pmremVersion,e.set(l,p),l.addEventListener(&quot;dispose&quot;,s),p.texture):null}}}return l}function r(l){let u=0;const h=6;for(let f=0;f&lt;h;f++)l[f]!==void 0&amp;&amp;u++;return u===h}function s(l){const u=l.target;u.removeEventListener(&quot;dispose&quot;,s);const h=e.get(u);h!==void 0&amp;&amp;(e.delete(u),h.dispose())}function o(){e=new WeakMap,t!==null&amp;&amp;(t.dispose(),t=null)}return{get:i,dispose:o}}function QV(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case&quot;WEBGL_depth_texture&quot;:r=n.getExtension(&quot;WEBGL_depth_texture&quot;)||n.getExtension(&quot;MOZ_WEBGL_depth_texture&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_depth_texture&quot;);break;case&quot;EXT_texture_filter_anisotropic&quot;:r=n.getExtension(&quot;EXT_texture_filter_anisotropic&quot;)||n.getExtension(&quot;MOZ_EXT_texture_filter_anisotropic&quot;)||n.getExtension(&quot;WEBKIT_EXT_texture_filter_anisotropic&quot;);break;case&quot;WEBGL_compressed_texture_s3tc&quot;:r=n.getExtension(&quot;WEBGL_compressed_texture_s3tc&quot;)||n.getExtension(&quot;MOZ_WEBGL_compressed_texture_s3tc&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_compressed_texture_s3tc&quot;);break;case&quot;WEBGL_compressed_texture_pvrtc&quot;:r=n.getExtension(&quot;WEBGL_compressed_texture_pvrtc&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_compressed_texture_pvrtc&quot;);break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t(&quot;EXT_color_buffer_float&quot;),t(&quot;WEBGL_clip_cull_distance&quot;),t(&quot;OES_texture_float_linear&quot;),t(&quot;EXT_color_buffer_half_float&quot;),t(&quot;WEBGL_multisampled_render_to_texture&quot;),t(&quot;WEBGL_render_shared_exponent&quot;)},get:function(i){const r=t(i);return r===null&amp;&amp;Rg(&quot;THREE.WebGLRenderer: &quot;+i+&quot; extension not supported.&quot;),r}}}function e5(n,e,t,i){const r={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&amp;&amp;e.remove(m.index);for(const v in m.attributes)e.remove(m.attributes[v]);m.removeEventListener(&quot;dispose&quot;,o),delete r[m.id];const g=s.get(m);g&amp;&amp;(e.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&amp;&amp;delete m._maxInstanceCount,t.memory.geometries--}function l(p,m){return r[m.id]===!0||(m.addEventListener(&quot;dispose&quot;,o),r[m.id]=!0,t.memory.geometries++),m}function u(p){const m=p.attributes;for(const g in m)e.update(m[g],n.ARRAY_BUFFER)}function h(p){const m=[],g=p.index,v=p.attributes.position;let x=0;if(g!==null){const T=g.array;x=g.version;for(let w=0,E=T.length;w&lt;E;w+=3){const R=T[w+0],N=T[w+1],A=T[w+2];m.push(R,N,N,A,A,R)}}else if(v!==void 0){const T=v.array;x=v.version;for(let w=0,E=T.length/3-1;w&lt;E;w+=3){const R=w+0,N=w+1,A=w+2;m.push(R,N,N,A,A,R)}}else return;const b=new(VD(m)?hw:uw)(m,1);b.version=x;const _=s.get(p);_&amp;&amp;e.remove(_),s.set(p,b)}function f(p){const m=s.get(p);if(m){const g=p.index;g!==null&amp;&amp;m.version&lt;g.version&amp;&amp;h(p)}else h(p);return s.get(p)}return{get:l,update:u,getWireframeAttribute:f}}function t5(n,e,t){let i;function r(m){i=m}let s,o;function l(m){s=m.type,o=m.bytesPerElement}function u(m,g){n.drawElements(i,g,s,m*o),t.update(g,i,1)}function h(m,g,v){v!==0&amp;&amp;(n.drawElementsInstanced(i,g,s,m*o,v),t.update(g,i,v))}function f(m,g,v){if(v===0)return;e.get(&quot;WEBGL_multi_draw&quot;).multiDrawElementsWEBGL(i,g,0,s,m,0,v);let b=0;for(let _=0;_&lt;v;_++)b+=g[_];t.update(b,i,1)}function p(m,g,v,x){if(v===0)return;const b=e.get(&quot;WEBGL_multi_draw&quot;);if(b===null)for(let _=0;_&lt;m.length;_++)h(m[_]/o,g[_],x[_]);else{b.multiDrawElementsInstancedWEBGL(i,g,0,s,m,0,x,0,v);let _=0;for(let T=0;T&lt;v;T++)_+=g[T]*x[T];t.update(_,i,1)}}this.setMode=r,this.setIndex=l,this.render=u,this.renderInstances=h,this.renderMultiDraw=f,this.renderMultiDrawInstances=p}function n5(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,l){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error(&quot;THREE.WebGLInfo: Unknown draw mode:&quot;,o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function i5(n,e,t){const i=new WeakMap,r=new yn;function s(o,l,u){const h=o.morphTargetInfluences,f=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,p=f!==void 0?f.length:0;let m=i.get(l);if(m===void 0||m.count!==p){let O=function(){D.dispose(),i.delete(l),l.removeEventListener(&quot;dispose&quot;,O)};var g=O;m!==void 0&amp;&amp;m.texture.dispose();const v=l.morphAttributes.position!==void 0,x=l.morphAttributes.normal!==void 0,b=l.morphAttributes.color!==void 0,_=l.morphAttributes.position||[],T=l.morphAttributes.normal||[],w=l.morphAttributes.color||[];let E=0;v===!0&amp;&amp;(E=1),x===!0&amp;&amp;(E=2),b===!0&amp;&amp;(E=3);let R=l.attributes.position.count*E,N=1;R&gt;e.maxTextureSize&amp;&amp;(N=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const A=new Float32Array(R*N*4*p),D=new Wd(A,R,N,p);D.type=Pr,D.needsUpdate=!0;const C=E*4;for(let L=0;L&lt;p;L++){const V=_[L],Z=T[L],z=w[L],K=R*N*4*L;for(let I=0;I&lt;V.count;I++){const j=I*C;v===!0&amp;&amp;(r.fromBufferAttribute(V,I),A[K+j+0]=r.x,A[K+j+1]=r.y,A[K+j+2]=r.z,A[K+j+3]=0),x===!0&amp;&amp;(r.fromBufferAttribute(Z,I),A[K+j+4]=r.x,A[K+j+5]=r.y,A[K+j+6]=r.z,A[K+j+7]=0),b===!0&amp;&amp;(r.fromBufferAttribute(z,I),A[K+j+8]=r.x,A[K+j+9]=r.y,A[K+j+10]=r.z,A[K+j+11]=z.itemSize===4?r.w:1)}}m={count:p,texture:D,size:new Oe(R,N)},i.set(l,m),l.addEventListener(&quot;dispose&quot;,O)}if(o.isInstancedMesh===!0&amp;&amp;o.morphTexture!==null)u.getUniforms().setValue(n,&quot;morphTexture&quot;,o.morphTexture,t);else{let v=0;for(let b=0;b&lt;h.length;b++)v+=h[b];const x=l.morphTargetsRelative?1:1-v;u.getUniforms().setValue(n,&quot;morphTargetBaseInfluence&quot;,x),u.getUniforms().setValue(n,&quot;morphTargetInfluences&quot;,h)}u.getUniforms().setValue(n,&quot;morphTargetsTexture&quot;,m.texture,t),u.getUniforms().setValue(n,&quot;morphTargetsTextureSize&quot;,m.size)}return{update:s}}function r5(n,e,t,i){let r=new WeakMap;function s(u){const h=i.render.frame,f=u.geometry,p=e.get(u,f);if(r.get(p)!==h&amp;&amp;(e.update(p),r.set(p,h)),u.isInstancedMesh&amp;&amp;(u.hasEventListener(&quot;dispose&quot;,l)===!1&amp;&amp;u.addEventListener(&quot;dispose&quot;,l),r.get(u)!==h&amp;&amp;(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&amp;&amp;t.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,h))),u.isSkinnedMesh){const m=u.skeleton;r.get(m)!==h&amp;&amp;(m.update(),r.set(m,h))}return p}function o(){r=new WeakMap}function l(u){const h=u.target;h.removeEventListener(&quot;dispose&quot;,l),t.remove(h.instanceMatrix),h.instanceColor!==null&amp;&amp;t.remove(h.instanceColor)}return{update:s,dispose:o}}const zN=new Kn,oC=new by(1,1),BN=new Wd,HN=new cy,VN=new Xd,aC=[],lC=[],cC=new Float32Array(16),uC=new Float32Array(9),hC=new Float32Array(4);function Oh(n,e,t){const i=n[0];if(i&lt;=0||i&gt;0)return n;const r=e*t;let s=aC[r];if(s===void 0&amp;&amp;(s=new Float32Array(r),aC[r]=s),e!==0){i.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function ki(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t&lt;i;t++)if(n[t]!==e[t])return!1;return!0}function Fi(n,e){for(let t=0,i=e.length;t&lt;i;t++)n[t]=e[t]}function By(n,e){let t=lC[e];t===void 0&amp;&amp;(t=new Int32Array(e),lC[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function s5(n,e){const t=this.cache;t[0]!==e&amp;&amp;(n.uniform1f(this.addr,e),t[0]=e)}function o5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&amp;&amp;(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ki(t,e))return;n.uniform2fv(this.addr,e),Fi(t,e)}}function a5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&amp;&amp;(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&amp;&amp;(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ki(t,e))return;n.uniform3fv(this.addr,e),Fi(t,e)}}function l5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&amp;&amp;(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ki(t,e))return;n.uniform4fv(this.addr,e),Fi(t,e)}}function c5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ki(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Fi(t,e)}else{if(ki(t,i))return;hC.set(i),n.uniformMatrix2fv(this.addr,!1,hC),Fi(t,i)}}function u5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ki(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Fi(t,e)}else{if(ki(t,i))return;uC.set(i),n.uniformMatrix3fv(this.addr,!1,uC),Fi(t,i)}}function h5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ki(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Fi(t,e)}else{if(ki(t,i))return;cC.set(i),n.uniformMatrix4fv(this.addr,!1,cC),Fi(t,i)}}function f5(n,e){const t=this.cache;t[0]!==e&amp;&amp;(n.uniform1i(this.addr,e),t[0]=e)}function d5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&amp;&amp;(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ki(t,e))return;n.uniform2iv(this.addr,e),Fi(t,e)}}function p5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&amp;&amp;(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ki(t,e))return;n.uniform3iv(this.addr,e),Fi(t,e)}}function m5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&amp;&amp;(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ki(t,e))return;n.uniform4iv(this.addr,e),Fi(t,e)}}function g5(n,e){const t=this.cache;t[0]!==e&amp;&amp;(n.uniform1ui(this.addr,e),t[0]=e)}function y5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&amp;&amp;(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ki(t,e))return;n.uniform2uiv(this.addr,e),Fi(t,e)}}function _5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&amp;&amp;(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ki(t,e))return;n.uniform3uiv(this.addr,e),Fi(t,e)}}function v5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&amp;&amp;(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ki(t,e))return;n.uniform4uiv(this.addr,e),Fi(t,e)}}function b5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(oC.compareFunction=lw,s=oC):s=zN,t.setTexture2D(e||s,r)}function x5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||HN,r)}function S5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||VN,r)}function w5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&amp;&amp;(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||BN,r)}function E5(n){switch(n){case 5126:return s5;case 35664:return o5;case 35665:return a5;case 35666:return l5;case 35674:return c5;case 35675:return u5;case 35676:return h5;case 5124:case 35670:return f5;case 35667:case 35671:return d5;case 35668:case 35672:return p5;case 35669:case 35673:return m5;case 5125:return g5;case 36294:return y5;case 36295:return _5;case 36296:return v5;case 35678:case 36198:case 36298:case 36306:case 35682:return b5;case 35679:case 36299:case 36307:return x5;case 35680:case 36300:case 36308:case 36293:return S5;case 36289:case 36303:case 36311:case 36292:return w5}}function T5(n,e){n.uniform1fv(this.addr,e)}function M5(n,e){const t=Oh(e,this.size,2);n.uniform2fv(this.addr,t)}function A5(n,e){const t=Oh(e,this.size,3);n.uniform3fv(this.addr,t)}function C5(n,e){const t=Oh(e,this.size,4);n.uniform4fv(this.addr,t)}function R5(n,e){const t=Oh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function O5(n,e){const t=Oh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function D5(n,e){const t=Oh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function N5(n,e){n.uniform1iv(this.addr,e)}function I5(n,e){n.uniform2iv(this.addr,e)}function P5(n,e){n.uniform3iv(this.addr,e)}function L5(n,e){n.uniform4iv(this.addr,e)}function U5(n,e){n.uniform1uiv(this.addr,e)}function k5(n,e){n.uniform2uiv(this.addr,e)}function F5(n,e){n.uniform3uiv(this.addr,e)}function z5(n,e){n.uniform4uiv(this.addr,e)}function B5(n,e,t){const i=this.cache,r=e.length,s=By(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||zN,s[o])}function H5(n,e,t){const i=this.cache,r=e.length,s=By(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||HN,s[o])}function V5(n,e,t){const i=this.cache,r=e.length,s=By(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||VN,s[o])}function G5(n,e,t){const i=this.cache,r=e.length,s=By(t,r);ki(i,s)||(n.uniform1iv(this.addr,s),Fi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||BN,s[o])}function j5(n){switch(n){case 5126:return T5;case 35664:return M5;case 35665:return A5;case 35666:return C5;case 35674:return R5;case 35675:return O5;case 35676:return D5;case 5124:case 35670:return N5;case 35667:case 35671:return I5;case 35668:case 35672:return P5;case 35669:case 35673:return L5;case 5125:return U5;case 36294:return k5;case 36295:return F5;case 36296:return z5;case 35678:case 36198:case 36298:case 36306:case 35682:return B5;case 35679:case 36299:case 36307:return H5;case 35680:case 36300:case 36308:case 36293:return V5;case 36289:case 36303:case 36311:case 36292:return G5}}class W5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=E5(t.type)}}class X5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=j5(t.type)}}class q5{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const $b=/(\w+)(\])?(\[|\.)?/g;function fC(n,e){n.seq.push(e),n.map[e.id]=e}function Y5(n,e,t){const i=n.name,r=i.length;for($b.lastIndex=0;;){const s=$b.exec(i),o=$b.lastIndex;let l=s[1];const u=s[2]===&quot;]&quot;,h=s[3];if(u&amp;&amp;(l=l|0),h===void 0||h===&quot;[&quot;&amp;&amp;o+2===r){fC(t,h===void 0?new W5(l,n,e):new X5(l,n,e));break}else{let p=t.map[l];p===void 0&amp;&amp;(p=new q5(l),fC(t,p)),t=p}}}class Dg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r&lt;i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Y5(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&amp;&amp;s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&amp;&amp;this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],u=i[l.id];u.needsUpdate!==!1&amp;&amp;l.setValue(e,u.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&amp;&amp;i.push(o)}return i}}function dC(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const K5=37297;let $5=0;function Z5(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o&lt;s;o++){const l=o+1;i.push(`${l===e?&quot;&gt;&quot;:&quot; &quot;} ${l}: ${t[o]}`)}return i.join(`
`)}const pC=new jt;function J5(n){Zt._getMatrix(pC,Zt.workingColorSpace,n);const e=`mat3( ${pC.elements.map(t=&gt;t.toFixed(4))} )`;switch(Zt.getTransfer(n)){case vd:return[e,&quot;LinearTransferOETF&quot;];case On:return[e,&quot;sRGBTransferOETF&quot;];default:return console.warn(&quot;THREE.WebGLProgram: Unsupported color space: &quot;,n),[e,&quot;LinearTransferOETF&quot;]}}function mC(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&amp;&amp;r===&quot;&quot;)return&quot;&quot;;const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Z5(n.getShaderSource(e),o)}else return r}function Q5(n,e){const t=J5(e);return[`vec4 ${n}( vec4 value ) {`,`      return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,&quot;}&quot;].join(`
`)}function e8(n,e){let t;switch(e){case bD:t=&quot;Linear&quot;;break;case xD:t=&quot;Reinhard&quot;;break;case SD:t=&quot;Cineon&quot;;break;case wD:t=&quot;ACESFilmic&quot;;break;case TD:t=&quot;AgX&quot;;break;case MD:t=&quot;Neutral&quot;;break;case ED:t=&quot;Custom&quot;;break;default:console.warn(&quot;THREE.WebGLProgram: Unsupported toneMapping:&quot;,e),t=&quot;Linear&quot;}return&quot;vec3 &quot;+n+&quot;( vec3 color ) { return &quot;+t+&quot;ToneMapping( color ); }&quot;}const Ym=new Y;function t8(){Zt.getLuminanceCoefficients(Ym);const n=Ym.x.toFixed(4),e=Ym.y.toFixed(4),t=Ym.z.toFixed(4);return[&quot;float luminance( const in vec3 rgb ) {&quot;,`        const vec3 weights = vec3( ${n}, ${e}, ${t} );`,&quot;  return dot( weights, rgb );&quot;,&quot;}&quot;].join(`
`)}function n8(n){return[n.extensionClipCullDistance?&quot;#extension GL_ANGLE_clip_cull_distance : require&quot;:&quot;&quot;,n.extensionMultiDraw?&quot;#extension GL_ANGLE_multi_draw : require&quot;:&quot;&quot;].filter(Jf).join(`
`)}function i8(n){const e=[];for(const t in n){const i=n[t];i!==!1&amp;&amp;e.push(&quot;#define &quot;+t+&quot; &quot;+i)}return e.join(`
`)}function r8(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r&lt;i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let l=1;s.type===n.FLOAT_MAT2&amp;&amp;(l=2),s.type===n.FLOAT_MAT3&amp;&amp;(l=3),s.type===n.FLOAT_MAT4&amp;&amp;(l=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:l}}return t}function Jf(n){return n!==&quot;&quot;}function gC(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function yC(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const s8=/^[ \t]*#include +&lt;([\w\d./]+)&gt;/gm;function dS(n){return n.replace(s8,a8)}const o8=new Map;function a8(n,e){let t=Kt[e];if(t===void 0){const i=o8.get(e);if(i!==void 0)t=Kt[i],console.warn(&#x27;THREE.WebGLRenderer: Shader chunk &quot;%s&quot; has been deprecated. Use &quot;%s&quot; instead.&#x27;,e,i);else throw new Error(&quot;Can not resolve #include &lt;&quot;+e+&quot;&gt;&quot;)}return dS(t)}const l8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*&lt;\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _C(n){return n.replace(l8,c8)}function c8(n,e,t,i){let r=&quot;&quot;;for(let s=parseInt(e);s&lt;parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,&quot;[ &quot;+s+&quot; ]&quot;).replace(/UNROLLED_LOOP_INDEX/g,s);return r}function vC(n){let e=`precision ${n.precision} float;
    precision ${n.precision} int;
    precision ${n.precision} sampler2D;
    precision ${n.precision} samplerCube;
    precision ${n.precision} sampler3D;
    precision ${n.precision} sampler2DArray;
    precision ${n.precision} sampler2DShadow;
    precision ${n.precision} samplerCubeShadow;
    precision ${n.precision} sampler2DArrayShadow;
    precision ${n.precision} isampler2D;
    precision ${n.precision} isampler3D;
    precision ${n.precision} isamplerCube;
    precision ${n.precision} isampler2DArray;
    precision ${n.precision} usampler2D;
    precision ${n.precision} usampler3D;
    precision ${n.precision} usamplerCube;
    precision ${n.precision} usampler2DArray;
    `;return n.precision===&quot;highp&quot;?e+=`
#define HIGH_PRECISION`:n.precision===&quot;mediump&quot;?e+=`
#define MEDIUM_PRECISION`:n.precision===&quot;lowp&quot;&amp;&amp;(e+=`
#define LOW_PRECISION`),e}function u8(n){let e=&quot;SHADOWMAP_TYPE_BASIC&quot;;return n.shadowMapType===JS?e=&quot;SHADOWMAP_TYPE_PCF&quot;:n.shadowMapType===Q2?e=&quot;SHADOWMAP_TYPE_PCF_SOFT&quot;:n.shadowMapType===mo&amp;&amp;(e=&quot;SHADOWMAP_TYPE_VSM&quot;),e}function h8(n){let e=&quot;ENVMAP_TYPE_CUBE&quot;;if(n.envMap)switch(n.envMapMode){case fa:case fl:e=&quot;ENVMAP_TYPE_CUBE&quot;;break;case Sh:e=&quot;ENVMAP_TYPE_CUBE_UV&quot;;break}return e}function f8(n){let e=&quot;ENVMAP_MODE_REFLECTION&quot;;if(n.envMap)switch(n.envMapMode){case fl:e=&quot;ENVMAP_MODE_REFRACTION&quot;;break}return e}function d8(n){let e=&quot;ENVMAP_BLENDING_NONE&quot;;if(n.envMap)switch(n.combine){case Vd:e=&quot;ENVMAP_BLENDING_MULTIPLY&quot;;break;case _D:e=&quot;ENVMAP_BLENDING_MIX&quot;;break;case vD:e=&quot;ENVMAP_BLENDING_ADD&quot;;break}return e}function p8(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function m8(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const u=u8(t),h=h8(t),f=f8(t),p=d8(t),m=p8(t),g=n8(t),v=i8(s),x=r.createProgram();let b,_,T=t.glslVersion?&quot;#version &quot;+t.glslVersion+`
`:&quot;&quot;;t.isRawShaderMaterial?(b=[&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v].filter(Jf).join(`
`),b.length&gt;0&amp;&amp;(b+=`
`),_=[&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v].filter(Jf).join(`
`),_.length&gt;0&amp;&amp;(_+=`
`)):(b=[vC(t),&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v,t.extensionClipCullDistance?&quot;#define USE_CLIP_DISTANCE&quot;:&quot;&quot;,t.batching?&quot;#define USE_BATCHING&quot;:&quot;&quot;,t.batchingColor?&quot;#define USE_BATCHING_COLOR&quot;:&quot;&quot;,t.instancing?&quot;#define USE_INSTANCING&quot;:&quot;&quot;,t.instancingColor?&quot;#define USE_INSTANCING_COLOR&quot;:&quot;&quot;,t.instancingMorph?&quot;#define USE_INSTANCING_MORPH&quot;:&quot;&quot;,t.useFog&amp;&amp;t.fog?&quot;#define USE_FOG&quot;:&quot;&quot;,t.useFog&amp;&amp;t.fogExp2?&quot;#define FOG_EXP2&quot;:&quot;&quot;,t.map?&quot;#define USE_MAP&quot;:&quot;&quot;,t.envMap?&quot;#define USE_ENVMAP&quot;:&quot;&quot;,t.envMap?&quot;#define &quot;+f:&quot;&quot;,t.lightMap?&quot;#define USE_LIGHTMAP&quot;:&quot;&quot;,t.aoMap?&quot;#define USE_AOMAP&quot;:&quot;&quot;,t.bumpMap?&quot;#define USE_BUMPMAP&quot;:&quot;&quot;,t.normalMap?&quot;#define USE_NORMALMAP&quot;:&quot;&quot;,t.normalMapObjectSpace?&quot;#define USE_NORMALMAP_OBJECTSPACE&quot;:&quot;&quot;,t.normalMapTangentSpace?&quot;#define USE_NORMALMAP_TANGENTSPACE&quot;:&quot;&quot;,t.displacementMap?&quot;#define USE_DISPLACEMENTMAP&quot;:&quot;&quot;,t.emissiveMap?&quot;#define USE_EMISSIVEMAP&quot;:&quot;&quot;,t.anisotropy?&quot;#define USE_ANISOTROPY&quot;:&quot;&quot;,t.anisotropyMap?&quot;#define USE_ANISOTROPYMAP&quot;:&quot;&quot;,t.clearcoatMap?&quot;#define USE_CLEARCOATMAP&quot;:&quot;&quot;,t.clearcoatRoughnessMap?&quot;#define USE_CLEARCOAT_ROUGHNESSMAP&quot;:&quot;&quot;,t.clearcoatNormalMap?&quot;#define USE_CLEARCOAT_NORMALMAP&quot;:&quot;&quot;,t.iridescenceMap?&quot;#define USE_IRIDESCENCEMAP&quot;:&quot;&quot;,t.iridescenceThicknessMap?&quot;#define USE_IRIDESCENCE_THICKNESSMAP&quot;:&quot;&quot;,t.specularMap?&quot;#define USE_SPECULARMAP&quot;:&quot;&quot;,t.specularColorMap?&quot;#define USE_SPECULAR_COLORMAP&quot;:&quot;&quot;,t.specularIntensityMap?&quot;#define USE_SPECULAR_INTENSITYMAP&quot;:&quot;&quot;,t.roughnessMap?&quot;#define USE_ROUGHNESSMAP&quot;:&quot;&quot;,t.metalnessMap?&quot;#define USE_METALNESSMAP&quot;:&quot;&quot;,t.alphaMap?&quot;#define USE_ALPHAMAP&quot;:&quot;&quot;,t.alphaHash?&quot;#define USE_ALPHAHASH&quot;:&quot;&quot;,t.transmission?&quot;#define USE_TRANSMISSION&quot;:&quot;&quot;,t.transmissionMap?&quot;#define USE_TRANSMISSIONMAP&quot;:&quot;&quot;,t.thicknessMap?&quot;#define USE_THICKNESSMAP&quot;:&quot;&quot;,t.sheenColorMap?&quot;#define USE_SHEEN_COLORMAP&quot;:&quot;&quot;,t.sheenRoughnessMap?&quot;#define USE_SHEEN_ROUGHNESSMAP&quot;:&quot;&quot;,t.mapUv?&quot;#define MAP_UV &quot;+t.mapUv:&quot;&quot;,t.alphaMapUv?&quot;#define ALPHAMAP_UV &quot;+t.alphaMapUv:&quot;&quot;,t.lightMapUv?&quot;#define LIGHTMAP_UV &quot;+t.lightMapUv:&quot;&quot;,t.aoMapUv?&quot;#define AOMAP_UV &quot;+t.aoMapUv:&quot;&quot;,t.emissiveMapUv?&quot;#define EMISSIVEMAP_UV &quot;+t.emissiveMapUv:&quot;&quot;,t.bumpMapUv?&quot;#define BUMPMAP_UV &quot;+t.bumpMapUv:&quot;&quot;,t.normalMapUv?&quot;#define NORMALMAP_UV &quot;+t.normalMapUv:&quot;&quot;,t.displacementMapUv?&quot;#define DISPLACEMENTMAP_UV &quot;+t.displacementMapUv:&quot;&quot;,t.metalnessMapUv?&quot;#define METALNESSMAP_UV &quot;+t.metalnessMapUv:&quot;&quot;,t.roughnessMapUv?&quot;#define ROUGHNESSMAP_UV &quot;+t.roughnessMapUv:&quot;&quot;,t.anisotropyMapUv?&quot;#define ANISOTROPYMAP_UV &quot;+t.anisotropyMapUv:&quot;&quot;,t.clearcoatMapUv?&quot;#define CLEARCOATMAP_UV &quot;+t.clearcoatMapUv:&quot;&quot;,t.clearcoatNormalMapUv?&quot;#define CLEARCOAT_NORMALMAP_UV &quot;+t.clearcoatNormalMapUv:&quot;&quot;,t.clearcoatRoughnessMapUv?&quot;#define CLEARCOAT_ROUGHNESSMAP_UV &quot;+t.clearcoatRoughnessMapUv:&quot;&quot;,t.iridescenceMapUv?&quot;#define IRIDESCENCEMAP_UV &quot;+t.iridescenceMapUv:&quot;&quot;,t.iridescenceThicknessMapUv?&quot;#define IRIDESCENCE_THICKNESSMAP_UV &quot;+t.iridescenceThicknessMapUv:&quot;&quot;,t.sheenColorMapUv?&quot;#define SHEEN_COLORMAP_UV &quot;+t.sheenColorMapUv:&quot;&quot;,t.sheenRoughnessMapUv?&quot;#define SHEEN_ROUGHNESSMAP_UV &quot;+t.sheenRoughnessMapUv:&quot;&quot;,t.specularMapUv?&quot;#define SPECULARMAP_UV &quot;+t.specularMapUv:&quot;&quot;,t.specularColorMapUv?&quot;#define SPECULAR_COLORMAP_UV &quot;+t.specularColorMapUv:&quot;&quot;,t.specularIntensityMapUv?&quot;#define SPECULAR_INTENSITYMAP_UV &quot;+t.specularIntensityMapUv:&quot;&quot;,t.transmissionMapUv?&quot;#define TRANSMISSIONMAP_UV &quot;+t.transmissionMapUv:&quot;&quot;,t.thicknessMapUv?&quot;#define THICKNESSMAP_UV &quot;+t.thicknessMapUv:&quot;&quot;,t.vertexTangents&amp;&amp;t.flatShading===!1?&quot;#define USE_TANGENT&quot;:&quot;&quot;,t.vertexColors?&quot;#define USE_COLOR&quot;:&quot;&quot;,t.vertexAlphas?&quot;#define USE_COLOR_ALPHA&quot;:&quot;&quot;,t.vertexUv1s?&quot;#define USE_UV1&quot;:&quot;&quot;,t.vertexUv2s?&quot;#define USE_UV2&quot;:&quot;&quot;,t.vertexUv3s?&quot;#define USE_UV3&quot;:&quot;&quot;,t.pointsUvs?&quot;#define USE_POINTS_UV&quot;:&quot;&quot;,t.flatShading?&quot;#define FLAT_SHADED&quot;:&quot;&quot;,t.skinning?&quot;#define USE_SKINNING&quot;:&quot;&quot;,t.morphTargets?&quot;#define USE_MORPHTARGETS&quot;:&quot;&quot;,t.morphNormals&amp;&amp;t.flatShading===!1?&quot;#define USE_MORPHNORMALS&quot;:&quot;&quot;,t.morphColors?&quot;#define USE_MORPHCOLORS&quot;:&quot;&quot;,t.morphTargetsCount&gt;0?&quot;#define MORPHTARGETS_TEXTURE_STRIDE &quot;+t.morphTextureStride:&quot;&quot;,t.morphTargetsCount&gt;0?&quot;#define MORPHTARGETS_COUNT &quot;+t.morphTargetsCount:&quot;&quot;,t.doubleSided?&quot;#define DOUBLE_SIDED&quot;:&quot;&quot;,t.flipSided?&quot;#define FLIP_SIDED&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define USE_SHADOWMAP&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define &quot;+u:&quot;&quot;,t.sizeAttenuation?&quot;#define USE_SIZEATTENUATION&quot;:&quot;&quot;,t.numLightProbes&gt;0?&quot;#define USE_LIGHT_PROBES&quot;:&quot;&quot;,t.logarithmicDepthBuffer?&quot;#define USE_LOGDEPTHBUF&quot;:&quot;&quot;,t.reverseDepthBuffer?&quot;#define USE_REVERSEDEPTHBUF&quot;:&quot;&quot;,&quot;uniform mat4 modelMatrix;&quot;,&quot;uniform mat4 modelViewMatrix;&quot;,&quot;uniform mat4 projectionMatrix;&quot;,&quot;uniform mat4 viewMatrix;&quot;,&quot;uniform mat3 normalMatrix;&quot;,&quot;uniform vec3 cameraPosition;&quot;,&quot;uniform bool isOrthographic;&quot;,&quot;#ifdef USE_INSTANCING&quot;,&quot;      attribute mat4 instanceMatrix;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_INSTANCING_COLOR&quot;,&quot;  attribute vec3 instanceColor;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_INSTANCING_MORPH&quot;,&quot;   uniform sampler2D morphTexture;&quot;,&quot;#endif&quot;,&quot;attribute vec3 position;&quot;,&quot;attribute vec3 normal;&quot;,&quot;attribute vec2 uv;&quot;,&quot;#ifdef USE_UV1&quot;,&quot;       attribute vec2 uv1;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_UV2&quot;,&quot;  attribute vec2 uv2;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_UV3&quot;,&quot;  attribute vec2 uv3;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_TANGENT&quot;,&quot;      attribute vec4 tangent;&quot;,&quot;#endif&quot;,&quot;#if defined( USE_COLOR_ALPHA )&quot;,&quot;      attribute vec4 color;&quot;,&quot;#elif defined( USE_COLOR )&quot;,&quot;       attribute vec3 color;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_SKINNING&quot;,&quot;   attribute vec4 skinIndex;&quot;,&quot;  attribute vec4 skinWeight;&quot;,&quot;#endif&quot;,`
`].filter(Jf).join(`
`),_=[vC(t),&quot;#define SHADER_TYPE &quot;+t.shaderType,&quot;#define SHADER_NAME &quot;+t.shaderName,v,t.useFog&amp;&amp;t.fog?&quot;#define USE_FOG&quot;:&quot;&quot;,t.useFog&amp;&amp;t.fogExp2?&quot;#define FOG_EXP2&quot;:&quot;&quot;,t.alphaToCoverage?&quot;#define ALPHA_TO_COVERAGE&quot;:&quot;&quot;,t.map?&quot;#define USE_MAP&quot;:&quot;&quot;,t.matcap?&quot;#define USE_MATCAP&quot;:&quot;&quot;,t.envMap?&quot;#define USE_ENVMAP&quot;:&quot;&quot;,t.envMap?&quot;#define &quot;+h:&quot;&quot;,t.envMap?&quot;#define &quot;+f:&quot;&quot;,t.envMap?&quot;#define &quot;+p:&quot;&quot;,m?&quot;#define CUBEUV_TEXEL_WIDTH &quot;+m.texelWidth:&quot;&quot;,m?&quot;#define CUBEUV_TEXEL_HEIGHT &quot;+m.texelHeight:&quot;&quot;,m?&quot;#define CUBEUV_MAX_MIP &quot;+m.maxMip+&quot;.0&quot;:&quot;&quot;,t.lightMap?&quot;#define USE_LIGHTMAP&quot;:&quot;&quot;,t.aoMap?&quot;#define USE_AOMAP&quot;:&quot;&quot;,t.bumpMap?&quot;#define USE_BUMPMAP&quot;:&quot;&quot;,t.normalMap?&quot;#define USE_NORMALMAP&quot;:&quot;&quot;,t.normalMapObjectSpace?&quot;#define USE_NORMALMAP_OBJECTSPACE&quot;:&quot;&quot;,t.normalMapTangentSpace?&quot;#define USE_NORMALMAP_TANGENTSPACE&quot;:&quot;&quot;,t.emissiveMap?&quot;#define USE_EMISSIVEMAP&quot;:&quot;&quot;,t.anisotropy?&quot;#define USE_ANISOTROPY&quot;:&quot;&quot;,t.anisotropyMap?&quot;#define USE_ANISOTROPYMAP&quot;:&quot;&quot;,t.clearcoat?&quot;#define USE_CLEARCOAT&quot;:&quot;&quot;,t.clearcoatMap?&quot;#define USE_CLEARCOATMAP&quot;:&quot;&quot;,t.clearcoatRoughnessMap?&quot;#define USE_CLEARCOAT_ROUGHNESSMAP&quot;:&quot;&quot;,t.clearcoatNormalMap?&quot;#define USE_CLEARCOAT_NORMALMAP&quot;:&quot;&quot;,t.dispersion?&quot;#define USE_DISPERSION&quot;:&quot;&quot;,t.iridescence?&quot;#define USE_IRIDESCENCE&quot;:&quot;&quot;,t.iridescenceMap?&quot;#define USE_IRIDESCENCEMAP&quot;:&quot;&quot;,t.iridescenceThicknessMap?&quot;#define USE_IRIDESCENCE_THICKNESSMAP&quot;:&quot;&quot;,t.specularMap?&quot;#define USE_SPECULARMAP&quot;:&quot;&quot;,t.specularColorMap?&quot;#define USE_SPECULAR_COLORMAP&quot;:&quot;&quot;,t.specularIntensityMap?&quot;#define USE_SPECULAR_INTENSITYMAP&quot;:&quot;&quot;,t.roughnessMap?&quot;#define USE_ROUGHNESSMAP&quot;:&quot;&quot;,t.metalnessMap?&quot;#define USE_METALNESSMAP&quot;:&quot;&quot;,t.alphaMap?&quot;#define USE_ALPHAMAP&quot;:&quot;&quot;,t.alphaTest?&quot;#define USE_ALPHATEST&quot;:&quot;&quot;,t.alphaHash?&quot;#define USE_ALPHAHASH&quot;:&quot;&quot;,t.sheen?&quot;#define USE_SHEEN&quot;:&quot;&quot;,t.sheenColorMap?&quot;#define USE_SHEEN_COLORMAP&quot;:&quot;&quot;,t.sheenRoughnessMap?&quot;#define USE_SHEEN_ROUGHNESSMAP&quot;:&quot;&quot;,t.transmission?&quot;#define USE_TRANSMISSION&quot;:&quot;&quot;,t.transmissionMap?&quot;#define USE_TRANSMISSIONMAP&quot;:&quot;&quot;,t.thicknessMap?&quot;#define USE_THICKNESSMAP&quot;:&quot;&quot;,t.vertexTangents&amp;&amp;t.flatShading===!1?&quot;#define USE_TANGENT&quot;:&quot;&quot;,t.vertexColors||t.instancingColor||t.batchingColor?&quot;#define USE_COLOR&quot;:&quot;&quot;,t.vertexAlphas?&quot;#define USE_COLOR_ALPHA&quot;:&quot;&quot;,t.vertexUv1s?&quot;#define USE_UV1&quot;:&quot;&quot;,t.vertexUv2s?&quot;#define USE_UV2&quot;:&quot;&quot;,t.vertexUv3s?&quot;#define USE_UV3&quot;:&quot;&quot;,t.pointsUvs?&quot;#define USE_POINTS_UV&quot;:&quot;&quot;,t.gradientMap?&quot;#define USE_GRADIENTMAP&quot;:&quot;&quot;,t.flatShading?&quot;#define FLAT_SHADED&quot;:&quot;&quot;,t.doubleSided?&quot;#define DOUBLE_SIDED&quot;:&quot;&quot;,t.flipSided?&quot;#define FLIP_SIDED&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define USE_SHADOWMAP&quot;:&quot;&quot;,t.shadowMapEnabled?&quot;#define &quot;+u:&quot;&quot;,t.premultipliedAlpha?&quot;#define PREMULTIPLIED_ALPHA&quot;:&quot;&quot;,t.numLightProbes&gt;0?&quot;#define USE_LIGHT_PROBES&quot;:&quot;&quot;,t.decodeVideoTexture?&quot;#define DECODE_VIDEO_TEXTURE&quot;:&quot;&quot;,t.decodeVideoTextureEmissive?&quot;#define DECODE_VIDEO_TEXTURE_EMISSIVE&quot;:&quot;&quot;,t.logarithmicDepthBuffer?&quot;#define USE_LOGDEPTHBUF&quot;:&quot;&quot;,t.reverseDepthBuffer?&quot;#define USE_REVERSEDEPTHBUF&quot;:&quot;&quot;,&quot;uniform mat4 viewMatrix;&quot;,&quot;uniform vec3 cameraPosition;&quot;,&quot;uniform bool isOrthographic;&quot;,t.toneMapping!==ca?&quot;#define TONE_MAPPING&quot;:&quot;&quot;,t.toneMapping!==ca?Kt.tonemapping_pars_fragment:&quot;&quot;,t.toneMapping!==ca?e8(&quot;toneMapping&quot;,t.toneMapping):&quot;&quot;,t.dithering?&quot;#define DITHERING&quot;:&quot;&quot;,t.opaque?&quot;#define OPAQUE&quot;:&quot;&quot;,Kt.colorspace_pars_fragment,Q5(&quot;linearToOutputTexel&quot;,t.outputColorSpace),t8(),t.useDepthPacking?&quot;#define DEPTH_PACKING &quot;+t.depthPacking:&quot;&quot;,`
`].filter(Jf).join(`
`)),o=dS(o),o=gC(o,t),o=yC(o,t),l=dS(l),l=gC(l,t),l=yC(l,t),o=_C(o),l=_C(l),t.isRawShaderMaterial!==!0&amp;&amp;(T=`#version 300 es
`,b=[g,&quot;#define attribute in&quot;,&quot;#define varying out&quot;,&quot;#define texture2D texture&quot;].join(`
`)+`
`+b,_=[&quot;#define varying in&quot;,t.glslVersion===rS?&quot;&quot;:&quot;layout(location = 0) out highp vec4 pc_fragColor;&quot;,t.glslVersion===rS?&quot;&quot;:&quot;#define gl_FragColor pc_fragColor&quot;,&quot;#define gl_FragDepthEXT gl_FragDepth&quot;,&quot;#define texture2D texture&quot;,&quot;#define textureCube texture&quot;,&quot;#define texture2DProj textureProj&quot;,&quot;#define texture2DLodEXT textureLod&quot;,&quot;#define texture2DProjLodEXT textureProjLod&quot;,&quot;#define textureCubeLodEXT textureLod&quot;,&quot;#define texture2DGradEXT textureGrad&quot;,&quot;#define texture2DProjGradEXT textureProjGrad&quot;,&quot;#define textureCubeGradEXT textureGrad&quot;].join(`
`)+`
`+_);const w=T+b+o,E=T+_+l,R=dC(r,r.VERTEX_SHADER,w),N=dC(r,r.FRAGMENT_SHADER,E);r.attachShader(x,R),r.attachShader(x,N),t.index0AttributeName!==void 0?r.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&amp;&amp;r.bindAttribLocation(x,0,&quot;position&quot;),r.linkProgram(x);function A(L){if(n.debug.checkShaderErrors){const V=r.getProgramInfoLog(x).trim(),Z=r.getShaderInfoLog(R).trim(),z=r.getShaderInfoLog(N).trim();let K=!0,I=!0;if(r.getProgramParameter(x,r.LINK_STATUS)===!1)if(K=!1,typeof n.debug.onShaderError==&quot;function&quot;)n.debug.onShaderError(r,x,R,N);else{const j=mC(r,R,&quot;vertex&quot;),G=mC(r,N,&quot;fragment&quot;);console.error(&quot;THREE.WebGLProgram: Shader Error &quot;+r.getError()+&quot; - VALIDATE_STATUS &quot;+r.getProgramParameter(x,r.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+V+`
`+j+`
`+G)}else V!==&quot;&quot;?console.warn(&quot;THREE.WebGLProgram: Program Info Log:&quot;,V):(Z===&quot;&quot;||z===&quot;&quot;)&amp;&amp;(I=!1);I&amp;&amp;(L.diagnostics={runnable:K,programLog:V,vertexShader:{log:Z,prefix:b},fragmentShader:{log:z,prefix:_}})}r.deleteShader(R),r.deleteShader(N),D=new Dg(r,x),C=r8(r,x)}let D;this.getUniforms=function(){return D===void 0&amp;&amp;A(this),D};let C;this.getAttributes=function(){return C===void 0&amp;&amp;A(this),C};let O=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&amp;&amp;(O=r.getProgramParameter(x,K5)),O},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=$5++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=R,this.fragmentShader=N,this}let g8=0;class y8{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&amp;&amp;(o.add(r),r.usedTimes++),o.has(s)===!1&amp;&amp;(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&amp;&amp;this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&amp;&amp;(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&amp;&amp;(i=new _8(e),t.set(e,i)),i}}class _8{constructor(e){this.id=g8++,this.code=e,this.usedTimes=0}}function v8(n,e,t,i,r,s,o){const l=new uy,u=new y8,h=new Set,f=[],p=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const v={MeshDepthMaterial:&quot;depth&quot;,MeshDistanceMaterial:&quot;distanceRGBA&quot;,MeshNormalMaterial:&quot;normal&quot;,MeshBasicMaterial:&quot;basic&quot;,MeshLambertMaterial:&quot;lambert&quot;,MeshPhongMaterial:&quot;phong&quot;,MeshToonMaterial:&quot;toon&quot;,MeshStandardMaterial:&quot;physical&quot;,MeshPhysicalMaterial:&quot;physical&quot;,MeshMatcapMaterial:&quot;matcap&quot;,LineBasicMaterial:&quot;basic&quot;,LineDashedMaterial:&quot;dashed&quot;,PointsMaterial:&quot;points&quot;,ShadowMaterial:&quot;shadow&quot;,SpriteMaterial:&quot;sprite&quot;};function x(C){return h.add(C),C===0?&quot;uv&quot;:`uv${C}`}function b(C,O,L,V,Z){const z=V.fog,K=Z.geometry,I=C.isMeshStandardMaterial?V.environment:null,j=(C.isMeshStandardMaterial?t:e).get(C.envMap||I),G=j&amp;&amp;j.mapping===Sh?j.image.height:null,ee=v[C.type];C.precision!==null&amp;&amp;(g=r.getMaxPrecision(C.precision),g!==C.precision&amp;&amp;console.warn(&quot;THREE.WebGLProgram.getParameters:&quot;,C.precision,&quot;not supported, using&quot;,g,&quot;instead.&quot;));const F=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ne=F!==void 0?F.length:0;let le=0;K.morphAttributes.position!==void 0&amp;&amp;(le=1),K.morphAttributes.normal!==void 0&amp;&amp;(le=2),K.morphAttributes.color!==void 0&amp;&amp;(le=3);let ce,ie,oe,ae;if(ee){const zt=Ws[ee];ce=zt.vertexShader,ie=zt.fragmentShader}else ce=C.vertexShader,ie=C.fragmentShader,u.update(C),oe=u.getVertexShaderID(C),ae=u.getFragmentShaderID(C);const ue=n.getRenderTarget(),ve=n.state.buffers.depth.getReversed(),He=Z.isInstancedMesh===!0,Xe=Z.isBatchedMesh===!0,lt=!!C.map,We=!!C.matcap,Ye=!!j,Q=!!C.aoMap,Ve=!!C.lightMap,Le=!!C.bumpMap,Fe=!!C.normalMap,Ne=!!C.displacementMap,mt=!!C.emissiveMap,ze=!!C.metalnessMap,te=!!C.roughnessMap,H=C.anisotropy&gt;0,pe=C.clearcoat&gt;0,Ce=C.dispersion&gt;0,Ue=C.iridescence&gt;0,Me=C.sheen&gt;0,Ze=C.transmission&gt;0,qe=H&amp;&amp;!!C.anisotropyMap,ut=pe&amp;&amp;!!C.clearcoatMap,Ct=pe&amp;&amp;!!C.clearcoatNormalMap,je=pe&amp;&amp;!!C.clearcoatRoughnessMap,ht=Ue&amp;&amp;!!C.iridescenceMap,St=Ue&amp;&amp;!!C.iridescenceThicknessMap,Rt=Me&amp;&amp;!!C.sheenColorMap,rt=Me&amp;&amp;!!C.sheenRoughnessMap,Gt=!!C.specularMap,It=!!C.specularColorMap,gn=!!C.specularIntensityMap,de=Ze&amp;&amp;!!C.transmissionMap,tt=Ze&amp;&amp;!!C.thicknessMap,Ae=!!C.gradientMap,Pe=!!C.alphaMap,st=C.alphaTest&gt;0,Qe=!!C.alphaHash,Ut=!!C.extensions;let wn=ca;C.toneMapped&amp;&amp;(ue===null||ue.isXRRenderTarget===!0)&amp;&amp;(wn=n.toneMapping);const jn={shaderID:ee,shaderType:C.type,shaderName:C.name,vertexShader:ce,fragmentShader:ie,defines:C.defines,customVertexShaderID:oe,customFragmentShaderID:ae,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:g,batching:Xe,batchingColor:Xe&amp;&amp;Z._colorsTexture!==null,instancing:He,instancingColor:He&amp;&amp;Z.instanceColor!==null,instancingMorph:He&amp;&amp;Z.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:ue===null?n.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:fr,alphaToCoverage:!!C.alphaToCoverage,map:lt,matcap:We,envMap:Ye,envMapMode:Ye&amp;&amp;j.mapping,envMapCubeUVHeight:G,aoMap:Q,lightMap:Ve,bumpMap:Le,normalMap:Fe,displacementMap:m&amp;&amp;Ne,emissiveMap:mt,normalMapObjectSpace:Fe&amp;&amp;C.normalMapType===PD,normalMapTangentSpace:Fe&amp;&amp;C.normalMapType===vl,metalnessMap:ze,roughnessMap:te,anisotropy:H,anisotropyMap:qe,clearcoat:pe,clearcoatMap:ut,clearcoatNormalMap:Ct,clearcoatRoughnessMap:je,dispersion:Ce,iridescence:Ue,iridescenceMap:ht,iridescenceThicknessMap:St,sheen:Me,sheenColorMap:Rt,sheenRoughnessMap:rt,specularMap:Gt,specularColorMap:It,specularIntensityMap:gn,transmission:Ze,transmissionMap:de,thicknessMap:tt,gradientMap:Ae,opaque:C.transparent===!1&amp;&amp;C.blending===vc&amp;&amp;C.alphaToCoverage===!1,alphaMap:Pe,alphaTest:st,alphaHash:Qe,combine:C.combine,mapUv:lt&amp;&amp;x(C.map.channel),aoMapUv:Q&amp;&amp;x(C.aoMap.channel),lightMapUv:Ve&amp;&amp;x(C.lightMap.channel),bumpMapUv:Le&amp;&amp;x(C.bumpMap.channel),normalMapUv:Fe&amp;&amp;x(C.normalMap.channel),displacementMapUv:Ne&amp;&amp;x(C.displacementMap.channel),emissiveMapUv:mt&amp;&amp;x(C.emissiveMap.channel),metalnessMapUv:ze&amp;&amp;x(C.metalnessMap.channel),roughnessMapUv:te&amp;&amp;x(C.roughnessMap.channel),anisotropyMapUv:qe&amp;&amp;x(C.anisotropyMap.channel),clearcoatMapUv:ut&amp;&amp;x(C.clearcoatMap.channel),clearcoatNormalMapUv:Ct&amp;&amp;x(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:je&amp;&amp;x(C.clearcoatRoughnessMap.channel),iridescenceMapUv:ht&amp;&amp;x(C.iridescenceMap.channel),iridescenceThicknessMapUv:St&amp;&amp;x(C.iridescenceThicknessMap.channel),sheenColorMapUv:Rt&amp;&amp;x(C.sheenColorMap.channel),sheenRoughnessMapUv:rt&amp;&amp;x(C.sheenRoughnessMap.channel),specularMapUv:Gt&amp;&amp;x(C.specularMap.channel),specularColorMapUv:It&amp;&amp;x(C.specularColorMap.channel),specularIntensityMapUv:gn&amp;&amp;x(C.specularIntensityMap.channel),transmissionMapUv:de&amp;&amp;x(C.transmissionMap.channel),thicknessMapUv:tt&amp;&amp;x(C.thicknessMap.channel),alphaMapUv:Pe&amp;&amp;x(C.alphaMap.channel),vertexTangents:!!K.attributes.tangent&amp;&amp;(Fe||H),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&amp;&amp;!!K.attributes.color&amp;&amp;K.attributes.color.itemSize===4,pointsUvs:Z.isPoints===!0&amp;&amp;!!K.attributes.uv&amp;&amp;(lt||Pe),fog:!!z,useFog:C.fog===!0,fogExp2:!!z&amp;&amp;z.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:ve,skinning:Z.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:le,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&amp;&amp;L.length&gt;0,shadowMapType:n.shadowMap.type,toneMapping:wn,decodeVideoTexture:lt&amp;&amp;C.map.isVideoTexture===!0&amp;&amp;Zt.getTransfer(C.map.colorSpace)===On,decodeVideoTextureEmissive:mt&amp;&amp;C.emissiveMap.isVideoTexture===!0&amp;&amp;Zt.getTransfer(C.emissiveMap.colorSpace)===On,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Ki,flipSided:C.side===xr,useDepthPacking:C.depthPacking&gt;=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Ut&amp;&amp;C.extensions.clipCullDistance===!0&amp;&amp;i.has(&quot;WEBGL_clip_cull_distance&quot;),extensionMultiDraw:(Ut&amp;&amp;C.extensions.multiDraw===!0||Xe)&amp;&amp;i.has(&quot;WEBGL_multi_draw&quot;),rendererExtensionParallelShaderCompile:i.has(&quot;KHR_parallel_shader_compile&quot;),customProgramCacheKey:C.customProgramCacheKey()};return jn.vertexUv1s=h.has(1),jn.vertexUv2s=h.has(2),jn.vertexUv3s=h.has(3),h.clear(),jn}function _(C){const O=[];if(C.shaderID?O.push(C.shaderID):(O.push(C.customVertexShaderID),O.push(C.customFragmentShaderID)),C.defines!==void 0)for(const L in C.defines)O.push(L),O.push(C.defines[L]);return C.isRawShaderMaterial===!1&amp;&amp;(T(O,C),w(O,C),O.push(n.outputColorSpace)),O.push(C.customProgramCacheKey),O.join()}function T(C,O){C.push(O.precision),C.push(O.outputColorSpace),C.push(O.envMapMode),C.push(O.envMapCubeUVHeight),C.push(O.mapUv),C.push(O.alphaMapUv),C.push(O.lightMapUv),C.push(O.aoMapUv),C.push(O.bumpMapUv),C.push(O.normalMapUv),C.push(O.displacementMapUv),C.push(O.emissiveMapUv),C.push(O.metalnessMapUv),C.push(O.roughnessMapUv),C.push(O.anisotropyMapUv),C.push(O.clearcoatMapUv),C.push(O.clearcoatNormalMapUv),C.push(O.clearcoatRoughnessMapUv),C.push(O.iridescenceMapUv),C.push(O.iridescenceThicknessMapUv),C.push(O.sheenColorMapUv),C.push(O.sheenRoughnessMapUv),C.push(O.specularMapUv),C.push(O.specularColorMapUv),C.push(O.specularIntensityMapUv),C.push(O.transmissionMapUv),C.push(O.thicknessMapUv),C.push(O.combine),C.push(O.fogExp2),C.push(O.sizeAttenuation),C.push(O.morphTargetsCount),C.push(O.morphAttributeCount),C.push(O.numDirLights),C.push(O.numPointLights),C.push(O.numSpotLights),C.push(O.numSpotLightMaps),C.push(O.numHemiLights),C.push(O.numRectAreaLights),C.push(O.numDirLightShadows),C.push(O.numPointLightShadows),C.push(O.numSpotLightShadows),C.push(O.numSpotLightShadowsWithMaps),C.push(O.numLightProbes),C.push(O.shadowMapType),C.push(O.toneMapping),C.push(O.numClippingPlanes),C.push(O.numClipIntersection),C.push(O.depthPacking)}function w(C,O){l.disableAll(),O.supportsVertexTextures&amp;&amp;l.enable(0),O.instancing&amp;&amp;l.enable(1),O.instancingColor&amp;&amp;l.enable(2),O.instancingMorph&amp;&amp;l.enable(3),O.matcap&amp;&amp;l.enable(4),O.envMap&amp;&amp;l.enable(5),O.normalMapObjectSpace&amp;&amp;l.enable(6),O.normalMapTangentSpace&amp;&amp;l.enable(7),O.clearcoat&amp;&amp;l.enable(8),O.iridescence&amp;&amp;l.enable(9),O.alphaTest&amp;&amp;l.enable(10),O.vertexColors&amp;&amp;l.enable(11),O.vertexAlphas&amp;&amp;l.enable(12),O.vertexUv1s&amp;&amp;l.enable(13),O.vertexUv2s&amp;&amp;l.enable(14),O.vertexUv3s&amp;&amp;l.enable(15),O.vertexTangents&amp;&amp;l.enable(16),O.anisotropy&amp;&amp;l.enable(17),O.alphaHash&amp;&amp;l.enable(18),O.batching&amp;&amp;l.enable(19),O.dispersion&amp;&amp;l.enable(20),O.batchingColor&amp;&amp;l.enable(21),C.push(l.mask),l.disableAll(),O.fog&amp;&amp;l.enable(0),O.useFog&amp;&amp;l.enable(1),O.flatShading&amp;&amp;l.enable(2),O.logarithmicDepthBuffer&amp;&amp;l.enable(3),O.reverseDepthBuffer&amp;&amp;l.enable(4),O.skinning&amp;&amp;l.enable(5),O.morphTargets&amp;&amp;l.enable(6),O.morphNormals&amp;&amp;l.enable(7),O.morphColors&amp;&amp;l.enable(8),O.premultipliedAlpha&amp;&amp;l.enable(9),O.shadowMapEnabled&amp;&amp;l.enable(10),O.doubleSided&amp;&amp;l.enable(11),O.flipSided&amp;&amp;l.enable(12),O.useDepthPacking&amp;&amp;l.enable(13),O.dithering&amp;&amp;l.enable(14),O.transmission&amp;&amp;l.enable(15),O.sheen&amp;&amp;l.enable(16),O.opaque&amp;&amp;l.enable(17),O.pointsUvs&amp;&amp;l.enable(18),O.decodeVideoTexture&amp;&amp;l.enable(19),O.decodeVideoTextureEmissive&amp;&amp;l.enable(20),O.alphaToCoverage&amp;&amp;l.enable(21),C.push(l.mask)}function E(C){const O=v[C.type];let L;if(O){const V=Ws[O];L=qD.clone(V.uniforms)}else L=C.uniforms;return L}function R(C,O){let L;for(let V=0,Z=f.length;V&lt;Z;V++){const z=f[V];if(z.cacheKey===O){L=z,++L.usedTimes;break}}return L===void 0&amp;&amp;(L=new m8(n,O,C,s),f.push(L)),L}function N(C){if(--C.usedTimes===0){const O=f.indexOf(C);f[O]=f[f.length-1],f.pop(),C.destroy()}}function A(C){u.remove(C)}function D(){u.dispose()}return{getParameters:b,getProgramCacheKey:_,getUniforms:E,acquireProgram:R,releaseProgram:N,releaseShaderCache:A,programs:f,dispose:D}}function b8(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let l=n.get(o);return l===void 0&amp;&amp;(l={},n.set(o,l)),l}function i(o){n.delete(o)}function r(o,l,u){n.get(o)[l]=u}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function x8(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function bC(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function xC(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(p,m,g,v,x,b){let _=n[e];return _===void 0?(_={id:p.id,object:p,geometry:m,material:g,groupOrder:v,renderOrder:p.renderOrder,z:x,group:b},n[e]=_):(_.id=p.id,_.object=p,_.geometry=m,_.material=g,_.groupOrder=v,_.renderOrder=p.renderOrder,_.z=x,_.group=b),e++,_}function l(p,m,g,v,x,b){const _=o(p,m,g,v,x,b);g.transmission&gt;0?i.push(_):g.transparent===!0?r.push(_):t.push(_)}function u(p,m,g,v,x,b){const _=o(p,m,g,v,x,b);g.transmission&gt;0?i.unshift(_):g.transparent===!0?r.unshift(_):t.unshift(_)}function h(p,m){t.length&gt;1&amp;&amp;t.sort(p||x8),i.length&gt;1&amp;&amp;i.sort(m||bC),r.length&gt;1&amp;&amp;r.sort(m||bC)}function f(){for(let p=e,m=n.length;p&lt;m;p++){const g=n[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:u,finish:f,sort:h}}function S8(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new xC,n.set(i,[o])):r&gt;=s.length?(o=new xC,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function w8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case&quot;DirectionalLight&quot;:t={direction:new Y,color:new $e};break;case&quot;SpotLight&quot;:t={position:new Y,direction:new Y,color:new $e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case&quot;PointLight&quot;:t={position:new Y,color:new $e,distance:0,decay:0};break;case&quot;HemisphereLight&quot;:t={direction:new Y,skyColor:new $e,groundColor:new $e};break;case&quot;RectAreaLight&quot;:t={color:new $e,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return n[e.id]=t,t}}}function E8(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case&quot;DirectionalLight&quot;:t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe};break;case&quot;SpotLight&quot;:t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe};break;case&quot;PointLight&quot;:t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Oe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let T8=0;function M8(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function A8(n){const e=new w8,t=E8(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h&lt;9;h++)i.probe.push(new Y);const r=new Y,s=new yt,o=new yt;function l(h){let f=0,p=0,m=0;for(let C=0;C&lt;9;C++)i.probe[C].set(0,0,0);let g=0,v=0,x=0,b=0,_=0,T=0,w=0,E=0,R=0,N=0,A=0;h.sort(M8);for(let C=0,O=h.length;C&lt;O;C++){const L=h[C],V=L.color,Z=L.intensity,z=L.distance,K=L.shadow&amp;&amp;L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)f+=V.r*Z,p+=V.g*Z,m+=V.b*Z;else if(L.isLightProbe){for(let I=0;I&lt;9;I++)i.probe[I].addScaledVector(L.sh.coefficients[I],Z);A++}else if(L.isDirectionalLight){const I=e.get(L);if(I.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const j=L.shadow,G=t.get(L);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,i.directionalShadow[g]=G,i.directionalShadowMap[g]=K,i.directionalShadowMatrix[g]=L.shadow.matrix,T++}i.directional[g]=I,g++}else if(L.isSpotLight){const I=e.get(L);I.position.setFromMatrixPosition(L.matrixWorld),I.color.copy(V).multiplyScalar(Z),I.distance=z,I.coneCos=Math.cos(L.angle),I.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),I.decay=L.decay,i.spot[x]=I;const j=L.shadow;if(L.map&amp;&amp;(i.spotLightMap[R]=L.map,R++,j.updateMatrices(L),L.castShadow&amp;&amp;N++),i.spotLightMatrix[x]=j.matrix,L.castShadow){const G=t.get(L);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,i.spotShadow[x]=G,i.spotShadowMap[x]=K,E++}x++}else if(L.isRectAreaLight){const I=e.get(L);I.color.copy(V).multiplyScalar(Z),I.halfWidth.set(L.width*.5,0,0),I.halfHeight.set(0,L.height*.5,0),i.rectArea[b]=I,b++}else if(L.isPointLight){const I=e.get(L);if(I.color.copy(L.color).multiplyScalar(L.intensity),I.distance=L.distance,I.decay=L.decay,L.castShadow){const j=L.shadow,G=t.get(L);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,G.shadowCameraNear=j.camera.near,G.shadowCameraFar=j.camera.far,i.pointShadow[v]=G,i.pointShadowMap[v]=K,i.pointShadowMatrix[v]=L.shadow.matrix,w++}i.point[v]=I,v++}else if(L.isHemisphereLight){const I=e.get(L);I.skyColor.copy(L.color).multiplyScalar(Z),I.groundColor.copy(L.groundColor).multiplyScalar(Z),i.hemi[_]=I,_++}}b&gt;0&amp;&amp;(n.has(&quot;OES_texture_float_linear&quot;)===!0?(i.rectAreaLTC1=it.LTC_FLOAT_1,i.rectAreaLTC2=it.LTC_FLOAT_2):(i.rectAreaLTC1=it.LTC_HALF_1,i.rectAreaLTC2=it.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=p,i.ambient[2]=m;const D=i.hash;(D.directionalLength!==g||D.pointLength!==v||D.spotLength!==x||D.rectAreaLength!==b||D.hemiLength!==_||D.numDirectionalShadows!==T||D.numPointShadows!==w||D.numSpotShadows!==E||D.numSpotMaps!==R||D.numLightProbes!==A)&amp;&amp;(i.directional.length=g,i.spot.length=x,i.rectArea.length=b,i.point.length=v,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=E+R-N,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=N,i.numLightProbes=A,D.directionalLength=g,D.pointLength=v,D.spotLength=x,D.rectAreaLength=b,D.hemiLength=_,D.numDirectionalShadows=T,D.numPointShadows=w,D.numSpotShadows=E,D.numSpotMaps=R,D.numLightProbes=A,i.version=T8++)}function u(h,f){let p=0,m=0,g=0,v=0,x=0;const b=f.matrixWorldInverse;for(let _=0,T=h.length;_&lt;T;_++){const w=h[_];if(w.isDirectionalLight){const E=i.directional[p];E.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(b),p++}else if(w.isSpotLight){const E=i.spot[g];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(b),E.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(b),g++}else if(w.isRectAreaLight){const E=i.rectArea[v];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(b),o.identity(),s.copy(w.matrixWorld),s.premultiply(b),o.extractRotation(s),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),v++}else if(w.isPointLight){const E=i.point[m];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(b),m++}else if(w.isHemisphereLight){const E=i.hemi[x];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(b),x++}}}return{setup:l,setupView:u,state:i}}function SC(n){const e=new A8(n),t=[],i=[];function r(f){h.camera=f,t.length=0,i.length=0}function s(f){t.push(f)}function o(f){i.push(f)}function l(){e.setup(t)}function u(f){e.setupView(t,f)}const h={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:h,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function C8(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let l;return o===void 0?(l=new SC(n),e.set(r,[l])):s&gt;=o.length?(l=new SC(n),o.push(l)):l=o[s],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const R8=`void main() {
    gl_Position = vec4( position, 1.0 );
}`,O8=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include &lt;packing&gt;
void main() {
    const float samples = float( VSM_SAMPLES );
    float mean = 0.0;
    float squared_mean = 0.0;
    float uvStride = samples &lt;= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
    float uvStart = samples &lt;= 1.0 ? 0.0 : - 1.0;
    for ( float i = 0.0; i &lt; samples; i ++ ) {
            float uvOffset = uvStart + i * uvStride;
            #ifdef HORIZONTAL_PASS
                    vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
                    mean += distribution.x;
                    squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
            #else
                    float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
                    mean += depth;
                    squared_mean += depth * depth;
            #endif
    }
    mean = mean / samples;
    squared_mean = squared_mean / samples;
    float std_dev = sqrt( squared_mean - mean * mean );
    gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function D8(n,e,t){let i=new Th;const r=new Oe,s=new Oe,o=new yn,l=new ww({depthPacking:ID}),u=new Ew,h={},f=t.maxTextureSize,p={[Qr]:xr,[xr]:Qr,[Ki]:Ki},m=new Ts({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Oe},radius:{value:4}},vertexShader:R8,fragmentShader:O8}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const v=new Lt;v.setAttribute(&quot;position&quot;,new Jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new Sn(v,m),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=JS;let _=this.type;this.render=function(N,A,D){if(b.enabled===!1||b.autoUpdate===!1&amp;&amp;b.needsUpdate===!1||N.length===0)return;const C=n.getRenderTarget(),O=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),V=n.state;V.setBlending(la),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const Z=_!==mo&amp;&amp;this.type===mo,z=_===mo&amp;&amp;this.type!==mo;for(let K=0,I=N.length;K&lt;I;K++){const j=N[K],G=j.shadow;if(G===void 0){console.warn(&quot;THREE.WebGLShadowMap:&quot;,j,&quot;has no shadow.&quot;);continue}if(G.autoUpdate===!1&amp;&amp;G.needsUpdate===!1)continue;r.copy(G.mapSize);const ee=G.getFrameExtents();if(r.multiply(ee),s.copy(G.mapSize),(r.x&gt;f||r.y&gt;f)&amp;&amp;(r.x&gt;f&amp;&amp;(s.x=Math.floor(f/ee.x),r.x=s.x*ee.x,G.mapSize.x=s.x),r.y&gt;f&amp;&amp;(s.y=Math.floor(f/ee.y),r.y=s.y*ee.y,G.mapSize.y=s.y)),G.map===null||Z===!0||z===!0){const ne=this.type!==mo?{minFilter:xi,magFilter:xi}:{};G.map!==null&amp;&amp;G.map.dispose(),G.map=new Js(r.x,r.y,ne),G.map.texture.name=j.name+&quot;.shadowMap&quot;,G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const F=G.getViewportCount();for(let ne=0;ne&lt;F;ne++){const le=G.getViewport(ne);o.set(s.x*le.x,s.y*le.y,s.x*le.z,s.y*le.w),V.viewport(o),G.updateMatrices(j,ne),i=G.getFrustum(),E(A,D,G.camera,j,this.type)}G.isPointLightShadow!==!0&amp;&amp;this.type===mo&amp;&amp;T(G,D),G.needsUpdate=!1}_=this.type,b.needsUpdate=!1,n.setRenderTarget(C,O,L)};function T(N,A){const D=e.update(x);m.defines.VSM_SAMPLES!==N.blurSamples&amp;&amp;(m.defines.VSM_SAMPLES=N.blurSamples,g.defines.VSM_SAMPLES=N.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),N.mapPass===null&amp;&amp;(N.mapPass=new Js(r.x,r.y)),m.uniforms.shadow_pass.value=N.map.texture,m.uniforms.resolution.value=N.mapSize,m.uniforms.radius.value=N.radius,n.setRenderTarget(N.mapPass),n.clear(),n.renderBufferDirect(A,null,D,m,x,null),g.uniforms.shadow_pass.value=N.mapPass.texture,g.uniforms.resolution.value=N.mapSize,g.uniforms.radius.value=N.radius,n.setRenderTarget(N.map),n.clear(),n.renderBufferDirect(A,null,D,g,x,null)}function w(N,A,D,C){let O=null;const L=D.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(L!==void 0)O=L;else if(O=D.isPointLight===!0?u:l,n.localClippingEnabled&amp;&amp;A.clipShadows===!0&amp;&amp;Array.isArray(A.clippingPlanes)&amp;&amp;A.clippingPlanes.length!==0||A.displacementMap&amp;&amp;A.displacementScale!==0||A.alphaMap&amp;&amp;A.alphaTest&gt;0||A.map&amp;&amp;A.alphaTest&gt;0||A.alphaToCoverage===!0){const V=O.uuid,Z=A.uuid;let z=h[V];z===void 0&amp;&amp;(z={},h[V]=z);let K=z[Z];K===void 0&amp;&amp;(K=O.clone(),z[Z]=K,A.addEventListener(&quot;dispose&quot;,R)),O=K}if(O.visible=A.visible,O.wireframe=A.wireframe,C===mo?O.side=A.shadowSide!==null?A.shadowSide:A.side:O.side=A.shadowSide!==null?A.shadowSide:p[A.side],O.alphaMap=A.alphaMap,O.alphaTest=A.alphaToCoverage===!0?.5:A.alphaTest,O.map=A.map,O.clipShadows=A.clipShadows,O.clippingPlanes=A.clippingPlanes,O.clipIntersection=A.clipIntersection,O.displacementMap=A.displacementMap,O.displacementScale=A.displacementScale,O.displacementBias=A.displacementBias,O.wireframeLinewidth=A.wireframeLinewidth,O.linewidth=A.linewidth,D.isPointLight===!0&amp;&amp;O.isMeshDistanceMaterial===!0){const V=n.properties.get(O);V.light=D}return O}function E(N,A,D,C,O){if(N.visible===!1)return;if(N.layers.test(A.layers)&amp;&amp;(N.isMesh||N.isLine||N.isPoints)&amp;&amp;(N.castShadow||N.receiveShadow&amp;&amp;O===mo)&amp;&amp;(!N.frustumCulled||i.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,N.matrixWorld);const Z=e.update(N),z=N.material;if(Array.isArray(z)){const K=Z.groups;for(let I=0,j=K.length;I&lt;j;I++){const G=K[I],ee=z[G.materialIndex];if(ee&amp;&amp;ee.visible){const F=w(N,ee,C,O);N.onBeforeShadow(n,N,A,D,Z,F,G),n.renderBufferDirect(D,null,Z,F,N,G),N.onAfterShadow(n,N,A,D,Z,F,G)}}}else if(z.visible){const K=w(N,z,C,O);N.onBeforeShadow(n,N,A,D,Z,K,null),n.renderBufferDirect(D,null,Z,K,N,null),N.onAfterShadow(n,N,A,D,Z,K,null)}}const V=N.children;for(let Z=0,z=V.length;Z&lt;z;Z++)E(V[Z],A,D,C,O)}function R(N){N.target.removeEventListener(&quot;dispose&quot;,R);for(const D in h){const C=h[D],O=N.target.uuid;O in C&amp;&amp;(C[O].dispose(),delete C[O])}}}const N8={[Wg]:Xg,[qg]:$g,[Yg]:Zg,[Tc]:Kg,[Xg]:Wg,[$g]:qg,[Zg]:Yg,[Kg]:Tc};function I8(n,e){function t(){let de=!1;const tt=new yn;let Ae=null;const Pe=new yn(0,0,0,0);return{setMask:function(st){Ae!==st&amp;&amp;!de&amp;&amp;(n.colorMask(st,st,st,st),Ae=st)},setLocked:function(st){de=st},setClear:function(st,Qe,Ut,wn,jn){jn===!0&amp;&amp;(st*=wn,Qe*=wn,Ut*=wn),tt.set(st,Qe,Ut,wn),Pe.equals(tt)===!1&amp;&amp;(n.clearColor(st,Qe,Ut,wn),Pe.copy(tt))},reset:function(){de=!1,Ae=null,Pe.set(-1,0,0,0)}}}function i(){let de=!1,tt=!1,Ae=null,Pe=null,st=null;return{setReversed:function(Qe){if(tt!==Qe){const Ut=e.get(&quot;EXT_clip_control&quot;);Qe?Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.ZERO_TO_ONE_EXT):Ut.clipControlEXT(Ut.LOWER_LEFT_EXT,Ut.NEGATIVE_ONE_TO_ONE_EXT),tt=Qe;const wn=st;st=null,this.setClear(wn)}},getReversed:function(){return tt},setTest:function(Qe){Qe?ue(n.DEPTH_TEST):ve(n.DEPTH_TEST)},setMask:function(Qe){Ae!==Qe&amp;&amp;!de&amp;&amp;(n.depthMask(Qe),Ae=Qe)},setFunc:function(Qe){if(tt&amp;&amp;(Qe=N8[Qe]),Pe!==Qe){switch(Qe){case Wg:n.depthFunc(n.NEVER);break;case Xg:n.depthFunc(n.ALWAYS);break;case qg:n.depthFunc(n.LESS);break;case Tc:n.depthFunc(n.LEQUAL);break;case Yg:n.depthFunc(n.EQUAL);break;case Kg:n.depthFunc(n.GEQUAL);break;case $g:n.depthFunc(n.GREATER);break;case Zg:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Pe=Qe}},setLocked:function(Qe){de=Qe},setClear:function(Qe){st!==Qe&amp;&amp;(tt&amp;&amp;(Qe=1-Qe),n.clearDepth(Qe),st=Qe)},reset:function(){de=!1,Ae=null,Pe=null,st=null,tt=!1}}}function r(){let de=!1,tt=null,Ae=null,Pe=null,st=null,Qe=null,Ut=null,wn=null,jn=null;return{setTest:function(zt){de||(zt?ue(n.STENCIL_TEST):ve(n.STENCIL_TEST))},setMask:function(zt){tt!==zt&amp;&amp;!de&amp;&amp;(n.stencilMask(zt),tt=zt)},setFunc:function(zt,Bi,oi){(Ae!==zt||Pe!==Bi||st!==oi)&amp;&amp;(n.stencilFunc(zt,Bi,oi),Ae=zt,Pe=Bi,st=oi)},setOp:function(zt,Bi,oi){(Qe!==zt||Ut!==Bi||wn!==oi)&amp;&amp;(n.stencilOp(zt,Bi,oi),Qe=zt,Ut=Bi,wn=oi)},setLocked:function(zt){de=zt},setClear:function(zt){jn!==zt&amp;&amp;(n.clearStencil(zt),jn=zt)},reset:function(){de=!1,tt=null,Ae=null,Pe=null,st=null,Qe=null,Ut=null,wn=null,jn=null}}}const s=new t,o=new i,l=new r,u=new WeakMap,h=new WeakMap;let f={},p={},m=new WeakMap,g=[],v=null,x=!1,b=null,_=null,T=null,w=null,E=null,R=null,N=null,A=new $e(0,0,0),D=0,C=!1,O=null,L=null,V=null,Z=null,z=null;const K=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,j=0;const G=n.getParameter(n.VERSION);G.indexOf(&quot;WebGL&quot;)!==-1?(j=parseFloat(/^WebGL (\d)/.exec(G)[1]),I=j&gt;=1):G.indexOf(&quot;OpenGL ES&quot;)!==-1&amp;&amp;(j=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),I=j&gt;=2);let ee=null,F={};const ne=n.getParameter(n.SCISSOR_BOX),le=n.getParameter(n.VIEWPORT),ce=new yn().fromArray(ne),ie=new yn().fromArray(le);function oe(de,tt,Ae,Pe){const st=new Uint8Array(4),Qe=n.createTexture();n.bindTexture(de,Qe),n.texParameteri(de,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(de,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ut=0;Ut&lt;Ae;Ut++)de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?n.texImage3D(tt,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,st):n.texImage2D(tt+Ut,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,st);return Qe}const ae={};ae[n.TEXTURE_2D]=oe(n.TEXTURE_2D,n.TEXTURE_2D,1),ae[n.TEXTURE_CUBE_MAP]=oe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ae[n.TEXTURE_2D_ARRAY]=oe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ae[n.TEXTURE_3D]=oe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),l.setClear(0),ue(n.DEPTH_TEST),o.setFunc(Tc),Le(!1),Fe(Jx),ue(n.CULL_FACE),Q(la);function ue(de){f[de]!==!0&amp;&amp;(n.enable(de),f[de]=!0)}function ve(de){f[de]!==!1&amp;&amp;(n.disable(de),f[de]=!1)}function He(de,tt){return p[de]!==tt?(n.bindFramebuffer(de,tt),p[de]=tt,de===n.DRAW_FRAMEBUFFER&amp;&amp;(p[n.FRAMEBUFFER]=tt),de===n.FRAMEBUFFER&amp;&amp;(p[n.DRAW_FRAMEBUFFER]=tt),!0):!1}function Xe(de,tt){let Ae=g,Pe=!1;if(de){Ae=m.get(tt),Ae===void 0&amp;&amp;(Ae=[],m.set(tt,Ae));const st=de.textures;if(Ae.length!==st.length||Ae[0]!==n.COLOR_ATTACHMENT0){for(let Qe=0,Ut=st.length;Qe&lt;Ut;Qe++)Ae[Qe]=n.COLOR_ATTACHMENT0+Qe;Ae.length=st.length,Pe=!0}}else Ae[0]!==n.BACK&amp;&amp;(Ae[0]=n.BACK,Pe=!0);Pe&amp;&amp;n.drawBuffers(Ae)}function lt(de){return v!==de?(n.useProgram(de),v=de,!0):!1}const We={[il]:n.FUNC_ADD,[tD]:n.FUNC_SUBTRACT,[nD]:n.FUNC_REVERSE_SUBTRACT};We[iD]=n.MIN,We[rD]=n.MAX;const Ye={[sD]:n.ZERO,[oD]:n.ONE,[aD]:n.SRC_COLOR,[Gg]:n.SRC_ALPHA,[dD]:n.SRC_ALPHA_SATURATE,[hD]:n.DST_COLOR,[cD]:n.DST_ALPHA,[lD]:n.ONE_MINUS_SRC_COLOR,[jg]:n.ONE_MINUS_SRC_ALPHA,[fD]:n.ONE_MINUS_DST_COLOR,[uD]:n.ONE_MINUS_DST_ALPHA,[pD]:n.CONSTANT_COLOR,[mD]:n.ONE_MINUS_CONSTANT_COLOR,[gD]:n.CONSTANT_ALPHA,[yD]:n.ONE_MINUS_CONSTANT_ALPHA};function Q(de,tt,Ae,Pe,st,Qe,Ut,wn,jn,zt){if(de===la){x===!0&amp;&amp;(ve(n.BLEND),x=!1);return}if(x===!1&amp;&amp;(ue(n.BLEND),x=!0),de!==eD){if(de!==b||zt!==C){if((_!==il||E!==il)&amp;&amp;(n.blendEquation(n.FUNC_ADD),_=il,E=il),zt)switch(de){case vc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Qx:n.blendFunc(n.ONE,n.ONE);break;case eS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case tS:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error(&quot;THREE.WebGLState: Invalid blending: &quot;,de);break}else switch(de){case vc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Qx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case eS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case tS:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error(&quot;THREE.WebGLState: Invalid blending: &quot;,de);break}T=null,w=null,R=null,N=null,A.set(0,0,0),D=0,b=de,C=zt}return}st=st||tt,Qe=Qe||Ae,Ut=Ut||Pe,(tt!==_||st!==E)&amp;&amp;(n.blendEquationSeparate(We[tt],We[st]),_=tt,E=st),(Ae!==T||Pe!==w||Qe!==R||Ut!==N)&amp;&amp;(n.blendFuncSeparate(Ye[Ae],Ye[Pe],Ye[Qe],Ye[Ut]),T=Ae,w=Pe,R=Qe,N=Ut),(wn.equals(A)===!1||jn!==D)&amp;&amp;(n.blendColor(wn.r,wn.g,wn.b,jn),A.copy(wn),D=jn),b=de,C=!1}function Ve(de,tt){de.side===Ki?ve(n.CULL_FACE):ue(n.CULL_FACE);let Ae=de.side===xr;tt&amp;&amp;(Ae=!Ae),Le(Ae),de.blending===vc&amp;&amp;de.transparent===!1?Q(la):Q(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),o.setFunc(de.depthFunc),o.setTest(de.depthTest),o.setMask(de.depthWrite),s.setMask(de.colorWrite);const Pe=de.stencilWrite;l.setTest(Pe),Pe&amp;&amp;(l.setMask(de.stencilWriteMask),l.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),l.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),mt(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?ue(n.SAMPLE_ALPHA_TO_COVERAGE):ve(n.SAMPLE_ALPHA_TO_COVERAGE)}function Le(de){O!==de&amp;&amp;(de?n.frontFace(n.CW):n.frontFace(n.CCW),O=de)}function Fe(de){de!==Z2?(ue(n.CULL_FACE),de!==L&amp;&amp;(de===Jx?n.cullFace(n.BACK):de===J2?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ve(n.CULL_FACE),L=de}function Ne(de){de!==V&amp;&amp;(I&amp;&amp;n.lineWidth(de),V=de)}function mt(de,tt,Ae){de?(ue(n.POLYGON_OFFSET_FILL),(Z!==tt||z!==Ae)&amp;&amp;(n.polygonOffset(tt,Ae),Z=tt,z=Ae)):ve(n.POLYGON_OFFSET_FILL)}function ze(de){de?ue(n.SCISSOR_TEST):ve(n.SCISSOR_TEST)}function te(de){de===void 0&amp;&amp;(de=n.TEXTURE0+K-1),ee!==de&amp;&amp;(n.activeTexture(de),ee=de)}function H(de,tt,Ae){Ae===void 0&amp;&amp;(ee===null?Ae=n.TEXTURE0+K-1:Ae=ee);let Pe=F[Ae];Pe===void 0&amp;&amp;(Pe={type:void 0,texture:void 0},F[Ae]=Pe),(Pe.type!==de||Pe.texture!==tt)&amp;&amp;(ee!==Ae&amp;&amp;(n.activeTexture(Ae),ee=Ae),n.bindTexture(de,tt||ae[de]),Pe.type=de,Pe.texture=tt)}function pe(){const de=F[ee];de!==void 0&amp;&amp;de.type!==void 0&amp;&amp;(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function Ce(){try{n.compressedTexImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Ue(){try{n.compressedTexImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Me(){try{n.texSubImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Ze(){try{n.texSubImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function qe(){try{n.compressedTexSubImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function ut(){try{n.compressedTexSubImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Ct(){try{n.texStorage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function je(){try{n.texStorage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function ht(){try{n.texImage2D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function St(){try{n.texImage3D(...arguments)}catch(de){console.error(&quot;THREE.WebGLState:&quot;,de)}}function Rt(de){ce.equals(de)===!1&amp;&amp;(n.scissor(de.x,de.y,de.z,de.w),ce.copy(de))}function rt(de){ie.equals(de)===!1&amp;&amp;(n.viewport(de.x,de.y,de.z,de.w),ie.copy(de))}function Gt(de,tt){let Ae=h.get(tt);Ae===void 0&amp;&amp;(Ae=new WeakMap,h.set(tt,Ae));let Pe=Ae.get(de);Pe===void 0&amp;&amp;(Pe=n.getUniformBlockIndex(tt,de.name),Ae.set(de,Pe))}function It(de,tt){const Pe=h.get(tt).get(de);u.get(tt)!==Pe&amp;&amp;(n.uniformBlockBinding(tt,Pe,de.__bindingPointIndex),u.set(tt,Pe))}function gn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},ee=null,F={},p={},m=new WeakMap,g=[],v=null,x=!1,b=null,_=null,T=null,w=null,E=null,R=null,N=null,A=new $e(0,0,0),D=0,C=!1,O=null,L=null,V=null,Z=null,z=null,ce.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),l.reset()}return{buffers:{color:s,depth:o,stencil:l},enable:ue,disable:ve,bindFramebuffer:He,drawBuffers:Xe,useProgram:lt,setBlending:Q,setMaterial:Ve,setFlipSided:Le,setCullFace:Fe,setLineWidth:Ne,setPolygonOffset:mt,setScissorTest:ze,activeTexture:te,bindTexture:H,unbindTexture:pe,compressedTexImage2D:Ce,compressedTexImage3D:Ue,texImage2D:ht,texImage3D:St,updateUBOMapping:Gt,uniformBlockBinding:It,texStorage2D:Ct,texStorage3D:je,texSubImage2D:Me,texSubImage3D:Ze,compressedTexSubImage2D:qe,compressedTexSubImage3D:ut,scissor:Rt,viewport:rt,reset:gn}}function P8(n,e,t,i,r,s,o){const l=e.has(&quot;WEBGL_multisampled_render_to_texture&quot;)?e.get(&quot;WEBGL_multisampled_render_to_texture&quot;):null,u=typeof navigator&gt;&quot;u&quot;?!1:/OculusBrowser/g.test(navigator.userAgent),h=new Oe,f=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas&lt;&quot;u&quot;&amp;&amp;new OffscreenCanvas(1,1).getContext(&quot;2d&quot;)!==null}catch{}function v(te,H){return g?new OffscreenCanvas(te,H):Sd(&quot;canvas&quot;)}function x(te,H,pe){let Ce=1;const Ue=ze(te);if((Ue.width&gt;pe||Ue.height&gt;pe)&amp;&amp;(Ce=pe/Math.max(Ue.width,Ue.height)),Ce&lt;1)if(typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;te instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;te instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;te instanceof ImageBitmap||typeof VideoFrame&lt;&quot;u&quot;&amp;&amp;te instanceof VideoFrame){const Me=Math.floor(Ce*Ue.width),Ze=Math.floor(Ce*Ue.height);p===void 0&amp;&amp;(p=v(Me,Ze));const qe=H?v(Me,Ze):p;return qe.width=Me,qe.height=Ze,qe.getContext(&quot;2d&quot;).drawImage(te,0,0,Me,Ze),console.warn(&quot;THREE.WebGLRenderer: Texture has been resized from (&quot;+Ue.width+&quot;x&quot;+Ue.height+&quot;) to (&quot;+Me+&quot;x&quot;+Ze+&quot;).&quot;),qe}else return&quot;data&quot;in te&amp;&amp;console.warn(&quot;THREE.WebGLRenderer: Image in DataTexture is too big (&quot;+Ue.width+&quot;x&quot;+Ue.height+&quot;).&quot;),te;return te}function b(te){return te.generateMipmaps}function _(te){n.generateMipmap(te)}function T(te){return te.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:te.isWebGL3DRenderTarget?n.TEXTURE_3D:te.isWebGLArrayRenderTarget||te.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(te,H,pe,Ce,Ue=!1){if(te!==null){if(n[te]!==void 0)return n[te];console.warn(&quot;THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format &#x27;&quot;+te+&quot;&#x27;&quot;)}let Me=H;if(H===n.RED&amp;&amp;(pe===n.FLOAT&amp;&amp;(Me=n.R32F),pe===n.HALF_FLOAT&amp;&amp;(Me=n.R16F),pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.R8)),H===n.RED_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.R8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.R16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.R32UI),pe===n.BYTE&amp;&amp;(Me=n.R8I),pe===n.SHORT&amp;&amp;(Me=n.R16I),pe===n.INT&amp;&amp;(Me=n.R32I)),H===n.RG&amp;&amp;(pe===n.FLOAT&amp;&amp;(Me=n.RG32F),pe===n.HALF_FLOAT&amp;&amp;(Me=n.RG16F),pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RG8)),H===n.RG_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RG8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.RG16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.RG32UI),pe===n.BYTE&amp;&amp;(Me=n.RG8I),pe===n.SHORT&amp;&amp;(Me=n.RG16I),pe===n.INT&amp;&amp;(Me=n.RG32I)),H===n.RGB_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RGB8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.RGB16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.RGB32UI),pe===n.BYTE&amp;&amp;(Me=n.RGB8I),pe===n.SHORT&amp;&amp;(Me=n.RGB16I),pe===n.INT&amp;&amp;(Me=n.RGB32I)),H===n.RGBA_INTEGER&amp;&amp;(pe===n.UNSIGNED_BYTE&amp;&amp;(Me=n.RGBA8UI),pe===n.UNSIGNED_SHORT&amp;&amp;(Me=n.RGBA16UI),pe===n.UNSIGNED_INT&amp;&amp;(Me=n.RGBA32UI),pe===n.BYTE&amp;&amp;(Me=n.RGBA8I),pe===n.SHORT&amp;&amp;(Me=n.RGBA16I),pe===n.INT&amp;&amp;(Me=n.RGBA32I)),H===n.RGB&amp;&amp;pe===n.UNSIGNED_INT_5_9_9_9_REV&amp;&amp;(Me=n.RGB9_E5),H===n.RGBA){const Ze=Ue?vd:Zt.getTransfer(Ce);pe===n.FLOAT&amp;&amp;(Me=n.RGBA32F),pe===n.HALF_FLOAT&amp;&amp;(Me=n.RGBA16F),pe===n.UNSIGNED_BYTE&amp;&amp;(Me=Ze===On?n.SRGB8_ALPHA8:n.RGBA8),pe===n.UNSIGNED_SHORT_4_4_4_4&amp;&amp;(Me=n.RGBA4),pe===n.UNSIGNED_SHORT_5_5_5_1&amp;&amp;(Me=n.RGB5_A1)}return(Me===n.R16F||Me===n.R32F||Me===n.RG16F||Me===n.RG32F||Me===n.RGBA16F||Me===n.RGBA32F)&amp;&amp;e.get(&quot;EXT_color_buffer_float&quot;),Me}function E(te,H){let pe;return te?H===null||H===da||H===sh?pe=n.DEPTH24_STENCIL8:H===Pr?pe=n.DEPTH32F_STENCIL8:H===rh&amp;&amp;(pe=n.DEPTH24_STENCIL8,console.warn(&quot;DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.&quot;)):H===null||H===da||H===sh?pe=n.DEPTH_COMPONENT24:H===Pr?pe=n.DEPTH_COMPONENT32F:H===rh&amp;&amp;(pe=n.DEPTH_COMPONENT16),pe}function R(te,H){return b(te)===!0||te.isFramebufferTexture&amp;&amp;te.minFilter!==xi&amp;&amp;te.minFilter!==fi?Math.log2(Math.max(H.width,H.height))+1:te.mipmaps!==void 0&amp;&amp;te.mipmaps.length&gt;0?te.mipmaps.length:te.isCompressedTexture&amp;&amp;Array.isArray(te.image)?H.mipmaps.length:1}function N(te){const H=te.target;H.removeEventListener(&quot;dispose&quot;,N),D(H),H.isVideoTexture&amp;&amp;f.delete(H)}function A(te){const H=te.target;H.removeEventListener(&quot;dispose&quot;,A),O(H)}function D(te){const H=i.get(te);if(H.__webglInit===void 0)return;const pe=te.source,Ce=m.get(pe);if(Ce){const Ue=Ce[H.__cacheKey];Ue.usedTimes--,Ue.usedTimes===0&amp;&amp;C(te),Object.keys(Ce).length===0&amp;&amp;m.delete(pe)}i.remove(te)}function C(te){const H=i.get(te);n.deleteTexture(H.__webglTexture);const pe=te.source,Ce=m.get(pe);delete Ce[H.__cacheKey],o.memory.textures--}function O(te){const H=i.get(te);if(te.depthTexture&amp;&amp;(te.depthTexture.dispose(),i.remove(te.depthTexture)),te.isWebGLCubeRenderTarget)for(let Ce=0;Ce&lt;6;Ce++){if(Array.isArray(H.__webglFramebuffer[Ce]))for(let Ue=0;Ue&lt;H.__webglFramebuffer[Ce].length;Ue++)n.deleteFramebuffer(H.__webglFramebuffer[Ce][Ue]);else n.deleteFramebuffer(H.__webglFramebuffer[Ce]);H.__webglDepthbuffer&amp;&amp;n.deleteRenderbuffer(H.__webglDepthbuffer[Ce])}else{if(Array.isArray(H.__webglFramebuffer))for(let Ce=0;Ce&lt;H.__webglFramebuffer.length;Ce++)n.deleteFramebuffer(H.__webglFramebuffer[Ce]);else n.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&amp;&amp;n.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&amp;&amp;n.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let Ce=0;Ce&lt;H.__webglColorRenderbuffer.length;Ce++)H.__webglColorRenderbuffer[Ce]&amp;&amp;n.deleteRenderbuffer(H.__webglColorRenderbuffer[Ce]);H.__webglDepthRenderbuffer&amp;&amp;n.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const pe=te.textures;for(let Ce=0,Ue=pe.length;Ce&lt;Ue;Ce++){const Me=i.get(pe[Ce]);Me.__webglTexture&amp;&amp;(n.deleteTexture(Me.__webglTexture),o.memory.textures--),i.remove(pe[Ce])}i.remove(te)}let L=0;function V(){L=0}function Z(){const te=L;return te&gt;=r.maxTextures&amp;&amp;console.warn(&quot;THREE.WebGLTextures: Trying to use &quot;+te+&quot; texture units while this GPU supports only &quot;+r.maxTextures),L+=1,te}function z(te){const H=[];return H.push(te.wrapS),H.push(te.wrapT),H.push(te.wrapR||0),H.push(te.magFilter),H.push(te.minFilter),H.push(te.anisotropy),H.push(te.internalFormat),H.push(te.format),H.push(te.type),H.push(te.generateMipmaps),H.push(te.premultiplyAlpha),H.push(te.flipY),H.push(te.unpackAlignment),H.push(te.colorSpace),H.join()}function K(te,H){const pe=i.get(te);if(te.isVideoTexture&amp;&amp;Ne(te),te.isRenderTargetTexture===!1&amp;&amp;te.version&gt;0&amp;&amp;pe.__version!==te.version){const Ce=te.image;if(Ce===null)console.warn(&quot;THREE.WebGLRenderer: Texture marked for update but no image data found.&quot;);else if(Ce.complete===!1)console.warn(&quot;THREE.WebGLRenderer: Texture marked for update but image is incomplete&quot;);else{ie(pe,te,H);return}}t.bindTexture(n.TEXTURE_2D,pe.__webglTexture,n.TEXTURE0+H)}function I(te,H){const pe=i.get(te);if(te.version&gt;0&amp;&amp;pe.__version!==te.version){ie(pe,te,H);return}t.bindTexture(n.TEXTURE_2D_ARRAY,pe.__webglTexture,n.TEXTURE0+H)}function j(te,H){const pe=i.get(te);if(te.version&gt;0&amp;&amp;pe.__version!==te.version){ie(pe,te,H);return}t.bindTexture(n.TEXTURE_3D,pe.__webglTexture,n.TEXTURE0+H)}function G(te,H){const pe=i.get(te);if(te.version&gt;0&amp;&amp;pe.__version!==te.version){oe(pe,te,H);return}t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+H)}const ee={[ws]:n.REPEAT,[rr]:n.CLAMP_TO_EDGE,[ih]:n.MIRRORED_REPEAT},F={[xi]:n.NEAREST,[ty]:n.NEAREST_MIPMAP_NEAREST,[hc]:n.NEAREST_MIPMAP_LINEAR,[fi]:n.LINEAR,[Ju]:n.LINEAR_MIPMAP_NEAREST,[Zr]:n.LINEAR_MIPMAP_LINEAR},ne={[LD]:n.NEVER,[HD]:n.ALWAYS,[UD]:n.LESS,[lw]:n.LEQUAL,[kD]:n.EQUAL,[BD]:n.GEQUAL,[FD]:n.GREATER,[zD]:n.NOTEQUAL};function le(te,H){if(H.type===Pr&amp;&amp;e.has(&quot;OES_texture_float_linear&quot;)===!1&amp;&amp;(H.magFilter===fi||H.magFilter===Ju||H.magFilter===hc||H.magFilter===Zr||H.minFilter===fi||H.minFilter===Ju||H.minFilter===hc||H.minFilter===Zr)&amp;&amp;console.warn(&quot;THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.&quot;),n.texParameteri(te,n.TEXTURE_WRAP_S,ee[H.wrapS]),n.texParameteri(te,n.TEXTURE_WRAP_T,ee[H.wrapT]),(te===n.TEXTURE_3D||te===n.TEXTURE_2D_ARRAY)&amp;&amp;n.texParameteri(te,n.TEXTURE_WRAP_R,ee[H.wrapR]),n.texParameteri(te,n.TEXTURE_MAG_FILTER,F[H.magFilter]),n.texParameteri(te,n.TEXTURE_MIN_FILTER,F[H.minFilter]),H.compareFunction&amp;&amp;(n.texParameteri(te,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(te,n.TEXTURE_COMPARE_FUNC,ne[H.compareFunction])),e.has(&quot;EXT_texture_filter_anisotropic&quot;)===!0){if(H.magFilter===xi||H.minFilter!==hc&amp;&amp;H.minFilter!==Zr||H.type===Pr&amp;&amp;e.has(&quot;OES_texture_float_linear&quot;)===!1)return;if(H.anisotropy&gt;1||i.get(H).__currentAnisotropy){const pe=e.get(&quot;EXT_texture_filter_anisotropic&quot;);n.texParameterf(te,pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,r.getMaxAnisotropy())),i.get(H).__currentAnisotropy=H.anisotropy}}}function ce(te,H){let pe=!1;te.__webglInit===void 0&amp;&amp;(te.__webglInit=!0,H.addEventListener(&quot;dispose&quot;,N));const Ce=H.source;let Ue=m.get(Ce);Ue===void 0&amp;&amp;(Ue={},m.set(Ce,Ue));const Me=z(H);if(Me!==te.__cacheKey){Ue[Me]===void 0&amp;&amp;(Ue[Me]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,pe=!0),Ue[Me].usedTimes++;const Ze=Ue[te.__cacheKey];Ze!==void 0&amp;&amp;(Ue[te.__cacheKey].usedTimes--,Ze.usedTimes===0&amp;&amp;C(H)),te.__cacheKey=Me,te.__webglTexture=Ue[Me].texture}return pe}function ie(te,H,pe){let Ce=n.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&amp;&amp;(Ce=n.TEXTURE_2D_ARRAY),H.isData3DTexture&amp;&amp;(Ce=n.TEXTURE_3D);const Ue=ce(te,H),Me=H.source;t.bindTexture(Ce,te.__webglTexture,n.TEXTURE0+pe);const Ze=i.get(Me);if(Me.version!==Ze.__version||Ue===!0){t.activeTexture(n.TEXTURE0+pe);const qe=Zt.getPrimaries(Zt.workingColorSpace),ut=H.colorSpace===ta?null:Zt.getPrimaries(H.colorSpace),Ct=H.colorSpace===ta||qe===ut?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ct);let je=x(H.image,!1,r.maxTextureSize);je=mt(H,je);const ht=s.convert(H.format,H.colorSpace),St=s.convert(H.type);let Rt=w(H.internalFormat,ht,St,H.colorSpace,H.isVideoTexture);le(Ce,H);let rt;const Gt=H.mipmaps,It=H.isVideoTexture!==!0,gn=Ze.__version===void 0||Ue===!0,de=Me.dataReady,tt=R(H,je);if(H.isDepthTexture)Rt=E(H.format===ah,H.type),gn&amp;&amp;(It?t.texStorage2D(n.TEXTURE_2D,1,Rt,je.width,je.height):t.texImage2D(n.TEXTURE_2D,0,Rt,je.width,je.height,0,ht,St,null));else if(H.isDataTexture)if(Gt.length&gt;0){It&amp;&amp;gn&amp;&amp;t.texStorage2D(n.TEXTURE_2D,tt,Rt,Gt[0].width,Gt[0].height);for(let Ae=0,Pe=Gt.length;Ae&lt;Pe;Ae++)rt=Gt[Ae],It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,rt.width,rt.height,ht,St,rt.data):t.texImage2D(n.TEXTURE_2D,Ae,Rt,rt.width,rt.height,0,ht,St,rt.data);H.generateMipmaps=!1}else It?(gn&amp;&amp;t.texStorage2D(n.TEXTURE_2D,tt,Rt,je.width,je.height),de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,0,0,0,je.width,je.height,ht,St,je.data)):t.texImage2D(n.TEXTURE_2D,0,Rt,je.width,je.height,0,ht,St,je.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){It&amp;&amp;gn&amp;&amp;t.texStorage3D(n.TEXTURE_2D_ARRAY,tt,Rt,Gt[0].width,Gt[0].height,je.depth);for(let Ae=0,Pe=Gt.length;Ae&lt;Pe;Ae++)if(rt=Gt[Ae],H.format!==vr)if(ht!==null)if(It){if(de)if(H.layerUpdates.size&gt;0){const st=hS(rt.width,rt.height,H.format,H.type);for(const Qe of H.layerUpdates){const Ut=rt.data.subarray(Qe*st/rt.data.BYTES_PER_ELEMENT,(Qe+1)*st/rt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,Qe,rt.width,rt.height,1,ht,Ut)}H.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,rt.width,rt.height,je.depth,ht,rt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ae,Rt,rt.width,rt.height,je.depth,0,rt.data,0,0);else console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()&quot;);else It?de&amp;&amp;t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,rt.width,rt.height,je.depth,ht,St,rt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ae,Rt,rt.width,rt.height,je.depth,0,ht,St,rt.data)}else{It&amp;&amp;gn&amp;&amp;t.texStorage2D(n.TEXTURE_2D,tt,Rt,Gt[0].width,Gt[0].height);for(let Ae=0,Pe=Gt.length;Ae&lt;Pe;Ae++)rt=Gt[Ae],H.format!==vr?ht!==null?It?de&amp;&amp;t.compressedTexSubImage2D(n.TEXTURE_2D,Ae,0,0,rt.width,rt.height,ht,rt.data):t.compressedTexImage2D(n.TEXTURE_2D,Ae,Rt,rt.width,rt.height,0,rt.data):console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()&quot;):It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,rt.width,rt.height,ht,St,rt.data):t.texImage2D(n.TEXTURE_2D,Ae,Rt,rt.width,rt.height,0,ht,St,rt.data)}else if(H.isDataArrayTexture)if(It){if(gn&amp;&amp;t.texStorage3D(n.TEXTURE_2D_ARRAY,tt,Rt,je.width,je.height,je.depth),de)if(H.layerUpdates.size&gt;0){const Ae=hS(je.width,je.height,H.format,H.type);for(const Pe of H.layerUpdates){const st=je.data.subarray(Pe*Ae/je.data.BYTES_PER_ELEMENT,(Pe+1)*Ae/je.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Pe,je.width,je.height,1,ht,St,st)}H.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,je.width,je.height,je.depth,ht,St,je.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Rt,je.width,je.height,je.depth,0,ht,St,je.data);else if(H.isData3DTexture)It?(gn&amp;&amp;t.texStorage3D(n.TEXTURE_3D,tt,Rt,je.width,je.height,je.depth),de&amp;&amp;t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,je.width,je.height,je.depth,ht,St,je.data)):t.texImage3D(n.TEXTURE_3D,0,Rt,je.width,je.height,je.depth,0,ht,St,je.data);else if(H.isFramebufferTexture){if(gn)if(It)t.texStorage2D(n.TEXTURE_2D,tt,Rt,je.width,je.height);else{let Ae=je.width,Pe=je.height;for(let st=0;st&lt;tt;st++)t.texImage2D(n.TEXTURE_2D,st,Rt,Ae,Pe,0,ht,St,null),Ae&gt;&gt;=1,Pe&gt;&gt;=1}}else if(Gt.length&gt;0){if(It&amp;&amp;gn){const Ae=ze(Gt[0]);t.texStorage2D(n.TEXTURE_2D,tt,Rt,Ae.width,Ae.height)}for(let Ae=0,Pe=Gt.length;Ae&lt;Pe;Ae++)rt=Gt[Ae],It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,ht,St,rt):t.texImage2D(n.TEXTURE_2D,Ae,Rt,ht,St,rt);H.generateMipmaps=!1}else if(It){if(gn){const Ae=ze(je);t.texStorage2D(n.TEXTURE_2D,tt,Rt,Ae.width,Ae.height)}de&amp;&amp;t.texSubImage2D(n.TEXTURE_2D,0,0,0,ht,St,je)}else t.texImage2D(n.TEXTURE_2D,0,Rt,ht,St,je);b(H)&amp;&amp;_(Ce),Ze.__version=Me.version,H.onUpdate&amp;&amp;H.onUpdate(H)}te.__version=H.version}function oe(te,H,pe){if(H.image.length!==6)return;const Ce=ce(te,H),Ue=H.source;t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+pe);const Me=i.get(Ue);if(Ue.version!==Me.__version||Ce===!0){t.activeTexture(n.TEXTURE0+pe);const Ze=Zt.getPrimaries(Zt.workingColorSpace),qe=H.colorSpace===ta?null:Zt.getPrimaries(H.colorSpace),ut=H.colorSpace===ta||Ze===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ut);const Ct=H.isCompressedTexture||H.image[0].isCompressedTexture,je=H.image[0]&amp;&amp;H.image[0].isDataTexture,ht=[];for(let Pe=0;Pe&lt;6;Pe++)!Ct&amp;&amp;!je?ht[Pe]=x(H.image[Pe],!0,r.maxCubemapSize):ht[Pe]=je?H.image[Pe].image:H.image[Pe],ht[Pe]=mt(H,ht[Pe]);const St=ht[0],Rt=s.convert(H.format,H.colorSpace),rt=s.convert(H.type),Gt=w(H.internalFormat,Rt,rt,H.colorSpace),It=H.isVideoTexture!==!0,gn=Me.__version===void 0||Ce===!0,de=Ue.dataReady;let tt=R(H,St);le(n.TEXTURE_CUBE_MAP,H);let Ae;if(Ct){It&amp;&amp;gn&amp;&amp;t.texStorage2D(n.TEXTURE_CUBE_MAP,tt,Gt,St.width,St.height);for(let Pe=0;Pe&lt;6;Pe++){Ae=ht[Pe].mipmaps;for(let st=0;st&lt;Ae.length;st++){const Qe=Ae[st];H.format!==vr?Rt!==null?It?de&amp;&amp;t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st,0,0,Qe.width,Qe.height,Rt,Qe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st,Gt,Qe.width,Qe.height,0,Qe.data):console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()&quot;):It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st,0,0,Qe.width,Qe.height,Rt,rt,Qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st,Gt,Qe.width,Qe.height,0,Rt,rt,Qe.data)}}}else{if(Ae=H.mipmaps,It&amp;&amp;gn){Ae.length&gt;0&amp;&amp;tt++;const Pe=ze(ht[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,tt,Gt,Pe.width,Pe.height)}for(let Pe=0;Pe&lt;6;Pe++)if(je){It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,ht[Pe].width,ht[Pe].height,Rt,rt,ht[Pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Gt,ht[Pe].width,ht[Pe].height,0,Rt,rt,ht[Pe].data);for(let st=0;st&lt;Ae.length;st++){const Ut=Ae[st].image[Pe].image;It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st+1,0,0,Ut.width,Ut.height,Rt,rt,Ut.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st+1,Gt,Ut.width,Ut.height,0,Rt,rt,Ut.data)}}else{It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,Rt,rt,ht[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Gt,Rt,rt,ht[Pe]);for(let st=0;st&lt;Ae.length;st++){const Qe=Ae[st];It?de&amp;&amp;t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st+1,0,0,Rt,rt,Qe.image[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,st+1,Gt,Rt,rt,Qe.image[Pe])}}}b(H)&amp;&amp;_(n.TEXTURE_CUBE_MAP),Me.__version=Ue.version,H.onUpdate&amp;&amp;H.onUpdate(H)}te.__version=H.version}function ae(te,H,pe,Ce,Ue,Me){const Ze=s.convert(pe.format,pe.colorSpace),qe=s.convert(pe.type),ut=w(pe.internalFormat,Ze,qe,pe.colorSpace),Ct=i.get(H),je=i.get(pe);if(je.__renderTarget=H,!Ct.__hasExternalTextures){const ht=Math.max(1,H.width&gt;&gt;Me),St=Math.max(1,H.height&gt;&gt;Me);Ue===n.TEXTURE_3D||Ue===n.TEXTURE_2D_ARRAY?t.texImage3D(Ue,Me,ut,ht,St,H.depth,0,Ze,qe,null):t.texImage2D(Ue,Me,ut,ht,St,0,Ze,qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,te),Fe(H)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ce,Ue,je.__webglTexture,0,Le(H)):(Ue===n.TEXTURE_2D||Ue&gt;=n.TEXTURE_CUBE_MAP_POSITIVE_X&amp;&amp;Ue&lt;=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&amp;&amp;n.framebufferTexture2D(n.FRAMEBUFFER,Ce,Ue,je.__webglTexture,Me),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(te,H,pe){if(n.bindRenderbuffer(n.RENDERBUFFER,te),H.depthBuffer){const Ce=H.depthTexture,Ue=Ce&amp;&amp;Ce.isDepthTexture?Ce.type:null,Me=E(H.stencilBuffer,Ue),Ze=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=Le(H);Fe(H)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,Me,H.width,H.height):pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Me,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,Me,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ze,n.RENDERBUFFER,te)}else{const Ce=H.textures;for(let Ue=0;Ue&lt;Ce.length;Ue++){const Me=Ce[Ue],Ze=s.convert(Me.format,Me.colorSpace),qe=s.convert(Me.type),ut=w(Me.internalFormat,Ze,qe,Me.colorSpace),Ct=Le(H);pe&amp;&amp;Fe(H)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,ut,H.width,H.height):Fe(H)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ct,ut,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,ut,H.width,H.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ve(te,H){if(H&amp;&amp;H.isWebGLCubeRenderTarget)throw new Error(&quot;Depth Texture with cube render targets is not supported&quot;);if(t.bindFramebuffer(n.FRAMEBUFFER,te),!(H.depthTexture&amp;&amp;H.depthTexture.isDepthTexture))throw new Error(&quot;renderTarget.depthTexture must be an instance of THREE.DepthTexture&quot;);const Ce=i.get(H.depthTexture);Ce.__renderTarget=H,(!Ce.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&amp;&amp;(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),K(H.depthTexture,0);const Ue=Ce.__webglTexture,Me=Le(H);if(H.depthTexture.format===oh)Fe(H)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ue,0);else if(H.depthTexture.format===ah)Fe(H)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ue,0);else throw new Error(&quot;Unknown depthTexture format&quot;)}function He(te){const H=i.get(te),pe=te.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==te.depthTexture){const Ce=te.depthTexture;if(H.__depthDisposeCallback&amp;&amp;H.__depthDisposeCallback(),Ce){const Ue=()=&gt;{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,Ce.removeEventListener(&quot;dispose&quot;,Ue)};Ce.addEventListener(&quot;dispose&quot;,Ue),H.__depthDisposeCallback=Ue}H.__boundDepthTexture=Ce}if(te.depthTexture&amp;&amp;!H.__autoAllocateDepthBuffer){if(pe)throw new Error(&quot;target.depthTexture not supported in Cube render targets&quot;);const Ce=te.texture.mipmaps;Ce&amp;&amp;Ce.length&gt;0?ve(H.__webglFramebuffer[0],te):ve(H.__webglFramebuffer,te)}else if(pe){H.__webglDepthbuffer=[];for(let Ce=0;Ce&lt;6;Ce++)if(t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer[Ce]),H.__webglDepthbuffer[Ce]===void 0)H.__webglDepthbuffer[Ce]=n.createRenderbuffer(),ue(H.__webglDepthbuffer[Ce],te,!1);else{const Ue=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Me=H.__webglDepthbuffer[Ce];n.bindRenderbuffer(n.RENDERBUFFER,Me),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,Me)}}else{const Ce=te.texture.mipmaps;if(Ce&amp;&amp;Ce.length&gt;0?t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=n.createRenderbuffer(),ue(H.__webglDepthbuffer,te,!1);else{const Ue=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Me=H.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Me),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ue,n.RENDERBUFFER,Me)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Xe(te,H,pe){const Ce=i.get(te);H!==void 0&amp;&amp;ae(Ce.__webglFramebuffer,te,te.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),pe!==void 0&amp;&amp;He(te)}function lt(te){const H=te.texture,pe=i.get(te),Ce=i.get(H);te.addEventListener(&quot;dispose&quot;,A);const Ue=te.textures,Me=te.isWebGLCubeRenderTarget===!0,Ze=Ue.length&gt;1;if(Ze||(Ce.__webglTexture===void 0&amp;&amp;(Ce.__webglTexture=n.createTexture()),Ce.__version=H.version,o.memory.textures++),Me){pe.__webglFramebuffer=[];for(let qe=0;qe&lt;6;qe++)if(H.mipmaps&amp;&amp;H.mipmaps.length&gt;0){pe.__webglFramebuffer[qe]=[];for(let ut=0;ut&lt;H.mipmaps.length;ut++)pe.__webglFramebuffer[qe][ut]=n.createFramebuffer()}else pe.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(H.mipmaps&amp;&amp;H.mipmaps.length&gt;0){pe.__webglFramebuffer=[];for(let qe=0;qe&lt;H.mipmaps.length;qe++)pe.__webglFramebuffer[qe]=n.createFramebuffer()}else pe.__webglFramebuffer=n.createFramebuffer();if(Ze)for(let qe=0,ut=Ue.length;qe&lt;ut;qe++){const Ct=i.get(Ue[qe]);Ct.__webglTexture===void 0&amp;&amp;(Ct.__webglTexture=n.createTexture(),o.memory.textures++)}if(te.samples&gt;0&amp;&amp;Fe(te)===!1){pe.__webglMultisampledFramebuffer=n.createFramebuffer(),pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,pe.__webglMultisampledFramebuffer);for(let qe=0;qe&lt;Ue.length;qe++){const ut=Ue[qe];pe.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,pe.__webglColorRenderbuffer[qe]);const Ct=s.convert(ut.format,ut.colorSpace),je=s.convert(ut.type),ht=w(ut.internalFormat,Ct,je,ut.colorSpace,te.isXRRenderTarget===!0),St=Le(te);n.renderbufferStorageMultisample(n.RENDERBUFFER,St,ht,te.width,te.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,pe.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),te.depthBuffer&amp;&amp;(pe.__webglDepthRenderbuffer=n.createRenderbuffer(),ue(pe.__webglDepthRenderbuffer,te,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Me){t.bindTexture(n.TEXTURE_CUBE_MAP,Ce.__webglTexture),le(n.TEXTURE_CUBE_MAP,H);for(let qe=0;qe&lt;6;qe++)if(H.mipmaps&amp;&amp;H.mipmaps.length&gt;0)for(let ut=0;ut&lt;H.mipmaps.length;ut++)ae(pe.__webglFramebuffer[qe][ut],te,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,ut);else ae(pe.__webglFramebuffer[qe],te,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);b(H)&amp;&amp;_(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ze){for(let qe=0,ut=Ue.length;qe&lt;ut;qe++){const Ct=Ue[qe],je=i.get(Ct);t.bindTexture(n.TEXTURE_2D,je.__webglTexture),le(n.TEXTURE_2D,Ct),ae(pe.__webglFramebuffer,te,Ct,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),b(Ct)&amp;&amp;_(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((te.isWebGL3DRenderTarget||te.isWebGLArrayRenderTarget)&amp;&amp;(qe=te.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,Ce.__webglTexture),le(qe,H),H.mipmaps&amp;&amp;H.mipmaps.length&gt;0)for(let ut=0;ut&lt;H.mipmaps.length;ut++)ae(pe.__webglFramebuffer[ut],te,H,n.COLOR_ATTACHMENT0,qe,ut);else ae(pe.__webglFramebuffer,te,H,n.COLOR_ATTACHMENT0,qe,0);b(H)&amp;&amp;_(qe),t.unbindTexture()}te.depthBuffer&amp;&amp;He(te)}function We(te){const H=te.textures;for(let pe=0,Ce=H.length;pe&lt;Ce;pe++){const Ue=H[pe];if(b(Ue)){const Me=T(te),Ze=i.get(Ue).__webglTexture;t.bindTexture(Me,Ze),_(Me),t.unbindTexture()}}}const Ye=[],Q=[];function Ve(te){if(te.samples&gt;0){if(Fe(te)===!1){const H=te.textures,pe=te.width,Ce=te.height;let Ue=n.COLOR_BUFFER_BIT;const Me=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ze=i.get(te),qe=H.length&gt;1;if(qe)for(let Ct=0;Ct&lt;H.length;Ct++)t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer);const ut=te.texture.mipmaps;ut&amp;&amp;ut.length&gt;0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglFramebuffer);for(let Ct=0;Ct&lt;H.length;Ct++){if(te.resolveDepthBuffer&amp;&amp;(te.depthBuffer&amp;&amp;(Ue|=n.DEPTH_BUFFER_BIT),te.stencilBuffer&amp;&amp;te.resolveStencilBuffer&amp;&amp;(Ue|=n.STENCIL_BUFFER_BIT)),qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[Ct]);const je=i.get(H[Ct]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,je,0)}n.blitFramebuffer(0,0,pe,Ce,0,0,pe,Ce,Ue,n.NEAREST),u===!0&amp;&amp;(Ye.length=0,Q.length=0,Ye.push(n.COLOR_ATTACHMENT0+Ct),te.depthBuffer&amp;&amp;te.resolveDepthBuffer===!1&amp;&amp;(Ye.push(Me),Q.push(Me),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ye))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let Ct=0;Ct&lt;H.length;Ct++){t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.RENDERBUFFER,Ze.__webglColorRenderbuffer[Ct]);const je=i.get(H[Ct]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ze.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ct,n.TEXTURE_2D,je,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ze.__webglMultisampledFramebuffer)}else if(te.depthBuffer&amp;&amp;te.resolveDepthBuffer===!1&amp;&amp;u){const H=te.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[H])}}}function Le(te){return Math.min(r.maxSamples,te.samples)}function Fe(te){const H=i.get(te);return te.samples&gt;0&amp;&amp;e.has(&quot;WEBGL_multisampled_render_to_texture&quot;)===!0&amp;&amp;H.__useRenderToTexture!==!1}function Ne(te){const H=o.render.frame;f.get(te)!==H&amp;&amp;(f.set(te,H),te.update())}function mt(te,H){const pe=te.colorSpace,Ce=te.format,Ue=te.type;return te.isCompressedTexture===!0||te.isVideoTexture===!0||pe!==fr&amp;&amp;pe!==ta&amp;&amp;(Zt.getTransfer(pe)===On?(Ce!==vr||Ue!==es)&amp;&amp;console.warn(&quot;THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.&quot;):console.error(&quot;THREE.WebGLTextures: Unsupported texture color space:&quot;,pe)),H}function ze(te){return typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;te instanceof HTMLImageElement?(h.width=te.naturalWidth||te.width,h.height=te.naturalHeight||te.height):typeof VideoFrame&lt;&quot;u&quot;&amp;&amp;te instanceof VideoFrame?(h.width=te.displayWidth,h.height=te.displayHeight):(h.width=te.width,h.height=te.height),h}this.allocateTextureUnit=Z,this.resetTextureUnits=V,this.setTexture2D=K,this.setTexture2DArray=I,this.setTexture3D=j,this.setTextureCube=G,this.rebindTextures=Xe,this.setupRenderTarget=lt,this.updateRenderTargetMipmap=We,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=He,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=Fe}function GN(n,e){function t(i,r=ta){let s;const o=Zt.getTransfer(r);if(i===es)return n.UNSIGNED_BYTE;if(i===iy)return n.UNSIGNED_SHORT_4_4_4_4;if(i===ry)return n.UNSIGNED_SHORT_5_5_5_1;if(i===tw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===QS)return n.BYTE;if(i===ew)return n.SHORT;if(i===rh)return n.UNSIGNED_SHORT;if(i===ny)return n.INT;if(i===da)return n.UNSIGNED_INT;if(i===Pr)return n.FLOAT;if(i===wh)return n.HALF_FLOAT;if(i===nw)return n.ALPHA;if(i===iw)return n.RGB;if(i===vr)return n.RGBA;if(i===oh)return n.DEPTH_COMPONENT;if(i===ah)return n.DEPTH_STENCIL;if(i===Gd)return n.RED;if(i===jd)return n.RED_INTEGER;if(i===rw)return n.RG;if(i===sy)return n.RG_INTEGER;if(i===oy)return n.RGBA_INTEGER;if(i===id||i===rd||i===sd||i===od)if(o===On)if(s=e.get(&quot;WEBGL_compressed_texture_s3tc_srgb&quot;),s!==null){if(i===id)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===rd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===sd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===od)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get(&quot;WEBGL_compressed_texture_s3tc&quot;),s!==null){if(i===id)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===rd)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===sd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===od)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Jg||i===Qg||i===e0||i===t0)if(s=e.get(&quot;WEBGL_compressed_texture_pvrtc&quot;),s!==null){if(i===Jg)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Qg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===e0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===t0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===n0||i===i0||i===r0)if(s=e.get(&quot;WEBGL_compressed_texture_etc&quot;),s!==null){if(i===n0||i===i0)return o===On?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===r0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===s0||i===o0||i===a0||i===l0||i===c0||i===u0||i===h0||i===f0||i===d0||i===p0||i===m0||i===g0||i===y0||i===_0)if(s=e.get(&quot;WEBGL_compressed_texture_astc&quot;),s!==null){if(i===s0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===o0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===a0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===l0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===c0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===u0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===h0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===f0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===d0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===p0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===m0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===g0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===y0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===_0)return o===On?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===ad||i===v0||i===b0)if(s=e.get(&quot;EXT_texture_compression_bptc&quot;),s!==null){if(i===ad)return o===On?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===v0)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===b0)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===sw||i===x0||i===S0||i===w0)if(s=e.get(&quot;EXT_texture_compression_rgtc&quot;),s!==null){if(i===ad)return s.COMPRESSED_RED_RGTC1_EXT;if(i===x0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===S0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===w0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===sh?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const L8=`
void main() {

    gl_Position = vec4( position, 1.0 );

}`,U8=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

    vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

    if ( coord.x &gt;= 1.0 ) {

            gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

    } else {

            gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

    }

}`;class k8{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Kn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&amp;&amp;(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&amp;&amp;this.mesh===null){const t=e.cameras[0].viewport,i=new Ts({vertexShader:L8,fragmentShader:U8,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Sn(new Ah(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class F8 extends To{constructor(e,t){super();const i=this;let r=null,s=1,o=null,l=&quot;local-floor&quot;,u=1,h=null,f=null,p=null,m=null,g=null,v=null;const x=new k8,b=t.getContextAttributes();let _=null,T=null;const w=[],E=[],R=new Oe;let N=null;const A=new Yn;A.viewport=new yn;const D=new Yn;D.viewport=new yn;const C=[A,D],O=new RN;let L=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let oe=w[ie];return oe===void 0&amp;&amp;(oe=new Og,w[ie]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(ie){let oe=w[ie];return oe===void 0&amp;&amp;(oe=new Og,w[ie]=oe),oe.getGripSpace()},this.getHand=function(ie){let oe=w[ie];return oe===void 0&amp;&amp;(oe=new Og,w[ie]=oe),oe.getHandSpace()};function Z(ie){const oe=E.indexOf(ie.inputSource);if(oe===-1)return;const ae=w[oe];ae!==void 0&amp;&amp;(ae.update(ie.inputSource,ie.frame,h||o),ae.dispatchEvent({type:ie.type,data:ie.inputSource}))}function z(){r.removeEventListener(&quot;select&quot;,Z),r.removeEventListener(&quot;selectstart&quot;,Z),r.removeEventListener(&quot;selectend&quot;,Z),r.removeEventListener(&quot;squeeze&quot;,Z),r.removeEventListener(&quot;squeezestart&quot;,Z),r.removeEventListener(&quot;squeezeend&quot;,Z),r.removeEventListener(&quot;end&quot;,z),r.removeEventListener(&quot;inputsourceschange&quot;,K);for(let ie=0;ie&lt;w.length;ie++){const oe=E[ie];oe!==null&amp;&amp;(E[ie]=null,w[ie].disconnect(oe))}L=null,V=null,x.reset(),e.setRenderTarget(_),g=null,m=null,p=null,r=null,T=null,ce.stop(),i.isPresenting=!1,e.setPixelRatio(N),e.setSize(R.width,R.height,!1),i.dispatchEvent({type:&quot;sessionend&quot;})}this.setFramebufferScaleFactor=function(ie){s=ie,i.isPresenting===!0&amp;&amp;console.warn(&quot;THREE.WebXRManager: Cannot change framebuffer scale while presenting.&quot;)},this.setReferenceSpaceType=function(ie){l=ie,i.isPresenting===!0&amp;&amp;console.warn(&quot;THREE.WebXRManager: Cannot change reference space type while presenting.&quot;)},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(ie){h=ie},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return p},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(ie){if(r=ie,r!==null){if(_=e.getRenderTarget(),r.addEventListener(&quot;select&quot;,Z),r.addEventListener(&quot;selectstart&quot;,Z),r.addEventListener(&quot;selectend&quot;,Z),r.addEventListener(&quot;squeeze&quot;,Z),r.addEventListener(&quot;squeezestart&quot;,Z),r.addEventListener(&quot;squeezeend&quot;,Z),r.addEventListener(&quot;end&quot;,z),r.addEventListener(&quot;inputsourceschange&quot;,K),b.xrCompatible!==!0&amp;&amp;await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(R),typeof XRWebGLBinding&lt;&quot;u&quot;&amp;&amp;&quot;createProjectionLayer&quot;in XRWebGLBinding.prototype){let ae=null,ue=null,ve=null;b.depth&amp;&amp;(ve=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ae=b.stencil?ah:oh,ue=b.stencil?sh:da);const He={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:s};p=new XRWebGLBinding(r,t),m=p.createProjectionLayer(He),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),T=new Js(m.textureWidth,m.textureHeight,{format:vr,type:es,depthTexture:new by(m.textureWidth,m.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const ae={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,ae),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),T=new Js(g.framebufferWidth,g.framebufferHeight,{format:vr,type:es,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(u),h=null,o=await r.requestReferenceSpace(l),ce.setContext(r),ce.start(),i.isPresenting=!0,i.dispatchEvent({type:&quot;sessionstart&quot;})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function K(ie){for(let oe=0;oe&lt;ie.removed.length;oe++){const ae=ie.removed[oe],ue=E.indexOf(ae);ue&gt;=0&amp;&amp;(E[ue]=null,w[ue].disconnect(ae))}for(let oe=0;oe&lt;ie.added.length;oe++){const ae=ie.added[oe];let ue=E.indexOf(ae);if(ue===-1){for(let He=0;He&lt;w.length;He++)if(He&gt;=E.length){E.push(ae),ue=He;break}else if(E[He]===null){E[He]=ae,ue=He;break}if(ue===-1)break}const ve=w[ue];ve&amp;&amp;ve.connect(ae)}}const I=new Y,j=new Y;function G(ie,oe,ae){I.setFromMatrixPosition(oe.matrixWorld),j.setFromMatrixPosition(ae.matrixWorld);const ue=I.distanceTo(j),ve=oe.projectionMatrix.elements,He=ae.projectionMatrix.elements,Xe=ve[14]/(ve[10]-1),lt=ve[14]/(ve[10]+1),We=(ve[9]+1)/ve[5],Ye=(ve[9]-1)/ve[5],Q=(ve[8]-1)/ve[0],Ve=(He[8]+1)/He[0],Le=Xe*Q,Fe=Xe*Ve,Ne=ue/(-Q+Ve),mt=Ne*-Q;if(oe.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(mt),ie.translateZ(Ne),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert(),ve[10]===-1)ie.projectionMatrix.copy(oe.projectionMatrix),ie.projectionMatrixInverse.copy(oe.projectionMatrixInverse);else{const ze=Xe+Ne,te=lt+Ne,H=Le-mt,pe=Fe+(ue-mt),Ce=We*lt/te*ze,Ue=Ye*lt/te*ze;ie.projectionMatrix.makePerspective(H,pe,Ce,Ue,ze,te),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}}function ee(ie,oe){oe===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(oe.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(r===null)return;let oe=ie.near,ae=ie.far;x.texture!==null&amp;&amp;(x.depthNear&gt;0&amp;&amp;(oe=x.depthNear),x.depthFar&gt;0&amp;&amp;(ae=x.depthFar)),O.near=D.near=A.near=oe,O.far=D.far=A.far=ae,(L!==O.near||V!==O.far)&amp;&amp;(r.updateRenderState({depthNear:O.near,depthFar:O.far}),L=O.near,V=O.far),A.layers.mask=ie.layers.mask|2,D.layers.mask=ie.layers.mask|4,O.layers.mask=A.layers.mask|D.layers.mask;const ue=ie.parent,ve=O.cameras;ee(O,ue);for(let He=0;He&lt;ve.length;He++)ee(ve[He],ue);ve.length===2?G(O,A,D):O.projectionMatrix.copy(A.projectionMatrix),F(ie,O,ue)};function F(ie,oe,ae){ae===null?ie.matrix.copy(oe.matrixWorld):(ie.matrix.copy(ae.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(oe.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(oe.projectionMatrix),ie.projectionMatrixInverse.copy(oe.projectionMatrixInverse),ie.isPerspectiveCamera&amp;&amp;(ie.fov=uh*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(m===null&amp;&amp;g===null))return u},this.setFoveation=function(ie){u=ie,m!==null&amp;&amp;(m.fixedFoveation=ie),g!==null&amp;&amp;g.fixedFoveation!==void 0&amp;&amp;(g.fixedFoveation=ie)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(O)};let ne=null;function le(ie,oe){if(f=oe.getViewerPose(h||o),v=oe,f!==null){const ae=f.views;g!==null&amp;&amp;(e.setRenderTargetFramebuffer(T,g.framebuffer),e.setRenderTarget(T));let ue=!1;ae.length!==O.cameras.length&amp;&amp;(O.cameras.length=0,ue=!0);for(let Xe=0;Xe&lt;ae.length;Xe++){const lt=ae[Xe];let We=null;if(g!==null)We=g.getViewport(lt);else{const Q=p.getViewSubImage(m,lt);We=Q.viewport,Xe===0&amp;&amp;(e.setRenderTargetTextures(T,Q.colorTexture,Q.depthStencilTexture),e.setRenderTarget(T))}let Ye=C[Xe];Ye===void 0&amp;&amp;(Ye=new Yn,Ye.layers.enable(Xe),Ye.viewport=new yn,C[Xe]=Ye),Ye.matrix.fromArray(lt.transform.matrix),Ye.matrix.decompose(Ye.position,Ye.quaternion,Ye.scale),Ye.projectionMatrix.fromArray(lt.projectionMatrix),Ye.projectionMatrixInverse.copy(Ye.projectionMatrix).invert(),Ye.viewport.set(We.x,We.y,We.width,We.height),Xe===0&amp;&amp;(O.matrix.copy(Ye.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),ue===!0&amp;&amp;O.cameras.push(Ye)}const ve=r.enabledFeatures;if(ve&amp;&amp;ve.includes(&quot;depth-sensing&quot;)&amp;&amp;r.depthUsage==&quot;gpu-optimized&quot;&amp;&amp;p){const Xe=p.getDepthInformation(ae[0]);Xe&amp;&amp;Xe.isValid&amp;&amp;Xe.texture&amp;&amp;x.init(e,Xe,r.renderState)}}for(let ae=0;ae&lt;w.length;ae++){const ue=E[ae],ve=w[ae];ue!==null&amp;&amp;ve!==void 0&amp;&amp;ve.update(ue,oe,h||o)}ne&amp;&amp;ne(ie,oe),oe.detectedPlanes&amp;&amp;i.dispatchEvent({type:&quot;planesdetected&quot;,data:oe}),v=null}const ce=new FN;ce.setAnimationLoop(le),this.setAnimationLoop=function(ie){ne=ie},this.dispose=function(){}}}const Ql=new Sr,z8=new yt;function B8(n,e){function t(b,_){b.matrixAutoUpdate===!0&amp;&amp;b.updateMatrix(),_.value.copy(b.matrix)}function i(b,_){_.color.getRGB(b.fogColor.value,XD(n)),_.isFog?(b.fogNear.value=_.near,b.fogFar.value=_.far):_.isFogExp2&amp;&amp;(b.fogDensity.value=_.density)}function r(b,_,T,w,E){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(b,_):_.isMeshToonMaterial?(s(b,_),p(b,_)):_.isMeshPhongMaterial?(s(b,_),f(b,_)):_.isMeshStandardMaterial?(s(b,_),m(b,_),_.isMeshPhysicalMaterial&amp;&amp;g(b,_,E)):_.isMeshMatcapMaterial?(s(b,_),v(b,_)):_.isMeshDepthMaterial?s(b,_):_.isMeshDistanceMaterial?(s(b,_),x(b,_)):_.isMeshNormalMaterial?s(b,_):_.isLineBasicMaterial?(o(b,_),_.isLineDashedMaterial&amp;&amp;l(b,_)):_.isPointsMaterial?u(b,_,T,w):_.isSpriteMaterial?h(b,_):_.isShadowMaterial?(b.color.value.copy(_.color),b.opacity.value=_.opacity):_.isShaderMaterial&amp;&amp;(_.uniformsNeedUpdate=!1)}function s(b,_){b.opacity.value=_.opacity,_.color&amp;&amp;b.diffuse.value.copy(_.color),_.emissive&amp;&amp;b.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&amp;&amp;(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.bumpMap&amp;&amp;(b.bumpMap.value=_.bumpMap,t(_.bumpMap,b.bumpMapTransform),b.bumpScale.value=_.bumpScale,_.side===xr&amp;&amp;(b.bumpScale.value*=-1)),_.normalMap&amp;&amp;(b.normalMap.value=_.normalMap,t(_.normalMap,b.normalMapTransform),b.normalScale.value.copy(_.normalScale),_.side===xr&amp;&amp;b.normalScale.value.negate()),_.displacementMap&amp;&amp;(b.displacementMap.value=_.displacementMap,t(_.displacementMap,b.displacementMapTransform),b.displacementScale.value=_.displacementScale,b.displacementBias.value=_.displacementBias),_.emissiveMap&amp;&amp;(b.emissiveMap.value=_.emissiveMap,t(_.emissiveMap,b.emissiveMapTransform)),_.specularMap&amp;&amp;(b.specularMap.value=_.specularMap,t(_.specularMap,b.specularMapTransform)),_.alphaTest&gt;0&amp;&amp;(b.alphaTest.value=_.alphaTest);const T=e.get(_),w=T.envMap,E=T.envMapRotation;w&amp;&amp;(b.envMap.value=w,Ql.copy(E),Ql.x*=-1,Ql.y*=-1,Ql.z*=-1,w.isCubeTexture&amp;&amp;w.isRenderTargetTexture===!1&amp;&amp;(Ql.y*=-1,Ql.z*=-1),b.envMapRotation.value.setFromMatrix4(z8.makeRotationFromEuler(Ql)),b.flipEnvMap.value=w.isCubeTexture&amp;&amp;w.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=_.reflectivity,b.ior.value=_.ior,b.refractionRatio.value=_.refractionRatio),_.lightMap&amp;&amp;(b.lightMap.value=_.lightMap,b.lightMapIntensity.value=_.lightMapIntensity,t(_.lightMap,b.lightMapTransform)),_.aoMap&amp;&amp;(b.aoMap.value=_.aoMap,b.aoMapIntensity.value=_.aoMapIntensity,t(_.aoMap,b.aoMapTransform))}function o(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.mapTransform))}function l(b,_){b.dashSize.value=_.dashSize,b.totalSize.value=_.dashSize+_.gapSize,b.scale.value=_.scale}function u(b,_,T,w){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.size.value=_.size*T,b.scale.value=w*.5,_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.uvTransform)),_.alphaMap&amp;&amp;(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest&gt;0&amp;&amp;(b.alphaTest.value=_.alphaTest)}function h(b,_){b.diffuse.value.copy(_.color),b.opacity.value=_.opacity,b.rotation.value=_.rotation,_.map&amp;&amp;(b.map.value=_.map,t(_.map,b.mapTransform)),_.alphaMap&amp;&amp;(b.alphaMap.value=_.alphaMap,t(_.alphaMap,b.alphaMapTransform)),_.alphaTest&gt;0&amp;&amp;(b.alphaTest.value=_.alphaTest)}function f(b,_){b.specular.value.copy(_.specular),b.shininess.value=Math.max(_.shininess,1e-4)}function p(b,_){_.gradientMap&amp;&amp;(b.gradientMap.value=_.gradientMap)}function m(b,_){b.metalness.value=_.metalness,_.metalnessMap&amp;&amp;(b.metalnessMap.value=_.metalnessMap,t(_.metalnessMap,b.metalnessMapTransform)),b.roughness.value=_.roughness,_.roughnessMap&amp;&amp;(b.roughnessMap.value=_.roughnessMap,t(_.roughnessMap,b.roughnessMapTransform)),_.envMap&amp;&amp;(b.envMapIntensity.value=_.envMapIntensity)}function g(b,_,T){b.ior.value=_.ior,_.sheen&gt;0&amp;&amp;(b.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),b.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&amp;&amp;(b.sheenColorMap.value=_.sheenColorMap,t(_.sheenColorMap,b.sheenColorMapTransform)),_.sheenRoughnessMap&amp;&amp;(b.sheenRoughnessMap.value=_.sheenRoughnessMap,t(_.sheenRoughnessMap,b.sheenRoughnessMapTransform))),_.clearcoat&gt;0&amp;&amp;(b.clearcoat.value=_.clearcoat,b.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&amp;&amp;(b.clearcoatMap.value=_.clearcoatMap,t(_.clearcoatMap,b.clearcoatMapTransform)),_.clearcoatRoughnessMap&amp;&amp;(b.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,t(_.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&amp;&amp;(b.clearcoatNormalMap.value=_.clearcoatNormalMap,t(_.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===xr&amp;&amp;b.clearcoatNormalScale.value.negate())),_.dispersion&gt;0&amp;&amp;(b.dispersion.value=_.dispersion),_.iridescence&gt;0&amp;&amp;(b.iridescence.value=_.iridescence,b.iridescenceIOR.value=_.iridescenceIOR,b.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&amp;&amp;(b.iridescenceMap.value=_.iridescenceMap,t(_.iridescenceMap,b.iridescenceMapTransform)),_.iridescenceThicknessMap&amp;&amp;(b.iridescenceThicknessMap.value=_.iridescenceThicknessMap,t(_.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),_.transmission&gt;0&amp;&amp;(b.transmission.value=_.transmission,b.transmissionSamplerMap.value=T.texture,b.transmissionSamplerSize.value.set(T.width,T.height),_.transmissionMap&amp;&amp;(b.transmissionMap.value=_.transmissionMap,t(_.transmissionMap,b.transmissionMapTransform)),b.thickness.value=_.thickness,_.thicknessMap&amp;&amp;(b.thicknessMap.value=_.thicknessMap,t(_.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=_.attenuationDistance,b.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy&gt;0&amp;&amp;(b.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&amp;&amp;(b.anisotropyMap.value=_.anisotropyMap,t(_.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=_.specularIntensity,b.specularColor.value.copy(_.specularColor),_.specularColorMap&amp;&amp;(b.specularColorMap.value=_.specularColorMap,t(_.specularColorMap,b.specularColorMapTransform)),_.specularIntensityMap&amp;&amp;(b.specularIntensityMap.value=_.specularIntensityMap,t(_.specularIntensityMap,b.specularIntensityMapTransform))}function v(b,_){_.matcap&amp;&amp;(b.matcap.value=_.matcap)}function x(b,_){const T=e.get(_).light;b.referencePosition.value.setFromMatrixPosition(T.matrixWorld),b.nearDistance.value=T.shadow.camera.near,b.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function H8(n,e,t,i){let r={},s={},o=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(T,w){const E=w.program;i.uniformBlockBinding(T,E)}function h(T,w){let E=r[T.id];E===void 0&amp;&amp;(v(T),E=f(T),r[T.id]=E,T.addEventListener(&quot;dispose&quot;,b));const R=w.program;i.updateUBOMapping(T,R);const N=e.render.frame;s[T.id]!==N&amp;&amp;(m(T),s[T.id]=N)}function f(T){const w=p();T.__bindingPointIndex=w;const E=n.createBuffer(),R=T.__size,N=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,R,N),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,E),E}function p(){for(let T=0;T&lt;l;T++)if(o.indexOf(T)===-1)return o.push(T),T;return console.error(&quot;THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.&quot;),0}function m(T){const w=r[T.id],E=T.uniforms,R=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let N=0,A=E.length;N&lt;A;N++){const D=Array.isArray(E[N])?E[N]:[E[N]];for(let C=0,O=D.length;C&lt;O;C++){const L=D[C];if(g(L,N,C,R)===!0){const V=L.__offset,Z=Array.isArray(L.value)?L.value:[L.value];let z=0;for(let K=0;K&lt;Z.length;K++){const I=Z[K],j=x(I);typeof I==&quot;number&quot;||typeof I==&quot;boolean&quot;?(L.__data[0]=I,n.bufferSubData(n.UNIFORM_BUFFER,V+z,L.__data)):I.isMatrix3?(L.__data[0]=I.elements[0],L.__data[1]=I.elements[1],L.__data[2]=I.elements[2],L.__data[3]=0,L.__data[4]=I.elements[3],L.__data[5]=I.elements[4],L.__data[6]=I.elements[5],L.__data[7]=0,L.__data[8]=I.elements[6],L.__data[9]=I.elements[7],L.__data[10]=I.elements[8],L.__data[11]=0):(I.toArray(L.__data,z),z+=j.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,V,L.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(T,w,E,R){const N=T.value,A=w+&quot;_&quot;+E;if(R[A]===void 0)return typeof N==&quot;number&quot;||typeof N==&quot;boolean&quot;?R[A]=N:R[A]=N.clone(),!0;{const D=R[A];if(typeof N==&quot;number&quot;||typeof N==&quot;boolean&quot;){if(D!==N)return R[A]=N,!0}else if(D.equals(N)===!1)return D.copy(N),!0}return!1}function v(T){const w=T.uniforms;let E=0;const R=16;for(let A=0,D=w.length;A&lt;D;A++){const C=Array.isArray(w[A])?w[A]:[w[A]];for(let O=0,L=C.length;O&lt;L;O++){const V=C[O],Z=Array.isArray(V.value)?V.value:[V.value];for(let z=0,K=Z.length;z&lt;K;z++){const I=Z[z],j=x(I),G=E%R,ee=G%j.boundary,F=G+ee;E+=ee,F!==0&amp;&amp;R-F&lt;j.storage&amp;&amp;(E+=R-F),V.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=E,E+=j.storage}}}const N=E%R;return N&gt;0&amp;&amp;(E+=R-N),T.__size=E,T.__cache={},this}function x(T){const w={boundary:0,storage:0};return typeof T==&quot;number&quot;||typeof T==&quot;boolean&quot;?(w.boundary=4,w.storage=4):T.isVector2?(w.boundary=8,w.storage=8):T.isVector3||T.isColor?(w.boundary=16,w.storage=12):T.isVector4?(w.boundary=16,w.storage=16):T.isMatrix3?(w.boundary=48,w.storage=48):T.isMatrix4?(w.boundary=64,w.storage=64):T.isTexture?console.warn(&quot;THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.&quot;):console.warn(&quot;THREE.WebGLRenderer: Unsupported uniform value type.&quot;,T),w}function b(T){const w=T.target;w.removeEventListener(&quot;dispose&quot;,b);const E=o.indexOf(w.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function _(){for(const T in r)n.deleteBuffer(r[T]);o=[],r={},s={}}return{bind:u,update:h,dispose:_}}class jN{constructor(e={}){const{canvas:t=GD(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:f=&quot;default&quot;,failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext&lt;&quot;u&quot;&amp;&amp;i instanceof WebGLRenderingContext)throw new Error(&quot;THREE.WebGLRenderer: WebGL 1 is not supported since r163.&quot;);g=i.getContextAttributes().alpha}else g=o;const v=new Uint32Array(4),x=new Int32Array(4);let b=null,_=null;const T=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ca,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const E=this;let R=!1;this._outputColorSpace=Nn;let N=0,A=0,D=null,C=-1,O=null;const L=new yn,V=new yn;let Z=null;const z=new $e(0);let K=0,I=t.width,j=t.height,G=1,ee=null,F=null;const ne=new yn(0,0,I,j),le=new yn(0,0,I,j);let ce=!1;const ie=new Th;let oe=!1,ae=!1;const ue=new yt,ve=new yt,He=new Y,Xe=new yn,lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let We=!1;function Ye(){return D===null?G:1}let Q=i;function Ve(q,fe){return t.getContext(q,fe)}try{const q={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:p};if(&quot;setAttribute&quot;in t&amp;&amp;t.setAttribute(&quot;data-engine&quot;,`three.js r${Q0}`),t.addEventListener(&quot;webglcontextlost&quot;,Pe,!1),t.addEventListener(&quot;webglcontextrestored&quot;,st,!1),t.addEventListener(&quot;webglcontextcreationerror&quot;,Qe,!1),Q===null){const fe=&quot;webgl2&quot;;if(Q=Ve(fe,q),Q===null)throw Ve(fe)?new Error(&quot;Error creating WebGL context with your selected attributes.&quot;):new Error(&quot;Error creating WebGL context.&quot;)}}catch(q){throw console.error(&quot;THREE.WebGLRenderer: &quot;+q.message),q}let Le,Fe,Ne,mt,ze,te,H,pe,Ce,Ue,Me,Ze,qe,ut,Ct,je,ht,St,Rt,rt,Gt,It,gn,de;function tt(){Le=new QV(Q),Le.init(),It=new GN(Q,Le),Fe=new XV(Q,Le,e,It),Ne=new I8(Q,Le),Fe.reverseDepthBuffer&amp;&amp;m&amp;&amp;Ne.buffers.depth.setReversed(!0),mt=new n5(Q),ze=new b8,te=new P8(Q,Le,Ne,ze,Fe,It,mt),H=new YV(E),pe=new JV(E),Ce=new l4(Q),gn=new jV(Q,Ce),Ue=new e5(Q,Ce,mt,gn),Me=new r5(Q,Ue,Ce,mt),Rt=new i5(Q,Fe,te),je=new qV(ze),Ze=new v8(E,H,pe,Le,Fe,gn,je),qe=new B8(E,ze),ut=new S8,Ct=new C8(Le),St=new GV(E,H,pe,Ne,Me,g,u),ht=new D8(E,Me,Fe),de=new H8(Q,mt,Fe,Ne),rt=new WV(Q,Le,mt),Gt=new t5(Q,Le,mt),mt.programs=Ze.programs,E.capabilities=Fe,E.extensions=Le,E.properties=ze,E.renderLists=ut,E.shadowMap=ht,E.state=Ne,E.info=mt}tt();const Ae=new F8(E,Q);this.xr=Ae,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const q=Le.get(&quot;WEBGL_lose_context&quot;);q&amp;&amp;q.loseContext()},this.forceContextRestore=function(){const q=Le.get(&quot;WEBGL_lose_context&quot;);q&amp;&amp;q.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(q){q!==void 0&amp;&amp;(G=q,this.setSize(I,j,!1))},this.getSize=function(q){return q.set(I,j)},this.setSize=function(q,fe,be=!0){if(Ae.isPresenting){console.warn(&quot;THREE.WebGLRenderer: Can&#x27;t change size while VR device is presenting.&quot;);return}I=q,j=fe,t.width=Math.floor(q*G),t.height=Math.floor(fe*G),be===!0&amp;&amp;(t.style.width=q+&quot;px&quot;,t.style.height=fe+&quot;px&quot;),this.setViewport(0,0,q,fe)},this.getDrawingBufferSize=function(q){return q.set(I*G,j*G).floor()},this.setDrawingBufferSize=function(q,fe,be){I=q,j=fe,G=be,t.width=Math.floor(q*be),t.height=Math.floor(fe*be),this.setViewport(0,0,q,fe)},this.getCurrentViewport=function(q){return q.copy(L)},this.getViewport=function(q){return q.copy(ne)},this.setViewport=function(q,fe,be,we){q.isVector4?ne.set(q.x,q.y,q.z,q.w):ne.set(q,fe,be,we),Ne.viewport(L.copy(ne).multiplyScalar(G).round())},this.getScissor=function(q){return q.copy(le)},this.setScissor=function(q,fe,be,we){q.isVector4?le.set(q.x,q.y,q.z,q.w):le.set(q,fe,be,we),Ne.scissor(V.copy(le).multiplyScalar(G).round())},this.getScissorTest=function(){return ce},this.setScissorTest=function(q){Ne.setScissorTest(ce=q)},this.setOpaqueSort=function(q){ee=q},this.setTransparentSort=function(q){F=q},this.getClearColor=function(q){return q.copy(St.getClearColor())},this.setClearColor=function(){St.setClearColor(...arguments)},this.getClearAlpha=function(){return St.getClearAlpha()},this.setClearAlpha=function(){St.setClearAlpha(...arguments)},this.clear=function(q=!0,fe=!0,be=!0){let we=0;if(q){let me=!1;if(D!==null){const Ge=D.texture.format;me=Ge===oy||Ge===sy||Ge===jd}if(me){const Ge=D.texture.type,Je=Ge===es||Ge===da||Ge===rh||Ge===sh||Ge===iy||Ge===ry,et=St.getClearColor(),ft=St.getClearAlpha(),Ot=et.r,Et=et.g,bt=et.b;Je?(v[0]=Ot,v[1]=Et,v[2]=bt,v[3]=ft,Q.clearBufferuiv(Q.COLOR,0,v)):(x[0]=Ot,x[1]=Et,x[2]=bt,x[3]=ft,Q.clearBufferiv(Q.COLOR,0,x))}else we|=Q.COLOR_BUFFER_BIT}fe&amp;&amp;(we|=Q.DEPTH_BUFFER_BIT),be&amp;&amp;(we|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener(&quot;webglcontextlost&quot;,Pe,!1),t.removeEventListener(&quot;webglcontextrestored&quot;,st,!1),t.removeEventListener(&quot;webglcontextcreationerror&quot;,Qe,!1),St.dispose(),ut.dispose(),Ct.dispose(),ze.dispose(),H.dispose(),pe.dispose(),Me.dispose(),gn.dispose(),de.dispose(),Ze.dispose(),Ae.dispose(),Ae.removeEventListener(&quot;sessionstart&quot;,Zn),Ae.removeEventListener(&quot;sessionend&quot;,pi),Hi.stop()};function Pe(q){q.preventDefault(),console.log(&quot;THREE.WebGLRenderer: Context Lost.&quot;),R=!0}function st(){console.log(&quot;THREE.WebGLRenderer: Context Restored.&quot;),R=!1;const q=mt.autoReset,fe=ht.enabled,be=ht.autoUpdate,we=ht.needsUpdate,me=ht.type;tt(),mt.autoReset=q,ht.enabled=fe,ht.autoUpdate=be,ht.needsUpdate=we,ht.type=me}function Qe(q){console.error(&quot;THREE.WebGLRenderer: A WebGL context could not be created. Reason: &quot;,q.statusMessage)}function Ut(q){const fe=q.target;fe.removeEventListener(&quot;dispose&quot;,Ut),wn(fe)}function wn(q){jn(q),ze.remove(q)}function jn(q){const fe=ze.get(q).programs;fe!==void 0&amp;&amp;(fe.forEach(function(be){Ze.releaseProgram(be)}),q.isShaderMaterial&amp;&amp;Ze.releaseShaderCache(q))}this.renderBufferDirect=function(q,fe,be,we,me,Ge){fe===null&amp;&amp;(fe=lt);const Je=me.isMesh&amp;&amp;me.matrixWorld.determinant()&lt;0,et=Os(q,fe,be,we,me);Ne.setMaterial(we,Je);let ft=be.index,Ot=1;if(we.wireframe===!0){if(ft=Ue.getWireframeAttribute(be),ft===void 0)return;Ot=2}const Et=be.drawRange,bt=be.attributes.position;let Bt=Et.start*Ot,un=(Et.start+Et.count)*Ot;Ge!==null&amp;&amp;(Bt=Math.max(Bt,Ge.start*Ot),un=Math.min(un,(Ge.start+Ge.count)*Ot)),ft!==null?(Bt=Math.max(Bt,0),un=Math.min(un,ft.count)):bt!=null&amp;&amp;(Bt=Math.max(Bt,0),un=Math.min(un,bt.count));const In=un-Bt;if(In&lt;0||In===1/0)return;gn.setup(me,we,et,be,ft);let Qt,$t=rt;if(ft!==null&amp;&amp;(Qt=Ce.get(ft),$t=Gt,$t.setIndex(Qt)),me.isMesh)we.wireframe===!0?(Ne.setLineWidth(we.wireframeLinewidth*Ye()),$t.setMode(Q.LINES)):$t.setMode(Q.TRIANGLES);else if(me.isLine){let wt=we.linewidth;wt===void 0&amp;&amp;(wt=1),Ne.setLineWidth(wt*Ye()),me.isLineSegments?$t.setMode(Q.LINES):me.isLineLoop?$t.setMode(Q.LINE_LOOP):$t.setMode(Q.LINE_STRIP)}else me.isPoints?$t.setMode(Q.POINTS):me.isSprite&amp;&amp;$t.setMode(Q.TRIANGLES);if(me.isBatchedMesh)if(me._multiDrawInstances!==null)Rg(&quot;THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.&quot;),$t.renderMultiDrawInstances(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount,me._multiDrawInstances);else if(Le.get(&quot;WEBGL_multi_draw&quot;))$t.renderMultiDraw(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount);else{const wt=me._multiDrawStarts,Hn=me._multiDrawCounts,rn=me._multiDrawCount,Jn=ft?Ce.get(ft).bytesPerElement:1,Tn=ze.get(we).currentProgram.getUniforms();for(let vn=0;vn&lt;rn;vn++)Tn.setValue(Q,&quot;_gl_DrawID&quot;,vn),$t.render(wt[vn]/Jn,Hn[vn])}else if(me.isInstancedMesh)$t.renderInstances(Bt,In,me.count);else if(be.isInstancedBufferGeometry){const wt=be._maxInstanceCount!==void 0?be._maxInstanceCount:1/0,Hn=Math.min(be.instanceCount,wt);$t.renderInstances(Bt,In,Hn)}else $t.render(Bt,In)};function zt(q,fe,be){q.transparent===!0&amp;&amp;q.side===Ki&amp;&amp;q.forceSinglePass===!1?(q.side=xr,q.needsUpdate=!0,os(q,fe,be),q.side=Qr,q.needsUpdate=!0,os(q,fe,be),q.side=Ki):os(q,fe,be)}this.compile=function(q,fe,be=null){be===null&amp;&amp;(be=q),_=Ct.get(be),_.init(fe),w.push(_),be.traverseVisible(function(me){me.isLight&amp;&amp;me.layers.test(fe.layers)&amp;&amp;(_.pushLight(me),me.castShadow&amp;&amp;_.pushShadow(me))}),q!==be&amp;&amp;q.traverseVisible(function(me){me.isLight&amp;&amp;me.layers.test(fe.layers)&amp;&amp;(_.pushLight(me),me.castShadow&amp;&amp;_.pushShadow(me))}),_.setupLights();const we=new Set;return q.traverse(function(me){if(!(me.isMesh||me.isPoints||me.isLine||me.isSprite))return;const Ge=me.material;if(Ge)if(Array.isArray(Ge))for(let Je=0;Je&lt;Ge.length;Je++){const et=Ge[Je];zt(et,be,me),we.add(et)}else zt(Ge,be,me),we.add(Ge)}),_=w.pop(),we},this.compileAsync=function(q,fe,be=null){const we=this.compile(q,fe,be);return new Promise(me=&gt;{function Ge(){if(we.forEach(function(Je){ze.get(Je).currentProgram.isReady()&amp;&amp;we.delete(Je)}),we.size===0){me(q);return}setTimeout(Ge,10)}Le.get(&quot;KHR_parallel_shader_compile&quot;)!==null?Ge():setTimeout(Ge,10)})};let Bi=null;function oi(q){Bi&amp;&amp;Bi(q)}function Zn(){Hi.stop()}function pi(){Hi.start()}const Hi=new FN;Hi.setAnimationLoop(oi),typeof self&lt;&quot;u&quot;&amp;&amp;Hi.setContext(self),this.setAnimationLoop=function(q){Bi=q,Ae.setAnimationLoop(q),q===null?Hi.stop():Hi.start()},Ae.addEventListener(&quot;sessionstart&quot;,Zn),Ae.addEventListener(&quot;sessionend&quot;,pi),this.render=function(q,fe){if(fe!==void 0&amp;&amp;fe.isCamera!==!0){console.error(&quot;THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.&quot;);return}if(R===!0)return;if(q.matrixWorldAutoUpdate===!0&amp;&amp;q.updateMatrixWorld(),fe.parent===null&amp;&amp;fe.matrixWorldAutoUpdate===!0&amp;&amp;fe.updateMatrixWorld(),Ae.enabled===!0&amp;&amp;Ae.isPresenting===!0&amp;&amp;(Ae.cameraAutoUpdate===!0&amp;&amp;Ae.updateCamera(fe),fe=Ae.getCamera()),q.isScene===!0&amp;&amp;q.onBeforeRender(E,q,fe,D),_=Ct.get(q,w.length),_.init(fe),w.push(_),ve.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse),ie.setFromProjectionMatrix(ve),ae=this.localClippingEnabled,oe=je.init(this.clippingPlanes,ae),b=ut.get(q,T.length),b.init(),T.push(b),Ae.enabled===!0&amp;&amp;Ae.isPresenting===!0){const Ge=E.xr.getDepthSensingMesh();Ge!==null&amp;&amp;Cs(Ge,fe,-1/0,E.sortObjects)}Cs(q,fe,0,E.sortObjects),b.finish(),E.sortObjects===!0&amp;&amp;b.sort(ee,F),We=Ae.enabled===!1||Ae.isPresenting===!1||Ae.hasDepthSensing()===!1,We&amp;&amp;St.addToRenderList(b,q),this.info.render.frame++,oe===!0&amp;&amp;je.beginShadows();const be=_.state.shadowsArray;ht.render(be,q,fe),oe===!0&amp;&amp;je.endShadows(),this.info.autoReset===!0&amp;&amp;this.info.reset();const we=b.opaque,me=b.transmissive;if(_.setupLights(),fe.isArrayCamera){const Ge=fe.cameras;if(me.length&gt;0)for(let Je=0,et=Ge.length;Je&lt;et;Je++){const ft=Ge[Je];Co(we,me,q,ft)}We&amp;&amp;St.render(q);for(let Je=0,et=Ge.length;Je&lt;et;Je++){const ft=Ge[Je];ya(b,q,ft,ft.viewport)}}else me.length&gt;0&amp;&amp;Co(we,me,q,fe),We&amp;&amp;St.render(q),ya(b,q,fe);D!==null&amp;&amp;A===0&amp;&amp;(te.updateMultisampleRenderTarget(D),te.updateRenderTargetMipmap(D)),q.isScene===!0&amp;&amp;q.onAfterRender(E,q,fe),gn.resetDefaultState(),C=-1,O=null,w.pop(),w.length&gt;0?(_=w[w.length-1],oe===!0&amp;&amp;je.setGlobalState(E.clippingPlanes,_.state.camera)):_=null,T.pop(),T.length&gt;0?b=T[T.length-1]:b=null};function Cs(q,fe,be,we){if(q.visible===!1)return;if(q.layers.test(fe.layers)){if(q.isGroup)be=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&amp;&amp;q.update(fe);else if(q.isLight)_.pushLight(q),q.castShadow&amp;&amp;_.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||ie.intersectsSprite(q)){we&amp;&amp;Xe.setFromMatrixPosition(q.matrixWorld).applyMatrix4(ve);const Je=Me.update(q),et=q.material;et.visible&amp;&amp;b.push(q,Je,et,be,Xe.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&amp;&amp;(!q.frustumCulled||ie.intersectsObject(q))){const Je=Me.update(q),et=q.material;if(we&amp;&amp;(q.boundingSphere!==void 0?(q.boundingSphere===null&amp;&amp;q.computeBoundingSphere(),Xe.copy(q.boundingSphere.center)):(Je.boundingSphere===null&amp;&amp;Je.computeBoundingSphere(),Xe.copy(Je.boundingSphere.center)),Xe.applyMatrix4(q.matrixWorld).applyMatrix4(ve)),Array.isArray(et)){const ft=Je.groups;for(let Ot=0,Et=ft.length;Ot&lt;Et;Ot++){const bt=ft[Ot],Bt=et[bt.materialIndex];Bt&amp;&amp;Bt.visible&amp;&amp;b.push(q,Je,Bt,be,Xe.z,bt)}}else et.visible&amp;&amp;b.push(q,Je,et,be,Xe.z,null)}}const Ge=q.children;for(let Je=0,et=Ge.length;Je&lt;et;Je++)Cs(Ge[Je],fe,be,we)}function ya(q,fe,be,we){const me=q.opaque,Ge=q.transmissive,Je=q.transparent;_.setupLightsView(be),oe===!0&amp;&amp;je.setGlobalState(E.clippingPlanes,be),we&amp;&amp;Ne.viewport(L.copy(we)),me.length&gt;0&amp;&amp;Rs(me,fe,be),Ge.length&gt;0&amp;&amp;Rs(Ge,fe,be),Je.length&gt;0&amp;&amp;Rs(Je,fe,be),Ne.buffers.depth.setTest(!0),Ne.buffers.depth.setMask(!0),Ne.buffers.color.setMask(!0),Ne.setPolygonOffset(!1)}function Co(q,fe,be,we){if((be.isScene===!0?be.overrideMaterial:null)!==null)return;_.state.transmissionRenderTarget[we.id]===void 0&amp;&amp;(_.state.transmissionRenderTarget[we.id]=new Js(1,1,{generateMipmaps:!0,type:Le.has(&quot;EXT_color_buffer_half_float&quot;)||Le.has(&quot;EXT_color_buffer_float&quot;)?wh:es,minFilter:Zr,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Zt.workingColorSpace}));const Ge=_.state.transmissionRenderTarget[we.id],Je=we.viewport||L;Ge.setSize(Je.z*E.transmissionResolutionScale,Je.w*E.transmissionResolutionScale);const et=E.getRenderTarget();E.setRenderTarget(Ge),E.getClearColor(z),K=E.getClearAlpha(),K&lt;1&amp;&amp;E.setClearColor(16777215,.5),E.clear(),We&amp;&amp;St.render(be);const ft=E.toneMapping;E.toneMapping=ca;const Ot=we.viewport;if(we.viewport!==void 0&amp;&amp;(we.viewport=void 0),_.setupLightsView(we),oe===!0&amp;&amp;je.setGlobalState(E.clippingPlanes,we),Rs(q,be,we),te.updateMultisampleRenderTarget(Ge),te.updateRenderTargetMipmap(Ge),Le.has(&quot;WEBGL_multisampled_render_to_texture&quot;)===!1){let Et=!1;for(let bt=0,Bt=fe.length;bt&lt;Bt;bt++){const un=fe[bt],In=un.object,Qt=un.geometry,$t=un.material,wt=un.group;if($t.side===Ki&amp;&amp;In.layers.test(we.layers)){const Hn=$t.side;$t.side=xr,$t.needsUpdate=!0,kr(In,be,we,Qt,$t,wt),$t.side=Hn,$t.needsUpdate=!0,Et=!0}}Et===!0&amp;&amp;(te.updateMultisampleRenderTarget(Ge),te.updateRenderTargetMipmap(Ge))}E.setRenderTarget(et),E.setClearColor(z,K),Ot!==void 0&amp;&amp;(we.viewport=Ot),E.toneMapping=ft}function Rs(q,fe,be){const we=fe.isScene===!0?fe.overrideMaterial:null;for(let me=0,Ge=q.length;me&lt;Ge;me++){const Je=q[me],et=Je.object,ft=Je.geometry,Ot=Je.group;let Et=Je.material;Et.allowOverride===!0&amp;&amp;we!==null&amp;&amp;(Et=we),et.layers.test(be.layers)&amp;&amp;kr(et,fe,be,ft,Et,Ot)}}function kr(q,fe,be,we,me,Ge){q.onBeforeRender(E,fe,be,we,me,Ge),q.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),me.onBeforeRender(E,fe,be,we,q,Ge),me.transparent===!0&amp;&amp;me.side===Ki&amp;&amp;me.forceSinglePass===!1?(me.side=xr,me.needsUpdate=!0,E.renderBufferDirect(be,fe,we,me,q,Ge),me.side=Qr,me.needsUpdate=!0,E.renderBufferDirect(be,fe,we,me,q,Ge),me.side=Ki):E.renderBufferDirect(be,fe,we,me,q,Ge),q.onAfterRender(E,fe,be,we,me,Ge)}function os(q,fe,be){fe.isScene!==!0&amp;&amp;(fe=lt);const we=ze.get(q),me=_.state.lights,Ge=_.state.shadowsArray,Je=me.state.version,et=Ze.getParameters(q,me.state,Ge,fe,be),ft=Ze.getProgramCacheKey(et);let Ot=we.programs;we.environment=q.isMeshStandardMaterial?fe.environment:null,we.fog=fe.fog,we.envMap=(q.isMeshStandardMaterial?pe:H).get(q.envMap||we.environment),we.envMapRotation=we.environment!==null&amp;&amp;q.envMap===null?fe.environmentRotation:q.envMapRotation,Ot===void 0&amp;&amp;(q.addEventListener(&quot;dispose&quot;,Ut),Ot=new Map,we.programs=Ot);let Et=Ot.get(ft);if(Et!==void 0){if(we.currentProgram===Et&amp;&amp;we.lightsStateVersion===Je)return Er(q,et),Et}else et.uniforms=Ze.getUniforms(q),q.onBeforeCompile(et,E),Et=Ze.acquireProgram(et,ft),Ot.set(ft,Et),we.uniforms=et.uniforms;const bt=we.uniforms;return(!q.isShaderMaterial&amp;&amp;!q.isRawShaderMaterial||q.clipping===!0)&amp;&amp;(bt.clippingPlanes=je.uniform),Er(q,et),we.needsLights=Wn(q),we.lightsStateVersion=Je,we.needsLights&amp;&amp;(bt.ambientLightColor.value=me.state.ambient,bt.lightProbe.value=me.state.probe,bt.directionalLights.value=me.state.directional,bt.directionalLightShadows.value=me.state.directionalShadow,bt.spotLights.value=me.state.spot,bt.spotLightShadows.value=me.state.spotShadow,bt.rectAreaLights.value=me.state.rectArea,bt.ltc_1.value=me.state.rectAreaLTC1,bt.ltc_2.value=me.state.rectAreaLTC2,bt.pointLights.value=me.state.point,bt.pointLightShadows.value=me.state.pointShadow,bt.hemisphereLights.value=me.state.hemi,bt.directionalShadowMap.value=me.state.directionalShadowMap,bt.directionalShadowMatrix.value=me.state.directionalShadowMatrix,bt.spotShadowMap.value=me.state.spotShadowMap,bt.spotLightMatrix.value=me.state.spotLightMatrix,bt.spotLightMap.value=me.state.spotLightMap,bt.pointShadowMap.value=me.state.pointShadowMap,bt.pointShadowMatrix.value=me.state.pointShadowMatrix),we.currentProgram=Et,we.uniformsList=null,Et}function wr(q){if(q.uniformsList===null){const fe=q.currentProgram.getUniforms();q.uniformsList=Dg.seqWithValue(fe.seq,q.uniforms)}return q.uniformsList}function Er(q,fe){const be=ze.get(q);be.outputColorSpace=fe.outputColorSpace,be.batching=fe.batching,be.batchingColor=fe.batchingColor,be.instancing=fe.instancing,be.instancingColor=fe.instancingColor,be.instancingMorph=fe.instancingMorph,be.skinning=fe.skinning,be.morphTargets=fe.morphTargets,be.morphNormals=fe.morphNormals,be.morphColors=fe.morphColors,be.morphTargetsCount=fe.morphTargetsCount,be.numClippingPlanes=fe.numClippingPlanes,be.numIntersection=fe.numClipIntersection,be.vertexAlphas=fe.vertexAlphas,be.vertexTangents=fe.vertexTangents,be.toneMapping=fe.toneMapping}function Os(q,fe,be,we,me){fe.isScene!==!0&amp;&amp;(fe=lt),te.resetTextureUnits();const Ge=fe.fog,Je=we.isMeshStandardMaterial?fe.environment:null,et=D===null?E.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:fr,ft=(we.isMeshStandardMaterial?pe:H).get(we.envMap||Je),Ot=we.vertexColors===!0&amp;&amp;!!be.attributes.color&amp;&amp;be.attributes.color.itemSize===4,Et=!!be.attributes.tangent&amp;&amp;(!!we.normalMap||we.anisotropy&gt;0),bt=!!be.morphAttributes.position,Bt=!!be.morphAttributes.normal,un=!!be.morphAttributes.color;let In=ca;we.toneMapped&amp;&amp;(D===null||D.isXRRenderTarget===!0)&amp;&amp;(In=E.toneMapping);const Qt=be.morphAttributes.position||be.morphAttributes.normal||be.morphAttributes.color,$t=Qt!==void 0?Qt.length:0,wt=ze.get(we),Hn=_.state.lights;if(oe===!0&amp;&amp;(ae===!0||q!==O)){const ei=q===O&amp;&amp;we.id===C;je.setState(we,q,ei)}let rn=!1;we.version===wt.__version?(wt.needsLights&amp;&amp;wt.lightsStateVersion!==Hn.state.version||wt.outputColorSpace!==et||me.isBatchedMesh&amp;&amp;wt.batching===!1||!me.isBatchedMesh&amp;&amp;wt.batching===!0||me.isBatchedMesh&amp;&amp;wt.batchingColor===!0&amp;&amp;me.colorTexture===null||me.isBatchedMesh&amp;&amp;wt.batchingColor===!1&amp;&amp;me.colorTexture!==null||me.isInstancedMesh&amp;&amp;wt.instancing===!1||!me.isInstancedMesh&amp;&amp;wt.instancing===!0||me.isSkinnedMesh&amp;&amp;wt.skinning===!1||!me.isSkinnedMesh&amp;&amp;wt.skinning===!0||me.isInstancedMesh&amp;&amp;wt.instancingColor===!0&amp;&amp;me.instanceColor===null||me.isInstancedMesh&amp;&amp;wt.instancingColor===!1&amp;&amp;me.instanceColor!==null||me.isInstancedMesh&amp;&amp;wt.instancingMorph===!0&amp;&amp;me.morphTexture===null||me.isInstancedMesh&amp;&amp;wt.instancingMorph===!1&amp;&amp;me.morphTexture!==null||wt.envMap!==ft||we.fog===!0&amp;&amp;wt.fog!==Ge||wt.numClippingPlanes!==void 0&amp;&amp;(wt.numClippingPlanes!==je.numPlanes||wt.numIntersection!==je.numIntersection)||wt.vertexAlphas!==Ot||wt.vertexTangents!==Et||wt.morphTargets!==bt||wt.morphNormals!==Bt||wt.morphColors!==un||wt.toneMapping!==In||wt.morphTargetsCount!==$t)&amp;&amp;(rn=!0):(rn=!0,wt.__version=we.version);let Jn=wt.currentProgram;rn===!0&amp;&amp;(Jn=os(we,fe,me));let Tn=!1,vn=!1,Tr=!1;const Mn=Jn.getUniforms(),Ni=wt.uniforms;if(Ne.useProgram(Jn.program)&amp;&amp;(Tn=!0,vn=!0,Tr=!0),we.id!==C&amp;&amp;(C=we.id,vn=!0),Tn||O!==q){Ne.buffers.depth.getReversed()?(ue.copy(q.projectionMatrix),PF(ue),LF(ue),Mn.setValue(Q,&quot;projectionMatrix&quot;,ue)):Mn.setValue(Q,&quot;projectionMatrix&quot;,q.projectionMatrix),Mn.setValue(Q,&quot;viewMatrix&quot;,q.matrixWorldInverse);const ai=Mn.map.cameraPosition;ai!==void 0&amp;&amp;ai.setValue(Q,He.setFromMatrixPosition(q.matrixWorld)),Fe.logarithmicDepthBuffer&amp;&amp;Mn.setValue(Q,&quot;logDepthBufFC&quot;,2/(Math.log(q.far+1)/Math.LN2)),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&amp;&amp;Mn.setValue(Q,&quot;isOrthographic&quot;,q.isOrthographicCamera===!0),O!==q&amp;&amp;(O=q,vn=!0,Tr=!0)}if(me.isSkinnedMesh){Mn.setOptional(Q,me,&quot;bindMatrix&quot;),Mn.setOptional(Q,me,&quot;bindMatrixInverse&quot;);const ei=me.skeleton;ei&amp;&amp;(ei.boneTexture===null&amp;&amp;ei.computeBoneTexture(),Mn.setValue(Q,&quot;boneTexture&quot;,ei.boneTexture,te))}me.isBatchedMesh&amp;&amp;(Mn.setOptional(Q,me,&quot;batchingTexture&quot;),Mn.setValue(Q,&quot;batchingTexture&quot;,me._matricesTexture,te),Mn.setOptional(Q,me,&quot;batchingIdTexture&quot;),Mn.setValue(Q,&quot;batchingIdTexture&quot;,me._indirectTexture,te),Mn.setOptional(Q,me,&quot;batchingColorTexture&quot;),me._colorsTexture!==null&amp;&amp;Mn.setValue(Q,&quot;batchingColorTexture&quot;,me._colorsTexture,te));const Qn=be.morphAttributes;if((Qn.position!==void 0||Qn.normal!==void 0||Qn.color!==void 0)&amp;&amp;Rt.update(me,be,Jn),(vn||wt.receiveShadow!==me.receiveShadow)&amp;&amp;(wt.receiveShadow=me.receiveShadow,Mn.setValue(Q,&quot;receiveShadow&quot;,me.receiveShadow)),we.isMeshGouraudMaterial&amp;&amp;we.envMap!==null&amp;&amp;(Ni.envMap.value=ft,Ni.flipEnvMap.value=ft.isCubeTexture&amp;&amp;ft.isRenderTargetTexture===!1?-1:1),we.isMeshStandardMaterial&amp;&amp;we.envMap===null&amp;&amp;fe.environment!==null&amp;&amp;(Ni.envMapIntensity.value=fe.environmentIntensity),vn&amp;&amp;(Mn.setValue(Q,&quot;toneMappingExposure&quot;,E.toneMappingExposure),wt.needsLights&amp;&amp;as(Ni,Tr),Ge&amp;&amp;we.fog===!0&amp;&amp;qe.refreshFogUniforms(Ni,Ge),qe.refreshMaterialUniforms(Ni,we,G,j,_.state.transmissionRenderTarget[q.id]),Dg.upload(Q,wr(wt),Ni,te)),we.isShaderMaterial&amp;&amp;we.uniformsNeedUpdate===!0&amp;&amp;(Dg.upload(Q,wr(wt),Ni,te),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&amp;&amp;Mn.setValue(Q,&quot;center&quot;,me.center),Mn.setValue(Q,&quot;modelViewMatrix&quot;,me.modelViewMatrix),Mn.setValue(Q,&quot;normalMatrix&quot;,me.normalMatrix),Mn.setValue(Q,&quot;modelMatrix&quot;,me.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const ei=we.uniformsGroups;for(let ai=0,zr=ei.length;ai&lt;zr;ai++){const Ds=ei[ai];de.update(Ds,Jn),de.bind(Ds,Jn)}}return Jn}function as(q,fe){q.ambientLightColor.needsUpdate=fe,q.lightProbe.needsUpdate=fe,q.directionalLights.needsUpdate=fe,q.directionalLightShadows.needsUpdate=fe,q.pointLights.needsUpdate=fe,q.pointLightShadows.needsUpdate=fe,q.spotLights.needsUpdate=fe,q.spotLightShadows.needsUpdate=fe,q.rectAreaLights.needsUpdate=fe,q.hemisphereLights.needsUpdate=fe}function Wn(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&amp;&amp;q.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(q,fe,be){const we=ze.get(q);we.__autoAllocateDepthBuffer=q.resolveDepthBuffer===!1,we.__autoAllocateDepthBuffer===!1&amp;&amp;(we.__useRenderToTexture=!1),ze.get(q.texture).__webglTexture=fe,ze.get(q.depthTexture).__webglTexture=we.__autoAllocateDepthBuffer?void 0:be,we.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(q,fe){const be=ze.get(q);be.__webglFramebuffer=fe,be.__useDefaultFramebuffer=fe===void 0};const _a=Q.createFramebuffer();this.setRenderTarget=function(q,fe=0,be=0){D=q,N=fe,A=be;let we=!0,me=null,Ge=!1,Je=!1;if(q){const ft=ze.get(q);if(ft.__useDefaultFramebuffer!==void 0)Ne.bindFramebuffer(Q.FRAMEBUFFER,null),we=!1;else if(ft.__webglFramebuffer===void 0)te.setupRenderTarget(q);else if(ft.__hasExternalTextures)te.rebindTextures(q,ze.get(q.texture).__webglTexture,ze.get(q.depthTexture).__webglTexture);else if(q.depthBuffer){const bt=q.depthTexture;if(ft.__boundDepthTexture!==bt){if(bt!==null&amp;&amp;ze.has(bt)&amp;&amp;(q.width!==bt.image.width||q.height!==bt.image.height))throw new Error(&quot;WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.&quot;);te.setupDepthRenderbuffer(q)}}const Ot=q.texture;(Ot.isData3DTexture||Ot.isDataArrayTexture||Ot.isCompressedArrayTexture)&amp;&amp;(Je=!0);const Et=ze.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(Et[fe])?me=Et[fe][be]:me=Et[fe],Ge=!0):q.samples&gt;0&amp;&amp;te.useMultisampledRTT(q)===!1?me=ze.get(q).__webglMultisampledFramebuffer:Array.isArray(Et)?me=Et[be]:me=Et,L.copy(q.viewport),V.copy(q.scissor),Z=q.scissorTest}else L.copy(ne).multiplyScalar(G).floor(),V.copy(le).multiplyScalar(G).floor(),Z=ce;if(be!==0&amp;&amp;(me=_a),Ne.bindFramebuffer(Q.FRAMEBUFFER,me)&amp;&amp;we&amp;&amp;Ne.drawBuffers(q,me),Ne.viewport(L),Ne.scissor(V),Ne.setScissorTest(Z),Ge){const ft=ze.get(q.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+fe,ft.__webglTexture,be)}else if(Je){const ft=ze.get(q.texture),Ot=fe;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ft.__webglTexture,be,Ot)}else if(q!==null&amp;&amp;be!==0){const ft=ze.get(q.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,ft.__webglTexture,be)}C=-1},this.readRenderTargetPixels=function(q,fe,be,we,me,Ge,Je){if(!(q&amp;&amp;q.isWebGLRenderTarget)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.&quot;);return}let et=ze.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&amp;&amp;Je!==void 0&amp;&amp;(et=et[Je]),et){Ne.bindFramebuffer(Q.FRAMEBUFFER,et);try{const ft=q.texture,Ot=ft.format,Et=ft.type;if(!Fe.textureFormatReadable(Ot)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.&quot;);return}if(!Fe.textureTypeReadable(Et)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.&quot;);return}fe&gt;=0&amp;&amp;fe&lt;=q.width-we&amp;&amp;be&gt;=0&amp;&amp;be&lt;=q.height-me&amp;&amp;Q.readPixels(fe,be,we,me,It.convert(Ot),It.convert(Et),Ge)}finally{const ft=D!==null?ze.get(D).__webglFramebuffer:null;Ne.bindFramebuffer(Q.FRAMEBUFFER,ft)}}},this.readRenderTargetPixelsAsync=async function(q,fe,be,we,me,Ge,Je){if(!(q&amp;&amp;q.isWebGLRenderTarget))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.&quot;);let et=ze.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&amp;&amp;Je!==void 0&amp;&amp;(et=et[Je]),et)if(fe&gt;=0&amp;&amp;fe&lt;=q.width-we&amp;&amp;be&gt;=0&amp;&amp;be&lt;=q.height-me){Ne.bindFramebuffer(Q.FRAMEBUFFER,et);const ft=q.texture,Ot=ft.format,Et=ft.type;if(!Fe.textureFormatReadable(Ot))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.&quot;);if(!Fe.textureTypeReadable(Et))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.&quot;);const bt=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,bt),Q.bufferData(Q.PIXEL_PACK_BUFFER,Ge.byteLength,Q.STREAM_READ),Q.readPixels(fe,be,we,me,It.convert(Ot),It.convert(Et),0);const Bt=D!==null?ze.get(D).__webglFramebuffer:null;Ne.bindFramebuffer(Q.FRAMEBUFFER,Bt);const un=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),await IF(Q,un,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,bt),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,Ge),Q.deleteBuffer(bt),Q.deleteSync(un),Ge}else throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.&quot;)},this.copyFramebufferToTexture=function(q,fe=null,be=0){const we=Math.pow(2,-be),me=Math.floor(q.image.width*we),Ge=Math.floor(q.image.height*we),Je=fe!==null?fe.x:0,et=fe!==null?fe.y:0;te.setTexture2D(q,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,be,0,0,Je,et,me,Ge),Ne.unbindTexture()};const va=Q.createFramebuffer(),Fr=Q.createFramebuffer();this.copyTextureToTexture=function(q,fe,be=null,we=null,me=0,Ge=null){Ge===null&amp;&amp;(me!==0?(Rg(&quot;WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels.&quot;),Ge=me,me=0):Ge=0);let Je,et,ft,Ot,Et,bt,Bt,un,In;const Qt=q.isCompressedTexture?q.mipmaps[Ge]:q.image;if(be!==null)Je=be.max.x-be.min.x,et=be.max.y-be.min.y,ft=be.isBox3?be.max.z-be.min.z:1,Ot=be.min.x,Et=be.min.y,bt=be.isBox3?be.min.z:0;else{const Qn=Math.pow(2,-me);Je=Math.floor(Qt.width*Qn),et=Math.floor(Qt.height*Qn),q.isDataArrayTexture?ft=Qt.depth:q.isData3DTexture?ft=Math.floor(Qt.depth*Qn):ft=1,Ot=0,Et=0,bt=0}we!==null?(Bt=we.x,un=we.y,In=we.z):(Bt=0,un=0,In=0);const $t=It.convert(fe.format),wt=It.convert(fe.type);let Hn;fe.isData3DTexture?(te.setTexture3D(fe,0),Hn=Q.TEXTURE_3D):fe.isDataArrayTexture||fe.isCompressedArrayTexture?(te.setTexture2DArray(fe,0),Hn=Q.TEXTURE_2D_ARRAY):(te.setTexture2D(fe,0),Hn=Q.TEXTURE_2D),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,fe.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,fe.unpackAlignment);const rn=Q.getParameter(Q.UNPACK_ROW_LENGTH),Jn=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Tn=Q.getParameter(Q.UNPACK_SKIP_PIXELS),vn=Q.getParameter(Q.UNPACK_SKIP_ROWS),Tr=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Qt.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Qt.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Ot),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,Et),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,bt);const Mn=q.isDataArrayTexture||q.isData3DTexture,Ni=fe.isDataArrayTexture||fe.isData3DTexture;if(q.isDepthTexture){const Qn=ze.get(q),ei=ze.get(fe),ai=ze.get(Qn.__renderTarget),zr=ze.get(ei.__renderTarget);Ne.bindFramebuffer(Q.READ_FRAMEBUFFER,ai.__webglFramebuffer),Ne.bindFramebuffer(Q.DRAW_FRAMEBUFFER,zr.__webglFramebuffer);for(let Ds=0;Ds&lt;ft;Ds++)Mn&amp;&amp;(Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ze.get(q).__webglTexture,me,bt+Ds),Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ze.get(fe).__webglTexture,Ge,In+Ds)),Q.blitFramebuffer(Ot,Et,Je,et,Bt,un,Je,et,Q.DEPTH_BUFFER_BIT,Q.NEAREST);Ne.bindFramebuffer(Q.READ_FRAMEBUFFER,null),Ne.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else if(me!==0||q.isRenderTargetTexture||ze.has(q)){const Qn=ze.get(q),ei=ze.get(fe);Ne.bindFramebuffer(Q.READ_FRAMEBUFFER,va),Ne.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Fr);for(let ai=0;ai&lt;ft;ai++)Mn?Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Qn.__webglTexture,me,bt+ai):Q.framebufferTexture2D(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,Qn.__webglTexture,me),Ni?Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ei.__webglTexture,Ge,In+ai):Q.framebufferTexture2D(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,ei.__webglTexture,Ge),me!==0?Q.blitFramebuffer(Ot,Et,Je,et,Bt,un,Je,et,Q.COLOR_BUFFER_BIT,Q.NEAREST):Ni?Q.copyTexSubImage3D(Hn,Ge,Bt,un,In+ai,Ot,Et,Je,et):Q.copyTexSubImage2D(Hn,Ge,Bt,un,Ot,Et,Je,et);Ne.bindFramebuffer(Q.READ_FRAMEBUFFER,null),Ne.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else Ni?q.isDataTexture||q.isData3DTexture?Q.texSubImage3D(Hn,Ge,Bt,un,In,Je,et,ft,$t,wt,Qt.data):fe.isCompressedArrayTexture?Q.compressedTexSubImage3D(Hn,Ge,Bt,un,In,Je,et,ft,$t,Qt.data):Q.texSubImage3D(Hn,Ge,Bt,un,In,Je,et,ft,$t,wt,Qt):q.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,Ge,Bt,un,Je,et,$t,wt,Qt.data):q.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,Ge,Bt,un,Qt.width,Qt.height,$t,Qt.data):Q.texSubImage2D(Q.TEXTURE_2D,Ge,Bt,un,Je,et,$t,wt,Qt);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,rn),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Jn),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Tn),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,vn),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Tr),Ge===0&amp;&amp;fe.generateMipmaps&amp;&amp;Q.generateMipmap(Hn),Ne.unbindTexture()},this.copyTextureToTexture3D=function(q,fe,be=null,we=null,me=0){return Rg(&#x27;WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use &quot;copyTextureToTexture&quot; instead.&#x27;),this.copyTextureToTexture(q,fe,be,we,me)},this.initRenderTarget=function(q){ze.get(q).__webglFramebuffer===void 0&amp;&amp;te.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?te.setTextureCube(q,0):q.isData3DTexture?te.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?te.setTexture2DArray(q,0):te.setTexture2D(q,0),Ne.unbindTexture()},this.resetState=function(){N=0,A=0,D=null,Ne.reset(),gn.reset()},typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;observe&quot;,{detail:this}))}get coordinateSystem(){return Es}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Zt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Zt._getUnpackColorSpace()}}const V8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:wD,AddEquation:il,AddOperation:vD,AdditiveAnimationBlendMode:ow,AdditiveBlending:Qx,AgXToneMapping:TD,AlphaFormat:nw,AlwaysCompare:HD,AlwaysDepth:Xg,AlwaysStencilFunc:iS,AmbientLight:Fy,AnimationAction:NN,AnimationClip:ml,AnimationLoader:lB,AnimationMixer:IN,AnimationObjectGroup:NB,AnimationUtils:rB,ArcCurve:tN,ArrayCamera:RN,ArrowHelper:e4,AttachedBindMode:nS,Audio:ON,AudioAnalyser:SB,AudioContext:Dw,AudioListener:vB,AudioLoader:gB,AxesHelper:t4,BackSide:xr,BasicDepthPacking:ND,BasicShadowMap:Uk,BatchedMesh:QD,Bone:Yd,BooleanKeyframeTrack:Uc,Box2:HB,Box3:Ri,Box3Helper:JB,BoxGeometry:xl,BoxHelper:ZB,BufferAttribute:Jt,BufferGeometry:Lt,BufferGeometryLoader:AN,ByteType:QS,Cache:oa,Camera:hy,CameraHelper:$B,CanvasTexture:Mz,CapsuleGeometry:xy,CatmullRomCurve3:nN,CineonToneMapping:SD,CircleGeometry:Sy,ClampToEdgeWrapping:rr,Clock:Nw,Color:$e,ColorKeyframeTrack:Aw,ColorManagement:Zt,CompressedArrayTexture:Ez,CompressedCubeTexture:Tz,CompressedTexture:vy,CompressedTextureLoader:cB,ConeGeometry:Kd,ConstantAlphaFactor:gD,ConstantColorFactor:pD,Controls:kN,CubeCamera:YD,CubeReflectionMapping:fa,CubeRefractionMapping:fl,CubeTexture:Xd,CubeTextureLoader:uB,CubeUVReflectionMapping:Sh,CubicBezierCurve:yw,CubicBezierCurve3:iN,CubicInterpolant:_N,CullFaceBack:Jx,CullFaceFront:J2,CullFaceFrontBack:Lk,CullFaceNone:Z2,Curve:Qs,CurvePath:sN,CustomBlending:eD,CustomToneMapping:ED,CylinderGeometry:Mh,Cylindrical:BB,Data3DTexture:cy,DataArrayTexture:Wd,DataTexture:$s,DataTextureLoader:xN,DataUtils:$F,DecrementStencilOp:qk,DecrementWrapStencilOp:Kk,DefaultLoadingManager:Rw,DepthArrayTexture:Az,DepthFormat:oh,DepthStencilFormat:ah,DepthTexture:by,DetachedBindMode:AD,DirectionalLight:Zd,DirectionalLightHelper:KB,DiscreteInterpolant:vN,DodecahedronGeometry:wy,DoubleSide:Ki,DstAlphaFactor:cD,DstColorFactor:hD,DynamicCopyUsage:uF,DynamicDrawUsage:rF,DynamicReadUsage:aF,EdgesGeometry:mw,EllipseCurve:Ey,EqualCompare:kD,EqualDepth:Yg,EqualStencilFunc:Qk,EquirectangularReflectionMapping:gd,EquirectangularRefractionMapping:yd,Euler:Sr,EventDispatcher:To,ExtrudeGeometry:Ty,FileLoader:ns,Float16BufferAttribute:iz,Float32BufferAttribute:ct,FloatType:Pr,Fog:dy,FogExp2:fy,FramebufferTexture:wz,FrontSide:Qr,Frustum:Th,FrustumArray:gy,GLBufferAttribute:zB,GLSL1:fF,GLSL3:rS,GreaterCompare:FD,GreaterDepth:$g,GreaterEqualCompare:BD,GreaterEqualDepth:Kg,GreaterEqualStencilFunc:iF,GreaterStencilFunc:tF,GridHelper:UN,Group:br,HalfFloatType:wh,HemisphereLight:SN,HemisphereLightHelper:qB,IcosahedronGeometry:My,ImageBitmapLoader:CN,ImageLoader:Md,ImageUtils:jD,IncrementStencilOp:Xk,IncrementWrapStencilOp:Yk,InstancedBufferAttribute:Mc,InstancedBufferGeometry:MN,InstancedInterleavedBuffer:FB,InstancedMesh:dw,Int16BufferAttribute:tz,Int32BufferAttribute:nz,Int8BufferAttribute:JF,IntType:ny,InterleavedBuffer:qd,InterleavedBufferAttribute:dl,Interpolant:Rh,InterpolateDiscrete:lh,InterpolateLinear:ch,InterpolateSmooth:Cg,InterpolationSamplingMode:mF,InterpolationSamplingType:pF,InvertStencilOp:$k,KeepStencilOp:ic,KeyframeTrack:As,LOD:JD,LatheGeometry:Ay,Layers:uy,LessCompare:UD,LessDepth:qg,LessEqualCompare:lw,LessEqualDepth:Tc,LessEqualStencilFunc:eF,LessStencilFunc:Jk,Light:wl,LightProbe:TN,Line:xo,Line3:VB,LineBasicMaterial:Zi,LineCurve:_w,LineCurve3:rN,LineDashedMaterial:mN,LineLoop:pw,LineSegments:Ur,LinearFilter:fi,LinearInterpolant:Mw,LinearMipMapLinearFilter:Bk,LinearMipMapNearestFilter:zk,LinearMipmapLinearFilter:Zr,LinearMipmapNearestFilter:Ju,LinearSRGBColorSpace:fr,LinearToneMapping:bD,LinearTransfer:vd,Loader:Ji,LoaderUtils:vo,LoadingManager:Cw,LoopOnce:CD,LoopPingPong:OD,LoopRepeat:RD,MOUSE:_c,Material:Oi,MaterialLoader:zy,MathUtils:rl,Matrix2:Uw,Matrix3:jt,Matrix4:yt,MaxEquation:rD,Mesh:Sn,MeshBasicMaterial:$i,MeshDepthMaterial:ww,MeshDistanceMaterial:Ew,MeshLambertMaterial:Py,MeshMatcapMaterial:pN,MeshNormalMaterial:dN,MeshPhongMaterial:cl,MeshPhysicalMaterial:rs,MeshStandardMaterial:ts,MeshToonMaterial:Sw,MinEquation:iD,MirroredRepeatWrapping:ih,MixOperation:_D,MultiplyBlending:tS,MultiplyOperation:Vd,NearestFilter:xi,NearestMipMapLinearFilter:Fk,NearestMipMapNearestFilter:kk,NearestMipmapLinearFilter:hc,NearestMipmapNearestFilter:ty,NeutralToneMapping:MD,NeverCompare:LD,NeverDepth:Wg,NeverStencilFunc:Zk,NoBlending:la,NoColorSpace:ta,NoToneMapping:ca,NormalAnimationBlendMode:ay,NormalBlending:vc,NotEqualCompare:zD,NotEqualDepth:Zg,NotEqualStencilFunc:nF,NumberKeyframeTrack:Cc,Object3D:nn,ObjectLoader:pB,ObjectSpaceNormalMap:PD,OctahedronGeometry:$d,OneFactor:oD,OneMinusConstantAlphaFactor:yD,OneMinusConstantColorFactor:mD,OneMinusDstAlphaFactor:uD,OneMinusDstColorFactor:fD,OneMinusSrcAlphaFactor:jg,OneMinusSrcColorFactor:lD,OrthographicCamera:Fc,PCFShadowMap:JS,PCFSoftShadowMap:Q2,PMREMGenerator:fS,Path:C0,PerspectiveCamera:Yn,Plane:Qo,PlaneGeometry:Ah,PlaneHelper:QB,PointLight:ky,PointLightHelper:WB,Points:_y,PointsMaterial:yy,PolarGridHelper:YB,PolyhedronGeometry:Sl,PositionalAudio:xB,PropertyBinding:mn,PropertyMixer:DN,QuadraticBezierCurve:vw,QuadraticBezierCurve3:bw,Quaternion:Si,QuaternionKeyframeTrack:pl,QuaternionLinearInterpolant:bN,RED_GREEN_RGTC2_Format:S0,RED_RGTC1_Format:sw,REVISION:Q0,RGBADepthPacking:ID,RGBAFormat:vr,RGBAIntegerFormat:oy,RGBA_ASTC_10x10_Format:g0,RGBA_ASTC_10x5_Format:d0,RGBA_ASTC_10x6_Format:p0,RGBA_ASTC_10x8_Format:m0,RGBA_ASTC_12x10_Format:y0,RGBA_ASTC_12x12_Format:_0,RGBA_ASTC_4x4_Format:s0,RGBA_ASTC_5x4_Format:o0,RGBA_ASTC_5x5_Format:a0,RGBA_ASTC_6x5_Format:l0,RGBA_ASTC_6x6_Format:c0,RGBA_ASTC_8x5_Format:u0,RGBA_ASTC_8x6_Format:h0,RGBA_ASTC_8x8_Format:f0,RGBA_BPTC_Format:ad,RGBA_ETC2_EAC_Format:r0,RGBA_PVRTC_2BPPV1_Format:t0,RGBA_PVRTC_4BPPV1_Format:e0,RGBA_S3TC_DXT1_Format:rd,RGBA_S3TC_DXT3_Format:sd,RGBA_S3TC_DXT5_Format:od,RGBDepthPacking:Vk,RGBFormat:iw,RGBIntegerFormat:Hk,RGB_BPTC_SIGNED_Format:v0,RGB_BPTC_UNSIGNED_Format:b0,RGB_ETC1_Format:n0,RGB_ETC2_Format:i0,RGB_PVRTC_2BPPV1_Format:Qg,RGB_PVRTC_4BPPV1_Format:Jg,RGB_S3TC_DXT1_Format:id,RGDepthPacking:Gk,RGFormat:rw,RGIntegerFormat:sy,RawShaderMaterial:fN,Ray:bl,Raycaster:PN,RectAreaLight:wN,RedFormat:Gd,RedIntegerFormat:jd,ReinhardToneMapping:xD,RenderTarget:ly,RenderTarget3D:PB,RenderTargetArray:LB,RepeatWrapping:ws,ReplaceStencilOp:Wk,ReverseSubtractEquation:nD,RingGeometry:Cy,SIGNED_RED_GREEN_RGTC2_Format:w0,SIGNED_RED_RGTC1_Format:x0,SRGBColorSpace:Nn,SRGBTransfer:On,Scene:py,ShaderChunk:Kt,ShaderLib:Ws,ShaderMaterial:Ts,ShadowMaterial:hN,Shape:xc,ShapeGeometry:Ry,ShapePath:n4,ShapeUtils:qs,ShortType:ew,Skeleton:Eh,SkeletonHelper:jB,SkinnedMesh:my,Source:ll,Sphere:wi,SphereGeometry:Ch,Spherical:uS,SphericalHarmonics3:EN,SplineCurve:xw,SpotLight:Uy,SpotLightHelper:GB,Sprite:ZD,SpriteMaterial:fw,SrcAlphaFactor:Gg,SrcAlphaSaturateFactor:dD,SrcColorFactor:aD,StaticCopyUsage:cF,StaticDrawUsage:bd,StaticReadUsage:oF,StereoCamera:yB,StreamCopyUsage:hF,StreamDrawUsage:sF,StreamReadUsage:lF,StringKeyframeTrack:kc,SubtractEquation:tD,SubtractiveBlending:eS,TOUCH:uc,TangentSpaceNormalMap:vl,TetrahedronGeometry:Oy,Texture:Kn,TextureLoader:Ly,TextureUtils:a4,TimestampQuery:dF,TorusGeometry:Dy,TorusKnotGeometry:Ny,Triangle:_r,TriangleFanDrawMode:E0,TriangleStripDrawMode:aw,TrianglesDrawMode:DD,TubeGeometry:Iy,UVMapping:ey,Uint16BufferAttribute:uw,Uint32BufferAttribute:hw,Uint8BufferAttribute:QF,Uint8ClampedBufferAttribute:ez,Uniform:Lw,UniformsGroup:kB,UniformsLib:it,UniformsUtils:qD,UnsignedByteType:es,UnsignedInt248Type:sh,UnsignedInt5999Type:tw,UnsignedIntType:da,UnsignedShort4444Type:iy,UnsignedShort5551Type:ry,UnsignedShortType:rh,VSMShadowMap:mo,Vector2:Oe,Vector3:Y,Vector4:yn,VectorKeyframeTrack:pa,VideoFrameTexture:Sz,VideoTexture:eN,WebGL3DRenderTarget:BF,WebGLArrayRenderTarget:zF,WebGLCoordinateSystem:Es,WebGLCubeRenderTarget:KD,WebGLRenderTarget:Js,WebGLRenderer:jN,WebGLUtils:GN,WebGPUCoordinateSystem:xd,WebXRController:Og,WireframeGeometry:uN,WrapAroundEnding:_d,ZeroCurvatureEnding:fc,ZeroFactor:sD,ZeroSlopeEnding:dc,ZeroStencilOp:jk,createCanvasElement:GD},Symbol.toStringTag,{value:&quot;Module&quot;})),eo=Eo(n=&gt;({modelUrl:null,scene_action:null,userdata:null,translation:null,boundingBox:null,zIsUp:!0,defaultOrbitController:!0,model_type:null,setModelUrl:(e,t)=&gt;n({modelUrl:e,scene_action:t}),setTranslation:e=&gt;n({translation:e}),setBoundingBox:e=&gt;n({boundingBox:e}),setUserData:e=&gt;n({userdata:e}),setZIsUp:e=&gt;n({zIsUp:e}),setDefaultOrbitController:e=&gt;n({defaultOrbitController:e})}));class G8{constructor(){dt(this,&quot;socket&quot;,null);dt(this,&quot;retryWait&quot;,1e3);dt(this,&quot;instance_id&quot;,this.getRandomInt32());dt(this,&quot;shouldReconnect&quot;,!0);dt(this,&quot;messageQueue&quot;,[]);dt(this,&quot;resolvers&quot;,[])}getRandomInt32(){return Math.floor(Math.random()*4294967296)+-2147483648}async connect(e){const t=window.WEBSOCKET_ID;t&amp;&amp;(console.log(&quot;WebSocket ID Override:&quot;,t),this.instance_id=t);const i=`${e}?client-type=web&amp;instance-id=${this.instance_id}`;this.shouldReconnect=!0;try{this.socket=new WebSocket(i),console.log(&quot;WebSocket connecting to:&quot;,i),this.socket.addEventListener(&quot;message&quot;,r=&gt;this.enqueue(r)),this.socket.addEventListener(&quot;close&quot;,()=&gt;{console.log(&quot;WebSocket connection closed.&quot;),this.shouldReconnect&amp;&amp;(console.log(`Retrying in ${this.retryWait/1e3}s…`),setTimeout(()=&gt;this.connect(e),this.retryWait))}),this.socket.addEventListener(&quot;error&quot;,r=&gt;{}),await new Promise((r,s)=&gt;{this.socket.addEventListener(&quot;open&quot;,()=&gt;{console.log(&quot;WebSocket connected&quot;),r()}),this.socket.addEventListener(&quot;error&quot;,o=&gt;{s(o)})})}catch{}}enqueue(e){this.resolvers.length?this.resolvers.shift()(e):this.messageQueue.push(e)}nextMessage(){return new Promise(e=&gt;{this.messageQueue.length?e(this.messageQueue.shift()):this.resolvers.push(e)})}async*messages(){for(;;)yield await this.nextMessage()}async sendMessage(e){var t;if(((t=this.socket)==null?void 0:t.readyState)!==WebSocket.OPEN)throw new Error(&quot;WebSocket is not open&quot;);typeof e==&quot;string&quot;||e instanceof Uint8Array?this.socket.send(e):this.socket.send(JSON.stringify(e))}async disconnect(){this.shouldReconnect=!1,this.resolvers.forEach(e=&gt;e(new MessageEvent(&quot;close&quot;))),this.resolvers=[],this.messageQueue=[],this.socket&amp;&amp;(this.socket.close(),this.socket=null)}}const Ei=new G8,WN=Eo(n=&gt;({webSocketAddress:&quot;ws://localhost:&quot;+(window.WEBSOCKET_PORT||8765),sendData:i=&gt;{},setWebSocketAddress:i=&gt;n({webSocketAddress:i})})),Zb=2,_o=4,ia=4,zi=4,tl=new Int32Array(2),wC=new Float32Array(tl.buffer),EC=new Float64Array(tl.buffer),Km=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var pS;(function(n){n[n.UTF8_BYTES=1]=&quot;UTF8_BYTES&quot;,n[n.UTF16_STRING=2]=&quot;UTF16_STRING&quot;})(pS||(pS={}));class Ad{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Ad(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)&lt;&lt;24&gt;&gt;24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)&lt;&lt;16&gt;&gt;16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]&lt;&lt;8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]&lt;&lt;8|this.bytes_[e+2]&lt;&lt;16|this.bytes_[e+3]&lt;&lt;24}readUint32(e){return this.readInt32(e)&gt;&gt;&gt;0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))&lt;&lt;BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))&lt;&lt;BigInt(32)))}readFloat32(e){return tl[0]=this.readInt32(e),wC[0]}readFloat64(e){return tl[Km?0:1]=this.readInt32(e),tl[Km?1:0]=this.readInt32(e+4),EC[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8,this.bytes_[e+2]=t&gt;&gt;16,this.bytes_[e+3]=t&gt;&gt;24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t&gt;&gt;8,this.bytes_[e+2]=t&gt;&gt;16,this.bytes_[e+3]=t&gt;&gt;24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t&gt;&gt;BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t&gt;&gt;BigInt(32))))}writeFloat32(e,t){wC[0]=t,this.writeInt32(e,tl[0])}writeFloat64(e,t){EC[0]=t,this.writeInt32(e,tl[Km?0:1]),this.writeInt32(e+4,tl[Km?1:0])}getBufferIdentifier(){if(this.bytes_.length&lt;this.position_+_o+ia)throw new Error(&quot;FlatBuffers: ByteBuffer is too short to contain an identifier.&quot;);let e=&quot;&quot;;for(let t=0;t&lt;ia;t++)e+=String.fromCharCode(this.readInt8(this.position_+_o+t));return e}__offset(e,t){const i=e-this.readInt32(e);return t&lt;this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const i=this.readInt32(e);e+=_o;const r=this.bytes_.subarray(e,e+i);return t===pS.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return typeof e==&quot;string&quot;?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+_o}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=ia)throw new Error(&quot;FlatBuffers: file identifier must be length &quot;+ia);for(let t=0;t&lt;ia;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+_o+t))return!1;return!0}createScalarList(e,t){const i=[];for(let r=0;r&lt;t;++r){const s=e(r);s!==null&amp;&amp;i.push(s)}return i}createObjList(e,t){const i=[];for(let r=0;r&lt;t;++r){const s=e(r);s!==null&amp;&amp;i.push(s.unpack())}return i}}class Mo{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let t;e?t=e:t=1024,this.bb=Ad.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e&gt;this.minalign&amp;&amp;(this.minalign=e);const i=~(this.bb.capacity()-this.space+t)+1&amp;e-1;for(;this.space&lt;i+e+t;){const r=this.bb.capacity();this.bb=Mo.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(e){for(let t=0;t&lt;e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){(this.force_defaults||t!==i)&amp;&amp;(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&amp;&amp;(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&amp;&amp;(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError(&quot;FlatBuffers: struct must be serialized inline.&quot;)}notNested(){if(this.isNested)throw new TypeError(&quot;FlatBuffers: object serialization must not be nested.&quot;)}slot(e){this.vtable!==null&amp;&amp;(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(t&amp;3221225472)throw new Error(&quot;FlatBuffers: cannot grow buffer beyond 2 gigabytes.&quot;);const i=t&lt;&lt;1,r=Ad.allocate(i);return r.setPosition(i-t),r.bytes().set(e.bytes(),i-t),r}addOffset(e){this.prep(_o,0),this.writeInt32(this.offset()-e+_o)}startObject(e){this.notNested(),this.vtable==null&amp;&amp;(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t&lt;e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error(&quot;FlatBuffers: endObject called without startObject&quot;);this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t&gt;=0&amp;&amp;this.vtable[t]==0;t--);const i=t+1;for(;t&gt;=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);const r=2;this.addInt16(e-this.object_start);const s=(i+r)*Zb;this.addInt16(s);let o=0;const l=this.space;e:for(t=0;t&lt;this.vtables.length;t++){const u=this.bb.capacity()-this.vtables[t];if(s==this.bb.readInt16(u)){for(let h=Zb;h&lt;s;h+=Zb)if(this.bb.readInt16(l+h)!=this.bb.readInt16(u+h))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){const r=i?zi:0;if(t){const s=t;if(this.prep(this.minalign,_o+ia+r),s.length!=ia)throw new TypeError(&quot;FlatBuffers: file identifier must be length &quot;+ia);for(let o=ia-1;o&gt;=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,_o+r),this.addOffset(e),r&amp;&amp;this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(t&lt;this.bb.readInt16(r)&amp;&amp;this.bb.readInt16(r+t)!=0))throw new TypeError(&quot;FlatBuffers: field &quot;+t+&quot; must be set&quot;)}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(_o,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(e==null)return 0;let t;return e instanceof Uint8Array?t=e:t=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e==&quot;string&quot;?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let i=0;i&lt;e.length;++i){const r=e[i];if(r!==null)t.push(this.createObjectOffset(r));else throw new TypeError(&quot;FlatBuffers: Argument for createObjectOffsetList cannot contain null.&quot;)}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}var Bn=(n=&gt;(n[n.PING=0]=&quot;PING&quot;,n[n.PONG=1]=&quot;PONG&quot;,n[n.UPDATE_SCENE=2]=&quot;UPDATE_SCENE&quot;,n[n.UPDATE_SERVER=3]=&quot;UPDATE_SERVER&quot;,n[n.MESH_INFO_CALLBACK=4]=&quot;MESH_INFO_CALLBACK&quot;,n[n.MESH_INFO_REPLY=5]=&quot;MESH_INFO_REPLY&quot;,n[n.LIST_WEB_CLIENTS=6]=&quot;LIST_WEB_CLIENTS&quot;,n[n.LIST_FILE_OBJECTS=7]=&quot;LIST_FILE_OBJECTS&quot;,n[n.LIST_PROCEDURES=8]=&quot;LIST_PROCEDURES&quot;,n[n.RUN_PROCEDURE=9]=&quot;RUN_PROCEDURE&quot;,n[n.ERROR=10]=&quot;ERROR&quot;,n[n.SERVER_REPLY=11]=&quot;SERVER_REPLY&quot;,n[n.VIEW_FILE_OBJECT=12]=&quot;VIEW_FILE_OBJECT&quot;,n[n.DELETE_FILE_OBJECT=13]=&quot;DELETE_FILE_OBJECT&quot;,n[n.START_NEW_NODE_EDITOR=14]=&quot;START_NEW_NODE_EDITOR&quot;,n[n.START_FILE_IN_LOCAL_APP=15]=&quot;START_FILE_IN_LOCAL_APP&quot;,n[n.SCREENSHOT=16]=&quot;SCREENSHOT&quot;,n))(Bn||{}),si=(n=&gt;(n[n.WEB=0]=&quot;WEB&quot;,n[n.LOCAL=1]=&quot;LOCAL&quot;,n[n.SERVER=2]=&quot;SERVER&quot;,n))(si||{});class Hs{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsWebClient(e,t){return(t||new Hs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsWebClient(e,t){return e.setPosition(e.position()+zi),(t||new Hs).__init(e.readInt32(e.position())+e.position(),e)}instanceId(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}address(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}port(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0}static startWebClient(e){e.startObject(4)}static addInstanceId(e,t){e.addFieldInt32(0,t,0)}static addName(e,t){e.addFieldOffset(1,t,0)}static addAddress(e,t){e.addFieldOffset(2,t,0)}static addPort(e,t){e.addFieldInt32(3,t,0)}static endWebClient(e){return e.endObject()}static createWebClient(e,t,i,r,s){return Hs.startWebClient(e),Hs.addInstanceId(e,t),Hs.addName(e,i),Hs.addAddress(e,r),Hs.addPort(e,s),Hs.endWebClient(e)}unpack(){return new j8(this.instanceId(),this.name(),this.address(),this.port())}unpackTo(e){e.instanceId=this.instanceId(),e.name=this.name(),e.address=this.address(),e.port=this.port()}}class j8{constructor(e=0,t=null,i=null,r=0){this.instanceId=e,this.name=t,this.address=i,this.port=r}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.address!==null?e.createString(this.address):0;return Hs.createWebClient(e,this.instanceId,t,i,this.port)}}class Kr{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMesh(e,t){return(t||new Kr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMesh(e,t){return e.setPosition(e.position()+zi),(t||new Kr).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}indices(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+e*4):0}indicesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}indicesArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}vertices(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}verticesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}verticesArray(){const e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}parentName(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}static startMesh(e){e.startObject(4)}static addName(e,t){e.addFieldOffset(0,t,0)}static addIndices(e,t){e.addFieldOffset(1,t,0)}static createIndicesVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addInt32(t[i]);return e.endVector()}static startIndicesVector(e,t){e.startVector(4,t,4)}static addVertices(e,t){e.addFieldOffset(2,t,0)}static createVerticesVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startVerticesVector(e,t){e.startVector(4,t,4)}static addParentName(e,t){e.addFieldOffset(3,t,0)}static endMesh(e){return e.endObject()}static createMesh(e,t,i,r,s){return Kr.startMesh(e),Kr.addName(e,t),Kr.addIndices(e,i),Kr.addVertices(e,r),Kr.addParentName(e,s),Kr.endMesh(e)}unpack(){return new W8(this.name(),this.bb.createScalarList(this.indices.bind(this),this.indicesLength()),this.bb.createScalarList(this.vertices.bind(this),this.verticesLength()),this.parentName())}unpackTo(e){e.name=this.name(),e.indices=this.bb.createScalarList(this.indices.bind(this),this.indicesLength()),e.vertices=this.bb.createScalarList(this.vertices.bind(this),this.verticesLength()),e.parentName=this.parentName()}}class W8{constructor(e=null,t=[],i=[],r=null){this.name=e,this.indices=t,this.vertices=i,this.parentName=r}pack(e){const t=this.name!==null?e.createString(this.name):0,i=Kr.createIndicesVector(e,this.indices),r=Kr.createVerticesVector(e,this.vertices),s=this.parentName!==null?e.createString(this.parentName):0;return Kr.createMesh(e,t,i,r,s)}}class sl{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsAppendMesh(e,t){return(t||new sl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsAppendMesh(e,t){return e.setPosition(e.position()+zi),(t||new sl).__init(e.readInt32(e.position())+e.position(),e)}mesh(e){const t=this.bb.__offset(this.bb_pos,4);return t?(e||new Kr).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startAppendMesh(e){e.startObject(1)}static addMesh(e,t){e.addFieldOffset(0,t,0)}static endAppendMesh(e){return e.endObject()}static createAppendMesh(e,t){return sl.startAppendMesh(e),sl.addMesh(e,t),sl.endAppendMesh(e)}unpack(){return new X8(this.mesh()!==null?this.mesh().unpack():null)}unpackTo(e){e.mesh=this.mesh()!==null?this.mesh().unpack():null}}class X8{constructor(e=null){this.mesh=e}pack(e){const t=this.mesh!==null?this.mesh.pack(e):0;return sl.createAppendMesh(e,t)}}class Vs{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMeshInfo(e,t){return(t||new Vs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMeshInfo(e,t){return e.setPosition(e.position()+zi),(t||new Vs).__init(e.readInt32(e.position())+e.position(),e)}objectName(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}faceIndex(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}jsonData(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}fileName(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}static startMeshInfo(e){e.startObject(4)}static addObjectName(e,t){e.addFieldOffset(0,t,0)}static addFaceIndex(e,t){e.addFieldInt32(1,t,0)}static addJsonData(e,t){e.addFieldOffset(2,t,0)}static addFileName(e,t){e.addFieldOffset(3,t,0)}static endMeshInfo(e){return e.endObject()}static createMeshInfo(e,t,i,r,s){return Vs.startMeshInfo(e),Vs.addObjectName(e,t),Vs.addFaceIndex(e,i),Vs.addJsonData(e,r),Vs.addFileName(e,s),Vs.endMeshInfo(e)}unpack(){return new q8(this.objectName(),this.faceIndex(),this.jsonData(),this.fileName())}unpackTo(e){e.objectName=this.objectName(),e.faceIndex=this.faceIndex(),e.jsonData=this.jsonData(),e.fileName=this.fileName()}}class q8{constructor(e=null,t=0,i=null,r=null){this.objectName=e,this.faceIndex=t,this.jsonData=i,this.fileName=r}pack(e){const t=this.objectName!==null?e.createString(this.objectName):0,i=this.jsonData!==null?e.createString(this.jsonData):0,r=this.fileName!==null?e.createString(this.fileName):0;return Vs.createMeshInfo(e,t,this.faceIndex,i,r)}}var ii=(n=&gt;(n[n.UNKNOWN=0]=&quot;UNKNOWN&quot;,n[n.STRING=1]=&quot;STRING&quot;,n[n.FLOAT=2]=&quot;FLOAT&quot;,n[n.INTEGER=3]=&quot;INTEGER&quot;,n[n.BOOLEAN=4]=&quot;BOOLEAN&quot;,n[n.ARRAY=6]=&quot;ARRAY&quot;,n))(ii||{}),R0=(n=&gt;(n[n.TUPLE=0]=&quot;TUPLE&quot;,n[n.LIST=1]=&quot;LIST&quot;,n[n.SET=2]=&quot;SET&quot;,n))(R0||{});class Ht{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsValue(e,t){return(t||new Ht).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsValue(e,t){return e.setPosition(e.position()+zi),(t||new Ht).__init(e.readInt32(e.position())+e.position(),e)}stringValue(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}floatValue(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat32(this.bb_pos+e):0}integerValue(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):0}booleanValue(){const e=this.bb.__offset(this.bb_pos,10);return e?!!this.bb.readInt8(this.bb_pos+e):!1}arrayValue(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}arrayValueLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}arrayValueType(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt8(this.bb_pos+e):ii.UNKNOWN}arrayLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):0}arrayType(){const e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt8(this.bb_pos+e):R0.TUPLE}arrayAnyLength(){const e=this.bb.__offset(this.bb_pos,20);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startValue(e){e.startObject(9)}static addStringValue(e,t){e.addFieldOffset(0,t,0)}static addFloatValue(e,t){e.addFieldFloat32(1,t,0)}static addIntegerValue(e,t){e.addFieldInt32(2,t,0)}static addBooleanValue(e,t){e.addFieldInt8(3,+t,0)}static addArrayValue(e,t){e.addFieldOffset(4,t,0)}static createArrayValueVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startArrayValueVector(e,t){e.startVector(4,t,4)}static addArrayValueType(e,t){e.addFieldInt8(5,t,ii.UNKNOWN)}static addArrayLength(e,t){e.addFieldInt32(6,t,0)}static addArrayType(e,t){e.addFieldInt8(7,t,R0.TUPLE)}static addArrayAnyLength(e,t){e.addFieldInt8(8,+t,0)}static endValue(e){return e.endObject()}static createValue(e,t,i,r,s,o,l,u,h,f){return Ht.startValue(e),Ht.addStringValue(e,t),Ht.addFloatValue(e,i),Ht.addIntegerValue(e,r),Ht.addBooleanValue(e,s),Ht.addArrayValue(e,o),Ht.addArrayValueType(e,l),Ht.addArrayLength(e,u),Ht.addArrayType(e,h),Ht.addArrayAnyLength(e,f),Ht.endValue(e)}unpack(){return new Y8(this.stringValue(),this.floatValue(),this.integerValue(),this.booleanValue(),this.bb.createObjList(this.arrayValue.bind(this),this.arrayValueLength()),this.arrayValueType(),this.arrayLength(),this.arrayType(),this.arrayAnyLength())}unpackTo(e){e.stringValue=this.stringValue(),e.floatValue=this.floatValue(),e.integerValue=this.integerValue(),e.booleanValue=this.booleanValue(),e.arrayValue=this.bb.createObjList(this.arrayValue.bind(this),this.arrayValueLength()),e.arrayValueType=this.arrayValueType(),e.arrayLength=this.arrayLength(),e.arrayType=this.arrayType(),e.arrayAnyLength=this.arrayAnyLength()}}class Y8{constructor(e=null,t=0,i=0,r=!1,s=[],o=ii.UNKNOWN,l=0,u=R0.TUPLE,h=!1){this.stringValue=e,this.floatValue=t,this.integerValue=i,this.booleanValue=r,this.arrayValue=s,this.arrayValueType=o,this.arrayLength=l,this.arrayType=u,this.arrayAnyLength=h}pack(e){const t=this.stringValue!==null?e.createString(this.stringValue):0,i=Ht.createArrayValueVector(e,e.createObjectOffsetList(this.arrayValue));return Ht.createValue(e,t,this.floatValue,this.integerValue,this.booleanValue,i,this.arrayValueType,this.arrayLength,this.arrayType,this.arrayAnyLength)}}class Dn{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsParameter(e,t){return(t||new Dn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsParameter(e,t){return e.setPosition(e.position()+zi),(t||new Dn).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}type(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):ii.UNKNOWN}value(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new Ht).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}defaultValue(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new Ht).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}options(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Ht).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}optionsLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startParameter(e){e.startObject(5)}static addName(e,t){e.addFieldOffset(0,t,0)}static addType(e,t){e.addFieldInt8(1,t,ii.UNKNOWN)}static addValue(e,t){e.addFieldOffset(2,t,0)}static addDefaultValue(e,t){e.addFieldOffset(3,t,0)}static addOptions(e,t){e.addFieldOffset(4,t,0)}static createOptionsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startOptionsVector(e,t){e.startVector(4,t,4)}static endParameter(e){return e.endObject()}unpack(){return new K8(this.name(),this.type(),this.value()!==null?this.value().unpack():null,this.defaultValue()!==null?this.defaultValue().unpack():null,this.bb.createObjList(this.options.bind(this),this.optionsLength()))}unpackTo(e){e.name=this.name(),e.type=this.type(),e.value=this.value()!==null?this.value().unpack():null,e.defaultValue=this.defaultValue()!==null?this.defaultValue().unpack():null,e.options=this.bb.createObjList(this.options.bind(this),this.optionsLength())}}class K8{constructor(e=null,t=ii.UNKNOWN,i=null,r=null,s=[]){this.name=e,this.type=t,this.value=i,this.defaultValue=r,this.options=s}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.value!==null?this.value.pack(e):0,r=this.defaultValue!==null?this.defaultValue.pack(e):0,s=Dn.createOptionsVector(e,e.createObjectOffsetList(this.options));return Dn.startParameter(e),Dn.addName(e,t),Dn.addType(e,this.type),Dn.addValue(e,i),Dn.addDefaultValue(e,r),Dn.addOptions(e,s),Dn.endParameter(e)}}class Yi{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsProcedureStart(e,t){return(t||new Yi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsProcedureStart(e,t){return e.setPosition(e.position()+zi),(t||new Yi).__init(e.readInt32(e.position())+e.position(),e)}procedureName(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}procedureIdString(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}parameters(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new Dn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}parametersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startProcedureStart(e){e.startObject(3)}static addProcedureName(e,t){e.addFieldOffset(0,t,0)}static addProcedureIdString(e,t){e.addFieldOffset(1,t,0)}static addParameters(e,t){e.addFieldOffset(2,t,0)}static createParametersVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startParametersVector(e,t){e.startVector(4,t,4)}static endProcedureStart(e){return e.endObject()}static createProcedureStart(e,t,i,r){return Yi.startProcedureStart(e),Yi.addProcedureName(e,t),Yi.addProcedureIdString(e,i),Yi.addParameters(e,r),Yi.endProcedureStart(e)}unpack(){return new $8(this.procedureName(),this.procedureIdString(),this.bb.createObjList(this.parameters.bind(this),this.parametersLength()))}unpackTo(e){e.procedureName=this.procedureName(),e.procedureIdString=this.procedureIdString(),e.parameters=this.bb.createObjList(this.parameters.bind(this),this.parametersLength())}}class $8{constructor(e=null,t=null,i=[]){this.procedureName=e,this.procedureIdString=t,this.parameters=i}pack(e){const t=this.procedureName!==null?e.createString(this.procedureName):0,i=this.procedureIdString!==null?e.createString(this.procedureIdString):0,r=Yi.createParametersVector(e,e.createObjectOffsetList(this.parameters));return Yi.createProcedureStart(e,t,i,r)}}var So=(n=&gt;(n[n.IFC=0]=&quot;IFC&quot;,n[n.GLB=1]=&quot;GLB&quot;,n[n.SQLITE=2]=&quot;SQLITE&quot;,n[n.XLSX=3]=&quot;XLSX&quot;,n[n.CSV=4]=&quot;CSV&quot;,n))(So||{});class yo{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFileArg(e,t){return(t||new yo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFileArg(e,t){return e.setPosition(e.position()+zi),(t||new yo).__init(e.readInt32(e.position())+e.position(),e)}argName(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fileType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):So.IFC}static startFileArg(e){e.startObject(2)}static addArgName(e,t){e.addFieldOffset(0,t,0)}static addFileType(e,t){e.addFieldInt8(1,t,So.IFC)}static endFileArg(e){return e.endObject()}static createFileArg(e,t,i){return yo.startFileArg(e),yo.addArgName(e,t),yo.addFileType(e,i),yo.endFileArg(e)}unpack(){return new Z8(this.argName(),this.fileType())}unpackTo(e){e.argName=this.argName(),e.fileType=this.fileType()}}class Z8{constructor(e=null,t=So.IFC){this.argName=e,this.fileType=t}pack(e){const t=this.argName!==null?e.createString(this.argName):0;return yo.createFileArg(e,t,this.fileType)}}var O0=(n=&gt;(n[n.IDLE=0]=&quot;IDLE&quot;,n[n.RUNNING=1]=&quot;RUNNING&quot;,n[n.FINISHED=2]=&quot;FINISHED&quot;,n[n.ERROR=3]=&quot;ERROR&quot;,n))(O0||{});class qi{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsProcedure(e,t){return(t||new qi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsProcedure(e,t){return e.setPosition(e.position()+zi),(t||new qi).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}description(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}scriptFileLocation(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}parameters(e,t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new Dn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}parametersLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}fileInputs(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new yo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fileInputsLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}fileOutputs(e,t){const i=this.bb.__offset(this.bb_pos,14);return i?(t||new yo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fileOutputsLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}state(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt8(this.bb_pos+e):O0.IDLE}isComponent(){const e=this.bb.__offset(this.bb_pos,18);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startProcedure(e){e.startObject(8)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDescription(e,t){e.addFieldOffset(1,t,0)}static addScriptFileLocation(e,t){e.addFieldOffset(2,t,0)}static addParameters(e,t){e.addFieldOffset(3,t,0)}static createParametersVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startParametersVector(e,t){e.startVector(4,t,4)}static addFileInputs(e,t){e.addFieldOffset(4,t,0)}static createFileInputsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startFileInputsVector(e,t){e.startVector(4,t,4)}static addFileOutputs(e,t){e.addFieldOffset(5,t,0)}static createFileOutputsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startFileOutputsVector(e,t){e.startVector(4,t,4)}static addState(e,t){e.addFieldInt8(6,t,O0.IDLE)}static addIsComponent(e,t){e.addFieldInt8(7,+t,0)}static endProcedure(e){return e.endObject()}static createProcedure(e,t,i,r,s,o,l,u,h){return qi.startProcedure(e),qi.addName(e,t),qi.addDescription(e,i),qi.addScriptFileLocation(e,r),qi.addParameters(e,s),qi.addFileInputs(e,o),qi.addFileOutputs(e,l),qi.addState(e,u),qi.addIsComponent(e,h),qi.endProcedure(e)}unpack(){return new J8(this.name(),this.description(),this.scriptFileLocation(),this.bb.createObjList(this.parameters.bind(this),this.parametersLength()),this.bb.createObjList(this.fileInputs.bind(this),this.fileInputsLength()),this.bb.createObjList(this.fileOutputs.bind(this),this.fileOutputsLength()),this.state(),this.isComponent())}unpackTo(e){e.name=this.name(),e.description=this.description(),e.scriptFileLocation=this.scriptFileLocation(),e.parameters=this.bb.createObjList(this.parameters.bind(this),this.parametersLength()),e.fileInputs=this.bb.createObjList(this.fileInputs.bind(this),this.fileInputsLength()),e.fileOutputs=this.bb.createObjList(this.fileOutputs.bind(this),this.fileOutputsLength()),e.state=this.state(),e.isComponent=this.isComponent()}}class J8{constructor(e=null,t=null,i=null,r=[],s=[],o=[],l=O0.IDLE,u=!1){this.name=e,this.description=t,this.scriptFileLocation=i,this.parameters=r,this.fileInputs=s,this.fileOutputs=o,this.state=l,this.isComponent=u}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.description!==null?e.createString(this.description):0,r=this.scriptFileLocation!==null?e.createString(this.scriptFileLocation):0,s=qi.createParametersVector(e,e.createObjectOffsetList(this.parameters)),o=qi.createFileInputsVector(e,e.createObjectOffsetList(this.fileInputs)),l=qi.createFileOutputsVector(e,e.createObjectOffsetList(this.fileOutputs));return qi.createProcedure(e,t,i,r,s,o,l,this.state,this.isComponent)}}class Ss{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsProcedureStore(e,t){return(t||new Ss).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsProcedureStore(e,t){return e.setPosition(e.position()+zi),(t||new Ss).__init(e.readInt32(e.position())+e.position(),e)}procedures(e,t){const i=this.bb.__offset(this.bb_pos,4);return i?(t||new qi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}proceduresLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}startProcedure(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Yi).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startProcedureStore(e){e.startObject(2)}static addProcedures(e,t){e.addFieldOffset(0,t,0)}static createProceduresVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startProceduresVector(e,t){e.startVector(4,t,4)}static addStartProcedure(e,t){e.addFieldOffset(1,t,0)}static endProcedureStore(e){return e.endObject()}unpack(){return new Q8(this.bb.createObjList(this.procedures.bind(this),this.proceduresLength()),this.startProcedure()!==null?this.startProcedure().unpack():null)}unpackTo(e){e.procedures=this.bb.createObjList(this.procedures.bind(this),this.proceduresLength()),e.startProcedure=this.startProcedure()!==null?this.startProcedure().unpack():null}}class Q8{constructor(e=[],t=null){this.procedures=e,this.startProcedure=t}pack(e){const t=Ss.createProceduresVector(e,e.createObjectOffsetList(this.procedures)),i=this.startProcedure!==null?this.startProcedure.pack(e):0;return Ss.startProcedureStore(e),Ss.addProcedures(e,t),Ss.addStartProcedure(e,i),Ss.endProcedureStore(e)}}var Cd=(n=&gt;(n[n.DESIGN=0]=&quot;DESIGN&quot;,n[n.ANALYSIS=1]=&quot;ANALYSIS&quot;,n[n.FABRICATE=2]=&quot;FABRICATE&quot;,n))(Cd||{});class fn{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFileObject(e,t){return(t||new fn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFileObject(e,t){return e.setPosition(e.position()+zi),(t||new fn).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fileType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):So.IFC}purpose(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt8(this.bb_pos+e):Cd.DESIGN}filepath(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}filedata(e){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}filedataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}filedataArray(){const e=this.bb.__offset(this.bb_pos,12);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}glbFile(e){const t=this.bb.__offset(this.bb_pos,14);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}ifcsqliteFile(e){const t=this.bb.__offset(this.bb_pos,16);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isProcedureOutput(){const e=this.bb.__offset(this.bb_pos,18);return e?!!this.bb.readInt8(this.bb_pos+e):!1}procedureParent(e){const t=this.bb.__offset(this.bb_pos,20);return t?(e||new Yi).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}compressed(){const e=this.bb.__offset(this.bb_pos,22);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startFileObject(e){e.startObject(10)}static addName(e,t){e.addFieldOffset(0,t,0)}static addFileType(e,t){e.addFieldInt8(1,t,So.IFC)}static addPurpose(e,t){e.addFieldInt8(2,t,Cd.DESIGN)}static addFilepath(e,t){e.addFieldOffset(3,t,0)}static addFiledata(e,t){e.addFieldOffset(4,t,0)}static createFiledataVector(e,t){e.startVector(1,t.length,1);for(let i=t.length-1;i&gt;=0;i--)e.addInt8(t[i]);return e.endVector()}static startFiledataVector(e,t){e.startVector(1,t,1)}static addGlbFile(e,t){e.addFieldOffset(5,t,0)}static addIfcsqliteFile(e,t){e.addFieldOffset(6,t,0)}static addIsProcedureOutput(e,t){e.addFieldInt8(7,+t,0)}static addProcedureParent(e,t){e.addFieldOffset(8,t,0)}static addCompressed(e,t){e.addFieldInt8(9,+t,0)}static endFileObject(e){return e.endObject()}unpack(){return new eG(this.name(),this.fileType(),this.purpose(),this.filepath(),this.bb.createScalarList(this.filedata.bind(this),this.filedataLength()),this.glbFile()!==null?this.glbFile().unpack():null,this.ifcsqliteFile()!==null?this.ifcsqliteFile().unpack():null,this.isProcedureOutput(),this.procedureParent()!==null?this.procedureParent().unpack():null,this.compressed())}unpackTo(e){e.name=this.name(),e.fileType=this.fileType(),e.purpose=this.purpose(),e.filepath=this.filepath(),e.filedata=this.bb.createScalarList(this.filedata.bind(this),this.filedataLength()),e.glbFile=this.glbFile()!==null?this.glbFile().unpack():null,e.ifcsqliteFile=this.ifcsqliteFile()!==null?this.ifcsqliteFile().unpack():null,e.isProcedureOutput=this.isProcedureOutput(),e.procedureParent=this.procedureParent()!==null?this.procedureParent().unpack():null,e.compressed=this.compressed()}}class eG{constructor(e=null,t=So.IFC,i=Cd.DESIGN,r=null,s=[],o=null,l=null,u=!1,h=null,f=!1){this.name=e,this.fileType=t,this.purpose=i,this.filepath=r,this.filedata=s,this.glbFile=o,this.ifcsqliteFile=l,this.isProcedureOutput=u,this.procedureParent=h,this.compressed=f}pack(e){const t=this.name!==null?e.createString(this.name):0,i=this.filepath!==null?e.createString(this.filepath):0,r=fn.createFiledataVector(e,this.filedata),s=this.glbFile!==null?this.glbFile.pack(e):0,o=this.ifcsqliteFile!==null?this.ifcsqliteFile.pack(e):0,l=this.procedureParent!==null?this.procedureParent.pack(e):0;return fn.startFileObject(e),fn.addName(e,t),fn.addFileType(e,this.fileType),fn.addPurpose(e,this.purpose),fn.addFilepath(e,i),fn.addFiledata(e,r),fn.addGlbFile(e,s),fn.addIfcsqliteFile(e,o),fn.addIsProcedureOutput(e,this.isProcedureOutput),fn.addProcedureParent(e,l),fn.addCompressed(e,this.compressed),fn.endFileObject(e)}}class ir{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsCameraParams(e,t){return(t||new ir).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCameraParams(e,t){return e.setPosition(e.position()+zi),(t||new ir).__init(e.readInt32(e.position())+e.position(),e)}position(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}positionLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}positionArray(){const e=this.bb.__offset(this.bb_pos,4);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}lookAt(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}lookAtLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}lookAtArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}up(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat32(this.bb.__vector(this.bb_pos+t)+e*4):0}upLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}upArray(){const e=this.bb.__offset(this.bb_pos,8);return e?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}fov(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat32(this.bb_pos+e):60}near(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat32(this.bb_pos+e):.1}far(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readFloat32(this.bb_pos+e):1e3}forceCamera(){const e=this.bb.__offset(this.bb_pos,16);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startCameraParams(e){e.startObject(7)}static addPosition(e,t){e.addFieldOffset(0,t,0)}static createPositionVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startPositionVector(e,t){e.startVector(4,t,4)}static addLookAt(e,t){e.addFieldOffset(1,t,0)}static createLookAtVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startLookAtVector(e,t){e.startVector(4,t,4)}static addUp(e,t){e.addFieldOffset(2,t,0)}static createUpVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addFloat32(t[i]);return e.endVector()}static startUpVector(e,t){e.startVector(4,t,4)}static addFov(e,t){e.addFieldFloat32(3,t,60)}static addNear(e,t){e.addFieldFloat32(4,t,.1)}static addFar(e,t){e.addFieldFloat32(5,t,1e3)}static addForceCamera(e,t){e.addFieldInt8(6,+t,0)}static endCameraParams(e){return e.endObject()}static createCameraParams(e,t,i,r,s,o,l,u){return ir.startCameraParams(e),ir.addPosition(e,t),ir.addLookAt(e,i),ir.addUp(e,r),ir.addFov(e,s),ir.addNear(e,o),ir.addFar(e,l),ir.addForceCamera(e,u),ir.endCameraParams(e)}unpack(){return new tG(this.bb.createScalarList(this.position.bind(this),this.positionLength()),this.bb.createScalarList(this.lookAt.bind(this),this.lookAtLength()),this.bb.createScalarList(this.up.bind(this),this.upLength()),this.fov(),this.near(),this.far(),this.forceCamera())}unpackTo(e){e.position=this.bb.createScalarList(this.position.bind(this),this.positionLength()),e.lookAt=this.bb.createScalarList(this.lookAt.bind(this),this.lookAtLength()),e.up=this.bb.createScalarList(this.up.bind(this),this.upLength()),e.fov=this.fov(),e.near=this.near(),e.far=this.far(),e.forceCamera=this.forceCamera()}}class tG{constructor(e=[],t=[],i=[],r=60,s=.1,o=1e3,l=!1){this.position=e,this.lookAt=t,this.up=i,this.fov=r,this.near=s,this.far=o,this.forceCamera=l}pack(e){const t=ir.createPositionVector(e,this.position),i=ir.createLookAtVector(e,this.lookAt),r=ir.createUpVector(e,this.up);return ir.createCameraParams(e,t,i,r,this.fov,this.near,this.far,this.forceCamera)}}var ul=(n=&gt;(n[n.ADD=0]=&quot;ADD&quot;,n[n.REMOVE=1]=&quot;REMOVE&quot;,n[n.REPLACE=2]=&quot;REPLACE&quot;,n))(ul||{});class ra{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsScene(e,t){return(t||new ra).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsScene(e,t){return e.setPosition(e.position()+zi),(t||new ra).__init(e.readInt32(e.position())+e.position(),e)}operation(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):ul.ADD}cameraParams(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new ir).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}currentFile(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startScene(e){e.startObject(3)}static addOperation(e,t){e.addFieldInt8(0,t,ul.ADD)}static addCameraParams(e,t){e.addFieldOffset(1,t,0)}static addCurrentFile(e,t){e.addFieldOffset(2,t,0)}static endScene(e){return e.endObject()}unpack(){return new nG(this.operation(),this.cameraParams()!==null?this.cameraParams().unpack():null,this.currentFile()!==null?this.currentFile().unpack():null)}unpackTo(e){e.operation=this.operation(),e.cameraParams=this.cameraParams()!==null?this.cameraParams().unpack():null,e.currentFile=this.currentFile()!==null?this.currentFile().unpack():null}}class nG{constructor(e=ul.ADD,t=null,i=null){this.operation=e,this.cameraParams=t,this.currentFile=i}pack(e){const t=this.cameraParams!==null?this.cameraParams.pack(e):0,i=this.currentFile!==null?this.currentFile.pack(e):0;return ra.startScene(e),ra.addOperation(e,this.operation),ra.addCameraParams(e,t),ra.addCurrentFile(e,i),ra.endScene(e)}}class ol{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsScreenshot(e,t){return(t||new ol).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsScreenshot(e,t){return e.setPosition(e.position()+zi),(t||new ol).__init(e.readInt32(e.position())+e.position(),e)}pngFilePath(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}static startScreenshot(e){e.startObject(1)}static addPngFilePath(e,t){e.addFieldOffset(0,t,0)}static endScreenshot(e){return e.endObject()}static createScreenshot(e,t){return ol.startScreenshot(e),ol.addPngFilePath(e,t),ol.endScreenshot(e)}unpack(){return new iG(this.pngFilePath())}unpackTo(e){e.pngFilePath=this.pngFilePath()}}class iG{constructor(e=null){this.pngFilePath=e}pack(e){const t=this.pngFilePath!==null?e.createString(this.pngFilePath):0;return ol.createScreenshot(e,t)}}class hi{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsServer(e,t){return(t||new hi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsServer(e,t){return e.setPosition(e.position()+zi),(t||new hi).__init(e.readInt32(e.position())+e.position(),e)}newFileObject(e){const t=this.bb.__offset(this.bb_pos,4);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}allFileObjects(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new fn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}allFileObjectsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}getFileObjectByName(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}getFileObjectByPath(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}deleteFileObject(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}startFileInLocalApp(e){const t=this.bb.__offset(this.bb_pos,14);return t?(e||new fn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startServer(e){e.startObject(6)}static addNewFileObject(e,t){e.addFieldOffset(0,t,0)}static addAllFileObjects(e,t){e.addFieldOffset(1,t,0)}static createAllFileObjectsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startAllFileObjectsVector(e,t){e.startVector(4,t,4)}static addGetFileObjectByName(e,t){e.addFieldOffset(2,t,0)}static addGetFileObjectByPath(e,t){e.addFieldOffset(3,t,0)}static addDeleteFileObject(e,t){e.addFieldOffset(4,t,0)}static addStartFileInLocalApp(e,t){e.addFieldOffset(5,t,0)}static endServer(e){return e.endObject()}unpack(){return new rG(this.newFileObject()!==null?this.newFileObject().unpack():null,this.bb.createObjList(this.allFileObjects.bind(this),this.allFileObjectsLength()),this.getFileObjectByName(),this.getFileObjectByPath(),this.deleteFileObject()!==null?this.deleteFileObject().unpack():null,this.startFileInLocalApp()!==null?this.startFileInLocalApp().unpack():null)}unpackTo(e){e.newFileObject=this.newFileObject()!==null?this.newFileObject().unpack():null,e.allFileObjects=this.bb.createObjList(this.allFileObjects.bind(this),this.allFileObjectsLength()),e.getFileObjectByName=this.getFileObjectByName(),e.getFileObjectByPath=this.getFileObjectByPath(),e.deleteFileObject=this.deleteFileObject()!==null?this.deleteFileObject().unpack():null,e.startFileInLocalApp=this.startFileInLocalApp()!==null?this.startFileInLocalApp().unpack():null}}class rG{constructor(e=null,t=[],i=null,r=null,s=null,o=null){this.newFileObject=e,this.allFileObjects=t,this.getFileObjectByName=i,this.getFileObjectByPath=r,this.deleteFileObject=s,this.startFileInLocalApp=o}pack(e){const t=this.newFileObject!==null?this.newFileObject.pack(e):0,i=hi.createAllFileObjectsVector(e,e.createObjectOffsetList(this.allFileObjects)),r=this.getFileObjectByName!==null?e.createString(this.getFileObjectByName):0,s=this.getFileObjectByPath!==null?e.createString(this.getFileObjectByPath):0,o=this.deleteFileObject!==null?this.deleteFileObject.pack(e):0,l=this.startFileInLocalApp!==null?this.startFileInLocalApp.pack(e):0;return hi.startServer(e),hi.addNewFileObject(e,t),hi.addAllFileObjects(e,i),hi.addGetFileObjectByName(e,r),hi.addGetFileObjectByPath(e,s),hi.addDeleteFileObject(e,o),hi.addStartFileInLocalApp(e,l),hi.endServer(e)}}let XN=class sc{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsError(e,t){return(t||new sc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsError(e,t){return e.setPosition(e.position()+zi),(t||new sc).__init(e.readInt32(e.position())+e.position(),e)}code(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}message(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startError(e){e.startObject(2)}static addCode(e,t){e.addFieldInt32(0,t,0)}static addMessage(e,t){e.addFieldOffset(1,t,0)}static endError(e){return e.endObject()}static createError(e,t,i){return sc.startError(e),sc.addCode(e,t),sc.addMessage(e,i),sc.endError(e)}unpack(){return new sG(this.code(),this.message())}unpackTo(e){e.code=this.code(),e.message=this.message()}};class sG{constructor(e=0,t=null){this.code=e,this.message=t}pack(e){const t=this.message!==null?e.createString(this.message):0;return XN.createError(e,this.code,t)}}class Gs{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsServerReply(e,t){return(t||new Gs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsServerReply(e,t){return e.setPosition(e.position()+zi),(t||new Gs).__init(e.readInt32(e.position())+e.position(),e)}message(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fileObjects(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new fn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fileObjectsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}replyTo(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt8(this.bb_pos+e):Bn.PING}error(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new XN).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startServerReply(e){e.startObject(4)}static addMessage(e,t){e.addFieldOffset(0,t,0)}static addFileObjects(e,t){e.addFieldOffset(1,t,0)}static createFileObjectsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startFileObjectsVector(e,t){e.startVector(4,t,4)}static addReplyTo(e,t){e.addFieldInt8(2,t,Bn.PING)}static addError(e,t){e.addFieldOffset(3,t,0)}static endServerReply(e){return e.endObject()}unpack(){return new oG(this.message(),this.bb.createObjList(this.fileObjects.bind(this),this.fileObjectsLength()),this.replyTo(),this.error()!==null?this.error().unpack():null)}unpackTo(e){e.message=this.message(),e.fileObjects=this.bb.createObjList(this.fileObjects.bind(this),this.fileObjectsLength()),e.replyTo=this.replyTo(),e.error=this.error()!==null?this.error().unpack():null}}class oG{constructor(e=null,t=[],i=Bn.PING,r=null){this.message=e,this.fileObjects=t,this.replyTo=i,this.error=r}pack(e){const t=this.message!==null?e.createString(this.message):0,i=Gs.createFileObjectsVector(e,e.createObjectOffsetList(this.fileObjects)),r=this.error!==null?this.error.pack(e):0;return Gs.startServerReply(e),Gs.addMessage(e,t),Gs.addFileObjects(e,i),Gs.addReplyTo(e,this.replyTo),Gs.addError(e,r),Gs.endServerReply(e)}}class at{constructor(){dt(this,&quot;bb&quot;,null);dt(this,&quot;bb_pos&quot;,0)}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new at).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+zi),(t||new at).__init(e.readInt32(e.position())+e.position(),e)}instanceId(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}commandType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Bn.PING}scene(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new ra).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}server(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new hi).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}meshInfo(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new Vs).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}targetGroup(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt8(this.bb_pos+e):si.WEB}clientType(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt8(this.bb_pos+e):si.WEB}targetId(){const e=this.bb.__offset(this.bb_pos,18);return e?this.bb.readInt32(this.bb_pos+e):0}webClients(e,t){const i=this.bb.__offset(this.bb_pos,20);return i?(t||new Hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}webClientsLength(){const e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__vector_len(this.bb_pos+e):0}procedureStore(e){const t=this.bb.__offset(this.bb_pos,22);return t?(e||new Ss).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}serverReply(e){const t=this.bb.__offset(this.bb_pos,24);return t?(e||new Gs).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}screenshot(e){const t=this.bb.__offset(this.bb_pos,26);return t?(e||new ol).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}package_(e){const t=this.bb.__offset(this.bb_pos,28);return t?(e||new sl).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startMessage(e){e.startObject(13)}static addInstanceId(e,t){e.addFieldInt32(0,t,0)}static addCommandType(e,t){e.addFieldInt8(1,t,Bn.PING)}static addScene(e,t){e.addFieldOffset(2,t,0)}static addServer(e,t){e.addFieldOffset(3,t,0)}static addMeshInfo(e,t){e.addFieldOffset(4,t,0)}static addTargetGroup(e,t){e.addFieldInt8(5,t,si.WEB)}static addClientType(e,t){e.addFieldInt8(6,t,si.WEB)}static addTargetId(e,t){e.addFieldInt32(7,t,0)}static addWebClients(e,t){e.addFieldOffset(8,t,0)}static createWebClientsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i&gt;=0;i--)e.addOffset(t[i]);return e.endVector()}static startWebClientsVector(e,t){e.startVector(4,t,4)}static addProcedureStore(e,t){e.addFieldOffset(9,t,0)}static addServerReply(e,t){e.addFieldOffset(10,t,0)}static addScreenshot(e,t){e.addFieldOffset(11,t,0)}static addPackage(e,t){e.addFieldOffset(12,t,0)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}unpack(){return new aG(this.instanceId(),this.commandType(),this.scene()!==null?this.scene().unpack():null,this.server()!==null?this.server().unpack():null,this.meshInfo()!==null?this.meshInfo().unpack():null,this.targetGroup(),this.clientType(),this.targetId(),this.bb.createObjList(this.webClients.bind(this),this.webClientsLength()),this.procedureStore()!==null?this.procedureStore().unpack():null,this.serverReply()!==null?this.serverReply().unpack():null,this.screenshot()!==null?this.screenshot().unpack():null,this.package_()!==null?this.package_().unpack():null)}unpackTo(e){e.instanceId=this.instanceId(),e.commandType=this.commandType(),e.scene=this.scene()!==null?this.scene().unpack():null,e.server=this.server()!==null?this.server().unpack():null,e.meshInfo=this.meshInfo()!==null?this.meshInfo().unpack():null,e.targetGroup=this.targetGroup(),e.clientType=this.clientType(),e.targetId=this.targetId(),e.webClients=this.bb.createObjList(this.webClients.bind(this),this.webClientsLength()),e.procedureStore=this.procedureStore()!==null?this.procedureStore().unpack():null,e.serverReply=this.serverReply()!==null?this.serverReply().unpack():null,e.screenshot=this.screenshot()!==null?this.screenshot().unpack():null,e.package_=this.package_()!==null?this.package_().unpack():null}}class aG{constructor(e=0,t=Bn.PING,i=null,r=null,s=null,o=si.WEB,l=si.WEB,u=0,h=[],f=null,p=null,m=null,g=null){this.instanceId=e,this.commandType=t,this.scene=i,this.server=r,this.meshInfo=s,this.targetGroup=o,this.clientType=l,this.targetId=u,this.webClients=h,this.procedureStore=f,this.serverReply=p,this.screenshot=m,this.package_=g}pack(e){const t=this.scene!==null?this.scene.pack(e):0,i=this.server!==null?this.server.pack(e):0,r=this.meshInfo!==null?this.meshInfo.pack(e):0,s=at.createWebClientsVector(e,e.createObjectOffsetList(this.webClients)),o=this.procedureStore!==null?this.procedureStore.pack(e):0,l=this.serverReply!==null?this.serverReply.pack(e):0,u=this.screenshot!==null?this.screenshot.pack(e):0,h=this.package_!==null?this.package_.pack(e):0;return at.startMessage(e),at.addInstanceId(e,this.instanceId),at.addCommandType(e,this.commandType),at.addScene(e,t),at.addServer(e,i),at.addMeshInfo(e,r),at.addTargetGroup(e,this.targetGroup),at.addClientType(e,this.clientType),at.addTargetId(e,this.targetId),at.addWebClients(e,s),at.addProcedureStore(e,o),at.addServerReply(e,l),at.addScreenshot(e,u),at.addPackage(e,h),at.endMessage(e)}}async function lG(n){try{console.log(&quot;Received ping from server. Replying with FlatBuffer message&quot;);const e=new Mo(1024);at.startMessage(e),at.addInstanceId(e,Ei.instanceId),at.addCommandType(e,Bn.PONG),at.addTargetId(e,n.instanceId()),at.addTargetGroup(e,si.LOCAL),at.addClientType(e,si.WEB),e.finish(at.endMessage(e));const t=e.asUint8Array();await Ei.sendMessage(t)}catch(e){console.error(&quot;Error replying to ping:&quot;,e)}}const mc=re.createRef(),mS=re.createRef(),gc=re.createRef(),Zs=re.createRef(),gS=re.createRef(),bi=re.createRef(),Fw=re.createRef(),zw=re.createRef(),Sc=re.createRef(),cG=new ts({color:&quot;blue&quot;,side:Ki}),uG=new ts({color:8421504,metalness:.1,roughness:.5,flatShading:!0,side:Ki});function hG(n,e=!1){const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),s={},o={},l=n[0].morphTargetsRelative,u=new Lt;let h=0;for(let f=0;f&lt;n.length;++f){const p=n[f];let m=0;if(t!==(p.index!==null))return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.&quot;),null;for(const g in p.attributes){if(!i.has(g))return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&#x27;. All geometries must have compatible attributes; make sure &quot;&#x27;+g+&#x27;&quot; attribute exists among all geometries, or in none of them.&#x27;),null;s[g]===void 0&amp;&amp;(s[g]=[]),s[g].push(p.attributes[g]),m++}if(m!==i.size)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. Make sure all geometries have the same number of attributes.&quot;),null;if(l!==p.morphTargetsRelative)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. .morphTargetsRelative must be consistent throughout all geometries.&quot;),null;for(const g in p.morphAttributes){if(!r.has(g))return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;.  .morphAttributes must be consistent throughout all geometries.&quot;),null;o[g]===void 0&amp;&amp;(o[g]=[]),o[g].push(p.morphAttributes[g])}if(e){let g;if(t)g=p.index.count;else if(p.attributes.position!==void 0)g=p.attributes.position.count;else return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index &quot;+f+&quot;. The geometry must have either an index or a position attribute&quot;),null;u.addGroup(h,g,f),h+=g}}if(t){let f=0;const p=[];for(let m=0;m&lt;n.length;++m){const g=n[m].index;for(let v=0;v&lt;g.count;++v)p.push(g.getX(v)+f);f+=n[m].attributes.position.count}u.setIndex(p)}for(const f in s){const p=TC(s[f]);if(!p)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the &quot;+f+&quot; attribute.&quot;),null;u.setAttribute(f,p)}for(const f in o){const p=o[f][0].length;if(p===0)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[f]=[];for(let m=0;m&lt;p;++m){const g=[];for(let x=0;x&lt;o[f].length;++x)g.push(o[f][x][m]);const v=TC(g);if(!v)return console.error(&quot;THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the &quot;+f+&quot; morphAttribute.&quot;),null;u.morphAttributes[f].push(v)}}return u}function TC(n){let e,t,i,r=-1,s=0;for(let h=0;h&lt;n.length;++h){const f=n[h];if(e===void 0&amp;&amp;(e=f.array.constructor),e!==f.array.constructor)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.&quot;),null;if(t===void 0&amp;&amp;(t=f.itemSize),t!==f.itemSize)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.&quot;),null;if(i===void 0&amp;&amp;(i=f.normalized),i!==f.normalized)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.&quot;),null;if(r===-1&amp;&amp;(r=f.gpuType),r!==f.gpuType)return console.error(&quot;THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes.&quot;),null;s+=f.count*t}const o=new e(s),l=new Jt(o,t,i);let u=0;for(let h=0;h&lt;n.length;++h){const f=n[h];if(f.isInterleavedBufferAttribute){const p=u/t;for(let m=0,g=f.count;m&lt;g;m++)for(let v=0;v&lt;t;v++){const x=f.getComponent(m,v);l.setComponent(m+p,v,x)}}else o.set(f.array,u);u+=f.count*t}return r!==void 0&amp;&amp;(l.gpuType=r),l}function MC(n,e){if(e===DD)return console.warn(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.&quot;),n;if(e===E0||e===aw){let t=n.getIndex();if(t===null){const o=[],l=n.getAttribute(&quot;position&quot;);if(l!==void 0){for(let u=0;u&lt;l.count;u++)o.push(u);n.setIndex(o),t=n.getIndex()}else return console.error(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.&quot;),n}const i=t.count-2,r=[];if(e===E0)for(let o=1;o&lt;=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o&lt;i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&amp;&amp;console.error(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.&quot;);const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error(&quot;THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:&quot;,e),n}function fG(n,e){const t=[],i=new Map;let r=0;const s=n.attributes.position;return e.forEach(([l,u],h)=&gt;{const f=n.index.array.slice(l,l+u),p=new Lt;p.setAttribute(&quot;position&quot;,s),p.setIndex(Array.from(f));const m=new mw(p),g=m.attributes.position.count,v=new Float32Array(g).fill(r);m.setAttribute(&quot;rangeId&quot;,new Jt(v,1)),t.push(m),i.set(h,r++)}),{geometry:hG(t,!1),rangeIdToIndex:i}}function dG(n,e){const t=n.capabilities.maxTextureSize,i=Math.min(e,t),r=Math.ceil(e/i),s=new Uint8Array(i*r).fill(255),o=new $s(s,i,r,Gd,es);o.minFilter=xi,o.magFilter=xi,o.wrapS=rr,o.wrapT=rr,o.needsUpdate=!0;const l={uVisibleTex:{value:o},uTexSize:{value:new Oe(i,r)},uHighlighted:{value:-1}},u=`
    attribute float rangeId;
    varying float vRangeId;
    void main() {
      vRangeId = rangeId;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position,1.0);
    }
  `,h=`
    precision mediump float;
    varying float vRangeId;
    uniform sampler2D uVisibleTex;
    uniform vec2 uTexSize;
    uniform int uHighlighted;
    void main(){
      int rid = int(vRangeId + 0.5);
      int x = rid % int(uTexSize.x);
      int y = rid / int(uTexSize.x);
      vec2 uv = (vec2(float(x),float(y)) + 0.5) / uTexSize;
      float vis = texture2D(uVisibleTex,uv).r;
      if(vis &lt; 0.5) discard;
      if(rid == uHighlighted) gl_FragColor = vec4(0,0,1,1);
      else             gl_FragColor = vec4(0,0,0,1);
    }
  `;return new Ts({uniforms:l,vertexShader:u,fragmentShader:h})}class bs extends Sn{constructor(t,i,r,s,o,l){super(t.clone(),i.clone());dt(this,&quot;originalGeometry&quot;);dt(this,&quot;originalMaterial&quot;);dt(this,&quot;drawRanges&quot;);dt(this,&quot;unique_key&quot;);dt(this,&quot;is_design&quot;);dt(this,&quot;ada_ext_data&quot;);dt(this,&quot;selectedRanges&quot;,new Set);dt(this,&quot;hiddenRanges&quot;,new Set);dt(this,&quot;edgeMesh&quot;);dt(this,&quot;rangeIdToIndex&quot;);dt(this,&quot;edgeMaterial&quot;);dt(this,&quot;_raycast_inverseMatrix&quot;,new yt);dt(this,&quot;_raycast_ray&quot;,new bl);dt(this,&quot;_raycast_sphere&quot;,new wi);dt(this,&quot;_raycast_vA&quot;,new Y);dt(this,&quot;_raycast_vB&quot;,new Y);dt(this,&quot;_raycast_vC&quot;,new Y);dt(this,&quot;_raycast_uvA&quot;,new Oe);dt(this,&quot;_raycast_uvB&quot;,new Oe);dt(this,&quot;_raycast_uvC&quot;,new Oe);dt(this,&quot;_raycast_intersectionPoint&quot;,new Y);dt(this,&quot;_raycast_barycoord&quot;,new Y);this.originalGeometry=t,this.originalMaterial=i.clone(),this.drawRanges=r,this.updateGroups(),this.unique_key=s,this.is_design=o,this.ada_ext_data=l}updateGroups(){const t=this.geometry.index.count;this.geometry.clearGroups(),this.material=[this.originalMaterial,cG.clone(),new $i({visible:!1})];const i=Array.from(this.drawRanges.entries()).map(([s,[o,l]])=&gt;({id:s,s:o,c:l})).sort((s,o)=&gt;s.s-o.s);let r=0;for(const{id:s,s:o,c:l}of i){o&gt;r&amp;&amp;this.geometry.addGroup(r,o-r,0);let u=0;this.hiddenRanges.has(s)?u=2:this.selectedRanges.has(s)&amp;&amp;(u=1),this.geometry.addGroup(o,l,u),r=o+l}r&lt;t&amp;&amp;this.geometry.addGroup(r,t-r,0)}getEdgeOverlay(t){if(!this.edgeMesh){const{geometry:i,rangeIdToIndex:r}=fG(this.originalGeometry,this.drawRanges);this.rangeIdToIndex=r,this.updateWorldMatrix(!0,!1);const s=this.matrixWorld;this.edgeMaterial=dG(t,r.size),this.edgeMesh=new Ur(i,this.edgeMaterial),this.edgeMesh.layers.set(1),this.edgeMesh.applyMatrix4(s)}return this.edgeMesh}updateSelectionGroups(t){this.selectedRanges=new Set(t),this.updateGroups(),this.edgeMaterial&amp;&amp;this.rangeIdToIndex&amp;&amp;(this.edgeMaterial.uniforms.uHighlighted.value=t.length?this.rangeIdToIndex.get(t[0]):-1)}clearSelectionGroups(){this.updateSelectionGroups([])}hideBatchDrawRange(t){for(const i of t)this.hiddenRanges.add(i);if(this.updateGroups(),this.edgeMaterial&amp;&amp;this.rangeIdToIndex){const i=this.edgeMaterial.uniforms.uVisibleTex.value;for(const r of t){const s=this.rangeIdToIndex.get(r);s!==void 0&amp;&amp;(i.image.data[s]=0)}i.needsUpdate=!0}}unhideAllDrawRanges(){if(this.hiddenRanges.clear(),this.updateGroups(),this.edgeMaterial){const t=this.edgeMaterial.uniforms.uVisibleTex.value;t.image.data.fill(255),this.edgeMaterial.uniforms.uHighlighted.value=-1,t.needsUpdate=!0}}raycast(t,i){const r=this.material;if(r===void 0)return;this.geometry.boundingSphere===null&amp;&amp;this.geometry.computeBoundingSphere();const s=this._raycast_sphere.copy(this.geometry.boundingSphere);if(s.applyMatrix4(this.matrixWorld),t.ray.intersectsSphere(s)===!1)return;const o=this._raycast_inverseMatrix.copy(this.matrixWorld).invert(),l=this._raycast_ray.copy(t.ray).applyMatrix4(o),h=Array.isArray(r)?r:[r],f=this.geometry.groups;for(let p=0;p&lt;f.length;p++){const m=f[p],g=m.materialIndex!==void 0?h[m.materialIndex]:void 0;g!==void 0&amp;&amp;g.visible!==!1&amp;&amp;this.raycastGroup(l,t,m,g,i)}}raycastGroup(t,i,r,s,o){const l=this.geometry,u=l.index,h=l.attributes.position;if(h===void 0)return;const f=r.start,p=f+r.count;this._raycast_vA,this._raycast_vB,this._raycast_vC;let m;if(u!==null){const g=u.array;for(let v=f;v&lt;p;v+=3){const x=g[v],b=g[v+1],_=g[v+2];m=this.checkBufferGeometryIntersection(this,s,i,t,h,x,b,_,r.materialIndex),m&amp;&amp;(m.faceIndex=Math.floor(v/3),o.push(m))}}else for(let g=f;g&lt;p;g+=3){const v=g,x=g+1,b=g+2;m=this.checkBufferGeometryIntersection(this,s,i,t,h,v,x,b,r.materialIndex),m&amp;&amp;(m.faceIndex=Math.floor(g/3),o.push(m))}}checkBufferGeometryIntersection(t,i,r,s,o,l,u,h,f){const p=this._raycast_vA,m=this._raycast_vB,g=this._raycast_vC,v=this._raycast_intersectionPoint;p.fromBufferAttribute(o,l),m.fromBufferAttribute(o,u),g.fromBufferAttribute(o,h);let x=i.side;x===void 0&amp;&amp;(x=Qr);const b=x===Qr;if(s.intersectTriangle(g,m,p,b,v)===null)return null;v.applyMatrix4(this.matrixWorld);const T=r.ray.origin.distanceTo(v);if(T&lt;r.near||T&gt;r.far)return null;const w=this.geometry.attributes.uv;let E;if(w){const R=this._raycast_uvA.fromBufferAttribute(w,l),N=this._raycast_uvB.fromBufferAttribute(w,u),A=this._raycast_uvC.fromBufferAttribute(w,h);E=this._uvIntersection(p,m,g,R,N,A,v)}return{distance:T,point:v.clone(),object:t,uv:E,face:null,faceIndex:-1}}_uvIntersection(t,i,r,s,o,l,u){const h=_r.getBarycoord(u,t,i,r,this._raycast_barycoord),f=new Oe;return s.multiplyScalar(h.x),o.multiplyScalar(h.y),l.multiplyScalar(h.z),f.add(s).add(o).add(l),f}}function pG(n,e,t,i=!0,r=null){const s=new bs(n.geometry,n.material,e,t,i,r);return s.position.copy(n.position),s.rotation.copy(n.rotation),s.scale.copy(n.scale),s.name=n.name,s.userData=n.userData,s.castShadow=n.castShadow,s.receiveShadow=n.receiveShadow,s.visible=n.visible,s.frustumCulled=n.frustumCulled,s.renderOrder=n.renderOrder,s.layers.mask=n.layers.mask,Array.isArray(s.material)?s.material.forEach(o=&gt;{o instanceof ts?(o.side=Ki,o.flatShading=!0,o.needsUpdate=!0):console.warn(`Material is not an instance of MeshStandardMaterial. Type: ${typeof o}`)}):s.material instanceof ts?(s.material.side=Ki,s.material.flatShading=!0,s.material.needsUpdate=!0):console.warn(`Material is not an instance of MeshStandardMaterial. Type: ${typeof s.material}`),s}function mG(n){n.traverse(e=&gt;{if(e instanceof Sn){const t=e.material,i=Array.isArray(t)?t:[t];i.forEach((r,s)=&gt;{if(r instanceof Oi){let o=!1;if(r instanceof $i||r instanceof ts||r instanceof Py||r instanceof cl||r instanceof rs||r instanceof Sw){const l=r.color,u=r.emissive;l.equals(new $e(0))&amp;&amp;u.equals(new $e(0))&amp;&amp;(o=!0)}o&amp;&amp;(i[s]=uG),i[s].flatShading=!0}}),e.material=Array.isArray(t)?i:i[0]}})}const gl=Eo(n=&gt;({hasAnimation:!1,selectedAnimation:&quot;&quot;,currentKey:0,isPlaying:!1,isControlsVisible:!1,setCurrentKey:e=&gt;{n({currentKey:e})},setSelectedAnimation:e=&gt;{n({selectedAnimation:e})},setHasAnimation:e=&gt;{n({hasAnimation:e})},setIsPlaying:e=&gt;{n({isPlaying:e})},setIsControlsVisible:e=&gt;{n({isControlsVisible:e})}}));function gG(n,e){const t=n.geometry,i=t.attributes.position,r=t.morphAttributes.position,s=t.morphTargetsRelative,o=n.morphTargetInfluences,l=n.morphTargetDictionary,u=e.geometry,h=u.attributes.position;let f=u.index;if(!f){const m=i.array,g=m.length/3,v=new Map;for(let T=0;T&lt;g;T++){const w=`${m[3*T]}_${m[3*T+1]}_${m[3*T+2]}`;v.set(w,T)}const x=h.array,b=x.length/3,_=new(g&gt;65535?Uint32Array:Uint16Array)(b);for(let T=0;T&lt;b;T++){const w=`${x[3*T]}_${x[3*T+1]}_${x[3*T+2]}`,E=v.get(w);if(E===void 0)throw new Error(`Cannot infer index for line-vertex ${T}: no matching mesh-vertex found`);_[T]=E}f=new Jt(_,1)}u.setAttribute(&quot;position&quot;,i),u.morphAttributes.position=r,u.morphTargetsRelative=s,u.setIndex(f),e.morphTargetInfluences=o,e.morphTargetDictionary=l;const p=e.material;p.morphTargets=!0,p.needsUpdate=!0,i.needsUpdate=!0}async function yG(n){var t,i;const e=zw.current;if(!e)return null;if(e.simulation_objects)for(const r of e.simulation_objects){const s=(t=r.node_references)==null?void 0:t.faces;if(n.name==s||((i=n.userData)==null?void 0:i.name)==s)return r}return null}async function _G(n){var t,i;const e=zw.current;if(!e)return null;if(e.design_objects)for(const r of e.design_objects){const s=(t=r.node_references)==null?void 0:t.faces;if(n.name==s||((i=n.userData)==null?void 0:i.name)==s)return r}return null}async function qN({gltf_scene:n,hash:e}){var r;eo.getState();const t=Bc.getState(),i=[];n.traverse(s=&gt;{s instanceof Sn?i.push({original:s,parent:s.parent}):(s instanceof Ur||s instanceof _y)&amp;&amp;s.layers.set(1)});for(const{original:s,parent:o}of i){const l=s.name;let u=n.userData[`draw_ranges_${l}`];const h=(r=s.userData)==null?void 0:r.node_id;!u&amp;&amp;h&amp;&amp;(u=n.userData[`draw_ranges_node${h}`]),u||console.warn(`No draw ranges found for mesh: ${l}`);const f=new Map;if(u)for(const[b,[_,T]]of Object.entries(u))f.set(b,[_,T]);const p=await _G(s),m=await yG(s);let g=!1;m==null&amp;&amp;p==null?g=!0:m!=null?g=!1:p!=null&amp;&amp;(g=!0);const x=pG(s,f,e,g,g?p:m);if(t.showEdges&amp;&amp;f.size&amp;&amp;g&amp;&amp;gc.current&amp;&amp;o.add(x.getEdgeOverlay(gc.current)),o.add(x),gl.getState().hasAnimation&amp;&amp;!g){const b=s.children[0];try{gG(x,b)}catch(_){console.error(&quot;Error assigning morph to edge:&quot;,_)}o.add(b)}o.remove(s)}mG(n)}async function vG(n){var _;if(!Zs.current)return;let t=n.indices,i=n.vertices;if(!(t&amp;&amp;i)){console.warn(&quot;Invalid mesh data: missing vertices or indices&quot;);return}let r=new Lt,s=new Float32Array(i),o=new Uint16Array(t);r.setAttribute(&quot;position&quot;,new Jt(s,3)),r.setIndex(new Jt(o,1)),r.computeVertexNormals();let l=new ts({color:8421504,metalness:.5,roughness:.5}),u=new Sn(r,l);n.name&amp;&amp;(u.name=n.name);let h=(_=u.geometry.index)==null?void 0:_.array.length;if(!h){console.warn(&quot;Unable to find mesh array length&quot;);return}let f=eo.getState().userdata;f||(console.warn(&quot;No userdata found&quot;),f={id_hierarchy:{}});let p=f.id_hierarchy,g=(Math.max(...Object.keys(p).map(Number))+1).toString();f[`draw_ranges_${u.name}`]={[g]:[0,h]},f.id_hierarchy[g]=[u.name,0],new Map().set(g,[0,h]);const x=new br;x.name=u.name,x.add(u);const b=x.name+&quot;_&quot;+x.uuid;await qN({gltf_scene:x,hash:b}),console.log(&quot;Mesh added to scene&quot;)}function Dh(n){let e=n.length;for(;--e&gt;=0;)n[e]=0}const bG=3,xG=258,YN=29,SG=256,wG=SG+1+YN,KN=30,EG=512,TG=new Array((wG+2)*2);Dh(TG);const MG=new Array(KN*2);Dh(MG);const AG=new Array(EG);Dh(AG);const CG=new Array(xG-bG+1);Dh(CG);const RG=new Array(YN);Dh(RG);const OG=new Array(KN);Dh(OG);const DG=(n,e,t,i)=&gt;{let r=n&amp;65535|0,s=n&gt;&gt;&gt;16&amp;65535|0,o=0;for(;t!==0;){o=t&gt;2e3?2e3:t,t-=o;do r=r+e[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s&lt;&lt;16|0};var yS=DG;const NG=()=&gt;{let n,e=[];for(var t=0;t&lt;256;t++){n=t;for(var i=0;i&lt;8;i++)n=n&amp;1?3988292384^n&gt;&gt;&gt;1:n&gt;&gt;&gt;1;e[t]=n}return e},IG=new Uint32Array(NG()),PG=(n,e,t,i)=&gt;{const r=IG,s=i+t;n^=-1;for(let o=i;o&lt;s;o++)n=n&gt;&gt;&gt;8^r[(n^e[o])&amp;255];return n^-1};var co=PG,_S={2:&quot;need dictionary&quot;,1:&quot;stream end&quot;,0:&quot;&quot;,&quot;-1&quot;:&quot;file error&quot;,&quot;-2&quot;:&quot;stream error&quot;,&quot;-3&quot;:&quot;data error&quot;,&quot;-4&quot;:&quot;insufficient memory&quot;,&quot;-5&quot;:&quot;buffer error&quot;,&quot;-6&quot;:&quot;incompatible version&quot;},$N={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const LG=(n,e)=&gt;Object.prototype.hasOwnProperty.call(n,e);var UG=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!=&quot;object&quot;)throw new TypeError(t+&quot;must be non-object&quot;);for(const i in t)LG(t,i)&amp;&amp;(n[i]=t[i])}}return n},kG=n=&gt;{let e=0;for(let i=0,r=n.length;i&lt;r;i++)e+=n[i].length;const t=new Uint8Array(e);for(let i=0,r=0,s=n.length;i&lt;s;i++){let o=n[i];t.set(o,r),r+=o.length}return t},ZN={assign:UG,flattenChunks:kG};let JN=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{JN=!1}const Rd=new Uint8Array(256);for(let n=0;n&lt;256;n++)Rd[n]=n&gt;=252?6:n&gt;=248?5:n&gt;=240?4:n&gt;=224?3:n&gt;=192?2:1;Rd[254]=Rd[254]=1;var FG=n=&gt;{if(typeof TextEncoder==&quot;function&quot;&amp;&amp;TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,i,r,s,o=n.length,l=0;for(r=0;r&lt;o;r++)t=n.charCodeAt(r),(t&amp;64512)===55296&amp;&amp;r+1&lt;o&amp;&amp;(i=n.charCodeAt(r+1),(i&amp;64512)===56320&amp;&amp;(t=65536+(t-55296&lt;&lt;10)+(i-56320),r++)),l+=t&lt;128?1:t&lt;2048?2:t&lt;65536?3:4;for(e=new Uint8Array(l),s=0,r=0;s&lt;l;r++)t=n.charCodeAt(r),(t&amp;64512)===55296&amp;&amp;r+1&lt;o&amp;&amp;(i=n.charCodeAt(r+1),(i&amp;64512)===56320&amp;&amp;(t=65536+(t-55296&lt;&lt;10)+(i-56320),r++)),t&lt;128?e[s++]=t:t&lt;2048?(e[s++]=192|t&gt;&gt;&gt;6,e[s++]=128|t&amp;63):t&lt;65536?(e[s++]=224|t&gt;&gt;&gt;12,e[s++]=128|t&gt;&gt;&gt;6&amp;63,e[s++]=128|t&amp;63):(e[s++]=240|t&gt;&gt;&gt;18,e[s++]=128|t&gt;&gt;&gt;12&amp;63,e[s++]=128|t&gt;&gt;&gt;6&amp;63,e[s++]=128|t&amp;63);return e};const zG=(n,e)=&gt;{if(e&lt;65534&amp;&amp;n.subarray&amp;&amp;JN)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t=&quot;&quot;;for(let i=0;i&lt;e;i++)t+=String.fromCharCode(n[i]);return t};var BG=(n,e)=&gt;{const t=e||n.length;if(typeof TextDecoder==&quot;function&quot;&amp;&amp;TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let i,r;const s=new Array(t*2);for(r=0,i=0;i&lt;t;){let o=n[i++];if(o&lt;128){s[r++]=o;continue}let l=Rd[o];if(l&gt;4){s[r++]=65533,i+=l-1;continue}for(o&amp;=l===2?31:l===3?15:7;l&gt;1&amp;&amp;i&lt;t;)o=o&lt;&lt;6|n[i++]&amp;63,l--;if(l&gt;1){s[r++]=65533;continue}o&lt;65536?s[r++]=o:(o-=65536,s[r++]=55296|o&gt;&gt;10&amp;1023,s[r++]=56320|o&amp;1023)}return zG(s,r)},HG=(n,e)=&gt;{e=e||n.length,e&gt;n.length&amp;&amp;(e=n.length);let t=e-1;for(;t&gt;=0&amp;&amp;(n[t]&amp;192)===128;)t--;return t&lt;0||t===0?e:t+Rd[n[t]]&gt;e?t:e},vS={string2buf:FG,buf2string:BG,utf8border:HG};function VG(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=&quot;&quot;,this.state=null,this.data_type=2,this.adler=0}var GG=VG;const $m=16209,jG=16191;var WG=function(e,t){let i,r,s,o,l,u,h,f,p,m,g,v,x,b,_,T,w,E,R,N,A,D,C,O;const L=e.state;i=e.next_in,C=e.input,r=i+(e.avail_in-5),s=e.next_out,O=e.output,o=s-(t-e.avail_out),l=s+(e.avail_out-257),u=L.dmax,h=L.wsize,f=L.whave,p=L.wnext,m=L.window,g=L.hold,v=L.bits,x=L.lencode,b=L.distcode,_=(1&lt;&lt;L.lenbits)-1,T=(1&lt;&lt;L.distbits)-1;e:do{v&lt;15&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8,g+=C[i++]&lt;&lt;v,v+=8),w=x[g&amp;_];t:for(;;){if(E=w&gt;&gt;&gt;24,g&gt;&gt;&gt;=E,v-=E,E=w&gt;&gt;&gt;16&amp;255,E===0)O[s++]=w&amp;65535;else if(E&amp;16){R=w&amp;65535,E&amp;=15,E&amp;&amp;(v&lt;E&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8),R+=g&amp;(1&lt;&lt;E)-1,g&gt;&gt;&gt;=E,v-=E),v&lt;15&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8,g+=C[i++]&lt;&lt;v,v+=8),w=b[g&amp;T];n:for(;;){if(E=w&gt;&gt;&gt;24,g&gt;&gt;&gt;=E,v-=E,E=w&gt;&gt;&gt;16&amp;255,E&amp;16){if(N=w&amp;65535,E&amp;=15,v&lt;E&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8,v&lt;E&amp;&amp;(g+=C[i++]&lt;&lt;v,v+=8)),N+=g&amp;(1&lt;&lt;E)-1,N&gt;u){e.msg=&quot;invalid distance too far back&quot;,L.mode=$m;break e}if(g&gt;&gt;&gt;=E,v-=E,E=s-o,N&gt;E){if(E=N-E,E&gt;f&amp;&amp;L.sane){e.msg=&quot;invalid distance too far back&quot;,L.mode=$m;break e}if(A=0,D=m,p===0){if(A+=h-E,E&lt;R){R-=E;do O[s++]=m[A++];while(--E);A=s-N,D=O}}else if(p&lt;E){if(A+=h+p-E,E-=p,E&lt;R){R-=E;do O[s++]=m[A++];while(--E);if(A=0,p&lt;R){E=p,R-=E;do O[s++]=m[A++];while(--E);A=s-N,D=O}}}else if(A+=p-E,E&lt;R){R-=E;do O[s++]=m[A++];while(--E);A=s-N,D=O}for(;R&gt;2;)O[s++]=D[A++],O[s++]=D[A++],O[s++]=D[A++],R-=3;R&amp;&amp;(O[s++]=D[A++],R&gt;1&amp;&amp;(O[s++]=D[A++]))}else{A=s-N;do O[s++]=O[A++],O[s++]=O[A++],O[s++]=O[A++],R-=3;while(R&gt;2);R&amp;&amp;(O[s++]=O[A++],R&gt;1&amp;&amp;(O[s++]=O[A++]))}}else if((E&amp;64)===0){w=b[(w&amp;65535)+(g&amp;(1&lt;&lt;E)-1)];continue n}else{e.msg=&quot;invalid distance code&quot;,L.mode=$m;break e}break}}else if((E&amp;64)===0){w=x[(w&amp;65535)+(g&amp;(1&lt;&lt;E)-1)];continue t}else if(E&amp;32){L.mode=jG;break e}else{e.msg=&quot;invalid literal/length code&quot;,L.mode=$m;break e}break}}while(i&lt;r&amp;&amp;s&lt;l);R=v&gt;&gt;3,i-=R,v-=R&lt;&lt;3,g&amp;=(1&lt;&lt;v)-1,e.next_in=i,e.next_out=s,e.avail_in=i&lt;r?5+(r-i):5-(i-r),e.avail_out=s&lt;l?257+(l-s):257-(s-l),L.hold=g,L.bits=v};const Lu=15,AC=852,CC=592,RC=0,Jb=1,OC=2,XG=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),qG=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),YG=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),KG=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),$G=(n,e,t,i,r,s,o,l)=&gt;{const u=l.bits;let h=0,f=0,p=0,m=0,g=0,v=0,x=0,b=0,_=0,T=0,w,E,R,N,A,D=null,C;const O=new Uint16Array(Lu+1),L=new Uint16Array(Lu+1);let V=null,Z,z,K;for(h=0;h&lt;=Lu;h++)O[h]=0;for(f=0;f&lt;i;f++)O[e[t+f]]++;for(g=u,m=Lu;m&gt;=1&amp;&amp;O[m]===0;m--);if(g&gt;m&amp;&amp;(g=m),m===0)return r[s++]=1&lt;&lt;24|64&lt;&lt;16|0,r[s++]=1&lt;&lt;24|64&lt;&lt;16|0,l.bits=1,0;for(p=1;p&lt;m&amp;&amp;O[p]===0;p++);for(g&lt;p&amp;&amp;(g=p),b=1,h=1;h&lt;=Lu;h++)if(b&lt;&lt;=1,b-=O[h],b&lt;0)return-1;if(b&gt;0&amp;&amp;(n===RC||m!==1))return-1;for(L[1]=0,h=1;h&lt;Lu;h++)L[h+1]=L[h]+O[h];for(f=0;f&lt;i;f++)e[t+f]!==0&amp;&amp;(o[L[e[t+f]]++]=f);if(n===RC?(D=V=o,C=20):n===Jb?(D=XG,V=qG,C=257):(D=YG,V=KG,C=0),T=0,f=0,h=p,A=s,v=g,x=0,R=-1,_=1&lt;&lt;g,N=_-1,n===Jb&amp;&amp;_&gt;AC||n===OC&amp;&amp;_&gt;CC)return 1;for(;;){Z=h-x,o[f]+1&lt;C?(z=0,K=o[f]):o[f]&gt;=C?(z=V[o[f]-C],K=D[o[f]-C]):(z=96,K=0),w=1&lt;&lt;h-x,E=1&lt;&lt;v,p=E;do E-=w,r[A+(T&gt;&gt;x)+E]=Z&lt;&lt;24|z&lt;&lt;16|K|0;while(E!==0);for(w=1&lt;&lt;h-1;T&amp;w;)w&gt;&gt;=1;if(w!==0?(T&amp;=w-1,T+=w):T=0,f++,--O[h]===0){if(h===m)break;h=e[t+o[f]]}if(h&gt;g&amp;&amp;(T&amp;N)!==R){for(x===0&amp;&amp;(x=g),A+=p,v=h-x,b=1&lt;&lt;v;v+x&lt;m&amp;&amp;(b-=O[v+x],!(b&lt;=0));)v++,b&lt;&lt;=1;if(_+=1&lt;&lt;v,n===Jb&amp;&amp;_&gt;AC||n===OC&amp;&amp;_&gt;CC)return 1;R=T&amp;N,r[R]=g&lt;&lt;24|v&lt;&lt;16|A-s|0}}return T!==0&amp;&amp;(r[A+T]=h-x&lt;&lt;24|64&lt;&lt;16|0),l.bits=g,0};var hd=$G;const ZG=0,QN=1,eI=2,{Z_FINISH:DC,Z_BLOCK:JG,Z_TREES:Zm,Z_OK:Rc,Z_STREAM_END:QG,Z_NEED_DICT:e6,Z_STREAM_ERROR:Ms,Z_DATA_ERROR:tI,Z_MEM_ERROR:nI,Z_BUF_ERROR:t6,Z_DEFLATED:NC}=$N,Hy=16180,IC=16181,PC=16182,LC=16183,UC=16184,kC=16185,FC=16186,zC=16187,BC=16188,HC=16189,D0=16190,Ko=16191,Qb=16192,VC=16193,ex=16194,GC=16195,jC=16196,WC=16197,XC=16198,Jm=16199,Qm=16200,qC=16201,YC=16202,KC=16203,$C=16204,ZC=16205,tx=16206,JC=16207,QC=16208,qn=16209,iI=16210,rI=16211,n6=852,i6=592,r6=15,s6=r6,eR=n=&gt;(n&gt;&gt;&gt;24&amp;255)+(n&gt;&gt;&gt;8&amp;65280)+((n&amp;65280)&lt;&lt;8)+((n&amp;255)&lt;&lt;24);function o6(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const zc=n=&gt;{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode&lt;Hy||e.mode&gt;rI?1:0},sI=n=&gt;{if(zc(n))return Ms;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg=&quot;&quot;,e.wrap&amp;&amp;(n.adler=e.wrap&amp;1),e.mode=Hy,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(n6),e.distcode=e.distdyn=new Int32Array(i6),e.sane=1,e.back=-1,Rc},oI=n=&gt;{if(zc(n))return Ms;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,sI(n)},aI=(n,e)=&gt;{let t;if(zc(n))return Ms;const i=n.state;return e&lt;0?(t=0,e=-e):(t=(e&gt;&gt;4)+5,e&lt;48&amp;&amp;(e&amp;=15)),e&amp;&amp;(e&lt;8||e&gt;15)?Ms:(i.window!==null&amp;&amp;i.wbits!==e&amp;&amp;(i.window=null),i.wrap=t,i.wbits=e,oI(n))},lI=(n,e)=&gt;{if(!n)return Ms;const t=new o6;n.state=t,t.strm=n,t.window=null,t.mode=Hy;const i=aI(n,e);return i!==Rc&amp;&amp;(n.state=null),i},a6=n=&gt;lI(n,s6);let tR=!0,nx,ix;const l6=n=&gt;{if(tR){nx=new Int32Array(512),ix=new Int32Array(32);let e=0;for(;e&lt;144;)n.lens[e++]=8;for(;e&lt;256;)n.lens[e++]=9;for(;e&lt;280;)n.lens[e++]=7;for(;e&lt;288;)n.lens[e++]=8;for(hd(QN,n.lens,0,288,nx,0,n.work,{bits:9}),e=0;e&lt;32;)n.lens[e++]=5;hd(eI,n.lens,0,32,ix,0,n.work,{bits:5}),tR=!1}n.lencode=nx,n.lenbits=9,n.distcode=ix,n.distbits=5},cI=(n,e,t,i)=&gt;{let r;const s=n.state;return s.window===null&amp;&amp;(s.wsize=1&lt;&lt;s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i&gt;=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r&gt;i&amp;&amp;(r=i),s.window.set(e.subarray(t-i,t-i+r),s.wnext),i-=r,i?(s.window.set(e.subarray(t-i,t),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&amp;&amp;(s.wnext=0),s.whave&lt;s.wsize&amp;&amp;(s.whave+=r))),0},c6=(n,e)=&gt;{let t,i,r,s,o,l,u,h,f,p,m,g,v,x,b=0,_,T,w,E,R,N,A,D;const C=new Uint8Array(4);let O,L;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(zc(n)||!n.output||!n.input&amp;&amp;n.avail_in!==0)return Ms;t=n.state,t.mode===Ko&amp;&amp;(t.mode=Qb),o=n.next_out,r=n.output,u=n.avail_out,s=n.next_in,i=n.input,l=n.avail_in,h=t.hold,f=t.bits,p=l,m=u,D=Rc;e:for(;;)switch(t.mode){case Hy:if(t.wrap===0){t.mode=Qb;break}for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.wrap&amp;2&amp;&amp;h===35615){t.wbits===0&amp;&amp;(t.wbits=15),t.check=0,C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,t.check=co(t.check,C,2,0),h=0,f=0,t.mode=IC;break}if(t.head&amp;&amp;(t.head.done=!1),!(t.wrap&amp;1)||(((h&amp;255)&lt;&lt;8)+(h&gt;&gt;8))%31){n.msg=&quot;incorrect header check&quot;,t.mode=qn;break}if((h&amp;15)!==NC){n.msg=&quot;unknown compression method&quot;,t.mode=qn;break}if(h&gt;&gt;&gt;=4,f-=4,A=(h&amp;15)+8,t.wbits===0&amp;&amp;(t.wbits=A),A&gt;15||A&gt;t.wbits){n.msg=&quot;invalid window size&quot;,t.mode=qn;break}t.dmax=1&lt;&lt;t.wbits,t.flags=0,n.adler=t.check=1,t.mode=h&amp;512?HC:Ko,h=0,f=0;break;case IC:for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.flags=h,(t.flags&amp;255)!==NC){n.msg=&quot;unknown compression method&quot;,t.mode=qn;break}if(t.flags&amp;57344){n.msg=&quot;unknown header flags set&quot;,t.mode=qn;break}t.head&amp;&amp;(t.head.text=h&gt;&gt;8&amp;1),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,t.check=co(t.check,C,2,0)),h=0,f=0,t.mode=PC;case PC:for(;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.head&amp;&amp;(t.head.time=h),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,C[2]=h&gt;&gt;&gt;16&amp;255,C[3]=h&gt;&gt;&gt;24&amp;255,t.check=co(t.check,C,4,0)),h=0,f=0,t.mode=LC;case LC:for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.head&amp;&amp;(t.head.xflags=h&amp;255,t.head.os=h&gt;&gt;8),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,t.check=co(t.check,C,2,0)),h=0,f=0,t.mode=UC;case UC:if(t.flags&amp;1024){for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.length=h,t.head&amp;&amp;(t.head.extra_len=h),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(C[0]=h&amp;255,C[1]=h&gt;&gt;&gt;8&amp;255,t.check=co(t.check,C,2,0)),h=0,f=0}else t.head&amp;&amp;(t.head.extra=null);t.mode=kC;case kC:if(t.flags&amp;1024&amp;&amp;(g=t.length,g&gt;l&amp;&amp;(g=l),g&amp;&amp;(t.head&amp;&amp;(A=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(s,s+g),A)),t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(t.check=co(t.check,i,g,s)),l-=g,s+=g,t.length-=g),t.length))break e;t.length=0,t.mode=FC;case FC:if(t.flags&amp;2048){if(l===0)break e;g=0;do A=i[s+g++],t.head&amp;&amp;A&amp;&amp;t.length&lt;65536&amp;&amp;(t.head.name+=String.fromCharCode(A));while(A&amp;&amp;g&lt;l);if(t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(t.check=co(t.check,i,g,s)),l-=g,s+=g,A)break e}else t.head&amp;&amp;(t.head.name=null);t.length=0,t.mode=zC;case zC:if(t.flags&amp;4096){if(l===0)break e;g=0;do A=i[s+g++],t.head&amp;&amp;A&amp;&amp;t.length&lt;65536&amp;&amp;(t.head.comment+=String.fromCharCode(A));while(A&amp;&amp;g&lt;l);if(t.flags&amp;512&amp;&amp;t.wrap&amp;4&amp;&amp;(t.check=co(t.check,i,g,s)),l-=g,s+=g,A)break e}else t.head&amp;&amp;(t.head.comment=null);t.mode=BC;case BC:if(t.flags&amp;512){for(;f&lt;16;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.wrap&amp;4&amp;&amp;h!==(t.check&amp;65535)){n.msg=&quot;header crc mismatch&quot;,t.mode=qn;break}h=0,f=0}t.head&amp;&amp;(t.head.hcrc=t.flags&gt;&gt;9&amp;1,t.head.done=!0),n.adler=t.check=0,t.mode=Ko;break;case HC:for(;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}n.adler=t.check=eR(h),h=0,f=0,t.mode=D0;case D0:if(t.havedict===0)return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=l,t.hold=h,t.bits=f,e6;n.adler=t.check=1,t.mode=Ko;case Ko:if(e===JG||e===Zm)break e;case Qb:if(t.last){h&gt;&gt;&gt;=f&amp;7,f-=f&amp;7,t.mode=tx;break}for(;f&lt;3;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}switch(t.last=h&amp;1,h&gt;&gt;&gt;=1,f-=1,h&amp;3){case 0:t.mode=VC;break;case 1:if(l6(t),t.mode=Jm,e===Zm){h&gt;&gt;&gt;=2,f-=2;break e}break;case 2:t.mode=jC;break;case 3:n.msg=&quot;invalid block type&quot;,t.mode=qn}h&gt;&gt;&gt;=2,f-=2;break;case VC:for(h&gt;&gt;&gt;=f&amp;7,f-=f&amp;7;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if((h&amp;65535)!==(h&gt;&gt;&gt;16^65535)){n.msg=&quot;invalid stored block lengths&quot;,t.mode=qn;break}if(t.length=h&amp;65535,h=0,f=0,t.mode=ex,e===Zm)break e;case ex:t.mode=GC;case GC:if(g=t.length,g){if(g&gt;l&amp;&amp;(g=l),g&gt;u&amp;&amp;(g=u),g===0)break e;r.set(i.subarray(s,s+g),o),l-=g,s+=g,u-=g,o+=g,t.length-=g;break}t.mode=Ko;break;case jC:for(;f&lt;14;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.nlen=(h&amp;31)+257,h&gt;&gt;&gt;=5,f-=5,t.ndist=(h&amp;31)+1,h&gt;&gt;&gt;=5,f-=5,t.ncode=(h&amp;15)+4,h&gt;&gt;&gt;=4,f-=4,t.nlen&gt;286||t.ndist&gt;30){n.msg=&quot;too many length or distance symbols&quot;,t.mode=qn;break}t.have=0,t.mode=WC;case WC:for(;t.have&lt;t.ncode;){for(;f&lt;3;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.lens[V[t.have++]]=h&amp;7,h&gt;&gt;&gt;=3,f-=3}for(;t.have&lt;19;)t.lens[V[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,O={bits:t.lenbits},D=hd(ZG,t.lens,0,19,t.lencode,0,t.work,O),t.lenbits=O.bits,D){n.msg=&quot;invalid code lengths set&quot;,t.mode=qn;break}t.have=0,t.mode=XC;case XC:for(;t.have&lt;t.nlen+t.ndist;){for(;b=t.lencode[h&amp;(1&lt;&lt;t.lenbits)-1],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(w&lt;16)h&gt;&gt;&gt;=_,f-=_,t.lens[t.have++]=w;else{if(w===16){for(L=_+2;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(h&gt;&gt;&gt;=_,f-=_,t.have===0){n.msg=&quot;invalid bit length repeat&quot;,t.mode=qn;break}A=t.lens[t.have-1],g=3+(h&amp;3),h&gt;&gt;&gt;=2,f-=2}else if(w===17){for(L=_+3;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=_,f-=_,A=0,g=3+(h&amp;7),h&gt;&gt;&gt;=3,f-=3}else{for(L=_+7;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=_,f-=_,A=0,g=11+(h&amp;127),h&gt;&gt;&gt;=7,f-=7}if(t.have+g&gt;t.nlen+t.ndist){n.msg=&quot;invalid bit length repeat&quot;,t.mode=qn;break}for(;g--;)t.lens[t.have++]=A}}if(t.mode===qn)break;if(t.lens[256]===0){n.msg=&quot;invalid code -- missing end-of-block&quot;,t.mode=qn;break}if(t.lenbits=9,O={bits:t.lenbits},D=hd(QN,t.lens,0,t.nlen,t.lencode,0,t.work,O),t.lenbits=O.bits,D){n.msg=&quot;invalid literal/lengths set&quot;,t.mode=qn;break}if(t.distbits=6,t.distcode=t.distdyn,O={bits:t.distbits},D=hd(eI,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,O),t.distbits=O.bits,D){n.msg=&quot;invalid distances set&quot;,t.mode=qn;break}if(t.mode=Jm,e===Zm)break e;case Jm:t.mode=Qm;case Qm:if(l&gt;=6&amp;&amp;u&gt;=258){n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=l,t.hold=h,t.bits=f,WG(n,m),o=n.next_out,r=n.output,u=n.avail_out,s=n.next_in,i=n.input,l=n.avail_in,h=t.hold,f=t.bits,t.mode===Ko&amp;&amp;(t.back=-1);break}for(t.back=0;b=t.lencode[h&amp;(1&lt;&lt;t.lenbits)-1],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(T&amp;&amp;(T&amp;240)===0){for(E=_,R=T,N=w;b=t.lencode[N+((h&amp;(1&lt;&lt;E+R)-1)&gt;&gt;E)],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(E+_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=E,f-=E,t.back+=E}if(h&gt;&gt;&gt;=_,f-=_,t.back+=_,t.length=w,T===0){t.mode=ZC;break}if(T&amp;32){t.back=-1,t.mode=Ko;break}if(T&amp;64){n.msg=&quot;invalid literal/length code&quot;,t.mode=qn;break}t.extra=T&amp;15,t.mode=qC;case qC:if(t.extra){for(L=t.extra;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.length+=h&amp;(1&lt;&lt;t.extra)-1,h&gt;&gt;&gt;=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=YC;case YC:for(;b=t.distcode[h&amp;(1&lt;&lt;t.distbits)-1],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if((T&amp;240)===0){for(E=_,R=T,N=w;b=t.distcode[N+((h&amp;(1&lt;&lt;E+R)-1)&gt;&gt;E)],_=b&gt;&gt;&gt;24,T=b&gt;&gt;&gt;16&amp;255,w=b&amp;65535,!(E+_&lt;=f);){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}h&gt;&gt;&gt;=E,f-=E,t.back+=E}if(h&gt;&gt;&gt;=_,f-=_,t.back+=_,T&amp;64){n.msg=&quot;invalid distance code&quot;,t.mode=qn;break}t.offset=w,t.extra=T&amp;15,t.mode=KC;case KC:if(t.extra){for(L=t.extra;f&lt;L;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}t.offset+=h&amp;(1&lt;&lt;t.extra)-1,h&gt;&gt;&gt;=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset&gt;t.dmax){n.msg=&quot;invalid distance too far back&quot;,t.mode=qn;break}t.mode=$C;case $C:if(u===0)break e;if(g=m-u,t.offset&gt;g){if(g=t.offset-g,g&gt;t.whave&amp;&amp;t.sane){n.msg=&quot;invalid distance too far back&quot;,t.mode=qn;break}g&gt;t.wnext?(g-=t.wnext,v=t.wsize-g):v=t.wnext-g,g&gt;t.length&amp;&amp;(g=t.length),x=t.window}else x=r,v=o-t.offset,g=t.length;g&gt;u&amp;&amp;(g=u),u-=g,t.length-=g;do r[o++]=x[v++];while(--g);t.length===0&amp;&amp;(t.mode=Qm);break;case ZC:if(u===0)break e;r[o++]=t.length,u--,t.mode=Qm;break;case tx:if(t.wrap){for(;f&lt;32;){if(l===0)break e;l--,h|=i[s++]&lt;&lt;f,f+=8}if(m-=u,n.total_out+=m,t.total+=m,t.wrap&amp;4&amp;&amp;m&amp;&amp;(n.adler=t.check=t.flags?co(t.check,r,m,o-m):yS(t.check,r,m,o-m)),m=u,t.wrap&amp;4&amp;&amp;(t.flags?h:eR(h))!==t.check){n.msg=&quot;incorrect data check&quot;,t.mode=qn;break}h=0,f=0}t.mode=JC;case JC:if(t.wrap&amp;&amp;t.flags){for(;f&lt;32;){if(l===0)break e;l--,h+=i[s++]&lt;&lt;f,f+=8}if(t.wrap&amp;4&amp;&amp;h!==(t.total&amp;4294967295)){n.msg=&quot;incorrect length check&quot;,t.mode=qn;break}h=0,f=0}t.mode=QC;case QC:D=QG;break e;case qn:D=tI;break e;case iI:return nI;case rI:default:return Ms}return n.next_out=o,n.avail_out=u,n.next_in=s,n.avail_in=l,t.hold=h,t.bits=f,(t.wsize||m!==n.avail_out&amp;&amp;t.mode&lt;qn&amp;&amp;(t.mode&lt;tx||e!==DC))&amp;&amp;cI(n,n.output,n.next_out,m-n.avail_out),p-=n.avail_in,m-=n.avail_out,n.total_in+=p,n.total_out+=m,t.total+=m,t.wrap&amp;4&amp;&amp;m&amp;&amp;(n.adler=t.check=t.flags?co(t.check,r,m,n.next_out-m):yS(t.check,r,m,n.next_out-m)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Ko?128:0)+(t.mode===Jm||t.mode===ex?256:0),(p===0&amp;&amp;m===0||e===DC)&amp;&amp;D===Rc&amp;&amp;(D=t6),D},u6=n=&gt;{if(zc(n))return Ms;let e=n.state;return e.window&amp;&amp;(e.window=null),n.state=null,Rc},h6=(n,e)=&gt;{if(zc(n))return Ms;const t=n.state;return(t.wrap&amp;2)===0?Ms:(t.head=e,e.done=!1,Rc)},f6=(n,e)=&gt;{const t=e.length;let i,r,s;return zc(n)||(i=n.state,i.wrap!==0&amp;&amp;i.mode!==D0)?Ms:i.mode===D0&amp;&amp;(r=1,r=yS(r,e,t,0),r!==i.check)?tI:(s=cI(n,e,t,t),s?(i.mode=iI,nI):(i.havedict=1,Rc))};var d6=oI,p6=aI,m6=sI,g6=a6,y6=lI,_6=c6,v6=u6,b6=h6,x6=f6,S6=&quot;pako inflate (from Nodeca project)&quot;,ea={inflateReset:d6,inflateReset2:p6,inflateResetKeep:m6,inflateInit:g6,inflateInit2:y6,inflate:_6,inflateEnd:v6,inflateGetHeader:b6,inflateSetDictionary:x6,inflateInfo:S6};function w6(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=&quot;&quot;,this.comment=&quot;&quot;,this.hcrc=0,this.done=!1}var E6=w6;const uI=Object.prototype.toString,{Z_NO_FLUSH:T6,Z_FINISH:M6,Z_OK:Od,Z_STREAM_END:rx,Z_NEED_DICT:sx,Z_STREAM_ERROR:A6,Z_DATA_ERROR:nR,Z_MEM_ERROR:C6}=$N;function Vy(n){this.options=ZN.assign({chunkSize:1024*64,windowBits:15,to:&quot;&quot;},n||{});const e=this.options;e.raw&amp;&amp;e.windowBits&gt;=0&amp;&amp;e.windowBits&lt;16&amp;&amp;(e.windowBits=-e.windowBits,e.windowBits===0&amp;&amp;(e.windowBits=-15)),e.windowBits&gt;=0&amp;&amp;e.windowBits&lt;16&amp;&amp;!(n&amp;&amp;n.windowBits)&amp;&amp;(e.windowBits+=32),e.windowBits&gt;15&amp;&amp;e.windowBits&lt;48&amp;&amp;(e.windowBits&amp;15)===0&amp;&amp;(e.windowBits|=15),this.err=0,this.msg=&quot;&quot;,this.ended=!1,this.chunks=[],this.strm=new GG,this.strm.avail_out=0;let t=ea.inflateInit2(this.strm,e.windowBits);if(t!==Od)throw new Error(_S[t]);if(this.header=new E6,ea.inflateGetHeader(this.strm,this.header),e.dictionary&amp;&amp;(typeof e.dictionary==&quot;string&quot;?e.dictionary=vS.string2buf(e.dictionary):uI.call(e.dictionary)===&quot;[object ArrayBuffer]&quot;&amp;&amp;(e.dictionary=new Uint8Array(e.dictionary)),e.raw&amp;&amp;(t=ea.inflateSetDictionary(this.strm,e.dictionary),t!==Od)))throw new Error(_S[t])}Vy.prototype.push=function(n,e){const t=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?M6:T6,uI.call(n)===&quot;[object ArrayBuffer]&quot;?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&amp;&amp;(t.output=new Uint8Array(i),t.next_out=0,t.avail_out=i),s=ea.inflate(t,o),s===sx&amp;&amp;r&amp;&amp;(s=ea.inflateSetDictionary(t,r),s===Od?s=ea.inflate(t,o):s===nR&amp;&amp;(s=sx));t.avail_in&gt;0&amp;&amp;s===rx&amp;&amp;t.state.wrap&gt;0&amp;&amp;n[t.next_in]!==0;)ea.inflateReset(t),s=ea.inflate(t,o);switch(s){case A6:case nR:case sx:case C6:return this.onEnd(s),this.ended=!0,!1}if(l=t.avail_out,t.next_out&amp;&amp;(t.avail_out===0||s===rx))if(this.options.to===&quot;string&quot;){let u=vS.utf8border(t.output,t.next_out),h=t.next_out-u,f=vS.buf2string(t.output,u);t.next_out=h,t.avail_out=i-h,h&amp;&amp;t.output.set(t.output.subarray(u,u+h),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Od&amp;&amp;l===0)){if(s===rx)return s=ea.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Vy.prototype.onData=function(n){this.chunks.push(n)};Vy.prototype.onEnd=function(n){n===Od&amp;&amp;(this.options.to===&quot;string&quot;?this.result=this.chunks.join(&quot;&quot;):this.result=ZN.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function R6(n,e){const t=new Vy(e);if(t.push(n),t.err)throw t.msg||_S[t.err];return t.result}var O6=R6,D6={ungzip:O6};const{ungzip:N6}=D6;var I6=N6;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hI=Symbol(&quot;Comlink.proxy&quot;),P6=Symbol(&quot;Comlink.endpoint&quot;),L6=Symbol(&quot;Comlink.releaseProxy&quot;),ox=Symbol(&quot;Comlink.finalizer&quot;),Ng=Symbol(&quot;Comlink.thrown&quot;),fI=n=&gt;typeof n==&quot;object&quot;&amp;&amp;n!==null||typeof n==&quot;function&quot;,U6={canHandle:n=&gt;fI(n)&amp;&amp;n[hI],serialize(n){const{port1:e,port2:t}=new MessageChannel;return pI(n,e),[t,[t]]},deserialize(n){return n.start(),gI(n)}},k6={canHandle:n=&gt;fI(n)&amp;&amp;Ng in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},dI=new Map([[&quot;proxy&quot;,U6],[&quot;throw&quot;,k6]]);function F6(n,e){for(const t of n)if(e===t||t===&quot;*&quot;||t instanceof RegExp&amp;&amp;t.test(e))return!0;return!1}function pI(n,e=globalThis,t=[&quot;*&quot;]){e.addEventListener(&quot;message&quot;,function i(r){if(!r||!r.data)return;if(!F6(t,r.origin)){console.warn(`Invalid origin &#x27;${r.origin}&#x27; for comlink proxy`);return}const{id:s,type:o,path:l}=Object.assign({path:[]},r.data),u=(r.data.argumentList||[]).map(lc);let h;try{const f=l.slice(0,-1).reduce((m,g)=&gt;m[g],n),p=l.reduce((m,g)=&gt;m[g],n);switch(o){case&quot;GET&quot;:h=p;break;case&quot;SET&quot;:f[l.slice(-1)[0]]=lc(r.data.value),h=!0;break;case&quot;APPLY&quot;:h=p.apply(f,u);break;case&quot;CONSTRUCT&quot;:{const m=new p(...u);h=j6(m)}break;case&quot;ENDPOINT&quot;:{const{port1:m,port2:g}=new MessageChannel;pI(n,g),h=G6(m,[m])}break;case&quot;RELEASE&quot;:h=void 0;break;default:return}}catch(f){h={value:f,[Ng]:0}}Promise.resolve(h).catch(f=&gt;({value:f,[Ng]:0})).then(f=&gt;{const[p,m]=P0(f);e.postMessage(Object.assign(Object.assign({},p),{id:s}),m),o===&quot;RELEASE&quot;&amp;&amp;(e.removeEventListener(&quot;message&quot;,i),mI(e),ox in n&amp;&amp;typeof n[ox]==&quot;function&quot;&amp;&amp;n[ox]())}).catch(f=&gt;{const[p,m]=P0({value:new TypeError(&quot;Unserializable return value&quot;),[Ng]:0});e.postMessage(Object.assign(Object.assign({},p),{id:s}),m)})}),e.start&amp;&amp;e.start()}function z6(n){return n.constructor.name===&quot;MessagePort&quot;}function mI(n){z6(n)&amp;&amp;n.close()}function gI(n,e){const t=new Map;return n.addEventListener(&quot;message&quot;,function(r){const{data:s}=r;if(!s||!s.id)return;const o=t.get(s.id);if(o)try{o(s)}finally{t.delete(s.id)}}),bS(n,t,[],e)}function eg(n){if(n)throw new Error(&quot;Proxy has been released and is not useable&quot;)}function yI(n){return qu(n,new Map,{type:&quot;RELEASE&quot;}).then(()=&gt;{mI(n)})}const N0=new WeakMap,I0=&quot;FinalizationRegistry&quot;in globalThis&amp;&amp;new FinalizationRegistry(n=&gt;{const e=(N0.get(n)||0)-1;N0.set(n,e),e===0&amp;&amp;yI(n)});function B6(n,e){const t=(N0.get(e)||0)+1;N0.set(e,t),I0&amp;&amp;I0.register(n,e,n)}function H6(n){I0&amp;&amp;I0.unregister(n)}function bS(n,e,t=[],i=function(){}){let r=!1;const s=new Proxy(i,{get(o,l){if(eg(r),l===L6)return()=&gt;{H6(s),yI(n),e.clear(),r=!0};if(l===&quot;then&quot;){if(t.length===0)return{then:()=&gt;s};const u=qu(n,e,{type:&quot;GET&quot;,path:t.map(h=&gt;h.toString())}).then(lc);return u.then.bind(u)}return bS(n,e,[...t,l])},set(o,l,u){eg(r);const[h,f]=P0(u);return qu(n,e,{type:&quot;SET&quot;,path:[...t,l].map(p=&gt;p.toString()),value:h},f).then(lc)},apply(o,l,u){eg(r);const h=t[t.length-1];if(h===P6)return qu(n,e,{type:&quot;ENDPOINT&quot;}).then(lc);if(h===&quot;bind&quot;)return bS(n,e,t.slice(0,-1));const[f,p]=iR(u);return qu(n,e,{type:&quot;APPLY&quot;,path:t.map(m=&gt;m.toString()),argumentList:f},p).then(lc)},construct(o,l){eg(r);const[u,h]=iR(l);return qu(n,e,{type:&quot;CONSTRUCT&quot;,path:t.map(f=&gt;f.toString()),argumentList:u},h).then(lc)}});return B6(s,n),s}function V6(n){return Array.prototype.concat.apply([],n)}function iR(n){const e=n.map(P0);return[e.map(t=&gt;t[0]),V6(e.map(t=&gt;t[1]))]}const _I=new WeakMap;function G6(n,e){return _I.set(n,e),n}function j6(n){return Object.assign(n,{[hI]:!0})}function P0(n){for(const[e,t]of dI)if(t.canHandle(n)){const[i,r]=t.serialize(n);return[{type:&quot;HANDLER&quot;,name:e,value:i},r]}return[{type:&quot;RAW&quot;,value:n},_I.get(n)||[]]}function lc(n){switch(n.type){case&quot;HANDLER&quot;:return dI.get(n.name).deserialize(n.value);case&quot;RAW&quot;:return n.value}}function qu(n,e,t,i){return new Promise(r=&gt;{const s=W6();e.set(s,r),n.start&amp;&amp;n.start(),n.postMessage(Object.assign({id:s},t),i)})}function W6(){return new Array(4).fill(0).map(()=&gt;Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join(&quot;-&quot;)}const vI=&#x27;var Lo=Object.defineProperty;var Uo=(Ce,me,ve)=&gt;me in Ce?Lo(Ce,me,{enumerable:!0,configurable:!0,writable:!0,value:ve}):Ce[me]=ve;var bn=(Ce,me,ve)=&gt;Uo(Ce,typeof me!=&quot;symbol&quot;?me+&quot;&quot;:me,ve);(function(){&quot;use strict&quot;;var Ce=typeof globalThis&lt;&quot;u&quot;?globalThis:typeof window&lt;&quot;u&quot;?window:typeof global&lt;&quot;u&quot;?global:typeof self&lt;&quot;u&quot;?self:{};function me(_){return _&amp;&amp;_.__esModule&amp;&amp;Object.prototype.hasOwnProperty.call(_,&quot;default&quot;)?_.default:_}var ve={exports:{}},Fr=ve.exports,Wt;function Lr(){return Wt||(Wt=1,function(_,j){(function(R,C){_.exports=C()})(Fr,function(){var R=function(e,n){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&amp;&amp;(t[o]=r[o])})(e,n)},C=function(){return(C=Object.assign||function(e){for(var n,t=1,r=arguments.length;t&lt;r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&amp;&amp;(e[o]=n[o]);return e}).apply(this,arguments)};function L(e,n,t){for(var r,o=0,i=n.length;o&lt;i;o++)!r&amp;&amp;o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}var B=typeof globalThis&lt;&quot;u&quot;?globalThis:typeof self&lt;&quot;u&quot;?self:typeof window&lt;&quot;u&quot;?window:Ce,U=Object.keys,q=Array.isArray;function W(e,n){return typeof n!=&quot;object&quot;||U(n).forEach(function(t){e[t]=n[t]}),e}typeof Promise&gt;&quot;u&quot;||B.Promise||(B.Promise=Promise);var H=Object.getPrototypeOf,Q={}.hasOwnProperty;function V(e,n){return Q.call(e,n)}function $(e,n){typeof n==&quot;function&quot;&amp;&amp;(n=n(H(e))),(typeof Reflect&gt;&quot;u&quot;?U:Reflect.ownKeys)(n).forEach(function(t){he(e,t,n[t])})}var ue=Object.defineProperty;function he(e,n,t,r){ue(e,n,W(t&amp;&amp;V(t,&quot;get&quot;)&amp;&amp;typeof t.get==&quot;function&quot;?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function We(e){return{from:function(n){return e.prototype=Object.create(n.prototype),he(e.prototype,&quot;constructor&quot;,e),{extend:$.bind(null,e.prototype)}}}}var ro=Object.getOwnPropertyDescriptor,oo=[].slice;function En(e,n,t){return oo.call(e,n,t)}function er(e,n){return n(e)}function tn(e){if(!e)throw new Error(&quot;Assertion Failed&quot;)}function nr(e){B.setImmediate?setImmediate(e):setTimeout(e,0)}function ge(e,n){if(typeof n==&quot;string&quot;&amp;&amp;V(e,n))return e[n];if(!n)return e;if(typeof n!=&quot;string&quot;){for(var t=[],r=0,o=n.length;r&lt;o;++r){var i=ge(e,n[r]);t.push(i)}return t}var a=n.indexOf(&quot;.&quot;);if(a!==-1){var u=e[n.substr(0,a)];return u==null?void 0:ge(u,n.substr(a+1))}}function se(e,n,t){if(e&amp;&amp;n!==void 0&amp;&amp;!(&quot;isFrozen&quot;in Object&amp;&amp;Object.isFrozen(e)))if(typeof n!=&quot;string&quot;&amp;&amp;&quot;length&quot;in n){tn(typeof t!=&quot;string&quot;&amp;&amp;&quot;length&quot;in t);for(var r=0,o=n.length;r&lt;o;++r)se(e,n[r],t[r])}else{var i,a,u=n.indexOf(&quot;.&quot;);u!==-1?(i=n.substr(0,u),(a=n.substr(u+1))===&quot;&quot;?t===void 0?q(e)&amp;&amp;!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=t:se(u=!(u=e[i])||!V(e,i)?e[i]={}:u,a,t)):t===void 0?q(e)&amp;&amp;!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=t}}function tr(e){var n,t={};for(n in e)V(e,n)&amp;&amp;(t[n]=e[n]);return t}var io=[].concat;function rr(e){return io.apply([],e)}var Re=&quot;BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey&quot;.split(&quot;,&quot;).concat(rr([8,16,32,64].map(function(e){return[&quot;Int&quot;,&quot;Uint&quot;,&quot;Float&quot;].map(function(n){return n+e+&quot;Array&quot;})}))).filter(function(e){return B[e]}),or=new Set(Re.map(function(e){return B[e]})),rn=null;function je(e){return rn=new WeakMap,e=function n(t){if(!t||typeof t!=&quot;object&quot;)return t;var r=rn.get(t);if(r)return r;if(q(t)){r=[],rn.set(t,r);for(var o=0,i=t.length;o&lt;i;++o)r.push(n(t[o]))}else if(or.has(t.constructor))r=t;else{var a,u=H(t);for(a in r=u===Object.prototype?{}:Object.create(u),rn.set(t,r),t)V(t,a)&amp;&amp;(r[a]=n(t[a]))}return r}(e),rn=null,e}var ao={}.toString;function it(e){return ao.call(e).slice(8,-1)}var at=typeof Symbol&lt;&quot;u&quot;?Symbol.iterator:&quot;@@iterator&quot;,uo=typeof at==&quot;symbol&quot;?function(e){var n;return e!=null&amp;&amp;(n=e[at])&amp;&amp;n.apply(e)}:function(){return null};function Te(e,n){return n=e.indexOf(n),0&lt;=n&amp;&amp;e.splice(n,1),0&lt;=n}var $e={};function be(e){var n,t,r,o;if(arguments.length===1){if(q(e))return e.slice();if(this===$e&amp;&amp;typeof e==&quot;string&quot;)return[e];if(o=uo(e)){for(t=[];!(r=o.next()).done;)t.push(r.value);return t}if(e==null)return[e];if(typeof(n=e.length)!=&quot;number&quot;)return[e];for(t=new Array(n);n--;)t[n]=e[n];return t}for(n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];return t}var ut=typeof Symbol&lt;&quot;u&quot;?function(e){return e[Symbol.toStringTag]===&quot;AsyncFunction&quot;}:function(){return!1},un=[&quot;Unknown&quot;,&quot;Constraint&quot;,&quot;Data&quot;,&quot;TransactionInactive&quot;,&quot;ReadOnly&quot;,&quot;Version&quot;,&quot;NotFound&quot;,&quot;InvalidState&quot;,&quot;InvalidAccess&quot;,&quot;Abort&quot;,&quot;Timeout&quot;,&quot;QuotaExceeded&quot;,&quot;Syntax&quot;,&quot;DataClone&quot;],fe=[&quot;Modify&quot;,&quot;Bulk&quot;,&quot;OpenFailed&quot;,&quot;VersionChange&quot;,&quot;Schema&quot;,&quot;Upgrade&quot;,&quot;InvalidTable&quot;,&quot;MissingAPI&quot;,&quot;NoSuchDatabase&quot;,&quot;InvalidArgument&quot;,&quot;SubTransaction&quot;,&quot;Unsupported&quot;,&quot;Internal&quot;,&quot;DatabaseClosed&quot;,&quot;PrematureCommit&quot;,&quot;ForeignAwait&quot;].concat(un),so={VersionChanged:&quot;Database version changed by other database connection&quot;,DatabaseClosed:&quot;Database has been closed&quot;,Abort:&quot;Transaction aborted&quot;,TransactionInactive:&quot;Transaction has already completed or failed&quot;,MissingAPI:&quot;IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb&quot;};function Ye(e,n){this.name=e,this.message=n}function ir(e,n){return e+&quot;. Errors: &quot;+Object.keys(n).map(function(t){return n[t].toString()}).filter(function(t,r,o){return o.indexOf(t)===r}).join(`\n`)}function Sn(e,n,t,r){this.failures=n,this.failedKeys=r,this.successCount=t,this.message=ir(e,n)}function He(e,n){this.name=&quot;BulkError&quot;,this.failures=Object.keys(n).map(function(t){return n[t]}),this.failuresByPos=n,this.message=ir(e,this.failures)}We(Ye).from(Error).extend({toString:function(){return this.name+&quot;: &quot;+this.message}}),We(Sn).from(Ye),We(He).from(Ye);var st=fe.reduce(function(e,n){return e[n]=n+&quot;Error&quot;,e},{}),co=Ye,D=fe.reduce(function(e,n){var t=n+&quot;Error&quot;;function r(o,i){this.name=t,o?typeof o==&quot;string&quot;?(this.message=&quot;&quot;.concat(o).concat(i?`\n `+i:&quot;&quot;),this.inner=i||null):typeof o==&quot;object&quot;&amp;&amp;(this.message=&quot;&quot;.concat(o.name,&quot; &quot;).concat(o.message),this.inner=o):(this.message=so[n]||t,this.inner=null)}return We(r).from(co),e[n]=r,e},{});D.Syntax=SyntaxError,D.Type=TypeError,D.Range=RangeError;var ar=un.reduce(function(e,n){return e[n+&quot;Error&quot;]=D[n],e},{}),Kn=fe.reduce(function(e,n){return[&quot;Syntax&quot;,&quot;Type&quot;,&quot;Range&quot;].indexOf(n)===-1&amp;&amp;(e[n+&quot;Error&quot;]=D[n]),e},{});function G(){}function on(e){return e}function lo(e,n){return e==null||e===on?n:function(t){return n(e(t))}}function De(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function fo(e,n){return e===G?n:function(){var t=e.apply(this,arguments);t!==void 0&amp;&amp;(arguments[0]=t);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=n.apply(this,arguments);return r&amp;&amp;(this.onsuccess=this.onsuccess?De(r,this.onsuccess):r),o&amp;&amp;(this.onerror=this.onerror?De(o,this.onerror):o),i!==void 0?i:t}}function ho(e,n){return e===G?n:function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&amp;&amp;(this.onsuccess=this.onsuccess?De(t,this.onsuccess):t),r&amp;&amp;(this.onerror=this.onerror?De(r,this.onerror):r)}}function po(e,n){return e===G?n:function(t){var r=e.apply(this,arguments);W(t,r);var o=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,t=n.apply(this,arguments),o&amp;&amp;(this.onsuccess=this.onsuccess?De(o,this.onsuccess):o),i&amp;&amp;(this.onerror=this.onerror?De(i,this.onerror):i),r===void 0?t===void 0?void 0:t:W(r,t)}}function yo(e,n){return e===G?n:function(){return n.apply(this,arguments)!==!1&amp;&amp;e.apply(this,arguments)}}function ct(e,n){return e===G?n:function(){var t=e.apply(this,arguments);if(t&amp;&amp;typeof t.then==&quot;function&quot;){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return t.then(function(){return n.apply(r,i)})}return n.apply(this,arguments)}}Kn.ModifyError=Sn,Kn.DexieError=Ye,Kn.BulkError=He;var de=typeof location&lt;&quot;u&quot;&amp;&amp;/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);function ur(e){de=e}var an={},sr=100,Re=typeof Promise&gt;&quot;u&quot;?[]:function(){var e=Promise.resolve();if(typeof crypto&gt;&quot;u&quot;||!crypto.subtle)return[e,H(e),e];var n=crypto.subtle.digest(&quot;SHA-512&quot;,new Uint8Array([0]));return[n,H(n),e]}(),un=Re[0],fe=Re[1],Re=Re[2],fe=fe&amp;&amp;fe.then,Ie=un&amp;&amp;un.constructor,lt=!!Re,sn=function(e,n){cn.push([e,n]),Cn&amp;&amp;(queueMicrotask(vo),Cn=!1)},ft=!0,Cn=!0,qe=[],An=[],ht=on,xe={id:&quot;global&quot;,global:!0,ref:0,unhandleds:[],onunhandled:G,pgp:!1,env:{},finalize:G},T=xe,cn=[],Me=0,jn=[];function K(e){if(typeof this!=&quot;object&quot;)throw new TypeError(&quot;Promises must be constructed via new&quot;);this._listeners=[],this._lib=!1;var n=this._PSD=T;if(typeof e!=&quot;function&quot;){if(e!==an)throw new TypeError(&quot;Not a function&quot;);return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&amp;&amp;pt(this,this._value))}this._state=null,this._value=null,++n.ref,function t(r,o){try{o(function(i){if(r._state===null){if(i===r)throw new TypeError(&quot;A promise cannot be resolved with itself.&quot;);var a=r._lib&amp;&amp;Ge();i&amp;&amp;typeof i.then==&quot;function&quot;?t(r,function(u,c){i instanceof K?i._then(u,c):i.then(u,c)}):(r._state=!0,r._value=i,lr(r)),a&amp;&amp;Qe()}},pt.bind(null,r))}catch(i){pt(r,i)}}(this,e)}var dt={get:function(){var e=T,n=In;function t(r,o){var i=this,a=!e.global&amp;&amp;(e!==T||n!==In),u=a&amp;&amp;!Oe(),c=new K(function(f,p){yt(i,new cr(hr(r,e,a,u),hr(o,e,a,u),f,p,e))});return this._consoleTask&amp;&amp;(c._consoleTask=this._consoleTask),c}return t.prototype=an,t},set:function(e){he(this,&quot;then&quot;,e&amp;&amp;e.prototype===an?dt:{get:function(){return e},set:dt.set})}};function cr(e,n,t,r,o){this.onFulfilled=typeof e==&quot;function&quot;?e:null,this.onRejected=typeof n==&quot;function&quot;?n:null,this.resolve=t,this.reject=r,this.psd=o}function pt(e,n){var t,r;An.push(n),e._state===null&amp;&amp;(t=e._lib&amp;&amp;Ge(),n=ht(n),e._state=!1,e._value=n,r=e,qe.some(function(o){return o._value===r._value})||qe.push(r),lr(e),t&amp;&amp;Qe())}function lr(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t&lt;r;++t)yt(e,n[t]);var o=e._PSD;--o.ref||o.finalize(),Me===0&amp;&amp;(++Me,sn(function(){--Me==0&amp;&amp;mt()},[]))}function yt(e,n){if(e._state!==null){var t=e._state?n.onFulfilled:n.onRejected;if(t===null)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++Me,sn(mo,[t,e,n])}else e._listeners.push(n)}function mo(e,n,t){try{var r,o=n._value;!n._state&amp;&amp;An.length&amp;&amp;(An=[]),r=de&amp;&amp;n._consoleTask?n._consoleTask.run(function(){return e(o)}):e(o),n._state||An.indexOf(o)!==-1||function(i){for(var a=qe.length;a;)if(qe[--a]._value===i._value)return qe.splice(a,1)}(n),t.resolve(r)}catch(i){t.reject(i)}finally{--Me==0&amp;&amp;mt(),--t.psd.ref||t.psd.finalize()}}function vo(){Be(xe,function(){Ge()&amp;&amp;Qe()})}function Ge(){var e=ft;return Cn=ft=!1,e}function Qe(){var e,n,t;do for(;0&lt;cn.length;)for(e=cn,cn=[],t=e.length,n=0;n&lt;t;++n){var r=e[n];r[0].apply(null,r[1])}while(0&lt;cn.length);Cn=ft=!0}function mt(){var e=qe;qe=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var n=jn.slice(0),t=n.length;t;)n[--t]()}function Tn(e){return new K(an,!1,e)}function J(e,n){var t=T;return function(){var r=Ge(),o=T;try{return Pe(t,!0),e.apply(this,arguments)}catch(i){n&amp;&amp;n(i)}finally{Pe(o,!1),r&amp;&amp;Qe()}}}$(K.prototype,{then:dt,_then:function(e,n){yt(this,new cr(null,null,e,n,T))},catch:function(e){if(arguments.length===1)return this.then(null,e);var n=e,t=arguments[1];return typeof n==&quot;function&quot;?this.then(null,function(r){return(r instanceof n?t:Tn)(r)}):this.then(null,function(r){return(r&amp;&amp;r.name===n?t:Tn)(r)})},finally:function(e){return this.then(function(n){return K.resolve(e()).then(function(){return n})},function(n){return K.resolve(e()).then(function(){return Tn(n)})})},timeout:function(e,n){var t=this;return e&lt;1/0?new K(function(r,o){var i=setTimeout(function(){return o(new D.Timeout(n))},e);t.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol&lt;&quot;u&quot;&amp;&amp;Symbol.toStringTag&amp;&amp;he(K.prototype,Symbol.toStringTag,&quot;Dexie.Promise&quot;),xe.env=fr(),$(K,{all:function(){var e=be.apply(null,arguments).map(qn);return new K(function(n,t){e.length===0&amp;&amp;n([]);var r=e.length;e.forEach(function(o,i){return K.resolve(o).then(function(a){e[i]=a,--r||n(e)},t)})})},resolve:function(e){return e instanceof K?e:e&amp;&amp;typeof e.then==&quot;function&quot;?new K(function(n,t){e.then(n,t)}):new K(an,!0,e)},reject:Tn,race:function(){var e=be.apply(null,arguments).map(qn);return new K(function(n,t){e.map(function(r){return K.resolve(r).then(n,t)})})},PSD:{get:function(){return T},set:function(e){return T=e}},totalEchoes:{get:function(){return In}},newPSD:ke,usePSD:Be,scheduler:{get:function(){return sn},set:function(e){sn=e}},rejectionMapper:{get:function(){return ht},set:function(e){ht=e}},follow:function(e,n){return new K(function(t,r){return ke(function(o,i){var a=T;a.unhandleds=[],a.onunhandled=i,a.finalize=De(function(){var u,c=this;u=function(){c.unhandleds.length===0?o():i(c.unhandleds[0])},jn.push(function f(){u(),jn.splice(jn.indexOf(f),1)}),++Me,sn(function(){--Me==0&amp;&amp;mt()},[])},a.finalize),e()},n,t,r)})}}),Ie&amp;&amp;(Ie.allSettled&amp;&amp;he(K,&quot;allSettled&quot;,function(){var e=be.apply(null,arguments).map(qn);return new K(function(n){e.length===0&amp;&amp;n([]);var t=e.length,r=new Array(t);e.forEach(function(o,i){return K.resolve(o).then(function(a){return r[i]={status:&quot;fulfilled&quot;,value:a}},function(a){return r[i]={status:&quot;rejected&quot;,reason:a}}).then(function(){return--t||n(r)})})})}),Ie.any&amp;&amp;typeof AggregateError&lt;&quot;u&quot;&amp;&amp;he(K,&quot;any&quot;,function(){var e=be.apply(null,arguments).map(qn);return new K(function(n,t){e.length===0&amp;&amp;t(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(i,a){return K.resolve(i).then(function(u){return n(u)},function(u){o[a]=u,--r||t(new AggregateError(o))})})})}),Ie.withResolvers&amp;&amp;(K.withResolvers=Ie.withResolvers));var ne={awaits:0,echoes:0,id:0},go=0,Dn=[],Rn=0,In=0,bo=0;function ke(e,n,t,r){var o=T,i=Object.create(o);return i.parent=o,i.ref=0,i.global=!1,i.id=++bo,xe.env,i.env=lt?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{},n&amp;&amp;W(i,n),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Be(i,e,t,r),i.ref===0&amp;&amp;i.finalize(),r}function Xe(){return ne.id||(ne.id=++go),++ne.awaits,ne.echoes+=sr,ne.id}function Oe(){return!!ne.awaits&amp;&amp;(--ne.awaits==0&amp;&amp;(ne.id=0),ne.echoes=ne.awaits*sr,!0)}function qn(e){return ne.echoes&amp;&amp;e&amp;&amp;e.constructor===Ie?(Xe(),e.then(function(n){return Oe(),n},function(n){return Oe(),Z(n)})):e}function wo(){var e=Dn[Dn.length-1];Dn.pop(),Pe(e,!1)}function Pe(e,n){var t,r=T;(n?!ne.echoes||Rn++&amp;&amp;e===T:!Rn||--Rn&amp;&amp;e===T)||queueMicrotask(n?(function(o){++In,ne.echoes&amp;&amp;--ne.echoes!=0||(ne.echoes=ne.awaits=ne.id=0),Dn.push(T),Pe(o,!0)}).bind(null,e):wo),e!==T&amp;&amp;(T=e,r===xe&amp;&amp;(xe.env=fr()),lt&amp;&amp;(t=xe.env.Promise,n=e.env,(r.global||e.global)&amp;&amp;(Object.defineProperty(B,&quot;Promise&quot;,n.PromiseProp),t.all=n.all,t.race=n.race,t.resolve=n.resolve,t.reject=n.reject,n.allSettled&amp;&amp;(t.allSettled=n.allSettled),n.any&amp;&amp;(t.any=n.any))))}function fr(){var e=B.Promise;return lt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(B,&quot;Promise&quot;),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Be(e,n,t,r,o){var i=T;try{return Pe(e,!0),n(t,r,o)}finally{Pe(i,!1)}}function hr(e,n,t,r){return typeof e!=&quot;function&quot;?e:function(){var o=T;t&amp;&amp;Xe(),Pe(n,!0);try{return e.apply(this,arguments)}finally{Pe(o,!1),r&amp;&amp;queueMicrotask(Oe)}}}function vt(e){Promise===Ie&amp;&amp;ne.echoes===0?Rn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(&quot;&quot;+fe).indexOf(&quot;[native code]&quot;)===-1&amp;&amp;(Xe=Oe=G);var Z=K.reject,Ne=&quot;￿&quot;,we=&quot;Invalid key provided. Keys must be of type string, number, Date or Array&lt;string | number | Date&gt;.&quot;,dr=&quot;String expected.&quot;,Je=[],Mn=&quot;__dbnames&quot;,gt=&quot;readonly&quot;,bt=&quot;readwrite&quot;;function Fe(e,n){return e?n?function(){return e.apply(this,arguments)&amp;&amp;n.apply(this,arguments)}:e:n}var pr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Bn(e){return typeof e!=&quot;string&quot;||/\\./.test(e)?function(n){return n}:function(n){return n[e]===void 0&amp;&amp;e in n&amp;&amp;delete(n=je(n))[e],n}}function yr(){throw D.Type()}function z(e,n){try{var t=mr(e),r=mr(n);if(t!==r)return t===&quot;Array&quot;?1:r===&quot;Array&quot;?-1:t===&quot;binary&quot;?1:r===&quot;binary&quot;?-1:t===&quot;string&quot;?1:r===&quot;string&quot;?-1:t===&quot;Date&quot;?1:r!==&quot;Date&quot;?NaN:-1;switch(t){case&quot;number&quot;:case&quot;Date&quot;:case&quot;string&quot;:return n&lt;e?1:e&lt;n?-1:0;case&quot;binary&quot;:return function(o,i){for(var a=o.length,u=i.length,c=a&lt;u?a:u,f=0;f&lt;c;++f)if(o[f]!==i[f])return o[f]&lt;i[f]?-1:1;return a===u?0:a&lt;u?-1:1}(vr(e),vr(n));case&quot;Array&quot;:return function(o,i){for(var a=o.length,u=i.length,c=a&lt;u?a:u,f=0;f&lt;c;++f){var p=z(o[f],i[f]);if(p!==0)return p}return a===u?0:a&lt;u?-1:1}(e,n)}}catch{}return NaN}function mr(e){var n=typeof e;return n!=&quot;object&quot;?n:ArrayBuffer.isView(e)?&quot;binary&quot;:(e=it(e),e===&quot;ArrayBuffer&quot;?&quot;binary&quot;:e)}function vr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var gr=(X.prototype._trans=function(e,n,t){var r=this._tx||T.trans,o=this.name,i=de&amp;&amp;typeof console&lt;&quot;u&quot;&amp;&amp;console.createTask&amp;&amp;console.createTask(&quot;Dexie: &quot;.concat(e===&quot;readonly&quot;?&quot;read&quot;:&quot;write&quot;,&quot; &quot;).concat(this.name));function a(f,p,s){if(!s.schema[o])throw new D.NotFound(&quot;Table &quot;+o+&quot; not part of transaction&quot;);return n(s.idbtrans,s)}var u=Ge();try{var c=r&amp;&amp;r.db._novip===this.db._novip?r===T.trans?r._promise(e,a,t):ke(function(){return r._promise(e,a,t)},{trans:r,transless:T.transless||T}):function f(p,s,m,l){if(p.idbdb&amp;&amp;(p._state.openComplete||T.letThrough||p._vip)){var d=p._createTransaction(s,m,p._dbSchema);try{d.create(),p._state.PR1398_maxLoop=3}catch(y){return y.name===st.InvalidState&amp;&amp;p.isOpen()&amp;&amp;0&lt;--p._state.PR1398_maxLoop?(console.warn(&quot;Dexie: Need to reopen db&quot;),p.close({disableAutoOpen:!1}),p.open().then(function(){return f(p,s,m,l)})):Z(y)}return d._promise(s,function(y,h){return ke(function(){return T.trans=d,l(y,h,d)})}).then(function(y){if(s===&quot;readwrite&quot;)try{d.idbtrans.commit()}catch{}return s===&quot;readonly&quot;?y:d._completion.then(function(){return y})})}if(p._state.openComplete)return Z(new D.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return Z(new D.DatabaseClosed);p.open().catch(G)}return p._state.dbReadyPromise.then(function(){return f(p,s,m,l)})}(this.db,e,[this.name],a);return i&amp;&amp;(c._consoleTask=i,c=c.catch(function(f){return console.trace(f),Z(f)})),c}finally{u&amp;&amp;Qe()}},X.prototype.get=function(e,n){var t=this;return e&amp;&amp;e.constructor===Object?this.where(e).first(n):e==null?Z(new D.Type(&quot;Invalid argument to Table.get()&quot;)):this._trans(&quot;readonly&quot;,function(r){return t.core.get({trans:r,key:e}).then(function(o){return t.hook.reading.fire(o)})}).then(n)},X.prototype.where=function(e){if(typeof e==&quot;string&quot;)return new this.db.WhereClause(this,e);if(q(e))return new this.db.WhereClause(this,&quot;[&quot;.concat(e.join(&quot;+&quot;),&quot;]&quot;));var n=U(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter(function(u){if(u.compound&amp;&amp;n.every(function(f){return 0&lt;=u.keyPath.indexOf(f)})){for(var c=0;c&lt;n.length;++c)if(n.indexOf(u.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(u,c){return u.keyPath.length-c.keyPath.length})[0];if(t&amp;&amp;this.db._maxKey!==Ne){var i=t.keyPath.slice(0,n.length);return this.where(i).equals(i.map(function(c){return e[c]}))}!t&amp;&amp;de&amp;&amp;console.warn(&quot;The query &quot;.concat(JSON.stringify(e),&quot; on &quot;).concat(this.name,&quot; would benefit from a &quot;)+&quot;compound index [&quot;.concat(n.join(&quot;+&quot;),&quot;]&quot;));var r=this.schema.idxByName;function o(u,c){return z(u,c)===0}var a=n.reduce(function(s,c){var f=s[0],p=s[1],s=r[c],m=e[c];return[f||s,f||!s?Fe(p,s&amp;&amp;s.multi?function(l){return l=ge(l,c),q(l)&amp;&amp;l.some(function(d){return o(m,d)})}:function(l){return o(m,ge(l,c))}):p]},[null,null]),i=a[0],a=a[1];return i?this.where(i.name).equals(e[i.keyPath]).filter(a):t?this.filter(a):this.where(n).equals(&quot;&quot;)},X.prototype.filter=function(e){return this.toCollection().and(e)},X.prototype.count=function(e){return this.toCollection().count(e)},X.prototype.offset=function(e){return this.toCollection().offset(e)},X.prototype.limit=function(e){return this.toCollection().limit(e)},X.prototype.each=function(e){return this.toCollection().each(e)},X.prototype.toArray=function(e){return this.toCollection().toArray(e)},X.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},X.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,q(e)?&quot;[&quot;.concat(e.join(&quot;+&quot;),&quot;]&quot;):e))},X.prototype.reverse=function(){return this.toCollection().reverse()},X.prototype.mapToClass=function(e){var n,t=this.db,r=this.name;function o(){return n!==null&amp;&amp;n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof yr&amp;&amp;(function(c,f){if(typeof f!=&quot;function&quot;&amp;&amp;f!==null)throw new TypeError(&quot;Class extends value &quot;+String(f)+&quot; is not a constructor or null&quot;);function p(){this.constructor=c}R(c,f),c.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}(o,n=e),Object.defineProperty(o.prototype,&quot;db&quot;,{get:function(){return t},enumerable:!1,configurable:!0}),o.prototype.table=function(){return r},e=o);for(var i=new Set,a=e.prototype;a;a=H(a))Object.getOwnPropertyNames(a).forEach(function(c){return i.add(c)});function u(c){if(!c)return c;var f,p=Object.create(e.prototype);for(f in c)if(!i.has(f))try{p[f]=c[f]}catch{}return p}return this.schema.readHook&amp;&amp;this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook(&quot;reading&quot;,u),e},X.prototype.defineClass=function(){return this.mapToClass(function(e){W(this,e)})},X.prototype.add=function(e,n){var t=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&amp;&amp;o&amp;&amp;(a=Bn(i)(e)),this._trans(&quot;readwrite&quot;,function(u){return t.core.mutate({trans:u,type:&quot;add&quot;,keys:n!=null?[n]:null,values:[a]})}).then(function(u){return u.numFailures?K.reject(u.failures[0]):u.lastResult}).then(function(u){if(i)try{se(e,i,u)}catch{}return u})},X.prototype.update=function(e,n){return typeof e!=&quot;object&quot;||q(e)?this.where(&quot;:id&quot;).equals(e).modify(n):(e=ge(e,this.schema.primKey.keyPath),e===void 0?Z(new D.InvalidArgument(&quot;Given object does not contain its primary key&quot;)):this.where(&quot;:id&quot;).equals(e).modify(n))},X.prototype.put=function(e,n){var t=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,a=e;return i&amp;&amp;o&amp;&amp;(a=Bn(i)(e)),this._trans(&quot;readwrite&quot;,function(u){return t.core.mutate({trans:u,type:&quot;put&quot;,values:[a],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?K.reject(u.failures[0]):u.lastResult}).then(function(u){if(i)try{se(e,i,u)}catch{}return u})},X.prototype.delete=function(e){var n=this;return this._trans(&quot;readwrite&quot;,function(t){return n.core.mutate({trans:t,type:&quot;delete&quot;,keys:[e]})}).then(function(t){return t.numFailures?K.reject(t.failures[0]):void 0})},X.prototype.clear=function(){var e=this;return this._trans(&quot;readwrite&quot;,function(n){return e.core.mutate({trans:n,type:&quot;deleteRange&quot;,range:pr})}).then(function(n){return n.numFailures?K.reject(n.failures[0]):void 0})},X.prototype.bulkGet=function(e){var n=this;return this._trans(&quot;readonly&quot;,function(t){return n.core.getMany({keys:e,trans:t}).then(function(r){return r.map(function(o){return n.hook.reading.fire(o)})})})},X.prototype.bulkAdd=function(e,n,t){var r=this,o=Array.isArray(n)?n:void 0,i=(t=t||(o?void 0:n))?t.allKeys:void 0;return this._trans(&quot;readwrite&quot;,function(a){var f=r.schema.primKey,u=f.auto,f=f.keyPath;if(f&amp;&amp;o)throw new D.InvalidArgument(&quot;bulkAdd(): keys argument invalid on tables with inbound keys&quot;);if(o&amp;&amp;o.length!==e.length)throw new D.InvalidArgument(&quot;Arguments objects and keys must have the same length&quot;);var c=e.length,f=f&amp;&amp;u?e.map(Bn(f)):e;return r.core.mutate({trans:a,type:&quot;add&quot;,keys:o,values:f,wantResults:i}).then(function(d){var s=d.numFailures,m=d.results,l=d.lastResult,d=d.failures;if(s===0)return i?m:l;throw new He(&quot;&quot;.concat(r.name,&quot;.bulkAdd(): &quot;).concat(s,&quot; of &quot;).concat(c,&quot; operations failed&quot;),d)})})},X.prototype.bulkPut=function(e,n,t){var r=this,o=Array.isArray(n)?n:void 0,i=(t=t||(o?void 0:n))?t.allKeys:void 0;return this._trans(&quot;readwrite&quot;,function(a){var f=r.schema.primKey,u=f.auto,f=f.keyPath;if(f&amp;&amp;o)throw new D.InvalidArgument(&quot;bulkPut(): keys argument invalid on tables with inbound keys&quot;);if(o&amp;&amp;o.length!==e.length)throw new D.InvalidArgument(&quot;Arguments objects and keys must have the same length&quot;);var c=e.length,f=f&amp;&amp;u?e.map(Bn(f)):e;return r.core.mutate({trans:a,type:&quot;put&quot;,keys:o,values:f,wantResults:i}).then(function(d){var s=d.numFailures,m=d.results,l=d.lastResult,d=d.failures;if(s===0)return i?m:l;throw new He(&quot;&quot;.concat(r.name,&quot;.bulkPut(): &quot;).concat(s,&quot; of &quot;).concat(c,&quot; operations failed&quot;),d)})})},X.prototype.bulkUpdate=function(e){var n=this,t=this.core,r=e.map(function(a){return a.key}),o=e.map(function(a){return a.changes}),i=[];return this._trans(&quot;readwrite&quot;,function(a){return t.getMany({trans:a,keys:r,cache:&quot;clone&quot;}).then(function(u){var c=[],f=[];e.forEach(function(s,m){var l=s.key,d=s.changes,y=u[m];if(y){for(var h=0,v=Object.keys(d);h&lt;v.length;h++){var g=v[h],b=d[g];if(g===n.schema.primKey.keyPath){if(z(b,l)!==0)throw new D.Constraint(&quot;Cannot update primary key in bulkUpdate()&quot;)}else se(y,g,b)}i.push(m),c.push(l),f.push(y)}});var p=c.length;return t.mutate({trans:a,type:&quot;put&quot;,keys:c,values:f,updates:{keys:r,changeSpecs:o}}).then(function(s){var m=s.numFailures,l=s.failures;if(m===0)return p;for(var d=0,y=Object.keys(l);d&lt;y.length;d++){var h,v=y[d],g=i[Number(v)];g!=null&amp;&amp;(h=l[v],delete l[v],l[g]=h)}throw new He(&quot;&quot;.concat(n.name,&quot;.bulkUpdate(): &quot;).concat(m,&quot; of &quot;).concat(p,&quot; operations failed&quot;),l)})})})},X.prototype.bulkDelete=function(e){var n=this,t=e.length;return this._trans(&quot;readwrite&quot;,function(r){return n.core.mutate({trans:r,type:&quot;delete&quot;,keys:e})}).then(function(a){var o=a.numFailures,i=a.lastResult,a=a.failures;if(o===0)return i;throw new He(&quot;&quot;.concat(n.name,&quot;.bulkDelete(): &quot;).concat(o,&quot; of &quot;).concat(t,&quot; operations failed&quot;),a)})},X);function X(){}function ln(e){function n(a,u){if(u){for(var c=arguments.length,f=new Array(c-1);--c;)f[c-1]=arguments[c];return t[a].subscribe.apply(null,f),e}if(typeof a==&quot;string&quot;)return t[a]}var t={};n.addEventType=i;for(var r=1,o=arguments.length;r&lt;o;++r)i(arguments[r]);return n;function i(a,u,c){if(typeof a!=&quot;object&quot;){var f;u=u||yo;var p={subscribers:[],fire:c=c||G,subscribe:function(s){p.subscribers.indexOf(s)===-1&amp;&amp;(p.subscribers.push(s),p.fire=u(p.fire,s))},unsubscribe:function(s){p.subscribers=p.subscribers.filter(function(m){return m!==s}),p.fire=p.subscribers.reduce(u,c)}};return t[a]=n[a]=p}U(f=a).forEach(function(s){var m=f[s];if(q(m))i(s,f[s][0],f[s][1]);else{if(m!==&quot;asap&quot;)throw new D.InvalidArgument(&quot;Invalid event config&quot;);var l=i(s,on,function(){for(var d=arguments.length,y=new Array(d);d--;)y[d]=arguments[d];l.subscribers.forEach(function(h){nr(function(){h.apply(null,y)})})})}})}}function fn(e,n){return We(n).from({prototype:e}),n}function Ze(e,n){return!(e.filter||e.algorithm||e.or)&amp;&amp;(n?e.justLimit:!e.replayFilter)}function wt(e,n){e.filter=Fe(e.filter,n)}function _t(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return Fe(r(),n())}:n,e.justLimit=t&amp;&amp;!r}function Nn(e,n){if(e.isPrimKey)return n.primaryKey;var t=n.getIndexByKeyPath(e.index);if(!t)throw new D.Schema(&quot;KeyPath &quot;+e.index+&quot; on object store &quot;+n.name+&quot; is not indexed&quot;);return t}function br(e,n,t){var r=Nn(e,n.schema);return n.openCursor({trans:t,values:!e.keysOnly,reverse:e.dir===&quot;prev&quot;,unique:!!e.unique,query:{index:r,range:e.range}})}function Fn(e,n,t,r){var o=e.replayFilter?Fe(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},a=function(u,c,f){var p,s;o&amp;&amp;!o(c,f,function(m){return c.stop(m)},function(m){return c.fail(m)})||((s=&quot;&quot;+(p=c.primaryKey))==&quot;[object ArrayBuffer]&quot;&amp;&amp;(s=&quot;&quot;+new Uint8Array(p)),V(i,s)||(i[s]=!0,n(u,c,f)))};return Promise.all([e.or._iterate(a,t),wr(br(e,r,t),e.algorithm,a,!e.keysOnly&amp;&amp;e.valueMapper)])}return wr(br(e,r,t),Fe(e.algorithm,o),n,!e.keysOnly&amp;&amp;e.valueMapper)}function wr(e,n,t,r){var o=J(r?function(i,a,u){return t(r(i),a,u)}:t);return e.then(function(i){if(i)return i.start(function(){var a=function(){return i.continue()};n&amp;&amp;!n(i,function(u){return a=u},function(u){i.stop(u),a=G},function(u){i.fail(u),a=G})||o(i.value,i,function(u){return a=u}),a()})})}var hn=(_r.prototype.execute=function(e){var n=this[&quot;@@propmod&quot;];if(n.add!==void 0){var t=n.add;if(q(t))return L(L([],q(e)?e:[],!0),t).sort();if(typeof t==&quot;number&quot;)return(Number(e)||0)+t;if(typeof t==&quot;bigint&quot;)try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError(&quot;Invalid term &quot;.concat(t))}if(n.remove!==void 0){var r=n.remove;if(q(r))return q(e)?e.filter(function(o){return!r.includes(o)}).sort():[];if(typeof r==&quot;number&quot;)return Number(e)-r;if(typeof r==&quot;bigint&quot;)try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError(&quot;Invalid subtrahend &quot;.concat(r))}return t=(t=n.replacePrefix)===null||t===void 0?void 0:t[0],t&amp;&amp;typeof e==&quot;string&quot;&amp;&amp;e.startsWith(t)?n.replacePrefix[1]+e.substring(t.length):e},_r);function _r(e){this[&quot;@@propmod&quot;]=e}var _o=(Y.prototype._read=function(e,n){var t=this._ctx;return t.error?t.table._trans(null,Z.bind(null,t.error)):t.table._trans(&quot;readonly&quot;,e).then(n)},Y.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,Z.bind(null,n.error)):n.table._trans(&quot;readwrite&quot;,e,&quot;locked&quot;)},Y.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=Fe(n.algorithm,e)},Y.prototype._iterate=function(e,n){return Fn(this._ctx,e,n,this._ctx.table.core)},Y.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),t=Object.create(this._ctx);return e&amp;&amp;W(t,e),n._ctx=t,n},Y.prototype.raw=function(){return this._ctx.valueMapper=null,this},Y.prototype.each=function(e){var n=this._ctx;return this._read(function(t){return Fn(n,e,t,n.table.core)})},Y.prototype.count=function(e){var n=this;return this._read(function(t){var r=n._ctx,o=r.table.core;if(Ze(r,!0))return o.count({trans:t,query:{index:Nn(r,o.schema),range:r.range}}).then(function(a){return Math.min(a,r.limit)});var i=0;return Fn(r,function(){return++i,!1},t,o).then(function(){return i})}).then(e)},Y.prototype.sortBy=function(e,n){var t=e.split(&quot;.&quot;).reverse(),r=t[0],o=t.length-1;function i(c,f){return f?i(c[t[f]],f-1):c[r]}var a=this._ctx.dir===&quot;next&quot;?1:-1;function u(c,f){return z(i(c,o),i(f,o))*a}return this.toArray(function(c){return c.sort(u)}).then(n)},Y.prototype.toArray=function(e){var n=this;return this._read(function(t){var r=n._ctx;if(r.dir===&quot;next&quot;&amp;&amp;Ze(r,!0)&amp;&amp;0&lt;r.limit){var o=r.valueMapper,i=Nn(r,r.table.core.schema);return r.table.core.query({trans:t,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then(function(u){return u=u.result,o?u.map(o):u})}var a=[];return Fn(r,function(u){return a.push(u)},t,r.table.core).then(function(){return a})},e)},Y.prototype.offset=function(e){var n=this._ctx;return e&lt;=0||(n.offset+=e,Ze(n)?_t(n,function(){var t=e;return function(r,o){return t===0||(t===1?--t:o(function(){r.advance(t),t=0}),!1)}}):_t(n,function(){var t=e;return function(){return--t&lt;0}})),this},Y.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),_t(this._ctx,function(){var n=e;return function(t,r,o){return--n&lt;=0&amp;&amp;r(o),0&lt;=n}},!0),this},Y.prototype.until=function(e,n){return wt(this._ctx,function(t,r,o){return!e(t.value)||(r(o),n)}),this},Y.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},Y.prototype.last=function(e){return this.reverse().first(e)},Y.prototype.filter=function(e){var n;return wt(this._ctx,function(t){return e(t.value)}),(n=this._ctx).isMatch=Fe(n.isMatch,e),this},Y.prototype.and=function(e){return this.filter(e)},Y.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Y.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir===&quot;prev&quot;?&quot;next&quot;:&quot;prev&quot;,this._ondirectionchange&amp;&amp;this._ondirectionchange(this._ctx.dir),this},Y.prototype.desc=function(){return this.reverse()},Y.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(t,r){e(r.key,r)})},Y.prototype.eachUniqueKey=function(e){return this._ctx.unique=&quot;unique&quot;,this.eachKey(e)},Y.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},Y.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var t=[];return this.each(function(r,o){t.push(o.key)}).then(function(){return t}).then(e)},Y.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir===&quot;next&quot;&amp;&amp;Ze(n,!0)&amp;&amp;0&lt;n.limit)return this._read(function(r){var o=Nn(n,n.table.core.schema);return n.table.core.query({trans:r,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(r){return r.result}).then(e);n.keysOnly=!n.isMatch;var t=[];return this.each(function(r,o){t.push(o.primaryKey)}).then(function(){return t}).then(e)},Y.prototype.uniqueKeys=function(e){return this._ctx.unique=&quot;unique&quot;,this.keys(e)},Y.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},Y.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Y.prototype.distinct=function(){var e=this._ctx,e=e.index&amp;&amp;e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var n={};return wt(this._ctx,function(o){var r=o.primaryKey.toString(),o=V(n,r);return n[r]=!0,!o}),this},Y.prototype.modify=function(e){var n=this,t=this._ctx;return this._write(function(r){var o,i,a;a=typeof e==&quot;function&quot;?e:(o=U(e),i=o.length,function(h){for(var v=!1,g=0;g&lt;i;++g){var b=o[g],w=e[b],x=ge(h,b);w instanceof hn?(se(h,b,w.execute(x)),v=!0):x!==w&amp;&amp;(se(h,b,w),v=!0)}return v});var u=t.table.core,s=u.schema.primaryKey,c=s.outbound,f=s.extractKey,p=200,s=n.db._options.modifyChunkSize;s&amp;&amp;(p=typeof s==&quot;object&quot;?s[u.name]||s[&quot;*&quot;]||200:s);function m(h,b){var g=b.failures,b=b.numFailures;d+=h-b;for(var w=0,x=U(g);w&lt;x.length;w++){var E=x[w];l.push(g[E])}}var l=[],d=0,y=[];return n.clone().primaryKeys().then(function(h){function v(b){var w=Math.min(p,h.length-b);return u.getMany({trans:r,keys:h.slice(b,b+w),cache:&quot;immutable&quot;}).then(function(x){for(var E=[],k=[],O=c?[]:null,S=[],P=0;P&lt;w;++P){var A=x[P],M={value:je(A),primKey:h[b+P]};a.call(M,M.value,M)!==!1&amp;&amp;(M.value==null?S.push(h[b+P]):c||z(f(A),f(M.value))===0?(k.push(M.value),c&amp;&amp;O.push(h[b+P])):(S.push(h[b+P]),E.push(M.value)))}return Promise.resolve(0&lt;E.length&amp;&amp;u.mutate({trans:r,type:&quot;add&quot;,values:E}).then(function(N){for(var F in N.failures)S.splice(parseInt(F),1);m(E.length,N)})).then(function(){return(0&lt;k.length||g&amp;&amp;typeof e==&quot;object&quot;)&amp;&amp;u.mutate({trans:r,type:&quot;put&quot;,keys:O,values:k,criteria:g,changeSpec:typeof e!=&quot;function&quot;&amp;&amp;e,isAdditionalChunk:0&lt;b}).then(function(N){return m(k.length,N)})}).then(function(){return(0&lt;S.length||g&amp;&amp;e===xt)&amp;&amp;u.mutate({trans:r,type:&quot;delete&quot;,keys:S,criteria:g,isAdditionalChunk:0&lt;b}).then(function(N){return m(S.length,N)})}).then(function(){return h.length&gt;b+w&amp;&amp;v(b+p)})})}var g=Ze(t)&amp;&amp;t.limit===1/0&amp;&amp;(typeof e!=&quot;function&quot;||e===xt)&amp;&amp;{index:t.index,range:t.range};return v(0).then(function(){if(0&lt;l.length)throw new Sn(&quot;Error modifying one or more objects&quot;,l,d,y);return h.length})})})},Y.prototype.delete=function(){var e=this._ctx,n=e.range;return Ze(e)&amp;&amp;(e.isPrimKey||n.type===3)?this._write(function(t){var r=e.table.core.schema.primaryKey,o=n;return e.table.core.count({trans:t,query:{index:r,range:o}}).then(function(i){return e.table.core.mutate({trans:t,type:&quot;deleteRange&quot;,range:o}).then(function(a){var u=a.failures;if(a.lastResult,a.results,a=a.numFailures,a)throw new Sn(&quot;Could not delete some values&quot;,Object.keys(u).map(function(c){return u[c]}),i-a);return i-a})})}):this.modify(xt)},Y);function Y(){}var xt=function(e,n){return n.value=null};function xo(e,n){return e&lt;n?-1:e===n?0:1}function ko(e,n){return n&lt;e?-1:e===n?0:1}function ce(e,n,t){return e=e instanceof kr?new e.Collection(e):e,e._ctx.error=new(t||TypeError)(n),e}function en(e){return new e.Collection(e,function(){return xr(&quot;&quot;)}).limit(0)}function Ln(e,n,t,r){var o,i,a,u,c,f,p,s=t.length;if(!t.every(function(d){return typeof d==&quot;string&quot;}))return ce(e,dr);function m(d){o=d===&quot;next&quot;?function(h){return h.toUpperCase()}:function(h){return h.toLowerCase()},i=d===&quot;next&quot;?function(h){return h.toLowerCase()}:function(h){return h.toUpperCase()},a=d===&quot;next&quot;?xo:ko;var y=t.map(function(h){return{lower:i(h),upper:o(h)}}).sort(function(h,v){return a(h.lower,v.lower)});u=y.map(function(h){return h.upper}),c=y.map(function(h){return h.lower}),p=(f=d)===&quot;next&quot;?&quot;&quot;:r}m(&quot;next&quot;),e=new e.Collection(e,function(){return Ee(u[0],c[s-1]+r)}),e._ondirectionchange=function(d){m(d)};var l=0;return e._addAlgorithm(function(d,y,h){var v=d.key;if(typeof v!=&quot;string&quot;)return!1;var g=i(v);if(n(g,c,l))return!0;for(var b=null,w=l;w&lt;s;++w){var x=function(E,k,O,S,P,A){for(var M=Math.min(E.length,S.length),N=-1,F=0;F&lt;M;++F){var le=k[F];if(le!==S[F])return P(E[F],O[F])&lt;0?E.substr(0,F)+O[F]+O.substr(F+1):P(E[F],S[F])&lt;0?E.substr(0,F)+S[F]+O.substr(F+1):0&lt;=N?E.substr(0,N)+k[N]+O.substr(N+1):null;P(E[F],le)&lt;0&amp;&amp;(N=F)}return M&lt;S.length&amp;&amp;A===&quot;next&quot;?E+O.substr(E.length):M&lt;E.length&amp;&amp;A===&quot;prev&quot;?E.substr(0,O.length):N&lt;0?null:E.substr(0,N)+S[N]+O.substr(N+1)}(v,g,u[w],c[w],a,f);x===null&amp;&amp;b===null?l=w+1:(b===null||0&lt;a(b,x))&amp;&amp;(b=x)}return y(b!==null?function(){d.continue(b+p)}:h),!1}),e}function Ee(e,n,t,r){return{type:2,lower:e,upper:n,lowerOpen:t,upperOpen:r}}function xr(e){return{type:1,lower:e,upper:e}}var kr=(Object.defineProperty(te.prototype,&quot;Collection&quot;,{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),te.prototype.between=function(e,n,t,r){t=t!==!1,r=r===!0;try{return 0&lt;this._cmp(e,n)||this._cmp(e,n)===0&amp;&amp;(t||r)&amp;&amp;(!t||!r)?en(this):new this.Collection(this,function(){return Ee(e,n,!t,!r)})}catch{return ce(this,we)}},te.prototype.equals=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return xr(e)})},te.prototype.above=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(e,void 0,!0)})},te.prototype.aboveOrEqual=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(e,void 0,!1)})},te.prototype.below=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(void 0,e,!1,!0)})},te.prototype.belowOrEqual=function(e){return e==null?ce(this,we):new this.Collection(this,function(){return Ee(void 0,e)})},te.prototype.startsWith=function(e){return typeof e!=&quot;string&quot;?ce(this,dr):this.between(e,e+Ne,!0,!0)},te.prototype.startsWithIgnoreCase=function(e){return e===&quot;&quot;?this.startsWith(e):Ln(this,function(n,t){return n.indexOf(t[0])===0},[e],Ne)},te.prototype.equalsIgnoreCase=function(e){return Ln(this,function(n,t){return n===t[0]},[e],&quot;&quot;)},te.prototype.anyOfIgnoreCase=function(){var e=be.apply($e,arguments);return e.length===0?en(this):Ln(this,function(n,t){return t.indexOf(n)!==-1},e,&quot;&quot;)},te.prototype.startsWithAnyOfIgnoreCase=function(){var e=be.apply($e,arguments);return e.length===0?en(this):Ln(this,function(n,t){return t.some(function(r){return n.indexOf(r)===0})},e,Ne)},te.prototype.anyOf=function(){var e=this,n=be.apply($e,arguments),t=this._cmp;try{n.sort(t)}catch{return ce(this,we)}if(n.length===0)return en(this);var r=new this.Collection(this,function(){return Ee(n[0],n[n.length-1])});r._ondirectionchange=function(i){t=i===&quot;next&quot;?e._ascending:e._descending,n.sort(t)};var o=0;return r._addAlgorithm(function(i,a,u){for(var c=i.key;0&lt;t(c,n[o]);)if(++o===n.length)return a(u),!1;return t(c,n[o])===0||(a(function(){i.continue(n[o])}),!1)}),r},te.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},te.prototype.noneOf=function(){var e=be.apply($e,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ce(this,we)}var n=e.reduce(function(t,r){return t?t.concat([[t[t.length-1][1],r]]):[[-1/0,r]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},te.prototype.inAnyRange=function(v,n){var t=this,r=this._cmp,o=this._ascending,i=this._descending,a=this._min,u=this._max;if(v.length===0)return en(this);if(!v.every(function(g){return g[0]!==void 0&amp;&amp;g[1]!==void 0&amp;&amp;o(g[0],g[1])&lt;=0}))return ce(this,&quot;First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower&quot;,D.InvalidArgument);var c=!n||n.includeLowers!==!1,f=n&amp;&amp;n.includeUppers===!0,p,s=o;function m(g,b){return s(g[0],b[0])}try{(p=v.reduce(function(g,b){for(var w=0,x=g.length;w&lt;x;++w){var E=g[w];if(r(b[0],E[1])&lt;0&amp;&amp;0&lt;r(b[1],E[0])){E[0]=a(E[0],b[0]),E[1]=u(E[1],b[1]);break}}return w===x&amp;&amp;g.push(b),g},[])).sort(m)}catch{return ce(this,we)}var l=0,d=f?function(g){return 0&lt;o(g,p[l][1])}:function(g){return 0&lt;=o(g,p[l][1])},y=c?function(g){return 0&lt;i(g,p[l][0])}:function(g){return 0&lt;=i(g,p[l][0])},h=d,v=new this.Collection(this,function(){return Ee(p[0][0],p[p.length-1][1],!c,!f)});return v._ondirectionchange=function(g){s=g===&quot;next&quot;?(h=d,o):(h=y,i),p.sort(m)},v._addAlgorithm(function(g,b,w){for(var x,E=g.key;h(E);)if(++l===p.length)return b(w),!1;return!d(x=E)&amp;&amp;!y(x)||(t._cmp(E,p[l][1])===0||t._cmp(E,p[l][0])===0||b(function(){s===o?g.continue(p[l][0]):g.continue(p[l][1])}),!1)}),v},te.prototype.startsWithAnyOf=function(){var e=be.apply($e,arguments);return e.every(function(n){return typeof n==&quot;string&quot;})?e.length===0?en(this):this.inAnyRange(e.map(function(n){return[n,n+Ne]})):ce(this,&quot;startsWithAnyOf() only works with strings&quot;)},te);function te(){}function pe(e){return J(function(n){return dn(n),e(n.target.error),!1})}function dn(e){e.stopPropagation&amp;&amp;e.stopPropagation(),e.preventDefault&amp;&amp;e.preventDefault()}var pn=&quot;storagemutated&quot;,kt=&quot;x-storagemutated-1&quot;,Se=ln(null,pn),Oo=(ye.prototype._lock=function(){return tn(!T.global),++this._reculock,this._reculock!==1||T.global||(T.lockOwnerFor=this),this},ye.prototype._unlock=function(){if(tn(!T.global),--this._reculock==0)for(T.global||(T.lockOwnerFor=null);0&lt;this._blockedFuncs.length&amp;&amp;!this._locked();){var e=this._blockedFuncs.shift();try{Be(e[1],e[0])}catch{}}return this},ye.prototype._locked=function(){return this._reculock&amp;&amp;T.lockOwnerFor!==this},ye.prototype.create=function(e){var n=this;if(!this.mode)return this;var t=this.db.idbdb,r=this.db._state.dbOpenError;if(tn(!this.idbtrans),!e&amp;&amp;!t)switch(r&amp;&amp;r.name){case&quot;DatabaseClosedError&quot;:throw new D.DatabaseClosed(r);case&quot;MissingAPIError&quot;:throw new D.MissingAPI(r.message,r);default:throw new D.OpenFailed(r)}if(!this.active)throw new D.TransactionInactive;return tn(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||t).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=J(function(o){dn(o),n._reject(e.error)}),e.onabort=J(function(o){dn(o),n.active&amp;&amp;n._reject(new D.Abort(e.error)),n.active=!1,n.on(&quot;abort&quot;).fire(o)}),e.oncomplete=J(function(){n.active=!1,n._resolve(),&quot;mutatedParts&quot;in e&amp;&amp;Se.storagemutated.fire(e.mutatedParts)}),this},ye.prototype._promise=function(e,n,t){var r=this;if(e===&quot;readwrite&quot;&amp;&amp;this.mode!==&quot;readwrite&quot;)return Z(new D.ReadOnly(&quot;Transaction is readonly&quot;));if(!this.active)return Z(new D.TransactionInactive);if(this._locked())return new K(function(i,a){r._blockedFuncs.push([function(){r._promise(e,n,t).then(i,a)},T])});if(t)return ke(function(){var i=new K(function(a,u){r._lock();var c=n(a,u,r);c&amp;&amp;c.then&amp;&amp;c.then(a,u)});return i.finally(function(){return r._unlock()}),i._lib=!0,i});var o=new K(function(i,a){var u=n(i,a,r);u&amp;&amp;u.then&amp;&amp;u.then(i,a)});return o._lib=!0,o},ye.prototype._root=function(){return this.parent?this.parent._root():this},ye.prototype.waitFor=function(e){var n,t=this._root(),r=K.resolve(e);t._waitingFor?t._waitingFor=t._waitingFor.then(function(){return r}):(t._waitingFor=r,t._waitingQueue=[],n=t.idbtrans.objectStore(t.storeNames[0]),function i(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&amp;&amp;(n.get(-1/0).onsuccess=i)}());var o=t._waitingFor;return new K(function(i,a){r.then(function(u){return t._waitingQueue.push(J(i.bind(null,u)))},function(u){return t._waitingQueue.push(J(a.bind(null,u)))}).finally(function(){t._waitingFor===o&amp;&amp;(t._waitingFor=null)})})},ye.prototype.abort=function(){this.active&amp;&amp;(this.active=!1,this.idbtrans&amp;&amp;this.idbtrans.abort(),this._reject(new D.Abort))},ye.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(V(n,e))return n[e];var t=this.schema[e];if(!t)throw new D.NotFound(&quot;Table &quot;+e+&quot; not part of transaction&quot;);return t=new this.db.Table(e,t,this),t.core=this.db.core.table(e),n[e]=t},ye);function ye(){}function Ot(e,n,t,r,o,i,a){return{name:e,keyPath:n,unique:t,multi:r,auto:o,compound:i,src:(t&amp;&amp;!a?&quot;&amp;&quot;:&quot;&quot;)+(r?&quot;*&quot;:&quot;&quot;)+(o?&quot;++&quot;:&quot;&quot;)+Or(n)}}function Or(e){return typeof e==&quot;string&quot;?e:e?&quot;[&quot;+[].join.call(e,&quot;+&quot;)+&quot;]&quot;:&quot;&quot;}function Pt(e,n,t){return{name:e,primKey:n,indexes:t,mappedClass:null,idxByName:(r=function(o){return[o.name,o]},t.reduce(function(o,i,a){return a=r(i,a),a&amp;&amp;(o[a[0]]=a[1]),o},{}))};var r}var yn=function(e){try{return e.only([[]]),yn=function(){return[[]]},[[]]}catch{return yn=function(){return Ne},Ne}};function Et(e){return e==null?function(){}:typeof e==&quot;string&quot;?(n=e).split(&quot;.&quot;).length===1?function(t){return t[n]}:function(t){return ge(t,n)}:function(t){return ge(t,e)};var n}function Pr(e){return[].slice.call(e)}var Po=0;function mn(e){return e==null?&quot;:id&quot;:typeof e==&quot;string&quot;?e:&quot;[&quot;.concat(e.join(&quot;+&quot;),&quot;]&quot;)}function Eo(e,n,c){function r(h){if(h.type===3)return null;if(h.type===4)throw new Error(&quot;Cannot convert never type to IDBKeyRange&quot;);var l=h.lower,d=h.upper,y=h.lowerOpen,h=h.upperOpen;return l===void 0?d===void 0?null:n.upperBound(d,!!h):d===void 0?n.lowerBound(l,!!y):n.bound(l,d,!!y,!!h)}function o(m){var l,d=m.name;return{name:d,schema:m,mutate:function(y){var h=y.trans,v=y.type,g=y.keys,b=y.values,w=y.range;return new Promise(function(x,E){x=J(x);var k=h.objectStore(d),O=k.keyPath==null,S=v===&quot;put&quot;||v===&quot;add&quot;;if(!S&amp;&amp;v!==&quot;delete&quot;&amp;&amp;v!==&quot;deleteRange&quot;)throw new Error(&quot;Invalid operation type: &quot;+v);var P,A=(g||b||{length:1}).length;if(g&amp;&amp;b&amp;&amp;g.length!==b.length)throw new Error(&quot;Given keys array must have same length as given values array.&quot;);if(A===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});function M(ae){++le,dn(ae)}var N=[],F=[],le=0;if(v===&quot;deleteRange&quot;){if(w.type===4)return x({numFailures:le,failures:F,results:[],lastResult:void 0});w.type===3?N.push(P=k.clear()):N.push(P=k.delete(r(w)))}else{var O=S?O?[b,g]:[b,null]:[g,null],I=O[0],oe=O[1];if(S)for(var ie=0;ie&lt;A;++ie)N.push(P=oe&amp;&amp;oe[ie]!==void 0?k[v](I[ie],oe[ie]):k[v](I[ie])),P.onerror=M;else for(ie=0;ie&lt;A;++ie)N.push(P=k[v](I[ie])),P.onerror=M}function et(ae){ae=ae.target.result,N.forEach(function(Ve,zt){return Ve.error!=null&amp;&amp;(F[zt]=Ve.error)}),x({numFailures:le,failures:F,results:v===&quot;delete&quot;?g:N.map(function(Ve){return Ve.result}),lastResult:ae})}P.onerror=function(ae){M(ae),et(ae)},P.onsuccess=et})},getMany:function(y){var h=y.trans,v=y.keys;return new Promise(function(g,b){g=J(g);for(var w,x=h.objectStore(d),E=v.length,k=new Array(E),O=0,S=0,P=function(N){N=N.target,k[N._pos]=N.result,++S===O&amp;&amp;g(k)},A=pe(b),M=0;M&lt;E;++M)v[M]!=null&amp;&amp;((w=x.get(v[M]))._pos=M,w.onsuccess=P,w.onerror=A,++O);O===0&amp;&amp;g(k)})},get:function(y){var h=y.trans,v=y.key;return new Promise(function(g,b){g=J(g);var w=h.objectStore(d).get(v);w.onsuccess=function(x){return g(x.target.result)},w.onerror=pe(b)})},query:(l=f,function(y){return new Promise(function(h,v){h=J(h);var g,b,w,O=y.trans,x=y.values,E=y.limit,P=y.query,k=E===1/0?void 0:E,S=P.index,P=P.range,O=O.objectStore(d),S=S.isPrimaryKey?O:O.index(S.name),P=r(P);if(E===0)return h({result:[]});l?((k=x?S.getAll(P,k):S.getAllKeys(P,k)).onsuccess=function(A){return h({result:A.target.result})},k.onerror=pe(v)):(g=0,b=!x&amp;&amp;&quot;openKeyCursor&quot;in S?S.openKeyCursor(P):S.openCursor(P),w=[],b.onsuccess=function(A){var M=b.result;return M?(w.push(x?M.value:M.primaryKey),++g===E?h({result:w}):void M.continue()):h({result:w})},b.onerror=pe(v))})}),openCursor:function(y){var h=y.trans,v=y.values,g=y.query,b=y.reverse,w=y.unique;return new Promise(function(x,E){x=J(x);var S=g.index,k=g.range,O=h.objectStore(d),O=S.isPrimaryKey?O:O.index(S.name),S=b?w?&quot;prevunique&quot;:&quot;prev&quot;:w?&quot;nextunique&quot;:&quot;next&quot;,P=!v&amp;&amp;&quot;openKeyCursor&quot;in O?O.openKeyCursor(r(k),S):O.openCursor(r(k),S);P.onerror=pe(E),P.onsuccess=J(function(A){var M,N,F,le,I=P.result;I?(I.___id=++Po,I.done=!1,M=I.continue.bind(I),N=(N=I.continuePrimaryKey)&amp;&amp;N.bind(I),F=I.advance.bind(I),le=function(){throw new Error(&quot;Cursor not stopped&quot;)},I.trans=h,I.stop=I.continue=I.continuePrimaryKey=I.advance=function(){throw new Error(&quot;Cursor not started&quot;)},I.fail=J(E),I.next=function(){var oe=this,ie=1;return this.start(function(){return ie--?oe.continue():oe.stop()}).then(function(){return oe})},I.start=function(oe){function ie(){if(P.result)try{oe()}catch(ae){I.fail(ae)}else I.done=!0,I.start=function(){throw new Error(&quot;Cursor behind last entry&quot;)},I.stop()}var et=new Promise(function(ae,Ve){ae=J(ae),P.onerror=pe(Ve),I.fail=Ve,I.stop=function(zt){I.stop=I.continue=I.continuePrimaryKey=I.advance=le,ae(zt)}});return P.onsuccess=J(function(ae){P.onsuccess=ie,ie()}),I.continue=M,I.continuePrimaryKey=N,I.advance=F,ie(),et},x(I)):x(null)},E)})},count:function(y){var h=y.query,v=y.trans,g=h.index,b=h.range;return new Promise(function(w,x){var E=v.objectStore(d),k=g.isPrimaryKey?E:E.index(g.name),E=r(b),k=E?k.count(E):k.count();k.onsuccess=J(function(O){return w(O.target.result)}),k.onerror=pe(x)})}}}var i,a,u,p=(a=c,u=Pr((i=e).objectStoreNames),{schema:{name:i.name,tables:u.map(function(m){return a.objectStore(m)}).map(function(m){var l=m.keyPath,h=m.autoIncrement,d=q(l),y={},h={name:m.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:l==null,compound:d,keyPath:l,autoIncrement:h,unique:!0,extractKey:Et(l)},indexes:Pr(m.indexNames).map(function(v){return m.index(v)}).map(function(w){var g=w.name,b=w.unique,x=w.multiEntry,w=w.keyPath,x={name:g,compound:q(w),keyPath:w,unique:b,multiEntry:x,extractKey:Et(w)};return y[mn(w)]=x}),getIndexByKeyPath:function(v){return y[mn(v)]}};return y[&quot;:id&quot;]=h.primaryKey,l!=null&amp;&amp;(y[mn(l)]=h.primaryKey),h})},hasGetAll:0&lt;u.length&amp;&amp;&quot;getAll&quot;in a.objectStore(u[0])&amp;&amp;!(typeof navigator&lt;&quot;u&quot;&amp;&amp;/Safari/.test(navigator.userAgent)&amp;&amp;!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&amp;&amp;[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]&lt;604)}),c=p.schema,f=p.hasGetAll,p=c.tables.map(o),s={};return p.forEach(function(m){return s[m.name]=m}),{stack:&quot;dbcore&quot;,transaction:e.transaction.bind(e),table:function(m){if(!s[m])throw new Error(&quot;Table \&#x27;&quot;.concat(m,&quot;\&#x27; not found&quot;));return s[m]},MIN_KEY:-1/0,MAX_KEY:yn(n),schema:c}}function So(e,n,t,r){var o=t.IDBKeyRange;return t.indexedDB,{dbcore:(r=Eo(n,o,r),e.dbcore.reduce(function(i,a){return a=a.create,C(C({},i),a(i))},r))}}function Un(e,r){var t=r.db,r=So(e._middlewares,t,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(o){var i=o.name;e.core.schema.tables.some(function(a){return a.name===i})&amp;&amp;(o.core=e.core.table(i),e[i]instanceof e.Table&amp;&amp;(e[i].core=o.core))})}function Vn(e,n,t,r){t.forEach(function(o){var i=r[o];n.forEach(function(a){var u=function c(f,p){return ro(f,p)||(f=H(f))&amp;&amp;c(f,p)}(a,o);(!u||&quot;value&quot;in u&amp;&amp;u.value===void 0)&amp;&amp;(a===e.Transaction.prototype||a instanceof e.Transaction?he(a,o,{get:function(){return this.table(o)},set:function(c){ue(this,o,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):a[o]=new e.Table(o,i))})})}function St(e,n){n.forEach(function(t){for(var r in t)t[r]instanceof e.Table&amp;&amp;delete t[r]})}function Ko(e,n){return e._cfg.version-n._cfg.version}function Co(e,n,t,r){var o=e._dbSchema;t.objectStoreNames.contains(&quot;$meta&quot;)&amp;&amp;!o.$meta&amp;&amp;(o.$meta=Pt(&quot;$meta&quot;,Sr(&quot;&quot;)[0],[]),e._storeNames.push(&quot;$meta&quot;));var i=e._createTransaction(&quot;readwrite&quot;,e._storeNames,o);i.create(t),i._completion.catch(r);var a=i._reject.bind(i),u=T.transless||T;ke(function(){return T.trans=i,T.transless=u,n!==0?(Un(e,t),f=n,((c=i).storeNames.includes(&quot;$meta&quot;)?c.table(&quot;$meta&quot;).get(&quot;version&quot;).then(function(p){return p??f}):K.resolve(f)).then(function(p){return m=p,l=i,d=t,y=[],p=(s=e)._versions,h=s._dbSchema=Wn(0,s.idbdb,d),(p=p.filter(function(v){return v._cfg.version&gt;=m})).length!==0?(p.forEach(function(v){y.push(function(){var g=h,b=v._cfg.dbschema;$n(s,g,d),$n(s,b,d),h=s._dbSchema=b;var w=Kt(g,b);w.add.forEach(function(S){Ct(d,S[0],S[1].primKey,S[1].indexes)}),w.change.forEach(function(S){if(S.recreate)throw new D.Upgrade(&quot;Not yet support for changing primary key&quot;);var P=d.objectStore(S.name);S.add.forEach(function(A){return zn(P,A)}),S.change.forEach(function(A){P.deleteIndex(A.name),zn(P,A)}),S.del.forEach(function(A){return P.deleteIndex(A)})});var x=v._cfg.contentUpgrade;if(x&amp;&amp;v._cfg.version&gt;m){Un(s,d),l._memoizedTables={};var E=tr(b);w.del.forEach(function(S){E[S]=g[S]}),St(s,[s.Transaction.prototype]),Vn(s,[s.Transaction.prototype],U(E),E),l.schema=E;var k,O=ut(x);return O&amp;&amp;Xe(),w=K.follow(function(){var S;(k=x(l))&amp;&amp;O&amp;&amp;(S=Oe.bind(null,null),k.then(S,S))}),k&amp;&amp;typeof k.then==&quot;function&quot;?K.resolve(k):w.then(function(){return k})}}),y.push(function(g){var b,w,x=v._cfg.dbschema;b=x,w=g,[].slice.call(w.db.objectStoreNames).forEach(function(E){return b[E]==null&amp;&amp;w.db.deleteObjectStore(E)}),St(s,[s.Transaction.prototype]),Vn(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),l.schema=s._dbSchema}),y.push(function(g){s.idbdb.objectStoreNames.contains(&quot;$meta&quot;)&amp;&amp;(Math.ceil(s.idbdb.version/10)===v._cfg.version?(s.idbdb.deleteObjectStore(&quot;$meta&quot;),delete s._dbSchema.$meta,s._storeNames=s._storeNames.filter(function(b){return b!==&quot;$meta&quot;})):g.objectStore(&quot;$meta&quot;).put(v._cfg.version,&quot;version&quot;))})}),function v(){return y.length?K.resolve(y.shift()(l.idbtrans)).then(v):K.resolve()}().then(function(){Er(h,d)})):K.resolve();var s,m,l,d,y,h}).catch(a)):(U(o).forEach(function(p){Ct(t,p,o[p].primKey,o[p].indexes)}),Un(e,t),void K.follow(function(){return e.on.populate.fire(i)}).catch(a));var c,f})}function Ao(e,n){Er(e._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains(&quot;$meta&quot;)||n.db.createObjectStore(&quot;$meta&quot;).add(Math.ceil(n.db.version/10-1),&quot;version&quot;);var t=Wn(0,e.idbdb,n);$n(e,e._dbSchema,n);for(var r=0,o=Kt(t,e._dbSchema).change;r&lt;o.length;r++){var i=function(a){if(a.change.length||a.recreate)return console.warn(&quot;Unable to patch indexes of table &quot;.concat(a.name,&quot; because it has changes on the type of index or primary key.&quot;)),{value:void 0};var u=n.objectStore(a.name);a.add.forEach(function(c){de&amp;&amp;console.debug(&quot;Dexie upgrade patch: Creating missing index &quot;.concat(a.name,&quot;.&quot;).concat(c.src)),zn(u,c)})}(o[r]);if(typeof i==&quot;object&quot;)return i.value}}function Kt(e,n){var t,r={del:[],add:[],change:[]};for(t in e)n[t]||r.del.push(t);for(t in n){var o=e[t],i=n[t];if(o){var a={name:t,def:i,recreate:!1,del:[],add:[],change:[]};if(&quot;&quot;+(o.primKey.keyPath||&quot;&quot;)!=&quot;&quot;+(i.primKey.keyPath||&quot;&quot;)||o.primKey.auto!==i.primKey.auto)a.recreate=!0,r.change.push(a);else{var u=o.idxByName,c=i.idxByName,f=void 0;for(f in u)c[f]||a.del.push(f);for(f in c){var p=u[f],s=c[f];p?p.src!==s.src&amp;&amp;a.change.push(s):a.add.push(s)}(0&lt;a.del.length||0&lt;a.add.length||0&lt;a.change.length)&amp;&amp;r.change.push(a)}}else r.add.push([t,i])}return r}function Ct(e,n,t,r){var o=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(function(i){return zn(o,i)}),o}function Er(e,n){U(e).forEach(function(t){n.db.objectStoreNames.contains(t)||(de&amp;&amp;console.debug(&quot;Dexie: Creating missing table&quot;,t),Ct(n,t,e[t].primKey,e[t].indexes))})}function zn(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Wn(e,n,t){var r={};return En(n.objectStoreNames,0).forEach(function(o){for(var i=t.objectStore(o),a=Ot(Or(f=i.keyPath),f||&quot;&quot;,!0,!1,!!i.autoIncrement,f&amp;&amp;typeof f!=&quot;string&quot;,!0),u=[],c=0;c&lt;i.indexNames.length;++c){var p=i.index(i.indexNames[c]),f=p.keyPath,p=Ot(p.name,f,!!p.unique,!!p.multiEntry,!1,f&amp;&amp;typeof f!=&quot;string&quot;,!1);u.push(p)}r[o]=Pt(o,a,u)}),r}function $n(e,n,t){for(var r=t.db.objectStoreNames,o=0;o&lt;r.length;++o){var i=r[o],a=t.objectStore(i);e._hasGetAll=&quot;getAll&quot;in a;for(var u=0;u&lt;a.indexNames.length;++u){var c=a.indexNames[u],f=a.index(c).keyPath,p=typeof f==&quot;string&quot;?f:&quot;[&quot;+En(f).join(&quot;+&quot;)+&quot;]&quot;;!n[i]||(f=n[i].idxByName[p])&amp;&amp;(f.name=c,delete n[i].idxByName[p],n[i].idxByName[c]=f)}}typeof navigator&lt;&quot;u&quot;&amp;&amp;/Safari/.test(navigator.userAgent)&amp;&amp;!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&amp;&amp;B.WorkerGlobalScope&amp;&amp;B instanceof B.WorkerGlobalScope&amp;&amp;[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]&lt;604&amp;&amp;(e._hasGetAll=!1)}function Sr(e){return e.split(&quot;,&quot;).map(function(n,t){var r=(n=n.trim()).replace(/([&amp;*]|\\+\\+)/g,&quot;&quot;),o=/^\\[/.test(r)?r.match(/^\\[(.*)\\]$/)[1].split(&quot;+&quot;):r;return Ot(r,o||null,/\\&amp;/.test(n),/\\*/.test(n),/\\+\\+/.test(n),q(o),t===0)})}var jo=(Yn.prototype._parseStoresSpec=function(e,n){U(e).forEach(function(t){if(e[t]!==null){var r=Sr(e[t]),o=r.shift();if(o.unique=!0,o.multi)throw new D.Schema(&quot;Primary key cannot be multi-valued&quot;);r.forEach(function(i){if(i.auto)throw new D.Schema(&quot;Only primary key can be marked as autoIncrement (++)&quot;);if(!i.keyPath)throw new D.Schema(&quot;Index must have a name and cannot be an empty string&quot;)}),n[t]=Pt(t,o,r)}})},Yn.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?W(this._cfg.storesSource,t):t;var t=n._versions,r={},o={};return t.forEach(function(i){W(r,i._cfg.storesSource),o=i._cfg.dbschema={},i._parseStoresSpec(r,o)}),n._dbSchema=o,St(n,[n._allTables,n,n.Transaction.prototype]),Vn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],U(o),o),n._storeNames=U(o),this},Yn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ct(this._cfg.contentUpgrade||G,e),this},Yn);function Yn(){}function At(e,n){var t=e._dbNamesDB;return t||(t=e._dbNamesDB=new _e(Mn,{addons:[],indexedDB:e,IDBKeyRange:n})).version(1).stores({dbnames:&quot;name&quot;}),t.table(&quot;dbnames&quot;)}function jt(e){return e&amp;&amp;typeof e.databases==&quot;function&quot;}function Tt(e){return ke(function(){return T.letThrough=!0,e()})}function Dt(e){return!(&quot;from&quot;in e)}var re=function(e,n){if(!this){var t=new re;return e&amp;&amp;&quot;d&quot;in e&amp;&amp;W(t,e),t}W(this,arguments.length?{d:1,from:e,to:1&lt;arguments.length?n:e}:{d:0})};function vn(e,n,t){var r=z(n,t);if(!isNaN(r)){if(0&lt;r)throw RangeError();if(Dt(e))return W(e,{from:n,to:t,d:1});var o=e.l,r=e.r;if(z(t,e.from)&lt;0)return o?vn(o,n,t):e.l={from:n,to:t,d:1,l:null,r:null},Cr(e);if(0&lt;z(n,e.to))return r?vn(r,n,t):e.r={from:n,to:t,d:1,l:null,r:null},Cr(e);z(n,e.from)&lt;0&amp;&amp;(e.from=n,e.l=null,e.d=r?r.d+1:1),0&lt;z(t,e.to)&amp;&amp;(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1),t=!e.r,o&amp;&amp;!e.l&amp;&amp;gn(e,o),r&amp;&amp;t&amp;&amp;gn(e,r)}}function gn(e,n){Dt(n)||function t(r,c){var i=c.from,a=c.to,u=c.l,c=c.r;vn(r,i,a),u&amp;&amp;t(r,u),c&amp;&amp;t(r,c)}(e,n)}function Kr(e,n){var t=Hn(n),r=t.next();if(r.done)return!1;for(var o=r.value,i=Hn(e),a=i.next(o.from),u=a.value;!r.done&amp;&amp;!a.done;){if(z(u.from,o.to)&lt;=0&amp;&amp;0&lt;=z(u.to,o.from))return!0;z(o.from,u.from)&lt;0?o=(r=t.next(u.from)).value:u=(a=i.next(o.from)).value}return!1}function Hn(e){var n=Dt(e)?null:{s:0,n:e};return{next:function(t){for(var r=0&lt;arguments.length;n;)switch(n.s){case 0:if(n.s=1,r)for(;n.n.l&amp;&amp;z(t,n.n.from)&lt;0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!r||z(t,n.n.to)&lt;=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function Cr(e){var n,t,r=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((t=e.l)===null||t===void 0?void 0:t.d)||0),o=1&lt;r?&quot;r&quot;:r&lt;-1?&quot;l&quot;:&quot;&quot;;o&amp;&amp;(n=o==&quot;r&quot;?&quot;l&quot;:&quot;r&quot;,t=C({},e),r=e[o],e.from=r.from,e.to=r.to,e[o]=r[o],t[o]=r[n],(e[n]=t).d=Ar(t)),e.d=Ar(e)}function Ar(t){var n=t.r,t=t.l;return(n?t?Math.max(n.d,t.d):n.d:t?t.d:0)+1}function Gn(e,n){return U(n).forEach(function(t){e[t]?gn(e[t],n[t]):e[t]=function r(o){var i,a,u={};for(i in o)V(o,i)&amp;&amp;(a=o[i],u[i]=!a||typeof a!=&quot;object&quot;||or.has(a.constructor)?a:r(a));return u}(n[t])}),e}function Rt(e,n){return e.all||n.all||Object.keys(e).some(function(t){return n[t]&amp;&amp;Kr(n[t],e[t])})}$(re.prototype,((fe={add:function(e){return gn(this,e),this},addKey:function(e){return vn(this,e,e),this},addKeys:function(e){var n=this;return e.forEach(function(t){return vn(n,t,t)}),this},hasKey:function(e){var n=Hn(this).next(e).value;return n&amp;&amp;z(n.from,e)&lt;=0&amp;&amp;0&lt;=z(n.to,e)}})[at]=function(){return Hn(this)},fe));var Le={},It={},qt=!1;function Qn(e){Gn(It,e),qt||(qt=!0,setTimeout(function(){qt=!1,Mt(It,!(It={}))},0))}function Mt(e,n){n===void 0&amp;&amp;(n=!1);var t=new Set;if(e.all)for(var r=0,o=Object.values(Le);r&lt;o.length;r++)jr(a=o[r],e,t,n);else for(var i in e){var a,u=/^idb\\:\\/\\/(.*)\\/(.*)\\//.exec(i);u&amp;&amp;(i=u[1],u=u[2],(a=Le[&quot;idb://&quot;.concat(i,&quot;/&quot;).concat(u)])&amp;&amp;jr(a,e,t,n))}t.forEach(function(c){return c()})}function jr(e,n,t,r){for(var o=[],i=0,a=Object.entries(e.queries.query);i&lt;a.length;i++){for(var u=a[i],c=u[0],f=[],p=0,s=u[1];p&lt;s.length;p++){var m=s[p];Rt(n,m.obsSet)?m.subscribers.forEach(function(h){return t.add(h)}):r&amp;&amp;f.push(m)}r&amp;&amp;o.push([c,f])}if(r)for(var l=0,d=o;l&lt;d.length;l++){var y=d[l],c=y[0],f=y[1];e.queries.query[c]=f}}function To(e){var n=e._state,t=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?Z(n.dbOpenError):e});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var r=n.openCanceller,o=Math.round(10*e.verno),i=!1;function a(){if(n.openCanceller!==r)throw new D.DatabaseClosed(&quot;db.open() was cancelled&quot;)}function u(){return new K(function(m,l){if(a(),!t)throw new D.MissingAPI;var d=e.name,y=n.autoSchema||!o?t.open(d):t.open(d,o);if(!y)throw new D.MissingAPI;y.onerror=pe(l),y.onblocked=J(e._fireOnBlocked),y.onupgradeneeded=J(function(h){var v;p=y.transaction,n.autoSchema&amp;&amp;!e._options.allowEmptyDB?(y.onerror=dn,p.abort(),y.result.close(),(v=t.deleteDatabase(d)).onsuccess=v.onerror=J(function(){l(new D.NoSuchDatabase(&quot;Database &quot;.concat(d,&quot; doesnt exist&quot;)))})):(p.onerror=pe(l),h=h.oldVersion&gt;Math.pow(2,62)?0:h.oldVersion,s=h&lt;1,e.idbdb=y.result,i&amp;&amp;Ao(e,p),Co(e,h/10,p,l))},l),y.onsuccess=J(function(){p=null;var h,v,g,b,w,x=e.idbdb=y.result,E=En(x.objectStoreNames);if(0&lt;E.length)try{var k=x.transaction((b=E).length===1?b[0]:b,&quot;readonly&quot;);if(n.autoSchema)v=x,g=k,(h=e).verno=v.version/10,g=h._dbSchema=Wn(0,v,g),h._storeNames=En(v.objectStoreNames,0),Vn(h,[h._allTables],U(g),g);else if($n(e,e._dbSchema,k),((w=Kt(Wn(0,(w=e).idbdb,k),w._dbSchema)).add.length||w.change.some(function(O){return O.add.length||O.change.length}))&amp;&amp;!i)return console.warn(&quot;Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this.&quot;),x.close(),o=x.version+1,i=!0,m(u());Un(e,k)}catch{}Je.push(e),x.onversionchange=J(function(O){n.vcFired=!0,e.on(&quot;versionchange&quot;).fire(O)}),x.onclose=J(function(O){e.on(&quot;close&quot;).fire(O)}),s&amp;&amp;(w=e._deps,k=d,x=w.indexedDB,w=w.IDBKeyRange,jt(x)||k===Mn||At(x,w).put({name:k}).catch(G)),m()},l)}).catch(function(m){switch(m==null?void 0:m.name){case&quot;UnknownError&quot;:if(0&lt;n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn(&quot;Dexie: Workaround for Chrome UnknownError on open()&quot;),u();break;case&quot;VersionError&quot;:if(0&lt;o)return o=0,u()}return K.reject(m)})}var c,f=n.dbReadyResolve,p=null,s=!1;return K.race([r,(typeof navigator&gt;&quot;u&quot;?K.resolve():!navigator.userAgentData&amp;&amp;/Safari\\//.test(navigator.userAgent)&amp;&amp;!/Chrom(e|ium)\\//.test(navigator.userAgent)&amp;&amp;indexedDB.databases?new Promise(function(m){function l(){return indexedDB.databases().finally(m)}c=setInterval(l,100),l()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(u)]).then(function(){return a(),n.onReadyBeingFired=[],K.resolve(Tt(function(){return e.on.ready.fire(e.vip)})).then(function m(){if(0&lt;n.onReadyBeingFired.length){var l=n.onReadyBeingFired.reduce(ct,G);return n.onReadyBeingFired=[],K.resolve(Tt(function(){return l(e.vip)})).then(m)}})}).finally(function(){n.openCanceller===r&amp;&amp;(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(m){n.dbOpenError=m;try{p&amp;&amp;p.abort()}catch{}return r===n.openCanceller&amp;&amp;e._close(),Z(m)}).finally(function(){n.openComplete=!0,f()}).then(function(){var m;return s&amp;&amp;(m={},e.tables.forEach(function(l){l.schema.indexes.forEach(function(d){d.name&amp;&amp;(m[&quot;idb://&quot;.concat(e.name,&quot;/&quot;).concat(l.name,&quot;/&quot;).concat(d.name)]=new re(-1/0,[[[]]]))}),m[&quot;idb://&quot;.concat(e.name,&quot;/&quot;).concat(l.name,&quot;/&quot;)]=m[&quot;idb://&quot;.concat(e.name,&quot;/&quot;).concat(l.name,&quot;/:dels&quot;)]=new re(-1/0,[[[]]])}),Se(pn).fire(m),Mt(m,!0)),e})}function Bt(e){function n(i){return e.next(i)}var t=o(n),r=o(function(i){return e.throw(i)});function o(i){return function(c){var u=i(c),c=u.value;return u.done?c:c&amp;&amp;typeof c.then==&quot;function&quot;?c.then(t,r):q(c)?Promise.all(c).then(t,r):t(c)}}return o(n)()}function Xn(e,n,t){for(var r=q(e)?e.slice():[e],o=0;o&lt;t;++o)r.push(n);return r}var Do={stack:&quot;dbcore&quot;,name:&quot;VirtualIndexMiddleware&quot;,level:1,create:function(e){return C(C({},e),{table:function(n){var t=e.table(n),r=t.schema,o={},i=[];function a(s,m,l){var d=mn(s),y=o[d]=o[d]||[],h=s==null?0:typeof s==&quot;string&quot;?1:s.length,v=0&lt;m,v=C(C({},l),{name:v?&quot;&quot;.concat(d,&quot;(virtual-from:&quot;).concat(l.name,&quot;)&quot;):l.name,lowLevelIndex:l,isVirtual:v,keyTail:m,keyLength:h,extractKey:Et(s),unique:!v&amp;&amp;l.unique});return y.push(v),v.isPrimaryKey||i.push(v),1&lt;h&amp;&amp;a(h===2?s[0]:s.slice(0,h-1),m+1,l),y.sort(function(g,b){return g.keyTail-b.keyTail}),v}n=a(r.primaryKey.keyPath,0,r.primaryKey),o[&quot;:id&quot;]=[n];for(var u=0,c=r.indexes;u&lt;c.length;u++){var f=c[u];a(f.keyPath,0,f)}function p(s){var m,l=s.query.index;return l.isVirtual?C(C({},s),{query:{index:l.lowLevelIndex,range:(m=s.query.range,l=l.keyTail,{type:m.type===1?2:m.type,lower:Xn(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,l),lowerOpen:!0,upper:Xn(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,l),upperOpen:!0})}}):s}return C(C({},t),{schema:C(C({},r),{primaryKey:n,indexes:i,getIndexByKeyPath:function(s){return(s=o[mn(s)])&amp;&amp;s[0]}}),count:function(s){return t.count(p(s))},query:function(s){return t.query(p(s))},openCursor:function(s){var m=s.query.index,l=m.keyTail,d=m.isVirtual,y=m.keyLength;return d?t.openCursor(p(s)).then(function(v){return v&amp;&amp;h(v)}):t.openCursor(s);function h(v){return Object.create(v,{continue:{value:function(g){g!=null?v.continue(Xn(g,s.reverse?e.MAX_KEY:e.MIN_KEY,l)):s.unique?v.continue(v.key.slice(0,y).concat(s.reverse?e.MIN_KEY:e.MAX_KEY,l)):v.continue()}},continuePrimaryKey:{value:function(g,b){v.continuePrimaryKey(Xn(g,e.MAX_KEY,l),b)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var g=v.key;return y===1?g[0]:g.slice(0,y)}},value:{get:function(){return v.value}}})}}})}})}};function Nt(e,n,t,r){return t=t||{},r=r||&quot;&quot;,U(e).forEach(function(o){var i,a,u;V(n,o)?(i=e[o],a=n[o],typeof i==&quot;object&quot;&amp;&amp;typeof a==&quot;object&quot;&amp;&amp;i&amp;&amp;a?(u=it(i))!==it(a)?t[r+o]=n[o]:u===&quot;Object&quot;?Nt(i,a,t,r+o+&quot;.&quot;):i!==a&amp;&amp;(t[r+o]=n[o]):i!==a&amp;&amp;(t[r+o]=n[o])):t[r+o]=void 0}),U(n).forEach(function(o){V(e,o)||(t[r+o]=n[o])}),t}function Ft(e,n){return n.type===&quot;delete&quot;?n.keys:n.keys||n.values.map(e.extractKey)}var Ro={stack:&quot;dbcore&quot;,name:&quot;HooksMiddleware&quot;,level:2,create:function(e){return C(C({},e),{table:function(n){var t=e.table(n),r=t.schema.primaryKey;return C(C({},t),{mutate:function(o){var i=T.trans,a=i.table(n).hook,u=a.deleting,c=a.creating,f=a.updating;switch(o.type){case&quot;add&quot;:if(c.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return p(o)},!0);case&quot;put&quot;:if(c.fire===G&amp;&amp;f.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return p(o)},!0);case&quot;delete&quot;:if(u.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return p(o)},!0);case&quot;deleteRange&quot;:if(u.fire===G)break;return i._promise(&quot;readwrite&quot;,function(){return function s(m,l,d){return t.query({trans:m,values:!1,query:{index:r,range:l},limit:d}).then(function(y){var h=y.result;return p({type:&quot;delete&quot;,keys:h,trans:m}).then(function(v){return 0&lt;v.numFailures?Promise.reject(v.failures[0]):h.length&lt;d?{failures:[],numFailures:0,lastResult:void 0}:s(m,C(C({},l),{lower:h[h.length-1],lowerOpen:!0}),d)})})}(o.trans,o.range,1e4)},!0)}return t.mutate(o);function p(s){var m,l,d,y=T.trans,h=s.keys||Ft(r,s);if(!h)throw new Error(&quot;Keys missing&quot;);return(s=s.type===&quot;add&quot;||s.type===&quot;put&quot;?C(C({},s),{keys:h}):C({},s)).type!==&quot;delete&quot;&amp;&amp;(s.values=L([],s.values)),s.keys&amp;&amp;(s.keys=L([],s.keys)),m=t,d=h,((l=s).type===&quot;add&quot;?Promise.resolve([]):m.getMany({trans:l.trans,keys:d,cache:&quot;immutable&quot;})).then(function(v){var g=h.map(function(b,w){var x,E,k,O=v[w],S={onerror:null,onsuccess:null};return s.type===&quot;delete&quot;?u.fire.call(S,b,O,y):s.type===&quot;add&quot;||O===void 0?(x=c.fire.call(S,b,s.values[w],y),b==null&amp;&amp;x!=null&amp;&amp;(s.keys[w]=b=x,r.outbound||se(s.values[w],r.keyPath,b))):(x=Nt(O,s.values[w]),(E=f.fire.call(S,x,b,O,y))&amp;&amp;(k=s.values[w],Object.keys(E).forEach(function(P){V(k,P)?k[P]=E[P]:se(k,P,E[P])}))),S});return t.mutate(s).then(function(b){for(var w=b.failures,x=b.results,E=b.numFailures,b=b.lastResult,k=0;k&lt;h.length;++k){var O=(x||h)[k],S=g[k];O==null?S.onerror&amp;&amp;S.onerror(w[k]):S.onsuccess&amp;&amp;S.onsuccess(s.type===&quot;put&quot;&amp;&amp;v[k]?s.values[k]:O)}return{failures:w,results:x,numFailures:E,lastResult:b}}).catch(function(b){return g.forEach(function(w){return w.onerror&amp;&amp;w.onerror(b)}),Promise.reject(b)})})}}})}})}};function Tr(e,n,t){try{if(!n||n.keys.length&lt;e.length)return null;for(var r=[],o=0,i=0;o&lt;n.keys.length&amp;&amp;i&lt;e.length;++o)z(n.keys[o],e[i])===0&amp;&amp;(r.push(t?je(n.values[o]):n.values[o]),++i);return r.length===e.length?r:null}catch{return null}}var Io={stack:&quot;dbcore&quot;,level:-1,create:function(e){return{table:function(n){var t=e.table(n);return C(C({},t),{getMany:function(r){if(!r.cache)return t.getMany(r);var o=Tr(r.keys,r.trans._cache,r.cache===&quot;clone&quot;);return o?K.resolve(o):t.getMany(r).then(function(i){return r.trans._cache={keys:r.keys,values:r.cache===&quot;clone&quot;?je(i):i},i})},mutate:function(r){return r.type!==&quot;add&quot;&amp;&amp;(r.trans._cache=null),t.mutate(r)}})}}}};function Dr(e,n){return e.trans.mode===&quot;readonly&quot;&amp;&amp;!!e.subscr&amp;&amp;!e.trans.explicit&amp;&amp;e.trans.db._options.cache!==&quot;disabled&quot;&amp;&amp;!n.schema.primaryKey.outbound}function Rr(e,n){switch(e){case&quot;query&quot;:return n.values&amp;&amp;!n.unique;case&quot;get&quot;:case&quot;getMany&quot;:case&quot;count&quot;:case&quot;openCursor&quot;:return!1}}var qo={stack:&quot;dbcore&quot;,level:0,name:&quot;Observability&quot;,create:function(e){var n=e.schema.name,t=new re(e.MIN_KEY,e.MAX_KEY);return C(C({},e),{transaction:function(r,o,i){if(T.subscr&amp;&amp;o!==&quot;readonly&quot;)throw new D.ReadOnly(&quot;Readwrite transaction in liveQuery context. Querier source: &quot;.concat(T.querier));return e.transaction(r,o,i)},table:function(r){var o=e.table(r),i=o.schema,a=i.primaryKey,s=i.indexes,u=a.extractKey,c=a.outbound,f=a.autoIncrement&amp;&amp;s.filter(function(l){return l.compound&amp;&amp;l.keyPath.includes(a.keyPath)}),p=C(C({},o),{mutate:function(l){function d(P){return P=&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(r,&quot;/&quot;).concat(P),b[P]||(b[P]=new re)}var y,h,v,g=l.trans,b=l.mutatedParts||(l.mutatedParts={}),w=d(&quot;&quot;),x=d(&quot;:dels&quot;),E=l.type,S=l.type===&quot;deleteRange&quot;?[l.range]:l.type===&quot;delete&quot;?[l.keys]:l.values.length&lt;50?[Ft(a,l).filter(function(P){return P}),l.values]:[],k=S[0],O=S[1],S=l.trans._cache;return q(k)?(w.addKeys(k),(S=E===&quot;delete&quot;||k.length===O.length?Tr(k,S):null)||x.addKeys(k),(S||O)&amp;&amp;(y=d,h=S,v=O,i.indexes.forEach(function(P){var A=y(P.name||&quot;&quot;);function M(F){return F!=null?P.extractKey(F):null}function N(F){return P.multiEntry&amp;&amp;q(F)?F.forEach(function(le){return A.addKey(le)}):A.addKey(F)}(h||v).forEach(function(F,oe){var I=h&amp;&amp;M(h[oe]),oe=v&amp;&amp;M(v[oe]);z(I,oe)!==0&amp;&amp;(I!=null&amp;&amp;N(I),oe!=null&amp;&amp;N(oe))})}))):k?(O={from:(O=k.lower)!==null&amp;&amp;O!==void 0?O:e.MIN_KEY,to:(O=k.upper)!==null&amp;&amp;O!==void 0?O:e.MAX_KEY},x.add(O),w.add(O)):(w.add(t),x.add(t),i.indexes.forEach(function(P){return d(P.name).add(t)})),o.mutate(l).then(function(P){return!k||l.type!==&quot;add&quot;&amp;&amp;l.type!==&quot;put&quot;||(w.addKeys(P.results),f&amp;&amp;f.forEach(function(A){for(var M=l.values.map(function(I){return A.extractKey(I)}),N=A.keyPath.findIndex(function(I){return I===a.keyPath}),F=0,le=P.results.length;F&lt;le;++F)M[F][N]=P.results[F];d(A.name).addKeys(M)})),g.mutatedParts=Gn(g.mutatedParts||{},b),P})}}),s=function(d){var y=d.query,d=y.index,y=y.range;return[d,new re((d=y.lower)!==null&amp;&amp;d!==void 0?d:e.MIN_KEY,(y=y.upper)!==null&amp;&amp;y!==void 0?y:e.MAX_KEY)]},m={get:function(l){return[a,new re(l.key)]},getMany:function(l){return[a,new re().addKeys(l.keys)]},count:s,query:s,openCursor:s};return U(m).forEach(function(l){p[l]=function(d){var y=T.subscr,h=!!y,v=Dr(T,o)&amp;&amp;Rr(l,d)?d.obsSet={}:y;if(h){var g=function(O){return O=&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(r,&quot;/&quot;).concat(O),v[O]||(v[O]=new re)},b=g(&quot;&quot;),w=g(&quot;:dels&quot;),y=m[l](d),h=y[0],y=y[1];if((l===&quot;query&quot;&amp;&amp;h.isPrimaryKey&amp;&amp;!d.values?w:g(h.name||&quot;&quot;)).add(y),!h.isPrimaryKey){if(l!==&quot;count&quot;){var x=l===&quot;query&quot;&amp;&amp;c&amp;&amp;d.values&amp;&amp;o.query(C(C({},d),{values:!1}));return o[l].apply(this,arguments).then(function(O){if(l===&quot;query&quot;){if(c&amp;&amp;d.values)return x.then(function(M){return M=M.result,b.addKeys(M),O});var S=d.values?O.result.map(u):O.result;(d.values?b:w).addKeys(S)}else if(l===&quot;openCursor&quot;){var P=O,A=d.values;return P&amp;&amp;Object.create(P,{key:{get:function(){return w.addKey(P.primaryKey),P.key}},primaryKey:{get:function(){var M=P.primaryKey;return w.addKey(M),M}},value:{get:function(){return A&amp;&amp;b.addKey(P.primaryKey),P.value}}})}return O})}w.add(t)}}return o[l].apply(this,arguments)}}),p}})}};function Ir(e,n,t){if(t.numFailures===0)return n;if(n.type===&quot;deleteRange&quot;)return null;var r=n.keys?n.keys.length:&quot;values&quot;in n&amp;&amp;n.values?n.values.length:1;return t.numFailures===r?null:(n=C({},n),q(n.keys)&amp;&amp;(n.keys=n.keys.filter(function(o,i){return!(i in t.failures)})),&quot;values&quot;in n&amp;&amp;q(n.values)&amp;&amp;(n.values=n.values.filter(function(o,i){return!(i in t.failures)})),n)}function Lt(e,n){return t=e,((r=n).lower===void 0||(r.lowerOpen?0&lt;z(t,r.lower):0&lt;=z(t,r.lower)))&amp;&amp;(e=e,(n=n).upper===void 0||(n.upperOpen?z(e,n.upper)&lt;0:z(e,n.upper)&lt;=0));var t,r}function qr(e,n,m,r,o,i){if(!m||m.length===0)return e;var a=n.query.index,u=a.multiEntry,c=n.query.range,f=r.schema.primaryKey.extractKey,p=a.extractKey,s=(a.lowLevelIndex||a).extractKey,m=m.reduce(function(l,d){var y=l,h=[];if(d.type===&quot;add&quot;||d.type===&quot;put&quot;)for(var v=new re,g=d.values.length-1;0&lt;=g;--g){var b,w=d.values[g],x=f(w);v.hasKey(x)||(b=p(w),(u&amp;&amp;q(b)?b.some(function(P){return Lt(P,c)}):Lt(b,c))&amp;&amp;(v.addKey(x),h.push(w)))}switch(d.type){case&quot;add&quot;:var E=new re().addKeys(n.values?l.map(function(A){return f(A)}):l),y=l.concat(n.values?h.filter(function(A){return A=f(A),!E.hasKey(A)&amp;&amp;(E.addKey(A),!0)}):h.map(function(A){return f(A)}).filter(function(A){return!E.hasKey(A)&amp;&amp;(E.addKey(A),!0)}));break;case&quot;put&quot;:var k=new re().addKeys(d.values.map(function(A){return f(A)}));y=l.filter(function(A){return!k.hasKey(n.values?f(A):A)}).concat(n.values?h:h.map(function(A){return f(A)}));break;case&quot;delete&quot;:var O=new re().addKeys(d.keys);y=l.filter(function(A){return!O.hasKey(n.values?f(A):A)});break;case&quot;deleteRange&quot;:var S=d.range;y=l.filter(function(A){return!Lt(f(A),S)})}return y},e);return m===e?e:(m.sort(function(l,d){return z(s(l),s(d))||z(f(l),f(d))}),n.limit&amp;&amp;n.limit&lt;1/0&amp;&amp;(m.length&gt;n.limit?m.length=n.limit:e.length===n.limit&amp;&amp;m.length&lt;n.limit&amp;&amp;(o.dirty=!0)),i?Object.freeze(m):m)}function Mr(e,n){return z(e.lower,n.lower)===0&amp;&amp;z(e.upper,n.upper)===0&amp;&amp;!!e.lowerOpen==!!n.lowerOpen&amp;&amp;!!e.upperOpen==!!n.upperOpen}function Mo(e,n){return function(t,r,o,i){if(t===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=z(t,r))===0){if(o&amp;&amp;i)return 0;if(o)return 1;if(i)return-1}return r}(e.lower,n.lower,e.lowerOpen,n.lowerOpen)&lt;=0&amp;&amp;0&lt;=function(t,r,o,i){if(t===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=z(t,r))===0){if(o&amp;&amp;i)return 0;if(o)return-1;if(i)return 1}return r}(e.upper,n.upper,e.upperOpen,n.upperOpen)}function Bo(e,n,t,r){e.subscribers.add(t),r.addEventListener(&quot;abort&quot;,function(){var o,i;e.subscribers.delete(t),e.subscribers.size===0&amp;&amp;(o=e,i=n,setTimeout(function(){o.subscribers.size===0&amp;&amp;Te(i,o)},3e3))})}var No={stack:&quot;dbcore&quot;,level:0,name:&quot;Cache&quot;,create:function(e){var n=e.schema.name;return C(C({},e),{transaction:function(t,r,o){var i,a,u=e.transaction(t,r,o);return r===&quot;readwrite&quot;&amp;&amp;(a=(i=new AbortController).signal,o=function(c){return function(){if(i.abort(),r===&quot;readwrite&quot;){for(var f=new Set,p=0,s=t;p&lt;s.length;p++){var m=s[p],l=Le[&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(m)];if(l){var d=e.table(m),y=l.optimisticOps.filter(function(A){return A.trans===u});if(u._explicit&amp;&amp;c&amp;&amp;u.mutatedParts)for(var h=0,v=Object.values(l.queries.query);h&lt;v.length;h++)for(var g=0,b=(E=v[h]).slice();g&lt;b.length;g++)Rt((k=b[g]).obsSet,u.mutatedParts)&amp;&amp;(Te(E,k),k.subscribers.forEach(function(A){return f.add(A)}));else if(0&lt;y.length){l.optimisticOps=l.optimisticOps.filter(function(A){return A.trans!==u});for(var w=0,x=Object.values(l.queries.query);w&lt;x.length;w++)for(var E,k,O,S=0,P=(E=x[w]).slice();S&lt;P.length;S++)(k=P[S]).res!=null&amp;&amp;u.mutatedParts&amp;&amp;(c&amp;&amp;!k.dirty?(O=Object.isFrozen(k.res),O=qr(k.res,k.req,y,d,k,O),k.dirty?(Te(E,k),k.subscribers.forEach(function(A){return f.add(A)})):O!==k.res&amp;&amp;(k.res=O,k.promise=K.resolve({result:O}))):(k.dirty&amp;&amp;Te(E,k),k.subscribers.forEach(function(A){return f.add(A)})))}}}f.forEach(function(A){return A()})}}},u.addEventListener(&quot;abort&quot;,o(!1),{signal:a}),u.addEventListener(&quot;error&quot;,o(!1),{signal:a}),u.addEventListener(&quot;complete&quot;,o(!0),{signal:a})),u},table:function(t){var r=e.table(t),o=r.schema.primaryKey;return C(C({},r),{mutate:function(i){var a=T.trans;if(o.outbound||a.db._options.cache===&quot;disabled&quot;||a.explicit||a.idbtrans.mode!==&quot;readwrite&quot;)return r.mutate(i);var u=Le[&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(t)];return u?(a=r.mutate(i),i.type!==&quot;add&quot;&amp;&amp;i.type!==&quot;put&quot;||!(50&lt;=i.values.length||Ft(o,i).some(function(c){return c==null}))?(u.optimisticOps.push(i),i.mutatedParts&amp;&amp;Qn(i.mutatedParts),a.then(function(c){0&lt;c.numFailures&amp;&amp;(Te(u.optimisticOps,i),(c=Ir(0,i,c))&amp;&amp;u.optimisticOps.push(c),i.mutatedParts&amp;&amp;Qn(i.mutatedParts))}),a.catch(function(){Te(u.optimisticOps,i),i.mutatedParts&amp;&amp;Qn(i.mutatedParts)})):a.then(function(c){var f=Ir(0,C(C({},i),{values:i.values.map(function(p,s){var m;return c.failures[s]?p:(p=(m=o.keyPath)!==null&amp;&amp;m!==void 0&amp;&amp;m.includes(&quot;.&quot;)?je(p):C({},p),se(p,o.keyPath,c.results[s]),p)})}),c);u.optimisticOps.push(f),queueMicrotask(function(){return i.mutatedParts&amp;&amp;Qn(i.mutatedParts)})}),a):r.mutate(i)},query:function(i){if(!Dr(T,r)||!Rr(&quot;query&quot;,i))return r.query(i);var a=((f=T.trans)===null||f===void 0?void 0:f.db._options.cache)===&quot;immutable&quot;,s=T,u=s.requery,c=s.signal,f=function(d,y,h,v){var g=Le[&quot;idb://&quot;.concat(d,&quot;/&quot;).concat(y)];if(!g)return[];if(!(y=g.queries[h]))return[null,!1,g,null];var b=y[(v.query?v.query.index.name:null)||&quot;&quot;];if(!b)return[null,!1,g,null];switch(h){case&quot;query&quot;:var w=b.find(function(x){return x.req.limit===v.limit&amp;&amp;x.req.values===v.values&amp;&amp;Mr(x.req.query.range,v.query.range)});return w?[w,!0,g,b]:[b.find(function(x){return(&quot;limit&quot;in x.req?x.req.limit:1/0)&gt;=v.limit&amp;&amp;(!v.values||x.req.values)&amp;&amp;Mo(x.req.query.range,v.query.range)}),!1,g,b];case&quot;count&quot;:return w=b.find(function(x){return Mr(x.req.query.range,v.query.range)}),[w,!!w,g,b]}}(n,t,&quot;query&quot;,i),p=f[0],s=f[1],m=f[2],l=f[3];return p&amp;&amp;s?p.obsSet=i.obsSet:(s=r.query(i).then(function(d){var y=d.result;if(p&amp;&amp;(p.res=y),a){for(var h=0,v=y.length;h&lt;v;++h)Object.freeze(y[h]);Object.freeze(y)}else d.result=je(y);return d}).catch(function(d){return l&amp;&amp;p&amp;&amp;Te(l,p),Promise.reject(d)}),p={obsSet:i.obsSet,promise:s,subscribers:new Set,type:&quot;query&quot;,req:i,dirty:!1},l?l.push(p):(l=[p],(m=m||(Le[&quot;idb://&quot;.concat(n,&quot;/&quot;).concat(t)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[i.query.index.name||&quot;&quot;]=l)),Bo(p,l,u,c),p.promise.then(function(d){return{result:qr(d.result,i,m==null?void 0:m.optimisticOps,r,p,a)}})}})}})}};function Jn(e,n){return new Proxy(e,{get:function(t,r,o){return r===&quot;db&quot;?n:Reflect.get(t,r,o)}})}var _e=(ee.prototype.version=function(e){if(isNaN(e)||e&lt;.1)throw new D.Type(&quot;Given version is not a positive number&quot;);if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema(&quot;Cannot add version when database is open&quot;);this.verno=Math.max(this.verno,e);var n=this._versions,t=n.filter(function(r){return r._cfg.version===e})[0];return t||(t=new this.Version(e),n.push(t),n.sort(Ko),t.stores({}),this._state.autoSchema=!1,t)},ee.prototype._whenReady=function(e){var n=this;return this.idbdb&amp;&amp;(this._state.openComplete||T.letThrough||this._vip)?e():new K(function(t,r){if(n._state.openComplete)return r(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void r(new D.DatabaseClosed);n.open().catch(G)}n._state.dbReadyPromise.then(t,r)}).then(e)},ee.prototype.use=function(e){var n=e.stack,t=e.create,r=e.level,o=e.name;return o&amp;&amp;this.unuse({stack:n,name:o}),e=this._middlewares[n]||(this._middlewares[n]=[]),e.push({stack:n,create:t,level:r??10,name:o}),e.sort(function(i,a){return i.level-a.level}),this},ee.prototype.unuse=function(e){var n=e.stack,t=e.name,r=e.create;return n&amp;&amp;this._middlewares[n]&amp;&amp;(this._middlewares[n]=this._middlewares[n].filter(function(o){return r?o.create!==r:!!t&amp;&amp;o.name!==t})),this},ee.prototype.open=function(){var e=this;return Be(xe,function(){return To(e)})},ee.prototype._close=function(){var e=this._state,n=Je.indexOf(this);if(0&lt;=n&amp;&amp;Je.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new K(function(t){e.dbReadyResolve=t}),e.openCanceller=new K(function(t,r){e.cancelOpen=r}))},ee.prototype.close=function(t){var n=(t===void 0?{disableAutoOpen:!0}:t).disableAutoOpen,t=this._state;n?(t.isBeingOpened&amp;&amp;t.cancelOpen(new D.DatabaseClosed),this._close(),t.autoOpen=!1,t.dbOpenError=new D.DatabaseClosed):(this._close(),t.autoOpen=this._options.autoOpen||t.isBeingOpened,t.openComplete=!1,t.dbOpenError=null)},ee.prototype.delete=function(e){var n=this;e===void 0&amp;&amp;(e={disableAutoOpen:!0});var t=0&lt;arguments.length&amp;&amp;typeof arguments[0]!=&quot;object&quot;,r=this._state;return new K(function(o,i){function a(){n.close(e);var u=n._deps.indexedDB.deleteDatabase(n.name);u.onsuccess=J(function(){var c,f,p;c=n._deps,f=n.name,p=c.indexedDB,c=c.IDBKeyRange,jt(p)||f===Mn||At(p,c).delete(f).catch(G),o()}),u.onerror=pe(i),u.onblocked=n._fireOnBlocked}if(t)throw new D.InvalidArgument(&quot;Invalid closeOptions argument to db.delete()&quot;);r.isBeingOpened?r.dbReadyPromise.then(a):a()})},ee.prototype.backendDB=function(){return this.idbdb},ee.prototype.isOpen=function(){return this.idbdb!==null},ee.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&amp;&amp;e.name===&quot;DatabaseClosed&quot;},ee.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ee.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ee.prototype,&quot;tables&quot;,{get:function(){var e=this;return U(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),ee.prototype.transaction=function(){var e=(function(n,t,r){var o=arguments.length;if(o&lt;2)throw new D.InvalidArgument(&quot;Too few arguments&quot;);for(var i=new Array(o-1);--o;)i[o-1]=arguments[o];return r=i.pop(),[n,rr(i),r]}).apply(this,arguments);return this._transaction.apply(this,e)},ee.prototype._transaction=function(e,n,t){var r=this,o=T.trans;o&amp;&amp;o.db===this&amp;&amp;e.indexOf(&quot;!&quot;)===-1||(o=null);var i,a,u=e.indexOf(&quot;?&quot;)!==-1;e=e.replace(&quot;!&quot;,&quot;&quot;).replace(&quot;?&quot;,&quot;&quot;);try{if(a=n.map(function(f){if(f=f instanceof r.Table?f.name:f,typeof f!=&quot;string&quot;)throw new TypeError(&quot;Invalid table argument to Dexie.transaction(). Only Table or String are allowed&quot;);return f}),e==&quot;r&quot;||e===gt)i=gt;else{if(e!=&quot;rw&quot;&amp;&amp;e!=bt)throw new D.InvalidArgument(&quot;Invalid transaction mode: &quot;+e);i=bt}if(o){if(o.mode===gt&amp;&amp;i===bt){if(!u)throw new D.SubTransaction(&quot;Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY&quot;);o=null}o&amp;&amp;a.forEach(function(f){if(o&amp;&amp;o.storeNames.indexOf(f)===-1){if(!u)throw new D.SubTransaction(&quot;Table &quot;+f+&quot; not included in parent transaction.&quot;);o=null}}),u&amp;&amp;o&amp;&amp;!o.active&amp;&amp;(o=null)}}catch(f){return o?o._promise(null,function(p,s){s(f)}):Z(f)}var c=(function f(p,s,m,l,d){return K.resolve().then(function(){var y=T.transless||T,h=p._createTransaction(s,m,p._dbSchema,l);if(h.explicit=!0,y={trans:h,transless:y},l)h.idbtrans=l.idbtrans;else try{h.create(),h.idbtrans._explicit=!0,p._state.PR1398_maxLoop=3}catch(b){return b.name===st.InvalidState&amp;&amp;p.isOpen()&amp;&amp;0&lt;--p._state.PR1398_maxLoop?(console.warn(&quot;Dexie: Need to reopen db&quot;),p.close({disableAutoOpen:!1}),p.open().then(function(){return f(p,s,m,null,d)})):Z(b)}var v,g=ut(d);return g&amp;&amp;Xe(),y=K.follow(function(){var b;(v=d.call(h,h))&amp;&amp;(g?(b=Oe.bind(null,null),v.then(b,b)):typeof v.next==&quot;function&quot;&amp;&amp;typeof v.throw==&quot;function&quot;&amp;&amp;(v=Bt(v)))},y),(v&amp;&amp;typeof v.then==&quot;function&quot;?K.resolve(v).then(function(b){return h.active?b:Z(new D.PrematureCommit(&quot;Transaction committed too early. See http://bit.ly/2kdckMn&quot;))}):y.then(function(){return v})).then(function(b){return l&amp;&amp;h._resolve(),h._completion.then(function(){return b})}).catch(function(b){return h._reject(b),Z(b)})})}).bind(null,this,i,a,o,t);return o?o._promise(i,c,&quot;lock&quot;):T.trans?Be(T.transless,function(){return r._whenReady(c)}):this._whenReady(c)},ee.prototype.table=function(e){if(!V(this._allTables,e))throw new D.InvalidTable(&quot;Table &quot;.concat(e,&quot; does not exist&quot;));return this._allTables[e]},ee);function ee(e,n){var t=this;this._middlewares={},this.verno=0;var r=ee.dependencies;this._options=n=C({addons:ee.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:&quot;cloned&quot;},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},r=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,i,a,u,c,f={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:G,dbReadyPromise:null,cancelOpen:G,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};f.dbReadyPromise=new K(function(s){f.dbReadyResolve=s}),f.openCanceller=new K(function(s,m){f.cancelOpen=m}),this._state=f,this.name=e,this.on=ln(this,&quot;populate&quot;,&quot;blocked&quot;,&quot;versionchange&quot;,&quot;close&quot;,{ready:[ct,G]}),this.on.ready.subscribe=er(this.on.ready.subscribe,function(s){return function(m,l){ee.vip(function(){var d,y=t._state;y.openComplete?(y.dbOpenError||K.resolve().then(m),l&amp;&amp;s(m)):y.onReadyBeingFired?(y.onReadyBeingFired.push(m),l&amp;&amp;s(m)):(s(m),d=t,l||s(function h(){d.on.ready.unsubscribe(m),d.on.ready.unsubscribe(h)}))})}}),this.Collection=(o=this,fn(_o.prototype,function(v,h){this.db=o;var l=pr,d=null;if(h)try{l=h()}catch(g){d=g}var y=v._ctx,h=y.table,v=h.hook.reading.fire;this._ctx={table:h,index:y.index,isPrimKey:!y.index||h.schema.primKey.keyPath&amp;&amp;y.index===h.schema.primKey.name,range:l,keysOnly:!1,dir:&quot;next&quot;,unique:&quot;&quot;,algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:y.or,valueMapper:v!==on?v:null}})),this.Table=(i=this,fn(gr.prototype,function(s,m,l){this.db=i,this._tx=l,this.name=s,this.schema=m,this.hook=i._allTables[s]?i._allTables[s].hook:ln(null,{creating:[fo,G],reading:[lo,on],updating:[po,G],deleting:[ho,G]})})),this.Transaction=(a=this,fn(Oo.prototype,function(s,m,l,d,y){var h=this;this.db=a,this.mode=s,this.storeNames=m,this.schema=l,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=ln(this,&quot;complete&quot;,&quot;error&quot;,&quot;abort&quot;),this.parent=y||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new K(function(v,g){h._resolve=v,h._reject=g}),this._completion.then(function(){h.active=!1,h.on.complete.fire()},function(v){var g=h.active;return h.active=!1,h.on.error.fire(v),h.parent?h.parent._reject(v):g&amp;&amp;h.idbtrans&amp;&amp;h.idbtrans.abort(),Z(v)})})),this.Version=(u=this,fn(jo.prototype,function(s){this.db=u,this._cfg={version:s,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,fn(kr.prototype,function(s,m,l){if(this.db=c,this._ctx={table:s,index:m===&quot;:id&quot;?null:m,or:l},this._cmp=this._ascending=z,this._descending=function(d,y){return z(y,d)},this._max=function(d,y){return 0&lt;z(d,y)?d:y},this._min=function(d,y){return z(d,y)&lt;0?d:y},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new D.MissingAPI})),this.on(&quot;versionchange&quot;,function(s){0&lt;s.newVersion?console.warn(&quot;Another connection wants to upgrade database \&#x27;&quot;.concat(t.name,&quot;\&#x27;. Closing db now to resume the upgrade.&quot;)):console.warn(&quot;Another connection wants to delete database \&#x27;&quot;.concat(t.name,&quot;\&#x27;. Closing db now to resume the delete request.&quot;)),t.close({disableAutoOpen:!1})}),this.on(&quot;blocked&quot;,function(s){!s.newVersion||s.newVersion&lt;s.oldVersion?console.warn(&quot;Dexie.delete(\&#x27;&quot;.concat(t.name,&quot;\&#x27;) was blocked&quot;)):console.warn(&quot;Upgrade \&#x27;&quot;.concat(t.name,&quot;\&#x27; blocked by other connection holding version &quot;).concat(s.oldVersion/10))}),this._maxKey=yn(n.IDBKeyRange),this._createTransaction=function(s,m,l,d){return new t.Transaction(s,m,l,t._options.chromeTransactionDurability,d)},this._fireOnBlocked=function(s){t.on(&quot;blocked&quot;).fire(s),Je.filter(function(m){return m.name===t.name&amp;&amp;m!==t&amp;&amp;!m._state.vcFired}).map(function(m){return m.on(&quot;versionchange&quot;).fire(s)})},this.use(Io),this.use(No),this.use(qo),this.use(Do),this.use(Ro);var p=new Proxy(this,{get:function(s,m,l){if(m===&quot;_vip&quot;)return!0;if(m===&quot;table&quot;)return function(y){return Jn(t.table(y),p)};var d=Reflect.get(s,m,l);return d instanceof gr?Jn(d,p):m===&quot;tables&quot;?d.map(function(y){return Jn(y,p)}):m===&quot;_createTransaction&quot;?function(){return Jn(d.apply(this,arguments),p)}:d}});this.vip=p,r.forEach(function(s){return s(t)})}var Zn,fe=typeof Symbol&lt;&quot;u&quot;&amp;&amp;&quot;observable&quot;in Symbol?Symbol.observable:&quot;@@observable&quot;,Fo=(Ut.prototype.subscribe=function(e,n,t){return this._subscribe(e&amp;&amp;typeof e!=&quot;function&quot;?e:{next:e,error:n,complete:t})},Ut.prototype[fe]=function(){return this},Ut);function Ut(e){this._subscribe=e}try{Zn={indexedDB:B.indexedDB||B.mozIndexedDB||B.webkitIndexedDB||B.msIndexedDB,IDBKeyRange:B.IDBKeyRange||B.webkitIDBKeyRange}}catch{Zn={indexedDB:null,IDBKeyRange:null}}function Br(e){var n,t=!1,r=new Fo(function(o){var i=ut(e),a,u=!1,c={},f={},p={get closed(){return u},unsubscribe:function(){u||(u=!0,a&amp;&amp;a.abort(),s&amp;&amp;Se.storagemutated.unsubscribe(l))}};o.start&amp;&amp;o.start(p);var s=!1,m=function(){return vt(d)},l=function(y){Gn(c,y),Rt(f,c)&amp;&amp;m()},d=function(){var y,h,v;!u&amp;&amp;Zn.indexedDB&amp;&amp;(c={},y={},a&amp;&amp;a.abort(),a=new AbortController,v=function(g){var b=Ge();try{i&amp;&amp;Xe();var w=ke(e,g);return w=i?w.finally(Oe):w}finally{b&amp;&amp;Qe()}}(h={subscr:y,signal:a.signal,requery:m,querier:e,trans:null}),Promise.resolve(v).then(function(g){t=!0,n=g,u||h.signal.aborted||(c={},function(b){for(var w in b)if(V(b,w))return;return 1}(f=y)||s||(Se(pn,l),s=!0),vt(function(){return!u&amp;&amp;o.next&amp;&amp;o.next(g)}))},function(g){t=!1,[&quot;DatabaseClosedError&quot;,&quot;AbortError&quot;].includes(g==null?void 0:g.name)||u||vt(function(){u||o.error&amp;&amp;o.error(g)})}))};return setTimeout(m,0),p});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var Ue=_e;function Vt(e){var n=Ke;try{Ke=!0,Se.storagemutated.fire(e),Mt(e,!0)}finally{Ke=n}}$(Ue,C(C({},Kn),{delete:function(e){return new Ue(e,{addons:[]}).delete()},exists:function(e){return new Ue(e,{addons:[]}).open().then(function(n){return n.close(),!0}).catch(&quot;NoSuchDatabaseError&quot;,function(){return!1})},getDatabaseNames:function(e){try{return n=Ue.dependencies,t=n.indexedDB,n=n.IDBKeyRange,(jt(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(o){return o.name}).filter(function(o){return o!==Mn})}):At(t,n).toCollection().primaryKeys()).then(e)}catch{return Z(new D.MissingAPI)}var n,t},defineClass:function(){return function(e){W(this,e)}},ignoreTransaction:function(e){return T.trans?Be(T.transless,e):e()},vip:Tt,async:function(e){return function(){try{var n=Bt(e.apply(this,arguments));return n&amp;&amp;typeof n.then==&quot;function&quot;?n:K.resolve(n)}catch(t){return Z(t)}}},spawn:function(e,n,t){try{var r=Bt(e.apply(t,n||[]));return r&amp;&amp;typeof r.then==&quot;function&quot;?r:K.resolve(r)}catch(o){return Z(o)}},currentTransaction:{get:function(){return T.trans||null}},waitFor:function(e,n){return n=K.resolve(typeof e==&quot;function&quot;?Ue.ignoreTransaction(e):e).timeout(n||6e4),T.trans?T.trans.waitFor(n):n},Promise:K,debug:{get:function(){return de},set:function(e){ur(e)}},derive:We,extend:W,props:$,override:er,Events:ln,on:Se,liveQuery:Br,extendObservabilitySet:Gn,getByKeyPath:ge,setByKeyPath:se,delByKeyPath:function(e,n){typeof n==&quot;string&quot;?se(e,n,void 0):&quot;length&quot;in n&amp;&amp;[].map.call(n,function(t){se(e,t,void 0)})},shallowClone:tr,deepClone:je,getObjectDiff:Nt,cmp:z,asap:nr,minKey:-1/0,addons:[],connections:Je,errnames:st,dependencies:Zn,cache:Le,semVer:&quot;4.0.11&quot;,version:&quot;4.0.11&quot;.split(&quot;.&quot;).map(function(e){return parseInt(e)}).reduce(function(e,n,t){return e+n/Math.pow(10,2*t)})})),Ue.maxKey=yn(Ue.dependencies.IDBKeyRange),typeof dispatchEvent&lt;&quot;u&quot;&amp;&amp;typeof addEventListener&lt;&quot;u&quot;&amp;&amp;(Se(pn,function(e){Ke||(e=new CustomEvent(kt,{detail:e}),Ke=!0,dispatchEvent(e),Ke=!1)}),addEventListener(kt,function(e){e=e.detail,Ke||Vt(e)}));var nn,Ke=!1,Nr=function(){};return typeof BroadcastChannel&lt;&quot;u&quot;&amp;&amp;((Nr=function(){(nn=new BroadcastChannel(kt)).onmessage=function(e){return e.data&amp;&amp;Vt(e.data)}})(),typeof nn.unref==&quot;function&quot;&amp;&amp;nn.unref(),Se(pn,function(e){Ke||nn.postMessage(e)})),typeof addEventListener&lt;&quot;u&quot;&amp;&amp;(addEventListener(&quot;pagehide&quot;,function(e){if(!_e.disableBfCache&amp;&amp;e.persisted){de&amp;&amp;console.debug(&quot;Dexie: handling persisted pagehide&quot;),nn!=null&amp;&amp;nn.close();for(var n=0,t=Je;n&lt;t.length;n++)t[n].close({disableAutoOpen:!1})}}),addEventListener(&quot;pageshow&quot;,function(e){!_e.disableBfCache&amp;&amp;e.persisted&amp;&amp;(de&amp;&amp;console.debug(&quot;Dexie: handling persisted pageshow&quot;),Nr(),Vt({all:new re(-1/0,[[]])}))})),K.rejectionMapper=function(e,n){return!e||e instanceof Ye||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ar[e.name]?e:(n=new ar[e.name](n||e.message,e),&quot;stack&quot;in e&amp;&amp;he(n,&quot;stack&quot;,{get:function(){return this.inner.stack}}),n)},ur(de),C(_e,Object.freeze({__proto__:null,Dexie:_e,liveQuery:Br,Entity:yr,cmp:z,PropModification:hn,replacePrefix:function(e,n){return new hn({replacePrefix:[e,n]})},add:function(e){return new hn({add:e})},remove:function(e){return new hn({remove:e})},default:_e,RangeSet:re,mergeRanges:gn,rangesOverlap:Kr}),{default:_e}),_e})}(ve)),ve.exports}var Ur=Lr(),nt=me(Ur);const $t=Symbol.for(&quot;Dexie&quot;),wn=globalThis[$t]||(globalThis[$t]=nt);if(nt.semVer!==wn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${nt.semVer} and ${wn.semVer}`);const{liveQuery:Vo,mergeRanges:zo,rangesOverlap:Wo,RangeSet:$o,cmp:Yo,Entity:Ho,PropModification:Go,replacePrefix:Qo,add:Xo,remove:Jo}=wn;/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */const Yt=Symbol(&quot;Comlink.proxy&quot;),Vr=Symbol(&quot;Comlink.endpoint&quot;),zr=Symbol(&quot;Comlink.releaseProxy&quot;),tt=Symbol(&quot;Comlink.finalizer&quot;),_n=Symbol(&quot;Comlink.thrown&quot;),Ht=_=&gt;typeof _==&quot;object&quot;&amp;&amp;_!==null||typeof _==&quot;function&quot;,Wr={canHandle:_=&gt;Ht(_)&amp;&amp;_[Yt],serialize(_){const{port1:j,port2:R}=new MessageChannel;return rt(_,j),[R,[R]]},deserialize(_){return _.start(),Gr(_)}},$r={canHandle:_=&gt;Ht(_)&amp;&amp;_n in _,serialize({value:_}){let j;return _ instanceof Error?j={isError:!0,value:{message:_.message,name:_.name,stack:_.stack}}:j={isError:!1,value:_},[j,[]]},deserialize(_){throw _.isError?Object.assign(new Error(_.value.message),_.value):_.value}},Gt=new Map([[&quot;proxy&quot;,Wr],[&quot;throw&quot;,$r]]);function Yr(_,j){for(const R of _)if(j===R||R===&quot;*&quot;||R instanceof RegExp&amp;&amp;R.test(j))return!0;return!1}function rt(_,j=globalThis,R=[&quot;*&quot;]){j.addEventListener(&quot;message&quot;,function C(L){if(!L||!L.data)return;if(!Yr(R,L.origin)){console.warn(`Invalid origin \&#x27;${L.origin}\&#x27; for comlink proxy`);return}const{id:B,type:U,path:q}=Object.assign({path:[]},L.data),W=(L.data.argumentList||[]).map(Ae);let H;try{const Q=q.slice(0,-1).reduce(($,ue)=&gt;$[ue],_),V=q.reduce(($,ue)=&gt;$[ue],_);switch(U){case&quot;GET&quot;:H=V;break;case&quot;SET&quot;:Q[q.slice(-1)[0]]=Ae(L.data.value),H=!0;break;case&quot;APPLY&quot;:H=V.apply(Q,W);break;case&quot;CONSTRUCT&quot;:{const $=new V(...W);H=eo($)}break;case&quot;ENDPOINT&quot;:{const{port1:$,port2:ue}=new MessageChannel;rt(_,ue),H=Zr($,[$])}break;case&quot;RELEASE&quot;:H=void 0;break;default:return}}catch(Q){H={value:Q,[_n]:0}}Promise.resolve(H).catch(Q=&gt;({value:Q,[_n]:0})).then(Q=&gt;{const[V,$]=Pn(Q);j.postMessage(Object.assign(Object.assign({},V),{id:B}),$),U===&quot;RELEASE&quot;&amp;&amp;(j.removeEventListener(&quot;message&quot;,C),Qt(j),tt in _&amp;&amp;typeof _[tt]==&quot;function&quot;&amp;&amp;_[tt]())}).catch(Q=&gt;{const[V,$]=Pn({value:new TypeError(&quot;Unserializable return value&quot;),[_n]:0});j.postMessage(Object.assign(Object.assign({},V),{id:B}),$)})}),j.start&amp;&amp;j.start()}function Hr(_){return _.constructor.name===&quot;MessagePort&quot;}function Qt(_){Hr(_)&amp;&amp;_.close()}function Gr(_,j){const R=new Map;return _.addEventListener(&quot;message&quot;,function(L){const{data:B}=L;if(!B||!B.id)return;const U=R.get(B.id);if(U)try{U(B)}finally{R.delete(B.id)}}),ot(_,R,[],j)}function xn(_){if(_)throw new Error(&quot;Proxy has been released and is not useable&quot;)}function Xt(_){return ze(_,new Map,{type:&quot;RELEASE&quot;}).then(()=&gt;{Qt(_)})}const kn=new WeakMap,On=&quot;FinalizationRegistry&quot;in globalThis&amp;&amp;new FinalizationRegistry(_=&gt;{const j=(kn.get(_)||0)-1;kn.set(_,j),j===0&amp;&amp;Xt(_)});function Qr(_,j){const R=(kn.get(j)||0)+1;kn.set(j,R),On&amp;&amp;On.register(_,j,_)}function Xr(_){On&amp;&amp;On.unregister(_)}function ot(_,j,R=[],C=function(){}){let L=!1;const B=new Proxy(C,{get(U,q){if(xn(L),q===zr)return()=&gt;{Xr(B),Xt(_),j.clear(),L=!0};if(q===&quot;then&quot;){if(R.length===0)return{then:()=&gt;B};const W=ze(_,j,{type:&quot;GET&quot;,path:R.map(H=&gt;H.toString())}).then(Ae);return W.then.bind(W)}return ot(_,j,[...R,q])},set(U,q,W){xn(L);const[H,Q]=Pn(W);return ze(_,j,{type:&quot;SET&quot;,path:[...R,q].map(V=&gt;V.toString()),value:H},Q).then(Ae)},apply(U,q,W){xn(L);const H=R[R.length-1];if(H===Vr)return ze(_,j,{type:&quot;ENDPOINT&quot;}).then(Ae);if(H===&quot;bind&quot;)return ot(_,j,R.slice(0,-1));const[Q,V]=Jt(W);return ze(_,j,{type:&quot;APPLY&quot;,path:R.map($=&gt;$.toString()),argumentList:Q},V).then(Ae)},construct(U,q){xn(L);const[W,H]=Jt(q);return ze(_,j,{type:&quot;CONSTRUCT&quot;,path:R.map(Q=&gt;Q.toString()),argumentList:W},H).then(Ae)}});return Qr(B,_),B}function Jr(_){return Array.prototype.concat.apply([],_)}function Jt(_){const j=_.map(Pn);return[j.map(R=&gt;R[0]),Jr(j.map(R=&gt;R[1]))]}const Zt=new WeakMap;function Zr(_,j){return Zt.set(_,j),_}function eo(_){return Object.assign(_,{[Yt]:!0})}function Pn(_){for(const[j,R]of Gt)if(R.canHandle(_)){const[C,L]=R.serialize(_);return[{type:&quot;HANDLER&quot;,name:j,value:C},L]}return[{type:&quot;RAW&quot;,value:_},Zt.get(_)||[]]}function Ae(_){switch(_.type){case&quot;HANDLER&quot;:return Gt.get(_.name).deserialize(_.value);case&quot;RAW&quot;:return _.value}}function ze(_,j,R,C){return new Promise(L=&gt;{const B=no();j.set(B,L),_.start&amp;&amp;_.start(),_.postMessage(Object.assign({id:B},R),C)})}function no(){return new Array(4).fill(0).map(()=&gt;Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join(&quot;-&quot;)}class to{constructor(){bn(this,&quot;db&quot;);bn(this,&quot;models&quot;);bn(this,&quot;memoryCacheDrawRange&quot;,new Map);bn(this,&quot;memoryCacheHierarchy&quot;,new Map);this.db=new wn(&quot;ModelCacheDB&quot;),this.db.version(1).stores({models:&quot;&amp;key&quot;}),this.models=this.db.table(&quot;models&quot;)}async add(j,R,C){await this.models.put({key:j,hierarchy:R,drawRanges:C}),this.memoryCacheDrawRange.set(j,C),this.memoryCacheHierarchy.set(j,R)}async get(j){return this.models.get(j)}async remove(j){await this.models.delete(j)}async listKeys(){return this.models.toCollection().primaryKeys()}async getDrawRange(j,R,C){const L=this.memoryCacheDrawRange.get(j);if(!L)return console.error(&quot;ModelWorkerAPI: No drawRanges found for key:&quot;,j),null;const B=L[R];if(!B)return null;const U=C*3;for(const[q,[W,H]]of Object.entries(B))if(U&gt;=W&amp;&amp;U&lt;W+H)return[q,W,H];return null}async getNameFromRangeId(j,R){const C=this.memoryCacheHierarchy.get(j);if(!C)return console.error(&quot;ModelWorkerAPI: No hierarchy found for key:&quot;,j),null;const L=C[R];return L?L[0]:null}buildElementToMeshMap(j){const R=this.memoryCacheDrawRange.get(j)??{},C=new Map;for(const[L,B]of Object.entries(R))for(const U of Object.keys(B))C.set(U,L);return C}buildHierarchy(j,R,C){const L={},B=this.buildElementToMeshMap(j);let U=C+1,q=new Map;for(const[Q,[V]]of Object.entries(R)){const $=String(U);L[$]={id:$,name:V,children:[],rangeId:Q,model_key:j,node_name:B.get(Q)??null},q.set(Q,$),U++}let W=null;for(const[Q,[,V]]of Object.entries(R)){const $=q.get(Q);if(!$){console.warn(`ModelWorkerAPI: No string_id found for ${Q} (${V})`);continue}if(V===&quot;*&quot;||V===null)W=L[$];else{let ue=q.get(V);if(!ue){console.warn(`ModelWorkerAPI: No parent found for ${$} (${V})`);continue}const he=L[ue];he&amp;&amp;he.children.push(L[$])}}const H=Q=&gt;{Q.children.sort((V,$)=&gt;{try{return V.name.localeCompare($.name,void 0,{numeric:!0,sensitivity:&quot;base&quot;})}catch(ue){if(ue instanceof TypeError)return 0;throw ue}}),Q.children.forEach(H)};return W&amp;&amp;H(W),W}}rt(new to)})();\n&#x27;,rR=typeof self&lt;&quot;u&quot;&amp;&amp;self.Blob&amp;&amp;new Blob([vI],{type:&quot;text/javascript;charset=utf-8&quot;});function X6(n){let e;try{if(e=rR&amp;&amp;(self.URL||self.webkitURL).createObjectURL(rR),!e)throw&quot;&quot;;const t=new Worker(e,{name:n==null?void 0:n.name});return t.addEventListener(&quot;error&quot;,()=&gt;{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker(&quot;data:text/javascript;charset=utf-8,&quot;+encodeURIComponent(vI),{name:n==null?void 0:n.name})}finally{e&amp;&amp;(self.URL||self.webkitURL).revokeObjectURL(e)}}const q6=new X6,L0=gI(q6),Oc=Eo(n=&gt;({treeData:null,tree:null,searchTerm:&quot;&quot;,max_id:0,setSearchTerm:e=&gt;n({searchTerm:e}),setTree:e=&gt;n({tree:e}),setTreeData:e=&gt;n({treeData:e}),clearTreeData:()=&gt;n({treeData:null}),isTreeCollapsed:!0,setIsTreeCollapsed:e=&gt;n({isTreeCollapsed:e}),setMaxId:e=&gt;n({max_id:e})}));async function Y6(n,e){var o;const t=Oc.getState(),i=e.id_hierarchy??{},r={};for(const l of Object.keys(e).filter(u=&gt;u.startsWith(&quot;draw_ranges_node&quot;))){const u=l.slice(16);r[`node${u}`]=e[l]}try{await L0.add(n,i,r)}catch(l){console.error(&quot;Failed to cache model metadata&quot;,l)}let s;try{s=await L0.buildHierarchy(n,i,t.max_id+1)}catch(l){console.error(&quot;Failed to build tree hierarchy&quot;,l);return}if(s){if(t.treeData&amp;&amp;t.treeData.children.length&gt;0){let u=(o=t.treeData)==null?void 0:o.children.find(h=&gt;h.name===&quot;root&quot;);u?u.children=[...u.children,s]:u={id:(t.max_id+1).toString(),name:&quot;root&quot;,children:[s,t.treeData],model_key:n,node_name:null},t.setTreeData(u)}else t.setTreeData(s);const l=await bI(s);t.setMaxId(l+1)}}async function bI(n,e=0){if(n.children.length===0)return Math.max(Number(n.id),e);for(const t of n.children)e=await bI(t,e);return e}function K6(n){var s;const e=(s=n.parser)==null?void 0:s.json;if(!e)throw new Error(&quot;Raw glTF JSON not available on parser.json&quot;);const t=e.animations,i=e.nodes,r=new Map;return t.forEach((o,l)=&gt;{const u=o.name||`animation_${l}`,h=[];o.channels.forEach(f=&gt;{const p=f.target.node,m=i[p],g=(m==null?void 0:m.name)||`node_${p}`;h.includes(g)||h.push(g)}),r.set(u,h)}),r}class $6 extends Ji{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new tj(t)}),this.register(function(t){return new nj(t)}),this.register(function(t){return new hj(t)}),this.register(function(t){return new fj(t)}),this.register(function(t){return new dj(t)}),this.register(function(t){return new rj(t)}),this.register(function(t){return new sj(t)}),this.register(function(t){return new oj(t)}),this.register(function(t){return new aj(t)}),this.register(function(t){return new ej(t)}),this.register(function(t){return new lj(t)}),this.register(function(t){return new ij(t)}),this.register(function(t){return new uj(t)}),this.register(function(t){return new cj(t)}),this.register(function(t){return new J6(t)}),this.register(function(t){return new pj(t)}),this.register(function(t){return new mj(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!==&quot;&quot;)o=this.resourcePath;else if(this.path!==&quot;&quot;){const h=vo.extractUrlBase(e);o=vo.resolveURL(h,this.path)}else o=vo.extractUrlBase(e);this.manager.itemStart(e);const l=function(h){r?r(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},u=new ns(this.manager);u.setPath(this.path),u.setResponseType(&quot;arraybuffer&quot;),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{s.parse(h,o,function(f){t(f),s.manager.itemEnd(e)},l)}catch(f){l(f)}},i,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&amp;&amp;this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&amp;&amp;this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},l={},u=new TextDecoder;if(typeof e==&quot;string&quot;)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(u.decode(new Uint8Array(e,0,4))===xI){try{o[cn.KHR_BINARY_GLTF]=new gj(e)}catch(p){r&amp;&amp;r(p);return}s=JSON.parse(o[cn.KHR_BINARY_GLTF].content)}else s=JSON.parse(u.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]&lt;2){r&amp;&amp;r(new Error(&quot;THREE.GLTFLoader: Unsupported asset. glTF versions &gt;=2.0 are supported.&quot;));return}const h=new Rj(s,{path:t||this.resourcePath||&quot;&quot;,crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f&lt;this.pluginCallbacks.length;f++){const p=this.pluginCallbacks[f](h);p.name||console.error(&quot;THREE.GLTFLoader: Invalid plugin found: missing name&quot;),l[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(let f=0;f&lt;s.extensionsUsed.length;++f){const p=s.extensionsUsed[f],m=s.extensionsRequired||[];switch(p){case cn.KHR_MATERIALS_UNLIT:o[p]=new Q6;break;case cn.KHR_DRACO_MESH_COMPRESSION:o[p]=new yj(s,this.dracoLoader);break;case cn.KHR_TEXTURE_TRANSFORM:o[p]=new _j;break;case cn.KHR_MESH_QUANTIZATION:o[p]=new vj;break;default:m.indexOf(p)&gt;=0&amp;&amp;l[p]===void 0&amp;&amp;console.warn(&#x27;THREE.GLTFLoader: Unknown extension &quot;&#x27;+p+&#x27;&quot;.&#x27;)}}h.setExtensions(o),h.setPlugins(l),h.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Z6(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const cn={KHR_BINARY_GLTF:&quot;KHR_binary_glTF&quot;,KHR_DRACO_MESH_COMPRESSION:&quot;KHR_draco_mesh_compression&quot;,KHR_LIGHTS_PUNCTUAL:&quot;KHR_lights_punctual&quot;,KHR_MATERIALS_CLEARCOAT:&quot;KHR_materials_clearcoat&quot;,KHR_MATERIALS_DISPERSION:&quot;KHR_materials_dispersion&quot;,KHR_MATERIALS_IOR:&quot;KHR_materials_ior&quot;,KHR_MATERIALS_SHEEN:&quot;KHR_materials_sheen&quot;,KHR_MATERIALS_SPECULAR:&quot;KHR_materials_specular&quot;,KHR_MATERIALS_TRANSMISSION:&quot;KHR_materials_transmission&quot;,KHR_MATERIALS_IRIDESCENCE:&quot;KHR_materials_iridescence&quot;,KHR_MATERIALS_ANISOTROPY:&quot;KHR_materials_anisotropy&quot;,KHR_MATERIALS_UNLIT:&quot;KHR_materials_unlit&quot;,KHR_MATERIALS_VOLUME:&quot;KHR_materials_volume&quot;,KHR_TEXTURE_BASISU:&quot;KHR_texture_basisu&quot;,KHR_TEXTURE_TRANSFORM:&quot;KHR_texture_transform&quot;,KHR_MESH_QUANTIZATION:&quot;KHR_mesh_quantization&quot;,KHR_MATERIALS_EMISSIVE_STRENGTH:&quot;KHR_materials_emissive_strength&quot;,EXT_MATERIALS_BUMP:&quot;EXT_materials_bump&quot;,EXT_TEXTURE_WEBP:&quot;EXT_texture_webp&quot;,EXT_TEXTURE_AVIF:&quot;EXT_texture_avif&quot;,EXT_MESHOPT_COMPRESSION:&quot;EXT_meshopt_compression&quot;,EXT_MESH_GPU_INSTANCING:&quot;EXT_mesh_gpu_instancing&quot;};class J6{constructor(e){this.parser=e,this.name=cn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i&lt;r;i++){const s=t[i];s.extensions&amp;&amp;s.extensions[this.name]&amp;&amp;s.extensions[this.name].light!==void 0&amp;&amp;e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i=&quot;light:&quot;+e;let r=t.cache.get(i);if(r)return r;const s=t.json,u=((s.extensions&amp;&amp;s.extensions[this.name]||{}).lights||[])[e];let h;const f=new $e(16777215);u.color!==void 0&amp;&amp;f.setRGB(u.color[0],u.color[1],u.color[2],fr);const p=u.range!==void 0?u.range:0;switch(u.type){case&quot;directional&quot;:h=new Zd(f),h.target.position.set(0,0,-1),h.add(h.target);break;case&quot;point&quot;:h=new ky(f),h.distance=p;break;case&quot;spot&quot;:h=new Uy(f),h.distance=p,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,h.angle=u.spot.outerConeAngle,h.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error(&quot;THREE.GLTFLoader: Unexpected light type: &quot;+u.type)}return h.position.set(0,0,0),Jo(h,u),u.intensity!==void 0&amp;&amp;(h.intensity=u.intensity),h.name=t.createUniqueName(u.name||&quot;light_&quot;+e),r=Promise.resolve(h),t.cache.add(i,r),r}getDependency(e,t){if(e===&quot;light&quot;)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],l=(s.extensions&amp;&amp;s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return i._getNodeRef(t.cache,l,u)})}}class Q6{constructor(){this.name=cn.KHR_MATERIALS_UNLIT}getMaterialType(){return $i}extendParams(e,t,i){const r=[];e.color=new $e(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],fr),e.opacity=o[3]}s.baseColorTexture!==void 0&amp;&amp;r.push(i.assignTexture(e,&quot;map&quot;,s.baseColorTexture,Nn))}return Promise.all(r)}}class ej{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&amp;&amp;(t.emissiveIntensity=s),Promise.resolve()}}class tj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&amp;&amp;(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;clearcoatMap&quot;,o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&amp;&amp;(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;clearcoatRoughnessMap&quot;,o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&amp;&amp;(s.push(i.assignTexture(t,&quot;clearcoatNormalMap&quot;,o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Oe(l,l)}return Promise.all(s)}}class nj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class ij{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&amp;&amp;(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;iridescenceMap&quot;,o.iridescenceTexture)),o.iridescenceIor!==void 0&amp;&amp;(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&amp;&amp;(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&amp;&amp;(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&amp;&amp;(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;iridescenceThicknessMap&quot;,o.iridescenceThicknessTexture)),Promise.all(s)}}class rj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new $e(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],fr)}return o.sheenRoughnessFactor!==void 0&amp;&amp;(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;sheenColorMap&quot;,o.sheenColorTexture,Nn)),o.sheenRoughnessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;sheenRoughnessMap&quot;,o.sheenRoughnessTexture)),Promise.all(s)}}class sj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&amp;&amp;(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;transmissionMap&quot;,o.transmissionTexture)),Promise.all(s)}}class oj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;thicknessMap&quot;,o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new $e().setRGB(l[0],l[1],l[2],fr),Promise.all(s)}}class aj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class lj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;specularIntensityMap&quot;,o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new $e().setRGB(l[0],l[1],l[2],fr),o.specularColorTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;specularColorMap&quot;,o.specularColorTexture,Nn)),Promise.all(s)}}class cj{constructor(e){this.parser=e,this.name=cn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;bumpMap&quot;,o.bumpTexture)),Promise.all(s)}}class uj{constructor(e){this.parser=e,this.name=cn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&amp;&amp;(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&amp;&amp;(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&amp;&amp;s.push(i.assignTexture(t,&quot;anisotropyMap&quot;,o.anisotropyTexture)),Promise.all(s)}}class hj{constructor(e){this.parser=e,this.name=cn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&amp;&amp;i.extensionsRequired.indexOf(this.name)&gt;=0)throw new Error(&quot;THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures&quot;);return null}return t.loadTextureImage(e,s.source,o)}}class fj{constructor(e){this.parser=e,this.name=cn.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&amp;&amp;(u=h)}return i.loadTextureImage(e,o.source,u)}}class dj{constructor(e){this.parser=e,this.name=cn.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let u=i.textureLoader;if(l.uri){const h=i.options.manager.getHandler(l.uri);h!==null&amp;&amp;(u=h)}return i.loadTextureImage(e,o.source,u)}}class pj{constructor(e){this.name=cn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&amp;&amp;i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency(&quot;buffer&quot;,r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&amp;&amp;t.extensionsRequired.indexOf(this.name)&gt;=0)throw new Error(&quot;THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files&quot;);return null}return s.then(function(l){const u=r.byteOffset||0,h=r.byteLength||0,f=r.count,p=r.byteStride,m=new Uint8Array(l,u,h);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(f,p,m,r.mode,r.filter).then(function(g){return g.buffer}):o.ready.then(function(){const g=new ArrayBuffer(f*p);return o.decodeGltfBuffer(new Uint8Array(g),f,p,m,r.mode,r.filter),g})})}else return null}}class mj{constructor(e){this.name=cn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const h of r.primitives)if(h.mode!==vs.TRIANGLES&amp;&amp;h.mode!==vs.TRIANGLE_STRIP&amp;&amp;h.mode!==vs.TRIANGLE_FAN&amp;&amp;h.mode!==void 0)return null;const o=i.extensions[this.name].attributes,l=[],u={};for(const h in o)l.push(this.parser.getDependency(&quot;accessor&quot;,o[h]).then(f=&gt;(u[h]=f,u[h])));return l.length&lt;1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(h=&gt;{const f=h.pop(),p=f.isGroup?f.children:[f],m=h[0].count,g=[];for(const v of p){const x=new yt,b=new Y,_=new Si,T=new Y(1,1,1),w=new dw(v.geometry,v.material,m);for(let E=0;E&lt;m;E++)u.TRANSLATION&amp;&amp;b.fromBufferAttribute(u.TRANSLATION,E),u.ROTATION&amp;&amp;_.fromBufferAttribute(u.ROTATION,E),u.SCALE&amp;&amp;T.fromBufferAttribute(u.SCALE,E),w.setMatrixAt(E,x.compose(b,_,T));for(const E in u)if(E===&quot;_COLOR_0&quot;){const R=u[E];w.instanceColor=new Mc(R.array,R.itemSize,R.normalized)}else E!==&quot;TRANSLATION&quot;&amp;&amp;E!==&quot;ROTATION&quot;&amp;&amp;E!==&quot;SCALE&quot;&amp;&amp;v.geometry.setAttribute(E,u[E]);nn.prototype.copy.call(w,v),this.parser.assignFinalMaterial(w),g.push(w)}return f.isGroup?(f.clear(),f.add(...g),f):g[0]}))}}const xI=&quot;glTF&quot;,Ff=12,sR={JSON:1313821514,BIN:5130562};class gj{constructor(e){this.name=cn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ff),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==xI)throw new Error(&quot;THREE.GLTFLoader: Unsupported glTF-Binary header.&quot;);if(this.header.version&lt;2)throw new Error(&quot;THREE.GLTFLoader: Legacy binary file detected.&quot;);const r=this.header.length-Ff,s=new DataView(e,Ff);let o=0;for(;o&lt;r;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===sR.JSON){const h=new Uint8Array(e,Ff+o,l);this.content=i.decode(h)}else if(u===sR.BIN){const h=Ff+o;this.body=e.slice(h,h+l)}o+=l}if(this.content===null)throw new Error(&quot;THREE.GLTFLoader: JSON content not found.&quot;)}}class yj{constructor(e,t){if(!t)throw new Error(&quot;THREE.GLTFLoader: No DRACOLoader instance provided.&quot;);this.name=cn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},u={},h={};for(const f in o){const p=xS[f]||f.toLowerCase();l[p]=o[f]}for(const f in e.attributes){const p=xS[f]||f.toLowerCase();if(o[f]!==void 0){const m=i.accessors[e.attributes[f]],g=eh[m.componentType];h[p]=g.name,u[p]=m.normalized===!0}}return t.getDependency(&quot;bufferView&quot;,s).then(function(f){return new Promise(function(p,m){r.decodeDracoFile(f,function(g){for(const v in g.attributes){const x=g.attributes[v],b=u[v];b!==void 0&amp;&amp;(x.normalized=b)}p(g)},l,h,fr,m)})})}}class _j{constructor(){this.name=cn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&amp;&amp;t.offset===void 0&amp;&amp;t.rotation===void 0&amp;&amp;t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&amp;&amp;(e.channel=t.texCoord),t.offset!==void 0&amp;&amp;e.offset.fromArray(t.offset),t.rotation!==void 0&amp;&amp;(e.rotation=t.rotation),t.scale!==void 0&amp;&amp;e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class vj{constructor(){this.name=cn.KHR_MESH_QUANTIZATION}}class SI extends Rh{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=l*2,h=l*3,f=r-t,p=(i-t)/f,m=p*p,g=m*p,v=e*h,x=v-h,b=-2*g+3*m,_=g-m,T=1-b,w=_-m+p;for(let E=0;E!==l;E++){const R=o[x+E+l],N=o[x+E+u]*f,A=o[v+E+l],D=o[v+E]*f;s[E]=T*R+w*N+b*A+_*D}return s}}const bj=new Si;class xj extends SI{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return bj.fromArray(s).normalize().toArray(s),s}}const vs={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},eh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},oR={9728:xi,9729:fi,9984:ty,9985:Ju,9986:hc,9987:Zr},aR={33071:rr,33648:ih,10497:ws},ax={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xS={POSITION:&quot;position&quot;,NORMAL:&quot;normal&quot;,TANGENT:&quot;tangent&quot;,TEXCOORD_0:&quot;uv&quot;,TEXCOORD_1:&quot;uv1&quot;,TEXCOORD_2:&quot;uv2&quot;,TEXCOORD_3:&quot;uv3&quot;,COLOR_0:&quot;color&quot;,WEIGHTS_0:&quot;skinWeight&quot;,JOINTS_0:&quot;skinIndex&quot;},Ya={scale:&quot;scale&quot;,translation:&quot;position&quot;,rotation:&quot;quaternion&quot;,weights:&quot;morphTargetInfluences&quot;},Sj={CUBICSPLINE:void 0,LINEAR:ch,STEP:lh},lx={OPAQUE:&quot;OPAQUE&quot;,MASK:&quot;MASK&quot;,BLEND:&quot;BLEND&quot;};function wj(n){return n.DefaultMaterial===void 0&amp;&amp;(n.DefaultMaterial=new ts({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Qr})),n.DefaultMaterial}function ec(n,e,t){for(const i in t.extensions)n[i]===void 0&amp;&amp;(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Jo(n,e){e.extras!==void 0&amp;&amp;(typeof e.extras==&quot;object&quot;?Object.assign(n.userData,e.extras):console.warn(&quot;THREE.GLTFLoader: Ignoring primitive type .extras, &quot;+e.extras))}function Ej(n,e,t){let i=!1,r=!1,s=!1;for(let h=0,f=e.length;h&lt;f;h++){const p=e[h];if(p.POSITION!==void 0&amp;&amp;(i=!0),p.NORMAL!==void 0&amp;&amp;(r=!0),p.COLOR_0!==void 0&amp;&amp;(s=!0),i&amp;&amp;r&amp;&amp;s)break}if(!i&amp;&amp;!r&amp;&amp;!s)return Promise.resolve(n);const o=[],l=[],u=[];for(let h=0,f=e.length;h&lt;f;h++){const p=e[h];if(i){const m=p.POSITION!==void 0?t.getDependency(&quot;accessor&quot;,p.POSITION):n.attributes.position;o.push(m)}if(r){const m=p.NORMAL!==void 0?t.getDependency(&quot;accessor&quot;,p.NORMAL):n.attributes.normal;l.push(m)}if(s){const m=p.COLOR_0!==void 0?t.getDependency(&quot;accessor&quot;,p.COLOR_0):n.attributes.color;u.push(m)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(h){const f=h[0],p=h[1],m=h[2];return i&amp;&amp;(n.morphAttributes.position=f),r&amp;&amp;(n.morphAttributes.normal=p),s&amp;&amp;(n.morphAttributes.color=m),n.morphTargetsRelative=!0,n})}function Tj(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t&lt;i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&amp;&amp;Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i&lt;r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn(&quot;THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.&quot;)}}function Mj(n){let e;const t=n.extensions&amp;&amp;n.extensions[cn.KHR_DRACO_MESH_COMPRESSION];if(t?e=&quot;draco:&quot;+t.bufferView+&quot;:&quot;+t.indices+&quot;:&quot;+cx(t.attributes):e=n.indices+&quot;:&quot;+cx(n.attributes)+&quot;:&quot;+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i&lt;r;i++)e+=&quot;:&quot;+cx(n.targets[i]);return e}function cx(n){let e=&quot;&quot;;const t=Object.keys(n).sort();for(let i=0,r=t.length;i&lt;r;i++)e+=t[i]+&quot;:&quot;+n[t[i]]+&quot;;&quot;;return e}function SS(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error(&quot;THREE.GLTFLoader: Unsupported normalized accessor component type.&quot;)}}function Aj(n){return n.search(/\.jpe?g($|\?)/i)&gt;0||n.search(/^data\:image\/jpeg/)===0?&quot;image/jpeg&quot;:n.search(/\.webp($|\?)/i)&gt;0||n.search(/^data\:image\/webp/)===0?&quot;image/webp&quot;:n.search(/\.ktx2($|\?)/i)&gt;0||n.search(/^data\:image\/ktx2/)===0?&quot;image/ktx2&quot;:&quot;image/png&quot;}const Cj=new yt;class Rj{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Z6,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator&lt;&quot;u&quot;){const l=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(l)===!0;const u=l.match(/Version\/(\d+)/);r=i&amp;&amp;u?parseInt(u[1],10):-1,s=l.indexOf(&quot;Firefox&quot;)&gt;-1,o=s?l.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap&gt;&quot;u&quot;||i&amp;&amp;r&lt;17||s&amp;&amp;o&lt;98?this.textureLoader=new Ly(this.options.manager):this.textureLoader=new CN(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ns(this.options.manager),this.fileLoader.setResponseType(&quot;arraybuffer&quot;),this.options.crossOrigin===&quot;use-credentials&quot;&amp;&amp;this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&amp;&amp;o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&amp;&amp;o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies(&quot;scene&quot;),i.getDependencies(&quot;animation&quot;),i.getDependencies(&quot;camera&quot;)])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return ec(s,l,r),Jo(l,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&amp;&amp;u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r&lt;s;r++){const o=t[r].joints;for(let l=0,u=o.length;l&lt;u;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r&lt;s;r++){const o=e[r];o.mesh!==void 0&amp;&amp;(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&amp;&amp;(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&amp;&amp;this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&amp;&amp;(e.refs[t]===void 0&amp;&amp;(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]&lt;=1)return i;const r=i.clone(),s=(o,l)=&gt;{const u=this.associations.get(o);u!=null&amp;&amp;this.associations.set(l,u);for(const[h,f]of o.children.entries())s(f,l.children[h])};return s(i,r),r.name+=&quot;_instance_&quot;+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i&lt;t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r&lt;t.length;r++){const s=e(t[r]);s&amp;&amp;i.push(s)}return i}getDependency(e,t){const i=e+&quot;:&quot;+t;let r=this.cache.get(i);if(!r){switch(e){case&quot;scene&quot;:r=this.loadScene(t);break;case&quot;node&quot;:r=this._invokeOne(function(s){return s.loadNode&amp;&amp;s.loadNode(t)});break;case&quot;mesh&quot;:r=this._invokeOne(function(s){return s.loadMesh&amp;&amp;s.loadMesh(t)});break;case&quot;accessor&quot;:r=this.loadAccessor(t);break;case&quot;bufferView&quot;:r=this._invokeOne(function(s){return s.loadBufferView&amp;&amp;s.loadBufferView(t)});break;case&quot;buffer&quot;:r=this.loadBuffer(t);break;case&quot;material&quot;:r=this._invokeOne(function(s){return s.loadMaterial&amp;&amp;s.loadMaterial(t)});break;case&quot;texture&quot;:r=this._invokeOne(function(s){return s.loadTexture&amp;&amp;s.loadTexture(t)});break;case&quot;skin&quot;:r=this.loadSkin(t);break;case&quot;animation&quot;:r=this._invokeOne(function(s){return s.loadAnimation&amp;&amp;s.loadAnimation(t)});break;case&quot;camera&quot;:r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&amp;&amp;s.getDependency&amp;&amp;s.getDependency(e,t)}),!r)throw new Error(&quot;Unknown type: &quot;+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e===&quot;mesh&quot;?&quot;es&quot;:&quot;s&quot;)]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&amp;&amp;t.type!==&quot;arraybuffer&quot;)throw new Error(&quot;THREE.GLTFLoader: &quot;+t.type+&quot; buffer type is not supported.&quot;);if(t.uri===void 0&amp;&amp;e===0)return Promise.resolve(this.extensions[cn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(vo.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error(&#x27;THREE.GLTFLoader: Failed to load buffer &quot;&#x27;+t.uri+&#x27;&quot;.&#x27;))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency(&quot;buffer&quot;,t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&amp;&amp;r.sparse===void 0){const o=ax[r.type],l=eh[r.componentType],u=r.normalized===!0,h=new l(r.count*o);return Promise.resolve(new Jt(h,o,u))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency(&quot;bufferView&quot;,r.bufferView)):s.push(null),r.sparse!==void 0&amp;&amp;(s.push(this.getDependency(&quot;bufferView&quot;,r.sparse.indices.bufferView)),s.push(this.getDependency(&quot;bufferView&quot;,r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],u=ax[r.type],h=eh[r.componentType],f=h.BYTES_PER_ELEMENT,p=f*u,m=r.byteOffset||0,g=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,v=r.normalized===!0;let x,b;if(g&amp;&amp;g!==p){const _=Math.floor(m/g),T=&quot;InterleavedBuffer:&quot;+r.bufferView+&quot;:&quot;+r.componentType+&quot;:&quot;+_+&quot;:&quot;+r.count;let w=t.cache.get(T);w||(x=new h(l,_*g,r.count*g/f),w=new qd(x,g/f),t.cache.add(T,w)),b=new dl(w,u,m%g/f,v)}else l===null?x=new h(r.count*u):x=new h(l,m,r.count*u),b=new Jt(x,u,v);if(r.sparse!==void 0){const _=ax.SCALAR,T=eh[r.sparse.indices.componentType],w=r.sparse.indices.byteOffset||0,E=r.sparse.values.byteOffset||0,R=new T(o[1],w,r.sparse.count*_),N=new h(o[2],E,r.sparse.count*u);l!==null&amp;&amp;(b=new Jt(b.array.slice(),b.itemSize,b.normalized)),b.normalized=!1;for(let A=0,D=R.length;A&lt;D;A++){const C=R[A];if(b.setX(C,N[A*u]),u&gt;=2&amp;&amp;b.setY(C,N[A*u+1]),u&gt;=3&amp;&amp;b.setZ(C,N[A*u+2]),u&gt;=4&amp;&amp;b.setW(C,N[A*u+3]),u&gt;=5)throw new Error(&quot;THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.&quot;)}b.normalized=v}return b})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const u=i.manager.getHandler(o.uri);u!==null&amp;&amp;(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+&quot;:&quot;+o.sampler;if(this.textureCache[u])return this.textureCache[u];const h=this.loadImageSource(t,i).then(function(f){f.flipY=!1,f.name=o.name||l.name||&quot;&quot;,f.name===&quot;&quot;&amp;&amp;typeof l.uri==&quot;string&quot;&amp;&amp;l.uri.startsWith(&quot;data:image/&quot;)===!1&amp;&amp;(f.name=l.uri);const m=(s.samplers||{})[o.sampler]||{};return f.magFilter=oR[m.magFilter]||fi,f.minFilter=oR[m.minFilter]||Zr,f.wrapS=aR[m.wrapS]||ws,f.wrapT=aR[m.wrapT]||ws,f.generateMipmaps=!f.isCompressedTexture&amp;&amp;f.minFilter!==xi&amp;&amp;f.minFilter!==fi,r.associations.set(f,{textures:e}),f}).catch(function(){return null});return this.textureCache[u]=h,h}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(p=&gt;p.clone());const o=r.images[e],l=self.URL||self.webkitURL;let u=o.uri||&quot;&quot;,h=!1;if(o.bufferView!==void 0)u=i.getDependency(&quot;bufferView&quot;,o.bufferView).then(function(p){h=!0;const m=new Blob([p],{type:o.mimeType});return u=l.createObjectURL(m),u});else if(o.uri===void 0)throw new Error(&quot;THREE.GLTFLoader: Image &quot;+e+&quot; is missing URI and bufferView&quot;);const f=Promise.resolve(u).then(function(p){return new Promise(function(m,g){let v=m;t.isImageBitmapLoader===!0&amp;&amp;(v=function(x){const b=new Kn(x);b.needsUpdate=!0,m(b)}),t.load(vo.resolveURL(p,s.path),v,void 0,g)})}).then(function(p){return h===!0&amp;&amp;l.revokeObjectURL(u),Jo(p,o),p.userData.mimeType=o.mimeType||Aj(o.uri),p}).catch(function(p){throw console.error(&quot;THREE.GLTFLoader: Couldn&#x27;t load texture&quot;,u),p});return this.sourceCache[e]=f,f}assignTexture(e,t,i,r){const s=this;return this.getDependency(&quot;texture&quot;,i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&amp;&amp;i.texCoord&gt;0&amp;&amp;(o=o.clone(),o.channel=i.texCoord),s.extensions[cn.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[cn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(o);o=s.extensions[cn.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,u)}}return r!==void 0&amp;&amp;(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l=&quot;PointsMaterial:&quot;+i.uuid;let u=this.cache.get(l);u||(u=new yy,Oi.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(l,u)),i=u}else if(e.isLine){const l=&quot;LineBasicMaterial:&quot;+i.uuid;let u=this.cache.get(l);u||(u=new Zi,Oi.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(l,u)),i=u}if(r||s||o){let l=&quot;ClonedMaterial:&quot;+i.uuid+&quot;:&quot;;r&amp;&amp;(l+=&quot;derivative-tangents:&quot;),s&amp;&amp;(l+=&quot;vertex-colors:&quot;),o&amp;&amp;(l+=&quot;flat-shading:&quot;);let u=this.cache.get(l);u||(u=i.clone(),s&amp;&amp;(u.vertexColors=!0),o&amp;&amp;(u.flatShading=!0),r&amp;&amp;(u.normalScale&amp;&amp;(u.normalScale.y*=-1),u.clearcoatNormalScale&amp;&amp;(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(i))),i=u}e.material=i}getMaterialType(){return ts}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const l={},u=s.extensions||{},h=[];if(u[cn.KHR_MATERIALS_UNLIT]){const p=r[cn.KHR_MATERIALS_UNLIT];o=p.getMaterialType(),h.push(p.extendParams(l,s,t))}else{const p=s.pbrMetallicRoughness||{};if(l.color=new $e(1,1,1),l.opacity=1,Array.isArray(p.baseColorFactor)){const m=p.baseColorFactor;l.color.setRGB(m[0],m[1],m[2],fr),l.opacity=m[3]}p.baseColorTexture!==void 0&amp;&amp;h.push(t.assignTexture(l,&quot;map&quot;,p.baseColorTexture,Nn)),l.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,l.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&amp;&amp;(h.push(t.assignTexture(l,&quot;metalnessMap&quot;,p.metallicRoughnessTexture)),h.push(t.assignTexture(l,&quot;roughnessMap&quot;,p.metallicRoughnessTexture))),o=this._invokeOne(function(m){return m.getMaterialType&amp;&amp;m.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&amp;&amp;m.extendMaterialParams(e,l)})))}s.doubleSided===!0&amp;&amp;(l.side=Ki);const f=s.alphaMode||lx.OPAQUE;if(f===lx.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,f===lx.MASK&amp;&amp;(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&amp;&amp;o!==$i&amp;&amp;(h.push(t.assignTexture(l,&quot;normalMap&quot;,s.normalTexture)),l.normalScale=new Oe(1,1),s.normalTexture.scale!==void 0)){const p=s.normalTexture.scale;l.normalScale.set(p,p)}if(s.occlusionTexture!==void 0&amp;&amp;o!==$i&amp;&amp;(h.push(t.assignTexture(l,&quot;aoMap&quot;,s.occlusionTexture)),s.occlusionTexture.strength!==void 0&amp;&amp;(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&amp;&amp;o!==$i){const p=s.emissiveFactor;l.emissive=new $e().setRGB(p[0],p[1],p[2],fr)}return s.emissiveTexture!==void 0&amp;&amp;o!==$i&amp;&amp;h.push(t.assignTexture(l,&quot;emissiveMap&quot;,s.emissiveTexture,Nn)),Promise.all(h).then(function(){const p=new o(l);return s.name&amp;&amp;(p.name=s.name),Jo(p,s),t.associations.set(p,{materials:e}),s.extensions&amp;&amp;ec(r,p,s),p})}createUniqueName(e){const t=mn.sanitizeNodeName(e||&quot;&quot;);return t in this.nodeNamesUsed?t+&quot;_&quot;+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(l){return i[cn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return lR(u,l,t)})}const o=[];for(let l=0,u=e.length;l&lt;u;l++){const h=e[l],f=Mj(h),p=r[f];if(p)o.push(p.promise);else{let m;h.extensions&amp;&amp;h.extensions[cn.KHR_DRACO_MESH_COMPRESSION]?m=s(h):m=lR(new Lt,h,t),r[f]={primitive:h,promise:m},o.push(m)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,l=[];for(let u=0,h=o.length;u&lt;h;u++){const f=o[u].material===void 0?wj(this.cache):this.getDependency(&quot;material&quot;,o[u].material);l.push(f)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(u){const h=u.slice(0,u.length-1),f=u[u.length-1],p=[];for(let g=0,v=f.length;g&lt;v;g++){const x=f[g],b=o[g];let _;const T=h[g];if(b.mode===vs.TRIANGLES||b.mode===vs.TRIANGLE_STRIP||b.mode===vs.TRIANGLE_FAN||b.mode===void 0)_=s.isSkinnedMesh===!0?new my(x,T):new Sn(x,T),_.isSkinnedMesh===!0&amp;&amp;_.normalizeSkinWeights(),b.mode===vs.TRIANGLE_STRIP?_.geometry=MC(_.geometry,aw):b.mode===vs.TRIANGLE_FAN&amp;&amp;(_.geometry=MC(_.geometry,E0));else if(b.mode===vs.LINES)_=new Ur(x,T);else if(b.mode===vs.LINE_STRIP)_=new xo(x,T);else if(b.mode===vs.LINE_LOOP)_=new pw(x,T);else if(b.mode===vs.POINTS)_=new _y(x,T);else throw new Error(&quot;THREE.GLTFLoader: Primitive mode unsupported: &quot;+b.mode);Object.keys(_.geometry.morphAttributes).length&gt;0&amp;&amp;Tj(_,s),_.name=t.createUniqueName(s.name||&quot;mesh_&quot;+e),Jo(_,s),b.extensions&amp;&amp;ec(r,_,b),t.assignFinalMaterial(_),p.push(_)}for(let g=0,v=p.length;g&lt;v;g++)t.associations.set(p[g],{meshes:e,primitives:g});if(p.length===1)return s.extensions&amp;&amp;ec(r,p[0],s),p[0];const m=new br;s.extensions&amp;&amp;ec(r,m,s),t.associations.set(m,{meshes:e});for(let g=0,v=p.length;g&lt;v;g++)m.add(p[g]);return m})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn(&quot;THREE.GLTFLoader: Missing camera parameters.&quot;);return}return i.type===&quot;perspective&quot;?t=new Yn(rl.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type===&quot;orthographic&quot;&amp;&amp;(t=new Fc(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&amp;&amp;(t.name=this.createUniqueName(i.name)),Jo(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r&lt;s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency(&quot;accessor&quot;,t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,l=[],u=[];for(let h=0,f=o.length;h&lt;f;h++){const p=o[h];if(p){l.push(p);const m=new yt;s!==null&amp;&amp;m.fromArray(s.array,h*16),u.push(m)}else console.warn(&#x27;THREE.GLTFLoader: Joint &quot;%s&quot; could not be found.&#x27;,t.joints[h])}return new Eh(l,u)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:&quot;animation_&quot;+e,o=[],l=[],u=[],h=[],f=[];for(let p=0,m=r.channels.length;p&lt;m;p++){const g=r.channels[p],v=r.samplers[g.sampler],x=g.target,b=x.node,_=r.parameters!==void 0?r.parameters[v.input]:v.input,T=r.parameters!==void 0?r.parameters[v.output]:v.output;x.node!==void 0&amp;&amp;(o.push(this.getDependency(&quot;node&quot;,b)),l.push(this.getDependency(&quot;accessor&quot;,_)),u.push(this.getDependency(&quot;accessor&quot;,T)),h.push(v),f.push(x))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(f)]).then(function(p){const m=p[0],g=p[1],v=p[2],x=p[3],b=p[4],_=[];for(let T=0,w=m.length;T&lt;w;T++){const E=m[T],R=g[T],N=v[T],A=x[T],D=b[T];if(E===void 0)continue;E.updateMatrix&amp;&amp;E.updateMatrix();const C=i._createAnimationTracks(E,R,N,A,D);if(C)for(let O=0;O&lt;C.length;O++)_.push(C[O])}return new ml(s,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency(&quot;mesh&quot;,r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&amp;&amp;o.traverse(function(l){if(l.isMesh)for(let u=0,h=r.weights.length;u&lt;h;u++)l.morphTargetInfluences[u]=r.weights[u]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],l=r.children||[];for(let h=0,f=l.length;h&lt;f;h++)o.push(i.getDependency(&quot;node&quot;,l[h]));const u=r.skin===void 0?Promise.resolve(null):i.getDependency(&quot;skin&quot;,r.skin);return Promise.all([s,Promise.all(o),u]).then(function(h){const f=h[0],p=h[1],m=h[2];m!==null&amp;&amp;f.traverse(function(g){g.isSkinnedMesh&amp;&amp;g.bind(m,Cj)});for(let g=0,v=p.length;g&lt;v;g++)f.add(p[g]);return f})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):&quot;&quot;,l=[],u=r._invokeOne(function(h){return h.createNodeMesh&amp;&amp;h.createNodeMesh(e)});return u&amp;&amp;l.push(u),s.camera!==void 0&amp;&amp;l.push(r.getDependency(&quot;camera&quot;,s.camera).then(function(h){return r._getNodeRef(r.cameraCache,s.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&amp;&amp;h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),this.nodeCache[e]=Promise.all(l).then(function(h){let f;if(s.isBone===!0?f=new Yd:h.length&gt;1?f=new br:h.length===1?f=h[0]:f=new nn,f!==h[0])for(let p=0,m=h.length;p&lt;m;p++)f.add(h[p]);if(s.name&amp;&amp;(f.userData.name=s.name,f.name=o),Jo(f,s),s.extensions&amp;&amp;ec(i,f,s),s.matrix!==void 0){const p=new yt;p.fromArray(s.matrix),f.applyMatrix4(p)}else s.translation!==void 0&amp;&amp;f.position.fromArray(s.translation),s.rotation!==void 0&amp;&amp;f.quaternion.fromArray(s.rotation),s.scale!==void 0&amp;&amp;f.scale.fromArray(s.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=e,f}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new br;i.name&amp;&amp;(s.name=r.createUniqueName(i.name)),Jo(s,i),i.extensions&amp;&amp;ec(t,s,i);const o=i.nodes||[],l=[];for(let u=0,h=o.length;u&lt;h;u++)l.push(r.getDependency(&quot;node&quot;,o[u]));return Promise.all(l).then(function(u){for(let f=0,p=u.length;f&lt;p;f++)s.add(u[f]);const h=f=&gt;{const p=new Map;for(const[m,g]of r.associations)(m instanceof Oi||m instanceof Kn)&amp;&amp;p.set(m,g);return f.traverse(m=&gt;{const g=r.associations.get(m);g!=null&amp;&amp;p.set(m,g)}),p};return r.associations=h(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],l=e.name?e.name:e.uuid,u=[];Ya[s.path]===Ya.weights?e.traverse(function(m){m.morphTargetInfluences&amp;&amp;u.push(m.name?m.name:m.uuid)}):u.push(l);let h;switch(Ya[s.path]){case Ya.weights:h=Cc;break;case Ya.rotation:h=pl;break;case Ya.translation:case Ya.scale:h=pa;break;default:switch(i.itemSize){case 1:h=Cc;break;case 2:case 3:default:h=pa;break}break}const f=r.interpolation!==void 0?Sj[r.interpolation]:ch,p=this._getArrayFromAccessor(i);for(let m=0,g=u.length;m&lt;g;m++){const v=new h(u[m]+&quot;.&quot;+Ya[s.path],t.array,p,f);r.interpolation===&quot;CUBICSPLINE&quot;&amp;&amp;this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=SS(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s&lt;o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof pl?xj:SI;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Oj(n,e,t){const i=e.attributes,r=new Ri;if(i.POSITION!==void 0){const l=t.json.accessors[i.POSITION],u=l.min,h=l.max;if(u!==void 0&amp;&amp;h!==void 0){if(r.set(new Y(u[0],u[1],u[2]),new Y(h[0],h[1],h[2])),l.normalized){const f=SS(eh[l.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn(&quot;THREE.GLTFLoader: Missing min/max properties for accessor POSITION.&quot;);return}}else return;const s=e.targets;if(s!==void 0){const l=new Y,u=new Y;for(let h=0,f=s.length;h&lt;f;h++){const p=s[h];if(p.POSITION!==void 0){const m=t.json.accessors[p.POSITION],g=m.min,v=m.max;if(g!==void 0&amp;&amp;v!==void 0){if(u.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),u.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),u.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),m.normalized){const x=SS(eh[m.componentType]);u.multiplyScalar(x)}l.max(u)}else console.warn(&quot;THREE.GLTFLoader: Missing min/max properties for accessor POSITION.&quot;)}}r.expandByVector(l)}n.boundingBox=r;const o=new wi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function lR(n,e,t){const i=e.attributes,r=[];function s(o,l){return t.getDependency(&quot;accessor&quot;,o).then(function(u){n.setAttribute(l,u)})}for(const o in i){const l=xS[o]||o.toLowerCase();l in n.attributes||r.push(s(i[o],l))}if(e.indices!==void 0&amp;&amp;!n.index){const o=t.getDependency(&quot;accessor&quot;,e.indices).then(function(l){n.setIndex(l)});r.push(o)}return Zt.workingColorSpace!==fr&amp;&amp;&quot;COLOR_0&quot;in i&amp;&amp;console.warn(`THREE.GLTFLoader: Converting vertex colors from &quot;srgb-linear&quot; to &quot;${Zt.workingColorSpace}&quot; not supported.`),Jo(n,e),Oj(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?Ej(n,e.targets,t):n})}function Dj(n){const e=new $6;return new Promise((t,i)=&gt;{e.load(n,t,void 0,i)})}function Nj(n){n.material=new $i({vertexColors:!0,side:Ki})}function Ij(n){return Math.sqrt(n.reduce((e,t)=&gt;e+t*t,0))}function Pj(n){return n[0]}class Lj{static colorizeData(e,t=Ij){e[0].length===1&amp;&amp;(t=Pj);const i=ZS.getState().colorPalette,r=e.map(f=&gt;t(f)).sort((f,p)=&gt;f-p),s=r[0],o=r[r.length-1],l=i[0],u=i[1],h=f=&gt;l.map((p,m)=&gt;p+(u[m]-p)*(f-s)/(o-s));return e.map(f=&gt;h(t(f)))}}function Uj(n){const e=[];for(let t=0;t&lt;n.length;t+=3)e.push([n[t],n[t+1],n[t+2]]);return e}function kj(n,e){const t=n.geometry,i=t.attributes.position,r=t.morphAttributes.position[e],s=Uj(Array.from(r.array)),o=Lj.colorizeData(s),l=new Float32Array(i.count*3),u=new Jt(l,3);t.setAttribute(&quot;color&quot;,u);for(let h=0;h&lt;i.count;h++){const f=o[h],p=new $e(f[0],f[1],f[2]);u.setXYZ(h,p.r,p.g,p.b)}u.needsUpdate=!0,Nj(n)}class Fj{constructor(e){dt(this,&quot;mixer&quot;);dt(this,&quot;actions&quot;,new Map);dt(this,&quot;currentAction&quot;,null);dt(this,&quot;meshMap&quot;,new Map);dt(this,&quot;animation_store&quot;,null);this.mixer=new IN(e),this.animation_store=gl.getState()}clear(){this.mixer.stopAllAction(),this.actions.clear(),this.currentAction=null}addAnimation(e){const t=this.mixer.clipAction(e);this.actions.set(e.name,t)}setMeshMap(e){this.meshMap=e}getAnimationNames(){return Array.from(this.actions.keys())}_get_mesh_from_action(e){const t=e.getClip(),i=this.meshMap.get(t.name),r=Zs.current;if(i&amp;&amp;r)for(const s of i){const o=s.replace(&quot;.&quot;,&quot;&quot;),l=r.getObjectByName(o);if(l)return l}return null}setCurrentAnimation(e){var i,r;if(e===&quot;No Animation&quot;){(i=this.animation_store)==null||i.setSelectedAnimation(e),this.stopAnimation();const s=new ts({color:8421504,side:Ki}),o=this.actions.values().next().value;if(o){const l=this._get_mesh_from_action(o);l&amp;&amp;(l.material=s,l.geometry.attributes.position.needsUpdate=!0)}return}const t=this.actions.get(e);if(t){this.currentAction&amp;&amp;this.currentAction.stop(),this.currentAction=t,gl.getState().setSelectedAnimation(e);const s=this._get_mesh_from_action(t),o=this.getActionIndex();s&amp;&amp;kj(s,o),(r=this.animation_store)==null||r.setIsPlaying(!1),this.currentAction.paused=!0}}togglePlayPause(){var e,t;this.currentAction&amp;&amp;((t=this.animation_store)==null||t.setIsPlaying(!((e=this.animation_store)!=null&amp;&amp;e.isPlaying)),this.currentAction.paused=!this.currentAction.paused,this.currentAction.paused||this.currentAction.play())}stopAnimation(){var e,t;this.currentAction&amp;&amp;(this.currentAction.paused=!0,this.seek(0),(e=this.animation_store)==null||e.setCurrentKey(this.getCurrentTime()),(t=this.animation_store)==null||t.setIsPlaying(!1))}seek(e){this.currentAction&amp;&amp;(this.currentAction.paused&amp;&amp;this.currentAction.play(),this.currentAction.time=e)}update(e){var t;this.mixer.update(e),this.animation_store&amp;&amp;((t=this.currentAction)!=null&amp;&amp;t.isRunning())&amp;&amp;this.animation_store.setCurrentKey(this.getCurrentTime())}getCurrentTime(){return this.currentAction?this.currentAction.time:0}getDuration(){return this.currentAction?this.currentAction.getClip().duration:0}getStep(){return this.currentAction?this.getDuration()/100:0}getActionIndex(){if(this.currentAction){const e=this.currentAction.getClip();return Array.from(this.actions.keys()).indexOf(e.name)}return-1}}async function wI(n,e=!0){var g,v,x,b;if(Zs.current==null)return console.error(&quot;Scene reference is null&quot;),new br;const t=Zs.current,i=new br;if(!n)return i;const r=await Dj(n),s=r.scene,o=r.animations,l=eo.getState(),u=Bc.getState(),h=gl.getState(),f=(g=r.parser.json.extensions)==null?void 0:g.ADA_EXT_data;f&amp;&amp;(zw.current=f,f.simulation_objects.length&gt;0&amp;&amp;(Fw.current=f.simulation_objects[0])),bi.current=new Fj(t),o.length&gt;0?(h.setHasAnimation(!0),(v=bi.current)==null||v.clear(),(x=bi.current)==null||x.setMeshMap(K6(r)),o.forEach(_=&gt;{var T;(T=bi.current)==null||T.addAnimation(_)})):(h.setHasAnimation(!1),(b=bi.current)==null||b.clear());const p=s.name+&quot;_&quot;+s.uuid;await qN({gltf_scene:s,hash:p});const m=s.userData??{};if(await Y6(p,m),l.translation&amp;&amp;e)console.log(&quot;Model already translated&quot;),s.position.add(l.translation);else{const _=new Ri().setFromObject(s);if(l.setBoundingBox(_),!u.lockTranslation&amp;&amp;l.model_type==Cd.DESIGN){const w=_.getCenter(new Y).clone().multiplyScalar(-1);if(l.zIsUp){const E=_.min.z,R=_.max.z-E;w.z=-E+R*.05}else{const E=_.min.y,R=_.max.y-E;w.y=-E+R*.05}s.position.add(w),l.setTranslation(w)}}return i.add(s),t.add(i),Sc.current||(Sc.current=new Map),Sc.current.set(p,i),o.length&gt;0&amp;&amp;h.setHasAnimation(!0),i}function zj(n){console.log(&quot;Loading GLTF from base64 data&quot;);const t=(&quot;data:text/plain;base64,&quot;+n).split(&quot;,&quot;)[1],i=atob(t),r=new Uint8Array(i.length);for(let o=0;o&lt;i.length;o++)r[o]=i.charCodeAt(o);const s=new Blob([r],{type:&quot;model/gltf-binary&quot;});return URL.createObjectURL(s)}function Bj(){console.log(&quot;B64GLTF exists, loading model&quot;);let n=zj(window.B64GLTF);eo.getState().setModelUrl(n,ul.REPLACE)}async function EI(n){var i;const e=gl.getState();e.setHasAnimation(!1),e.setIsPlaying(!1),e.setSelectedAnimation(&quot;No Animation&quot;),(i=bi.current)==null||i.clear(),eo.getState().translation=null,Oc.getState().clearTreeData();const t=Zs.current;if(!t){console.warn(&quot;No scene found&quot;);return}if(t.removeFromParent(),Sc.current)for(let r of Sc.current.keys()){let s=Sc.current.get(r);s&amp;&amp;s.clear()}await wI(n,!1)}async function cR(n){var h,f;console.log(&quot;Received scene update message from server&quot;);let e=n.scene();if(!e){console.error(&quot;No scene object found in the message&quot;);return}let t=e.operation(),i=e.currentFile();if(!i){console.error(&quot;No file object found in the message&quot;);return}let r=i.filedataArray();if(!r){console.error(&quot;No filedata found in the file object&quot;);return}let s=i.compressed(),o;s?(console.log(&quot;Decompressing received GLB data...&quot;),o=I6(r)):o=r;const l=new Blob([o],{type:&quot;model/gltf-binary&quot;}),u=URL.createObjectURL(l);if(t==ul.REPLACE)await EI(u);else if(t==ul.REMOVE)console.error(&quot;Currently unsupported operation&quot;,t);else if(t==ul.ADD){let p=(f=(h=n.package_())==null?void 0:h.mesh())==null?void 0:f.unpack();p?await vG(p):await wI(u,!0)}else console.error(&quot;Unknown operation type: &quot;,t)}const yl=Eo(n=&gt;({name:null,setName:e=&gt;n(()=&gt;({name:e})),faceIndex:null,setFaceIndex:e=&gt;n(()=&gt;({faceIndex:e})),clickCoordinate:null,setClickCoordinate:e=&gt;n(()=&gt;({clickCoordinate:e})),jsonData:null,setJsonData:e=&gt;n(()=&gt;({jsonData:e})),isJsonViewVisible:!1,setIsJsonViewVisible:e=&gt;n(()=&gt;({isJsonViewVisible:e})),show_info_box:!1,toggle:()=&gt;n(e=&gt;({show_info_box:!e.show_info_box}))}));async function uR(n){var e,t;if(n.meshInfo()&amp;&amp;((e=n.meshInfo())!=null&amp;&amp;e.jsonData())){const i=(t=n.meshInfo())==null?void 0:t.jsonData();if(!i){console.error(&quot;No JSON data found in the message&quot;);return}const r=JSON.parse(i);yl.getState().setJsonData(r)}else yl.getState().setJsonData(null)}function Di(n){if(typeof n==&quot;string&quot;||typeof n==&quot;number&quot;)return&quot;&quot;+n;let e=&quot;&quot;;if(Array.isArray(n))for(let t=0,i;t&lt;n.length;t++)(i=Di(n[t]))!==&quot;&quot;&amp;&amp;(e+=(e&amp;&amp;&quot; &quot;)+i);else for(let t in n)n[t]&amp;&amp;(e+=(e&amp;&amp;&quot; &quot;)+t);return e}var Hj={value:()=&gt;{}};function Gy(){for(var n=0,e=arguments.length,t={},i;n&lt;e;++n){if(!(i=arguments[n]+&quot;&quot;)||i in t||/[\s.]/.test(i))throw new Error(&quot;illegal type: &quot;+i);t[i]=[]}return new Ig(t)}function Ig(n){this._=n}function Vj(n,e){return n.trim().split(/^|\s+/).map(function(t){var i=&quot;&quot;,r=t.indexOf(&quot;.&quot;);if(r&gt;=0&amp;&amp;(i=t.slice(r+1),t=t.slice(0,r)),t&amp;&amp;!e.hasOwnProperty(t))throw new Error(&quot;unknown type: &quot;+t);return{type:t,name:i}})}Ig.prototype=Gy.prototype={constructor:Ig,on:function(n,e){var t=this._,i=Vj(n+&quot;&quot;,t),r,s=-1,o=i.length;if(arguments.length&lt;2){for(;++s&lt;o;)if((r=(n=i[s]).type)&amp;&amp;(r=Gj(t[r],n.name)))return r;return}if(e!=null&amp;&amp;typeof e!=&quot;function&quot;)throw new Error(&quot;invalid callback: &quot;+e);for(;++s&lt;o;)if(r=(n=i[s]).type)t[r]=hR(t[r],n.name,e);else if(e==null)for(r in t)t[r]=hR(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Ig(n)},call:function(n,e){if((r=arguments.length-2)&gt;0)for(var t=new Array(r),i=0,r,s;i&lt;r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error(&quot;unknown type: &quot;+n);for(s=this._[n],i=0,r=s.length;i&lt;r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error(&quot;unknown type: &quot;+n);for(var i=this._[n],r=0,s=i.length;r&lt;s;++r)i[r].value.apply(e,t)}};function Gj(n,e){for(var t=0,i=n.length,r;t&lt;i;++t)if((r=n[t]).name===e)return r.value}function hR(n,e,t){for(var i=0,r=n.length;i&lt;r;++i)if(n[i].name===e){n[i]=Hj,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&amp;&amp;n.push({name:e,value:t}),n}var wS=&quot;http://www.w3.org/1999/xhtml&quot;;const fR={svg:&quot;http://www.w3.org/2000/svg&quot;,xhtml:wS,xlink:&quot;http://www.w3.org/1999/xlink&quot;,xml:&quot;http://www.w3.org/XML/1998/namespace&quot;,xmlns:&quot;http://www.w3.org/2000/xmlns/&quot;};function jy(n){var e=n+=&quot;&quot;,t=e.indexOf(&quot;:&quot;);return t&gt;=0&amp;&amp;(e=n.slice(0,t))!==&quot;xmlns&quot;&amp;&amp;(n=n.slice(t+1)),fR.hasOwnProperty(e)?{space:fR[e],local:n}:n}function jj(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===wS&amp;&amp;e.documentElement.namespaceURI===wS?e.createElement(n):e.createElementNS(t,n)}}function Wj(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function TI(n){var e=jy(n);return(e.local?Wj:jj)(e)}function Xj(){}function Bw(n){return n==null?Xj:function(){return this.querySelector(n)}}function qj(n){typeof n!=&quot;function&quot;&amp;&amp;(n=Bw(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r&lt;t;++r)for(var s=e[r],o=s.length,l=i[r]=new Array(o),u,h,f=0;f&lt;o;++f)(u=s[f])&amp;&amp;(h=n.call(u,u.__data__,f,s))&amp;&amp;(&quot;__data__&quot;in u&amp;&amp;(h.__data__=u.__data__),l[f]=h);return new is(i,this._parents)}function Yj(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Kj(){return[]}function MI(n){return n==null?Kj:function(){return this.querySelectorAll(n)}}function $j(n){return function(){return Yj(n.apply(this,arguments))}}function Zj(n){typeof n==&quot;function&quot;?n=$j(n):n=MI(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s&lt;t;++s)for(var o=e[s],l=o.length,u,h=0;h&lt;l;++h)(u=o[h])&amp;&amp;(i.push(n.call(u,u.__data__,h,o)),r.push(u));return new is(i,r)}function AI(n){return function(){return this.matches(n)}}function CI(n){return function(e){return e.matches(n)}}var Jj=Array.prototype.find;function Qj(n){return function(){return Jj.call(this.children,n)}}function eW(){return this.firstElementChild}function tW(n){return this.select(n==null?eW:Qj(typeof n==&quot;function&quot;?n:CI(n)))}var nW=Array.prototype.filter;function iW(){return Array.from(this.children)}function rW(n){return function(){return nW.call(this.children,n)}}function sW(n){return this.selectAll(n==null?iW:rW(typeof n==&quot;function&quot;?n:CI(n)))}function oW(n){typeof n!=&quot;function&quot;&amp;&amp;(n=AI(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r&lt;t;++r)for(var s=e[r],o=s.length,l=i[r]=[],u,h=0;h&lt;o;++h)(u=s[h])&amp;&amp;n.call(u,u.__data__,h,s)&amp;&amp;l.push(u);return new is(i,this._parents)}function RI(n){return new Array(n.length)}function aW(){return new is(this._enter||this._groups.map(RI),this._parents)}function U0(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}U0.prototype={constructor:U0,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function lW(n){return function(){return n}}function cW(n,e,t,i,r,s){for(var o=0,l,u=e.length,h=s.length;o&lt;h;++o)(l=e[o])?(l.__data__=s[o],i[o]=l):t[o]=new U0(n,s[o]);for(;o&lt;u;++o)(l=e[o])&amp;&amp;(r[o]=l)}function uW(n,e,t,i,r,s,o){var l,u,h=new Map,f=e.length,p=s.length,m=new Array(f),g;for(l=0;l&lt;f;++l)(u=e[l])&amp;&amp;(m[l]=g=o.call(u,u.__data__,l,e)+&quot;&quot;,h.has(g)?r[l]=u:h.set(g,u));for(l=0;l&lt;p;++l)g=o.call(n,s[l],l,s)+&quot;&quot;,(u=h.get(g))?(i[l]=u,u.__data__=s[l],h.delete(g)):t[l]=new U0(n,s[l]);for(l=0;l&lt;f;++l)(u=e[l])&amp;&amp;h.get(m[l])===u&amp;&amp;(r[l]=u)}function hW(n){return n.__data__}function fW(n,e){if(!arguments.length)return Array.from(this,hW);var t=e?uW:cW,i=this._parents,r=this._groups;typeof n!=&quot;function&quot;&amp;&amp;(n=lW(n));for(var s=r.length,o=new Array(s),l=new Array(s),u=new Array(s),h=0;h&lt;s;++h){var f=i[h],p=r[h],m=p.length,g=dW(n.call(f,f&amp;&amp;f.__data__,h,i)),v=g.length,x=l[h]=new Array(v),b=o[h]=new Array(v),_=u[h]=new Array(m);t(f,p,x,b,_,g,e);for(var T=0,w=0,E,R;T&lt;v;++T)if(E=x[T]){for(T&gt;=w&amp;&amp;(w=T+1);!(R=b[w])&amp;&amp;++w&lt;v;);E._next=R||null}}return o=new is(o,i),o._enter=l,o._exit=u,o}function dW(n){return typeof n==&quot;object&quot;&amp;&amp;&quot;length&quot;in n?n:Array.from(n)}function pW(){return new is(this._exit||this._groups.map(RI),this._parents)}function mW(n,e,t){var i=this.enter(),r=this,s=this.exit();return typeof n==&quot;function&quot;?(i=n(i),i&amp;&amp;(i=i.selection())):i=i.append(n+&quot;&quot;),e!=null&amp;&amp;(r=e(r),r&amp;&amp;(r=r.selection())),t==null?s.remove():t(s),i&amp;&amp;r?i.merge(r).order():r}function gW(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,s=i.length,o=Math.min(r,s),l=new Array(r),u=0;u&lt;o;++u)for(var h=t[u],f=i[u],p=h.length,m=l[u]=new Array(p),g,v=0;v&lt;p;++v)(g=h[v]||f[v])&amp;&amp;(m[v]=g);for(;u&lt;r;++u)l[u]=t[u];return new is(l,this._parents)}function yW(){for(var n=this._groups,e=-1,t=n.length;++e&lt;t;)for(var i=n[e],r=i.length-1,s=i[r],o;--r&gt;=0;)(o=i[r])&amp;&amp;(s&amp;&amp;o.compareDocumentPosition(s)^4&amp;&amp;s.parentNode.insertBefore(o,s),s=o);return this}function _W(n){n||(n=vW);function e(p,m){return p&amp;&amp;m?n(p.__data__,m.__data__):!p-!m}for(var t=this._groups,i=t.length,r=new Array(i),s=0;s&lt;i;++s){for(var o=t[s],l=o.length,u=r[s]=new Array(l),h,f=0;f&lt;l;++f)(h=o[f])&amp;&amp;(u[f]=h);u.sort(e)}return new is(r,this._parents).order()}function vW(n,e){return n&lt;e?-1:n&gt;e?1:n&gt;=e?0:NaN}function bW(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function xW(){return Array.from(this)}function SW(){for(var n=this._groups,e=0,t=n.length;e&lt;t;++e)for(var i=n[e],r=0,s=i.length;r&lt;s;++r){var o=i[r];if(o)return o}return null}function wW(){let n=0;for(const e of this)++n;return n}function EW(){return!this.node()}function TW(n){for(var e=this._groups,t=0,i=e.length;t&lt;i;++t)for(var r=e[t],s=0,o=r.length,l;s&lt;o;++s)(l=r[s])&amp;&amp;n.call(l,l.__data__,s,r);return this}function MW(n){return function(){this.removeAttribute(n)}}function AW(n){return function(){this.removeAttributeNS(n.space,n.local)}}function CW(n,e){return function(){this.setAttribute(n,e)}}function RW(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function OW(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function DW(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function NW(n,e){var t=jy(n);if(arguments.length&lt;2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?AW:MW:typeof e==&quot;function&quot;?t.local?DW:OW:t.local?RW:CW)(t,e))}function OI(n){return n.ownerDocument&amp;&amp;n.ownerDocument.defaultView||n.document&amp;&amp;n||n.defaultView}function IW(n){return function(){this.style.removeProperty(n)}}function PW(n,e,t){return function(){this.style.setProperty(n,e,t)}}function LW(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function UW(n,e,t){return arguments.length&gt;1?this.each((e==null?IW:typeof e==&quot;function&quot;?LW:PW)(n,e,t??&quot;&quot;)):dh(this.node(),n)}function dh(n,e){return n.style.getPropertyValue(e)||OI(n).getComputedStyle(n,null).getPropertyValue(e)}function kW(n){return function(){delete this[n]}}function FW(n,e){return function(){this[n]=e}}function zW(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function BW(n,e){return arguments.length&gt;1?this.each((e==null?kW:typeof e==&quot;function&quot;?zW:FW)(n,e)):this.node()[n]}function DI(n){return n.trim().split(/^|\s+/)}function Hw(n){return n.classList||new NI(n)}function NI(n){this._node=n,this._names=DI(n.getAttribute(&quot;class&quot;)||&quot;&quot;)}NI.prototype={add:function(n){var e=this._names.indexOf(n);e&lt;0&amp;&amp;(this._names.push(n),this._node.setAttribute(&quot;class&quot;,this._names.join(&quot; &quot;)))},remove:function(n){var e=this._names.indexOf(n);e&gt;=0&amp;&amp;(this._names.splice(e,1),this._node.setAttribute(&quot;class&quot;,this._names.join(&quot; &quot;)))},contains:function(n){return this._names.indexOf(n)&gt;=0}};function II(n,e){for(var t=Hw(n),i=-1,r=e.length;++i&lt;r;)t.add(e[i])}function PI(n,e){for(var t=Hw(n),i=-1,r=e.length;++i&lt;r;)t.remove(e[i])}function HW(n){return function(){II(this,n)}}function VW(n){return function(){PI(this,n)}}function GW(n,e){return function(){(e.apply(this,arguments)?II:PI)(this,n)}}function jW(n,e){var t=DI(n+&quot;&quot;);if(arguments.length&lt;2){for(var i=Hw(this.node()),r=-1,s=t.length;++r&lt;s;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof e==&quot;function&quot;?GW:e?HW:VW)(t,e))}function WW(){this.textContent=&quot;&quot;}function XW(n){return function(){this.textContent=n}}function qW(n){return function(){var e=n.apply(this,arguments);this.textContent=e??&quot;&quot;}}function YW(n){return arguments.length?this.each(n==null?WW:(typeof n==&quot;function&quot;?qW:XW)(n)):this.node().textContent}function KW(){this.innerHTML=&quot;&quot;}function $W(n){return function(){this.innerHTML=n}}function ZW(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??&quot;&quot;}}function JW(n){return arguments.length?this.each(n==null?KW:(typeof n==&quot;function&quot;?ZW:$W)(n)):this.node().innerHTML}function QW(){this.nextSibling&amp;&amp;this.parentNode.appendChild(this)}function e9(){return this.each(QW)}function t9(){this.previousSibling&amp;&amp;this.parentNode.insertBefore(this,this.parentNode.firstChild)}function n9(){return this.each(t9)}function i9(n){var e=typeof n==&quot;function&quot;?n:TI(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function r9(){return null}function s9(n,e){var t=typeof n==&quot;function&quot;?n:TI(n),i=e==null?r9:typeof e==&quot;function&quot;?e:Bw(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function o9(){var n=this.parentNode;n&amp;&amp;n.removeChild(this)}function a9(){return this.each(o9)}function l9(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function c9(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function u9(n){return this.select(n?c9:l9)}function h9(n){return arguments.length?this.property(&quot;__data__&quot;,n):this.node().__data__}function f9(n){return function(e){n.call(this,e,this.__data__)}}function d9(n){return n.trim().split(/^|\s+/).map(function(e){var t=&quot;&quot;,i=e.indexOf(&quot;.&quot;);return i&gt;=0&amp;&amp;(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function p9(n){return function(){var e=this.__on;if(e){for(var t=0,i=-1,r=e.length,s;t&lt;r;++t)s=e[t],(!n.type||s.type===n.type)&amp;&amp;s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function m9(n,e,t){return function(){var i=this.__on,r,s=f9(e);if(i){for(var o=0,l=i.length;o&lt;l;++o)if((r=i[o]).type===n.type&amp;&amp;r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function g9(n,e,t){var i=d9(n+&quot;&quot;),r,s=i.length,o;if(arguments.length&lt;2){var l=this.node().__on;if(l){for(var u=0,h=l.length,f;u&lt;h;++u)for(r=0,f=l[u];r&lt;s;++r)if((o=i[r]).type===f.type&amp;&amp;o.name===f.name)return f.value}return}for(l=e?m9:p9,r=0;r&lt;s;++r)this.each(l(i[r],e,t));return this}function LI(n,e,t){var i=OI(n),r=i.CustomEvent;typeof r==&quot;function&quot;?r=new r(e,t):(r=i.document.createEvent(&quot;Event&quot;),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function y9(n,e){return function(){return LI(this,n,e)}}function _9(n,e){return function(){return LI(this,n,e.apply(this,arguments))}}function v9(n,e){return this.each((typeof e==&quot;function&quot;?_9:y9)(n,e))}function*b9(){for(var n=this._groups,e=0,t=n.length;e&lt;t;++e)for(var i=n[e],r=0,s=i.length,o;r&lt;s;++r)(o=i[r])&amp;&amp;(yield o)}var UI=[null];function is(n,e){this._groups=n,this._parents=e}function Jd(){return new is([[document.documentElement]],UI)}function x9(){return this}is.prototype=Jd.prototype={constructor:is,select:qj,selectAll:Zj,selectChild:tW,selectChildren:sW,filter:oW,data:fW,enter:aW,exit:pW,join:mW,merge:gW,selection:x9,order:yW,sort:_W,call:bW,nodes:xW,node:SW,size:wW,empty:EW,each:TW,attr:NW,style:UW,property:BW,classed:jW,text:YW,html:JW,raise:e9,lower:n9,append:i9,insert:s9,remove:a9,clone:u9,datum:h9,on:g9,dispatch:v9,[Symbol.iterator]:b9};function $r(n){return typeof n==&quot;string&quot;?new is([[document.querySelector(n)]],[document.documentElement]):new is([[n]],UI)}function S9(n){let e;for(;e=n.sourceEvent;)n=e;return n}function js(n,e){if(n=S9(n),e===void 0&amp;&amp;(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}const w9={passive:!1},Dd={capture:!0,passive:!1};function ux(n){n.stopImmediatePropagation()}function th(n){n.preventDefault(),n.stopImmediatePropagation()}function kI(n){var e=n.document.documentElement,t=$r(n).on(&quot;dragstart.drag&quot;,th,Dd);&quot;onselectstart&quot;in e?t.on(&quot;selectstart.drag&quot;,th,Dd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect=&quot;none&quot;)}function FI(n,e){var t=n.document.documentElement,i=$r(n).on(&quot;dragstart.drag&quot;,null);e&amp;&amp;(i.on(&quot;click.drag&quot;,th,Dd),setTimeout(function(){i.on(&quot;click.drag&quot;,null)},0)),&quot;onselectstart&quot;in t?i.on(&quot;selectstart.drag&quot;,null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const tg=n=&gt;()=&gt;n;function ES(n,{sourceEvent:e,subject:t,target:i,identifier:r,active:s,x:o,y:l,dx:u,dy:h,dispatch:f}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:f}})}ES.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function E9(n){return!n.ctrlKey&amp;&amp;!n.button}function T9(){return this.parentNode}function M9(n,e){return e??{x:n.x,y:n.y}}function A9(){return navigator.maxTouchPoints||&quot;ontouchstart&quot;in this}function zI(){var n=E9,e=T9,t=M9,i=A9,r={},s=Gy(&quot;start&quot;,&quot;drag&quot;,&quot;end&quot;),o=0,l,u,h,f,p=0;function m(E){E.on(&quot;mousedown.drag&quot;,g).filter(i).on(&quot;touchstart.drag&quot;,b).on(&quot;touchmove.drag&quot;,_,w9).on(&quot;touchend.drag touchcancel.drag&quot;,T).style(&quot;touch-action&quot;,&quot;none&quot;).style(&quot;-webkit-tap-highlight-color&quot;,&quot;rgba(0,0,0,0)&quot;)}function g(E,R){if(!(f||!n.call(this,E,R))){var N=w(this,e.call(this,E,R),E,R,&quot;mouse&quot;);N&amp;&amp;($r(E.view).on(&quot;mousemove.drag&quot;,v,Dd).on(&quot;mouseup.drag&quot;,x,Dd),kI(E.view),ux(E),h=!1,l=E.clientX,u=E.clientY,N(&quot;start&quot;,E))}}function v(E){if(th(E),!h){var R=E.clientX-l,N=E.clientY-u;h=R*R+N*N&gt;p}r.mouse(&quot;drag&quot;,E)}function x(E){$r(E.view).on(&quot;mousemove.drag mouseup.drag&quot;,null),FI(E.view,h),th(E),r.mouse(&quot;end&quot;,E)}function b(E,R){if(n.call(this,E,R)){var N=E.changedTouches,A=e.call(this,E,R),D=N.length,C,O;for(C=0;C&lt;D;++C)(O=w(this,A,E,R,N[C].identifier,N[C]))&amp;&amp;(ux(E),O(&quot;start&quot;,E,N[C]))}}function _(E){var R=E.changedTouches,N=R.length,A,D;for(A=0;A&lt;N;++A)(D=r[R[A].identifier])&amp;&amp;(th(E),D(&quot;drag&quot;,E,R[A]))}function T(E){var R=E.changedTouches,N=R.length,A,D;for(f&amp;&amp;clearTimeout(f),f=setTimeout(function(){f=null},500),A=0;A&lt;N;++A)(D=r[R[A].identifier])&amp;&amp;(ux(E),D(&quot;end&quot;,E,R[A]))}function w(E,R,N,A,D,C){var O=s.copy(),L=js(C||N,R),V,Z,z;if((z=t.call(E,new ES(&quot;beforestart&quot;,{sourceEvent:N,target:m,identifier:D,active:o,x:L[0],y:L[1],dx:0,dy:0,dispatch:O}),A))!=null)return V=z.x-L[0]||0,Z=z.y-L[1]||0,function K(I,j,G){var ee=L,F;switch(I){case&quot;start&quot;:r[D]=K,F=o++;break;case&quot;end&quot;:delete r[D],--o;case&quot;drag&quot;:L=js(G||j,R),F=o;break}O.call(I,E,new ES(I,{sourceEvent:j,subject:z,target:m,identifier:D,active:F,x:L[0]+V,y:L[1]+Z,dx:L[0]-ee[0],dy:L[1]-ee[1],dispatch:O}),A)}}return m.filter=function(E){return arguments.length?(n=typeof E==&quot;function&quot;?E:tg(!!E),m):n},m.container=function(E){return arguments.length?(e=typeof E==&quot;function&quot;?E:tg(E),m):e},m.subject=function(E){return arguments.length?(t=typeof E==&quot;function&quot;?E:tg(E),m):t},m.touchable=function(E){return arguments.length?(i=typeof E==&quot;function&quot;?E:tg(!!E),m):i},m.on=function(){var E=s.on.apply(s,arguments);return E===s?m:E},m.clickDistance=function(E){return arguments.length?(p=(E=+E)*E,m):Math.sqrt(p)},m}function Vw(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function BI(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Qd(){}var Nd=.7,k0=1/Nd,nh=&quot;\\s*([+-]?\\d+)\\s*&quot;,Id=&quot;\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*&quot;,bo=&quot;\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*&quot;,C9=/^#([0-9a-f]{3,8})$/,R9=new RegExp(`^rgb\\(${nh},${nh},${nh}\\)$`),O9=new RegExp(`^rgb\\(${bo},${bo},${bo}\\)$`),D9=new RegExp(`^rgba\\(${nh},${nh},${nh},${Id}\\)$`),N9=new RegExp(`^rgba\\(${bo},${bo},${bo},${Id}\\)$`),I9=new RegExp(`^hsl\\(${Id},${bo},${bo}\\)$`),P9=new RegExp(`^hsla\\(${Id},${bo},${bo},${Id}\\)$`),dR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vw(Qd,Pd,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:pR,formatHex:pR,formatHex8:L9,formatHsl:U9,formatRgb:mR,toString:mR});function pR(){return this.rgb().formatHex()}function L9(){return this.rgb().formatHex8()}function U9(){return HI(this).formatHsl()}function mR(){return this.rgb().formatRgb()}function Pd(n){var e,t;return n=(n+&quot;&quot;).trim().toLowerCase(),(e=C9.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?gR(e):t===3?new Lr(e&gt;&gt;8&amp;15|e&gt;&gt;4&amp;240,e&gt;&gt;4&amp;15|e&amp;240,(e&amp;15)&lt;&lt;4|e&amp;15,1):t===8?ng(e&gt;&gt;24&amp;255,e&gt;&gt;16&amp;255,e&gt;&gt;8&amp;255,(e&amp;255)/255):t===4?ng(e&gt;&gt;12&amp;15|e&gt;&gt;8&amp;240,e&gt;&gt;8&amp;15|e&gt;&gt;4&amp;240,e&gt;&gt;4&amp;15|e&amp;240,((e&amp;15)&lt;&lt;4|e&amp;15)/255):null):(e=R9.exec(n))?new Lr(e[1],e[2],e[3],1):(e=O9.exec(n))?new Lr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=D9.exec(n))?ng(e[1],e[2],e[3],e[4]):(e=N9.exec(n))?ng(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=I9.exec(n))?vR(e[1],e[2]/100,e[3]/100,1):(e=P9.exec(n))?vR(e[1],e[2]/100,e[3]/100,e[4]):dR.hasOwnProperty(n)?gR(dR[n]):n===&quot;transparent&quot;?new Lr(NaN,NaN,NaN,0):null}function gR(n){return new Lr(n&gt;&gt;16&amp;255,n&gt;&gt;8&amp;255,n&amp;255,1)}function ng(n,e,t,i){return i&lt;=0&amp;&amp;(n=e=t=NaN),new Lr(n,e,t,i)}function k9(n){return n instanceof Qd||(n=Pd(n)),n?(n=n.rgb(),new Lr(n.r,n.g,n.b,n.opacity)):new Lr}function TS(n,e,t,i){return arguments.length===1?k9(n):new Lr(n,e,t,i??1)}function Lr(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}Vw(Lr,TS,BI(Qd,{brighter(n){return n=n==null?k0:Math.pow(k0,n),new Lr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Nd:Math.pow(Nd,n),new Lr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Lr(wc(this.r),wc(this.g),wc(this.b),F0(this.opacity))},displayable(){return-.5&lt;=this.r&amp;&amp;this.r&lt;255.5&amp;&amp;-.5&lt;=this.g&amp;&amp;this.g&lt;255.5&amp;&amp;-.5&lt;=this.b&amp;&amp;this.b&lt;255.5&amp;&amp;0&lt;=this.opacity&amp;&amp;this.opacity&lt;=1},hex:yR,formatHex:yR,formatHex8:F9,formatRgb:_R,toString:_R}));function yR(){return`#${yc(this.r)}${yc(this.g)}${yc(this.b)}`}function F9(){return`#${yc(this.r)}${yc(this.g)}${yc(this.b)}${yc((isNaN(this.opacity)?1:this.opacity)*255)}`}function _R(){const n=F0(this.opacity);return`${n===1?&quot;rgb(&quot;:&quot;rgba(&quot;}${wc(this.r)}, ${wc(this.g)}, ${wc(this.b)}${n===1?&quot;)&quot;:`, ${n})`}`}function F0(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function wc(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function yc(n){return n=wc(n),(n&lt;16?&quot;0&quot;:&quot;&quot;)+n.toString(16)}function vR(n,e,t,i){return i&lt;=0?n=e=t=NaN:t&lt;=0||t&gt;=1?n=e=NaN:e&lt;=0&amp;&amp;(n=NaN),new Xs(n,e,t,i)}function HI(n){if(n instanceof Xs)return new Xs(n.h,n.s,n.l,n.opacity);if(n instanceof Qd||(n=Pd(n)),!n)return new Xs;if(n instanceof Xs)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,l=s-r,u=(s+r)/2;return l?(e===s?o=(t-i)/l+(t&lt;i)*6:t===s?o=(i-e)/l+2:o=(e-t)/l+4,l/=u&lt;.5?s+r:2-s-r,o*=60):l=u&gt;0&amp;&amp;u&lt;1?0:o,new Xs(o,l,u,n.opacity)}function z9(n,e,t,i){return arguments.length===1?HI(n):new Xs(n,e,t,i??1)}function Xs(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}Vw(Xs,z9,BI(Qd,{brighter(n){return n=n==null?k0:Math.pow(k0,n),new Xs(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Nd:Math.pow(Nd,n),new Xs(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h&lt;0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t&lt;.5?t:1-t)*e,r=2*t-i;return new Lr(hx(n&gt;=240?n-240:n+120,r,i),hx(n,r,i),hx(n&lt;120?n+240:n-120,r,i),this.opacity)},clamp(){return new Xs(bR(this.h),ig(this.s),ig(this.l),F0(this.opacity))},displayable(){return(0&lt;=this.s&amp;&amp;this.s&lt;=1||isNaN(this.s))&amp;&amp;0&lt;=this.l&amp;&amp;this.l&lt;=1&amp;&amp;0&lt;=this.opacity&amp;&amp;this.opacity&lt;=1},formatHsl(){const n=F0(this.opacity);return`${n===1?&quot;hsl(&quot;:&quot;hsla(&quot;}${bR(this.h)}, ${ig(this.s)*100}%, ${ig(this.l)*100}%${n===1?&quot;)&quot;:`, ${n})`}`}}));function bR(n){return n=(n||0)%360,n&lt;0?n+360:n}function ig(n){return Math.max(0,Math.min(1,n||0))}function hx(n,e,t){return(n&lt;60?e+(t-e)*n/60:n&lt;180?t:n&lt;240?e+(t-e)*(240-n)/60:e)*255}const VI=n=&gt;()=&gt;n;function B9(n,e){return function(t){return n+t*e}}function H9(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function V9(n){return(n=+n)==1?GI:function(e,t){return t-e?H9(e,t,n):VI(isNaN(e)?t:e)}}function GI(n,e){var t=e-n;return t?B9(n,t):VI(isNaN(n)?e:n)}const xR=function n(e){var t=V9(e);function i(r,s){var o=t((r=TS(r)).r,(s=TS(s)).r),l=t(r.g,s.g),u=t(r.b,s.b),h=GI(r.opacity,s.opacity);return function(f){return r.r=o(f),r.g=l(f),r.b=u(f),r.opacity=h(f),r+&quot;&quot;}}return i.gamma=n,i}(1);function nl(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var MS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fx=new RegExp(MS.source,&quot;g&quot;);function G9(n){return function(){return n}}function j9(n){return function(e){return n(e)+&quot;&quot;}}function W9(n,e){var t=MS.lastIndex=fx.lastIndex=0,i,r,s,o=-1,l=[],u=[];for(n=n+&quot;&quot;,e=e+&quot;&quot;;(i=MS.exec(n))&amp;&amp;(r=fx.exec(e));)(s=r.index)&gt;t&amp;&amp;(s=e.slice(t,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,u.push({i:o,x:nl(i,r)})),t=fx.lastIndex;return t&lt;e.length&amp;&amp;(s=e.slice(t),l[o]?l[o]+=s:l[++o]=s),l.length&lt;2?u[0]?j9(u[0].x):G9(e):(e=u.length,function(h){for(var f=0,p;f&lt;e;++f)l[(p=u[f]).i]=p.x(h);return l.join(&quot;&quot;)})}var SR=180/Math.PI,AS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jI(n,e,t,i,r,s){var o,l,u;return(o=Math.sqrt(n*n+e*e))&amp;&amp;(n/=o,e/=o),(u=n*t+e*i)&amp;&amp;(t-=n*u,i-=e*u),(l=Math.sqrt(t*t+i*i))&amp;&amp;(t/=l,i/=l,u/=l),n*i&lt;e*t&amp;&amp;(n=-n,e=-e,u=-u,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*SR,skewX:Math.atan(u)*SR,scaleX:o,scaleY:l}}var rg;function X9(n){const e=new(typeof DOMMatrix==&quot;function&quot;?DOMMatrix:WebKitCSSMatrix)(n+&quot;&quot;);return e.isIdentity?AS:jI(e.a,e.b,e.c,e.d,e.e,e.f)}function q9(n){return n==null||(rg||(rg=document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,&quot;g&quot;)),rg.setAttribute(&quot;transform&quot;,n),!(n=rg.transform.baseVal.consolidate()))?AS:(n=n.matrix,jI(n.a,n.b,n.c,n.d,n.e,n.f))}function WI(n,e,t,i){function r(h){return h.length?h.pop()+&quot; &quot;:&quot;&quot;}function s(h,f,p,m,g,v){if(h!==p||f!==m){var x=g.push(&quot;translate(&quot;,null,e,null,t);v.push({i:x-4,x:nl(h,p)},{i:x-2,x:nl(f,m)})}else(p||m)&amp;&amp;g.push(&quot;translate(&quot;+p+e+m+t)}function o(h,f,p,m){h!==f?(h-f&gt;180?f+=360:f-h&gt;180&amp;&amp;(h+=360),m.push({i:p.push(r(p)+&quot;rotate(&quot;,null,i)-2,x:nl(h,f)})):f&amp;&amp;p.push(r(p)+&quot;rotate(&quot;+f+i)}function l(h,f,p,m){h!==f?m.push({i:p.push(r(p)+&quot;skewX(&quot;,null,i)-2,x:nl(h,f)}):f&amp;&amp;p.push(r(p)+&quot;skewX(&quot;+f+i)}function u(h,f,p,m,g,v){if(h!==p||f!==m){var x=g.push(r(g)+&quot;scale(&quot;,null,&quot;,&quot;,null,&quot;)&quot;);v.push({i:x-4,x:nl(h,p)},{i:x-2,x:nl(f,m)})}else(p!==1||m!==1)&amp;&amp;g.push(r(g)+&quot;scale(&quot;+p+&quot;,&quot;+m+&quot;)&quot;)}return function(h,f){var p=[],m=[];return h=n(h),f=n(f),s(h.translateX,h.translateY,f.translateX,f.translateY,p,m),o(h.rotate,f.rotate,p,m),l(h.skewX,f.skewX,p,m),u(h.scaleX,h.scaleY,f.scaleX,f.scaleY,p,m),h=f=null,function(g){for(var v=-1,x=m.length,b;++v&lt;x;)p[(b=m[v]).i]=b.x(g);return p.join(&quot;&quot;)}}}var Y9=WI(X9,&quot;px, &quot;,&quot;px)&quot;,&quot;deg)&quot;),K9=WI(q9,&quot;, &quot;,&quot;)&quot;,&quot;)&quot;),$9=1e-12;function wR(n){return((n=Math.exp(n))+1/n)/2}function Z9(n){return((n=Math.exp(n))-1/n)/2}function J9(n){return((n=Math.exp(2*n))-1)/(n+1)}const Q9=function n(e,t,i){function r(s,o){var l=s[0],u=s[1],h=s[2],f=o[0],p=o[1],m=o[2],g=f-l,v=p-u,x=g*g+v*v,b,_;if(x&lt;$9)_=Math.log(m/h)/e,b=function(A){return[l+A*g,u+A*v,h*Math.exp(e*A*_)]};else{var T=Math.sqrt(x),w=(m*m-h*h+i*x)/(2*h*t*T),E=(m*m-h*h-i*x)/(2*m*t*T),R=Math.log(Math.sqrt(w*w+1)-w),N=Math.log(Math.sqrt(E*E+1)-E);_=(N-R)/e,b=function(A){var D=A*_,C=wR(R),O=h/(t*T)*(C*J9(e*D+R)-Z9(R));return[l+O*g,u+O*v,h*C/wR(e*D+R)]}}return b.duration=_*1e3*e/Math.SQRT2,b}return r.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return n(o,l,u)},r}(Math.SQRT2,2,4);var ph=0,Qf=0,zf=0,XI=1e3,z0,ed,B0=0,Dc=0,Wy=0,Ld=typeof performance==&quot;object&quot;&amp;&amp;performance.now?performance:Date,qI=typeof window==&quot;object&quot;&amp;&amp;window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Gw(){return Dc||(qI(e7),Dc=Ld.now()+Wy)}function e7(){Dc=0}function H0(){this._call=this._time=this._next=null}H0.prototype=YI.prototype={constructor:H0,restart:function(n,e,t){if(typeof n!=&quot;function&quot;)throw new TypeError(&quot;callback is not a function&quot;);t=(t==null?Gw():+t)+(e==null?0:+e),!this._next&amp;&amp;ed!==this&amp;&amp;(ed?ed._next=this:z0=this,ed=this),this._call=n,this._time=t,CS()},stop:function(){this._call&amp;&amp;(this._call=null,this._time=1/0,CS())}};function YI(n,e,t){var i=new H0;return i.restart(n,e,t),i}function t7(){Gw(),++ph;for(var n=z0,e;n;)(e=Dc-n._time)&gt;=0&amp;&amp;n._call.call(void 0,e),n=n._next;--ph}function ER(){Dc=(B0=Ld.now())+Wy,ph=Qf=0;try{t7()}finally{ph=0,i7(),Dc=0}}function n7(){var n=Ld.now(),e=n-B0;e&gt;XI&amp;&amp;(Wy-=e,B0=n)}function i7(){for(var n,e=z0,t,i=1/0;e;)e._call?(i&gt;e._time&amp;&amp;(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:z0=t);ed=n,CS(i)}function CS(n){if(!ph){Qf&amp;&amp;(Qf=clearTimeout(Qf));var e=n-Dc;e&gt;24?(n&lt;1/0&amp;&amp;(Qf=setTimeout(ER,n-Ld.now()-Wy)),zf&amp;&amp;(zf=clearInterval(zf))):(zf||(B0=Ld.now(),zf=setInterval(n7,XI)),ph=1,qI(ER))}}function TR(n,e,t){var i=new H0;return e=e==null?0:+e,i.restart(r=&gt;{i.stop(),n(r+e)},e,t),i}var r7=Gy(&quot;start&quot;,&quot;end&quot;,&quot;cancel&quot;,&quot;interrupt&quot;),s7=[],KI=0,MR=1,RS=2,Pg=3,AR=4,OS=5,Lg=6;function Xy(n,e,t,i,r,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;o7(n,t,{name:e,index:i,group:r,on:r7,tween:s7,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:KI})}function jw(n,e){var t=to(n,e);if(t.state&gt;KI)throw new Error(&quot;too late; already scheduled&quot;);return t}function Ao(n,e){var t=to(n,e);if(t.state&gt;Pg)throw new Error(&quot;too late; already running&quot;);return t}function to(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error(&quot;transition not found&quot;);return t}function o7(n,e,t){var i=n.__transition,r;i[e]=t,t.timer=YI(s,0,t.time);function s(h){t.state=MR,t.timer.restart(o,t.delay,t.time),t.delay&lt;=h&amp;&amp;o(h-t.delay)}function o(h){var f,p,m,g;if(t.state!==MR)return u();for(f in i)if(g=i[f],g.name===t.name){if(g.state===Pg)return TR(o);g.state===AR?(g.state=Lg,g.timer.stop(),g.on.call(&quot;interrupt&quot;,n,n.__data__,g.index,g.group),delete i[f]):+f&lt;e&amp;&amp;(g.state=Lg,g.timer.stop(),g.on.call(&quot;cancel&quot;,n,n.__data__,g.index,g.group),delete i[f])}if(TR(function(){t.state===Pg&amp;&amp;(t.state=AR,t.timer.restart(l,t.delay,t.time),l(h))}),t.state=RS,t.on.call(&quot;start&quot;,n,n.__data__,t.index,t.group),t.state===RS){for(t.state=Pg,r=new Array(m=t.tween.length),f=0,p=-1;f&lt;m;++f)(g=t.tween[f].value.call(n,n.__data__,t.index,t.group))&amp;&amp;(r[++p]=g);r.length=p+1}}function l(h){for(var f=h&lt;t.duration?t.ease.call(null,h/t.duration):(t.timer.restart(u),t.state=OS,1),p=-1,m=r.length;++p&lt;m;)r[p].call(n,f);t.state===OS&amp;&amp;(t.on.call(&quot;end&quot;,n,n.__data__,t.index,t.group),u())}function u(){t.state=Lg,t.timer.stop(),delete i[e];for(var h in i)return;delete n.__transition}}function Ug(n,e){var t=n.__transition,i,r,s=!0,o;if(t){e=e==null?null:e+&quot;&quot;;for(o in t){if((i=t[o]).name!==e){s=!1;continue}r=i.state&gt;RS&amp;&amp;i.state&lt;OS,i.state=Lg,i.timer.stop(),i.on.call(r?&quot;interrupt&quot;:&quot;cancel&quot;,n,n.__data__,i.index,i.group),delete t[o]}s&amp;&amp;delete n.__transition}}function a7(n){return this.each(function(){Ug(this,n)})}function l7(n,e){var t,i;return function(){var r=Ao(this,n),s=r.tween;if(s!==t){i=t=s;for(var o=0,l=i.length;o&lt;l;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function c7(n,e,t){var i,r;if(typeof t!=&quot;function&quot;)throw new Error;return function(){var s=Ao(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var l={name:e,value:t},u=0,h=r.length;u&lt;h;++u)if(r[u].name===e){r[u]=l;break}u===h&amp;&amp;r.push(l)}s.tween=r}}function u7(n,e){var t=this._id;if(n+=&quot;&quot;,arguments.length&lt;2){for(var i=to(this.node(),t).tween,r=0,s=i.length,o;r&lt;s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((e==null?l7:c7)(t,n,e))}function Ww(n,e,t){var i=n._id;return n.each(function(){var r=Ao(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return to(r,i).value[e]}}function $I(n,e){var t;return(typeof e==&quot;number&quot;?nl:e instanceof Pd?xR:(t=Pd(e))?(e=t,xR):W9)(n,e)}function h7(n){return function(){this.removeAttribute(n)}}function f7(n){return function(){this.removeAttributeNS(n.space,n.local)}}function d7(n,e,t){var i,r=t+&quot;&quot;,s;return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function p7(n,e,t){var i,r=t+&quot;&quot;,s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function m7(n,e,t){var i,r,s;return function(){var o,l=t(this),u;return l==null?void this.removeAttribute(n):(o=this.getAttribute(n),u=l+&quot;&quot;,o===u?null:o===i&amp;&amp;u===r?s:(r=u,s=e(i=o,l)))}}function g7(n,e,t){var i,r,s;return function(){var o,l=t(this),u;return l==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),u=l+&quot;&quot;,o===u?null:o===i&amp;&amp;u===r?s:(r=u,s=e(i=o,l)))}}function y7(n,e){var t=jy(n),i=t===&quot;transform&quot;?K9:$I;return this.attrTween(n,typeof e==&quot;function&quot;?(t.local?g7:m7)(t,i,Ww(this,&quot;attr.&quot;+n,e)):e==null?(t.local?f7:h7)(t):(t.local?p7:d7)(t,i,e))}function _7(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function v7(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function b7(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&amp;&amp;(t=(i=s)&amp;&amp;v7(n,s)),t}return r._value=e,r}function x7(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&amp;&amp;(t=(i=s)&amp;&amp;_7(n,s)),t}return r._value=e,r}function S7(n,e){var t=&quot;attr.&quot;+n;if(arguments.length&lt;2)return(t=this.tween(t))&amp;&amp;t._value;if(e==null)return this.tween(t,null);if(typeof e!=&quot;function&quot;)throw new Error;var i=jy(n);return this.tween(t,(i.local?b7:x7)(i,e))}function w7(n,e){return function(){jw(this,n).delay=+e.apply(this,arguments)}}function E7(n,e){return e=+e,function(){jw(this,n).delay=e}}function T7(n){var e=this._id;return arguments.length?this.each((typeof n==&quot;function&quot;?w7:E7)(e,n)):to(this.node(),e).delay}function M7(n,e){return function(){Ao(this,n).duration=+e.apply(this,arguments)}}function A7(n,e){return e=+e,function(){Ao(this,n).duration=e}}function C7(n){var e=this._id;return arguments.length?this.each((typeof n==&quot;function&quot;?M7:A7)(e,n)):to(this.node(),e).duration}function R7(n,e){if(typeof e!=&quot;function&quot;)throw new Error;return function(){Ao(this,n).ease=e}}function O7(n){var e=this._id;return arguments.length?this.each(R7(e,n)):to(this.node(),e).ease}function D7(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!=&quot;function&quot;)throw new Error;Ao(this,n).ease=t}}function N7(n){if(typeof n!=&quot;function&quot;)throw new Error;return this.each(D7(this._id,n))}function I7(n){typeof n!=&quot;function&quot;&amp;&amp;(n=AI(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r&lt;t;++r)for(var s=e[r],o=s.length,l=i[r]=[],u,h=0;h&lt;o;++h)(u=s[h])&amp;&amp;n.call(u,u.__data__,h,s)&amp;&amp;l.push(u);return new ma(i,this._parents,this._name,this._id)}function P7(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=t.length,s=Math.min(i,r),o=new Array(i),l=0;l&lt;s;++l)for(var u=e[l],h=t[l],f=u.length,p=o[l]=new Array(f),m,g=0;g&lt;f;++g)(m=u[g]||h[g])&amp;&amp;(p[g]=m);for(;l&lt;i;++l)o[l]=e[l];return new ma(o,this._parents,this._name,this._id)}function L7(n){return(n+&quot;&quot;).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(&quot;.&quot;);return t&gt;=0&amp;&amp;(e=e.slice(0,t)),!e||e===&quot;start&quot;})}function U7(n,e,t){var i,r,s=L7(e)?jw:Ao;return function(){var o=s(this,n),l=o.on;l!==i&amp;&amp;(r=(i=l).copy()).on(e,t),o.on=r}}function k7(n,e){var t=this._id;return arguments.length&lt;2?to(this.node(),t).on.on(n):this.each(U7(t,n,e))}function F7(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&amp;&amp;e.removeChild(this)}}function z7(){return this.on(&quot;end.remove&quot;,F7(this._id))}function B7(n){var e=this._name,t=this._id;typeof n!=&quot;function&quot;&amp;&amp;(n=Bw(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o&lt;r;++o)for(var l=i[o],u=l.length,h=s[o]=new Array(u),f,p,m=0;m&lt;u;++m)(f=l[m])&amp;&amp;(p=n.call(f,f.__data__,m,l))&amp;&amp;(&quot;__data__&quot;in f&amp;&amp;(p.__data__=f.__data__),h[m]=p,Xy(h[m],e,t,m,h,to(f,t)));return new ma(s,this._parents,e,t)}function H7(n){var e=this._name,t=this._id;typeof n!=&quot;function&quot;&amp;&amp;(n=MI(n));for(var i=this._groups,r=i.length,s=[],o=[],l=0;l&lt;r;++l)for(var u=i[l],h=u.length,f,p=0;p&lt;h;++p)if(f=u[p]){for(var m=n.call(f,f.__data__,p,u),g,v=to(f,t),x=0,b=m.length;x&lt;b;++x)(g=m[x])&amp;&amp;Xy(g,e,t,x,m,v);s.push(m),o.push(f)}return new ma(s,o,e,t)}var V7=Jd.prototype.constructor;function G7(){return new V7(this._groups,this._parents)}function j7(n,e){var t,i,r;return function(){var s=dh(this,n),o=(this.style.removeProperty(n),dh(this,n));return s===o?null:s===t&amp;&amp;o===i?r:r=e(t=s,i=o)}}function ZI(n){return function(){this.style.removeProperty(n)}}function W7(n,e,t){var i,r=t+&quot;&quot;,s;return function(){var o=dh(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}function X7(n,e,t){var i,r,s;return function(){var o=dh(this,n),l=t(this),u=l+&quot;&quot;;return l==null&amp;&amp;(u=l=(this.style.removeProperty(n),dh(this,n))),o===u?null:o===i&amp;&amp;u===r?s:(r=u,s=e(i=o,l))}}function q7(n,e){var t,i,r,s=&quot;style.&quot;+e,o=&quot;end.&quot;+s,l;return function(){var u=Ao(this,n),h=u.on,f=u.value[s]==null?l||(l=ZI(e)):void 0;(h!==t||r!==f)&amp;&amp;(i=(t=h).copy()).on(o,r=f),u.on=i}}function Y7(n,e,t){var i=(n+=&quot;&quot;)==&quot;transform&quot;?Y9:$I;return e==null?this.styleTween(n,j7(n,i)).on(&quot;end.style.&quot;+n,ZI(n)):typeof e==&quot;function&quot;?this.styleTween(n,X7(n,i,Ww(this,&quot;style.&quot;+n,e))).each(q7(this._id,n)):this.styleTween(n,W7(n,i,e),t).on(&quot;end.style.&quot;+n,null)}function K7(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function $7(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&amp;&amp;(i=(r=o)&amp;&amp;K7(n,o,t)),i}return s._value=e,s}function Z7(n,e,t){var i=&quot;style.&quot;+(n+=&quot;&quot;);if(arguments.length&lt;2)return(i=this.tween(i))&amp;&amp;i._value;if(e==null)return this.tween(i,null);if(typeof e!=&quot;function&quot;)throw new Error;return this.tween(i,$7(n,e,t??&quot;&quot;))}function J7(n){return function(){this.textContent=n}}function Q7(n){return function(){var e=n(this);this.textContent=e??&quot;&quot;}}function eX(n){return this.tween(&quot;text&quot;,typeof n==&quot;function&quot;?Q7(Ww(this,&quot;text&quot;,n)):J7(n==null?&quot;&quot;:n+&quot;&quot;))}function tX(n){return function(e){this.textContent=n.call(this,e)}}function nX(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&amp;&amp;(e=(t=r)&amp;&amp;tX(r)),e}return i._value=n,i}function iX(n){var e=&quot;text&quot;;if(arguments.length&lt;1)return(e=this.tween(e))&amp;&amp;e._value;if(n==null)return this.tween(e,null);if(typeof n!=&quot;function&quot;)throw new Error;return this.tween(e,nX(n))}function rX(){for(var n=this._name,e=this._id,t=JI(),i=this._groups,r=i.length,s=0;s&lt;r;++s)for(var o=i[s],l=o.length,u,h=0;h&lt;l;++h)if(u=o[h]){var f=to(u,e);Xy(u,n,t,h,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ma(i,this._parents,n,t)}function sX(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--r===0&amp;&amp;s()}};t.each(function(){var h=Ao(this,i),f=h.on;f!==n&amp;&amp;(e=(n=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),h.on=e}),r===0&amp;&amp;s()})}var oX=0;function ma(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function JI(){return++oX}var $o=Jd.prototype;ma.prototype={constructor:ma,select:B7,selectAll:H7,selectChild:$o.selectChild,selectChildren:$o.selectChildren,filter:I7,merge:P7,selection:G7,transition:rX,call:$o.call,nodes:$o.nodes,node:$o.node,size:$o.size,empty:$o.empty,each:$o.each,on:k7,attr:y7,attrTween:S7,style:Y7,styleTween:Z7,text:eX,textTween:iX,remove:z7,tween:u7,delay:T7,duration:C7,ease:O7,easeVarying:N7,end:sX,[Symbol.iterator]:$o[Symbol.iterator]};function aX(n){return((n*=2)&lt;=1?n*n*n:(n-=2)*n*n+2)/2}var lX={time:null,delay:0,duration:250,ease:aX};function cX(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function uX(n){var e,t;n instanceof ma?(e=n._id,n=n._name):(e=JI(),(t=lX).time=Gw(),n=n==null?null:n+&quot;&quot;);for(var i=this._groups,r=i.length,s=0;s&lt;r;++s)for(var o=i[s],l=o.length,u,h=0;h&lt;l;++h)(u=o[h])&amp;&amp;Xy(u,n,e,h,o,t||cX(u,e));return new ma(i,this._parents,n,e)}Jd.prototype.interrupt=a7;Jd.prototype.transition=uX;const sg=n=&gt;()=&gt;n;function hX(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function aa(n,e,t){this.k=n,this.x=e,this.y=t}aa.prototype={constructor:aa,scale:function(n){return n===1?this:new aa(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&amp;e===0?this:new aa(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return&quot;translate(&quot;+this.x+&quot;,&quot;+this.y+&quot;) scale(&quot;+this.k+&quot;)&quot;}};var qy=new aa(1,0,0);QI.prototype=aa.prototype;function QI(n){for(;!n.__zoom;)if(!(n=n.parentNode))return qy;return n.__zoom}function dx(n){n.stopImmediatePropagation()}function Bf(n){n.preventDefault(),n.stopImmediatePropagation()}function fX(n){return(!n.ctrlKey||n.type===&quot;wheel&quot;)&amp;&amp;!n.button}function dX(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute(&quot;viewBox&quot;)?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function CR(){return this.__zoom||qy}function pX(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function mX(){return navigator.maxTouchPoints||&quot;ontouchstart&quot;in this}function gX(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r&gt;i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o&gt;s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function eP(){var n=fX,e=dX,t=gX,i=pX,r=mX,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Q9,h=Gy(&quot;start&quot;,&quot;zoom&quot;,&quot;end&quot;),f,p,m,g=500,v=150,x=0,b=10;function _(z){z.property(&quot;__zoom&quot;,CR).on(&quot;wheel.zoom&quot;,D,{passive:!1}).on(&quot;mousedown.zoom&quot;,C).on(&quot;dblclick.zoom&quot;,O).filter(r).on(&quot;touchstart.zoom&quot;,L).on(&quot;touchmove.zoom&quot;,V).on(&quot;touchend.zoom touchcancel.zoom&quot;,Z).style(&quot;-webkit-tap-highlight-color&quot;,&quot;rgba(0,0,0,0)&quot;)}_.transform=function(z,K,I,j){var G=z.selection?z.selection():z;G.property(&quot;__zoom&quot;,CR),z!==G?R(z,K,I,j):G.interrupt().each(function(){N(this,arguments).event(j).start().zoom(null,typeof K==&quot;function&quot;?K.apply(this,arguments):K).end()})},_.scaleBy=function(z,K,I,j){_.scaleTo(z,function(){var G=this.__zoom.k,ee=typeof K==&quot;function&quot;?K.apply(this,arguments):K;return G*ee},I,j)},_.scaleTo=function(z,K,I,j){_.transform(z,function(){var G=e.apply(this,arguments),ee=this.__zoom,F=I==null?E(G):typeof I==&quot;function&quot;?I.apply(this,arguments):I,ne=ee.invert(F),le=typeof K==&quot;function&quot;?K.apply(this,arguments):K;return t(w(T(ee,le),F,ne),G,o)},I,j)},_.translateBy=function(z,K,I,j){_.transform(z,function(){return t(this.__zoom.translate(typeof K==&quot;function&quot;?K.apply(this,arguments):K,typeof I==&quot;function&quot;?I.apply(this,arguments):I),e.apply(this,arguments),o)},null,j)},_.translateTo=function(z,K,I,j,G){_.transform(z,function(){var ee=e.apply(this,arguments),F=this.__zoom,ne=j==null?E(ee):typeof j==&quot;function&quot;?j.apply(this,arguments):j;return t(qy.translate(ne[0],ne[1]).scale(F.k).translate(typeof K==&quot;function&quot;?-K.apply(this,arguments):-K,typeof I==&quot;function&quot;?-I.apply(this,arguments):-I),ee,o)},j,G)};function T(z,K){return K=Math.max(s[0],Math.min(s[1],K)),K===z.k?z:new aa(K,z.x,z.y)}function w(z,K,I){var j=K[0]-I[0]*z.k,G=K[1]-I[1]*z.k;return j===z.x&amp;&amp;G===z.y?z:new aa(z.k,j,G)}function E(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function R(z,K,I,j){z.on(&quot;start.zoom&quot;,function(){N(this,arguments).event(j).start()}).on(&quot;interrupt.zoom end.zoom&quot;,function(){N(this,arguments).event(j).end()}).tween(&quot;zoom&quot;,function(){var G=this,ee=arguments,F=N(G,ee).event(j),ne=e.apply(G,ee),le=I==null?E(ne):typeof I==&quot;function&quot;?I.apply(G,ee):I,ce=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),ie=G.__zoom,oe=typeof K==&quot;function&quot;?K.apply(G,ee):K,ae=u(ie.invert(le).concat(ce/ie.k),oe.invert(le).concat(ce/oe.k));return function(ue){if(ue===1)ue=oe;else{var ve=ae(ue),He=ce/ve[2];ue=new aa(He,le[0]-ve[0]*He,le[1]-ve[1]*He)}F.zoom(null,ue)}})}function N(z,K,I){return!I&amp;&amp;z.__zooming||new A(z,K)}function A(z,K){this.that=z,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,K),this.taps=0}A.prototype={event:function(z){return z&amp;&amp;(this.sourceEvent=z),this},start:function(){return++this.active===1&amp;&amp;(this.that.__zooming=this,this.emit(&quot;start&quot;)),this},zoom:function(z,K){return this.mouse&amp;&amp;z!==&quot;mouse&quot;&amp;&amp;(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&amp;&amp;z!==&quot;touch&quot;&amp;&amp;(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&amp;&amp;z!==&quot;touch&quot;&amp;&amp;(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit(&quot;zoom&quot;),this},end:function(){return--this.active===0&amp;&amp;(delete this.that.__zooming,this.emit(&quot;end&quot;)),this},emit:function(z){var K=$r(this.that).datum();h.call(z,this.that,new hX(z,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:h}),K)}};function D(z,...K){if(!n.apply(this,arguments))return;var I=N(this,K).event(z),j=this.__zoom,G=Math.max(s[0],Math.min(s[1],j.k*Math.pow(2,i.apply(this,arguments)))),ee=js(z);if(I.wheel)(I.mouse[0][0]!==ee[0]||I.mouse[0][1]!==ee[1])&amp;&amp;(I.mouse[1]=j.invert(I.mouse[0]=ee)),clearTimeout(I.wheel);else{if(j.k===G)return;I.mouse=[ee,j.invert(ee)],Ug(this),I.start()}Bf(z),I.wheel=setTimeout(F,v),I.zoom(&quot;mouse&quot;,t(w(T(j,G),I.mouse[0],I.mouse[1]),I.extent,o));function F(){I.wheel=null,I.end()}}function C(z,...K){if(m||!n.apply(this,arguments))return;var I=z.currentTarget,j=N(this,K,!0).event(z),G=$r(z.view).on(&quot;mousemove.zoom&quot;,le,!0).on(&quot;mouseup.zoom&quot;,ce,!0),ee=js(z,I),F=z.clientX,ne=z.clientY;kI(z.view),dx(z),j.mouse=[ee,this.__zoom.invert(ee)],Ug(this),j.start();function le(ie){if(Bf(ie),!j.moved){var oe=ie.clientX-F,ae=ie.clientY-ne;j.moved=oe*oe+ae*ae&gt;x}j.event(ie).zoom(&quot;mouse&quot;,t(w(j.that.__zoom,j.mouse[0]=js(ie,I),j.mouse[1]),j.extent,o))}function ce(ie){G.on(&quot;mousemove.zoom mouseup.zoom&quot;,null),FI(ie.view,j.moved),Bf(ie),j.event(ie).end()}}function O(z,...K){if(n.apply(this,arguments)){var I=this.__zoom,j=js(z.changedTouches?z.changedTouches[0]:z,this),G=I.invert(j),ee=I.k*(z.shiftKey?.5:2),F=t(w(T(I,ee),j,G),e.apply(this,K),o);Bf(z),l&gt;0?$r(this).transition().duration(l).call(R,F,j,z):$r(this).call(_.transform,F,j,z)}}function L(z,...K){if(n.apply(this,arguments)){var I=z.touches,j=I.length,G=N(this,K,z.changedTouches.length===j).event(z),ee,F,ne,le;for(dx(z),F=0;F&lt;j;++F)ne=I[F],le=js(ne,this),le=[le,this.__zoom.invert(le),ne.identifier],G.touch0?!G.touch1&amp;&amp;G.touch0[2]!==le[2]&amp;&amp;(G.touch1=le,G.taps=0):(G.touch0=le,ee=!0,G.taps=1+!!f);f&amp;&amp;(f=clearTimeout(f)),ee&amp;&amp;(G.taps&lt;2&amp;&amp;(p=le[0],f=setTimeout(function(){f=null},g)),Ug(this),G.start())}}function V(z,...K){if(this.__zooming){var I=N(this,K).event(z),j=z.changedTouches,G=j.length,ee,F,ne,le;for(Bf(z),ee=0;ee&lt;G;++ee)F=j[ee],ne=js(F,this),I.touch0&amp;&amp;I.touch0[2]===F.identifier?I.touch0[0]=ne:I.touch1&amp;&amp;I.touch1[2]===F.identifier&amp;&amp;(I.touch1[0]=ne);if(F=I.that.__zoom,I.touch1){var ce=I.touch0[0],ie=I.touch0[1],oe=I.touch1[0],ae=I.touch1[1],ue=(ue=oe[0]-ce[0])*ue+(ue=oe[1]-ce[1])*ue,ve=(ve=ae[0]-ie[0])*ve+(ve=ae[1]-ie[1])*ve;F=T(F,Math.sqrt(ue/ve)),ne=[(ce[0]+oe[0])/2,(ce[1]+oe[1])/2],le=[(ie[0]+ae[0])/2,(ie[1]+ae[1])/2]}else if(I.touch0)ne=I.touch0[0],le=I.touch0[1];else return;I.zoom(&quot;touch&quot;,t(w(F,ne,le),I.extent,o))}}function Z(z,...K){if(this.__zooming){var I=N(this,K).event(z),j=z.changedTouches,G=j.length,ee,F;for(dx(z),m&amp;&amp;clearTimeout(m),m=setTimeout(function(){m=null},g),ee=0;ee&lt;G;++ee)F=j[ee],I.touch0&amp;&amp;I.touch0[2]===F.identifier?delete I.touch0:I.touch1&amp;&amp;I.touch1[2]===F.identifier&amp;&amp;delete I.touch1;if(I.touch1&amp;&amp;!I.touch0&amp;&amp;(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&amp;&amp;(F=js(F,this),Math.hypot(p[0]-F[0],p[1]-F[1])&lt;b)){var ne=$r(this).on(&quot;dblclick.zoom&quot;);ne&amp;&amp;ne.apply(this,arguments)}}}return _.wheelDelta=function(z){return arguments.length?(i=typeof z==&quot;function&quot;?z:sg(+z),_):i},_.filter=function(z){return arguments.length?(n=typeof z==&quot;function&quot;?z:sg(!!z),_):n},_.touchable=function(z){return arguments.length?(r=typeof z==&quot;function&quot;?z:sg(!!z),_):r},_.extent=function(z){return arguments.length?(e=typeof z==&quot;function&quot;?z:sg([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),_):e},_.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],_):[s[0],s[1]]},_.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(z){return arguments.length?(t=z,_):t},_.duration=function(z){return arguments.length?(l=+z,_):l},_.interpolate=function(z){return arguments.length?(u=z,_):u},_.on=function(){var z=h.on.apply(h,arguments);return z===h?_:z},_.clickDistance=function(z){return arguments.length?(x=(z=+z)*z,_):Math.sqrt(x)},_.tapDistance=function(z){return arguments.length?(b=+z,_):b},_}const wo={error001:()=&gt;&quot;[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001&quot;,error002:()=&gt;&quot;It looks like you&#x27;ve created a new nodeTypes or edgeTypes object. If this wasn&#x27;t on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.&quot;,error003:n=&gt;`Node type &quot;${n}&quot; not found. Using fallback type &quot;default&quot;.`,error004:()=&gt;&quot;The React Flow parent container needs a width and a height to render the graph.&quot;,error005:()=&gt;&quot;Only child nodes can use a parent extent.&quot;,error006:()=&gt;&quot;Can&#x27;t create edge. An edge needs a source and a target.&quot;,error007:n=&gt;`The old edge with id=${n} does not exist.`,error009:n=&gt;`Marker type &quot;${n}&quot; doesn&#x27;t exist.`,error008:(n,{id:e,sourceHandle:t,targetHandle:i})=&gt;`Couldn&#x27;t create edge for ${n} handle id: &quot;${n===&quot;source&quot;?t:i}&quot;, edge id: ${e}.`,error010:()=&gt;&quot;Handle: No node id found. Make sure to only use a Handle inside a custom Node.&quot;,error011:n=&gt;`Edge type &quot;${n}&quot; not found. Using fallback type &quot;default&quot;.`,error012:n=&gt;`Node with id &quot;${n}&quot; does not exist, it may have been removed. This can happen when a node is deleted before the &quot;onNodeClick&quot; handler is called.`,error013:(n=&quot;react&quot;)=&gt;`It seems that you haven&#x27;t loaded the styles. Please import &#x27;@xyflow/${n}/dist/style.css&#x27; or base.css to make sure everything is working properly.`,error014:()=&gt;&quot;useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.&quot;,error015:()=&gt;&quot;It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.&quot;},Ud=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tP=[&quot;Enter&quot;,&quot; &quot;,&quot;Escape&quot;];var mh;(function(n){n.Strict=&quot;strict&quot;,n.Loose=&quot;loose&quot;})(mh||(mh={}));var Ec;(function(n){n.Free=&quot;free&quot;,n.Vertical=&quot;vertical&quot;,n.Horizontal=&quot;horizontal&quot;})(Ec||(Ec={}));var kd;(function(n){n.Partial=&quot;partial&quot;,n.Full=&quot;full&quot;})(kd||(kd={}));const nP={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var al;(function(n){n.Bezier=&quot;default&quot;,n.Straight=&quot;straight&quot;,n.Step=&quot;step&quot;,n.SmoothStep=&quot;smoothstep&quot;,n.SimpleBezier=&quot;simplebezier&quot;})(al||(al={}));var V0;(function(n){n.Arrow=&quot;arrow&quot;,n.ArrowClosed=&quot;arrowclosed&quot;})(V0||(V0={}));var Mt;(function(n){n.Left=&quot;left&quot;,n.Top=&quot;top&quot;,n.Right=&quot;right&quot;,n.Bottom=&quot;bottom&quot;})(Mt||(Mt={}));const RR={[Mt.Left]:Mt.Right,[Mt.Right]:Mt.Left,[Mt.Top]:Mt.Bottom,[Mt.Bottom]:Mt.Top};function iP(n){return n===null?null:n?&quot;valid&quot;:&quot;invalid&quot;}const rP=n=&gt;&quot;id&quot;in n&amp;&amp;&quot;source&quot;in n&amp;&amp;&quot;target&quot;in n,yX=n=&gt;&quot;id&quot;in n&amp;&amp;&quot;position&quot;in n&amp;&amp;!(&quot;source&quot;in n)&amp;&amp;!(&quot;target&quot;in n),Xw=n=&gt;&quot;id&quot;in n&amp;&amp;&quot;internals&quot;in n&amp;&amp;!(&quot;source&quot;in n)&amp;&amp;!(&quot;target&quot;in n),ep=(n,e=[0,0])=&gt;{const{width:t,height:i}=ga(n),r=n.origin??e,s=t*r[0],o=i*r[1];return{x:n.position.x-s,y:n.position.y-o}},_X=(n,e={nodeOrigin:[0,0],nodeLookup:void 0})=&gt;{if(n.length===0)return{x:0,y:0,width:0,height:0};const t=n.reduce((i,r)=&gt;{const s=typeof r==&quot;string&quot;;let o=!e.nodeLookup&amp;&amp;!s?r:void 0;e.nodeLookup&amp;&amp;(o=s?e.nodeLookup.get(r):Xw(r)?r:e.nodeLookup.get(r.id));const l=o?G0(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Yy(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ky(t)},tp=(n,e={})=&gt;{if(n.size===0)return{x:0,y:0,width:0,height:0};let t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return n.forEach(i=&gt;{if(e.filter===void 0||e.filter(i)){const r=G0(i);t=Yy(t,r)}}),Ky(t)},sP=(n,e,[t,i,r]=[0,0,1],s=!1,o=!1)=&gt;{const l={...np(e,[t,i,r]),width:e.width/r,height:e.height/r},u=[];for(const h of n.values()){const{measured:f,selectable:p=!0,hidden:m=!1}=h;if(o&amp;&amp;!p||m)continue;const g=f.width??h.width??h.initialWidth??null,v=f.height??h.height??h.initialHeight??null,x=Fd(l,yh(h)),b=(g??0)*(v??0),_=s&amp;&amp;x&gt;0;(!h.internals.handleBounds||_||x&gt;=b||h.dragging)&amp;&amp;u.push(h)}return u},vX=(n,e)=&gt;{const t=new Set;return n.forEach(i=&gt;{t.add(i.id)}),e.filter(i=&gt;t.has(i.source)||t.has(i.target))};function DS(n,e){const t=new Map,i=e!=null&amp;&amp;e.nodes?new Set(e.nodes.map(r=&gt;r.id)):null;return n.forEach(r=&gt;{r.measured.width&amp;&amp;r.measured.height&amp;&amp;((e==null?void 0:e.includeHiddenNodes)||!r.hidden)&amp;&amp;(!i||i.has(r.id))&amp;&amp;t.set(r.id,r)}),t}async function NS({nodes:n,width:e,height:t,panZoom:i,minZoom:r,maxZoom:s},o){if(n.size===0)return Promise.resolve(!1);const l=tp(n),u=qw(l,e,t,(o==null?void 0:o.minZoom)??r,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await i.setViewport(u,{duration:o==null?void 0:o.duration}),Promise.resolve(!0)}function oP({nodeId:n,nextPosition:e,nodeLookup:t,nodeOrigin:i=[0,0],nodeExtent:r,onError:s}){const o=t.get(n),l=o.parentId?t.get(o.parentId):void 0,{x:u,y:h}=l?l.internals.positionAbsolute:{x:0,y:0},f=o.origin??i;let p=r;if(o.extent===&quot;parent&quot;&amp;&amp;!o.expandParent)if(!l)s==null||s(&quot;005&quot;,wo.error005());else{const g=l.measured.width,v=l.measured.height;g&amp;&amp;v&amp;&amp;(p=[[u,h],[u+g,h+v]])}else l&amp;&amp;_h(o.extent)&amp;&amp;(p=[[o.extent[0][0]+u,o.extent[0][1]+h],[o.extent[1][0]+u,o.extent[1][1]+h]]);const m=_h(p)?Nc(e,p,o.measured):e;return(o.measured.width===void 0||o.measured.height===void 0)&amp;&amp;(s==null||s(&quot;015&quot;,wo.error015())),{position:{x:m.x-u+(o.measured.width??0)*f[0],y:m.y-h+(o.measured.height??0)*f[1]},positionAbsolute:m}}async function bX({nodesToRemove:n=[],edgesToRemove:e=[],nodes:t,edges:i,onBeforeDelete:r}){const s=new Set(n.map(m=&gt;m.id)),o=[];for(const m of t){if(m.deletable===!1)continue;const g=s.has(m.id),v=!g&amp;&amp;m.parentId&amp;&amp;o.find(x=&gt;x.id===m.parentId);(g||v)&amp;&amp;o.push(m)}const l=new Set(e.map(m=&gt;m.id)),u=i.filter(m=&gt;m.deletable!==!1),f=vX(o,u);for(const m of u)l.has(m.id)&amp;&amp;!f.find(v=&gt;v.id===m.id)&amp;&amp;f.push(m);if(!r)return{edges:f,nodes:o};const p=await r({nodes:o,edges:f});return typeof p==&quot;boolean&quot;?p?{edges:f,nodes:o}:{edges:[],nodes:[]}:p}const gh=(n,e=0,t=1)=&gt;Math.min(Math.max(n,e),t),Nc=(n={x:0,y:0},e,t)=&gt;({x:gh(n.x,e[0][0],e[1][0]-((t==null?void 0:t.width)??0)),y:gh(n.y,e[0][1],e[1][1]-((t==null?void 0:t.height)??0))});function aP(n,e,t){const{width:i,height:r}=ga(t),{x:s,y:o}=t.internals.positionAbsolute;return Nc(n,[[s,o],[s+i,o+r]],e)}const OR=(n,e,t)=&gt;n&lt;e?gh(Math.abs(n-e),1,e)/e:n&gt;t?-gh(Math.abs(n-t),1,e)/e:0,lP=(n,e,t=15,i=40)=&gt;{const r=OR(n.x,i,e.width-i)*t,s=OR(n.y,i,e.height-i)*t;return[r,s]},Yy=(n,e)=&gt;({x:Math.min(n.x,e.x),y:Math.min(n.y,e.y),x2:Math.max(n.x2,e.x2),y2:Math.max(n.y2,e.y2)}),IS=({x:n,y:e,width:t,height:i})=&gt;({x:n,y:e,x2:n+t,y2:e+i}),Ky=({x:n,y:e,x2:t,y2:i})=&gt;({x:n,y:e,width:t-n,height:i-e}),yh=(n,e=[0,0])=&gt;{var r,s;const{x:t,y:i}=Xw(n)?n.internals.positionAbsolute:ep(n,e);return{x:t,y:i,width:((r=n.measured)==null?void 0:r.width)??n.width??n.initialWidth??0,height:((s=n.measured)==null?void 0:s.height)??n.height??n.initialHeight??0}},G0=(n,e=[0,0])=&gt;{var r,s;const{x:t,y:i}=Xw(n)?n.internals.positionAbsolute:ep(n,e);return{x:t,y:i,x2:t+(((r=n.measured)==null?void 0:r.width)??n.width??n.initialWidth??0),y2:i+(((s=n.measured)==null?void 0:s.height)??n.height??n.initialHeight??0)}},cP=(n,e)=&gt;Ky(Yy(IS(n),IS(e))),Fd=(n,e)=&gt;{const t=Math.max(0,Math.min(n.x+n.width,e.x+e.width)-Math.max(n.x,e.x)),i=Math.max(0,Math.min(n.y+n.height,e.y+e.height)-Math.max(n.y,e.y));return Math.ceil(t*i)},DR=n=&gt;Ys(n.width)&amp;&amp;Ys(n.height)&amp;&amp;Ys(n.x)&amp;&amp;Ys(n.y),Ys=n=&gt;!isNaN(n)&amp;&amp;isFinite(n),xX=(n,e)=&gt;{},$y=(n,e=[1,1])=&gt;({x:e[0]*Math.round(n.x/e[0]),y:e[1]*Math.round(n.y/e[1])}),np=({x:n,y:e},[t,i,r],s=!1,o=[1,1])=&gt;{const l={x:(n-t)/r,y:(e-i)/r};return s?$y(l,o):l},uP=({x:n,y:e},[t,i,r])=&gt;({x:n*r+t,y:e*r+i}),qw=(n,e,t,i,r,s)=&gt;{const o=e/(n.width*(1+s)),l=t/(n.height*(1+s)),u=Math.min(o,l),h=gh(u,i,r),f=n.x+n.width/2,p=n.y+n.height/2,m=e/2-f*h,g=t/2-p*h;return{x:m,y:g,zoom:h}},j0=()=&gt;{var n;return typeof navigator&lt;&quot;u&quot;&amp;&amp;((n=navigator==null?void 0:navigator.userAgent)==null?void 0:n.indexOf(&quot;Mac&quot;))&gt;=0};function _h(n){return n!==void 0&amp;&amp;n!==&quot;parent&quot;}function ga(n){var e,t;return{width:((e=n.measured)==null?void 0:e.width)??n.width??n.initialWidth??0,height:((t=n.measured)==null?void 0:t.height)??n.height??n.initialHeight??0}}function hP(n){var e,t;return(((e=n.measured)==null?void 0:e.width)??n.width??n.initialWidth)!==void 0&amp;&amp;(((t=n.measured)==null?void 0:t.height)??n.height??n.initialHeight)!==void 0}function fP(n,e={width:0,height:0},t,i,r){const s={...n},o=i.get(t);if(o){const l=o.origin||r;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function NR(n,e){if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function fd(n,{snapGrid:e=[0,0],snapToGrid:t=!1,transform:i,containerBounds:r}){const{x:s,y:o}=ha(n),l=np({x:s-((r==null?void 0:r.left)??0),y:o-((r==null?void 0:r.top)??0)},i),{x:u,y:h}=t?$y(l,e):l;return{xSnapped:u,ySnapped:h,...l}}const Zy=n=&gt;({width:n.offsetWidth,height:n.offsetHeight}),dP=n=&gt;{var e;return((e=n==null?void 0:n.getRootNode)==null?void 0:e.call(n))||(window==null?void 0:window.document)},SX=[&quot;INPUT&quot;,&quot;SELECT&quot;,&quot;TEXTAREA&quot;];function PS(n){var i,r;const e=((r=(i=n.composedPath)==null?void 0:i.call(n))==null?void 0:r[0])||n.target;return(e==null?void 0:e.nodeType)!==1?!1:SX.includes(e.nodeName)||e.hasAttribute(&quot;contenteditable&quot;)||!!e.closest(&quot;.nokey&quot;)}const pP=n=&gt;&quot;clientX&quot;in n,ha=(n,e)=&gt;{var s,o;const t=pP(n),i=t?n.clientX:(s=n.touches)==null?void 0:s[0].clientX,r=t?n.clientY:(o=n.touches)==null?void 0:o[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},IR=(n,e,t,i,r)=&gt;{const s=e.querySelectorAll(`.${n}`);return!s||!s.length?null:Array.from(s).map(o=&gt;{const l=o.getBoundingClientRect();return{id:o.getAttribute(&quot;data-handleid&quot;),type:n,nodeId:r,position:o.getAttribute(&quot;data-handlepos&quot;),x:(l.left-t.left)/i,y:(l.top-t.top)/i,...Zy(o)}})};function mP({sourceX:n,sourceY:e,targetX:t,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=n*.125+r*.375+o*.375+t*.125,h=e*.125+s*.375+l*.375+i*.125,f=Math.abs(u-n),p=Math.abs(h-e);return[u,h,f,p]}function og(n,e){return n&gt;=0?.5*n:e*25*Math.sqrt(-n)}function PR({pos:n,x1:e,y1:t,x2:i,y2:r,c:s}){switch(n){case Mt.Left:return[e-og(e-i,s),t];case Mt.Right:return[e+og(i-e,s),t];case Mt.Top:return[e,t-og(t-r,s)];case Mt.Bottom:return[e,t+og(r-t,s)]}}function gP({sourceX:n,sourceY:e,sourcePosition:t=Mt.Bottom,targetX:i,targetY:r,targetPosition:s=Mt.Top,curvature:o=.25}){const[l,u]=PR({pos:t,x1:n,y1:e,x2:i,y2:r,c:o}),[h,f]=PR({pos:s,x1:i,y1:r,x2:n,y2:e,c:o}),[p,m,g,v]=mP({sourceX:n,sourceY:e,targetX:i,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:h,targetControlY:f});return[`M${n},${e} C${l},${u} ${h},${f} ${i},${r}`,p,m,g,v]}function yP({sourceX:n,sourceY:e,targetX:t,targetY:i}){const r=Math.abs(t-n)/2,s=t&lt;n?t+r:t-r,o=Math.abs(i-e)/2,l=i&lt;e?i+o:i-o;return[s,l,r,o]}function wX({sourceNode:n,targetNode:e,selected:t=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const s=t||e.selected||n.selected,o=Math.max(n.internals.z||0,e.internals.z||0,1e3);return i+(s?o:0)}function EX({sourceNode:n,targetNode:e,width:t,height:i,transform:r}){const s=Yy(G0(n),G0(e));s.x===s.x2&amp;&amp;(s.x2+=1),s.y===s.y2&amp;&amp;(s.y2+=1);const o={x:-r[0]/r[2],y:-r[1]/r[2],width:t/r[2],height:i/r[2]};return Fd(o,Ky(s))&gt;0}const TX=({source:n,sourceHandle:e,target:t,targetHandle:i})=&gt;`xy-edge__${n}${e||&quot;&quot;}-${t}${i||&quot;&quot;}`,MX=(n,e)=&gt;e.some(t=&gt;t.source===n.source&amp;&amp;t.target===n.target&amp;&amp;(t.sourceHandle===n.sourceHandle||!t.sourceHandle&amp;&amp;!n.sourceHandle)&amp;&amp;(t.targetHandle===n.targetHandle||!t.targetHandle&amp;&amp;!n.targetHandle)),_P=(n,e)=&gt;{if(!n.source||!n.target)return e;let t;return rP(n)?t={...n}:t={...n,id:TX(n)},MX(t,e)?e:(t.sourceHandle===null&amp;&amp;delete t.sourceHandle,t.targetHandle===null&amp;&amp;delete t.targetHandle,e.concat(t))};function vP({sourceX:n,sourceY:e,targetX:t,targetY:i}){const[r,s,o,l]=yP({sourceX:n,sourceY:e,targetX:t,targetY:i});return[`M ${n},${e}L ${t},${i}`,r,s,o,l]}const LR={[Mt.Left]:{x:-1,y:0},[Mt.Right]:{x:1,y:0},[Mt.Top]:{x:0,y:-1},[Mt.Bottom]:{x:0,y:1}},AX=({source:n,sourcePosition:e=Mt.Bottom,target:t})=&gt;e===Mt.Left||e===Mt.Right?n.x&lt;t.x?{x:1,y:0}:{x:-1,y:0}:n.y&lt;t.y?{x:0,y:1}:{x:0,y:-1},UR=(n,e)=&gt;Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2));function CX({source:n,sourcePosition:e=Mt.Bottom,target:t,targetPosition:i=Mt.Top,center:r,offset:s}){const o=LR[e],l=LR[i],u={x:n.x+o.x*s,y:n.y+o.y*s},h={x:t.x+l.x*s,y:t.y+l.y*s},f=AX({source:u,sourcePosition:e,target:h}),p=f.x!==0?&quot;x&quot;:&quot;y&quot;,m=f[p];let g=[],v,x;const b={x:0,y:0},_={x:0,y:0},[T,w,E,R]=yP({sourceX:n.x,sourceY:n.y,targetX:t.x,targetY:t.y});if(o[p]*l[p]===-1){v=r.x??T,x=r.y??w;const A=[{x:v,y:u.y},{x:v,y:h.y}],D=[{x:u.x,y:x},{x:h.x,y:x}];o[p]===m?g=p===&quot;x&quot;?A:D:g=p===&quot;x&quot;?D:A}else{const A=[{x:u.x,y:h.y}],D=[{x:h.x,y:u.y}];if(p===&quot;x&quot;?g=o.x===m?D:A:g=o.y===m?A:D,e===i){const Z=Math.abs(n[p]-t[p]);if(Z&lt;=s){const z=Math.min(s-1,s-Z);o[p]===m?b[p]=(u[p]&gt;n[p]?-1:1)*z:_[p]=(h[p]&gt;t[p]?-1:1)*z}}if(e!==i){const Z=p===&quot;x&quot;?&quot;y&quot;:&quot;x&quot;,z=o[p]===l[Z],K=u[Z]&gt;h[Z],I=u[Z]&lt;h[Z];(o[p]===1&amp;&amp;(!z&amp;&amp;K||z&amp;&amp;I)||o[p]!==1&amp;&amp;(!z&amp;&amp;I||z&amp;&amp;K))&amp;&amp;(g=p===&quot;x&quot;?A:D)}const C={x:u.x+b.x,y:u.y+b.y},O={x:h.x+_.x,y:h.y+_.y},L=Math.max(Math.abs(C.x-g[0].x),Math.abs(O.x-g[0].x)),V=Math.max(Math.abs(C.y-g[0].y),Math.abs(O.y-g[0].y));L&gt;=V?(v=(C.x+O.x)/2,x=g[0].y):(v=g[0].x,x=(C.y+O.y)/2)}return[[n,{x:u.x+b.x,y:u.y+b.y},...g,{x:h.x+_.x,y:h.y+_.y},t],v,x,E,R]}function RX(n,e,t,i){const r=Math.min(UR(n,e)/2,UR(e,t)/2,i),{x:s,y:o}=e;if(n.x===s&amp;&amp;s===t.x||n.y===o&amp;&amp;o===t.y)return`L${s} ${o}`;if(n.y===o){const h=n.x&lt;t.x?-1:1,f=n.y&lt;t.y?1:-1;return`L ${s+r*h},${o}Q ${s},${o} ${s},${o+r*f}`}const l=n.x&lt;t.x?1:-1,u=n.y&lt;t.y?-1:1;return`L ${s},${o+r*u}Q ${s},${o} ${s+r*l},${o}`}function LS({sourceX:n,sourceY:e,sourcePosition:t=Mt.Bottom,targetX:i,targetY:r,targetPosition:s=Mt.Top,borderRadius:o=5,centerX:l,centerY:u,offset:h=20}){const[f,p,m,g,v]=CX({source:{x:n,y:e},sourcePosition:t,target:{x:i,y:r},targetPosition:s,center:{x:l,y:u},offset:h});return[f.reduce((b,_,T)=&gt;{let w=&quot;&quot;;return T&gt;0&amp;&amp;T&lt;f.length-1?w=RX(f[T-1],_,f[T+1],o):w=`${T===0?&quot;M&quot;:&quot;L&quot;}${_.x} ${_.y}`,b+=w,b},&quot;&quot;),p,m,g,v]}function kR(n){var e;return n&amp;&amp;!!(n.internals.handleBounds||(e=n.handles)!=null&amp;&amp;e.length)&amp;&amp;!!(n.measured.width||n.width||n.initialWidth)}function OX(n){var p;const{sourceNode:e,targetNode:t}=n;if(!kR(e)||!kR(t))return null;const i=e.internals.handleBounds||FR(e.handles),r=t.internals.handleBounds||FR(t.handles),s=zR((i==null?void 0:i.source)??[],n.sourceHandle),o=zR(n.connectionMode===mh.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),n.targetHandle);if(!s||!o)return(p=n.onError)==null||p.call(n,&quot;008&quot;,wo.error008(s?&quot;target&quot;:&quot;source&quot;,{id:n.id,sourceHandle:n.sourceHandle,targetHandle:n.targetHandle})),null;const l=(s==null?void 0:s.position)||Mt.Bottom,u=(o==null?void 0:o.position)||Mt.Top,h=zd(e,s,l),f=zd(t,o,u);return{sourceX:h.x,sourceY:h.y,targetX:f.x,targetY:f.y,sourcePosition:l,targetPosition:u}}function FR(n){if(!n)return null;const e=[],t=[];for(const i of n)i.width=i.width??1,i.height=i.height??1,i.type===&quot;source&quot;?e.push(i):i.type===&quot;target&quot;&amp;&amp;t.push(i);return{source:e,target:t}}function zd(n,e,t=Mt.Left,i=!1){const r=((e==null?void 0:e.x)??0)+n.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+n.internals.positionAbsolute.y,{width:o,height:l}=e??ga(n);if(i)return{x:r+o/2,y:s+l/2};switch((e==null?void 0:e.position)??t){case Mt.Top:return{x:r+o/2,y:s};case Mt.Right:return{x:r+o,y:s+l/2};case Mt.Bottom:return{x:r+o/2,y:s+l};case Mt.Left:return{x:r,y:s+l/2}}}function zR(n,e){return n&amp;&amp;(e?n.find(t=&gt;t.id===e):n[0])||null}function US(n,e){return n?typeof n==&quot;string&quot;?n:`${e?`${e}__`:&quot;&quot;}${Object.keys(n).sort().map(i=&gt;`${i}=${n[i]}`).join(&quot;&amp;&quot;)}`:&quot;&quot;}function DX(n,{id:e,defaultColor:t,defaultMarkerStart:i,defaultMarkerEnd:r}){const s=new Set;return n.reduce((o,l)=&gt;([l.markerStart||i,l.markerEnd||r].forEach(u=&gt;{if(u&amp;&amp;typeof u==&quot;object&quot;){const h=US(u,e);s.has(h)||(o.push({id:h,color:u.color||t,...u}),s.add(h))}}),o),[]).sort((o,l)=&gt;o.id.localeCompare(l.id))}const Yw={nodeOrigin:[0,0],nodeExtent:Ud,elevateNodesOnSelect:!0,defaults:{}},NX={...Yw,checkEquality:!0};function Kw(n,e){const t={...n};for(const i in e)e[i]!==void 0&amp;&amp;(t[i]=e[i]);return t}function IX(n,e,t){const i=Kw(Yw,t);for(const r of n.values())if(r.parentId)$w(r,n,e,i);else{const s=ep(r,i.nodeOrigin),o=_h(r.extent)?r.extent:i.nodeExtent,l=Nc(s,o,ga(r));r.internals.positionAbsolute=l}}function kS(n,e,t,i){var l,u;const r=Kw(NX,i),s=new Map(e),o=r!=null&amp;&amp;r.elevateNodesOnSelect?1e3:0;e.clear(),t.clear();for(const h of n){let f=s.get(h.id);if(r.checkEquality&amp;&amp;h===(f==null?void 0:f.internals.userNode))e.set(h.id,f);else{const p=ep(h,r.nodeOrigin),m=_h(h.extent)?h.extent:r.nodeExtent,g=Nc(p,m,ga(h));f={...r.defaults,...h,measured:{width:(l=h.measured)==null?void 0:l.width,height:(u=h.measured)==null?void 0:u.height},internals:{positionAbsolute:g,handleBounds:h.measured?f==null?void 0:f.internals.handleBounds:void 0,z:bP(h,o),userNode:h}},e.set(h.id,f)}h.parentId&amp;&amp;$w(f,e,t,i)}}function PX(n,e){if(!n.parentId)return;const t=e.get(n.parentId);t?t.set(n.id,n):e.set(n.parentId,new Map([[n.id,n]]))}function $w(n,e,t,i){const{elevateNodesOnSelect:r,nodeOrigin:s,nodeExtent:o}=Kw(Yw,i),l=n.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}PX(n,t);const h=r?1e3:0,{x:f,y:p,z:m}=LX(n,u,s,o,h),{positionAbsolute:g}=n.internals,v=f!==g.x||p!==g.y;(v||m!==n.internals.z)&amp;&amp;e.set(n.id,{...n,internals:{...n.internals,positionAbsolute:v?{x:f,y:p}:g,z:m}})}function bP(n,e){return(Ys(n.zIndex)?n.zIndex:0)+(n.selected?e:0)}function LX(n,e,t,i,r){const{x:s,y:o}=e.internals.positionAbsolute,l=ga(n),u=ep(n,t),h=_h(n.extent)?Nc(u,n.extent,l):u;let f=Nc({x:s+h.x,y:o+h.y},i,l);n.extent===&quot;parent&quot;&amp;&amp;(f=aP(f,l,e));const p=bP(n,r),m=e.internals.z??0;return{x:f.x,y:f.y,z:m&gt;p?m:p}}function Zw(n,e,t,i=[0,0]){var o;const r=[],s=new Map;for(const l of n){const u=e.get(l.parentId);if(!u)continue;const h=((o=s.get(l.parentId))==null?void 0:o.expandedRect)??yh(u),f=cP(h,l.rect);s.set(l.parentId,{expandedRect:f,parent:u})}return s.size&gt;0&amp;&amp;s.forEach(({expandedRect:l,parent:u},h)=&gt;{var w;const f=u.internals.positionAbsolute,p=ga(u),m=u.origin??i,g=l.x&lt;f.x?Math.round(Math.abs(f.x-l.x)):0,v=l.y&lt;f.y?Math.round(Math.abs(f.y-l.y)):0,x=Math.max(p.width,Math.round(l.width)),b=Math.max(p.height,Math.round(l.height)),_=(x-p.width)*m[0],T=(b-p.height)*m[1];(g&gt;0||v&gt;0||_||T)&amp;&amp;(r.push({id:h,type:&quot;position&quot;,position:{x:u.position.x-g+_,y:u.position.y-v+T}}),(w=t.get(h))==null||w.forEach(E=&gt;{n.some(R=&gt;R.id===E.id)||r.push({id:E.id,type:&quot;position&quot;,position:{x:E.position.x+g,y:E.position.y+v}})})),(p.width&lt;l.width||p.height&lt;l.height||g||v)&amp;&amp;r.push({id:h,type:&quot;dimensions&quot;,setAttributes:!0,dimensions:{width:x+(g?m[0]*g-_:0),height:b+(v?m[1]*v-T:0)}})}),r}function UX(n,e,t,i,r,s){const o=i==null?void 0:i.querySelector(&quot;.xyflow__viewport&quot;);let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],h=window.getComputedStyle(o),{m22:f}=new window.DOMMatrixReadOnly(h.transform),p=[];for(const m of n.values()){const g=e.get(m.id);if(!g)continue;if(g.hidden){e.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),l=!0;continue}const v=Zy(m.nodeElement),x=g.measured.width!==v.width||g.measured.height!==v.height;if(!!(v.width&amp;&amp;v.height&amp;&amp;(x||!g.internals.handleBounds||m.force))){const _=m.nodeElement.getBoundingClientRect(),T=_h(g.extent)?g.extent:s;let{positionAbsolute:w}=g.internals;g.parentId&amp;&amp;g.extent===&quot;parent&quot;?w=aP(w,v,e.get(g.parentId)):T&amp;&amp;(w=Nc(w,T,v));const E={...g,measured:v,internals:{...g.internals,positionAbsolute:w,handleBounds:{source:IR(&quot;source&quot;,m.nodeElement,_,f,g.id),target:IR(&quot;target&quot;,m.nodeElement,_,f,g.id)}}};e.set(g.id,E),g.parentId&amp;&amp;$w(E,e,t,{nodeOrigin:r}),l=!0,x&amp;&amp;(u.push({id:g.id,type:&quot;dimensions&quot;,dimensions:v}),g.expandParent&amp;&amp;g.parentId&amp;&amp;p.push({id:g.id,parentId:g.parentId,rect:yh(E,r)}))}}if(p.length&gt;0){const m=Zw(p,e,t,r);u.push(...m)}return{changes:u,updatedInternals:l}}async function kX({delta:n,panZoom:e,transform:t,translateExtent:i,width:r,height:s}){if(!e||!n.x&amp;&amp;!n.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:t[0]+n.x,y:t[1]+n.y,zoom:t[2]},[[0,0],[r,s]],i),l=!!o&amp;&amp;(o.x!==t[0]||o.y!==t[1]||o.k!==t[2]);return Promise.resolve(l)}function BR(n,e,t,i,r,s){let o=r;const l=i.get(o)||new Map;i.set(o,l.set(t,e)),o=`${r}-${n}`;const u=i.get(o)||new Map;if(i.set(o,u.set(t,e)),s){o=`${r}-${n}-${s}`;const h=i.get(o)||new Map;i.set(o,h.set(t,e))}}function xP(n,e,t){n.clear(),e.clear();for(const i of t){const{source:r,target:s,sourceHandle:o=null,targetHandle:l=null}=i,u={edgeId:i.id,source:r,target:s,sourceHandle:o,targetHandle:l},h=`${r}-${o}--${s}-${l}`,f=`${s}-${l}--${r}-${o}`;BR(&quot;source&quot;,u,f,n,r,o),BR(&quot;target&quot;,u,h,n,s,l),e.set(i.id,i)}}function SP(n,e){if(!n.parentId)return!1;const t=e.get(n.parentId);return t?t.selected?!0:SP(t,e):!1}function HR(n,e,t){var r;let i=n;do{if((r=i==null?void 0:i.matches)!=null&amp;&amp;r.call(i,e))return!0;if(i===t)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function FX(n,e,t,i){const r=new Map;for(const[s,o]of n)if((o.selected||o.id===i)&amp;&amp;(!o.parentId||!SP(o,n))&amp;&amp;(o.draggable||e&amp;&amp;typeof o.draggable&gt;&quot;u&quot;)){const l=n.get(s);l&amp;&amp;r.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:t.x-l.internals.positionAbsolute.x,y:t.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return r}function px({nodeId:n,dragItems:e,nodeLookup:t,dragging:i=!0}){var o,l,u;const r=[];for(const[h,f]of e){const p=(o=t.get(h))==null?void 0:o.internals.userNode;p&amp;&amp;r.push({...p,position:f.position,dragging:i})}if(!n)return[r[0],r];const s=(l=t.get(n))==null?void 0:l.internals.userNode;return[s?{...s,position:((u=e.get(n))==null?void 0:u.position)||s.position,dragging:i}:r[0],r]}function zX({onNodeMouseDown:n,getStoreItems:e,onDragStart:t,onDrag:i,onDragStop:r}){let s={x:null,y:null},o=0,l=new Map,u=!1,h={x:0,y:0},f=null,p=!1,m=null,g=!1;function v({noDragClassName:b,handleSelector:_,domNode:T,isSelectable:w,nodeId:E,nodeClickDistance:R=0}){m=$r(T);function N({x:O,y:L},V){const{nodeLookup:Z,nodeExtent:z,snapGrid:K,snapToGrid:I,nodeOrigin:j,onNodeDrag:G,onSelectionDrag:ee,onError:F,updateNodePositions:ne}=e();s={x:O,y:L};let le=!1,ce={x:0,y:0,x2:0,y2:0};if(l.size&gt;1&amp;&amp;z){const ie=tp(l);ce=IS(ie)}for(const[ie,oe]of l){if(!Z.has(ie))continue;let ae={x:O-oe.distance.x,y:L-oe.distance.y};I&amp;&amp;(ae=$y(ae,K));let ue=[[z[0][0],z[0][1]],[z[1][0],z[1][1]]];if(l.size&gt;1&amp;&amp;z&amp;&amp;!oe.extent){const{positionAbsolute:Xe}=oe.internals,lt=Xe.x-ce.x+z[0][0],We=Xe.x+oe.measured.width-ce.x2+z[1][0],Ye=Xe.y-ce.y+z[0][1],Q=Xe.y+oe.measured.height-ce.y2+z[1][1];ue=[[lt,Ye],[We,Q]]}const{position:ve,positionAbsolute:He}=oP({nodeId:ie,nextPosition:ae,nodeLookup:Z,nodeExtent:ue,nodeOrigin:j,onError:F});le=le||oe.position.x!==ve.x||oe.position.y!==ve.y,oe.position=ve,oe.internals.positionAbsolute=He}if(le&amp;&amp;(ne(l,!0),V&amp;&amp;(i||G||!E&amp;&amp;ee))){const[ie,oe]=px({nodeId:E,dragItems:l,nodeLookup:Z});i==null||i(V,l,ie,oe),G==null||G(V,ie,oe),E||ee==null||ee(V,oe)}}async function A(){if(!f)return;const{transform:O,panBy:L,autoPanSpeed:V,autoPanOnNodeDrag:Z}=e();if(!Z){u=!1,cancelAnimationFrame(o);return}const[z,K]=lP(h,f,V);(z!==0||K!==0)&amp;&amp;(s.x=(s.x??0)-z/O[2],s.y=(s.y??0)-K/O[2],await L({x:z,y:K})&amp;&amp;N(s,null)),o=requestAnimationFrame(A)}function D(O){var le;const{nodeLookup:L,multiSelectionActive:V,nodesDraggable:Z,transform:z,snapGrid:K,snapToGrid:I,selectNodesOnDrag:j,onNodeDragStart:G,onSelectionDragStart:ee,unselectNodesAndEdges:F}=e();p=!0,(!j||!w)&amp;&amp;!V&amp;&amp;E&amp;&amp;((le=L.get(E))!=null&amp;&amp;le.selected||F()),w&amp;&amp;j&amp;&amp;E&amp;&amp;(n==null||n(E));const ne=fd(O.sourceEvent,{transform:z,snapGrid:K,snapToGrid:I,containerBounds:f});if(s=ne,l=FX(L,Z,ne,E),l.size&gt;0&amp;&amp;(t||G||!E&amp;&amp;ee)){const[ce,ie]=px({nodeId:E,dragItems:l,nodeLookup:L});t==null||t(O.sourceEvent,l,ce,ie),G==null||G(O.sourceEvent,ce,ie),E||ee==null||ee(O.sourceEvent,ie)}}const C=zI().clickDistance(R).on(&quot;start&quot;,O=&gt;{const{domNode:L,nodeDragThreshold:V,transform:Z,snapGrid:z,snapToGrid:K}=e();f=(L==null?void 0:L.getBoundingClientRect())||null,g=!1,V===0&amp;&amp;D(O),s=fd(O.sourceEvent,{transform:Z,snapGrid:z,snapToGrid:K,containerBounds:f}),h=ha(O.sourceEvent,f)}).on(&quot;drag&quot;,O=&gt;{const{autoPanOnNodeDrag:L,transform:V,snapGrid:Z,snapToGrid:z,nodeDragThreshold:K,nodeLookup:I}=e(),j=fd(O.sourceEvent,{transform:V,snapGrid:Z,snapToGrid:z,containerBounds:f});if((O.sourceEvent.type===&quot;touchmove&quot;&amp;&amp;O.sourceEvent.touches.length&gt;1||E&amp;&amp;!I.has(E))&amp;&amp;(g=!0),!g){if(!u&amp;&amp;L&amp;&amp;p&amp;&amp;(u=!0,A()),!p){const G=j.xSnapped-(s.x??0),ee=j.ySnapped-(s.y??0);Math.sqrt(G*G+ee*ee)&gt;K&amp;&amp;D(O)}(s.x!==j.xSnapped||s.y!==j.ySnapped)&amp;&amp;l&amp;&amp;p&amp;&amp;(h=ha(O.sourceEvent,f),N(j,O.sourceEvent))}}).on(&quot;end&quot;,O=&gt;{if(!(!p||g)&amp;&amp;(u=!1,p=!1,cancelAnimationFrame(o),l.size&gt;0)){const{nodeLookup:L,updateNodePositions:V,onNodeDragStop:Z,onSelectionDragStop:z}=e();if(V(l,!1),r||Z||!E&amp;&amp;z){const[K,I]=px({nodeId:E,dragItems:l,nodeLookup:L,dragging:!1});r==null||r(O.sourceEvent,l,K,I),Z==null||Z(O.sourceEvent,K,I),E||z==null||z(O.sourceEvent,I)}}}).filter(O=&gt;{const L=O.target;return!O.button&amp;&amp;(!b||!HR(L,`.${b}`,T))&amp;&amp;(!_||HR(L,_,T))});m.call(C)}function x(){m==null||m.on(&quot;.drag&quot;,null)}return{update:v,destroy:x}}function BX(n,e,t){const i=[],r={x:n.x-t,y:n.y-t,width:t*2,height:t*2};for(const s of e.values())Fd(r,yh(s))&gt;0&amp;&amp;i.push(s);return i}const HX=250;function VX(n,e,t,i){var l,u;let r=[],s=1/0;const o=BX(n,t,e+HX);for(const h of o){const f=[...((l=h.internals.handleBounds)==null?void 0:l.source)??[],...((u=h.internals.handleBounds)==null?void 0:u.target)??[]];for(const p of f){if(i.nodeId===p.nodeId&amp;&amp;i.type===p.type&amp;&amp;i.id===p.id)continue;const{x:m,y:g}=zd(h,p,p.position,!0),v=Math.sqrt(Math.pow(m-n.x,2)+Math.pow(g-n.y,2));v&gt;e||(v&lt;s?(r=[{...p,x:m,y:g}],s=v):v===s&amp;&amp;r.push({...p,x:m,y:g}))}}if(!r.length)return null;if(r.length&gt;1){const h=i.type===&quot;source&quot;?&quot;target&quot;:&quot;source&quot;;return r.find(f=&gt;f.type===h)??r[0]}return r[0]}function wP(n,e,t,i,r,s=!1){var h,f,p;const o=i.get(n);if(!o)return null;const l=r===&quot;strict&quot;?(h=o.internals.handleBounds)==null?void 0:h[e]:[...((f=o.internals.handleBounds)==null?void 0:f.source)??[],...((p=o.internals.handleBounds)==null?void 0:p.target)??[]],u=(t?l==null?void 0:l.find(m=&gt;m.id===t):l==null?void 0:l[0])??null;return u&amp;&amp;s?{...u,...zd(o,u,u.position,!0)}:u}function EP(n,e){return n||(e!=null&amp;&amp;e.classList.contains(&quot;target&quot;)?&quot;target&quot;:e!=null&amp;&amp;e.classList.contains(&quot;source&quot;)?&quot;source&quot;:null)}function GX(n,e){let t=null;return e?t=!0:n&amp;&amp;!e&amp;&amp;(t=!1),t}const TP=()=&gt;!0;function jX(n,{connectionMode:e,connectionRadius:t,handleId:i,nodeId:r,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:h,autoPanOnConnect:f,flowId:p,panBy:m,cancelConnection:g,onConnectStart:v,onConnect:x,onConnectEnd:b,isValidConnection:_=TP,onReconnectEnd:T,updateConnection:w,getTransform:E,getFromHandle:R,autoPanSpeed:N}){const A=dP(n.target);let D=0,C;const{x:O,y:L}=ha(n),V=A==null?void 0:A.elementFromPoint(O,L),Z=EP(s,V),z=l==null?void 0:l.getBoundingClientRect();if(!z||!Z)return;const K=wP(r,Z,i,u,e);if(!K)return;let I=ha(n,z),j=!1,G=null,ee=!1,F=null;function ne(){if(!f||!z)return;const[He,Xe]=lP(I,z,N);m({x:He,y:Xe}),D=requestAnimationFrame(ne)}const le={...K,nodeId:r,type:Z,position:K.position},ce=u.get(r),oe={inProgress:!0,isValid:null,from:zd(ce,le,Mt.Left,!0),fromHandle:le,fromPosition:le.position,fromNode:ce,to:I,toHandle:null,toPosition:RR[le.position],toNode:null};w(oe);let ae=oe;v==null||v(n,{nodeId:r,handleId:i,handleType:Z});function ue(He){if(!R()||!le){ve(He);return}const Xe=E();I=ha(He,z),C=VX(np(I,Xe,!1,[1,1]),t,u,le),j||(ne(),j=!0);const lt=MP(He,{handle:C,connectionMode:e,fromNodeId:r,fromHandleId:i,fromType:o?&quot;target&quot;:&quot;source&quot;,isValidConnection:_,doc:A,lib:h,flowId:p,nodeLookup:u});F=lt.handleDomNode,G=lt.connection,ee=GX(!!C,lt.isValid);const We={...ae,isValid:ee,to:C&amp;&amp;ee?uP({x:C.x,y:C.y},Xe):I,toHandle:lt.toHandle,toPosition:ee&amp;&amp;lt.toHandle?lt.toHandle.position:RR[le.position],toNode:lt.toHandle?u.get(lt.toHandle.nodeId):null};ee&amp;&amp;C&amp;&amp;ae.toHandle&amp;&amp;We.toHandle&amp;&amp;ae.toHandle.type===We.toHandle.type&amp;&amp;ae.toHandle.nodeId===We.toHandle.nodeId&amp;&amp;ae.toHandle.id===We.toHandle.id&amp;&amp;ae.to.x===We.to.x&amp;&amp;ae.to.y===We.to.y||(w(We),ae=We)}function ve(He){(C||F)&amp;&amp;G&amp;&amp;ee&amp;&amp;(x==null||x(G));const{inProgress:Xe,...lt}=ae,We={...lt,toPosition:ae.toHandle?ae.toPosition:null};b==null||b(He,We),s&amp;&amp;(T==null||T(He,We)),g(),cancelAnimationFrame(D),j=!1,ee=!1,G=null,F=null,A.removeEventListener(&quot;mousemove&quot;,ue),A.removeEventListener(&quot;mouseup&quot;,ve),A.removeEventListener(&quot;touchmove&quot;,ue),A.removeEventListener(&quot;touchend&quot;,ve)}A.addEventListener(&quot;mousemove&quot;,ue),A.addEventListener(&quot;mouseup&quot;,ve),A.addEventListener(&quot;touchmove&quot;,ue),A.addEventListener(&quot;touchend&quot;,ve)}function MP(n,{handle:e,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:h=TP,nodeLookup:f}){const p=s===&quot;target&quot;,m=e?o.querySelector(`.${l}-flow__handle[data-id=&quot;${u}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}&quot;]`):null,{x:g,y:v}=ha(n),x=o.elementFromPoint(g,v),b=x!=null&amp;&amp;x.classList.contains(`${l}-flow__handle`)?x:m,_={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const T=EP(void 0,b),w=b.getAttribute(&quot;data-nodeid&quot;),E=b.getAttribute(&quot;data-handleid&quot;),R=b.classList.contains(&quot;connectable&quot;),N=b.classList.contains(&quot;connectableend&quot;);if(!w||!T)return _;const A={source:p?w:i,sourceHandle:p?E:r,target:p?i:w,targetHandle:p?r:E};_.connection=A;const C=R&amp;&amp;N&amp;&amp;(t===mh.Strict?p&amp;&amp;T===&quot;source&quot;||!p&amp;&amp;T===&quot;target&quot;:w!==i||E!==r);_.isValid=C&amp;&amp;h(A),_.toHandle=wP(w,T,E,f,t,!1)}return _}const FS={onPointerDown:jX,isValid:MP};function WX({domNode:n,panZoom:e,getTransform:t,getViewScale:i}){const r=$r(n);function s({translateExtent:l,width:u,height:h,zoomStep:f=10,pannable:p=!0,zoomable:m=!0,inversePan:g=!1}){const v=w=&gt;{const E=t();if(w.sourceEvent.type!==&quot;wheel&quot;||!e)return;const R=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*f,N=E[2]*Math.pow(2,R);e.scaleTo(N)};let x=[0,0];const b=w=&gt;{(w.sourceEvent.type===&quot;mousedown&quot;||w.sourceEvent.type===&quot;touchstart&quot;)&amp;&amp;(x=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY])},_=w=&gt;{const E=t();if(w.sourceEvent.type!==&quot;mousemove&quot;&amp;&amp;w.sourceEvent.type!==&quot;touchmove&quot;||!e)return;const R=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY],N=[R[0]-x[0],R[1]-x[1]];x=R;const A=i()*Math.max(E[2],Math.log(E[2]))*(g?-1:1),D={x:E[0]-N[0]*A,y:E[1]-N[1]*A},C=[[0,0],[u,h]];e.setViewportConstrained({x:D.x,y:D.y,zoom:E[2]},C,l)},T=eP().on(&quot;start&quot;,b).on(&quot;zoom&quot;,p?_:null).on(&quot;zoom.wheel&quot;,m?v:null);r.call(T,{})}function o(){r.on(&quot;zoom&quot;,null)}return{update:s,destroy:o,pointer:js}}const XX=(n,e)=&gt;n.x!==e.x||n.y!==e.y||n.zoom!==e.k,Jy=n=&gt;({x:n.x,y:n.y,zoom:n.k}),mx=({x:n,y:e,zoom:t})=&gt;qy.translate(n,e).scale(t),$u=(n,e)=&gt;n.target.closest(`.${e}`),AP=(n,e)=&gt;e===2&amp;&amp;Array.isArray(n)&amp;&amp;n.includes(2),gx=(n,e=0,t=()=&gt;{})=&gt;{const i=typeof e==&quot;number&quot;&amp;&amp;e&gt;0;return i||t(),i?n.transition().duration(e).on(&quot;end&quot;,t):n},CP=n=&gt;{const e=n.ctrlKey&amp;&amp;j0()?10:1;return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*e};function qX({zoomPanValues:n,noWheelClassName:e,d3Selection:t,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:h}){return f=&gt;{if($u(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const p=t.property(&quot;__zoom&quot;).k||1;if(f.ctrlKey&amp;&amp;o){const b=js(f),_=CP(f),T=p*Math.pow(2,_);i.scaleTo(t,T,b,f);return}const m=f.deltaMode===1?20:1;let g=r===Ec.Vertical?0:f.deltaX*m,v=r===Ec.Horizontal?0:f.deltaY*m;!j0()&amp;&amp;f.shiftKey&amp;&amp;r!==Ec.Vertical&amp;&amp;(g=f.deltaY*m,v=0),i.translateBy(t,-(g/p)*s,-(v/p)*s,{internal:!0});const x=Jy(t.property(&quot;__zoom&quot;));clearTimeout(n.panScrollTimeout),n.isPanScrolling||(n.isPanScrolling=!0,l==null||l(f,x)),n.isPanScrolling&amp;&amp;(u==null||u(f,x),n.panScrollTimeout=setTimeout(()=&gt;{h==null||h(f,x),n.isPanScrolling=!1},150))}}function YX({noWheelClassName:n,preventScrolling:e,d3ZoomHandler:t}){return function(i,r){if(!e&amp;&amp;i.type===&quot;wheel&quot;&amp;&amp;!i.ctrlKey||$u(i,n))return null;i.preventDefault(),t.call(this,i,r)}}function KX({zoomPanValues:n,onDraggingChange:e,onPanZoomStart:t}){return i=&gt;{var s,o,l;if((s=i.sourceEvent)!=null&amp;&amp;s.internal)return;const r=Jy(i.transform);n.mouseButton=((o=i.sourceEvent)==null?void 0:o.button)||0,n.isZoomingOrPanning=!0,n.prevViewport=r,((l=i.sourceEvent)==null?void 0:l.type)===&quot;mousedown&quot;&amp;&amp;e(!0),t&amp;&amp;(t==null||t(i.sourceEvent,r))}}function $X({zoomPanValues:n,panOnDrag:e,onPaneContextMenu:t,onTransformChange:i,onPanZoom:r}){return s=&gt;{var o,l;n.usedRightMouseButton=!!(t&amp;&amp;AP(e,n.mouseButton??0)),(o=s.sourceEvent)!=null&amp;&amp;o.sync||i([s.transform.x,s.transform.y,s.transform.k]),r&amp;&amp;!((l=s.sourceEvent)!=null&amp;&amp;l.internal)&amp;&amp;(r==null||r(s.sourceEvent,Jy(s.transform)))}}function ZX({zoomPanValues:n,panOnDrag:e,panOnScroll:t,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:s}){return o=&gt;{var l;if(!((l=o.sourceEvent)!=null&amp;&amp;l.internal)&amp;&amp;(n.isZoomingOrPanning=!1,s&amp;&amp;AP(e,n.mouseButton??0)&amp;&amp;!n.usedRightMouseButton&amp;&amp;o.sourceEvent&amp;&amp;s(o.sourceEvent),n.usedRightMouseButton=!1,i(!1),r&amp;&amp;XX(n.prevViewport,o.transform))){const u=Jy(o.transform);n.prevViewport=u,clearTimeout(n.timerId),n.timerId=setTimeout(()=&gt;{r==null||r(o.sourceEvent,u)},t?150:0)}}}function JX({zoomActivationKeyPressed:n,zoomOnScroll:e,zoomOnPinch:t,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:h}){return f=&gt;{var v;const p=n||e,m=t&amp;&amp;f.ctrlKey;if(f.button===1&amp;&amp;f.type===&quot;mousedown&quot;&amp;&amp;($u(f,`${h}-flow__node`)||$u(f,`${h}-flow__edge`)))return!0;if(!i&amp;&amp;!p&amp;&amp;!r&amp;&amp;!s&amp;&amp;!t||o||$u(f,l)&amp;&amp;f.type===&quot;wheel&quot;||$u(f,u)&amp;&amp;(f.type!==&quot;wheel&quot;||r&amp;&amp;f.type===&quot;wheel&quot;&amp;&amp;!n)||!t&amp;&amp;f.ctrlKey&amp;&amp;f.type===&quot;wheel&quot;)return!1;if(!t&amp;&amp;f.type===&quot;touchstart&quot;&amp;&amp;((v=f.touches)==null?void 0:v.length)&gt;1)return f.preventDefault(),!1;if(!p&amp;&amp;!r&amp;&amp;!m&amp;&amp;f.type===&quot;wheel&quot;||!i&amp;&amp;(f.type===&quot;mousedown&quot;||f.type===&quot;touchstart&quot;)||Array.isArray(i)&amp;&amp;!i.includes(f.button)&amp;&amp;f.type===&quot;mousedown&quot;)return!1;const g=Array.isArray(i)&amp;&amp;i.includes(f.button)||!f.button||f.button&lt;=1;return(!f.ctrlKey||f.type===&quot;wheel&quot;)&amp;&amp;g}}function QX({domNode:n,minZoom:e,maxZoom:t,paneClickDistance:i,translateExtent:r,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:h}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=n.getBoundingClientRect(),m=eP().clickDistance(!Ys(i)||i&lt;0?0:i).scaleExtent([e,t]).translateExtent(r),g=$r(n).call(m);w({x:s.x,y:s.y,zoom:gh(s.zoom,e,t)},[[0,0],[p.width,p.height]],r);const v=g.on(&quot;wheel.zoom&quot;),x=g.on(&quot;dblclick.zoom&quot;);m.wheelDelta(CP);function b(V,Z){return g?new Promise(z=&gt;{m==null||m.transform(gx(g,Z==null?void 0:Z.duration,()=&gt;z(!0)),V)}):Promise.resolve(!1)}function _({noWheelClassName:V,noPanClassName:Z,onPaneContextMenu:z,userSelectionActive:K,panOnScroll:I,panOnDrag:j,panOnScrollMode:G,panOnScrollSpeed:ee,preventScrolling:F,zoomOnPinch:ne,zoomOnScroll:le,zoomOnDoubleClick:ce,zoomActivationKeyPressed:ie,lib:oe,onTransformChange:ae}){K&amp;&amp;!f.isZoomingOrPanning&amp;&amp;T();const ve=I&amp;&amp;!ie&amp;&amp;!K?qX({zoomPanValues:f,noWheelClassName:V,d3Selection:g,d3Zoom:m,panOnScrollMode:G,panOnScrollSpeed:ee,zoomOnPinch:ne,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):YX({noWheelClassName:V,preventScrolling:F,d3ZoomHandler:v});if(g.on(&quot;wheel.zoom&quot;,ve,{passive:!1}),!K){const Xe=KX({zoomPanValues:f,onDraggingChange:h,onPanZoomStart:l});m.on(&quot;start&quot;,Xe);const lt=$X({zoomPanValues:f,panOnDrag:j,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:ae});m.on(&quot;zoom&quot;,lt);const We=ZX({zoomPanValues:f,panOnDrag:j,panOnScroll:I,onPaneContextMenu:z,onPanZoomEnd:u,onDraggingChange:h});m.on(&quot;end&quot;,We)}const He=JX({zoomActivationKeyPressed:ie,panOnDrag:j,zoomOnScroll:le,panOnScroll:I,zoomOnDoubleClick:ce,zoomOnPinch:ne,userSelectionActive:K,noPanClassName:Z,noWheelClassName:V,lib:oe});m.filter(He),ce?g.on(&quot;dblclick.zoom&quot;,x):g.on(&quot;dblclick.zoom&quot;,null)}function T(){m.on(&quot;zoom&quot;,null)}async function w(V,Z,z){const K=mx(V),I=m==null?void 0:m.constrain()(K,Z,z);return I&amp;&amp;await b(I),new Promise(j=&gt;j(I))}async function E(V,Z){const z=mx(V);return await b(z,Z),new Promise(K=&gt;K(z))}function R(V){if(g){const Z=mx(V),z=g.property(&quot;__zoom&quot;);(z.k!==V.zoom||z.x!==V.x||z.y!==V.y)&amp;&amp;(m==null||m.transform(g,Z,null,{sync:!0}))}}function N(){const V=g?QI(g.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function A(V,Z){return g?new Promise(z=&gt;{m==null||m.scaleTo(gx(g,Z==null?void 0:Z.duration,()=&gt;z(!0)),V)}):Promise.resolve(!1)}function D(V,Z){return g?new Promise(z=&gt;{m==null||m.scaleBy(gx(g,Z==null?void 0:Z.duration,()=&gt;z(!0)),V)}):Promise.resolve(!1)}function C(V){m==null||m.scaleExtent(V)}function O(V){m==null||m.translateExtent(V)}function L(V){const Z=!Ys(V)||V&lt;0?0:V;m==null||m.clickDistance(Z)}return{update:_,destroy:T,setViewport:E,setViewportConstrained:w,getViewport:N,scaleTo:A,scaleBy:D,setScaleExtent:C,setTranslateExtent:O,syncViewport:R,setClickDistance:L}}var dd;(function(n){n.Line=&quot;line&quot;,n.Handle=&quot;handle&quot;})(dd||(dd={}));function eq({width:n,prevWidth:e,height:t,prevHeight:i,affectsX:r,affectsY:s}){const o=n-e,l=t-i,u=[o&gt;0?1:o&lt;0?-1:0,l&gt;0?1:l&lt;0?-1:0];return o&amp;&amp;r&amp;&amp;(u[0]=u[0]*-1),l&amp;&amp;s&amp;&amp;(u[1]=u[1]*-1),u}function tq(n){const e=n.includes(&quot;right&quot;)||n.includes(&quot;left&quot;),t=n.includes(&quot;bottom&quot;)||n.includes(&quot;top&quot;),i=n.includes(&quot;left&quot;),r=n.includes(&quot;top&quot;);return{isHorizontal:e,isVertical:t,affectsX:i,affectsY:r}}function Ka(n,e){return Math.max(0,e-n)}function $a(n,e){return Math.max(0,n-e)}function ag(n,e,t){return Math.max(0,e-n,n-t)}function VR(n,e){return n?!e:e}function nq(n,e,t,i,r,s,o,l){let{affectsX:u,affectsY:h}=e;const{isHorizontal:f,isVertical:p}=e,m=f&amp;&amp;p,{xSnapped:g,ySnapped:v}=t,{minWidth:x,maxWidth:b,minHeight:_,maxHeight:T}=i,{x:w,y:E,width:R,height:N,aspectRatio:A}=n;let D=Math.floor(f?g-n.pointerX:0),C=Math.floor(p?v-n.pointerY:0);const O=R+(u?-D:D),L=N+(h?-C:C),V=-s[0]*R,Z=-s[1]*N;let z=ag(O,x,b),K=ag(L,_,T);if(o){let G=0,ee=0;u&amp;&amp;D&lt;0?G=Ka(w+D+V,o[0][0]):!u&amp;&amp;D&gt;0&amp;&amp;(G=$a(w+O+V,o[1][0])),h&amp;&amp;C&lt;0?ee=Ka(E+C+Z,o[0][1]):!h&amp;&amp;C&gt;0&amp;&amp;(ee=$a(E+L+Z,o[1][1])),z=Math.max(z,G),K=Math.max(K,ee)}if(l){let G=0,ee=0;u&amp;&amp;D&gt;0?G=$a(w+D,l[0][0]):!u&amp;&amp;D&lt;0&amp;&amp;(G=Ka(w+O,l[1][0])),h&amp;&amp;C&gt;0?ee=$a(E+C,l[0][1]):!h&amp;&amp;C&lt;0&amp;&amp;(ee=Ka(E+L,l[1][1])),z=Math.max(z,G),K=Math.max(K,ee)}if(r){if(f){const G=ag(O/A,_,T)*A;if(z=Math.max(z,G),o){let ee=0;!u&amp;&amp;!h||u&amp;&amp;!h&amp;&amp;m?ee=$a(E+Z+O/A,o[1][1])*A:ee=Ka(E+Z+(u?D:-D)/A,o[0][1])*A,z=Math.max(z,ee)}if(l){let ee=0;!u&amp;&amp;!h||u&amp;&amp;!h&amp;&amp;m?ee=Ka(E+O/A,l[1][1])*A:ee=$a(E+(u?D:-D)/A,l[0][1])*A,z=Math.max(z,ee)}}if(p){const G=ag(L*A,x,b)/A;if(K=Math.max(K,G),o){let ee=0;!u&amp;&amp;!h||h&amp;&amp;!u&amp;&amp;m?ee=$a(w+L*A+V,o[1][0])/A:ee=Ka(w+(h?C:-C)*A+V,o[0][0])/A,K=Math.max(K,ee)}if(l){let ee=0;!u&amp;&amp;!h||h&amp;&amp;!u&amp;&amp;m?ee=Ka(w+L*A,l[1][0])/A:ee=$a(w+(h?C:-C)*A,l[0][0])/A,K=Math.max(K,ee)}}}C=C+(C&lt;0?K:-K),D=D+(D&lt;0?z:-z),r&amp;&amp;(m?O&gt;L*A?C=(VR(u,h)?-D:D)/A:D=(VR(u,h)?-C:C)*A:f?(C=D/A,h=u):(D=C*A,u=h));const I=u?w+D:w,j=h?E+C:E;return{width:R+(u?-D:D),height:N+(h?-C:C),x:s[0]*D*(u?-1:1)+I,y:s[1]*C*(h?-1:1)+j}}const RP={width:0,height:0,x:0,y:0},iq={...RP,pointerX:0,pointerY:0,aspectRatio:1};function rq(n){return[[0,0],[n.measured.width,n.measured.height]]}function sq(n,e,t){const i=e.position.x+n.position.x,r=e.position.y+n.position.y,s=n.measured.width??0,o=n.measured.height??0,l=t[0]*s,u=t[1]*o;return[[i-l,r-u],[i+s-l,r+o-u]]}function oq({domNode:n,nodeId:e,getStoreItems:t,onChange:i,onEnd:r}){const s=$r(n);function o({controlPosition:u,boundaries:h,keepAspectRatio:f,onResizeStart:p,onResize:m,onResizeEnd:g,shouldResize:v}){let x={...RP},b={...iq};const _=tq(u);let T,w=null,E=[],R,N,A;const D=zI().on(&quot;start&quot;,C=&gt;{const{nodeLookup:O,transform:L,snapGrid:V,snapToGrid:Z,nodeOrigin:z,paneDomNode:K}=t();if(T=O.get(e),!T)return;w=(K==null?void 0:K.getBoundingClientRect())??null;const{xSnapped:I,ySnapped:j}=fd(C.sourceEvent,{transform:L,snapGrid:V,snapToGrid:Z,containerBounds:w});x={width:T.measured.width??0,height:T.measured.height??0,x:T.position.x??0,y:T.position.y??0},b={...x,pointerX:I,pointerY:j,aspectRatio:x.width/x.height},R=void 0,T.parentId&amp;&amp;(T.extent===&quot;parent&quot;||T.expandParent)&amp;&amp;(R=O.get(T.parentId),N=R&amp;&amp;T.extent===&quot;parent&quot;?rq(R):void 0),E=[],A=void 0;for(const[G,ee]of O)if(ee.parentId===e&amp;&amp;(E.push({id:G,position:{...ee.position},extent:ee.extent}),ee.extent===&quot;parent&quot;||ee.expandParent)){const F=sq(ee,T,ee.origin??z);A?A=[[Math.min(F[0][0],A[0][0]),Math.min(F[0][1],A[0][1])],[Math.max(F[1][0],A[1][0]),Math.max(F[1][1],A[1][1])]]:A=F}p==null||p(C,{...x})}).on(&quot;drag&quot;,C=&gt;{const{transform:O,snapGrid:L,snapToGrid:V,nodeOrigin:Z}=t(),z=fd(C.sourceEvent,{transform:O,snapGrid:L,snapToGrid:V,containerBounds:w}),K=[];if(!T)return;const{x:I,y:j,width:G,height:ee}=x,F={},ne=T.origin??Z,{width:le,height:ce,x:ie,y:oe}=nq(b,_,z,h,f,ne,N,A),ae=le!==G,ue=ce!==ee,ve=ie!==I&amp;&amp;ae,He=oe!==j&amp;&amp;ue;if(!ve&amp;&amp;!He&amp;&amp;!ae&amp;&amp;!ue)return;if((ve||He||ne[0]===1||ne[1]===1)&amp;&amp;(F.x=ve?ie:x.x,F.y=He?oe:x.y,x.x=F.x,x.y=F.y,E.length&gt;0)){const Ye=ie-I,Q=oe-j;for(const Ve of E)Ve.position={x:Ve.position.x-Ye+ne[0]*(le-G),y:Ve.position.y-Q+ne[1]*(ce-ee)},K.push(Ve)}if((ae||ue)&amp;&amp;(F.width=ae?le:x.width,F.height=ue?ce:x.height,x.width=F.width,x.height=F.height),R&amp;&amp;T.expandParent){const Ye=ne[0]*(F.width??0);F.x&amp;&amp;F.x&lt;Ye&amp;&amp;(x.x=Ye,b.x=b.x-(F.x-Ye));const Q=ne[1]*(F.height??0);F.y&amp;&amp;F.y&lt;Q&amp;&amp;(x.y=Q,b.y=b.y-(F.y-Q))}const Xe=eq({width:x.width,prevWidth:G,height:x.height,prevHeight:ee,affectsX:_.affectsX,affectsY:_.affectsY}),lt={...x,direction:Xe};(v==null?void 0:v(C,lt))!==!1&amp;&amp;(m==null||m(C,lt),i(F,K))}).on(&quot;end&quot;,C=&gt;{g==null||g(C,{...x}),r==null||r()});s.call(D)}function l(){s.on(&quot;.drag&quot;,null)}return{update:o,destroy:l}}var yx={exports:{}},_x={},vx={exports:{}},bx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GR;function aq(){if(GR)return bx;GR=1;var n=Lc();function e(p,m){return p===m&amp;&amp;(p!==0||1/p===1/m)||p!==p&amp;&amp;m!==m}var t=typeof Object.is==&quot;function&quot;?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,o=n.useDebugValue;function l(p,m){var g=m(),v=i({inst:{value:g,getSnapshot:m}}),x=v[0].inst,b=v[1];return s(function(){x.value=g,x.getSnapshot=m,u(x)&amp;&amp;b({inst:x})},[p,g,m]),r(function(){return u(x)&amp;&amp;b({inst:x}),p(function(){u(x)&amp;&amp;b({inst:x})})},[p]),o(g),g}function u(p){var m=p.getSnapshot;p=p.value;try{var g=m();return!t(p,g)}catch{return!0}}function h(p,m){return m()}var f=typeof window&gt;&quot;u&quot;||typeof window.document&gt;&quot;u&quot;||typeof window.document.createElement&gt;&quot;u&quot;?h:l;return bx.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,bx}var jR;function OP(){return jR||(jR=1,vx.exports=aq()),vx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WR;function lq(){if(WR)return _x;WR=1;var n=Lc(),e=OP();function t(h,f){return h===f&amp;&amp;(h!==0||1/h===1/f)||h!==h&amp;&amp;f!==f}var i=typeof Object.is==&quot;function&quot;?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,o=n.useEffect,l=n.useMemo,u=n.useDebugValue;return _x.useSyncExternalStoreWithSelector=function(h,f,p,m,g){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=l(function(){function _(N){if(!T){if(T=!0,w=N,N=m(N),g!==void 0&amp;&amp;x.hasValue){var A=x.value;if(g(A,N))return E=A}return E=N}if(A=E,i(w,N))return A;var D=m(N);return g!==void 0&amp;&amp;g(A,D)?(w=N,A):(w=N,E=D)}var T=!1,w,E,R=p===void 0?null:p;return[function(){return _(f())},R===null?void 0:function(){return _(R())}]},[f,p,m,g]);var b=r(h,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),u(b),b},_x}var XR;function cq(){return XR||(XR=1,yx.exports=lq()),yx.exports}var uq=cq();const hq=Z0(uq),fq={},qR=n=&gt;{let e;const t=new Set,i=(f,p)=&gt;{const m=typeof f==&quot;function&quot;?f(e):f;if(!Object.is(m,e)){const g=e;e=p??(typeof m!=&quot;object&quot;||m===null)?m:Object.assign({},e,m),t.forEach(v=&gt;v(e,g))}},r=()=&gt;e,u={setState:i,getState:r,getInitialState:()=&gt;h,subscribe:f=&gt;(t.add(f),()=&gt;t.delete(f)),destroy:()=&gt;{(fq?&quot;production&quot;:void 0)!==&quot;production&quot;&amp;&amp;console.warn(&quot;[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.&quot;),t.clear()}},h=e=n(i,r,u);return u},dq=n=&gt;n?qR(n):qR,{useDebugValue:pq}=md,{useSyncExternalStoreWithSelector:mq}=hq,gq=n=&gt;n;function DP(n,e=gq,t){const i=mq(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return pq(i),i}const YR=(n,e)=&gt;{const t=dq(n),i=(r,s=e)=&gt;DP(t,r,s);return Object.assign(i,t),i},yq=(n,e)=&gt;n?YR(n,e):YR;function di(n,e){if(Object.is(n,e))return!0;if(typeof n!=&quot;object&quot;||n===null||typeof e!=&quot;object&quot;||e===null)return!1;if(n instanceof Map&amp;&amp;e instanceof Map){if(n.size!==e.size)return!1;for(const[i,r]of n)if(!Object.is(r,e.get(i)))return!1;return!0}if(n instanceof Set&amp;&amp;e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(n[i],e[i]))return!1;return!0}var NP=J0();const Qy=re.createContext(null),_q=Qy.Provider,IP=wo.error001();function _n(n,e){const t=re.useContext(Qy);if(t===null)throw new Error(IP);return DP(t,n,e)}function $n(){const n=re.useContext(Qy);if(n===null)throw new Error(IP);return re.useMemo(()=&gt;({getState:n.getState,setState:n.setState,subscribe:n.subscribe}),[n])}const KR={display:&quot;none&quot;},vq={position:&quot;absolute&quot;,width:1,height:1,margin:-1,border:0,padding:0,overflow:&quot;hidden&quot;,clip:&quot;rect(0px, 0px, 0px, 0px)&quot;,clipPath:&quot;inset(100%)&quot;},PP=&quot;react-flow__node-desc&quot;,LP=&quot;react-flow__edge-desc&quot;,bq=&quot;react-flow__aria-live&quot;,xq=n=&gt;n.ariaLiveMessage;function Sq({rfId:n}){const e=_n(xq);return P.jsx(&quot;div&quot;,{id:`${bq}-${n}`,&quot;aria-live&quot;:&quot;assertive&quot;,&quot;aria-atomic&quot;:&quot;true&quot;,style:vq,children:e})}function wq({rfId:n,disableKeyboardA11y:e}){return P.jsxs(P.Fragment,{children:[P.jsxs(&quot;div&quot;,{id:`${PP}-${n}`,style:KR,children:[&quot;Press enter or space to select a node.&quot;,!e&amp;&amp;&quot;You can then use the arrow keys to move the node around.&quot;,&quot; Press delete to remove it and escape to cancel.&quot;,&quot; &quot;]}),P.jsx(&quot;div&quot;,{id:`${LP}-${n}`,style:KR,children:&quot;Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.&quot;}),!e&amp;&amp;P.jsx(Sq,{rfId:n})]})}const Eq=n=&gt;n.userSelectionActive?&quot;none&quot;:&quot;all&quot;,e_=re.forwardRef(({position:n=&quot;top-left&quot;,children:e,className:t,style:i,...r},s)=&gt;{const o=_n(Eq),l=`${n}`.split(&quot;-&quot;);return P.jsx(&quot;div&quot;,{className:Di([&quot;react-flow__panel&quot;,t,...l]),style:{...i,pointerEvents:o},ref:s,...r,children:e})});e_.displayName=&quot;Panel&quot;;function Tq({proOptions:n,position:e=&quot;bottom-right&quot;}){return n!=null&amp;&amp;n.hideAttribution?null:P.jsx(e_,{position:e,className:&quot;react-flow__attribution&quot;,&quot;data-message&quot;:&quot;Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev&quot;,children:P.jsx(&quot;a&quot;,{href:&quot;https://reactflow.dev&quot;,target:&quot;_blank&quot;,rel:&quot;noopener noreferrer&quot;,&quot;aria-label&quot;:&quot;React Flow attribution&quot;,children:&quot;React Flow&quot;})})}const Mq=n=&gt;{const e=[],t=[];for(const[,i]of n.nodeLookup)i.selected&amp;&amp;e.push(i.internals.userNode);for(const[,i]of n.edgeLookup)i.selected&amp;&amp;t.push(i);return{selectedNodes:e,selectedEdges:t}},lg=n=&gt;n.id;function Aq(n,e){return di(n.selectedNodes.map(lg),e.selectedNodes.map(lg))&amp;&amp;di(n.selectedEdges.map(lg),e.selectedEdges.map(lg))}function Cq({onSelectionChange:n}){const e=$n(),{selectedNodes:t,selectedEdges:i}=_n(Mq,Aq);return re.useEffect(()=&gt;{const r={nodes:t,edges:i};n==null||n(r),e.getState().onSelectionChangeHandlers.forEach(s=&gt;s(r))},[t,i,n]),null}const Rq=n=&gt;!!n.onSelectionChangeHandlers;function Oq({onSelectionChange:n}){const e=_n(Rq);return n||e?P.jsx(Cq,{onSelectionChange:n}):null}const UP=[0,0],Dq={x:0,y:0,zoom:1},Nq=[&quot;nodes&quot;,&quot;edges&quot;,&quot;defaultNodes&quot;,&quot;defaultEdges&quot;,&quot;onConnect&quot;,&quot;onConnectStart&quot;,&quot;onConnectEnd&quot;,&quot;onClickConnectStart&quot;,&quot;onClickConnectEnd&quot;,&quot;nodesDraggable&quot;,&quot;nodesConnectable&quot;,&quot;nodesFocusable&quot;,&quot;edgesFocusable&quot;,&quot;edgesReconnectable&quot;,&quot;elevateNodesOnSelect&quot;,&quot;elevateEdgesOnSelect&quot;,&quot;minZoom&quot;,&quot;maxZoom&quot;,&quot;nodeExtent&quot;,&quot;onNodesChange&quot;,&quot;onEdgesChange&quot;,&quot;elementsSelectable&quot;,&quot;connectionMode&quot;,&quot;snapGrid&quot;,&quot;snapToGrid&quot;,&quot;translateExtent&quot;,&quot;connectOnClick&quot;,&quot;defaultEdgeOptions&quot;,&quot;fitView&quot;,&quot;fitViewOptions&quot;,&quot;onNodesDelete&quot;,&quot;onEdgesDelete&quot;,&quot;onDelete&quot;,&quot;onNodeDrag&quot;,&quot;onNodeDragStart&quot;,&quot;onNodeDragStop&quot;,&quot;onSelectionDrag&quot;,&quot;onSelectionDragStart&quot;,&quot;onSelectionDragStop&quot;,&quot;onMoveStart&quot;,&quot;onMove&quot;,&quot;onMoveEnd&quot;,&quot;noPanClassName&quot;,&quot;nodeOrigin&quot;,&quot;autoPanOnConnect&quot;,&quot;autoPanOnNodeDrag&quot;,&quot;onError&quot;,&quot;connectionRadius&quot;,&quot;isValidConnection&quot;,&quot;selectNodesOnDrag&quot;,&quot;nodeDragThreshold&quot;,&quot;onBeforeDelete&quot;,&quot;debug&quot;,&quot;autoPanSpeed&quot;,&quot;paneClickDistance&quot;],$R=[...Nq,&quot;rfId&quot;],Iq=n=&gt;({setNodes:n.setNodes,setEdges:n.setEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setPaneClickDistance:n.setPaneClickDistance}),ZR={translateExtent:Ud,nodeOrigin:UP,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:&quot;nopan&quot;,rfId:&quot;1&quot;,paneClickDistance:0};function Pq(n){const{setNodes:e,setEdges:t,setMinZoom:i,setMaxZoom:r,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:h}=_n(Iq,di),f=$n();re.useEffect(()=&gt;(u(n.defaultNodes,n.defaultEdges),()=&gt;{p.current=ZR,l()}),[]);const p=re.useRef(ZR);return re.useEffect(()=&gt;{for(const m of $R){const g=n[m],v=p.current[m];g!==v&amp;&amp;(typeof n[m]&gt;&quot;u&quot;||(m===&quot;nodes&quot;?e(g):m===&quot;edges&quot;?t(g):m===&quot;minZoom&quot;?i(g):m===&quot;maxZoom&quot;?r(g):m===&quot;translateExtent&quot;?s(g):m===&quot;nodeExtent&quot;?o(g):m===&quot;paneClickDistance&quot;?h(g):m===&quot;fitView&quot;?f.setState({fitViewOnInit:g}):m===&quot;fitViewOptions&quot;?f.setState({fitViewOnInitOptions:g}):f.setState({[m]:g})))}p.current=n},$R.map(m=&gt;n[m])),null}function JR(){return typeof window&gt;&quot;u&quot;||!window.matchMedia?null:window.matchMedia(&quot;(prefers-color-scheme: dark)&quot;)}function Lq(n){var i;const[e,t]=re.useState(n===&quot;system&quot;?null:n);return re.useEffect(()=&gt;{if(n!==&quot;system&quot;){t(n);return}const r=JR(),s=()=&gt;t(r!=null&amp;&amp;r.matches?&quot;dark&quot;:&quot;light&quot;);return s(),r==null||r.addEventListener(&quot;change&quot;,s),()=&gt;{r==null||r.removeEventListener(&quot;change&quot;,s)}},[n]),e!==null?e:(i=JR())!=null&amp;&amp;i.matches?&quot;dark&quot;:&quot;light&quot;}const QR=typeof document&lt;&quot;u&quot;?document:null;function Bd(n=null,e={target:QR,actInsideInputWithModifier:!0}){const[t,i]=re.useState(!1),r=re.useRef(!1),s=re.useRef(new Set([])),[o,l]=re.useMemo(()=&gt;{if(n!==null){const h=(Array.isArray(n)?n:[n]).filter(p=&gt;typeof p==&quot;string&quot;).map(p=&gt;p.replace(&quot;+&quot;,`
`).replace(`

`,`
+`).split(`
`)),f=h.reduce((p,m)=&gt;p.concat(...m),[]);return[h,f]}return[[],[]]},[n]);return re.useEffect(()=&gt;{const u=(e==null?void 0:e.target)||QR;if(n!==null){const h=m=&gt;{if(r.current=m.ctrlKey||m.metaKey||m.shiftKey,(!r.current||r.current&amp;&amp;!e.actInsideInputWithModifier)&amp;&amp;PS(m))return!1;const v=tO(m.code,l);s.current.add(m[v]),eO(o,s.current,!1)&amp;&amp;(m.preventDefault(),i(!0))},f=m=&gt;{if((!r.current||r.current&amp;&amp;!e.actInsideInputWithModifier)&amp;&amp;PS(m))return!1;const v=tO(m.code,l);eO(o,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(m[v]),m.key===&quot;Meta&quot;&amp;&amp;s.current.clear(),r.current=!1},p=()=&gt;{s.current.clear(),i(!1)};return u==null||u.addEventListener(&quot;keydown&quot;,h),u==null||u.addEventListener(&quot;keyup&quot;,f),window.addEventListener(&quot;blur&quot;,p),window.addEventListener(&quot;contextmenu&quot;,p),()=&gt;{u==null||u.removeEventListener(&quot;keydown&quot;,h),u==null||u.removeEventListener(&quot;keyup&quot;,f),window.removeEventListener(&quot;blur&quot;,p),window.removeEventListener(&quot;contextmenu&quot;,p)}}},[n,i]),t}function eO(n,e,t){return n.filter(i=&gt;t||i.length===e.size).some(i=&gt;i.every(r=&gt;e.has(r)))}function tO(n,e){return e.includes(n)?&quot;code&quot;:&quot;key&quot;}const Uq=()=&gt;{const n=$n();return re.useMemo(()=&gt;({zoomIn:e=&gt;{const{panZoom:t}=n.getState();return t?t.scaleBy(1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomOut:e=&gt;{const{panZoom:t}=n.getState();return t?t.scaleBy(1/1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomTo:(e,t)=&gt;{const{panZoom:i}=n.getState();return i?i.scaleTo(e,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},getZoom:()=&gt;n.getState().transform[2],setViewport:async(e,t)=&gt;{const{transform:[i,r,s],panZoom:o}=n.getState();return o?(await o.setViewport({x:e.x??i,y:e.y??r,zoom:e.zoom??s},{duration:t==null?void 0:t.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=&gt;{const[e,t,i]=n.getState().transform;return{x:e,y:t,zoom:i}},fitView:e=&gt;{const{nodeLookup:t,minZoom:i,maxZoom:r,panZoom:s,domNode:o}=n.getState();if(!s||!o)return Promise.resolve(!1);const l=DS(t,e),{width:u,height:h}=Zy(o);return NS({nodes:l,width:u,height:h,minZoom:i,maxZoom:r,panZoom:s},e)},setCenter:async(e,t,i)=&gt;{const{width:r,height:s,maxZoom:o,panZoom:l}=n.getState(),u=typeof(i==null?void 0:i.zoom)&lt;&quot;u&quot;?i.zoom:o,h=r/2-e*u,f=s/2-t*u;return l?(await l.setViewport({x:h,y:f,zoom:u},{duration:i==null?void 0:i.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(e,t)=&gt;{const{width:i,height:r,minZoom:s,maxZoom:o,panZoom:l}=n.getState(),u=qw(e,i,r,s,o,(t==null?void 0:t.padding)??.1);return l?(await l.setViewport(u,{duration:t==null?void 0:t.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,t={})=&gt;{const{transform:i,snapGrid:r,snapToGrid:s,domNode:o}=n.getState();if(!o)return e;const{x:l,y:u}=o.getBoundingClientRect(),h={x:e.x-l,y:e.y-u},f=t.snapGrid??r,p=t.snapToGrid??s;return np(h,i,p,f)},flowToScreenPosition:e=&gt;{const{transform:t,domNode:i}=n.getState();if(!i)return e;const{x:r,y:s}=i.getBoundingClientRect(),o=uP(e,t);return{x:o.x+r,y:o.y+s}}}),[])};function kP(n,e){const t=[],i=new Map,r=[];for(const s of n)if(s.type===&quot;add&quot;){r.push(s);continue}else if(s.type===&quot;remove&quot;||s.type===&quot;replace&quot;)i.set(s.id,[s]);else{const o=i.get(s.id);o?o.push(s):i.set(s.id,[s])}for(const s of e){const o=i.get(s.id);if(!o){t.push(s);continue}if(o[0].type===&quot;remove&quot;)continue;if(o[0].type===&quot;replace&quot;){t.push({...o[0].item});continue}const l={...s};for(const u of o)kq(u,l);t.push(l)}return r.length&amp;&amp;r.forEach(s=&gt;{s.index!==void 0?t.splice(s.index,0,{...s.item}):t.push({...s.item})}),t}function kq(n,e){switch(n.type){case&quot;select&quot;:{e.selected=n.selected;break}case&quot;position&quot;:{typeof n.position&lt;&quot;u&quot;&amp;&amp;(e.position=n.position),typeof n.dragging&lt;&quot;u&quot;&amp;&amp;(e.dragging=n.dragging);break}case&quot;dimensions&quot;:{typeof n.dimensions&lt;&quot;u&quot;&amp;&amp;(e.measured??(e.measured={}),e.measured.width=n.dimensions.width,e.measured.height=n.dimensions.height,n.setAttributes&amp;&amp;(e.width=n.dimensions.width,e.height=n.dimensions.height)),typeof n.resizing==&quot;boolean&quot;&amp;&amp;(e.resizing=n.resizing);break}}}function FP(n,e){return kP(n,e)}function zP(n,e){return kP(n,e)}function oc(n,e){return{id:n,type:&quot;select&quot;,selected:e}}function Zu(n,e=new Set,t=!1){const i=[];for(const[r,s]of n){const o=e.has(r);!(s.selected===void 0&amp;&amp;!o)&amp;&amp;s.selected!==o&amp;&amp;(t&amp;&amp;(s.selected=o),i.push(oc(s.id,o)))}return i}function nO({items:n=[],lookup:e}){var r;const t=[],i=new Map(n.map(s=&gt;[s.id,s]));for(const[s,o]of n.entries()){const l=e.get(o.id),u=((r=l==null?void 0:l.internals)==null?void 0:r.userNode)??l;u!==void 0&amp;&amp;u!==o&amp;&amp;t.push({id:o.id,item:o,type:&quot;replace&quot;}),u===void 0&amp;&amp;t.push({item:o,type:&quot;add&quot;,index:s})}for(const[s]of e)i.get(s)===void 0&amp;&amp;t.push({id:s,type:&quot;remove&quot;});return t}function iO(n){return{id:n.id,type:&quot;remove&quot;}}const rO=n=&gt;yX(n),Fq=n=&gt;rP(n);function BP(n){return re.forwardRef(n)}const zq=typeof window&lt;&quot;u&quot;?re.useLayoutEffect:re.useEffect;function sO(n){const[e,t]=re.useState(BigInt(0)),[i]=re.useState(()=&gt;Bq(()=&gt;t(r=&gt;r+BigInt(1))));return zq(()=&gt;{const r=i.get();r.length&amp;&amp;(n(r),i.reset())},[e]),i}function Bq(n){let e=[];return{get:()=&gt;e,reset:()=&gt;{e=[]},push:t=&gt;{e.push(t),n()}}}const HP=re.createContext(null);function Hq({children:n}){const e=$n(),t=re.useCallback(l=&gt;{const{nodes:u=[],setNodes:h,hasDefaultNodes:f,onNodesChange:p,nodeLookup:m}=e.getState();let g=u;for(const v of l)g=typeof v==&quot;function&quot;?v(g):v;f?h(g):p&amp;&amp;p(nO({items:g,lookup:m}))},[]),i=sO(t),r=re.useCallback(l=&gt;{const{edges:u=[],setEdges:h,hasDefaultEdges:f,onEdgesChange:p,edgeLookup:m}=e.getState();let g=u;for(const v of l)g=typeof v==&quot;function&quot;?v(g):v;f?h(g):p&amp;&amp;p(nO({items:g,lookup:m}))},[]),s=sO(r),o=re.useMemo(()=&gt;({nodeQueue:i,edgeQueue:s}),[]);return P.jsx(HP.Provider,{value:o,children:n})}function Vq(){const n=re.useContext(HP);if(!n)throw new Error(&quot;useBatchContext must be used within a BatchProvider&quot;);return n}const Gq=n=&gt;!!n.panZoom;function Jw(){const n=Uq(),e=$n(),t=Vq(),i=_n(Gq),r=re.useMemo(()=&gt;{const s=p=&gt;e.getState().nodeLookup.get(p),o=p=&gt;{t.nodeQueue.push(p)},l=p=&gt;{t.edgeQueue.push(p)},u=p=&gt;{var _,T;const{nodeLookup:m,nodeOrigin:g}=e.getState(),v=rO(p)?p:m.get(p.id),x=v.parentId?fP(v.position,v.measured,v.parentId,m,g):v.position,b={...v,position:x,width:((_=v.measured)==null?void 0:_.width)??v.width,height:((T=v.measured)==null?void 0:T.height)??v.height};return yh(b)},h=(p,m,g={replace:!1})=&gt;{o(v=&gt;v.map(x=&gt;{if(x.id===p){const b=typeof m==&quot;function&quot;?m(x):m;return g.replace&amp;&amp;rO(b)?b:{...x,...b}}return x}))},f=(p,m,g={replace:!1})=&gt;{l(v=&gt;v.map(x=&gt;{if(x.id===p){const b=typeof m==&quot;function&quot;?m(x):m;return g.replace&amp;&amp;Fq(b)?b:{...x,...b}}return x}))};return{getNodes:()=&gt;e.getState().nodes.map(p=&gt;({...p})),getNode:p=&gt;{var m;return(m=s(p))==null?void 0:m.internals.userNode},getInternalNode:s,getEdges:()=&gt;{const{edges:p=[]}=e.getState();return p.map(m=&gt;({...m}))},getEdge:p=&gt;e.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=&gt;{const m=Array.isArray(p)?p:[p];t.nodeQueue.push(g=&gt;[...g,...m])},addEdges:p=&gt;{const m=Array.isArray(p)?p:[p];t.edgeQueue.push(g=&gt;[...g,...m])},toObject:()=&gt;{const{nodes:p=[],edges:m=[],transform:g}=e.getState(),[v,x,b]=g;return{nodes:p.map(_=&gt;({..._})),edges:m.map(_=&gt;({..._})),viewport:{x:v,y:x,zoom:b}}},deleteElements:async({nodes:p=[],edges:m=[]})=&gt;{const{nodes:g,edges:v,onNodesDelete:x,onEdgesDelete:b,triggerNodeChanges:_,triggerEdgeChanges:T,onDelete:w,onBeforeDelete:E}=e.getState(),{nodes:R,edges:N}=await bX({nodesToRemove:p,edgesToRemove:m,nodes:g,edges:v,onBeforeDelete:E}),A=N.length&gt;0,D=R.length&gt;0;if(A){const C=N.map(iO);b==null||b(N),T(C)}if(D){const C=R.map(iO);x==null||x(R),_(C)}return(D||A)&amp;&amp;(w==null||w({nodes:R,edges:N})),{deletedNodes:R,deletedEdges:N}},getIntersectingNodes:(p,m=!0,g)=&gt;{const v=DR(p),x=v?p:u(p),b=g!==void 0;return x?(g||e.getState().nodes).filter(_=&gt;{const T=e.getState().nodeLookup.get(_.id);if(T&amp;&amp;!v&amp;&amp;(_.id===p.id||!T.internals.positionAbsolute))return!1;const w=yh(b?_:T),E=Fd(w,x);return m&amp;&amp;E&gt;0||E&gt;=x.width*x.height}):[]},isNodeIntersecting:(p,m,g=!0)=&gt;{const x=DR(p)?p:u(p);if(!x)return!1;const b=Fd(x,m);return g&amp;&amp;b&gt;0||b&gt;=x.width*x.height},updateNode:h,updateNodeData:(p,m,g={replace:!1})=&gt;{h(p,v=&gt;{const x=typeof m==&quot;function&quot;?m(v):m;return g.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},g)},updateEdge:f,updateEdgeData:(p,m,g={replace:!1})=&gt;{f(p,v=&gt;{const x=typeof m==&quot;function&quot;?m(v):m;return g.replace?{...v,data:x}:{...v,data:{...v.data,...x}}},g)},getNodesBounds:p=&gt;{const{nodeLookup:m,nodeOrigin:g}=e.getState();return _X(p,{nodeLookup:m,nodeOrigin:g})},getHandleConnections:({type:p,id:m,nodeId:g})=&gt;{var v;return Array.from(((v=e.getState().connectionLookup.get(`${g}-${p}${m?`-${m}`:&quot;&quot;}`))==null?void 0:v.values())??[])},getNodeConnections:({type:p,handleId:m,nodeId:g})=&gt;{var v;return Array.from(((v=e.getState().connectionLookup.get(`${g}${p?m?`-${p}-${m}`:`-${p}`:&quot;&quot;}`))==null?void 0:v.values())??[])}}},[]);return re.useMemo(()=&gt;({...r,...n,viewportInitialized:i}),[i])}const oO=n=&gt;n.selected,jq={actInsideInputWithModifier:!1},Wq=typeof window&lt;&quot;u&quot;?window:void 0;function Xq({deleteKeyCode:n,multiSelectionKeyCode:e}){const t=$n(),{deleteElements:i}=Jw(),r=Bd(n,jq),s=Bd(e,{target:Wq});re.useEffect(()=&gt;{if(r){const{edges:o,nodes:l}=t.getState();i({nodes:l.filter(oO),edges:o.filter(oO)}),t.setState({nodesSelectionActive:!1})}},[r]),re.useEffect(()=&gt;{t.setState({multiSelectionActive:s})},[s])}function qq(n){const e=$n();re.useEffect(()=&gt;{const t=()=&gt;{var r,s;if(!n.current)return!1;const i=Zy(n.current);(i.height===0||i.width===0)&amp;&amp;((s=(r=e.getState()).onError)==null||s.call(r,&quot;004&quot;,wo.error004())),e.setState({width:i.width||500,height:i.height||500})};if(n.current){t(),window.addEventListener(&quot;resize&quot;,t);const i=new ResizeObserver(()=&gt;t());return i.observe(n.current),()=&gt;{window.removeEventListener(&quot;resize&quot;,t),i&amp;&amp;n.current&amp;&amp;i.unobserve(n.current)}}},[])}const t_={position:&quot;absolute&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,top:0,left:0},Yq=n=&gt;({userSelectionActive:n.userSelectionActive,lib:n.lib});function Kq({onPaneContextMenu:n,zoomOnScroll:e=!0,zoomOnPinch:t=!0,panOnScroll:i=!1,panOnScrollSpeed:r=.5,panOnScrollMode:s=Ec.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:h,minZoom:f,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:g=!0,children:v,noWheelClassName:x,noPanClassName:b,onViewportChange:_,isControlledViewport:T,paneClickDistance:w}){const E=$n(),R=re.useRef(null),{userSelectionActive:N,lib:A}=_n(Yq,di),D=Bd(m),C=re.useRef();qq(R);const O=re.useCallback(L=&gt;{_==null||_({x:L[0],y:L[1],zoom:L[2]}),T||E.setState({transform:L})},[_,T]);return re.useEffect(()=&gt;{if(R.current){C.current=QX({domNode:R.current,minZoom:f,maxZoom:p,translateExtent:h,viewport:u,paneClickDistance:w,onDraggingChange:z=&gt;E.setState({paneDragging:z}),onPanZoomStart:(z,K)=&gt;{const{onViewportChangeStart:I,onMoveStart:j}=E.getState();j==null||j(z,K),I==null||I(K)},onPanZoom:(z,K)=&gt;{const{onViewportChange:I,onMove:j}=E.getState();j==null||j(z,K),I==null||I(K)},onPanZoomEnd:(z,K)=&gt;{const{onViewportChangeEnd:I,onMoveEnd:j}=E.getState();j==null||j(z,K),I==null||I(K)}});const{x:L,y:V,zoom:Z}=C.current.getViewport();return E.setState({panZoom:C.current,transform:[L,V,Z],domNode:R.current.closest(&quot;.react-flow&quot;)}),()=&gt;{var z;(z=C.current)==null||z.destroy()}}},[]),re.useEffect(()=&gt;{var L;(L=C.current)==null||L.update({onPaneContextMenu:n,zoomOnScroll:e,zoomOnPinch:t,panOnScroll:i,panOnScrollSpeed:r,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:D,preventScrolling:g,noPanClassName:b,userSelectionActive:N,noWheelClassName:x,lib:A,onTransformChange:O})},[n,e,t,i,r,s,o,l,D,g,b,N,x,A,O]),P.jsx(&quot;div&quot;,{className:&quot;react-flow__renderer&quot;,ref:R,style:t_,children:v})}const $q=n=&gt;({userSelectionActive:n.userSelectionActive,userSelectionRect:n.userSelectionRect});function Zq(){const{userSelectionActive:n,userSelectionRect:e}=_n($q,di);return n&amp;&amp;e?P.jsx(&quot;div&quot;,{className:&quot;react-flow__selection react-flow__container&quot;,style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const xx=(n,e)=&gt;t=&gt;{t.target===e.current&amp;&amp;(n==null||n(t))},Jq=n=&gt;({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable,dragging:n.paneDragging});function Qq({isSelecting:n,selectionKeyPressed:e,selectionMode:t=kd.Full,panOnDrag:i,selectionOnDrag:r,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:h,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:m,children:g}){const v=$n(),{userSelectionActive:x,elementsSelectable:b,dragging:_}=_n(Jq,di),T=b&amp;&amp;(n||x),w=re.useRef(null),E=re.useRef(),R=re.useRef(new Set),N=re.useRef(new Set),A=re.useRef(!1),D=re.useRef(!1),C=I=&gt;{if(A.current){A.current=!1;return}l==null||l(I),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},O=I=&gt;{if(Array.isArray(i)&amp;&amp;(i!=null&amp;&amp;i.includes(2))){I.preventDefault();return}u==null||u(I)},L=h?I=&gt;h(I):void 0,V=I=&gt;{var ne,le;const{resetSelectedElements:j,domNode:G}=v.getState();if(E.current=G==null?void 0:G.getBoundingClientRect(),!b||!n||I.button!==0||I.target!==w.current||!E.current)return;(le=(ne=I.target)==null?void 0:ne.setPointerCapture)==null||le.call(ne,I.pointerId),D.current=!0,A.current=!1;const{x:ee,y:F}=ha(I.nativeEvent,E.current);j(),v.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:F,x:ee,y:F}}),s==null||s(I)},Z=I=&gt;{const{userSelectionRect:j,transform:G,nodeLookup:ee,edgeLookup:F,connectionLookup:ne,triggerNodeChanges:le,triggerEdgeChanges:ce,defaultEdgeOptions:ie}=v.getState();if(!E.current||!j)return;A.current=!0;const{x:oe,y:ae}=ha(I.nativeEvent,E.current),{startX:ue,startY:ve}=j,He={startX:ue,startY:ve,x:oe&lt;ue?oe:ue,y:ae&lt;ve?ae:ve,width:Math.abs(oe-ue),height:Math.abs(ae-ve)},Xe=R.current,lt=N.current;R.current=new Set(sP(ee,He,G,t===kd.Partial,!0).map(Ye=&gt;Ye.id)),N.current=new Set;const We=(ie==null?void 0:ie.selectable)??!0;for(const Ye of R.current){const Q=ne.get(Ye);if(Q)for(const{edgeId:Ve}of Q.values()){const Le=F.get(Ve);Le&amp;&amp;(Le.selectable??We)&amp;&amp;N.current.add(Ve)}}if(!NR(Xe,R.current)){const Ye=Zu(ee,R.current,!0);le(Ye)}if(!NR(lt,N.current)){const Ye=Zu(F,N.current);ce(Ye)}v.setState({userSelectionRect:He,userSelectionActive:!0,nodesSelectionActive:!1})},z=I=&gt;{var G,ee;if(I.button!==0||!D.current)return;(ee=(G=I.target)==null?void 0:G.releasePointerCapture)==null||ee.call(G,I.pointerId);const{userSelectionRect:j}=v.getState();!x&amp;&amp;j&amp;&amp;I.target===w.current&amp;&amp;(C==null||C(I)),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:R.current.size&gt;0}),o==null||o(I),(e||r)&amp;&amp;(A.current=!1),D.current=!1},K=i===!0||Array.isArray(i)&amp;&amp;i.includes(0);return P.jsxs(&quot;div&quot;,{className:Di([&quot;react-flow__pane&quot;,{draggable:K,dragging:_,selection:n}]),onClick:T?void 0:xx(C,w),onContextMenu:xx(O,w),onWheel:xx(L,w),onPointerEnter:T?void 0:f,onPointerDown:T?V:p,onPointerMove:T?Z:p,onPointerUp:T?z:void 0,onPointerLeave:m,ref:w,style:t_,children:[g,P.jsx(Zq,{})]})}function zS({id:n,store:e,unselect:t=!1,nodeRef:i}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),h=l.get(n);if(!h){u==null||u(&quot;012&quot;,wo.error012(n));return}e.setState({nodesSelectionActive:!1}),h.selected?(t||h.selected&amp;&amp;o)&amp;&amp;(s({nodes:[h],edges:[]}),requestAnimationFrame(()=&gt;{var f;return(f=i==null?void 0:i.current)==null?void 0:f.blur()})):r([n])}function VP({nodeRef:n,disabled:e=!1,noDragClassName:t,handleSelector:i,nodeId:r,isSelectable:s,nodeClickDistance:o}){const l=$n(),[u,h]=re.useState(!1),f=re.useRef();return re.useEffect(()=&gt;{f.current=zX({getStoreItems:()=&gt;l.getState(),onNodeMouseDown:p=&gt;{zS({id:p,store:l,nodeRef:n})},onDragStart:()=&gt;{h(!0)},onDragStop:()=&gt;{h(!1)}})},[]),re.useEffect(()=&gt;{var p,m;if(e)(p=f.current)==null||p.destroy();else if(n.current)return(m=f.current)==null||m.update({noDragClassName:t,handleSelector:i,domNode:n.current,isSelectable:s,nodeId:r,nodeClickDistance:o}),()=&gt;{var g;(g=f.current)==null||g.destroy()}},[t,i,e,s,n,r]),u}const eY=n=&gt;e=&gt;e.selected&amp;&amp;(e.draggable||n&amp;&amp;typeof e.draggable&gt;&quot;u&quot;);function GP(){const n=$n();return re.useCallback(t=&gt;{const{nodeExtent:i,snapToGrid:r,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:h,nodeOrigin:f}=n.getState(),p=new Map,m=eY(o),g=r?s[0]:5,v=r?s[1]:5,x=t.direction.x*g*t.factor,b=t.direction.y*v*t.factor;for(const[,_]of h){if(!m(_))continue;let T={x:_.internals.positionAbsolute.x+x,y:_.internals.positionAbsolute.y+b};r&amp;&amp;(T=$y(T,s));const{position:w,positionAbsolute:E}=oP({nodeId:_.id,nextPosition:T,nodeLookup:h,nodeExtent:i,nodeOrigin:f,onError:l});_.position=w,_.internals.positionAbsolute=E,p.set(_.id,_)}u(p)},[])}const Qw=re.createContext(null),tY=Qw.Provider;Qw.Consumer;const jP=()=&gt;re.useContext(Qw),nY=n=&gt;({connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName,rfId:n.rfId}),iY=(n,e,t)=&gt;i=&gt;{const{connectionClickStartHandle:r,connectionMode:s,connection:o}=i,{fromHandle:l,toHandle:u,isValid:h}=o,f=(u==null?void 0:u.nodeId)===n&amp;&amp;(u==null?void 0:u.id)===e&amp;&amp;(u==null?void 0:u.type)===t;return{connectingFrom:(l==null?void 0:l.nodeId)===n&amp;&amp;(l==null?void 0:l.id)===e&amp;&amp;(l==null?void 0:l.type)===t,connectingTo:f,clickConnecting:(r==null?void 0:r.nodeId)===n&amp;&amp;(r==null?void 0:r.id)===e&amp;&amp;(r==null?void 0:r.type)===t,isPossibleEndHandle:s===mh.Strict?(l==null?void 0:l.type)!==t:n!==(l==null?void 0:l.nodeId)||e!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!r,valid:f&amp;&amp;h}};function rY({type:n=&quot;source&quot;,position:e=Mt.Top,isValidConnection:t,isConnectable:i=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:h,onMouseDown:f,onTouchStart:p,...m},g){var K,I;const v=o||null,x=n===&quot;target&quot;,b=$n(),_=jP(),{connectOnClick:T,noPanClassName:w,rfId:E}=_n(nY,di),{connectingFrom:R,connectingTo:N,clickConnecting:A,isPossibleEndHandle:D,connectionInProcess:C,clickConnectionInProcess:O,valid:L}=_n(iY(_,v,n),di);_||(I=(K=b.getState()).onError)==null||I.call(K,&quot;010&quot;,wo.error010());const V=j=&gt;{const{defaultEdgeOptions:G,onConnect:ee,hasDefaultEdges:F}=b.getState(),ne={...G,...j};if(F){const{edges:le,setEdges:ce}=b.getState();ce(_P(ne,le))}ee==null||ee(ne),l==null||l(ne)},Z=j=&gt;{if(!_)return;const G=pP(j.nativeEvent);if(r&amp;&amp;(G&amp;&amp;j.button===0||!G)){const ee=b.getState();FS.onPointerDown(j.nativeEvent,{autoPanOnConnect:ee.autoPanOnConnect,connectionMode:ee.connectionMode,connectionRadius:ee.connectionRadius,domNode:ee.domNode,nodeLookup:ee.nodeLookup,lib:ee.lib,isTarget:x,handleId:v,nodeId:_,flowId:ee.rfId,panBy:ee.panBy,cancelConnection:ee.cancelConnection,onConnectStart:ee.onConnectStart,onConnectEnd:ee.onConnectEnd,updateConnection:ee.updateConnection,onConnect:V,isValidConnection:t||ee.isValidConnection,getTransform:()=&gt;b.getState().transform,getFromHandle:()=&gt;b.getState().connection.fromHandle,autoPanSpeed:ee.autoPanSpeed})}G?f==null||f(j):p==null||p(j)},z=j=&gt;{const{onClickConnectStart:G,onClickConnectEnd:ee,connectionClickStartHandle:F,connectionMode:ne,isValidConnection:le,lib:ce,rfId:ie,nodeLookup:oe,connection:ae}=b.getState();if(!_||!F&amp;&amp;!r)return;if(!F){G==null||G(j.nativeEvent,{nodeId:_,handleId:v,handleType:n}),b.setState({connectionClickStartHandle:{nodeId:_,type:n,id:v}});return}const ue=dP(j.target),ve=t||le,{connection:He,isValid:Xe}=FS.isValid(j.nativeEvent,{handle:{nodeId:_,id:v,type:n},connectionMode:ne,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:ve,flowId:ie,doc:ue,lib:ce,nodeLookup:oe});Xe&amp;&amp;He&amp;&amp;V(He);const lt=structuredClone(ae);delete lt.inProgress,lt.toPosition=lt.toHandle?lt.toHandle.position:null,ee==null||ee(j,lt),b.setState({connectionClickStartHandle:null})};return P.jsx(&quot;div&quot;,{&quot;data-handleid&quot;:v,&quot;data-nodeid&quot;:_,&quot;data-handlepos&quot;:e,&quot;data-id&quot;:`${E}-${_}-${v}-${n}`,className:Di([&quot;react-flow__handle&quot;,`react-flow__handle-${e}`,&quot;nodrag&quot;,w,h,{source:!x,target:x,connectable:i,connectablestart:r,connectableend:s,clickconnecting:A,connectingfrom:R,connectingto:N,valid:L,connectionindicator:i&amp;&amp;(!C||D)&amp;&amp;(C||O?s:r)}]),onMouseDown:Z,onTouchStart:Z,onClick:T?z:void 0,ref:g,...m,children:u})}const _l=re.memo(BP(rY));function sY({data:n,isConnectable:e,sourcePosition:t=Mt.Bottom}){return P.jsxs(P.Fragment,{children:[n==null?void 0:n.label,P.jsx(_l,{type:&quot;source&quot;,position:t,isConnectable:e})]})}function oY({data:n,isConnectable:e,targetPosition:t=Mt.Top,sourcePosition:i=Mt.Bottom}){return P.jsxs(P.Fragment,{children:[P.jsx(_l,{type:&quot;target&quot;,position:t,isConnectable:e}),n==null?void 0:n.label,P.jsx(_l,{type:&quot;source&quot;,position:i,isConnectable:e})]})}function aY(){return null}function lY({data:n,isConnectable:e,targetPosition:t=Mt.Top}){return P.jsxs(P.Fragment,{children:[P.jsx(_l,{type:&quot;target&quot;,position:t,isConnectable:e}),n==null?void 0:n.label]})}const W0={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},aO={input:sY,default:oY,output:lY,group:aY};function cY(n){var e,t,i,r;return n.internals.handleBounds===void 0?{width:n.width??n.initialWidth??((e=n.style)==null?void 0:e.width),height:n.height??n.initialHeight??((t=n.style)==null?void 0:t.height)}:{width:n.width??((i=n.style)==null?void 0:i.width),height:n.height??((r=n.style)==null?void 0:r.height)}}const uY=n=&gt;{const{width:e,height:t,x:i,y:r}=tp(n.nodeLookup,{filter:s=&gt;!!s.selected});return{width:Ys(e)?e:null,height:Ys(t)?t:null,userSelectionActive:n.userSelectionActive,transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]}) translate(${i}px,${r}px)`}};function hY({onSelectionContextMenu:n,noPanClassName:e,disableKeyboardA11y:t}){const i=$n(),{width:r,height:s,transformString:o,userSelectionActive:l}=_n(uY,di),u=GP(),h=re.useRef(null);if(re.useEffect(()=&gt;{var m;t||(m=h.current)==null||m.focus({preventScroll:!0})},[t]),VP({nodeRef:h}),l||!r||!s)return null;const f=n?m=&gt;{const g=i.getState().nodes.filter(v=&gt;v.selected);n(m,g)}:void 0,p=m=&gt;{Object.prototype.hasOwnProperty.call(W0,m.key)&amp;&amp;(m.preventDefault(),u({direction:W0[m.key],factor:m.shiftKey?4:1}))};return P.jsx(&quot;div&quot;,{className:Di([&quot;react-flow__nodesselection&quot;,&quot;react-flow__container&quot;,e]),style:{transform:o},children:P.jsx(&quot;div&quot;,{ref:h,className:&quot;react-flow__nodesselection-rect&quot;,onContextMenu:f,tabIndex:t?void 0:-1,onKeyDown:t?void 0:p,style:{width:r,height:s}})})}const lO=typeof window&lt;&quot;u&quot;?window:void 0,fY=n=&gt;({nodesSelectionActive:n.nodesSelectionActive,userSelectionActive:n.userSelectionActive});function WP({children:n,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:h,selectionOnDrag:f,selectionMode:p,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:v,panActivationKeyCode:x,zoomActivationKeyCode:b,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:w,panOnScroll:E,panOnScrollSpeed:R,panOnScrollMode:N,zoomOnDoubleClick:A,panOnDrag:D,defaultViewport:C,translateExtent:O,minZoom:L,maxZoom:V,preventScrolling:Z,onSelectionContextMenu:z,noWheelClassName:K,noPanClassName:I,disableKeyboardA11y:j,onViewportChange:G,isControlledViewport:ee}){const{nodesSelectionActive:F,userSelectionActive:ne}=_n(fY),le=Bd(h,{target:lO}),ce=Bd(x,{target:lO}),ie=ce||D,oe=ce||E,ae=f&amp;&amp;ie!==!0,ue=le||ne||ae;return Xq({deleteKeyCode:u,multiSelectionKeyCode:v}),P.jsx(Kq,{onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:T,zoomOnPinch:w,panOnScroll:oe,panOnScrollSpeed:R,panOnScrollMode:N,zoomOnDoubleClick:A,panOnDrag:!le&amp;&amp;ie,defaultViewport:C,translateExtent:O,minZoom:L,maxZoom:V,zoomActivationKeyCode:b,preventScrolling:Z,noWheelClassName:K,noPanClassName:I,onViewportChange:G,isControlledViewport:ee,paneClickDistance:l,children:P.jsxs(Qq,{onSelectionStart:m,onSelectionEnd:g,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:ie,isSelecting:!!ue,selectionMode:p,selectionKeyPressed:le,selectionOnDrag:ae,children:[n,F&amp;&amp;P.jsx(hY,{onSelectionContextMenu:z,noPanClassName:I,disableKeyboardA11y:j})]})})}WP.displayName=&quot;FlowRenderer&quot;;const dY=re.memo(WP),pY=n=&gt;e=&gt;n?sP(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(t=&gt;t.id):Array.from(e.nodeLookup.keys());function mY(n){return _n(re.useCallback(pY(n),[n]),di)}const gY=n=&gt;n.updateNodeInternals;function yY(){const n=_n(gY),[e]=re.useState(()=&gt;typeof ResizeObserver&gt;&quot;u&quot;?null:new ResizeObserver(t=&gt;{const i=new Map;t.forEach(r=&gt;{const s=r.target.getAttribute(&quot;data-id&quot;);i.set(s,{id:s,nodeElement:r.target,force:!0})}),n(i)}));return re.useEffect(()=&gt;()=&gt;{e==null||e.disconnect()},[e]),e}function _Y({node:n,nodeType:e,hasDimensions:t,resizeObserver:i}){const r=$n(),s=re.useRef(null),o=re.useRef(null),l=re.useRef(n.sourcePosition),u=re.useRef(n.targetPosition),h=re.useRef(e),f=t&amp;&amp;!!n.internals.handleBounds;return re.useEffect(()=&gt;{s.current&amp;&amp;!n.hidden&amp;&amp;(!f||o.current!==s.current)&amp;&amp;(o.current&amp;&amp;(i==null||i.unobserve(o.current)),i==null||i.observe(s.current),o.current=s.current)},[f,n.hidden]),re.useEffect(()=&gt;()=&gt;{o.current&amp;&amp;(i==null||i.unobserve(o.current),o.current=null)},[]),re.useEffect(()=&gt;{if(s.current){const p=h.current!==e,m=l.current!==n.sourcePosition,g=u.current!==n.targetPosition;(p||m||g)&amp;&amp;(h.current=e,l.current=n.sourcePosition,u.current=n.targetPosition,r.getState().updateNodeInternals(new Map([[n.id,{id:n.id,nodeElement:s.current,force:!0}]])))}},[n.id,e,n.sourcePosition,n.targetPosition]),s}function vY({id:n,onClick:e,onMouseEnter:t,onMouseMove:i,onMouseLeave:r,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:h,nodesFocusable:f,resizeObserver:p,noDragClassName:m,noPanClassName:g,disableKeyboardA11y:v,rfId:x,nodeTypes:b,nodeClickDistance:_,onError:T}){const{node:w,internals:E,isParent:R}=_n(ue=&gt;{const ve=ue.nodeLookup.get(n),He=ue.parentLookup.has(n);return{node:ve,internals:ve.internals,isParent:He}},di);let N=w.type||&quot;default&quot;,A=(b==null?void 0:b[N])||aO[N];A===void 0&amp;&amp;(T==null||T(&quot;003&quot;,wo.error003(N)),N=&quot;default&quot;,A=aO.default);const D=!!(w.draggable||l&amp;&amp;typeof w.draggable&gt;&quot;u&quot;),C=!!(w.selectable||u&amp;&amp;typeof w.selectable&gt;&quot;u&quot;),O=!!(w.connectable||h&amp;&amp;typeof w.connectable&gt;&quot;u&quot;),L=!!(w.focusable||f&amp;&amp;typeof w.focusable&gt;&quot;u&quot;),V=$n(),Z=hP(w),z=_Y({node:w,nodeType:N,hasDimensions:Z,resizeObserver:p}),K=VP({nodeRef:z,disabled:w.hidden||!D,noDragClassName:m,handleSelector:w.dragHandle,nodeId:n,isSelectable:C,nodeClickDistance:_}),I=GP();if(w.hidden)return null;const j=ga(w),G=cY(w),ee=C||D||e||t||i||r,F=t?ue=&gt;t(ue,{...E.userNode}):void 0,ne=i?ue=&gt;i(ue,{...E.userNode}):void 0,le=r?ue=&gt;r(ue,{...E.userNode}):void 0,ce=s?ue=&gt;s(ue,{...E.userNode}):void 0,ie=o?ue=&gt;o(ue,{...E.userNode}):void 0,oe=ue=&gt;{const{selectNodesOnDrag:ve,nodeDragThreshold:He}=V.getState();C&amp;&amp;(!ve||!D||He&gt;0)&amp;&amp;zS({id:n,store:V,nodeRef:z}),e&amp;&amp;e(ue,{...E.userNode})},ae=ue=&gt;{if(!(PS(ue.nativeEvent)||v))if(tP.includes(ue.key)&amp;&amp;C){const ve=ue.key===&quot;Escape&quot;;zS({id:n,store:V,unselect:ve,nodeRef:z})}else D&amp;&amp;w.selected&amp;&amp;Object.prototype.hasOwnProperty.call(W0,ue.key)&amp;&amp;(ue.preventDefault(),V.setState({ariaLiveMessage:`Moved selected node ${ue.key.replace(&quot;Arrow&quot;,&quot;&quot;).toLowerCase()}. New position, x: ${~~E.positionAbsolute.x}, y: ${~~E.positionAbsolute.y}`}),I({direction:W0[ue.key],factor:ue.shiftKey?4:1}))};return P.jsx(&quot;div&quot;,{className:Di([&quot;react-flow__node&quot;,`react-flow__node-${N}`,{[g]:D},w.className,{selected:w.selected,selectable:C,parent:R,draggable:D,dragging:K}]),ref:z,style:{zIndex:E.z,transform:`translate(${E.positionAbsolute.x}px,${E.positionAbsolute.y}px)`,pointerEvents:ee?&quot;all&quot;:&quot;none&quot;,visibility:Z?&quot;visible&quot;:&quot;hidden&quot;,...w.style,...G},&quot;data-id&quot;:n,&quot;data-testid&quot;:`rf__node-${n}`,onMouseEnter:F,onMouseMove:ne,onMouseLeave:le,onContextMenu:ce,onClick:oe,onDoubleClick:ie,onKeyDown:L?ae:void 0,tabIndex:L?0:void 0,role:L?&quot;button&quot;:void 0,&quot;aria-describedby&quot;:v?void 0:`${PP}-${x}`,&quot;aria-label&quot;:w.ariaLabel,children:P.jsx(tY,{value:n,children:P.jsx(A,{id:n,data:w.data,type:N,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:w.selected??!1,selectable:C,draggable:D,deletable:w.deletable??!0,isConnectable:O,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:K,dragHandle:w.dragHandle,zIndex:E.z,parentId:w.parentId,...j})})})}const bY=n=&gt;({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,onError:n.onError});function XP(n){const{nodesDraggable:e,nodesConnectable:t,nodesFocusable:i,elementsSelectable:r,onError:s}=_n(bY,di),o=mY(n.onlyRenderVisibleElements),l=yY();return P.jsx(&quot;div&quot;,{className:&quot;react-flow__nodes&quot;,style:t_,children:o.map(u=&gt;P.jsx(vY,{id:u,nodeTypes:n.nodeTypes,nodeExtent:n.nodeExtent,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:t,nodesFocusable:i,elementsSelectable:r,nodeClickDistance:n.nodeClickDistance,onError:s},u))})}XP.displayName=&quot;NodeRenderer&quot;;const xY=re.memo(XP);function SY(n){return _n(re.useCallback(t=&gt;{if(!n)return t.edges.map(r=&gt;r.id);const i=[];if(t.width&amp;&amp;t.height)for(const r of t.edges){const s=t.nodeLookup.get(r.source),o=t.nodeLookup.get(r.target);s&amp;&amp;o&amp;&amp;EX({sourceNode:s,targetNode:o,width:t.width,height:t.height,transform:t.transform})&amp;&amp;i.push(r.id)}return i},[n]),di)}const wY=({color:n=&quot;none&quot;,strokeWidth:e=1})=&gt;P.jsx(&quot;polyline&quot;,{style:{stroke:n,strokeWidth:e},strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,fill:&quot;none&quot;,points:&quot;-5,-4 0,0 -5,4&quot;}),EY=({color:n=&quot;none&quot;,strokeWidth:e=1})=&gt;P.jsx(&quot;polyline&quot;,{style:{stroke:n,fill:n,strokeWidth:e},strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,points:&quot;-5,-4 0,0 -5,4 -5,-4&quot;}),cO={[V0.Arrow]:wY,[V0.ArrowClosed]:EY};function TY(n){const e=$n();return re.useMemo(()=&gt;{var r,s;return Object.prototype.hasOwnProperty.call(cO,n)?cO[n]:((s=(r=e.getState()).onError)==null||s.call(r,&quot;009&quot;,wo.error009(n)),null)},[n])}const MY=({id:n,type:e,color:t,width:i=12.5,height:r=12.5,markerUnits:s=&quot;strokeWidth&quot;,strokeWidth:o,orient:l=&quot;auto-start-reverse&quot;})=&gt;{const u=TY(e);return u?P.jsx(&quot;marker&quot;,{className:&quot;react-flow__arrowhead&quot;,id:n,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:&quot;-10 -10 20 20&quot;,markerUnits:s,orient:l,refX:&quot;0&quot;,refY:&quot;0&quot;,children:P.jsx(u,{color:t,strokeWidth:o})}):null},qP=({defaultColor:n,rfId:e})=&gt;{const t=_n(s=&gt;s.edges),i=_n(s=&gt;s.defaultEdgeOptions),r=re.useMemo(()=&gt;DX(t,{id:e,defaultColor:n,defaultMarkerStart:i==null?void 0:i.markerStart,defaultMarkerEnd:i==null?void 0:i.markerEnd}),[t,i,e,n]);return r.length?P.jsx(&quot;svg&quot;,{className:&quot;react-flow__marker&quot;,children:P.jsx(&quot;defs&quot;,{children:r.map(s=&gt;P.jsx(MY,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};qP.displayName=&quot;MarkerDefinitions&quot;;var AY=re.memo(qP);function YP({x:n,y:e,label:t,labelStyle:i={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:h,...f}){const[p,m]=re.useState({x:1,y:0,width:0,height:0}),g=Di([&quot;react-flow__edge-textwrapper&quot;,h]),v=re.useRef(null);return re.useEffect(()=&gt;{if(v.current){const x=v.current.getBBox();m({x:x.x,y:x.y,width:x.width,height:x.height})}},[t]),typeof t&gt;&quot;u&quot;||!t?null:P.jsxs(&quot;g&quot;,{transform:`translate(${n-p.width/2} ${e-p.height/2})`,className:g,visibility:p.width?&quot;visible&quot;:&quot;hidden&quot;,...f,children:[r&amp;&amp;P.jsx(&quot;rect&quot;,{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:&quot;react-flow__edge-textbg&quot;,style:s,rx:l,ry:l}),P.jsx(&quot;text&quot;,{className:&quot;react-flow__edge-text&quot;,y:p.height/2,dy:&quot;0.3em&quot;,ref:v,style:i,children:t}),u]})}YP.displayName=&quot;EdgeText&quot;;const CY=re.memo(YP);function n_({path:n,labelX:e,labelY:t,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:h=20,...f}){return P.jsxs(P.Fragment,{children:[P.jsx(&quot;path&quot;,{...f,d:n,fill:&quot;none&quot;,className:Di([&quot;react-flow__edge-path&quot;,f.className])}),h&amp;&amp;P.jsx(&quot;path&quot;,{d:n,fill:&quot;none&quot;,strokeOpacity:0,strokeWidth:h,className:&quot;react-flow__edge-interaction&quot;}),i&amp;&amp;Ys(e)&amp;&amp;Ys(t)?P.jsx(CY,{x:e,y:t,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function uO({pos:n,x1:e,y1:t,x2:i,y2:r}){return n===Mt.Left||n===Mt.Right?[.5*(e+i),t]:[e,.5*(t+r)]}function KP({sourceX:n,sourceY:e,sourcePosition:t=Mt.Bottom,targetX:i,targetY:r,targetPosition:s=Mt.Top}){const[o,l]=uO({pos:t,x1:n,y1:e,x2:i,y2:r}),[u,h]=uO({pos:s,x1:i,y1:r,x2:n,y2:e}),[f,p,m,g]=mP({sourceX:n,sourceY:e,targetX:i,targetY:r,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:h});return[`M${n},${e} C${o},${l} ${u},${h} ${i},${r}`,f,p,m,g]}function $P(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,sourcePosition:o=Mt.Bottom,targetPosition:l=Mt.Top,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,interactionWidth:_})=&gt;{const[T,w,E]=KP({sourceX:t,sourceY:i,sourcePosition:o,targetX:r,targetY:s,targetPosition:l}),R=n.isInternal?void 0:e;return P.jsx(n_,{id:R,path:T,labelX:w,labelY:E,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,interactionWidth:_})})}const RY=$P({isInternal:!1}),ZP=$P({isInternal:!0});RY.displayName=&quot;SimpleBezierEdge&quot;;ZP.displayName=&quot;SimpleBezierEdgeInternal&quot;;function JP(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,sourcePosition:g=Mt.Bottom,targetPosition:v=Mt.Top,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:T})=&gt;{const[w,E,R]=LS({sourceX:t,sourceY:i,sourcePosition:g,targetX:r,targetY:s,targetPosition:v,borderRadius:_==null?void 0:_.borderRadius,offset:_==null?void 0:_.offset}),N=n.isInternal?void 0:e;return P.jsx(n_,{id:N,path:w,labelX:E,labelY:R,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:x,markerStart:b,interactionWidth:T})})}const QP=JP({isInternal:!1}),eL=JP({isInternal:!0});QP.displayName=&quot;SmoothStepEdge&quot;;eL.displayName=&quot;SmoothStepEdgeInternal&quot;;function tL(n){return re.memo(({id:e,...t})=&gt;{var r;const i=n.isInternal?void 0:e;return P.jsx(QP,{...t,id:i,pathOptions:re.useMemo(()=&gt;{var s;return{borderRadius:0,offset:(s=t.pathOptions)==null?void 0:s.offset}},[(r=t.pathOptions)==null?void 0:r.offset])})})}const OY=tL({isInternal:!1}),nL=tL({isInternal:!0});OY.displayName=&quot;StepEdge&quot;;nL.displayName=&quot;StepEdgeInternal&quot;;function iL(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,interactionWidth:x})=&gt;{const[b,_,T]=vP({sourceX:t,sourceY:i,targetX:r,targetY:s}),w=n.isInternal?void 0:e;return P.jsx(n_,{id:w,path:b,labelX:_,labelY:T,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:h,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:v,interactionWidth:x})})}const DY=iL({isInternal:!1}),rL=iL({isInternal:!0});DY.displayName=&quot;StraightEdge&quot;;rL.displayName=&quot;StraightEdgeInternal&quot;;function sL(n){return re.memo(({id:e,sourceX:t,sourceY:i,targetX:r,targetY:s,sourcePosition:o=Mt.Bottom,targetPosition:l=Mt.Top,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:T})=&gt;{const[w,E,R]=gP({sourceX:t,sourceY:i,sourcePosition:o,targetX:r,targetY:s,targetPosition:l,curvature:_==null?void 0:_.curvature}),N=n.isInternal?void 0:e;return P.jsx(n_,{id:N,path:w,labelX:E,labelY:R,label:u,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,markerEnd:x,markerStart:b,interactionWidth:T})})}const NY=sL({isInternal:!1}),oL=sL({isInternal:!0});NY.displayName=&quot;BezierEdge&quot;;oL.displayName=&quot;BezierEdgeInternal&quot;;const hO={default:oL,straight:rL,step:nL,smoothstep:eL,simplebezier:ZP},fO={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},IY=(n,e,t)=&gt;t===Mt.Left?n-e:t===Mt.Right?n+e:n,PY=(n,e,t)=&gt;t===Mt.Top?n-e:t===Mt.Bottom?n+e:n,dO=&quot;react-flow__edgeupdater&quot;;function pO({position:n,centerX:e,centerY:t,radius:i=10,onMouseDown:r,onMouseEnter:s,onMouseOut:o,type:l}){return P.jsx(&quot;circle&quot;,{onMouseDown:r,onMouseEnter:s,onMouseOut:o,className:Di([dO,`${dO}-${l}`]),cx:IY(e,i,n),cy:PY(t,i,n),r:i,stroke:&quot;transparent&quot;,fill:&quot;transparent&quot;})}function LY({isReconnectable:n,reconnectRadius:e,edge:t,sourceX:i,sourceY:r,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:h,onReconnectStart:f,onReconnectEnd:p,setReconnecting:m,setUpdateHover:g}){const v=$n(),x=(E,R)=&gt;{if(E.button!==0)return;const{autoPanOnConnect:N,domNode:A,isValidConnection:D,connectionMode:C,connectionRadius:O,lib:L,onConnectStart:V,onConnectEnd:Z,cancelConnection:z,nodeLookup:K,rfId:I,panBy:j,updateConnection:G}=v.getState(),ee=R.type===&quot;target&quot;;m(!0),f==null||f(E,t,R.type);const F=(le,ce)=&gt;{m(!1),p==null||p(le,t,R.type,ce)},ne=le=&gt;h==null?void 0:h(t,le);FS.onPointerDown(E.nativeEvent,{autoPanOnConnect:N,connectionMode:C,connectionRadius:O,domNode:A,handleId:R.id,nodeId:R.nodeId,nodeLookup:K,isTarget:ee,edgeUpdaterType:R.type,lib:L,flowId:I,cancelConnection:z,panBy:j,isValidConnection:D,onConnect:ne,onConnectStart:V,onConnectEnd:Z,onReconnectEnd:F,updateConnection:G,getTransform:()=&gt;v.getState().transform,getFromHandle:()=&gt;v.getState().connection.fromHandle})},b=E=&gt;x(E,{nodeId:t.target,id:t.targetHandle??null,type:&quot;target&quot;}),_=E=&gt;x(E,{nodeId:t.source,id:t.sourceHandle??null,type:&quot;source&quot;}),T=()=&gt;g(!0),w=()=&gt;g(!1);return P.jsxs(P.Fragment,{children:[(n===!0||n===&quot;source&quot;)&amp;&amp;P.jsx(pO,{position:l,centerX:i,centerY:r,radius:e,onMouseDown:b,onMouseEnter:T,onMouseOut:w,type:&quot;source&quot;}),(n===!0||n===&quot;target&quot;)&amp;&amp;P.jsx(pO,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:_,onMouseEnter:T,onMouseOut:w,type:&quot;target&quot;})]})}function UY({id:n,edgesFocusable:e,edgesReconnectable:t,elementsSelectable:i,onClick:r,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:h,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,rfId:v,edgeTypes:x,noPanClassName:b,onError:_,disableKeyboardA11y:T}){let w=_n(We=&gt;We.edgeLookup.get(n));const E=_n(We=&gt;We.defaultEdgeOptions);w=E?{...E,...w}:w;let R=w.type||&quot;default&quot;,N=(x==null?void 0:x[R])||hO[R];N===void 0&amp;&amp;(_==null||_(&quot;011&quot;,wo.error011(R)),R=&quot;default&quot;,N=hO.default);const A=!!(w.focusable||e&amp;&amp;typeof w.focusable&gt;&quot;u&quot;),D=typeof p&lt;&quot;u&quot;&amp;&amp;(w.reconnectable||t&amp;&amp;typeof w.reconnectable&gt;&quot;u&quot;),C=!!(w.selectable||i&amp;&amp;typeof w.selectable&gt;&quot;u&quot;),O=re.useRef(null),[L,V]=re.useState(!1),[Z,z]=re.useState(!1),K=$n(),{zIndex:I,sourceX:j,sourceY:G,targetX:ee,targetY:F,sourcePosition:ne,targetPosition:le}=_n(re.useCallback(We=&gt;{const Ye=We.nodeLookup.get(w.source),Q=We.nodeLookup.get(w.target);if(!Ye||!Q)return{zIndex:w.zIndex,...fO};const Ve=OX({id:n,sourceNode:Ye,targetNode:Q,sourceHandle:w.sourceHandle||null,targetHandle:w.targetHandle||null,connectionMode:We.connectionMode,onError:_});return{zIndex:wX({selected:w.selected,zIndex:w.zIndex,sourceNode:Ye,targetNode:Q,elevateOnSelect:We.elevateEdgesOnSelect}),...Ve||fO}},[w.source,w.target,w.sourceHandle,w.targetHandle,w.selected,w.zIndex]),di),ce=re.useMemo(()=&gt;w.markerStart?`url(&#x27;#${US(w.markerStart,v)}&#x27;)`:void 0,[w.markerStart,v]),ie=re.useMemo(()=&gt;w.markerEnd?`url(&#x27;#${US(w.markerEnd,v)}&#x27;)`:void 0,[w.markerEnd,v]);if(w.hidden||j===null||G===null||ee===null||F===null)return null;const oe=We=&gt;{var Le;const{addSelectedEdges:Ye,unselectNodesAndEdges:Q,multiSelectionActive:Ve}=K.getState();C&amp;&amp;(K.setState({nodesSelectionActive:!1}),w.selected&amp;&amp;Ve?(Q({nodes:[],edges:[w]}),(Le=O.current)==null||Le.blur()):Ye([n])),r&amp;&amp;r(We,w)},ae=s?We=&gt;{s(We,{...w})}:void 0,ue=o?We=&gt;{o(We,{...w})}:void 0,ve=l?We=&gt;{l(We,{...w})}:void 0,He=u?We=&gt;{u(We,{...w})}:void 0,Xe=h?We=&gt;{h(We,{...w})}:void 0,lt=We=&gt;{var Ye;if(!T&amp;&amp;tP.includes(We.key)&amp;&amp;C){const{unselectNodesAndEdges:Q,addSelectedEdges:Ve}=K.getState();We.key===&quot;Escape&quot;?((Ye=O.current)==null||Ye.blur(),Q({edges:[w]})):Ve([n])}};return P.jsx(&quot;svg&quot;,{style:{zIndex:I},children:P.jsxs(&quot;g&quot;,{className:Di([&quot;react-flow__edge&quot;,`react-flow__edge-${R}`,w.className,b,{selected:w.selected,animated:w.animated,inactive:!C&amp;&amp;!r,updating:L,selectable:C}]),onClick:oe,onDoubleClick:ae,onContextMenu:ue,onMouseEnter:ve,onMouseMove:He,onMouseLeave:Xe,onKeyDown:A?lt:void 0,tabIndex:A?0:void 0,role:A?&quot;button&quot;:&quot;img&quot;,&quot;data-id&quot;:n,&quot;data-testid&quot;:`rf__edge-${n}`,&quot;aria-label&quot;:w.ariaLabel===null?void 0:w.ariaLabel||`Edge from ${w.source} to ${w.target}`,&quot;aria-describedby&quot;:A?`${LP}-${v}`:void 0,ref:O,children:[!Z&amp;&amp;P.jsx(N,{id:n,source:w.source,target:w.target,type:w.type,selected:w.selected,animated:w.animated,selectable:C,deletable:w.deletable??!0,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,sourceX:j,sourceY:G,targetX:ee,targetY:F,sourcePosition:ne,targetPosition:le,data:w.data,style:w.style,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerStart:ce,markerEnd:ie,pathOptions:&quot;pathOptions&quot;in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth}),D&amp;&amp;P.jsx(LY,{edge:w,isReconnectable:D,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,sourceX:j,sourceY:G,targetX:ee,targetY:F,sourcePosition:ne,targetPosition:le,setUpdateHover:V,setReconnecting:z})]})})}const kY=n=&gt;({edgesFocusable:n.edgesFocusable,edgesReconnectable:n.edgesReconnectable,elementsSelectable:n.elementsSelectable,connectionMode:n.connectionMode,onError:n.onError});function aL({defaultMarkerColor:n,onlyRenderVisibleElements:e,rfId:t,edgeTypes:i,noPanClassName:r,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:h,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,disableKeyboardA11y:x}){const{edgesFocusable:b,edgesReconnectable:_,elementsSelectable:T,onError:w}=_n(kY,di),E=SY(e);return P.jsxs(&quot;div&quot;,{className:&quot;react-flow__edges&quot;,children:[P.jsx(AY,{defaultColor:n,rfId:t}),E.map(R=&gt;P.jsx(UY,{id:R,edgesFocusable:b,edgesReconnectable:_,elementsSelectable:T,noPanClassName:r,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:h,onClick:f,reconnectRadius:p,onDoubleClick:m,onReconnectStart:g,onReconnectEnd:v,rfId:t,onError:w,edgeTypes:i,disableKeyboardA11y:x},R))]})}aL.displayName=&quot;EdgeRenderer&quot;;const FY=re.memo(aL),zY=n=&gt;`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function BY({children:n}){const e=_n(zY);return P.jsx(&quot;div&quot;,{className:&quot;react-flow__viewport xyflow__viewport react-flow__container&quot;,style:{transform:e},children:n})}function HY(n){const e=Jw(),t=re.useRef(!1);re.useEffect(()=&gt;{!t.current&amp;&amp;e.viewportInitialized&amp;&amp;n&amp;&amp;(setTimeout(()=&gt;n(e),1),t.current=!0)},[n,e.viewportInitialized])}const VY=n=&gt;{var e;return(e=n.panZoom)==null?void 0:e.syncViewport};function GY(n){const e=_n(VY),t=$n();return re.useEffect(()=&gt;{n&amp;&amp;(e==null||e(n),t.setState({transform:[n.x,n.y,n.zoom]}))},[n,e]),null}function jY(n){return n.connection.inProgress?{...n.connection,to:np(n.connection.to,n.transform)}:{...n.connection}}function WY(n){return jY}function XY(n){const e=WY();return _n(e,di)}const qY=n=&gt;({nodesConnectable:n.nodesConnectable,isValid:n.connection.isValid,inProgress:n.connection.inProgress,width:n.width,height:n.height});function YY({containerStyle:n,style:e,type:t,component:i}){const{nodesConnectable:r,width:s,height:o,isValid:l,inProgress:u}=_n(qY,di);return!(s&amp;&amp;r&amp;&amp;u)?null:P.jsx(&quot;svg&quot;,{style:n,width:s,height:o,className:&quot;react-flow__connectionline react-flow__container&quot;,children:P.jsx(&quot;g&quot;,{className:Di([&quot;react-flow__connection&quot;,iP(l)]),children:P.jsx(lL,{style:e,type:t,CustomComponent:i,isValid:l})})})}const lL=({style:n,type:e=al.Bezier,CustomComponent:t,isValid:i})=&gt;{const{inProgress:r,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:h,toNode:f,toHandle:p,toPosition:m}=XY();if(!r)return;if(t)return P.jsx(t,{connectionLineType:e,connectionLineStyle:n,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:h.x,toY:h.y,fromPosition:u,toPosition:m,connectionStatus:iP(i),toNode:f,toHandle:p});let g=&quot;&quot;;const v={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:h.x,targetY:h.y,targetPosition:m};switch(e){case al.Bezier:[g]=gP(v);break;case al.SimpleBezier:[g]=KP(v);break;case al.Step:[g]=LS({...v,borderRadius:0});break;case al.SmoothStep:[g]=LS(v);break;default:[g]=vP(v)}return P.jsx(&quot;path&quot;,{d:g,fill:&quot;none&quot;,className:&quot;react-flow__connection-path&quot;,style:n})};lL.displayName=&quot;ConnectionLine&quot;;const KY={};function mO(n=KY){re.useRef(n),$n(),re.useEffect(()=&gt;{},[n])}function $Y(){$n(),re.useRef(!1),re.useEffect(()=&gt;{},[])}function cL({nodeTypes:n,edgeTypes:e,onInit:t,onNodeClick:i,onEdgeClick:r,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:m,onSelectionEnd:g,connectionLineType:v,connectionLineStyle:x,connectionLineComponent:b,connectionLineContainerStyle:_,selectionKeyCode:T,selectionOnDrag:w,selectionMode:E,multiSelectionKeyCode:R,panActivationKeyCode:N,zoomActivationKeyCode:A,deleteKeyCode:D,onlyRenderVisibleElements:C,elementsSelectable:O,defaultViewport:L,translateExtent:V,minZoom:Z,maxZoom:z,preventScrolling:K,defaultMarkerColor:I,zoomOnScroll:j,zoomOnPinch:G,panOnScroll:ee,panOnScrollSpeed:F,panOnScrollMode:ne,zoomOnDoubleClick:le,panOnDrag:ce,onPaneClick:ie,onPaneMouseEnter:oe,onPaneMouseMove:ae,onPaneMouseLeave:ue,onPaneScroll:ve,onPaneContextMenu:He,paneClickDistance:Xe,nodeClickDistance:lt,onEdgeContextMenu:We,onEdgeMouseEnter:Ye,onEdgeMouseMove:Q,onEdgeMouseLeave:Ve,reconnectRadius:Le,onReconnect:Fe,onReconnectStart:Ne,onReconnectEnd:mt,noDragClassName:ze,noWheelClassName:te,noPanClassName:H,disableKeyboardA11y:pe,nodeExtent:Ce,rfId:Ue,viewport:Me,onViewportChange:Ze}){return mO(n),mO(e),$Y(),HY(t),GY(Me),P.jsx(dY,{onPaneClick:ie,onPaneMouseEnter:oe,onPaneMouseMove:ae,onPaneMouseLeave:ue,onPaneContextMenu:He,onPaneScroll:ve,paneClickDistance:Xe,deleteKeyCode:D,selectionKeyCode:T,selectionOnDrag:w,selectionMode:E,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:R,panActivationKeyCode:N,zoomActivationKeyCode:A,elementsSelectable:O,zoomOnScroll:j,zoomOnPinch:G,zoomOnDoubleClick:le,panOnScroll:ee,panOnScrollSpeed:F,panOnScrollMode:ne,panOnDrag:ce,defaultViewport:L,translateExtent:V,minZoom:Z,maxZoom:z,onSelectionContextMenu:p,preventScrolling:K,noDragClassName:ze,noWheelClassName:te,noPanClassName:H,disableKeyboardA11y:pe,onViewportChange:Ze,isControlledViewport:!!Me,children:P.jsxs(BY,{children:[P.jsx(FY,{edgeTypes:e,onEdgeClick:r,onEdgeDoubleClick:o,onReconnect:Fe,onReconnectStart:Ne,onReconnectEnd:mt,onlyRenderVisibleElements:C,onEdgeContextMenu:We,onEdgeMouseEnter:Ye,onEdgeMouseMove:Q,onEdgeMouseLeave:Ve,reconnectRadius:Le,defaultMarkerColor:I,noPanClassName:H,disableKeyboardA11y:pe,rfId:Ue}),P.jsx(YY,{style:x,type:v,component:b,containerStyle:_}),P.jsx(&quot;div&quot;,{className:&quot;react-flow__edgelabel-renderer&quot;}),P.jsx(xY,{nodeTypes:n,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:h,onNodeContextMenu:f,nodeClickDistance:lt,onlyRenderVisibleElements:C,noPanClassName:H,noDragClassName:ze,disableKeyboardA11y:pe,nodeExtent:Ce,rfId:Ue}),P.jsx(&quot;div&quot;,{className:&quot;react-flow__viewport-portal&quot;})]})})}cL.displayName=&quot;GraphView&quot;;const ZY=re.memo(cL),gO=({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}={})=&gt;{const h=new Map,f=new Map,p=new Map,m=new Map,g=i??e??[],v=t??n??[],x=l??[0,0],b=u??Ud;xP(p,m,g),kS(v,h,f,{nodeOrigin:x,nodeExtent:b,elevateNodesOnSelect:!1});let _=[0,0,1];if(o&amp;&amp;r&amp;&amp;s){const T=tp(h,{filter:N=&gt;!!((N.width||N.initialWidth)&amp;&amp;(N.height||N.initialHeight))}),{x:w,y:E,zoom:R}=qw(T,r,s,.5,2,.1);_=[w,E,R]}return{rfId:&quot;1&quot;,width:0,height:0,transform:_,nodes:v,nodeLookup:h,parentLookup:f,edges:g,edgeLookup:m,connectionLookup:p,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:t!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Ud,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:mh.Strict,domNode:null,paneDragging:!1,noPanClassName:&quot;nopan&quot;,nodeOrigin:x,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...nP},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:&quot;&quot;,autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:xX,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:&quot;react&quot;,debug:!1}},JY=({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u})=&gt;yq((h,f)=&gt;({...gO({nodes:n,edges:e,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u,defaultNodes:t,defaultEdges:i}),setNodes:p=&gt;{const{nodeLookup:m,parentLookup:g,nodeOrigin:v,elevateNodesOnSelect:x}=f();kS(p,m,g,{nodeOrigin:v,nodeExtent:u,elevateNodesOnSelect:x,checkEquality:!0}),h({nodes:p})},setEdges:p=&gt;{const{connectionLookup:m,edgeLookup:g}=f();xP(m,g,p),h({edges:p})},setDefaultNodesAndEdges:(p,m)=&gt;{if(p){const{setNodes:g}=f();g(p),h({hasDefaultNodes:!0})}if(m){const{setEdges:g}=f();g(m),h({hasDefaultEdges:!0})}},updateNodeInternals:(p,m={triggerFitView:!0})=&gt;{const{triggerNodeChanges:g,nodeLookup:v,parentLookup:x,fitViewOnInit:b,fitViewDone:_,fitViewOnInitOptions:T,domNode:w,nodeOrigin:E,nodeExtent:R,debug:N,fitViewSync:A}=f(),{changes:D,updatedInternals:C}=UX(p,v,x,w,E,R);if(C){if(IX(v,x,{nodeOrigin:E,nodeExtent:R}),m.triggerFitView){let O=_;!_&amp;&amp;b&amp;&amp;(O=A({...T,nodes:T==null?void 0:T.nodes})),h({fitViewDone:O})}else h({});(D==null?void 0:D.length)&gt;0&amp;&amp;(N&amp;&amp;console.log(&quot;React Flow: trigger node changes&quot;,D),g==null||g(D))}},updateNodePositions:(p,m=!1)=&gt;{const g=[],v=[],{nodeLookup:x,triggerNodeChanges:b}=f();for(const[_,T]of p){const w=x.get(_),E=!!(w!=null&amp;&amp;w.expandParent&amp;&amp;(w!=null&amp;&amp;w.parentId)&amp;&amp;(T!=null&amp;&amp;T.position)),R={id:_,type:&quot;position&quot;,position:E?{x:Math.max(0,T.position.x),y:Math.max(0,T.position.y)}:T.position,dragging:m};E&amp;&amp;w.parentId&amp;&amp;g.push({id:_,parentId:w.parentId,rect:{...T.internals.positionAbsolute,width:T.measured.width??0,height:T.measured.height??0}}),v.push(R)}if(g.length&gt;0){const{parentLookup:_,nodeOrigin:T}=f(),w=Zw(g,x,_,T);v.push(...w)}b(v)},triggerNodeChanges:p=&gt;{const{onNodesChange:m,setNodes:g,nodes:v,hasDefaultNodes:x,debug:b}=f();if(p!=null&amp;&amp;p.length){if(x){const _=FP(p,v);g(_)}b&amp;&amp;console.log(&quot;React Flow: trigger node changes&quot;,p),m==null||m(p)}},triggerEdgeChanges:p=&gt;{const{onEdgesChange:m,setEdges:g,edges:v,hasDefaultEdges:x,debug:b}=f();if(p!=null&amp;&amp;p.length){if(x){const _=zP(p,v);g(_)}b&amp;&amp;console.log(&quot;React Flow: trigger edge changes&quot;,p),m==null||m(p)}},addSelectedNodes:p=&gt;{const{multiSelectionActive:m,edgeLookup:g,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:b}=f();if(m){const _=p.map(T=&gt;oc(T,!0));x(_);return}x(Zu(v,new Set([...p]),!0)),b(Zu(g))},addSelectedEdges:p=&gt;{const{multiSelectionActive:m,edgeLookup:g,nodeLookup:v,triggerNodeChanges:x,triggerEdgeChanges:b}=f();if(m){const _=p.map(T=&gt;oc(T,!0));b(_);return}b(Zu(g,new Set([...p]))),x(Zu(v,new Set,!0))},unselectNodesAndEdges:({nodes:p,edges:m}={})=&gt;{const{edges:g,nodes:v,nodeLookup:x,triggerNodeChanges:b,triggerEdgeChanges:_}=f(),T=p||v,w=m||g,E=T.map(N=&gt;{const A=x.get(N.id);return A&amp;&amp;(A.selected=!1),oc(N.id,!1)}),R=w.map(N=&gt;oc(N.id,!1));b(E),_(R)},setMinZoom:p=&gt;{const{panZoom:m,maxZoom:g}=f();m==null||m.setScaleExtent([p,g]),h({minZoom:p})},setMaxZoom:p=&gt;{const{panZoom:m,minZoom:g}=f();m==null||m.setScaleExtent([g,p]),h({maxZoom:p})},setTranslateExtent:p=&gt;{var m;(m=f().panZoom)==null||m.setTranslateExtent(p),h({translateExtent:p})},setPaneClickDistance:p=&gt;{var m;(m=f().panZoom)==null||m.setClickDistance(p)},resetSelectedElements:()=&gt;{const{edges:p,nodes:m,triggerNodeChanges:g,triggerEdgeChanges:v}=f(),x=m.reduce((_,T)=&gt;T.selected?[..._,oc(T.id,!1)]:_,[]),b=p.reduce((_,T)=&gt;T.selected?[..._,oc(T.id,!1)]:_,[]);g(x),v(b)},setNodeExtent:p=&gt;{const{nodes:m,nodeLookup:g,parentLookup:v,nodeOrigin:x,elevateNodesOnSelect:b,nodeExtent:_}=f();p[0][0]===_[0][0]&amp;&amp;p[0][1]===_[0][1]&amp;&amp;p[1][0]===_[1][0]&amp;&amp;p[1][1]===_[1][1]||(kS(m,g,v,{nodeOrigin:x,nodeExtent:p,elevateNodesOnSelect:b,checkEquality:!1}),h({nodeExtent:p}))},panBy:p=&gt;{const{transform:m,width:g,height:v,panZoom:x,translateExtent:b}=f();return kX({delta:p,panZoom:x,transform:m,translateExtent:b,width:g,height:v})},fitView:p=&gt;{const{panZoom:m,width:g,height:v,minZoom:x,maxZoom:b,nodeLookup:_}=f();if(!m)return Promise.resolve(!1);const T=DS(_,p);return NS({nodes:T,width:g,height:v,panZoom:m,minZoom:x,maxZoom:b},p)},fitViewSync:p=&gt;{const{panZoom:m,width:g,height:v,minZoom:x,maxZoom:b,nodeLookup:_}=f();if(!m)return!1;const T=DS(_,p);return NS({nodes:T,width:g,height:v,panZoom:m,minZoom:x,maxZoom:b},p),T.size&gt;0},cancelConnection:()=&gt;{h({connection:{...nP}})},updateConnection:p=&gt;{h({connection:p})},reset:()=&gt;h({...gO()})}),Object.is);function QY({initialNodes:n,initialEdges:e,defaultNodes:t,defaultEdges:i,initialWidth:r,initialHeight:s,fitView:o,nodeOrigin:l,nodeExtent:u,children:h}){const[f]=re.useState(()=&gt;JY({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,width:r,height:s,fitView:o,nodeOrigin:l,nodeExtent:u}));return P.jsx(_q,{value:f,children:P.jsx(Hq,{children:h})})}function eK({children:n,nodes:e,edges:t,defaultNodes:i,defaultEdges:r,width:s,height:o,fitView:l,nodeOrigin:u,nodeExtent:h}){return re.useContext(Qy)?P.jsx(P.Fragment,{children:n}):P.jsx(QY,{initialNodes:e,initialEdges:t,defaultNodes:i,defaultEdges:r,initialWidth:s,initialHeight:o,fitView:l,nodeOrigin:u,nodeExtent:h,children:n})}const tK={width:&quot;100%&quot;,height:&quot;100%&quot;,overflow:&quot;hidden&quot;,position:&quot;relative&quot;,zIndex:0};function nK({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,className:r,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:h,onMove:f,onMoveStart:p,onMoveEnd:m,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:_,onNodeMouseEnter:T,onNodeMouseMove:w,onNodeMouseLeave:E,onNodeContextMenu:R,onNodeDoubleClick:N,onNodeDragStart:A,onNodeDrag:D,onNodeDragStop:C,onNodesDelete:O,onEdgesDelete:L,onDelete:V,onSelectionChange:Z,onSelectionDragStart:z,onSelectionDrag:K,onSelectionDragStop:I,onSelectionContextMenu:j,onSelectionStart:G,onSelectionEnd:ee,onBeforeDelete:F,connectionMode:ne,connectionLineType:le=al.Bezier,connectionLineStyle:ce,connectionLineComponent:ie,connectionLineContainerStyle:oe,deleteKeyCode:ae=&quot;Backspace&quot;,selectionKeyCode:ue=&quot;Shift&quot;,selectionOnDrag:ve=!1,selectionMode:He=kd.Full,panActivationKeyCode:Xe=&quot;Space&quot;,multiSelectionKeyCode:lt=j0()?&quot;Meta&quot;:&quot;Control&quot;,zoomActivationKeyCode:We=j0()?&quot;Meta&quot;:&quot;Control&quot;,snapToGrid:Ye,snapGrid:Q,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:Le,nodesDraggable:Fe,nodesConnectable:Ne,nodesFocusable:mt,nodeOrigin:ze=UP,edgesFocusable:te,edgesReconnectable:H,elementsSelectable:pe=!0,defaultViewport:Ce=Dq,minZoom:Ue=.5,maxZoom:Me=2,translateExtent:Ze=Ud,preventScrolling:qe=!0,nodeExtent:ut,defaultMarkerColor:Ct=&quot;#b1b1b7&quot;,zoomOnScroll:je=!0,zoomOnPinch:ht=!0,panOnScroll:St=!1,panOnScrollSpeed:Rt=.5,panOnScrollMode:rt=Ec.Free,zoomOnDoubleClick:Gt=!0,panOnDrag:It=!0,onPaneClick:gn,onPaneMouseEnter:de,onPaneMouseMove:tt,onPaneMouseLeave:Ae,onPaneScroll:Pe,onPaneContextMenu:st,paneClickDistance:Qe=0,nodeClickDistance:Ut=0,children:wn,onReconnect:jn,onReconnectStart:zt,onReconnectEnd:Bi,onEdgeContextMenu:oi,onEdgeDoubleClick:Zn,onEdgeMouseEnter:pi,onEdgeMouseMove:Hi,onEdgeMouseLeave:Cs,reconnectRadius:ya=10,onNodesChange:Co,onEdgesChange:Rs,noDragClassName:kr=&quot;nodrag&quot;,noWheelClassName:os=&quot;nowheel&quot;,noPanClassName:wr=&quot;nopan&quot;,fitView:Er,fitViewOptions:Os,connectOnClick:as,attributionPosition:Wn,proOptions:_a,defaultEdgeOptions:va,elevateNodesOnSelect:Fr,elevateEdgesOnSelect:q,disableKeyboardA11y:fe=!1,autoPanOnConnect:be,autoPanOnNodeDrag:we,autoPanSpeed:me,connectionRadius:Ge,isValidConnection:Je,onError:et,style:ft,id:Ot,nodeDragThreshold:Et,viewport:bt,onViewportChange:Bt,width:un,height:In,colorMode:Qt=&quot;light&quot;,debug:$t,onScroll:wt,...Hn},rn){const Jn=Ot||&quot;1&quot;,Tn=Lq(Qt),vn=re.useCallback(Tr=&gt;{Tr.currentTarget.scrollTo({top:0,left:0,behavior:&quot;instant&quot;}),wt==null||wt(Tr)},[wt]);return P.jsx(&quot;div&quot;,{&quot;data-testid&quot;:&quot;rf__wrapper&quot;,...Hn,onScroll:vn,style:{...ft,...tK},ref:rn,className:Di([&quot;react-flow&quot;,r,Tn]),id:Ot,children:P.jsxs(eK,{nodes:n,edges:e,width:un,height:In,fitView:Er,nodeOrigin:ze,nodeExtent:ut,children:[P.jsx(ZY,{onInit:h,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:T,onNodeMouseMove:w,onNodeMouseLeave:E,onNodeContextMenu:R,onNodeDoubleClick:N,nodeTypes:s,edgeTypes:o,connectionLineType:le,connectionLineStyle:ce,connectionLineComponent:ie,connectionLineContainerStyle:oe,selectionKeyCode:ue,selectionOnDrag:ve,selectionMode:He,deleteKeyCode:ae,multiSelectionKeyCode:lt,panActivationKeyCode:Xe,zoomActivationKeyCode:We,onlyRenderVisibleElements:Ve,defaultViewport:Ce,translateExtent:Ze,minZoom:Ue,maxZoom:Me,preventScrolling:qe,zoomOnScroll:je,zoomOnPinch:ht,zoomOnDoubleClick:Gt,panOnScroll:St,panOnScrollSpeed:Rt,panOnScrollMode:rt,panOnDrag:It,onPaneClick:gn,onPaneMouseEnter:de,onPaneMouseMove:tt,onPaneMouseLeave:Ae,onPaneScroll:Pe,onPaneContextMenu:st,paneClickDistance:Qe,nodeClickDistance:Ut,onSelectionContextMenu:j,onSelectionStart:G,onSelectionEnd:ee,onReconnect:jn,onReconnectStart:zt,onReconnectEnd:Bi,onEdgeContextMenu:oi,onEdgeDoubleClick:Zn,onEdgeMouseEnter:pi,onEdgeMouseMove:Hi,onEdgeMouseLeave:Cs,reconnectRadius:ya,defaultMarkerColor:Ct,noDragClassName:kr,noWheelClassName:os,noPanClassName:wr,rfId:Jn,disableKeyboardA11y:fe,nodeExtent:ut,viewport:bt,onViewportChange:Bt}),P.jsx(Pq,{nodes:n,edges:e,defaultNodes:t,defaultEdges:i,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:_,nodesDraggable:Fe,nodesConnectable:Ne,nodesFocusable:mt,edgesFocusable:te,edgesReconnectable:H,elementsSelectable:pe,elevateNodesOnSelect:Fr,elevateEdgesOnSelect:q,minZoom:Ue,maxZoom:Me,nodeExtent:ut,onNodesChange:Co,onEdgesChange:Rs,snapToGrid:Ye,snapGrid:Q,connectionMode:ne,translateExtent:Ze,connectOnClick:as,defaultEdgeOptions:va,fitView:Er,fitViewOptions:Os,onNodesDelete:O,onEdgesDelete:L,onDelete:V,onNodeDragStart:A,onNodeDrag:D,onNodeDragStop:C,onSelectionDrag:K,onSelectionDragStart:z,onSelectionDragStop:I,onMove:f,onMoveStart:p,onMoveEnd:m,noPanClassName:wr,nodeOrigin:ze,rfId:Jn,autoPanOnConnect:be,autoPanOnNodeDrag:we,autoPanSpeed:me,onError:et,connectionRadius:Ge,isValidConnection:Je,selectNodesOnDrag:Le,nodeDragThreshold:Et,onBeforeDelete:F,paneClickDistance:Qe,debug:$t}),P.jsx(Oq,{onSelectionChange:Z}),wn,P.jsx(Tq,{proOptions:_a,position:Wn}),P.jsx(wq,{rfId:Jn,disableKeyboardA11y:fe})]})})}var iK=BP(nK);function rK({dimensions:n,lineWidth:e,variant:t,className:i}){return P.jsx(&quot;path&quot;,{strokeWidth:e,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`,className:Di([&quot;react-flow__background-pattern&quot;,t,i])})}function sK({radius:n,className:e}){return P.jsx(&quot;circle&quot;,{cx:n,cy:n,r:n,className:Di([&quot;react-flow__background-pattern&quot;,&quot;dots&quot;,e])})}var hl;(function(n){n.Lines=&quot;lines&quot;,n.Dots=&quot;dots&quot;,n.Cross=&quot;cross&quot;})(hl||(hl={}));const oK={[hl.Dots]:1,[hl.Lines]:1,[hl.Cross]:6},aK=n=&gt;({transform:n.transform,patternId:`pattern-${n.rfId}`});function uL({id:n,variant:e=hl.Dots,gap:t=20,size:i,lineWidth:r=1,offset:s=0,color:o,bgColor:l,style:u,className:h,patternClassName:f}){const p=re.useRef(null),{transform:m,patternId:g}=_n(aK,di),v=i||oK[e],x=e===hl.Dots,b=e===hl.Cross,_=Array.isArray(t)?t:[t,t],T=[_[0]*m[2]||1,_[1]*m[2]||1],w=v*m[2],E=Array.isArray(s)?s:[s,s],R=b?[w,w]:T,N=[E[0]*m[2]||1+R[0]/2,E[1]*m[2]||1+R[1]/2],A=`${g}${n||&quot;&quot;}`;return P.jsxs(&quot;svg&quot;,{className:Di([&quot;react-flow__background&quot;,h]),style:{...u,...t_,&quot;--xy-background-color-props&quot;:l,&quot;--xy-background-pattern-color-props&quot;:o},ref:p,&quot;data-testid&quot;:&quot;rf__background&quot;,children:[P.jsx(&quot;pattern&quot;,{id:A,x:m[0]%T[0],y:m[1]%T[1],width:T[0],height:T[1],patternUnits:&quot;userSpaceOnUse&quot;,patternTransform:`translate(-${N[0]},-${N[1]})`,children:x?P.jsx(sK,{radius:w/2,className:f}):P.jsx(rK,{dimensions:R,lineWidth:r,variant:e,className:f})}),P.jsx(&quot;rect&quot;,{x:&quot;0&quot;,y:&quot;0&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,fill:`url(#${A})`})]})}uL.displayName=&quot;Background&quot;;const lK=re.memo(uL);function cK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 32 32&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z&quot;})})}function uK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 32 5&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M0 0h32v4.2H0z&quot;})})}function hK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 32 30&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z&quot;})})}function fK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 25 32&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z&quot;})})}function dK(){return P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,viewBox:&quot;0 0 25 32&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z&quot;})})}function cg({children:n,className:e,...t}){return P.jsx(&quot;button&quot;,{type:&quot;button&quot;,className:Di([&quot;react-flow__controls-button&quot;,e]),...t,children:n})}const pK=n=&gt;({isInteractive:n.nodesDraggable||n.nodesConnectable||n.elementsSelectable,minZoomReached:n.transform[2]&lt;=n.minZoom,maxZoomReached:n.transform[2]&gt;=n.maxZoom});function hL({style:n,showZoom:e=!0,showFitView:t=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:h,children:f,position:p=&quot;bottom-left&quot;,orientation:m=&quot;vertical&quot;,&quot;aria-label&quot;:g=&quot;React Flow controls&quot;}){const v=$n(),{isInteractive:x,minZoomReached:b,maxZoomReached:_}=_n(pK,di),{zoomIn:T,zoomOut:w,fitView:E}=Jw(),R=()=&gt;{T(),s==null||s()},N=()=&gt;{w(),o==null||o()},A=()=&gt;{E(r),l==null||l()},D=()=&gt;{v.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),u==null||u(!x)},C=m===&quot;horizontal&quot;?&quot;horizontal&quot;:&quot;vertical&quot;;return P.jsxs(e_,{className:Di([&quot;react-flow__controls&quot;,C,h]),position:p,style:n,&quot;data-testid&quot;:&quot;rf__controls&quot;,&quot;aria-label&quot;:g,children:[e&amp;&amp;P.jsxs(P.Fragment,{children:[P.jsx(cg,{onClick:R,className:&quot;react-flow__controls-zoomin&quot;,title:&quot;zoom in&quot;,&quot;aria-label&quot;:&quot;zoom in&quot;,disabled:_,children:P.jsx(cK,{})}),P.jsx(cg,{onClick:N,className:&quot;react-flow__controls-zoomout&quot;,title:&quot;zoom out&quot;,&quot;aria-label&quot;:&quot;zoom out&quot;,disabled:b,children:P.jsx(uK,{})})]}),t&amp;&amp;P.jsx(cg,{className:&quot;react-flow__controls-fitview&quot;,onClick:A,title:&quot;fit view&quot;,&quot;aria-label&quot;:&quot;fit view&quot;,children:P.jsx(hK,{})}),i&amp;&amp;P.jsx(cg,{className:&quot;react-flow__controls-interactive&quot;,onClick:D,title:&quot;toggle interactivity&quot;,&quot;aria-label&quot;:&quot;toggle interactivity&quot;,children:x?P.jsx(dK,{}):P.jsx(fK,{})}),f]})}hL.displayName=&quot;Controls&quot;;const mK=re.memo(hL);function gK({id:n,x:e,y:t,width:i,height:r,style:s,color:o,strokeColor:l,strokeWidth:u,className:h,borderRadius:f,shapeRendering:p,selected:m,onClick:g}){const{background:v,backgroundColor:x}=s||{},b=o||v||x;return P.jsx(&quot;rect&quot;,{className:Di([&quot;react-flow__minimap-node&quot;,{selected:m},h]),x:e,y:t,rx:f,ry:f,width:i,height:r,style:{fill:b,stroke:l,strokeWidth:u},shapeRendering:p,onClick:g?_=&gt;g(_,n):void 0})}const yK=re.memo(gK),_K=n=&gt;n.nodes.map(e=&gt;e.id),Sx=n=&gt;n instanceof Function?n:()=&gt;n;function vK({nodeStrokeColor:n,nodeColor:e,nodeClassName:t=&quot;&quot;,nodeBorderRadius:i=5,nodeStrokeWidth:r,nodeComponent:s=yK,onClick:o}){const l=_n(_K,di),u=Sx(e),h=Sx(n),f=Sx(t),p=typeof window&gt;&quot;u&quot;||window.chrome?&quot;crispEdges&quot;:&quot;geometricPrecision&quot;;return P.jsx(P.Fragment,{children:l.map(m=&gt;P.jsx(xK,{id:m,nodeColorFunc:u,nodeStrokeColorFunc:h,nodeClassNameFunc:f,nodeBorderRadius:i,nodeStrokeWidth:r,NodeComponent:s,onClick:o,shapeRendering:p},m))})}function bK({id:n,nodeColorFunc:e,nodeStrokeColorFunc:t,nodeClassNameFunc:i,nodeBorderRadius:r,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:h,x:f,y:p,width:m,height:g}=_n(v=&gt;{const x=v.nodeLookup.get(n),{x:b,y:_}=x.internals.positionAbsolute,{width:T,height:w}=ga(x);return{node:x,x:b,y:_,width:T,height:w}},di);return!h||h.hidden||!hP(h)?null:P.jsx(l,{x:f,y:p,width:m,height:g,style:h.style,selected:!!h.selected,className:i(h),color:e(h),borderRadius:r,strokeColor:t(h),strokeWidth:s,shapeRendering:o,onClick:u,id:h.id})}const xK=re.memo(bK);var SK=re.memo(vK);const wK=200,EK=150,TK=n=&gt;{const e={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{viewBB:e,boundingRect:n.nodeLookup.size&gt;0?cP(tp(n.nodeLookup),e):e,rfId:n.rfId,panZoom:n.panZoom,translateExtent:n.translateExtent,flowWidth:n.width,flowHeight:n.height}},MK=&quot;react-flow__minimap-desc&quot;;function fL({style:n,className:e,nodeStrokeColor:t,nodeColor:i,nodeClassName:r=&quot;&quot;,nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:h,maskStrokeColor:f,maskStrokeWidth:p,position:m=&quot;bottom-right&quot;,onClick:g,onNodeClick:v,pannable:x=!1,zoomable:b=!1,ariaLabel:_=&quot;React Flow mini map&quot;,inversePan:T,zoomStep:w=10,offsetScale:E=5}){const R=$n(),N=re.useRef(null),{boundingRect:A,viewBB:D,rfId:C,panZoom:O,translateExtent:L,flowWidth:V,flowHeight:Z}=_n(TK,di),z=(n==null?void 0:n.width)??wK,K=(n==null?void 0:n.height)??EK,I=A.width/z,j=A.height/K,G=Math.max(I,j),ee=G*z,F=G*K,ne=E*G,le=A.x-(ee-A.width)/2-ne,ce=A.y-(F-A.height)/2-ne,ie=ee+ne*2,oe=F+ne*2,ae=`${MK}-${C}`,ue=re.useRef(0),ve=re.useRef();ue.current=G,re.useEffect(()=&gt;{if(N.current&amp;&amp;O)return ve.current=WX({domNode:N.current,panZoom:O,getTransform:()=&gt;R.getState().transform,getViewScale:()=&gt;ue.current}),()=&gt;{var lt;(lt=ve.current)==null||lt.destroy()}},[O]),re.useEffect(()=&gt;{var lt;(lt=ve.current)==null||lt.update({translateExtent:L,width:V,height:Z,inversePan:T,pannable:x,zoomStep:w,zoomable:b})},[x,b,T,w,L,V,Z]);const He=g?lt=&gt;{var Q;const[We,Ye]=((Q=ve.current)==null?void 0:Q.pointer(lt))||[0,0];g(lt,{x:We,y:Ye})}:void 0,Xe=v?re.useCallback((lt,We)=&gt;{const Ye=R.getState().nodeLookup.get(We);v(lt,Ye)},[]):void 0;return P.jsx(e_,{position:m,style:{...n,&quot;--xy-minimap-background-color-props&quot;:typeof u==&quot;string&quot;?u:void 0,&quot;--xy-minimap-mask-background-color-props&quot;:typeof h==&quot;string&quot;?h:void 0,&quot;--xy-minimap-mask-stroke-color-props&quot;:typeof f==&quot;string&quot;?f:void 0,&quot;--xy-minimap-mask-stroke-width-props&quot;:typeof p==&quot;number&quot;?p*G:void 0,&quot;--xy-minimap-node-background-color-props&quot;:typeof i==&quot;string&quot;?i:void 0,&quot;--xy-minimap-node-stroke-color-props&quot;:typeof t==&quot;string&quot;?t:void 0,&quot;--xy-minimap-node-stroke-width-props&quot;:typeof o==&quot;string&quot;?o:void 0},className:Di([&quot;react-flow__minimap&quot;,e]),&quot;data-testid&quot;:&quot;rf__minimap&quot;,children:P.jsxs(&quot;svg&quot;,{width:z,height:K,viewBox:`${le} ${ce} ${ie} ${oe}`,className:&quot;react-flow__minimap-svg&quot;,role:&quot;img&quot;,&quot;aria-labelledby&quot;:ae,ref:N,onClick:He,children:[_&amp;&amp;P.jsx(&quot;title&quot;,{id:ae,children:_}),P.jsx(SK,{onClick:Xe,nodeColor:i,nodeStrokeColor:t,nodeBorderRadius:s,nodeClassName:r,nodeStrokeWidth:o,nodeComponent:l}),P.jsx(&quot;path&quot;,{className:&quot;react-flow__minimap-mask&quot;,d:`M${le-ne},${ce-ne}h${ie+ne*2}v${oe+ne*2}h${-ie-ne*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fillRule:&quot;evenodd&quot;,pointerEvents:&quot;none&quot;})]})})}fL.displayName=&quot;MiniMap&quot;;const AK=re.memo(fL);function CK({nodeId:n,position:e,variant:t=dd.Handle,className:i,style:r={},children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:h=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,shouldResize:m,onResizeStart:g,onResize:v,onResizeEnd:x}){const b=jP(),_=typeof n==&quot;string&quot;?n:b,T=$n(),w=re.useRef(null),E=t===dd.Line?&quot;right&quot;:&quot;bottom-right&quot;,R=e??E,N=re.useRef(null);re.useEffect(()=&gt;{if(!(!w.current||!_))return N.current||(N.current=oq({domNode:w.current,nodeId:_,getStoreItems:()=&gt;{const{nodeLookup:O,transform:L,snapGrid:V,snapToGrid:Z,nodeOrigin:z,domNode:K}=T.getState();return{nodeLookup:O,transform:L,snapGrid:V,snapToGrid:Z,nodeOrigin:z,paneDomNode:K}},onChange:(O,L)=&gt;{const{triggerNodeChanges:V,nodeLookup:Z,parentLookup:z,nodeOrigin:K}=T.getState(),I=[],j={x:O.x,y:O.y},G=Z.get(_);if(G&amp;&amp;G.expandParent&amp;&amp;G.parentId){const ee=G.origin??K,F=O.width??G.measured.width??0,ne=O.height??G.measured.height??0,le={id:G.id,parentId:G.parentId,rect:{width:F,height:ne,...fP({x:O.x??G.position.x,y:O.y??G.position.y},{width:F,height:ne},G.parentId,Z,ee)}},ce=Zw([le],Z,z,K);I.push(...ce),j.x=O.x?Math.max(ee[0]*F,O.x):void 0,j.y=O.y?Math.max(ee[1]*ne,O.y):void 0}if(j.x!==void 0&amp;&amp;j.y!==void 0){const ee={id:_,type:&quot;position&quot;,position:{...j}};I.push(ee)}if(O.width!==void 0&amp;&amp;O.height!==void 0){const ee={id:_,type:&quot;dimensions&quot;,resizing:!0,setAttributes:!0,dimensions:{width:O.width,height:O.height}};I.push(ee)}for(const ee of L){const F={...ee,type:&quot;position&quot;};I.push(F)}V(I)},onEnd:()=&gt;{const O={id:_,type:&quot;dimensions&quot;,resizing:!1};T.getState().triggerNodeChanges([O])}})),N.current.update({controlPosition:R,boundaries:{minWidth:l,minHeight:u,maxWidth:h,maxHeight:f},keepAspectRatio:p,onResizeStart:g,onResize:v,onResizeEnd:x,shouldResize:m}),()=&gt;{var O;(O=N.current)==null||O.destroy()}},[R,l,u,h,f,p,g,v,x,m]);const A=R.split(&quot;-&quot;),D=t===dd.Line?&quot;borderColor&quot;:&quot;backgroundColor&quot;,C=o?{...r,[D]:o}:r;return P.jsx(&quot;div&quot;,{className:Di([&quot;react-flow__resize-control&quot;,&quot;nodrag&quot;,...A,t,i]),ref:w,style:C,children:s})}re.memo(CK);const Ks=Eo(n=&gt;({isNodeEditorVisible:!1,setIsNodeEditorVisible:e=&gt;n({isNodeEditorVisible:e}),nodes:[{id:&quot;1&quot;,type:&quot;input&quot;,data:{label:&quot;Start Procedure&quot;},position:{x:250,y:0}}],edges:[],setNodes:e=&gt;n({nodes:e}),setEdges:e=&gt;n({edges:e}),onNodesChange:e=&gt;n(t=&gt;({nodes:FP(e,t.nodes)})),onEdgesChange:e=&gt;n(t=&gt;({edges:zP(e,t.edges)})),onConnect:e=&gt;n(t=&gt;({edges:_P(e,t.edges)})),use_node_editor_only:window.NODE_EDITOR_ONLY||!1}));async function yO(n){var s;const e=n.procedureStore();if(!e)return;const t=e.proceduresLength();if(!t)return;const i=[],r=n.server();if(r){const o=r.allFileObjectsLength();if(o)for(let l=0;l&lt;o;l++){const u=(s=n.server())==null?void 0:s.allFileObjects(l);if(u){const h={id:`file-object-${l}`,type:&quot;file_object&quot;,position:{x:250,y:l*100-100},data:{label:u.name(),description:u.fileType().toString(),filepath:u.filepath(),filetype:So[u.fileType()].toString(),fileobject:u,fileobjectT:u.unpack(),glbFile:u.glbFile(),IfcSqliteFile:u.ifcsqliteFile(),isProcedureOutput:u.isProcedureOutput()}};i.push(h)}}}for(let o=0;o&lt;t;o++){const l=e.procedures(o);if(l){const u=l.unpack(),h={};for(let m=0;m&lt;u.fileInputs.length;m++){const g=u.fileInputs[m];g&amp;&amp;g.argName&amp;&amp;(h[g.argName.toString()]=g)}const f={};for(let m=0;m&lt;u.fileOutputs.length;m++){const g=u.fileOutputs[m];g&amp;&amp;g.argName&amp;&amp;(f[g.argName.toString()]=g)}const p={id:`procedure-${o}`,type:&quot;procedure&quot;,position:{x:250,y:o*100},data:{label:l.name(),description:l.description(),scriptFileLocation:l.scriptFileLocation(),procedure:u,fileInputsMap:h,fileOutputsMap:f}};i.push(p)}}Ks.getState().setNodes(i)}function RK(n){var p,m,g;let e=(p=n.procedureParent())==null?void 0:p.procedureIdString();if(!e){console.error(&quot;No procedure ID found in the message&quot;);return}const t=Ks.getState().nodes,i=t.find(v=&gt;v.id===e);let r=t.length+1,s=((m=i==null?void 0:i.position)==null?void 0:m.x)||250,o=((g=i==null?void 0:i.position)==null?void 0:g.y)||0,l=(i==null?void 0:i.width)||200;const u={id:`file-object-${r}`,type:&quot;file_object&quot;,position:{x:s+l+50,y:o},data:{label:n.name(),description:n.fileType().toString(),filepath:n.filepath(),filetype:So[n.fileType()].toString(),fileobject:n,glbFile:n.glbFile(),IfcSqliteFile:n.ifcsqliteFile(),isProcedureOutput:n.isProcedureOutput()}},h={id:`edge-${r}`,source:u.id,target:e},f=Ks.getState().edges;Ks.getState().setNodes([...t,u]),Ks.getState().setEdges([...f,h])}async function OK(n){var t,i;console.log(&quot;receive_procedure&quot;),console.log(&quot;Instance ID:&quot;,n.instanceId());let e=(t=n.serverReply())==null?void 0:t.fileObjectsLength();if(e)for(let r=0;r&lt;e;r++){let s=(i=n.serverReply())==null?void 0:i.fileObjects(r);if(!s){console.error(&quot;No file object found in the message&quot;);continue}RK(s)}}const e1=Eo(n=&gt;({serverFiles:[],setServerFiles:e=&gt;n({serverFiles:e}),showServerInfoBox:!1,setShowServerInfoBox:e=&gt;n({showServerInfoBox:e}),showUrdfLoader:!1,setShowUrdfLoader:e=&gt;n({showUrdfLoader:e})}));async function DK(n){n.unpack(),e1.getState().setShowServerInfoBox(!0)}async function NK(n){var e,t,i;try{const r=new Ad(new Uint8Array(n)),s=at.getRootAsMessage(r),o=s.commandType();switch(o){case Bn.PING:await lG(s);break;case Bn.UPDATE_SCENE:await cR(s),await yO(s);break;case Bn.MESH_INFO_REPLY:await uR(s);break;case Bn.SERVER_REPLY:const l=(e=s.serverReply())==null?void 0:e.replyTo();switch(l){case Bn.LIST_PROCEDURES:await yO(s);break;case Bn.MESH_INFO_CALLBACK:await uR(s);break;case Bn.VIEW_FILE_OBJECT:console.log(&quot;VIEW_FILE_OBJECT Server Reply message received&quot;),await cR(s);break;case Bn.RUN_PROCEDURE:console.log(&quot;RUN_PROCEDURE Server Reply message received&quot;),await OK(s);break;case Bn.LIST_FILE_OBJECTS:await DK(s);break;default:console.error(&quot;Unknown Server Reply type:&quot;,l)}break;case Bn.ERROR:console.error(&quot;Server Error message received:&quot;),console.error((i=(t=s.serverReply())==null?void 0:t.error())==null?void 0:i.message());break;default:console.error(&quot;Unknown FlatBuffer message type:&quot;,Bn[o])}console.log(&quot;Flatbuffer message received&quot;),console.log(&quot;Instance ID:&quot;,s.instanceId()),console.log(&quot;Command Type:&quot;,Bn[s.commandType()]),console.log(&quot;Mesh Info:&quot;,s.meshInfo())}catch(r){console.error(&quot;Error handling FlatBuffer message:&quot;,r)}}async function dL(n){try{if(n.data instanceof Blob){const e=await n.data.arrayBuffer();await NK(e)}else console.log(&quot;Message from server&quot;,n.data)}catch(e){console.error(&quot;Error handling WebSocket message:&quot;,e)}}const Bc=Eo(n=&gt;({isOptionsVisible:!1,showPerf:!1,showEdges:!0,lockTranslation:!1,enableWebsocket:!0,enableNodeEditor:!1,setIsOptionsVisible:e=&gt;n({isOptionsVisible:e}),setShowPerf:e=&gt;n({showPerf:e}),setShowEdges:e=&gt;n({showEdges:e}),setLockTranslation:e=&gt;n({lockTranslation:e}),setEnableNodeEditor:e=&gt;n({enableNodeEditor:e}),setEnableWebsocket:async e=&gt;{n({enableWebsocket:e});try{if(e){const t=WN.getState().webSocketAddress;await Ei.connect(t),(async()=&gt;{for await(const i of Ei.messages())await dL(i)})().catch(i=&gt;{console.error(&quot;Error in WS message loop:&quot;,i)})}else await Ei.disconnect()}catch(t){console.error(&quot;Error toggling WebSocket:&quot;,t)}}})),Nh=Eo(n=&gt;({selectedObjects:new Map,addSelectedObject:(e,t)=&gt;n(i=&gt;{const r=new Map(i.selectedObjects),s=new Set(r.get(e)||[]);return s.add(t),r.set(e,s),e instanceof bs?e.updateSelectionGroups(Array.from(s)):e.traverse(o=&gt;{o instanceof bs&amp;&amp;o.updateSelectionGroups(Array.from(s))}),{selectedObjects:r}}),removeSelectedObject:(e,t)=&gt;n(i=&gt;{const r=new Map(i.selectedObjects),s=r.get(e);if(s){const o=new Set(s);o.delete(t),o.size===0?(e.clearSelectionGroups(),r.delete(e)):(r.set(e,o),e.updateSelectionGroups(Array.from(o)))}return{selectedObjects:r}}),clearSelectedObjects:()=&gt;n(e=&gt;(e.selectedObjects.forEach((t,i)=&gt;{i instanceof bs?i.clearSelectionGroups():i.traverse(r=&gt;{r instanceof bs&amp;&amp;r.clearSelectionGroups()})}),{selectedObjects:new Map})),addBatchofMeshes:e=&gt;n(t=&gt;{const i=new Map(t.selectedObjects),r=new Map;return e.forEach(([s,o])=&gt;{r.has(s)||r.set(s,new Set),r.get(s).add(o)}),r.forEach((s,o)=&gt;{const l=new Set(i.get(o)||[]);s.forEach(u=&gt;l.add(u)),i.set(o,l),o instanceof bs?o.updateSelectionGroups(Array.from(l)):o.traverse(u=&gt;{u instanceof bs&amp;&amp;u.updateSelectionGroups(Array.from(l))})}),{selectedObjects:i}})})),_O={type:&quot;change&quot;},t1={type:&quot;start&quot;},pL={type:&quot;end&quot;},ug=new bl,vO=new Qo,IK=Math.cos(70*rl.DEG2RAD),Li=new Y,Dr=2*Math.PI,kn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},wx=1e-6;class Ic extends kN{constructor(e,t=null){super(e,t),this.state=kn.NONE,this.target=new Y,this.cursor=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:&quot;ArrowLeft&quot;,UP:&quot;ArrowUp&quot;,RIGHT:&quot;ArrowRight&quot;,BOTTOM:&quot;ArrowDown&quot;},this.mouseButtons={LEFT:_c.ROTATE,MIDDLE:_c.DOLLY,RIGHT:_c.PAN},this.touches={ONE:uc.ROTATE,TWO:uc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Y,this._lastQuaternion=new Si,this._lastTargetPosition=new Y,this._quat=new Si().setFromUnitVectors(e.up,new Y(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new uS,this._sphericalDelta=new uS,this._scale=1,this._panOffset=new Y,this._rotateStart=new Oe,this._rotateEnd=new Oe,this._rotateDelta=new Oe,this._panStart=new Oe,this._panEnd=new Oe,this._panDelta=new Oe,this._dollyStart=new Oe,this._dollyEnd=new Oe,this._dollyDelta=new Oe,this._dollyDirection=new Y,this._mouse=new Oe,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=LK.bind(this),this._onPointerDown=PK.bind(this),this._onPointerUp=UK.bind(this),this._onContextMenu=GK.bind(this),this._onMouseWheel=zK.bind(this),this._onKeyDown=BK.bind(this),this._onTouchStart=HK.bind(this),this._onTouchMove=VK.bind(this),this._onMouseDown=kK.bind(this),this._onMouseMove=FK.bind(this),this._interceptControlDown=jK.bind(this),this._interceptControlUp=WK.bind(this),this.domElement!==null&amp;&amp;this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener(&quot;pointerdown&quot;,this._onPointerDown),this.domElement.addEventListener(&quot;pointercancel&quot;,this._onPointerUp),this.domElement.addEventListener(&quot;contextmenu&quot;,this._onContextMenu),this.domElement.addEventListener(&quot;wheel&quot;,this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener(&quot;keydown&quot;,this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction=&quot;none&quot;}disconnect(){this.domElement.removeEventListener(&quot;pointerdown&quot;,this._onPointerDown),this.domElement.removeEventListener(&quot;pointermove&quot;,this._onPointerMove),this.domElement.removeEventListener(&quot;pointerup&quot;,this._onPointerUp),this.domElement.removeEventListener(&quot;pointercancel&quot;,this._onPointerUp),this.domElement.removeEventListener(&quot;wheel&quot;,this._onMouseWheel),this.domElement.removeEventListener(&quot;contextmenu&quot;,this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener(&quot;keydown&quot;,this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction=&quot;auto&quot;}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener(&quot;keydown&quot;,this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&amp;&amp;(this._domElementKeyEvents.removeEventListener(&quot;keydown&quot;,this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(_O),this.update(),this.state=kn.NONE}update(e=null){const t=this.object.position;Li.copy(t).sub(this.target),Li.applyQuaternion(this._quat),this._spherical.setFromVector3(Li),this.autoRotate&amp;&amp;this.state===kn.NONE&amp;&amp;this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&amp;&amp;isFinite(r)&amp;&amp;(i&lt;-Math.PI?i+=Dr:i&gt;Math.PI&amp;&amp;(i-=Dr),r&lt;-Math.PI?r+=Dr:r&gt;Math.PI&amp;&amp;(r-=Dr),i&lt;=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta&gt;(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&amp;&amp;this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(Li.setFromSpherical(this._spherical),Li.applyQuaternion(this._quatInverse),t.copy(this.target).add(Li),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&amp;&amp;this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const l=Li.length();o=this._clampDistance(l*this._scale);const u=l-o;this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),s=!!u}else if(this.object.isOrthographicCamera){const l=new Y(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const u=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=u!==this.object.zoom;const h=new Y(this._mouse.x,this._mouse.y,0);h.unproject(this.object),this.object.position.sub(h).add(l),this.object.updateMatrixWorld(),o=Li.length()}else console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled.&quot;),this.zoomToCursor=!1;o!==null&amp;&amp;(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(ug.origin.copy(this.object.position),ug.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(ug.direction))&lt;IK?this.object.lookAt(this.target):(vO.setFromNormalAndCoplanarPoint(this.object.up,this.target),ug.intersectPlane(vO,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&amp;&amp;(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)&gt;wx||8*(1-this._lastQuaternion.dot(this.object.quaternion))&gt;wx||this._lastTargetPosition.distanceToSquared(this.target)&gt;wx?(this.dispatchEvent(_O),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Dr/60*this.autoRotateSpeed*e:Dr/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Li.setFromMatrixColumn(t,0),Li.multiplyScalar(-e),this._panOffset.add(Li)}_panUp(e,t){this.screenSpacePanning===!0?Li.setFromMatrixColumn(t,1):(Li.setFromMatrixColumn(t,0),Li.crossVectors(this.object.up,Li)),Li.multiplyScalar(e),this._panOffset.add(Li)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;Li.copy(r).sub(this.target);let s=Li.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/i.clientHeight,this.object.matrix),this._panUp(2*t*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.&quot;),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.&quot;),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn(&quot;WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.&quot;),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),r=e-i.left,s=t-i.top,o=i.width,l=i.height;this._mouse.x=r/o*2-1,this._mouse.y=-(s/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Dr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Dr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y&gt;0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y&lt;0&amp;&amp;this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY&lt;0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY&gt;0&amp;&amp;this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateUp(Dr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateUp(-Dr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateLeft(Dr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&amp;&amp;this._rotateLeft(-Dr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&amp;&amp;this._pan(-this.keyPanSpeed,0),t=!0;break}t&amp;&amp;(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&amp;&amp;this._handleTouchStartDolly(e),this.enablePan&amp;&amp;this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&amp;&amp;this._handleTouchStartDolly(e),this.enableRotate&amp;&amp;this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),s=.5*(e.pageY+i.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Dr*this._rotateDelta.x/t.clientHeight),this._rotateUp(Dr*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,l=(e.pageY+t.y)*.5;this._updateZoomParameters(o,l)}_handleTouchMoveDollyPan(e){this.enableZoom&amp;&amp;this._handleTouchMoveDolly(e),this.enablePan&amp;&amp;this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&amp;&amp;this._handleTouchMoveDolly(e),this.enableRotate&amp;&amp;this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t&lt;this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t&lt;this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&amp;&amp;(t=new Oe,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&amp;&amp;!this._controlActive&amp;&amp;(i.deltaY*=10),i}}function PK(n){this.enabled!==!1&amp;&amp;(this._pointers.length===0&amp;&amp;(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener(&quot;pointermove&quot;,this._onPointerMove),this.domElement.addEventListener(&quot;pointerup&quot;,this._onPointerUp)),!this._isTrackingPointer(n)&amp;&amp;(this._addPointer(n),n.pointerType===&quot;touch&quot;?this._onTouchStart(n):this._onMouseDown(n)))}function LK(n){this.enabled!==!1&amp;&amp;(n.pointerType===&quot;touch&quot;?this._onTouchMove(n):this._onMouseMove(n))}function UK(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener(&quot;pointermove&quot;,this._onPointerMove),this.domElement.removeEventListener(&quot;pointerup&quot;,this._onPointerUp),this.dispatchEvent(pL),this.state=kn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function kK(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case _c.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=kn.DOLLY;break;case _c.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=kn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=kn.ROTATE}break;case _c.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=kn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=kn.PAN}break;default:this.state=kn.NONE}this.state!==kn.NONE&amp;&amp;this.dispatchEvent(t1)}function FK(n){switch(this.state){case kn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case kn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case kn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function zK(n){this.enabled===!1||this.enableZoom===!1||this.state!==kn.NONE||(n.preventDefault(),this.dispatchEvent(t1),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(pL))}function BK(n){this.enabled!==!1&amp;&amp;this._handleKeyDown(n)}function HK(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case uc.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=kn.TOUCH_ROTATE;break;case uc.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=kn.TOUCH_PAN;break;default:this.state=kn.NONE}break;case 2:switch(this.touches.TWO){case uc.DOLLY_PAN:if(this.enableZoom===!1&amp;&amp;this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=kn.TOUCH_DOLLY_PAN;break;case uc.DOLLY_ROTATE:if(this.enableZoom===!1&amp;&amp;this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=kn.TOUCH_DOLLY_ROTATE;break;default:this.state=kn.NONE}break;default:this.state=kn.NONE}this.state!==kn.NONE&amp;&amp;this.dispatchEvent(t1)}function VK(n){switch(this._trackPointer(n),this.state){case kn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case kn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case kn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&amp;&amp;this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case kn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&amp;&amp;this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=kn.NONE}}function GK(n){this.enabled!==!1&amp;&amp;n.preventDefault()}function jK(n){n.key===&quot;Control&quot;&amp;&amp;(this._controlActive=!0,this.domElement.getRootNode().addEventListener(&quot;keyup&quot;,this._interceptControlUp,{passive:!0,capture:!0}))}function WK(n){n.key===&quot;Control&quot;&amp;&amp;(this._controlActive=!1,this.domElement.getRootNode().removeEventListener(&quot;keyup&quot;,this._interceptControlUp,{passive:!0,capture:!0}))}const XK=(n,e,t=1)=&gt;{const i=Nh.getState().selectedObjects,{zIsUp:r}=eo.getState();if(n&amp;&amp;e&amp;&amp;i.size&gt;0){const s=new Ri,o=new Y;if(i.forEach((l,u)=&gt;{const h=u.geometry,f=h.getAttribute(&quot;position&quot;),p=h.getIndex();if(!f){console.warn(&quot;Geometry has no position attribute.&quot;);return}if(!p){console.warn(&quot;Geometry has no index buffer.&quot;);return}const m=p.array;l.forEach(g=&gt;{const v=u.drawRanges.get(g);if(v){const[x,b]=v;if(x&lt;0||x+b&gt;m.length){console.warn(`Draw range (start: ${x}, count: ${b}) is out of bounds.`);return}for(let _=x;_&lt;x+b;_++){const T=m[_];if(T&lt;0||T&gt;=f.count){console.warn(`Index ${T} at position ${_} is out of bounds.`);continue}if(o.fromBufferAttribute(f,T),isNaN(o.x)||isNaN(o.y)||isNaN(o.z)){console.warn(`NaN detected in vertex position at index ${T}. Skipping.`);continue}u.localToWorld(o),s.expandByPoint(o)}}else console.warn(`Draw range ID ${g} not found in mesh.`)})}),s.isEmpty())console.warn(&quot;Bounding box is empty after processing selected vertices.&quot;);else{const l=new wi;s.getBoundingSphere(l);const u=l.center,h=l.radius;if(h===0||isNaN(h)){console.warn(&quot;Selection has zero size or invalid radius.&quot;);return}let f=0;if(e instanceof Yn){const g=e.fov*Math.PI/180;f=h/Math.sin(g/2)/t}else if(e instanceof Fc){const g=e.right/e.top;e.top=h/t,e.bottom=-h/t,e.left=-h*g/t,e.right=h*g/t,e.updateProjectionMatrix(),f=e.position.distanceTo(u)}else{console.warn(&quot;Unknown camera type.&quot;);return}const p=new Y;e.getWorldDirection(p).normalize();const m=u.clone().add(p.multiplyScalar(-f));if(e.position.copy(m),r?e.up.set(0,0,1):e.up.set(0,1,0),e.lookAt(u),e.updateProjectionMatrix(),n instanceof Ic)n.target.copy(u),n.update();else{const g=n,v=new wi(u,h/t);g.fitToSphere(v,!0)}}}else console.warn(&quot;No selected objects to center view on.&quot;)};/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const ni={LEFT:1,RIGHT:2,MIDDLE:4},Se=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),Uu={NONE:0,IN:1,OUT:-1};function tc(n){return n.isPerspectiveCamera}function el(n){return n.isOrthographicCamera}const ku=Math.PI*2,bO=Math.PI/2,mL=1e-5,Hf=Math.PI/180;function Bs(n,e,t){return Math.max(e,Math.min(t,n))}function Gn(n,e=mL){return Math.abs(n)&lt;e}function An(n,e,t=mL){return Gn(n-e,t)}function xO(n,e){return Math.round(n/e)*e}function Vf(n){return isFinite(n)?n:n&lt;0?-Number.MAX_VALUE:Number.MAX_VALUE}function Gf(n){return Math.abs(n)&lt;Number.MAX_VALUE?n:n*(1/0)}function hg(n,e,t,i,r=1/0,s){i=Math.max(1e-4,i);const o=2/i,l=o*s,u=1/(1+l+.48*l*l+.235*l*l*l);let h=n-e;const f=e,p=r*i;h=Bs(h,-p,p),e=n-h;const m=(t.value+o*h)*s;t.value=(t.value-o*m)*u;let g=e+(h+m)*u;return f-n&gt;0==g&gt;f&amp;&amp;(g=f,t.value=(g-f)/s),g}function SO(n,e,t,i,r=1/0,s,o){i=Math.max(1e-4,i);const l=2/i,u=l*s,h=1/(1+u+.48*u*u+.235*u*u*u);let f=e.x,p=e.y,m=e.z,g=n.x-f,v=n.y-p,x=n.z-m;const b=f,_=p,T=m,w=r*i,E=w*w,R=g*g+v*v+x*x;if(R&gt;E){const K=Math.sqrt(R);g=g/K*w,v=v/K*w,x=x/K*w}f=n.x-g,p=n.y-v,m=n.z-x;const N=(t.x+l*g)*s,A=(t.y+l*v)*s,D=(t.z+l*x)*s;t.x=(t.x-l*N)*h,t.y=(t.y-l*A)*h,t.z=(t.z-l*D)*h,o.x=f+(g+N)*h,o.y=p+(v+A)*h,o.z=m+(x+D)*h;const C=b-n.x,O=_-n.y,L=T-n.z,V=o.x-b,Z=o.y-_,z=o.z-T;return C*V+O*Z+L*z&gt;0&amp;&amp;(o.x=b,o.y=_,o.z=T,t.x=(o.x-b)/s,t.y=(o.y-_)/s,t.z=(o.z-T)/s),o}function Ex(n,e){e.set(0,0),n.forEach(t=&gt;{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function Tx(n,e){return el(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class qK{constructor(){this._listeners={}}addEventListener(e,t){const i=this._listeners;i[e]===void 0&amp;&amp;(i[e]=[]),i[e].indexOf(t)===-1&amp;&amp;i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i[e]!==void 0&amp;&amp;i[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&amp;&amp;r.splice(s,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&amp;&amp;(this._listeners[e].length=0)}dispatchEvent(e){const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s&lt;o;s++)r[s].call(this,e)}}}var Mx;const YK=&quot;2.10.1&quot;,fg=1/8,KK=/Mac/.test((Mx=globalThis==null?void 0:globalThis.navigator)===null||Mx===void 0?void 0:Mx.platform);let Ft,wO,dg,Ax,Nr,Yt,xn,Fu,jf,uo,ho,nc,EO,TO,gs,Wf,zu,MO,Cx,AO,Rx,Ox,pg;class vh extends qK{static install(e){Ft=e.THREE,wO=Object.freeze(new Ft.Vector3(0,0,0)),dg=Object.freeze(new Ft.Vector3(0,1,0)),Ax=Object.freeze(new Ft.Vector3(0,0,1)),Nr=new Ft.Vector2,Yt=new Ft.Vector3,xn=new Ft.Vector3,Fu=new Ft.Vector3,jf=new Ft.Vector3,uo=new Ft.Vector3,ho=new Ft.Vector3,nc=new Ft.Vector3,EO=new Ft.Vector3,TO=new Ft.Vector3,gs=new Ft.Spherical,Wf=new Ft.Spherical,zu=new Ft.Box3,MO=new Ft.Box3,Cx=new Ft.Sphere,AO=new Ft.Quaternion,Rx=new Ft.Quaternion,Ox=new Ft.Matrix4,pg=new Ft.Raycaster}static get ACTION(){return Se}set verticalDragToForward(e){console.warn(&quot;camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.&quot;)}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=&gt;{},this._enabled=!0,this._state=Se.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Uu.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Ft.Vector3,this._focalOffsetVelocity=new Ft.Vector3,this._zoomVelocity={value:0},this._truckInternal=(_,T,w,E)=&gt;{let R,N;if(tc(this._camera)){const A=Yt.copy(this._camera.position).sub(this._target),D=this._camera.getEffectiveFOV()*Hf,C=A.length()*Math.tan(D*.5);R=this.truckSpeed*_*C/this._elementRect.height,N=this.truckSpeed*T*C/this._elementRect.height}else if(el(this._camera)){const A=this._camera;R=this.truckSpeed*_*(A.right-A.left)/A.zoom/this._elementRect.width,N=this.truckSpeed*T*(A.top-A.bottom)/A.zoom/this._elementRect.height}else return;E?(w?this.setFocalOffset(this._focalOffsetEnd.x+R,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(R,0,!0),this.forward(-N,!0)):w?this.setFocalOffset(this._focalOffsetEnd.x+R,this._focalOffsetEnd.y+N,this._focalOffsetEnd.z,!0):this.truck(R,N,!0)},this._rotateInternal=(_,T)=&gt;{const w=ku*this.azimuthRotateSpeed*_/this._elementRect.height,E=ku*this.polarRotateSpeed*T/this._elementRect.height;this.rotate(w,E,!0)},this._dollyInternal=(_,T,w)=&gt;{const E=Math.pow(.95,-_*this.dollySpeed),R=this._sphericalEnd.radius,N=this._sphericalEnd.radius*E,A=Bs(N,this.minDistance,this.maxDistance),D=A-N;this.infinityDolly&amp;&amp;this.dollyToCursor?this._dollyToNoClamp(N,!0):this.infinityDolly&amp;&amp;!this.dollyToCursor?(this.dollyInFixed(D,!0),this._dollyToNoClamp(A,!0)):this._dollyToNoClamp(A,!0),this.dollyToCursor&amp;&amp;(this._changedDolly+=(this.infinityDolly?N:A)-R,this._dollyControlCoord.set(T,w)),this._lastDollyDirection=Math.sign(-_)},this._zoomInternal=(_,T,w)=&gt;{const E=Math.pow(.95,_*this.dollySpeed),R=this._zoom,N=this._zoom*E;this.zoomTo(N,!0),this.dollyToCursor&amp;&amp;(this._changedZoom+=N-R,this._dollyControlCoord.set(T,w))},typeof Ft&gt;&quot;u&quot;&amp;&amp;console.error(&quot;camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information.&quot;),this._camera=e,this._yAxisUpSpace=new Ft.Quaternion().setFromUnitVectors(this._camera.up,dg),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=Se.NONE,this._target=new Ft.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Ft.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Ft.Spherical().setFromVector3(Yt.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Ft.Vector3,new Ft.Vector3,new Ft.Vector3,new Ft.Vector3],this._updateNearPlaneCorners(),this._boundary=new Ft.Box3(new Ft.Vector3(-1/0,-1/0,-1/0),new Ft.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Ft.Vector2,this.mouseButtons={left:Se.ROTATE,middle:Se.DOLLY,right:Se.TRUCK,wheel:tc(this._camera)?Se.DOLLY:el(this._camera)?Se.ZOOM:Se.NONE},this.touches={one:Se.TOUCH_ROTATE,two:tc(this._camera)?Se.TOUCH_DOLLY_TRUCK:el(this._camera)?Se.TOUCH_ZOOM_TRUCK:Se.NONE,three:Se.TOUCH_TRUCK};const i=new Ft.Vector2,r=new Ft.Vector2,s=new Ft.Vector2,o=_=&gt;{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const E=this._domElement.getBoundingClientRect(),R=_.clientX/E.width,N=_.clientY/E.height;if(R&lt;this._interactiveArea.left||R&gt;this._interactiveArea.right||N&lt;this._interactiveArea.top||N&gt;this._interactiveArea.bottom)return}const T=_.pointerType!==&quot;mouse&quot;?null:(_.buttons&amp;ni.LEFT)===ni.LEFT?ni.LEFT:(_.buttons&amp;ni.MIDDLE)===ni.MIDDLE?ni.MIDDLE:(_.buttons&amp;ni.RIGHT)===ni.RIGHT?ni.RIGHT:null;if(T!==null){const E=this._findPointerByMouseButton(T);E&amp;&amp;this._disposePointer(E)}if((_.buttons&amp;ni.LEFT)===ni.LEFT&amp;&amp;this._lockedPointer)return;const w={pointerId:_.pointerId,clientX:_.clientX,clientY:_.clientY,deltaX:0,deltaY:0,mouseButton:T};this._activePointers.push(w),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this._domElement.ownerDocument.addEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.addEventListener(&quot;pointerup&quot;,u),this._isDragging=!0,m(_)},l=_=&gt;{_.cancelable&amp;&amp;_.preventDefault();const T=_.pointerId,w=this._lockedPointer||this._findPointerById(T);if(w){if(w.clientX=_.clientX,w.clientY=_.clientY,w.deltaX=_.movementX,w.deltaY=_.movementY,this._state=0,_.pointerType===&quot;touch&quot;)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&amp;&amp;this._lockedPointer||this._isDragging&amp;&amp;(_.buttons&amp;ni.LEFT)===ni.LEFT)&amp;&amp;(this._state=this._state|this.mouseButtons.left),this._isDragging&amp;&amp;(_.buttons&amp;ni.MIDDLE)===ni.MIDDLE&amp;&amp;(this._state=this._state|this.mouseButtons.middle),this._isDragging&amp;&amp;(_.buttons&amp;ni.RIGHT)===ni.RIGHT&amp;&amp;(this._state=this._state|this.mouseButtons.right);g()}},u=_=&gt;{const T=this._findPointerById(_.pointerId);if(!(T&amp;&amp;T===this._lockedPointer)){if(T&amp;&amp;this._disposePointer(T),_.pointerType===&quot;touch&quot;)switch(this._activePointers.length){case 0:this._state=Se.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=Se.NONE;v()}};let h=-1;const f=_=&gt;{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===Se.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const N=this._domElement.getBoundingClientRect(),A=_.clientX/N.width,D=_.clientY/N.height;if(A&lt;this._interactiveArea.left||A&gt;this._interactiveArea.right||D&lt;this._interactiveArea.top||D&gt;this._interactiveArea.bottom)return}if(_.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===Se.ROTATE||this.mouseButtons.wheel===Se.TRUCK){const N=performance.now();h-N&lt;1e3&amp;&amp;this._getClientRect(this._elementRect),h=N}const T=KK?-1:-3,w=_.deltaMode===1||_.ctrlKey?_.deltaY/T:_.deltaY/(T*10),E=this.dollyToCursor?(_.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,R=this.dollyToCursor?(_.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case Se.ROTATE:{this._rotateInternal(_.deltaX,_.deltaY),this._isUserControllingRotate=!0;break}case Se.TRUCK:{this._truckInternal(_.deltaX,_.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case Se.SCREEN_PAN:{this._truckInternal(_.deltaX,_.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case Se.OFFSET:{this._truckInternal(_.deltaX,_.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case Se.DOLLY:{this._dollyInternal(-w,E,R),this._isUserControllingDolly=!0;break}case Se.ZOOM:{this._zoomInternal(-w,E,R),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:&quot;control&quot;})},p=_=&gt;{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===vh.ACTION.NONE){const T=_ instanceof PointerEvent?_.pointerId:0,w=this._findPointerById(T);w&amp;&amp;this._disposePointer(w),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u);return}_.preventDefault()}},m=_=&gt;{if(!this._enabled)return;if(Ex(this._activePointers,Nr),this._getClientRect(this._elementRect),i.copy(Nr),r.copy(Nr),this._activePointers.length&gt;=2){const w=Nr.x-this._activePointers[1].clientX,E=Nr.y-this._activePointers[1].clientY,R=Math.sqrt(w*w+E*E);s.set(0,R);const N=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,A=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(N,A)}if(this._state=0,!_)this._lockedPointer&amp;&amp;(this._state=this._state|this.mouseButtons.left);else if(&quot;pointerType&quot;in _&amp;&amp;_.pointerType===&quot;touch&quot;)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&amp;&amp;(_.buttons&amp;ni.LEFT)===ni.LEFT&amp;&amp;(this._state=this._state|this.mouseButtons.left),(_.buttons&amp;ni.MIDDLE)===ni.MIDDLE&amp;&amp;(this._state=this._state|this.mouseButtons.middle),(_.buttons&amp;ni.RIGHT)===ni.RIGHT&amp;&amp;(this._state=this._state|this.mouseButtons.right);((this._state&amp;Se.ROTATE)===Se.ROTATE||(this._state&amp;Se.TOUCH_ROTATE)===Se.TOUCH_ROTATE||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE)&amp;&amp;(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&amp;Se.TRUCK)===Se.TRUCK||(this._state&amp;Se.SCREEN_PAN)===Se.SCREEN_PAN||(this._state&amp;Se.TOUCH_TRUCK)===Se.TOUCH_TRUCK||(this._state&amp;Se.TOUCH_SCREEN_PAN)===Se.TOUCH_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN)&amp;&amp;(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&amp;Se.DOLLY)===Se.DOLLY||(this._state&amp;Se.TOUCH_DOLLY)===Se.TOUCH_DOLLY||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE)&amp;&amp;(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&amp;Se.ZOOM)===Se.ZOOM||(this._state&amp;Se.TOUCH_ZOOM)===Se.TOUCH_ZOOM||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_ZOOM_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE)&amp;&amp;(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&amp;Se.OFFSET)===Se.OFFSET||(this._state&amp;Se.TOUCH_OFFSET)===Se.TOUCH_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET)&amp;&amp;(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:&quot;controlstart&quot;})},g=()=&gt;{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,Ex(this._activePointers,Nr);const T=this._domElement&amp;&amp;this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,w=T?-T.deltaX:r.x-Nr.x,E=T?-T.deltaY:r.y-Nr.y;if(r.copy(Nr),((this._state&amp;Se.ROTATE)===Se.ROTATE||(this._state&amp;Se.TOUCH_ROTATE)===Se.TOUCH_ROTATE||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE)&amp;&amp;(this._rotateInternal(w,E),this._isUserControllingRotate=!0),(this._state&amp;Se.DOLLY)===Se.DOLLY||(this._state&amp;Se.ZOOM)===Se.ZOOM){const R=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,N=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0,A=this.dollyDragInverted?-1:1;(this._state&amp;Se.DOLLY)===Se.DOLLY?(this._dollyInternal(A*E*fg,R,N),this._isUserControllingDolly=!0):(this._zoomInternal(A*E*fg,R,N),this._isUserControllingZoom=!0)}if((this._state&amp;Se.TOUCH_DOLLY)===Se.TOUCH_DOLLY||(this._state&amp;Se.TOUCH_ZOOM)===Se.TOUCH_ZOOM||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_ZOOM_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_ZOOM_ROTATE)===Se.TOUCH_ZOOM_ROTATE){const R=Nr.x-this._activePointers[1].clientX,N=Nr.y-this._activePointers[1].clientY,A=Math.sqrt(R*R+N*N),D=s.y-A;s.set(0,A);const C=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,O=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&amp;Se.TOUCH_DOLLY)===Se.TOUCH_DOLLY||(this._state&amp;Se.TOUCH_DOLLY_ROTATE)===Se.TOUCH_DOLLY_ROTATE||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET?(this._dollyInternal(D*fg,C,O),this._isUserControllingDolly=!0):(this._zoomInternal(D*fg,C,O),this._isUserControllingZoom=!0)}((this._state&amp;Se.TRUCK)===Se.TRUCK||(this._state&amp;Se.TOUCH_TRUCK)===Se.TOUCH_TRUCK||(this._state&amp;Se.TOUCH_DOLLY_TRUCK)===Se.TOUCH_DOLLY_TRUCK||(this._state&amp;Se.TOUCH_ZOOM_TRUCK)===Se.TOUCH_ZOOM_TRUCK)&amp;&amp;(this._truckInternal(w,E,!1,!1),this._isUserControllingTruck=!0),((this._state&amp;Se.SCREEN_PAN)===Se.SCREEN_PAN||(this._state&amp;Se.TOUCH_SCREEN_PAN)===Se.TOUCH_SCREEN_PAN||(this._state&amp;Se.TOUCH_DOLLY_SCREEN_PAN)===Se.TOUCH_DOLLY_SCREEN_PAN||(this._state&amp;Se.TOUCH_ZOOM_SCREEN_PAN)===Se.TOUCH_ZOOM_SCREEN_PAN)&amp;&amp;(this._truckInternal(w,E,!1,!0),this._isUserControllingTruck=!0),((this._state&amp;Se.OFFSET)===Se.OFFSET||(this._state&amp;Se.TOUCH_OFFSET)===Se.TOUCH_OFFSET||(this._state&amp;Se.TOUCH_DOLLY_OFFSET)===Se.TOUCH_DOLLY_OFFSET||(this._state&amp;Se.TOUCH_ZOOM_OFFSET)===Se.TOUCH_ZOOM_OFFSET)&amp;&amp;(this._truckInternal(w,E,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:&quot;control&quot;})},v=()=&gt;{Ex(this._activePointers,Nr),r.copy(Nr),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&amp;&amp;this._activePointers[0]===this._lockedPointer)&amp;&amp;(this._isDragging=!1),this._activePointers.length===0&amp;&amp;this._domElement&amp;&amp;(this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this.dispatchEvent({type:&quot;controlend&quot;}))};this.lockPointer=()=&gt;{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener(&quot;pointerlockchange&quot;,x),this._domElement.ownerDocument.addEventListener(&quot;pointerlockerror&quot;,b),this._domElement.ownerDocument.addEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.addEventListener(&quot;pointerup&quot;,u),m())},this.unlockPointer=()=&gt;{var _,T,w;this._lockedPointer!==null&amp;&amp;(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(_=this._domElement)===null||_===void 0||_.ownerDocument.exitPointerLock(),(T=this._domElement)===null||T===void 0||T.ownerDocument.removeEventListener(&quot;pointerlockchange&quot;,x),(w=this._domElement)===null||w===void 0||w.ownerDocument.removeEventListener(&quot;pointerlockerror&quot;,b),this.cancel()};const x=()=&gt;{this._domElement&amp;&amp;this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},b=()=&gt;{this.unlockPointer()};this._addAllEventListeners=_=&gt;{this._domElement=_,this._domElement.style.touchAction=&quot;none&quot;,this._domElement.style.userSelect=&quot;none&quot;,this._domElement.style.webkitUserSelect=&quot;none&quot;,this._domElement.addEventListener(&quot;pointerdown&quot;,o),this._domElement.addEventListener(&quot;pointercancel&quot;,u),this._domElement.addEventListener(&quot;wheel&quot;,f,{passive:!1}),this._domElement.addEventListener(&quot;contextmenu&quot;,p)},this._removeAllEventListeners=()=&gt;{this._domElement&amp;&amp;(this._domElement.style.touchAction=&quot;&quot;,this._domElement.style.userSelect=&quot;&quot;,this._domElement.style.webkitUserSelect=&quot;&quot;,this._domElement.removeEventListener(&quot;pointerdown&quot;,o),this._domElement.removeEventListener(&quot;pointercancel&quot;,u),this._domElement.removeEventListener(&quot;wheel&quot;,f,{passive:!1}),this._domElement.removeEventListener(&quot;contextmenu&quot;,p),this._domElement.ownerDocument.removeEventListener(&quot;pointermove&quot;,l,{passive:!1}),this._domElement.ownerDocument.removeEventListener(&quot;pointerup&quot;,u),this._domElement.ownerDocument.removeEventListener(&quot;pointerlockchange&quot;,x),this._domElement.ownerDocument.removeEventListener(&quot;pointerlockerror&quot;,b))},this.cancel=()=&gt;{this._state!==Se.NONE&amp;&amp;(this._state=Se.NONE,this._activePointers.length=0,v())},t&amp;&amp;this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&amp;&amp;(e?(this._domElement.style.touchAction=&quot;none&quot;,this._domElement.style.userSelect=&quot;none&quot;,this._domElement.style.webkitUserSelect=&quot;none&quot;):(this.cancel(),this._domElement.style.touchAction=&quot;&quot;,this._domElement.style.userSelect=&quot;&quot;,this._domElement.style.webkitUserSelect=&quot;&quot;))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&amp;&amp;this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&amp;&amp;this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&amp;&amp;this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=Bs(e.width,0,1),this._interactiveArea.height=Bs(e.height,0,1),this._interactiveArea.x=Bs(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=Bs(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,i=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,i)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,i=!1){this._isUserControllingRotate=!1;const r=Bs(e,this.minAzimuthAngle,this.maxAzimuthAngle),s=Bs(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=s,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,i||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!i||An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&amp;&amp;An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Uu.NONE,this._changedDolly=0,this._dollyToNoClamp(Bs(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const i=this._sphericalEnd.radius;if(this.colliderMeshes.length&gt;=1){const o=this._collisionTest(),l=An(o,this._spherical.radius);if(!(i&gt;e)&amp;&amp;l)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,o)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const s=!t||An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(s)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(jf).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const i=!t||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=Bs(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const i=!t||An(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(i)}pan(e,t,i=!1){return console.warn(&quot;`pan` has been renamed to `truck`&quot;),this.truck(e,t,i)}truck(e,t,i=!1){this._camera.updateMatrix(),uo.setFromMatrixColumn(this._camera.matrix,0),ho.setFromMatrixColumn(this._camera.matrix,1),uo.multiplyScalar(e),ho.multiplyScalar(-t);const r=Yt.copy(uo).add(ho),s=xn.copy(this._targetEnd).add(r);return this.moveTo(s.x,s.y,s.z,i)}forward(e,t=!1){Yt.setFromMatrixColumn(this._camera.matrix,0),Yt.crossVectors(this._camera.up,Yt),Yt.multiplyScalar(e);const i=xn.copy(this._targetEnd).add(Yt);return this.moveTo(i.x,i.y,i.z,t)}elevate(e,t=!1){return Yt.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+Yt.x,this._targetEnd.y+Yt.y,this._targetEnd.z+Yt.z,t)}moveTo(e,t,i,r=!1){this._isUserControllingTruck=!1;const s=Yt.set(e,t,i).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,s,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,i,r=!1){const l=Yt.set(e,t,i).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(l.x,l.y,l.z,r)}fitToBox(e,t,{cover:i=!1,paddingLeft:r=0,paddingRight:s=0,paddingBottom:o=0,paddingTop:l=0}={}){const u=[],h=e.isBox3?zu.copy(e):zu.setFromObject(e);h.isEmpty()&amp;&amp;(console.warn(&quot;camera-controls: fitTo() cannot be used with an empty box. Aborting&quot;),Promise.resolve());const f=xO(this._sphericalEnd.theta,bO),p=xO(this._sphericalEnd.phi,bO);u.push(this.rotateTo(f,p,t));const m=Yt.setFromSpherical(this._sphericalEnd).normalize(),g=AO.setFromUnitVectors(m,Ax),v=An(Math.abs(m.y),1);v&amp;&amp;g.multiply(Rx.setFromAxisAngle(dg,f)),g.multiply(this._yAxisUpSpaceInverse);const x=MO.makeEmpty();xn.copy(h.min).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.min).setX(h.max.x).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.min).setY(h.max.y).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.max).setZ(h.min.z).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.min).setZ(h.max.z).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.max).setY(h.min.y).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.max).setX(h.min.x).applyQuaternion(g),x.expandByPoint(xn),xn.copy(h.max).applyQuaternion(g),x.expandByPoint(xn),x.min.x-=r,x.min.y-=o,x.max.x+=s,x.max.y+=l,g.setFromUnitVectors(Ax,m),v&amp;&amp;g.premultiply(Rx.invert()),g.premultiply(this._yAxisUpSpace);const b=x.getSize(Yt),_=x.getCenter(xn).applyQuaternion(g);if(tc(this._camera)){const T=this.getDistanceToFitBox(b.x,b.y,b.z,i);u.push(this.moveTo(_.x,_.y,_.z,t)),u.push(this.dollyTo(T,t)),u.push(this.setFocalOffset(0,0,0,t))}else if(el(this._camera)){const T=this._camera,w=T.right-T.left,E=T.top-T.bottom,R=i?Math.max(w/b.x,E/b.y):Math.min(w/b.x,E/b.y);u.push(this.moveTo(_.x,_.y,_.z,t)),u.push(this.zoomTo(R,t)),u.push(this.setFocalOffset(0,0,0,t))}return Promise.all(u)}fitToSphere(e,t){const i=[],s=&quot;isObject3D&quot;in e?vh.createBoundingSphere(e,Cx):Cx.copy(e);if(i.push(this.moveTo(s.center.x,s.center.y,s.center.z,t)),tc(this._camera)){const o=this.getDistanceToFitSphere(s.radius);i.push(this.dollyTo(o,t))}else if(el(this._camera)){const o=this._camera.right-this._camera.left,l=this._camera.top-this._camera.bottom,u=2*s.radius,h=Math.min(o/u,l/u);i.push(this.zoomTo(h,t))}return i.push(this.setFocalOffset(0,0,0,t)),Promise.all(i)}setLookAt(e,t,i,r,s,o,l=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Uu.NONE,this._changedDolly=0;const u=xn.set(r,s,o),h=Yt.set(e,t,i);this._targetEnd.copy(u),this._sphericalEnd.setFromVector3(h.sub(u).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,l||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const f=!l||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold)&amp;&amp;An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&amp;&amp;An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&amp;&amp;An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(f)}lerpLookAt(e,t,i,r,s,o,l,u,h,f,p,m,g,v=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Uu.NONE,this._changedDolly=0;const x=Yt.set(r,s,o),b=xn.set(e,t,i);gs.setFromVector3(b.sub(x).applyQuaternion(this._yAxisUpSpace));const _=Fu.set(f,p,m),T=xn.set(l,u,h);Wf.setFromVector3(T.sub(_).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(x.lerp(_,g));const w=Wf.theta-gs.theta,E=Wf.phi-gs.phi,R=Wf.radius-gs.radius;this._sphericalEnd.set(gs.radius+R*g,gs.phi+E*g,gs.theta+w*g),this.normalizeRotations(),this._needsUpdate=!0,v||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const N=!v||An(this._target.x,this._targetEnd.x,this.restThreshold)&amp;&amp;An(this._target.y,this._targetEnd.y,this.restThreshold)&amp;&amp;An(this._target.z,this._targetEnd.z,this.restThreshold)&amp;&amp;An(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&amp;&amp;An(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&amp;&amp;An(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(N)}setPosition(e,t,i,r=!1){return this.setLookAt(e,t,i,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,i,r=!1){const s=this.getPosition(Yt),o=this.setLookAt(s.x,s.y,s.z,e,t,i,r);return this._sphericalEnd.phi=Bs(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,i,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,i),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const s=!r||An(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&amp;&amp;An(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&amp;&amp;An(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}setOrbitPoint(e,t,i){this._camera.updateMatrixWorld(),uo.setFromMatrixColumn(this._camera.matrixWorldInverse,0),ho.setFromMatrixColumn(this._camera.matrixWorldInverse,1),nc.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=Yt.set(e,t,i),s=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);uo.multiplyScalar(o.x),ho.multiplyScalar(o.y),nc.multiplyScalar(o.z),Yt.copy(uo).add(ho).add(nc),Yt.z=Yt.z+s,this.dollyTo(s,!1),this.setFocalOffset(-Yt.x,Yt.y,-Yt.z,!1),this.moveTo(e,t,i,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,i,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Ft.Vector4,typeof e==&quot;number&quot;?this._viewport.set(e,t,i,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,i,r=!1){if(Tx(this._camera,&quot;getDistanceToFitBox&quot;))return this._spherical.radius;const s=e/t,o=this._camera.getEffectiveFOV()*Hf,l=this._camera.aspect;return((r?s&gt;l:s&lt;l)?t:e/l)*.5/Math.tan(o*.5)+i*.5}getDistanceToFitSphere(e){if(Tx(this._camera,&quot;getDistanceToFitSphere&quot;))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*Hf,i=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1&lt;this._camera.aspect?t:i;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&amp;&amp;e.isVector3?e:new Ft.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&amp;&amp;e.isVector3?e:new Ft.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e||new Ft.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&amp;&amp;e.isVector3?e:new Ft.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%ku,this._sphericalEnd.theta&lt;0&amp;&amp;(this._sphericalEnd.theta+=ku),this._spherical.theta+=ku*Math.round((this._sphericalEnd.theta-this._spherical.theta)/ku)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!An(this._camera.up.x,this._cameraUp0.x)||!An(this._camera.up.y,this._cameraUp0.y)||!An(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const i=this.getPosition(Yt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,dg),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=Yt.subVectors(this._target,this._camera.position).normalize(),t=xn.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const i=this.getPosition(Yt);this.updateCameraUp(),this.setPosition(i.x,i.y,i.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,s=EO.subVectors(this._targetEnd,this._target),o=TO.subVectors(this._focalOffsetEnd,this._focalOffset),l=this._zoomEnd-this._zoom;if(Gn(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=hg(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,p,1/0,e),this._needsUpdate=!0}if(Gn(i))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const p=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=hg(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,p,1/0,e),this._needsUpdate=!0}if(Gn(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const p=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=hg(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,p,this.maxSpeed,e),this._needsUpdate=!0}if(Gn(s.x)&amp;&amp;Gn(s.y)&amp;&amp;Gn(s.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const p=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;SO(this._target,this._targetEnd,this._targetVelocity,p,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(Gn(o.x)&amp;&amp;Gn(o.y)&amp;&amp;Gn(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const p=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;SO(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,p,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(Gn(l))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const p=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=hg(this._zoom,this._zoomEnd,this._zoomVelocity,p,1/0,e)}if(this.dollyToCursor){if(tc(this._camera)&amp;&amp;this._changedDolly!==0){const p=this._spherical.radius-this._lastDistance,m=this._camera,g=this._getCameraDirection(jf),v=Yt.copy(g).cross(m.up).normalize();v.lengthSq()===0&amp;&amp;(v.x=1);const x=xn.crossVectors(v,g),b=this._sphericalEnd.radius*Math.tan(m.getEffectiveFOV()*Hf*.5),T=(this._sphericalEnd.radius-p-this._sphericalEnd.radius)/this._sphericalEnd.radius,w=Fu.copy(this._targetEnd).add(v.multiplyScalar(this._dollyControlCoord.x*b*m.aspect)).add(x.multiplyScalar(this._dollyControlCoord.y*b)),E=Yt.copy(this._targetEnd).lerp(w,T),R=this._lastDollyDirection===Uu.IN&amp;&amp;this._spherical.radius&lt;=this.minDistance,N=this._lastDollyDirection===Uu.OUT&amp;&amp;this.maxDistance&lt;=this._spherical.radius;if(this.infinityDolly&amp;&amp;(R||N)){this._sphericalEnd.radius-=p,this._spherical.radius-=p;const D=xn.copy(g).multiplyScalar(-p);E.add(D)}this._boundary.clampPoint(E,E);const A=xn.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(A),this._changedDolly-=p,Gn(this._changedDolly)&amp;&amp;(this._changedDolly=0)}else if(el(this._camera)&amp;&amp;this._changedZoom!==0){const p=this._zoom-this._lastZoom,m=this._camera,g=Yt.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(m.near+m.far)/(m.near-m.far)).unproject(m),v=xn.set(0,0,-1).applyQuaternion(m.quaternion),x=Fu.copy(g).add(v.multiplyScalar(-g.dot(m.up))),_=-(this._zoom-p-this._zoom)/this._zoom,T=this._getCameraDirection(jf),w=this._targetEnd.dot(T),E=Yt.copy(this._targetEnd).lerp(x,_),R=E.dot(T),N=T.multiplyScalar(R-w);E.sub(N),this._boundary.clampPoint(E,E);const A=xn.subVectors(E,this._targetEnd);this._targetEnd.copy(E),this._target.add(A),this._changedZoom-=p,Gn(this._changedZoom)&amp;&amp;(this._changedZoom=0)}}this._camera.zoom!==this._zoom&amp;&amp;(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const u=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,u),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Gn(this._focalOffset.x)||!Gn(this._focalOffset.y)||!Gn(this._focalOffset.z))&amp;&amp;(uo.setFromMatrixColumn(this._camera.matrix,0),ho.setFromMatrixColumn(this._camera.matrix,1),nc.setFromMatrixColumn(this._camera.matrix,2),uo.multiplyScalar(this._focalOffset.x),ho.multiplyScalar(-this._focalOffset.y),nc.multiplyScalar(this._focalOffset.z),Yt.copy(uo).add(ho).add(nc),this._camera.position.add(Yt),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&amp;&amp;this._encloseToBoundary(this._camera.position.copy(this._target),Yt.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const f=this._needsUpdate;return f&amp;&amp;!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:&quot;wake&quot;}),this.dispatchEvent({type:&quot;update&quot;})):f?(this.dispatchEvent({type:&quot;update&quot;}),Gn(t,this.restThreshold)&amp;&amp;Gn(i,this.restThreshold)&amp;&amp;Gn(r,this.restThreshold)&amp;&amp;Gn(s.x,this.restThreshold)&amp;&amp;Gn(s.y,this.restThreshold)&amp;&amp;Gn(s.z,this.restThreshold)&amp;&amp;Gn(o.x,this.restThreshold)&amp;&amp;Gn(o.y,this.restThreshold)&amp;&amp;Gn(o.z,this.restThreshold)&amp;&amp;Gn(l,this.restThreshold)&amp;&amp;!this._hasRested&amp;&amp;(this._hasRested=!0,this.dispatchEvent({type:&quot;rest&quot;}))):!f&amp;&amp;this._updatedLastTime&amp;&amp;this.dispatchEvent({type:&quot;sleep&quot;}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=f,this._needsUpdate=!1,f}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Vf(this.maxDistance),minZoom:this.minZoom,maxZoom:Vf(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Vf(this.maxPolarAngle),minAzimuthAngle:Vf(this.minAzimuthAngle),maxAzimuthAngle:Vf(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:Yt.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const i=JSON.parse(e);this.enabled=i.enabled,this.minDistance=i.minDistance,this.maxDistance=Gf(i.maxDistance),this.minZoom=i.minZoom,this.maxZoom=Gf(i.maxZoom),this.minPolarAngle=i.minPolarAngle,this.maxPolarAngle=Gf(i.maxPolarAngle),this.minAzimuthAngle=Gf(i.minAzimuthAngle),this.maxAzimuthAngle=Gf(i.maxAzimuthAngle),this.smoothTime=i.smoothTime,this.draggingSmoothTime=i.draggingSmoothTime,this.dollySpeed=i.dollySpeed,this.truckSpeed=i.truckSpeed,this.dollyToCursor=i.dollyToCursor,this._target0.fromArray(i.target0),this._position0.fromArray(i.position0),this._zoom0=i.zoom0,this._focalOffset0.fromArray(i.focalOffset0),this.moveTo(i.target[0],i.target[1],i.target[2],t),gs.setFromVector3(Yt.fromArray(i.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(gs.theta,gs.phi,t),this.dollyTo(gs.radius,t),this.zoomTo(i.zoom,t),this.setFocalOffset(i.focalOffset[0],i.focalOffset[1],i.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn(&quot;camera-controls is already connected.&quot;);return}e.setAttribute(&quot;data-camera-controls-version&quot;,YK),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&amp;&amp;(this._domElement.removeAttribute(&quot;data-camera-controls-version&quot;),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=&gt;t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=&gt;t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,i){const r=t.lengthSq();if(r===0)return e;const s=xn.copy(t).add(e),l=this._boundary.clampPoint(s,Fu).sub(s),u=l.lengthSq();if(u===0)return e.add(t);if(u===r)return e;if(i===0)return e.add(t).add(l);{const h=1+i*u/t.dot(l);return e.add(xn.copy(t).multiplyScalar(h)).add(l.multiplyScalar(1-i))}}_updateNearPlaneCorners(){if(tc(this._camera)){const e=this._camera,t=e.near,i=e.getEffectiveFOV()*Hf,r=Math.tan(i*.5)*t,s=r*e.aspect;this._nearPlaneCorners[0].set(-s,-r,0),this._nearPlaneCorners[1].set(s,-r,0),this._nearPlaneCorners[2].set(s,r,0),this._nearPlaneCorners[3].set(-s,r,0)}else if(el(this._camera)){const e=this._camera,t=1/e.zoom,i=e.left*t,r=e.right*t,s=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(i,s,0),this._nearPlaneCorners[1].set(r,s,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(i,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length&gt;=1)||Tx(this._camera,&quot;_collisionTest&quot;))return e;const i=this._getTargetDirection(jf);Ox.lookAt(wO,i,this._camera.up);for(let r=0;r&lt;4;r++){const s=xn.copy(this._nearPlaneCorners[r]);s.applyMatrix4(Ox);const o=Fu.addVectors(this._target,s);pg.set(o,i),pg.far=this._spherical.radius+1;const l=pg.intersectObjects(this.colliderMeshes);l.length!==0&amp;&amp;l[0].distance&lt;e&amp;&amp;(e=l[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:&quot;transitionstart&quot;}),new Promise(t=&gt;{const i=()=&gt;{this.removeEventListener(&quot;rest&quot;,i),t()};this.addEventListener(&quot;rest&quot;,i)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(&quot;.dampingFactor has been deprecated. use smoothTime (in seconds) instead.&quot;),0}set dampingFactor(e){console.warn(&quot;.dampingFactor has been deprecated. use smoothTime (in seconds) instead.&quot;)}get draggingDampingFactor(){return console.warn(&quot;.draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.&quot;),0}set draggingDampingFactor(e){console.warn(&quot;.draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.&quot;)}static createBoundingSphere(e,t=new Ft.Sphere){const i=t,r=i.center;zu.makeEmpty(),e.traverseVisible(o=&gt;{o.isMesh&amp;&amp;zu.expandByObject(o)}),zu.getCenter(r);let s=0;return e.traverseVisible(o=&gt;{if(!o.isMesh)return;const l=o;if(!l.geometry)return;const u=l.geometry.clone();u.applyMatrix4(l.matrixWorld);const f=u.attributes.position;for(let p=0,m=f.count;p&lt;m;p++)Yt.fromBufferAttribute(f,p),s=Math.max(s,r.distanceToSquared(Yt))}),i.radius=Math.sqrt(s),i}}function $K(n,e,t){const i=r=&gt;{const s=r.key.toLowerCase(),o=r.shiftKey,l=Nh.getState().selectedObjects;if(o&amp;&amp;s===&quot;h&quot;)l.forEach((u,h)=&gt;{h instanceof bs?h.hideBatchDrawRange(u):h.traverse(f=&gt;{f instanceof bs&amp;&amp;f.hideBatchDrawRange(u)})});else if(o&amp;&amp;s===&quot;u&quot;)n.traverse(u=&gt;{u instanceof bs&amp;&amp;u.unhideAllDrawRanges()});else if(o&amp;&amp;s===&quot;f&quot;)XK(t,e);else if(o&amp;&amp;s===&quot;a&quot;)ZK(n,e,t);else if(o&amp;&amp;s===&quot;q&quot;){const{isOptionsVisible:u,setIsOptionsVisible:h}=Bc.getState();h(!u)}};return window.addEventListener(&quot;keydown&quot;,i),()=&gt;{window.removeEventListener(&quot;keydown&quot;,i)}}const ZK=(n,e,t)=&gt;{const i=new Ri().setFromObject(n);if(i.isEmpty())return;const r=i.getSize(new Y).length(),s=i.getCenter(new Y),o=r*.5,l=new Y;e.getWorldDirection(l).normalize(),e.position.copy(s.clone().add(l.clone().multiplyScalar(-o))),e.lookAt(s),t instanceof Ic?t.target.copy(s):t instanceof vh&amp;&amp;t.setLookAt(e.position.x,e.position.y,e.position.z,s.x,s.y,s.z,!0),e.updateProjectionMatrix(),t instanceof Ic&amp;&amp;t.update()};function JK(n,e){const t=new Yn(60,n.clientWidth/n.clientHeight,.1,1e4);t.position.set(-5,5,5),t.layers.enable(0),t.layers.enable(1);const i=e?new Y(0,0,1):new Y(0,1,0);return t.up.copy(i),t.updateProjectionMatrix(),t}vh.install({THREE:V8});function QK(n,e,t,i){const r=e.querySelector(&quot;canvas&quot;);if(!r)throw new Error(&quot;Renderer canvas not found&quot;);let s;return i?(s=new Ic(n,r),console.log(&quot;Using OrbitControls&quot;)):(s=new vh(n,r),console.log(&quot;Using CameraControls&quot;)),s}function e$(n,e){const t=new Zd(16777215,1.4);t.castShadow=!1,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,t.shadow.camera.near=.5,t.shadow.camera.far=500,t.shadow.bias=-1e-4,e.add(t);const i=new nn;return e.add(i),t.target=i,t.position.copy(n.position),()=&gt;{t.position.copy(n.position);const r=new Y;n.getWorldDirection(r),i.position.copy(n.position.clone().add(r)),t.target.updateMatrixWorld()}}function t$(n,e){const t=new Fy(16777215,Math.PI/2);return n.add(t),{updateCameraLight:e$(e,n)}}function n$(n){const{zIsUp:e}=eo.getState(),t=new UN(100,100,8947848,4473924);return t.material.depthWrite=!1,t.renderOrder=-1,t.layers.set(1),e&amp;&amp;(t.rotation.x=Math.PI/2),n.add(t),t}class CO extends HTMLElement{constructor(e,t){super(),this.camera=e,this.options=Object.assign({size:150,padding:8,bubbleSizePrimary:10,bubbleSizeSeconday:10,showSecondary:!0,lineWidth:2,fontSize:&quot;10px&quot;,fontFamily:&quot;arial&quot;,fontWeight:&quot;bold&quot;,fontColor:&quot;#151515&quot;,fontYAdjust:0,colors:{x:[&quot;#f73c3c&quot;,&quot;#942424&quot;],y:[&quot;#6ccb26&quot;,&quot;#417a17&quot;],z:[&quot;#178cf0&quot;,&quot;#0e5490&quot;]}},t),this.onAxisSelected=null,this.bubbles=[{axis:&quot;x&quot;,direction:new Y(1,0,0),size:this.options.bubbleSizePrimary,color:this.options.colors.x,line:this.options.lineWidth,label:&quot;X&quot;},{axis:&quot;y&quot;,direction:new Y(0,1,0),size:this.options.bubbleSizePrimary,color:this.options.colors.y,line:this.options.lineWidth,label:&quot;Y&quot;},{axis:&quot;z&quot;,direction:new Y(0,0,1),size:this.options.bubbleSizePrimary,color:this.options.colors.z,line:this.options.lineWidth,label:&quot;Z&quot;},{axis:&quot;-x&quot;,direction:new Y(-1,0,0),size:this.options.bubbleSizeSeconday,color:this.options.colors.x,label:&quot;-X&quot;},{axis:&quot;-y&quot;,direction:new Y(0,-1,0),size:this.options.bubbleSizeSeconday,color:this.options.colors.y,label:&quot;-Y&quot;},{axis:&quot;-z&quot;,direction:new Y(0,0,-1),size:this.options.bubbleSizeSeconday,color:this.options.colors.z,label:&quot;-Z&quot;}],this.center=new Y(this.options.size/2,this.options.size/2,0),this.selectedAxis=null,this.innerHTML=&quot;&lt;canvas width=&#x27;&quot;+this.options.size+&quot;&#x27; height=&#x27;&quot;+this.options.size+&quot;&#x27;&gt;&lt;/canvas&gt;&quot;,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseClick=this.onMouseClick.bind(this)}connectedCallback(){this.canvas=this.querySelector(&quot;canvas&quot;),this.context=this.canvas.getContext(&quot;2d&quot;),this.canvas.addEventListener(&quot;mousemove&quot;,this.onMouseMove,!1),this.canvas.addEventListener(&quot;mouseout&quot;,this.onMouseOut,!1),this.canvas.addEventListener(&quot;click&quot;,this.onMouseClick,!1)}disconnectedCallback(){this.canvas.removeEventListener(&quot;mousemove&quot;,this.onMouseMove,!1),this.canvas.removeEventListener(&quot;mouseout&quot;,this.onMouseOut,!1),this.canvas.removeEventListener(&quot;click&quot;,this.onMouseClick,!1)}onMouseMove(e){const t=this.canvas.getBoundingClientRect();this.mouse=new Y(e.clientX-t.left,e.clientY-t.top,0)}onMouseOut(){this.mouse=null}onMouseClick(){this.onAxisSelected&amp;&amp;typeof this.onAxisSelected==&quot;function&quot;&amp;&amp;this.onAxisSelected({axis:this.selectedAxis.axis,direction:this.selectedAxis.direction.clone()})}clear(){this.canvas&amp;&amp;this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}drawCircle(e,t=10,i=&quot;#FF0000&quot;){this.context.beginPath(),this.context.arc(e.x,e.y,t,0,2*Math.PI,!1),this.context.fillStyle=i,this.context.fill(),this.context.closePath()}drawLine(e,t,i=1,r=&quot;#FF0000&quot;){this.context.beginPath(),this.context.moveTo(e.x,e.y),this.context.lineTo(t.x,t.y),this.context.lineWidth=i,this.context.strokeStyle=r,this.context.stroke(),this.context.closePath()}update(){this.clear();const t=new yt().makeRotationFromEuler(this.camera.rotation).clone().invert();for(const r of this.bubbles)r.position=this.getBubblePosition(r.direction.clone().applyMatrix4(t));const i=[];for(const r in this.bubbles)(this.options.showSecondary===!0||r[0]!==&quot;-&quot;)&amp;&amp;i.push(this.bubbles[r]);if(i.sort((r,s)=&gt;r.position.z&gt;s.position.z?1:-1),this.selectedAxis=null,this.mouse){let r=1/0;for(const s of i){const o=this.mouse.distanceTo(s.position);(o&lt;r||o&lt;s.size)&amp;&amp;(r=o,this.selectedAxis=s)}}this.drawLayers(i)}drawLayers(e){for(const t of e){let i=t.color;this.selectedAxis===t?i=&quot;#FFFFFF&quot;:t.position.z&gt;=-.01?i=t.color[0]:i=t.color[1],this.drawCircle(t.position,t.size,i),t.line&amp;&amp;this.drawLine(this.center,t.position,t.line,i),t.label&amp;&amp;(this.context.font=[this.options.fontWeight,this.options.fontSize,this.options.fontFamily].join(&quot; &quot;),this.context.fillStyle=this.options.fontColor,this.context.textBaseline=&quot;middle&quot;,this.context.textAlign=&quot;center&quot;,this.context.fillText(t.label,t.position.x,t.position.y+this.options.fontYAdjust))}}getBubblePosition(e){return new Y(e.x*(this.center.x-this.options.bubbleSizePrimary/2-this.options.padding)+this.center.x,this.center.y-e.y*(this.center.y-this.options.bubbleSizePrimary/2-this.options.padding),e.z)}}function i$(n,e){customElements.get(&quot;orientation-gizmo&quot;)||customElements.define(&quot;orientation-gizmo&quot;,CO);const t=new CO(n,{});return t.style.position=&quot;absolute&quot;,t.style.bottom=&quot;8px&quot;,t.style.right=&quot;8px&quot;,t.style.pointerEvents=&quot;auto&quot;,t.style.zIndex=&quot;10&quot;,e.appendChild(t),t}function r$(n,e,t){const i=i$(n,e);return i.onAxisSelected=({axis:r,direction:s})=&gt;{const o=n.position.length();n.position.copy(s.clone().multiplyScalar(o)),t instanceof Ic&amp;&amp;(t.target.set(0,0,0),t.update())},i}var sa=function(){var n=0,e=document.createElement(&quot;div&quot;);e.style.cssText=&quot;position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000&quot;,e.addEventListener(&quot;click&quot;,function(f){f.preventDefault(),i(++n%e.children.length)},!1);function t(f){return e.appendChild(f.dom),f}function i(f){for(var p=0;p&lt;e.children.length;p++)e.children[p].style.display=p===f?&quot;block&quot;:&quot;none&quot;;n=f}var r=(performance||Date).now(),s=r,o=0,l=t(new sa.Panel(&quot;FPS&quot;,&quot;#0ff&quot;,&quot;#002&quot;)),u=t(new sa.Panel(&quot;MS&quot;,&quot;#0f0&quot;,&quot;#020&quot;));if(self.performance&amp;&amp;self.performance.memory)var h=t(new sa.Panel(&quot;MB&quot;,&quot;#f08&quot;,&quot;#201&quot;));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var f=(performance||Date).now();if(u.update(f-r,200),f&gt;=s+1e3&amp;&amp;(l.update(o*1e3/(f-s),100),s=f,o=0,h)){var p=performance.memory;h.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return f},update:function(){r=this.end()},domElement:e,setMode:i}};sa.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),l=80*o,u=48*o,h=3*o,f=2*o,p=3*o,m=15*o,g=74*o,v=30*o,x=document.createElement(&quot;canvas&quot;);x.width=l,x.height=u,x.style.cssText=&quot;width:80px;height:48px&quot;;var b=x.getContext(&quot;2d&quot;);return b.font=&quot;bold &quot;+9*o+&quot;px Helvetica,Arial,sans-serif&quot;,b.textBaseline=&quot;top&quot;,b.fillStyle=t,b.fillRect(0,0,l,u),b.fillStyle=e,b.fillText(n,h,f),b.fillRect(p,m,g,v),b.fillStyle=t,b.globalAlpha=.9,b.fillRect(p,m,g,v),{dom:x,update:function(_,T){i=Math.min(i,_),r=Math.max(r,_),b.fillStyle=t,b.globalAlpha=1,b.fillRect(0,0,l,m),b.fillStyle=e,b.fillText(s(_)+&quot; &quot;+n+&quot; (&quot;+s(i)+&quot;-&quot;+s(r)+&quot;)&quot;,h,f),b.drawImage(x,p+o,m,g-o,v,p,m,g-o,v),b.fillRect(p+g-o,m,o,v),b.fillStyle=t,b.globalAlpha=.9,b.fillRect(p+g-o,m,o,s((1-_/T)*v))}}};function s$(n){const e=[];let t=null,i=null;for(let r=0;r&lt;3;r++){const s=new sa;s.showPanel(r),n.appendChild(s.dom),Object.assign(s.dom.style,{position:&quot;absolute&quot;,top:`${r*48}px`,left:&quot;auto&quot;,right:&quot;0px&quot;,zIndex:&quot;20&quot;}),e.push(s)}{const r=new sa;t=r.addPanel(new sa.Panel(&quot;calls&quot;,&quot;#ff8&quot;,&quot;#221&quot;)),r.showPanel(3),n.appendChild(r.dom),Object.assign(r.dom.style,{position:&quot;absolute&quot;,top:`${3*48}px`,left:&quot;auto&quot;,right:&quot;0px&quot;,zIndex:&quot;20&quot;}),e.push(r)}{const r=new sa;i=r.addPanel(new sa.Panel(&quot;tris&quot;,&quot;#8ff&quot;,&quot;#122&quot;)),r.showPanel(3),n.appendChild(r.dom),Object.assign(r.dom.style,{position:&quot;absolute&quot;,top:`${4*48}px`,left:&quot;auto&quot;,right:&quot;0px&quot;,zIndex:&quot;20&quot;}),e.push(r)}return{statsArray:e,callsPanel:t,trisPanel:i}}function o$(n,e,t){const i=()=&gt;{n&amp;&amp;(e.aspect=n.clientWidth/n.clientHeight,e.updateProjectionMatrix(),t.setSize(n.clientWidth,n.clientHeight))};return window.addEventListener(&quot;resize&quot;,i),()=&gt;{window.removeEventListener(&quot;resize&quot;,i)}}function a$(n){Nh.getState().selectedObjects.forEach((t,i)=&gt;{i instanceof bs?i.clearSelectionGroups():i.traverse(r=&gt;{r instanceof bs&amp;&amp;r.clearSelectionGroups()})})}async function RO(n,e,t){return await L0.getDrawRange(n,e,t)}async function OO(n,e){return await L0.getNameFromRangeId(n,e)}async function l$(n,e,t){const i=Nh.getState(),s=i.selectedObjects.get(n),o=s?s.has(t):!1;e?o?i.removeSelectedObject(n,t):i.addSelectedObject(n,t):(i.clearSelectedObjects(),i.addSelectedObject(n,t))}function BS(n,e){if(n.name===e)return n;if(!Array.isArray(n.children))return null;for(let t of n.children){const i=BS(t,e);if(i)return i}return null}async function c$(n,e){var m,g;if(e.button===2)return;const t=n.object,i=n.faceIndex??0,r=e.shiftKey,s=eo.getState().translation,o=n.point.clone();s&amp;&amp;o.sub(s),yl.getState().setClickCoordinate(o),!t.is_design&amp;&amp;t.ada_ext_data!=null&amp;&amp;(Fw.current=t.ada_ext_data);const l=t.name;let u=await RO(t.unique_key,l,i);if(!u&amp;&amp;((m=t.userData)!=null&amp;&amp;m.node_id&amp;&amp;(u=await RO(t.unique_key,`node${(g=t.userData)==null?void 0:g.node_id}`,i)),!u)){console.warn(&quot;selected mesh has no draw range&quot;);return}const[h]=u;await l$(t,r,h);const f=await OO(t.unique_key,h);if(!f){console.warn(&quot;selected mesh has no name&quot;);return}yl.getState().setName(f);const p=Oc.getState();if(p.treeData&amp;&amp;p.tree&amp;&amp;!p.isTreeCollapsed){p.tree.isProgrammaticChange=!0;const v=[];for(const[b,_]of Nh.getState().selectedObjects)for(const T of _){const w=await OO(t.unique_key,T);if(!w)continue;const E=BS(p.treeData,w);E&amp;&amp;v.push(E.id)}const x=BS(p.treeData,f);p.tree.setSelection({ids:v,mostRecent:x,anchor:x}),x&amp;&amp;p.tree.scrollTo({id:x.id}),p.tree.isProgrammaticChange=!1}}function u$(n,e,t,i){let r=null;const s=5;return n.addEventListener(&quot;pointerdown&quot;,o=&gt;{r={x:o.clientX,y:o.clientY}}),n.addEventListener(&quot;click&quot;,async o=&gt;{if(!r)return;const l=o.clientX-r.x,u=o.clientY-r.y;if(l*l+u*u&gt;s*s)return;const h=i.domElement.getBoundingClientRect(),f=(o.clientX-h.left)/h.width*2-1,p=-((o.clientY-h.top)/h.height)*2+1,m=new Oe(f,p),g=new PN;g.layers.set(0),g.layers.disable(1),g.setFromCamera(m,e);const v=g.intersectObjects(t.children,!0);v.length===0?a$():await c$(v[0],o)}),()=&gt;{n.removeEventListener(&quot;pointerdown&quot;,()=&gt;{}),n.removeEventListener(&quot;click&quot;,()=&gt;{})}}const h$=()=&gt;{const n=re.useRef(null),{modelUrl:e,zIsUp:t,defaultOrbitController:i}=eo(),{showPerf:r}=Bc(),s=re.useRef(null),o=re.useRef(null);return re.useEffect(()=&gt;{const l=n.current;if(!l)return;const u=new ResizeObserver(h=&gt;{var f;for(const p of h){const{width:m,height:g}=p.contentRect;(f=gc.current)==null||f.setSize(m,g),mc.current&amp;&amp;(mc.current.aspect=m/g,mc.current.updateProjectionMatrix())}});return u.observe(l),()=&gt;{u.disconnect()}},[]),re.useEffect(()=&gt;{if(!n.current)return;t&amp;&amp;(nn.DEFAULT_UP=new Y(0,0,1));const l=new Nw;if(!Zs.current){const E=new py;E.background=new $e(&quot;#393939&quot;),Zs.current=E}const u=Zs.current;if(s.current=new br,!gc.current){const E=new jN({antialias:!0});E.setSize(n.current.clientWidth,n.current.clientHeight),E.shadowMap.enabled=!0,n.current.appendChild(E.domElement),gc.current=E}const h=gc.current,f=JK(n.current,t);mc.current=f;const p=QK(f,n.current,t,i);mS.current=p;const m=$K(u,f,p),{updateCameraLight:g}=t$(u,f);gS.current=g;const v=n$(u);let x=null;n.current&amp;&amp;f&amp;&amp;p&amp;&amp;(x=r$(f,n.current,p));const{statsArray:b,callsPanel:_,trisPanel:T}=s$(n.current);o.current={statsArray:b,callsPanel:_,trisPanel:T},e&amp;&amp;(EI(e),window.B64GLTF&amp;&amp;delete window.B64GLTF),s.current&amp;&amp;u.add(s.current);const w=()=&gt;{if(requestAnimationFrame(w),b.forEach(E=&gt;E.begin()),bi.current&amp;&amp;bi.current.currentAction){const E=l.getDelta();bi.current.update(E)}if(p instanceof Ic)p.update();else{const E=l.getDelta();p.update(E)}g==null||g(),x==null||x.update(),h.render(u,f),_&amp;&amp;_.update(h.info.render.calls,200),T&amp;&amp;T.update(h.info.render.triangles,5e5),b.forEach(E=&gt;E.end())};return w(),o$(n.current,f,h),u$(n.current,f,u,h),()=&gt;{var E;x&amp;&amp;((E=n.current)!=null&amp;&amp;E.contains(x))&amp;&amp;n.current.removeChild(x),v.dispose(),u.remove(v),m==null||m(),b&amp;&amp;b.length&gt;0&amp;&amp;b.forEach(R=&gt;{var N;(N=n.current)==null||N.removeChild(R.dom)})}},[i,t]),re.useEffect(()=&gt;{if(!o.current||!n.current)return;const{statsArray:l}=o.current;l.forEach(u=&gt;{u.dom.style.display=r?&quot;block&quot;:&quot;none&quot;})},[r]),P.jsx(&quot;div&quot;,{ref:n,className:&quot;w-full h-full relative&quot;})},f$=()=&gt;P.jsxs(&quot;div&quot;,{className:&quot;relative w-full h-full&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;absolute right-5 top-80 z-10&quot;,children:P.jsx(Pk,{})}),P.jsx(&quot;div&quot;,{id:&quot;canvasParent&quot;,className:&quot;absolute w-full h-full&quot;,children:P.jsx(h$,{})})]}),d$=n=&gt;typeof n==&quot;boolean&quot;||n instanceof Boolean,p$=n=&gt;typeof n==&quot;number&quot;||n instanceof Number,m$=n=&gt;typeof n==&quot;bigint&quot;||n instanceof BigInt,gL=n=&gt;!!n&amp;&amp;n instanceof Date,g$=n=&gt;typeof n==&quot;string&quot;||n instanceof String,y$=n=&gt;Array.isArray(n),_$=n=&gt;typeof n==&quot;object&quot;&amp;&amp;n!==null,yL=n=&gt;!!n&amp;&amp;n instanceof Object&amp;&amp;typeof n==&quot;function&quot;;function X0(n,e){return e===void 0&amp;&amp;(e=!1),!n||e?`&quot;${n}&quot;`:n}function v$(n,e,t){return t?JSON.stringify(n):e?`&quot;${n}&quot;`:n}function _L(n){let{field:e,value:t,data:i,lastElement:r,openBracket:s,closeBracket:o,level:l,style:u,shouldExpandNode:h,clickToExpandNode:f,outerRef:p,beforeExpandChange:m}=n;const g=re.useRef(!1),[v,x]=re.useState(()=&gt;h(l,t,e)),b=re.useRef(null);re.useEffect(()=&gt;{g.current?x(h(l,t,e)):g.current=!0},[h]);const _=re.useId();if(i.length===0)return b$({field:e,openBracket:s,closeBracket:o,lastElement:r,style:u});const T=v?u.collapseIcon:u.expandIcon,w=v?u.ariaLables.collapseJson:u.ariaLables.expandJson,E=l+1,R=i.length-1,N=C=&gt;{v!==C&amp;&amp;(!m||m({level:l,value:t,field:e,newExpandValue:C}))&amp;&amp;x(C)},A=C=&gt;{if(C.key===&quot;ArrowRight&quot;||C.key===&quot;ArrowLeft&quot;)C.preventDefault(),N(C.key===&quot;ArrowRight&quot;);else if(C.key===&quot;ArrowUp&quot;||C.key===&quot;ArrowDown&quot;){C.preventDefault();const O=C.key===&quot;ArrowUp&quot;?-1:1;if(!p.current)return;const L=p.current.querySelectorAll(&quot;[role=button]&quot;);let V=-1;for(let z=0;z&lt;L.length;z++)if(L[z].tabIndex===0){V=z;break}if(V&lt;0)return;const Z=(V+O+L.length)%L.length;L[V].tabIndex=-1,L[Z].tabIndex=0,L[Z].focus()}},D=()=&gt;{var C;N(!v);const O=b.current;if(!O)return;const L=(C=p.current)===null||C===void 0?void 0:C.querySelector(&#x27;[role=button][tabindex=&quot;0&quot;]&#x27;);L&amp;&amp;(L.tabIndex=-1),O.tabIndex=0,O.focus()};return re.createElement(&quot;div&quot;,{className:u.basicChildStyle,role:&quot;treeitem&quot;,&quot;aria-expanded&quot;:v,&quot;aria-selected&quot;:void 0},re.createElement(&quot;span&quot;,{className:T,onClick:D,onKeyDown:A,role:&quot;button&quot;,&quot;aria-label&quot;:w,&quot;aria-expanded&quot;:v,&quot;aria-controls&quot;:v?_:void 0,ref:b,tabIndex:l===0?0:-1}),(e||e===&quot;&quot;)&amp;&amp;(f?re.createElement(&quot;span&quot;,{className:u.clickableLabel,onClick:D,onKeyDown:A},X0(e,u.quotesForFieldNames),&quot;:&quot;):re.createElement(&quot;span&quot;,{className:u.label},X0(e,u.quotesForFieldNames),&quot;:&quot;)),re.createElement(&quot;span&quot;,{className:u.punctuation},s),v?re.createElement(&quot;ul&quot;,{id:_,role:&quot;group&quot;,className:u.childFieldsContainer},i.map((C,O)=&gt;re.createElement(vL,{key:C[0]||O,field:C[0],value:C[1],style:u,lastElement:O===R,level:E,shouldExpandNode:h,clickToExpandNode:f,outerRef:p}))):re.createElement(&quot;span&quot;,{className:u.collapsedContent,onClick:D,onKeyDown:A}),re.createElement(&quot;span&quot;,{className:u.punctuation},o),!r&amp;&amp;re.createElement(&quot;span&quot;,{className:u.punctuation},&quot;,&quot;))}function b$(n){let{field:e,openBracket:t,closeBracket:i,lastElement:r,style:s}=n;return re.createElement(&quot;div&quot;,{className:s.basicChildStyle,role:&quot;treeitem&quot;,&quot;aria-selected&quot;:void 0},(e||e===&quot;&quot;)&amp;&amp;re.createElement(&quot;span&quot;,{className:s.label},X0(e,s.quotesForFieldNames),&quot;:&quot;),re.createElement(&quot;span&quot;,{className:s.punctuation},t),re.createElement(&quot;span&quot;,{className:s.punctuation},i),!r&amp;&amp;re.createElement(&quot;span&quot;,{className:s.punctuation},&quot;,&quot;))}function x$(n){let{field:e,value:t,style:i,lastElement:r,shouldExpandNode:s,clickToExpandNode:o,level:l,outerRef:u,beforeExpandChange:h}=n;return _L({field:e,value:t,lastElement:r||!1,level:l,openBracket:&quot;{&quot;,closeBracket:&quot;}&quot;,style:i,shouldExpandNode:s,clickToExpandNode:o,data:Object.keys(t).map(f=&gt;[f,t[f]]),outerRef:u,beforeExpandChange:h})}function S$(n){let{field:e,value:t,style:i,lastElement:r,level:s,shouldExpandNode:o,clickToExpandNode:l,outerRef:u,beforeExpandChange:h}=n;return _L({field:e,value:t,lastElement:r||!1,level:s,openBracket:&quot;[&quot;,closeBracket:&quot;]&quot;,style:i,shouldExpandNode:o,clickToExpandNode:l,data:t.map(f=&gt;[void 0,f]),outerRef:u,beforeExpandChange:h})}function w$(n){let{field:e,value:t,style:i,lastElement:r}=n,s,o=i.otherValue;return t===null?(s=&quot;null&quot;,o=i.nullValue):t===void 0?(s=&quot;undefined&quot;,o=i.undefinedValue):g$(t)?(s=v$(t,!i.noQuotesForStringValues,i.stringifyStringValues),o=i.stringValue):d$(t)?(s=t?&quot;true&quot;:&quot;false&quot;,o=i.booleanValue):p$(t)?(s=t.toString(),o=i.numberValue):m$(t)?(s=`${t.toString()}n`,o=i.numberValue):gL(t)?s=t.toISOString():yL(t)?s=&quot;function() { }&quot;:s=t.toString(),re.createElement(&quot;div&quot;,{className:i.basicChildStyle,role:&quot;treeitem&quot;,&quot;aria-selected&quot;:void 0},(e||e===&quot;&quot;)&amp;&amp;re.createElement(&quot;span&quot;,{className:i.label},X0(e,i.quotesForFieldNames),&quot;:&quot;),re.createElement(&quot;span&quot;,{className:o},s),!r&amp;&amp;re.createElement(&quot;span&quot;,{className:i.punctuation},&quot;,&quot;))}function vL(n){const e=n.value;return y$(e)?re.createElement(S$,Object.assign({},n)):_$(e)&amp;&amp;!gL(e)&amp;&amp;!yL(e)?re.createElement(x$,Object.assign({},n)):re.createElement(w$,Object.assign({},n))}var mr={&quot;container-light&quot;:&quot;_2IvMF _GzYRV&quot;,&quot;basic-element-style&quot;:&quot;_2bkNM&quot;,&quot;child-fields-container&quot;:&quot;_1BXBN&quot;,&quot;label-light&quot;:&quot;_1MGIk&quot;,&quot;clickable-label-light&quot;:&quot;_2YKJg _1MGIk _1MFti&quot;,&quot;punctuation-light&quot;:&quot;_3uHL6 _3eOF8&quot;,&quot;value-null-light&quot;:&quot;_2T6PJ&quot;,&quot;value-undefined-light&quot;:&quot;_1Gho6&quot;,&quot;value-string-light&quot;:&quot;_vGjyY&quot;,&quot;value-number-light&quot;:&quot;_1bQdo&quot;,&quot;value-boolean-light&quot;:&quot;_3zQKs&quot;,&quot;value-other-light&quot;:&quot;_1xvuR&quot;,&quot;collapse-icon-light&quot;:&quot;_oLqym _f10Tu _1MFti _1LId0&quot;,&quot;expand-icon-light&quot;:&quot;_2AXVT _f10Tu _1MFti _1UmXx&quot;,&quot;collapsed-content-light&quot;:&quot;_2KJWg _1pNG9 _1MFti&quot;};const E$={collapseJson:&quot;collapse JSON&quot;,expandJson:&quot;expand JSON&quot;},DO={container:mr[&quot;container-light&quot;],basicChildStyle:mr[&quot;basic-element-style&quot;],childFieldsContainer:mr[&quot;child-fields-container&quot;],label:mr[&quot;label-light&quot;],clickableLabel:mr[&quot;clickable-label-light&quot;],nullValue:mr[&quot;value-null-light&quot;],undefinedValue:mr[&quot;value-undefined-light&quot;],stringValue:mr[&quot;value-string-light&quot;],booleanValue:mr[&quot;value-boolean-light&quot;],numberValue:mr[&quot;value-number-light&quot;],otherValue:mr[&quot;value-other-light&quot;],punctuation:mr[&quot;punctuation-light&quot;],collapseIcon:mr[&quot;collapse-icon-light&quot;],expandIcon:mr[&quot;expand-icon-light&quot;],collapsedContent:mr[&quot;collapsed-content-light&quot;],noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:E$,stringifyStringValues:!1},T$=()=&gt;!0,NO=n=&gt;n&lt;1,IO=n=&gt;{let{data:e,style:t=DO,shouldExpandNode:i=T$,clickToExpandNode:r=!1,beforeExpandChange:s,...o}=n;const l=re.useRef(null);return re.createElement(&quot;div&quot;,Object.assign({&quot;aria-label&quot;:&quot;JSON view&quot;},o,{className:t.container,ref:l,role:&quot;tree&quot;}),re.createElement(vL,{value:e,style:{...DO,...t},lastElement:!0,level:0,shouldExpandNode:i,clickToExpandNode:r,outerRef:l,beforeExpandChange:s}))};var Xf={exports:{}},Dx={},Nx={exports:{}},Ix,PO;function M$(){if(PO)return Ix;PO=1;var n=&quot;SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED&quot;;return Ix=n,Ix}var Px,LO;function A$(){if(LO)return Px;LO=1;var n=M$();function e(){}function t(){}return t.resetWarningCache=e,Px=function(){function i(o,l,u,h,f,p){if(p!==n){var m=new Error(&quot;Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types&quot;);throw m.name=&quot;Invariant Violation&quot;,m}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},Px}var UO;function bL(){return UO||(UO=1,Nx.exports=A$()()),Nx.exports}function xL(n){var e,t,i=&quot;&quot;;if(typeof n==&quot;string&quot;||typeof n==&quot;number&quot;)i+=n;else if(typeof n==&quot;object&quot;)if(Array.isArray(n))for(e=0;e&lt;n.length;e++)n[e]&amp;&amp;(t=xL(n[e]))&amp;&amp;(i&amp;&amp;(i+=&quot; &quot;),i+=t);else for(e in n)n[e]&amp;&amp;(i&amp;&amp;(i+=&quot; &quot;),i+=e);return i}function kO(){for(var n,e,t=0,i=&quot;&quot;;t&lt;arguments.length;)(n=arguments[t++])&amp;&amp;(e=xL(n))&amp;&amp;(i&amp;&amp;(i+=&quot; &quot;),i+=e);return i}const C$=Object.freeze(Object.defineProperty({__proto__:null,clsx:kO,default:kO},Symbol.toStringTag,{value:&quot;Module&quot;})),R$=xk(C$);var vi={},Za={},FO;function i_(){if(FO)return Za;FO=1,Object.defineProperty(Za,&quot;__esModule&quot;,{value:!0}),Za.dontSetMe=r,Za.findInArray=n,Za.int=i,Za.isFunction=e,Za.isNum=t;function n(s,o){for(let l=0,u=s.length;l&lt;u;l++)if(o.apply(o,[s[l],l,s]))return s[l]}function e(s){return typeof s==&quot;function&quot;||Object.prototype.toString.call(s)===&quot;[object Function]&quot;}function t(s){return typeof s==&quot;number&quot;&amp;&amp;!isNaN(s)}function i(s){return parseInt(s,10)}function r(s,o,l){if(s[o])return new Error(&quot;Invalid prop &quot;.concat(o,&quot; passed to &quot;).concat(l,&quot; - do not set this, set it on the child.&quot;))}return Za}var Ja={},zO;function O$(){if(zO)return Ja;zO=1,Object.defineProperty(Ja,&quot;__esModule&quot;,{value:!0}),Ja.browserPrefixToKey=t,Ja.browserPrefixToStyle=i,Ja.default=void 0,Ja.getPrefix=e;const n=[&quot;Moz&quot;,&quot;Webkit&quot;,&quot;O&quot;,&quot;ms&quot;];function e(){var s;let o=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:&quot;transform&quot;;if(typeof window&gt;&quot;u&quot;)return&quot;&quot;;const l=(s=window.document)===null||s===void 0||(s=s.documentElement)===null||s===void 0?void 0:s.style;if(!l||o in l)return&quot;&quot;;for(let u=0;u&lt;n.length;u++)if(t(o,n[u])in l)return n[u];return&quot;&quot;}function t(s,o){return o?&quot;&quot;.concat(o).concat(r(s)):s}function i(s,o){return o?&quot;-&quot;.concat(o.toLowerCase(),&quot;-&quot;).concat(s):s}function r(s){let o=&quot;&quot;,l=!0;for(let u=0;u&lt;s.length;u++)l?(o+=s[u].toUpperCase(),l=!1):s[u]===&quot;-&quot;?l=!0:o+=s[u];return o}return Ja.default=e(),Ja}var BO;function n1(){if(BO)return vi;BO=1,Object.defineProperty(vi,&quot;__esModule&quot;,{value:!0}),vi.addClassName=R,vi.addEvent=l,vi.addUserSelectStyles=w,vi.createCSSTransform=v,vi.createSVGTransform=x,vi.getTouch=_,vi.getTouchIdentifier=T,vi.getTranslation=b,vi.innerHeight=p,vi.innerWidth=m,vi.matchesSelector=s,vi.matchesSelectorAndParentsTo=o,vi.offsetXYFromParent=g,vi.outerHeight=h,vi.outerWidth=f,vi.removeClassName=N,vi.removeEvent=u,vi.removeUserSelectStyles=E;var n=i_(),e=i(O$());function t(A){if(typeof WeakMap!=&quot;function&quot;)return null;var D=new WeakMap,C=new WeakMap;return(t=function(O){return O?C:D})(A)}function i(A,D){if(A&amp;&amp;A.__esModule)return A;if(A===null||typeof A!=&quot;object&quot;&amp;&amp;typeof A!=&quot;function&quot;)return{default:A};var C=t(D);if(C&amp;&amp;C.has(A))return C.get(A);var O={},L=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;for(var V in A)if(V!==&quot;default&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(A,V)){var Z=L?Object.getOwnPropertyDescriptor(A,V):null;Z&amp;&amp;(Z.get||Z.set)?Object.defineProperty(O,V,Z):O[V]=A[V]}return O.default=A,C&amp;&amp;C.set(A,O),O}let r=&quot;&quot;;function s(A,D){return r||(r=(0,n.findInArray)([&quot;matches&quot;,&quot;webkitMatchesSelector&quot;,&quot;mozMatchesSelector&quot;,&quot;msMatchesSelector&quot;,&quot;oMatchesSelector&quot;],function(C){return(0,n.isFunction)(A[C])})),(0,n.isFunction)(A[r])?A[r](D):!1}function o(A,D,C){let O=A;do{if(s(O,D))return!0;if(O===C)return!1;O=O.parentNode}while(O);return!1}function l(A,D,C,O){if(!A)return;const L={capture:!0,...O};A.addEventListener?A.addEventListener(D,C,L):A.attachEvent?A.attachEvent(&quot;on&quot;+D,C):A[&quot;on&quot;+D]=C}function u(A,D,C,O){if(!A)return;const L={capture:!0,...O};A.removeEventListener?A.removeEventListener(D,C,L):A.detachEvent?A.detachEvent(&quot;on&quot;+D,C):A[&quot;on&quot;+D]=null}function h(A){let D=A.clientHeight;const C=A.ownerDocument.defaultView.getComputedStyle(A);return D+=(0,n.int)(C.borderTopWidth),D+=(0,n.int)(C.borderBottomWidth),D}function f(A){let D=A.clientWidth;const C=A.ownerDocument.defaultView.getComputedStyle(A);return D+=(0,n.int)(C.borderLeftWidth),D+=(0,n.int)(C.borderRightWidth),D}function p(A){let D=A.clientHeight;const C=A.ownerDocument.defaultView.getComputedStyle(A);return D-=(0,n.int)(C.paddingTop),D-=(0,n.int)(C.paddingBottom),D}function m(A){let D=A.clientWidth;const C=A.ownerDocument.defaultView.getComputedStyle(A);return D-=(0,n.int)(C.paddingLeft),D-=(0,n.int)(C.paddingRight),D}function g(A,D,C){const L=D===D.ownerDocument.body?{left:0,top:0}:D.getBoundingClientRect(),V=(A.clientX+D.scrollLeft-L.left)/C,Z=(A.clientY+D.scrollTop-L.top)/C;return{x:V,y:Z}}function v(A,D){const C=b(A,D,&quot;px&quot;);return{[(0,e.browserPrefixToKey)(&quot;transform&quot;,e.default)]:C}}function x(A,D){return b(A,D,&quot;&quot;)}function b(A,D,C){let{x:O,y:L}=A,V=&quot;translate(&quot;.concat(O).concat(C,&quot;,&quot;).concat(L).concat(C,&quot;)&quot;);if(D){const Z=&quot;&quot;.concat(typeof D.x==&quot;string&quot;?D.x:D.x+C),z=&quot;&quot;.concat(typeof D.y==&quot;string&quot;?D.y:D.y+C);V=&quot;translate(&quot;.concat(Z,&quot;, &quot;).concat(z,&quot;)&quot;)+V}return V}function _(A,D){return A.targetTouches&amp;&amp;(0,n.findInArray)(A.targetTouches,C=&gt;D===C.identifier)||A.changedTouches&amp;&amp;(0,n.findInArray)(A.changedTouches,C=&gt;D===C.identifier)}function T(A){if(A.targetTouches&amp;&amp;A.targetTouches[0])return A.targetTouches[0].identifier;if(A.changedTouches&amp;&amp;A.changedTouches[0])return A.changedTouches[0].identifier}function w(A){if(!A)return;let D=A.getElementById(&quot;react-draggable-style-el&quot;);D||(D=A.createElement(&quot;style&quot;),D.type=&quot;text/css&quot;,D.id=&quot;react-draggable-style-el&quot;,D.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,D.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,A.getElementsByTagName(&quot;head&quot;)[0].appendChild(D)),A.body&amp;&amp;R(A.body,&quot;react-draggable-transparent-selection&quot;)}function E(A){if(A)try{if(A.body&amp;&amp;N(A.body,&quot;react-draggable-transparent-selection&quot;),A.selection)A.selection.empty();else{const D=(A.defaultView||window).getSelection();D&amp;&amp;D.type!==&quot;Caret&quot;&amp;&amp;D.removeAllRanges()}}catch{}}function R(A,D){A.classList?A.classList.add(D):A.className.match(new RegExp(&quot;(?:^|\\s)&quot;.concat(D,&quot;(?!\\S)&quot;)))||(A.className+=&quot; &quot;.concat(D))}function N(A,D){A.classList?A.classList.remove(D):A.className=A.className.replace(new RegExp(&quot;(?:^|\\s)&quot;.concat(D,&quot;(?!\\S)&quot;),&quot;g&quot;),&quot;&quot;)}return vi}var fo={},HO;function SL(){if(HO)return fo;HO=1,Object.defineProperty(fo,&quot;__esModule&quot;,{value:!0}),fo.canDragX=r,fo.canDragY=s,fo.createCoreData=l,fo.createDraggableData=u,fo.getBoundPosition=t,fo.getControlPosition=o,fo.snapToGrid=i;var n=i_(),e=n1();function t(p,m,g){if(!p.props.bounds)return[m,g];let{bounds:v}=p.props;v=typeof v==&quot;string&quot;?v:h(v);const x=f(p);if(typeof v==&quot;string&quot;){const{ownerDocument:b}=x,_=b.defaultView;let T;if(v===&quot;parent&quot;?T=x.parentNode:T=b.querySelector(v),!(T instanceof _.HTMLElement))throw new Error(&#x27;Bounds selector &quot;&#x27;+v+&#x27;&quot; could not find an element.&#x27;);const w=T,E=_.getComputedStyle(x),R=_.getComputedStyle(w);v={left:-x.offsetLeft+(0,n.int)(R.paddingLeft)+(0,n.int)(E.marginLeft),top:-x.offsetTop+(0,n.int)(R.paddingTop)+(0,n.int)(E.marginTop),right:(0,e.innerWidth)(w)-(0,e.outerWidth)(x)-x.offsetLeft+(0,n.int)(R.paddingRight)-(0,n.int)(E.marginRight),bottom:(0,e.innerHeight)(w)-(0,e.outerHeight)(x)-x.offsetTop+(0,n.int)(R.paddingBottom)-(0,n.int)(E.marginBottom)}}return(0,n.isNum)(v.right)&amp;&amp;(m=Math.min(m,v.right)),(0,n.isNum)(v.bottom)&amp;&amp;(g=Math.min(g,v.bottom)),(0,n.isNum)(v.left)&amp;&amp;(m=Math.max(m,v.left)),(0,n.isNum)(v.top)&amp;&amp;(g=Math.max(g,v.top)),[m,g]}function i(p,m,g){const v=Math.round(m/p[0])*p[0],x=Math.round(g/p[1])*p[1];return[v,x]}function r(p){return p.props.axis===&quot;both&quot;||p.props.axis===&quot;x&quot;}function s(p){return p.props.axis===&quot;both&quot;||p.props.axis===&quot;y&quot;}function o(p,m,g){const v=typeof m==&quot;number&quot;?(0,e.getTouch)(p,m):null;if(typeof m==&quot;number&quot;&amp;&amp;!v)return null;const x=f(g),b=g.props.offsetParent||x.offsetParent||x.ownerDocument.body;return(0,e.offsetXYFromParent)(v||p,b,g.props.scale)}function l(p,m,g){const v=!(0,n.isNum)(p.lastX),x=f(p);return v?{node:x,deltaX:0,deltaY:0,lastX:m,lastY:g,x:m,y:g}:{node:x,deltaX:m-p.lastX,deltaY:g-p.lastY,lastX:p.lastX,lastY:p.lastY,x:m,y:g}}function u(p,m){const g=p.props.scale;return{node:m.node,x:p.state.x+m.deltaX/g,y:p.state.y+m.deltaY/g,deltaX:m.deltaX/g,deltaY:m.deltaY/g,lastX:p.state.x,lastY:p.state.y}}function h(p){return{left:p.left,top:p.top,right:p.right,bottom:p.bottom}}function f(p){const m=p.findDOMNode();if(!m)throw new Error(&quot;&lt;DraggableCore&gt;: Unmounted during event!&quot;);return m}return fo}var qf={},mg={},VO;function wL(){if(VO)return mg;VO=1,Object.defineProperty(mg,&quot;__esModule&quot;,{value:!0}),mg.default=n;function n(){}return mg}var GO;function D$(){if(GO)return qf;GO=1,Object.defineProperty(qf,&quot;__esModule&quot;,{value:!0}),qf.default=void 0;var n=h(Lc()),e=l(bL()),t=l(J0()),i=n1(),r=SL(),s=i_(),o=l(wL());function l(b){return b&amp;&amp;b.__esModule?b:{default:b}}function u(b){if(typeof WeakMap!=&quot;function&quot;)return null;var _=new WeakMap,T=new WeakMap;return(u=function(w){return w?T:_})(b)}function h(b,_){if(b&amp;&amp;b.__esModule)return b;if(b===null||typeof b!=&quot;object&quot;&amp;&amp;typeof b!=&quot;function&quot;)return{default:b};var T=u(_);if(T&amp;&amp;T.has(b))return T.get(b);var w={},E=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;for(var R in b)if(R!==&quot;default&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(b,R)){var N=E?Object.getOwnPropertyDescriptor(b,R):null;N&amp;&amp;(N.get||N.set)?Object.defineProperty(w,R,N):w[R]=b[R]}return w.default=b,T&amp;&amp;T.set(b,w),w}function f(b,_,T){return _=p(_),_ in b?Object.defineProperty(b,_,{value:T,enumerable:!0,configurable:!0,writable:!0}):b[_]=T,b}function p(b){var _=m(b,&quot;string&quot;);return typeof _==&quot;symbol&quot;?_:String(_)}function m(b,_){if(typeof b!=&quot;object&quot;||b===null)return b;var T=b[Symbol.toPrimitive];if(T!==void 0){var w=T.call(b,_);if(typeof w!=&quot;object&quot;)return w;throw new TypeError(&quot;@@toPrimitive must return a primitive value.&quot;)}return(_===&quot;string&quot;?String:Number)(b)}const g={touch:{start:&quot;touchstart&quot;,move:&quot;touchmove&quot;,stop:&quot;touchend&quot;},mouse:{start:&quot;mousedown&quot;,move:&quot;mousemove&quot;,stop:&quot;mouseup&quot;}};let v=g.mouse,x=class extends n.Component{constructor(){super(...arguments),f(this,&quot;dragging&quot;,!1),f(this,&quot;lastX&quot;,NaN),f(this,&quot;lastY&quot;,NaN),f(this,&quot;touchIdentifier&quot;,null),f(this,&quot;mounted&quot;,!1),f(this,&quot;handleDragStart&quot;,_=&gt;{if(this.props.onMouseDown(_),!this.props.allowAnyClick&amp;&amp;typeof _.button==&quot;number&quot;&amp;&amp;_.button!==0)return!1;const T=this.findDOMNode();if(!T||!T.ownerDocument||!T.ownerDocument.body)throw new Error(&quot;&lt;DraggableCore&gt; not mounted on DragStart!&quot;);const{ownerDocument:w}=T;if(this.props.disabled||!(_.target instanceof w.defaultView.Node)||this.props.handle&amp;&amp;!(0,i.matchesSelectorAndParentsTo)(_.target,this.props.handle,T)||this.props.cancel&amp;&amp;(0,i.matchesSelectorAndParentsTo)(_.target,this.props.cancel,T))return;_.type===&quot;touchstart&quot;&amp;&amp;_.preventDefault();const E=(0,i.getTouchIdentifier)(_);this.touchIdentifier=E;const R=(0,r.getControlPosition)(_,E,this);if(R==null)return;const{x:N,y:A}=R,D=(0,r.createCoreData)(this,N,A);(0,o.default)(&quot;DraggableCore: handleDragStart: %j&quot;,D),(0,o.default)(&quot;calling&quot;,this.props.onStart),!(this.props.onStart(_,D)===!1||this.mounted===!1)&amp;&amp;(this.props.enableUserSelectHack&amp;&amp;(0,i.addUserSelectStyles)(w),this.dragging=!0,this.lastX=N,this.lastY=A,(0,i.addEvent)(w,v.move,this.handleDrag),(0,i.addEvent)(w,v.stop,this.handleDragStop))}),f(this,&quot;handleDrag&quot;,_=&gt;{const T=(0,r.getControlPosition)(_,this.touchIdentifier,this);if(T==null)return;let{x:w,y:E}=T;if(Array.isArray(this.props.grid)){let A=w-this.lastX,D=E-this.lastY;if([A,D]=(0,r.snapToGrid)(this.props.grid,A,D),!A&amp;&amp;!D)return;w=this.lastX+A,E=this.lastY+D}const R=(0,r.createCoreData)(this,w,E);if((0,o.default)(&quot;DraggableCore: handleDrag: %j&quot;,R),this.props.onDrag(_,R)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent(&quot;mouseup&quot;))}catch{const D=document.createEvent(&quot;MouseEvents&quot;);D.initMouseEvent(&quot;mouseup&quot;,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(D)}return}this.lastX=w,this.lastY=E}),f(this,&quot;handleDragStop&quot;,_=&gt;{if(!this.dragging)return;const T=(0,r.getControlPosition)(_,this.touchIdentifier,this);if(T==null)return;let{x:w,y:E}=T;if(Array.isArray(this.props.grid)){let D=w-this.lastX||0,C=E-this.lastY||0;[D,C]=(0,r.snapToGrid)(this.props.grid,D,C),w=this.lastX+D,E=this.lastY+C}const R=(0,r.createCoreData)(this,w,E);if(this.props.onStop(_,R)===!1||this.mounted===!1)return!1;const A=this.findDOMNode();A&amp;&amp;this.props.enableUserSelectHack&amp;&amp;(0,i.removeUserSelectStyles)(A.ownerDocument),(0,o.default)(&quot;DraggableCore: handleDragStop: %j&quot;,R),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,A&amp;&amp;((0,o.default)(&quot;DraggableCore: Removing handlers&quot;),(0,i.removeEvent)(A.ownerDocument,v.move,this.handleDrag),(0,i.removeEvent)(A.ownerDocument,v.stop,this.handleDragStop))}),f(this,&quot;onMouseDown&quot;,_=&gt;(v=g.mouse,this.handleDragStart(_))),f(this,&quot;onMouseUp&quot;,_=&gt;(v=g.mouse,this.handleDragStop(_))),f(this,&quot;onTouchStart&quot;,_=&gt;(v=g.touch,this.handleDragStart(_))),f(this,&quot;onTouchEnd&quot;,_=&gt;(v=g.touch,this.handleDragStop(_)))}componentDidMount(){this.mounted=!0;const _=this.findDOMNode();_&amp;&amp;(0,i.addEvent)(_,g.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const _=this.findDOMNode();if(_){const{ownerDocument:T}=_;(0,i.removeEvent)(T,g.mouse.move,this.handleDrag),(0,i.removeEvent)(T,g.touch.move,this.handleDrag),(0,i.removeEvent)(T,g.mouse.stop,this.handleDragStop),(0,i.removeEvent)(T,g.touch.stop,this.handleDragStop),(0,i.removeEvent)(_,g.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&amp;&amp;(0,i.removeUserSelectStyles)(T)}}findDOMNode(){var _,T;return(_=this.props)!==null&amp;&amp;_!==void 0&amp;&amp;_.nodeRef?(T=this.props)===null||T===void 0||(T=T.nodeRef)===null||T===void 0?void 0:T.current:t.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return qf.default=x,f(x,&quot;displayName&quot;,&quot;DraggableCore&quot;),f(x,&quot;propTypes&quot;,{allowAnyClick:e.default.bool,children:e.default.node.isRequired,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:function(b,_){if(b[_]&amp;&amp;b[_].nodeType!==1)throw new Error(&quot;Draggable&#x27;s offsetParent must be a DOM Node.&quot;)},grid:e.default.arrayOf(e.default.number),handle:e.default.string,cancel:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number,className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),f(x,&quot;defaultProps&quot;,{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),qf}var jO;function N$(){return jO||(jO=1,function(n){Object.defineProperty(n,&quot;__esModule&quot;,{value:!0}),Object.defineProperty(n,&quot;DraggableCore&quot;,{enumerable:!0,get:function(){return u.default}}),n.default=void 0;var e=m(Lc()),t=f(bL()),i=f(J0()),r=f(R$),s=n1(),o=SL(),l=i_(),u=f(D$()),h=f(wL());function f(T){return T&amp;&amp;T.__esModule?T:{default:T}}function p(T){if(typeof WeakMap!=&quot;function&quot;)return null;var w=new WeakMap,E=new WeakMap;return(p=function(R){return R?E:w})(T)}function m(T,w){if(T&amp;&amp;T.__esModule)return T;if(T===null||typeof T!=&quot;object&quot;&amp;&amp;typeof T!=&quot;function&quot;)return{default:T};var E=p(w);if(E&amp;&amp;E.has(T))return E.get(T);var R={},N=Object.defineProperty&amp;&amp;Object.getOwnPropertyDescriptor;for(var A in T)if(A!==&quot;default&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(T,A)){var D=N?Object.getOwnPropertyDescriptor(T,A):null;D&amp;&amp;(D.get||D.set)?Object.defineProperty(R,A,D):R[A]=T[A]}return R.default=T,E&amp;&amp;E.set(T,R),R}function g(){return g=Object.assign?Object.assign.bind():function(T){for(var w=1;w&lt;arguments.length;w++){var E=arguments[w];for(var R in E)Object.prototype.hasOwnProperty.call(E,R)&amp;&amp;(T[R]=E[R])}return T},g.apply(this,arguments)}function v(T,w,E){return w=x(w),w in T?Object.defineProperty(T,w,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[w]=E,T}function x(T){var w=b(T,&quot;string&quot;);return typeof w==&quot;symbol&quot;?w:String(w)}function b(T,w){if(typeof T!=&quot;object&quot;||T===null)return T;var E=T[Symbol.toPrimitive];if(E!==void 0){var R=E.call(T,w);if(typeof R!=&quot;object&quot;)return R;throw new TypeError(&quot;@@toPrimitive must return a primitive value.&quot;)}return(w===&quot;string&quot;?String:Number)(T)}class _ extends e.Component{static getDerivedStateFromProps(w,E){let{position:R}=w,{prevPropsPosition:N}=E;return R&amp;&amp;(!N||R.x!==N.x||R.y!==N.y)?((0,h.default)(&quot;Draggable: getDerivedStateFromProps %j&quot;,{position:R,prevPropsPosition:N}),{x:R.x,y:R.y,prevPropsPosition:{...R}}):null}constructor(w){super(w),v(this,&quot;onDragStart&quot;,(E,R)=&gt;{if((0,h.default)(&quot;Draggable: onDragStart: %j&quot;,R),this.props.onStart(E,(0,o.createDraggableData)(this,R))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),v(this,&quot;onDrag&quot;,(E,R)=&gt;{if(!this.state.dragging)return!1;(0,h.default)(&quot;Draggable: onDrag: %j&quot;,R);const N=(0,o.createDraggableData)(this,R),A={x:N.x,y:N.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:O}=A;A.x+=this.state.slackX,A.y+=this.state.slackY;const[L,V]=(0,o.getBoundPosition)(this,A.x,A.y);A.x=L,A.y=V,A.slackX=this.state.slackX+(C-A.x),A.slackY=this.state.slackY+(O-A.y),N.x=A.x,N.y=A.y,N.deltaX=A.x-this.state.x,N.deltaY=A.y-this.state.y}if(this.props.onDrag(E,N)===!1)return!1;this.setState(A)}),v(this,&quot;onDragStop&quot;,(E,R)=&gt;{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,R))===!1)return!1;(0,h.default)(&quot;Draggable: onDragStop: %j&quot;,R);const A={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:O}=this.props.position;A.x=C,A.y=O}this.setState(A)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&amp;&amp;!(w.onDrag||w.onStop)&amp;&amp;console.warn(&quot;A `position` was applied to this &lt;Draggable&gt;, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.&quot;)}componentDidMount(){typeof window.SVGElement&lt;&quot;u&quot;&amp;&amp;this.findDOMNode()instanceof window.SVGElement&amp;&amp;this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var w,E;return(w=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&amp;&amp;w!==void 0?w:i.default.findDOMNode(this)}render(){const{axis:w,bounds:E,children:R,defaultPosition:N,defaultClassName:A,defaultClassNameDragging:D,defaultClassNameDragged:C,position:O,positionOffset:L,scale:V,...Z}=this.props;let z={},K=null;const j=!!!O||this.state.dragging,G=O||N,ee={x:(0,o.canDragX)(this)&amp;&amp;j?this.state.x:G.x,y:(0,o.canDragY)(this)&amp;&amp;j?this.state.y:G.y};this.state.isElementSVG?K=(0,s.createSVGTransform)(ee,L):z=(0,s.createCSSTransform)(ee,L);const F=(0,r.default)(R.props.className||&quot;&quot;,A,{[D]:this.state.dragging,[C]:this.state.dragged});return e.createElement(u.default,g({},Z,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(R),{className:F,style:{...R.props.style,...z},transform:K}))}}n.default=_,v(_,&quot;displayName&quot;,&quot;Draggable&quot;),v(_,&quot;propTypes&quot;,{...u.default.propTypes,axis:t.default.oneOf([&quot;both&quot;,&quot;x&quot;,&quot;y&quot;,&quot;none&quot;]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),v(_,&quot;defaultProps&quot;,{...u.default.defaultProps,axis:&quot;both&quot;,bounds:!1,defaultClassName:&quot;react-draggable&quot;,defaultClassNameDragging:&quot;react-draggable-dragging&quot;,defaultClassNameDragged:&quot;react-draggable-dragged&quot;,defaultPosition:{x:0,y:0},scale:1})}(Dx)),Dx}var WO;function I$(){if(WO)return Xf.exports;WO=1;const{default:n,DraggableCore:e}=N$();return Xf.exports=n,Xf.exports.default=n,Xf.exports.DraggableCore=e,Xf.exports}var P$=I$();const L$=Z0(P$);var Ci=function(){return Ci=Object.assign||function(n){for(var e,t=1,i=arguments.length;t&lt;i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&amp;&amp;(n[r]=e[r])}return n},Ci.apply(this,arguments)},XO={width:&quot;100%&quot;,height:&quot;10px&quot;,top:&quot;0px&quot;,left:&quot;0px&quot;,cursor:&quot;row-resize&quot;},qO={width:&quot;10px&quot;,height:&quot;100%&quot;,top:&quot;0px&quot;,left:&quot;0px&quot;,cursor:&quot;col-resize&quot;},gg={width:&quot;20px&quot;,height:&quot;20px&quot;,position:&quot;absolute&quot;,zIndex:1},U$={top:Ci(Ci({},XO),{top:&quot;-5px&quot;}),right:Ci(Ci({},qO),{left:void 0,right:&quot;-5px&quot;}),bottom:Ci(Ci({},XO),{top:void 0,bottom:&quot;-5px&quot;}),left:Ci(Ci({},qO),{left:&quot;-5px&quot;}),topRight:Ci(Ci({},gg),{right:&quot;-10px&quot;,top:&quot;-10px&quot;,cursor:&quot;ne-resize&quot;}),bottomRight:Ci(Ci({},gg),{right:&quot;-10px&quot;,bottom:&quot;-10px&quot;,cursor:&quot;se-resize&quot;}),bottomLeft:Ci(Ci({},gg),{left:&quot;-10px&quot;,bottom:&quot;-10px&quot;,cursor:&quot;sw-resize&quot;}),topLeft:Ci(Ci({},gg),{left:&quot;-10px&quot;,top:&quot;-10px&quot;,cursor:&quot;nw-resize&quot;})},k$=re.memo(function(n){var e=n.onResizeStart,t=n.direction,i=n.children,r=n.replaceStyles,s=n.className,o=re.useCallback(function(h){e(h,t)},[e,t]),l=re.useCallback(function(h){e(h,t)},[e,t]),u=re.useMemo(function(){return Ci(Ci({position:&quot;absolute&quot;,userSelect:&quot;none&quot;},U$[t]),r??{})},[r,t]);return P.jsx(&quot;div&quot;,{className:s||void 0,style:u,onMouseDown:o,onTouchStart:l,children:i})}),F$=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&amp;&amp;(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!=&quot;function&quot;&amp;&amp;t!==null)throw new TypeError(&quot;Class extends value &quot;+String(t)+&quot; is not a constructor or null&quot;);n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),go=function(){return go=Object.assign||function(n){for(var e,t=1,i=arguments.length;t&lt;i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&amp;&amp;(n[r]=e[r])}return n},go.apply(this,arguments)},z$={width:&quot;auto&quot;,height:&quot;auto&quot;},yg=function(n,e,t){return Math.max(Math.min(n,t),e)},YO=function(n,e,t){var i=Math.round(n/e);return i*e+t*(i-1)},Bu=function(n,e){return new RegExp(n,&quot;i&quot;).test(e)},_g=function(n){return!!(n.touches&amp;&amp;n.touches.length)},B$=function(n){return!!((n.clientX||n.clientX===0)&amp;&amp;(n.clientY||n.clientY===0))},KO=function(n,e,t){t===void 0&amp;&amp;(t=0);var i=e.reduce(function(s,o,l){return Math.abs(o-n)&lt;Math.abs(e[s]-n)?l:s},0),r=Math.abs(e[i]-n);return t===0||r&lt;t?e[i]:n},Lx=function(n){return n=n.toString(),n===&quot;auto&quot;||n.endsWith(&quot;px&quot;)||n.endsWith(&quot;%&quot;)||n.endsWith(&quot;vh&quot;)||n.endsWith(&quot;vw&quot;)||n.endsWith(&quot;vmax&quot;)||n.endsWith(&quot;vmin&quot;)?n:&quot;&quot;.concat(n,&quot;px&quot;)},vg=function(n,e,t,i){if(n&amp;&amp;typeof n==&quot;string&quot;){if(n.endsWith(&quot;px&quot;))return Number(n.replace(&quot;px&quot;,&quot;&quot;));if(n.endsWith(&quot;%&quot;)){var r=Number(n.replace(&quot;%&quot;,&quot;&quot;))/100;return e*r}if(n.endsWith(&quot;vw&quot;)){var r=Number(n.replace(&quot;vw&quot;,&quot;&quot;))/100;return t*r}if(n.endsWith(&quot;vh&quot;)){var r=Number(n.replace(&quot;vh&quot;,&quot;&quot;))/100;return i*r}}return n},H$=function(n,e,t,i,r,s,o){return i=vg(i,n.width,e,t),r=vg(r,n.height,e,t),s=vg(s,n.width,e,t),o=vg(o,n.height,e,t),{maxWidth:typeof i&gt;&quot;u&quot;?void 0:Number(i),maxHeight:typeof r&gt;&quot;u&quot;?void 0:Number(r),minWidth:typeof s&gt;&quot;u&quot;?void 0:Number(s),minHeight:typeof o&gt;&quot;u&quot;?void 0:Number(o)}},V$=function(n){return Array.isArray(n)?n:[n,n]},G$=[&quot;as&quot;,&quot;ref&quot;,&quot;style&quot;,&quot;className&quot;,&quot;grid&quot;,&quot;gridGap&quot;,&quot;snap&quot;,&quot;bounds&quot;,&quot;boundsByDirection&quot;,&quot;size&quot;,&quot;defaultSize&quot;,&quot;minWidth&quot;,&quot;minHeight&quot;,&quot;maxWidth&quot;,&quot;maxHeight&quot;,&quot;lockAspectRatio&quot;,&quot;lockAspectRatioExtraWidth&quot;,&quot;lockAspectRatioExtraHeight&quot;,&quot;enable&quot;,&quot;handleStyles&quot;,&quot;handleClasses&quot;,&quot;handleWrapperStyle&quot;,&quot;handleWrapperClass&quot;,&quot;children&quot;,&quot;onResizeStart&quot;,&quot;onResize&quot;,&quot;onResizeStop&quot;,&quot;handleComponent&quot;,&quot;scale&quot;,&quot;resizeRatio&quot;,&quot;snapGap&quot;],$O=&quot;__resizable_base__&quot;,j$=function(n){F$(e,n);function e(t){var i,r,s,o,l=n.call(this,t)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.delta={width:0,height:0},l.appendBase=function(){if(!l.resizable||!l.window)return null;var u=l.parentNode;if(!u)return null;var h=l.window.document.createElement(&quot;div&quot;);return h.style.width=&quot;100%&quot;,h.style.height=&quot;100%&quot;,h.style.position=&quot;absolute&quot;,h.style.transform=&quot;scale(0, 0)&quot;,h.style.left=&quot;0&quot;,h.style.flex=&quot;0 0 100%&quot;,h.classList?h.classList.add($O):h.className+=$O,u.appendChild(h),h},l.removeBase=function(u){var h=l.parentNode;h&amp;&amp;h.removeChild(u)},l.state={isResizing:!1,width:(r=(i=l.propsSize)===null||i===void 0?void 0:i.width)!==null&amp;&amp;r!==void 0?r:&quot;auto&quot;,height:(o=(s=l.propsSize)===null||s===void 0?void 0:s.height)!==null&amp;&amp;o!==void 0?o:&quot;auto&quot;,direction:&quot;right&quot;,original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:&quot;100%&quot;,width:&quot;100%&quot;,backgroundColor:&quot;rgba(0,0,0,0)&quot;,cursor:&quot;auto&quot;,opacity:0,position:&quot;fixed&quot;,zIndex:9999,top:&quot;0&quot;,left:&quot;0&quot;,bottom:&quot;0&quot;,right:&quot;0&quot;},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(e.prototype,&quot;parentNode&quot;,{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;window&quot;,{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;propsSize&quot;,{get:function(){return this.props.size||this.props.defaultSize||z$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;size&quot;,{get:function(){var t=0,i=0;if(this.resizable&amp;&amp;this.window){var r=this.resizable.offsetWidth,s=this.resizable.offsetHeight,o=this.resizable.style.position;o!==&quot;relative&quot;&amp;&amp;(this.resizable.style.position=&quot;relative&quot;),t=this.resizable.style.width!==&quot;auto&quot;?this.resizable.offsetWidth:r,i=this.resizable.style.height!==&quot;auto&quot;?this.resizable.offsetHeight:s,this.resizable.style.position=o}return{width:t,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,&quot;sizeStyle&quot;,{get:function(){var t=this,i=this.props.size,r=function(l){var u;if(typeof t.state[l]&gt;&quot;u&quot;||t.state[l]===&quot;auto&quot;)return&quot;auto&quot;;if(t.propsSize&amp;&amp;t.propsSize[l]&amp;&amp;(!((u=t.propsSize[l])===null||u===void 0)&amp;&amp;u.toString().endsWith(&quot;%&quot;))){if(t.state[l].toString().endsWith(&quot;%&quot;))return t.state[l].toString();var h=t.getParentSize(),f=Number(t.state[l].toString().replace(&quot;px&quot;,&quot;&quot;)),p=f/h[l]*100;return&quot;&quot;.concat(p,&quot;%&quot;)}return Lx(t.state[l])},s=i&amp;&amp;typeof i.width&lt;&quot;u&quot;&amp;&amp;!this.state.isResizing?Lx(i.width):r(&quot;width&quot;),o=i&amp;&amp;typeof i.height&lt;&quot;u&quot;&amp;&amp;!this.state.isResizing?Lx(i.height):r(&quot;height&quot;);return{width:s,height:o}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var i=!1,r=this.parentNode.style.flexWrap;r!==&quot;wrap&quot;&amp;&amp;(i=!0,this.parentNode.style.flexWrap=&quot;wrap&quot;),t.style.position=&quot;relative&quot;,t.style.minWidth=&quot;100%&quot;,t.style.minHeight=&quot;100%&quot;;var s={width:t.offsetWidth,height:t.offsetHeight};return i&amp;&amp;(this.parentNode.style.flexWrap=r),this.removeBase(t),s},e.prototype.bindEvents=function(){this.window&amp;&amp;(this.window.addEventListener(&quot;mouseup&quot;,this.onMouseUp),this.window.addEventListener(&quot;mousemove&quot;,this.onMouseMove),this.window.addEventListener(&quot;mouseleave&quot;,this.onMouseUp),this.window.addEventListener(&quot;touchmove&quot;,this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener(&quot;touchend&quot;,this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&amp;&amp;(this.window.removeEventListener(&quot;mouseup&quot;,this.onMouseUp),this.window.removeEventListener(&quot;mousemove&quot;,this.onMouseMove),this.window.removeEventListener(&quot;mouseleave&quot;,this.onMouseUp),this.window.removeEventListener(&quot;touchmove&quot;,this.onMouseMove,!0),this.window.removeEventListener(&quot;touchend&quot;,this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!==&quot;auto&quot;?t.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&amp;&amp;this.unbindEvents()},e.prototype.createSizeForCssProperty=function(t,i){var r=this.propsSize&amp;&amp;this.propsSize[i];return this.state[i]===&quot;auto&quot;&amp;&amp;this.state.original[i]===t&amp;&amp;(typeof r&gt;&quot;u&quot;||r===&quot;auto&quot;)?&quot;auto&quot;:t},e.prototype.calculateNewMaxFromBoundary=function(t,i){var r=this.props.boundsByDirection,s=this.state.direction,o=r&amp;&amp;Bu(&quot;left&quot;,s),l=r&amp;&amp;Bu(&quot;top&quot;,s),u,h;if(this.props.bounds===&quot;parent&quot;){var f=this.parentNode;f&amp;&amp;(u=o?this.resizableRight-this.parentLeft:f.offsetWidth+(this.parentLeft-this.resizableLeft),h=l?this.resizableBottom-this.parentTop:f.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds===&quot;window&quot;?this.window&amp;&amp;(u=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,h=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&amp;&amp;(u=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),h=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return u&amp;&amp;Number.isFinite(u)&amp;&amp;(t=t&amp;&amp;t&lt;u?t:u),h&amp;&amp;Number.isFinite(h)&amp;&amp;(i=i&amp;&amp;i&lt;h?i:h),{maxWidth:t,maxHeight:i}},e.prototype.calculateNewSizeFromDirection=function(t,i){var r=this.props.scale||1,s=V$(this.props.resizeRatio||1),o=s[0],l=s[1],u=this.state,h=u.direction,f=u.original,p=this.props,m=p.lockAspectRatio,g=p.lockAspectRatioExtraHeight,v=p.lockAspectRatioExtraWidth,x=f.width,b=f.height,_=g||0,T=v||0;return Bu(&quot;right&quot;,h)&amp;&amp;(x=f.width+(t-f.x)*o/r,m&amp;&amp;(b=(x-T)/this.ratio+_)),Bu(&quot;left&quot;,h)&amp;&amp;(x=f.width-(t-f.x)*o/r,m&amp;&amp;(b=(x-T)/this.ratio+_)),Bu(&quot;bottom&quot;,h)&amp;&amp;(b=f.height+(i-f.y)*l/r,m&amp;&amp;(x=(b-_)*this.ratio+T)),Bu(&quot;top&quot;,h)&amp;&amp;(b=f.height-(i-f.y)*l/r,m&amp;&amp;(x=(b-_)*this.ratio+T)),{newWidth:x,newHeight:b}},e.prototype.calculateNewSizeFromAspectRatio=function(t,i,r,s){var o=this.props,l=o.lockAspectRatio,u=o.lockAspectRatioExtraHeight,h=o.lockAspectRatioExtraWidth,f=typeof s.width&gt;&quot;u&quot;?10:s.width,p=typeof r.width&gt;&quot;u&quot;||r.width&lt;0?t:r.width,m=typeof s.height&gt;&quot;u&quot;?10:s.height,g=typeof r.height&gt;&quot;u&quot;||r.height&lt;0?i:r.height,v=u||0,x=h||0;if(l){var b=(m-v)*this.ratio+x,_=(g-v)*this.ratio+x,T=(f-x)/this.ratio+v,w=(p-x)/this.ratio+v,E=Math.max(f,b),R=Math.min(p,_),N=Math.max(m,T),A=Math.min(g,w);t=yg(t,E,R),i=yg(i,N,A)}else t=yg(t,f,p),i=yg(i,m,g);return{newWidth:t,newHeight:i}},e.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds===&quot;parent&quot;){var i=this.parentNode;if(i){var r=i.getBoundingClientRect();this.parentLeft=r.left*t,this.parentTop=r.top*t}}if(this.props.bounds&amp;&amp;typeof this.props.bounds!=&quot;string&quot;){var s=this.props.bounds.getBoundingClientRect();this.targetLeft=s.left*t,this.targetTop=s.top*t}if(this.resizable){var o=this.resizable.getBoundingClientRect(),l=o.left,u=o.top,h=o.right,f=o.bottom;this.resizableLeft=l*t,this.resizableRight=h*t,this.resizableTop=u*t,this.resizableBottom=f*t}},e.prototype.onResizeStart=function(t,i){if(!(!this.resizable||!this.window)){var r=0,s=0;if(t.nativeEvent&amp;&amp;B$(t.nativeEvent)?(r=t.nativeEvent.clientX,s=t.nativeEvent.clientY):t.nativeEvent&amp;&amp;_g(t.nativeEvent)&amp;&amp;(r=t.nativeEvent.touches[0].clientX,s=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&amp;&amp;this.resizable){var o=this.props.onResizeStart(t,i,this.resizable);if(o===!1)return}this.props.size&amp;&amp;(typeof this.props.size.height&lt;&quot;u&quot;&amp;&amp;this.props.size.height!==this.state.height&amp;&amp;this.setState({height:this.props.size.height}),typeof this.props.size.width&lt;&quot;u&quot;&amp;&amp;this.props.size.width!==this.state.width&amp;&amp;this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio==&quot;number&quot;?this.props.lockAspectRatio:this.size.width/this.size.height;var l,u=this.window.getComputedStyle(this.resizable);if(u.flexBasis!==&quot;auto&quot;){var h=this.parentNode;if(h){var f=this.window.getComputedStyle(h).flexDirection;this.flexDir=f.startsWith(&quot;row&quot;)?&quot;row&quot;:&quot;column&quot;,l=u.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var p={original:{x:r,y:s,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:go(go({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||&quot;auto&quot;}),direction:i,flexBasis:l};this.setState(p)}},e.prototype.onMouseMove=function(t){var i=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&amp;&amp;_g(t))try{t.preventDefault(),t.stopPropagation()}catch{}var r=this.props,s=r.maxWidth,o=r.maxHeight,l=r.minWidth,u=r.minHeight,h=_g(t)?t.touches[0].clientX:t.clientX,f=_g(t)?t.touches[0].clientY:t.clientY,p=this.state,m=p.direction,g=p.original,v=p.width,x=p.height,b=this.getParentSize(),_=H$(b,this.window.innerWidth,this.window.innerHeight,s,o,l,u);s=_.maxWidth,o=_.maxHeight,l=_.minWidth,u=_.minHeight;var T=this.calculateNewSizeFromDirection(h,f),w=T.newHeight,E=T.newWidth,R=this.calculateNewMaxFromBoundary(s,o);this.props.snap&amp;&amp;this.props.snap.x&amp;&amp;(E=KO(E,this.props.snap.x,this.props.snapGap)),this.props.snap&amp;&amp;this.props.snap.y&amp;&amp;(w=KO(w,this.props.snap.y,this.props.snapGap));var N=this.calculateNewSizeFromAspectRatio(E,w,{width:R.maxWidth,height:R.maxHeight},{width:l,height:u});if(E=N.newWidth,w=N.newHeight,this.props.grid){var A=YO(E,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),D=YO(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),C=this.props.snapGap||0,O=C===0||Math.abs(A-E)&lt;=C?A:E,L=C===0||Math.abs(D-w)&lt;=C?D:w;E=O,w=L}var V={width:E-g.width,height:w-g.height};if(this.delta=V,v&amp;&amp;typeof v==&quot;string&quot;){if(v.endsWith(&quot;%&quot;)){var Z=E/b.width*100;E=&quot;&quot;.concat(Z,&quot;%&quot;)}else if(v.endsWith(&quot;vw&quot;)){var z=E/this.window.innerWidth*100;E=&quot;&quot;.concat(z,&quot;vw&quot;)}else if(v.endsWith(&quot;vh&quot;)){var K=E/this.window.innerHeight*100;E=&quot;&quot;.concat(K,&quot;vh&quot;)}}if(x&amp;&amp;typeof x==&quot;string&quot;){if(x.endsWith(&quot;%&quot;)){var Z=w/b.height*100;w=&quot;&quot;.concat(Z,&quot;%&quot;)}else if(x.endsWith(&quot;vw&quot;)){var z=w/this.window.innerWidth*100;w=&quot;&quot;.concat(z,&quot;vw&quot;)}else if(x.endsWith(&quot;vh&quot;)){var K=w/this.window.innerHeight*100;w=&quot;&quot;.concat(K,&quot;vh&quot;)}}var I={width:this.createSizeForCssProperty(E,&quot;width&quot;),height:this.createSizeForCssProperty(w,&quot;height&quot;)};this.flexDir===&quot;row&quot;?I.flexBasis=I.width:this.flexDir===&quot;column&quot;&amp;&amp;(I.flexBasis=I.height);var j=this.state.width!==I.width,G=this.state.height!==I.height,ee=this.state.flexBasis!==I.flexBasis,F=j||G||ee;F&amp;&amp;NP.flushSync(function(){i.setState(I)}),this.props.onResize&amp;&amp;F&amp;&amp;this.props.onResize(t,m,this.resizable,V)}},e.prototype.onMouseUp=function(t){var i,r,s=this.state,o=s.isResizing,l=s.direction;s.original,!(!o||!this.resizable)&amp;&amp;(this.props.onResizeStop&amp;&amp;this.props.onResizeStop(t,l,this.resizable,this.delta),this.props.size&amp;&amp;this.setState({width:(i=this.props.size.width)!==null&amp;&amp;i!==void 0?i:&quot;auto&quot;,height:(r=this.props.size.height)!==null&amp;&amp;r!==void 0?r:&quot;auto&quot;}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:go(go({},this.state.backgroundStyle),{cursor:&quot;auto&quot;})}))},e.prototype.updateSize=function(t){var i,r;this.setState({width:(i=t.width)!==null&amp;&amp;i!==void 0?i:&quot;auto&quot;,height:(r=t.height)!==null&amp;&amp;r!==void 0?r:&quot;auto&quot;})},e.prototype.renderResizer=function(){var t=this,i=this.props,r=i.enable,s=i.handleStyles,o=i.handleClasses,l=i.handleWrapperStyle,u=i.handleWrapperClass,h=i.handleComponent;if(!r)return null;var f=Object.keys(r).map(function(p){return r[p]!==!1?P.jsx(k$,{direction:p,onResizeStart:t.onResizeStart,replaceStyles:s&amp;&amp;s[p],className:o&amp;&amp;o[p],children:h&amp;&amp;h[p]?h[p]:null},p):null});return P.jsx(&quot;div&quot;,{className:u,style:l,children:f})},e.prototype.render=function(){var t=this,i=Object.keys(this.props).reduce(function(o,l){return G$.indexOf(l)!==-1||(o[l]=t.props[l]),o},{}),r=go(go(go({position:&quot;relative&quot;,userSelect:this.state.isResizing?&quot;none&quot;:&quot;auto&quot;},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:&quot;border-box&quot;,flexShrink:0});this.state.flexBasis&amp;&amp;(r.flexBasis=this.state.flexBasis);var s=this.props.as||&quot;div&quot;;return P.jsxs(s,go({style:r,className:this.props.className},i,{ref:function(o){o&amp;&amp;(t.resizable=o)},children:[this.state.isResizing&amp;&amp;P.jsx(&quot;div&quot;,{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:&quot;div&quot;,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(re.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var HS=function(n,e){return HS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&amp;&amp;function(t,i){t.__proto__=i}||function(t,i){for(var r in i)i.hasOwnProperty(r)&amp;&amp;(t[r]=i[r])},HS(n,e)};function W$(n,e){HS(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ui=function(){return Ui=Object.assign||function(e){for(var t,i=1,r=arguments.length;i&lt;r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&amp;&amp;(e[s]=t[s])}return e},Ui.apply(this,arguments)};function X$(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;e.indexOf(i)&lt;0&amp;&amp;(t[i]=n[i]);if(n!=null&amp;&amp;typeof Object.getOwnPropertySymbols==&quot;function&quot;)for(var r=0,i=Object.getOwnPropertySymbols(n);r&lt;i.length;r++)e.indexOf(i[r])&lt;0&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i[r])&amp;&amp;(t[i[r]]=n[i[r]]);return t}var q$={width:&quot;auto&quot;,height:&quot;auto&quot;,display:&quot;inline-block&quot;,position:&quot;absolute&quot;,top:0,left:0},Y$=function(n){return{bottom:n,bottomLeft:n,bottomRight:n,left:n,right:n,top:n,topLeft:n,topRight:n}},i1=function(n){W$(e,n);function e(t){var i=n.call(this,t)||this;return i.resizingPosition={x:0,y:0},i.offsetFromParent={left:0,top:0},i.resizableElement={current:null},i.originalPosition={x:0,y:0},i.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},i.onResizeStart=i.onResizeStart.bind(i),i.onResize=i.onResize.bind(i),i.onResizeStop=i.onResizeStop.bind(i),i.onDragStart=i.onDragStart.bind(i),i.onDrag=i.onDrag.bind(i),i.onDragStop=i.onDragStop.bind(i),i.getMaxSizesFromProps=i.getMaxSizesFromProps.bind(i),i}return e.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,i=t.left,r=t.top,s=this.getDraggablePosition(),o=s.x,l=s.y;this.draggable.setState({x:o-i,y:l-r}),this.forceUpdate()},e.prototype.getDraggablePosition=function(){var t=this.draggable.state,i=t.x,r=t.y;return{x:i,y:r}},e.prototype.getParent=function(){return this.resizable&amp;&amp;this.resizable.parentNode},e.prototype.getParentSize=function(){return this.resizable.getParentSize()},e.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth&gt;&quot;u&quot;?Number.MAX_SAFE_INTEGER:this.props.maxWidth,i=typeof this.props.maxHeight&gt;&quot;u&quot;?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:i}},e.prototype.getSelfElement=function(){return this.resizable&amp;&amp;this.resizable.resizable},e.prototype.getOffsetHeight=function(t){var i=this.props.scale;switch(this.props.bounds){case&quot;window&quot;:return window.innerHeight/i;case&quot;body&quot;:return document.body.offsetHeight/i;default:return t.offsetHeight}},e.prototype.getOffsetWidth=function(t){var i=this.props.scale;switch(this.props.bounds){case&quot;window&quot;:return window.innerWidth/i;case&quot;body&quot;:return document.body.offsetWidth/i;default:return t.offsetWidth}},e.prototype.onDragStart=function(t,i){this.props.onDragStart&amp;&amp;this.props.onDragStart(t,i);var r=this.getDraggablePosition();if(this.originalPosition=r,!!this.props.bounds){var s=this.getParent(),o=this.props.scale,l;if(this.props.bounds===&quot;parent&quot;)l=s;else if(this.props.bounds===&quot;body&quot;){var u=s.getBoundingClientRect(),h=u.left,f=u.top,p=document.body.getBoundingClientRect(),m=-(h-s.offsetLeft*o-p.left)/o,g=-(f-s.offsetTop*o-p.top)/o,v=(document.body.offsetWidth-this.resizable.size.width*o)/o+m,x=(document.body.offsetHeight-this.resizable.size.height*o)/o+g;return this.setState({bounds:{top:g,right:v,bottom:x,left:m}})}else if(this.props.bounds===&quot;window&quot;){if(!this.resizable)return;var b=s.getBoundingClientRect(),_=b.left,T=b.top,w=-(_-s.offsetLeft*o)/o,E=-(T-s.offsetTop*o)/o,v=(window.innerWidth-this.resizable.size.width*o)/o+w,x=(window.innerHeight-this.resizable.size.height*o)/o+E;return this.setState({bounds:{top:E,right:v,bottom:x,left:w}})}else typeof this.props.bounds==&quot;string&quot;?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&amp;&amp;(l=this.props.bounds);if(!(!(l instanceof HTMLElement)||!(s instanceof HTMLElement))){var R=l.getBoundingClientRect(),N=R.left,A=R.top,D=s.getBoundingClientRect(),C=D.left,O=D.top,L=(N-C)/o,V=A-O;if(this.resizable){this.updateOffsetFromParent();var Z=this.offsetFromParent;this.setState({bounds:{top:V-Z.top,right:L+(l.offsetWidth-this.resizable.size.width)-Z.left/o,bottom:V+(l.offsetHeight-this.resizable.size.height)-Z.top,left:L-Z.left/o}})}}}},e.prototype.onDrag=function(t,i){if(this.props.onDrag){var r=this.offsetFromParent,s=r.left,o=r.top;if(!this.props.dragAxis||this.props.dragAxis===&quot;both&quot;)return this.props.onDrag(t,Ui(Ui({},i),{x:i.x+s,y:i.y+o}));if(this.props.dragAxis===&quot;x&quot;)return this.props.onDrag(t,Ui(Ui({},i),{x:i.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis===&quot;y&quot;)return this.props.onDrag(t,Ui(Ui({},i),{x:this.originalPosition.x+s,y:i.y+o,deltaX:0}))}},e.prototype.onDragStop=function(t,i){if(this.props.onDragStop){var r=this.offsetFromParent,s=r.left,o=r.top;if(!this.props.dragAxis||this.props.dragAxis===&quot;both&quot;)return this.props.onDragStop(t,Ui(Ui({},i),{x:i.x+s,y:i.y+o}));if(this.props.dragAxis===&quot;x&quot;)return this.props.onDragStop(t,Ui(Ui({},i),{x:i.x+s,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis===&quot;y&quot;)return this.props.onDragStop(t,Ui(Ui({},i),{x:this.originalPosition.x+s,y:i.y+o,deltaX:0}))}},e.prototype.onResizeStart=function(t,i,r){t.stopPropagation(),this.setState({resizing:!0});var s=this.props.scale,o=this.offsetFromParent,l=this.getDraggablePosition();if(this.resizingPosition={x:l.x+o.left,y:l.y+o.top},this.originalPosition=l,this.props.bounds){var u=this.getParent(),h=void 0;this.props.bounds===&quot;parent&quot;?h=u:this.props.bounds===&quot;body&quot;?h=document.body:this.props.bounds===&quot;window&quot;?h=window:typeof this.props.bounds==&quot;string&quot;?h=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&amp;&amp;(h=this.props.bounds);var f=this.getSelfElement();if(f instanceof Element&amp;&amp;(h instanceof HTMLElement||h===window)&amp;&amp;u instanceof HTMLElement){var p=this.getMaxSizesFromProps(),m=p.maxWidth,g=p.maxHeight,v=this.getParentSize();if(m&amp;&amp;typeof m==&quot;string&quot;)if(m.endsWith(&quot;%&quot;)){var x=Number(m.replace(&quot;%&quot;,&quot;&quot;))/100;m=v.width*x}else m.endsWith(&quot;px&quot;)&amp;&amp;(m=Number(m.replace(&quot;px&quot;,&quot;&quot;)));if(g&amp;&amp;typeof g==&quot;string&quot;)if(g.endsWith(&quot;%&quot;)){var x=Number(g.replace(&quot;%&quot;,&quot;&quot;))/100;g=v.height*x}else g.endsWith(&quot;px&quot;)&amp;&amp;(g=Number(g.replace(&quot;px&quot;,&quot;&quot;)));var b=f.getBoundingClientRect(),_=b.left,T=b.top,w=this.props.bounds===&quot;window&quot;?{left:0,top:0}:h.getBoundingClientRect(),E=w.left,R=w.top,N=this.getOffsetWidth(h),A=this.getOffsetHeight(h),D=i.toLowerCase().endsWith(&quot;left&quot;),C=i.toLowerCase().endsWith(&quot;right&quot;),O=i.startsWith(&quot;top&quot;),L=i.startsWith(&quot;bottom&quot;);if((D||O)&amp;&amp;this.resizable){var V=(_-E)/s+this.resizable.size.width;this.setState({maxWidth:V&gt;Number(m)?m:V})}if(C||this.props.lockAspectRatio&amp;&amp;!D&amp;&amp;!O){var V=N+(E-_)/s;this.setState({maxWidth:V&gt;Number(m)?m:V})}if((O||D)&amp;&amp;this.resizable){var V=(T-R)/s+this.resizable.size.height;this.setState({maxHeight:V&gt;Number(g)?g:V})}if(L||this.props.lockAspectRatio&amp;&amp;!O&amp;&amp;!D){var V=A+(R-T)/s;this.setState({maxHeight:V&gt;Number(g)?g:V})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&amp;&amp;this.props.onResizeStart(t,i,r)},e.prototype.onResize=function(t,i,r,s){var o=this,l={x:this.originalPosition.x,y:this.originalPosition.y},u=-s.width,h=-s.height,f=[&quot;top&quot;,&quot;left&quot;,&quot;topLeft&quot;,&quot;bottomLeft&quot;,&quot;topRight&quot;];f.includes(i)&amp;&amp;(i===&quot;bottomLeft&quot;?l.x+=u:(i===&quot;topRight&quot;||(l.x+=u),l.y+=h));var p=this.draggable.state;(l.x!==p.x||l.y!==p.y)&amp;&amp;NP.flushSync(function(){o.draggable.setState(l)}),this.updateOffsetFromParent();var m=this.offsetFromParent,g=this.getDraggablePosition().x+m.left,v=this.getDraggablePosition().y+m.top;this.resizingPosition={x:g,y:v},this.props.onResize&amp;&amp;this.props.onResize(t,i,r,s,{x:g,y:v})},e.prototype.onResizeStop=function(t,i,r,s){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),l=o.maxWidth,u=o.maxHeight;this.setState({maxWidth:l,maxHeight:u}),this.props.onResizeStop&amp;&amp;this.props.onResizeStop(t,i,r,s,this.resizingPosition)},e.prototype.updateSize=function(t){this.resizable&amp;&amp;this.resizable.updateSize({width:t.width,height:t.height})},e.prototype.updatePosition=function(t){this.draggable.setState(t)},e.prototype.updateOffsetFromParent=function(){var t=this.props.scale,i=this.getParent(),r=this.getSelfElement();if(!i||r===null)return{top:0,left:0};var s=i.getBoundingClientRect(),o=s.left,l=s.top,u=r.getBoundingClientRect(),h=this.getDraggablePosition(),f=i.scrollLeft,p=i.scrollTop;this.offsetFromParent={left:u.left-o+f-h.x*t,top:u.top-l+p-h.y*t}},e.prototype.render=function(){var t=this,i=this.props,r=i.disableDragging,s=i.style,o=i.dragHandleClassName,l=i.position,u=i.onMouseDown,h=i.onMouseUp,f=i.dragAxis,p=i.dragGrid,m=i.bounds,g=i.enableUserSelectHack,v=i.cancel,x=i.children;i.onResizeStart,i.onResize,i.onResizeStop,i.onDragStart,i.onDrag,i.onDragStop;var b=i.resizeHandleStyles,_=i.resizeHandleClasses,T=i.resizeHandleComponent,w=i.enableResizing,E=i.resizeGrid,R=i.resizeHandleWrapperClass,N=i.resizeHandleWrapperStyle,A=i.scale,D=i.allowAnyClick,C=i.dragPositionOffset,O=X$(i,[&quot;disableDragging&quot;,&quot;style&quot;,&quot;dragHandleClassName&quot;,&quot;position&quot;,&quot;onMouseDown&quot;,&quot;onMouseUp&quot;,&quot;dragAxis&quot;,&quot;dragGrid&quot;,&quot;bounds&quot;,&quot;enableUserSelectHack&quot;,&quot;cancel&quot;,&quot;children&quot;,&quot;onResizeStart&quot;,&quot;onResize&quot;,&quot;onResizeStop&quot;,&quot;onDragStart&quot;,&quot;onDrag&quot;,&quot;onDragStop&quot;,&quot;resizeHandleStyles&quot;,&quot;resizeHandleClasses&quot;,&quot;resizeHandleComponent&quot;,&quot;enableResizing&quot;,&quot;resizeGrid&quot;,&quot;resizeHandleWrapperClass&quot;,&quot;resizeHandleWrapperStyle&quot;,&quot;scale&quot;,&quot;allowAnyClick&quot;,&quot;dragPositionOffset&quot;]),L=this.props.default?Ui({},this.props.default):void 0;delete O.default;var V=r||o?{cursor:&quot;auto&quot;}:{cursor:&quot;move&quot;},Z=Ui(Ui(Ui({},q$),V),s),z=this.offsetFromParent,K=z.left,I=z.top,j;l&amp;&amp;(j={x:l.x-K,y:l.y-I});var G=this.state.resizing?void 0:j,ee=this.state.resizing?&quot;both&quot;:f;return re.createElement(L$,{ref:function(F){F&amp;&amp;(t.draggable=F)},handle:o?&quot;.&quot;.concat(o):void 0,defaultPosition:L,onMouseDown:u,onMouseUp:h,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:ee,disabled:r,grid:p,bounds:m?this.state.bounds:void 0,position:G,enableUserSelectHack:g,cancel:v,scale:A,allowAnyClick:D,nodeRef:this.resizableElement,positionOffset:C},re.createElement(j$,Ui({},O,{ref:function(F){F&amp;&amp;(t.resizable=F,t.resizableElement.current=F.resizable)},defaultSize:L,size:this.props.size,enable:typeof w==&quot;boolean&quot;?Y$(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:Z,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:E,handleWrapperClass:R,handleWrapperStyle:N,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:b,handleClasses:_,handleComponent:T,scale:this.props.scale}),x))},e.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},e}(re.PureComponent);const K$=({data:n})=&gt;{const[e,t]=re.useState(!0),i=()=&gt;{t(!e)};return e?P.jsxs(&quot;div&quot;,{className:&quot;json-viewer bg-white p-2 border rounded&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex justify-between items-center mb-2&quot;,children:[P.jsx(&quot;h3&quot;,{className:&quot;font-bold&quot;,children:&quot;JSON Data&quot;}),P.jsx(&quot;button&quot;,{className:&quot;text-blue-500 underline&quot;,onClick:i,children:&quot;Undock&quot;})]}),P.jsx(IO,{data:n,shouldExpandNode:NO})]}):P.jsx(i1,{default:{x:100,y:100,width:400,height:300},minWidth:200,minHeight:100,bounds:&quot;window&quot;,className:&quot;bg-white border rounded shadow-lg&quot;,children:P.jsxs(&quot;div&quot;,{className:&quot;json-viewer p-2 h-full&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex justify-between items-center mb-2&quot;,children:[P.jsx(&quot;h3&quot;,{className:&quot;font-bold&quot;,children:&quot;JSON Data&quot;}),P.jsx(&quot;button&quot;,{className:&quot;text-blue-500 underline&quot;,onClick:i,children:&quot;Dock&quot;})]}),P.jsx(&quot;div&quot;,{className:&quot;overflow-auto h-full&quot;,children:P.jsx(IO,{data:n,shouldExpandNode:NO})})]})})},$$=({clickCoordinate:n,prec:e})=&gt;{const{zIsUp:t}=eo();if(!n)return P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:&quot; &quot;});const i=n.x.toFixed(e),r=n.y.toFixed(e),s=n.z.toFixed(e),o=t?`(${i}, ${r}, ${s})`:`(${i}, ${s}, ${r})`;return P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48 flex items-center pointer-events-auto&quot;,children:P.jsx(&quot;span&quot;,{children:o})})},Z$=()=&gt;{const{name:n,faceIndex:e,clickCoordinate:t,jsonData:i,isJsonViewVisible:r,setIsJsonViewVisible:s}=yl(),o=()=&gt;{s(!r)};return P.jsxs(&quot;div&quot;,{className:&quot;bg-gray-400 bg-opacity-50 rounded p-2 min-w-80&quot;,children:[P.jsx(&quot;h2&quot;,{className:&quot;font-bold&quot;,children:&quot;Selected Object Info&quot;}),P.jsxs(&quot;div&quot;,{className:&quot;table-row pointer-events-auto&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Name:&quot;}),P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:n})]}),P.jsxs(&quot;div&quot;,{className:&quot;table-row hidden&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;Face Index:&quot;}),P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:e})]}),P.jsxs(&quot;div&quot;,{className:&quot;table-row&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;table-cell w-24 min-w-24&quot;,children:&quot;Clicked @:&quot;}),P.jsx($$,{clickCoordinate:t,prec:3})]}),i&amp;&amp;P.jsxs(&quot;div&quot;,{className:&quot;table-row&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;table-cell w-24&quot;,children:&quot;JSON Data:&quot;}),P.jsx(&quot;div&quot;,{className:&quot;table-cell w-48&quot;,children:P.jsx(&quot;button&quot;,{className:&quot;bg-blue-500 text-white px-2 py-1 rounded&quot;,onClick:o,children:r?&quot;Hide JSON&quot;:&quot;Show JSON&quot;})})]}),r&amp;&amp;i&amp;&amp;P.jsx(&quot;div&quot;,{className:&quot;mt-2&quot;,children:P.jsx(K$,{data:i})})]})},J$=n=&gt;P.jsx(&quot;svg&quot;,{fill:&quot;none&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:1.5,stroke:&quot;currentColor&quot;,className:&quot;w-6 h-6&quot;,children:P.jsx(&quot;path&quot;,{strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,d:&quot;M21 7.5V18M15 7.5V18M3 16.811V8.69c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811Z&quot;})}),Q$=n=&gt;P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,fill:&quot;none&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:1.5,stroke:&quot;currentColor&quot;,className:&quot;w-6 h-6&quot;,children:P.jsx(&quot;path&quot;,{strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,d:&quot;M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z&quot;})});function eZ(){const n=Fw.current,[e,t]=re.useState(0),[i,r]=re.useState(0);if(re.useEffect(()=&gt;{n&amp;&amp;(t(0),r(0))},[n]),!n)return P.jsxs(&quot;div&quot;,{className:&quot;max-w-md mx-auto mt-6 p-4 border rounded-lg shadow-sm&quot;,children:[P.jsx(&quot;h2&quot;,{className:&quot;text-lg font-semibold text-gray-800&quot;,children:&quot;No Simulation Loaded&quot;}),P.jsx(&quot;p&quot;,{className:&quot;text-sm text-gray-500 mt-2&quot;,children:&quot;Load a GLB with the ADA simulation metadata extension to view details here.&quot;})]});const s=n.steps,l=s[e].fields,u=l[i];return P.jsxs(&quot;div&quot;,{className:&quot;p-6 border rounded-lg shadow-sm bg-white bg-opacity-50 max-h-96 overflow-auto pointer-events-auto&quot;,children:[P.jsx(&quot;h2&quot;,{className:&quot;text-xl font-semibold text-gray-800&quot;,children:n.name}),P.jsx(&quot;p&quot;,{className:&quot;text-sm text-gray-500 mt-1&quot;,children:new Date(n.date).toLocaleString()}),P.jsxs(&quot;div&quot;,{className:&quot;mt-4 text-sm text-gray-700&quot;,children:[P.jsxs(&quot;div&quot;,{children:[P.jsx(&quot;strong&quot;,{children:&quot;Software:&quot;}),&quot; &quot;,n.fea_software]}),P.jsxs(&quot;div&quot;,{className:&quot;mt-1&quot;,children:[P.jsx(&quot;strong&quot;,{children:&quot;Version:&quot;}),&quot; &quot;,n.fea_software_version]})]}),P.jsxs(&quot;div&quot;,{className:&quot;mt-6&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row gap-4 items-center&quot;,children:[P.jsxs(&quot;label&quot;,{className:&quot;flex items-center text-sm text-gray-700&quot;,children:[P.jsx(&quot;span&quot;,{children:&quot;Select Step:&quot;}),P.jsx(&quot;select&quot;,{className:&quot;ml-2 p-1 border rounded&quot;,value:e,onChange:h=&gt;{const f=parseInt(h.target.value,10);t(f),r(0)},children:s.map((h,f)=&gt;P.jsxs(&quot;option&quot;,{value:f,children:[&quot;Step &quot;,f+1,&quot;: &quot;,h.analysis_type]},f))})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center text-sm text-gray-700&quot;,children:[P.jsx(&quot;span&quot;,{children:&quot;Select Field:&quot;}),P.jsx(&quot;select&quot;,{className:&quot;ml-2 p-1 border rounded&quot;,value:i,onChange:h=&gt;r(parseInt(h.target.value,10)),children:l.map((h,f)=&gt;P.jsx(&quot;option&quot;,{value:f,children:h.name},f))})]})]}),P.jsxs(&quot;div&quot;,{className:&quot;mt-4 p-4 border rounded bg-white&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;text-sm text-gray-800&quot;,children:[P.jsx(&quot;strong&quot;,{children:&quot;Name:&quot;}),&quot; &quot;,u.name]}),P.jsxs(&quot;div&quot;,{className:&quot;text-sm text-gray-800 mt-1&quot;,children:[P.jsx(&quot;strong&quot;,{children:&quot;Type:&quot;}),&quot; &quot;,u.type]}),P.jsxs(&quot;div&quot;,{className:&quot;text-sm text-gray-800 mt-1&quot;,children:[P.jsx(&quot;strong&quot;,{children:&quot;BufferView:&quot;}),&quot; &quot;,u.data.bufferView,u.data.byteOffset!==void 0&amp;&amp;P.jsxs(&quot;span&quot;,{children:[&quot; @ &quot;,u.data.byteOffset,&quot; bytes&quot;]})]})]})]})]})}const tZ=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;#ffffff&quot;,...n,children:[P.jsx(&quot;rect&quot;,{x:&quot;3&quot;,y:&quot;4&quot;,width:&quot;18&quot;,height:&quot;16&quot;,rx:&quot;1&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;line&quot;,{x1:&quot;9&quot;,y1:&quot;4&quot;,x2:&quot;9&quot;,y2:&quot;20&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;line&quot;,{x1:&quot;15&quot;,y1:&quot;4&quot;,x2:&quot;15&quot;,y2:&quot;20&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;line&quot;,{x1:&quot;3&quot;,y1:&quot;10&quot;,x2:&quot;21&quot;,y2:&quot;10&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;line&quot;,{x1:&quot;3&quot;,y1:&quot;16&quot;,x2:&quot;21&quot;,y2:&quot;16&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;polyline&quot;,{points:&quot;10.5,17 11.5,15 12.5,16 13.5,14&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;})]}),nZ=()=&gt;{var f,p,m;const{selectedAnimation:n,currentKey:e,setCurrentKey:t}=gl(),i=parseFloat(e.toFixed(2)),[r,s]=re.useState(!1),o=g=&gt;{var x;const v=g.target.value;(x=bi.current)==null||x.setCurrentAnimation(v)},l=()=&gt;{bi.current&amp;&amp;bi.current.togglePlayPause()},u=()=&gt;{bi.current&amp;&amp;bi.current.stopAnimation()},h=g=&gt;{bi.current&amp;&amp;bi.current.seek(g)};return re.useEffect(()=&gt;{bi.current&amp;&amp;t(bi.current.getCurrentTime())},[n]),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-col gap-2&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center gap-x-2 min-w-0 pointer-events-auto&quot;,children:[P.jsxs(&quot;select&quot;,{className:&quot;text-black font-bold py-2 px-4 rounded w-60&quot;,value:n,onChange:o,children:[P.jsx(&quot;option&quot;,{title:&quot;No Animation&quot;,value:&quot;No Animation&quot;,children:&quot;No Animation&quot;},&quot;No Animation&quot;),(f=bi.current)==null?void 0:f.getAnimationNames().map(g=&gt;P.jsx(&quot;option&quot;,{value:g,children:g},g))]}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,onClick:l,children:P.jsx(J$,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,onClick:u,children:P.jsx(Q$,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,onClick:()=&gt;s(g=&gt;!g),children:P.jsx(tZ,{})}),P.jsxs(&quot;div&quot;,{className:&quot;flex items-center gap-2 min-w-[100px] max-w-sm w-full&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;range&quot;,min:&quot;0&quot;,max:((p=bi.current)==null?void 0:p.getDuration())||0,value:i,step:((m=bi.current)==null?void 0:m.getStep())||0,onChange:g=&gt;{const v=parseFloat(g.target.value);t(v),h(v)},className:&quot;w-full h-2 rounded-lg appearance-none cursor-pointer accent-blue-700 bg-blue-700/30&quot;}),P.jsx(&quot;div&quot;,{className:&quot;text-white text-sm font-mono w-12 text-center&quot;,children:i})]})]}),r&amp;&amp;P.jsx(&quot;div&quot;,{className:&quot;flex-1 overflow-hidden&quot;,children:P.jsx(eZ,{})})]})};async function EL(){console.log(&quot;Querying server for mesh info&quot;);let n=new Mo(1024);at.startMessage(n),at.addInstanceId(n,Ei.instance_id),at.addCommandType(n,Bn.LIST_PROCEDURES),at.addTargetGroup(n,si.SERVER),at.addClientType(n,si.WEB),n.finish(at.endMessage(n)),await Ei.sendMessage(n.asUint8Array())}const r1=n=&gt;P.jsx(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 15 15&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:P.jsx(&quot;path&quot;,{fillRule:&quot;evenodd&quot;,clipRule:&quot;evenodd&quot;,d:&quot;M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z&quot;,fill:&quot;#ffffff&quot;})});async function iZ(){console.log(&quot;Querying server for list of files&quot;);let n=new Mo(1024);at.startMessage(n),at.addInstanceId(n,Ei.instance_id),at.addCommandType(n,Bn.LIST_FILE_OBJECTS),at.addTargetGroup(n,si.SERVER),at.addClientType(n,si.WEB),n.finish(at.endMessage(n)),await Ei.sendMessage(n.asUint8Array())}const rZ=()=&gt;(e1(),P.jsxs(&quot;div&quot;,{className:&quot;bg-gray-400 bg-opacity-50 rounded p-2 mt-2 ml-2 mr-2 min-w-80&quot;,children:[P.jsx(&quot;h2&quot;,{className:&quot;font-bold&quot;,children:&quot;Server Info&quot;}),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;pr-1 &quot;,children:&quot;Files:&quot;}),P.jsxs(&quot;select&quot;,{id:&quot;listbox&quot;,name:&quot;listbox&quot;,className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold p-2 rounded&quot;,children:[P.jsx(&quot;option&quot;,{value:&quot;item1&quot;,children:&quot;Item 1&quot;}),P.jsx(&quot;option&quot;,{value:&quot;item2&quot;,children:&quot;Item 2&quot;}),P.jsx(&quot;option&quot;,{value:&quot;item3&quot;,children:&quot;Item 3&quot;}),P.jsx(&quot;option&quot;,{value:&quot;item4&quot;,children:&quot;Item 4&quot;})]}),P.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-2 ml-2 rounded&quot;,onClick:()=&gt;iZ(),children:P.jsx(r1,{})})]})]})),sZ=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,strokeWidth:&quot;1.5&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;currentColor&quot;,children:[P.jsx(&quot;rect&quot;,{width:&quot;7&quot;,height:&quot;5&quot;,rx:&quot;0.6&quot;,transform:&quot;matrix(0 -1 -1 0 22 21)&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;rect&quot;,{width:&quot;7&quot;,height:&quot;5&quot;,rx:&quot;0.6&quot;,transform:&quot;matrix(0 -1 -1 0 7 15.5)&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;rect&quot;,{width:&quot;7&quot;,height:&quot;5&quot;,rx:&quot;0.6&quot;,transform:&quot;matrix(0 -1 -1 0 22 10)&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M17 17.5H13.5C12.3954 17.5 11.5 16.6046 11.5 15.5V8.5C11.5 7.39543 12.3954 6.5 13.5 6.5H17&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M11.5 12H7&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;})]}),oZ=n=&gt;P.jsx(&quot;svg&quot;,{xmlns:&quot;http://www.w3.org/2000/svg&quot;,fill:&quot;none&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:1.5,stroke:&quot;currentColor&quot;,className:&quot;w-6 h-6&quot;,children:P.jsx(&quot;path&quot;,{strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;,d:&quot;m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z&quot;})}),aZ=n=&gt;P.jsxs(&quot;svg&quot;,{fill:&quot;currentColor&quot;,width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 36 36&quot;,version:&quot;1.1&quot;,preserveAspectRatio:&quot;xMidYMid meet&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[P.jsx(&quot;title&quot;,{children:&quot;tree-view-line&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M15,32H11a1,1,0,0,1-1-1V27a1,1,0,0,1,1-1h4a1,1,0,0,1,1,1v4A1,1,0,0,1,15,32Zm-3-2h2V28H12Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-1&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M15,16H11a1,1,0,0,0-1,1v1.2H5.8V12H7a1,1,0,0,0,1-1V7A1,1,0,0,0,7,6H3A1,1,0,0,0,2,7v4a1,1,0,0,0,1,1H4.2V29.8h6.36a.8.8,0,0,0,0-1.6H5.8V19.8H10V21a1,1,0,0,0,1,1h4a1,1,0,0,0,1-1V17A1,1,0,0,0,15,16ZM4,8H6v2H4ZM14,20H12V18h2Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-2&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M34,9a1,1,0,0,0-1-1H10v2H33A1,1,0,0,0,34,9Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-3&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M33,18H18v2H33a1,1,0,0,0,0-2Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-4&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M33,28H18v2H33a1,1,0,0,0,0-2Z&quot;,className:&quot;clr-i-outline clr-i-outline-path-5&quot;}),P.jsx(&quot;rect&quot;,{x:&quot;0&quot;,y:&quot;0&quot;,width:&quot;36&quot;,height:&quot;36&quot;,fillOpacity:&quot;0&quot;})]}),lZ=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,strokeWidth:&quot;1.5&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;currentColor&quot;,children:[P.jsx(&quot;path&quot;,{d:&quot;M3 19H12M21 19H12M12 19V13M12 13H18V5H6V13H12Z&quot;,stroke:&quot;currentColor&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M9 9.01L9.01 8.99889&quot;,stroke:&quot;#000000&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M12 9.01L12.01 8.99889&quot;,stroke:&quot;#000000&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;})]}),cZ=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;#ffffff&quot;,...n,children:[P.jsx(&quot;path&quot;,{d:&quot;M6 3V21&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;circle&quot;,{cx:&quot;6&quot;,cy:&quot;9&quot;,r:&quot;2&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M18 3V21&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;circle&quot;,{cx:&quot;18&quot;,cy:&quot;15&quot;,r:&quot;2&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;})]}),uZ=()=&gt;{const{show_info_box:n}=yl(),{isNodeEditorVisible:e,setIsNodeEditorVisible:t,use_node_editor_only:i}=Ks(),{isOptionsVisible:r,setIsOptionsVisible:s,enableNodeEditor:o}=Bc(),{isTreeCollapsed:l,setIsTreeCollapsed:u}=Oc(),{showServerInfoBox:h,setShowServerInfoBox:f}=e1(),{hasAnimation:p,isControlsVisible:m,setIsControlsVisible:g}=gl();return P.jsx(&quot;div&quot;,{className:&quot;relative w-full h-full&quot;,children:P.jsxs(&quot;div&quot;,{className:&quot;absolute left-0 top-0 z-10 py-2 gap-2 flex flex-col pointer-events-none&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center gap-2 px-2 max-w-full pointer-events-auto&quot;,children:[i&amp;&amp;P.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-1 rounded&quot;,onClick:()=&gt;EL(),children:P.jsx(r1,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:i,onClick:()=&gt;s(!r),children:&quot;☰&quot;}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:i,onClick:()=&gt;u(!l),children:P.jsx(aZ,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:i||!o,onClick:()=&gt;t(!e),children:P.jsx(sZ,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:!0,onClick:()=&gt;f(!h),children:P.jsx(lZ,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:i,onClick:yl.getState().toggle,children:P.jsx(oZ,{})}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-700/50 text-white font-bold py-2 px-4 rounded&quot;,hidden:!p,onClick:()=&gt;g(!m),children:P.jsx(cZ,{})})]}),P.jsxs(&quot;div&quot;,{className:&quot;px-2 gap-2 flex flex-col&quot;,children:[h&amp;&amp;P.jsx(rZ,{}),n&amp;&amp;P.jsx(Z$,{}),m&amp;&amp;P.jsx(nZ,{})]})]})})};async function hZ(){let n=gc.current;if(!n){console.error(&quot;Renderer not found&quot;);return}let e=Zs.current;if(!e){console.error(&quot;Scene not found&quot;);return}let t=mc.current;if(!t){console.error(&quot;Camera not found&quot;);return}await fZ(n,e,t,!1)}async function fZ(n,e,t,i=!1){const o=new Js(1920,1080,{type:es}),l=n.getRenderTarget(),u=new Oe;n.getSize(u),t instanceof Yn&amp;&amp;(t.aspect=1920/1080,t.updateProjectionMatrix()),gS.current&amp;&amp;gS.current(),n.setSize(1920,1080),n.setRenderTarget(o),n.render(e,t);const h=new Uint8Array(1920*1080*4);n.readRenderTargetPixels(o,0,0,1920,1080,h);const f=document.createElement(&quot;canvas&quot;);f.width=1920,f.height=1080;const p=f.getContext(&quot;2d&quot;);if(!p)throw new Error(&quot;Failed to get 2D context&quot;);const m=p.createImageData(1920,1080);for(let g=0;g&lt;1080;g++)for(let v=0;v&lt;1920;v++){const x=((1080-g-1)*1920+v)*4,b=(g*1920+v)*4,_=h[x],T=h[x+1],w=h[x+2],E=h[x+3];E&gt;0?(m.data[b]=Math.min(255,Math.round(_*255/E)),m.data[b+1]=Math.min(255,Math.round(T*255/E)),m.data[b+2]=Math.min(255,Math.round(w*255/E))):(m.data[b]=0,m.data[b+1]=0,m.data[b+2]=0),m.data[b+3]=E}p.putImageData(m,0,0),f.toBlob(g=&gt;{if(g){const v=document.createElement(&quot;a&quot;);v.href=URL.createObjectURL(g),v.download=&quot;screenshot.png&quot;,v.click()}}),n.setRenderTarget(l),n.setSize(u.x,u.y),t instanceof Yn&amp;&amp;(t.aspect=u.x/u.y,t.updateProjectionMatrix()),o.dispose()}class td extends Ji{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ns(this.manager);o.setPath(this.path),o.setResponseType(&quot;arraybuffer&quot;),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(l))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){function t(h){const f=new DataView(h),p=32/8*3+32/8*3*3+16/8,m=f.getUint32(80,!0);if(80+32/8+m*p===f.byteLength)return!0;const v=[115,111,108,105,100];for(let x=0;x&lt;5;x++)if(i(v,f,x))return!1;return!0}function i(h,f,p){for(let m=0,g=h.length;m&lt;g;m++)if(h[m]!==f.getUint8(p+m))return!1;return!0}function r(h){const f=new DataView(h),p=f.getUint32(80,!0);let m,g,v,x=!1,b,_,T,w,E;for(let L=0;L&lt;70;L++)f.getUint32(L,!1)==1129270351&amp;&amp;f.getUint8(L+4)==82&amp;&amp;f.getUint8(L+5)==61&amp;&amp;(x=!0,b=new Float32Array(p*3*3),_=f.getUint8(L+6)/255,T=f.getUint8(L+7)/255,w=f.getUint8(L+8)/255,E=f.getUint8(L+9)/255);const R=84,N=12*4+2,A=new Lt,D=new Float32Array(p*3*3),C=new Float32Array(p*3*3),O=new $e;for(let L=0;L&lt;p;L++){const V=R+L*N,Z=f.getFloat32(V,!0),z=f.getFloat32(V+4,!0),K=f.getFloat32(V+8,!0);if(x){const I=f.getUint16(V+48,!0);(I&amp;32768)===0?(m=(I&amp;31)/31,g=(I&gt;&gt;5&amp;31)/31,v=(I&gt;&gt;10&amp;31)/31):(m=_,g=T,v=w)}for(let I=1;I&lt;=3;I++){const j=V+I*12,G=L*3*3+(I-1)*3;D[G]=f.getFloat32(j,!0),D[G+1]=f.getFloat32(j+4,!0),D[G+2]=f.getFloat32(j+8,!0),C[G]=Z,C[G+1]=z,C[G+2]=K,x&amp;&amp;(O.setRGB(m,g,v,Nn),b[G]=O.r,b[G+1]=O.g,b[G+2]=O.b)}}return A.setAttribute(&quot;position&quot;,new Jt(D,3)),A.setAttribute(&quot;normal&quot;,new Jt(C,3)),x&amp;&amp;(A.setAttribute(&quot;color&quot;,new Jt(b,3)),A.hasColors=!0,A.alpha=E),A}function s(h){const f=new Lt,p=/solid([\s\S]*?)endsolid/g,m=/facet([\s\S]*?)endfacet/g,g=/solid\s(.+)/;let v=0;const x=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,b=new RegExp(&quot;vertex&quot;+x+x+x,&quot;g&quot;),_=new RegExp(&quot;normal&quot;+x+x+x,&quot;g&quot;),T=[],w=[],E=[],R=new Y;let N,A=0,D=0,C=0;for(;(N=p.exec(h))!==null;){D=C;const O=N[0],L=(N=g.exec(O))!==null?N[1]:&quot;&quot;;for(E.push(L);(N=m.exec(O))!==null;){let z=0,K=0;const I=N[0];for(;(N=_.exec(I))!==null;)R.x=parseFloat(N[1]),R.y=parseFloat(N[2]),R.z=parseFloat(N[3]),K++;for(;(N=b.exec(I))!==null;)T.push(parseFloat(N[1]),parseFloat(N[2]),parseFloat(N[3])),w.push(R.x,R.y,R.z),z++,C++;K!==1&amp;&amp;console.error(&quot;THREE.STLLoader: Something isn&#x27;t right with the normal of face number &quot;+v),z!==3&amp;&amp;console.error(&quot;THREE.STLLoader: Something isn&#x27;t right with the vertices of face number &quot;+v),v++}const V=D,Z=C-D;f.userData.groupNames=E,f.addGroup(V,Z,A),A++}return f.setAttribute(&quot;position&quot;,new ct(T,3)),f.setAttribute(&quot;normal&quot;,new ct(w,3)),f}function o(h){return typeof h!=&quot;string&quot;?new TextDecoder().decode(h):h}function l(h){if(typeof h==&quot;string&quot;){const f=new Uint8Array(h.length);for(let p=0;p&lt;h.length;p++)f[p]=h.charCodeAt(p)&amp;255;return f.buffer||f}else return h}const u=l(e);return t(u)?r(u):s(o(e))}}class ZO extends xN{constructor(e){super(e)}parse(e){function t(I){switch(I.image_type){case m:case x:if(I.colormap_length&gt;256||I.colormap_size!==24||I.colormap_type!==1)throw new Error(&quot;THREE.TGALoader: Invalid type colormap data for indexed type.&quot;);break;case g:case v:case b:case _:if(I.colormap_type)throw new Error(&quot;THREE.TGALoader: Invalid type colormap data for colormap type.&quot;);break;case p:throw new Error(&quot;THREE.TGALoader: No data.&quot;);default:throw new Error(&quot;THREE.TGALoader: Invalid type &quot;+I.image_type)}if(I.width&lt;=0||I.height&lt;=0)throw new Error(&quot;THREE.TGALoader: Invalid image size.&quot;);if(I.pixel_size!==8&amp;&amp;I.pixel_size!==16&amp;&amp;I.pixel_size!==24&amp;&amp;I.pixel_size!==32)throw new Error(&quot;THREE.TGALoader: Invalid pixel size &quot;+I.pixel_size)}function i(I,j,G,ee,F){let ne,le;const ce=G.pixel_size&gt;&gt;3,ie=G.width*G.height*ce;if(j&amp;&amp;(le=F.subarray(ee,ee+=G.colormap_length*(G.colormap_size&gt;&gt;3))),I){ne=new Uint8Array(ie);let oe,ae,ue,ve=0;const He=new Uint8Array(ce);for(;ve&lt;ie;)if(oe=F[ee++],ae=(oe&amp;127)+1,oe&amp;128){for(ue=0;ue&lt;ce;++ue)He[ue]=F[ee++];for(ue=0;ue&lt;ae;++ue)ne.set(He,ve+ue*ce);ve+=ce*ae}else{for(ae*=ce,ue=0;ue&lt;ae;++ue)ne[ve+ue]=F[ee++];ve+=ae}}else ne=F.subarray(ee,ee+=j?G.width*G.height:ie);return{pixel_data:ne,palettes:le}}function r(I,j,G,ee,F,ne,le,ce,ie){const oe=ie;let ae,ue=0,ve,He;const Xe=O.width;for(He=j;He!==ee;He+=G)for(ve=F;ve!==le;ve+=ne,ue++)ae=ce[ue],I[(ve+Xe*He)*4+3]=255,I[(ve+Xe*He)*4+2]=oe[ae*3+0],I[(ve+Xe*He)*4+1]=oe[ae*3+1],I[(ve+Xe*He)*4+0]=oe[ae*3+2];return I}function s(I,j,G,ee,F,ne,le,ce){let ie,oe=0,ae,ue;const ve=O.width;for(ue=j;ue!==ee;ue+=G)for(ae=F;ae!==le;ae+=ne,oe+=2)ie=ce[oe+0]+(ce[oe+1]&lt;&lt;8),I[(ae+ve*ue)*4+0]=(ie&amp;31744)&gt;&gt;7,I[(ae+ve*ue)*4+1]=(ie&amp;992)&gt;&gt;2,I[(ae+ve*ue)*4+2]=(ie&amp;31)&lt;&lt;3,I[(ae+ve*ue)*4+3]=ie&amp;32768?0:255;return I}function o(I,j,G,ee,F,ne,le,ce){let ie=0,oe,ae;const ue=O.width;for(ae=j;ae!==ee;ae+=G)for(oe=F;oe!==le;oe+=ne,ie+=3)I[(oe+ue*ae)*4+3]=255,I[(oe+ue*ae)*4+2]=ce[ie+0],I[(oe+ue*ae)*4+1]=ce[ie+1],I[(oe+ue*ae)*4+0]=ce[ie+2];return I}function l(I,j,G,ee,F,ne,le,ce){let ie=0,oe,ae;const ue=O.width;for(ae=j;ae!==ee;ae+=G)for(oe=F;oe!==le;oe+=ne,ie+=4)I[(oe+ue*ae)*4+2]=ce[ie+0],I[(oe+ue*ae)*4+1]=ce[ie+1],I[(oe+ue*ae)*4+0]=ce[ie+2],I[(oe+ue*ae)*4+3]=ce[ie+3];return I}function u(I,j,G,ee,F,ne,le,ce){let ie,oe=0,ae,ue;const ve=O.width;for(ue=j;ue!==ee;ue+=G)for(ae=F;ae!==le;ae+=ne,oe++)ie=ce[oe],I[(ae+ve*ue)*4+0]=ie,I[(ae+ve*ue)*4+1]=ie,I[(ae+ve*ue)*4+2]=ie,I[(ae+ve*ue)*4+3]=255;return I}function h(I,j,G,ee,F,ne,le,ce){let ie=0,oe,ae;const ue=O.width;for(ae=j;ae!==ee;ae+=G)for(oe=F;oe!==le;oe+=ne,ie+=2)I[(oe+ue*ae)*4+0]=ce[ie+0],I[(oe+ue*ae)*4+1]=ce[ie+0],I[(oe+ue*ae)*4+2]=ce[ie+0],I[(oe+ue*ae)*4+3]=ce[ie+1];return I}function f(I,j,G,ee,F){let ne,le,ce,ie,oe,ae;switch((O.flags&amp;T)&gt;&gt;w){default:case N:ne=0,ce=1,oe=j,le=0,ie=1,ae=G;break;case E:ne=0,ce=1,oe=j,le=G-1,ie=-1,ae=-1;break;case A:ne=j-1,ce=-1,oe=-1,le=0,ie=1,ae=G;break;case R:ne=j-1,ce=-1,oe=-1,le=G-1,ie=-1,ae=-1;break}if(Z)switch(O.pixel_size){case 8:u(I,le,ie,ae,ne,ce,oe,ee);break;case 16:h(I,le,ie,ae,ne,ce,oe,ee);break;default:throw new Error(&quot;THREE.TGALoader: Format not supported.&quot;)}else switch(O.pixel_size){case 8:r(I,le,ie,ae,ne,ce,oe,ee,F);break;case 16:s(I,le,ie,ae,ne,ce,oe,ee);break;case 24:o(I,le,ie,ae,ne,ce,oe,ee);break;case 32:l(I,le,ie,ae,ne,ce,oe,ee);break;default:throw new Error(&quot;THREE.TGALoader: Format not supported.&quot;)}return I}const p=0,m=1,g=2,v=3,x=9,b=10,_=11,T=48,w=4,E=0,R=1,N=2,A=3;if(e.length&lt;19)throw new Error(&quot;THREE.TGALoader: Not enough data to contain header.&quot;);let D=0;const C=new Uint8Array(e),O={id_length:C[D++],colormap_type:C[D++],image_type:C[D++],colormap_index:C[D++]|C[D++]&lt;&lt;8,colormap_length:C[D++]|C[D++]&lt;&lt;8,colormap_size:C[D++],origin:[C[D++]|C[D++]&lt;&lt;8,C[D++]|C[D++]&lt;&lt;8],width:C[D++]|C[D++]&lt;&lt;8,height:C[D++]|C[D++]&lt;&lt;8,pixel_size:C[D++],flags:C[D++]};if(t(O),O.id_length+D&gt;e.length)throw new Error(&quot;THREE.TGALoader: No data.&quot;);D+=O.id_length;let L=!1,V=!1,Z=!1;switch(O.image_type){case x:L=!0,V=!0;break;case m:V=!0;break;case b:L=!0;break;case g:break;case _:L=!0,Z=!0;break;case v:Z=!0;break}const z=new Uint8Array(O.width*O.height*4),K=i(L,V,O,D,C);return f(z,O.width,O.height,K.pixel_data,K.palettes),{data:z,width:O.width,height:O.height,flipY:!0,generateMipmaps:!0,minFilter:Zr}}}class dZ extends Ji{load(e,t,i,r){const s=this,o=s.path===&quot;&quot;?vo.extractUrlBase(e):s.path,l=new ns(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(u){try{t(s.parse(u,o))}catch(h){r?r(h):console.error(h),s.manager.itemError(e)}},i,r)}parse(e,t){function i(B,k){const $=[],X=B.childNodes;for(let J=0,Te=X.length;J&lt;Te;J++){const Re=X[J];Re.nodeName===k&amp;&amp;$.push(Re)}return $}function r(B){if(B.length===0)return[];const k=B.trim().split(/\s+/),$=new Array(k.length);for(let X=0,J=k.length;X&lt;J;X++)$[X]=k[X];return $}function s(B){if(B.length===0)return[];const k=B.trim().split(/\s+/),$=new Array(k.length);for(let X=0,J=k.length;X&lt;J;X++)$[X]=parseFloat(k[X]);return $}function o(B){if(B.length===0)return[];const k=B.trim().split(/\s+/),$=new Array(k.length);for(let X=0,J=k.length;X&lt;J;X++)$[X]=parseInt(k[X]);return $}function l(B){return B.substring(1)}function u(){return&quot;three_default_&quot;+Ds++}function h(B){return Object.keys(B).length===0}function f(B){return{unit:p(i(B,&quot;unit&quot;)[0]),upAxis:m(i(B,&quot;up_axis&quot;)[0])}}function p(B){return B!==void 0&amp;&amp;B.hasAttribute(&quot;meter&quot;)===!0?parseFloat(B.getAttribute(&quot;meter&quot;)):1}function m(B){return B!==void 0?B.textContent:&quot;Y_UP&quot;}function g(B,k,$,X){const J=i(B,k)[0];if(J!==void 0){const Te=i(J,$);for(let Re=0;Re&lt;Te.length;Re++)X(Te[Re])}}function v(B,k){for(const $ in B){const X=B[$];X.build=k(B[$])}}function x(B,k){return B.build!==void 0||(B.build=k(B)),B.build}function b(B){const k={sources:{},samplers:{},channels:{}};let $=!1;for(let X=0,J=B.childNodes.length;X&lt;J;X++){const Te=B.childNodes[X];if(Te.nodeType!==1)continue;let Re;switch(Te.nodeName){case&quot;source&quot;:Re=Te.getAttribute(&quot;id&quot;),k.sources[Re]=Ae(Te);break;case&quot;sampler&quot;:Re=Te.getAttribute(&quot;id&quot;),k.samplers[Re]=_(Te);break;case&quot;channel&quot;:Re=Te.getAttribute(&quot;target&quot;),k.channels[Re]=T(Te);break;case&quot;animation&quot;:b(Te),$=!0;break;default:console.log(Te)}}$===!1&amp;&amp;(Dt.animations[B.getAttribute(&quot;id&quot;)||rl.generateUUID()]=k)}function _(B){const k={inputs:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=l(J.getAttribute(&quot;source&quot;)),Re=J.getAttribute(&quot;semantic&quot;);k.inputs[Re]=Te;break}}return k}function T(B){const k={};let X=B.getAttribute(&quot;target&quot;).split(&quot;/&quot;);const J=X.shift();let Te=X.shift();const Re=Te.indexOf(&quot;(&quot;)!==-1,ot=Te.indexOf(&quot;.&quot;)!==-1;if(ot)X=Te.split(&quot;.&quot;),Te=X.shift(),k.member=X.shift();else if(Re){const Ke=Te.split(&quot;(&quot;);Te=Ke.shift();for(let nt=0;nt&lt;Ke.length;nt++)Ke[nt]=parseInt(Ke[nt].replace(/\)/,&quot;&quot;));k.indices=Ke}return k.id=J,k.sid=Te,k.arraySyntax=Re,k.memberSyntax=ot,k.sampler=l(B.getAttribute(&quot;source&quot;)),k}function w(B){const k=[],$=B.channels,X=B.samplers,J=B.sources;for(const Te in $)if($.hasOwnProperty(Te)){const Re=$[Te],ot=X[Re.sampler],Ke=ot.inputs.INPUT,nt=ot.inputs.OUTPUT,xt=J[Ke],Be=J[nt],pt=R(Re,xt,Be);O(pt,k)}return k}function E(B){return x(Dt.animations[B],w)}function R(B,k,$){const X=Dt.nodes[B.id],J=Bt(X.id),Te=X.transforms[B.sid],Re=X.matrix.clone().transpose();let ot,Ke,nt,xt,Be,pt;const gt={};switch(Te){case&quot;matrix&quot;:for(nt=0,xt=k.array.length;nt&lt;xt;nt++)if(ot=k.array[nt],Ke=nt*$.stride,gt[ot]===void 0&amp;&amp;(gt[ot]={}),B.arraySyntax===!0){const Fn=$.array[Ke],dn=B.indices[0]+4*B.indices[1];gt[ot][dn]=Fn}else for(Be=0,pt=$.stride;Be&lt;pt;Be++)gt[ot][Be]=$.array[Ke+Be];break;case&quot;translate&quot;:console.warn(&#x27;THREE.ColladaLoader: Animation transform type &quot;%s&quot; not yet implemented.&#x27;,Te);break;case&quot;rotate&quot;:console.warn(&#x27;THREE.ColladaLoader: Animation transform type &quot;%s&quot; not yet implemented.&#x27;,Te);break;case&quot;scale&quot;:console.warn(&#x27;THREE.ColladaLoader: Animation transform type &quot;%s&quot; not yet implemented.&#x27;,Te);break}const Tt=N(gt,Re);return{name:J.uuid,keyframes:Tt}}function N(B,k){const $=[];for(const J in B)$.push({time:parseFloat(J),value:B[J]});$.sort(X);for(let J=0;J&lt;16;J++)L($,J,k.elements[J]);return $;function X(J,Te){return J.time-Te.time}}const A=new Y,D=new Y,C=new Si;function O(B,k){const $=B.keyframes,X=B.name,J=[],Te=[],Re=[],ot=[];for(let Ke=0,nt=$.length;Ke&lt;nt;Ke++){const xt=$[Ke],Be=xt.time,pt=xt.value;fe.fromArray(pt).transpose(),fe.decompose(A,C,D),J.push(Be),Te.push(A.x,A.y,A.z),Re.push(C.x,C.y,C.z,C.w),ot.push(D.x,D.y,D.z)}return Te.length&gt;0&amp;&amp;k.push(new pa(X+&quot;.position&quot;,J,Te)),Re.length&gt;0&amp;&amp;k.push(new pl(X+&quot;.quaternion&quot;,J,Re)),ot.length&gt;0&amp;&amp;k.push(new pa(X+&quot;.scale&quot;,J,ot)),k}function L(B,k,$){let X,J=!0,Te,Re;for(Te=0,Re=B.length;Te&lt;Re;Te++)X=B[Te],X.value[k]===void 0?X.value[k]=null:J=!1;if(J===!0)for(Te=0,Re=B.length;Te&lt;Re;Te++)X=B[Te],X.value[k]=$;else V(B,k)}function V(B,k){let $,X;for(let J=0,Te=B.length;J&lt;Te;J++){const Re=B[J];if(Re.value[k]===null){if($=Z(B,J,k),X=z(B,J,k),$===null){Re.value[k]=X.value[k];continue}if(X===null){Re.value[k]=$.value[k];continue}K(Re,$,X,k)}}}function Z(B,k,$){for(;k&gt;=0;){const X=B[k];if(X.value[$]!==null)return X;k--}return null}function z(B,k,$){for(;k&lt;B.length;){const X=B[k];if(X.value[$]!==null)return X;k++}return null}function K(B,k,$,X){if($.time-k.time===0){B.value[X]=k.value[X];return}B.value[X]=(B.time-k.time)*($.value[X]-k.value[X])/($.time-k.time)+k.value[X]}function I(B){const k={name:B.getAttribute(&quot;id&quot;)||&quot;default&quot;,start:parseFloat(B.getAttribute(&quot;start&quot;)||0),end:parseFloat(B.getAttribute(&quot;end&quot;)||0),animations:[]};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;instance_animation&quot;:k.animations.push(l(J.getAttribute(&quot;url&quot;)));break}}Dt.clips[B.getAttribute(&quot;id&quot;)]=k}function j(B){const k=[],$=B.name,X=B.end-B.start||-1,J=B.animations;for(let Te=0,Re=J.length;Te&lt;Re;Te++){const ot=E(J[Te]);for(let Ke=0,nt=ot.length;Ke&lt;nt;Ke++)k.push(ot[Ke])}return new ml($,X,k)}function G(B){return x(Dt.clips[B],j)}function ee(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;skin&quot;:k.id=l(J.getAttribute(&quot;source&quot;)),k.skin=F(J);break;case&quot;morph&quot;:k.id=l(J.getAttribute(&quot;source&quot;)),console.warn(&quot;THREE.ColladaLoader: Morph target animation not supported yet.&quot;);break}}Dt.controllers[B.getAttribute(&quot;id&quot;)]=k}function F(B){const k={sources:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;bind_shape_matrix&quot;:k.bindShapeMatrix=s(J.textContent);break;case&quot;source&quot;:const Te=J.getAttribute(&quot;id&quot;);k.sources[Te]=Ae(J);break;case&quot;joints&quot;:k.joints=ne(J);break;case&quot;vertex_weights&quot;:k.vertexWeights=le(J);break}}return k}function ne(B){const k={inputs:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=J.getAttribute(&quot;semantic&quot;),Re=l(J.getAttribute(&quot;source&quot;));k.inputs[Te]=Re;break}}return k}function le(B){const k={inputs:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=J.getAttribute(&quot;semantic&quot;),Re=l(J.getAttribute(&quot;source&quot;)),ot=parseInt(J.getAttribute(&quot;offset&quot;));k.inputs[Te]={id:Re,offset:ot};break;case&quot;vcount&quot;:k.vcount=o(J.textContent);break;case&quot;v&quot;:k.v=o(J.textContent);break}}return k}function ce(B){const k={id:B.id},$=Dt.geometries[k.id];return B.skin!==void 0&amp;&amp;(k.skin=ie(B.skin),$.sources.skinIndices=k.skin.indices,$.sources.skinWeights=k.skin.weights),k}function ie(B){const $={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},X=B.sources,J=B.vertexWeights,Te=J.vcount,Re=J.v,ot=J.inputs.JOINT.offset,Ke=J.inputs.WEIGHT.offset,nt=B.sources[B.joints.inputs.JOINT],xt=B.sources[B.joints.inputs.INV_BIND_MATRIX],Be=X[J.inputs.WEIGHT.id].array;let pt=0,gt,Tt,_t;for(gt=0,_t=Te.length;gt&lt;_t;gt++){const dn=Te[gt],hn=[];for(Tt=0;Tt&lt;dn;Tt++){const sn=Re[pt+ot],Mr=Re[pt+Ke],Qi=Be[Mr];hn.push({index:sn,weight:Qi}),pt+=2}for(hn.sort(Fn),Tt=0;Tt&lt;4;Tt++){const sn=hn[Tt];sn!==void 0?($.indices.array.push(sn.index),$.weights.array.push(sn.weight)):($.indices.array.push(0),$.weights.array.push(0))}}for(B.bindShapeMatrix?$.bindMatrix=new yt().fromArray(B.bindShapeMatrix).transpose():$.bindMatrix=new yt().identity(),gt=0,_t=nt.array.length;gt&lt;_t;gt++){const dn=nt.array[gt],hn=new yt().fromArray(xt.array,gt*xt.stride).transpose();$.joints.push({name:dn,boneInverse:hn})}return $;function Fn(dn,hn){return hn.weight-dn.weight}}function oe(B){return x(Dt.controllers[B],ce)}function ae(B){const k={init_from:i(B,&quot;init_from&quot;)[0].textContent};Dt.images[B.getAttribute(&quot;id&quot;)]=k}function ue(B){return B.build!==void 0?B.build:B.init_from}function ve(B){const k=Dt.images[B];return k!==void 0?x(k,ue):(console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t find image with ID:&quot;,B),null)}function He(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;profile_COMMON&quot;:k.profile=Xe(J);break}}Dt.effects[B.getAttribute(&quot;id&quot;)]=k}function Xe(B){const k={surfaces:{},samplers:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;newparam&quot;:lt(J,k);break;case&quot;technique&quot;:k.technique=Q(J);break;case&quot;extra&quot;:k.extra=ze(J);break}}return k}function lt(B,k){const $=B.getAttribute(&quot;sid&quot;);for(let X=0,J=B.childNodes.length;X&lt;J;X++){const Te=B.childNodes[X];if(Te.nodeType===1)switch(Te.nodeName){case&quot;surface&quot;:k.surfaces[$]=We(Te);break;case&quot;sampler2D&quot;:k.samplers[$]=Ye(Te);break}}}function We(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;init_from&quot;:k.init_from=J.textContent;break}}return k}function Ye(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;source&quot;:k.source=J.textContent;break}}return k}function Q(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;constant&quot;:case&quot;lambert&quot;:case&quot;blinn&quot;:case&quot;phong&quot;:k.type=J.nodeName,k.parameters=Ve(J);break;case&quot;extra&quot;:k.extra=ze(J);break}}return k}function Ve(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;emission&quot;:case&quot;diffuse&quot;:case&quot;specular&quot;:case&quot;bump&quot;:case&quot;ambient&quot;:case&quot;shininess&quot;:case&quot;transparency&quot;:k[J.nodeName]=Le(J);break;case&quot;transparent&quot;:k[J.nodeName]={opaque:J.hasAttribute(&quot;opaque&quot;)?J.getAttribute(&quot;opaque&quot;):&quot;A_ONE&quot;,data:Le(J)};break}}return k}function Le(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;color&quot;:k[J.nodeName]=s(J.textContent);break;case&quot;float&quot;:k[J.nodeName]=parseFloat(J.textContent);break;case&quot;texture&quot;:k[J.nodeName]={id:J.getAttribute(&quot;texture&quot;),extra:Fe(J)};break}}return k}function Fe(B){const k={technique:{}};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;extra&quot;:Ne(J,k);break}}return k}function Ne(B,k){for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;technique&quot;:mt(J,k);break}}}function mt(B,k){for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;repeatU&quot;:case&quot;repeatV&quot;:case&quot;offsetU&quot;:case&quot;offsetV&quot;:k.technique[J.nodeName]=parseFloat(J.textContent);break;case&quot;wrapU&quot;:case&quot;wrapV&quot;:J.textContent.toUpperCase()===&quot;TRUE&quot;?k.technique[J.nodeName]=1:J.textContent.toUpperCase()===&quot;FALSE&quot;?k.technique[J.nodeName]=0:k.technique[J.nodeName]=parseInt(J.textContent);break;case&quot;bump&quot;:k[J.nodeName]=H(J);break}}}function ze(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;technique&quot;:k.technique=te(J);break}}return k}function te(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;double_sided&quot;:k[J.nodeName]=parseInt(J.textContent);break;case&quot;bump&quot;:k[J.nodeName]=H(J);break}}return k}function H(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;texture&quot;:k[J.nodeName]={id:J.getAttribute(&quot;texture&quot;),texcoord:J.getAttribute(&quot;texcoord&quot;),extra:Fe(J)};break}}return k}function pe(B){return B}function Ce(B){return x(Dt.effects[B],pe)}function Ue(B){const k={name:B.getAttribute(&quot;name&quot;)};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;instance_effect&quot;:k.url=l(J.getAttribute(&quot;url&quot;));break}}Dt.materials[B.getAttribute(&quot;id&quot;)]=k}function Me(B){let k,$=B.slice((B.lastIndexOf(&quot;.&quot;)-1&gt;&gt;&gt;0)+2);switch($=$.toLowerCase(),$){case&quot;tga&quot;:k=Qn;break;default:k=Ni}return k}function Ze(B){const k=Ce(B.url),$=k.profile.technique;let X;switch($.type){case&quot;phong&quot;:case&quot;blinn&quot;:X=new cl;break;case&quot;lambert&quot;:X=new Py;break;default:X=new $i;break}X.name=B.name||&quot;&quot;;function J(Ke,nt=null){const xt=k.profile.samplers[Ke.id];let Be=null;if(xt!==void 0){const pt=k.profile.surfaces[xt.source];Be=ve(pt.init_from)}else console.warn(&quot;THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).&quot;),Be=ve(Ke.id);if(Be!==null){const pt=Me(Be);if(pt!==void 0){const gt=pt.load(Be),Tt=Ke.extra;if(Tt!==void 0&amp;&amp;Tt.technique!==void 0&amp;&amp;h(Tt.technique)===!1){const _t=Tt.technique;gt.wrapS=_t.wrapU?ws:rr,gt.wrapT=_t.wrapV?ws:rr,gt.offset.set(_t.offsetU||0,_t.offsetV||0),gt.repeat.set(_t.repeatU||1,_t.repeatV||1)}else gt.wrapS=ws,gt.wrapT=ws;return nt!==null&amp;&amp;(gt.colorSpace=nt),gt}else return console.warn(&quot;THREE.ColladaLoader: Loader for texture %s not found.&quot;,Be),null}else return console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t create texture with ID:&quot;,Ke.id),null}const Te=$.parameters;for(const Ke in Te){const nt=Te[Ke];switch(Ke){case&quot;diffuse&quot;:nt.color&amp;&amp;X.color.fromArray(nt.color),nt.texture&amp;&amp;(X.map=J(nt.texture,Nn));break;case&quot;specular&quot;:nt.color&amp;&amp;X.specular&amp;&amp;X.specular.fromArray(nt.color),nt.texture&amp;&amp;(X.specularMap=J(nt.texture));break;case&quot;bump&quot;:nt.texture&amp;&amp;(X.normalMap=J(nt.texture));break;case&quot;ambient&quot;:nt.texture&amp;&amp;(X.lightMap=J(nt.texture,Nn));break;case&quot;shininess&quot;:nt.float&amp;&amp;X.shininess&amp;&amp;(X.shininess=nt.float);break;case&quot;emission&quot;:nt.color&amp;&amp;X.emissive&amp;&amp;X.emissive.fromArray(nt.color),nt.texture&amp;&amp;(X.emissiveMap=J(nt.texture,Nn));break}}Zt.toWorkingColorSpace(X.color,Nn),X.specular&amp;&amp;Zt.toWorkingColorSpace(X.specular,Nn),X.emissive&amp;&amp;Zt.toWorkingColorSpace(X.emissive,Nn);let Re=Te.transparent,ot=Te.transparency;if(ot===void 0&amp;&amp;Re&amp;&amp;(ot={float:1}),Re===void 0&amp;&amp;ot&amp;&amp;(Re={opaque:&quot;A_ONE&quot;,data:{color:[1,1,1,1]}}),Re&amp;&amp;ot)if(Re.data.texture)X.transparent=!0;else{const Ke=Re.data.color;switch(Re.opaque){case&quot;A_ONE&quot;:X.opacity=Ke[3]*ot.float;break;case&quot;RGB_ZERO&quot;:X.opacity=1-Ke[0]*ot.float;break;case&quot;A_ZERO&quot;:X.opacity=1-Ke[3]*ot.float;break;case&quot;RGB_ONE&quot;:X.opacity=Ke[0]*ot.float;break;default:console.warn(&#x27;THREE.ColladaLoader: Invalid opaque type &quot;%s&quot; of transparent tag.&#x27;,Re.opaque)}X.opacity&lt;1&amp;&amp;(X.transparent=!0)}if($.extra!==void 0&amp;&amp;$.extra.technique!==void 0){const Ke=$.extra.technique;for(const nt in Ke){const xt=Ke[nt];switch(nt){case&quot;double_sided&quot;:X.side=xt===1?Ki:Qr;break;case&quot;bump&quot;:X.normalMap=J(xt.texture),X.normalScale=new Oe(1,1);break}}}return X}function qe(B){return x(Dt.materials[B],Ze)}function ut(B){const k={name:B.getAttribute(&quot;name&quot;)};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;optics&quot;:k.optics=Ct(J);break}}Dt.cameras[B.getAttribute(&quot;id&quot;)]=k}function Ct(B){for(let k=0;k&lt;B.childNodes.length;k++){const $=B.childNodes[k];switch($.nodeName){case&quot;technique_common&quot;:return je($)}}return{}}function je(B){const k={};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];switch(X.nodeName){case&quot;perspective&quot;:case&quot;orthographic&quot;:k.technique=X.nodeName,k.parameters=ht(X);break}}return k}function ht(B){const k={};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];switch(X.nodeName){case&quot;xfov&quot;:case&quot;yfov&quot;:case&quot;xmag&quot;:case&quot;ymag&quot;:case&quot;znear&quot;:case&quot;zfar&quot;:case&quot;aspect_ratio&quot;:k[X.nodeName]=parseFloat(X.textContent);break}}return k}function St(B){let k;switch(B.optics.technique){case&quot;perspective&quot;:k=new Yn(B.optics.parameters.yfov,B.optics.parameters.aspect_ratio,B.optics.parameters.znear,B.optics.parameters.zfar);break;case&quot;orthographic&quot;:let $=B.optics.parameters.ymag,X=B.optics.parameters.xmag;const J=B.optics.parameters.aspect_ratio;X=X===void 0?$*J:X,$=$===void 0?X/J:$,X*=.5,$*=.5,k=new Fc(-X,X,$,-$,B.optics.parameters.znear,B.optics.parameters.zfar);break;default:k=new Yn;break}return k.name=B.name||&quot;&quot;,k}function Rt(B){const k=Dt.cameras[B];return k!==void 0?x(k,St):(console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t find camera with ID:&quot;,B),null)}function rt(B){let k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;technique_common&quot;:k=Gt(J);break}}Dt.lights[B.getAttribute(&quot;id&quot;)]=k}function Gt(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;directional&quot;:case&quot;point&quot;:case&quot;spot&quot;:case&quot;ambient&quot;:k.technique=J.nodeName,k.parameters=It(J)}}return k}function It(B){const k={};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;color&quot;:const Te=s(J.textContent);k.color=new $e().fromArray(Te),Zt.toWorkingColorSpace(k.color,Nn);break;case&quot;falloff_angle&quot;:k.falloffAngle=parseFloat(J.textContent);break;case&quot;quadratic_attenuation&quot;:const Re=parseFloat(J.textContent);k.distance=Re?Math.sqrt(1/Re):0;break}}return k}function gn(B){let k;switch(B.technique){case&quot;directional&quot;:k=new Zd;break;case&quot;point&quot;:k=new ky;break;case&quot;spot&quot;:k=new Uy;break;case&quot;ambient&quot;:k=new Fy;break}return B.parameters.color&amp;&amp;k.color.copy(B.parameters.color),B.parameters.distance&amp;&amp;(k.distance=B.parameters.distance),k}function de(B){const k=Dt.lights[B];return k!==void 0?x(k,gn):(console.warn(&quot;THREE.ColladaLoader: Couldn&#x27;t find light with ID:&quot;,B),null)}function tt(B){const k={name:B.getAttribute(&quot;name&quot;),sources:{},vertices:{},primitives:[]},$=i(B,&quot;mesh&quot;)[0];if($!==void 0){for(let X=0;X&lt;$.childNodes.length;X++){const J=$.childNodes[X];if(J.nodeType!==1)continue;const Te=J.getAttribute(&quot;id&quot;);switch(J.nodeName){case&quot;source&quot;:k.sources[Te]=Ae(J);break;case&quot;vertices&quot;:k.vertices=Pe(J);break;case&quot;polygons&quot;:console.warn(&quot;THREE.ColladaLoader: Unsupported primitive type: &quot;,J.nodeName);break;case&quot;lines&quot;:case&quot;linestrips&quot;:case&quot;polylist&quot;:case&quot;triangles&quot;:k.primitives.push(st(J));break;default:console.log(J)}}Dt.geometries[B.getAttribute(&quot;id&quot;)]=k}}function Ae(B){const k={array:[],stride:3};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;float_array&quot;:k.array=s(X.textContent);break;case&quot;Name_array&quot;:k.array=r(X.textContent);break;case&quot;technique_common&quot;:const J=i(X,&quot;accessor&quot;)[0];J!==void 0&amp;&amp;(k.stride=parseInt(J.getAttribute(&quot;stride&quot;)));break}}return k}function Pe(B){const k={};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];X.nodeType===1&amp;&amp;(k[X.getAttribute(&quot;semantic&quot;)]=l(X.getAttribute(&quot;source&quot;)))}return k}function st(B){const k={type:B.nodeName,material:B.getAttribute(&quot;material&quot;),count:parseInt(B.getAttribute(&quot;count&quot;)),inputs:{},stride:0,hasUV:!1};for(let $=0,X=B.childNodes.length;$&lt;X;$++){const J=B.childNodes[$];if(J.nodeType===1)switch(J.nodeName){case&quot;input&quot;:const Te=l(J.getAttribute(&quot;source&quot;)),Re=J.getAttribute(&quot;semantic&quot;),ot=parseInt(J.getAttribute(&quot;offset&quot;)),Ke=parseInt(J.getAttribute(&quot;set&quot;)),nt=Ke&gt;0?Re+Ke:Re;k.inputs[nt]={id:Te,offset:ot},k.stride=Math.max(k.stride,ot+1),Re===&quot;TEXCOORD&quot;&amp;&amp;(k.hasUV=!0);break;case&quot;vcount&quot;:k.vcount=o(J.textContent);break;case&quot;p&quot;:k.p=o(J.textContent);break}}return k}function Qe(B){const k={};for(let $=0;$&lt;B.length;$++){const X=B[$];k[X.type]===void 0&amp;&amp;(k[X.type]=[]),k[X.type].push(X)}return k}function Ut(B){let k=0;for(let $=0,X=B.length;$&lt;X;$++)B[$].hasUV===!0&amp;&amp;k++;k&gt;0&amp;&amp;k&lt;B.length&amp;&amp;(B.uvsNeedsFix=!0)}function wn(B){const k={},$=B.sources,X=B.vertices,J=B.primitives;if(J.length===0)return{};const Te=Qe(J);for(const Re in Te){const ot=Te[Re];Ut(ot),k[Re]=jn(ot,$,X)}return k}function jn(B,k,$){const X={},J={array:[],stride:0},Te={array:[],stride:0},Re={array:[],stride:0},ot={array:[],stride:0},Ke={array:[],stride:0},nt={array:[],stride:4},xt={array:[],stride:4},Be=new Lt,pt=[];let gt=0;for(let Tt=0;Tt&lt;B.length;Tt++){const _t=B[Tt],Fn=_t.inputs;let dn=0;switch(_t.type){case&quot;lines&quot;:case&quot;linestrips&quot;:dn=_t.count*2;break;case&quot;triangles&quot;:dn=_t.count*3;break;case&quot;polylist&quot;:for(let hn=0;hn&lt;_t.count;hn++){const sn=_t.vcount[hn];switch(sn){case 3:dn+=3;break;case 4:dn+=6;break;default:dn+=(sn-2)*3;break}}break;default:console.warn(&quot;THREE.ColladaLoader: Unknown primitive type:&quot;,_t.type)}Be.addGroup(gt,dn,Tt),gt+=dn,_t.material&amp;&amp;pt.push(_t.material);for(const hn in Fn){const sn=Fn[hn];switch(hn){case&quot;VERTEX&quot;:for(const Mr in $){const Qi=$[Mr];switch(Mr){case&quot;POSITION&quot;:const mi=J.array.length;if(zt(_t,k[Qi],sn.offset,J.array),J.stride=k[Qi].stride,k.skinWeights&amp;&amp;k.skinIndices&amp;&amp;(zt(_t,k.skinIndices,sn.offset,nt.array),zt(_t,k.skinWeights,sn.offset,xt.array)),_t.hasUV===!1&amp;&amp;B.uvsNeedsFix===!0){const Ro=(J.array.length-mi)/J.stride;for(let Tl=0;Tl&lt;Ro;Tl++)Re.array.push(0,0)}break;case&quot;NORMAL&quot;:zt(_t,k[Qi],sn.offset,Te.array),Te.stride=k[Qi].stride;break;case&quot;COLOR&quot;:zt(_t,k[Qi],sn.offset,Ke.array),Ke.stride=k[Qi].stride;break;case&quot;TEXCOORD&quot;:zt(_t,k[Qi],sn.offset,Re.array),Re.stride=k[Qi].stride;break;case&quot;TEXCOORD1&quot;:zt(_t,k[Qi],sn.offset,ot.array),Re.stride=k[Qi].stride;break;default:console.warn(&#x27;THREE.ColladaLoader: Semantic &quot;%s&quot; not handled in geometry build process.&#x27;,Mr)}}break;case&quot;NORMAL&quot;:zt(_t,k[sn.id],sn.offset,Te.array),Te.stride=k[sn.id].stride;break;case&quot;COLOR&quot;:zt(_t,k[sn.id],sn.offset,Ke.array,!0),Ke.stride=k[sn.id].stride;break;case&quot;TEXCOORD&quot;:zt(_t,k[sn.id],sn.offset,Re.array),Re.stride=k[sn.id].stride;break;case&quot;TEXCOORD1&quot;:zt(_t,k[sn.id],sn.offset,ot.array),ot.stride=k[sn.id].stride;break}}}return J.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;position&quot;,new ct(J.array,J.stride)),Te.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;normal&quot;,new ct(Te.array,Te.stride)),Ke.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;color&quot;,new ct(Ke.array,Ke.stride)),Re.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;uv&quot;,new ct(Re.array,Re.stride)),ot.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;uv1&quot;,new ct(ot.array,ot.stride)),nt.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;skinIndex&quot;,new ct(nt.array,nt.stride)),xt.array.length&gt;0&amp;&amp;Be.setAttribute(&quot;skinWeight&quot;,new ct(xt.array,xt.stride)),X.data=Be,X.type=B[0].type,X.materialKeys=pt,X}function zt(B,k,$,X,J=!1){const Te=B.p,Re=B.stride,ot=B.vcount;function Ke(Be){let pt=Te[Be+$]*xt;const gt=pt+xt;for(;pt&lt;gt;pt++)X.push(nt[pt]);if(J){const Tt=X.length-xt-1;ei.setRGB(X[Tt+0],X[Tt+1],X[Tt+2],Nn),X[Tt+0]=ei.r,X[Tt+1]=ei.g,X[Tt+2]=ei.b}}const nt=k.array,xt=k.stride;if(B.vcount!==void 0){let Be=0;for(let pt=0,gt=ot.length;pt&lt;gt;pt++){const Tt=ot[pt];if(Tt===4){const _t=Be+Re*0,Fn=Be+Re*1,dn=Be+Re*2,hn=Be+Re*3;Ke(_t),Ke(Fn),Ke(hn),Ke(Fn),Ke(dn),Ke(hn)}else if(Tt===3){const _t=Be+Re*0,Fn=Be+Re*1,dn=Be+Re*2;Ke(_t),Ke(Fn),Ke(dn)}else if(Tt&gt;4)for(let _t=1,Fn=Tt-2;_t&lt;=Fn;_t++){const dn=Be+Re*0,hn=Be+Re*_t,sn=Be+Re*(_t+1);Ke(dn),Ke(hn),Ke(sn)}Be+=Re*Tt}}else for(let Be=0,pt=Te.length;Be&lt;pt;Be+=Re)Ke(Be)}function Bi(B){return x(Dt.geometries[B],wn)}function oi(B){const k={name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,joints:{},links:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;technique_common&quot;:Hi(X,k);break}}Dt.kinematicsModels[B.getAttribute(&quot;id&quot;)]=k}function Zn(B){return B.build!==void 0?B.build:B}function pi(B){return x(Dt.kinematicsModels[B],Zn)}function Hi(B,k){for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;joint&quot;:k.joints[X.getAttribute(&quot;sid&quot;)]=Cs(X);break;case&quot;link&quot;:k.links.push(Co(X));break}}}function Cs(B){let k;for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;prismatic&quot;:case&quot;revolute&quot;:k=ya(X);break}}return k}function ya(B){const k={sid:B.getAttribute(&quot;sid&quot;),name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,axis:new Y,limits:{min:0,max:0},type:B.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;axis&quot;:const J=s(X.textContent);k.axis.fromArray(J);break;case&quot;limits&quot;:const Te=X.getElementsByTagName(&quot;max&quot;)[0],Re=X.getElementsByTagName(&quot;min&quot;)[0];k.limits.max=parseFloat(Te.textContent),k.limits.min=parseFloat(Re.textContent);break}}return k.limits.min&gt;=k.limits.max&amp;&amp;(k.static=!0),k.middlePosition=(k.limits.min+k.limits.max)/2,k}function Co(B){const k={sid:B.getAttribute(&quot;sid&quot;),name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,attachments:[],transforms:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;attachment_full&quot;:k.attachments.push(Rs(X));break;case&quot;matrix&quot;:case&quot;translate&quot;:case&quot;rotate&quot;:k.transforms.push(kr(X));break}}return k}function Rs(B){const k={joint:B.getAttribute(&quot;joint&quot;).split(&quot;/&quot;).pop(),transforms:[],links:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;link&quot;:k.links.push(Co(X));break;case&quot;matrix&quot;:case&quot;translate&quot;:case&quot;rotate&quot;:k.transforms.push(kr(X));break}}return k}function kr(B){const k={type:B.nodeName},$=s(B.textContent);switch(k.type){case&quot;matrix&quot;:k.obj=new yt,k.obj.fromArray($).transpose();break;case&quot;translate&quot;:k.obj=new Y,k.obj.fromArray($);break;case&quot;rotate&quot;:k.obj=new Y,k.obj.fromArray($),k.angle=rl.degToRad($[3]);break}return k}function os(B){const k={name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,rigidBodies:{}};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;rigid_body&quot;:k.rigidBodies[X.getAttribute(&quot;name&quot;)]={},wr(X,k.rigidBodies[X.getAttribute(&quot;name&quot;)]);break}}Dt.physicsModels[B.getAttribute(&quot;id&quot;)]=k}function wr(B,k){for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;technique_common&quot;:Er(X,k);break}}}function Er(B,k){for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;inertia&quot;:k.inertia=s(X.textContent);break;case&quot;mass&quot;:k.mass=s(X.textContent)[0];break}}}function Os(B){const k={bindJointAxis:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;bind_joint_axis&quot;:k.bindJointAxis.push(as(X));break}}Dt.kinematicsScenes[l(B.getAttribute(&quot;url&quot;))]=k}function as(B){const k={target:B.getAttribute(&quot;target&quot;).split(&quot;/&quot;).pop()};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType===1)switch(X.nodeName){case&quot;axis&quot;:const J=X.getElementsByTagName(&quot;param&quot;)[0];k.axis=J.textContent;const Te=k.axis.split(&quot;inst_&quot;).pop().split(&quot;axis&quot;)[0];k.jointIndex=Te.substring(0,Te.length-1);break}}return k}function Wn(B){return B.build!==void 0?B.build:B}function _a(B){return x(Dt.kinematicsScenes[B],Wn)}function va(){const B=Object.keys(Dt.kinematicsModels)[0],k=Object.keys(Dt.kinematicsScenes)[0],$=Object.keys(Dt.visualScenes)[0];if(B===void 0||k===void 0)return;const X=pi(B),J=_a(k),Te=$t($),Re=J.bindJointAxis,ot={};for(let xt=0,Be=Re.length;xt&lt;Be;xt++){const pt=Re[xt],gt=Tn.querySelector(&#x27;[sid=&quot;&#x27;+pt.target+&#x27;&quot;]&#x27;);if(gt){const Tt=gt.parentElement;Ke(pt.jointIndex,Tt)}}function Ke(xt,Be){const pt=Be.getAttribute(&quot;name&quot;),gt=X.joints[xt];Te.traverse(function(Tt){Tt.name===pt&amp;&amp;(ot[xt]={object:Tt,transforms:Fr(Be),joint:gt,position:gt.zeroPosition})})}const nt=new yt;zr={joints:X&amp;&amp;X.joints,getJointValue:function(xt){const Be=ot[xt];if(Be)return Be.position;console.warn(&quot;THREE.ColladaLoader: Joint &quot;+xt+&quot; doesn&#x27;t exist.&quot;)},setJointValue:function(xt,Be){const pt=ot[xt];if(pt){const gt=pt.joint;if(Be&gt;gt.limits.max||Be&lt;gt.limits.min)console.warn(&quot;THREE.ColladaLoader: Joint &quot;+xt+&quot; value &quot;+Be+&quot; outside of limits (min: &quot;+gt.limits.min+&quot;, max: &quot;+gt.limits.max+&quot;).&quot;);else if(gt.static)console.warn(&quot;THREE.ColladaLoader: Joint &quot;+xt+&quot; is static.&quot;);else{const Tt=pt.object,_t=gt.axis,Fn=pt.transforms;fe.identity();for(let dn=0;dn&lt;Fn.length;dn++){const hn=Fn[dn];if(hn.sid&amp;&amp;hn.sid.indexOf(xt)!==-1)switch(gt.type){case&quot;revolute&quot;:fe.multiply(nt.makeRotationAxis(_t,rl.degToRad(Be)));break;case&quot;prismatic&quot;:fe.multiply(nt.makeTranslation(_t.x*Be,_t.y*Be,_t.z*Be));break;default:console.warn(&quot;THREE.ColladaLoader: Unknown joint type: &quot;+gt.type);break}else switch(hn.type){case&quot;matrix&quot;:fe.multiply(hn.obj);break;case&quot;translate&quot;:fe.multiply(nt.makeTranslation(hn.obj.x,hn.obj.y,hn.obj.z));break;case&quot;scale&quot;:fe.scale(hn.obj);break;case&quot;rotate&quot;:fe.multiply(nt.makeRotationAxis(hn.obj,hn.angle));break}}Tt.matrix.copy(fe),Tt.matrix.decompose(Tt.position,Tt.quaternion,Tt.scale),ot[xt].position=Be}}else console.log(&quot;THREE.ColladaLoader: &quot;+xt+&quot; does not exist.&quot;)}}}function Fr(B){const k=[],$=Tn.querySelector(&#x27;[id=&quot;&#x27;+B.id+&#x27;&quot;]&#x27;);for(let X=0;X&lt;$.childNodes.length;X++){const J=$.childNodes[X];if(J.nodeType!==1)continue;let Te,Re;switch(J.nodeName){case&quot;matrix&quot;:Te=s(J.textContent);const ot=new yt().fromArray(Te).transpose();k.push({sid:J.getAttribute(&quot;sid&quot;),type:J.nodeName,obj:ot});break;case&quot;translate&quot;:case&quot;scale&quot;:Te=s(J.textContent),Re=new Y().fromArray(Te),k.push({sid:J.getAttribute(&quot;sid&quot;),type:J.nodeName,obj:Re});break;case&quot;rotate&quot;:Te=s(J.textContent),Re=new Y().fromArray(Te);const Ke=rl.degToRad(Te[3]);k.push({sid:J.getAttribute(&quot;sid&quot;),type:J.nodeName,obj:Re,angle:Ke});break}}return k}function q(B){const k=B.getElementsByTagName(&quot;node&quot;);for(let $=0;$&lt;k.length;$++){const X=k[$];X.hasAttribute(&quot;id&quot;)===!1&amp;&amp;X.setAttribute(&quot;id&quot;,u())}}const fe=new yt,be=new Y;function we(B){const k={name:B.getAttribute(&quot;name&quot;)||&quot;&quot;,type:B.getAttribute(&quot;type&quot;),id:B.getAttribute(&quot;id&quot;),sid:B.getAttribute(&quot;sid&quot;),matrix:new yt,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];if(X.nodeType!==1)continue;let J;switch(X.nodeName){case&quot;node&quot;:k.nodes.push(X.getAttribute(&quot;id&quot;)),we(X);break;case&quot;instance_camera&quot;:k.instanceCameras.push(l(X.getAttribute(&quot;url&quot;)));break;case&quot;instance_controller&quot;:k.instanceControllers.push(me(X));break;case&quot;instance_light&quot;:k.instanceLights.push(l(X.getAttribute(&quot;url&quot;)));break;case&quot;instance_geometry&quot;:k.instanceGeometries.push(me(X));break;case&quot;instance_node&quot;:k.instanceNodes.push(l(X.getAttribute(&quot;url&quot;)));break;case&quot;matrix&quot;:J=s(X.textContent),k.matrix.multiply(fe.fromArray(J).transpose()),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;translate&quot;:J=s(X.textContent),be.fromArray(J),k.matrix.multiply(fe.makeTranslation(be.x,be.y,be.z)),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;rotate&quot;:J=s(X.textContent);const Te=rl.degToRad(J[3]);k.matrix.multiply(fe.makeRotationAxis(be.fromArray(J),Te)),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;scale&quot;:J=s(X.textContent),k.matrix.scale(be.fromArray(J)),k.transforms[X.getAttribute(&quot;sid&quot;)]=X.nodeName;break;case&quot;extra&quot;:break;default:console.log(X)}}return bt(k.id)?console.warn(&quot;THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.&quot;,k.id):Dt.nodes[k.id]=k,k}function me(B){const k={id:l(B.getAttribute(&quot;url&quot;)),materials:{},skeletons:[]};for(let $=0;$&lt;B.childNodes.length;$++){const X=B.childNodes[$];switch(X.nodeName){case&quot;bind_material&quot;:const J=X.getElementsByTagName(&quot;instance_material&quot;);for(let Te=0;Te&lt;J.length;Te++){const Re=J[Te],ot=Re.getAttribute(&quot;symbol&quot;),Ke=Re.getAttribute(&quot;target&quot;);k.materials[ot]=l(Ke)}break;case&quot;skeleton&quot;:k.skeletons.push(l(X.textContent));break}}return k}function Ge(B,k){const $=[],X=[];let J,Te,Re;for(J=0;J&lt;B.length;J++){const nt=B[J];let xt;if(bt(nt))xt=Bt(nt),Je(xt,k,$);else if(Qt(nt)){const pt=Dt.visualScenes[nt].children;for(let gt=0;gt&lt;pt.length;gt++){const Tt=pt[gt];if(Tt.type===&quot;JOINT&quot;){const _t=Bt(Tt.id);Je(_t,k,$)}}}else console.error(&quot;THREE.ColladaLoader: Unable to find root bone of skeleton with ID:&quot;,nt)}for(J=0;J&lt;k.length;J++)for(Te=0;Te&lt;$.length;Te++)if(Re=$[Te],Re.bone.name===k[J].name){X[J]=Re,Re.processed=!0;break}for(J=0;J&lt;$.length;J++)Re=$[J],Re.processed===!1&amp;&amp;(X.push(Re),Re.processed=!0);const ot=[],Ke=[];for(J=0;J&lt;X.length;J++)Re=X[J],ot.push(Re.bone),Ke.push(Re.boneInverse);return new Eh(ot,Ke)}function Je(B,k,$){B.traverse(function(X){if(X.isBone===!0){let J;for(let Te=0;Te&lt;k.length;Te++){const Re=k[Te];if(Re.name===X.name){J=Re.boneInverse;break}}J===void 0&amp;&amp;(J=new yt),$.push({bone:X,boneInverse:J,processed:!1})}})}function et(B){const k=[],$=B.matrix,X=B.nodes,J=B.type,Te=B.instanceCameras,Re=B.instanceControllers,ot=B.instanceLights,Ke=B.instanceGeometries,nt=B.instanceNodes;for(let Be=0,pt=X.length;Be&lt;pt;Be++)k.push(Bt(X[Be]));for(let Be=0,pt=Te.length;Be&lt;pt;Be++){const gt=Rt(Te[Be]);gt!==null&amp;&amp;k.push(gt.clone())}for(let Be=0,pt=Re.length;Be&lt;pt;Be++){const gt=Re[Be],Tt=oe(gt.id),_t=Bi(Tt.id),Fn=Et(_t,gt.materials),dn=gt.skeletons,hn=Tt.skin.joints,sn=Ge(dn,hn);for(let Mr=0,Qi=Fn.length;Mr&lt;Qi;Mr++){const mi=Fn[Mr];mi.isSkinnedMesh&amp;&amp;(mi.bind(sn,Tt.skin.bindMatrix),mi.normalizeSkinWeights()),k.push(mi)}}for(let Be=0,pt=ot.length;Be&lt;pt;Be++){const gt=de(ot[Be]);gt!==null&amp;&amp;k.push(gt.clone())}for(let Be=0,pt=Ke.length;Be&lt;pt;Be++){const gt=Ke[Be],Tt=Bi(gt.id),_t=Et(Tt,gt.materials);for(let Fn=0,dn=_t.length;Fn&lt;dn;Fn++)k.push(_t[Fn])}for(let Be=0,pt=nt.length;Be&lt;pt;Be++)k.push(Bt(nt[Be]).clone());let xt;if(X.length===0&amp;&amp;k.length===1)xt=k[0];else{xt=J===&quot;JOINT&quot;?new Yd:new br;for(let Be=0;Be&lt;k.length;Be++)xt.add(k[Be])}return xt.name=J===&quot;JOINT&quot;?B.sid:B.name,xt.matrix.copy($),xt.matrix.decompose(xt.position,xt.quaternion,xt.scale),xt}const ft=new $i({name:Ji.DEFAULT_MATERIAL_NAME,color:16711935});function Ot(B,k){const $=[];for(let X=0,J=B.length;X&lt;J;X++){const Te=k[B[X]];Te===void 0?(console.warn(&quot;THREE.ColladaLoader: Material with key %s not found. Apply fallback material.&quot;,B[X]),$.push(ft)):$.push(qe(Te))}return $}function Et(B,k){const $=[];for(const X in B){const J=B[X],Te=Ot(J.materialKeys,k);if(Te.length===0&amp;&amp;(X===&quot;lines&quot;||X===&quot;linestrips&quot;?Te.push(new Zi):Te.push(new cl)),X===&quot;lines&quot;||X===&quot;linestrips&quot;)for(let nt=0,xt=Te.length;nt&lt;xt;nt++){const Be=Te[nt];if(Be.isMeshPhongMaterial===!0||Be.isMeshLambertMaterial===!0){const pt=new Zi;pt.color.copy(Be.color),pt.opacity=Be.opacity,pt.transparent=Be.transparent,Te[nt]=pt}}const Re=J.data.attributes.skinIndex!==void 0,ot=Te.length===1?Te[0]:Te;let Ke;switch(X){case&quot;lines&quot;:Ke=new Ur(J.data,ot);break;case&quot;linestrips&quot;:Ke=new xo(J.data,ot);break;case&quot;triangles&quot;:case&quot;polylist&quot;:Re?Ke=new my(J.data,ot):Ke=new Sn(J.data,ot);break}$.push(Ke)}return $}function bt(B){return Dt.nodes[B]!==void 0}function Bt(B){return x(Dt.nodes[B],et)}function un(B){const k={name:B.getAttribute(&quot;name&quot;),children:[]};q(B);const $=i(B,&quot;node&quot;);for(let X=0;X&lt;$.length;X++)k.children.push(we($[X]));Dt.visualScenes[B.getAttribute(&quot;id&quot;)]=k}function In(B){const k=new br;k.name=B.name;const $=B.children;for(let X=0;X&lt;$.length;X++){const J=$[X];k.add(Bt(J.id))}return k}function Qt(B){return Dt.visualScenes[B]!==void 0}function $t(B){return x(Dt.visualScenes[B],In)}function wt(B){const k=i(B,&quot;instance_visual_scene&quot;)[0];return $t(l(k.getAttribute(&quot;url&quot;)))}function Hn(){const B=Dt.clips;if(h(B)===!0){if(h(Dt.animations)===!1){const k=[];for(const $ in Dt.animations){const X=E($);for(let J=0,Te=X.length;J&lt;Te;J++)k.push(X[J])}ai.push(new ml(&quot;default&quot;,-1,k))}}else for(const k in B)ai.push(G(k))}function rn(B){let k=&quot;&quot;;const $=[B];for(;$.length;){const X=$.shift();X.nodeType===Node.TEXT_NODE?k+=X.textContent:(k+=`
`,$.push(...X.childNodes))}return k.trim()}if(e.length===0)return{scene:new py};const Jn=new DOMParser().parseFromString(e,&quot;application/xml&quot;),Tn=i(Jn,&quot;COLLADA&quot;)[0],vn=Jn.getElementsByTagName(&quot;parsererror&quot;)[0];if(vn!==void 0){const B=i(vn,&quot;div&quot;)[0];let k;return B?k=B.textContent:k=rn(vn),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,k),null}const Tr=Tn.getAttribute(&quot;version&quot;);console.debug(&quot;THREE.ColladaLoader: File version&quot;,Tr);const Mn=f(i(Tn,&quot;asset&quot;)[0]),Ni=new Ly(this.manager);Ni.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let Qn;ZO&amp;&amp;(Qn=new ZO(this.manager),Qn.setPath(this.resourcePath||t));const ei=new $e,ai=[];let zr={},Ds=0;const Dt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};g(Tn,&quot;library_animations&quot;,&quot;animation&quot;,b),g(Tn,&quot;library_animation_clips&quot;,&quot;animation_clip&quot;,I),g(Tn,&quot;library_controllers&quot;,&quot;controller&quot;,ee),g(Tn,&quot;library_images&quot;,&quot;image&quot;,ae),g(Tn,&quot;library_effects&quot;,&quot;effect&quot;,He),g(Tn,&quot;library_materials&quot;,&quot;material&quot;,Ue),g(Tn,&quot;library_cameras&quot;,&quot;camera&quot;,ut),g(Tn,&quot;library_lights&quot;,&quot;light&quot;,rt),g(Tn,&quot;library_geometries&quot;,&quot;geometry&quot;,tt),g(Tn,&quot;library_nodes&quot;,&quot;node&quot;,we),g(Tn,&quot;library_visual_scenes&quot;,&quot;visual_scene&quot;,un),g(Tn,&quot;library_kinematics_models&quot;,&quot;kinematics_model&quot;,oi),g(Tn,&quot;library_physics_models&quot;,&quot;physics_model&quot;,os),g(Tn,&quot;scene&quot;,&quot;instance_kinematics_scene&quot;,Os),v(Dt.animations,w),v(Dt.clips,j),v(Dt.controllers,ce),v(Dt.images,ue),v(Dt.effects,pe),v(Dt.materials,Ze),v(Dt.cameras,St),v(Dt.lights,gn),v(Dt.geometries,wn),v(Dt.visualScenes,In),Hn(),va();const El=wt(i(Tn,&quot;scene&quot;)[0]);return El.animations=ai,Mn.upAxis===&quot;Z_UP&quot;&amp;&amp;(console.warn(&quot;THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289.&quot;),El.rotation.set(-Math.PI/2,0,0)),El.scale.multiplyScalar(Mn.unit),{get animations(){return console.warn(&quot;THREE.ColladaLoader: Please access animations over scene.animations now.&quot;),ai},kinematics:zr,library:Dt,scene:El}}}const JO=new Y,pZ=new Sr,bg=new yt,Qa=new yt,xg=new Si,Sg=new Y(1,1,1),wg=new Y;class r_ extends nn{constructor(...e){super(...e),this.urdfNode=null,this.urdfName=&quot;&quot;}copy(e,t){return super.copy(e,t),this.urdfNode=e.urdfNode,this.urdfName=e.urdfName,this}}class mZ extends r_{constructor(...e){super(...e),this.isURDFCollider=!0,this.type=&quot;URDFCollider&quot;}}class gZ extends r_{constructor(...e){super(...e),this.isURDFVisual=!0,this.type=&quot;URDFVisual&quot;}}class TL extends r_{constructor(...e){super(...e),this.isURDFLink=!0,this.type=&quot;URDFLink&quot;}}class ML extends r_{get jointType(){return this._jointType}set jointType(e){if(this.jointType!==e)switch(this._jointType=e,this.matrixWorldNeedsUpdate=!0,e){case&quot;fixed&quot;:this.jointValue=[];break;case&quot;continuous&quot;:case&quot;revolute&quot;:case&quot;prismatic&quot;:this.jointValue=new Array(1).fill(0);break;case&quot;planar&quot;:this.jointValue=new Array(3).fill(0),this.axis=new Y(0,0,1);break;case&quot;floating&quot;:this.jointValue=new Array(6).fill(0);break}}get angle(){return this.jointValue[0]}constructor(...e){super(...e),this.isURDFJoint=!0,this.type=&quot;URDFJoint&quot;,this.jointValue=null,this.jointType=&quot;fixed&quot;,this.axis=new Y(1,0,0),this.limit={lower:0,upper:0},this.ignoreLimits=!1,this.origPosition=null,this.origQuaternion=null,this.mimicJoints=[]}copy(e,t){return super.copy(e,t),this.jointType=e.jointType,this.axis=e.axis.clone(),this.limit.lower=e.limit.lower,this.limit.upper=e.limit.upper,this.ignoreLimits=!1,this.jointValue=[...e.jointValue],this.origPosition=e.origPosition?e.origPosition.clone():null,this.origQuaternion=e.origQuaternion?e.origQuaternion.clone():null,this.mimicJoints=[...e.mimicJoints],this}setJointValue(...e){e=e.map(i=&gt;i===null?null:parseFloat(i)),(!this.origPosition||!this.origQuaternion)&amp;&amp;(this.origPosition=this.position.clone(),this.origQuaternion=this.quaternion.clone());let t=!1;switch(this.mimicJoints.forEach(i=&gt;{t=i.updateFromMimickedJoint(...e)||t}),this.jointType){case&quot;fixed&quot;:return t;case&quot;continuous&quot;:case&quot;revolute&quot;:{let i=e[0];return i==null||i===this.jointValue[0]?t:(!this.ignoreLimits&amp;&amp;this.jointType===&quot;revolute&quot;&amp;&amp;(i=Math.min(this.limit.upper,i),i=Math.max(this.limit.lower,i)),this.quaternion.setFromAxisAngle(this.axis,i).premultiply(this.origQuaternion),this.jointValue[0]!==i?(this.jointValue[0]=i,this.matrixWorldNeedsUpdate=!0,!0):t)}case&quot;prismatic&quot;:{let i=e[0];return i==null||i===this.jointValue[0]?t:(this.ignoreLimits||(i=Math.min(this.limit.upper,i),i=Math.max(this.limit.lower,i)),this.position.copy(this.origPosition),JO.copy(this.axis).applyEuler(this.rotation),this.position.addScaledVector(JO,i),this.jointValue[0]!==i?(this.jointValue[0]=i,this.matrixWorldNeedsUpdate=!0,!0):t)}case&quot;floating&quot;:return this.jointValue.every((i,r)=&gt;e[r]===i||e[r]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],this.jointValue[3]=e[3]!==null?e[3]:this.jointValue[3],this.jointValue[4]=e[4]!==null?e[4]:this.jointValue[4],this.jointValue[5]=e[5]!==null?e[5]:this.jointValue[5],Qa.compose(this.origPosition,this.origQuaternion,Sg),xg.setFromEuler(pZ.set(this.jointValue[3],this.jointValue[4],this.jointValue[5],&quot;XYZ&quot;)),wg.set(this.jointValue[0],this.jointValue[1],this.jointValue[2]),bg.compose(wg,xg,Sg),Qa.premultiply(bg),this.position.setFromMatrixPosition(Qa),this.rotation.setFromRotationMatrix(Qa),this.matrixWorldNeedsUpdate=!0,!0);case&quot;planar&quot;:return this.jointValue.every((i,r)=&gt;e[r]===i||e[r]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],Qa.compose(this.origPosition,this.origQuaternion,Sg),xg.setFromAxisAngle(this.axis,this.jointValue[2]),wg.set(this.jointValue[0],this.jointValue[1],0),bg.compose(wg,xg,Sg),Qa.premultiply(bg),this.position.setFromMatrixPosition(Qa),this.rotation.setFromRotationMatrix(Qa),this.matrixWorldNeedsUpdate=!0,!0)}return t}}class QO extends ML{constructor(...e){super(...e),this.type=&quot;URDFMimicJoint&quot;,this.mimicJoint=null,this.offset=0,this.multiplier=1}updateFromMimickedJoint(...e){const t=e.map(i=&gt;i*this.multiplier+this.offset);return super.setJointValue(...t)}copy(e,t){return super.copy(e,t),this.mimicJoint=e.mimicJoint,this.offset=e.offset,this.multiplier=e.multiplier,this}}class yZ extends TL{constructor(...e){super(...e),this.isURDFRobot=!0,this.urdfNode=null,this.urdfRobotNode=null,this.robotName=null,this.links=null,this.joints=null,this.colliders=null,this.visual=null,this.frames=null}copy(e,t){super.copy(e,t),this.urdfRobotNode=e.urdfRobotNode,this.robotName=e.robotName,this.links={},this.joints={},this.colliders={},this.visual={},this.traverse(i=&gt;{i.isURDFJoint&amp;&amp;i.urdfName in e.joints&amp;&amp;(this.joints[i.urdfName]=i),i.isURDFLink&amp;&amp;i.urdfName in e.links&amp;&amp;(this.links[i.urdfName]=i),i.isURDFCollider&amp;&amp;i.urdfName in e.colliders&amp;&amp;(this.colliders[i.urdfName]=i),i.isURDFVisual&amp;&amp;i.urdfName in e.visual&amp;&amp;(this.visual[i.urdfName]=i)});for(const i in this.joints)this.joints[i].mimicJoints=this.joints[i].mimicJoints.map(r=&gt;this.joints[r.name]);return this.frames={...this.colliders,...this.visual,...this.links,...this.joints},this}getFrame(e){return this.frames[e]}setJointValue(e,...t){const i=this.joints[e];return i?i.setJointValue(...t):!1}setJointValues(e){let t=!1;for(const i in e){const r=e[i];Array.isArray(r)?t=this.setJointValue(i,...r)||t:t=this.setJointValue(i,r)||t}return t}}const Ux=new Si,e2=new Sr;function Hu(n){return n?n.trim().split(/\s+/g).map(e=&gt;parseFloat(e)):[0,0,0]}function t2(n,e,t=!1){t||n.rotation.set(0,0,0),e2.set(e[0],e[1],e[2],&quot;ZYX&quot;),Ux.setFromEuler(e2),Ux.multiply(n.quaternion),n.quaternion.copy(Ux)}class _Z{constructor(e){this.manager=e||Rw,this.loadMeshCb=this.defaultMeshLoader.bind(this),this.parseVisual=!0,this.parseCollision=!1,this.packages=&quot;&quot;,this.workingPath=&quot;&quot;,this.fetchOptions={}}loadAsync(e){return new Promise((t,i)=&gt;{this.load(e,t,null,i)})}load(e,t,i,r){const s=this.manager,o=vo.extractUrlBase(e),l=this.manager.resolveURL(e);s.itemStart(l),fetch(l,this.fetchOptions).then(u=&gt;{if(u.ok)return i&amp;&amp;i(null),u.text();throw new Error(`URDFLoader: Failed to load url &#x27;${l}&#x27; with error code ${u.status} : ${u.statusText}.`)}).then(u=&gt;{const h=this.parse(u,this.workingPath||o);t(h),s.itemEnd(l)}).catch(u=&gt;{r?r(u):console.error(&quot;URDFLoader: Error loading file.&quot;,u),s.itemError(l),s.itemEnd(l)})}parse(e,t=this.workingPath){const i=this.packages,r=this.loadMeshCb,s=this.parseVisual,o=this.parseCollision,l=this.manager,u={},h={},f={};function p(T){if(!/^package:\/\//.test(T))return t?t+T:T;const[w,E]=T.replace(/^package:\/\//,&quot;&quot;).split(/\/(.+)/);if(typeof i==&quot;string&quot;)return i.endsWith(w)?i+&quot;/&quot;+E:i+&quot;/&quot;+w+&quot;/&quot;+E;if(i instanceof Function)return i(w)+&quot;/&quot;+E;if(typeof i==&quot;object&quot;)return w in i?i[w]+&quot;/&quot;+E:(console.error(`URDFLoader : ${w} not found in provided package list.`),null)}function m(T){let w;T instanceof Document?w=[...T.children]:T instanceof Element?w=[T]:w=[...new DOMParser().parseFromString(T,&quot;text/xml&quot;).children];const E=w.filter(R=&gt;R.nodeName===&quot;robot&quot;).pop();return g(E)}function g(T){const w=[...T.children],E=w.filter(L=&gt;L.nodeName.toLowerCase()===&quot;link&quot;),R=w.filter(L=&gt;L.nodeName.toLowerCase()===&quot;joint&quot;),N=w.filter(L=&gt;L.nodeName.toLowerCase()===&quot;material&quot;),A=new yZ;A.robotName=T.getAttribute(&quot;name&quot;),A.urdfRobotNode=T,N.forEach(L=&gt;{const V=L.getAttribute(&quot;name&quot;);f[V]=b(L)});const D={},C={};E.forEach(L=&gt;{const V=L.getAttribute(&quot;name&quot;),Z=T.querySelector(`child[link=&quot;${V}&quot;]`)===null;u[V]=x(L,D,C,Z?A:null)}),R.forEach(L=&gt;{const V=L.getAttribute(&quot;name&quot;);h[V]=v(L)}),A.joints=h,A.links=u,A.colliders=C,A.visual=D;const O=Object.values(h);return O.forEach(L=&gt;{L instanceof QO&amp;&amp;h[L.mimicJoint].mimicJoints.push(L)}),O.forEach(L=&gt;{const V=new Set,Z=z=&gt;{if(V.has(z))throw new Error(&quot;URDFLoader: Detected an infinite loop of mimic joints.&quot;);V.add(z),z.mimicJoints.forEach(K=&gt;{Z(K)})};Z(L)}),A.frames={...C,...D,...u,...h},A}function v(T){const w=[...T.children],E=T.getAttribute(&quot;type&quot;);let R;const N=w.find(V=&gt;V.nodeName.toLowerCase()===&quot;mimic&quot;);N?(R=new QO,R.mimicJoint=N.getAttribute(&quot;joint&quot;),R.multiplier=parseFloat(N.getAttribute(&quot;multiplier&quot;)||1),R.offset=parseFloat(N.getAttribute(&quot;offset&quot;)||0)):R=new ML,R.urdfNode=T,R.name=T.getAttribute(&quot;name&quot;),R.urdfName=R.name,R.jointType=E;let A=null,D=null,C=[0,0,0],O=[0,0,0];w.forEach(V=&gt;{const Z=V.nodeName.toLowerCase();Z===&quot;origin&quot;?(C=Hu(V.getAttribute(&quot;xyz&quot;)),O=Hu(V.getAttribute(&quot;rpy&quot;))):Z===&quot;child&quot;?D=u[V.getAttribute(&quot;link&quot;)]:Z===&quot;parent&quot;?A=u[V.getAttribute(&quot;link&quot;)]:Z===&quot;limit&quot;&amp;&amp;(R.limit.lower=parseFloat(V.getAttribute(&quot;lower&quot;)||R.limit.lower),R.limit.upper=parseFloat(V.getAttribute(&quot;upper&quot;)||R.limit.upper))}),A.add(R),R.add(D),t2(R,O),R.position.set(C[0],C[1],C[2]);const L=w.filter(V=&gt;V.nodeName.toLowerCase()===&quot;axis&quot;)[0];if(L){const V=L.getAttribute(&quot;xyz&quot;).split(/\s+/g).map(Z=&gt;parseFloat(Z));R.axis=new Y(V[0],V[1],V[2]),R.axis.normalize()}return R}function x(T,w,E,R=null){R===null&amp;&amp;(R=new TL);const N=[...T.children];return R.name=T.getAttribute(&quot;name&quot;),R.urdfName=R.name,R.urdfNode=T,s&amp;&amp;N.filter(D=&gt;D.nodeName.toLowerCase()===&quot;visual&quot;).forEach(D=&gt;{const C=_(D,f);if(R.add(C),D.hasAttribute(&quot;name&quot;)){const O=D.getAttribute(&quot;name&quot;);C.name=O,C.urdfName=O,w[O]=C}}),o&amp;&amp;N.filter(D=&gt;D.nodeName.toLowerCase()===&quot;collision&quot;).forEach(D=&gt;{const C=_(D);if(R.add(C),D.hasAttribute(&quot;name&quot;)){const O=D.getAttribute(&quot;name&quot;);C.name=O,C.urdfName=O,E[O]=C}}),R}function b(T){const w=[...T.children],E=new cl;return E.name=T.getAttribute(&quot;name&quot;)||&quot;&quot;,w.forEach(R=&gt;{const N=R.nodeName.toLowerCase();if(N===&quot;color&quot;){const A=R.getAttribute(&quot;rgba&quot;).split(/\s/g).map(D=&gt;parseFloat(D));E.color.setRGB(A[0],A[1],A[2]),E.opacity=A[3],E.transparent=A[3]&lt;1,E.depthWrite=!E.transparent}else if(N===&quot;texture&quot;){const A=R.getAttribute(&quot;filename&quot;);if(A){const D=new Ly(l),C=p(A);E.map=D.load(C),E.map.colorSpace=Nn}}}),E}function _(T,w={}){const E=T.nodeName.toLowerCase()===&quot;collision&quot;,R=[...T.children];let N=null;const A=R.filter(C=&gt;C.nodeName.toLowerCase()===&quot;material&quot;)[0];if(A){const C=A.getAttribute(&quot;name&quot;);C&amp;&amp;C in w?N=w[C]:N=b(A)}else N=new cl;const D=E?new mZ:new gZ;return D.urdfNode=T,R.forEach(C=&gt;{const O=C.nodeName.toLowerCase();if(O===&quot;geometry&quot;){const L=C.children[0].nodeName.toLowerCase();if(L===&quot;mesh&quot;){const V=C.children[0].getAttribute(&quot;filename&quot;),Z=p(V);if(Z!==null){const z=C.children[0].getAttribute(&quot;scale&quot;);if(z){const K=Hu(z);D.scale.set(K[0],K[1],K[2])}r(Z,l,(K,I)=&gt;{I?console.error(&quot;URDFLoader: Error loading mesh.&quot;,I):K&amp;&amp;(K instanceof Sn&amp;&amp;(K.material=N),K.position.set(0,0,0),K.quaternion.identity(),D.add(K))})}}else if(L===&quot;box&quot;){const V=new Sn;V.geometry=new xl(1,1,1),V.material=N;const Z=Hu(C.children[0].getAttribute(&quot;size&quot;));V.scale.set(Z[0],Z[1],Z[2]),D.add(V)}else if(L===&quot;sphere&quot;){const V=new Sn;V.geometry=new Ch(1,30,30),V.material=N;const Z=parseFloat(C.children[0].getAttribute(&quot;radius&quot;))||0;V.scale.set(Z,Z,Z),D.add(V)}else if(L===&quot;cylinder&quot;){const V=new Sn;V.geometry=new Mh(1,1,1,30),V.material=N;const Z=parseFloat(C.children[0].getAttribute(&quot;radius&quot;))||0,z=parseFloat(C.children[0].getAttribute(&quot;length&quot;))||0;V.scale.set(Z,z,Z),V.rotation.set(Math.PI/2,0,0),D.add(V)}}else if(O===&quot;origin&quot;){const L=Hu(C.getAttribute(&quot;xyz&quot;)),V=Hu(C.getAttribute(&quot;rpy&quot;));D.position.set(L[0],L[1],L[2]),D.rotation.set(0,0,0),t2(D,V)}}),D}return m(e)}defaultMeshLoader(e,t,i){/\.stl$/i.test(e)?new td(t).load(e,s=&gt;{const o=new Sn(s,new cl);i(o)}):/\.dae$/i.test(e)?new dZ(t).load(e,s=&gt;i(s.scene)):console.warn(`URDFLoader: Could not load model at ${e}.
No loader available`)}}function vZ(){console.log(&quot;Loading robot&quot;);const n=new td;n.parse=function(r){try{return td.prototype.parse.call(this,r)}catch(s){if(console.warn(&quot;Binary STL failed. Trying ASCII fallback...&quot;,s),typeof r==&quot;string&quot;)return td.prototype.parse.call(this,r);{const l=new TextDecoder().decode(r);return td.prototype.parse.call(this,l)}}};let e=Zs.current;e||console.error(&quot;Scene is not defined&quot;);const t=&quot;./models/kr4_r600/urdf/kuka_kr4.urdf&quot;,i=new _Z;i.workingPath=&quot;./models/kr4_r600&quot;,i.packages={meshes:&quot;/models/kr4_r600/meshes&quot;},i.loadMeshCb=(r,s,o)=&gt;{fetch(r).then(l=&gt;{if(!l.ok)throw new Error(`HTTP error ${l.status} for ${r}`);return l.arrayBuffer()}).then(l=&gt;{const u=new Uint8Array(l.slice(0,100)),h=new TextDecoder().decode(u);console.log(&quot;STL header preview:&quot;,h);const f=n.parse(l),p=new Sn(f,new ts({color:10066329}));o(p)}).catch(l=&gt;{console.error(`Failed to load STL at ${r}`,l),o(null,l)})},i.load(t,r=&gt;{console.log(&quot;Robot loaded:&quot;,r),e?(r.traverse(s=&gt;{s.castShadow=!0}),e.add(r)):console.error(&quot;Scene still not available at load time&quot;)},r=&gt;{console.error(&quot;Failed to load URDF:&quot;,r)})}function bZ(){if(console.log(&quot;Debug print function called&quot;),gl.getState().hasAnimation?console.log(&quot;Animation found&quot;):console.log(&quot;No animation found&quot;),!Zs.current){console.log(&quot;Scene is null&quot;);return}if(!mc.current)console.log(&quot;No cameras found in the scene&quot;);else{let t=mc.current;console.log(&quot;Camera position:&quot;,t.position),console.log(&quot;Camera rotation:&quot;,t.rotation),console.log(&quot;Camera up:&quot;,t.up),console.log(&quot;Camera world up:&quot;,t.getWorldDirection(new Y)),console.log(&quot;Camera world direction:&quot;,t.getWorldDirection(new Y)),console.log(&quot;Camera quaternion:&quot;,t.quaternion),console.log(&quot;Camera matrix world:&quot;,t.matrixWorld),console.log(&quot;Camera matrix world inverse:&quot;,t.matrixWorldInverse),console.log(&quot;Camera projection matrix:&quot;,t.projectionMatrix),console.log(&quot;Camera projection matrix inverse:&quot;,t.projectionMatrixInverse),console.log(&quot;Camera frustum:&quot;,t.projectionMatrix.elements),console.log(&quot;Camera frustum planes:&quot;,t.projectionMatrix.elements),console.log(&quot;Camera frustum size:&quot;,t.projectionMatrix.elements.length)}if(!mS.current)console.log(&quot;No controls found in the scene&quot;);else{let t=mS.current;t instanceof Ic?(console.log(&quot;Controls type: OrbitControls&quot;),console.log(&quot;Controls target:&quot;,t.target),console.log(&quot;Controls position:&quot;,t.object.position)):(console.log(&quot;Controls type: CameraControls&quot;),console.log(&quot;Controls position:&quot;,t.camera.position))}}function xZ(){const{showPerf:n,setShowPerf:e,showEdges:t,setShowEdges:i,lockTranslation:r,setLockTranslation:s,setEnableWebsocket:o,enableWebsocket:l,enableNodeEditor:u,setEnableNodeEditor:h}=Bc(),{showLegend:f,setShowLegend:p}=ZS(),{zIsUp:m,setZIsUp:g,defaultOrbitController:v,setDefaultOrbitController:x}=eo(),[b]=re.useState({width:300,height:460}),[_,T]=re.useState({x:0,y:0}),[w,E]=re.useState(!1),R=window.UNIQUE_VERSION_ID||0,N=re.useCallback(D=&gt;{const C=Math.min(Math.max(0,D.x),window.innerWidth-b.width),O=Math.min(Math.max(0,D.y),window.innerHeight-b.height);return{x:C,y:O}},[b]),A=re.useCallback(()=&gt;{const D=(window.innerWidth-b.width)/2,C=(window.innerHeight-b.height)/2;T(N({x:D,y:C}))},[b,N]);return re.useEffect(()=&gt;(A(),window.addEventListener(&quot;resize&quot;,A),()=&gt;{window.removeEventListener(&quot;resize&quot;,A)}),[A]),P.jsx(i1,{default:{width:300,height:460,x:(window.innerWidth-300)/2,y:(window.innerHeight-460)/2},minWidth:250,bounds:&quot;window&quot;,enableResizing:{right:!0,bottomRight:!0},onDragStop:(D,C)=&gt;T({x:C.x,y:C.y}),onResizeStop:(D,C,O,L,V)=&gt;{T(V)},children:P.jsxs(&quot;div&quot;,{className:&quot;flex flex-col space-y-4 p-4 bg-gray-800 rounded shadow-lg h-full text-white text-sm&quot;,style:{height:&quot;auto&quot;,maxHeight:&quot;640px&quot;,overflowY:&quot;auto&quot;,width:&quot;100%&quot;,boxSizing:&quot;border-box&quot;},children:[P.jsx(&quot;div&quot;,{className:&quot;font-bold text-base&quot;,children:&quot;Options Panel&quot;}),P.jsxs(&quot;div&quot;,{className:&quot;text-xs text-gray-400&quot;,children:[&quot;Version: &quot;,R]}),P.jsxs(&quot;div&quot;,{className:&quot;space-y-2&quot;,children:[P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:()=&gt;bZ(),children:&quot;Debug print&quot;}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:vZ,children:&quot;Load URDF Model&quot;}),P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:async()=&gt;{try{await hZ()}catch(D){console.error(&quot;Error taking screenshot:&quot;,D)}},children:&quot;Take Screenshot&quot;})]}),P.jsx(&quot;hr&quot;,{className:&quot;border-gray-600&quot;}),P.jsxs(&quot;div&quot;,{className:&quot;space-y-2&quot;,children:[P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:n,onChange:()=&gt;e(!n)}),P.jsx(&quot;span&quot;,{children:&quot;Show Stats (Perf)&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:f,onChange:()=&gt;p(!f)}),P.jsx(&quot;span&quot;,{children:&quot;Show Color Legend&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:t,onChange:()=&gt;i(!t)}),P.jsx(&quot;span&quot;,{children:&quot;Geometry Edges&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:r,onChange:()=&gt;s(!r)}),P.jsx(&quot;span&quot;,{children:&quot;Lock Translation&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:u,onChange:()=&gt;h(!u)}),P.jsx(&quot;span&quot;,{children:&quot;Enable Node Editor&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:l,onChange:()=&gt;o(!l)}),P.jsx(&quot;span&quot;,{children:&quot;Enable Websocket&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:m,onChange:()=&gt;g(!m)}),P.jsx(&quot;span&quot;,{children:&quot;Z is UP&quot;})]}),P.jsxs(&quot;label&quot;,{className:&quot;flex items-center space-x-2&quot;,children:[P.jsx(&quot;input&quot;,{type:&quot;checkbox&quot;,checked:v,onChange:()=&gt;x(!v)}),P.jsx(&quot;span&quot;,{children:&quot;Use Default Orbitcontroller&quot;})]})]}),P.jsx(&quot;hr&quot;,{className:&quot;border-gray-600&quot;}),P.jsxs(&quot;div&quot;,{children:[P.jsx(&quot;button&quot;,{className:&quot;bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded w-full&quot;,onClick:()=&gt;E(!w),children:&quot;Shortcut Keys&quot;}),w&amp;&amp;P.jsxs(&quot;div&quot;,{className:&quot;mt-2 bg-gray-700 p-2 rounded text-xs space-y-1&quot;,children:[P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + H&quot;}),&quot;: Hide&quot;]}),P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + U&quot;}),&quot;: Unhide All&quot;]}),P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + F&quot;}),&quot;: Center on Selection&quot;]}),P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + A&quot;}),&quot;: Zoom to All&quot;]}),P.jsxs(&quot;p&quot;,{children:[P.jsx(&quot;kbd&quot;,{children:&quot;Shift + Q&quot;}),&quot;: Toggle Options Menu&quot;]})]})]})]})})}var SZ=OP();const AL=re.createContext(null);function ss(){const n=re.useContext(AL);if(n===null)throw new Error(&quot;No Tree Api Provided&quot;);return n}const CL=re.createContext(null);function wZ(){const n=re.useContext(CL);if(n===null)throw new Error(&quot;Provide a NodesContext&quot;);return n}const RL=re.createContext(null);function EZ(){const n=re.useContext(RL);if(n===null)throw new Error(&quot;Provide a DnDContext&quot;);return n}const OL=re.createContext(0);function DL(){re.useContext(OL)}function kg(n,e,t){return Math.max(Math.min(n,t),e)}function NL(n){return n&amp;&amp;n.isLeaf}function IL(n){return n&amp;&amp;n.isInternal&amp;&amp;!n.isOpen}function PL(n){var e;return n&amp;&amp;n.isOpen&amp;&amp;!(!((e=n.children)===null||e===void 0)&amp;&amp;e.length)}const LL=(n,e)=&gt;{let t=n;for(;t;){if(t.id===e.id)return!0;t=t.parent}return!1},UL=n=&gt;{if(!n.parent)throw Error(&quot;Node does not have a parent&quot;);return n.parent.children.findIndex(e=&gt;e.id===n.id)};function TZ(){}function s1(n,e){if(!n)return null;if(n.id===e)return n;if(n.children)for(let t of n.children){const i=s1(t,e);if(i)return i}return null}function q0(n,e){if(e(n),n.children)for(let t of n.children)q0(t,e)}function kL(n){const e=zL(n);let t;for(let i=0;i&lt;e.length;++i)if(e[i]===n){t=MZ(e,i);break}t==null||t.focus()}function FL(n){const e=zL(n);let t;for(let i=0;i&lt;e.length;++i)if(e[i]===n){t=AZ(e,i);break}t==null||t.focus()}function MZ(n,e){return e+1&lt;n.length?n[e+1]:n[0]}function AZ(n,e){return e-1&gt;=0?n[e-1]:n[n.length-1]}function zL(n){return Array.from(document.querySelectorAll(&#x27;button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=&quot;-1&quot;]):not([disabled]), details:not([disabled]), summary:not(:disabled)&#x27;)).filter(e=&gt;e===n||!n.contains(e))}function nd(n,e){return typeof e==&quot;boolean&quot;?e:typeof e==&quot;string&quot;?n[e]:e(n)}function BL(n){return n===null?null:cc(n)}function cc(n){return typeof n==&quot;string&quot;?n:n.id}function CZ(...n){return e=&gt;{n.forEach(t=&gt;{typeof t==&quot;function&quot;?t(e):t!=null&amp;&amp;(t.current=e)})}}function HL(n,...e){if(n)return n(...e)}function VL(n){return new Promise((e,t)=&gt;{let i=0;function r(){i+=1,i===100&amp;&amp;t(),n()?e():setTimeout(r,10)}r()})}function GL(n){var e,t;const i=n.focusedNode;return i?i.isOpen?0:i.parent?i.childIndex+1:0:(t=(e=n.root.children)===null||e===void 0?void 0:e.length)!==null&amp;&amp;t!==void 0?t:0}function jL(n){const e=n.focusedNode;return e?e.isOpen?e.id:e.parent&amp;&amp;!e.parent.isRoot?e.parent.id:null:null}const RZ=Object.freeze(Object.defineProperty({__proto__:null,access:nd,bound:kg,dfs:s1,focusNextElement:kL,focusPrevElement:FL,getInsertIndex:GL,getInsertParentId:jL,identify:cc,identifyNull:BL,indexOf:UL,isClosed:IL,isDescendant:LL,isItem:NL,isOpenWithEmptyChildren:PL,mergeRefs:CZ,noop:TZ,safeRun:HL,waitFor:VL,walk:q0},Symbol.toStringTag,{value:&quot;Module&quot;})),OZ={display:&quot;flex&quot;,alignItems:&quot;center&quot;,zIndex:1},DZ={flex:1,height:&quot;2px&quot;,background:&quot;#4B91E2&quot;,borderRadius:&quot;1px&quot;},NZ={width:&quot;4px&quot;,height:&quot;4px&quot;,boxShadow:&quot;0 0 0 3px #4B91E2&quot;,borderRadius:&quot;50%&quot;},IZ=md.memo(function({top:e,left:t,indent:i}){const r={position:&quot;absolute&quot;,pointerEvents:&quot;none&quot;,top:e-2+&quot;px&quot;,left:t+&quot;px&quot;,right:i+&quot;px&quot;};return P.jsxs(&quot;div&quot;,{style:Object.assign(Object.assign({},OZ),r),children:[P.jsx(&quot;div&quot;,{style:Object.assign({},NZ)}),P.jsx(&quot;div&quot;,{style:Object.assign({},DZ)})]})});function PZ({node:n,attrs:e,innerRef:t,children:i}){return P.jsx(&quot;div&quot;,Object.assign({},e,{ref:t,onFocus:r=&gt;r.stopPropagation(),onClick:n.handleClick,children:i}))}function LZ(n){return P.jsxs(&quot;div&quot;,{ref:n.dragHandle,style:n.style,children:[P.jsx(&quot;span&quot;,{onClick:e=&gt;{e.stopPropagation(),n.node.toggle()},children:n.node.isLeaf?&quot;🌳&quot;:n.node.isOpen?&quot;🗁&quot;:&quot;🗀&quot;}),&quot; &quot;,n.node.isEditing?P.jsx(kZ,Object.assign({},n)):P.jsx(UZ,Object.assign({},n))]})}function UZ(n){return P.jsx(P.Fragment,{children:P.jsx(&quot;span&quot;,{children:n.node.data.name})})}function kZ({node:n}){const e=re.useRef();return re.useEffect(()=&gt;{var t,i;(t=e.current)===null||t===void 0||t.focus(),(i=e.current)===null||i===void 0||i.select()},[]),P.jsx(&quot;input&quot;,{ref:e,defaultValue:n.data.name,onBlur:()=&gt;n.reset(),onKeyDown:t=&gt;{var i;t.key===&quot;Escape&quot;&amp;&amp;n.reset(),t.key===&quot;Enter&quot;&amp;&amp;n.submit(((i=e.current)===null||i===void 0?void 0:i.value)||&quot;&quot;)}})}function kx(n){return{type:&quot;EDIT&quot;,id:n}}function FZ(n={id:null},e){return e.type===&quot;EDIT&quot;?Object.assign(Object.assign({},n),{id:e.id}):n}function Vu(n){return{type:&quot;FOCUS&quot;,id:n}}function zZ(){return{type:&quot;TREE_BLUR&quot;}}function BZ(n={id:null,treeFocused:!1},e){return e.type===&quot;FOCUS&quot;?Object.assign(Object.assign({},n),{id:e.id,treeFocused:!0}):e.type===&quot;TREE_BLUR&quot;?Object.assign(Object.assign({},n),{treeFocused:!1}):n}class Y0{constructor(e){this.handleClick=t=&gt;{t.metaKey&amp;&amp;!this.tree.props.disableMultiSelection?this.isSelected?this.deselect():this.selectMulti():t.shiftKey&amp;&amp;!this.tree.props.disableMultiSelection?this.selectContiguous():(this.select(),this.activate())},this.tree=e.tree,this.id=e.id,this.data=e.data,this.level=e.level,this.children=e.children,this.parent=e.parent,this.isDraggable=e.isDraggable,this.rowIndex=e.rowIndex}get isRoot(){return this.id===Hd}get isLeaf(){return!Array.isArray(this.children)}get isInternal(){return!this.isLeaf}get isOpen(){return this.isLeaf?!1:this.tree.isOpen(this.id)}get isClosed(){return this.isLeaf?!1:!this.tree.isOpen(this.id)}get isEditable(){return this.tree.isEditable(this.data)}get isEditing(){return this.tree.editingId===this.id}get isSelected(){return this.tree.isSelected(this.id)}get isOnlySelection(){return this.isSelected&amp;&amp;this.tree.hasOneSelection}get isSelectedStart(){var e;return this.isSelected&amp;&amp;!(!((e=this.prev)===null||e===void 0)&amp;&amp;e.isSelected)}get isSelectedEnd(){var e;return this.isSelected&amp;&amp;!(!((e=this.next)===null||e===void 0)&amp;&amp;e.isSelected)}get isFocused(){return this.tree.isFocused(this.id)}get isDragging(){return this.tree.isDragging(this.id)}get willReceiveDrop(){return this.tree.willReceiveDrop(this.id)}get state(){return{isClosed:this.isClosed,isDragging:this.isDragging,isEditing:this.isEditing,isFocused:this.isFocused,isInternal:this.isInternal,isLeaf:this.isLeaf,isOpen:this.isOpen,isSelected:this.isSelected,isSelectedEnd:this.isSelectedEnd,isSelectedStart:this.isSelectedStart,willReceiveDrop:this.willReceiveDrop}}get childIndex(){return this.parent&amp;&amp;this.parent.children?this.parent.children.findIndex(e=&gt;e.id===this.id):-1}get next(){return this.rowIndex===null?null:this.tree.at(this.rowIndex+1)}get prev(){return this.rowIndex===null?null:this.tree.at(this.rowIndex-1)}get nextSibling(){var e,t;const i=this.childIndex;return(t=(e=this.parent)===null||e===void 0?void 0:e.children[i+1])!==null&amp;&amp;t!==void 0?t:null}isAncestorOf(e){if(!e)return!1;let t=e;for(;t;){if(t.id===this.id)return!0;t=t.parent}return!1}select(){this.tree.select(this)}deselect(){this.tree.deselect(this)}selectMulti(){this.tree.selectMulti(this)}selectContiguous(){this.tree.selectContiguous(this)}activate(){this.tree.activate(this)}focus(){this.tree.focus(this)}toggle(){this.tree.toggle(this)}open(){this.tree.open(this)}openParents(){this.tree.openParents(this)}close(){this.tree.close(this)}submit(e){this.tree.submit(this,e)}reset(){this.tree.reset()}clone(){return new Y0(Object.assign({},this))}edit(){return this.tree.edit(this)}}const Hd=&quot;__REACT_ARBORIST_INTERNAL_ROOT__&quot;;function n2(n){var e;function t(s,o,l){const u=n.accessId(s),h=new Y0({tree:n,data:s,level:o,parent:l,id:u,children:null,isDraggable:n.isDraggable(s),rowIndex:null}),f=n.accessChildren(s);return f&amp;&amp;(h.children=f.map(p=&gt;t(p,o+1,h))),h}const i=new Y0({tree:n,id:Hd,data:{id:Hd},level:-1,parent:null,children:null,isDraggable:!0,rowIndex:null}),r=(e=n.props.data)!==null&amp;&amp;e!==void 0?e:[];return i.children=r.map(s=&gt;t(s,0,i)),i}const VS={open(n,e){return{type:&quot;VISIBILITY_OPEN&quot;,id:n,filtered:e}},close(n,e){return{type:&quot;VISIBILITY_CLOSE&quot;,id:n,filtered:e}},toggle(n,e){return{type:&quot;VISIBILITY_TOGGLE&quot;,id:n,filtered:e}},clear(n){return{type:&quot;VISIBILITY_CLEAR&quot;,filtered:n}}};function i2(n={},e){if(e.type===&quot;VISIBILITY_OPEN&quot;)return Object.assign(Object.assign({},n),{[e.id]:!0});if(e.type===&quot;VISIBILITY_CLOSE&quot;)return Object.assign(Object.assign({},n),{[e.id]:!1});if(e.type===&quot;VISIBILITY_TOGGLE&quot;){const t=n[e.id];return Object.assign(Object.assign({},n),{[e.id]:!t})}else return e.type===&quot;VISIBILITY_CLEAR&quot;?{}:n}function HZ(n={filtered:{},unfiltered:{}},e){return e.type.startsWith(&quot;VISIBILITY&quot;)?e.filtered?Object.assign(Object.assign({},n),{filtered:i2(n.filtered,e)}):Object.assign(Object.assign({},n),{unfiltered:i2(n.unfiltered,e)}):n}const bh=n=&gt;{var e;return{nodes:{open:{filtered:{},unfiltered:(e=n==null?void 0:n.initialOpenState)!==null&amp;&amp;e!==void 0?e:{}},focus:{id:null,treeFocused:!1},edit:{id:null},drag:{id:null,selectedIds:[],destinationParentId:null,destinationIndex:null},selection:{ids:new Set,anchor:null,mostRecent:null}},dnd:{cursor:{type:&quot;none&quot;},dragId:null,dragIds:[],parentId:null,index:-1}}},Fs={clear:()=&gt;({type:&quot;SELECTION_CLEAR&quot;}),only:n=&gt;({type:&quot;SELECTION_ONLY&quot;,id:cc(n)}),add:n=&gt;({type:&quot;SELECTION_ADD&quot;,ids:(Array.isArray(n)?n:[n]).map(cc)}),remove:n=&gt;({type:&quot;SELECTION_REMOVE&quot;,ids:(Array.isArray(n)?n:[n]).map(cc)}),set:n=&gt;Object.assign({type:&quot;SELECTION_SET&quot;},n),mostRecent:n=&gt;({type:&quot;SELECTION_MOST_RECENT&quot;,id:n===null?null:cc(n)}),anchor:n=&gt;({type:&quot;SELECTION_ANCHOR&quot;,id:n===null?null:cc(n)})};function VZ(n=bh().nodes.selection,e){const t=n.ids;switch(e.type){case&quot;SELECTION_CLEAR&quot;:return Object.assign(Object.assign({},n),{ids:new Set});case&quot;SELECTION_ONLY&quot;:return Object.assign(Object.assign({},n),{ids:new Set([e.id])});case&quot;SELECTION_ADD&quot;:return e.ids.length===0?n:(e.ids.forEach(i=&gt;t.add(i)),Object.assign(Object.assign({},n),{ids:new Set(t)}));case&quot;SELECTION_REMOVE&quot;:return e.ids.length===0?n:(e.ids.forEach(i=&gt;t.delete(i)),Object.assign(Object.assign({},n),{ids:new Set(t)}));case&quot;SELECTION_SET&quot;:return Object.assign(Object.assign({},n),{ids:e.ids,mostRecent:e.mostRecent,anchor:e.anchor});case&quot;SELECTION_MOST_RECENT&quot;:return Object.assign(Object.assign({},n),{mostRecent:e.id});case&quot;SELECTION_ANCHOR&quot;:return Object.assign(Object.assign({},n),{anchor:e.id});default:return n}}const xh={cursor(n){return{type:&quot;DND_CURSOR&quot;,cursor:n}},dragStart(n,e){return{type:&quot;DND_DRAG_START&quot;,id:n,dragIds:e}},dragEnd(){return{type:&quot;DND_DRAG_END&quot;}},hovering(n,e){return{type:&quot;DND_HOVERING&quot;,parentId:n,index:e}}};function GZ(n=bh().dnd,e){switch(e.type){case&quot;DND_CURSOR&quot;:return Object.assign(Object.assign({},n),{cursor:e.cursor});case&quot;DND_DRAG_START&quot;:return Object.assign(Object.assign({},n),{dragId:e.id,dragIds:e.dragIds});case&quot;DND_DRAG_END&quot;:return bh().dnd;case&quot;DND_HOVERING&quot;:return Object.assign(Object.assign({},n),{parentId:e.parentId,index:e.index});default:return n}}const jZ={position:&quot;fixed&quot;,pointerEvents:&quot;none&quot;,zIndex:100,left:0,top:0,width:&quot;100%&quot;,height:&quot;100%&quot;},WZ=n=&gt;{if(!n)return{display:&quot;none&quot;};const{x:e,y:t}=n;return{transform:`translate(${e}px, ${t}px)`}},XZ=n=&gt;{if(!n)return{display:&quot;none&quot;};const{x:e,y:t}=n;return{transform:`translate(${e+10}px, ${t+10}px)`}};function WL({offset:n,mouse:e,id:t,dragIds:i,isDragging:r}){return P.jsxs(qZ,{isDragging:r,children:[P.jsx(YZ,{offset:n,children:P.jsx($Z,{id:t,dragIds:i})}),P.jsx(KZ,{mouse:e,count:i.length})]})}const qZ=re.memo(function(e){return e.isDragging?P.jsx(&quot;div&quot;,{style:jZ,children:e.children}):null});function YZ(n){return P.jsx(&quot;div&quot;,{className:&quot;row preview&quot;,style:WZ(n.offset),children:n.children})}function KZ(n){const{count:e,mouse:t}=n;return e&gt;1?P.jsx(&quot;div&quot;,{className:&quot;selected-count&quot;,style:XZ(t),children:e}):null}const $Z=re.memo(function(e){const t=ss(),i=t.get(e.id);return i?P.jsx(t.renderNode,{preview:!0,node:i,style:{paddingLeft:i.level*t.indent,opacity:.2,background:&quot;transparent&quot;},tree:t}):null});function GS(){return GS=Object.assign?Object.assign.bind():function(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&amp;&amp;(n[i]=t[i])}return n},GS.apply(null,arguments)}function r2(n){if(n===void 0)throw new ReferenceError(&quot;this hasn&#x27;t been initialised - super() hasn&#x27;t been called&quot;);return n}function jS(n,e){return jS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},jS(n,e)}function ZZ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,jS(n,e)}var s2=Number.isNaN||function(e){return typeof e==&quot;number&quot;&amp;&amp;e!==e};function JZ(n,e){return!!(n===e||s2(n)&amp;&amp;s2(e))}function QZ(n,e){if(n.length!==e.length)return!1;for(var t=0;t&lt;n.length;t++)if(!JZ(n[t],e[t]))return!1;return!0}function Fx(n,e){e===void 0&amp;&amp;(e=QZ);var t,i=[],r,s=!1;function o(){for(var l=[],u=0;u&lt;arguments.length;u++)l[u]=arguments[u];return s&amp;&amp;t===this&amp;&amp;e(l,i)||(r=n.apply(this,l),s=!0,t=this,i=l),r}return o}var eJ=typeof performance==&quot;object&quot;&amp;&amp;typeof performance.now==&quot;function&quot;,o2=eJ?function(){return performance.now()}:function(){return Date.now()};function a2(n){cancelAnimationFrame(n.id)}function tJ(n,e){var t=o2();function i(){o2()-t&gt;=e?n.call(null):r.id=requestAnimationFrame(i)}var r={id:requestAnimationFrame(i)};return r}var zx=-1;function l2(n){if(n===void 0&amp;&amp;(n=!1),zx===-1||n){var e=document.createElement(&quot;div&quot;),t=e.style;t.width=&quot;50px&quot;,t.height=&quot;50px&quot;,t.overflow=&quot;scroll&quot;,document.body.appendChild(e),zx=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return zx}var Gu=null;function c2(n){if(n===void 0&amp;&amp;(n=!1),Gu===null||n){var e=document.createElement(&quot;div&quot;),t=e.style;t.width=&quot;50px&quot;,t.height=&quot;50px&quot;,t.overflow=&quot;scroll&quot;,t.direction=&quot;rtl&quot;;var i=document.createElement(&quot;div&quot;),r=i.style;return r.width=&quot;100px&quot;,r.height=&quot;100px&quot;,e.appendChild(i),document.body.appendChild(e),e.scrollLeft&gt;0?Gu=&quot;positive-descending&quot;:(e.scrollLeft=1,e.scrollLeft===0?Gu=&quot;negative&quot;:Gu=&quot;positive-ascending&quot;),document.body.removeChild(e),Gu}return Gu}var nJ=150,iJ=function(e,t){return e};function rJ(n){var e,t=n.getItemOffset,i=n.getEstimatedTotalSize,r=n.getItemSize,s=n.getOffsetForIndexAndAlignment,o=n.getStartIndexForOffset,l=n.getStopIndexForStartIndex,u=n.initInstanceProps,h=n.shouldResetStyleCacheOnItemSizeChange,f=n.validateProps;return e=function(p){ZZ(m,p);function m(v){var x;return x=p.call(this,v)||this,x._instanceProps=u(x.props,r2(x)),x._outerRef=void 0,x._resetIsScrollingTimeoutId=null,x.state={instance:r2(x),isScrolling:!1,scrollDirection:&quot;forward&quot;,scrollOffset:typeof x.props.initialScrollOffset==&quot;number&quot;?x.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},x._callOnItemsRendered=void 0,x._callOnItemsRendered=Fx(function(b,_,T,w){return x.props.onItemsRendered({overscanStartIndex:b,overscanStopIndex:_,visibleStartIndex:T,visibleStopIndex:w})}),x._callOnScroll=void 0,x._callOnScroll=Fx(function(b,_,T){return x.props.onScroll({scrollDirection:b,scrollOffset:_,scrollUpdateWasRequested:T})}),x._getItemStyle=void 0,x._getItemStyle=function(b){var _=x.props,T=_.direction,w=_.itemSize,E=_.layout,R=x._getItemStyleCache(h&amp;&amp;w,h&amp;&amp;E,h&amp;&amp;T),N;if(R.hasOwnProperty(b))N=R[b];else{var A=t(x.props,b,x._instanceProps),D=r(x.props,b,x._instanceProps),C=T===&quot;horizontal&quot;||E===&quot;horizontal&quot;,O=T===&quot;rtl&quot;,L=C?A:0;R[b]=N={position:&quot;absolute&quot;,left:O?void 0:L,right:O?L:void 0,top:C?0:A,height:C?&quot;100%&quot;:D,width:C?D:&quot;100%&quot;}}return N},x._getItemStyleCache=void 0,x._getItemStyleCache=Fx(function(b,_,T){return{}}),x._onScrollHorizontal=function(b){var _=b.currentTarget,T=_.clientWidth,w=_.scrollLeft,E=_.scrollWidth;x.setState(function(R){if(R.scrollOffset===w)return null;var N=x.props.direction,A=w;if(N===&quot;rtl&quot;)switch(c2()){case&quot;negative&quot;:A=-w;break;case&quot;positive-descending&quot;:A=E-T-w;break}return A=Math.max(0,Math.min(A,E-T)),{isScrolling:!0,scrollDirection:R.scrollOffset&lt;A?&quot;forward&quot;:&quot;backward&quot;,scrollOffset:A,scrollUpdateWasRequested:!1}},x._resetIsScrollingDebounced)},x._onScrollVertical=function(b){var _=b.currentTarget,T=_.clientHeight,w=_.scrollHeight,E=_.scrollTop;x.setState(function(R){if(R.scrollOffset===E)return null;var N=Math.max(0,Math.min(E,w-T));return{isScrolling:!0,scrollDirection:R.scrollOffset&lt;N?&quot;forward&quot;:&quot;backward&quot;,scrollOffset:N,scrollUpdateWasRequested:!1}},x._resetIsScrollingDebounced)},x._outerRefSetter=function(b){var _=x.props.outerRef;x._outerRef=b,typeof _==&quot;function&quot;?_(b):_!=null&amp;&amp;typeof _==&quot;object&quot;&amp;&amp;_.hasOwnProperty(&quot;current&quot;)&amp;&amp;(_.current=b)},x._resetIsScrollingDebounced=function(){x._resetIsScrollingTimeoutId!==null&amp;&amp;a2(x._resetIsScrollingTimeoutId),x._resetIsScrollingTimeoutId=tJ(x._resetIsScrolling,nJ)},x._resetIsScrolling=function(){x._resetIsScrollingTimeoutId=null,x.setState({isScrolling:!1},function(){x._getItemStyleCache(-1,null)})},x}m.getDerivedStateFromProps=function(x,b){return sJ(x,b),f(x),null};var g=m.prototype;return g.scrollTo=function(x){x=Math.max(0,x),this.setState(function(b){return b.scrollOffset===x?null:{scrollDirection:b.scrollOffset&lt;x?&quot;forward&quot;:&quot;backward&quot;,scrollOffset:x,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},g.scrollToItem=function(x,b){b===void 0&amp;&amp;(b=&quot;auto&quot;);var _=this.props,T=_.itemCount,w=_.layout,E=this.state.scrollOffset;x=Math.max(0,Math.min(x,T-1));var R=0;if(this._outerRef){var N=this._outerRef;w===&quot;vertical&quot;?R=N.scrollWidth&gt;N.clientWidth?l2():0:R=N.scrollHeight&gt;N.clientHeight?l2():0}this.scrollTo(s(this.props,x,b,E,this._instanceProps,R))},g.componentDidMount=function(){var x=this.props,b=x.direction,_=x.initialScrollOffset,T=x.layout;if(typeof _==&quot;number&quot;&amp;&amp;this._outerRef!=null){var w=this._outerRef;b===&quot;horizontal&quot;||T===&quot;horizontal&quot;?w.scrollLeft=_:w.scrollTop=_}this._callPropsCallbacks()},g.componentDidUpdate=function(){var x=this.props,b=x.direction,_=x.layout,T=this.state,w=T.scrollOffset,E=T.scrollUpdateWasRequested;if(E&amp;&amp;this._outerRef!=null){var R=this._outerRef;if(b===&quot;horizontal&quot;||_===&quot;horizontal&quot;)if(b===&quot;rtl&quot;)switch(c2()){case&quot;negative&quot;:R.scrollLeft=-w;break;case&quot;positive-ascending&quot;:R.scrollLeft=w;break;default:var N=R.clientWidth,A=R.scrollWidth;R.scrollLeft=A-N-w;break}else R.scrollLeft=w;else R.scrollTop=w}this._callPropsCallbacks()},g.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&amp;&amp;a2(this._resetIsScrollingTimeoutId)},g.render=function(){var x=this.props,b=x.children,_=x.className,T=x.direction,w=x.height,E=x.innerRef,R=x.innerElementType,N=x.innerTagName,A=x.itemCount,D=x.itemData,C=x.itemKey,O=C===void 0?iJ:C,L=x.layout,V=x.outerElementType,Z=x.outerTagName,z=x.style,K=x.useIsScrolling,I=x.width,j=this.state.isScrolling,G=T===&quot;horizontal&quot;||L===&quot;horizontal&quot;,ee=G?this._onScrollHorizontal:this._onScrollVertical,F=this._getRangeToRender(),ne=F[0],le=F[1],ce=[];if(A&gt;0)for(var ie=ne;ie&lt;=le;ie++)ce.push(re.createElement(b,{data:D,key:O(ie,D),index:ie,isScrolling:K?j:void 0,style:this._getItemStyle(ie)}));var oe=i(this.props,this._instanceProps);return re.createElement(V||Z||&quot;div&quot;,{className:_,onScroll:ee,ref:this._outerRefSetter,style:GS({position:&quot;relative&quot;,height:w,width:I,overflow:&quot;auto&quot;,WebkitOverflowScrolling:&quot;touch&quot;,willChange:&quot;transform&quot;,direction:T},z)},re.createElement(R||N||&quot;div&quot;,{children:ce,ref:E,style:{height:G?&quot;100%&quot;:oe,pointerEvents:j?&quot;none&quot;:void 0,width:G?oe:&quot;100%&quot;}}))},g._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered==&quot;function&quot;){var x=this.props.itemCount;if(x&gt;0){var b=this._getRangeToRender(),_=b[0],T=b[1],w=b[2],E=b[3];this._callOnItemsRendered(_,T,w,E)}}if(typeof this.props.onScroll==&quot;function&quot;){var R=this.state,N=R.scrollDirection,A=R.scrollOffset,D=R.scrollUpdateWasRequested;this._callOnScroll(N,A,D)}},g._getRangeToRender=function(){var x=this.props,b=x.itemCount,_=x.overscanCount,T=this.state,w=T.isScrolling,E=T.scrollDirection,R=T.scrollOffset;if(b===0)return[0,0,0,0];var N=o(this.props,R,this._instanceProps),A=l(this.props,N,R,this._instanceProps),D=!w||E===&quot;backward&quot;?Math.max(1,_):1,C=!w||E===&quot;forward&quot;?Math.max(1,_):1;return[Math.max(0,N-D),Math.max(0,Math.min(b-1,A+C)),N,A]},m}(re.PureComponent),e.defaultProps={direction:&quot;ltr&quot;,itemData:void 0,layout:&quot;vertical&quot;,overscanCount:2,useIsScrolling:!1},e}var sJ=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},oJ=rJ({getItemOffset:function(e,t){var i=e.itemSize;return t*i},getItemSize:function(e,t){var i=e.itemSize;return i},getEstimatedTotalSize:function(e){var t=e.itemCount,i=e.itemSize;return i*t},getOffsetForIndexAndAlignment:function(e,t,i,r,s,o){var l=e.direction,u=e.height,h=e.itemCount,f=e.itemSize,p=e.layout,m=e.width,g=l===&quot;horizontal&quot;||p===&quot;horizontal&quot;,v=g?m:u,x=Math.max(0,h*f-v),b=Math.min(x,t*f),_=Math.max(0,t*f-v+f+o);switch(i===&quot;smart&quot;&amp;&amp;(r&gt;=_-v&amp;&amp;r&lt;=b+v?i=&quot;auto&quot;:i=&quot;center&quot;),i){case&quot;start&quot;:return b;case&quot;end&quot;:return _;case&quot;center&quot;:{var T=Math.round(_+(b-_)/2);return T&lt;Math.ceil(v/2)?0:T&gt;x+Math.floor(v/2)?x:T}case&quot;auto&quot;:default:return r&gt;=_&amp;&amp;r&lt;=b?r:r&lt;_?_:b}},getStartIndexForOffset:function(e,t){var i=e.itemCount,r=e.itemSize;return Math.max(0,Math.min(i-1,Math.floor(t/r)))},getStopIndexForStartIndex:function(e,t,i){var r=e.direction,s=e.height,o=e.itemCount,l=e.itemSize,u=e.layout,h=e.width,f=r===&quot;horizontal&quot;||u===&quot;horizontal&quot;,p=t*l,m=f?h:s,g=Math.ceil((m+i-p)/l);return Math.max(0,Math.min(o-1,t+g-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function aJ(){var n,e;const t=ss(),r=EZ().cursor;if(!r||r.type!==&quot;line&quot;)return null;const s=t.indent,o=t.rowHeight*r.index+((e=(n=t.props.padding)!==null&amp;&amp;n!==void 0?n:t.props.paddingTop)!==null&amp;&amp;e!==void 0?e:0),l=s*r.level,u=t.renderCursor;return P.jsx(u,{top:o,left:l,indent:s})}var lJ=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;e.indexOf(i)&lt;0&amp;&amp;(t[i]=n[i]);if(n!=null&amp;&amp;typeof Object.getOwnPropertySymbols==&quot;function&quot;)for(var r=0,i=Object.getOwnPropertySymbols(n);r&lt;i.length;r++)e.indexOf(i[r])&lt;0&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i[r])&amp;&amp;(t[i[r]]=n[i[r]]);return t};const cJ=re.forwardRef(function(e,t){const{children:i}=e,r=lJ(e,[&quot;children&quot;]),s=ss();return P.jsxs(&quot;div&quot;,Object.assign({ref:t},r,{onClick:o=&gt;{o.currentTarget===o.target&amp;&amp;s.deselectAll()},children:[P.jsx(uJ,{}),i]}))}),uJ=()=&gt;{const n=ss();return P.jsx(&quot;div&quot;,{style:{height:n.visibleNodes.length*n.rowHeight,width:&quot;100%&quot;,position:&quot;absolute&quot;,left:&quot;0&quot;,right:&quot;0&quot;},children:P.jsx(aJ,{})})};var hJ=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&amp;&amp;e.indexOf(i)&lt;0&amp;&amp;(t[i]=n[i]);if(n!=null&amp;&amp;typeof Object.getOwnPropertySymbols==&quot;function&quot;)for(var r=0,i=Object.getOwnPropertySymbols(n);r&lt;i.length;r++)e.indexOf(i[r])&lt;0&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i[r])&amp;&amp;(t[i[r]]=n[i[r]]);return t};const fJ=re.forwardRef(function(e,t){var i,r,s,o,{style:l}=e,u=hJ(e,[&quot;style&quot;]);const h=ss(),f=(r=(i=h.props.padding)!==null&amp;&amp;i!==void 0?i:h.props.paddingTop)!==null&amp;&amp;r!==void 0?r:0,p=(o=(s=h.props.padding)!==null&amp;&amp;s!==void 0?s:h.props.paddingBottom)!==null&amp;&amp;o!==void 0?o:0;return P.jsx(&quot;div&quot;,Object.assign({ref:t,style:Object.assign(Object.assign({},l),{height:`${parseFloat(l.height)+f+p}px`})},u))});var XL=re.createContext({dragDropManager:void 0}),xs;(function(n){n.SOURCE=&quot;SOURCE&quot;,n.TARGET=&quot;TARGET&quot;})(xs||(xs={}));function Wt(n,e){for(var t=arguments.length,i=new Array(t&gt;2?t-2:0),r=2;r&lt;t;r++)i[r-2]=arguments[r];if(!n){var s;if(e===void 0)s=new Error(&quot;Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.&quot;);else{var o=0;s=new Error(e.replace(/%s/g,function(){return i[o++]})),s.name=&quot;Invariant Violation&quot;}throw s.framesToPop=1,s}}var o1=&quot;dnd-core/INIT_COORDS&quot;,s_=&quot;dnd-core/BEGIN_DRAG&quot;,a1=&quot;dnd-core/PUBLISH_DRAG_SOURCE&quot;,o_=&quot;dnd-core/HOVER&quot;,a_=&quot;dnd-core/DROP&quot;,l_=&quot;dnd-core/END_DRAG&quot;;function u2(n,e){return{type:o1,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}function Fg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?Fg=function(t){return typeof t}:Fg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},Fg(n)}function dJ(n,e,t){return e.split(&quot;.&quot;).reduce(function(i,r){return i&amp;&amp;i[r]?i[r]:t||null},n)}function pJ(n,e){return n.filter(function(t){return t!==e})}function qL(n){return Fg(n)===&quot;object&quot;}function mJ(n,e){var t=new Map,i=function(o){t.set(o,t.has(o)?t.get(o)+1:1)};n.forEach(i),e.forEach(i);var r=[];return t.forEach(function(s,o){s===1&amp;&amp;r.push(o)}),r}function gJ(n,e){return n.filter(function(t){return e.indexOf(t)&gt;-1})}var yJ={type:o1,payload:{clientOffset:null,sourceClientOffset:null}};function _J(n){return function(){var t=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:[],i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{publishSource:!0},r=i.publishSource,s=r===void 0?!0:r,o=i.clientOffset,l=i.getSourceClientOffset,u=n.getMonitor(),h=n.getRegistry();n.dispatch(u2(o)),vJ(t,u,h);var f=SJ(t,u);if(f===null){n.dispatch(yJ);return}var p=null;if(o){if(!l)throw new Error(&quot;getSourceClientOffset must be defined&quot;);bJ(l),p=l(f)}n.dispatch(u2(o,p));var m=h.getSource(f),g=m.beginDrag(u,f);if(g!=null){xJ(g),h.pinSource(f);var v=h.getSourceType(f);return{type:s_,payload:{itemType:v,item:g,sourceId:f,clientOffset:o||null,sourceClientOffset:p||null,isSourcePublic:!!s}}}}}function vJ(n,e,t){Wt(!e.isDragging(),&quot;Cannot call beginDrag while dragging.&quot;),n.forEach(function(i){Wt(t.getSource(i),&quot;Expected sourceIds to be registered.&quot;)})}function bJ(n){Wt(typeof n==&quot;function&quot;,&quot;When clientOffset is provided, getSourceClientOffset must be a function.&quot;)}function xJ(n){Wt(qL(n),&quot;Item must be an object.&quot;)}function SJ(n,e){for(var t=null,i=n.length-1;i&gt;=0;i--)if(e.canDragSource(n[i])){t=n[i];break}return t}function wJ(n){return function(){var t=n.getMonitor();if(t.isDragging())return{type:a1}}}function WS(n,e){return e===null?n===null:Array.isArray(n)?n.some(function(t){return t===e}):n===e}function EJ(n){return function(t){var i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{},r=i.clientOffset;TJ(t);var s=t.slice(0),o=n.getMonitor(),l=n.getRegistry();MJ(s,o,l);var u=o.getItemType();return AJ(s,l,u),CJ(s,o,l),{type:o_,payload:{targetIds:s,clientOffset:r||null}}}}function TJ(n){Wt(Array.isArray(n),&quot;Expected targetIds to be an array.&quot;)}function MJ(n,e,t){Wt(e.isDragging(),&quot;Cannot call hover while not dragging.&quot;),Wt(!e.didDrop(),&quot;Cannot call hover after drop.&quot;);for(var i=0;i&lt;n.length;i++){var r=n[i];Wt(n.lastIndexOf(r)===i,&quot;Expected targetIds to be unique in the passed array.&quot;);var s=t.getTarget(r);Wt(s,&quot;Expected targetIds to be registered.&quot;)}}function AJ(n,e,t){for(var i=n.length-1;i&gt;=0;i--){var r=n[i],s=e.getTargetType(r);WS(s,t)||n.splice(i,1)}}function CJ(n,e,t){n.forEach(function(i){var r=t.getTarget(i);r.hover(e,i)})}function h2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function f2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?h2(Object(t),!0).forEach(function(i){RJ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function RJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OJ(n){return function(){var t=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{},i=n.getMonitor(),r=n.getRegistry();DJ(i);var s=PJ(i);s.forEach(function(o,l){var u=NJ(o,l,r,i),h={type:a_,payload:{dropResult:f2(f2({},t),u)}};n.dispatch(h)})}}function DJ(n){Wt(n.isDragging(),&quot;Cannot call drop while not dragging.&quot;),Wt(!n.didDrop(),&quot;Cannot call drop twice during one drag operation.&quot;)}function NJ(n,e,t,i){var r=t.getTarget(n),s=r?r.drop(i,n):void 0;return IJ(s),typeof s&gt;&quot;u&quot;&amp;&amp;(s=e===0?{}:i.getDropResult()),s}function IJ(n){Wt(typeof n&gt;&quot;u&quot;||qL(n),&quot;Drop result must either be an object or undefined.&quot;)}function PJ(n){var e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function LJ(n){return function(){var t=n.getMonitor(),i=n.getRegistry();UJ(t);var r=t.getSourceId();if(r!=null){var s=i.getSource(r,!0);s.endDrag(t,r),i.unpinSource()}return{type:l_}}}function UJ(n){Wt(n.isDragging(),&quot;Cannot call endDrag while not dragging.&quot;)}function kJ(n){return{beginDrag:_J(n),publishDragSource:wJ(n),hover:EJ(n),drop:OJ(n),endDrag:LJ(n)}}function FJ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function zJ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function BJ(n,e,t){return e&amp;&amp;zJ(n.prototype,e),n}function Yf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var HJ=function(){function n(e,t){var i=this;FJ(this,n),Yf(this,&quot;store&quot;,void 0),Yf(this,&quot;monitor&quot;,void 0),Yf(this,&quot;backend&quot;,void 0),Yf(this,&quot;isSetUp&quot;,!1),Yf(this,&quot;handleRefCountChange&quot;,function(){var r=i.store.getState().refCount&gt;0;i.backend&amp;&amp;(r&amp;&amp;!i.isSetUp?(i.backend.setup(),i.isSetUp=!0):!r&amp;&amp;i.isSetUp&amp;&amp;(i.backend.teardown(),i.isSetUp=!1))}),this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}return BJ(n,[{key:&quot;receiveBackend&quot;,value:function(t){this.backend=t}},{key:&quot;getMonitor&quot;,value:function(){return this.monitor}},{key:&quot;getBackend&quot;,value:function(){return this.backend}},{key:&quot;getRegistry&quot;,value:function(){return this.monitor.registry}},{key:&quot;getActions&quot;,value:function(){var t=this,i=this.store.dispatch;function r(o){return function(){for(var l=arguments.length,u=new Array(l),h=0;h&lt;l;h++)u[h]=arguments[h];var f=o.apply(t,u);typeof f&lt;&quot;u&quot;&amp;&amp;i(f)}}var s=kJ(this);return Object.keys(s).reduce(function(o,l){var u=s[l];return o[l]=r(u),o},{})}},{key:&quot;dispatch&quot;,value:function(t){this.store.dispatch(t)}}]),n}();function ys(n){return&quot;Minified Redux error #&quot;+n+&quot;; visit https://redux.js.org/Errors?code=&quot;+n+&quot; for the full message or use the non-minified dev environment for full errors. &quot;}var d2=function(){return typeof Symbol==&quot;function&quot;&amp;&amp;Symbol.observable||&quot;@@observable&quot;}(),p2=function(){return Math.random().toString(36).substring(7).split(&quot;&quot;).join(&quot;.&quot;)},m2={INIT:&quot;@@redux/INIT&quot;+p2(),REPLACE:&quot;@@redux/REPLACE&quot;+p2()};function VJ(n){if(typeof n!=&quot;object&quot;||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function YL(n,e,t){var i;if(typeof e==&quot;function&quot;&amp;&amp;typeof t==&quot;function&quot;||typeof t==&quot;function&quot;&amp;&amp;typeof arguments[3]==&quot;function&quot;)throw new Error(ys(0));if(typeof e==&quot;function&quot;&amp;&amp;typeof t&gt;&quot;u&quot;&amp;&amp;(t=e,e=void 0),typeof t&lt;&quot;u&quot;){if(typeof t!=&quot;function&quot;)throw new Error(ys(1));return t(YL)(n,e)}if(typeof n!=&quot;function&quot;)throw new Error(ys(2));var r=n,s=e,o=[],l=o,u=!1;function h(){l===o&amp;&amp;(l=o.slice())}function f(){if(u)throw new Error(ys(3));return s}function p(x){if(typeof x!=&quot;function&quot;)throw new Error(ys(4));if(u)throw new Error(ys(5));var b=!0;return h(),l.push(x),function(){if(b){if(u)throw new Error(ys(6));b=!1,h();var T=l.indexOf(x);l.splice(T,1),o=null}}}function m(x){if(!VJ(x))throw new Error(ys(7));if(typeof x.type&gt;&quot;u&quot;)throw new Error(ys(8));if(u)throw new Error(ys(9));try{u=!0,s=r(s,x)}finally{u=!1}for(var b=o=l,_=0;_&lt;b.length;_++){var T=b[_];T()}return x}function g(x){if(typeof x!=&quot;function&quot;)throw new Error(ys(10));r=x,m({type:m2.REPLACE})}function v(){var x,b=p;return x={subscribe:function(T){if(typeof T!=&quot;object&quot;||T===null)throw new Error(ys(11));function w(){T.next&amp;&amp;T.next(f())}w();var E=b(w);return{unsubscribe:E}}},x[d2]=function(){return this},x}return m({type:m2.INIT}),i={dispatch:m,subscribe:p,getState:f,replaceReducer:g},i[d2]=v,i}var GJ=function(e,t){return e===t};function jJ(n,e){return!n&amp;&amp;!e?!0:!n||!e?!1:n.x===e.x&amp;&amp;n.y===e.y}function WJ(n,e){var t=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:GJ;if(n.length!==e.length)return!1;for(var i=0;i&lt;n.length;++i)if(!t(n[i],e[i]))return!1;return!0}function g2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function y2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?g2(Object(t),!0).forEach(function(i){XJ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):g2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function XJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var _2={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function qJ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:_2,e=arguments.length&gt;1?arguments[1]:void 0,t=e.payload;switch(e.type){case o1:case s_:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case o_:return jJ(n.clientOffset,t.clientOffset)?n:y2(y2({},n),{},{clientOffset:t.clientOffset});case l_:case a_:return _2;default:return n}}var l1=&quot;dnd-core/ADD_SOURCE&quot;,c1=&quot;dnd-core/ADD_TARGET&quot;,u1=&quot;dnd-core/REMOVE_SOURCE&quot;,c_=&quot;dnd-core/REMOVE_TARGET&quot;;function YJ(n){return{type:l1,payload:{sourceId:n}}}function KJ(n){return{type:c1,payload:{targetId:n}}}function $J(n){return{type:u1,payload:{sourceId:n}}}function ZJ(n){return{type:c_,payload:{targetId:n}}}function v2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function _s(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v2(Object(t),!0).forEach(function(i){JJ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function JJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var QJ={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function eQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:QJ,e=arguments.length&gt;1?arguments[1]:void 0,t=e.payload;switch(e.type){case s_:return _s(_s({},n),{},{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case a1:return _s(_s({},n),{},{isSourcePublic:!0});case o_:return _s(_s({},n),{},{targetIds:t.targetIds});case c_:return n.targetIds.indexOf(t.targetId)===-1?n:_s(_s({},n),{},{targetIds:pJ(n.targetIds,t.targetId)});case a_:return _s(_s({},n),{},{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case l_:return _s(_s({},n),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function tQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:0,e=arguments.length&gt;1?arguments[1]:void 0;switch(e.type){case l1:case c1:return n+1;case u1:case c_:return n-1;default:return n}}var K0=[],h1=[];K0.__IS_NONE__=!0;h1.__IS_ALL__=!0;function nQ(n,e){if(n===K0)return!1;if(n===h1||typeof e&gt;&quot;u&quot;)return!0;var t=gJ(e,n);return t.length&gt;0}function iQ(){var n=arguments.length&gt;1?arguments[1]:void 0;switch(n.type){case o_:break;case l1:case c1:case c_:case u1:return K0;case s_:case a1:case l_:case a_:default:return h1}var e=n.payload,t=e.targetIds,i=t===void 0?[]:t,r=e.prevTargetIds,s=r===void 0?[]:r,o=mJ(i,s),l=o.length&gt;0||!WJ(i,s);if(!l)return K0;var u=s[s.length-1],h=i[i.length-1];return u!==h&amp;&amp;(u&amp;&amp;o.push(u),h&amp;&amp;o.push(h)),o}function rQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:0;return n+1}function b2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function x2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b2(Object(t),!0).forEach(function(i){sQ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function sQ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function oQ(){var n=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:{},e=arguments.length&gt;1?arguments[1]:void 0;return{dirtyHandlerIds:iQ(n.dirtyHandlerIds,{type:e.type,payload:x2(x2({},e.payload),{},{prevTargetIds:dJ(n,&quot;dragOperation.targetIds&quot;,[])})}),dragOffset:qJ(n.dragOffset,e),refCount:tQ(n.refCount,e),dragOperation:eQ(n.dragOperation,e),stateId:rQ(n.stateId)}}function aQ(n,e){return{x:n.x+e.x,y:n.y+e.y}}function KL(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lQ(n){var e=n.clientOffset,t=n.initialClientOffset,i=n.initialSourceClientOffset;return!e||!t||!i?null:KL(aQ(e,i),t)}function cQ(n){var e=n.clientOffset,t=n.initialClientOffset;return!e||!t?null:KL(e,t)}function uQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function hQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function fQ(n,e,t){return e&amp;&amp;hQ(n.prototype,e),n}function S2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var dQ=function(){function n(e,t){uQ(this,n),S2(this,&quot;store&quot;,void 0),S2(this,&quot;registry&quot;,void 0),this.store=e,this.registry=t}return fQ(n,[{key:&quot;subscribeToStateChange&quot;,value:function(t){var i=this,r=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},s=r.handlerIds;Wt(typeof t==&quot;function&quot;,&quot;listener must be a function.&quot;),Wt(typeof s&gt;&quot;u&quot;||Array.isArray(s),&quot;handlerIds, when specified, must be an array of strings.&quot;);var o=this.store.getState().stateId,l=function(){var h=i.store.getState(),f=h.stateId;try{var p=f===o||f===o+1&amp;&amp;!nQ(h.dirtyHandlerIds,s);p||t()}finally{o=f}};return this.store.subscribe(l)}},{key:&quot;subscribeToOffsetChange&quot;,value:function(t){var i=this;Wt(typeof t==&quot;function&quot;,&quot;listener must be a function.&quot;);var r=this.store.getState().dragOffset,s=function(){var l=i.store.getState().dragOffset;l!==r&amp;&amp;(r=l,t())};return this.store.subscribe(s)}},{key:&quot;canDragSource&quot;,value:function(t){if(!t)return!1;var i=this.registry.getSource(t);return Wt(i,&quot;Expected to find a valid source. sourceId=&quot;.concat(t)),this.isDragging()?!1:i.canDrag(this,t)}},{key:&quot;canDropOnTarget&quot;,value:function(t){if(!t)return!1;var i=this.registry.getTarget(t);if(Wt(i,&quot;Expected to find a valid target. targetId=&quot;.concat(t)),!this.isDragging()||this.didDrop())return!1;var r=this.registry.getTargetType(t),s=this.getItemType();return WS(r,s)&amp;&amp;i.canDrop(this,t)}},{key:&quot;isDragging&quot;,value:function(){return!!this.getItemType()}},{key:&quot;isDraggingSource&quot;,value:function(t){if(!t)return!1;var i=this.registry.getSource(t,!0);if(Wt(i,&quot;Expected to find a valid source. sourceId=&quot;.concat(t)),!this.isDragging()||!this.isSourcePublic())return!1;var r=this.registry.getSourceType(t),s=this.getItemType();return r!==s?!1:i.isDragging(this,t)}},{key:&quot;isOverTarget&quot;,value:function(t){var i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!t)return!1;var r=i.shallow;if(!this.isDragging())return!1;var s=this.registry.getTargetType(t),o=this.getItemType();if(o&amp;&amp;!WS(s,o))return!1;var l=this.getTargetIds();if(!l.length)return!1;var u=l.indexOf(t);return r?u===l.length-1:u&gt;-1}},{key:&quot;getItemType&quot;,value:function(){return this.store.getState().dragOperation.itemType}},{key:&quot;getItem&quot;,value:function(){return this.store.getState().dragOperation.item}},{key:&quot;getSourceId&quot;,value:function(){return this.store.getState().dragOperation.sourceId}},{key:&quot;getTargetIds&quot;,value:function(){return this.store.getState().dragOperation.targetIds}},{key:&quot;getDropResult&quot;,value:function(){return this.store.getState().dragOperation.dropResult}},{key:&quot;didDrop&quot;,value:function(){return this.store.getState().dragOperation.didDrop}},{key:&quot;isSourcePublic&quot;,value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:&quot;getInitialClientOffset&quot;,value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:&quot;getInitialSourceClientOffset&quot;,value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:&quot;getClientOffset&quot;,value:function(){return this.store.getState().dragOffset.clientOffset}},{key:&quot;getSourceClientOffset&quot;,value:function(){return lQ(this.store.getState().dragOffset)}},{key:&quot;getDifferenceFromInitialOffset&quot;,value:function(){return cQ(this.store.getState().dragOffset)}}]),n}(),pQ=0;function mQ(){return pQ++}function zg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?zg=function(t){return typeof t}:zg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},zg(n)}function gQ(n){Wt(typeof n.canDrag==&quot;function&quot;,&quot;Expected canDrag to be a function.&quot;),Wt(typeof n.beginDrag==&quot;function&quot;,&quot;Expected beginDrag to be a function.&quot;),Wt(typeof n.endDrag==&quot;function&quot;,&quot;Expected endDrag to be a function.&quot;)}function yQ(n){Wt(typeof n.canDrop==&quot;function&quot;,&quot;Expected canDrop to be a function.&quot;),Wt(typeof n.hover==&quot;function&quot;,&quot;Expected hover to be a function.&quot;),Wt(typeof n.drop==&quot;function&quot;,&quot;Expected beginDrag to be a function.&quot;)}function XS(n,e){if(e&amp;&amp;Array.isArray(n)){n.forEach(function(t){return XS(t,!1)});return}Wt(typeof n==&quot;string&quot;||zg(n)===&quot;symbol&quot;,e?&quot;Type can only be a string, a symbol, or an array of either.&quot;:&quot;Type can only be a string or a symbol.&quot;)}const w2=typeof global&lt;&quot;u&quot;?global:self,$L=w2.MutationObserver||w2.WebKitMutationObserver;function ZL(n){return function(){const t=setTimeout(r,0),i=setInterval(r,50);function r(){clearTimeout(t),clearInterval(i),n()}}}function _Q(n){let e=1;const t=new $L(n),i=document.createTextNode(&quot;&quot;);return t.observe(i,{characterData:!0}),function(){e=-e,i.data=e}}const vQ=typeof $L==&quot;function&quot;?_Q:ZL;class bQ{enqueueTask(e){const{queue:t,requestFlush:i}=this;t.length||(i(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=&gt;{const{queue:e}=this;for(;this.index&lt;e.length;){const t=this.index;if(this.index++,e[t].call(),this.index&gt;this.capacity){for(let i=0,r=e.length-this.index;i&lt;r;i++)e[i]=e[i+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=&gt;{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=vQ(this.flush),this.requestErrorThrow=ZL(()=&gt;{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class xQ{call(){try{this.task&amp;&amp;this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class SQ{create(e){const t=this.freeTasks,i=t.length?t.pop():new xQ(this.onError,r=&gt;t[t.length]=r);return i.task=e,i}constructor(e){this.onError=e,this.freeTasks=[]}}const JL=new bQ,wQ=new SQ(JL.registerPendingError);function EQ(n){JL.enqueueTask(wQ.create(n))}function TQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function MQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function AQ(n,e,t){return e&amp;&amp;MQ(n.prototype,e),n}function ju(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CQ(n,e){return NQ(n)||DQ(n,e)||OQ(n,e)||RQ()}function RQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OQ(n,e){if(n){if(typeof n==&quot;string&quot;)return E2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E2(n,e)}}function E2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function DQ(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function NQ(n){if(Array.isArray(n))return n}function IQ(n){var e=mQ().toString();switch(n){case xs.SOURCE:return&quot;S&quot;.concat(e);case xs.TARGET:return&quot;T&quot;.concat(e);default:throw new Error(&quot;Unknown Handler Role: &quot;.concat(n))}}function T2(n){switch(n[0]){case&quot;S&quot;:return xs.SOURCE;case&quot;T&quot;:return xs.TARGET;default:Wt(!1,&quot;Cannot parse handler ID: &quot;.concat(n))}}function M2(n,e){var t=n.entries(),i=!1;do{var r=t.next(),s=r.done,o=CQ(r.value,2),l=o[1];if(l===e)return!0;i=!!s}while(!i);return!1}var PQ=function(){function n(e){TQ(this,n),ju(this,&quot;types&quot;,new Map),ju(this,&quot;dragSources&quot;,new Map),ju(this,&quot;dropTargets&quot;,new Map),ju(this,&quot;pinnedSourceId&quot;,null),ju(this,&quot;pinnedSource&quot;,null),ju(this,&quot;store&quot;,void 0),this.store=e}return AQ(n,[{key:&quot;addSource&quot;,value:function(t,i){XS(t),gQ(i);var r=this.addHandler(xs.SOURCE,t,i);return this.store.dispatch(YJ(r)),r}},{key:&quot;addTarget&quot;,value:function(t,i){XS(t,!0),yQ(i);var r=this.addHandler(xs.TARGET,t,i);return this.store.dispatch(KJ(r)),r}},{key:&quot;containsHandler&quot;,value:function(t){return M2(this.dragSources,t)||M2(this.dropTargets,t)}},{key:&quot;getSource&quot;,value:function(t){var i=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:!1;Wt(this.isSourceId(t),&quot;Expected a valid source ID.&quot;);var r=i&amp;&amp;t===this.pinnedSourceId,s=r?this.pinnedSource:this.dragSources.get(t);return s}},{key:&quot;getTarget&quot;,value:function(t){return Wt(this.isTargetId(t),&quot;Expected a valid target ID.&quot;),this.dropTargets.get(t)}},{key:&quot;getSourceType&quot;,value:function(t){return Wt(this.isSourceId(t),&quot;Expected a valid source ID.&quot;),this.types.get(t)}},{key:&quot;getTargetType&quot;,value:function(t){return Wt(this.isTargetId(t),&quot;Expected a valid target ID.&quot;),this.types.get(t)}},{key:&quot;isSourceId&quot;,value:function(t){var i=T2(t);return i===xs.SOURCE}},{key:&quot;isTargetId&quot;,value:function(t){var i=T2(t);return i===xs.TARGET}},{key:&quot;removeSource&quot;,value:function(t){var i=this;Wt(this.getSource(t),&quot;Expected an existing source.&quot;),this.store.dispatch($J(t)),EQ(function(){i.dragSources.delete(t),i.types.delete(t)})}},{key:&quot;removeTarget&quot;,value:function(t){Wt(this.getTarget(t),&quot;Expected an existing target.&quot;),this.store.dispatch(ZJ(t)),this.dropTargets.delete(t),this.types.delete(t)}},{key:&quot;pinSource&quot;,value:function(t){var i=this.getSource(t);Wt(i,&quot;Expected an existing source.&quot;),this.pinnedSourceId=t,this.pinnedSource=i}},{key:&quot;unpinSource&quot;,value:function(){Wt(this.pinnedSource,&quot;No source is pinned at the time.&quot;),this.pinnedSourceId=null,this.pinnedSource=null}},{key:&quot;addHandler&quot;,value:function(t,i,r){var s=IQ(t);return this.types.set(s,i),t===xs.SOURCE?this.dragSources.set(s,r):t===xs.TARGET&amp;&amp;this.dropTargets.set(s,r),s}}]),n}();function LQ(n){var e=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:void 0,t=arguments.length&gt;2&amp;&amp;arguments[2]!==void 0?arguments[2]:{},i=arguments.length&gt;3&amp;&amp;arguments[3]!==void 0?arguments[3]:!1,r=UQ(i),s=new dQ(r,new PQ(r)),o=new HJ(r,s),l=n(o,e,t);return o.receiveBackend(l),o}function UQ(n){var e=typeof window&lt;&quot;u&quot;&amp;&amp;window.__REDUX_DEVTOOLS_EXTENSION__;return YL(oQ,n&amp;&amp;e&amp;&amp;e({name:&quot;dnd-core&quot;,instanceId:&quot;dnd-core&quot;}))}var kQ=[&quot;children&quot;];function FQ(n,e){return VQ(n)||HQ(n,e)||BQ(n,e)||zQ()}function zQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BQ(n,e){if(n){if(typeof n==&quot;string&quot;)return A2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A2(n,e)}}function A2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function HQ(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function VQ(n){if(Array.isArray(n))return n}function GQ(n,e){if(n==null)return{};var t=jQ(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r&lt;s.length;r++)i=s[r],!(e.indexOf(i)&gt;=0)&amp;&amp;Object.prototype.propertyIsEnumerable.call(n,i)&amp;&amp;(t[i]=n[i])}return t}function jQ(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s&lt;i.length;s++)r=i[s],!(e.indexOf(r)&gt;=0)&amp;&amp;(t[r]=n[r]);return t}var C2=0,Bg=Symbol.for(&quot;__REACT_DND_CONTEXT_INSTANCE__&quot;),WQ=re.memo(function(e){var t=e.children,i=GQ(e,kQ),r=XQ(i),s=FQ(r,2),o=s[0],l=s[1];return re.useEffect(function(){if(l){var u=QL();return++C2,function(){--C2===0&amp;&amp;(u[Bg]=null)}}},[]),P.jsx(XL.Provider,Object.assign({value:o},{children:t}),void 0)});function XQ(n){if(&quot;manager&quot;in n){var e={dragDropManager:n.manager};return[e,!1]}var t=qQ(n.backend,n.context,n.options,n.debugMode),i=!n.context;return[t,i]}function qQ(n){var e=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:QL(),t=arguments.length&gt;2?arguments[2]:void 0,i=arguments.length&gt;3?arguments[3]:void 0,r=e;return r[Bg]||(r[Bg]={dragDropManager:LQ(n,e,t,i)}),r[Bg]}function QL(){return typeof global&lt;&quot;u&quot;?global:window}function YQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function KQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function $Q(n,e,t){return e&amp;&amp;KQ(n.prototype,e),n}function R2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Bx=!1,Hx=!1,ZQ=function(){function n(e){YQ(this,n),R2(this,&quot;internalMonitor&quot;,void 0),R2(this,&quot;sourceId&quot;,null),this.internalMonitor=e.getMonitor()}return $Q(n,[{key:&quot;receiveHandlerId&quot;,value:function(t){this.sourceId=t}},{key:&quot;getHandlerId&quot;,value:function(){return this.sourceId}},{key:&quot;canDrag&quot;,value:function(){Wt(!Bx,&quot;You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor&quot;);try{return Bx=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Bx=!1}}},{key:&quot;isDragging&quot;,value:function(){if(!this.sourceId)return!1;Wt(!Hx,&quot;You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor&quot;);try{return Hx=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Hx=!1}}},{key:&quot;subscribeToStateChange&quot;,value:function(t,i){return this.internalMonitor.subscribeToStateChange(t,i)}},{key:&quot;isDraggingSource&quot;,value:function(t){return this.internalMonitor.isDraggingSource(t)}},{key:&quot;isOverTarget&quot;,value:function(t,i){return this.internalMonitor.isOverTarget(t,i)}},{key:&quot;getTargetIds&quot;,value:function(){return this.internalMonitor.getTargetIds()}},{key:&quot;isSourcePublic&quot;,value:function(){return this.internalMonitor.isSourcePublic()}},{key:&quot;getSourceId&quot;,value:function(){return this.internalMonitor.getSourceId()}},{key:&quot;subscribeToOffsetChange&quot;,value:function(t){return this.internalMonitor.subscribeToOffsetChange(t)}},{key:&quot;canDragSource&quot;,value:function(t){return this.internalMonitor.canDragSource(t)}},{key:&quot;canDropOnTarget&quot;,value:function(t){return this.internalMonitor.canDropOnTarget(t)}},{key:&quot;getItemType&quot;,value:function(){return this.internalMonitor.getItemType()}},{key:&quot;getItem&quot;,value:function(){return this.internalMonitor.getItem()}},{key:&quot;getDropResult&quot;,value:function(){return this.internalMonitor.getDropResult()}},{key:&quot;didDrop&quot;,value:function(){return this.internalMonitor.didDrop()}},{key:&quot;getInitialClientOffset&quot;,value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:&quot;getInitialSourceClientOffset&quot;,value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:&quot;getSourceClientOffset&quot;,value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:&quot;getClientOffset&quot;,value:function(){return this.internalMonitor.getClientOffset()}},{key:&quot;getDifferenceFromInitialOffset&quot;,value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),n}();function JQ(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function QQ(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function eee(n,e,t){return e&amp;&amp;QQ(n.prototype,e),n}function O2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Vx=!1,tee=function(){function n(e){JQ(this,n),O2(this,&quot;internalMonitor&quot;,void 0),O2(this,&quot;targetId&quot;,null),this.internalMonitor=e.getMonitor()}return eee(n,[{key:&quot;receiveHandlerId&quot;,value:function(t){this.targetId=t}},{key:&quot;getHandlerId&quot;,value:function(){return this.targetId}},{key:&quot;subscribeToStateChange&quot;,value:function(t,i){return this.internalMonitor.subscribeToStateChange(t,i)}},{key:&quot;canDrop&quot;,value:function(){if(!this.targetId)return!1;Wt(!Vx,&quot;You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor&quot;);try{return Vx=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Vx=!1}}},{key:&quot;isOver&quot;,value:function(t){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,t):!1}},{key:&quot;getItemType&quot;,value:function(){return this.internalMonitor.getItemType()}},{key:&quot;getItem&quot;,value:function(){return this.internalMonitor.getItem()}},{key:&quot;getDropResult&quot;,value:function(){return this.internalMonitor.getDropResult()}},{key:&quot;didDrop&quot;,value:function(){return this.internalMonitor.didDrop()}},{key:&quot;getInitialClientOffset&quot;,value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:&quot;getInitialSourceClientOffset&quot;,value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:&quot;getSourceClientOffset&quot;,value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:&quot;getClientOffset&quot;,value:function(){return this.internalMonitor.getClientOffset()}},{key:&quot;getDifferenceFromInitialOffset&quot;,value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),n}();function nee(n){if(typeof n.type!=&quot;string&quot;){var e=n.type.displayName||n.type.name||&quot;the component&quot;;throw new Error(&quot;Only native element nodes can now be passed to React DnD connectors.&quot;+&quot;You can either wrap &quot;.concat(e,&quot; into a &lt;div&gt;, or turn it into a &quot;)+&quot;drag source or a drop target itself.&quot;)}}function iee(n){return function(){var e=arguments.length&gt;0&amp;&amp;arguments[0]!==void 0?arguments[0]:null,t=arguments.length&gt;1&amp;&amp;arguments[1]!==void 0?arguments[1]:null;if(!re.isValidElement(e)){var i=e;return n(i,t),i}var r=e;nee(r);var s=t?function(o){return n(o,t)}:n;return ree(r,s)}}function e3(n){var e={};return Object.keys(n).forEach(function(t){var i=n[t];if(t.endsWith(&quot;Ref&quot;))e[t]=n[t];else{var r=iee(i);e[t]=function(){return r}}}),e}function D2(n,e){typeof n==&quot;function&quot;?n(e):n.current=e}function ree(n,e){var t=n.ref;return Wt(typeof t!=&quot;string&quot;,&quot;Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a &lt;span&gt; or &lt;div&gt;. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs&quot;),t?re.cloneElement(n,{ref:function(r){D2(t,r),D2(e,r)}}):re.cloneElement(n,{ref:e})}function Hg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?Hg=function(t){return typeof t}:Hg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},Hg(n)}function qS(n){return n!==null&amp;&amp;Hg(n)===&quot;object&quot;&amp;&amp;Object.prototype.hasOwnProperty.call(n,&quot;current&quot;)}function YS(n,e,t,i){var r=void 0;if(r!==void 0)return!!r;if(n===e)return!0;if(typeof n!=&quot;object&quot;||!n||typeof e!=&quot;object&quot;||!e)return!1;var s=Object.keys(n),o=Object.keys(e);if(s.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(e),u=0;u&lt;s.length;u++){var h=s[u];if(!l(h))return!1;var f=n[h],p=e[h];if(r=void 0,r===!1||r===void 0&amp;&amp;f!==p)return!1}return!0}function see(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function oee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function aee(n,e,t){return e&amp;&amp;oee(n.prototype,e),n}function ur(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var lee=function(){function n(e){var t=this;see(this,n),ur(this,&quot;hooks&quot;,e3({dragSource:function(r,s){t.clearDragSource(),t.dragSourceOptions=s||null,qS(r)?t.dragSourceRef=r:t.dragSourceNode=r,t.reconnectDragSource()},dragPreview:function(r,s){t.clearDragPreview(),t.dragPreviewOptions=s||null,qS(r)?t.dragPreviewRef=r:t.dragPreviewNode=r,t.reconnectDragPreview()}})),ur(this,&quot;handlerId&quot;,null),ur(this,&quot;dragSourceRef&quot;,null),ur(this,&quot;dragSourceNode&quot;,void 0),ur(this,&quot;dragSourceOptionsInternal&quot;,null),ur(this,&quot;dragSourceUnsubscribe&quot;,void 0),ur(this,&quot;dragPreviewRef&quot;,null),ur(this,&quot;dragPreviewNode&quot;,void 0),ur(this,&quot;dragPreviewOptionsInternal&quot;,null),ur(this,&quot;dragPreviewUnsubscribe&quot;,void 0),ur(this,&quot;lastConnectedHandlerId&quot;,null),ur(this,&quot;lastConnectedDragSource&quot;,null),ur(this,&quot;lastConnectedDragSourceOptions&quot;,null),ur(this,&quot;lastConnectedDragPreview&quot;,null),ur(this,&quot;lastConnectedDragPreviewOptions&quot;,null),ur(this,&quot;backend&quot;,void 0),this.backend=e}return aee(n,[{key:&quot;receiveHandlerId&quot;,value:function(t){this.handlerId!==t&amp;&amp;(this.handlerId=t,this.reconnect())}},{key:&quot;connectTarget&quot;,get:function(){return this.dragSource}},{key:&quot;dragSourceOptions&quot;,get:function(){return this.dragSourceOptionsInternal},set:function(t){this.dragSourceOptionsInternal=t}},{key:&quot;dragPreviewOptions&quot;,get:function(){return this.dragPreviewOptionsInternal},set:function(t){this.dragPreviewOptionsInternal=t}},{key:&quot;reconnect&quot;,value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:&quot;reconnectDragSource&quot;,value:function(){var t=this.dragSource,i=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(i&amp;&amp;this.disconnectDragSource(),!!this.handlerId){if(!t){this.lastConnectedDragSource=t;return}i&amp;&amp;(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions))}}},{key:&quot;reconnectDragPreview&quot;,value:function(){var t=this.dragPreview,i=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(i&amp;&amp;this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}i&amp;&amp;(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}},{key:&quot;didHandlerIdChange&quot;,value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:&quot;didConnectedDragSourceChange&quot;,value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:&quot;didConnectedDragPreviewChange&quot;,value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:&quot;didDragSourceOptionsChange&quot;,value:function(){return!YS(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:&quot;didDragPreviewOptionsChange&quot;,value:function(){return!YS(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:&quot;disconnectDragSource&quot;,value:function(){this.dragSourceUnsubscribe&amp;&amp;(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:&quot;disconnectDragPreview&quot;,value:function(){this.dragPreviewUnsubscribe&amp;&amp;(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:&quot;dragSource&quot;,get:function(){return this.dragSourceNode||this.dragSourceRef&amp;&amp;this.dragSourceRef.current}},{key:&quot;dragPreview&quot;,get:function(){return this.dragPreviewNode||this.dragPreviewRef&amp;&amp;this.dragPreviewRef.current}},{key:&quot;clearDragSource&quot;,value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:&quot;clearDragPreview&quot;,value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),n}();function cee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function uee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function hee(n,e,t){return e&amp;&amp;uee(n.prototype,e),n}function po(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var fee=function(){function n(e){var t=this;cee(this,n),po(this,&quot;hooks&quot;,e3({dropTarget:function(r,s){t.clearDropTarget(),t.dropTargetOptions=s,qS(r)?t.dropTargetRef=r:t.dropTargetNode=r,t.reconnect()}})),po(this,&quot;handlerId&quot;,null),po(this,&quot;dropTargetRef&quot;,null),po(this,&quot;dropTargetNode&quot;,void 0),po(this,&quot;dropTargetOptionsInternal&quot;,null),po(this,&quot;unsubscribeDropTarget&quot;,void 0),po(this,&quot;lastConnectedHandlerId&quot;,null),po(this,&quot;lastConnectedDropTarget&quot;,null),po(this,&quot;lastConnectedDropTargetOptions&quot;,null),po(this,&quot;backend&quot;,void 0),this.backend=e}return hee(n,[{key:&quot;connectTarget&quot;,get:function(){return this.dropTarget}},{key:&quot;reconnect&quot;,value:function(){var t=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();t&amp;&amp;this.disconnectDropTarget();var i=this.dropTarget;if(this.handlerId){if(!i){this.lastConnectedDropTarget=i;return}t&amp;&amp;(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=i,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,i,this.dropTargetOptions))}}},{key:&quot;receiveHandlerId&quot;,value:function(t){t!==this.handlerId&amp;&amp;(this.handlerId=t,this.reconnect())}},{key:&quot;dropTargetOptions&quot;,get:function(){return this.dropTargetOptionsInternal},set:function(t){this.dropTargetOptionsInternal=t}},{key:&quot;didHandlerIdChange&quot;,value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:&quot;didDropTargetChange&quot;,value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:&quot;didOptionsChange&quot;,value:function(){return!YS(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:&quot;disconnectDropTarget&quot;,value:function(){this.unsubscribeDropTarget&amp;&amp;(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:&quot;dropTarget&quot;,get:function(){return this.dropTargetNode||this.dropTargetRef&amp;&amp;this.dropTargetRef.current}},{key:&quot;clearDropTarget&quot;,value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),n}();function dee(n,e,t){var i=t.getRegistry(),r=i.addTarget(n,e);return[r,function(){return i.removeTarget(r)}]}function pee(n,e,t){var i=t.getRegistry(),r=i.addSource(n,e);return[r,function(){return i.removeSource(r)}]}var Pc=typeof window&lt;&quot;u&quot;?re.useLayoutEffect:re.useEffect;function Vg(n){&quot;@babel/helpers - typeof&quot;;return typeof Symbol==&quot;function&quot;&amp;&amp;typeof Symbol.iterator==&quot;symbol&quot;?Vg=function(t){return typeof t}:Vg=function(t){return t&amp;&amp;typeof Symbol==&quot;function&quot;&amp;&amp;t.constructor===Symbol&amp;&amp;t!==Symbol.prototype?&quot;symbol&quot;:typeof t},Vg(n)}function mee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function gee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function yee(n,e,t){return e&amp;&amp;gee(n.prototype,e),n}function Gx(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var _ee=function(){function n(e,t,i){mee(this,n),Gx(this,&quot;spec&quot;,void 0),Gx(this,&quot;monitor&quot;,void 0),Gx(this,&quot;connector&quot;,void 0),this.spec=e,this.monitor=t,this.connector=i}return yee(n,[{key:&quot;beginDrag&quot;,value:function(){var t,i=this.spec,r=this.monitor,s=null;return Vg(i.item)===&quot;object&quot;?s=i.item:typeof i.item==&quot;function&quot;?s=i.item(r):s={},(t=s)!==null&amp;&amp;t!==void 0?t:null}},{key:&quot;canDrag&quot;,value:function(){var t=this.spec,i=this.monitor;return typeof t.canDrag==&quot;boolean&quot;?t.canDrag:typeof t.canDrag==&quot;function&quot;?t.canDrag(i):!0}},{key:&quot;isDragging&quot;,value:function(t,i){var r=this.spec,s=this.monitor,o=r.isDragging;return o?o(s):i===t.getSourceId()}},{key:&quot;endDrag&quot;,value:function(){var t=this.spec,i=this.monitor,r=this.connector,s=t.end;s&amp;&amp;s(i.getItem(),i),r.reconnect()}}]),n}();function vee(n,e,t){var i=re.useMemo(function(){return new _ee(n,e,t)},[e,t]);return re.useEffect(function(){i.spec=n},[n]),i}function Hc(){var n=re.useContext(XL),e=n.dragDropManager;return Wt(e!=null,&quot;Expected drag drop context&quot;),e}function bee(n){return re.useMemo(function(){var e=n.type;return Wt(e!=null,&quot;spec.type must be defined&quot;),e},[n])}function xee(n,e){return Tee(n)||Eee(n,e)||wee(n,e)||See()}function See(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wee(n,e){if(n){if(typeof n==&quot;string&quot;)return N2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N2(n,e)}}function N2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function Eee(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function Tee(n){if(Array.isArray(n))return n}function Mee(n,e,t){var i=Hc(),r=vee(n,e,t),s=bee(n);Pc(function(){if(s!=null){var l=pee(s,r,i),u=xee(l,2),h=u[0],f=u[1];return e.receiveHandlerId(h),t.receiveHandlerId(h),f}},[i,e,t,r,s])}function Aee(n){return Dee(n)||Oee(n)||Ree(n)||Cee()}function Cee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ree(n,e){if(n){if(typeof n==&quot;string&quot;)return KS(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KS(n,e)}}function Oee(n){if(typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]!=null||n[&quot;@@iterator&quot;]!=null)return Array.from(n)}function Dee(n){if(Array.isArray(n))return KS(n)}function KS(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function t3(n,e){var t=Aee(e||[]);return e==null&amp;&amp;typeof n!=&quot;function&quot;&amp;&amp;t.push(n),re.useMemo(function(){return typeof n==&quot;function&quot;?n():n},t)}function Nee(){var n=Hc();return re.useMemo(function(){return new ZQ(n)},[n])}function Iee(n,e){var t=Hc(),i=re.useMemo(function(){return new lee(t.getBackend())},[t]);return Pc(function(){return i.dragSourceOptions=n||null,i.reconnect(),function(){return i.disconnectDragSource()}},[i,n]),Pc(function(){return i.dragPreviewOptions=e||null,i.reconnect(),function(){return i.disconnectDragPreview()}},[i,e]),i}var jx,I2;function Pee(){return I2||(I2=1,jx=function n(e,t){if(e===t)return!0;if(e&amp;&amp;t&amp;&amp;typeof e==&quot;object&quot;&amp;&amp;typeof t==&quot;object&quot;){if(e.constructor!==t.constructor)return!1;var i,r,s;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(r=i;r--!==0;)if(!n(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&amp;&amp;e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=i;r--!==0;){var o=s[r];if(!n(e[o],t[o]))return!1}return!0}return e!==e&amp;&amp;t!==t}),jx}var Lee=Pee();const Uee=Z0(Lee);function kee(n,e){return Hee(n)||Bee(n,e)||zee(n,e)||Fee()}function Fee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zee(n,e){if(n){if(typeof n==&quot;string&quot;)return P2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P2(n,e)}}function P2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function Bee(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function Hee(n){if(Array.isArray(n))return n}function n3(n,e,t){var i=re.useState(function(){return e(n)}),r=kee(i,2),s=r[0],o=r[1],l=re.useCallback(function(){var u=e(n);Uee(s,u)||(o(u),t&amp;&amp;t())},[s,n,t]);return Pc(l),[s,l]}function Vee(n,e){return Xee(n)||Wee(n,e)||jee(n,e)||Gee()}function Gee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jee(n,e){if(n){if(typeof n==&quot;string&quot;)return L2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L2(n,e)}}function L2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function Wee(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function Xee(n){if(Array.isArray(n))return n}function qee(n,e,t){var i=n3(n,e,t),r=Vee(i,2),s=r[0],o=r[1];return Pc(function(){var u=n.getHandlerId();if(u!=null)return n.subscribeToStateChange(o,{handlerIds:[u]})},[n,o]),s}function i3(n,e,t){return qee(e,n||function(){return{}},function(){return t.reconnect()})}function Yee(n){return re.useMemo(function(){return n.hooks.dragSource()},[n])}function Kee(n){return re.useMemo(function(){return n.hooks.dragPreview()},[n])}function $ee(n,e){var t=t3(n,e);Wt(!t.begin,&quot;useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)&quot;);var i=Nee(),r=Iee(t.options,t.previewOptions);return Mee(t,i,r),[i3(t.collect,i,r),Yee(r),Kee(r)]}function Zee(n){var e=n.accept;return re.useMemo(function(){return Wt(n.accept!=null,&quot;accept must be defined&quot;),Array.isArray(e)?e:[e]},[e])}function Jee(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Qee(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function ete(n,e,t){return e&amp;&amp;Qee(n.prototype,e),n}function U2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var tte=function(){function n(e,t){Jee(this,n),U2(this,&quot;spec&quot;,void 0),U2(this,&quot;monitor&quot;,void 0),this.spec=e,this.monitor=t}return ete(n,[{key:&quot;canDrop&quot;,value:function(){var t=this.spec,i=this.monitor;return t.canDrop?t.canDrop(i.getItem(),i):!0}},{key:&quot;hover&quot;,value:function(){var t=this.spec,i=this.monitor;t.hover&amp;&amp;t.hover(i.getItem(),i)}},{key:&quot;drop&quot;,value:function(){var t=this.spec,i=this.monitor;if(t.drop)return t.drop(i.getItem(),i)}}]),n}();function nte(n,e){var t=re.useMemo(function(){return new tte(n,e)},[e]);return re.useEffect(function(){t.spec=n},[n]),t}function ite(n,e){return ate(n)||ote(n,e)||ste(n,e)||rte()}function rte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ste(n,e){if(n){if(typeof n==&quot;string&quot;)return k2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k2(n,e)}}function k2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function ote(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function ate(n){if(Array.isArray(n))return n}function lte(n,e,t){var i=Hc(),r=nte(n,e),s=Zee(n);Pc(function(){var l=dee(s,r,i),u=ite(l,2),h=u[0],f=u[1];return e.receiveHandlerId(h),t.receiveHandlerId(h),f},[i,e,r,t,s.map(function(o){return o.toString()}).join(&quot;|&quot;)])}function cte(){var n=Hc();return re.useMemo(function(){return new tee(n)},[n])}function ute(n){var e=Hc(),t=re.useMemo(function(){return new fee(e.getBackend())},[e]);return Pc(function(){return t.dropTargetOptions=n||null,t.reconnect(),function(){return t.disconnectDropTarget()}},[n]),t}function hte(n){return re.useMemo(function(){return n.hooks.dropTarget()},[n])}function r3(n,e){var t=t3(n,e),i=cte(),r=ute(t.options);return lte(t,i,r),[i3(t.collect,i,r),hte(r)]}function fte(n,e){return gte(n)||mte(n,e)||pte(n,e)||dte()}function dte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pte(n,e){if(n){if(typeof n==&quot;string&quot;)return F2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t===&quot;Object&quot;&amp;&amp;n.constructor&amp;&amp;(t=n.constructor.name),t===&quot;Map&quot;||t===&quot;Set&quot;)return Array.from(n);if(t===&quot;Arguments&quot;||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return F2(n,e)}}function F2(n,e){(e==null||e&gt;n.length)&amp;&amp;(e=n.length);for(var t=0,i=new Array(e);t&lt;e;t++)i[t]=n[t];return i}function mte(n,e){var t=n==null?null:typeof Symbol&lt;&quot;u&quot;&amp;&amp;n[Symbol.iterator]||n[&quot;@@iterator&quot;];if(t!=null){var i=[],r=!0,s=!1,o,l;try{for(t=t.call(n);!(r=(o=t.next()).done)&amp;&amp;(i.push(o.value),!(e&amp;&amp;i.length===e));r=!0);}catch(u){s=!0,l=u}finally{try{!r&amp;&amp;t.return!=null&amp;&amp;t.return()}finally{if(s)throw l}}return i}}function gte(n){if(Array.isArray(n))return n}function yte(n){var e=Hc(),t=e.getMonitor(),i=n3(t,n),r=fte(i,2),s=r[0],o=r[1];return re.useEffect(function(){return t.subscribeToOffsetChange(o)}),re.useEffect(function(){return t.subscribeToStateChange(o)}),s}function s3(n){var e=null,t=function(){return e==null&amp;&amp;(e=n()),e};return t}function _te(n,e){return n.filter(function(t){return t!==e})}function vte(n,e){var t=new Set,i=function(o){return t.add(o)};n.forEach(i),e.forEach(i);var r=[];return t.forEach(function(s){return r.push(s)}),r}function bte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function xte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Ste(n,e,t){return e&amp;&amp;xte(n.prototype,e),n}function z2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var wte=function(){function n(e){bte(this,n),z2(this,&quot;entered&quot;,[]),z2(this,&quot;isNodeInDocument&quot;,void 0),this.isNodeInDocument=e}return Ste(n,[{key:&quot;enter&quot;,value:function(t){var i=this,r=this.entered.length,s=function(l){return i.isNodeInDocument(l)&amp;&amp;(!l.contains||l.contains(t))};return this.entered=vte(this.entered.filter(s),[t]),r===0&amp;&amp;this.entered.length&gt;0}},{key:&quot;leave&quot;,value:function(t){var i=this.entered.length;return this.entered=_te(this.entered.filter(this.isNodeInDocument),t),i&gt;0&amp;&amp;this.entered.length===0}},{key:&quot;reset&quot;,value:function(){this.entered=[]}}]),n}(),Ete=s3(function(){return/firefox/i.test(navigator.userAgent)}),o3=s3(function(){return!!window.safari});function Tte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Mte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Ate(n,e,t){return e&amp;&amp;Mte(n.prototype,e),n}function Kf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var B2=function(){function n(e,t){Tte(this,n),Kf(this,&quot;xs&quot;,void 0),Kf(this,&quot;ys&quot;,void 0),Kf(this,&quot;c1s&quot;,void 0),Kf(this,&quot;c2s&quot;,void 0),Kf(this,&quot;c3s&quot;,void 0);for(var i=e.length,r=[],s=0;s&lt;i;s++)r.push(s);r.sort(function(D,C){return e[D]&lt;e[C]?-1:1});for(var o=[],l=[],u,h,f=0;f&lt;i-1;f++)u=e[f+1]-e[f],h=t[f+1]-t[f],o.push(u),l.push(h/u);for(var p=[l[0]],m=0;m&lt;o.length-1;m++){var g=l[m],v=l[m+1];if(g*v&lt;=0)p.push(0);else{u=o[m];var x=o[m+1],b=u+x;p.push(3*b/((b+x)/g+(b+u)/v))}}p.push(l[l.length-1]);for(var _=[],T=[],w,E=0;E&lt;p.length-1;E++){w=l[E];var R=p[E],N=1/o[E],A=R+p[E+1]-w-w;_.push((w-R-A)*N),T.push(A*N*N)}this.xs=e,this.ys=t,this.c1s=p,this.c2s=_,this.c3s=T}return Ate(n,[{key:&quot;interpolate&quot;,value:function(t){var i=this.xs,r=this.ys,s=this.c1s,o=this.c2s,l=this.c3s,u=i.length-1;if(t===i[u])return r[u];for(var h=0,f=l.length-1,p;h&lt;=f;){p=Math.floor(.5*(h+f));var m=i[p];if(m&lt;t)h=p+1;else if(m&gt;t)f=p-1;else return r[p]}u=Math.max(0,f);var g=t-i[u],v=g*g;return r[u]+s[u]*g+o[u]*v+l[u]*g*v}}]),n}(),Cte=1;function a3(n){var e=n.nodeType===Cte?n:n.parentElement;if(!e)return null;var t=e.getBoundingClientRect(),i=t.top,r=t.left;return{x:r,y:i}}function Eg(n){return{x:n.clientX,y:n.clientY}}function Rte(n){var e;return n.nodeName===&quot;IMG&quot;&amp;&amp;(Ete()||!((e=document.documentElement)!==null&amp;&amp;e!==void 0&amp;&amp;e.contains(n)))}function Ote(n,e,t,i){var r=n?e.width:t,s=n?e.height:i;return o3()&amp;&amp;n&amp;&amp;(s/=window.devicePixelRatio,r/=window.devicePixelRatio),{dragPreviewWidth:r,dragPreviewHeight:s}}function Dte(n,e,t,i,r){var s=Rte(e),o=s?n:e,l=a3(o),u={x:t.x-l.x,y:t.y-l.y},h=n.offsetWidth,f=n.offsetHeight,p=i.anchorX,m=i.anchorY,g=Ote(s,e,h,f),v=g.dragPreviewWidth,x=g.dragPreviewHeight,b=function(){var A=new B2([0,.5,1],[u.y,u.y/f*x,u.y+x-f]),D=A.interpolate(m);return o3()&amp;&amp;s&amp;&amp;(D+=(window.devicePixelRatio-1)*x),D},_=function(){var A=new B2([0,.5,1],[u.x,u.x/h*v,u.x+v-h]);return A.interpolate(p)},T=r.offsetX,w=r.offsetY,E=T===0||T,R=w===0||w;return{x:E?T:_(),y:R?w:b()}}var l3=&quot;__NATIVE_FILE__&quot;,c3=&quot;__NATIVE_URL__&quot;,u3=&quot;__NATIVE_TEXT__&quot;,h3=&quot;__NATIVE_HTML__&quot;;const H2=Object.freeze(Object.defineProperty({__proto__:null,FILE:l3,HTML:h3,TEXT:u3,URL:c3},Symbol.toStringTag,{value:&quot;Module&quot;}));function Wx(n,e,t){var i=e.reduce(function(r,s){return r||n.getData(s)},&quot;&quot;);return i??t}var Wu;function Tg(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var $S=(Wu={},Tg(Wu,l3,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items},dataTransfer:function(e){return e}},matchesTypes:[&quot;Files&quot;]}),Tg(Wu,h3,{exposeProperties:{html:function(e,t){return Wx(e,t,&quot;&quot;)},dataTransfer:function(e){return e}},matchesTypes:[&quot;Html&quot;,&quot;text/html&quot;]}),Tg(Wu,c3,{exposeProperties:{urls:function(e,t){return Wx(e,t,&quot;&quot;).split(`
`)},dataTransfer:function(e){return e}},matchesTypes:[&quot;Url&quot;,&quot;text/uri-list&quot;]}),Tg(Wu,u3,{exposeProperties:{text:function(e,t){return Wx(e,t,&quot;&quot;)},dataTransfer:function(e){return e}},matchesTypes:[&quot;Text&quot;,&quot;text/plain&quot;]}),Wu);function Nte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Ite(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Pte(n,e,t){return e&amp;&amp;Ite(n.prototype,e),n}function V2(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Lte=function(){function n(e){Nte(this,n),V2(this,&quot;item&quot;,void 0),V2(this,&quot;config&quot;,void 0),this.config=e,this.item={},this.initializeExposedProperties()}return Pte(n,[{key:&quot;initializeExposedProperties&quot;,value:function(){var t=this;Object.keys(this.config.exposeProperties).forEach(function(i){Object.defineProperty(t.item,i,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn&#x27;t allow reading &quot;`.concat(i,&#x27;&quot; until the drop event.&#x27;)),null}})})}},{key:&quot;loadDataTransfer&quot;,value:function(t){var i=this;if(t){var r={};Object.keys(this.config.exposeProperties).forEach(function(s){r[s]={value:i.config.exposeProperties[s](t,i.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,r)}}},{key:&quot;canDrag&quot;,value:function(){return!0}},{key:&quot;beginDrag&quot;,value:function(){return this.item}},{key:&quot;isDragging&quot;,value:function(t,i){return i===t.getSourceId()}},{key:&quot;endDrag&quot;,value:function(){}}]),n}();function Ute(n,e){var t=new Lte($S[n]);return t.loadDataTransfer(e),t}function Xx(n){if(!n)return null;var e=Array.prototype.slice.call(n.types||[]);return Object.keys($S).filter(function(t){var i=$S[t].matchesTypes;return i.some(function(r){return e.indexOf(r)&gt;-1})})[0]||null}function kte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Fte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function zte(n,e,t){return e&amp;&amp;Fte(n.prototype,e),n}function qx(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Bte=function(){function n(e,t){kte(this,n),qx(this,&quot;ownerDocument&quot;,null),qx(this,&quot;globalContext&quot;,void 0),qx(this,&quot;optionsArgs&quot;,void 0),this.globalContext=e,this.optionsArgs=t}return zte(n,[{key:&quot;window&quot;,get:function(){if(this.globalContext)return this.globalContext;if(typeof window&lt;&quot;u&quot;)return window}},{key:&quot;document&quot;,get:function(){var t;return(t=this.globalContext)!==null&amp;&amp;t!==void 0&amp;&amp;t.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:&quot;rootElement&quot;,get:function(){var t;return((t=this.optionsArgs)===null||t===void 0?void 0:t.rootElement)||this.window}}]),n}();function G2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&amp;&amp;(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function j2(n){for(var e=1;e&lt;arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G2(Object(t),!0).forEach(function(i){ln(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Hte(n,e){if(!(n instanceof e))throw new TypeError(&quot;Cannot call a class as a function&quot;)}function Vte(n,e){for(var t=0;t&lt;e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,&quot;value&quot;in i&amp;&amp;(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Gte(n,e,t){return e&amp;&amp;Vte(n.prototype,e),n}function ln(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var jte=function(){function n(e,t,i){var r=this;Hte(this,n),ln(this,&quot;options&quot;,void 0),ln(this,&quot;actions&quot;,void 0),ln(this,&quot;monitor&quot;,void 0),ln(this,&quot;registry&quot;,void 0),ln(this,&quot;enterLeaveCounter&quot;,void 0),ln(this,&quot;sourcePreviewNodes&quot;,new Map),ln(this,&quot;sourcePreviewNodeOptions&quot;,new Map),ln(this,&quot;sourceNodes&quot;,new Map),ln(this,&quot;sourceNodeOptions&quot;,new Map),ln(this,&quot;dragStartSourceIds&quot;,null),ln(this,&quot;dropTargetIds&quot;,[]),ln(this,&quot;dragEnterTargetIds&quot;,[]),ln(this,&quot;currentNativeSource&quot;,null),ln(this,&quot;currentNativeHandle&quot;,null),ln(this,&quot;currentDragSourceNode&quot;,null),ln(this,&quot;altKeyPressed&quot;,!1),ln(this,&quot;mouseMoveTimeoutTimer&quot;,null),ln(this,&quot;asyncEndDragFrameId&quot;,null),ln(this,&quot;dragOverTargetIds&quot;,null),ln(this,&quot;lastClientOffset&quot;,null),ln(this,&quot;hoverRafId&quot;,null),ln(this,&quot;getSourceClientOffset&quot;,function(s){var o=r.sourceNodes.get(s);return o&amp;&amp;a3(o)||null}),ln(this,&quot;endDragNativeItem&quot;,function(){r.isDraggingNativeItem()&amp;&amp;(r.actions.endDrag(),r.currentNativeHandle&amp;&amp;r.registry.removeSource(r.currentNativeHandle),r.currentNativeHandle=null,r.currentNativeSource=null)}),ln(this,&quot;isNodeInDocument&quot;,function(s){return!!(s&amp;&amp;r.document&amp;&amp;r.document.body&amp;&amp;r.document.body.contains(s))}),ln(this,&quot;endDragIfSourceWasRemovedFromDOM&quot;,function(){var s=r.currentDragSourceNode;s==null||r.isNodeInDocument(s)||r.clearCurrentDragSourceNode()&amp;&amp;r.monitor.isDragging()&amp;&amp;r.actions.endDrag()}),ln(this,&quot;handleTopDragStartCapture&quot;,function(){r.clearCurrentDragSourceNode(),r.dragStartSourceIds=[]}),ln(this,&quot;handleTopDragStart&quot;,function(s){if(!s.defaultPrevented){var o=r.dragStartSourceIds;r.dragStartSourceIds=null;var l=Eg(s);r.monitor.isDragging()&amp;&amp;r.actions.endDrag(),r.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:r.getSourceClientOffset,clientOffset:l});var u=s.dataTransfer,h=Xx(u);if(r.monitor.isDragging()){if(u&amp;&amp;typeof u.setDragImage==&quot;function&quot;){var f=r.monitor.getSourceId(),p=r.sourceNodes.get(f),m=r.sourcePreviewNodes.get(f)||p;if(m){var g=r.getCurrentSourcePreviewNodeOptions(),v=g.anchorX,x=g.anchorY,b=g.offsetX,_=g.offsetY,T={anchorX:v,anchorY:x},w={offsetX:b,offsetY:_},E=Dte(p,m,l,T,w);u.setDragImage(m,E.x,E.y)}}try{u==null||u.setData(&quot;application/json&quot;,{})}catch{}r.setCurrentDragSourceNode(s.target);var R=r.getCurrentSourcePreviewNodeOptions(),N=R.captureDraggingState;N?r.actions.publishDragSource():setTimeout(function(){return r.actions.publishDragSource()},0)}else if(h)r.beginDragNativeItem(h);else{if(u&amp;&amp;!u.types&amp;&amp;(s.target&amp;&amp;!s.target.hasAttribute||!s.target.hasAttribute(&quot;draggable&quot;)))return;s.preventDefault()}}}),ln(this,&quot;handleTopDragEndCapture&quot;,function(){r.clearCurrentDragSourceNode()&amp;&amp;r.monitor.isDragging()&amp;&amp;r.actions.endDrag()}),ln(this,&quot;handleTopDragEnterCapture&quot;,function(s){r.dragEnterTargetIds=[];var o=r.enterLeaveCounter.enter(s.target);if(!(!o||r.monitor.isDragging())){var l=s.dataTransfer,u=Xx(l);u&amp;&amp;r.beginDragNativeItem(u,l)}}),ln(this,&quot;handleTopDragEnter&quot;,function(s){var o=r.dragEnterTargetIds;if(r.dragEnterTargetIds=[],!!r.monitor.isDragging()){r.altKeyPressed=s.altKey,o.length&gt;0&amp;&amp;r.actions.hover(o,{clientOffset:Eg(s)});var l=o.some(function(u){return r.monitor.canDropOnTarget(u)});l&amp;&amp;(s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=r.getCurrentDropEffect()))}}),ln(this,&quot;handleTopDragOverCapture&quot;,function(){r.dragOverTargetIds=[]}),ln(this,&quot;handleTopDragOver&quot;,function(s){var o=r.dragOverTargetIds;if(r.dragOverTargetIds=[],!r.monitor.isDragging()){s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=&quot;none&quot;);return}r.altKeyPressed=s.altKey,r.lastClientOffset=Eg(s),r.hoverRafId===null&amp;&amp;typeof requestAnimationFrame&lt;&quot;u&quot;&amp;&amp;(r.hoverRafId=requestAnimationFrame(function(){r.monitor.isDragging()&amp;&amp;r.actions.hover(o||[],{clientOffset:r.lastClientOffset}),r.hoverRafId=null}));var l=(o||[]).some(function(u){return r.monitor.canDropOnTarget(u)});l?(s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=r.getCurrentDropEffect())):r.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&amp;&amp;(s.dataTransfer.dropEffect=&quot;none&quot;))}),ln(this,&quot;handleTopDragLeaveCapture&quot;,function(s){r.isDraggingNativeItem()&amp;&amp;s.preventDefault();var o=r.enterLeaveCounter.leave(s.target);o&amp;&amp;r.isDraggingNativeItem()&amp;&amp;setTimeout(function(){return r.endDragNativeItem()},0)}),ln(this,&quot;handleTopDropCapture&quot;,function(s){if(r.dropTargetIds=[],r.isDraggingNativeItem()){var o;s.preventDefault(),(o=r.currentNativeSource)===null||o===void 0||o.loadDataTransfer(s.dataTransfer)}else Xx(s.dataTransfer)&amp;&amp;s.preventDefault();r.enterLeaveCounter.reset()}),ln(this,&quot;handleTopDrop&quot;,function(s){var o=r.dropTargetIds;r.dropTargetIds=[],r.actions.hover(o,{clientOffset:Eg(s)}),r.actions.drop({dropEffect:r.getCurrentDropEffect()}),r.isDraggingNativeItem()?r.endDragNativeItem():r.monitor.isDragging()&amp;&amp;r.actions.endDrag()}),ln(this,&quot;handleSelectStart&quot;,function(s){var o=s.target;typeof o.dragDrop==&quot;function&quot;&amp;&amp;(o.tagName===&quot;INPUT&quot;||o.tagName===&quot;SELECT&quot;||o.tagName===&quot;TEXTAREA&quot;||o.isContentEditable||(s.preventDefault(),o.dragDrop()))}),this.options=new Bte(t,i),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new wte(this.isNodeInDocument)}return Gte(n,[{key:&quot;profile&quot;,value:function(){var t,i;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((t=this.dragStartSourceIds)===null||t===void 0?void 0:t.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((i=this.dragOverTargetIds)===null||i===void 0?void 0:i.length)||0}}},{key:&quot;window&quot;,get:function(){return this.options.window}},{key:&quot;document&quot;,get:function(){return this.options.document}},{key:&quot;rootElement&quot;,get:function(){return this.options.rootElement}},{key:&quot;setup&quot;,value:function(){var t=this.rootElement;if(t!==void 0){if(t.__isReactDndBackendSetUp)throw new Error(&quot;Cannot have two HTML5 backends at the same time.&quot;);t.__isReactDndBackendSetUp=!0,this.addEventListeners(t)}}},{key:&quot;teardown&quot;,value:function(){var t=this.rootElement;if(t!==void 0&amp;&amp;(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var i;(i=this.window)===null||i===void 0||i.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:&quot;connectDragPreview&quot;,value:function(t,i,r){var s=this;return this.sourcePreviewNodeOptions.set(t,r),this.sourcePreviewNodes.set(t,i),function(){s.sourcePreviewNodes.delete(t),s.sourcePreviewNodeOptions.delete(t)}}},{key:&quot;connectDragSource&quot;,value:function(t,i,r){var s=this;this.sourceNodes.set(t,i),this.sourceNodeOptions.set(t,r);var o=function(h){return s.handleDragStart(h,t)},l=function(h){return s.handleSelectStart(h)};return i.setAttribute(&quot;draggable&quot;,&quot;true&quot;),i.addEventListener(&quot;dragstart&quot;,o),i.addEventListener(&quot;selectstart&quot;,l),function(){s.sourceNodes.delete(t),s.sourceNodeOptions.delete(t),i.removeEventListener(&quot;dragstart&quot;,o),i.removeEventListener(&quot;selectstart&quot;,l),i.setAttribute(&quot;draggable&quot;,&quot;false&quot;)}}},{key:&quot;connectDropTarget&quot;,value:function(t,i){var r=this,s=function(h){return r.handleDragEnter(h,t)},o=function(h){return r.handleDragOver(h,t)},l=function(h){return r.handleDrop(h,t)};return i.addEventListener(&quot;dragenter&quot;,s),i.addEventListener(&quot;dragover&quot;,o),i.addEventListener(&quot;drop&quot;,l),function(){i.removeEventListener(&quot;dragenter&quot;,s),i.removeEventListener(&quot;dragover&quot;,o),i.removeEventListener(&quot;drop&quot;,l)}}},{key:&quot;addEventListeners&quot;,value:function(t){t.addEventListener&amp;&amp;(t.addEventListener(&quot;dragstart&quot;,this.handleTopDragStart),t.addEventListener(&quot;dragstart&quot;,this.handleTopDragStartCapture,!0),t.addEventListener(&quot;dragend&quot;,this.handleTopDragEndCapture,!0),t.addEventListener(&quot;dragenter&quot;,this.handleTopDragEnter),t.addEventListener(&quot;dragenter&quot;,this.handleTopDragEnterCapture,!0),t.addEventListener(&quot;dragleave&quot;,this.handleTopDragLeaveCapture,!0),t.addEventListener(&quot;dragover&quot;,this.handleTopDragOver),t.addEventListener(&quot;dragover&quot;,this.handleTopDragOverCapture,!0),t.addEventListener(&quot;drop&quot;,this.handleTopDrop),t.addEventListener(&quot;drop&quot;,this.handleTopDropCapture,!0))}},{key:&quot;removeEventListeners&quot;,value:function(t){t.removeEventListener&amp;&amp;(t.removeEventListener(&quot;dragstart&quot;,this.handleTopDragStart),t.removeEventListener(&quot;dragstart&quot;,this.handleTopDragStartCapture,!0),t.removeEventListener(&quot;dragend&quot;,this.handleTopDragEndCapture,!0),t.removeEventListener(&quot;dragenter&quot;,this.handleTopDragEnter),t.removeEventListener(&quot;dragenter&quot;,this.handleTopDragEnterCapture,!0),t.removeEventListener(&quot;dragleave&quot;,this.handleTopDragLeaveCapture,!0),t.removeEventListener(&quot;dragover&quot;,this.handleTopDragOver),t.removeEventListener(&quot;dragover&quot;,this.handleTopDragOverCapture,!0),t.removeEventListener(&quot;drop&quot;,this.handleTopDrop),t.removeEventListener(&quot;drop&quot;,this.handleTopDropCapture,!0))}},{key:&quot;getCurrentSourceNodeOptions&quot;,value:function(){var t=this.monitor.getSourceId(),i=this.sourceNodeOptions.get(t);return j2({dropEffect:this.altKeyPressed?&quot;copy&quot;:&quot;move&quot;},i||{})}},{key:&quot;getCurrentDropEffect&quot;,value:function(){return this.isDraggingNativeItem()?&quot;copy&quot;:this.getCurrentSourceNodeOptions().dropEffect}},{key:&quot;getCurrentSourcePreviewNodeOptions&quot;,value:function(){var t=this.monitor.getSourceId(),i=this.sourcePreviewNodeOptions.get(t);return j2({anchorX:.5,anchorY:.5,captureDraggingState:!1},i||{})}},{key:&quot;isDraggingNativeItem&quot;,value:function(){var t=this.monitor.getItemType();return Object.keys(H2).some(function(i){return H2[i]===t})}},{key:&quot;beginDragNativeItem&quot;,value:function(t,i){this.clearCurrentDragSourceNode(),this.currentNativeSource=Ute(t,i),this.currentNativeHandle=this.registry.addSource(t,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:&quot;setCurrentDragSourceNode&quot;,value:function(t){var i=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=t;var r=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var s;return(s=i.rootElement)===null||s===void 0?void 0:s.addEventListener(&quot;mousemove&quot;,i.endDragIfSourceWasRemovedFromDOM,!0)},r)}},{key:&quot;clearCurrentDragSourceNode&quot;,value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var t;(t=this.window)===null||t===void 0||t.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener(&quot;mousemove&quot;,this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:&quot;handleDragStart&quot;,value:function(t,i){t.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(i))}},{key:&quot;handleDragEnter&quot;,value:function(t,i){this.dragEnterTargetIds.unshift(i)}},{key:&quot;handleDragOver&quot;,value:function(t,i){this.dragOverTargetIds===null&amp;&amp;(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(i)}},{key:&quot;handleDrop&quot;,value:function(t,i){this.dropTargetIds.unshift(i)}}]),n}(),Mg;function Wte(){return Mg||(Mg=new Image,Mg.src=&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot;),Mg}var Xte=function(e,t,i){return new jte(e,t,i)};function qte(n){const e=ss(),t=e.selectedIds,[i,r,s]=$ee(()=&gt;({canDrag:()=&gt;n.isDraggable,type:&quot;NODE&quot;,item:()=&gt;{const o=e.isSelected(n.id)?Array.from(t):[n.id];return e.dispatch(xh.dragStart(n.id,o)),{id:n.id,dragIds:o}},end:()=&gt;{e.hideCursor(),e.dispatch(xh.dragEnd())}}),[t,n]);return re.useEffect(()=&gt;{s(Wte())},[s]),r}function Yte(n,e){const t=n.getBoundingClientRect(),i=e.x-Math.round(t.x),r=e.y-Math.round(t.y),s=t.height,o=r&lt;s/2,l=!o,u=s/4,h=r&gt;u&amp;&amp;r&lt;s-u;return{x:i,inTopHalf:o,inBottomHalf:l,inMiddle:h,atTop:!h&amp;&amp;o,atBottom:!h&amp;&amp;l}}function Kte(n,e,t,i){return n?n.isInternal?i.atTop?[e,n]:i.inMiddle?[n,n]:[n,t]:i.inTopHalf?[e,n]:[n,t]:[e,null]}function Ag(n,e){return{parentId:n||null,index:e}}function Xu(n,e){return{type:&quot;line&quot;,index:n,level:e}}function $te(n){return{type:&quot;highlight&quot;,id:n}}function Yx(n,e){var t;let i=n;for(;i.parent&amp;&amp;i.level&gt;e;)i=i.parent;const r=((t=i.parent)===null||t===void 0?void 0:t.id)||null,s=UL(i)+1;return{parentId:r,index:s}}function f3(n){var e;const t=Yte(n.element,n.offset),i=n.indent,r=Math.round(Math.max(0,t.x-i)/i),{node:s,nextNode:o,prevNode:l}=n,[u,h]=Kte(s,l,o,t);if(s&amp;&amp;s.isInternal&amp;&amp;t.inMiddle)return{drop:Ag(s.id,null),cursor:$te(s.id)};if(!u)return{drop:Ag((e=h==null?void 0:h.parent)===null||e===void 0?void 0:e.id,0),cursor:Xu(0,0)};if(NL(u)){const f=kg(r,(h==null?void 0:h.level)||0,u.level);return{drop:Yx(u,f),cursor:Xu(u.rowIndex+1,f)}}if(IL(u)){const f=kg(r,(h==null?void 0:h.level)||0,u.level);return{drop:Yx(u,f),cursor:Xu(u.rowIndex+1,f)}}if(PL(u)){const f=kg(r,0,u.level+1);return f&gt;u.level?{drop:Ag(u.id,0),cursor:Xu(u.rowIndex+1,f)}:{drop:Yx(u,f),cursor:Xu(u.rowIndex+1,f)}}return{drop:Ag(u==null?void 0:u.id,0),cursor:Xu(u.rowIndex+1,u.level+1)}}function Zte(n,e){const t=ss(),[i,r]=r3(()=&gt;({accept:&quot;NODE&quot;,canDrop:()=&gt;t.canDrop(),hover:(s,o)=&gt;{const l=o.getClientOffset();if(!n.current||!l)return;const{cursor:u,drop:h}=f3({element:n.current,offset:l,indent:t.indent,node:e,prevNode:e.prev,nextNode:e.next});h&amp;&amp;t.dispatch(xh.hovering(h.parentId,h.index)),o.canDrop()?u&amp;&amp;t.showCursor(u):t.hideCursor()},drop:(s,o)=&gt;{if(!o.canDrop())return null;let{parentId:l,index:u,dragIds:h}=t.state.dnd;HL(t.props.onMove,{dragIds:h,parentId:l===Hd?null:l,index:u===null?0:u,dragNodes:t.dragNodes,parentNode:t.get(l)}),t.open(l)}}),[e,n.current,t.props]);return r}function Jte(n){const e=ss(),t=e.at(n);if(!t)throw new Error(`Could not find node for index: ${n}`);return re.useMemo(()=&gt;{const i=t.clone();return e.visibleNodes[n]=i,i},[...Object.values(t.state),t])}const Qte=md.memo(function({index:e,style:t}){DL(),wZ();const i=ss(),r=Jte(e),s=re.useRef(null),o=qte(r),l=Zte(s,r),u=re.useCallback(x=&gt;{s.current=x,l(x)},[l]),h=i.indent*r.level,f=re.useMemo(()=&gt;({paddingLeft:h}),[h]),p=re.useMemo(()=&gt;{var x,b;return Object.assign(Object.assign({},t),{top:parseFloat(t.top)+((b=(x=i.props.padding)!==null&amp;&amp;x!==void 0?x:i.props.paddingTop)!==null&amp;&amp;b!==void 0?b:0)})},[t,i.props.padding,i.props.paddingTop]),m={role:&quot;treeitem&quot;,&quot;aria-level&quot;:r.level+1,&quot;aria-selected&quot;:r.isSelected,&quot;aria-expanded&quot;:r.isOpen,style:p,tabIndex:-1,className:i.props.rowClassName};re.useEffect(()=&gt;{var x;!r.isEditing&amp;&amp;r.isFocused&amp;&amp;((x=s.current)===null||x===void 0||x.focus({preventScroll:!0}))},[r.isEditing,r.isFocused,s.current]);const g=i.renderNode,v=i.renderRow;return P.jsx(v,{node:r,innerRef:u,attrs:m,children:P.jsx(g,{node:r,tree:i,style:f,dragHandle:o})})});let Kx=&quot;&quot;,W2=null;function d3(){DL();const n=ss();return P.jsx(&quot;div&quot;,{role:&quot;tree&quot;,style:{height:n.height,width:n.width,minHeight:0,minWidth:0},onContextMenu:n.props.onContextMenu,onClick:n.props.onClick,tabIndex:0,onFocus:e=&gt;{e.currentTarget.contains(e.relatedTarget)||n.onFocus()},onBlur:e=&gt;{e.currentTarget.contains(e.relatedTarget)||n.onBlur()},onKeyDown:e=&gt;{var t;if(n.isEditing)return;if(e.key===&quot;Backspace&quot;){if(!n.props.onDelete)return;const r=Array.from(n.selectedIds);if(r.length&gt;1){let s=n.mostRecentNode;for(;s&amp;&amp;s.isSelected;)s=s.nextSibling;s||(s=n.lastNode),n.focus(s,{scroll:!1}),n.delete(Array.from(r))}else{const s=n.focusedNode;if(s){const o=s.nextSibling,l=s.parent;n.focus(o||l,{scroll:!1}),n.delete(s)}}return}if(e.key===&quot;Tab&quot;&amp;&amp;!e.shiftKey){e.preventDefault(),kL(e.currentTarget);return}if(e.key===&quot;Tab&quot;&amp;&amp;e.shiftKey){e.preventDefault(),FL(e.currentTarget);return}if(e.key===&quot;ArrowDown&quot;){e.preventDefault();const r=n.nextNode;if(e.metaKey){n.select(n.focusedNode),n.activate(n.focusedNode);return}else if(!e.shiftKey||n.props.disableMultiSelection){n.focus(r);return}else{if(!r)return;const s=n.focusedNode;s?s.isSelected?n.selectContiguous(r):n.selectMulti(r):n.focus(n.firstNode);return}}if(e.key===&quot;ArrowUp&quot;){e.preventDefault();const r=n.prevNode;if(!e.shiftKey||n.props.disableMultiSelection){n.focus(r);return}else{if(!r)return;const s=n.focusedNode;s?s.isSelected?n.selectContiguous(r):n.selectMulti(r):n.focus(n.lastNode);return}}if(e.key===&quot;ArrowRight&quot;){const r=n.focusedNode;if(!r)return;r.isInternal&amp;&amp;r.isOpen?n.focus(n.nextNode):r.isInternal&amp;&amp;n.open(r.id);return}if(e.key===&quot;ArrowLeft&quot;){const r=n.focusedNode;if(!r||r.isRoot)return;r.isInternal&amp;&amp;r.isOpen?n.close(r.id):!((t=r.parent)===null||t===void 0)&amp;&amp;t.isRoot||n.focus(r.parent);return}if(e.key===&quot;a&quot;&amp;&amp;e.metaKey&amp;&amp;!n.props.disableMultiSelection){e.preventDefault(),n.selectAll();return}if(e.key===&quot;a&quot;&amp;&amp;!e.metaKey&amp;&amp;n.props.onCreate){n.createLeaf();return}if(e.key===&quot;A&quot;&amp;&amp;!e.metaKey){if(!n.props.onCreate)return;n.createInternal();return}if(e.key===&quot;Home&quot;){e.preventDefault(),n.focus(n.firstNode);return}if(e.key===&quot;End&quot;){e.preventDefault(),n.focus(n.lastNode);return}if(e.key===&quot;Enter&quot;){const r=n.focusedNode;if(!r||!r.isEditable||!n.props.onRename)return;setTimeout(()=&gt;{r&amp;&amp;n.edit(r)});return}if(e.key===&quot; &quot;){e.preventDefault();const r=n.focusedNode;if(!r)return;r.isLeaf?(r.select(),r.activate()):r.toggle();return}if(e.key===&quot;*&quot;){const r=n.focusedNode;if(!r)return;n.openSiblings(r);return}if(e.key===&quot;PageUp&quot;){e.preventDefault(),n.pageUp();return}e.key===&quot;PageDown&quot;&amp;&amp;(e.preventDefault(),n.pageDown()),clearTimeout(W2),Kx+=e.key,W2=setTimeout(()=&gt;{Kx=&quot;&quot;},600);const i=n.visibleNodes.find(r=&gt;{const s=r.data.name;return typeof s==&quot;string&quot;?s.toLowerCase().startsWith(Kx):!1});i&amp;&amp;n.focus(i.id)},children:P.jsx(oJ,{className:n.props.className,outerRef:n.listEl,itemCount:n.visibleNodes.length,height:n.height,width:n.width,itemSize:n.rowHeight,overscanCount:n.overscanCount,itemKey:e=&gt;{var t;return((t=n.visibleNodes[e])===null||t===void 0?void 0:t.id)||e},outerElementType:cJ,innerElementType:fJ,onScroll:n.props.onScroll,onItemsRendered:n.onItemsRendered.bind(n),ref:n.list,children:Qte})})}function X2(n){return n.isFiltered?tne(n.root,n.isMatch.bind(n)):ene(n.root)}function ene(n){const e=[];function t(i){var r;i.level&gt;=0&amp;&amp;e.push(i),i.isOpen&amp;&amp;((r=i.children)===null||r===void 0||r.forEach(t))}return t(n),e.forEach(p3),e}function tne(n,e){const t={},i=[];function r(o){if(!o.isRoot&amp;&amp;e(o)){t[o.id]=!0;let u=o.parent;for(;u;)t[u.id]=!0,u=u.parent}if(o.children)for(let u of o.children)r(u)}function s(o){var l;o.level&gt;=0&amp;&amp;t[o.id]&amp;&amp;i.push(o),o.isOpen&amp;&amp;((l=o.children)===null||l===void 0||l.forEach(s))}return r(n),s(n),i.forEach(p3),i}function p3(n,e){n.rowIndex=e}const q2=n=&gt;n.reduce((e,t,i)=&gt;(e[t.id]=i,e),{});var $x=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(f){try{h(i.next(f))}catch(p){o(p)}}function u(f){try{h(i.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):r(f.value).then(l,u)}h((i=i.apply(n,e||[])).next())})};const{safeRun:Xi,identify:Zo,identifyNull:zs}=RZ;class pd{constructor(e,t,i,r){this.store=e,this.props=t,this.list=i,this.listEl=r,this.visibleStartIndex=0,this.visibleStopIndex=0,this.root=n2(this),this.visibleNodes=X2(this),this.idToIndex=q2(this.visibleNodes)}update(e){this.props=e,this.root=n2(this),this.visibleNodes=X2(this),this.idToIndex=q2(this.visibleNodes)}dispatch(e){return this.store.dispatch(e)}get state(){return this.store.getState()}get openState(){return this.state.nodes.open.unfiltered}get width(){var e;return(e=this.props.width)!==null&amp;&amp;e!==void 0?e:300}get height(){var e;return(e=this.props.height)!==null&amp;&amp;e!==void 0?e:500}get indent(){var e;return(e=this.props.indent)!==null&amp;&amp;e!==void 0?e:24}get rowHeight(){var e;return(e=this.props.rowHeight)!==null&amp;&amp;e!==void 0?e:24}get overscanCount(){var e;return(e=this.props.overscanCount)!==null&amp;&amp;e!==void 0?e:1}get searchTerm(){return(this.props.searchTerm||&quot;&quot;).trim()}get matchFn(){var e;const t=(e=this.props.searchMatch)!==null&amp;&amp;e!==void 0?e:(i,r)=&gt;JSON.stringify(Object.values(i.data)).toLocaleLowerCase().includes(r.toLocaleLowerCase());return i=&gt;t(i,this.searchTerm)}accessChildren(e){var t;const i=this.props.childrenAccessor||&quot;children&quot;;return(t=nd(e,i))!==null&amp;&amp;t!==void 0?t:null}accessId(e){const t=this.props.idAccessor||&quot;id&quot;,i=nd(e,t);if(!i)throw new Error(&quot;Data must contain an &#x27;id&#x27; property or props.idAccessor must return a string&quot;);return i}get firstNode(){var e;return(e=this.visibleNodes[0])!==null&amp;&amp;e!==void 0?e:null}get lastNode(){var e;return(e=this.visibleNodes[this.visibleNodes.length-1])!==null&amp;&amp;e!==void 0?e:null}get focusedNode(){var e;return(e=this.get(this.state.nodes.focus.id))!==null&amp;&amp;e!==void 0?e:null}get mostRecentNode(){var e;return(e=this.get(this.state.nodes.selection.mostRecent))!==null&amp;&amp;e!==void 0?e:null}get nextNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e+1)}get prevNode(){const e=this.indexOf(this.focusedNode);return e===null?null:this.at(e-1)}get(e){return e&amp;&amp;e in this.idToIndex&amp;&amp;this.visibleNodes[this.idToIndex[e]]||null}at(e){return this.visibleNodes[e]||null}nodesBetween(e,t){var i;if(e===null||t===null)return[];const r=(i=this.indexOf(e))!==null&amp;&amp;i!==void 0?i:0,s=this.indexOf(t);if(s===null)return[];const o=Math.min(r,s),l=Math.max(r,s);return this.visibleNodes.slice(o,l+1)}indexOf(e){const t=BL(e);return t?this.idToIndex[t]:null}get editingId(){return this.state.nodes.edit.id}createInternal(){return this.create({type:&quot;internal&quot;})}createLeaf(){return this.create({type:&quot;leaf&quot;})}create(){return $x(this,arguments,void 0,function*(e={}){var t,i;const r=e.parentId===void 0?jL(this):e.parentId,s=(t=e.index)!==null&amp;&amp;t!==void 0?t:GL(this),o=(i=e.type)!==null&amp;&amp;i!==void 0?i:&quot;leaf&quot;,l=yield Xi(this.props.onCreate,{type:o,parentId:r,index:s,parentNode:this.get(r)});l&amp;&amp;(this.focus(l),setTimeout(()=&gt;{this.edit(l).then(()=&gt;{this.select(l),this.activate(l)})}))})}delete(e){return $x(this,void 0,void 0,function*(){if(!e)return;const i=(Array.isArray(e)?e:[e]).map(Zo),r=i.map(s=&gt;this.get(s)).filter(s=&gt;!!s);yield Xi(this.props.onDelete,{nodes:r,ids:i})})}edit(e){const t=Zo(e);return this.resolveEdit({cancelled:!0}),this.scrollTo(t),this.dispatch(kx(t)),new Promise(i=&gt;{pd.editPromise=i})}submit(e,t){return $x(this,void 0,void 0,function*(){if(!e)return;const i=Zo(e);yield Xi(this.props.onRename,{id:i,name:t,node:this.get(i)}),this.dispatch(kx(null)),this.resolveEdit({cancelled:!1,value:t}),setTimeout(()=&gt;this.onFocus())})}reset(){this.dispatch(kx(null)),this.resolveEdit({cancelled:!0}),setTimeout(()=&gt;this.onFocus())}activate(e){const t=this.get(zs(e));t&amp;&amp;Xi(this.props.onActivate,t)}resolveEdit(e){const t=pd.editPromise;t&amp;&amp;t(e),pd.editPromise=null}get selectedIds(){return this.state.nodes.selection.ids}get selectedNodes(){let e=[];for(let t of Array.from(this.selectedIds)){const i=this.get(t);i&amp;&amp;e.push(i)}return e}focus(e,t={}){e&amp;&amp;(this.props.selectionFollowsFocus?this.select(e):(this.dispatch(Vu(Zo(e))),t.scroll!==!1&amp;&amp;this.scrollTo(e),this.focusedNode&amp;&amp;Xi(this.props.onFocus,this.focusedNode)))}pageUp(){var e,t;const i=this.visibleStartIndex,s=this.visibleStopIndex-i;let o=(t=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&amp;&amp;t!==void 0?t:0;o&gt;i?o=i:o=Math.max(i-s,0),this.focus(this.at(o))}pageDown(){var e,t;const i=this.visibleStartIndex,r=this.visibleStopIndex,s=r-i;let o=(t=(e=this.focusedNode)===null||e===void 0?void 0:e.rowIndex)!==null&amp;&amp;t!==void 0?t:0;o&lt;r?o=r:o=Math.min(o+s,this.visibleNodes.length-1),this.focus(this.at(o))}select(e,t={}){if(!e)return;const i=t.focus!==!1,r=Zo(e);i&amp;&amp;this.dispatch(Vu(r)),this.dispatch(Fs.only(r)),this.dispatch(Fs.anchor(r)),this.dispatch(Fs.mostRecent(r)),this.scrollTo(r,t.align),this.focusedNode&amp;&amp;i&amp;&amp;Xi(this.props.onFocus,this.focusedNode),Xi(this.props.onSelect,this.selectedNodes)}deselect(e){if(!e)return;const t=Zo(e);this.dispatch(Fs.remove(t)),Xi(this.props.onSelect,this.selectedNodes)}selectMulti(e){const t=this.get(zs(e));t&amp;&amp;(this.dispatch(Vu(t.id)),this.dispatch(Fs.add(t.id)),this.dispatch(Fs.anchor(t.id)),this.dispatch(Fs.mostRecent(t.id)),this.scrollTo(t),this.focusedNode&amp;&amp;Xi(this.props.onFocus,this.focusedNode),Xi(this.props.onSelect,this.selectedNodes))}selectContiguous(e){if(!e)return;const t=Zo(e),{anchor:i,mostRecent:r}=this.state.nodes.selection;this.dispatch(Vu(t)),this.dispatch(Fs.remove(this.nodesBetween(i,r))),this.dispatch(Fs.add(this.nodesBetween(i,zs(t)))),this.dispatch(Fs.mostRecent(t)),this.scrollTo(t),this.focusedNode&amp;&amp;Xi(this.props.onFocus,this.focusedNode),Xi(this.props.onSelect,this.selectedNodes)}deselectAll(){this.setSelection({ids:[],anchor:null,mostRecent:null}),Xi(this.props.onSelect,this.selectedNodes)}selectAll(){var e;this.setSelection({ids:Object.keys(this.idToIndex),anchor:this.firstNode,mostRecent:this.lastNode}),this.dispatch(Vu((e=this.lastNode)===null||e===void 0?void 0:e.id)),this.focusedNode&amp;&amp;Xi(this.props.onFocus,this.focusedNode),Xi(this.props.onSelect,this.selectedNodes)}setSelection(e){var t;const i=new Set((t=e.ids)===null||t===void 0?void 0:t.map(Zo)),r=zs(e.anchor),s=zs(e.mostRecent);this.dispatch(Fs.set({ids:i,anchor:r,mostRecent:s})),Xi(this.props.onSelect,this.selectedNodes)}get cursorParentId(){const{cursor:e}=this.state.dnd;switch(e.type){case&quot;highlight&quot;:return e.id;default:return null}}get cursorOverFolder(){return this.state.dnd.cursor.type===&quot;highlight&quot;}get dragNodes(){return this.state.dnd.dragIds.map(e=&gt;this.get(e)).filter(e=&gt;!!e)}get dragNode(){return this.get(this.state.nodes.drag.id)}get dragDestinationParent(){return this.get(this.state.nodes.drag.destinationParentId)}get dragDestinationIndex(){return this.state.nodes.drag.destinationIndex}canDrop(){var e;if(this.isFiltered)return!1;const t=(e=this.get(this.state.dnd.parentId))!==null&amp;&amp;e!==void 0?e:this.root,i=this.dragNodes,r=this.props.disableDrop;for(const s of i)if(!s||!t||s.isInternal&amp;&amp;LL(t,s))return!1;return typeof r==&quot;function&quot;?!r({parentNode:t,dragNodes:this.dragNodes,index:this.state.dnd.index||0}):typeof r==&quot;string&quot;?!t.data[r]:typeof r==&quot;boolean&quot;?!r:!0}hideCursor(){this.dispatch(xh.cursor({type:&quot;none&quot;}))}showCursor(e){this.dispatch(xh.cursor(e))}open(e){const t=zs(e);t&amp;&amp;(this.isOpen(t)||(this.dispatch(VS.open(t,this.isFiltered)),Xi(this.props.onToggle,t)))}close(e){const t=zs(e);t&amp;&amp;this.isOpen(t)&amp;&amp;(this.dispatch(VS.close(t,this.isFiltered)),Xi(this.props.onToggle,t))}toggle(e){const t=zs(e);if(t)return this.isOpen(t)?this.close(t):this.open(t)}openParents(e){const t=zs(e);if(!t)return;const i=s1(this.root,t);let r=i==null?void 0:i.parent;for(;r;)this.open(r.id),r=r.parent}openSiblings(e){const t=e.parent;if(!t)this.toggle(e.id);else if(t.children){const i=e.isOpen;for(let r of t.children)r.isInternal&amp;&amp;(i?this.close(r.id):this.open(r.id));this.scrollTo(this.focusedNode)}}openAll(){q0(this.root,e=&gt;{e.isInternal&amp;&amp;e.open()})}closeAll(){q0(this.root,e=&gt;{e.isInternal&amp;&amp;e.close()})}scrollTo(e,t=&quot;smart&quot;){if(!e)return;const i=Zo(e);return this.openParents(i),VL(()=&gt;i in this.idToIndex).then(()=&gt;{var r;const s=this.idToIndex[i];s!==void 0&amp;&amp;((r=this.list.current)===null||r===void 0||r.scrollToItem(s,t))}).catch(()=&gt;{})}get isEditing(){return this.state.nodes.edit.id!==null}get isFiltered(){var e;return!!(!((e=this.props.searchTerm)===null||e===void 0)&amp;&amp;e.trim())}get hasFocus(){return this.state.nodes.focus.treeFocused}get hasNoSelection(){return this.state.nodes.selection.ids.size===0}get hasOneSelection(){return this.state.nodes.selection.ids.size===1}get hasMultipleSelections(){return this.state.nodes.selection.ids.size&gt;1}isSelected(e){return e?this.state.nodes.selection.ids.has(e):!1}isOpen(e){var t,i,r;if(!e)return!1;if(e===Hd)return!0;const s=(t=this.props.openByDefault)!==null&amp;&amp;t!==void 0?t:!0;return this.isFiltered?(i=this.state.nodes.open.filtered[e])!==null&amp;&amp;i!==void 0?i:!0:(r=this.state.nodes.open.unfiltered[e])!==null&amp;&amp;r!==void 0?r:s}isEditable(e){const t=this.props.disableEdit||(()=&gt;!1);return!nd(e,t)}isDraggable(e){const t=this.props.disableDrag||(()=&gt;!1);return!nd(e,t)}isDragging(e){const t=zs(e);return t?this.state.nodes.drag.id===t:!1}isFocused(e){return this.hasFocus&amp;&amp;this.state.nodes.focus.id===e}isMatch(e){return this.matchFn(e)}willReceiveDrop(e){const t=zs(e);if(!t)return!1;const{destinationParentId:i,destinationIndex:r}=this.state.nodes.drag;return t===i&amp;&amp;r===null}onFocus(){const e=this.focusedNode||this.firstNode;e&amp;&amp;this.dispatch(Vu(e.id))}onBlur(){this.dispatch(zZ())}onItemsRendered(e){this.visibleStartIndex=e.visibleStartIndex,this.visibleStopIndex=e.visibleStopIndex}get renderContainer(){return this.props.renderContainer||d3}get renderRow(){return this.props.renderRow||PZ}get renderNode(){return this.props.children||LZ}get renderDragPreview(){return this.props.renderDragPreview||WL}get renderCursor(){return this.props.renderCursor||IZ}}function hr(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var nne=typeof Symbol==&quot;function&quot;&amp;&amp;Symbol.observable||&quot;@@observable&quot;,Y2=nne,Zx=()=&gt;Math.random().toString(36).substring(7).split(&quot;&quot;).join(&quot;.&quot;),ine={INIT:`@@redux/INIT${Zx()}`,REPLACE:`@@redux/REPLACE${Zx()}`,PROBE_UNKNOWN_ACTION:()=&gt;`@@redux/PROBE_UNKNOWN_ACTION${Zx()}`},$0=ine;function rne(n){if(typeof n!=&quot;object&quot;||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function m3(n,e,t){if(typeof n!=&quot;function&quot;)throw new Error(hr(2));if(typeof e==&quot;function&quot;&amp;&amp;typeof t==&quot;function&quot;||typeof t==&quot;function&quot;&amp;&amp;typeof arguments[3]==&quot;function&quot;)throw new Error(hr(0));if(typeof e==&quot;function&quot;&amp;&amp;typeof t&gt;&quot;u&quot;&amp;&amp;(t=e,e=void 0),typeof t&lt;&quot;u&quot;){if(typeof t!=&quot;function&quot;)throw new Error(hr(1));return t(m3)(n,e)}let i=n,r=e,s=new Map,o=s,l=0,u=!1;function h(){o===s&amp;&amp;(o=new Map,s.forEach((b,_)=&gt;{o.set(_,b)}))}function f(){if(u)throw new Error(hr(3));return r}function p(b){if(typeof b!=&quot;function&quot;)throw new Error(hr(4));if(u)throw new Error(hr(5));let _=!0;h();const T=l++;return o.set(T,b),function(){if(_){if(u)throw new Error(hr(6));_=!1,h(),o.delete(T),s=null}}}function m(b){if(!rne(b))throw new Error(hr(7));if(typeof b.type&gt;&quot;u&quot;)throw new Error(hr(8));if(typeof b.type!=&quot;string&quot;)throw new Error(hr(17));if(u)throw new Error(hr(9));try{u=!0,r=i(r,b)}finally{u=!1}return(s=o).forEach(T=&gt;{T()}),b}function g(b){if(typeof b!=&quot;function&quot;)throw new Error(hr(10));i=b,m({type:$0.REPLACE})}function v(){const b=p;return{subscribe(_){if(typeof _!=&quot;object&quot;||_===null)throw new Error(hr(11));function T(){const E=_;E.next&amp;&amp;E.next(f())}return T(),{unsubscribe:b(T)}},[Y2](){return this}}}return m({type:$0.INIT}),{dispatch:m,subscribe:p,getState:f,replaceReducer:g,[Y2]:v}}function sne(n){Object.keys(n).forEach(e=&gt;{const t=n[e];if(typeof t(void 0,{type:$0.INIT})&gt;&quot;u&quot;)throw new Error(hr(12));if(typeof t(void 0,{type:$0.PROBE_UNKNOWN_ACTION()})&gt;&quot;u&quot;)throw new Error(hr(13))})}function K2(n){const e=Object.keys(n),t={};for(let s=0;s&lt;e.length;s++){const o=e[s];typeof n[o]==&quot;function&quot;&amp;&amp;(t[o]=n[o])}const i=Object.keys(t);let r;try{sne(t)}catch(s){r=s}return function(o={},l){if(r)throw r;let u=!1;const h={};for(let f=0;f&lt;i.length;f++){const p=i[f],m=t[p],g=o[p],v=m(g,l);if(typeof v&gt;&quot;u&quot;)throw l&amp;&amp;l.type,new Error(hr(14));h[p]=v,u=u||v!==g}return u=u||i.length!==Object.keys(o).length,u?h:o}}function one(n=bh().nodes.drag,e){switch(e.type){case&quot;DND_DRAG_START&quot;:return Object.assign(Object.assign({},n),{id:e.id,selectedIds:e.dragIds});case&quot;DND_DRAG_END&quot;:return Object.assign(Object.assign({},n),{id:null,destinationParentId:null,destinationIndex:null,selectedIds:[]});case&quot;DND_HOVERING&quot;:return e.parentId!==n.destinationParentId||e.index!=n.destinationIndex?Object.assign(Object.assign({},n),{destinationParentId:e.parentId,destinationIndex:e.index}):n;default:return n}}const ane=K2({nodes:K2({focus:BZ,edit:FZ,open:HZ,selection:VZ,drag:one}),dnd:GZ}),lne=bh();function cne({treeProps:n,imperativeHandle:e,children:t}){const i=re.useRef(null),r=re.useRef(null),s=re.useRef(m3(ane,bh(n))),o=SZ.useSyncExternalStore(s.current.subscribe,s.current.getState,()=&gt;lne),l=re.useMemo(()=&gt;new pd(s.current,n,i,r),[]),u=re.useRef(0);return re.useMemo(()=&gt;{u.current+=1,l.update(n)},[...Object.values(n),o.nodes.open]),re.useImperativeHandle(e,()=&gt;l),re.useEffect(()=&gt;{l.props.selection?l.select(l.props.selection,{focus:!1}):l.deselectAll()},[l.props.selection]),re.useEffect(()=&gt;{l.props.searchTerm||s.current.dispatch(VS.clear(!0))},[l.props.searchTerm]),P.jsx(AL.Provider,{value:l,children:P.jsx(OL.Provider,{value:u.current,children:P.jsx(CL.Provider,{value:o.nodes,children:P.jsx(RL.Provider,{value:o.dnd,children:P.jsx(WQ,Object.assign({backend:Xte,options:{rootElement:l.props.dndRootElement||void 0}},n.dndManager&amp;&amp;{manager:n.dndManager},{children:t}))})})})})}function une(){const n=ss(),[,e]=r3(()=&gt;({accept:&quot;NODE&quot;,canDrop:(t,i)=&gt;i.isOver({shallow:!0})?n.canDrop():!1,hover:(t,i)=&gt;{if(!i.isOver({shallow:!0}))return;const r=i.getClientOffset();if(!n.listEl.current||!r)return;const{cursor:s,drop:o}=f3({element:n.listEl.current,offset:r,indent:n.indent,node:null,prevNode:n.visibleNodes[n.visibleNodes.length-1],nextNode:null});o&amp;&amp;n.dispatch(xh.hovering(o.parentId,o.index)),i.canDrop()?s&amp;&amp;n.showCursor(s):n.hideCursor()}}),[n]);e(n.listEl)}function hne(n){return une(),n.children}function fne(){const e=ss().props.renderContainer||d3;return P.jsx(P.Fragment,{children:P.jsx(e,{})})}function dne(){const n=ss(),{offset:e,mouse:t,item:i,isDragging:r}=yte(o=&gt;({offset:o.getSourceClientOffset(),mouse:o.getClientOffset(),item:o.getItem(),isDragging:o.isDragging()})),s=n.props.renderDragPreview||WL;return P.jsx(s,{offset:e,mouse:t,id:(i==null?void 0:i.id)||null,dragIds:(i==null?void 0:i.dragIds)||[],isDragging:r})}class pne{constructor(e){this.root=mne(e)}get data(){var e,t;return(t=(e=this.root.children)===null||e===void 0?void 0:e.map(i=&gt;i.data))!==null&amp;&amp;t!==void 0?t:[]}create(e){const t=e.parentId?this.find(e.parentId):this.root;if(!t)return null;t.addChild(e.data,e.index)}move(e){const t=this.find(e.id),i=e.parentId?this.find(e.parentId):this.root;!t||!i||(i.addChild(t.data,e.index),t.drop())}update(e){const t=this.find(e.id);t&amp;&amp;t.update(e.changes)}drop(e){const t=this.find(e.id);t&amp;&amp;t.drop()}find(e,t=this.root){if(!t)return null;if(t.id===e)return t;if(t.children){for(let i of t.children){const r=this.find(e,i);if(r)return r}return null}return null}}function mne(n){const e=new g3({id:&quot;ROOT&quot;},null);return e.children=n.map(t=&gt;f1(t,e)),e}function f1(n,e){const t=new g3(n,e);return n.children&amp;&amp;(t.children=n.children.map(i=&gt;f1(i,t))),t}class g3{constructor(e,t){this.data=e,this.parent=t,this.id=e.id}hasParent(){return!!this.parent}get childIndex(){return this.hasParent()?this.parent.children.indexOf(this):-1}addChild(e,t){var i,r;const s=f1(e,this);this.children=(i=this.children)!==null&amp;&amp;i!==void 0?i:[],this.children.splice(t,0,s),this.data.children=(r=this.data.children)!==null&amp;&amp;r!==void 0?r:[],this.data.children.splice(t,0,e)}removeChild(e){var t,i;(t=this.children)===null||t===void 0||t.splice(e,1),(i=this.data.children)===null||i===void 0||i.splice(e,1)}update(e){if(this.hasParent()){const t=this.childIndex;this.parent.addChild(Object.assign(Object.assign({},this.data),e),t),this.drop()}}drop(){this.hasParent()&amp;&amp;this.parent.removeChild(this.childIndex)}}let gne=0;function yne(n){const[e,t]=re.useState(n),i=re.useMemo(()=&gt;new pne(e),[e]);return[e,{onMove:h=&gt;{for(const f of h.dragIds)i.move({id:f,parentId:h.parentId,index:h.index});t(i.data)},onRename:({name:h,id:f})=&gt;{i.update({id:f,changes:{name:h}}),t(i.data)},onCreate:({parentId:h,index:f,type:p})=&gt;{const m={id:`simple-tree-id-${gne++}`,name:&quot;&quot;};return p===&quot;internal&quot;&amp;&amp;(m.children=[]),i.create({parentId:h,index:f,data:m}),t(i.data),m},onDelete:h=&gt;{h.ids.forEach(f=&gt;i.drop({id:f})),t(i.data)}}]}function _ne(n){if(n.initialData&amp;&amp;n.data)throw new Error(&quot;React Arborist Tree =&gt; Provide either a data or initialData prop, but not both.&quot;);if(n.initialData&amp;&amp;(n.onCreate||n.onDelete||n.onMove||n.onRename))throw new Error(`React Arborist Tree =&gt; You passed the initialData prop along with a data handler.
Use the data prop if you want to provide your own handlers.`);if(n.initialData){const[e,t]=yne(n.initialData);return Object.assign(Object.assign(Object.assign({},n),t),{data:e})}else return n}function vne(n,e){const t=_ne(n);return P.jsxs(cne,{treeProps:t,imperativeHandle:e,children:[P.jsx(hne,{children:P.jsx(fne,{})}),P.jsx(dne,{})]})}const bne=re.forwardRef(vne),xne=({style:n,node:e,dragHandle:t})=&gt;{const{data:i,isSelected:r,isOpen:s,children:o}=e;let l=!1;return o&amp;&amp;o.length&gt;0&amp;&amp;(l=!0),P.jsxs(&quot;div&quot;,{style:n,ref:t,className:`flex items-center cursor-pointer ${r?&quot;bg-blue-700&quot;:&quot;&quot;}`,children:[l&amp;&amp;P.jsx(&quot;div&quot;,{onClick:u=&gt;{u.stopPropagation(),e.toggle()},className:&quot;mr-2&quot;,children:s?&quot;▼&quot;:&quot;▶&quot;}),P.jsx(&quot;div&quot;,{className:&quot;whitespace-nowrap&quot;,children:i.name})]})};async function y3(n,e){if(e.push(n),n.children!=null&amp;&amp;n.children.length&gt;0)for(let t of n.children)await y3(t,e)}async function Sne(n){var t;let e=[];for(let i of n){let r=i.data.rangeId,s=i.data.node_name,o=(t=Sc.current)==null?void 0:t.get(i.data.model_key);if(!o){console.warn(&quot;No scene found for node:&quot;,i);continue}let l=o.getObjectByName(s);!l&amp;&amp;(l=o.getObjectByName(i.data.name.replace(&quot;/&quot;,&quot;&quot;)),!l)||e.push([l,r])}return e}async function wne(n){const e=Nh.getState();if(n.length&gt;0){let t=[];for(let o of n)await y3(o,t);let i=await Sne(t);e.clearSelectedObjects(),e.addBatchofMeshes(i);const s=t[t.length-1].data.name;yl.getState().setName(s)}else e.clearSelectedObjects()}const Ene=()=&gt;{const{treeData:n,setTree:e,searchTerm:t}=Oc(),[i,r]=re.useState(800),s=re.useRef(null),o=re.useRef(null),l=re.useRef(null),u=n?[{id:&quot;root&quot;,name:&quot;scene&quot;,children:[n]}]:[{id:&quot;root&quot;,name:&quot;scene&quot;,children:[]}];re.useEffect(()=&gt;{const f=()=&gt;{if(o.current&amp;&amp;l.current){const m=o.current.offsetHeight,g=l.current.offsetHeight;r(m-g)}},p=new ResizeObserver(()=&gt;f());return o.current&amp;&amp;p.observe(o.current),f(),()=&gt;{p.disconnect()}},[]),re.useEffect(()=&gt;{if(s.current){const f=s.current;e(f)}},[]);const h=f=&gt;{var p;(p=s.current)!=null&amp;&amp;p.isProgrammaticChange||(async()=&gt;await wne(f))()};return P.jsxs(&quot;div&quot;,{ref:o,className:&quot;h-full w-full flex flex-col max-h-screen pl-1 pr-2&quot;,children:[P.jsx(&quot;div&quot;,{ref:l,className:&quot;w-full pr-12 pt-1 &quot;,children:P.jsx(&quot;input&quot;,{className:&quot;w-full bg-gray-600 text-white rounded pl-1&quot;,onInput:f=&gt;{Oc.getState().setSearchTerm(f.target.value)}})}),P.jsx(&quot;div&quot;,{children:P.jsx(bne,{className:&quot;text-white scrollbar&quot;,width:&quot;100%&quot;,height:i,selectionFollowsFocus:!0,data:u,ref:s,disableDrag:!0,disableDrop:!0,disableEdit:!0,openByDefault:!1,disableMultiSelection:!1,searchTerm:t,searchMatch:(f,p)=&gt;f.data.name.toLowerCase().includes(p.toLowerCase()),onSelect:f=&gt;{h(f)},children:xne})})]})},Tne=()=&gt;{const[n,e]=re.useState(256),t=re.useRef(!1),{isTreeCollapsed:i}=Oc(),r=s=&gt;{if(i)return;t.current=!0;const o=s.clientX,l=n,u=f=&gt;{if(!t.current)return;const p=Math.min(400,Math.max(200,l+f.clientX-o));e(p)},h=()=&gt;{t.current=!1,window.removeEventListener(&quot;mousemove&quot;,u),window.removeEventListener(&quot;mouseup&quot;,h)};window.addEventListener(&quot;mousemove&quot;,u),window.addEventListener(&quot;mouseup&quot;,h)};return P.jsx(&quot;div&quot;,{className:&quot;relative flex h-full&quot;,children:!i&amp;&amp;P.jsxs(&quot;div&quot;,{style:{width:`${n}px`},className:&quot;flex-grow-0 flex-shrink-0 h-full bg-gray-800 overflow-auto relative&quot;,children:[P.jsx(Ene,{}),P.jsx(&quot;div&quot;,{className:&quot;absolute top-0 right-0 w-2 h-full cursor-ew-resize bg-gray-600&quot;,onMouseDown:r})]})})},Mne=n=&gt;P.jsx(&quot;svg&quot;,{fill:&quot;#ffffff&quot;,width:&quot;12px&quot;,height:&quot;12px&quot;,viewBox:&quot;0 0 24 24&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,enableBackground:&quot;new 0 0 24 24&quot;,children:P.jsx(&quot;path&quot;,{d:&quot;M8.5,6H6.7C8.2,4.7,10,4,12,4c0.3,0,0.6,0,0.9,0.1c0,0,0,0,0,0c0.5,0.1,1-0.3,1.1-0.9c0.1-0.5-0.3-1-0.9-1.1C12.7,2,12.4,2,12,2C9.6,2,7.3,2.9,5.5,4.4V3c0-0.6-0.4-1-1-1s-1,0.4-1,1v4c0,0.6,0.4,1,1,1h4c0.6,0,1-0.4,1-1S9.1,6,8.5,6z M7,14.5c-0.6,0-1,0.4-1,1v1.8C4.7,15.8,4,14,4,12c0-0.3,0-0.6,0.1-0.9c0,0,0,0,0,0c0.1-0.5-0.3-1-0.9-1.1c-0.5-0.1-1,0.3-1.1,0.9C2,11.3,2,11.6,2,12c0,2.4,0.9,4.7,2.4,6.5H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h4c0.3,0,0.6-0.2,0.8-0.4c0,0,0,0,0,0c0,0,0,0,0,0c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.1,0-0.2c0,0,0-0.1,0-0.1v-4C8,14.9,7.6,14.5,7,14.5z M21,5.5c0.6,0,1-0.4,1-1s-0.4-1-1-1h-4c-0.1,0-0.1,0-0.2,0c0,0,0,0,0,0c-0.1,0-0.2,0.1-0.3,0.1c0,0,0,0,0,0c-0.1,0.1-0.2,0.1-0.2,0.2c0,0,0,0,0,0c0,0,0,0,0,0c0,0.1-0.1,0.2-0.1,0.2c0,0.1,0,0.1,0,0.2c0,0,0,0.1,0,0.1v4c0,0.6,0.4,1,1,1s1-0.4,1-1V6.7c1.3,1.4,2,3.3,2,5.3c0,0.3,0,0.6-0.1,0.9c-0.1,0.5,0.3,1,0.9,1.1c0,0,0.1,0,0.1,0c0.5,0,0.9-0.4,1-0.9c0-0.4,0.1-0.7,0.1-1.1c0-2.4-0.9-4.7-2.4-6.5H21z M20.3,16.5c-0.1-0.1-0.2-0.2-0.3-0.3c0,0,0,0,0,0c0,0,0,0,0,0c-0.1-0.1-0.2-0.1-0.3-0.1c0,0-0.1,0-0.1,0c0,0-0.1,0-0.1,0h-4c-0.6,0-1,0.4-1,1s0.4,1,1,1h1.8c-1.4,1.3-3.3,2-5.3,2c-0.3,0-0.6,0-0.9-0.1c0,0,0,0,0,0c-0.5-0.1-1,0.3-1.1,0.9s0.3,1,0.9,1.1c0.4,0,0.7,0.1,1.1,0.1c2.4,0,4.7-0.9,6.5-2.4V21c0,0.6,0.4,1,1,1s1-0.4,1-1v-4C20.5,16.8,20.4,16.6,20.3,16.5C20.3,16.5,20.3,16.5,20.3,16.5z&quot;})}),Ane=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;12px&quot;,height:&quot;12px&quot;,viewBox:&quot;0 0 16 16&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[P.jsx(&quot;path&quot;,{d:&quot;M4.70711 12.7071L8 16L11.2929 12.7071L8 9.41421L4.70711 12.7071Z&quot;,fill:&quot;#ffffff&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M3.29289 11.2929L6.58579 8L3.29289 4.70711L0 8L3.29289 11.2929Z&quot;,fill:&quot;#ffffff&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M4.70711 3.29289L8 0L11.2929 3.29289L8 6.58579L4.70711 3.29289Z&quot;,fill:&quot;#ffffff&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M12.7071 4.70711L9.41421 8L12.7071 11.2929L16 8L12.7071 4.70711Z&quot;,fill:&quot;#ffffff&quot;})]});function Cne({label:n,onRun:e,is_component:t}){return P.jsxs(&quot;div&quot;,{className:&quot;bg-gray-800 flex flex-col justify-center items-center rounded-t&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex px-1&quot;,children:t?P.jsx(Ane,{}):P.jsx(Mne,{})}),P.jsx(&quot;div&quot;,{className:&quot;flex text-center text-xs&quot;,children:n})]}),P.jsx(&quot;button&quot;,{className:&quot;nodrag flex relative bg-blue-700 hover:bg-blue-700/50 text-white text-xs px-4 rounded&quot;,onClick:e,children:&quot;Run&quot;})]})}const _3=({id:n,type:e,label:t,isConnectable:i=!0,style:r={position:&quot;absolute&quot;,background:&quot;#5aaf1a&quot;},onConnect:s,left_side:o=!0})=&gt;o?P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:[P.jsx(&quot;span&quot;,{className:&quot;m-auto ml-0 mr-0 relative&quot;,children:P.jsx(_l,{type:e,id:n,position:Mt.Left,style:r,isConnectable:i,onConnect:s})}),P.jsx(&quot;span&quot;,{className:&quot;pl-2 text-xs text-gray-300&quot;,children:t})]}):P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:[P.jsx(&quot;span&quot;,{className:&quot;pl-1 text-center text-xs text-gray-300&quot;,children:t}),P.jsx(&quot;span&quot;,{className:&quot;m-auto ml-1 mr-0 relative&quot;,children:P.jsx(_l,{type:e,id:n,position:Mt.Right,style:r,isConnectable:i,onConnect:s})})]});function Rne({param:n,paramId:e,paramName:t,paramDefaultValue:i,paramOptions:r}){var s,o;switch(n.type){case ii.STRING:const l=((s=i==null?void 0:i.stringValue)==null?void 0:s.toString())||&quot;&quot;;return P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center ml-1&quot;,id:e,children:[r&amp;&amp;r.length&gt;0?P.jsx(&quot;select&quot;,{defaultValue:l,className:&quot;nodrag m-auto ml-0 mr-0 text-gray-800 text-xs w-24 border border-gray-400 rounded&quot;,children:r.map((f,p)=&gt;P.jsx(&quot;option&quot;,{value:f.stringValue,children:f.stringValue},p))}):P.jsx(&quot;input&quot;,{type:&quot;text&quot;,defaultValue:l,className:&quot;nodrag m-auto ml-0 mr-0 text-gray-200 text-xs w-20 border border-gray-400 rounded bg-gray-800 p-0.5&quot;}),P.jsx(&quot;span&quot;,{className:&quot;pl-2 text-xs text-gray-300&quot;,children:t})]});case ii.FLOAT:const u=i==null?void 0:i.floatValue;return P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center w-26 ml-1&quot;,id:e,children:[r&amp;&amp;r.length&gt;0?P.jsx(&quot;select&quot;,{defaultValue:u,className:&quot;nodrag m-auto ml-0 mr-0 text-xs text-gray-200 bg-gray-800 p-0.5 w-24 border border-gray-400 rounded&quot;,children:r.map((f,p)=&gt;P.jsx(&quot;option&quot;,{value:f.floatValue,children:f.floatValue},p))}):P.jsx(&quot;input&quot;,{type:&quot;number&quot;,defaultValue:u!=null?u.toFixed(4):&quot;&quot;,className:&quot;flex flex-1 nodrag m-auto ml-0 mr-0 text-xs text-gray-200 bg-gray-800 p-0.5 w-20 border border-gray-400 rounded&quot;}),P.jsx(&quot;span&quot;,{className:&quot;flex-1 pl-2 text-xs text-gray-300&quot;,children:t})]});case ii.ARRAY:const h=i==null?void 0:i.arrayValueType;if(((o=n.defaultValue)==null?void 0:o.arrayAnyLength)===!1){const f=[];for(let p=0;p&lt;(i==null?void 0:i.arrayLength);p++){const m=i.arrayValue[p];m&amp;&amp;f.push(h===ii.FLOAT?m.floatValue:m.stringValue)}return P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center w-24 ml-1&quot;,id:e,children:[f.slice(0,3).map((p,m)=&gt;P.jsx(&quot;input&quot;,{type:&quot;number&quot;,defaultValue:typeof p==&quot;number&quot;?p.toFixed(3):&quot;&quot;,className:&quot;nodrag flex m-auto text-gray-800 border text-xs border-gray-400 rounded max-w-8&quot;},m)),P.jsx(&quot;span&quot;,{className:&quot;flex flex-1 pl-2 text-xs text-gray-300&quot;,children:t})]})}else{let f=&quot;&quot;;return h===ii.FLOAT?f=&quot;1.0;2.0;3.0&quot;:h===ii.INTEGER?f=&quot;1;2;3&quot;:console.error(`Unknown array value type: ${h}`),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row items-center ml-1&quot;,id:e,children:[P.jsx(&quot;input&quot;,{type:&quot;text&quot;,pattern:&quot;[0-9]+(\\.[0-9]+)?(;\\s*[0-9]+(\\.[0-9]+)?)*&quot;,defaultValue:i==null?void 0:i.stringValue(),placeholder:f,className:&quot;nodrag m-auto ml-0 mr-0 text-gray-800 text-xs w-24 border border-gray-400 rounded&quot;}),P.jsx(&quot;span&quot;,{className:&quot;pl-2 text-xs text-gray-300&quot;,children:t})]})}default:return console.error(`Unknown parameter type: ${n.type}`),null}}function One({id:n,data:e}){const t=e.procedure,i=t.parameters.length,r=e.fileInputsMap,s=e.fileOutputsMap,o=[];for(let l=0;l&lt;i;l++){const u=t.parameters[l],h=u.name;h&amp;&amp;(r[h.toString()]?o.unshift(u):o.push(u))}return!i&amp;&amp;t.fileInputs.length===0?null:P.jsx(P.Fragment,{children:Array.from({length:i}).map((l,u)=&gt;{var T;const h=o[u];if(!h)return null;const f=(T=h.name)==null?void 0:T.toString();if(!f||s[f])return null;e.paramids||(e.paramids=[]);const p=e.paramids,m=h.defaultValue;let g=h.options.length,v=null;if(g&gt;0){v=[];for(let w=0;w&lt;g;w++)v[w]=h.options[w]}const x=t.name;if(!x)return console.error(&quot;Procedure name is not defined&quot;),null;const b=`${x}-${u}`,_=`param-${f}-${b}`;return p.includes(_)||p.push(_),r[f]?P.jsx(_3,{id:_,type:&quot;source&quot;,label:f||`Param ${u+1}`},b):P.jsx(Rne,{param:h,paramId:_,paramName:f,paramDefaultValue:m,paramOptions:v},b)})})}function Dne(n,e,t){var s,o;let i={};for(let l=0;l&lt;t.parameters.length;l++){let u=t.parameters[l],h=((s=u.name)==null?void 0:s.toString())||&quot;&quot;;i[h]=u}let r=[];for(let l of e){let u=document.getElementById(l);if(!u)continue;let h=u.getElementsByTagName(&quot;span&quot;)[0].innerText,f=i[h],p=f.type,m=ii[p],g=null;f.options.length&gt;0?g=u.getElementsByTagName(&quot;select&quot;):g=u.getElementsByTagName(&quot;input&quot;);let v=n.createString(h);if(g.length==1){let b=g[0].value,_=null;if(f.type===ii.STRING){let w=n.createString(b);Ht.startValue(n),Ht.addStringValue(n,w),_=Ht.endValue(n)}else if(f.type===ii.FLOAT){let w=parseFloat(b);Ht.startValue(n),Ht.addFloatValue(n,w),_=Ht.endValue(n)}else if(f.type===ii.INTEGER){let w=parseInt(b);Ht.startValue(n),Ht.addIntegerValue(n,w),_=Ht.endValue(n)}else if(f.type===ii.BOOLEAN){let w=b===&quot;true&quot;;Ht.startValue(n),Ht.addBooleanValue(n,w),_=Ht.endValue(n)}else{console.log(&quot;Unknown parameter type: &quot;,m);continue}Dn.startParameter(n),Dn.addName(n,v),Dn.addValue(n,_),Dn.addType(n,p);let T=Dn.endParameter(n);r.push(T);continue}else if(g.length&gt;1){let b=[],_=(o=f.defaultValue)==null?void 0:o.arrayValueType;for(let R of g){let N=R.value;if(Ht.startValue(n),_===ii.STRING){let D=n.createString(N);Ht.addStringValue(n,D)}else _===ii.FLOAT?Ht.addFloatValue(n,parseFloat(N)):_===ii.INTEGER?Ht.addIntegerValue(n,parseInt(N)):_===ii.BOOLEAN&amp;&amp;Ht.addBooleanValue(n,N===&quot;true&quot;);let A=Ht.endValue(n);b.push(A)}let T=Ht.createArrayValueVector(n,b);Ht.startValue(n),Ht.addArrayValue(n,T),_&amp;&amp;Ht.addArrayValueType(n,_);let w=Ht.endValue(n);Dn.startParameter(n),Dn.addName(n,v),Dn.addValue(n,w),Dn.addType(n,ii.ARRAY);let E=Dn.endParameter(n);r.push(E);continue}if(u.tagName===&quot;INPUT&quot;){Dn.startParameter(n);let b=Dn.endParameter(n);r.push(b);continue}u.getElementsByTagName(&quot;input&quot;)[0]&amp;&amp;r.push()}return r}async function Nne(n){var g,v,x,b,_;const e=Ks.getState().nodes,t=Ks.getState().edges,i=e.find(T=&gt;T.id===n.id);if(!i){console.error(&quot;Could not find this procedure node&quot;);return}let r=new Mo(1024),s=r.createString(((v=(g=i.data)==null?void 0:g.label)==null?void 0:v.toString())||&quot;&quot;),o=[],l=n.data.procedure;const u=t.filter(T=&gt;T.target.startsWith(&quot;file-object&quot;));if(u.length===0){console.error(&quot;No file object connected to this procedure&quot;);return}for(let T=0;T&lt;u.length;T++){const w=u[T],E=e.find(A=&gt;A.id===w.target);if(!E)continue;const R=(x=w.sourceHandle)==null?void 0:x.split(&quot;-&quot;)[1];let N=(b=E.data.filepath)==null?void 0:b.toString();console.log(E);for(let A=0;A&lt;l.fileInputs.length;A++){const D=l.fileInputs[A];if(R!==D.argName)continue;const C=(_=D.argName)==null?void 0:_.toString();let O=r.createString(N),L=r.createString(C);Ht.startValue(r),Ht.addStringValue(r,O);let V=Ht.endValue(r);Dn.startParameter(r),Dn.addName(r,L),Dn.addValue(r,V);let Z=Dn.endParameter(r);o.push(Z)}}if(n.data.paramids){let T=Dne(r,n.data.paramids,l);T&amp;&amp;o.push(...T)}let h=Yi.createParametersVector(r,o),f=r.createString(n.id.toString());Yi.startProcedureStart(r),Yi.addProcedureName(r,s),Yi.addProcedureIdString(r,f),Yi.addParameters(r,h);let p=Yi.endProcedureStart(r);Ss.startProcedureStore(r),Ss.addStartProcedure(r,p);let m=Ss.endProcedureStore(r);at.startMessage(r),window.TARGET_INSTANCE_ID?(console.log(&quot;Overriding TARGET_ID:&quot;,window.TARGET_INSTANCE_ID),at.addInstanceId(r,window.TARGET_INSTANCE_ID)):at.addInstanceId(r,Ei.instance_id),at.addCommandType(r,Bn.RUN_PROCEDURE),at.addTargetGroup(r,si.SERVER),at.addClientType(r,si.WEB),at.addProcedureStore(r,m),r.finish(at.endMessage(r)),await Ei.sendMessage(r.asUint8Array())}function Ine({id:n,data:e}){return P.jsxs(&quot;div&quot;,{className:&quot;bg-bl-background text-gray-200 rounded min-w-40 h-30&quot;,children:[P.jsx(Cne,{is_component:e.procedure.isComponent,label:e.label,onRun:()=&gt;Nne({id:n,data:e})}),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row w-full h-full py-2&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex flex-1 flex-col&quot;,children:P.jsx(One,{id:n,data:e})}),P.jsx(&quot;div&quot;,{className:&quot;flex flex-col&quot;,children:P.jsx(_3,{id:`${n}-file_object_output`,type:&quot;target&quot;,label:&quot;output_file&quot;,left_side:!1},`procedure-${n}-output`)})]})]})}const Pne=re.memo(Ine);async function Lne(n){console.log(&quot;start_file_in_local_app&quot;+n.name());let e=new Mo(1024),t=e.createString(n.name()),i=e.createString(n.filepath());fn.startFileObject(e),fn.addName(e,t),fn.addFilepath(e,i);let r=fn.endFileObject(e);hi.startServer(e),hi.addStartFileInLocalApp(e,r);let s=hi.endServer(e);at.startMessage(e),at.addInstanceId(e,Ei.instance_id),at.addCommandType(e,Bn.START_FILE_IN_LOCAL_APP),at.addTargetGroup(e,si.SERVER),at.addClientType(e,si.WEB),at.addServer(e,s),e.finish(at.endMessage(e)),await Ei.sendMessage(e.asUint8Array())}async function Une(n){console.log(&quot;get_file_object_from_server&quot;+n.name());let e=new Mo(1024);if(n.fileType()!==So.IFC){await Lne(n);return}let t=n.glbFile();if(!t){console.log(&quot;No GLB file found in the file object&quot;);return}let i=e.createString(t.name());hi.startServer(e),hi.addGetFileObjectByName(e,i);let r=hi.endServer(e);at.startMessage(e),at.addInstanceId(e,Ei.instance_id),at.addCommandType(e,Bn.VIEW_FILE_OBJECT),at.addTargetGroup(e,si.SERVER),at.addClientType(e,si.WEB),at.addServer(e,r),e.finish(at.endMessage(e)),await Ei.sendMessage(e.asUint8Array())}const kne=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;12px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 24 24&quot;,strokeWidth:&quot;1.5&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,color:&quot;#000000&quot;,children:[P.jsx(&quot;path&quot;,{d:&quot;M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1.5&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;})]}),Fne=n=&gt;P.jsxs(&quot;svg&quot;,{width:&quot;12px&quot;,height:&quot;12px&quot;,viewBox:&quot;0 0 24 24&quot;,fill:&quot;none&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[P.jsx(&quot;path&quot;,{d:&quot;M15.0007 12C15.0007 13.6569 13.6576 15 12.0007 15C10.3439 15 9.00073 13.6569 9.00073 12C9.00073 10.3431 10.3439 9 12.0007 9C13.6576 9 15.0007 10.3431 15.0007 12Z&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;1&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;}),P.jsx(&quot;path&quot;,{d:&quot;M12.0012 5C7.52354 5 3.73326 7.94288 2.45898 12C3.73324 16.0571 7.52354 19 12.0012 19C16.4788 19 20.2691 16.0571 21.5434 12C20.2691 7.94291 16.4788 5 12.0012 5Z&quot;,stroke:&quot;#ffffff&quot;,strokeWidth:&quot;2&quot;,strokeLinecap:&quot;round&quot;,strokeLinejoin:&quot;round&quot;})]});function zne(n){return P.jsxs(&quot;div&quot;,{className:&quot;bg-bl-background text-gray-200 rounded-md min-w-24&quot;,children:[P.jsxs(&quot;div&quot;,{className:&quot;bg-gray-800 flex flex-row justify-center items-center px-1 rounded-t&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex-1&quot;,children:P.jsx(kne,{})}),P.jsx(&quot;div&quot;,{className:&quot;flex-1 text-center text-xs&quot;,children:n.data.label.toString()}),P.jsxs(&quot;div&quot;,{className:&quot;flex-1 text-xs&quot;,children:[&quot; [&quot;,n.data.filetype.toString(),&quot;]&quot;]})]}),P.jsx(&quot;div&quot;,{className:&quot;flex justify-center items-center text-xs p-1&quot;,children:P.jsx(&quot;button&quot;,{className:&quot;nodrag bg-blue-500 hover:bg-blue-700 text-white p-1 rounded&quot;,onClick:()=&gt;{Une(n.data.fileobject)},children:P.jsx(Fne,{})})}),P.jsxs(&quot;div&quot;,{className:&quot;flex flex-col&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex flex-row items-center&quot;,children:P.jsx(&quot;span&quot;,{className:&quot;m-auto mr-0&quot;,children:P.jsx(_l,{type:&quot;target&quot;,id:`${n.id}-file_object_out`,position:Mt.Right,style:{position:&quot;absolute&quot;,background:&quot;#555&quot;},isConnectable:!0})})}),n.data.isProcedureOutput&amp;&amp;P.jsx(&quot;span&quot;,{className:&quot;m-auto mr-0&quot;,children:P.jsx(_l,{type:&quot;source&quot;,id:`${n.id}-procedure_in`,position:Mt.Left,style:{position:&quot;absolute&quot;,background:&quot;#555&quot;},isConnectable:!0})})]})]})}const Bne=re.memo(zne);async function Hne(n){n.nodes.length&gt;0&amp;&amp;await Vne(n.nodes),n.edges.length&gt;0&amp;&amp;await Gne(n.edges)}async function Vne(n){for(const e of n)e.type==&quot;file_object&quot;&amp;&amp;await jne(e),console.log(&quot;onDelete node&quot;,e)}async function Gne(n){console.log(&quot;onDelete edges&quot;,n)}async function jne(n){console.log(&quot;Deleting file object&quot;,n);let e=new Mo(1024),t=n.data.fileobject,i=e.createString(t.name()),r=e.createString(t.filepath());fn.startFileObject(e),fn.addName(e,i),fn.addFilepath(e,r),fn.addFileType(e,t.fileType()),fn.addGlbFile(e,t.glbFile()),fn.addIfcsqliteFile(e,t.ifcsqliteFile());let s=fn.endFileObject(e);hi.startServer(e),hi.addDeleteFileObject(e,s);let o=hi.endServer(e);at.startMessage(e),at.addServer(e,o),at.addInstanceId(e,Ei.instance_id),at.addCommandType(e,Bn.DELETE_FILE_OBJECT),at.addTargetGroup(e,si.SERVER),at.addClientType(e,si.WEB),e.finish(at.endMessage(e)),await Ei.sendMessage(e.asUint8Array())}async function Wne(){let n=new Mo(1024);at.startMessage(n),at.addInstanceId(n,Ei.instance_id),at.addCommandType(n,Bn.START_NEW_NODE_EDITOR),at.addTargetGroup(n,si.SERVER),at.addClientType(n,si.WEB),n.finish(at.endMessage(n)),await Ei.sendMessage(n.asUint8Array()),console.log(&quot;Starting new node editor&quot;),Ks.getState().setIsNodeEditorVisible(!1)}const Xne=n=&gt;P.jsxs(&quot;svg&quot;,{fill:&quot;#ffffff&quot;,width:&quot;24px&quot;,height:&quot;24px&quot;,viewBox:&quot;0 0 36 36&quot;,version:&quot;1.1&quot;,preserveAspectRatio:&quot;xMidYMid meet&quot;,xmlns:&quot;http://www.w3.org/2000/svg&quot;,children:[P.jsx(&quot;title&quot;,{children:&quot;pop-out-line&quot;}),P.jsx(&quot;path&quot;,{className:&quot;clr-i-outline clr-i-outline-path-1&quot;,d:&quot;M27,33H5a2,2,0,0,1-2-2V9A2,2,0,0,1,5,7H15V9H5V31H27V21h2V31A2,2,0,0,1,27,33Z&quot;}),P.jsx(&quot;path&quot;,{className:&quot;clr-i-outline clr-i-outline-path-2&quot;,d:&quot;M18,3a1,1,0,0,0,0,2H29.59L15.74,18.85a1,1,0,1,0,1.41,1.41L31,6.41V18a1,1,0,0,0,2,0V3Z&quot;}),P.jsx(&quot;rect&quot;,{x:&quot;0&quot;,y:&quot;0&quot;,width:&quot;36&quot;,height:&quot;36&quot;,fillOpacity:&quot;0&quot;})]}),qne={procedure:Pne,file_object:Bne},$2=()=&gt;{const{nodes:n,edges:e,setNodes:t,setEdges:i,onNodesChange:r,onEdgesChange:s,onConnect:o,use_node_editor_only:l}=Ks(),u=P.jsxs(iK,{colorMode:&quot;dark&quot;,nodes:n,edges:e,onNodesChange:h=&gt;r(h),onEdgesChange:h=&gt;s(h),onConnect:o,nodeTypes:qne,onDelete:Hne,fitView:!0,children:[P.jsx(lK,{}),P.jsx(mK,{}),P.jsx(AK,{})]});return l?P.jsx(&quot;div&quot;,{style:{width:&quot;100%&quot;,height:&quot;100%&quot;,background:&quot;white&quot;,border:&quot;1px solid #ccc&quot;},children:u}):P.jsxs(i1,{default:{x:100,y:100,width:800,height:600},bounds:&quot;window&quot;,style:{zIndex:1e3,background:&quot;white&quot;,border:&quot;1px solid #ccc&quot;},dragHandleClassName:&quot;node-editor-drag-handle&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;node-editor-header node-editor-drag-handle bg-gray-800 text-white px-4 py-2 cursor-move&quot;,children:P.jsxs(&quot;div&quot;,{className:&quot;flex flex-row&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;flex p-1&quot;,children:&quot;Node Editor&quot;}),P.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-1 ml-2 rounded&quot;,onClick:()=&gt;EL(),children:P.jsx(r1,{})}),P.jsx(&quot;button&quot;,{className:&quot;flex relative bg-blue-700 hover:bg-blue-700/50 text-white p-1 ml-2 rounded&quot;,onClick:()=&gt;Wne(),children:P.jsx(Xne,{})})]})}),P.jsx(&quot;div&quot;,{style:{width:&quot;100%&quot;,height:&quot;calc(100% - 40px)&quot;},children:u})]})};function Yne(){const{isOptionsVisible:n}=Bc(),{isNodeEditorVisible:e,use_node_editor_only:t}=Ks();return re.useEffect(()=&gt;{window.Jupyter&amp;&amp;window.Jupyter.notebook.kernel.comm_manager.register_target(&quot;ReactViewerWidget&quot;,function(r){r.on_msg(s=&gt;{console.log(&quot;Message from Python:&quot;,s.content.data)}),r.send({data:&quot;Hello from React!&quot;})})},[]),P.jsxs(&quot;div&quot;,{className:&quot;relative flex flex-row h-full w-full bg-gray-900&quot;,children:[P.jsx(&quot;div&quot;,{className:&quot;relative h-full&quot;,children:P.jsx(Tne,{})}),P.jsx(&quot;div&quot;,{className:&quot;relative top-0 left-0&quot;,children:P.jsx(uZ,{})}),P.jsx(&quot;div&quot;,{className:&quot;w-full h-full&quot;,children:t?P.jsx($2,{}):P.jsx(f$,{})}),e&amp;&amp;P.jsx($2,{}),n&amp;&amp;P.jsx(xZ,{})]})}async function Kne(){const n=WN.getState().webSocketAddress;if(window.DEACTIVATE_WS===!0){console.log(&quot;DEACTIVATE_WS is set to true, not connecting to websocket&quot;);return}try{await Ei.connect(n);for await(const e of Ei.messages())await dL(e)}catch(e){console.error(&quot;WebSocket connection failed:&quot;,e)}}Kne();window.B64GLTF?Bj():console.log(&quot;B64GLTF not attached.&quot;);const $ne=document.getElementById(&quot;root&quot;),Zne=Ok.createRoot($ne);Zne.render(P.jsx(Yne,{}));

&lt;/script&gt;
      &lt;style&gt;
*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: &quot;&quot;}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,Segoe UI Symbol,&quot;Noto Color Emoji&quot;;font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.\!container{width:100%!important}.container{width:100%}@media (min-width: 640px){.\!container{max-width:640px!important}.container{max-width:640px}}@media (min-width: 768px){.\!container{max-width:768px!important}.container{max-width:768px}}@media (min-width: 1024px){.\!container{max-width:1024px!important}.container{max-width:1024px}}@media (min-width: 1280px){.\!container{max-width:1280px!important}.container{max-width:1280px}}@media (min-width: 1536px){.\!container{max-width:1536px!important}.container{max-width:1536px}}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.absolute{position:absolute}.relative{position:relative}.left-0{left:0}.right-0{right:0}.right-5{right:1.25rem}.top-0{top:0}.top-80{top:20rem}.z-10{z-index:10}.m-auto{margin:auto}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.ml-0{margin-left:0}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.mr-0{margin-right:0}.mr-2{margin-right:.5rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.block{display:block}.flex{display:flex}.table-cell{display:table-cell}.table-row{display:table-row}.hidden{display:none}.h-2{height:.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-80{height:20rem}.h-full{height:100%}.max-h-96{max-height:24rem}.max-h-screen{max-height:100vh}.w-0{width:0px}.w-12{width:3rem}.w-2{width:.5rem}.w-20{width:5rem}.w-24{width:6rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-60{width:15rem}.w-full{width:100%}.min-w-0{min-width:0px}.min-w-24{min-width:6rem}.min-w-40{min-width:10rem}.min-w-80{min-width:20rem}.min-w-\[100px\]{min-width:100px}.max-w-8{max-width:2rem}.max-w-full{max-width:100%}.max-w-md{max-width:28rem}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.flex-grow-0{flex-grow:0}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-ew-resize{cursor:ew-resize}.cursor-move{cursor:move}.cursor-pointer{cursor:pointer}.resize{resize:both}.appearance-none{-webkit-appearance:none;-moz-appearance:none;appearance:none}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-x-2{-moz-column-gap:.5rem;column-gap:.5rem}.space-x-2&gt;:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1&gt;:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-2&gt;:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-4&gt;:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.whitespace-nowrap{white-space:nowrap}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-md{border-radius:.375rem}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.border{border-width:1px}.border-gray-400{--tw-border-opacity: 1;border-color:rgb(156 163 175 / var(--tw-border-opacity))}.border-gray-600{--tw-border-opacity: 1;border-color:rgb(75 85 99 / var(--tw-border-opacity))}.bg-bl-background{--tw-bg-opacity: 1;background-color:rgb(57 57 57 / var(--tw-bg-opacity))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity))}.bg-blue-700{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity))}.bg-blue-700\/30{background-color:#1d4ed84d}.bg-gray-400{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity))}.bg-gray-600{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity))}.bg-gray-700{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity))}.bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.bg-gray-900{--tw-bg-opacity: 1;background-color:rgb(17 24 39 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-opacity-50{--tw-bg-opacity: .5}.p-0{padding:0}.p-0\.5{padding:.125rem}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.pl-1{padding-left:.25rem}.pl-2{padding-left:.5rem}.pr-1{padding-right:.25rem}.pr-12{padding-right:3rem}.pr-2{padding-right:.5rem}.pt-1{padding-top:.25rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity))}.text-gray-200{--tw-text-opacity: 1;color:rgb(229 231 235 / var(--tw-text-opacity))}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.accent-blue-700{accent-color:#1d4ed8}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline{outline-style:solid}html,body{height:100%;margin:0}#root{height:100%}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.scrollbar::-webkit-scrollbar{width:10px}.scrollbar::-webkit-scrollbar-corner{background-color:#1a1919}.scrollbar::-webkit-scrollbar-track{background-color:#212121b3}.scrollbar::-webkit-scrollbar-thumb{background-color:#374151e6;box-shadow:inset 0 0 6px #0000004d;outline:1px solid rgb(17,17,17)}.hover\:bg-blue-600:hover{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity))}.hover\:bg-blue-700\/50:hover{background-color:#1d4ed880}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}._GzYRV{line-height:1.2;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}._3eOF8{margin-right:5px;font-weight:700}._3eOF8+._3eOF8{margin-left:-5px}._1MFti{cursor:pointer}._f10Tu{font-size:1.2em;margin-right:5px;-webkit-user-select:none;-moz-user-select:none;user-select:none}._1UmXx:after{content:&quot;▸&quot;}._1LId0:after{content:&quot;▾&quot;}._1pNG9{margin-right:5px}._1pNG9:after{content:&quot;...&quot;;font-size:.8em}._2IvMF{background:#eee}._2bkNM{margin:0;padding:0 10px}._1BXBN{margin:0;padding:0}._1MGIk{font-weight:600;margin-right:5px;color:#000}._3uHL6{color:#000}._2T6PJ,._1Gho6{color:#df113a}._vGjyY{color:#2a3f3c}._1bQdo{color:#0b75f5}._3zQKs{color:#469038}._1xvuR{color:#43413d}._oLqym,._2AXVT,._2KJWg{color:#000}._11RoI{background:#002b36}._17H2C,._3QHg2,._3fDAz{color:#fdf6e3}._2bSDX{font-weight:bolder;margin-right:5px;color:#fdf6e3}._gsbQL{color:#fdf6e3}._LaAZe,._GTKgm{color:#81b5ac}._Chy1W{color:#cb4b16}._2bveF{color:#d33682}._2vRm-{color:#ae81ff}._1prJR{color:#268bd2}.react-flow{direction:ltr;--xy-edge-stroke-default: #b1b1b7;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #555;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(255, 255, 255, .5);--xy-minimap-background-color-default: #fff;--xy-minimap-mask-background-color-default: rgb(240, 240, 240, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #e2e2e2;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: transparent;--xy-background-pattern-dots-color-default: #91919a;--xy-background-pattern-lines-color-default: #eee;--xy-background-pattern-cross-color-default: #e2e2e2;background-color:var(--xy-background-color, var(--xy-background-color-default));--xy-node-color-default: inherit;--xy-node-border-default: 1px solid #1a192b;--xy-node-background-color-default: #fff;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #1a192b;--xy-node-border-radius-default: 3px;--xy-handle-background-color-default: #1a192b;--xy-handle-border-color-default: #fff;--xy-selection-background-color-default: rgba(0, 89, 220, .08);--xy-selection-border-default: 1px dotted rgba(0, 89, 220, .8);--xy-controls-button-background-color-default: #fefefe;--xy-controls-button-background-color-hover-default: #f4f4f4;--xy-controls-button-color-default: inherit;--xy-controls-button-color-hover-default: inherit;--xy-controls-button-border-color-default: #eee;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #ffffff;--xy-edge-label-color-default: inherit;--xy-resize-background-color-default: #3367d9}.react-flow.dark{--xy-edge-stroke-default: #3e3e3e;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #727272;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(150, 150, 150, .25);--xy-minimap-background-color-default: #141414;--xy-minimap-mask-background-color-default: rgb(60, 60, 60, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #2b2b2b;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: #141414;--xy-background-pattern-dots-color-default: #777;--xy-background-pattern-lines-color-default: #777;--xy-background-pattern-cross-color-default: #777;--xy-node-color-default: #f8f8f8;--xy-node-border-default: 1px solid #3c3c3c;--xy-node-background-color-default: #1e1e1e;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #999;--xy-handle-background-color-default: #bebebe;--xy-handle-border-color-default: #1e1e1e;--xy-selection-background-color-default: rgba(200, 200, 220, .08);--xy-selection-border-default: 1px dotted rgba(200, 200, 220, .8);--xy-controls-button-background-color-default: #2b2b2b;--xy-controls-button-background-color-hover-default: #3e3e3e;--xy-controls-button-color-default: #f8f8f8;--xy-controls-button-color-hover-default: #fff;--xy-controls-button-border-color-default: #5b5b5b;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #141414;--xy-edge-label-color-default: #f8f8f8}.react-flow__background{background-color:var(--xy-background-color, var(--xy-background-color-props, var(--xy-background-color-default)));pointer-events:none;z-index:-1}.react-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.react-flow__pane{z-index:1}.react-flow__pane.draggable{cursor:grab}.react-flow__pane.dragging{cursor:grabbing}.react-flow__pane.selection{cursor:pointer}.react-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.react-flow__renderer{z-index:4}.react-flow__selection{z-index:6}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible{outline:none}.react-flow__edge-path{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default));stroke-width:var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));fill:none}.react-flow__connection-path{stroke:var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));stroke-width:var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));fill:none}.react-flow .react-flow__edges{position:absolute}.react-flow .react-flow__edges svg{overflow:visible;position:absolute;pointer-events:none}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.selectable{cursor:pointer}.react-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.react-flow__edge.animated path.react-flow__edge-interaction{stroke-dasharray:none;animation:none}.react-flow__edge.inactive{pointer-events:none}.react-flow__edge.selected,.react-flow__edge:focus,.react-flow__edge:focus-visible{outline:none}.react-flow__edge.selected .react-flow__edge-path,.react-flow__edge.selectable:focus .react-flow__edge-path,.react-flow__edge.selectable:focus-visible .react-flow__edge-path{stroke:var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default))}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge .react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}svg.react-flow__connectionline{z-index:1001;overflow:visible;position:absolute}.react-flow__nodes{pointer-events:none;transform-origin:0 0}.react-flow__node{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:default}.react-flow__node.selectable{cursor:pointer}.react-flow__node.draggable{cursor:grab;pointer-events:all}.react-flow__node.draggable.dragging{cursor:grabbing}.react-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.react-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.react-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background-color:var(--xy-handle-background-color, var(--xy-handle-background-color-default));border:1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));border-radius:100%}.react-flow__handle.connectingfrom{pointer-events:all}.react-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.react-flow__handle-bottom{top:auto;left:50%;bottom:0;transform:translate(-50%,50%)}.react-flow__handle-top{top:0;left:50%;transform:translate(-50%,-50%)}.react-flow__handle-left{top:50%;left:0;transform:translate(-50%,-50%)}.react-flow__handle-right{top:50%;right:0;transform:translate(50%,-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__panel{position:absolute;z-index:5;margin:15px}.react-flow__panel.top{top:0}.react-flow__panel.bottom{bottom:0}.react-flow__panel.left{left:0}.react-flow__panel.right{right:0}.react-flow__panel.center{left:50%;transform:translate(-50%)}.react-flow__attribution{font-size:10px;background:var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));padding:2px 3px;margin:0}.react-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;left:0;top:0}.react-flow__viewport-portal{position:absolute;width:100%;height:100%;left:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__minimap{background:var( --xy-minimap-background-color-props, var(--xy-minimap-background-color, var(--xy-minimap-background-color-default)) )}.react-flow__minimap-svg{display:block}.react-flow__minimap-mask{fill:var( --xy-minimap-mask-background-color-props, var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default)) );stroke:var( --xy-minimap-mask-stroke-color-props, var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default)) );stroke-width:var( --xy-minimap-mask-stroke-width-props, var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default)) )}.react-flow__minimap-node{fill:var( --xy-minimap-node-background-color-props, var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default)) );stroke:var( --xy-minimap-node-stroke-color-props, var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default)) );stroke-width:var( --xy-minimap-node-stroke-width-props, var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default)) )}.react-flow__background-pattern.dots{fill:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default)) )}.react-flow__background-pattern.lines{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default)) )}.react-flow__background-pattern.cross{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default)) )}.react-flow__controls{display:flex;flex-direction:column;box-shadow:var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default))}.react-flow__controls.horizontal{flex-direction:row}.react-flow__controls-button{display:flex;justify-content:center;align-items:center;height:26px;width:26px;padding:4px;border:none;background:var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));border-bottom:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) );color:var( --xy-controls-button-color-props, var(--xy-controls-button-color, var(--xy-controls-button-color-default)) );cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.react-flow__controls-button svg{width:100%;max-width:12px;max-height:12px;fill:currentColor}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-text{font-size:10px}.react-flow__node.selectable:focus,.react-flow__node.selectable:focus-visible{outline:none}.react-flow__node-input,.react-flow__node-default,.react-flow__node-output,.react-flow__node-group{padding:10px;border-radius:var(--xy-node-border-radius, var(--xy-node-border-radius-default));width:150px;font-size:12px;color:var(--xy-node-color, var(--xy-node-color-default));text-align:center;border:var(--xy-node-border, var(--xy-node-border-default));background-color:var(--xy-node-background-color, var(--xy-node-background-color-default))}.react-flow__node-input.selectable:hover,.react-flow__node-default.selectable:hover,.react-flow__node-output.selectable:hover,.react-flow__node-group.selectable:hover{box-shadow:var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default))}.react-flow__node-input.selectable.selected,.react-flow__node-input.selectable:focus,.react-flow__node-input.selectable:focus-visible,.react-flow__node-default.selectable.selected,.react-flow__node-default.selectable:focus,.react-flow__node-default.selectable:focus-visible,.react-flow__node-output.selectable.selected,.react-flow__node-output.selectable:focus,.react-flow__node-output.selectable:focus-visible,.react-flow__node-group.selectable.selected,.react-flow__node-group.selectable:focus,.react-flow__node-group.selectable:focus-visible{box-shadow:var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default))}.react-flow__node-group{background-color:var(--xy-node-group-background-color, var(--xy-node-group-background-color-default))}.react-flow__nodesselection-rect,.react-flow__selection{background:var(--xy-selection-background-color, var(--xy-selection-background-color-default));border:var(--xy-selection-border, var(--xy-selection-border-default))}.react-flow__nodesselection-rect:focus,.react-flow__nodesselection-rect:focus-visible,.react-flow__selection:focus,.react-flow__selection:focus-visible{outline:none}.react-flow__controls-button:hover{background:var( --xy-controls-button-background-color-hover-props, var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default)) );color:var( --xy-controls-button-color-hover-props, var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default)) )}.react-flow__controls-button:disabled{pointer-events:none}.react-flow__controls-button:disabled svg{fill-opacity:.4}.react-flow__controls-button:last-child{border-bottom:none}.react-flow__resize-control{position:absolute}.react-flow__resize-control.left,.react-flow__resize-control.right{cursor:ew-resize}.react-flow__resize-control.top,.react-flow__resize-control.bottom{cursor:ns-resize}.react-flow__resize-control.top.left,.react-flow__resize-control.bottom.right{cursor:nwse-resize}.react-flow__resize-control.bottom.left,.react-flow__resize-control.top.right{cursor:nesw-resize}.react-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));transform:translate(-50%,-50%)}.react-flow__resize-control.handle.left{left:0;top:50%}.react-flow__resize-control.handle.right{left:100%;top:50%}.react-flow__resize-control.handle.top{left:50%;top:0}.react-flow__resize-control.handle.bottom{left:50%;top:100%}.react-flow__resize-control.handle.top.left,.react-flow__resize-control.handle.bottom.left{left:0}.react-flow__resize-control.handle.top.right,.react-flow__resize-control.handle.bottom.right{left:100%}.react-flow__resize-control.line{border-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));border-width:0;border-style:solid}.react-flow__resize-control.line.left,.react-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.react-flow__resize-control.line.left{left:0;border-left-width:1px}.react-flow__resize-control.line.right{left:100%;border-right-width:1px}.react-flow__resize-control.line.top,.react-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.react-flow__resize-control.line.top{top:0;border-top-width:1px}.react-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}.react-flow__edge-textbg{fill:var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default))}.react-flow__edge-text{fill:var(--xy-edge-label-color, var(--xy-edge-label-color-default))}

&lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;root&quot; class=&quot;&quot;&gt;&lt;/div&gt;

        &lt;!-- Inject the startup config placeholder into a script --&gt;
        &lt;script&gt;window.B64GLTF = &quot;Z2xURgIAAACIcAAArAYAAEpTT057InNjZW5lIjowLCJzY2VuZXMiOlt7Im5vZGVzIjpbMF0sImV4dHJhcyI6eyJkcmF3X3Jhbmdlc19ub2RlMCI6eyIzIjpbMCwzNl0sIjQiOlszNiwxMzJdLCI1IjpbMTY4LDEzMl0sIjYiOlszMDAsMTMyXSwiNyI6WzQzMiwxMzJdLCI4IjpbNTY0LDM2XSwiOSI6WzYwMCwxMzJdLCIxMCI6WzczMiwxMzJdLCIxMSI6Wzg2NCwxMzJdLCIxMiI6Wzk5NiwxMzJdfSwiaWRfaGllcmFyY2h5Ijp7IjEyIjpbImJtNF9jb3B5IiwiMiJdLCIxMSI6WyJibTNfY29weSIsIjIiXSwiMTAiOlsiYm0yX2NvcHkiLCIyIl0sIjkiOlsiYm0xX2NvcHkiLCIyIl0sIjgiOlsicGwxX2NvcHkiLCIyIl0sIjciOlsiYm00IiwiMSJdLCI2IjpbImJtMyIsIjEiXSwiNSI6WyJibTIiLCIxIl0sIjQiOlsiYm0xIiwiMSJdLCIzIjpbInBsMSIsIjEiXSwiMiI6WyJteV9jb3BpZWRfcGFydCIsIjAiXSwiMSI6WyJteVBhcnQiLCIwIl0sIjAiOlsiVG9wUGFydCIsIioiXX19fV0sImFzc2V0Ijp7InZlcnNpb24iOiIyLjAiLCJnZW5lcmF0b3IiOiJodHRwczovL2dpdGh1Yi5jb20vbWlrZWRoL3RyaW1lc2gifSwiYWNjZXNzb3JzIjpbeyJjb21wb25lbnRUeXBlIjo1MTI1LCJ0eXBlIjoiU0NBTEFSIiwiYnVmZmVyVmlldyI6MCwiY291bnQiOjExMjgsIm1heCI6WzExMjddLCJtaW4iOlswXX0seyJjb21wb25lbnRUeXBlIjo1MTI2LCJ0eXBlIjoiVkVDMyIsImJ5dGVPZmZzZXQiOjAsImJ1ZmZlclZpZXciOjEsImNvdW50IjoxMTI4LCJtYXgiOls1LjA3NDk5OTgwOTI2NTEzNyw3LjEyNDEwMTE2MTk1Njc4NywxLjE0OTk5OTk3NjE1ODE0Ml0sIm1pbiI6Wy0zLjU4ODU2NzAxODUwODkxMSwtMC4wNzUwMDAwMDI5ODAyMzIyNCwtMC4xNTAwMDAwMDU5NjA0NjQ0OF19LHsiY29tcG9uZW50VHlwZSI6NTEyNiwidHlwZSI6IlZFQzIiLCJieXRlT2Zmc2V0IjowLCJidWZmZXJWaWV3IjoyLCJjb3VudCI6MTEyOCwibWF4IjpbMC4wLDEuMF0sIm1pbiI6WzAuMCwxLjBdfV0sIm1lc2hlcyI6W3sibmFtZSI6Im5vZGUwIiwiZXh0cmFzIjp7fSwicHJpbWl0aXZlcyI6W3siYXR0cmlidXRlcyI6eyJQT1NJVElPTiI6MSwiVEVYQ09PUkRfMCI6Mn0sImluZGljZXMiOjAsIm1vZGUiOjQsIm1hdGVyaWFsIjowfV19XSwibWF0ZXJpYWxzIjpbeyJwYnJNZXRhbGxpY1JvdWdobmVzcyI6eyJiYXNlQ29sb3JGYWN0b3IiOlsxLjAsMS4wLDEuMCwxLjBdfSwibmFtZSI6Im1hdDAiLCJkb3VibGVTaWRlZCI6dHJ1ZX1dLCJub2RlcyI6W3sibmFtZSI6IlRvcFBhcnQiLCJjaGlsZHJlbiI6WzFdfSx7Im5hbWUiOiJub2RlMCIsIm1lc2giOjB9XSwiYnVmZmVycyI6W3siYnl0ZUxlbmd0aCI6MjcwNzJ9XSwiYnVmZmVyVmlld3MiOlt7ImJ1ZmZlciI6MCwiYnl0ZU9mZnNldCI6MCwiYnl0ZUxlbmd0aCI6NDUxMn0seyJidWZmZXIiOjAsImJ5dGVPZmZzZXQiOjQ1MTIsImJ5dGVMZW5ndGgiOjEzNTM2fSx7ImJ1ZmZlciI6MCwiYnl0ZU9mZnNldCI6MTgwNDgsImJ5dGVMZW5ndGgiOjkwMjR9XSwiZXh0ZW5zaW9uc1VzZWQiOlsiQURBX0VYVF9kYXRhIl0sImV4dGVuc2lvbnMiOnsiQURBX0VYVF9kYXRhIjp7InNpbXVsYXRpb25fb2JqZWN0cyI6W10sImRlc2lnbl9vYmplY3RzIjpbeyJuYW1lIjoiVG9wUGFydCIsImRlc2NyaXB0aW9uIjoiUGFydCIsImdyb3VwcyI6W10sIm5vZGVfcmVmZXJlbmNlcyI6eyJmYWNlcyI6WyJub2RlMCJdfX1dLCJ2ZXJzaW9uIjoiMS4wLjAifX19ICAgwGkAAEJJTgAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAAJQAAACYAAAAnAAAAKAAAACkAAAAqAAAAKwAAACwAAAAtAAAALgAAAC8AAAAwAAAAMQAAADIAAAAzAAAANAAAADUAAAA2AAAANwAAADgAAAA5AAAAOgAAADsAAAA8AAAAPQAAAD4AAAA/AAAAQAAAAEEAAABCAAAAQwAAAEQAAABFAAAARgAAAEcAAABIAAAASQAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAAFAAAABRAAAAUgAAAFMAAABUAAAAVQAAAFYAAABXAAAAWAAAAFkAAABaAAAAWwAAAFwAAABdAAAAXgAAAF8AAABgAAAAYQAAAGIAAABjAAAAZAAAAGUAAABmAAAAZwAAAGgAAABpAAAAagAAAGsAAABsAAAAbQAAAG4AAABvAAAAcAAAAHEAAAByAAAAcwAAAHQAAAB1AAAAdgAAAHcAAAB4AAAAeQAAAHoAAAB7AAAAfAAAAH0AAAB+AAAAfwAAAIAAAACBAAAAggAAAIMAAACEAAAAhQAAAIYAAACHAAAAiAAAAIkAAACKAAAAiwAAAIwAAACNAAAAjgAAAI8AAACQAAAAkQAAAJIAAACTAAAAlAAAAJUAAACWAAAAlwAAAJgAAACZAAAAmgAAAJsAAACcAAAAnQAAAJ4AAACfAAAAoAAAAKEAAACiAAAAowAAAKQAAAClAAAApgAAAKcAAACoAAAAqQAAAKoAAACrAAAArAAAAK0AAACuAAAArwAAALAAAACxAAAAsgAAALMAAAC0AAAAtQAAALYAAAC3AAAAuAAAALkAAAC6AAAAuwAAALwAAAC9AAAAvgAAAL8AAADAAAAAwQAAAMIAAADDAAAAxAAAAMUAAADGAAAAxwAAAMgAAADJAAAAygAAAMsAAADMAAAAzQAAAM4AAADPAAAA0AAAANEAAADSAAAA0wAAANQAAADVAAAA1gAAANcAAADYAAAA2QAAANoAAADbAAAA3AAAAN0AAADeAAAA3wAAAOAAAADhAAAA4gAAAOMAAADkAAAA5QAAAOYAAADnAAAA6AAAAOkAAADqAAAA6wAAAOwAAADtAAAA7gAAAO8AAADwAAAA8QAAAPIAAADzAAAA9AAAAPUAAAD2AAAA9wAAAPgAAAD5AAAA+gAAAPsAAAD8AAAA/QAAAP4AAAD/AAAAAAEAAAEBAAACAQAAAwEAAAQBAAAFAQAABgEAAAcBAAAIAQAACQEAAAoBAAALAQAADAEAAA0BAAAOAQAADwEAABABAAARAQAAEgEAABMBAAAUAQAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAABwBAAAdAQAAHgEAAB8BAAAgAQAAIQEAACIBAAAjAQAAJAEAACUBAAAmAQAAJwEAACgBAAApAQAAKgEAACsBAAAsAQAALQEAAC4BAAAvAQAAMAEAADEBAAAyAQAAMwEAADQBAAA1AQAANgEAADcBAAA4AQAAOQEAADoBAAA7AQAAPAEAAD0BAAA+AQAAPwEAAEABAABBAQAAQgEAAEMBAABEAQAARQEAAEYBAABHAQAASAEAAEkBAABKAQAASwEAAEwBAABNAQAATgEAAE8BAABQAQAAUQEAAFIBAABTAQAAVAEAAFUBAABWAQAAVwEAAFgBAABZAQAAWgEAAFsBAABcAQAAXQEAAF4BAABfAQAAYAEAAGEBAABiAQAAYwEAAGQBAABlAQAAZgEAAGcBAABoAQAAaQEAAGoBAABrAQAAbAEAAG0BAABuAQAAbwEAAHABAABxAQAAcgEAAHMBAAB0AQAAdQEAAHYBAAB3AQAAeAEAAHkBAAB6AQAAewEAAHwBAAB9AQAAfgEAAH8BAACAAQAAgQEAAIIBAACDAQAAhAEAAIUBAACGAQAAhwEAAIgBAACJAQAAigEAAIsBAACMAQAAjQEAAI4BAACPAQAAkAEAAJEBAACSAQAAkwEAAJQBAACVAQAAlgEAAJcBAACYAQAAmQEAAJoBAACbAQAAnAEAAJ0BAACeAQAAnwEAAKABAAChAQAAogEAAKMBAACkAQAApQEAAKYBAACnAQAAqAEAAKkBAACqAQAAqwEAAKwBAACtAQAArgEAAK8BAACwAQAAsQEAALIBAACzAQAAtAEAALUBAAC2AQAAtwEAALgBAAC5AQAAugEAALsBAAC8AQAAvQEAAL4BAAC/AQAAwAEAAMEBAADCAQAAwwEAAMQBAADFAQAAxgEAAMcBAADIAQAAyQEAAMoBAADLAQAAzAEAAM0BAADOAQAAzwEAANABAADRAQAA0gEAANMBAADUAQAA1QEAANYBAADXAQAA2AEAANkBAADaAQAA2wEAANwBAADdAQAA3gEAAN8BAADgAQAA4QEAAOIBAADjAQAA5AEAAOUBAADmAQAA5wEAAOgBAADpAQAA6gEAAOsBAADsAQAA7QEAAO4BAADvAQAA8AEAAPEBAADyAQAA8wEAAPQBAAD1AQAA9gEAAPcBAAD4AQAA+QEAAPoBAAD7AQAA/AEAAP0BAAD+AQAA/wEAAAACAAABAgAAAgIAAAMCAAAEAgAABQIAAAYCAAAHAgAACAIAAAkCAAAKAgAACwIAAAwCAAANAgAADgIAAA8CAAAQAgAAEQIAABICAAATAgAAFAIAABUCAAAWAgAAFwIAABgCAAAZAgAAGgIAABsCAAAcAgAAHQIAAB4CAAAfAgAAIAIAACECAAAiAgAAIwIAACQCAAAlAgAAJgIAACcCAAAoAgAAKQIAACoCAAArAgAALAIAAC0CAAAuAgAALwIAADACAAAxAgAAMgIAADMCAAA0AgAANQIAADYCAAA3AgAAOAIAADkCAAA6AgAAOwIAADwCAAA9AgAAPgIAAD8CAABAAgAAQQIAAEICAABDAgAARAIAAEUCAABGAgAARwIAAEgCAABJAgAASgIAAEsCAABMAgAATQIAAE4CAABPAgAAUAIAAFECAABSAgAAUwIAAFQCAABVAgAAVgIAAFcCAABYAgAAWQIAAFoCAABbAgAAXAIAAF0CAABeAgAAXwIAAGACAABhAgAAYgIAAGMCAABkAgAAZQIAAGYCAABnAgAAaAIAAGkCAABqAgAAawIAAGwCAABtAgAAbgIAAG8CAABwAgAAcQIAAHICAABzAgAAdAIAAHUCAAB2AgAAdwIAAHgCAAB5AgAAegIAAHsCAAB8AgAAfQIAAH4CAAB/AgAAgAIAAIECAACCAgAAgwIAAIQCAACFAgAAhgIAAIcCAACIAgAAiQIAAIoCAACLAgAAjAIAAI0CAACOAgAAjwIAAJACAACRAgAAkgIAAJMCAACUAgAAlQIAAJYCAACXAgAAmAIAAJkCAACaAgAAmwIAAJwCAACdAgAAngIAAJ8CAACgAgAAoQIAAKICAACjAgAApAIAAKUCAACmAgAApwIAAKgCAACpAgAAqgIAAKsCAACsAgAArQIAAK4CAACvAgAAsAIAALECAACyAgAAswIAALQCAAC1AgAAtgIAALcCAAC4AgAAuQIAALoCAAC7AgAAvAIAAL0CAAC+AgAAvwIAAMACAADBAgAAwgIAAMMCAADEAgAAxQIAAMYCAADHAgAAyAIAAMkCAADKAgAAywIAAMwCAADNAgAAzgIAAM8CAADQAgAA0QIAANICAADTAgAA1AIAANUCAADWAgAA1wIAANgCAADZAgAA2gIAANsCAADcAgAA3QIAAN4CAADfAgAA4AIAAOECAADiAgAA4wIAAOQCAADlAgAA5gIAAOcCAADoAgAA6QIAAOoCAADrAgAA7AIAAO0CAADuAgAA7wIAAPACAADxAgAA8gIAAPMCAAD0AgAA9QIAAPYCAAD3AgAA+AIAAPkCAAD6AgAA+wIAAPwCAAD9AgAA/gIAAP8CAAAAAwAAAQMAAAIDAAADAwAABAMAAAUDAAAGAwAABwMAAAgDAAAJAwAACgMAAAsDAAAMAwAADQMAAA4DAAAPAwAAEAMAABEDAAASAwAAEwMAABQDAAAVAwAAFgMAABcDAAAYAwAAGQMAABoDAAAbAwAAHAMAAB0DAAAeAwAAHwMAACADAAAhAwAAIgMAACMDAAAkAwAAJQMAACYDAAAnAwAAKAMAACkDAAAqAwAAKwMAACwDAAAtAwAALgMAAC8DAAAwAwAAMQMAADIDAAAzAwAANAMAADUDAAA2AwAANwMAADgDAAA5AwAAOgMAADsDAAA8AwAAPQMAAD4DAAA/AwAAQAMAAEEDAABCAwAAQwMAAEQDAABFAwAARgMAAEcDAABIAwAASQMAAEoDAABLAwAATAMAAE0DAABOAwAATwMAAFADAABRAwAAUgMAAFMDAABUAwAAVQMAAFYDAABXAwAAWAMAAFkDAABaAwAAWwMAAFwDAABdAwAAXgMAAF8DAABgAwAAYQMAAGIDAABjAwAAZAMAAGUDAABmAwAAZwMAAGgDAABpAwAAagMAAGsDAABsAwAAbQMAAG4DAABvAwAAcAMAAHEDAAByAwAAcwMAAHQDAAB1AwAAdgMAAHcDAAB4AwAAeQMAAHoDAAB7AwAAfAMAAH0DAAB+AwAAfwMAAIADAACBAwAAggMAAIMDAACEAwAAhQMAAIYDAACHAwAAiAMAAIkDAACKAwAAiwMAAIwDAACNAwAAjgMAAI8DAACQAwAAkQMAAJIDAACTAwAAlAMAAJUDAACWAwAAlwMAAJgDAACZAwAAmgMAAJsDAACcAwAAnQMAAJ4DAACfAwAAoAMAAKEDAACiAwAAowMAAKQDAAClAwAApgMAAKcDAACoAwAAqQMAAKoDAACrAwAArAMAAK0DAACuAwAArwMAALADAACxAwAAsgMAALMDAAC0AwAAtQMAALYDAAC3AwAAuAMAALkDAAC6AwAAuwMAALwDAAC9AwAAvgMAAL8DAADAAwAAwQMAAMIDAADDAwAAxAMAAMUDAADGAwAAxwMAAMgDAADJAwAAygMAAMsDAADMAwAAzQMAAM4DAADPAwAA0AMAANEDAADSAwAA0wMAANQDAADVAwAA1gMAANcDAADYAwAA2QMAANoDAADbAwAA3AMAAN0DAADeAwAA3wMAAOADAADhAwAA4gMAAOMDAADkAwAA5QMAAOYDAADnAwAA6AMAAOkDAADqAwAA6wMAAOwDAADtAwAA7gMAAO8DAADwAwAA8QMAAPIDAADzAwAA9AMAAPUDAAD2AwAA9wMAAPgDAAD5AwAA+gMAAPsDAAD8AwAA/QMAAP4DAAD/AwAAAAQAAAEEAAACBAAAAwQAAAQEAAAFBAAABgQAAAcEAAAIBAAACQQAAAoEAAALBAAADAQAAA0EAAAOBAAADwQAABAEAAARBAAAEgQAABMEAAAUBAAAFQQAABYEAAAXBAAAGAQAABkEAAAaBAAAGwQAABwEAAAdBAAAHgQAAB8EAAAgBAAAIQQAACIEAAAjBAAAJAQAACUEAAAmBAAAJwQAACgEAAApBAAAKgQAACsEAAAsBAAALQQAAC4EAAAvBAAAMAQAADEEAAAyBAAAMwQAADQEAAA1BAAANgQAADcEAAA4BAAAOQQAADoEAAA7BAAAPAQAAD0EAAA+BAAAPwQAAEAEAABBBAAAQgQAAEMEAABEBAAARQQAAEYEAABHBAAASAQAAEkEAABKBAAASwQAAEwEAABNBAAATgQAAE8EAABQBAAAUQQAAFIEAABTBAAAVAQAAFUEAABWBAAAVwQAAFgEAABZBAAAWgQAAFsEAABcBAAAXQQAAF4EAABfBAAAYAQAAGEEAABiBAAAYwQAAGQEAABlBAAAZgQAAGcEAAAAAAAAAAAAAAAAAAAAAKBAAAAAAAAAAAAAAKBAAAAAAArXIzwAAAAAAAAAAAAAAAAAAKBAAAAAAArXIzwAAAAAAAAAAArXIzwAAAAAAACgQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArXIzwAAAAAAACgQAAAAAAAAAAAAAAAAArXIzwAAAAAAACgQArXIzwAAKBAAACgQAAAAAAAAAAAAACgQAAAAAAAAAAAAACgQArXIzwAAKBAAACgQAAAAAAAAAAAAACgQArXIzwAAKBAAACgQArXIzwAAKBAAAAAAAAAAAAAAKBAAACgQAAAAAAAAKBAAACgQArXIzwAAKBAAAAAAAAAAAAAAKBAAACgQArXIzwAAKBAAAAAAArXIzwAAAAAAACgQAAAAAAAAKBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgQAAAAAAAAKBAAACgQAAAAAAAAKBAAAAAAAAAAAAAAAAAAACgQArXIzwAAAAAAAAAAArXIzwAAKBAAAAAAArXIzwAAAAAAACgQArXIzwAAKBAAAAAAArXIzwAAKBAAACgQArXIzyamZk9AAAAAJqZGT6amZk9AAAAAKmkDj6amZk9AACgQKmkDj6amZk9AAAAAJqZGT6amZk9AACgQKmkDj6amZk9AACgQJqZGT6amZm9AAAAAJqZGT6amZk9AAAAAJqZGT6amZk9AACgQJqZGT6amZm9AAAAAJqZGT6amZk9AACgQJqZGT6amZm9AACgQJqZGT6amZm9AAAAAKmkDj6amZm9AAAAAJqZGT6amZm9AACgQJqZGT6amZm9AAAAAKmkDj6amZm9AACgQJqZGT6amZm9AACgQKmkDj4ep2i7AAAAAKmkDj6amZm9AAAAAKmkDj6amZm9AACgQKmkDj4ep2i7AAAAAKmkDj6amZm9AACgQKmkDj4ep2i7AACgQKmkDj4ep2i7AAAAAKmkDr4ep2i7AAAAAKmkDj4ep2i7AACgQKmkDj4ep2i7AAAAAKmkDr4ep2i7AACgQKmkDj4ep2i7AACgQKmkDr6amZm9AAAAAKmkDr4ep2i7AAAAAKmkDr4ep2i7AACgQKmkDr6amZm9AAAAAKmkDr4ep2i7AACgQKmkDr6amZm9AACgQKmkDr6amZm9AAAAAJqZGb6amZm9AAAAAKmkDr6amZm9AACgQKmkDr6amZm9AAAAAJqZGb6amZm9AACgQKmkDr6amZm9AACgQJqZGb6amZk9AAAAAJqZGb6amZm9AAAAAJqZGb6amZm9AACgQJqZGb6amZk9AAAAAJqZGb6amZm9AACgQJqZGb6amZk9AACgQJqZGb6amZk9AAAAAKmkDr6amZk9AAAAAJqZGb6amZk9AACgQJqZGb6amZk9AAAAAKmkDr6amZk9AACgQJqZGb6amZk9AACgQKmkDr4ep2g7AAAAAKmkDr6amZk9AAAAAKmkDr6amZk9AACgQKmkDr4ep2g7AAAAAKmkDr6amZk9AACgQKmkDr4ep2g7AACgQKmkDr4ep2g7AAAAAKmkDj4ep2g7AAAAAKmkDr4ep2g7AACgQKmkDr4ep2g7AAAAAKmkDj4ep2g7AACgQKmkDr4ep2g7AACgQKmkDj6amZk9AAAAAKmkDj4ep2g7AAAAAKmkDj4ep2g7AACgQKmkDj6amZk9AAAAAKmkDj4ep2g7AACgQKmkDj6amZk9AACgQKmkDj4ep2i7AAAAAKmkDr6amZm9AAAAAKmkDr6amZm9AAAAAJqZGb6amZk9AAAAAJqZGb4ep2i7AAAAAKmkDr6amZm9AAAAAJqZGb6amZk9AAAAAJqZGb4ep2g7AAAAAKmkDr4ep2i7AAAAAKmkDr6amZk9AAAAAKmkDr4ep2g7AAAAAKmkDr6amZk9AAAAAJqZGb4ep2i7AAAAAKmkDj6amZm9AAAAAJqZGT6amZm9AAAAAKmkDj4ep2g7AAAAAKmkDj4ep2i7AAAAAKmkDj4ep2i7AAAAAKmkDr4ep2g7AAAAAKmkDj4ep2i7AAAAAKmkDr4ep2g7AAAAAKmkDr6amZk9AAAAAJqZGT4ep2g7AAAAAKmkDj6amZk9AAAAAKmkDj6amZk9AAAAAJqZGT6amZm9AAAAAJqZGT4ep2i7AAAAAKmkDj6amZk9AAAAAJqZGT4ep2i7AAAAAKmkDj4ep2g7AAAAAKmkDj4ep2i7AACgQKmkDr6amZm9AACgQJqZGb6amZm9AACgQKmkDr6amZk9AACgQJqZGb6amZm9AACgQJqZGb4ep2i7AACgQKmkDr6amZk9AACgQJqZGb4ep2i7AACgQKmkDr4ep2g7AACgQKmkDr6amZk9AACgQKmkDr6amZk9AACgQJqZGb4ep2g7AACgQKmkDr4ep2i7AACgQKmkDj6amZm9AACgQKmkDj6amZm9AACgQJqZGT4ep2g7AACgQKmkDj4ep2i7AACgQKmkDr4ep2i7AACgQKmkDj4ep2g7AACgQKmkDj4ep2g7AACgQKmkDr4ep2i7AACgQKmkDr6amZk9AACgQJqZGT6amZk9AACgQKmkDj4ep2g7AACgQKmkDj6amZk9AACgQJqZGT4ep2i7AACgQKmkDj6amZm9AACgQJqZGT6amZk9AACgQJqZGT4ep2g7AACgQKmkDj4ep2i7AACgQKmkDj4AAAAAmpmdQJqZGT4AAAAAmpmdQKmkDj4AAKBAmpmdQKmkDj4AAAAAmpmdQJqZGT4AAKBAmpmdQKmkDj4AAKBAmpmdQJqZGT4AAAAAZmaiQJqZGT4AAAAAmpmdQJqZGT4AAKBAmpmdQJqZGT4AAAAAZmaiQJqZGT4AAKBAmpmdQJqZGT4AAKBAZmaiQJqZGT4AAAAAZmaiQKmkDj4AAAAAZmaiQJqZGT4AAKBAZmaiQJqZGT4AAAAAZmaiQKmkDj4AAKBAZmaiQJqZGT4AAKBAZmaiQKmkDj4AAAAAFR2gQKmkDj4AAAAAZmaiQKmkDj4AAKBAZmaiQKmkDj4AAAAAFR2gQKmkDj4AAKBAZmaiQKmkDj4AAKBAFR2gQKmkDj4AAAAAFR2gQKmkDr4AAAAAFR2gQKmkDj4AAKBAFR2gQKmkDj4AAAAAFR2gQKmkDr4AAKBAFR2gQKmkDj4AAKBAFR2gQKmkDr4AAAAAZmaiQKmkDr4AAAAAFR2gQKmkDr4AAKBAFR2gQKmkDr4AAAAAZmaiQKmkDr4AAKBAFR2gQKmkDr4AAKBAZmaiQKmkDr4AAAAAZmaiQJqZGb4AAAAAZmaiQKmkDr4AAKBAZmaiQKmkDr4AAAAAZmaiQJqZGb4AAKBAZmaiQKmkDr4AAKBAZmaiQJqZGb4AAAAAmpmdQJqZGb4AAAAAZmaiQJqZGb4AAKBAZmaiQJqZGb4AAAAAmpmdQJqZGb4AAKBAZmaiQJqZGb4AAKBAmpmdQJqZGb4AAAAAmpmdQKmkDr4AAAAAmpmdQJqZGb4AAKBAmpmdQJqZGb4AAAAAmpmdQKmkDr4AAKBAmpmdQJqZGb4AAKBAmpmdQKmkDr4AAAAA6+KfQKmkDr4AAAAAmpmdQKmkDr4AAKBAmpmdQKmkDr4AAAAA6+KfQKmkDr4AAKBAmpmdQKmkDr4AAKBA6+KfQKmkDr4AAAAA6+KfQKmkDj4AAAAA6+KfQKmkDr4AAKBA6+KfQKmkDr4AAAAA6+KfQKmkDj4AAKBA6+KfQKmkDr4AAKBA6+KfQKmkDj4AAAAAmpmdQKmkDj4AAAAA6+KfQKmkDj4AAKBA6+KfQKmkDj4AAAAAmpmdQKmkDj4AAKBA6+KfQKmkDj4AAKBAmpmdQKmkDj4AAAAAFR2gQKmkDr4AAAAAZmaiQKmkDr4AAAAAZmaiQJqZGb4AAAAAmpmdQJqZGb4AAAAAFR2gQKmkDr4AAAAAZmaiQJqZGb4AAAAAmpmdQJqZGb4AAAAA6+KfQKmkDr4AAAAAFR2gQKmkDr4AAAAAmpmdQKmkDr4AAAAA6+KfQKmkDr4AAAAAmpmdQJqZGb4AAAAAFR2gQKmkDj4AAAAAZmaiQJqZGT4AAAAAZmaiQKmkDj4AAAAA6+KfQKmkDj4AAAAAFR2gQKmkDj4AAAAAFR2gQKmkDr4AAAAA6+KfQKmkDj4AAAAAFR2gQKmkDr4AAAAA6+KfQKmkDr4AAAAAmpmdQJqZGT4AAAAA6+KfQKmkDj4AAAAAmpmdQKmkDj4AAAAAmpmdQJqZGT4AAAAAZmaiQJqZGT4AAAAAFR2gQKmkDj4AAAAAmpmdQJqZGT4AAAAAFR2gQKmkDj4AAAAA6+KfQKmkDj4AAKBAFR2gQKmkDr4AAKBAZmaiQJqZGb4AAKBAZmaiQKmkDr4AAKBAmpmdQJqZGb4AAKBAZmaiQJqZGb4AAKBAFR2gQKmkDr4AAKBAmpmdQJqZGb4AAKBAFR2gQKmkDr4AAKBA6+KfQKmkDr4AAKBAmpmdQKmkDr4AAKBAmpmdQJqZGb4AAKBA6+KfQKmkDr4AAKBAFR2gQKmkDj4AAKBAZmaiQKmkDj4AAKBAZmaiQJqZGT4AAKBA6+KfQKmkDj4AAKBAFR2gQKmkDr4AAKBAFR2gQKmkDj4AAKBA6+KfQKmkDj4AAKBA6+KfQKmkDr4AAKBAFR2gQKmkDr4AAKBAmpmdQJqZGT4AAKBAmpmdQKmkDj4AAKBA6+KfQKmkDj4AAKBAmpmdQJqZGT4AAKBAFR2gQKmkDj4AAKBAZmaiQJqZGT4AAKBAmpmdQJqZGT4AAKBA6+KfQKmkDj4AAKBAFR2gQKmkDj6amZ1AAACgQJqZGT6amZ1AAACgQKmkDj6amZ1AAAAAAKmkDj6amZ1AAACgQJqZGT6amZ1AAAAAAKmkDj6amZ1AAAAAAJqZGT5mZqJAAACgQJqZGT6amZ1AAACgQJqZGT6amZ1AAAAAAJqZGT5mZqJAAACgQJqZGT6amZ1AAAAAAJqZGT5mZqJAAAAAAJqZGT5mZqJAAACgQKmkDj5mZqJAAACgQJqZGT5mZqJAAAAAAJqZGT5mZqJAAACgQKmkDj5mZqJAAAAAAJqZGT5mZqJAAAAAAKmkDj4VHaBAAACgQKmkDj5mZqJAAACgQKmkDj5mZqJAAAAAAKmkDj4VHaBAAACgQKmkDj5mZqJAAAAAAKmkDj4VHaBAAAAAAKmkDj4VHaBAAACgQKmkDr4VHaBAAACgQKmkDj4VHaBAAAAAAKmkDj4VHaBAAACgQKmkDr4VHaBAAAAAAKmkDj4VHaBAAAAAAKmkDr5mZqJAAACgQKmkDr4VHaBAAACgQKmkDr4VHaBAAAAAAKmkDr5mZqJAAACgQKmkDr4VHaBAAAAAAKmkDr5mZqJAAAAAAKmkDr5mZqJAAACgQJqZGb5mZqJAAACgQKmkDr5mZqJAAAAAAKmkDr5mZqJAAACgQJqZGb5mZqJAAAAAAKmkDr5mZqJAAAAAAJqZGb6amZ1AAACgQJqZGb5mZqJAAACgQJqZGb5mZqJAAAAAAJqZGb6amZ1AAACgQJqZGb5mZqJAAAAAAJqZGb6amZ1AAAAAAJqZGb6amZ1AAACgQKmkDr6amZ1AAACgQJqZGb6amZ1AAAAAAJqZGb6amZ1AAACgQKmkDr6amZ1AAAAAAJqZGb6amZ1AAAAAAKmkDr7r4p9AAACgQKmkDr6amZ1AAACgQKmkDr6amZ1AAAAAAKmkDr7r4p9AAACgQKmkDr6amZ1AAAAAAKmkDr7r4p9AAAAAAKmkDr7r4p9AAACgQKmkDj7r4p9AAACgQKmkDr7r4p9AAAAAAKmkDr7r4p9AAACgQKmkDj7r4p9AAAAAAKmkDr7r4p9AAAAAAKmkDj6amZ1AAACgQKmkDj7r4p9AAACgQKmkDj7r4p9AAAAAAKmkDj6amZ1AAACgQKmkDj7r4p9AAAAAAKmkDj6amZ1AAAAAAKmkDj4VHaBAAACgQKmkDr5mZqJAAACgQKmkDr5mZqJAAACgQJqZGb6amZ1AAACgQJqZGb4VHaBAAACgQKmkDr5mZqJAAACgQJqZGb6amZ1AAACgQJqZGb7r4p9AAACgQKmkDr4VHaBAAACgQKmkDr6amZ1AAACgQKmkDr7r4p9AAACgQKmkDr6amZ1AAACgQJqZGb4VHaBAAACgQKmkDj5mZqJAAACgQJqZGT5mZqJAAACgQKmkDj7r4p9AAACgQKmkDj4VHaBAAACgQKmkDj4VHaBAAACgQKmkDr7r4p9AAACgQKmkDj4VHaBAAACgQKmkDr7r4p9AAACgQKmkDr6amZ1AAACgQJqZGT7r4p9AAACgQKmkDj6amZ1AAACgQKmkDj6amZ1AAACgQJqZGT5mZqJAAACgQJqZGT4VHaBAAACgQKmkDj6amZ1AAACgQJqZGT4VHaBAAACgQKmkDj7r4p9AAACgQKmkDj4VHaBAAAAAAKmkDr5mZqJAAAAAAJqZGb5mZqJAAAAAAKmkDr6amZ1AAAAAAJqZGb5mZqJAAAAAAJqZGb4VHaBAAAAAAKmkDr6amZ1AAAAAAJqZGb4VHaBAAAAAAKmkDr7r4p9AAAAAAKmkDr6amZ1AAAAAAKmkDr6amZ1AAAAAAJqZGb7r4p9AAAAAAKmkDr4VHaBAAAAAAKmkDj5mZqJAAAAAAKmkDj5mZqJAAAAAAJqZGT7r4p9AAAAAAKmkDj4VHaBAAAAAAKmkDr4VHaBAAAAAAKmkDj7r4p9AAAAAAKmkDj7r4p9AAAAAAKmkDr4VHaBAAAAAAKmkDr6amZ1AAAAAAJqZGT6amZ1AAAAAAKmkDj7r4p9AAAAAAKmkDj6amZ1AAAAAAJqZGT4VHaBAAAAAAKmkDj5mZqJAAAAAAJqZGT6amZ1AAAAAAJqZGT7r4p9AAAAAAKmkDj4VHaBAAAAAAKmkDj4AAKBAmpmZPZqZGT4AAKBAmpmZPamkDj4AAAAAmpmZPamkDj4AAKBAmpmZPZqZGT4AAAAAmpmZPamkDj4AAAAAmpmZPZqZGT4AAKBAmpmZvZqZGT4AAKBAmpmZPZqZGT4AAAAAmpmZPZqZGT4AAKBAmpmZvZqZGT4AAAAAmpmZPZqZGT4AAAAAmpmZvZqZGT4AAKBAmpmZvamkDj4AAKBAmpmZvZqZGT4AAAAAmpmZvZqZGT4AAKBAmpmZvamkDj4AAAAAmpmZvZqZGT4AAAAAmpmZvamkDj4AAKBAHqdou6mkDj4AAKBAmpmZvamkDj4AAAAAmpmZvamkDj4AAKBAHqdou6mkDj4AAAAAmpmZvamkDj4AAAAAHqdou6mkDj4AAKBAHqdou6mkDr4AAKBAHqdou6mkDj4AAAAAHqdou6mkDj4AAKBAHqdou6mkDr4AAAAAHqdou6mkDj4AAAAAHqdou6mkDr4AAKBAmpmZvamkDr4AAKBAHqdou6mkDr4AAAAAHqdou6mkDr4AAKBAmpmZvamkDr4AAAAAHqdou6mkDr4AAAAAmpmZvamkDr4AAKBAmpmZvZqZGb4AAKBAmpmZvamkDr4AAAAAmpmZvamkDr4AAKBAmpmZvZqZGb4AAAAAmpmZvamkDr4AAAAAmpmZvZqZGb4AAKBAmpmZPZqZGb4AAKBAmpmZvZqZGb4AAAAAmpmZvZqZGb4AAKBAmpmZPZqZGb4AAAAAmpmZvZqZGb4AAAAAmpmZPZqZGb4AAKBAmpmZPamkDr4AAKBAmpmZPZqZGb4AAAAAmpmZPZqZGb4AAKBAmpmZPamkDr4AAAAAmpmZPZqZGb4AAAAAmpmZPamkDr4AAKBAHqdoO6mkDr4AAKBAmpmZPamkDr4AAAAAmpmZPamkDr4AAKBAHqdoO6mkDr4AAAAAmpmZPamkDr4AAAAAHqdoO6mkDr4AAKBAHqdoO6mkDj4AAKBAHqdoO6mkDr4AAAAAHqdoO6mkDr4AAKBAHqdoO6mkDj4AAAAAHqdoO6mkDr4AAAAAHqdoO6mkDj4AAKBAmpmZPamkDj4AAKBAHqdoO6mkDj4AAAAAHqdoO6mkDj4AAKBAmpmZPamkDj4AAAAAHqdoO6mkDj4AAAAAmpmZPamkDj4AAKBAHqdou6mkDr4AAKBAmpmZvamkDr4AAKBAmpmZvZqZGb4AAKBAmpmZPZqZGb4AAKBAHqdou6mkDr4AAKBAmpmZvZqZGb4AAKBAmpmZPZqZGb4AAKBAHqdoO6mkDr4AAKBAHqdou6mkDr4AAKBAmpmZPamkDr4AAKBAHqdoO6mkDr4AAKBAmpmZPZqZGb4AAKBAHqdou6mkDj4AAKBAmpmZvZqZGT4AAKBAmpmZvamkDj4AAKBAHqdoO6mkDj4AAKBAHqdou6mkDj4AAKBAHqdou6mkDr4AAKBAHqdoO6mkDj4AAKBAHqdou6mkDr4AAKBAHqdoO6mkDr4AAKBAmpmZPZqZGT4AAKBAHqdoO6mkDj4AAKBAmpmZPamkDj4AAKBAmpmZPZqZGT4AAKBAmpmZvZqZGT4AAKBAHqdou6mkDj4AAKBAmpmZPZqZGT4AAKBAHqdou6mkDj4AAKBAHqdoO6mkDj4AAAAAHqdou6mkDr4AAAAAmpmZvZqZGb4AAAAAmpmZvamkDr4AAAAAmpmZPZqZGb4AAAAAmpmZvZqZGb4AAAAAHqdou6mkDr4AAAAAmpmZPZqZGb4AAAAAHqdou6mkDr4AAAAAHqdoO6mkDr4AAAAAmpmZPamkDr4AAAAAmpmZPZqZGb4AAAAAHqdoO6mkDr4AAAAAHqdou6mkDj4AAAAAmpmZvamkDj4AAAAAmpmZvZqZGT4AAAAAHqdoO6mkDj4AAAAAHqdou6mkDr4AAAAAHqdou6mkDj4AAAAAHqdoO6mkDj4AAAAAHqdoO6mkDr4AAAAAHqdou6mkDr4AAAAAmpmZPZqZGT4AAAAAmpmZPamkDj4AAAAAHqdoO6mkDj4AAAAAmpmZPZqZGT4AAAAAHqdou6mkDj4AAAAAmpmZvZqZGT4AAAAAmpmZPZqZGT4AAAAAHqdoO6mkDj4AAAAAHqdou6mkDj4AAAAAAAAAAAAAgD8wRmJAMEZiQAAAgD8wRmJAMEZiQK5HgT8AAAAAAAAAAAAAgD8wRmJAMEZiQK5HgT8AAAAAAAAAAK5HgT8wRmLAMEZiQAAAgD8AAAAAAAAAAAAAgD8AAAAAAAAAAK5HgT8wRmLAMEZiQAAAgD8AAAAAAAAAAK5HgT8wRmLAMEZiQK5HgT8AAAAAMEbiQAAAgD8wRmLAMEZiQAAAgD8wRmLAMEZiQK5HgT8AAAAAMEbiQAAAgD8wRmLAMEZiQK5HgT8AAAAAMEbiQK5HgT8wRmJAMEZiQAAAgD8AAAAAMEbiQAAAgD8AAAAAMEbiQK5HgT8wRmJAMEZiQAAAgD8AAAAAMEbiQK5HgT8wRmJAMEZiQK5HgT8wRmLAMEZiQAAAgD8wRmJAMEZiQAAAgD8AAAAAAAAAAAAAgD8wRmLAMEZiQAAAgD8AAAAAMEbiQAAAgD8wRmJAMEZiQAAAgD8wRmLAMEZiQK5HgT8AAAAAAAAAAK5HgT8wRmJAMEZiQK5HgT8wRmLAMEZiQK5HgT8wRmJAMEZiQK5HgT8AAAAAMEbiQK5HgT8kOVk9JDlZPZXUkT9L4V7AFatlQJXUkT9L4V7AFatlQDMzkz8kOVk9JDlZPTMzkz8kOVk9JDlZPZXUkT9L4V7AFatlQDMzkz8kOVk9JDlZPTMzkz9L4V7AFatlQDMzkz8Vq2XAS+FeQDMzkz8kOVm9JDlZvTMzkz8kOVk9JDlZPTMzkz8Vq2XAS+FeQDMzkz8kOVm9JDlZvTMzkz8Vq2XAS+FeQDMzkz8Vq2XAS+FeQJXUkT8kOVm9JDlZvZXUkT8kOVm9JDlZvTMzkz8Vq2XAS+FeQJXUkT8kOVm9JDlZvZXUkT8Vq2XAS+FeQJXUkT9Rb2LADx1iQJXUkT+ogiS7qIIku5XUkT8kOVm9JDlZvZXUkT9Rb2LADx1iQJXUkT+ogiS7qIIku5XUkT9Rb2LADx1iQJXUkT9Rb2LADx1iQNZWXD+ogiS7qIIku9ZWXD+ogiS7qIIku5XUkT9Rb2LADx1iQNZWXD+ogiS7qIIku9ZWXD9Rb2LADx1iQNZWXD8Vq2XAS+FeQNZWXD8kOVm9JDlZvdZWXD+ogiS7qIIku9ZWXD8Vq2XAS+FeQNZWXD8kOVm9JDlZvdZWXD8Vq2XAS+FeQNZWXD8Vq2XAS+FeQJqZWT8kOVm9JDlZvZqZWT8kOVm9JDlZvdZWXD8Vq2XAS+FeQJqZWT8kOVm9JDlZvZqZWT8Vq2XAS+FeQJqZWT9L4V7AFatlQJqZWT8kOVk9JDlZPZqZWT8kOVm9JDlZvZqZWT9L4V7AFatlQJqZWT8kOVk9JDlZPZqZWT9L4V7AFatlQJqZWT9L4V7AFatlQNZWXD8kOVk9JDlZPdZWXD8kOVk9JDlZPZqZWT9L4V7AFatlQNZWXD8kOVk9JDlZPdZWXD9L4V7AFatlQNZWXD8PHWLAUW9iQNZWXD+ogiQ7qIIkO9ZWXD8kOVk9JDlZPdZWXD8PHWLAUW9iQNZWXD+ogiQ7qIIkO9ZWXD8PHWLAUW9iQNZWXD8PHWLAUW9iQJXUkT+ogiQ7qIIkO5XUkT+ogiQ7qIIkO9ZWXD8PHWLAUW9iQJXUkT+ogiQ7qIIkO5XUkT8PHWLAUW9iQJXUkT9L4V7AFatlQJXUkT8kOVk9JDlZPZXUkT+ogiQ7qIIkO5XUkT9L4V7AFatlQJXUkT+ogiS7qIIku9ZWXD8kOVm9JDlZvdZWXD8kOVm9JDlZvZqZWT8kOVk9JDlZPZqZWT+ogiS7qIIku9ZWXD8kOVm9JDlZvZqZWT8kOVk9JDlZPZqZWT+ogiQ7qIIkO9ZWXD+ogiS7qIIku9ZWXD8kOVk9JDlZPdZWXD+ogiQ7qIIkO9ZWXD8kOVk9JDlZPZqZWT+ogiS7qIIku5XUkT8kOVm9JDlZvTMzkz8kOVm9JDlZvZXUkT+ogiQ7qIIkO5XUkT+ogiS7qIIku5XUkT+ogiS7qIIku9ZWXD+ogiQ7qIIkO5XUkT+ogiS7qIIku9ZWXD+ogiQ7qIIkO9ZWXD8kOVk9JDlZPTMzkz+ogiQ7qIIkO5XUkT8kOVk9JDlZPZXUkT8kOVk9JDlZPTMzkz8kOVm9JDlZvTMzkz+ogiS7qIIku5XUkT8kOVk9JDlZPTMzkz+ogiS7qIIku5XUkT+ogiQ7qIIkO5XUkT9Rb2LADx1iQNZWXD8Vq2XAS+FeQJqZWT8Vq2XAS+FeQNZWXD9L4V7AFatlQJqZWT8Vq2XAS+FeQJqZWT9Rb2LADx1iQNZWXD9L4V7AFatlQJqZWT9Rb2LADx1iQNZWXD8PHWLAUW9iQNZWXD9L4V7AFatlQNZWXD9L4V7AFatlQJqZWT8PHWLAUW9iQNZWXD9Rb2LADx1iQJXUkT8Vq2XAS+FeQJXUkT8Vq2XAS+FeQDMzkz8PHWLAUW9iQJXUkT9Rb2LADx1iQNZWXD9Rb2LADx1iQJXUkT8PHWLAUW9iQJXUkT8PHWLAUW9iQNZWXD9Rb2LADx1iQNZWXD9L4V7AFatlQDMzkz9L4V7AFatlQJXUkT8PHWLAUW9iQJXUkT9L4V7AFatlQDMzkz9Rb2LADx1iQJXUkT8Vq2XAS+FeQDMzkz9L4V7AFatlQDMzkz8PHWLAUW9iQJXUkT9Rb2LADx1iQJXUkT9M4V7ATOFeQJXUkT8LOVk9vpPgQJXUkT8LOVk9vpPgQDMzkz9M4V7ATOFeQDMzkz9M4V7ATOFeQJXUkT8LOVk9vpPgQDMzkz9M4V7ATOFeQDMzkz8LOVk9vpPgQDMzkz89OVm9ovjjQDMzkz8Vq2XAFatlQDMzkz9M4V7ATOFeQDMzkz89OVm9ovjjQDMzkz8Vq2XAFatlQJXUkT8Vq2XAFatlQDMzkz89OVm9ovjjQDMzkz8Vq2XAFatlQJXUkT89OVm9ovjjQDMzkz89OVm9ovjjQJXUkT8Vq2XAFatlQJXUkT89OVm9ovjjQJXUkT88hCS7wVriQJXUkT9Rb2LAUW9iQJXUkT8Vq2XAFatlQJXUkT88hCS7wVriQJXUkT9Rb2LAUW9iQJXUkT88hCS7wVriQJXUkT88hCS7wVriQNZWXD9Rb2LAUW9iQNZWXD9Rb2LAUW9iQJXUkT88hCS7wVriQNZWXD9Rb2LAUW9iQNZWXD88hCS7wVriQNZWXD89OVm9ovjjQNZWXD8Vq2XAFatlQNZWXD9Rb2LAUW9iQNZWXD89OVm9ovjjQNZWXD8Vq2XAFatlQJqZWT8Vq2XAFatlQNZWXD89OVm9ovjjQNZWXD8Vq2XAFatlQJqZWT89OVm9ovjjQNZWXD89OVm9ovjjQJqZWT8Vq2XAFatlQJqZWT89OVm9ovjjQJqZWT8LOVk9vpPgQJqZWT9M4V7ATOFeQJqZWT8Vq2XAFatlQJqZWT8LOVk9vpPgQJqZWT9M4V7ATOFeQJqZWT8LOVk9vpPgQJqZWT8LOVk9vpPgQNZWXD9M4V7ATOFeQNZWXD9M4V7ATOFeQJqZWT8LOVk9vpPgQNZWXD9M4V7ATOFeQNZWXD8LOVk9vpPgQNZWXD8UgSQ7oDHiQNZWXD8QHWLAEB1iQNZWXD9M4V7ATOFeQNZWXD8UgSQ7oDHiQNZWXD8QHWLAEB1iQJXUkT8QHWLAEB1iQNZWXD8UgSQ7oDHiQNZWXD8QHWLAEB1iQJXUkT8UgSQ7oDHiQNZWXD8UgSQ7oDHiQJXUkT9M4V7ATOFeQJXUkT8QHWLAEB1iQJXUkT8UgSQ7oDHiQJXUkT9M4V7ATOFeQJXUkT8UgSQ7oDHiQJXUkT8LOVk9vpPgQJXUkT9Rb2LAUW9iQNZWXD8Vq2XAFatlQNZWXD8Vq2XAFatlQJqZWT9M4V7ATOFeQJqZWT9Rb2LAUW9iQNZWXD8Vq2XAFatlQJqZWT9M4V7ATOFeQJqZWT8QHWLAEB1iQNZWXD9Rb2LAUW9iQNZWXD9M4V7ATOFeQNZWXD8QHWLAEB1iQNZWXD9M4V7ATOFeQJqZWT9Rb2LAUW9iQJXUkT8Vq2XAFatlQDMzkz8Vq2XAFatlQJXUkT8QHWLAEB1iQJXUkT9Rb2LAUW9iQJXUkT9Rb2LAUW9iQNZWXD8QHWLAEB1iQJXUkT9Rb2LAUW9iQNZWXD8QHWLAEB1iQNZWXD9M4V7ATOFeQDMzkz8QHWLAEB1iQJXUkT9M4V7ATOFeQJXUkT9M4V7ATOFeQDMzkz8Vq2XAFatlQDMzkz9Rb2LAUW9iQJXUkT9M4V7ATOFeQDMzkz9Rb2LAUW9iQJXUkT8QHWLAEB1iQJXUkT88hCS7wVriQNZWXD89OVm9ovjjQJqZWT89OVm9ovjjQNZWXD8LOVk9vpPgQJqZWT89OVm9ovjjQJqZWT88hCS7wVriQNZWXD8LOVk9vpPgQJqZWT88hCS7wVriQNZWXD8UgSQ7oDHiQNZWXD8LOVk9vpPgQNZWXD8LOVk9vpPgQJqZWT8UgSQ7oDHiQNZWXD88hCS7wVriQJXUkT89OVm9ovjjQJXUkT89OVm9ovjjQDMzkz8UgSQ7oDHiQJXUkT88hCS7wVriQNZWXD88hCS7wVriQJXUkT8UgSQ7oDHiQJXUkT8UgSQ7oDHiQNZWXD88hCS7wVriQNZWXD8LOVk9vpPgQDMzkz8LOVk9vpPgQJXUkT8UgSQ7oDHiQJXUkT8LOVk9vpPgQDMzkz88hCS7wVriQJXUkT89OVm9ovjjQDMzkz8LOVk9vpPgQDMzkz8UgSQ7oDHiQJXUkT88hCS7wVriQJXUkT8kOVm9vpPgQJXUkT9L4V5ATOFeQJXUkT9L4V5ATOFeQDMzkz8kOVm9vpPgQDMzkz8kOVm9vpPgQJXUkT9L4V5ATOFeQDMzkz8kOVk9o/jjQDMzkz8kOVm9vpPgQDMzkz9L4V5ATOFeQDMzkz8kOVk9o/jjQDMzkz9L4V5ATOFeQDMzkz8Vq2VAFatlQDMzkz8kOVk9o/jjQJXUkT8kOVk9o/jjQDMzkz8Vq2VAFatlQDMzkz8kOVk9o/jjQJXUkT8Vq2VAFatlQDMzkz8Vq2VAFatlQJXUkT8kOVk9o/jjQJXUkT8Vq2VAFatlQJXUkT9Rb2JAUW9iQJXUkT+ogiQ7wVriQJXUkT8kOVk9o/jjQJXUkT9Rb2JAUW9iQJXUkT+ogiQ7wVriQNZWXD+ogiQ7wVriQJXUkT9Rb2JAUW9iQJXUkT+ogiQ7wVriQNZWXD9Rb2JAUW9iQJXUkT9Rb2JAUW9iQNZWXD8kOVk9o/jjQNZWXD+ogiQ7wVriQNZWXD9Rb2JAUW9iQNZWXD8kOVk9o/jjQNZWXD9Rb2JAUW9iQNZWXD8Vq2VAFatlQNZWXD8kOVk9o/jjQJqZWT8kOVk9o/jjQNZWXD8Vq2VAFatlQNZWXD8kOVk9o/jjQJqZWT8Vq2VAFatlQNZWXD8Vq2VAFatlQJqZWT8kOVk9o/jjQJqZWT8Vq2VAFatlQJqZWT9L4V5ATOFeQJqZWT8kOVm9vpPgQJqZWT8kOVk9o/jjQJqZWT9L4V5ATOFeQJqZWT8kOVm9vpPgQJqZWT9L4V5ATOFeQJqZWT9L4V5ATOFeQNZWXD8kOVm9vpPgQNZWXD8kOVm9vpPgQJqZWT9L4V5ATOFeQNZWXD8kOVm9vpPgQNZWXD9L4V5ATOFeQNZWXD8PHWJAEB1iQNZWXD+ogiS7oDHiQNZWXD8kOVm9vpPgQNZWXD8PHWJAEB1iQNZWXD+ogiS7oDHiQNZWXD8PHWJAEB1iQNZWXD8PHWJAEB1iQJXUkT+ogiS7oDHiQJXUkT+ogiS7oDHiQNZWXD8PHWJAEB1iQJXUkT+ogiS7oDHiQJXUkT8PHWJAEB1iQJXUkT9L4V5ATOFeQJXUkT8kOVm9vpPgQJXUkT+ogiS7oDHiQJXUkT9L4V5ATOFeQJXUkT+ogiQ7wVriQNZWXD8kOVk9o/jjQNZWXD8kOVk9o/jjQJqZWT8kOVm9vpPgQJqZWT+ogiQ7wVriQNZWXD8kOVk9o/jjQJqZWT8kOVm9vpPgQJqZWT+ogiS7oDHiQNZWXD+ogiQ7wVriQNZWXD8kOVm9vpPgQNZWXD+ogiS7oDHiQNZWXD8kOVm9vpPgQJqZWT+ogiQ7wVriQJXUkT8kOVk9o/jjQDMzkz8kOVk9o/jjQJXUkT+ogiS7oDHiQJXUkT+ogiQ7wVriQJXUkT+ogiQ7wVriQNZWXD+ogiS7oDHiQJXUkT+ogiQ7wVriQNZWXD+ogiS7oDHiQNZWXD8kOVm9vpPgQDMzkz+ogiS7oDHiQJXUkT8kOVm9vpPgQJXUkT8kOVm9vpPgQDMzkz8kOVk9o/jjQDMzkz+ogiQ7wVriQJXUkT8kOVm9vpPgQDMzkz+ogiQ7wVriQJXUkT+ogiS7oDHiQJXUkT9Rb2JAUW9iQNZWXD8Vq2VAFatlQJqZWT8Vq2VAFatlQNZWXD9L4V5ATOFeQJqZWT8Vq2VAFatlQJqZWT9Rb2JAUW9iQNZWXD9L4V5ATOFeQJqZWT9Rb2JAUW9iQNZWXD8PHWJAEB1iQNZWXD9L4V5ATOFeQNZWXD9L4V5ATOFeQJqZWT8PHWJAEB1iQNZWXD9Rb2JAUW9iQJXUkT8Vq2VAFatlQJXUkT8Vq2VAFatlQDMzkz8PHWJAEB1iQJXUkT9Rb2JAUW9iQNZWXD9Rb2JAUW9iQJXUkT8PHWJAEB1iQJXUkT8PHWJAEB1iQNZWXD9Rb2JAUW9iQNZWXD9L4V5ATOFeQDMzkz9L4V5ATOFeQJXUkT8PHWJAEB1iQJXUkT9L4V5ATOFeQDMzkz9Rb2JAUW9iQJXUkT8Vq2VAFatlQDMzkz9L4V5ATOFeQDMzkz8PHWJAEB1iQJXUkT9Rb2JAUW9iQJXUkT9M4V5AFatlQDMzkz9M4V5AFatlQJXUkT8LOVm9PTlZPZXUkT9M4V5AFatlQDMzkz8LOVm9PTlZPZXUkT8LOVm9PTlZPTMzkz9M4V5AFatlQDMzkz8LOVm9PTlZPTMzkz89OVk9CzlZvTMzkz8Vq2VATOFeQDMzkz9M4V5AFatlQDMzkz89OVk9CzlZvTMzkz8Vq2VATOFeQDMzkz89OVk9CzlZvTMzkz89OVk9CzlZvZXUkT8Vq2VATOFeQJXUkT8Vq2VATOFeQDMzkz89OVk9CzlZvZXUkT8Vq2VATOFeQJXUkT89OVk9CzlZvZXUkT88hCQ7FIEku5XUkT9Rb2JAEB1iQJXUkT8Vq2VATOFeQJXUkT88hCQ7FIEku5XUkT9Rb2JAEB1iQJXUkT88hCQ7FIEku5XUkT88hCQ7FIEku9ZWXD9Rb2JAEB1iQNZWXD9Rb2JAEB1iQJXUkT88hCQ7FIEku9ZWXD9Rb2JAEB1iQNZWXD88hCQ7FIEku9ZWXD89OVk9CzlZvdZWXD8Vq2VATOFeQNZWXD9Rb2JAEB1iQNZWXD89OVk9CzlZvdZWXD8Vq2VATOFeQJqZWT8Vq2VATOFeQNZWXD89OVk9CzlZvdZWXD8Vq2VATOFeQJqZWT89OVk9CzlZvdZWXD89OVk9CzlZvZqZWT8Vq2VATOFeQJqZWT89OVk9CzlZvZqZWT8LOVm9PTlZPZqZWT9M4V5AFatlQJqZWT8Vq2VATOFeQJqZWT8LOVm9PTlZPZqZWT9M4V5AFatlQNZWXD9M4V5AFatlQJqZWT8LOVm9PTlZPZqZWT9M4V5AFatlQNZWXD8LOVm9PTlZPZqZWT8LOVm9PTlZPdZWXD9M4V5AFatlQNZWXD8LOVm9PTlZPdZWXD8UgSS7PIQkO9ZWXD8QHWJAUW9iQNZWXD9M4V5AFatlQNZWXD8UgSS7PIQkO9ZWXD8QHWJAUW9iQNZWXD8UgSS7PIQkO9ZWXD8UgSS7PIQkO5XUkT8QHWJAUW9iQJXUkT8QHWJAUW9iQNZWXD8UgSS7PIQkO5XUkT8QHWJAUW9iQJXUkT8UgSS7PIQkO5XUkT8LOVm9PTlZPZXUkT9M4V5AFatlQJXUkT8QHWJAUW9iQJXUkT8LOVm9PTlZPZXUkT9Rb2JAEB1iQNZWXD8Vq2VATOFeQNZWXD8Vq2VATOFeQJqZWT9M4V5AFatlQJqZWT9Rb2JAEB1iQNZWXD8Vq2VATOFeQJqZWT9M4V5AFatlQJqZWT8QHWJAUW9iQNZWXD9Rb2JAEB1iQNZWXD9M4V5AFatlQNZWXD8QHWJAUW9iQNZWXD9M4V5AFatlQJqZWT9Rb2JAEB1iQJXUkT8Vq2VATOFeQDMzkz8Vq2VATOFeQJXUkT8QHWJAUW9iQJXUkT9Rb2JAEB1iQJXUkT9Rb2JAEB1iQNZWXD8QHWJAUW9iQJXUkT9Rb2JAEB1iQNZWXD8QHWJAUW9iQNZWXD9M4V5AFatlQDMzkz8QHWJAUW9iQJXUkT9M4V5AFatlQJXUkT9M4V5AFatlQDMzkz8Vq2VATOFeQDMzkz9Rb2JAEB1iQJXUkT9M4V5AFatlQDMzkz9Rb2JAEB1iQJXUkT8QHWJAUW9iQJXUkT88hCQ7FIEku9ZWXD89OVk9CzlZvZqZWT89OVk9CzlZvdZWXD8LOVm9PTlZPZqZWT89OVk9CzlZvZqZWT88hCQ7FIEku9ZWXD8LOVm9PTlZPZqZWT88hCQ7FIEku9ZWXD8UgSS7PIQkO9ZWXD8LOVm9PTlZPdZWXD8LOVm9PTlZPZqZWT8UgSS7PIQkO9ZWXD88hCQ7FIEku5XUkT89OVk9CzlZvZXUkT89OVk9CzlZvTMzkz8UgSS7PIQkO5XUkT88hCQ7FIEku9ZWXD88hCQ7FIEku5XUkT8UgSS7PIQkO5XUkT8UgSS7PIQkO9ZWXD88hCQ7FIEku9ZWXD8LOVm9PTlZPTMzkz8LOVm9PTlZPZXUkT8UgSS7PIQkO5XUkT8LOVm9PTlZPTMzkz88hCQ7FIEku5XUkT89OVk9CzlZvTMzkz8LOVm9PTlZPTMzkz8UgSS7PIQkO5XUkT88hCQ7FIEku5XUkT8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8AAAAAAACAPwAAAAAAAIA/AAAAAAAAgD8=&quot;;&lt;/script&gt;&lt;script&gt;window.DEACTIVATE_WS = true;&lt;/script&gt;
        &lt;script&gt;window.UNIQUE_VERSION_ID = 1750792942150;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
" width="100%" height="500px" style="border:none;"></iframe></div></div>
</div>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sections.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Sections in ADA</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="boolean_operations.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Boolean Operations</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Kristoffer H. Andersen
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=a1b19286"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>